var contentscript;contentscript =
/******/ (() => { // webpackBootstrap
/******/ 	"use strict";
/******/ 	var __webpack_modules__ = ({

/***/ "./node_modules/@aurelia/kernel/dist/esm/index.js":
/*!********************************************************!*\
  !*** ./node_modules/@aurelia/kernel/dist/esm/index.js ***!
  \********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Metadata": () => /* reexport safe */ _aurelia_metadata__WEBPACK_IMPORTED_MODULE_0__.Metadata,
/* harmony export */   "applyMetadataPolyfill": () => /* reexport safe */ _aurelia_metadata__WEBPACK_IMPORTED_MODULE_0__.applyMetadataPolyfill,
/* harmony export */   "isNullOrUndefined": () => /* reexport safe */ _aurelia_metadata__WEBPACK_IMPORTED_MODULE_0__.isNullOrUndefined,
/* harmony export */   "isObject": () => /* reexport safe */ _aurelia_metadata__WEBPACK_IMPORTED_MODULE_0__.isObject,
/* harmony export */   "metadata": () => /* reexport safe */ _aurelia_metadata__WEBPACK_IMPORTED_MODULE_0__.metadata,
/* harmony export */   "Platform": () => /* reexport safe */ _aurelia_platform__WEBPACK_IMPORTED_MODULE_1__.Platform,
/* harmony export */   "Task": () => /* reexport safe */ _aurelia_platform__WEBPACK_IMPORTED_MODULE_1__.Task,
/* harmony export */   "TaskAbortError": () => /* reexport safe */ _aurelia_platform__WEBPACK_IMPORTED_MODULE_1__.TaskAbortError,
/* harmony export */   "TaskQueue": () => /* reexport safe */ _aurelia_platform__WEBPACK_IMPORTED_MODULE_1__.TaskQueue,
/* harmony export */   "TaskQueuePriority": () => /* reexport safe */ _aurelia_platform__WEBPACK_IMPORTED_MODULE_1__.TaskQueuePriority,
/* harmony export */   "TaskStatus": () => /* reexport safe */ _aurelia_platform__WEBPACK_IMPORTED_MODULE_1__.TaskStatus,
/* harmony export */   "AnalyzedModule": () => /* binding */ AnalyzedModule,
/* harmony export */   "ColorOptions": () => /* binding */ Lt,
/* harmony export */   "ConsoleSink": () => /* binding */ Ht,
/* harmony export */   "ContainerConfiguration": () => /* binding */ ContainerConfiguration,
/* harmony export */   "DI": () => /* binding */ G,
/* harmony export */   "DefaultLogEvent": () => /* binding */ DefaultLogEvent,
/* harmony export */   "DefaultLogEventFactory": () => /* binding */ _t,
/* harmony export */   "DefaultLogger": () => /* binding */ Vt,
/* harmony export */   "DefaultResolver": () => /* binding */ z,
/* harmony export */   "EventAggregator": () => /* binding */ EventAggregator,
/* harmony export */   "IContainer": () => /* binding */ H,
/* harmony export */   "IEventAggregator": () => /* binding */ Yt,
/* harmony export */   "ILogConfig": () => /* binding */ Pt,
/* harmony export */   "ILogEventFactory": () => /* binding */ St,
/* harmony export */   "ILogger": () => /* binding */ Nt,
/* harmony export */   "IModuleLoader": () => /* binding */ Jt,
/* harmony export */   "IPlatform": () => /* binding */ Mt,
/* harmony export */   "IServiceLocator": () => /* binding */ V,
/* harmony export */   "ISink": () => /* binding */ Dt,
/* harmony export */   "InstanceProvider": () => /* binding */ InstanceProvider,
/* harmony export */   "LogConfig": () => /* binding */ LogConfig,
/* harmony export */   "LogLevel": () => /* binding */ Ut,
/* harmony export */   "LoggerConfiguration": () => /* binding */ qt,
/* harmony export */   "ModuleItem": () => /* binding */ ModuleItem,
/* harmony export */   "Protocol": () => /* binding */ S,
/* harmony export */   "Registration": () => /* binding */ $t,
/* harmony export */   "all": () => /* binding */ nt,
/* harmony export */   "bound": () => /* binding */ m,
/* harmony export */   "camelCase": () => /* binding */ l,
/* harmony export */   "compareNumber": () => /* binding */ w,
/* harmony export */   "emptyArray": () => /* binding */ Ot,
/* harmony export */   "emptyObject": () => /* binding */ kt,
/* harmony export */   "factory": () => /* binding */ ot,
/* harmony export */   "firstDefined": () => /* binding */ R,
/* harmony export */   "format": () => /* binding */ xt,
/* harmony export */   "fromAnnotationOrDefinitionOrTypeOrDefault": () => /* binding */ W,
/* harmony export */   "fromAnnotationOrTypeOrDefault": () => /* binding */ B,
/* harmony export */   "fromDefinitionOrDefault": () => /* binding */ Q,
/* harmony export */   "getPrototypeChain": () => /* binding */ b,
/* harmony export */   "ignore": () => /* binding */ st,
/* harmony export */   "inject": () => /* binding */ J,
/* harmony export */   "isArrayIndex": () => /* binding */ i,
/* harmony export */   "isNativeFunction": () => /* binding */ $,
/* harmony export */   "isNumberOrBigInt": () => /* binding */ s,
/* harmony export */   "isStringOrDate": () => /* binding */ o,
/* harmony export */   "kebabCase": () => /* binding */ f,
/* harmony export */   "lazy": () => /* binding */ rt,
/* harmony export */   "mergeArrays": () => /* binding */ p,
/* harmony export */   "mergeDistinct": () => /* binding */ g,
/* harmony export */   "mergeObjects": () => /* binding */ y,
/* harmony export */   "newInstanceForScope": () => /* binding */ ut,
/* harmony export */   "newInstanceOf": () => /* binding */ lt,
/* harmony export */   "nextId": () => /* binding */ d,
/* harmony export */   "noop": () => /* binding */ It,
/* harmony export */   "onResolve": () => /* binding */ E,
/* harmony export */   "optional": () => /* binding */ it,
/* harmony export */   "pascalCase": () => /* binding */ c,
/* harmony export */   "resetId": () => /* binding */ v,
/* harmony export */   "resolveAll": () => /* binding */ A,
/* harmony export */   "singleton": () => /* binding */ tt,
/* harmony export */   "sink": () => /* binding */ Qt,
/* harmony export */   "toArray": () => /* binding */ a,
/* harmony export */   "transient": () => /* binding */ Y
/* harmony export */ });
/* harmony import */ var _aurelia_metadata__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @aurelia/metadata */ "./node_modules/@aurelia/metadata/dist/esm/index.js");
/* harmony import */ var _aurelia_platform__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @aurelia/platform */ "./node_modules/@aurelia/platform/dist/esm/index.js");






const r = {};

function i(t) {
    switch (typeof t) {
      case "number":
        return t >= 0 && (0 | t) === t;

      case "string":
        {
            const e = r[t];
            if (void 0 !== e) return e;
            const n = t.length;
            if (0 === n) return r[t] = false;
            let i = 0;
            let s = 0;
            for (;s < n; ++s) {
                i = t.charCodeAt(s);
                if (0 === s && 48 === i && n > 1 || i < 48 || i > 57) return r[t] = false;
            }
            return r[t] = true;
        }

      default:
        return false;
    }
}

function s(t) {
    switch (typeof t) {
      case "number":
      case "bigint":
        return true;

      default:
        return false;
    }
}

function o(t) {
    switch (typeof t) {
      case "string":
        return true;

      case "object":
        return t instanceof Date;

      default:
        return false;
    }
}

const u = function() {
    let t;
    (function(t) {
        t[t["none"] = 0] = "none";
        t[t["digit"] = 1] = "digit";
        t[t["upper"] = 2] = "upper";
        t[t["lower"] = 3] = "lower";
    })(t || (t = {}));
    const e = Object.assign(Object.create(null), {
        0: true,
        1: true,
        2: true,
        3: true,
        4: true,
        5: true,
        6: true,
        7: true,
        8: true,
        9: true
    });
    function n(t) {
        if ("" === t) return 0;
        if (t !== t.toUpperCase()) return 3;
        if (t !== t.toLowerCase()) return 2;
        if (true === e[t]) return 1;
        return 0;
    }
    return function(t, e) {
        const r = t.length;
        if (0 === r) return t;
        let i = false;
        let s = "";
        let o;
        let u = "";
        let l = 0;
        let c = t.charAt(0);
        let f = n(c);
        let a = 0;
        for (;a < r; ++a) {
            o = l;
            u = c;
            l = f;
            c = t.charAt(a + 1);
            f = n(c);
            if (0 === l) {
                if (s.length > 0) i = true;
            } else {
                if (!i && s.length > 0 && 2 === l) i = 3 === o || 3 === f;
                s += e(u, i);
                i = false;
            }
        }
        return s;
    };
}();

const l = function() {
    const t = Object.create(null);
    function e(t, e) {
        return e ? t.toUpperCase() : t.toLowerCase();
    }
    return function(n) {
        let r = t[n];
        if (void 0 === r) r = t[n] = u(n, e);
        return r;
    };
}();

const c = function() {
    const t = Object.create(null);
    return function(e) {
        let n = t[e];
        if (void 0 === n) {
            n = l(e);
            if (n.length > 0) n = n[0].toUpperCase() + n.slice(1);
            t[e] = n;
        }
        return n;
    };
}();

const f = function() {
    const t = Object.create(null);
    function e(t, e) {
        return e ? `-${t.toLowerCase()}` : t.toLowerCase();
    }
    return function(n) {
        let r = t[n];
        if (void 0 === r) r = t[n] = u(n, e);
        return r;
    };
}();

function a(t) {
    const {length: e} = t;
    const n = Array(e);
    let r = 0;
    for (;r < e; ++r) n[r] = t[r];
    return n;
}

const h = {};

function d(t) {
    if (void 0 === h[t]) h[t] = 0;
    return ++h[t];
}

function v(t) {
    h[t] = 0;
}

function w(t, e) {
    return t - e;
}

function g(t, e, n) {
    if (void 0 === t || null === t || t === Ot) if (void 0 === e || null === e || e === Ot) return Ot; else return n ? e.slice(0) : e; else if (void 0 === e || null === e || e === Ot) return n ? t.slice(0) : t;
    const r = {};
    const i = n ? t.slice(0) : t;
    let s = t.length;
    let o = e.length;
    while (s-- > 0) r[t[s]] = true;
    let u;
    while (o-- > 0) {
        u = e[o];
        if (void 0 === r[u]) {
            i.push(u);
            r[u] = true;
        }
    }
    return i;
}

function m(t, e, n) {
    return {
        configurable: true,
        enumerable: n.enumerable,
        get() {
            const t = n.value.bind(this);
            Reflect.defineProperty(this, e, {
                value: t,
                writable: true,
                configurable: true,
                enumerable: n.enumerable
            });
            return t;
        }
    };
}

function p(...t) {
    const e = [];
    let n = 0;
    const r = t.length;
    let i = 0;
    let s;
    let o = 0;
    for (;o < r; ++o) {
        s = t[o];
        if (void 0 !== s) {
            i = s.length;
            let t = 0;
            for (;t < i; ++t) e[n++] = s[t];
        }
    }
    return e;
}

function y(...t) {
    const e = {};
    const n = t.length;
    let r;
    let i;
    let s = 0;
    for (;n > s; ++s) {
        r = t[s];
        if (void 0 !== r) for (i in r) e[i] = r[i];
    }
    return e;
}

function R(...t) {
    const e = t.length;
    let n;
    let r = 0;
    for (;e > r; ++r) {
        n = t[r];
        if (void 0 !== n) return n;
    }
    throw new Error(`No default value found`);
}

const b = function() {
    const t = Function.prototype;
    const e = Object.getPrototypeOf;
    const n = new WeakMap;
    let r = t;
    let i = 0;
    let s;
    return function(o) {
        s = n.get(o);
        if (void 0 === s) {
            n.set(o, s = [ r = o ]);
            i = 0;
            while ((r = e(r)) !== t) s[++i] = r;
        }
        return s;
    };
}();

function C(...t) {
    return Object.assign(Object.create(null), ...t);
}

const $ = function() {
    const t = new WeakMap;
    let e = false;
    let n = "";
    let r = 0;
    return function(i) {
        e = t.get(i);
        if (void 0 === e) {
            n = i.toString();
            r = n.length;
            e = r >= 29 && r <= 100 && 125 === n.charCodeAt(r - 1) && n.charCodeAt(r - 2) <= 32 && 93 === n.charCodeAt(r - 3) && 101 === n.charCodeAt(r - 4) && 100 === n.charCodeAt(r - 5) && 111 === n.charCodeAt(r - 6) && 99 === n.charCodeAt(r - 7) && 32 === n.charCodeAt(r - 8) && 101 === n.charCodeAt(r - 9) && 118 === n.charCodeAt(r - 10) && 105 === n.charCodeAt(r - 11) && 116 === n.charCodeAt(r - 12) && 97 === n.charCodeAt(r - 13) && 110 === n.charCodeAt(r - 14) && 88 === n.charCodeAt(r - 15);
            t.set(i, e);
        }
        return e;
    };
}();

function E(t, e) {
    if (t instanceof Promise) return t.then(e);
    return e(t);
}

function A(...t) {
    let e;
    let n;
    let r;
    let i = 0;
    let s = t.length;
    for (;i < s; ++i) {
        e = t[i];
        if ((e = t[i]) instanceof Promise) if (void 0 === n) n = e; else if (void 0 === r) r = [ n, e ]; else r.push(e);
    }
    if (void 0 === r) return n;
    return Promise.all(r);
}

const j = _aurelia_metadata__WEBPACK_IMPORTED_MODULE_0__.Metadata.getOwn;

const O = _aurelia_metadata__WEBPACK_IMPORTED_MODULE_0__.Metadata.hasOwn;

const k = _aurelia_metadata__WEBPACK_IMPORTED_MODULE_0__.Metadata.define;

const I = t => "function" === typeof t;

const M = t => "string" === typeof t;

const T = "au:annotation";

const F = (t, e) => {
    if (void 0 === e) return `${T}:${t}`;
    return `${T}:${t}:${e}`;
};

const U = (t, e) => {
    const n = j(T, t);
    if (void 0 === n) k(T, [ e ], t); else n.push(e);
};

const L = Object.freeze({
    name: "au:annotation",
    appendTo: U,
    set(t, e, n) {
        k(F(e), n, t);
    },
    get: (t, e) => j(F(e), t),
    getKeys(t) {
        let e = j(T, t);
        if (void 0 === e) k(T, e = [], t);
        return e;
    },
    isKey: t => t.startsWith(T),
    keyFor: F
});

const P = "au:resource";

const D = Object.freeze({
    name: P,
    appendTo(t, e) {
        const n = j(P, t);
        if (void 0 === n) k(P, [ e ], t); else n.push(e);
    },
    has: t => O(P, t),
    getAll(t) {
        const e = j(P, t);
        if (void 0 === e) return Ot; else return e.map((e => j(e, t)));
    },
    getKeys(t) {
        let e = j(P, t);
        if (void 0 === e) k(P, e = [], t);
        return e;
    },
    isKey: t => t.startsWith(P),
    keyFor(t, e) {
        if (void 0 === e) return `${P}:${t}`;
        return `${P}:${t}:${e}`;
    }
});

const S = {
    annotation: L,
    resource: D
};

const N = Object.prototype.hasOwnProperty;

function W(t, e, n, r) {
    let i = j(F(t), n);
    if (void 0 === i) {
        i = e[t];
        if (void 0 === i) {
            i = n[t];
            if (void 0 === i || !N.call(n, t)) return r();
            return i;
        }
        return i;
    }
    return i;
}

function B(t, e, n) {
    let r = j(F(t), e);
    if (void 0 === r) {
        r = e[t];
        if (void 0 === r || !N.call(e, t)) return n();
        return r;
    }
    return r;
}

function Q(t, e, n) {
    const r = e[t];
    if (void 0 === r) return n();
    return r;
}

(0,_aurelia_metadata__WEBPACK_IMPORTED_MODULE_0__.applyMetadataPolyfill)(Reflect, false, false);

class ResolverBuilder {
    constructor(t, e) {
        this.container = t;
        this.key = e;
    }
    instance(t) {
        return this.registerResolver(0, t);
    }
    singleton(t) {
        return this.registerResolver(1, t);
    }
    transient(t) {
        return this.registerResolver(2, t);
    }
    callback(t) {
        return this.registerResolver(3, t);
    }
    cachedCallback(t) {
        return this.registerResolver(3, Ct(t));
    }
    aliasTo(t) {
        return this.registerResolver(5, t);
    }
    registerResolver(t, e) {
        const {container: n, key: r} = this;
        this.container = this.key = void 0;
        return n.registerResolver(r, new Resolver(r, t, e));
    }
}

function x(t) {
    const e = t.slice();
    const n = Object.keys(t);
    const r = n.length;
    let s;
    for (let o = 0; o < r; ++o) {
        s = n[o];
        if (!i(s)) e[s] = t[s];
    }
    return e;
}

const z = {
    none(t) {
        throw Error(`AUR0002:${t.toString()}`);
    },
    singleton(t) {
        return new Resolver(t, 1, t);
    },
    transient(t) {
        return new Resolver(t, 2, t);
    }
};

class ContainerConfiguration {
    constructor(t, e) {
        this.inheritParentResources = t;
        this.defaultResolver = e;
    }
    static from(t) {
        var e, n;
        if (void 0 === t || t === ContainerConfiguration.DEFAULT) return ContainerConfiguration.DEFAULT;
        return new ContainerConfiguration(null !== (e = t.inheritParentResources) && void 0 !== e ? e : false, null !== (n = t.defaultResolver) && void 0 !== n ? n : z.singleton);
    }
}

ContainerConfiguration.DEFAULT = ContainerConfiguration.from({});

const G = {
    createContainer(t) {
        return new Container(null, ContainerConfiguration.from(t));
    },
    getDesignParamtypes(t) {
        return j("design:paramtypes", t);
    },
    getAnnotationParamtypes(t) {
        const e = F("di:paramtypes");
        return j(e, t);
    },
    getOrCreateAnnotationParamTypes: _,
    getDependencies: K,
    createInterface(t, e) {
        const n = I(t) ? t : e;
        const r = M(t) ? t : void 0;
        const i = function(t, e, n) {
            if (null == t || void 0 !== new.target) throw new Error(`AUR0001:${i.friendlyName}`);
            const r = _(t);
            r[n] = i;
        };
        i.$isInterface = true;
        i.friendlyName = null == r ? "(anonymous)" : r;
        if (null != n) i.register = function(t, e) {
            return n(new ResolverBuilder(t, null !== e && void 0 !== e ? e : i));
        };
        i.toString = function t() {
            return `InterfaceSymbol<${i.friendlyName}>`;
        };
        return i;
    },
    inject(...t) {
        return function(e, n, r) {
            if ("number" === typeof r) {
                const n = _(e);
                const i = t[0];
                if (void 0 !== i) n[r] = i;
            } else if (n) {
                const r = _(e.constructor);
                const i = t[0];
                if (void 0 !== i) r[n] = i;
            } else if (r) {
                const e = r.value;
                const n = _(e);
                let i;
                for (let e = 0; e < t.length; ++e) {
                    i = t[e];
                    if (void 0 !== i) n[e] = i;
                }
            } else {
                const n = _(e);
                let r;
                for (let e = 0; e < t.length; ++e) {
                    r = t[e];
                    if (void 0 !== r) n[e] = r;
                }
            }
        };
    },
    transient(t) {
        t.register = function e(n) {
            const r = $t.transient(t, t);
            return r.register(n, t);
        };
        t.registerInRequestor = false;
        return t;
    },
    singleton(t, e = Z) {
        t.register = function e(n) {
            const r = $t.singleton(t, t);
            return r.register(n, t);
        };
        t.registerInRequestor = e.scoped;
        return t;
    }
};

function K(t) {
    const e = F("di:dependencies");
    let n = j(e, t);
    if (void 0 === n) {
        const r = t.inject;
        if (void 0 === r) {
            const e = G.getDesignParamtypes(t);
            const r = G.getAnnotationParamtypes(t);
            if (void 0 === e) if (void 0 === r) {
                const e = Object.getPrototypeOf(t);
                if (I(e) && e !== Function.prototype) n = x(K(e)); else n = [];
            } else n = x(r); else if (void 0 === r) n = x(e); else {
                n = x(e);
                let t = r.length;
                let s;
                let o = 0;
                for (;o < t; ++o) {
                    s = r[o];
                    if (void 0 !== s) n[o] = s;
                }
                const u = Object.keys(r);
                let l;
                o = 0;
                t = u.length;
                for (o = 0; o < t; ++o) {
                    l = u[o];
                    if (!i(l)) n[l] = r[l];
                }
            }
        } else n = x(r);
        k(e, n, t);
        U(t, e);
    }
    return n;
}

function _(t) {
    const e = F("di:paramtypes");
    let n = j(e, t);
    if (void 0 === n) {
        k(e, n = [], t);
        U(t, e);
    }
    return n;
}

const H = G.createInterface("IContainer");

const V = H;

function q(t) {
    return function(e) {
        const n = function(t, e, r) {
            G.inject(n)(t, e, r);
        };
        n.$isResolver = true;
        n.resolve = function(n, r) {
            return t(e, n, r);
        };
        return n;
    };
}

const J = G.inject;

function X(t) {
    return G.transient(t);
}

function Y(t) {
    return null == t ? X : X(t);
}

const Z = {
    scoped: false
};

function tt(t) {
    if (I(t)) return G.singleton(t);
    return function(e) {
        return G.singleton(e, t);
    };
}

function et(t) {
    return function(e, n) {
        n = !!n;
        const r = function(t, e, n) {
            G.inject(r)(t, e, n);
        };
        r.$isResolver = true;
        r.resolve = function(r, i) {
            return t(e, r, i, n);
        };
        return r;
    };
}

const nt = et(((t, e, n, r) => n.getAll(t, r)));

const rt = q(((t, e, n) => () => n.get(t)));

const it = q(((t, e, n) => {
    if (n.has(t, true)) return n.get(t); else return;
}));

function st(t, e, n) {
    G.inject(st)(t, e, n);
}

st.$isResolver = true;

st.resolve = () => {};

const ot = q(((t, e, n) => (...r) => e.getFactory(t).construct(n, r)));

const ut = q(((t, e, n) => {
    const r = ct(t, e, n);
    const i = new InstanceProvider(String(t), r);
    n.registerResolver(t, i, true);
    return r;
}));

const lt = q(((t, e, n) => ct(t, e, n)));

function ct(t, e, n) {
    return e.getFactory(t).construct(n);
}

var ft;

(function(t) {
    t[t["instance"] = 0] = "instance";
    t[t["singleton"] = 1] = "singleton";
    t[t["transient"] = 2] = "transient";
    t[t["callback"] = 3] = "callback";
    t[t["array"] = 4] = "array";
    t[t["alias"] = 5] = "alias";
})(ft || (ft = {}));

class Resolver {
    constructor(t, e, n) {
        this.key = t;
        this.strategy = e;
        this.state = n;
        this.resolving = false;
    }
    get $isResolver() {
        return true;
    }
    register(t, e) {
        return t.registerResolver(e || this.key, this);
    }
    resolve(t, e) {
        switch (this.strategy) {
          case 0:
            return this.state;

          case 1:
            if (this.resolving) throw new Error(`AUR0003:${this.state.name}`);
            this.resolving = true;
            this.state = t.getFactory(this.state).construct(e);
            this.strategy = 0;
            this.resolving = false;
            return this.state;

          case 2:
            {
                const n = t.getFactory(this.state);
                if (null === n) throw new Error(`AUR0004:${String(this.key)}`);
                return n.construct(e);
            }

          case 3:
            return this.state(t, e, this);

          case 4:
            return this.state[0].resolve(t, e);

          case 5:
            return e.get(this.state);

          default:
            throw new Error(`AUR0005:${this.strategy}`);
        }
    }
    getFactory(t) {
        var e, n, r;
        switch (this.strategy) {
          case 1:
          case 2:
            return t.getFactory(this.state);

          case 5:
            return null !== (r = null === (n = null === (e = t.getResolver(this.state)) || void 0 === e ? void 0 : e.getFactory) || void 0 === n ? void 0 : n.call(e, t)) && void 0 !== r ? r : null;

          default:
            return null;
        }
    }
}

function at(t) {
    return this.get(t);
}

function ht(t, e) {
    return e(t);
}

class Factory {
    constructor(t, e) {
        this.Type = t;
        this.dependencies = e;
        this.transformers = null;
    }
    construct(t, e) {
        let n;
        if (void 0 === e) n = new this.Type(...this.dependencies.map(at, t)); else n = new this.Type(...this.dependencies.map(at, t), ...e);
        if (null == this.transformers) return n;
        return this.transformers.reduce(ht, n);
    }
    registerTransformer(t) {
        var e;
        (null !== (e = this.transformers) && void 0 !== e ? e : this.transformers = []).push(t);
    }
}

const dt = {
    $isResolver: true,
    resolve(t, e) {
        return e;
    }
};

function vt(t) {
    return I(t.register);
}

function wt(t) {
    return vt(t) && "boolean" === typeof t.registerInRequestor;
}

function gt(t) {
    return wt(t) && t.registerInRequestor;
}

function mt(t) {
    return void 0 !== t.prototype;
}

function pt(t) {
    return M(t) && t.indexOf(":") > 0;
}

const yt = new Set([ "Array", "ArrayBuffer", "Boolean", "DataView", "Date", "Error", "EvalError", "Float32Array", "Float64Array", "Function", "Int8Array", "Int16Array", "Int32Array", "Map", "Number", "Object", "Promise", "RangeError", "ReferenceError", "RegExp", "Set", "SharedArrayBuffer", "String", "SyntaxError", "TypeError", "Uint8Array", "Uint8ClampedArray", "Uint16Array", "Uint32Array", "URIError", "WeakMap", "WeakSet" ]);

let Rt = 0;

class Container {
    constructor(t, e) {
        this.parent = t;
        this.config = e;
        this.id = ++Rt;
        this.t = 0;
        this.i = new Map;
        if (null === t) {
            this.root = this;
            this.u = new Map;
            this.h = new Map;
            this.res = Object.create(null);
        } else {
            this.root = t.root;
            this.u = new Map;
            this.h = t.h;
            if (e.inheritParentResources) this.res = Object.assign(Object.create(null), t.res, this.root.res); else this.res = Object.create(null);
        }
        this.u.set(H, dt);
    }
    get depth() {
        return null === this.parent ? 0 : this.parent.depth + 1;
    }
    register(...t) {
        if (100 === ++this.t) throw new Error(`AUR0006:${t.map(String)}`);
        let e;
        let r;
        let i;
        let s;
        let o;
        let u = 0;
        let l = t.length;
        for (;u < l; ++u) {
            e = t[u];
            if (!(0,_aurelia_metadata__WEBPACK_IMPORTED_MODULE_0__.isObject)(e)) continue;
            if (vt(e)) e.register(this); else if (S.resource.has(e)) {
                const t = S.resource.getAll(e);
                if (1 === t.length) t[0].register(this); else {
                    s = 0;
                    o = t.length;
                    while (o > s) {
                        t[s].register(this);
                        ++s;
                    }
                }
            } else if (mt(e)) $t.singleton(e, e).register(this); else {
                r = Object.keys(e);
                s = 0;
                o = r.length;
                for (;s < o; ++s) {
                    i = e[r[s]];
                    if (!(0,_aurelia_metadata__WEBPACK_IMPORTED_MODULE_0__.isObject)(i)) continue;
                    if (vt(i)) i.register(this); else this.register(i);
                }
            }
        }
        --this.t;
        return this;
    }
    registerResolver(t, e, n = false) {
        Et(t);
        const r = this.u;
        const i = r.get(t);
        if (null == i) {
            r.set(t, e);
            if (pt(t)) {
                if (void 0 !== this.res[t]) throw new Error(`AUR0007:${t}`);
                this.res[t] = e;
            }
        } else if (i instanceof Resolver && 4 === i.strategy) i.state.push(e); else r.set(t, new Resolver(t, 4, [ i, e ]));
        if (n) this.i.set(t, e);
        return e;
    }
    registerTransformer(t, e) {
        const n = this.getResolver(t);
        if (null == n) return false;
        if (n.getFactory) {
            const t = n.getFactory(this);
            if (null == t) return false;
            t.registerTransformer(e);
            return true;
        }
        return false;
    }
    getResolver(t, e = true) {
        Et(t);
        if (void 0 !== t.resolve) return t;
        let n = this;
        let r;
        while (null != n) {
            r = n.u.get(t);
            if (null == r) {
                if (null == n.parent) {
                    const r = gt(t) ? this : n;
                    return e ? this.R(t, r) : null;
                }
                n = n.parent;
            } else return r;
        }
        return null;
    }
    has(t, e = false) {
        return this.u.has(t) ? true : e && null != this.parent ? this.parent.has(t, true) : false;
    }
    get(t) {
        Et(t);
        if (t.$isResolver) return t.resolve(this, this);
        let e = this;
        let n;
        while (null != e) {
            n = e.u.get(t);
            if (null == n) {
                if (null == e.parent) {
                    const r = gt(t) ? this : e;
                    n = this.R(t, r);
                    return n.resolve(e, this);
                }
                e = e.parent;
            } else return n.resolve(e, this);
        }
        throw new Error(`AUR0008:${t}`);
    }
    getAll(t, e = false) {
        Et(t);
        const n = this;
        let r = n;
        let i;
        if (e) {
            let e = Ot;
            while (null != r) {
                i = r.u.get(t);
                if (null != i) e = e.concat(At(i, r, n));
                r = r.parent;
            }
            return e;
        } else while (null != r) {
            i = r.u.get(t);
            if (null == i) {
                r = r.parent;
                if (null == r) return Ot;
            } else return At(i, r, n);
        }
        return Ot;
    }
    invoke(t, e) {
        if ($(t)) throw jt(t);
        if (void 0 === e) return new t(...K(t).map(at, this)); else return new t(...K(t).map(at, this), ...e);
    }
    getFactory(t) {
        let e = this.h.get(t);
        if (void 0 === e) {
            if ($(t)) throw jt(t);
            this.h.set(t, e = new Factory(t, K(t)));
        }
        return e;
    }
    registerFactory(t, e) {
        this.h.set(t, e);
    }
    createChild(t) {
        if (void 0 === t && this.config.inheritParentResources) {
            if (this.config === ContainerConfiguration.DEFAULT) return new Container(this, this.config);
            return new Container(this, ContainerConfiguration.from({
                ...this.config,
                inheritParentResources: false
            }));
        }
        return new Container(this, ContainerConfiguration.from(null !== t && void 0 !== t ? t : this.config));
    }
    disposeResolvers() {
        const t = this.u;
        const e = this.i;
        let n;
        let r;
        for ([r, n] of e.entries()) {
            n.dispose();
            t.delete(r);
        }
        e.clear();
    }
    find(t, e) {
        const n = t.keyFrom(e);
        let r = this.res[n];
        if (void 0 === r) {
            r = this.root.res[n];
            if (void 0 === r) return null;
        }
        if (null === r) return null;
        if (I(r.getFactory)) {
            const e = r.getFactory(this);
            if (null === e || void 0 === e) return null;
            const n = j(t.name, e.Type);
            if (void 0 === n) return null;
            return n;
        }
        return null;
    }
    create(t, e) {
        var n, r;
        const i = t.keyFrom(e);
        let s = this.res[i];
        if (void 0 === s) {
            s = this.root.res[i];
            if (void 0 === s) return null;
            return null !== (n = s.resolve(this.root, this)) && void 0 !== n ? n : null;
        }
        return null !== (r = s.resolve(this, this)) && void 0 !== r ? r : null;
    }
    dispose() {
        if (this.i.size > 0) this.disposeResolvers();
        this.u.clear();
    }
    R(t, e) {
        if (!I(t)) throw new Error(`AUR0009:${t}`);
        if (yt.has(t.name)) throw new Error(`AUR0010:${t.name}`);
        if (vt(t)) {
            const n = t.register(e, t);
            if (!(n instanceof Object) || null == n.resolve) {
                const n = e.u.get(t);
                if (void 0 != n) return n;
                throw new Error(`AUR0011`);
            }
            return n;
        } else if (S.resource.has(t)) {
            const n = S.resource.getAll(t);
            if (1 === n.length) n[0].register(e); else {
                const t = n.length;
                for (let r = 0; r < t; ++r) n[r].register(e);
            }
            const r = e.u.get(t);
            if (void 0 != r) return r;
            throw new Error(`AUR0011`);
        } else if (t.$isInterface) throw new Error(`AUR0012:${t.friendlyName}`); else {
            const n = this.config.defaultResolver(t, e);
            e.u.set(t, n);
            return n;
        }
    }
}

class ParameterizedRegistry {
    constructor(t, e) {
        this.key = t;
        this.params = e;
    }
    register(t) {
        if (t.has(this.key, true)) {
            const e = t.get(this.key);
            e.register(t, ...this.params);
        } else t.register(...this.params.filter((t => "object" === typeof t)));
    }
}

const bt = new WeakMap;

function Ct(t) {
    return function(e, n, r) {
        let i = bt.get(e);
        if (void 0 === i) bt.set(e, i = new WeakMap);
        if (i.has(r)) return i.get(r);
        const s = t(e, n, r);
        i.set(r, s);
        return s;
    };
}

const $t = {
    instance(t, e) {
        return new Resolver(t, 0, e);
    },
    singleton(t, e) {
        return new Resolver(t, 1, e);
    },
    transient(t, e) {
        return new Resolver(t, 2, e);
    },
    callback(t, e) {
        return new Resolver(t, 3, e);
    },
    cachedCallback(t, e) {
        return new Resolver(t, 3, Ct(e));
    },
    aliasTo(t, e) {
        return new Resolver(e, 5, t);
    },
    defer(t, ...e) {
        return new ParameterizedRegistry(t, e);
    }
};

class InstanceProvider {
    constructor(t, e) {
        this.C = null;
        this.$ = t;
        if (void 0 !== e) this.C = e;
    }
    get friendlyName() {
        return this.$;
    }
    prepare(t) {
        this.C = t;
    }
    get $isResolver() {
        return true;
    }
    resolve() {
        if (null == this.C) throw new Error(`AUR0013:${this.$}`);
        return this.C;
    }
    dispose() {
        this.C = null;
    }
}

function Et(t) {
    if (null === t || void 0 === t) throw new Error(`AUR0014`);
}

function At(t, e, n) {
    if (t instanceof Resolver && 4 === t.strategy) {
        const r = t.state;
        let i = r.length;
        const s = new Array(i);
        while (i--) s[i] = r[i].resolve(e, n);
        return s;
    }
    return [ t.resolve(e, n) ];
}

function jt(t) {
    return new Error(`AUR0015:${t.name}`);
}

const Ot = Object.freeze([]);

const kt = Object.freeze({});

function It() {}

const Mt = G.createInterface("IPlatform");

/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */ function Tt(t, e, n, r) {
    var i = arguments.length, s = i < 3 ? e : null === r ? r = Object.getOwnPropertyDescriptor(e, n) : r, o;
    if ("object" === typeof Reflect && "function" === typeof Reflect.decorate) s = Reflect.decorate(t, e, n, r); else for (var u = t.length - 1; u >= 0; u--) if (o = t[u]) s = (i < 3 ? o(s) : i > 3 ? o(e, n, s) : o(e, n)) || s;
    return i > 3 && s && Object.defineProperty(e, n, s), s;
}

function Ft(t, e) {
    return function(n, r) {
        e(n, r, t);
    };
}

var Ut;

(function(t) {
    t[t["trace"] = 0] = "trace";
    t[t["debug"] = 1] = "debug";
    t[t["info"] = 2] = "info";
    t[t["warn"] = 3] = "warn";
    t[t["error"] = 4] = "error";
    t[t["fatal"] = 5] = "fatal";
    t[t["none"] = 6] = "none";
})(Ut || (Ut = {}));

var Lt;

(function(t) {
    t[t["noColors"] = 0] = "noColors";
    t[t["colors"] = 1] = "colors";
})(Lt || (Lt = {}));

const Pt = G.createInterface("ILogConfig", (t => t.instance(new LogConfig(0, 3))));

const Dt = G.createInterface("ISink");

const St = G.createInterface("ILogEventFactory", (t => t.singleton(_t)));

const Nt = G.createInterface("ILogger", (t => t.singleton(Vt)));

const Wt = G.createInterface("ILogScope");

const Bt = Object.freeze({
    key: F("logger-sink-handles"),
    define(t, e) {
        k(this.key, e.handles, t.prototype);
        return t;
    },
    getHandles(e) {
        return _aurelia_metadata__WEBPACK_IMPORTED_MODULE_0__.Metadata.get(this.key, e);
    }
});

function Qt(t) {
    return function(e) {
        return Bt.define(e, t);
    };
}

const xt = C({
    red(t) {
        return `[31m${t}[39m`;
    },
    green(t) {
        return `[32m${t}[39m`;
    },
    yellow(t) {
        return `[33m${t}[39m`;
    },
    blue(t) {
        return `[34m${t}[39m`;
    },
    magenta(t) {
        return `[35m${t}[39m`;
    },
    cyan(t) {
        return `[36m${t}[39m`;
    },
    white(t) {
        return `[37m${t}[39m`;
    },
    grey(t) {
        return `[90m${t}[39m`;
    }
});

class LogConfig {
    constructor(t, e) {
        this.colorOptions = t;
        this.level = e;
    }
}

const zt = function() {
    const t = [ C({
        TRC: "TRC",
        DBG: "DBG",
        INF: "INF",
        WRN: "WRN",
        ERR: "ERR",
        FTL: "FTL",
        QQQ: "???"
    }), C({
        TRC: xt.grey("TRC"),
        DBG: xt.grey("DBG"),
        INF: xt.white("INF"),
        WRN: xt.yellow("WRN"),
        ERR: xt.red("ERR"),
        FTL: xt.red("FTL"),
        QQQ: xt.grey("???")
    }) ];
    return function(e, n) {
        if (e <= 0) return t[n].TRC;
        if (e <= 1) return t[n].DBG;
        if (e <= 2) return t[n].INF;
        if (e <= 3) return t[n].WRN;
        if (e <= 4) return t[n].ERR;
        if (e <= 5) return t[n].FTL;
        return t[n].QQQ;
    };
}();

function Gt(t, e) {
    if (0 === e) return t.join(".");
    return t.map(xt.cyan).join(".");
}

function Kt(t, e) {
    if (0 === e) return new Date(t).toISOString();
    return xt.grey(new Date(t).toISOString());
}

class DefaultLogEvent {
    constructor(t, e, n, r, i, s) {
        this.severity = t;
        this.message = e;
        this.optionalParams = n;
        this.scope = r;
        this.colorOptions = i;
        this.timestamp = s;
    }
    toString() {
        const {severity: t, message: e, scope: n, colorOptions: r, timestamp: i} = this;
        if (0 === n.length) return `${Kt(i, r)} [${zt(t, r)}] ${e}`;
        return `${Kt(i, r)} [${zt(t, r)} ${Gt(n, r)}] ${e}`;
    }
}

let _t = class DefaultLogEventFactory {
    constructor(t) {
        this.config = t;
    }
    createLogEvent(t, e, n, r) {
        return new DefaultLogEvent(e, n, r, t.scope, this.config.colorOptions, Date.now());
    }
};

_t = Tt([ Ft(0, Pt) ], _t);

let Ht = class ConsoleSink {
    constructor(t) {
        const e = t.console;
        this.handleEvent = function t(n) {
            const r = n.optionalParams;
            if (void 0 === r || 0 === r.length) {
                const t = n.toString();
                switch (n.severity) {
                  case 0:
                  case 1:
                    return e.debug(t);

                  case 2:
                    return e.info(t);

                  case 3:
                    return e.warn(t);

                  case 4:
                  case 5:
                    return e.error(t);
                }
            } else {
                let t = n.toString();
                let i = 0;
                while (t.includes("%s")) t = t.replace("%s", String(r[i++]));
                switch (n.severity) {
                  case 0:
                  case 1:
                    return e.debug(t, ...r.slice(i));

                  case 2:
                    return e.info(t, ...r.slice(i));

                  case 3:
                    return e.warn(t, ...r.slice(i));

                  case 4:
                  case 5:
                    return e.error(t, ...r.slice(i));
                }
            }
        };
    }
    static register(t) {
        $t.singleton(Dt, ConsoleSink).register(t);
    }
};

Ht = Tt([ Ft(0, Mt) ], Ht);

let Vt = class DefaultLogger {
    constructor(t, e, n, r = [], i = null) {
        var s, o, u, l, c, f;
        this.config = t;
        this.factory = e;
        this.scope = r;
        this.scopedLoggers = Object.create(null);
        let a;
        let h;
        let d;
        let v;
        let w;
        let g;
        if (null === i) {
            this.root = this;
            this.parent = this;
            a = this.traceSinks = [];
            h = this.debugSinks = [];
            d = this.infoSinks = [];
            v = this.warnSinks = [];
            w = this.errorSinks = [];
            g = this.fatalSinks = [];
            for (const t of n) {
                const e = Bt.getHandles(t);
                if (null !== (s = null === e || void 0 === e ? void 0 : e.includes(0)) && void 0 !== s ? s : true) a.push(t);
                if (null !== (o = null === e || void 0 === e ? void 0 : e.includes(1)) && void 0 !== o ? o : true) h.push(t);
                if (null !== (u = null === e || void 0 === e ? void 0 : e.includes(2)) && void 0 !== u ? u : true) d.push(t);
                if (null !== (l = null === e || void 0 === e ? void 0 : e.includes(3)) && void 0 !== l ? l : true) v.push(t);
                if (null !== (c = null === e || void 0 === e ? void 0 : e.includes(4)) && void 0 !== c ? c : true) w.push(t);
                if (null !== (f = null === e || void 0 === e ? void 0 : e.includes(5)) && void 0 !== f ? f : true) g.push(t);
            }
        } else {
            this.root = i.root;
            this.parent = i;
            a = this.traceSinks = i.traceSinks;
            h = this.debugSinks = i.debugSinks;
            d = this.infoSinks = i.infoSinks;
            v = this.warnSinks = i.warnSinks;
            w = this.errorSinks = i.errorSinks;
            g = this.fatalSinks = i.fatalSinks;
        }
    }
    trace(t, ...e) {
        if (this.config.level <= 0) this.emit(this.traceSinks, 0, t, e);
    }
    debug(t, ...e) {
        if (this.config.level <= 1) this.emit(this.debugSinks, 1, t, e);
    }
    info(t, ...e) {
        if (this.config.level <= 2) this.emit(this.infoSinks, 2, t, e);
    }
    warn(t, ...e) {
        if (this.config.level <= 3) this.emit(this.warnSinks, 3, t, e);
    }
    error(t, ...e) {
        if (this.config.level <= 4) this.emit(this.errorSinks, 4, t, e);
    }
    fatal(t, ...e) {
        if (this.config.level <= 5) this.emit(this.fatalSinks, 5, t, e);
    }
    scopeTo(t) {
        const e = this.scopedLoggers;
        let n = e[t];
        if (void 0 === n) n = e[t] = new DefaultLogger(this.config, this.factory, void 0, this.scope.concat(t), this);
        return n;
    }
    emit(t, e, n, r) {
        const i = I(n) ? n() : n;
        const s = this.factory.createLogEvent(this, e, i, r);
        for (let e = 0, n = t.length; e < n; ++e) t[e].handleEvent(s);
    }
};

Tt([ m ], Vt.prototype, "trace", null);

Tt([ m ], Vt.prototype, "debug", null);

Tt([ m ], Vt.prototype, "info", null);

Tt([ m ], Vt.prototype, "warn", null);

Tt([ m ], Vt.prototype, "error", null);

Tt([ m ], Vt.prototype, "fatal", null);

Vt = Tt([ Ft(0, Pt), Ft(1, St), Ft(2, nt(Dt)), Ft(3, it(Wt)), Ft(4, st) ], Vt);

const qt = C({
    create({level: t = 3, colorOptions: e = 0, sinks: n = []} = {}) {
        return C({
            register(r) {
                r.register($t.instance(Pt, new LogConfig(e, t)));
                for (const t of n) if (I(t)) r.register($t.singleton(Dt, t)); else r.register(t);
                return r;
            }
        });
    }
});

const Jt = G.createInterface((t => t.singleton(ModuleLoader)));

function Xt(t) {
    return t;
}

class ModuleTransformer {
    constructor(t) {
        this.$transform = t;
        this.A = new Map;
        this.j = new Map;
    }
    transform(t) {
        if (t instanceof Promise) return this.O(t); else if ("object" === typeof t && null !== t) return this.I(t); else throw new Error(`Invalid input: ${String(t)}. Expected Promise or Object.`);
    }
    O(t) {
        if (this.A.has(t)) return this.A.get(t);
        const e = t.then((t => this.I(t)));
        this.A.set(t, e);
        void e.then((e => {
            this.A.set(t, e);
        }));
        return e;
    }
    I(t) {
        if (this.j.has(t)) return this.j.get(t);
        const e = this.$transform(this.M(t));
        this.j.set(t, e);
        if (e instanceof Promise) void e.then((e => {
            this.j.set(t, e);
        }));
        return e;
    }
    M(t) {
        let e;
        let n;
        let r;
        let i;
        const s = [];
        for (const o in t) {
            switch (typeof (e = t[o])) {
              case "object":
                if (null === e) continue;
                n = I(e.register);
                r = false;
                i = Ot;
                break;

              case "function":
                n = I(e.register);
                r = void 0 !== e.prototype;
                i = S.resource.getAll(e);
                break;

              default:
                continue;
            }
            s.push(new ModuleItem(o, e, n, r, i));
        }
        return new AnalyzedModule(t, s);
    }
}

class ModuleLoader {
    constructor() {
        this.transformers = new Map;
    }
    load(t, e = Xt) {
        const n = this.transformers;
        let r = n.get(e);
        if (void 0 === r) n.set(e, r = new ModuleTransformer(e));
        return r.transform(t);
    }
    dispose() {
        this.transformers.clear();
    }
}

class AnalyzedModule {
    constructor(t, e) {
        this.raw = t;
        this.items = e;
    }
}

class ModuleItem {
    constructor(t, e, n, r, i) {
        this.key = t;
        this.value = e;
        this.isRegistry = n;
        this.isConstructable = r;
        this.definitions = i;
    }
}

class Handler {
    constructor(t, e) {
        this.messageType = t;
        this.callback = e;
    }
    handle(t) {
        if (t instanceof this.messageType) this.callback.call(null, t);
    }
}

const Yt = G.createInterface("IEventAggregator", (t => t.singleton(EventAggregator)));

class EventAggregator {
    constructor() {
        this.eventLookup = {};
        this.messageHandlers = [];
    }
    publish(t, e) {
        if (!t) throw new Error(`Invalid channel name or instance: ${t}.`);
        if (M(t)) {
            let n = this.eventLookup[t];
            if (void 0 !== n) {
                n = n.slice();
                let r = n.length;
                while (r-- > 0) n[r](e, t);
            }
        } else {
            const e = this.messageHandlers.slice();
            let n = e.length;
            while (n-- > 0) e[n].handle(t);
        }
    }
    subscribe(t, e) {
        if (!t) throw new Error(`Invalid channel name or type: ${t}.`);
        let n;
        let r;
        if (M(t)) {
            if (void 0 === this.eventLookup[t]) this.eventLookup[t] = [];
            n = e;
            r = this.eventLookup[t];
        } else {
            n = new Handler(t, e);
            r = this.messageHandlers;
        }
        r.push(n);
        return {
            dispose() {
                const t = r.indexOf(n);
                if (-1 !== t) r.splice(t, 1);
            }
        };
    }
    subscribeOnce(t, e) {
        const n = this.subscribe(t, (function(t, r) {
            n.dispose();
            e(t, r);
        }));
        return n;
    }
}


//# sourceMappingURL=index.js.map


/***/ }),

/***/ "./node_modules/@aurelia/metadata/dist/esm/index.js":
/*!**********************************************************!*\
  !*** ./node_modules/@aurelia/metadata/dist/esm/index.js ***!
  \**********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Metadata": () => /* binding */ A,
/* harmony export */   "applyMetadataPolyfill": () => /* binding */ S,
/* harmony export */   "isNullOrUndefined": () => /* binding */ e,
/* harmony export */   "isObject": () => /* binding */ t,
/* harmony export */   "metadata": () => /* binding */ g
/* harmony export */ });
function t(t) {
    return "object" === typeof t && null !== t || "function" === typeof t;
}

function e(t) {
    return null === t || void 0 === t;
}

const n = new WeakMap;

function r(t, e, n, r, a) {
    return new TypeError(`${t}(${e.map(String).join(",")}) - Expected '${n}' to be of type ${a}, but got: ${Object.prototype.toString.call(r)} (${String(r)})`);
}

function a(t) {
    switch (typeof t) {
      case "undefined":
      case "string":
      case "symbol":
        return t;

      default:
        return `${t}`;
    }
}

function o(t) {
    switch (typeof t) {
      case "string":
      case "symbol":
        return t;

      default:
        return `${t}`;
    }
}

function i(t) {
    switch (typeof t) {
      case "undefined":
      case "string":
      case "symbol":
        return t;

      default:
        throw new TypeError(`Invalid metadata propertyKey: ${t}.`);
    }
}

function u(t, e, r) {
    let a = n.get(t);
    if (void 0 === a) {
        if (!r) return;
        a = new Map;
        n.set(t, a);
    }
    let o = a.get(e);
    if (void 0 === o) {
        if (!r) return;
        o = new Map;
        a.set(e, o);
    }
    return o;
}

function c(t, e, n) {
    const r = u(e, n, false);
    if (void 0 === r) return false;
    return r.has(t);
}

function f(t, e, n) {
    if (c(t, e, n)) return true;
    const r = Object.getPrototypeOf(e);
    if (null !== r) return f(t, r, n);
    return false;
}

function s(t, e, n) {
    const r = u(e, n, false);
    if (void 0 === r) return;
    return r.get(t);
}

function l(t, e, n) {
    if (c(t, e, n)) return s(t, e, n);
    const r = Object.getPrototypeOf(e);
    if (null !== r) return l(t, r, n);
    return;
}

function d(t, e, n, r) {
    const a = u(n, r, true);
    a.set(t, e);
}

function w(t, e) {
    const n = [];
    const r = u(t, e, false);
    if (void 0 === r) return n;
    const a = r.keys();
    let o = 0;
    for (const t of a) {
        n[o] = t;
        ++o;
    }
    return n;
}

function y(t, e) {
    const n = w(t, e);
    const r = Object.getPrototypeOf(t);
    if (null === r) return n;
    const a = y(r, e);
    const o = n.length;
    if (0 === o) return a;
    const i = a.length;
    if (0 === i) return n;
    const u = new Set;
    const c = [];
    let f = 0;
    let s;
    for (let t = 0; t < o; ++t) {
        s = n[t];
        if (!u.has(s)) {
            u.add(s);
            c[f] = s;
            ++f;
        }
    }
    for (let t = 0; t < i; ++t) {
        s = a[t];
        if (!u.has(s)) {
            u.add(s);
            c[f] = s;
            ++f;
        }
    }
    return c;
}

function h(t, e, n) {
    const r = u(t, n, false);
    if (void 0 === r) return false;
    return r.delete(e);
}

function g(e, n) {
    function a(a, o) {
        if (!t(a)) throw r("@metadata", [ e, n, a, o ], "target", a, "Object or Function");
        d(e, n, a, i(o));
    }
    return a;
}

function p(n, a, i, u) {
    if (void 0 !== i) {
        if (!Array.isArray(n)) throw r("Metadata.decorate", [ n, a, i, u ], "decorators", n, "Array");
        if (!t(a)) throw r("Metadata.decorate", [ n, a, i, u ], "target", a, "Object or Function");
        if (!t(u) && !e(u)) throw r("Metadata.decorate", [ n, a, i, u ], "attributes", u, "Object, Function, null, or undefined");
        if (null === u) u = void 0;
        i = o(i);
        return b(n, a, i, u);
    } else {
        if (!Array.isArray(n)) throw r("Metadata.decorate", [ n, a, i, u ], "decorators", n, "Array");
        if ("function" !== typeof a) throw r("Metadata.decorate", [ n, a, i, u ], "target", a, "Function");
        return M(n, a);
    }
}

function M(t, n) {
    for (let a = t.length - 1; a >= 0; --a) {
        const o = t[a];
        const i = o(n);
        if (!e(i)) {
            if ("function" !== typeof i) throw r("DecorateConstructor", [ t, n ], "decorated", i, "Function, null, or undefined");
            n = i;
        }
    }
    return n;
}

function b(n, a, o, i) {
    for (let u = n.length - 1; u >= 0; --u) {
        const c = n[u];
        const f = c(a, o, i);
        if (!e(f)) {
            if (!t(f)) throw r("DecorateProperty", [ n, a, o, i ], "decorated", f, "Object, Function, null, or undefined");
            i = f;
        }
    }
    return i;
}

function O(e, n, o, i) {
    if (!t(o)) throw r("Metadata.define", [ e, n, o, i ], "target", o, "Object or Function");
    return d(e, n, o, a(i));
}

function m(e, n, o) {
    if (!t(n)) throw r("Metadata.has", [ e, n, o ], "target", n, "Object or Function");
    return f(e, n, a(o));
}

function j(e, n, o) {
    if (!t(n)) throw r("Metadata.hasOwn", [ e, n, o ], "target", n, "Object or Function");
    return c(e, n, a(o));
}

function v(e, n, o) {
    if (!t(n)) throw r("Metadata.get", [ e, n, o ], "target", n, "Object or Function");
    return l(e, n, a(o));
}

function $(e, n, o) {
    if (!t(n)) throw r("Metadata.getOwn", [ e, n, o ], "target", n, "Object or Function");
    return s(e, n, a(o));
}

function F(e, n) {
    if (!t(e)) throw r("Metadata.getKeys", [ e, n ], "target", e, "Object or Function");
    return y(e, a(n));
}

function K(e, n) {
    if (!t(e)) throw r("Metadata.getOwnKeys", [ e, n ], "target", e, "Object or Function");
    return w(e, a(n));
}

function E(e, n, o) {
    if (!t(n)) throw r("Metadata.delete", [ e, n, o ], "target", n, "Object or Function");
    return h(n, e, a(o));
}

const A = {
    define: O,
    has: m,
    hasOwn: j,
    get: v,
    getOwn: $,
    getKeys: F,
    getOwnKeys: K,
    delete: E
};

function k(t, e, n, r, a) {
    if (!Reflect.defineProperty(t, e, {
        writable: r,
        enumerable: false,
        configurable: a,
        value: n
    })) throw new Error(`Unable to apply metadata polyfill: could not add property '${e}' to the global Reflect object`);
}

const R = "[[$au]]";

function C(t) {
    return R in t;
}

function I(t, e, r) {
    k(t, R, n, e, r);
    k(t, "metadata", g, e, r);
    k(t, "decorate", p, e, r);
    k(t, "defineMetadata", O, e, r);
    k(t, "hasMetadata", m, e, r);
    k(t, "hasOwnMetadata", j, e, r);
    k(t, "getMetadata", v, e, r);
    k(t, "getOwnMetadata", $, e, r);
    k(t, "getMetadataKeys", F, e, r);
    k(t, "getOwnMetadataKeys", K, e, r);
    k(t, "deleteMetadata", E, e, r);
}

function S(t, e = true, r = false, a = true, o = true) {
    if (C(t)) {
        if (t[R] === n) return;
        throw new Error(`Conflicting @aurelia/metadata module import detected. Please make sure you have the same version of all Aurelia packages in your dependency tree.`);
    }
    const i = [ "metadata", "decorate", "defineMetadata", "hasMetadata", "hasOwnMetadata", "getMetadata", "getOwnMetadata", "getMetadataKeys", "getOwnMetadataKeys", "deleteMetadata" ].filter((function(t) {
        return t in Reflect;
    }));
    if (i.length > 0) {
        if (e) {
            const t = i.map((function(t) {
                const e = `${Reflect[t].toString().slice(0, 100)}...`;
                return `${t}:\n${e}`;
            })).join("\n\n");
            throw new Error(`Conflicting reflect.metadata polyfill found. If you have 'reflect-metadata' or any other reflect polyfill imported, please remove it, if not (or if you must use a specific polyfill) please file an issue at https://github.com/aurelia/aurelia/issues so that we can look into compatibility options for this scenario. Implementation summary:\n\n${t}`);
        } else if (r) I(t, a, o);
    } else I(t, a, o);
}


//# sourceMappingURL=index.js.map


/***/ }),

/***/ "./node_modules/@aurelia/platform-browser/dist/esm/index.js":
/*!******************************************************************!*\
  !*** ./node_modules/@aurelia/platform-browser/dist/esm/index.js ***!
  \******************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "BrowserPlatform": () => /* binding */ BrowserPlatform
/* harmony export */ });
/* harmony import */ var _aurelia_platform__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @aurelia/platform */ "./node_modules/@aurelia/platform/dist/esm/index.js");


const s = new Map;

function e(t) {
    return function i() {
        throw new Error(`The PLATFORM did not receive a valid reference to the global function '${t}'.`);
    };
}

class BrowserPlatform extends _aurelia_platform__WEBPACK_IMPORTED_MODULE_0__.Platform {
    constructor(t, s = {}) {
        super(t, s);
        this.t = false;
        this.i = -1;
        this.h = false;
        this.u = -1;
        ("Node,Element,HTMLElement,CustomEvent,CSSStyleSheet,ShadowRoot,MutationObserver," + "window,document,location,history,navigator,customElements").split(",").forEach((i => {
            this[i] = i in s ? s[i] : t[i];
        }));
        "fetch,requestAnimationFrame,cancelAnimationFrame".split(",").forEach((i => {
            var h, r;
            this[i] = i in s ? s[i] : null !== (r = null === (h = t[i]) || void 0 === h ? void 0 : h.bind(t)) && void 0 !== r ? r : e(i);
        }));
        this.flushDomRead = this.flushDomRead.bind(this);
        this.flushDomWrite = this.flushDomWrite.bind(this);
        this.domReadQueue = new _aurelia_platform__WEBPACK_IMPORTED_MODULE_0__.TaskQueue(this, this.requestDomRead.bind(this), this.cancelDomRead.bind(this));
        this.domWriteQueue = new _aurelia_platform__WEBPACK_IMPORTED_MODULE_0__.TaskQueue(this, this.requestDomWrite.bind(this), this.cancelDomWrite.bind(this));
    }
    static getOrCreate(t, i = {}) {
        let e = s.get(t);
        if (void 0 === e) s.set(t, e = new BrowserPlatform(t, i));
        return e;
    }
    static set(t, i) {
        s.set(t, i);
    }
    requestDomRead() {
        this.t = true;
        if (-1 === this.u) this.u = this.requestAnimationFrame(this.flushDomWrite);
    }
    cancelDomRead() {
        this.t = false;
        if (this.i > -1) {
            this.clearTimeout(this.i);
            this.i = -1;
        }
        if (false === this.h && this.u > -1) {
            this.cancelAnimationFrame(this.u);
            this.u = -1;
        }
    }
    flushDomRead() {
        this.i = -1;
        if (true === this.t) {
            this.t = false;
            this.domReadQueue.flush();
        }
    }
    requestDomWrite() {
        this.h = true;
        if (-1 === this.u) this.u = this.requestAnimationFrame(this.flushDomWrite);
    }
    cancelDomWrite() {
        this.h = false;
        if (this.u > -1 && (false === this.t || this.i > -1)) {
            this.cancelAnimationFrame(this.u);
            this.u = -1;
        }
    }
    flushDomWrite() {
        this.u = -1;
        if (true === this.h) {
            this.h = false;
            this.domWriteQueue.flush();
        }
        if (true === this.t && -1 === this.i) this.i = this.setTimeout(this.flushDomRead, 0);
    }
}


//# sourceMappingURL=index.js.map


/***/ }),

/***/ "./node_modules/@aurelia/platform/dist/esm/index.js":
/*!**********************************************************!*\
  !*** ./node_modules/@aurelia/platform/dist/esm/index.js ***!
  \**********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Platform": () => /* binding */ Platform,
/* harmony export */   "Task": () => /* binding */ Task,
/* harmony export */   "TaskAbortError": () => /* binding */ TaskAbortError,
/* harmony export */   "TaskQueue": () => /* binding */ TaskQueue,
/* harmony export */   "TaskQueuePriority": () => /* binding */ n,
/* harmony export */   "TaskStatus": () => /* binding */ h
/* harmony export */ });
const t = new Map;

function s(t) {
    return function s() {
        throw new Error(`The PLATFORM did not receive a valid reference to the global function '${t}'.`);
    };
}

class Platform {
    constructor(t, i = {}) {
        var e, h, r, n, o, a, l, c, u, f, d, v, w;
        this.macroTaskRequested = false;
        this.macroTaskHandle = -1;
        this.globalThis = t;
        this.decodeURI = "decodeURI" in i ? i.decodeURI : t.decodeURI;
        this.decodeURIComponent = "decodeURIComponent" in i ? i.decodeURIComponent : t.decodeURIComponent;
        this.encodeURI = "encodeURI" in i ? i.encodeURI : t.encodeURI;
        this.encodeURIComponent = "encodeURIComponent" in i ? i.encodeURIComponent : t.encodeURIComponent;
        this.Date = "Date" in i ? i.Date : t.Date;
        this.Reflect = "Reflect" in i ? i.Reflect : t.Reflect;
        this.clearInterval = "clearInterval" in i ? i.clearInterval : null !== (h = null === (e = t.clearInterval) || void 0 === e ? void 0 : e.bind(t)) && void 0 !== h ? h : s("clearInterval");
        this.clearTimeout = "clearTimeout" in i ? i.clearTimeout : null !== (n = null === (r = t.clearTimeout) || void 0 === r ? void 0 : r.bind(t)) && void 0 !== n ? n : s("clearTimeout");
        this.queueMicrotask = "queueMicrotask" in i ? i.queueMicrotask : null !== (a = null === (o = t.queueMicrotask) || void 0 === o ? void 0 : o.bind(t)) && void 0 !== a ? a : s("queueMicrotask");
        this.setInterval = "setInterval" in i ? i.setInterval : null !== (c = null === (l = t.setInterval) || void 0 === l ? void 0 : l.bind(t)) && void 0 !== c ? c : s("setInterval");
        this.setTimeout = "setTimeout" in i ? i.setTimeout : null !== (f = null === (u = t.setTimeout) || void 0 === u ? void 0 : u.bind(t)) && void 0 !== f ? f : s("setTimeout");
        this.console = "console" in i ? i.console : t.console;
        this.performanceNow = "performanceNow" in i ? i.performanceNow : null !== (w = null === (v = null === (d = t.performance) || void 0 === d ? void 0 : d.now) || void 0 === v ? void 0 : v.bind(t.performance)) && void 0 !== w ? w : s("performance.now");
        this.flushMacroTask = this.flushMacroTask.bind(this);
        this.taskQueue = new TaskQueue(this, this.requestMacroTask.bind(this), this.cancelMacroTask.bind(this));
    }
    static getOrCreate(s, i = {}) {
        let e = t.get(s);
        if (void 0 === e) t.set(s, e = new Platform(s, i));
        return e;
    }
    static set(s, i) {
        t.set(s, i);
    }
    requestMacroTask() {
        this.macroTaskRequested = true;
        if (-1 === this.macroTaskHandle) this.macroTaskHandle = this.setTimeout(this.flushMacroTask, 0);
    }
    cancelMacroTask() {
        this.macroTaskRequested = false;
        if (this.macroTaskHandle > -1) {
            this.clearTimeout(this.macroTaskHandle);
            this.macroTaskHandle = -1;
        }
    }
    flushMacroTask() {
        this.macroTaskHandle = -1;
        if (true === this.macroTaskRequested) {
            this.macroTaskRequested = false;
            this.taskQueue.flush();
        }
    }
}

function i(t) {
    return t.persistent;
}

class TaskQueue {
    constructor(t, s, i) {
        this.platform = t;
        this.$request = s;
        this.$cancel = i;
        this.t = void 0;
        this.i = 0;
        this.processing = [];
        this.pending = [];
        this.delayed = [];
        this.flushRequested = false;
        this.h = void 0;
        this.taskPool = [];
        this.u = 0;
        this.T = 0;
        this.$ = 0;
        this.I = () => {
            if (!this.flushRequested) {
                this.flushRequested = true;
                this.T = this.platform.performanceNow();
                this.$request();
            }
        };
        this.M = new Tracer(t.console);
    }
    get isEmpty() {
        return 0 === this.i && 0 === this.processing.length && 0 === this.pending.length && 0 === this.delayed.length;
    }
    get P() {
        return 0 === this.i && this.processing.every(i) && this.pending.every(i) && this.delayed.every(i);
    }
    flush(t = this.platform.performanceNow()) {
        this.flushRequested = false;
        this.$ = t;
        if (void 0 === this.t) {
            if (this.pending.length > 0) {
                this.processing.push(...this.pending);
                this.pending.length = 0;
            }
            if (this.delayed.length > 0) {
                let s = -1;
                while (++s < this.delayed.length && this.delayed[s].queueTime <= t) ;
                this.processing.push(...this.delayed.splice(0, s));
            }
            let s;
            while (this.processing.length > 0) {
                (s = this.processing.shift()).run();
                if (1 === s.status) if (true === s.suspend) {
                    this.t = s;
                    this.I();
                    return;
                } else ++this.i;
            }
            if (this.pending.length > 0) {
                this.processing.push(...this.pending);
                this.pending.length = 0;
            }
            if (this.delayed.length > 0) {
                let s = -1;
                while (++s < this.delayed.length && this.delayed[s].queueTime <= t) ;
                this.processing.push(...this.delayed.splice(0, s));
            }
            if (this.processing.length > 0 || this.delayed.length > 0 || this.i > 0) this.I();
            if (void 0 !== this.h && this.P) {
                const t = this.h;
                this.h = void 0;
                t.resolve();
            }
        } else this.I();
    }
    cancel() {
        if (this.flushRequested) {
            this.$cancel();
            this.flushRequested = false;
        }
    }
    async yield() {
        if (this.isEmpty) ; else {
            if (void 0 === this.h) this.h = u();
            await this.h;
        }
    }
    queueTask(t, s) {
        const {delay: i, preempt: e, persistent: h, reusable: r, suspend: n} = {
            ...o,
            ...s
        };
        if (e) {
            if (i > 0) throw new Error(`Invalid arguments: preempt cannot be combined with a greater-than-zero delay`);
            if (h) throw new Error(`Invalid arguments: preempt cannot be combined with persistent`);
        }
        if (0 === this.processing.length) this.I();
        const a = this.platform.performanceNow();
        let l;
        if (r) {
            const s = this.taskPool;
            const o = this.u - 1;
            if (o >= 0) {
                l = s[o];
                s[o] = void 0;
                this.u = o;
                l.reuse(a, i, e, h, n, t);
            } else l = new Task(this.M, this, a, a + i, e, h, n, r, t);
        } else l = new Task(this.M, this, a, a + i, e, h, n, r, t);
        if (e) this.processing[this.processing.length] = l; else if (0 === i) this.pending[this.pending.length] = l; else this.delayed[this.delayed.length] = l;
        return l;
    }
    remove(t) {
        let s = this.processing.indexOf(t);
        if (s > -1) {
            this.processing.splice(s, 1);
            return;
        }
        s = this.pending.indexOf(t);
        if (s > -1) {
            this.pending.splice(s, 1);
            return;
        }
        s = this.delayed.indexOf(t);
        if (s > -1) {
            this.delayed.splice(s, 1);
            return;
        }
        throw new Error(`Task #${t.id} could not be found`);
    }
    returnToPool(t) {
        this.taskPool[this.u++] = t;
    }
    resetPersistentTask(t) {
        t.reset(this.platform.performanceNow());
        if (t.createdTime === t.queueTime) this.pending[this.pending.length] = t; else this.delayed[this.delayed.length] = t;
    }
    completeAsyncTask(t) {
        var s;
        if (true === t.suspend) {
            if (this.t !== t) throw new Error(`Async task completion mismatch: suspenderTask=${null === (s = this.t) || void 0 === s ? void 0 : s.id}, task=${t.id}`);
            this.t = void 0;
        } else --this.i;
        if (void 0 !== this.h && this.P) {
            const t = this.h;
            this.h = void 0;
            t.resolve();
        }
        if (this.isEmpty) this.cancel();
    }
}

class TaskAbortError extends Error {
    constructor(t) {
        super("Task was canceled.");
        this.task = t;
    }
}

let e = 0;

var h;

(function(t) {
    t[t["pending"] = 0] = "pending";
    t[t["running"] = 1] = "running";
    t[t["completed"] = 2] = "completed";
    t[t["canceled"] = 3] = "canceled";
})(h || (h = {}));

class Task {
    constructor(t, s, i, h, r, n, o, a, l) {
        this.taskQueue = s;
        this.createdTime = i;
        this.queueTime = h;
        this.preempt = r;
        this.persistent = n;
        this.suspend = o;
        this.reusable = a;
        this.callback = l;
        this.id = ++e;
        this.R = void 0;
        this.A = void 0;
        this.q = void 0;
        this.C = 0;
        this.M = t;
    }
    get result() {
        const t = this.q;
        if (void 0 === t) switch (this.C) {
          case 0:
            {
                const t = this.q = u();
                this.R = t.resolve;
                this.A = t.reject;
                return t;
            }

          case 1:
            throw new Error("Trying to await task from within task will cause a deadlock.");

          case 2:
            return this.q = Promise.resolve();

          case 3:
            return this.q = Promise.reject(new TaskAbortError(this));
        }
        return t;
    }
    get status() {
        return this.C;
    }
    run(t = this.taskQueue.platform.performanceNow()) {
        if (0 !== this.C) throw new Error(`Cannot run task in ${this.C} state`);
        const {persistent: s, reusable: i, taskQueue: e, callback: h, R: r, A: n, createdTime: o} = this;
        let a;
        this.C = 1;
        try {
            a = h(t - o);
            if (a instanceof Promise) a.then((t => {
                if (this.persistent) e["resetPersistentTask"](this); else {
                    if (s) this.C = 3; else this.C = 2;
                    this.dispose();
                }
                e["completeAsyncTask"](this);
                if (false) {}
                if (void 0 !== r) r(t);
                if (!this.persistent && i) e["returnToPool"](this);
            })).catch((t => {
                if (!this.persistent) this.dispose();
                e["completeAsyncTask"](this);
                if (false) {}
                if (void 0 !== n) n(t); else throw t;
            })); else {
                if (this.persistent) e["resetPersistentTask"](this); else {
                    if (s) this.C = 3; else this.C = 2;
                    this.dispose();
                }
                if (false) {}
                if (void 0 !== r) r(a);
                if (!this.persistent && i) e["returnToPool"](this);
            }
        } catch (t) {
            if (!this.persistent) this.dispose();
            if (void 0 !== n) n(t); else throw t;
        }
    }
    cancel() {
        if (0 === this.C) {
            const t = this.taskQueue;
            const s = this.reusable;
            const i = this.A;
            t.remove(this);
            if (t.isEmpty) t.cancel();
            this.C = 3;
            this.dispose();
            if (s) t["returnToPool"](this);
            if (void 0 !== i) i(new TaskAbortError(this));
            return true;
        } else if (1 === this.C && this.persistent) {
            this.persistent = false;
            return true;
        }
        return false;
    }
    reset(t) {
        const s = this.queueTime - this.createdTime;
        this.createdTime = t;
        this.queueTime = t + s;
        this.C = 0;
        this.R = void 0;
        this.A = void 0;
        this.q = void 0;
    }
    reuse(t, s, i, e, h, r) {
        this.createdTime = t;
        this.queueTime = t + s;
        this.preempt = i;
        this.persistent = e;
        this.suspend = h;
        this.callback = r;
        this.C = 0;
    }
    dispose() {
        this.callback = void 0;
        this.R = void 0;
        this.A = void 0;
        this.q = void 0;
    }
}

function r(t) {
    switch (t) {
      case 0:
        return "pending";

      case 1:
        return "running";

      case 3:
        return "canceled";

      case 2:
        return "completed";
    }
}

class Tracer {
    constructor(t) {
        this.console = t;
        this.enabled = false;
        this.depth = 0;
    }
    enter(t, s) {
        this.log(`${"  ".repeat(this.depth++)}> `, t, s);
    }
    leave(t, s) {
        this.log(`${"  ".repeat(--this.depth)}< `, t, s);
    }
    trace(t, s) {
        this.log(`${"  ".repeat(this.depth)}- `, t, s);
    }
    log(t, s, i) {
        if (s instanceof TaskQueue) {
            const e = s["processing"].length;
            const h = s["pending"].length;
            const r = s["delayed"].length;
            const n = s["flushRequested"];
            const o = !!s.t;
            const a = `processing=${e} pending=${h} delayed=${r} flushReq=${n} susTask=${o}`;
            this.console.log(`${t}[Q.${i}] ${a}`);
        } else {
            const e = s["id"];
            const h = Math.round(10 * s["createdTime"]) / 10;
            const n = Math.round(10 * s["queueTime"]) / 10;
            const o = s["preempt"];
            const a = s["reusable"];
            const l = s["persistent"];
            const c = s["suspend"];
            const u = r(s["C"]);
            const f = `id=${e} created=${h} queue=${n} preempt=${o} persistent=${l} reusable=${a} status=${u} suspend=${c}`;
            this.console.log(`${t}[T.${i}] ${f}`);
        }
    }
}

var n;

(function(t) {
    t[t["render"] = 0] = "render";
    t[t["macroTask"] = 1] = "macroTask";
    t[t["postRender"] = 2] = "postRender";
})(n || (n = {}));

const o = {
    delay: 0,
    preempt: false,
    persistent: false,
    reusable: true,
    suspend: false
};

let a;

let l;

function c(t, s) {
    a = t;
    l = s;
}

function u() {
    const t = new Promise(c);
    t.resolve = a;
    t.reject = l;
    return t;
}


//# sourceMappingURL=index.js.map


/***/ }),

/***/ "./node_modules/@aurelia/runtime-html/dist/esm/index.js":
/*!**************************************************************!*\
  !*** ./node_modules/@aurelia/runtime-html/dist/esm/index.js ***!
  \**************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Platform": () => /* reexport safe */ _aurelia_platform__WEBPACK_IMPORTED_MODULE_0__.Platform,
/* harmony export */   "Task": () => /* reexport safe */ _aurelia_platform__WEBPACK_IMPORTED_MODULE_0__.Task,
/* harmony export */   "TaskAbortError": () => /* reexport safe */ _aurelia_platform__WEBPACK_IMPORTED_MODULE_0__.TaskAbortError,
/* harmony export */   "TaskQueue": () => /* reexport safe */ _aurelia_platform__WEBPACK_IMPORTED_MODULE_0__.TaskQueue,
/* harmony export */   "TaskQueuePriority": () => /* reexport safe */ _aurelia_platform__WEBPACK_IMPORTED_MODULE_0__.TaskQueuePriority,
/* harmony export */   "TaskStatus": () => /* reexport safe */ _aurelia_platform__WEBPACK_IMPORTED_MODULE_0__.TaskStatus,
/* harmony export */   "BrowserPlatform": () => /* reexport safe */ _aurelia_platform_browser__WEBPACK_IMPORTED_MODULE_1__.BrowserPlatform,
/* harmony export */   "Access": () => /* reexport safe */ _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.Access,
/* harmony export */   "AccessKeyedExpression": () => /* reexport safe */ _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.AccessKeyedExpression,
/* harmony export */   "AccessMemberExpression": () => /* reexport safe */ _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.AccessMemberExpression,
/* harmony export */   "AccessScopeExpression": () => /* reexport safe */ _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.AccessScopeExpression,
/* harmony export */   "AccessThisExpression": () => /* reexport safe */ _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.AccessThisExpression,
/* harmony export */   "AccessorType": () => /* reexport safe */ _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.AccessorType,
/* harmony export */   "ArrayBindingPattern": () => /* reexport safe */ _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.ArrayBindingPattern,
/* harmony export */   "ArrayIndexObserver": () => /* reexport safe */ _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.ArrayIndexObserver,
/* harmony export */   "ArrayLiteralExpression": () => /* reexport safe */ _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.ArrayLiteralExpression,
/* harmony export */   "ArrayObserver": () => /* reexport safe */ _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.ArrayObserver,
/* harmony export */   "AssignExpression": () => /* reexport safe */ _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.AssignExpression,
/* harmony export */   "BinaryExpression": () => /* reexport safe */ _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.BinaryExpression,
/* harmony export */   "BindingBehavior": () => /* reexport safe */ _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.BindingBehavior,
/* harmony export */   "BindingBehaviorDefinition": () => /* reexport safe */ _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.BindingBehaviorDefinition,
/* harmony export */   "BindingBehaviorExpression": () => /* reexport safe */ _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.BindingBehaviorExpression,
/* harmony export */   "BindingBehaviorFactory": () => /* reexport safe */ _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.BindingBehaviorFactory,
/* harmony export */   "BindingBehaviorStrategy": () => /* reexport safe */ _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.BindingBehaviorStrategy,
/* harmony export */   "BindingContext": () => /* reexport safe */ _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.BindingContext,
/* harmony export */   "BindingIdentifier": () => /* reexport safe */ _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.BindingIdentifier,
/* harmony export */   "BindingInterceptor": () => /* reexport safe */ _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.BindingInterceptor,
/* harmony export */   "BindingMediator": () => /* reexport safe */ _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.BindingMediator,
/* harmony export */   "BindingMode": () => /* reexport safe */ _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.BindingMode,
/* harmony export */   "CallFunctionExpression": () => /* reexport safe */ _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.CallFunctionExpression,
/* harmony export */   "CallMemberExpression": () => /* reexport safe */ _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.CallMemberExpression,
/* harmony export */   "CallScopeExpression": () => /* reexport safe */ _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.CallScopeExpression,
/* harmony export */   "Char": () => /* reexport safe */ _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.Char,
/* harmony export */   "CollectionKind": () => /* reexport safe */ _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.CollectionKind,
/* harmony export */   "CollectionLengthObserver": () => /* reexport safe */ _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.CollectionLengthObserver,
/* harmony export */   "CollectionSizeObserver": () => /* reexport safe */ _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.CollectionSizeObserver,
/* harmony export */   "ComputedObserver": () => /* reexport safe */ _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.ComputedObserver,
/* harmony export */   "ConditionalExpression": () => /* reexport safe */ _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.ConditionalExpression,
/* harmony export */   "CustomExpression": () => /* reexport safe */ _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.CustomExpression,
/* harmony export */   "DelegationStrategy": () => /* reexport safe */ _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.DelegationStrategy,
/* harmony export */   "DirtyCheckProperty": () => /* reexport safe */ _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.DirtyCheckProperty,
/* harmony export */   "DirtyCheckSettings": () => /* reexport safe */ _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.DirtyCheckSettings,
/* harmony export */   "ExpressionKind": () => /* reexport safe */ _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.ExpressionKind,
/* harmony export */   "ExpressionType": () => /* reexport safe */ _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.ExpressionType,
/* harmony export */   "ForOfStatement": () => /* reexport safe */ _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.ForOfStatement,
/* harmony export */   "HtmlLiteralExpression": () => /* reexport safe */ _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.HtmlLiteralExpression,
/* harmony export */   "IDirtyChecker": () => /* reexport safe */ _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.IDirtyChecker,
/* harmony export */   "IExpressionParser": () => /* reexport safe */ _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.IExpressionParser,
/* harmony export */   "INodeObserverLocator": () => /* reexport safe */ _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.INodeObserverLocator,
/* harmony export */   "IObserverLocator": () => /* reexport safe */ _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.IObserverLocator,
/* harmony export */   "ISignaler": () => /* reexport safe */ _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.ISignaler,
/* harmony export */   "Interpolation": () => /* reexport safe */ _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.Interpolation,
/* harmony export */   "LifecycleFlags": () => /* reexport safe */ _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.LifecycleFlags,
/* harmony export */   "MapObserver": () => /* reexport safe */ _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.MapObserver,
/* harmony export */   "ObjectBindingPattern": () => /* reexport safe */ _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.ObjectBindingPattern,
/* harmony export */   "ObjectLiteralExpression": () => /* reexport safe */ _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.ObjectLiteralExpression,
/* harmony export */   "ObserverLocator": () => /* reexport safe */ _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.ObserverLocator,
/* harmony export */   "OverrideContext": () => /* reexport safe */ _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.OverrideContext,
/* harmony export */   "Precedence": () => /* reexport safe */ _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.Precedence,
/* harmony export */   "PrimitiveLiteralExpression": () => /* reexport safe */ _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.PrimitiveLiteralExpression,
/* harmony export */   "PrimitiveObserver": () => /* reexport safe */ _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.PrimitiveObserver,
/* harmony export */   "PropertyAccessor": () => /* reexport safe */ _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.PropertyAccessor,
/* harmony export */   "Scope": () => /* reexport safe */ _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.Scope,
/* harmony export */   "SetObserver": () => /* reexport safe */ _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.SetObserver,
/* harmony export */   "SetterObserver": () => /* reexport safe */ _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.SetterObserver,
/* harmony export */   "TaggedTemplateExpression": () => /* reexport safe */ _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.TaggedTemplateExpression,
/* harmony export */   "TemplateExpression": () => /* reexport safe */ _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.TemplateExpression,
/* harmony export */   "UnaryExpression": () => /* reexport safe */ _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.UnaryExpression,
/* harmony export */   "ValueConverter": () => /* reexport safe */ _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.ValueConverter,
/* harmony export */   "ValueConverterDefinition": () => /* reexport safe */ _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.ValueConverterDefinition,
/* harmony export */   "ValueConverterExpression": () => /* reexport safe */ _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.ValueConverterExpression,
/* harmony export */   "alias": () => /* reexport safe */ _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.alias,
/* harmony export */   "applyMutationsToIndices": () => /* reexport safe */ _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.applyMutationsToIndices,
/* harmony export */   "bindingBehavior": () => /* reexport safe */ _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.bindingBehavior,
/* harmony export */   "cloneIndexMap": () => /* reexport safe */ _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.cloneIndexMap,
/* harmony export */   "connectable": () => /* reexport safe */ _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.connectable,
/* harmony export */   "copyIndexMap": () => /* reexport safe */ _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.copyIndexMap,
/* harmony export */   "createIndexMap": () => /* reexport safe */ _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.createIndexMap,
/* harmony export */   "disableArrayObservation": () => /* reexport safe */ _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.disableArrayObservation,
/* harmony export */   "disableMapObservation": () => /* reexport safe */ _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.disableMapObservation,
/* harmony export */   "disableSetObservation": () => /* reexport safe */ _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.disableSetObservation,
/* harmony export */   "enableArrayObservation": () => /* reexport safe */ _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.enableArrayObservation,
/* harmony export */   "enableMapObservation": () => /* reexport safe */ _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.enableMapObservation,
/* harmony export */   "enableSetObservation": () => /* reexport safe */ _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.enableSetObservation,
/* harmony export */   "getCollectionObserver": () => /* reexport safe */ _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.getCollectionObserver,
/* harmony export */   "isIndexMap": () => /* reexport safe */ _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.isIndexMap,
/* harmony export */   "observable": () => /* reexport safe */ _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.observable,
/* harmony export */   "parseExpression": () => /* reexport safe */ _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.parseExpression,
/* harmony export */   "registerAliases": () => /* reexport safe */ _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.registerAliases,
/* harmony export */   "subscriberCollection": () => /* reexport safe */ _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.subscriberCollection,
/* harmony export */   "synchronizeIndices": () => /* reexport safe */ _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.synchronizeIndices,
/* harmony export */   "valueConverter": () => /* reexport safe */ _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.valueConverter,
/* harmony export */   "AdoptedStyleSheetsStyles": () => /* binding */ AdoptedStyleSheetsStyles,
/* harmony export */   "AppRoot": () => /* binding */ AppRoot,
/* harmony export */   "AppTask": () => /* binding */ xe,
/* harmony export */   "AtPrefixedTriggerAttributePattern": () => /* binding */ Gt,
/* harmony export */   "AtPrefixedTriggerAttributePatternRegistration": () => /* binding */ ro,
/* harmony export */   "AttrBindingBehavior": () => /* binding */ AttrBindingBehavior,
/* harmony export */   "AttrBindingBehaviorRegistration": () => /* binding */ Go,
/* harmony export */   "AttrBindingCommand": () => /* binding */ Sn,
/* harmony export */   "AttrBindingCommandRegistration": () => /* binding */ Ao,
/* harmony export */   "AttrSyntax": () => /* binding */ AttrSyntax,
/* harmony export */   "AttributeBinding": () => /* binding */ AttributeBinding,
/* harmony export */   "AttributeBindingInstruction": () => /* binding */ AttributeBindingInstruction,
/* harmony export */   "AttributeBindingRendererRegistration": () => /* binding */ dl,
/* harmony export */   "AttributeNSAccessor": () => /* binding */ AttributeNSAccessor,
/* harmony export */   "AttributePattern": () => /* binding */ Nt,
/* harmony export */   "AuCompose": () => /* binding */ AuCompose,
/* harmony export */   "AuRender": () => /* binding */ AuRender,
/* harmony export */   "AuRenderRegistration": () => /* binding */ Yo,
/* harmony export */   "AuSlot": () => /* binding */ AuSlot,
/* harmony export */   "AuSlotsInfo": () => /* binding */ AuSlotsInfo,
/* harmony export */   "Aurelia": () => /* binding */ Aurelia,
/* harmony export */   "Bindable": () => /* binding */ Bt,
/* harmony export */   "BindableDefinition": () => /* binding */ BindableDefinition,
/* harmony export */   "BindableObserver": () => /* binding */ BindableObserver,
/* harmony export */   "BindablesInfo": () => /* binding */ BindablesInfo,
/* harmony export */   "BindingCommand": () => /* binding */ mn,
/* harmony export */   "BindingCommandDefinition": () => /* binding */ BindingCommandDefinition,
/* harmony export */   "BindingModeBehavior": () => /* binding */ BindingModeBehavior,
/* harmony export */   "CSSModulesProcessorRegistry": () => /* binding */ CSSModulesProcessorRegistry,
/* harmony export */   "CallBinding": () => /* binding */ CallBinding,
/* harmony export */   "CallBindingCommand": () => /* binding */ xn,
/* harmony export */   "CallBindingCommandRegistration": () => /* binding */ fo,
/* harmony export */   "CallBindingInstruction": () => /* binding */ CallBindingInstruction,
/* harmony export */   "CallBindingRendererRegistration": () => /* binding */ il,
/* harmony export */   "CaptureBindingCommand": () => /* binding */ An,
/* harmony export */   "CaptureBindingCommandRegistration": () => /* binding */ Co,
/* harmony export */   "Case": () => /* binding */ Br,
/* harmony export */   "CheckedObserver": () => /* binding */ CheckedObserver,
/* harmony export */   "Children": () => /* binding */ Se,
/* harmony export */   "ChildrenDefinition": () => /* binding */ ChildrenDefinition,
/* harmony export */   "ChildrenObserver": () => /* binding */ ChildrenObserver,
/* harmony export */   "ClassAttributeAccessor": () => /* binding */ ClassAttributeAccessor,
/* harmony export */   "ClassBindingCommand": () => /* binding */ En,
/* harmony export */   "ClassBindingCommandRegistration": () => /* binding */ So,
/* harmony export */   "ColonPrefixedBindAttributePattern": () => /* binding */ zt,
/* harmony export */   "ColonPrefixedBindAttributePatternRegistration": () => /* binding */ oo,
/* harmony export */   "CommandType": () => /* binding */ an,
/* harmony export */   "ComputedWatcher": () => /* binding */ ComputedWatcher,
/* harmony export */   "Controller": () => /* binding */ Controller,
/* harmony export */   "CustomAttribute": () => /* binding */ Me,
/* harmony export */   "CustomAttributeDefinition": () => /* binding */ CustomAttributeDefinition,
/* harmony export */   "CustomAttributeRendererRegistration": () => /* binding */ sl,
/* harmony export */   "CustomElement": () => /* binding */ si,
/* harmony export */   "CustomElementDefinition": () => /* binding */ CustomElementDefinition,
/* harmony export */   "CustomElementRendererRegistration": () => /* binding */ nl,
/* harmony export */   "DataAttributeAccessor": () => /* binding */ DataAttributeAccessor,
/* harmony export */   "DebounceBindingBehavior": () => /* binding */ DebounceBindingBehavior,
/* harmony export */   "DebounceBindingBehaviorRegistration": () => /* binding */ Xr,
/* harmony export */   "DefaultBindingCommand": () => /* binding */ bn,
/* harmony export */   "DefaultBindingCommandRegistration": () => /* binding */ mo,
/* harmony export */   "DefaultBindingLanguage": () => /* binding */ Bo,
/* harmony export */   "DefaultBindingSyntax": () => /* binding */ co,
/* harmony export */   "DefaultCase": () => /* binding */ Ir,
/* harmony export */   "DefaultComponents": () => /* binding */ so,
/* harmony export */   "DefaultDialogDom": () => /* binding */ DefaultDialogDom,
/* harmony export */   "DefaultDialogDomRenderer": () => /* binding */ DefaultDialogDomRenderer,
/* harmony export */   "DefaultDialogGlobalSettings": () => /* binding */ DefaultDialogGlobalSettings,
/* harmony export */   "DefaultRenderers": () => /* binding */ xl,
/* harmony export */   "DefaultResources": () => /* binding */ el,
/* harmony export */   "DefinitionType": () => /* binding */ Al,
/* harmony export */   "DelegateBindingCommand": () => /* binding */ Cn,
/* harmony export */   "DelegateBindingCommandRegistration": () => /* binding */ ko,
/* harmony export */   "DialogCloseResult": () => /* binding */ DialogCloseResult,
/* harmony export */   "DialogConfiguration": () => /* binding */ Ul,
/* harmony export */   "DialogController": () => /* binding */ DialogController,
/* harmony export */   "DialogDeactivationStatuses": () => /* binding */ Tl,
/* harmony export */   "DialogDefaultConfiguration": () => /* binding */ Fl,
/* harmony export */   "DialogOpenResult": () => /* binding */ DialogOpenResult,
/* harmony export */   "DialogService": () => /* binding */ DialogService,
/* harmony export */   "DotSeparatedAttributePattern": () => /* binding */ Wt,
/* harmony export */   "DotSeparatedAttributePatternRegistration": () => /* binding */ ho,
/* harmony export */   "Else": () => /* binding */ Else,
/* harmony export */   "ElseRegistration": () => /* binding */ $o,
/* harmony export */   "EventDelegator": () => /* binding */ EventDelegator,
/* harmony export */   "EventSubscriber": () => /* binding */ EventSubscriber,
/* harmony export */   "ExpressionWatcher": () => /* binding */ ExpressionWatcher,
/* harmony export */   "Focus": () => /* binding */ Focus,
/* harmony export */   "ForBindingCommand": () => /* binding */ yn,
/* harmony export */   "ForBindingCommandRegistration": () => /* binding */ vo,
/* harmony export */   "FragmentNodeSequence": () => /* binding */ FragmentNodeSequence,
/* harmony export */   "FrequentMutations": () => /* binding */ FrequentMutations,
/* harmony export */   "FromViewBindingBehavior": () => /* binding */ FromViewBindingBehavior,
/* harmony export */   "FromViewBindingBehaviorRegistration": () => /* binding */ Qr,
/* harmony export */   "FromViewBindingCommand": () => /* binding */ gn,
/* harmony export */   "FromViewBindingCommandRegistration": () => /* binding */ po,
/* harmony export */   "FulfilledTemplateController": () => /* binding */ Pr,
/* harmony export */   "HydrateAttributeInstruction": () => /* binding */ HydrateAttributeInstruction,
/* harmony export */   "HydrateElementInstruction": () => /* binding */ HydrateElementInstruction,
/* harmony export */   "HydrateLetElementInstruction": () => /* binding */ HydrateLetElementInstruction,
/* harmony export */   "HydrateTemplateController": () => /* binding */ HydrateTemplateController,
/* harmony export */   "IAppRoot": () => /* binding */ ts,
/* harmony export */   "IAppTask": () => /* binding */ be,
/* harmony export */   "IAttrMapper": () => /* binding */ Zt,
/* harmony export */   "IAttributeParser": () => /* binding */ Ut,
/* harmony export */   "IAttributePattern": () => /* binding */ Mt,
/* harmony export */   "IAuSlotsInfo": () => /* binding */ xs,
/* harmony export */   "IAurelia": () => /* binding */ Cl,
/* harmony export */   "IController": () => /* binding */ Xi,
/* harmony export */   "IDialogController": () => /* binding */ Rl,
/* harmony export */   "IDialogDom": () => /* binding */ Bl,
/* harmony export */   "IDialogDomRenderer": () => /* binding */ El,
/* harmony export */   "IDialogGlobalSettings": () => /* binding */ Il,
/* harmony export */   "IDialogService": () => /* binding */ Sl,
/* harmony export */   "IEventDelegator": () => /* binding */ ws,
/* harmony export */   "IEventTarget": () => /* binding */ rs,
/* harmony export */   "IHistory": () => /* binding */ vs,
/* harmony export */   "IHydrationContext": () => /* binding */ Ki,
/* harmony export */   "IInstruction": () => /* binding */ ks,
/* harmony export */   "ILifecycleHooks": () => /* binding */ bi,
/* harmony export */   "ILocation": () => /* binding */ ms,
/* harmony export */   "INode": () => /* binding */ ns,
/* harmony export */   "INodeObserverLocatorRegistration": () => /* binding */ io,
/* harmony export */   "IPlatform": () => /* binding */ Kt,
/* harmony export */   "IProjections": () => /* binding */ bs,
/* harmony export */   "IRenderLocation": () => /* binding */ os,
/* harmony export */   "IRenderer": () => /* binding */ Ss,
/* harmony export */   "IRendering": () => /* binding */ Pi,
/* harmony export */   "ISVGAnalyzer": () => /* binding */ Yt,
/* harmony export */   "ISanitizer": () => /* binding */ Hr,
/* harmony export */   "IShadowDOMGlobalStyles": () => /* binding */ di,
/* harmony export */   "IShadowDOMStyleFactory": () => /* binding */ ui,
/* harmony export */   "IShadowDOMStyles": () => /* binding */ fi,
/* harmony export */   "ISyntaxInterpreter": () => /* binding */ $t,
/* harmony export */   "ITemplateCompiler": () => /* binding */ As,
/* harmony export */   "ITemplateCompilerHooks": () => /* binding */ zn,
/* harmony export */   "ITemplateCompilerRegistration": () => /* binding */ eo,
/* harmony export */   "ITemplateElementFactory": () => /* binding */ Tn,
/* harmony export */   "IViewFactory": () => /* binding */ Ai,
/* harmony export */   "IViewLocator": () => /* binding */ Di,
/* harmony export */   "IWcElementRegistry": () => /* binding */ Vl,
/* harmony export */   "IWindow": () => /* binding */ ds,
/* harmony export */   "IWorkTracker": () => /* binding */ es,
/* harmony export */   "If": () => /* binding */ If,
/* harmony export */   "IfRegistration": () => /* binding */ Oo,
/* harmony export */   "InstructionType": () => /* binding */ ys,
/* harmony export */   "InterpolationBinding": () => /* binding */ InterpolationBinding,
/* harmony export */   "InterpolationBindingRendererRegistration": () => /* binding */ rl,
/* harmony export */   "InterpolationInstruction": () => /* binding */ InterpolationInstruction,
/* harmony export */   "Interpretation": () => /* binding */ Interpretation,
/* harmony export */   "IteratorBindingInstruction": () => /* binding */ IteratorBindingInstruction,
/* harmony export */   "IteratorBindingRendererRegistration": () => /* binding */ ol,
/* harmony export */   "LetBinding": () => /* binding */ LetBinding,
/* harmony export */   "LetBindingInstruction": () => /* binding */ LetBindingInstruction,
/* harmony export */   "LetElementRendererRegistration": () => /* binding */ ll,
/* harmony export */   "LifecycleHooks": () => /* binding */ ki,
/* harmony export */   "LifecycleHooksDefinition": () => /* binding */ LifecycleHooksDefinition,
/* harmony export */   "LifecycleHooksEntry": () => /* binding */ LifecycleHooksEntry,
/* harmony export */   "Listener": () => /* binding */ Listener,
/* harmony export */   "ListenerBindingInstruction": () => /* binding */ ListenerBindingInstruction,
/* harmony export */   "ListenerBindingRendererRegistration": () => /* binding */ fl,
/* harmony export */   "NodeObserverConfig": () => /* binding */ NodeObserverConfig,
/* harmony export */   "NodeObserverLocator": () => /* binding */ NodeObserverLocator,
/* harmony export */   "NodeType": () => /* binding */ ls,
/* harmony export */   "NoopSVGAnalyzer": () => /* binding */ NoopSVGAnalyzer,
/* harmony export */   "ObserveShallow": () => /* binding */ ObserveShallow,
/* harmony export */   "OneTimeBindingBehavior": () => /* binding */ OneTimeBindingBehavior,
/* harmony export */   "OneTimeBindingBehaviorRegistration": () => /* binding */ Kr,
/* harmony export */   "OneTimeBindingCommand": () => /* binding */ vn,
/* harmony export */   "OneTimeBindingCommandRegistration": () => /* binding */ go,
/* harmony export */   "PendingTemplateController": () => /* binding */ Dr,
/* harmony export */   "Portal": () => /* binding */ Portal,
/* harmony export */   "PromiseTemplateController": () => /* binding */ Tr,
/* harmony export */   "PropertyBinding": () => /* binding */ PropertyBinding,
/* harmony export */   "PropertyBindingInstruction": () => /* binding */ PropertyBindingInstruction,
/* harmony export */   "PropertyBindingRendererRegistration": () => /* binding */ hl,
/* harmony export */   "RefAttributePattern": () => /* binding */ Ht,
/* harmony export */   "RefAttributePatternRegistration": () => /* binding */ lo,
/* harmony export */   "RefBinding": () => /* binding */ RefBinding,
/* harmony export */   "RefBindingCommandRegistration": () => /* binding */ xo,
/* harmony export */   "RefBindingInstruction": () => /* binding */ RefBindingInstruction,
/* harmony export */   "RefBindingRendererRegistration": () => /* binding */ al,
/* harmony export */   "RejectedTemplateController": () => /* binding */ Or,
/* harmony export */   "RenderPlan": () => /* binding */ RenderPlan,
/* harmony export */   "Rendering": () => /* binding */ Rendering,
/* harmony export */   "Repeat": () => /* binding */ Repeat,
/* harmony export */   "RepeatRegistration": () => /* binding */ Lo,
/* harmony export */   "SVGAnalyzer": () => /* binding */ SVGAnalyzer,
/* harmony export */   "SVGAnalyzerRegistration": () => /* binding */ no,
/* harmony export */   "SanitizeValueConverter": () => /* binding */ zr,
/* harmony export */   "SanitizeValueConverterRegistration": () => /* binding */ Io,
/* harmony export */   "SelectValueObserver": () => /* binding */ SelectValueObserver,
/* harmony export */   "SelfBindingBehavior": () => /* binding */ SelfBindingBehavior,
/* harmony export */   "SelfBindingBehaviorRegistration": () => /* binding */ Xo,
/* harmony export */   "SetAttributeInstruction": () => /* binding */ SetAttributeInstruction,
/* harmony export */   "SetAttributeRendererRegistration": () => /* binding */ ml,
/* harmony export */   "SetClassAttributeInstruction": () => /* binding */ SetClassAttributeInstruction,
/* harmony export */   "SetClassAttributeRendererRegistration": () => /* binding */ vl,
/* harmony export */   "SetPropertyInstruction": () => /* binding */ SetPropertyInstruction,
/* harmony export */   "SetPropertyRendererRegistration": () => /* binding */ cl,
/* harmony export */   "SetStyleAttributeInstruction": () => /* binding */ SetStyleAttributeInstruction,
/* harmony export */   "SetStyleAttributeRendererRegistration": () => /* binding */ pl,
/* harmony export */   "ShadowDOMRegistry": () => /* binding */ ShadowDOMRegistry,
/* harmony export */   "ShortHandBindingSyntax": () => /* binding */ uo,
/* harmony export */   "SignalBindingBehavior": () => /* binding */ SignalBindingBehavior,
/* harmony export */   "SignalBindingBehaviorRegistration": () => /* binding */ Zr,
/* harmony export */   "StandardConfiguration": () => /* binding */ yl,
/* harmony export */   "StyleAttributeAccessor": () => /* binding */ StyleAttributeAccessor,
/* harmony export */   "StyleBindingCommand": () => /* binding */ Rn,
/* harmony export */   "StyleBindingCommandRegistration": () => /* binding */ Ro,
/* harmony export */   "StyleConfiguration": () => /* binding */ mi,
/* harmony export */   "StyleElementStyles": () => /* binding */ StyleElementStyles,
/* harmony export */   "StylePropertyBindingInstruction": () => /* binding */ StylePropertyBindingInstruction,
/* harmony export */   "StylePropertyBindingRendererRegistration": () => /* binding */ gl,
/* harmony export */   "Switch": () => /* binding */ Er,
/* harmony export */   "TemplateCompiler": () => /* binding */ TemplateCompiler,
/* harmony export */   "TemplateCompilerHooks": () => /* binding */ Kn,
/* harmony export */   "TemplateControllerRendererRegistration": () => /* binding */ ul,
/* harmony export */   "TextBindingInstruction": () => /* binding */ TextBindingInstruction,
/* harmony export */   "TextBindingRendererRegistration": () => /* binding */ wl,
/* harmony export */   "ThrottleBindingBehavior": () => /* binding */ ThrottleBindingBehavior,
/* harmony export */   "ThrottleBindingBehaviorRegistration": () => /* binding */ Jr,
/* harmony export */   "ToViewBindingBehavior": () => /* binding */ ToViewBindingBehavior,
/* harmony export */   "ToViewBindingBehaviorRegistration": () => /* binding */ Yr,
/* harmony export */   "ToViewBindingCommand": () => /* binding */ pn,
/* harmony export */   "ToViewBindingCommandRegistration": () => /* binding */ wo,
/* harmony export */   "TriggerBindingCommand": () => /* binding */ kn,
/* harmony export */   "TriggerBindingCommandRegistration": () => /* binding */ yo,
/* harmony export */   "TwoWayBindingBehavior": () => /* binding */ TwoWayBindingBehavior,
/* harmony export */   "TwoWayBindingBehaviorRegistration": () => /* binding */ to,
/* harmony export */   "TwoWayBindingCommand": () => /* binding */ wn,
/* harmony export */   "TwoWayBindingCommandRegistration": () => /* binding */ bo,
/* harmony export */   "UpdateTriggerBindingBehavior": () => /* binding */ UpdateTriggerBindingBehavior,
/* harmony export */   "UpdateTriggerBindingBehaviorRegistration": () => /* binding */ Ko,
/* harmony export */   "ValueAttributeObserver": () => /* binding */ ValueAttributeObserver,
/* harmony export */   "ViewFactory": () => /* binding */ ViewFactory,
/* harmony export */   "ViewLocator": () => /* binding */ ViewLocator,
/* harmony export */   "ViewModelKind": () => /* binding */ Hi,
/* harmony export */   "ViewValueConverter": () => /* binding */ Gr,
/* harmony export */   "ViewValueConverterRegistration": () => /* binding */ To,
/* harmony export */   "Views": () => /* binding */ Ii,
/* harmony export */   "Watch": () => /* binding */ _e,
/* harmony export */   "WcCustomElementRegistry": () => /* binding */ WcCustomElementRegistry,
/* harmony export */   "With": () => /* binding */ With,
/* harmony export */   "WithRegistration": () => /* binding */ qo,
/* harmony export */   "allResources": () => /* binding */ Pn,
/* harmony export */   "attributePattern": () => /* binding */ Ft,
/* harmony export */   "bindable": () => /* binding */ St,
/* harmony export */   "bindingCommand": () => /* binding */ cn,
/* harmony export */   "children": () => /* binding */ ke,
/* harmony export */   "coercer": () => /* binding */ It,
/* harmony export */   "containerless": () => /* binding */ We,
/* harmony export */   "convertToRenderLocation": () => /* binding */ us,
/* harmony export */   "createElement": () => /* binding */ Ur,
/* harmony export */   "cssModules": () => /* binding */ ai,
/* harmony export */   "customAttribute": () => /* binding */ Pe,
/* harmony export */   "customElement": () => /* binding */ je,
/* harmony export */   "getEffectiveParentNode": () => /* binding */ as,
/* harmony export */   "getRef": () => /* binding */ is,
/* harmony export */   "isCustomElementController": () => /* binding */ ji,
/* harmony export */   "isCustomElementViewModel": () => /* binding */ Ni,
/* harmony export */   "isInstruction": () => /* binding */ Cs,
/* harmony export */   "isRenderLocation": () => /* binding */ fs,
/* harmony export */   "lifecycleHooks": () => /* binding */ Ci,
/* harmony export */   "processContent": () => /* binding */ ri,
/* harmony export */   "renderer": () => /* binding */ Rs,
/* harmony export */   "setEffectiveParentNode": () => /* binding */ cs,
/* harmony export */   "setRef": () => /* binding */ ss,
/* harmony export */   "shadowCSS": () => /* binding */ ci,
/* harmony export */   "templateCompilerHooks": () => /* binding */ Yn,
/* harmony export */   "templateController": () => /* binding */ Oe,
/* harmony export */   "useShadowDOM": () => /* binding */ Ne,
/* harmony export */   "view": () => /* binding */ Ti,
/* harmony export */   "watch": () => /* binding */ Ue
/* harmony export */ });
/* harmony import */ var _aurelia_platform__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @aurelia/platform */ "./node_modules/@aurelia/platform/dist/esm/index.js");
/* harmony import */ var _aurelia_platform_browser__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @aurelia/platform-browser */ "./node_modules/@aurelia/platform-browser/dist/esm/index.js");
/* harmony import */ var _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @aurelia/kernel */ "./node_modules/@aurelia/kernel/dist/esm/index.js");
/* harmony import */ var _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @aurelia/runtime */ "./node_modules/@aurelia/runtime/dist/esm/index.js");












/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */ function ot(t, e, i, s) {
    var n = arguments.length, r = n < 3 ? e : null === s ? s = Object.getOwnPropertyDescriptor(e, i) : s, o;
    if ("object" === typeof Reflect && "function" === typeof Reflect.decorate) r = Reflect.decorate(t, e, i, s); else for (var l = t.length - 1; l >= 0; l--) if (o = t[l]) r = (n < 3 ? o(r) : n > 3 ? o(e, i, r) : o(e, i)) || r;
    return n > 3 && r && Object.defineProperty(e, i, r), r;
}

function lt(t, e) {
    return function(i, s) {
        e(i, s, t);
    };
}

const ht = _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.Metadata.getOwn;

const at = _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.Metadata.hasOwn;

const ct = _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.Metadata.define;

const {annotation: ut, resource: ft} = _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.Protocol;

const dt = ut.keyFor;

const mt = ft.keyFor;

const vt = ft.appendTo;

const pt = ut.appendTo;

const gt = ut.getKeys;

const wt = () => Object.create(null);

const bt = Object.prototype.hasOwnProperty;

const xt = wt();

const yt = (t, e, i) => {
    if (true === xt[e]) return true;
    if (!At(e)) return false;
    const s = e.slice(0, 5);
    return xt[e] = "aria-" === s || "data-" === s || i.isStandardSvgAttribute(t, e);
};

const kt = t => t instanceof Promise;

const Ct = t => "function" === typeof t;

const At = t => "string" === typeof t;

function St(t, e) {
    let i;
    function s(t, e) {
        if (arguments.length > 1) i.property = e;
        ct(Et, BindableDefinition.create(e, t, i), t.constructor, e);
        pt(t.constructor, Bt.keyFrom(e));
    }
    if (arguments.length > 1) {
        i = {};
        s(t, e);
        return;
    } else if (At(t)) {
        i = {};
        return s;
    }
    i = void 0 === t ? {} : t;
    return s;
}

function Rt(t) {
    return t.startsWith(Et);
}

const Et = dt("bindable");

const Bt = Object.freeze({
    name: Et,
    keyFrom: t => `${Et}:${t}`,
    from(t, ...e) {
        const i = {};
        const s = Array.isArray;
        function n(e) {
            i[e] = BindableDefinition.create(e, t);
        }
        function r(e, s) {
            i[e] = s instanceof BindableDefinition ? s : BindableDefinition.create(e, t, s);
        }
        function o(t) {
            if (s(t)) t.forEach(n); else if (t instanceof BindableDefinition) i[t.property] = t; else if (void 0 !== t) Object.keys(t).forEach((e => r(e, t[e])));
        }
        e.forEach(o);
        return i;
    },
    for(t) {
        let e;
        const i = {
            add(s) {
                let n;
                let r;
                if (At(s)) {
                    n = s;
                    r = {
                        property: n
                    };
                } else {
                    n = s.property;
                    r = s;
                }
                e = BindableDefinition.create(n, t, r);
                if (!at(Et, t, n)) pt(t, Bt.keyFrom(n));
                ct(Et, e, t, n);
                return i;
            },
            mode(t) {
                e.mode = t;
                return i;
            },
            callback(t) {
                e.callback = t;
                return i;
            },
            attribute(t) {
                e.attribute = t;
                return i;
            },
            primary() {
                e.primary = true;
                return i;
            },
            set(t) {
                e.set = t;
                return i;
            }
        };
        return i;
    },
    getAll(t) {
        const e = Et.length + 1;
        const i = [];
        const n = (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.getPrototypeChain)(t);
        let r = n.length;
        let o = 0;
        let l;
        let h;
        let a;
        let c;
        while (--r >= 0) {
            a = n[r];
            l = gt(a).filter(Rt);
            h = l.length;
            for (c = 0; c < h; ++c) i[o++] = ht(Et, a, l[c].slice(e));
        }
        return i;
    }
});

class BindableDefinition {
    constructor(t, e, i, s, n, r) {
        this.attribute = t;
        this.callback = e;
        this.mode = i;
        this.primary = s;
        this.property = n;
        this.set = r;
    }
    static create(t, e, i = {}) {
        return new BindableDefinition((0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.firstDefined)(i.attribute, (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.kebabCase)(t)), (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.firstDefined)(i.callback, `${t}Changed`), (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.firstDefined)(i.mode, _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.BindingMode.toView), (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.firstDefined)(i.primary, false), (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.firstDefined)(i.property, t), (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.firstDefined)(i.set, Dt(t, e, i)));
    }
}

function It(t, e, i) {
    Tt.define(t, e);
}

const Tt = {
    key: dt("coercer"),
    define(t, e) {
        ct(Tt.key, t[e].bind(t), t);
    },
    for(t) {
        return ht(Tt.key, t);
    }
};

function Dt(t, e, i = {}) {
    var s, n, r;
    const l = null !== (n = null !== (s = i.type) && void 0 !== s ? s : Reflect.getMetadata("design:type", e, t)) && void 0 !== n ? n : null;
    if (null == l) return _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.noop;
    let h;
    switch (l) {
      case Number:
      case Boolean:
      case String:
      case BigInt:
        h = l;
        break;

      default:
        {
            const t = l.coerce;
            h = "function" === typeof t ? t.bind(l) : null !== (r = Tt.for(l)) && void 0 !== r ? r : _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.noop;
            break;
        }
    }
    return h === _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.noop ? h : Pt(h, i.nullable);
}

function Pt(t, e) {
    return function(i, s) {
        var n;
        if (!(null === s || void 0 === s ? void 0 : s.enableCoercion)) return i;
        return (null !== e && void 0 !== e ? e : (null !== (n = null === s || void 0 === s ? void 0 : s.coerceNullish) && void 0 !== n ? n : false) ? false : true) && null == i ? i : t(i, s);
    };
}

class BindableObserver {
    constructor(t, e, i, s, n, r) {
        this.set = s;
        this.$controller = n;
        this.t = r;
        this.v = void 0;
        this.ov = void 0;
        this.f = 0;
        const l = t[i];
        const h = t.propertyChanged;
        const a = this.i = Ct(l);
        const c = this.u = Ct(h);
        const u = this.hs = s !== _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.noop;
        let f;
        this.o = t;
        this.k = e;
        this.cb = a ? l : _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.noop;
        this.C = c ? h : _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.noop;
        if (void 0 === this.cb && !c && !u) this.iO = false; else {
            this.iO = true;
            f = t[e];
            this.v = u && void 0 !== f ? s(f, this.t) : f;
            this.A();
        }
    }
    get type() {
        return 1;
    }
    getValue() {
        return this.v;
    }
    setValue(t, e) {
        if (this.hs) t = this.set(t, this.t);
        const i = this.v;
        if (this.iO) {
            if (Object.is(t, i)) return;
            this.v = t;
            this.ov = i;
            this.f = e;
            if (null == this.$controller || this.$controller.isBound) {
                if (this.i) this.cb.call(this.o, t, i, e);
                if (this.u) this.C.call(this.o, this.k, t, i, e);
            }
            this.queue.add(this);
        } else this.o[this.k] = t;
    }
    subscribe(t) {
        if (false === !this.iO) {
            this.iO = true;
            this.v = this.hs ? this.set(this.o[this.k], this.t) : this.o[this.k];
            this.A();
        }
        this.subs.add(t);
    }
    flush() {
        Ot = this.ov;
        this.ov = this.v;
        this.subs.notify(this.v, Ot, this.f);
    }
    A() {
        Reflect.defineProperty(this.o, this.k, {
            enumerable: true,
            configurable: true,
            get: () => this.v,
            set: t => {
                this.setValue(t, 0);
            }
        });
    }
}

(0,_aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.subscriberCollection)(BindableObserver);

(0,_aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.withFlushQueue)(BindableObserver);

let Ot;

class CharSpec {
    constructor(t, e, i, s) {
        this.chars = t;
        this.repeat = e;
        this.isSymbol = i;
        this.isInverted = s;
        if (s) switch (t.length) {
          case 0:
            this.has = this.R;
            break;

          case 1:
            this.has = this.B;
            break;

          default:
            this.has = this.I;
        } else switch (t.length) {
          case 0:
            this.has = this.T;
            break;

          case 1:
            this.has = this.P;
            break;

          default:
            this.has = this.O;
        }
    }
    equals(t) {
        return this.chars === t.chars && this.repeat === t.repeat && this.isSymbol === t.isSymbol && this.isInverted === t.isInverted;
    }
    O(t) {
        return this.chars.includes(t);
    }
    P(t) {
        return this.chars === t;
    }
    T(t) {
        return false;
    }
    I(t) {
        return !this.chars.includes(t);
    }
    B(t) {
        return this.chars !== t;
    }
    R(t) {
        return true;
    }
}

class Interpretation {
    constructor() {
        this.parts = _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.emptyArray;
        this.$ = "";
        this.L = {};
        this.q = {};
    }
    get pattern() {
        const t = this.$;
        if ("" === t) return null; else return t;
    }
    set pattern(t) {
        if (null == t) {
            this.$ = "";
            this.parts = _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.emptyArray;
        } else {
            this.$ = t;
            this.parts = this.q[t];
        }
    }
    append(t, e) {
        const i = this.L;
        if (void 0 === i[t]) i[t] = e; else i[t] += e;
    }
    next(t) {
        const e = this.L;
        let i;
        if (void 0 !== e[t]) {
            i = this.q;
            if (void 0 === i[t]) i[t] = [ e[t] ]; else i[t].push(e[t]);
            e[t] = void 0;
        }
    }
}

class State$1 {
    constructor(t, ...e) {
        this.charSpec = t;
        this.nextStates = [];
        this.types = null;
        this.isEndpoint = false;
        this.patterns = e;
    }
    get pattern() {
        return this.isEndpoint ? this.patterns[0] : null;
    }
    findChild(t) {
        const e = this.nextStates;
        const i = e.length;
        let s = null;
        let n = 0;
        for (;n < i; ++n) {
            s = e[n];
            if (t.equals(s.charSpec)) return s;
        }
        return null;
    }
    append(t, e) {
        const i = this.patterns;
        if (!i.includes(e)) i.push(e);
        let s = this.findChild(t);
        if (null == s) {
            s = new State$1(t, e);
            this.nextStates.push(s);
            if (t.repeat) s.nextStates.push(s);
        }
        return s;
    }
    findMatches(t, e) {
        const i = [];
        const s = this.nextStates;
        const n = s.length;
        let r = 0;
        let o = null;
        let l = 0;
        let h = 0;
        for (;l < n; ++l) {
            o = s[l];
            if (o.charSpec.has(t)) {
                i.push(o);
                r = o.patterns.length;
                h = 0;
                if (o.charSpec.isSymbol) for (;h < r; ++h) e.next(o.patterns[h]); else for (;h < r; ++h) e.append(o.patterns[h], t);
            }
        }
        return i;
    }
}

class StaticSegment {
    constructor(t) {
        this.text = t;
        const e = this.len = t.length;
        const i = this.specs = [];
        let s = 0;
        for (;e > s; ++s) i.push(new CharSpec(t[s], false, false, false));
    }
    eachChar(t) {
        const e = this.len;
        const i = this.specs;
        let s = 0;
        for (;e > s; ++s) t(i[s]);
    }
}

class DynamicSegment {
    constructor(t) {
        this.text = "PART";
        this.spec = new CharSpec(t, true, false, true);
    }
    eachChar(t) {
        t(this.spec);
    }
}

class SymbolSegment {
    constructor(t) {
        this.text = t;
        this.spec = new CharSpec(t, false, true, false);
    }
    eachChar(t) {
        t(this.spec);
    }
}

class SegmentTypes {
    constructor() {
        this.statics = 0;
        this.dynamics = 0;
        this.symbols = 0;
    }
}

const $t = _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.DI.createInterface("ISyntaxInterpreter", (t => t.singleton(SyntaxInterpreter)));

class SyntaxInterpreter {
    constructor() {
        this.rootState = new State$1(null);
        this.initialStates = [ this.rootState ];
    }
    add(t) {
        t = t.slice(0).sort(((t, e) => t.pattern > e.pattern ? 1 : -1));
        const e = t.length;
        let i;
        let s;
        let n;
        let r;
        let o;
        let l;
        let h;
        let a = 0;
        let c;
        while (e > a) {
            i = this.rootState;
            s = t[a];
            n = s.pattern;
            r = new SegmentTypes;
            o = this.parse(s, r);
            l = o.length;
            h = t => {
                i = i.append(t, n);
            };
            for (c = 0; l > c; ++c) o[c].eachChar(h);
            i.types = r;
            i.isEndpoint = true;
            ++a;
        }
    }
    interpret(t) {
        const e = new Interpretation;
        const i = t.length;
        let s = this.initialStates;
        let n = 0;
        let r;
        for (;n < i; ++n) {
            s = this.getNextStates(s, t.charAt(n), e);
            if (0 === s.length) break;
        }
        s = s.filter(Lt);
        if (s.length > 0) {
            s.sort(qt);
            r = s[0];
            if (!r.charSpec.isSymbol) e.next(r.pattern);
            e.pattern = r.pattern;
        }
        return e;
    }
    getNextStates(t, e, i) {
        const s = [];
        let n = null;
        const r = t.length;
        let o = 0;
        for (;o < r; ++o) {
            n = t[o];
            s.push(...n.findMatches(e, i));
        }
        return s;
    }
    parse(t, e) {
        const i = [];
        const s = t.pattern;
        const n = s.length;
        const r = t.symbols;
        let o = 0;
        let l = 0;
        let h = "";
        while (o < n) {
            h = s.charAt(o);
            if (0 === r.length || !r.includes(h)) if (o === l) if ("P" === h && "PART" === s.slice(o, o + 4)) {
                l = o += 4;
                i.push(new DynamicSegment(r));
                ++e.dynamics;
            } else ++o; else ++o; else if (o !== l) {
                i.push(new StaticSegment(s.slice(l, o)));
                ++e.statics;
                l = o;
            } else {
                i.push(new SymbolSegment(s.slice(l, o + 1)));
                ++e.symbols;
                l = ++o;
            }
        }
        if (l !== o) {
            i.push(new StaticSegment(s.slice(l, o)));
            ++e.statics;
        }
        return i;
    }
}

function Lt(t) {
    return t.isEndpoint;
}

function qt(t, e) {
    const i = t.types;
    const s = e.types;
    if (i.statics !== s.statics) return s.statics - i.statics;
    if (i.dynamics !== s.dynamics) return s.dynamics - i.dynamics;
    if (i.symbols !== s.symbols) return s.symbols - i.symbols;
    return 0;
}

class AttrSyntax {
    constructor(t, e, i, s) {
        this.rawName = t;
        this.rawValue = e;
        this.target = i;
        this.command = s;
    }
}

const Mt = _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.DI.createInterface("IAttributePattern");

const Ut = _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.DI.createInterface("IAttributeParser", (t => t.singleton(AttributeParser)));

class AttributeParser {
    constructor(t, e) {
        this.M = {};
        this.U = t;
        const i = this.F = {};
        const s = e.reduce(((t, e) => {
            const s = jt(e.constructor);
            s.forEach((t => i[t.pattern] = e));
            return t.concat(s);
        }), _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.emptyArray);
        t.add(s);
    }
    parse(t, e) {
        let i = this.M[t];
        if (null == i) i = this.M[t] = this.U.interpret(t);
        const s = i.pattern;
        if (null == s) return new AttrSyntax(t, e, t, null); else return this.F[s][s](t, e, i.parts);
    }
}

AttributeParser.inject = [ $t, (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.all)(Mt) ];

function Ft(...t) {
    return function e(i) {
        return Nt.define(t, i);
    };
}

class AttributePatternResourceDefinition {
    constructor(t) {
        this.Type = t;
        this.name = void 0;
    }
    register(t) {
        _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.Registration.singleton(Mt, this.Type).register(t);
    }
}

const Vt = mt("attribute-pattern");

const _t = "attribute-pattern-definitions";

const jt = t => _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.Protocol.annotation.get(t, _t);

const Nt = Object.freeze({
    name: Vt,
    definitionAnnotationKey: _t,
    define(t, e) {
        const s = new AttributePatternResourceDefinition(e);
        ct(Vt, s, e);
        vt(e, Vt);
        _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.Protocol.annotation.set(e, _t, t);
        pt(e, _t);
        return e;
    },
    getPatternDefinitions: jt
});

let Wt = class DotSeparatedAttributePattern {
    "PART.PART"(t, e, i) {
        return new AttrSyntax(t, e, i[0], i[1]);
    }
    "PART.PART.PART"(t, e, i) {
        return new AttrSyntax(t, e, i[0], i[2]);
    }
};

Wt = ot([ Ft({
    pattern: "PART.PART",
    symbols: "."
}, {
    pattern: "PART.PART.PART",
    symbols: "."
}) ], Wt);

let Ht = class RefAttributePattern {
    ref(t, e, i) {
        return new AttrSyntax(t, e, "element", "ref");
    }
    "PART.ref"(t, e, i) {
        return new AttrSyntax(t, e, i[0], "ref");
    }
};

Ht = ot([ Ft({
    pattern: "ref",
    symbols: ""
}, {
    pattern: "PART.ref",
    symbols: "."
}) ], Ht);

let zt = class ColonPrefixedBindAttributePattern {
    ":PART"(t, e, i) {
        return new AttrSyntax(t, e, i[0], "bind");
    }
};

zt = ot([ Ft({
    pattern: ":PART",
    symbols: ":"
}) ], zt);

let Gt = class AtPrefixedTriggerAttributePattern {
    "@PART"(t, e, i) {
        return new AttrSyntax(t, e, i[0], "trigger");
    }
};

Gt = ot([ Ft({
    pattern: "@PART",
    symbols: "@"
}) ], Gt);

let Xt = class SpreadAttributePattern {
    "...$attrs"(t, e, i) {
        return new AttrSyntax(t, e, "", "...$attrs");
    }
};

Xt = ot([ Ft({
    pattern: "...$attrs",
    symbols: ""
}) ], Xt);

const Kt = _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.IPlatform;

const Yt = _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.DI.createInterface("ISVGAnalyzer", (t => t.singleton(NoopSVGAnalyzer)));

class NoopSVGAnalyzer {
    isStandardSvgAttribute(t, e) {
        return false;
    }
}

function Qt(t) {
    const e = wt();
    let i;
    for (i of t) e[i] = true;
    return e;
}

class SVGAnalyzer {
    constructor(t) {
        this.V = Object.assign(wt(), {
            a: Qt([ "class", "externalResourcesRequired", "id", "onactivate", "onclick", "onfocusin", "onfocusout", "onload", "onmousedown", "onmousemove", "onmouseout", "onmouseover", "onmouseup", "requiredExtensions", "requiredFeatures", "style", "systemLanguage", "target", "transform", "xlink:actuate", "xlink:arcrole", "xlink:href", "xlink:role", "xlink:show", "xlink:title", "xlink:type", "xml:base", "xml:lang", "xml:space" ]),
            altGlyph: Qt([ "class", "dx", "dy", "externalResourcesRequired", "format", "glyphRef", "id", "onactivate", "onclick", "onfocusin", "onfocusout", "onload", "onmousedown", "onmousemove", "onmouseout", "onmouseover", "onmouseup", "requiredExtensions", "requiredFeatures", "rotate", "style", "systemLanguage", "x", "xlink:actuate", "xlink:arcrole", "xlink:href", "xlink:role", "xlink:show", "xlink:title", "xlink:type", "xml:base", "xml:lang", "xml:space", "y" ]),
            altglyph: wt(),
            altGlyphDef: Qt([ "id", "xml:base", "xml:lang", "xml:space" ]),
            altglyphdef: wt(),
            altGlyphItem: Qt([ "id", "xml:base", "xml:lang", "xml:space" ]),
            altglyphitem: wt(),
            animate: Qt([ "accumulate", "additive", "attributeName", "attributeType", "begin", "by", "calcMode", "dur", "end", "externalResourcesRequired", "fill", "from", "id", "keySplines", "keyTimes", "max", "min", "onbegin", "onend", "onload", "onrepeat", "repeatCount", "repeatDur", "requiredExtensions", "requiredFeatures", "restart", "systemLanguage", "to", "values", "xlink:actuate", "xlink:arcrole", "xlink:href", "xlink:role", "xlink:show", "xlink:title", "xlink:type", "xml:base", "xml:lang", "xml:space" ]),
            animateColor: Qt([ "accumulate", "additive", "attributeName", "attributeType", "begin", "by", "calcMode", "dur", "end", "externalResourcesRequired", "fill", "from", "id", "keySplines", "keyTimes", "max", "min", "onbegin", "onend", "onload", "onrepeat", "repeatCount", "repeatDur", "requiredExtensions", "requiredFeatures", "restart", "systemLanguage", "to", "values", "xlink:actuate", "xlink:arcrole", "xlink:href", "xlink:role", "xlink:show", "xlink:title", "xlink:type", "xml:base", "xml:lang", "xml:space" ]),
            animateMotion: Qt([ "accumulate", "additive", "begin", "by", "calcMode", "dur", "end", "externalResourcesRequired", "fill", "from", "id", "keyPoints", "keySplines", "keyTimes", "max", "min", "onbegin", "onend", "onload", "onrepeat", "origin", "path", "repeatCount", "repeatDur", "requiredExtensions", "requiredFeatures", "restart", "rotate", "systemLanguage", "to", "values", "xlink:actuate", "xlink:arcrole", "xlink:href", "xlink:role", "xlink:show", "xlink:title", "xlink:type", "xml:base", "xml:lang", "xml:space" ]),
            animateTransform: Qt([ "accumulate", "additive", "attributeName", "attributeType", "begin", "by", "calcMode", "dur", "end", "externalResourcesRequired", "fill", "from", "id", "keySplines", "keyTimes", "max", "min", "onbegin", "onend", "onload", "onrepeat", "repeatCount", "repeatDur", "requiredExtensions", "requiredFeatures", "restart", "systemLanguage", "to", "type", "values", "xlink:actuate", "xlink:arcrole", "xlink:href", "xlink:role", "xlink:show", "xlink:title", "xlink:type", "xml:base", "xml:lang", "xml:space" ]),
            circle: Qt([ "class", "cx", "cy", "externalResourcesRequired", "id", "onactivate", "onclick", "onfocusin", "onfocusout", "onload", "onmousedown", "onmousemove", "onmouseout", "onmouseover", "onmouseup", "r", "requiredExtensions", "requiredFeatures", "style", "systemLanguage", "transform", "xml:base", "xml:lang", "xml:space" ]),
            clipPath: Qt([ "class", "clipPathUnits", "externalResourcesRequired", "id", "requiredExtensions", "requiredFeatures", "style", "systemLanguage", "transform", "xml:base", "xml:lang", "xml:space" ]),
            "color-profile": Qt([ "id", "local", "name", "rendering-intent", "xlink:actuate", "xlink:arcrole", "xlink:href", "xlink:role", "xlink:show", "xlink:title", "xlink:type", "xml:base", "xml:lang", "xml:space" ]),
            cursor: Qt([ "externalResourcesRequired", "id", "requiredExtensions", "requiredFeatures", "systemLanguage", "x", "xlink:actuate", "xlink:arcrole", "xlink:href", "xlink:role", "xlink:show", "xlink:title", "xlink:type", "xml:base", "xml:lang", "xml:space", "y" ]),
            defs: Qt([ "class", "externalResourcesRequired", "id", "onactivate", "onclick", "onfocusin", "onfocusout", "onload", "onmousedown", "onmousemove", "onmouseout", "onmouseover", "onmouseup", "requiredExtensions", "requiredFeatures", "style", "systemLanguage", "transform", "xml:base", "xml:lang", "xml:space" ]),
            desc: Qt([ "class", "id", "style", "xml:base", "xml:lang", "xml:space" ]),
            ellipse: Qt([ "class", "cx", "cy", "externalResourcesRequired", "id", "onactivate", "onclick", "onfocusin", "onfocusout", "onload", "onmousedown", "onmousemove", "onmouseout", "onmouseover", "onmouseup", "requiredExtensions", "requiredFeatures", "rx", "ry", "style", "systemLanguage", "transform", "xml:base", "xml:lang", "xml:space" ]),
            feBlend: Qt([ "class", "height", "id", "in", "in2", "mode", "result", "style", "width", "x", "xml:base", "xml:lang", "xml:space", "y" ]),
            feColorMatrix: Qt([ "class", "height", "id", "in", "result", "style", "type", "values", "width", "x", "xml:base", "xml:lang", "xml:space", "y" ]),
            feComponentTransfer: Qt([ "class", "height", "id", "in", "result", "style", "width", "x", "xml:base", "xml:lang", "xml:space", "y" ]),
            feComposite: Qt([ "class", "height", "id", "in", "in2", "k1", "k2", "k3", "k4", "operator", "result", "style", "width", "x", "xml:base", "xml:lang", "xml:space", "y" ]),
            feConvolveMatrix: Qt([ "bias", "class", "divisor", "edgeMode", "height", "id", "in", "kernelMatrix", "kernelUnitLength", "order", "preserveAlpha", "result", "style", "targetX", "targetY", "width", "x", "xml:base", "xml:lang", "xml:space", "y" ]),
            feDiffuseLighting: Qt([ "class", "diffuseConstant", "height", "id", "in", "kernelUnitLength", "result", "style", "surfaceScale", "width", "x", "xml:base", "xml:lang", "xml:space", "y" ]),
            feDisplacementMap: Qt([ "class", "height", "id", "in", "in2", "result", "scale", "style", "width", "x", "xChannelSelector", "xml:base", "xml:lang", "xml:space", "y", "yChannelSelector" ]),
            feDistantLight: Qt([ "azimuth", "elevation", "id", "xml:base", "xml:lang", "xml:space" ]),
            feFlood: Qt([ "class", "height", "id", "result", "style", "width", "x", "xml:base", "xml:lang", "xml:space", "y" ]),
            feFuncA: Qt([ "amplitude", "exponent", "id", "intercept", "offset", "slope", "tableValues", "type", "xml:base", "xml:lang", "xml:space" ]),
            feFuncB: Qt([ "amplitude", "exponent", "id", "intercept", "offset", "slope", "tableValues", "type", "xml:base", "xml:lang", "xml:space" ]),
            feFuncG: Qt([ "amplitude", "exponent", "id", "intercept", "offset", "slope", "tableValues", "type", "xml:base", "xml:lang", "xml:space" ]),
            feFuncR: Qt([ "amplitude", "exponent", "id", "intercept", "offset", "slope", "tableValues", "type", "xml:base", "xml:lang", "xml:space" ]),
            feGaussianBlur: Qt([ "class", "height", "id", "in", "result", "stdDeviation", "style", "width", "x", "xml:base", "xml:lang", "xml:space", "y" ]),
            feImage: Qt([ "class", "externalResourcesRequired", "height", "id", "preserveAspectRatio", "result", "style", "width", "x", "xlink:actuate", "xlink:arcrole", "xlink:href", "xlink:role", "xlink:show", "xlink:title", "xlink:type", "xml:base", "xml:lang", "xml:space", "y" ]),
            feMerge: Qt([ "class", "height", "id", "result", "style", "width", "x", "xml:base", "xml:lang", "xml:space", "y" ]),
            feMergeNode: Qt([ "id", "xml:base", "xml:lang", "xml:space" ]),
            feMorphology: Qt([ "class", "height", "id", "in", "operator", "radius", "result", "style", "width", "x", "xml:base", "xml:lang", "xml:space", "y" ]),
            feOffset: Qt([ "class", "dx", "dy", "height", "id", "in", "result", "style", "width", "x", "xml:base", "xml:lang", "xml:space", "y" ]),
            fePointLight: Qt([ "id", "x", "xml:base", "xml:lang", "xml:space", "y", "z" ]),
            feSpecularLighting: Qt([ "class", "height", "id", "in", "kernelUnitLength", "result", "specularConstant", "specularExponent", "style", "surfaceScale", "width", "x", "xml:base", "xml:lang", "xml:space", "y" ]),
            feSpotLight: Qt([ "id", "limitingConeAngle", "pointsAtX", "pointsAtY", "pointsAtZ", "specularExponent", "x", "xml:base", "xml:lang", "xml:space", "y", "z" ]),
            feTile: Qt([ "class", "height", "id", "in", "result", "style", "width", "x", "xml:base", "xml:lang", "xml:space", "y" ]),
            feTurbulence: Qt([ "baseFrequency", "class", "height", "id", "numOctaves", "result", "seed", "stitchTiles", "style", "type", "width", "x", "xml:base", "xml:lang", "xml:space", "y" ]),
            filter: Qt([ "class", "externalResourcesRequired", "filterRes", "filterUnits", "height", "id", "primitiveUnits", "style", "width", "x", "xlink:actuate", "xlink:arcrole", "xlink:href", "xlink:role", "xlink:show", "xlink:title", "xlink:type", "xml:base", "xml:lang", "xml:space", "y" ]),
            font: Qt([ "class", "externalResourcesRequired", "horiz-adv-x", "horiz-origin-x", "horiz-origin-y", "id", "style", "vert-adv-y", "vert-origin-x", "vert-origin-y", "xml:base", "xml:lang", "xml:space" ]),
            "font-face": Qt([ "accent-height", "alphabetic", "ascent", "bbox", "cap-height", "descent", "font-family", "font-size", "font-stretch", "font-style", "font-variant", "font-weight", "hanging", "id", "ideographic", "mathematical", "overline-position", "overline-thickness", "panose-1", "slope", "stemh", "stemv", "strikethrough-position", "strikethrough-thickness", "underline-position", "underline-thickness", "unicode-range", "units-per-em", "v-alphabetic", "v-hanging", "v-ideographic", "v-mathematical", "widths", "x-height", "xml:base", "xml:lang", "xml:space" ]),
            "font-face-format": Qt([ "id", "string", "xml:base", "xml:lang", "xml:space" ]),
            "font-face-name": Qt([ "id", "name", "xml:base", "xml:lang", "xml:space" ]),
            "font-face-src": Qt([ "id", "xml:base", "xml:lang", "xml:space" ]),
            "font-face-uri": Qt([ "id", "xlink:actuate", "xlink:arcrole", "xlink:href", "xlink:role", "xlink:show", "xlink:title", "xlink:type", "xml:base", "xml:lang", "xml:space" ]),
            foreignObject: Qt([ "class", "externalResourcesRequired", "height", "id", "onactivate", "onclick", "onfocusin", "onfocusout", "onload", "onmousedown", "onmousemove", "onmouseout", "onmouseover", "onmouseup", "requiredExtensions", "requiredFeatures", "style", "systemLanguage", "transform", "width", "x", "xml:base", "xml:lang", "xml:space", "y" ]),
            g: Qt([ "class", "externalResourcesRequired", "id", "onactivate", "onclick", "onfocusin", "onfocusout", "onload", "onmousedown", "onmousemove", "onmouseout", "onmouseover", "onmouseup", "requiredExtensions", "requiredFeatures", "style", "systemLanguage", "transform", "xml:base", "xml:lang", "xml:space" ]),
            glyph: Qt([ "arabic-form", "class", "d", "glyph-name", "horiz-adv-x", "id", "lang", "orientation", "style", "unicode", "vert-adv-y", "vert-origin-x", "vert-origin-y", "xml:base", "xml:lang", "xml:space" ]),
            glyphRef: Qt([ "class", "dx", "dy", "format", "glyphRef", "id", "style", "x", "xlink:actuate", "xlink:arcrole", "xlink:href", "xlink:role", "xlink:show", "xlink:title", "xlink:type", "xml:base", "xml:lang", "xml:space", "y" ]),
            glyphref: wt(),
            hkern: Qt([ "g1", "g2", "id", "k", "u1", "u2", "xml:base", "xml:lang", "xml:space" ]),
            image: Qt([ "class", "externalResourcesRequired", "height", "id", "onactivate", "onclick", "onfocusin", "onfocusout", "onload", "onmousedown", "onmousemove", "onmouseout", "onmouseover", "onmouseup", "preserveAspectRatio", "requiredExtensions", "requiredFeatures", "style", "systemLanguage", "transform", "width", "x", "xlink:actuate", "xlink:arcrole", "xlink:href", "xlink:role", "xlink:show", "xlink:title", "xlink:type", "xml:base", "xml:lang", "xml:space", "y" ]),
            line: Qt([ "class", "externalResourcesRequired", "id", "onactivate", "onclick", "onfocusin", "onfocusout", "onload", "onmousedown", "onmousemove", "onmouseout", "onmouseover", "onmouseup", "requiredExtensions", "requiredFeatures", "style", "systemLanguage", "transform", "x1", "x2", "xml:base", "xml:lang", "xml:space", "y1", "y2" ]),
            linearGradient: Qt([ "class", "externalResourcesRequired", "gradientTransform", "gradientUnits", "id", "spreadMethod", "style", "x1", "x2", "xlink:arcrole", "xlink:href", "xlink:role", "xlink:title", "xlink:type", "xml:base", "xml:lang", "xml:space", "y1", "y2" ]),
            marker: Qt([ "class", "externalResourcesRequired", "id", "markerHeight", "markerUnits", "markerWidth", "orient", "preserveAspectRatio", "refX", "refY", "style", "viewBox", "xml:base", "xml:lang", "xml:space" ]),
            mask: Qt([ "class", "externalResourcesRequired", "height", "id", "maskContentUnits", "maskUnits", "requiredExtensions", "requiredFeatures", "style", "systemLanguage", "width", "x", "xml:base", "xml:lang", "xml:space", "y" ]),
            metadata: Qt([ "id", "xml:base", "xml:lang", "xml:space" ]),
            "missing-glyph": Qt([ "class", "d", "horiz-adv-x", "id", "style", "vert-adv-y", "vert-origin-x", "vert-origin-y", "xml:base", "xml:lang", "xml:space" ]),
            mpath: Qt([ "externalResourcesRequired", "id", "xlink:actuate", "xlink:arcrole", "xlink:href", "xlink:role", "xlink:show", "xlink:title", "xlink:type", "xml:base", "xml:lang", "xml:space" ]),
            path: Qt([ "class", "d", "externalResourcesRequired", "id", "onactivate", "onclick", "onfocusin", "onfocusout", "onload", "onmousedown", "onmousemove", "onmouseout", "onmouseover", "onmouseup", "pathLength", "requiredExtensions", "requiredFeatures", "style", "systemLanguage", "transform", "xml:base", "xml:lang", "xml:space" ]),
            pattern: Qt([ "class", "externalResourcesRequired", "height", "id", "patternContentUnits", "patternTransform", "patternUnits", "preserveAspectRatio", "requiredExtensions", "requiredFeatures", "style", "systemLanguage", "viewBox", "width", "x", "xlink:actuate", "xlink:arcrole", "xlink:href", "xlink:role", "xlink:show", "xlink:title", "xlink:type", "xml:base", "xml:lang", "xml:space", "y" ]),
            polygon: Qt([ "class", "externalResourcesRequired", "id", "onactivate", "onclick", "onfocusin", "onfocusout", "onload", "onmousedown", "onmousemove", "onmouseout", "onmouseover", "onmouseup", "points", "requiredExtensions", "requiredFeatures", "style", "systemLanguage", "transform", "xml:base", "xml:lang", "xml:space" ]),
            polyline: Qt([ "class", "externalResourcesRequired", "id", "onactivate", "onclick", "onfocusin", "onfocusout", "onload", "onmousedown", "onmousemove", "onmouseout", "onmouseover", "onmouseup", "points", "requiredExtensions", "requiredFeatures", "style", "systemLanguage", "transform", "xml:base", "xml:lang", "xml:space" ]),
            radialGradient: Qt([ "class", "cx", "cy", "externalResourcesRequired", "fx", "fy", "gradientTransform", "gradientUnits", "id", "r", "spreadMethod", "style", "xlink:arcrole", "xlink:href", "xlink:role", "xlink:title", "xlink:type", "xml:base", "xml:lang", "xml:space" ]),
            rect: Qt([ "class", "externalResourcesRequired", "height", "id", "onactivate", "onclick", "onfocusin", "onfocusout", "onload", "onmousedown", "onmousemove", "onmouseout", "onmouseover", "onmouseup", "requiredExtensions", "requiredFeatures", "rx", "ry", "style", "systemLanguage", "transform", "width", "x", "xml:base", "xml:lang", "xml:space", "y" ]),
            script: Qt([ "externalResourcesRequired", "id", "type", "xlink:actuate", "xlink:arcrole", "xlink:href", "xlink:role", "xlink:show", "xlink:title", "xlink:type", "xml:base", "xml:lang", "xml:space" ]),
            set: Qt([ "attributeName", "attributeType", "begin", "dur", "end", "externalResourcesRequired", "fill", "id", "max", "min", "onbegin", "onend", "onload", "onrepeat", "repeatCount", "repeatDur", "requiredExtensions", "requiredFeatures", "restart", "systemLanguage", "to", "xlink:actuate", "xlink:arcrole", "xlink:href", "xlink:role", "xlink:show", "xlink:title", "xlink:type", "xml:base", "xml:lang", "xml:space" ]),
            stop: Qt([ "class", "id", "offset", "style", "xml:base", "xml:lang", "xml:space" ]),
            style: Qt([ "id", "media", "title", "type", "xml:base", "xml:lang", "xml:space" ]),
            svg: Qt([ "baseProfile", "class", "contentScriptType", "contentStyleType", "externalResourcesRequired", "height", "id", "onabort", "onactivate", "onclick", "onerror", "onfocusin", "onfocusout", "onload", "onmousedown", "onmousemove", "onmouseout", "onmouseover", "onmouseup", "onresize", "onscroll", "onunload", "onzoom", "preserveAspectRatio", "requiredExtensions", "requiredFeatures", "style", "systemLanguage", "version", "viewBox", "width", "x", "xml:base", "xml:lang", "xml:space", "y", "zoomAndPan" ]),
            switch: Qt([ "class", "externalResourcesRequired", "id", "onactivate", "onclick", "onfocusin", "onfocusout", "onload", "onmousedown", "onmousemove", "onmouseout", "onmouseover", "onmouseup", "requiredExtensions", "requiredFeatures", "style", "systemLanguage", "transform", "xml:base", "xml:lang", "xml:space" ]),
            symbol: Qt([ "class", "externalResourcesRequired", "id", "onactivate", "onclick", "onfocusin", "onfocusout", "onload", "onmousedown", "onmousemove", "onmouseout", "onmouseover", "onmouseup", "preserveAspectRatio", "style", "viewBox", "xml:base", "xml:lang", "xml:space" ]),
            text: Qt([ "class", "dx", "dy", "externalResourcesRequired", "id", "lengthAdjust", "onactivate", "onclick", "onfocusin", "onfocusout", "onload", "onmousedown", "onmousemove", "onmouseout", "onmouseover", "onmouseup", "requiredExtensions", "requiredFeatures", "rotate", "style", "systemLanguage", "textLength", "transform", "x", "xml:base", "xml:lang", "xml:space", "y" ]),
            textPath: Qt([ "class", "externalResourcesRequired", "id", "lengthAdjust", "method", "onactivate", "onclick", "onfocusin", "onfocusout", "onload", "onmousedown", "onmousemove", "onmouseout", "onmouseover", "onmouseup", "requiredExtensions", "requiredFeatures", "spacing", "startOffset", "style", "systemLanguage", "textLength", "xlink:arcrole", "xlink:href", "xlink:role", "xlink:title", "xlink:type", "xml:base", "xml:lang", "xml:space" ]),
            title: Qt([ "class", "id", "style", "xml:base", "xml:lang", "xml:space" ]),
            tref: Qt([ "class", "dx", "dy", "externalResourcesRequired", "id", "lengthAdjust", "onactivate", "onclick", "onfocusin", "onfocusout", "onload", "onmousedown", "onmousemove", "onmouseout", "onmouseover", "onmouseup", "requiredExtensions", "requiredFeatures", "rotate", "style", "systemLanguage", "textLength", "x", "xlink:arcrole", "xlink:href", "xlink:role", "xlink:title", "xlink:type", "xml:base", "xml:lang", "xml:space", "y" ]),
            tspan: Qt([ "class", "dx", "dy", "externalResourcesRequired", "id", "lengthAdjust", "onactivate", "onclick", "onfocusin", "onfocusout", "onload", "onmousedown", "onmousemove", "onmouseout", "onmouseover", "onmouseup", "requiredExtensions", "requiredFeatures", "rotate", "style", "systemLanguage", "textLength", "x", "xml:base", "xml:lang", "xml:space", "y" ]),
            use: Qt([ "class", "externalResourcesRequired", "height", "id", "onactivate", "onclick", "onfocusin", "onfocusout", "onload", "onmousedown", "onmousemove", "onmouseout", "onmouseover", "onmouseup", "requiredExtensions", "requiredFeatures", "style", "systemLanguage", "transform", "width", "x", "xlink:actuate", "xlink:arcrole", "xlink:href", "xlink:role", "xlink:show", "xlink:title", "xlink:type", "xml:base", "xml:lang", "xml:space", "y" ]),
            view: Qt([ "externalResourcesRequired", "id", "preserveAspectRatio", "viewBox", "viewTarget", "xml:base", "xml:lang", "xml:space", "zoomAndPan" ]),
            vkern: Qt([ "g1", "g2", "id", "k", "u1", "u2", "xml:base", "xml:lang", "xml:space" ])
        });
        this._ = Qt([ "a", "altGlyph", "animate", "animateColor", "circle", "clipPath", "defs", "ellipse", "feBlend", "feColorMatrix", "feComponentTransfer", "feComposite", "feConvolveMatrix", "feDiffuseLighting", "feDisplacementMap", "feFlood", "feGaussianBlur", "feImage", "feMerge", "feMorphology", "feOffset", "feSpecularLighting", "feTile", "feTurbulence", "filter", "font", "foreignObject", "g", "glyph", "glyphRef", "image", "line", "linearGradient", "marker", "mask", "missing-glyph", "path", "pattern", "polygon", "polyline", "radialGradient", "rect", "stop", "svg", "switch", "symbol", "text", "textPath", "tref", "tspan", "use" ]);
        this.j = Qt([ "alignment-baseline", "baseline-shift", "clip-path", "clip-rule", "clip", "color-interpolation-filters", "color-interpolation", "color-profile", "color-rendering", "color", "cursor", "direction", "display", "dominant-baseline", "enable-background", "fill-opacity", "fill-rule", "fill", "filter", "flood-color", "flood-opacity", "font-family", "font-size-adjust", "font-size", "font-stretch", "font-style", "font-variant", "font-weight", "glyph-orientation-horizontal", "glyph-orientation-vertical", "image-rendering", "kerning", "letter-spacing", "lighting-color", "marker-end", "marker-mid", "marker-start", "mask", "opacity", "overflow", "pointer-events", "shape-rendering", "stop-color", "stop-opacity", "stroke-dasharray", "stroke-dashoffset", "stroke-linecap", "stroke-linejoin", "stroke-miterlimit", "stroke-opacity", "stroke-width", "stroke", "text-anchor", "text-decoration", "text-rendering", "unicode-bidi", "visibility", "word-spacing", "writing-mode" ]);
        this.SVGElement = t.globalThis.SVGElement;
        const e = t.document.createElement("div");
        e.innerHTML = "<svg><altGlyph /></svg>";
        if ("altglyph" === e.firstElementChild.nodeName) {
            const t = this.V;
            let e = t.altGlyph;
            t.altGlyph = t.altglyph;
            t.altglyph = e;
            e = t.altGlyphDef;
            t.altGlyphDef = t.altglyphdef;
            t.altglyphdef = e;
            e = t.altGlyphItem;
            t.altGlyphItem = t.altglyphitem;
            t.altglyphitem = e;
            e = t.glyphRef;
            t.glyphRef = t.glyphref;
            t.glyphref = e;
        }
    }
    static register(t) {
        return _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.Registration.singleton(Yt, this).register(t);
    }
    isStandardSvgAttribute(t, e) {
        var i;
        if (!(t instanceof this.SVGElement)) return false;
        return true === this._[t.nodeName] && true === this.j[e] || true === (null === (i = this.V[t.nodeName]) || void 0 === i ? void 0 : i[e]);
    }
}

SVGAnalyzer.inject = [ Kt ];

const Zt = _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.DI.createInterface("IAttrMapper", (t => t.singleton(AttrMapper)));

class AttrMapper {
    constructor(t) {
        this.svg = t;
        this.fns = [];
        this.N = wt();
        this.W = wt();
        this.useMapping({
            LABEL: {
                for: "htmlFor"
            },
            IMG: {
                usemap: "useMap"
            },
            INPUT: {
                maxlength: "maxLength",
                minlength: "minLength",
                formaction: "formAction",
                formenctype: "formEncType",
                formmethod: "formMethod",
                formnovalidate: "formNoValidate",
                formtarget: "formTarget",
                inputmode: "inputMode"
            },
            TEXTAREA: {
                maxlength: "maxLength"
            },
            TD: {
                rowspan: "rowSpan",
                colspan: "colSpan"
            },
            TH: {
                rowspan: "rowSpan",
                colspan: "colSpan"
            }
        });
        this.useGlobalMapping({
            accesskey: "accessKey",
            contenteditable: "contentEditable",
            tabindex: "tabIndex",
            textcontent: "textContent",
            innerhtml: "innerHTML",
            scrolltop: "scrollTop",
            scrollleft: "scrollLeft",
            readonly: "readOnly"
        });
    }
    static get inject() {
        return [ Yt ];
    }
    useMapping(t) {
        var e;
        var i;
        let s;
        let n;
        let r;
        let o;
        for (r in t) {
            s = t[r];
            n = null !== (e = (i = this.N)[r]) && void 0 !== e ? e : i[r] = wt();
            for (o in s) {
                if (void 0 !== n[o]) throw te(o, r);
                n[o] = s[o];
            }
        }
    }
    useGlobalMapping(t) {
        const e = this.W;
        for (const i in t) {
            if (void 0 !== e[i]) throw te(i, "*");
            e[i] = t[i];
        }
    }
    useTwoWay(t) {
        this.fns.push(t);
    }
    isTwoWay(t, e) {
        return Jt(t, e) || this.fns.length > 0 && this.fns.some((i => i(t, e)));
    }
    map(t, e) {
        var i, s, n;
        return null !== (n = null !== (s = null === (i = this.N[t.nodeName]) || void 0 === i ? void 0 : i[e]) && void 0 !== s ? s : this.W[e]) && void 0 !== n ? n : yt(t, e, this.svg) ? e : null;
    }
}

function Jt(t, e) {
    switch (t.nodeName) {
      case "INPUT":
        switch (t.type) {
          case "checkbox":
          case "radio":
            return "checked" === e;

          default:
            return "value" === e || "files" === e || "value-as-number" === e || "value-as-date" === e;
        }

      case "TEXTAREA":
      case "SELECT":
        return "value" === e;

      default:
        switch (e) {
          case "textcontent":
          case "innerhtml":
            return t.hasAttribute("contenteditable");

          case "scrolltop":
          case "scrollleft":
            return true;

          default:
            return false;
        }
    }
}

function te(t, e) {
    return new Error(`Attribute ${t} has been already registered for ${"*" === e ? "all elements" : `<${e}/>`}`);
}

class CallBinding {
    constructor(t, e, i, s, n) {
        this.sourceExpression = t;
        this.target = e;
        this.targetProperty = i;
        this.locator = n;
        this.interceptor = this;
        this.isBound = false;
        this.targetObserver = s.getAccessor(e, i);
    }
    callSource(t) {
        const e = this.$scope.overrideContext;
        e.$event = t;
        const i = this.sourceExpression.evaluate(8, this.$scope, this.locator, null);
        Reflect.deleteProperty(e, "$event");
        return i;
    }
    $bind(t, e) {
        if (this.isBound) {
            if (this.$scope === e) return;
            this.interceptor.$unbind(2 | t);
        }
        this.$scope = e;
        if (this.sourceExpression.hasBind) this.sourceExpression.bind(t, e, this.interceptor);
        this.targetObserver.setValue((t => this.interceptor.callSource(t)), t, this.target, this.targetProperty);
        this.isBound = true;
    }
    $unbind(t) {
        if (!this.isBound) return;
        if (this.sourceExpression.hasUnbind) this.sourceExpression.unbind(t, this.$scope, this.interceptor);
        this.$scope = void 0;
        this.targetObserver.setValue(null, t, this.target, this.targetProperty);
        this.isBound = false;
    }
    observe(t, e) {
        return;
    }
    handleChange(t, e, i) {
        return;
    }
}

class AttributeObserver {
    constructor(t, e, i) {
        this.type = 2 | 1 | 4;
        this.v = null;
        this.ov = null;
        this.H = false;
        this.f = 0;
        this.o = t;
        this.G = e;
        this.X = i;
    }
    getValue() {
        return this.v;
    }
    setValue(t, e) {
        this.v = t;
        this.H = t !== this.ov;
        if (0 === (256 & e)) this.K();
    }
    K() {
        if (this.H) {
            this.H = false;
            this.ov = this.v;
            switch (this.X) {
              case "class":
                this.o.classList.toggle(this.G, !!this.v);
                break;

              case "style":
                {
                    let t = "";
                    let e = this.v;
                    if (At(e) && e.includes("!important")) {
                        t = "important";
                        e = e.replace("!important", "");
                    }
                    this.o.style.setProperty(this.G, e, t);
                    break;
                }

              default:
                if (null == this.v) this.o.removeAttribute(this.X); else this.o.setAttribute(this.X, String(this.v));
            }
        }
    }
    handleMutation(t) {
        let e = false;
        for (let i = 0, s = t.length; s > i; ++i) {
            const s = t[i];
            if ("attributes" === s.type && s.attributeName === this.G) {
                e = true;
                break;
            }
        }
        if (e) {
            let t;
            switch (this.X) {
              case "class":
                t = this.o.classList.contains(this.G);
                break;

              case "style":
                t = this.o.style.getPropertyValue(this.G);
                break;

              default:
                throw new Error(`AUR0651:${this.X}`);
            }
            if (t !== this.v) {
                this.ov = this.v;
                this.v = t;
                this.H = false;
                this.f = 0;
                this.queue.add(this);
            }
        }
    }
    subscribe(t) {
        if (this.subs.add(t) && 1 === this.subs.count) {
            this.v = this.ov = this.o.getAttribute(this.G);
            ee(this.o.ownerDocument.defaultView.MutationObserver, this.o, this);
        }
    }
    unsubscribe(t) {
        if (this.subs.remove(t) && 0 === this.subs.count) ie(this.o, this);
    }
    flush() {
        re = this.ov;
        this.ov = this.v;
        this.subs.notify(this.v, re, this.f);
    }
}

(0,_aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.subscriberCollection)(AttributeObserver);

(0,_aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.withFlushQueue)(AttributeObserver);

const ee = (t, e, i) => {
    if (void 0 === e.$eMObs) e.$eMObs = new Set;
    if (void 0 === e.$mObs) (e.$mObs = new t(se)).observe(e, {
        attributes: true
    });
    e.$eMObs.add(i);
};

const ie = (t, e) => {
    const i = t.$eMObs;
    if (i && i.delete(e)) {
        if (0 === i.size) {
            t.$mObs.disconnect();
            t.$mObs = void 0;
        }
        return true;
    }
    return false;
};

const se = t => {
    t[0].target.$eMObs.forEach(ne, t);
};

function ne(t) {
    t.handleMutation(this);
}

let re;

class BindingTargetSubscriber {
    constructor(t) {
        this.b = t;
    }
    handleChange(t, e, i) {
        const s = this.b;
        if (t !== s.sourceExpression.evaluate(i, s.$scope, s.locator, null)) s.updateSource(t, i);
    }
}

const {oneTime: oe, toView: le, fromView: he} = _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.BindingMode;

const ae = le | oe;

const ce = {
    reusable: false,
    preempt: true
};

class AttributeBinding {
    constructor(t, e, i, s, n, r, o) {
        this.sourceExpression = t;
        this.targetAttribute = i;
        this.targetProperty = s;
        this.mode = n;
        this.locator = o;
        this.interceptor = this;
        this.isBound = false;
        this.$scope = null;
        this.task = null;
        this.targetSubscriber = null;
        this.persistentFlags = 0;
        this.value = void 0;
        this.target = e;
        this.p = o.get(Kt);
        this.oL = r;
    }
    updateTarget(t, e) {
        e |= this.persistentFlags;
        this.targetObserver.setValue(t, e, this.target, this.targetProperty);
    }
    updateSource(t, e) {
        e |= this.persistentFlags;
        this.sourceExpression.assign(e, this.$scope, this.locator, t);
    }
    handleChange(t, e, i) {
        if (!this.isBound) return;
        i |= this.persistentFlags;
        const s = this.mode;
        const n = this.interceptor;
        const r = this.sourceExpression;
        const o = this.$scope;
        const l = this.locator;
        const h = this.targetObserver;
        const a = 0 === (2 & i) && (4 & h.type) > 0;
        let c = false;
        let u;
        if (10082 !== r.$kind || this.obs.count > 1) {
            c = 0 === (s & oe);
            if (c) this.obs.version++;
            t = r.evaluate(i, o, l, n);
            if (c) this.obs.clear();
        }
        if (t !== this.value) {
            this.value = t;
            if (a) {
                u = this.task;
                this.task = this.p.domWriteQueue.queueTask((() => {
                    this.task = null;
                    n.updateTarget(t, i);
                }), ce);
                null === u || void 0 === u ? void 0 : u.cancel();
            } else n.updateTarget(t, i);
        }
    }
    $bind(t, e) {
        var i;
        if (this.isBound) {
            if (this.$scope === e) return;
            this.interceptor.$unbind(2 | t);
        }
        this.persistentFlags = 961 & t;
        this.$scope = e;
        let s = this.sourceExpression;
        if (s.hasBind) s.bind(t, e, this.interceptor);
        let n = this.targetObserver;
        if (!n) n = this.targetObserver = new AttributeObserver(this.target, this.targetProperty, this.targetAttribute);
        s = this.sourceExpression;
        const r = this.mode;
        const o = this.interceptor;
        let l = false;
        if (r & ae) {
            l = (r & le) > 0;
            o.updateTarget(this.value = s.evaluate(t, e, this.locator, l ? o : null), t);
        }
        if (r & he) n.subscribe(null !== (i = this.targetSubscriber) && void 0 !== i ? i : this.targetSubscriber = new BindingTargetSubscriber(o));
        this.isBound = true;
    }
    $unbind(t) {
        var e;
        if (!this.isBound) return;
        this.persistentFlags = 0;
        if (this.sourceExpression.hasUnbind) this.sourceExpression.unbind(t, this.$scope, this.interceptor);
        this.$scope = null;
        this.value = void 0;
        if (this.targetSubscriber) this.targetObserver.unsubscribe(this.targetSubscriber);
        null === (e = this.task) || void 0 === e ? void 0 : e.cancel();
        this.task = null;
        this.obs.clearAll();
        this.isBound = false;
    }
}

(0,_aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.connectable)(AttributeBinding);

const {toView: ue} = _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.BindingMode;

const fe = {
    reusable: false,
    preempt: true
};

class InterpolationBinding {
    constructor(t, e, i, s, n, r, o) {
        this.interpolation = e;
        this.target = i;
        this.targetProperty = s;
        this.mode = n;
        this.locator = r;
        this.taskQueue = o;
        this.interceptor = this;
        this.isBound = false;
        this.$scope = void 0;
        this.task = null;
        this.oL = t;
        this.targetObserver = t.getAccessor(i, s);
        const l = e.expressions;
        const h = this.partBindings = Array(l.length);
        const a = l.length;
        let c = 0;
        for (;a > c; ++c) h[c] = new InterpolationPartBinding(l[c], i, s, r, t, this);
    }
    updateTarget(t, e) {
        const i = this.partBindings;
        const s = this.interpolation.parts;
        const n = i.length;
        let r = "";
        let o = 0;
        if (1 === n) r = s[0] + i[0].value + s[1]; else {
            r = s[0];
            for (;n > o; ++o) r += i[o].value + s[o + 1];
        }
        const l = this.targetObserver;
        const h = 0 === (2 & e) && (4 & l.type) > 0;
        let a;
        if (h) {
            a = this.task;
            this.task = this.taskQueue.queueTask((() => {
                this.task = null;
                l.setValue(r, e, this.target, this.targetProperty);
            }), fe);
            null === a || void 0 === a ? void 0 : a.cancel();
            a = null;
        } else l.setValue(r, e, this.target, this.targetProperty);
    }
    $bind(t, e) {
        if (this.isBound) {
            if (this.$scope === e) return;
            this.interceptor.$unbind(t);
        }
        this.isBound = true;
        this.$scope = e;
        const i = this.partBindings;
        const s = i.length;
        let n = 0;
        for (;s > n; ++n) i[n].$bind(t, e);
        this.updateTarget(void 0, t);
    }
    $unbind(t) {
        var e;
        if (!this.isBound) return;
        this.isBound = false;
        this.$scope = void 0;
        const i = this.partBindings;
        const s = i.length;
        let n = 0;
        for (;s > n; ++n) i[n].interceptor.$unbind(t);
        null === (e = this.task) || void 0 === e ? void 0 : e.cancel();
        this.task = null;
    }
}

class InterpolationPartBinding {
    constructor(t, e, i, s, n, r) {
        this.sourceExpression = t;
        this.target = e;
        this.targetProperty = i;
        this.locator = s;
        this.owner = r;
        this.interceptor = this;
        this.mode = _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.BindingMode.toView;
        this.value = "";
        this.task = null;
        this.isBound = false;
        this.oL = n;
    }
    handleChange(t, e, i) {
        if (!this.isBound) return;
        const s = this.sourceExpression;
        const n = this.obs;
        const r = 10082 === s.$kind && 1 === n.count;
        let o = false;
        if (!r) {
            o = (this.mode & ue) > 0;
            if (o) n.version++;
            t = s.evaluate(i, this.$scope, this.locator, o ? this.interceptor : null);
            if (o) n.clear();
        }
        if (t != this.value) {
            this.value = t;
            if (t instanceof Array) this.observeCollection(t);
            this.owner.updateTarget(t, i);
        }
    }
    handleCollectionChange(t, e) {
        this.owner.updateTarget(void 0, e);
    }
    $bind(t, e) {
        if (this.isBound) {
            if (this.$scope === e) return;
            this.interceptor.$unbind(t);
        }
        this.isBound = true;
        this.$scope = e;
        if (this.sourceExpression.hasBind) this.sourceExpression.bind(t, e, this.interceptor);
        this.value = this.sourceExpression.evaluate(t, e, this.locator, (this.mode & ue) > 0 ? this.interceptor : null);
        if (this.value instanceof Array) this.observeCollection(this.value);
    }
    $unbind(t) {
        if (!this.isBound) return;
        this.isBound = false;
        if (this.sourceExpression.hasUnbind) this.sourceExpression.unbind(t, this.$scope, this.interceptor);
        this.$scope = void 0;
        this.obs.clearAll();
    }
}

(0,_aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.connectable)(InterpolationPartBinding);

class ContentBinding {
    constructor(t, e, i, s, n, r) {
        this.sourceExpression = t;
        this.target = e;
        this.locator = i;
        this.p = n;
        this.strict = r;
        this.interceptor = this;
        this.mode = _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.BindingMode.toView;
        this.value = "";
        this.task = null;
        this.isBound = false;
        this.oL = s;
    }
    updateTarget(t, e) {
        var i, s;
        const n = this.target;
        const r = this.p.Node;
        const o = this.value;
        this.value = t;
        if (o instanceof r) null === (i = o.parentNode) || void 0 === i ? void 0 : i.removeChild(o);
        if (t instanceof r) {
            n.textContent = "";
            null === (s = n.parentNode) || void 0 === s ? void 0 : s.insertBefore(t, n);
        } else n.textContent = String(t);
    }
    handleChange(t, e, i) {
        var s;
        if (!this.isBound) return;
        const n = this.sourceExpression;
        const r = this.obs;
        const o = 10082 === n.$kind && 1 === r.count;
        let l = false;
        if (!o) {
            l = (this.mode & ue) > 0;
            if (l) r.version++;
            i |= this.strict ? 1 : 0;
            t = n.evaluate(i, this.$scope, this.locator, l ? this.interceptor : null);
            if (l) r.clear();
        }
        if (t === this.value) {
            null === (s = this.task) || void 0 === s ? void 0 : s.cancel();
            this.task = null;
            return;
        }
        const h = 0 === (2 & i);
        if (h) this.queueUpdate(t, i); else this.updateTarget(t, i);
    }
    handleCollectionChange() {
        this.queueUpdate(this.value, 0);
    }
    $bind(t, e) {
        if (this.isBound) {
            if (this.$scope === e) return;
            this.interceptor.$unbind(t);
        }
        this.isBound = true;
        this.$scope = e;
        if (this.sourceExpression.hasBind) this.sourceExpression.bind(t, e, this.interceptor);
        t |= this.strict ? 1 : 0;
        const i = this.value = this.sourceExpression.evaluate(t, e, this.locator, (this.mode & ue) > 0 ? this.interceptor : null);
        if (i instanceof Array) this.observeCollection(i);
        this.updateTarget(i, t);
    }
    $unbind(t) {
        var e;
        if (!this.isBound) return;
        this.isBound = false;
        if (this.sourceExpression.hasUnbind) this.sourceExpression.unbind(t, this.$scope, this.interceptor);
        this.$scope = void 0;
        this.obs.clearAll();
        null === (e = this.task) || void 0 === e ? void 0 : e.cancel();
        this.task = null;
    }
    queueUpdate(t, e) {
        const i = this.task;
        this.task = this.p.domWriteQueue.queueTask((() => {
            this.task = null;
            this.updateTarget(t, e);
        }), fe);
        null === i || void 0 === i ? void 0 : i.cancel();
    }
}

(0,_aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.connectable)(ContentBinding);

class LetBinding {
    constructor(t, e, i, s, n = false) {
        this.sourceExpression = t;
        this.targetProperty = e;
        this.locator = s;
        this.interceptor = this;
        this.isBound = false;
        this.$scope = void 0;
        this.task = null;
        this.target = null;
        this.oL = i;
        this.Y = n;
    }
    handleChange(t, e, i) {
        if (!this.isBound) return;
        const s = this.target;
        const n = this.targetProperty;
        const r = s[n];
        this.obs.version++;
        t = this.sourceExpression.evaluate(i, this.$scope, this.locator, this.interceptor);
        this.obs.clear();
        if (t !== r) s[n] = t;
    }
    $bind(t, e) {
        if (this.isBound) {
            if (this.$scope === e) return;
            this.interceptor.$unbind(2 | t);
        }
        this.$scope = e;
        this.target = this.Y ? e.bindingContext : e.overrideContext;
        const i = this.sourceExpression;
        if (i.hasBind) i.bind(t, e, this.interceptor);
        this.target[this.targetProperty] = this.sourceExpression.evaluate(2 | t, e, this.locator, this.interceptor);
        this.isBound = true;
    }
    $unbind(t) {
        if (!this.isBound) return;
        const e = this.sourceExpression;
        if (e.hasUnbind) e.unbind(t, this.$scope, this.interceptor);
        this.$scope = void 0;
        this.obs.clearAll();
        this.isBound = false;
    }
}

(0,_aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.connectable)(LetBinding);

const {oneTime: de, toView: me, fromView: ve} = _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.BindingMode;

const pe = me | de;

const ge = {
    reusable: false,
    preempt: true
};

class PropertyBinding {
    constructor(t, e, i, s, n, r, o) {
        this.sourceExpression = t;
        this.target = e;
        this.targetProperty = i;
        this.mode = s;
        this.locator = r;
        this.taskQueue = o;
        this.interceptor = this;
        this.isBound = false;
        this.$scope = void 0;
        this.targetObserver = void 0;
        this.persistentFlags = 0;
        this.task = null;
        this.targetSubscriber = null;
        this.oL = n;
    }
    updateTarget(t, e) {
        e |= this.persistentFlags;
        this.targetObserver.setValue(t, e, this.target, this.targetProperty);
    }
    updateSource(t, e) {
        e |= this.persistentFlags;
        this.sourceExpression.assign(e, this.$scope, this.locator, t);
    }
    handleChange(t, e, i) {
        if (!this.isBound) return;
        i |= this.persistentFlags;
        const s = 0 === (2 & i) && (4 & this.targetObserver.type) > 0;
        const n = this.obs;
        let r = false;
        if (10082 !== this.sourceExpression.$kind || n.count > 1) {
            r = this.mode > de;
            if (r) n.version++;
            t = this.sourceExpression.evaluate(i, this.$scope, this.locator, this.interceptor);
            if (r) n.clear();
        }
        if (s) {
            we = this.task;
            this.task = this.taskQueue.queueTask((() => {
                this.interceptor.updateTarget(t, i);
                this.task = null;
            }), ge);
            null === we || void 0 === we ? void 0 : we.cancel();
            we = null;
        } else this.interceptor.updateTarget(t, i);
    }
    $bind(t, e) {
        var i;
        if (this.isBound) {
            if (this.$scope === e) return;
            this.interceptor.$unbind(2 | t);
        }
        t |= 1;
        this.persistentFlags = 961 & t;
        this.$scope = e;
        let s = this.sourceExpression;
        if (s.hasBind) s.bind(t, e, this.interceptor);
        const n = this.oL;
        const r = this.mode;
        let o = this.targetObserver;
        if (!o) {
            if (r & ve) o = n.getObserver(this.target, this.targetProperty); else o = n.getAccessor(this.target, this.targetProperty);
            this.targetObserver = o;
        }
        s = this.sourceExpression;
        const l = this.interceptor;
        const h = (r & me) > 0;
        if (r & pe) l.updateTarget(s.evaluate(t, e, this.locator, h ? l : null), t);
        if (r & ve) {
            o.subscribe(null !== (i = this.targetSubscriber) && void 0 !== i ? i : this.targetSubscriber = new BindingTargetSubscriber(l));
            if (!h) l.updateSource(o.getValue(this.target, this.targetProperty), t);
        }
        this.isBound = true;
    }
    $unbind(t) {
        if (!this.isBound) return;
        this.persistentFlags = 0;
        if (this.sourceExpression.hasUnbind) this.sourceExpression.unbind(t, this.$scope, this.interceptor);
        this.$scope = void 0;
        we = this.task;
        if (this.targetSubscriber) this.targetObserver.unsubscribe(this.targetSubscriber);
        if (null != we) {
            we.cancel();
            we = this.task = null;
        }
        this.obs.clearAll();
        this.isBound = false;
    }
}

(0,_aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.connectable)(PropertyBinding);

let we = null;

class RefBinding {
    constructor(t, e, i) {
        this.sourceExpression = t;
        this.target = e;
        this.locator = i;
        this.interceptor = this;
        this.isBound = false;
        this.$scope = void 0;
    }
    $bind(t, e) {
        if (this.isBound) {
            if (this.$scope === e) return;
            this.interceptor.$unbind(2 | t);
        }
        this.$scope = e;
        if (this.sourceExpression.hasBind) this.sourceExpression.bind(t, e, this);
        this.sourceExpression.assign(t, this.$scope, this.locator, this.target);
        this.isBound = true;
    }
    $unbind(t) {
        if (!this.isBound) return;
        let e = this.sourceExpression;
        if (e.evaluate(t, this.$scope, this.locator, null) === this.target) e.assign(t, this.$scope, this.locator, null);
        e = this.sourceExpression;
        if (e.hasUnbind) e.unbind(t, this.$scope, this.interceptor);
        this.$scope = void 0;
        this.isBound = false;
    }
    observe(t, e) {
        return;
    }
    handleChange(t, e, i) {
        return;
    }
}

const be = _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.DI.createInterface("IAppTask");

class $AppTask {
    constructor(t, e, i) {
        this.c = void 0;
        this.slot = t;
        this.k = e;
        this.cb = i;
    }
    register(t) {
        return this.c = t.register(_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.Registration.instance(be, this));
    }
    run() {
        const t = this.k;
        const e = this.cb;
        return null === t ? e() : e(this.c.get(t));
    }
}

const xe = Object.freeze({
    beforeCreate: ye("beforeCreate"),
    hydrating: ye("hydrating"),
    hydrated: ye("hydrated"),
    beforeActivate: ye("beforeActivate"),
    afterActivate: ye("afterActivate"),
    beforeDeactivate: ye("beforeDeactivate"),
    afterDeactivate: ye("afterDeactivate")
});

function ye(t) {
    function e(e, i) {
        if (Ct(i)) return new $AppTask(t, e, i);
        return new $AppTask(t, null, e);
    }
    return e;
}

function ke(t, e) {
    let i;
    function s(t, e) {
        if (arguments.length > 1) i.property = e;
        ct(Ae, ChildrenDefinition.create(e, i), t.constructor, e);
        pt(t.constructor, Se.keyFrom(e));
    }
    if (arguments.length > 1) {
        i = {};
        s(t, e);
        return;
    } else if (At(t)) {
        i = {};
        return s;
    }
    i = void 0 === t ? {} : t;
    return s;
}

function Ce(t) {
    return t.startsWith(Ae);
}

const Ae = dt("children-observer");

const Se = Object.freeze({
    name: Ae,
    keyFrom: t => `${Ae}:${t}`,
    from(...t) {
        const e = {};
        const i = Array.isArray;
        function s(t) {
            e[t] = ChildrenDefinition.create(t);
        }
        function n(t, i) {
            e[t] = ChildrenDefinition.create(t, i);
        }
        function r(t) {
            if (i(t)) t.forEach(s); else if (t instanceof ChildrenDefinition) e[t.property] = t; else if (void 0 !== t) Object.keys(t).forEach((e => n(e, t)));
        }
        t.forEach(r);
        return e;
    },
    getAll(t) {
        const e = Ae.length + 1;
        const i = [];
        const n = (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.getPrototypeChain)(t);
        let r = n.length;
        let o = 0;
        let l;
        let h;
        let a;
        while (--r >= 0) {
            a = n[r];
            l = gt(a).filter(Ce);
            h = l.length;
            for (let t = 0; t < h; ++t) i[o++] = ht(Ae, a, l[t].slice(e));
        }
        return i;
    }
});

const Re = {
    childList: true
};

class ChildrenDefinition {
    constructor(t, e, i, s, n, r) {
        this.callback = t;
        this.property = e;
        this.options = i;
        this.query = s;
        this.filter = n;
        this.map = r;
    }
    static create(t, e = {}) {
        var i;
        return new ChildrenDefinition((0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.firstDefined)(e.callback, `${t}Changed`), (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.firstDefined)(e.property, t), null !== (i = e.options) && void 0 !== i ? i : Re, e.query, e.filter, e.map);
    }
}

class ChildrenObserver {
    constructor(t, e, i, s, n = Ee, r = Be, o = Ie, l) {
        this.controller = t;
        this.obj = e;
        this.propertyKey = i;
        this.query = n;
        this.filter = r;
        this.map = o;
        this.options = l;
        this.observing = false;
        this.children = void 0;
        this.observer = void 0;
        this.callback = e[s];
        Reflect.defineProperty(this.obj, this.propertyKey, {
            enumerable: true,
            configurable: true,
            get: () => this.getValue(),
            set: () => {}
        });
    }
    getValue() {
        return this.observing ? this.children : this.get();
    }
    setValue(t) {}
    start() {
        var t;
        if (!this.observing) {
            this.observing = true;
            this.children = this.get();
            (null !== (t = this.observer) && void 0 !== t ? t : this.observer = new this.controller.host.ownerDocument.defaultView.MutationObserver((() => {
                this.Z();
            }))).observe(this.controller.host, this.options);
        }
    }
    stop() {
        if (this.observing) {
            this.observing = false;
            this.observer.disconnect();
            this.children = _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.emptyArray;
        }
    }
    Z() {
        this.children = this.get();
        if (void 0 !== this.callback) this.callback.call(this.obj);
        this.subs.notify(this.children, void 0, 0);
    }
    get() {
        return De(this.controller, this.query, this.filter, this.map);
    }
}

(0,_aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.subscriberCollection)()(ChildrenObserver);

function Ee(t) {
    return t.host.childNodes;
}

function Be(t, e, i) {
    return !!i;
}

function Ie(t, e, i) {
    return i;
}

const Te = {
    optional: true
};

function De(t, e, i, s) {
    var n;
    const r = e(t);
    const o = r.length;
    const l = [];
    let h;
    let a;
    let c;
    let u = 0;
    for (;u < o; ++u) {
        h = r[u];
        a = si.for(h, Te);
        c = null !== (n = null === a || void 0 === a ? void 0 : a.viewModel) && void 0 !== n ? n : null;
        if (i(h, a, c)) l.push(s(h, a, c));
    }
    return l;
}

function Pe(t) {
    return function(e) {
        return Me.define(t, e);
    };
}

function Oe(t) {
    return function(e) {
        return Me.define(At(t) ? {
            isTemplateController: true,
            name: t
        } : {
            isTemplateController: true,
            ...t
        }, e);
    };
}

class CustomAttributeDefinition {
    constructor(t, e, i, s, n, r, o, l, h) {
        this.Type = t;
        this.name = e;
        this.aliases = i;
        this.key = s;
        this.defaultBindingMode = n;
        this.isTemplateController = r;
        this.bindables = o;
        this.noMultiBindings = l;
        this.watches = h;
    }
    get type() {
        return 2;
    }
    static create(t, e) {
        let i;
        let s;
        if (At(t)) {
            i = t;
            s = {
                name: i
            };
        } else {
            i = t.name;
            s = t;
        }
        return new CustomAttributeDefinition(e, (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.firstDefined)(qe(e, "name"), i), (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.mergeArrays)(qe(e, "aliases"), s.aliases, e.aliases), Me.keyFrom(i), (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.firstDefined)(qe(e, "defaultBindingMode"), s.defaultBindingMode, e.defaultBindingMode, _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.BindingMode.toView), (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.firstDefined)(qe(e, "isTemplateController"), s.isTemplateController, e.isTemplateController, false), Bt.from(e, ...Bt.getAll(e), qe(e, "bindables"), e.bindables, s.bindables), (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.firstDefined)(qe(e, "noMultiBindings"), s.noMultiBindings, e.noMultiBindings, false), (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.mergeArrays)(_e.getAnnotation(e), e.watches));
    }
    register(t) {
        const {Type: e, key: i, aliases: s} = this;
        _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.Registration.transient(i, e).register(t);
        _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.Registration.aliasTo(i, e).register(t);
        (0,_aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.registerAliases)(s, Me, i, t);
    }
}

const $e = mt("custom-attribute");

const Le = t => `${$e}:${t}`;

const qe = (t, e) => ht(dt(e), t);

const Me = Object.freeze({
    name: $e,
    keyFrom: Le,
    isType(t) {
        return Ct(t) && at($e, t);
    },
    for(t, e) {
        var i;
        return null !== (i = is(t, Le(e))) && void 0 !== i ? i : void 0;
    },
    define(t, e) {
        const i = CustomAttributeDefinition.create(t, e);
        ct($e, i, i.Type);
        ct($e, i, i);
        vt(e, $e);
        return i.Type;
    },
    getDefinition(t) {
        const e = ht($e, t);
        if (void 0 === e) throw new Error(`AUR0759:${t.name}`);
        return e;
    },
    annotate(t, e, i) {
        ct(dt(e), i, t);
    },
    getAnnotation: qe
});

function Ue(t, e) {
    if (!t) throw new Error("AUR0772");
    return function i(s, n, r) {
        const o = null == n;
        const l = o ? s : s.constructor;
        const h = new WatchDefinition(t, o ? e : r.value);
        if (o) {
            if (!Ct(e) && (null == e || !(e in l.prototype))) throw new Error(`AUR0773:${String(e)}@${l.name}}`);
        } else if (!Ct(null === r || void 0 === r ? void 0 : r.value)) throw new Error(`AUR0774:${String(n)}`);
        _e.add(l, h);
        if (Me.isType(l)) Me.getDefinition(l).watches.push(h);
        if (si.isType(l)) si.getDefinition(l).watches.push(h);
    };
}

class WatchDefinition {
    constructor(t, e) {
        this.expression = t;
        this.callback = e;
    }
}

const Fe = _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.emptyArray;

const Ve = dt("watch");

const _e = Object.freeze({
    name: Ve,
    add(t, e) {
        let i = ht(Ve, t);
        if (null == i) ct(Ve, i = [], t);
        i.push(e);
    },
    getAnnotation(t) {
        var e;
        return null !== (e = ht(Ve, t)) && void 0 !== e ? e : Fe;
    }
});

function je(t) {
    return function(e) {
        return si.define(t, e);
    };
}

function Ne(t) {
    if (void 0 === t) return function(t) {
        ei(t, "shadowOptions", {
            mode: "open"
        });
    };
    if (!Ct(t)) return function(e) {
        ei(e, "shadowOptions", t);
    };
    ei(t, "shadowOptions", {
        mode: "open"
    });
}

function We(t) {
    if (void 0 === t) return function(t) {
        ei(t, "containerless", true);
    };
    ei(t, "containerless", true);
}

const He = new WeakMap;

class CustomElementDefinition {
    constructor(t, e, i, s, n, r, o, l, h, a, c, u, f, d, m, v, p, g, w, b, x) {
        this.Type = t;
        this.name = e;
        this.aliases = i;
        this.key = s;
        this.cache = n;
        this.capture = r;
        this.template = o;
        this.instructions = l;
        this.dependencies = h;
        this.injectable = a;
        this.needsCompile = c;
        this.surrogates = u;
        this.bindables = f;
        this.childrenObservers = d;
        this.containerless = m;
        this.isStrictBinding = v;
        this.shadowOptions = p;
        this.hasSlots = g;
        this.enhance = w;
        this.watches = b;
        this.processContent = x;
    }
    get type() {
        return 1;
    }
    static create(t, e = null) {
        if (null === e) {
            const i = t;
            if (At(i)) throw new Error(`AUR0761:${t}`);
            const s = (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.fromDefinitionOrDefault)("name", i, ti);
            if (Ct(i.Type)) e = i.Type; else e = si.generateType((0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.pascalCase)(s));
            return new CustomElementDefinition(e, s, (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.mergeArrays)(i.aliases), (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.fromDefinitionOrDefault)("key", i, (() => si.keyFrom(s))), (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.fromDefinitionOrDefault)("cache", i, Ge), (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.fromDefinitionOrDefault)("capture", i, Ke), (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.fromDefinitionOrDefault)("template", i, Xe), (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.mergeArrays)(i.instructions), (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.mergeArrays)(i.dependencies), (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.fromDefinitionOrDefault)("injectable", i, Xe), (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.fromDefinitionOrDefault)("needsCompile", i, Ye), (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.mergeArrays)(i.surrogates), Bt.from(e, i.bindables), Se.from(i.childrenObservers), (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.fromDefinitionOrDefault)("containerless", i, Ke), (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.fromDefinitionOrDefault)("isStrictBinding", i, Ke), (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.fromDefinitionOrDefault)("shadowOptions", i, Xe), (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.fromDefinitionOrDefault)("hasSlots", i, Ke), (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.fromDefinitionOrDefault)("enhance", i, Ke), (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.fromDefinitionOrDefault)("watches", i, Qe), (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.fromAnnotationOrTypeOrDefault)("processContent", e, Xe));
        }
        if (At(t)) return new CustomElementDefinition(e, t, (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.mergeArrays)(ii(e, "aliases"), e.aliases), si.keyFrom(t), (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.fromAnnotationOrTypeOrDefault)("cache", e, Ge), (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.fromAnnotationOrTypeOrDefault)("capture", e, Ke), (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.fromAnnotationOrTypeOrDefault)("template", e, Xe), (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.mergeArrays)(ii(e, "instructions"), e.instructions), (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.mergeArrays)(ii(e, "dependencies"), e.dependencies), (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.fromAnnotationOrTypeOrDefault)("injectable", e, Xe), (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.fromAnnotationOrTypeOrDefault)("needsCompile", e, Ye), (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.mergeArrays)(ii(e, "surrogates"), e.surrogates), Bt.from(e, ...Bt.getAll(e), ii(e, "bindables"), e.bindables), Se.from(...Se.getAll(e), ii(e, "childrenObservers"), e.childrenObservers), (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.fromAnnotationOrTypeOrDefault)("containerless", e, Ke), (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.fromAnnotationOrTypeOrDefault)("isStrictBinding", e, Ke), (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.fromAnnotationOrTypeOrDefault)("shadowOptions", e, Xe), (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.fromAnnotationOrTypeOrDefault)("hasSlots", e, Ke), (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.fromAnnotationOrTypeOrDefault)("enhance", e, Ke), (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.mergeArrays)(_e.getAnnotation(e), e.watches), (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.fromAnnotationOrTypeOrDefault)("processContent", e, Xe));
        const i = (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.fromDefinitionOrDefault)("name", t, ti);
        return new CustomElementDefinition(e, i, (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.mergeArrays)(ii(e, "aliases"), t.aliases, e.aliases), si.keyFrom(i), (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.fromAnnotationOrDefinitionOrTypeOrDefault)("cache", t, e, Ge), (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.fromAnnotationOrDefinitionOrTypeOrDefault)("capture", t, e, Ke), (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.fromAnnotationOrDefinitionOrTypeOrDefault)("template", t, e, Xe), (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.mergeArrays)(ii(e, "instructions"), t.instructions, e.instructions), (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.mergeArrays)(ii(e, "dependencies"), t.dependencies, e.dependencies), (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.fromAnnotationOrDefinitionOrTypeOrDefault)("injectable", t, e, Xe), (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.fromAnnotationOrDefinitionOrTypeOrDefault)("needsCompile", t, e, Ye), (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.mergeArrays)(ii(e, "surrogates"), t.surrogates, e.surrogates), Bt.from(e, ...Bt.getAll(e), ii(e, "bindables"), e.bindables, t.bindables), Se.from(...Se.getAll(e), ii(e, "childrenObservers"), e.childrenObservers, t.childrenObservers), (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.fromAnnotationOrDefinitionOrTypeOrDefault)("containerless", t, e, Ke), (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.fromAnnotationOrDefinitionOrTypeOrDefault)("isStrictBinding", t, e, Ke), (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.fromAnnotationOrDefinitionOrTypeOrDefault)("shadowOptions", t, e, Xe), (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.fromAnnotationOrDefinitionOrTypeOrDefault)("hasSlots", t, e, Ke), (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.fromAnnotationOrDefinitionOrTypeOrDefault)("enhance", t, e, Ke), (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.mergeArrays)(t.watches, _e.getAnnotation(e), e.watches), (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.fromAnnotationOrDefinitionOrTypeOrDefault)("processContent", t, e, Xe));
    }
    static getOrCreate(t) {
        if (t instanceof CustomElementDefinition) return t;
        if (He.has(t)) return He.get(t);
        const e = CustomElementDefinition.create(t);
        He.set(t, e);
        ct(Ze, e, e.Type);
        return e;
    }
    register(t) {
        const {Type: e, key: i, aliases: s} = this;
        if (!t.has(i, false)) {
            _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.Registration.transient(i, e).register(t);
            _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.Registration.aliasTo(i, e).register(t);
            (0,_aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.registerAliases)(s, si, i, t);
        }
    }
}

const ze = {
    name: void 0,
    searchParents: false,
    optional: false
};

const Ge = () => 0;

const Xe = () => null;

const Ke = () => false;

const Ye = () => true;

const Qe = () => _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.emptyArray;

const Ze = mt("custom-element");

const Je = t => `${Ze}:${t}`;

const ti = (() => {
    let t = 0;
    return () => `unnamed-${++t}`;
})();

const ei = (t, e, i) => {
    ct(dt(e), i, t);
};

const ii = (t, e) => ht(dt(e), t);

const si = Object.freeze({
    name: Ze,
    keyFrom: Je,
    isType(t) {
        return Ct(t) && at(Ze, t);
    },
    for(t, e = ze) {
        if (void 0 === e.name && true !== e.searchParents) {
            const i = is(t, Ze);
            if (null === i) {
                if (true === e.optional) return null;
                throw new Error("AUR0762");
            }
            return i;
        }
        if (void 0 !== e.name) {
            if (true !== e.searchParents) {
                const i = is(t, Ze);
                if (null === i) throw new Error("AUR0763");
                if (i.is(e.name)) return i;
                return;
            }
            let i = t;
            let s = false;
            while (null !== i) {
                const t = is(i, Ze);
                if (null !== t) {
                    s = true;
                    if (t.is(e.name)) return t;
                }
                i = as(i);
            }
            if (s) return;
            throw new Error("AUR0764");
        }
        let i = t;
        while (null !== i) {
            const t = is(i, Ze);
            if (null !== t) return t;
            i = as(i);
        }
        throw new Error("AUR0765");
    },
    define(t, e) {
        const i = CustomElementDefinition.create(t, e);
        ct(Ze, i, i.Type);
        ct(Ze, i, i);
        vt(i.Type, Ze);
        return i.Type;
    },
    getDefinition(t) {
        const e = ht(Ze, t);
        if (void 0 === e) throw new Error(`AUR0760:${t.name}`);
        return e;
    },
    annotate: ei,
    getAnnotation: ii,
    generateName: ti,
    createInjectable() {
        const t = function(e, i, s) {
            const n = _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.DI.getOrCreateAnnotationParamTypes(e);
            n[s] = t;
            return e;
        };
        t.register = function(e) {
            return {
                resolve(e, i) {
                    if (i.has(t, true)) return i.get(t); else return null;
                }
            };
        };
        return t;
    },
    generateType: function() {
        const t = {
            value: "",
            writable: false,
            enumerable: false,
            configurable: true
        };
        const e = {};
        return function(i, s = e) {
            const n = class {};
            t.value = i;
            Reflect.defineProperty(n, "name", t);
            if (s !== e) Object.assign(n.prototype, s);
            return n;
        };
    }()
});

const ni = dt("processContent");

function ri(t) {
    return void 0 === t ? function(t, e, i) {
        ct(ni, oi(t, e), t);
    } : function(e) {
        t = oi(e, t);
        const i = ht(Ze, e);
        if (void 0 !== i) i.processContent = t; else ct(ni, t, e);
        return e;
    };
}

function oi(t, e) {
    if (At(e)) e = t[e];
    if (!Ct(e)) throw new Error(`AUR0766:${typeof e}`);
    return e;
}

class ClassAttributeAccessor {
    constructor(t) {
        this.obj = t;
        this.type = 2 | 4;
        this.value = "";
        this.ov = "";
        this.J = {};
        this.tt = 0;
        this.H = false;
    }
    get doNotCache() {
        return true;
    }
    getValue() {
        return this.value;
    }
    setValue(t, e) {
        this.value = t;
        this.H = t !== this.ov;
        if (0 === (256 & e)) this.K();
    }
    K() {
        if (this.H) {
            this.H = false;
            const t = this.value;
            const e = this.J;
            const i = li(t);
            let s = this.tt;
            this.ov = t;
            if (i.length > 0) this.et(i);
            this.tt += 1;
            if (0 === s) return;
            s -= 1;
            for (const t in e) {
                if (!Object.prototype.hasOwnProperty.call(e, t) || e[t] !== s) continue;
                this.obj.classList.remove(t);
            }
        }
    }
    et(t) {
        const e = this.obj;
        const i = t.length;
        let s = 0;
        let n;
        for (;s < i; s++) {
            n = t[s];
            if (0 === n.length) continue;
            this.J[n] = this.tt;
            e.classList.add(n);
        }
    }
}

function li(t) {
    if (At(t)) return hi(t);
    if ("object" !== typeof t) return _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.emptyArray;
    if (t instanceof Array) {
        const e = t.length;
        if (e > 0) {
            const i = [];
            let s = 0;
            for (;e > s; ++s) i.push(...li(t[s]));
            return i;
        } else return _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.emptyArray;
    }
    const e = [];
    let i;
    for (i in t) if (Boolean(t[i])) if (i.includes(" ")) e.push(...hi(i)); else e.push(i);
    return e;
}

function hi(t) {
    const e = t.match(/\S+/g);
    if (null === e) return _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.emptyArray;
    return e;
}

function ai(...t) {
    return new CSSModulesProcessorRegistry(t);
}

class CSSModulesProcessorRegistry {
    constructor(t) {
        this.modules = t;
    }
    register(t) {
        var e;
        const i = Object.assign({}, ...this.modules);
        const s = Me.define({
            name: "class",
            bindables: [ "value" ]
        }, (e = class CustomAttributeClass {
            constructor(t) {
                this.element = t;
            }
            binding() {
                this.valueChanged();
            }
            valueChanged() {
                if (!this.value) {
                    this.element.className = "";
                    return;
                }
                this.element.className = li(this.value).map((t => i[t] || t)).join(" ");
            }
        }, e.inject = [ ns ], e));
        t.register(s);
    }
}

function ci(...t) {
    return new ShadowDOMRegistry(t);
}

const ui = _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.DI.createInterface("IShadowDOMStyleFactory", (t => t.cachedCallback((t => {
    if (AdoptedStyleSheetsStyles.supported(t.get(Kt))) return t.get(AdoptedStyleSheetsStylesFactory);
    return t.get(StyleElementStylesFactory);
}))));

class ShadowDOMRegistry {
    constructor(t) {
        this.css = t;
    }
    register(t) {
        const e = t.get(di);
        const i = t.get(ui);
        t.register(_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.Registration.instance(fi, i.createStyles(this.css, e)));
    }
}

class AdoptedStyleSheetsStylesFactory {
    constructor(t) {
        this.p = t;
        this.cache = new Map;
    }
    createStyles(t, e) {
        return new AdoptedStyleSheetsStyles(this.p, t, this.cache, e);
    }
}

AdoptedStyleSheetsStylesFactory.inject = [ Kt ];

class StyleElementStylesFactory {
    constructor(t) {
        this.p = t;
    }
    createStyles(t, e) {
        return new StyleElementStyles(this.p, t, e);
    }
}

StyleElementStylesFactory.inject = [ Kt ];

const fi = _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.DI.createInterface("IShadowDOMStyles");

const di = _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.DI.createInterface("IShadowDOMGlobalStyles", (t => t.instance({
    applyTo: _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.noop
})));

class AdoptedStyleSheetsStyles {
    constructor(t, e, i, s = null) {
        this.sharedStyles = s;
        this.styleSheets = e.map((e => {
            let s;
            if (e instanceof t.CSSStyleSheet) s = e; else {
                s = i.get(e);
                if (void 0 === s) {
                    s = new t.CSSStyleSheet;
                    s.replaceSync(e);
                    i.set(e, s);
                }
            }
            return s;
        }));
    }
    static supported(t) {
        return "adoptedStyleSheets" in t.ShadowRoot.prototype;
    }
    applyTo(t) {
        if (null !== this.sharedStyles) this.sharedStyles.applyTo(t);
        t.adoptedStyleSheets = [ ...t.adoptedStyleSheets, ...this.styleSheets ];
    }
}

class StyleElementStyles {
    constructor(t, e, i = null) {
        this.p = t;
        this.localStyles = e;
        this.sharedStyles = i;
    }
    applyTo(t) {
        const e = this.localStyles;
        const i = this.p;
        for (let s = e.length - 1; s > -1; --s) {
            const n = i.document.createElement("style");
            n.innerHTML = e[s];
            t.prepend(n);
        }
        if (null !== this.sharedStyles) this.sharedStyles.applyTo(t);
    }
}

const mi = {
    shadowDOM(t) {
        return xe.beforeCreate(_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.IContainer, (e => {
            if (null != t.sharedStyles) {
                const i = e.get(ui);
                e.register(_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.Registration.instance(di, i.createStyles(t.sharedStyles, null)));
            }
        }));
    }
};

const {enter: vi, exit: pi} = _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.ConnectableSwitcher;

const {wrap: gi, unwrap: wi} = _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.ProxyObservable;

class ComputedWatcher {
    constructor(t, e, i, s, n) {
        this.obj = t;
        this.get = i;
        this.cb = s;
        this.useProxy = n;
        this.interceptor = this;
        this.value = void 0;
        this.isBound = false;
        this.running = false;
        this.oL = e;
    }
    handleChange() {
        this.run();
    }
    handleCollectionChange() {
        this.run();
    }
    $bind() {
        if (this.isBound) return;
        this.isBound = true;
        this.compute();
    }
    $unbind() {
        if (!this.isBound) return;
        this.isBound = false;
        this.obs.clearAll();
    }
    run() {
        if (!this.isBound || this.running) return;
        const t = this.obj;
        const e = this.value;
        const i = this.compute();
        if (!Object.is(i, e)) this.cb.call(t, i, e, t);
    }
    compute() {
        this.running = true;
        this.obs.version++;
        try {
            vi(this);
            return this.value = wi(this.get.call(void 0, this.useProxy ? gi(this.obj) : this.obj, this));
        } finally {
            this.obs.clear();
            this.running = false;
            pi(this);
        }
    }
}

class ExpressionWatcher {
    constructor(t, e, i, s, n) {
        this.scope = t;
        this.locator = e;
        this.oL = i;
        this.expression = s;
        this.callback = n;
        this.interceptor = this;
        this.isBound = false;
        this.obj = t.bindingContext;
    }
    handleChange(t) {
        const e = this.expression;
        const i = this.obj;
        const s = this.value;
        const n = 10082 === e.$kind && 1 === this.obs.count;
        if (!n) {
            this.obs.version++;
            t = e.evaluate(0, this.scope, this.locator, this);
            this.obs.clear();
        }
        if (!Object.is(t, s)) {
            this.value = t;
            this.callback.call(i, t, s, i);
        }
    }
    $bind() {
        if (this.isBound) return;
        this.isBound = true;
        this.obs.version++;
        this.value = this.expression.evaluate(0, this.scope, this.locator, this);
        this.obs.clear();
    }
    $unbind() {
        if (!this.isBound) return;
        this.isBound = false;
        this.obs.clearAll();
        this.value = void 0;
    }
}

(0,_aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.connectable)(ComputedWatcher);

(0,_aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.connectable)(ExpressionWatcher);

const bi = _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.DI.createInterface("ILifecycleHooks");

class LifecycleHooksEntry {
    constructor(t, e) {
        this.definition = t;
        this.instance = e;
    }
}

class LifecycleHooksDefinition {
    constructor(t, e) {
        this.Type = t;
        this.propertyNames = e;
    }
    static create(t, e) {
        const i = new Set;
        let s = e.prototype;
        while (s !== Object.prototype) {
            for (const t of Object.getOwnPropertyNames(s)) if ("constructor" !== t) i.add(t);
            s = Object.getPrototypeOf(s);
        }
        return new LifecycleHooksDefinition(e, i);
    }
    register(t) {
        _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.Registration.singleton(bi, this.Type).register(t);
    }
}

const xi = new WeakMap;

const yi = dt("lifecycle-hooks");

const ki = Object.freeze({
    name: yi,
    define(t, e) {
        const i = LifecycleHooksDefinition.create(t, e);
        ct(yi, i, e);
        vt(e, yi);
        return i.Type;
    },
    resolve(t) {
        let e = xi.get(t);
        if (void 0 === e) {
            e = new LifecycleHooksLookupImpl;
            const i = t.root;
            const s = i.id === t.id ? t.getAll(bi) : t.has(bi, false) ? [ ...i.getAll(bi), ...t.getAll(bi) ] : i.getAll(bi);
            let n;
            let r;
            let o;
            let l;
            let h;
            for (n of s) {
                r = ht(yi, n.constructor);
                o = new LifecycleHooksEntry(r, n);
                for (l of r.propertyNames) {
                    h = e[l];
                    if (void 0 === h) e[l] = [ o ]; else h.push(o);
                }
            }
        }
        return e;
    }
});

class LifecycleHooksLookupImpl {}

function Ci() {
    return function t(e) {
        return ki.define({}, e);
    };
}

const Ai = _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.DI.createInterface("IViewFactory");

class ViewFactory {
    constructor(t, e) {
        this.isCaching = false;
        this.cache = null;
        this.cacheSize = -1;
        this.name = e.name;
        this.container = t;
        this.def = e;
    }
    setCacheSize(t, e) {
        if (t) {
            if ("*" === t) t = ViewFactory.maxCacheSize; else if (At(t)) t = parseInt(t, 10);
            if (-1 === this.cacheSize || !e) this.cacheSize = t;
        }
        if (this.cacheSize > 0) this.cache = []; else this.cache = null;
        this.isCaching = this.cacheSize > 0;
    }
    canReturnToCache(t) {
        return null != this.cache && this.cache.length < this.cacheSize;
    }
    tryReturnToCache(t) {
        if (this.canReturnToCache(t)) {
            this.cache.push(t);
            return true;
        }
        return false;
    }
    create(t) {
        const e = this.cache;
        let i;
        if (null != e && e.length > 0) {
            i = e.pop();
            return i;
        }
        i = Controller.$view(this, t);
        return i;
    }
}

ViewFactory.maxCacheSize = 65535;

const Si = new WeakSet;

function Ri(t) {
    return !Si.has(t);
}

function Ei(t) {
    Si.add(t);
    return CustomElementDefinition.create(t);
}

const Bi = mt("views");

const Ii = Object.freeze({
    name: Bi,
    has(t) {
        return Ct(t) && (at(Bi, t) || "$views" in t);
    },
    get(t) {
        if (Ct(t) && "$views" in t) {
            const e = t.$views;
            const i = e.filter(Ri).map(Ei);
            for (const e of i) Ii.add(t, e);
        }
        let e = ht(Bi, t);
        if (void 0 === e) ct(Bi, e = [], t);
        return e;
    },
    add(t, e) {
        const i = CustomElementDefinition.create(e);
        let s = ht(Bi, t);
        if (void 0 === s) ct(Bi, s = [ i ], t); else s.push(i);
        return s;
    }
});

function Ti(t) {
    return function(e) {
        Ii.add(e, t);
    };
}

const Di = _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.DI.createInterface("IViewLocator", (t => t.singleton(ViewLocator)));

class ViewLocator {
    constructor() {
        this.it = new WeakMap;
        this.st = new Map;
    }
    getViewComponentForObject(t, e) {
        if (t) {
            const i = Ii.has(t.constructor) ? Ii.get(t.constructor) : [];
            const s = Ct(e) ? e(t, i) : this.nt(i, e);
            return this.rt(t, i, s);
        }
        return null;
    }
    rt(t, e, i) {
        let s = this.it.get(t);
        let n;
        if (void 0 === s) {
            s = {};
            this.it.set(t, s);
        } else n = s[i];
        if (void 0 === n) {
            const r = this.ot(t, e, i);
            n = si.define(si.getDefinition(r), class extends r {
                constructor() {
                    super(t);
                }
            });
            s[i] = n;
        }
        return n;
    }
    ot(t, e, i) {
        let s = this.st.get(t.constructor);
        let n;
        if (void 0 === s) {
            s = {};
            this.st.set(t.constructor, s);
        } else n = s[i];
        if (void 0 === n) {
            n = si.define(this.lt(e, i), class {
                constructor(t) {
                    this.viewModel = t;
                }
                define(t, e, i) {
                    const s = this.viewModel;
                    t.scope = _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.Scope.fromParent(t.scope, s);
                    if (void 0 !== s.define) return s.define(t, e, i);
                }
            });
            const r = n.prototype;
            if ("hydrating" in t) r.hydrating = function t(e) {
                this.viewModel.hydrating(e);
            };
            if ("hydrated" in t) r.hydrated = function t(e) {
                this.viewModel.hydrated(e);
            };
            if ("created" in t) r.created = function t(e) {
                this.viewModel.created(e);
            };
            if ("binding" in t) r.binding = function t(e, i, s) {
                return this.viewModel.binding(e, i, s);
            };
            if ("bound" in t) r.bound = function t(e, i, s) {
                return this.viewModel.bound(e, i, s);
            };
            if ("attaching" in t) r.attaching = function t(e, i, s) {
                return this.viewModel.attaching(e, i, s);
            };
            if ("attached" in t) r.attached = function t(e, i) {
                return this.viewModel.attached(e, i);
            };
            if ("detaching" in t) r.detaching = function t(e, i, s) {
                return this.viewModel.detaching(e, i, s);
            };
            if ("unbinding" in t) r.unbinding = function t(e, i, s) {
                return this.viewModel.unbinding(e, i, s);
            };
            if ("dispose" in t) r.dispose = function t() {
                this.viewModel.dispose();
            };
            s[i] = n;
        }
        return n;
    }
    nt(t, e) {
        if (e) return e;
        if (1 === t.length) return t[0].name;
        return "default-view";
    }
    lt(t, e) {
        const i = t.find((t => t.name === e));
        if (void 0 === i) throw new Error(`Could not find view: ${e}`);
        return i;
    }
}

const Pi = _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.DI.createInterface("IRendering", (t => t.singleton(Rendering)));

class Rendering {
    constructor(t) {
        this.ht = new WeakMap;
        this.at = new WeakMap;
        this.ct = (this.ut = t.root).get(Kt);
        this.ft = new FragmentNodeSequence(this.ct, this.ct.document.createDocumentFragment());
    }
    get renderers() {
        return null == this.rs ? this.rs = this.ut.getAll(Ss, false).reduce(((t, e) => {
            t[e.instructionType] = e;
            return t;
        }), wt()) : this.rs;
    }
    compile(t, e, i) {
        if (false !== t.needsCompile) {
            const s = this.ht;
            const n = e.get(As);
            let r = s.get(t);
            if (null == r) s.set(t, r = n.compile(t, e, i)); else e.register(...r.dependencies);
            return r;
        }
        return t;
    }
    getViewFactory(t, e) {
        return new ViewFactory(e, CustomElementDefinition.getOrCreate(t));
    }
    createNodes(t) {
        if (true === t.enhance) return new FragmentNodeSequence(this.ct, t.template);
        let e;
        const i = this.at;
        if (i.has(t)) e = i.get(t); else {
            const s = this.ct;
            const n = s.document;
            const r = t.template;
            let o;
            if (null === r) e = null; else if (r instanceof s.Node) if ("TEMPLATE" === r.nodeName) e = n.adoptNode(r.content); else (e = n.adoptNode(n.createDocumentFragment())).appendChild(r.cloneNode(true)); else {
                o = n.createElement("template");
                if (At(r)) o.innerHTML = r;
                n.adoptNode(e = o.content);
            }
            i.set(t, e);
        }
        return null == e ? this.ft : new FragmentNodeSequence(this.ct, e.cloneNode(true));
    }
    render(t, e, i, s) {
        const n = i.instructions;
        const r = this.renderers;
        const o = e.length;
        if (e.length !== n.length) throw new Error(`AUR0757:${o}<>${n.length}`);
        let l = 0;
        let h = 0;
        let a = 0;
        let c;
        let u;
        let f;
        if (o > 0) while (o > l) {
            c = n[l];
            f = e[l];
            h = 0;
            a = c.length;
            while (a > h) {
                u = c[h];
                r[u.type].render(t, f, u);
                ++h;
            }
            ++l;
        }
        if (void 0 !== s && null !== s) {
            c = i.surrogates;
            if ((a = c.length) > 0) {
                h = 0;
                while (a > h) {
                    u = c[h];
                    r[u.type].render(t, s, u);
                    ++h;
                }
            }
        }
    }
}

Rendering.inject = [ _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.IContainer ];

var Oi;

(function(t) {
    t[t["none"] = 0] = "none";
    t[t["host"] = 1] = "host";
    t[t["shadowRoot"] = 2] = "shadowRoot";
    t[t["location"] = 3] = "location";
})(Oi || (Oi = {}));

const $i = {
    optional: true
};

const Li = new WeakMap;

class Controller {
    constructor(t, e, i, s, n, r) {
        this.container = t;
        this.vmKind = e;
        this.definition = i;
        this.viewFactory = s;
        this.viewModel = n;
        this.host = r;
        this.id = (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.nextId)("au$component");
        this.head = null;
        this.tail = null;
        this.next = null;
        this.parent = null;
        this.bindings = null;
        this.children = null;
        this.hasLockedScope = false;
        this.isStrictBinding = false;
        this.scope = null;
        this.isBound = false;
        this.hostController = null;
        this.mountTarget = 0;
        this.shadowRoot = null;
        this.nodes = null;
        this.location = null;
        this.lifecycleHooks = null;
        this.state = 0;
        this.dt = false;
        this.vt = _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.emptyArray;
        this.flags = 0;
        this.$initiator = null;
        this.$flags = 0;
        this.$resolve = void 0;
        this.$reject = void 0;
        this.$promise = void 0;
        this.gt = 0;
        this.wt = 0;
        this.bt = 0;
        this.r = t.root.get(Pi);
        switch (e) {
          case 1:
          case 0:
            this.hooks = new HooksDefinition(n);
            break;

          case 2:
            this.hooks = HooksDefinition.none;
            break;
        }
    }
    get isActive() {
        return (this.state & (1 | 2)) > 0 && 0 === (4 & this.state);
    }
    get name() {
        var t;
        if (null === this.parent) switch (this.vmKind) {
          case 1:
            return `[${this.definition.name}]`;

          case 0:
            return this.definition.name;

          case 2:
            return this.viewFactory.name;
        }
        switch (this.vmKind) {
          case 1:
            return `${this.parent.name}>[${this.definition.name}]`;

          case 0:
            return `${this.parent.name}>${this.definition.name}`;

          case 2:
            return this.viewFactory.name === (null === (t = this.parent.definition) || void 0 === t ? void 0 : t.name) ? `${this.parent.name}[view]` : `${this.parent.name}[view:${this.viewFactory.name}]`;
        }
    }
    static getCached(t) {
        return Li.get(t);
    }
    static getCachedOrThrow(t) {
        const e = Controller.getCached(t);
        if (void 0 === e) throw new Error(`AUR0500:${t}`);
        return e;
    }
    static $el(t, e, i, s, n = void 0) {
        if (Li.has(e)) return Li.get(e);
        n = null !== n && void 0 !== n ? n : si.getDefinition(e.constructor);
        const r = new Controller(t, 0, n, null, e, i);
        const o = t.get((0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.optional)(Ki));
        if (n.dependencies.length > 0) t.register(...n.dependencies);
        t.registerResolver(Ki, new _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.InstanceProvider("IHydrationContext", new HydrationContext(r, s, o)));
        Li.set(e, r);
        if (null == s || false !== s.hydrate) r.xt(s, o);
        return r;
    }
    static $attr(t, e, i, s) {
        if (Li.has(e)) return Li.get(e);
        s = null !== s && void 0 !== s ? s : Me.getDefinition(e.constructor);
        const n = new Controller(t, 1, s, null, e, i);
        Li.set(e, n);
        n.yt();
        return n;
    }
    static $view(t, e = void 0) {
        const i = new Controller(t.container, 2, null, t, null, null);
        i.parent = null !== e && void 0 !== e ? e : null;
        i.kt();
        return i;
    }
    xt(t, e) {
        const i = this.container;
        const s = this.flags;
        const n = this.viewModel;
        let r = this.definition;
        this.scope = _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.Scope.create(n, null, true);
        if (r.watches.length > 0) _i(this, i, r, n);
        Mi(this, r, s, n);
        this.vt = Ui(this, r, n);
        if (this.hooks.hasDefine) {
            const t = n.define(this, e, r);
            if (void 0 !== t && t !== r) r = CustomElementDefinition.getOrCreate(t);
        }
        this.lifecycleHooks = ki.resolve(i);
        r.register(i);
        if (null !== r.injectable) i.registerResolver(r.injectable, new _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.InstanceProvider("definition.injectable", n));
        if (null == t || false !== t.hydrate) {
            this.Ct(t);
            this.At();
        }
    }
    Ct(t) {
        if (this.hooks.hasHydrating) this.viewModel.hydrating(this);
        const e = this.St = this.r.compile(this.definition, this.container, t);
        const {shadowOptions: i, isStrictBinding: s, hasSlots: n, containerless: r} = e;
        this.isStrictBinding = s;
        if (null !== (this.hostController = si.for(this.host, $i))) this.host = this.container.root.get(Kt).document.createElement(this.definition.name);
        ss(this.host, si.name, this);
        ss(this.host, this.definition.key, this);
        if (null !== i || n) {
            if (r) throw new Error("AUR0501");
            ss(this.shadowRoot = this.host.attachShadow(null !== i && void 0 !== i ? i : Wi), si.name, this);
            ss(this.shadowRoot, this.definition.key, this);
            this.mountTarget = 2;
        } else if (r) {
            ss(this.location = us(this.host), si.name, this);
            ss(this.location, this.definition.key, this);
            this.mountTarget = 3;
        } else this.mountTarget = 1;
        this.viewModel.$controller = this;
        this.nodes = this.r.createNodes(e);
        if (this.hooks.hasHydrated) this.viewModel.hydrated(this);
    }
    At() {
        this.r.render(this, this.nodes.findTargets(), this.St, this.host);
        if (this.hooks.hasCreated) this.viewModel.created(this);
    }
    yt() {
        const t = this.definition;
        const e = this.viewModel;
        if (t.watches.length > 0) _i(this, this.container, t, e);
        Mi(this, t, this.flags, e);
        e.$controller = this;
        this.lifecycleHooks = ki.resolve(this.container);
        if (this.hooks.hasCreated) this.viewModel.created(this);
    }
    kt() {
        this.St = this.r.compile(this.viewFactory.def, this.container, null);
        this.isStrictBinding = this.St.isStrictBinding;
        this.r.render(this, (this.nodes = this.r.createNodes(this.St)).findTargets(), this.St, void 0);
    }
    activate(t, e, i, s) {
        switch (this.state) {
          case 0:
          case 8:
            if (!(null === e || e.isActive)) return;
            this.state = 1;
            break;

          case 2:
            return;

          case 32:
            throw new Error(`AUR0502:${this.name}`);

          default:
            throw new Error(`AUR0503:${this.name} ${Gi(this.state)}`);
        }
        this.parent = e;
        i |= 2;
        switch (this.vmKind) {
          case 0:
            this.scope.parentScope = null !== s && void 0 !== s ? s : null;
            break;

          case 1:
            this.scope = null !== s && void 0 !== s ? s : null;
            break;

          case 2:
            if (void 0 === s || null === s) throw new Error("AUR0504");
            if (!this.hasLockedScope) this.scope = s;
            break;
        }
        if (this.isStrictBinding) i |= 1;
        this.$initiator = t;
        this.$flags = i;
        this.Rt();
        if (this.hooks.hasBinding) {
            const t = this.viewModel.binding(this.$initiator, this.parent, this.$flags);
            if (t instanceof Promise) {
                this.Et();
                t.then((() => {
                    this.bind();
                })).catch((t => {
                    this.Bt(t);
                }));
                return this.$promise;
            }
        }
        this.bind();
        return this.$promise;
    }
    bind() {
        let t = 0;
        let e = this.vt.length;
        let i;
        if (e > 0) while (e > t) {
            this.vt[t].start();
            ++t;
        }
        if (null !== this.bindings) {
            t = 0;
            e = this.bindings.length;
            while (e > t) {
                this.bindings[t].$bind(this.$flags, this.scope);
                ++t;
            }
        }
        if (this.hooks.hasBound) {
            i = this.viewModel.bound(this.$initiator, this.parent, this.$flags);
            if (i instanceof Promise) {
                this.Et();
                i.then((() => {
                    this.isBound = true;
                    this.It();
                })).catch((t => {
                    this.Bt(t);
                }));
                return;
            }
        }
        this.isBound = true;
        this.It();
    }
    Tt(...t) {
        switch (this.mountTarget) {
          case 1:
            this.host.append(...t);
            break;

          case 2:
            this.shadowRoot.append(...t);
            break;

          case 3:
            {
                let e = 0;
                for (;e < t.length; ++e) this.location.parentNode.insertBefore(t[e], this.location);
                break;
            }
        }
    }
    It() {
        if (null !== this.hostController) switch (this.mountTarget) {
          case 1:
          case 2:
            this.hostController.Tt(this.host);
            break;

          case 3:
            this.hostController.Tt(this.location.$start, this.location);
            break;
        }
        switch (this.mountTarget) {
          case 1:
            this.nodes.appendTo(this.host, null != this.definition && this.definition.enhance);
            break;

          case 2:
            {
                const t = this.container;
                const e = t.has(fi, false) ? t.get(fi) : t.get(di);
                e.applyTo(this.shadowRoot);
                this.nodes.appendTo(this.shadowRoot);
                break;
            }

          case 3:
            this.nodes.insertBefore(this.location);
            break;
        }
        if (this.hooks.hasAttaching) {
            const t = this.viewModel.attaching(this.$initiator, this.parent, this.$flags);
            if (t instanceof Promise) {
                this.Et();
                this.Rt();
                t.then((() => {
                    this.Dt();
                })).catch((t => {
                    this.Bt(t);
                }));
            }
        }
        if (null !== this.children) {
            let t = 0;
            for (;t < this.children.length; ++t) void this.children[t].activate(this.$initiator, this, this.$flags, this.scope);
        }
        this.Dt();
    }
    deactivate(t, e, i) {
        switch (~16 & this.state) {
          case 2:
            this.state = 4;
            break;

          case 0:
          case 8:
          case 32:
          case 8 | 32:
            return;

          default:
            throw new Error(`AUR0505:${this.name} ${Gi(this.state)}`);
        }
        this.$initiator = t;
        this.$flags = i;
        if (t === this) this.Pt();
        let s = 0;
        if (this.vt.length) for (;s < this.vt.length; ++s) this.vt[s].stop();
        if (null !== this.children) for (s = 0; s < this.children.length; ++s) void this.children[s].deactivate(t, this, i);
        if (this.hooks.hasDetaching) {
            const e = this.viewModel.detaching(this.$initiator, this.parent, this.$flags);
            if (e instanceof Promise) {
                this.Et();
                t.Pt();
                e.then((() => {
                    t.Ot();
                })).catch((e => {
                    t.Bt(e);
                }));
            }
        }
        if (null === t.head) t.head = this; else t.tail.next = this;
        t.tail = this;
        if (t !== this) return;
        this.Ot();
        return this.$promise;
    }
    removeNodes() {
        switch (this.vmKind) {
          case 0:
          case 2:
            this.nodes.remove();
            this.nodes.unlink();
        }
        if (null !== this.hostController) switch (this.mountTarget) {
          case 1:
          case 2:
            this.host.remove();
            break;

          case 3:
            this.location.$start.remove();
            this.location.remove();
            break;
        }
    }
    unbind() {
        const t = 4 | this.$flags;
        let e = 0;
        if (null !== this.bindings) for (;e < this.bindings.length; ++e) this.bindings[e].$unbind(t);
        this.parent = null;
        switch (this.vmKind) {
          case 1:
            this.scope = null;
            break;

          case 2:
            if (!this.hasLockedScope) this.scope = null;
            if (16 === (16 & this.state) && !this.viewFactory.tryReturnToCache(this) && this.$initiator === this) this.dispose();
            break;

          case 0:
            this.scope.parentScope = null;
            break;
        }
        if (32 === (32 & t) && this.$initiator === this) this.dispose();
        this.state = 32 & this.state | 8;
        this.$initiator = null;
        this.$t();
    }
    Et() {
        if (void 0 === this.$promise) {
            this.$promise = new Promise(((t, e) => {
                this.$resolve = t;
                this.$reject = e;
            }));
            if (this.$initiator !== this) this.parent.Et();
        }
    }
    $t() {
        if (void 0 !== this.$promise) {
            Qi = this.$resolve;
            this.$resolve = this.$reject = this.$promise = void 0;
            Qi();
            Qi = void 0;
        }
    }
    Bt(t) {
        if (void 0 !== this.$promise) {
            Zi = this.$reject;
            this.$resolve = this.$reject = this.$promise = void 0;
            Zi(t);
            Zi = void 0;
        }
        if (this.$initiator !== this) this.parent.Bt(t);
    }
    Rt() {
        ++this.gt;
        if (this.$initiator !== this) this.parent.Rt();
    }
    Dt() {
        if (0 === --this.gt) {
            if (this.hooks.hasAttached) {
                Ji = this.viewModel.attached(this.$initiator, this.$flags);
                if (Ji instanceof Promise) {
                    this.Et();
                    Ji.then((() => {
                        this.state = 2;
                        this.$t();
                        if (this.$initiator !== this) this.parent.Dt();
                    })).catch((t => {
                        this.Bt(t);
                    }));
                    Ji = void 0;
                    return;
                }
                Ji = void 0;
            }
            this.state = 2;
            this.$t();
        }
        if (this.$initiator !== this) this.parent.Dt();
    }
    Pt() {
        ++this.wt;
    }
    Ot() {
        if (0 === --this.wt) {
            this.Lt();
            this.removeNodes();
            let t = this.$initiator.head;
            while (null !== t) {
                if (t !== this) {
                    if (t.debug) t.logger.trace(`detach()`);
                    t.removeNodes();
                }
                if (t.hooks.hasUnbinding) {
                    if (t.debug) t.logger.trace("unbinding()");
                    Ji = t.viewModel.unbinding(t.$initiator, t.parent, t.$flags);
                    if (Ji instanceof Promise) {
                        this.Et();
                        this.Lt();
                        Ji.then((() => {
                            this.qt();
                        })).catch((t => {
                            this.Bt(t);
                        }));
                    }
                    Ji = void 0;
                }
                t = t.next;
            }
            this.qt();
        }
    }
    Lt() {
        ++this.bt;
    }
    qt() {
        if (0 === --this.bt) {
            let t = this.$initiator.head;
            let e = null;
            while (null !== t) {
                if (t !== this) {
                    t.isBound = false;
                    t.unbind();
                }
                e = t.next;
                t.next = null;
                t = e;
            }
            this.head = this.tail = null;
            this.isBound = false;
            this.unbind();
        }
    }
    addBinding(t) {
        if (null === this.bindings) this.bindings = [ t ]; else this.bindings[this.bindings.length] = t;
    }
    addChild(t) {
        if (null === this.children) this.children = [ t ]; else this.children[this.children.length] = t;
    }
    is(t) {
        switch (this.vmKind) {
          case 1:
            return Me.getDefinition(this.viewModel.constructor).name === t;

          case 0:
            return si.getDefinition(this.viewModel.constructor).name === t;

          case 2:
            return this.viewFactory.name === t;
        }
    }
    lockScope(t) {
        this.scope = t;
        this.hasLockedScope = true;
    }
    setHost(t) {
        if (0 === this.vmKind) {
            ss(t, si.name, this);
            ss(t, this.definition.key, this);
        }
        this.host = t;
        this.mountTarget = 1;
        return this;
    }
    setShadowRoot(t) {
        if (0 === this.vmKind) {
            ss(t, si.name, this);
            ss(t, this.definition.key, this);
        }
        this.shadowRoot = t;
        this.mountTarget = 2;
        return this;
    }
    setLocation(t) {
        if (0 === this.vmKind) {
            ss(t, si.name, this);
            ss(t, this.definition.key, this);
        }
        this.location = t;
        this.mountTarget = 3;
        return this;
    }
    release() {
        this.state |= 16;
    }
    dispose() {
        if (32 === (32 & this.state)) return;
        this.state |= 32;
        if (this.hooks.hasDispose) this.viewModel.dispose();
        if (null !== this.children) {
            this.children.forEach(Yi);
            this.children = null;
        }
        this.hostController = null;
        this.scope = null;
        this.nodes = null;
        this.location = null;
        this.viewFactory = null;
        if (null !== this.viewModel) {
            Li.delete(this.viewModel);
            this.viewModel = null;
        }
        this.viewModel = null;
        this.host = null;
        this.shadowRoot = null;
        this.container.disposeResolvers();
    }
    accept(t) {
        if (true === t(this)) return true;
        if (this.hooks.hasAccept && true === this.viewModel.accept(t)) return true;
        if (null !== this.children) {
            const {children: e} = this;
            for (let i = 0, s = e.length; i < s; ++i) if (true === e[i].accept(t)) return true;
        }
    }
}

function qi(t) {
    let e = t.$observers;
    if (void 0 === e) Reflect.defineProperty(t, "$observers", {
        enumerable: false,
        value: e = {}
    });
    return e;
}

function Mi(t, e, i, s) {
    const n = e.bindables;
    const r = Object.getOwnPropertyNames(n);
    const o = r.length;
    if (o > 0) {
        let e;
        let i;
        let l = 0;
        const h = qi(s);
        const a = t.container;
        const c = a.has(_aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.ICoercionConfiguration, true) ? a.get(_aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.ICoercionConfiguration) : null;
        for (;l < o; ++l) {
            e = r[l];
            if (void 0 === h[e]) {
                i = n[e];
                h[e] = new BindableObserver(s, e, i.callback, i.set, t, c);
            }
        }
    }
}

function Ui(t, e, i) {
    const s = e.childrenObservers;
    const n = Object.getOwnPropertyNames(s);
    const r = n.length;
    if (r > 0) {
        const e = qi(i);
        const o = [];
        let l;
        let h = 0;
        let a;
        for (;h < r; ++h) {
            l = n[h];
            if (void 0 == e[l]) {
                a = s[l];
                o[o.length] = e[l] = new ChildrenObserver(t, i, l, a.callback, a.query, a.filter, a.map, a.options);
            }
        }
        return o;
    }
    return _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.emptyArray;
}

const Fi = new Map;

const Vi = t => {
    let e = Fi.get(t);
    if (null == e) {
        e = new _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.AccessScopeExpression(t, 0);
        Fi.set(t, e);
    }
    return e;
};

function _i(t, e, i, s) {
    const n = e.get(_aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.IObserverLocator);
    const r = e.get(_aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.IExpressionParser);
    const o = i.watches;
    const l = 0 === t.vmKind ? t.scope : _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.Scope.create(s, null, true);
    const h = o.length;
    let a;
    let c;
    let u;
    let f = 0;
    for (;h > f; ++f) {
        ({expression: a, callback: c} = o[f]);
        c = Ct(c) ? c : Reflect.get(s, c);
        if (!Ct(c)) throw new Error(`AUR0506:${String(c)}`);
        if (Ct(a)) t.addBinding(new ComputedWatcher(s, n, a, c, true)); else {
            u = At(a) ? r.parse(a, 8) : Vi(a);
            t.addBinding(new ExpressionWatcher(l, e, n, u, c));
        }
    }
}

function ji(t) {
    return t instanceof Controller && 0 === t.vmKind;
}

function Ni(t) {
    return (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.isObject)(t) && si.isType(t.constructor);
}

class HooksDefinition {
    constructor(t) {
        this.hasDefine = "define" in t;
        this.hasHydrating = "hydrating" in t;
        this.hasHydrated = "hydrated" in t;
        this.hasCreated = "created" in t;
        this.hasBinding = "binding" in t;
        this.hasBound = "bound" in t;
        this.hasAttaching = "attaching" in t;
        this.hasAttached = "attached" in t;
        this.hasDetaching = "detaching" in t;
        this.hasUnbinding = "unbinding" in t;
        this.hasDispose = "dispose" in t;
        this.hasAccept = "accept" in t;
    }
}

HooksDefinition.none = new HooksDefinition({});

const Wi = {
    mode: "open"
};

var Hi;

(function(t) {
    t[t["customElement"] = 0] = "customElement";
    t[t["customAttribute"] = 1] = "customAttribute";
    t[t["synthetic"] = 2] = "synthetic";
})(Hi || (Hi = {}));

var zi;

(function(t) {
    t[t["none"] = 0] = "none";
    t[t["activating"] = 1] = "activating";
    t[t["activated"] = 2] = "activated";
    t[t["deactivating"] = 4] = "deactivating";
    t[t["deactivated"] = 8] = "deactivated";
    t[t["released"] = 16] = "released";
    t[t["disposed"] = 32] = "disposed";
})(zi || (zi = {}));

function Gi(t) {
    const e = [];
    if (1 === (1 & t)) e.push("activating");
    if (2 === (2 & t)) e.push("activated");
    if (4 === (4 & t)) e.push("deactivating");
    if (8 === (8 & t)) e.push("deactivated");
    if (16 === (16 & t)) e.push("released");
    if (32 === (32 & t)) e.push("disposed");
    return 0 === e.length ? "none" : e.join("|");
}

const Xi = _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.DI.createInterface("IController");

const Ki = _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.DI.createInterface("IHydrationContext");

class HydrationContext {
    constructor(t, e, i) {
        this.instruction = e;
        this.parent = i;
        this.controller = t;
    }
}

function Yi(t) {
    t.dispose();
}

let Qi;

let Zi;

let Ji;

const ts = _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.DI.createInterface("IAppRoot");

const es = _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.DI.createInterface("IWorkTracker", (t => t.singleton(WorkTracker)));

class WorkTracker {
    constructor(t) {
        this.Mt = 0;
        this.Ut = null;
        this.$t = null;
        this.Ft = t.scopeTo("WorkTracker");
    }
    start() {
        this.Ft.trace(`start(stack:${this.Mt})`);
        ++this.Mt;
    }
    finish() {
        this.Ft.trace(`finish(stack:${this.Mt})`);
        if (0 === --this.Mt) {
            const t = this.$t;
            if (null !== t) {
                this.$t = this.Ut = null;
                t();
            }
        }
    }
    wait() {
        this.Ft.trace(`wait(stack:${this.Mt})`);
        if (null === this.Ut) {
            if (0 === this.Mt) return Promise.resolve();
            this.Ut = new Promise((t => {
                this.$t = t;
            }));
        }
        return this.Ut;
    }
}

WorkTracker.inject = [ _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.ILogger ];

class AppRoot {
    constructor(t, e, i, s) {
        this.config = t;
        this.platform = e;
        this.container = i;
        this.controller = void 0;
        this.Vt = void 0;
        this.host = t.host;
        this.work = i.get(es);
        s.prepare(this);
        i.registerResolver(e.HTMLElement, i.registerResolver(e.Element, i.registerResolver(ns, new _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.InstanceProvider("ElementResolver", t.host))));
        this.Vt = (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.onResolve)(this._t("beforeCreate"), (() => {
            const e = t.component;
            const s = i.createChild();
            let n;
            if (si.isType(e)) n = this.container.get(e); else n = t.component;
            const r = {
                hydrate: false,
                projections: null
            };
            const o = this.controller = Controller.$el(s, n, this.host, r);
            o.xt(r, null);
            return (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.onResolve)(this._t("hydrating"), (() => {
                o.Ct(null);
                return (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.onResolve)(this._t("hydrated"), (() => {
                    o.At();
                    this.Vt = void 0;
                }));
            }));
        }));
    }
    activate() {
        return (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.onResolve)(this.Vt, (() => (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.onResolve)(this._t("beforeActivate"), (() => (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.onResolve)(this.controller.activate(this.controller, null, 2, void 0), (() => this._t("afterActivate")))))));
    }
    deactivate() {
        return (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.onResolve)(this._t("beforeDeactivate"), (() => (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.onResolve)(this.controller.deactivate(this.controller, null, 0), (() => this._t("afterDeactivate")))));
    }
    _t(t) {
        return (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.resolveAll)(...this.container.getAll(be).reduce(((e, i) => {
            if (i.slot === t) e.push(i.run());
            return e;
        }), []));
    }
    dispose() {
        var t;
        null === (t = this.controller) || void 0 === t ? void 0 : t.dispose();
    }
}

class Refs {}

function is(t, e) {
    var i, s;
    return null !== (s = null === (i = t.$au) || void 0 === i ? void 0 : i[e]) && void 0 !== s ? s : null;
}

function ss(t, e, i) {
    var s;
    var n;
    (null !== (s = (n = t).$au) && void 0 !== s ? s : n.$au = new Refs)[e] = i;
}

const ns = _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.DI.createInterface("INode");

const rs = _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.DI.createInterface("IEventTarget", (t => t.cachedCallback((t => {
    if (t.has(ts, true)) return t.get(ts).host;
    return t.get(Kt).document;
}))));

const os = _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.DI.createInterface("IRenderLocation");

var ls;

(function(t) {
    t[t["Element"] = 1] = "Element";
    t[t["Attr"] = 2] = "Attr";
    t[t["Text"] = 3] = "Text";
    t[t["CDATASection"] = 4] = "CDATASection";
    t[t["EntityReference"] = 5] = "EntityReference";
    t[t["Entity"] = 6] = "Entity";
    t[t["ProcessingInstruction"] = 7] = "ProcessingInstruction";
    t[t["Comment"] = 8] = "Comment";
    t[t["Document"] = 9] = "Document";
    t[t["DocumentType"] = 10] = "DocumentType";
    t[t["DocumentFragment"] = 11] = "DocumentFragment";
    t[t["Notation"] = 12] = "Notation";
})(ls || (ls = {}));

const hs = new WeakMap;

function as(t) {
    if (hs.has(t)) return hs.get(t);
    let e = 0;
    let i = t.nextSibling;
    while (null !== i) {
        if (8 === i.nodeType) switch (i.textContent) {
          case "au-start":
            ++e;
            break;

          case "au-end":
            if (0 === e--) return i;
        }
        i = i.nextSibling;
    }
    if (null === t.parentNode && 11 === t.nodeType) {
        const e = si.for(t);
        if (void 0 === e) return null;
        if (2 === e.mountTarget) return as(e.host);
    }
    return t.parentNode;
}

function cs(t, e) {
    if (void 0 !== t.platform && !(t instanceof t.platform.Node)) {
        const i = t.childNodes;
        for (let t = 0, s = i.length; t < s; ++t) hs.set(i[t], e);
    } else hs.set(t, e);
}

function us(t) {
    if (fs(t)) return t;
    const e = t.ownerDocument.createComment("au-end");
    const i = t.ownerDocument.createComment("au-start");
    if (null !== t.parentNode) {
        t.parentNode.replaceChild(e, t);
        e.parentNode.insertBefore(i, e);
    }
    e.$start = i;
    return e;
}

function fs(t) {
    return "au-end" === t.textContent;
}

class FragmentNodeSequence {
    constructor(t, e) {
        this.platform = t;
        this.fragment = e;
        this.isMounted = false;
        this.isLinked = false;
        this.next = void 0;
        this.refNode = void 0;
        const i = e.querySelectorAll(".au");
        let s = 0;
        let n = i.length;
        let r;
        let o = this.targets = Array(n);
        while (n > s) {
            r = i[s];
            if ("AU-M" === r.nodeName) o[s] = us(r); else o[s] = r;
            ++s;
        }
        const l = e.childNodes;
        const h = this.childNodes = Array(n = l.length);
        s = 0;
        while (n > s) {
            h[s] = l[s];
            ++s;
        }
        this.firstChild = e.firstChild;
        this.lastChild = e.lastChild;
    }
    findTargets() {
        return this.targets;
    }
    insertBefore(t) {
        if (this.isLinked && !!this.refNode) this.addToLinked(); else {
            const e = t.parentNode;
            if (this.isMounted) {
                let i = this.firstChild;
                let s;
                const n = this.lastChild;
                while (null != i) {
                    s = i.nextSibling;
                    e.insertBefore(i, t);
                    if (i === n) break;
                    i = s;
                }
            } else {
                this.isMounted = true;
                t.parentNode.insertBefore(this.fragment, t);
            }
        }
    }
    appendTo(t, e = false) {
        if (this.isMounted) {
            let e = this.firstChild;
            let i;
            const s = this.lastChild;
            while (null != e) {
                i = e.nextSibling;
                t.appendChild(e);
                if (e === s) break;
                e = i;
            }
        } else {
            this.isMounted = true;
            if (!e) t.appendChild(this.fragment);
        }
    }
    remove() {
        if (this.isMounted) {
            this.isMounted = false;
            const t = this.fragment;
            const e = this.lastChild;
            let i;
            let s = this.firstChild;
            while (null !== s) {
                i = s.nextSibling;
                t.appendChild(s);
                if (s === e) break;
                s = i;
            }
        }
    }
    addToLinked() {
        const t = this.refNode;
        const e = t.parentNode;
        if (this.isMounted) {
            let i = this.firstChild;
            let s;
            const n = this.lastChild;
            while (null != i) {
                s = i.nextSibling;
                e.insertBefore(i, t);
                if (i === n) break;
                i = s;
            }
        } else {
            this.isMounted = true;
            e.insertBefore(this.fragment, t);
        }
    }
    unlink() {
        this.isLinked = false;
        this.next = void 0;
        this.refNode = void 0;
    }
    link(t) {
        this.isLinked = true;
        if (fs(t)) this.refNode = t; else {
            this.next = t;
            this.obtainRefNode();
        }
    }
    obtainRefNode() {
        if (void 0 !== this.next) this.refNode = this.next.firstChild; else this.refNode = void 0;
    }
}

const ds = _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.DI.createInterface("IWindow", (t => t.callback((t => t.get(Kt).window))));

const ms = _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.DI.createInterface("ILocation", (t => t.callback((t => t.get(ds).location))));

const vs = _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.DI.createInterface("IHistory", (t => t.callback((t => t.get(ds).history))));

const ps = {
    [_aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.DelegationStrategy.capturing]: {
        capture: true
    },
    [_aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.DelegationStrategy.bubbling]: {
        capture: false
    }
};

class Listener {
    constructor(t, e, i, s, n, r, o, l) {
        this.platform = t;
        this.targetEvent = e;
        this.delegationStrategy = i;
        this.sourceExpression = s;
        this.target = n;
        this.preventDefault = r;
        this.eventDelegator = o;
        this.locator = l;
        this.interceptor = this;
        this.isBound = false;
        this.handler = null;
    }
    callSource(t) {
        const e = this.$scope.overrideContext;
        e.$event = t;
        const i = this.sourceExpression.evaluate(8, this.$scope, this.locator, null);
        Reflect.deleteProperty(e, "$event");
        if (true !== i && this.preventDefault) t.preventDefault();
        return i;
    }
    handleEvent(t) {
        this.interceptor.callSource(t);
    }
    $bind(t, e) {
        if (this.isBound) {
            if (this.$scope === e) return;
            this.interceptor.$unbind(2 | t);
        }
        this.$scope = e;
        const i = this.sourceExpression;
        if (i.hasBind) i.bind(t, e, this.interceptor);
        if (this.delegationStrategy === _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.DelegationStrategy.none) this.target.addEventListener(this.targetEvent, this); else this.handler = this.eventDelegator.addEventListener(this.locator.get(rs), this.target, this.targetEvent, this, ps[this.delegationStrategy]);
        this.isBound = true;
    }
    $unbind(t) {
        if (!this.isBound) return;
        const e = this.sourceExpression;
        if (e.hasUnbind) e.unbind(t, this.$scope, this.interceptor);
        this.$scope = null;
        if (this.delegationStrategy === _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.DelegationStrategy.none) this.target.removeEventListener(this.targetEvent, this); else {
            this.handler.dispose();
            this.handler = null;
        }
        this.isBound = false;
    }
    observe(t, e) {
        return;
    }
    handleChange(t, e, i) {
        return;
    }
}

const gs = {
    capture: false
};

class ListenerTracker {
    constructor(t, e, i = gs) {
        this.jt = t;
        this.Nt = e;
        this.Wt = i;
        this.Ht = 0;
        this.zt = new Map;
        this.Gt = new Map;
    }
    Xt() {
        if (1 === ++this.Ht) this.jt.addEventListener(this.Nt, this, this.Wt);
    }
    Kt() {
        if (0 === --this.Ht) this.jt.removeEventListener(this.Nt, this, this.Wt);
    }
    dispose() {
        if (this.Ht > 0) {
            this.Ht = 0;
            this.jt.removeEventListener(this.Nt, this, this.Wt);
        }
        this.zt.clear();
        this.Gt.clear();
    }
    Yt(t) {
        const e = true === this.Wt.capture ? this.zt : this.Gt;
        let i = e.get(t);
        if (void 0 === i) e.set(t, i = wt());
        return i;
    }
    handleEvent(t) {
        const e = true === this.Wt.capture ? this.zt : this.Gt;
        const i = t.composedPath();
        if (true === this.Wt.capture) i.reverse();
        for (const s of i) {
            const i = e.get(s);
            if (void 0 === i) continue;
            const n = i[this.Nt];
            if (void 0 === n) continue;
            if (Ct(n)) n(t); else n.handleEvent(t);
            if (true === t.cancelBubble) return;
        }
    }
}

class DelegateSubscription {
    constructor(t, e, i, s) {
        this.Qt = t;
        this.Zt = e;
        this.Nt = i;
        t.Xt();
        e[i] = s;
    }
    dispose() {
        this.Qt.Kt();
        this.Zt[this.Nt] = void 0;
    }
}

class EventSubscriber {
    constructor(t) {
        this.config = t;
        this.target = null;
        this.handler = null;
    }
    subscribe(t, e) {
        this.target = t;
        this.handler = e;
        let i;
        for (i of this.config.events) t.addEventListener(i, e);
    }
    dispose() {
        const {target: t, handler: e} = this;
        let i;
        if (null !== t && null !== e) for (i of this.config.events) t.removeEventListener(i, e);
        this.target = this.handler = null;
    }
}

const ws = _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.DI.createInterface("IEventDelegator", (t => t.singleton(EventDelegator)));

class EventDelegator {
    constructor() {
        this.Jt = wt();
    }
    addEventListener(t, e, i, s, n) {
        var r;
        var o;
        const l = null !== (r = (o = this.Jt)[i]) && void 0 !== r ? r : o[i] = new Map;
        let h = l.get(t);
        if (void 0 === h) l.set(t, h = new ListenerTracker(t, i, n));
        return new DelegateSubscription(h, h.Yt(e), i, s);
    }
    dispose() {
        for (const t in this.Jt) {
            const e = this.Jt[t];
            for (const t of e.values()) t.dispose();
            e.clear();
        }
    }
}

const bs = _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.DI.createInterface("IProjections");

const xs = _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.DI.createInterface("IAuSlotsInfo");

class AuSlotsInfo {
    constructor(t) {
        this.projectedSlots = t;
    }
}

var ys;

(function(t) {
    t["hydrateElement"] = "ra";
    t["hydrateAttribute"] = "rb";
    t["hydrateTemplateController"] = "rc";
    t["hydrateLetElement"] = "rd";
    t["setProperty"] = "re";
    t["interpolation"] = "rf";
    t["propertyBinding"] = "rg";
    t["callBinding"] = "rh";
    t["letBinding"] = "ri";
    t["refBinding"] = "rj";
    t["iteratorBinding"] = "rk";
    t["textBinding"] = "ha";
    t["listenerBinding"] = "hb";
    t["attributeBinding"] = "hc";
    t["stylePropertyBinding"] = "hd";
    t["setAttribute"] = "he";
    t["setClassAttribute"] = "hf";
    t["setStyleAttribute"] = "hg";
    t["spreadBinding"] = "hs";
    t["spreadElementProp"] = "hp";
})(ys || (ys = {}));

const ks = _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.DI.createInterface("Instruction");

function Cs(t) {
    const e = t.type;
    return At(e) && 2 === e.length;
}

class InterpolationInstruction {
    constructor(t, e) {
        this.from = t;
        this.to = e;
    }
    get type() {
        return "rf";
    }
}

class PropertyBindingInstruction {
    constructor(t, e, i) {
        this.from = t;
        this.to = e;
        this.mode = i;
    }
    get type() {
        return "rg";
    }
}

class IteratorBindingInstruction {
    constructor(t, e) {
        this.from = t;
        this.to = e;
    }
    get type() {
        return "rk";
    }
}

class CallBindingInstruction {
    constructor(t, e) {
        this.from = t;
        this.to = e;
    }
    get type() {
        return "rh";
    }
}

class RefBindingInstruction {
    constructor(t, e) {
        this.from = t;
        this.to = e;
    }
    get type() {
        return "rj";
    }
}

class SetPropertyInstruction {
    constructor(t, e) {
        this.value = t;
        this.to = e;
    }
    get type() {
        return "re";
    }
}

class HydrateElementInstruction {
    constructor(t, e, i, s, n, r) {
        this.res = t;
        this.alias = e;
        this.props = i;
        this.projections = s;
        this.containerless = n;
        this.captures = r;
        this.auSlot = null;
    }
    get type() {
        return "ra";
    }
}

class HydrateAttributeInstruction {
    constructor(t, e, i) {
        this.res = t;
        this.alias = e;
        this.props = i;
    }
    get type() {
        return "rb";
    }
}

class HydrateTemplateController {
    constructor(t, e, i, s) {
        this.def = t;
        this.res = e;
        this.alias = i;
        this.props = s;
    }
    get type() {
        return "rc";
    }
}

class HydrateLetElementInstruction {
    constructor(t, e) {
        this.instructions = t;
        this.toBindingContext = e;
    }
    get type() {
        return "rd";
    }
}

class LetBindingInstruction {
    constructor(t, e) {
        this.from = t;
        this.to = e;
    }
    get type() {
        return "ri";
    }
}

class TextBindingInstruction {
    constructor(t, e) {
        this.from = t;
        this.strict = e;
    }
    get type() {
        return "ha";
    }
}

class ListenerBindingInstruction {
    constructor(t, e, i, s) {
        this.from = t;
        this.to = e;
        this.preventDefault = i;
        this.strategy = s;
    }
    get type() {
        return "hb";
    }
}

class StylePropertyBindingInstruction {
    constructor(t, e) {
        this.from = t;
        this.to = e;
    }
    get type() {
        return "hd";
    }
}

class SetAttributeInstruction {
    constructor(t, e) {
        this.value = t;
        this.to = e;
    }
    get type() {
        return "he";
    }
}

class SetClassAttributeInstruction {
    constructor(t) {
        this.value = t;
        this.type = "hf";
    }
}

class SetStyleAttributeInstruction {
    constructor(t) {
        this.value = t;
        this.type = "hg";
    }
}

class AttributeBindingInstruction {
    constructor(t, e, i) {
        this.attr = t;
        this.from = e;
        this.to = i;
    }
    get type() {
        return "hc";
    }
}

class SpreadBindingInstruction {
    get type() {
        return "hs";
    }
}

class SpreadElementPropBindingInstruction {
    constructor(t) {
        this.instructions = t;
    }
    get type() {
        return "hp";
    }
}

const As = _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.DI.createInterface("ITemplateCompiler");

const Ss = _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.DI.createInterface("IRenderer");

function Rs(t) {
    return function i(s) {
        const n = function(...e) {
            const i = new s(...e);
            i.instructionType = t;
            return i;
        };
        n.register = function t(e) {
            _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.Registration.singleton(Ss, n).register(e);
        };
        const r = _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.Metadata.getOwnKeys(s);
        for (const t of r) ct(t, ht(t, s), n);
        const o = Object.getOwnPropertyDescriptors(s);
        Object.keys(o).filter((t => "prototype" !== t)).forEach((t => {
            Reflect.defineProperty(n, t, o[t]);
        }));
        return n;
    };
}

function Es(t, e, i) {
    if (At(e)) return t.parse(e, i);
    return e;
}

function Bs(t) {
    if (null != t.viewModel) return t.viewModel;
    return t;
}

function Is(t, e) {
    if ("element" === e) return t;
    switch (e) {
      case "controller":
        return si.for(t);

      case "view":
        throw new Error("AUR0750");

      case "view-model":
        return si.for(t).viewModel;

      default:
        {
            const i = Me.for(t, e);
            if (void 0 !== i) return i.viewModel;
            const s = si.for(t, {
                name: e
            });
            if (void 0 === s) throw new Error(`AUR0751:${e}`);
            return s.viewModel;
        }
    }
}

let Ts = class SetPropertyRenderer {
    render(t, e, i) {
        const s = Bs(e);
        if (void 0 !== s.$observers && void 0 !== s.$observers[i.to]) s.$observers[i.to].setValue(i.value, 2); else s[i.to] = i.value;
    }
};

Ts = ot([ Rs("re") ], Ts);

let Ds = class CustomElementRenderer {
    constructor(t, e) {
        this.r = t;
        this.p = e;
    }
    static get inject() {
        return [ Pi, Kt ];
    }
    render(t, e, i) {
        let s;
        let n;
        let r;
        let o;
        const l = i.res;
        const h = i.projections;
        const a = t.container;
        const c = nn(this.p, t, e, i, e, null == h ? void 0 : new AuSlotsInfo(Object.keys(h)));
        switch (typeof l) {
          case "string":
            s = a.find(si, l);
            if (null == s) throw new Error(`AUR0752:${l}@${t["name"]}`);
            break;

          default:
            s = l;
        }
        n = s.Type;
        r = c.invoke(n);
        c.registerResolver(n, new _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.InstanceProvider(s.key, r));
        o = Controller.$el(c, r, e, i, s);
        ss(e, s.key, o);
        const u = this.r.renderers;
        const f = i.props;
        const d = f.length;
        let m = 0;
        let v;
        while (d > m) {
            v = f[m];
            u[v.type].render(t, o, v);
            ++m;
        }
        t.addChild(o);
    }
};

Ds = ot([ Rs("ra") ], Ds);

let Ps = class CustomAttributeRenderer {
    constructor(t, e) {
        this.r = t;
        this.p = e;
    }
    static get inject() {
        return [ Pi, Kt ];
    }
    render(t, e, i) {
        let s = t.container;
        let n;
        switch (typeof i.res) {
          case "string":
            n = s.find(Me, i.res);
            if (null == n) throw new Error(`AUR0753:${i.res}@${t["name"]}`);
            break;

          default:
            n = i.res;
        }
        const r = rn(this.p, n, t, e, i, void 0, void 0);
        const o = Controller.$attr(t.container, r, e, n);
        ss(e, n.key, o);
        const l = this.r.renderers;
        const h = i.props;
        const a = h.length;
        let c = 0;
        let u;
        while (a > c) {
            u = h[c];
            l[u.type].render(t, o, u);
            ++c;
        }
        t.addChild(o);
    }
};

Ps = ot([ Rs("rb") ], Ps);

let Os = class TemplateControllerRenderer {
    constructor(t, e) {
        this.r = t;
        this.p = e;
    }
    static get inject() {
        return [ Pi, Kt ];
    }
    render(t, e, i) {
        var s;
        let n = t.container;
        let r;
        switch (typeof i.res) {
          case "string":
            r = n.find(Me, i.res);
            if (null == r) throw new Error(`AUR0754:${i.res}@${t["name"]}`);
            break;

          default:
            r = i.res;
        }
        const o = this.r.getViewFactory(i.def, n);
        const l = us(e);
        const h = rn(this.p, r, t, e, i, o, l);
        const a = Controller.$attr(t.container, h, e, r);
        ss(l, r.key, a);
        null === (s = h.link) || void 0 === s ? void 0 : s.call(h, t, a, e, i);
        const c = this.r.renderers;
        const u = i.props;
        const f = u.length;
        let d = 0;
        let m;
        while (f > d) {
            m = u[d];
            c[m.type].render(t, a, m);
            ++d;
        }
        t.addChild(a);
    }
};

Os = ot([ Rs("rc") ], Os);

let $s = class LetElementRenderer {
    constructor(t, e) {
        this.ep = t;
        this.oL = e;
    }
    render(t, e, i) {
        e.remove();
        const s = i.instructions;
        const n = i.toBindingContext;
        const r = t.container;
        const o = s.length;
        let l;
        let h;
        let a;
        let c = 0;
        while (o > c) {
            l = s[c];
            h = Es(this.ep, l.from, 8);
            a = new LetBinding(h, l.to, this.oL, r, n);
            t.addBinding(38962 === h.$kind ? js(a, h, r) : a);
            ++c;
        }
    }
};

$s.inject = [ _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.IExpressionParser, _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.IObserverLocator ];

$s = ot([ Rs("rd") ], $s);

let Ls = class CallBindingRenderer {
    constructor(t, e) {
        this.ep = t;
        this.oL = e;
    }
    render(t, e, i) {
        const s = Es(this.ep, i.from, 8 | 4);
        const n = new CallBinding(s, Bs(e), i.to, this.oL, t.container);
        t.addBinding(38962 === s.$kind ? js(n, s, t.container) : n);
    }
};

Ls.inject = [ _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.IExpressionParser, _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.IObserverLocator ];

Ls = ot([ Rs("rh") ], Ls);

let qs = class RefBindingRenderer {
    constructor(t) {
        this.ep = t;
    }
    render(t, e, i) {
        const s = Es(this.ep, i.from, 8);
        const n = new RefBinding(s, Is(e, i.to), t.container);
        t.addBinding(38962 === s.$kind ? js(n, s, t.container) : n);
    }
};

qs.inject = [ _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.IExpressionParser ];

qs = ot([ Rs("rj") ], qs);

let Ms = class InterpolationBindingRenderer {
    constructor(t, e, i) {
        this.ep = t;
        this.oL = e;
        this.p = i;
    }
    render(t, e, i) {
        const s = t.container;
        const n = Es(this.ep, i.from, 1);
        const r = new InterpolationBinding(this.oL, n, Bs(e), i.to, _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.BindingMode.toView, s, this.p.domWriteQueue);
        const o = r.partBindings;
        const l = o.length;
        let h = 0;
        let a;
        for (;l > h; ++h) {
            a = o[h];
            if (38962 === a.sourceExpression.$kind) o[h] = js(a, a.sourceExpression, s);
        }
        t.addBinding(r);
    }
};

Ms.inject = [ _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.IExpressionParser, _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.IObserverLocator, Kt ];

Ms = ot([ Rs("rf") ], Ms);

let Us = class PropertyBindingRenderer {
    constructor(t, e, i) {
        this.ep = t;
        this.oL = e;
        this.p = i;
    }
    render(t, e, i) {
        const s = Es(this.ep, i.from, 8);
        const n = new PropertyBinding(s, Bs(e), i.to, i.mode, this.oL, t.container, this.p.domWriteQueue);
        t.addBinding(38962 === s.$kind ? js(n, s, t.container) : n);
    }
};

Us.inject = [ _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.IExpressionParser, _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.IObserverLocator, Kt ];

Us = ot([ Rs("rg") ], Us);

let Fs = class IteratorBindingRenderer {
    constructor(t, e, i) {
        this.ep = t;
        this.oL = e;
        this.p = i;
    }
    render(t, e, i) {
        const s = Es(this.ep, i.from, 2);
        const n = new PropertyBinding(s, Bs(e), i.to, _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.BindingMode.toView, this.oL, t.container, this.p.domWriteQueue);
        t.addBinding(38962 === s.iterable.$kind ? js(n, s.iterable, t.container) : n);
    }
};

Fs.inject = [ _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.IExpressionParser, _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.IObserverLocator, Kt ];

Fs = ot([ Rs("rk") ], Fs);

let Vs = 0;

const _s = [];

function js(t, e, i) {
    while (e instanceof _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.BindingBehaviorExpression) {
        _s[Vs++] = e;
        e = e.expression;
    }
    while (Vs > 0) {
        const e = _s[--Vs];
        const s = i.get(e.behaviorKey);
        if (s instanceof _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.BindingBehaviorFactory) t = s.construct(t, e);
    }
    _s.length = 0;
    return t;
}

let Ns = class TextBindingRenderer {
    constructor(t, e, i) {
        this.ep = t;
        this.oL = e;
        this.p = i;
    }
    render(t, e, i) {
        const s = t.container;
        const n = e.nextSibling;
        const r = e.parentNode;
        const o = this.p.document;
        const l = Es(this.ep, i.from, 1);
        const h = l.parts;
        const a = l.expressions;
        const c = a.length;
        let u = 0;
        let f = h[0];
        let d;
        let m;
        if ("" !== f) r.insertBefore(o.createTextNode(f), n);
        for (;c > u; ++u) {
            m = a[u];
            d = new ContentBinding(m, r.insertBefore(o.createTextNode(""), n), s, this.oL, this.p, i.strict);
            t.addBinding(38962 === m.$kind ? js(d, m, s) : d);
            f = h[u + 1];
            if ("" !== f) r.insertBefore(o.createTextNode(f), n);
        }
        if ("AU-M" === e.nodeName) e.remove();
    }
};

Ns.inject = [ _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.IExpressionParser, _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.IObserverLocator, Kt ];

Ns = ot([ Rs("ha") ], Ns);

let Ws = class ListenerBindingRenderer {
    constructor(t, e, i) {
        this.ep = t;
        this.te = e;
        this.p = i;
    }
    render(t, e, i) {
        const s = Es(this.ep, i.from, 4);
        const n = new Listener(this.p, i.to, i.strategy, s, e, i.preventDefault, this.te, t.container);
        t.addBinding(38962 === s.$kind ? js(n, s, t.container) : n);
    }
};

Ws.inject = [ _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.IExpressionParser, ws, Kt ];

Ws = ot([ Rs("hb") ], Ws);

let Hs = class SetAttributeRenderer {
    render(t, e, i) {
        e.setAttribute(i.to, i.value);
    }
};

Hs = ot([ Rs("he") ], Hs);

let zs = class SetClassAttributeRenderer {
    render(t, e, i) {
        Qs(e.classList, i.value);
    }
};

zs = ot([ Rs("hf") ], zs);

let Gs = class SetStyleAttributeRenderer {
    render(t, e, i) {
        e.style.cssText += i.value;
    }
};

Gs = ot([ Rs("hg") ], Gs);

let Xs = class StylePropertyBindingRenderer {
    constructor(t, e, i) {
        this.ep = t;
        this.oL = e;
        this.p = i;
    }
    render(t, e, i) {
        const s = Es(this.ep, i.from, 8);
        const n = new PropertyBinding(s, e.style, i.to, _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.BindingMode.toView, this.oL, t.container, this.p.domWriteQueue);
        t.addBinding(38962 === s.$kind ? js(n, s, t.container) : n);
    }
};

Xs.inject = [ _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.IExpressionParser, _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.IObserverLocator, Kt ];

Xs = ot([ Rs("hd") ], Xs);

let Ks = class AttributeBindingRenderer {
    constructor(t, e) {
        this.ep = t;
        this.oL = e;
    }
    render(t, e, i) {
        const s = Es(this.ep, i.from, 8);
        const n = new AttributeBinding(s, e, i.attr, i.to, _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.BindingMode.toView, this.oL, t.container);
        t.addBinding(38962 === s.$kind ? js(n, s, t.container) : n);
    }
};

Ks.inject = [ _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.IExpressionParser, _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.IObserverLocator ];

Ks = ot([ Rs("hc") ], Ks);

let Ys = class SpreadRenderer {
    constructor(t, e) {
        this.ee = t;
        this.r = e;
    }
    static get inject() {
        return [ As, Pi ];
    }
    render(t, e, i) {
        const s = t.container;
        const n = s.get(Ki);
        const r = this.r.renderers;
        const o = t => {
            let e = t;
            let i = n;
            while (null != i && e > 0) {
                i = i.parent;
                --e;
            }
            if (null == i) throw new Error("No scope context for spread binding.");
            return i;
        };
        const l = i => {
            var s, n;
            const a = o(i);
            const c = Zs(a);
            const u = this.ee.compileSpread(a.controller.definition, null !== (n = null === (s = a.instruction) || void 0 === s ? void 0 : s.captures) && void 0 !== n ? n : _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.emptyArray, a.controller.container, e);
            let f;
            for (f of u) switch (f.type) {
              case "hs":
                l(i + 1);
                break;

              case "hp":
                r[f.instructions.type].render(c, si.for(e), f.instructions);
                break;

              default:
                r[f.type].render(c, e, f);
            }
            t.addBinding(c);
        };
        l(0);
    }
};

Ys = ot([ Rs("hs") ], Ys);

class SpreadBinding {
    constructor(t, e) {
        this.ie = t;
        this.se = e;
        this.interceptor = this;
        this.isBound = false;
        this.ctrl = e.controller;
        this.locator = this.ctrl.container;
    }
    get container() {
        return this.locator;
    }
    get definition() {
        return this.ctrl.definition;
    }
    get isStrictBinding() {
        return this.ctrl.isStrictBinding;
    }
    $bind(t, e) {
        var i;
        if (this.isBound) return;
        this.isBound = true;
        const s = this.$scope = null !== (i = this.se.controller.scope.parentScope) && void 0 !== i ? i : void 0;
        if (null == s) throw new Error("Invalid spreading. Context scope is null/undefined");
        this.ie.forEach((e => e.$bind(t, s)));
    }
    $unbind(t) {
        this.ie.forEach((e => e.$unbind(t)));
        this.isBound = false;
    }
    addBinding(t) {
        this.ie.push(t);
    }
    addChild(t) {
        if (1 !== t.vmKind) throw new Error("Spread binding does not support spreading custom attributes/template controllers");
        this.ctrl.addChild(t);
    }
}

function Qs(t, e) {
    const i = e.length;
    let s = 0;
    for (let n = 0; n < i; ++n) if (32 === e.charCodeAt(n)) {
        if (n !== s) t.add(e.slice(s, n));
        s = n + 1;
    } else if (n + 1 === i) t.add(e.slice(s));
}

const Zs = t => new SpreadBinding([], t);

const Js = "IController";

const tn = "IInstruction";

const en = "IRenderLocation";

const sn = "IAuSlotsInfo";

function nn(t, e, i, s, n, r) {
    const o = e.container.createChild();
    o.registerResolver(t.HTMLElement, o.registerResolver(t.Element, o.registerResolver(ns, new _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.InstanceProvider("ElementResolver", i))));
    o.registerResolver(Xi, new _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.InstanceProvider(Js, e));
    o.registerResolver(ks, new _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.InstanceProvider(tn, s));
    o.registerResolver(os, null == n ? on : new _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.InstanceProvider(en, n));
    o.registerResolver(Ai, ln);
    o.registerResolver(xs, null == r ? hn : new _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.InstanceProvider(sn, r));
    return o;
}

class ViewFactoryProvider {
    constructor(t) {
        this.f = t;
    }
    get $isResolver() {
        return true;
    }
    resolve() {
        const t = this.f;
        if (null === t) throw new Error("AUR7055");
        if (!At(t.name) || 0 === t.name.length) throw new Error("AUR0756");
        return t;
    }
}

function rn(t, e, i, s, n, r, o, l) {
    const h = i.container.createChild();
    h.registerResolver(t.HTMLElement, h.registerResolver(t.Element, h.registerResolver(ns, new _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.InstanceProvider("ElementResolver", s))));
    i = i instanceof Controller ? i : i.ctrl;
    h.registerResolver(Xi, new _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.InstanceProvider(Js, i));
    h.registerResolver(ks, new _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.InstanceProvider(tn, n));
    h.registerResolver(os, null == o ? on : new _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.InstanceProvider(en, o));
    h.registerResolver(Ai, null == r ? ln : new ViewFactoryProvider(r));
    h.registerResolver(xs, null == l ? hn : new _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.InstanceProvider(sn, l));
    return h.invoke(e.Type);
}

const on = new _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.InstanceProvider(en);

const ln = new ViewFactoryProvider(null);

const hn = new _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.InstanceProvider(sn, new AuSlotsInfo(_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.emptyArray));

var an;

(function(t) {
    t[t["None"] = 0] = "None";
    t[t["IgnoreAttr"] = 1] = "IgnoreAttr";
})(an || (an = {}));

function cn(t) {
    return function(e) {
        return mn.define(t, e);
    };
}

class BindingCommandDefinition {
    constructor(t, e, i, s, n) {
        this.Type = t;
        this.name = e;
        this.aliases = i;
        this.key = s;
        this.type = n;
    }
    static create(t, e) {
        let i;
        let s;
        if (At(t)) {
            i = t;
            s = {
                name: i
            };
        } else {
            i = t.name;
            s = t;
        }
        return new BindingCommandDefinition(e, (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.firstDefined)(dn(e, "name"), i), (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.mergeArrays)(dn(e, "aliases"), s.aliases, e.aliases), fn(i), (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.firstDefined)(dn(e, "type"), s.type, e.type, null));
    }
    register(t) {
        const {Type: e, key: i, aliases: s} = this;
        _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.Registration.singleton(i, e).register(t);
        _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.Registration.aliasTo(i, e).register(t);
        (0,_aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.registerAliases)(s, mn, i, t);
    }
}

const un = mt("binding-command");

const fn = t => `${un}:${t}`;

const dn = (t, e) => ht(dt(e), t);

const mn = Object.freeze({
    name: un,
    keyFrom: fn,
    define(t, e) {
        const i = BindingCommandDefinition.create(t, e);
        ct(un, i, i.Type);
        ct(un, i, i);
        vt(e, un);
        return i.Type;
    },
    getAnnotation: dn
});

let vn = class OneTimeBindingCommand {
    constructor(t, e) {
        this.type = 0;
        this.m = t;
        this.ep = e;
    }
    get name() {
        return "one-time";
    }
    build(t) {
        var e;
        const i = t.attr;
        let s = i.target;
        let n = t.attr.rawValue;
        if (null == t.bindable) s = null !== (e = this.m.map(t.node, s)) && void 0 !== e ? e : (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.camelCase)(s); else {
            if ("" === n && 1 === t.def.type) n = (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.camelCase)(s);
            s = t.bindable.property;
        }
        return new PropertyBindingInstruction(this.ep.parse(n, 8), s, _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.BindingMode.oneTime);
    }
};

vn.inject = [ Zt, _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.IExpressionParser ];

vn = ot([ cn("one-time") ], vn);

let pn = class ToViewBindingCommand {
    constructor(t, e) {
        this.type = 0;
        this.m = t;
        this.ep = e;
    }
    get name() {
        return "to-view";
    }
    build(t) {
        var e;
        const i = t.attr;
        let s = i.target;
        let n = t.attr.rawValue;
        if (null == t.bindable) s = null !== (e = this.m.map(t.node, s)) && void 0 !== e ? e : (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.camelCase)(s); else {
            if ("" === n && 1 === t.def.type) n = (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.camelCase)(s);
            s = t.bindable.property;
        }
        return new PropertyBindingInstruction(this.ep.parse(n, 8), s, _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.BindingMode.toView);
    }
};

pn.inject = [ Zt, _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.IExpressionParser ];

pn = ot([ cn("to-view") ], pn);

let gn = class FromViewBindingCommand {
    constructor(t, e) {
        this.type = 0;
        this.m = t;
        this.ep = e;
    }
    get name() {
        return "from-view";
    }
    build(t) {
        var e;
        const i = t.attr;
        let s = i.target;
        let n = i.rawValue;
        if (null == t.bindable) s = null !== (e = this.m.map(t.node, s)) && void 0 !== e ? e : (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.camelCase)(s); else {
            if ("" === n && 1 === t.def.type) n = (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.camelCase)(s);
            s = t.bindable.property;
        }
        return new PropertyBindingInstruction(this.ep.parse(n, 8), s, _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.BindingMode.fromView);
    }
};

gn.inject = [ Zt, _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.IExpressionParser ];

gn = ot([ cn("from-view") ], gn);

let wn = class TwoWayBindingCommand {
    constructor(t, e) {
        this.type = 0;
        this.m = t;
        this.ep = e;
    }
    get name() {
        return "two-way";
    }
    build(t) {
        var e;
        const i = t.attr;
        let s = i.target;
        let n = i.rawValue;
        if (null == t.bindable) s = null !== (e = this.m.map(t.node, s)) && void 0 !== e ? e : (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.camelCase)(s); else {
            if ("" === n && 1 === t.def.type) n = (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.camelCase)(s);
            s = t.bindable.property;
        }
        return new PropertyBindingInstruction(this.ep.parse(n, 8), s, _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.BindingMode.twoWay);
    }
};

wn.inject = [ Zt, _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.IExpressionParser ];

wn = ot([ cn("two-way") ], wn);

let bn = class DefaultBindingCommand {
    constructor(t, e) {
        this.type = 0;
        this.m = t;
        this.ep = e;
    }
    get name() {
        return "bind";
    }
    build(t) {
        var e;
        const i = t.attr;
        const s = t.bindable;
        let n;
        let r;
        let o = i.target;
        let l = i.rawValue;
        if (null == s) {
            r = this.m.isTwoWay(t.node, o) ? _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.BindingMode.twoWay : _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.BindingMode.toView;
            o = null !== (e = this.m.map(t.node, o)) && void 0 !== e ? e : (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.camelCase)(o);
        } else {
            if ("" === l && 1 === t.def.type) l = (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.camelCase)(o);
            n = t.def.defaultBindingMode;
            r = s.mode === _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.BindingMode.default || null == s.mode ? null == n || n === _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.BindingMode.default ? _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.BindingMode.toView : n : s.mode;
            o = s.property;
        }
        return new PropertyBindingInstruction(this.ep.parse(l, 8), o, r);
    }
};

bn.inject = [ Zt, _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.IExpressionParser ];

bn = ot([ cn("bind") ], bn);

let xn = class CallBindingCommand {
    constructor(t) {
        this.type = 0;
        this.ep = t;
    }
    get name() {
        return "call";
    }
    build(t) {
        const e = null === t.bindable ? (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.camelCase)(t.attr.target) : t.bindable.property;
        return new CallBindingInstruction(this.ep.parse(t.attr.rawValue, 8 | 4), e);
    }
};

xn.inject = [ _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.IExpressionParser ];

xn = ot([ cn("call") ], xn);

let yn = class ForBindingCommand {
    constructor(t) {
        this.type = 0;
        this.ep = t;
    }
    get name() {
        return "for";
    }
    build(t) {
        const e = null === t.bindable ? (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.camelCase)(t.attr.target) : t.bindable.property;
        return new IteratorBindingInstruction(this.ep.parse(t.attr.rawValue, 2), e);
    }
};

yn.inject = [ _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.IExpressionParser ];

yn = ot([ cn("for") ], yn);

let kn = class TriggerBindingCommand {
    constructor(t) {
        this.type = 1;
        this.ep = t;
    }
    get name() {
        return "trigger";
    }
    build(t) {
        return new ListenerBindingInstruction(this.ep.parse(t.attr.rawValue, 4), t.attr.target, true, _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.DelegationStrategy.none);
    }
};

kn.inject = [ _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.IExpressionParser ];

kn = ot([ cn("trigger") ], kn);

let Cn = class DelegateBindingCommand {
    constructor(t) {
        this.type = 1;
        this.ep = t;
    }
    get name() {
        return "delegate";
    }
    build(t) {
        return new ListenerBindingInstruction(this.ep.parse(t.attr.rawValue, 4), t.attr.target, false, _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.DelegationStrategy.bubbling);
    }
};

Cn.inject = [ _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.IExpressionParser ];

Cn = ot([ cn("delegate") ], Cn);

let An = class CaptureBindingCommand {
    constructor(t) {
        this.type = 1;
        this.ep = t;
    }
    get name() {
        return "capture";
    }
    build(t) {
        return new ListenerBindingInstruction(this.ep.parse(t.attr.rawValue, 4), t.attr.target, false, _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.DelegationStrategy.capturing);
    }
};

An.inject = [ _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.IExpressionParser ];

An = ot([ cn("capture") ], An);

let Sn = class AttrBindingCommand {
    constructor(t) {
        this.type = 1;
        this.ep = t;
    }
    get name() {
        return "attr";
    }
    build(t) {
        return new AttributeBindingInstruction(t.attr.target, this.ep.parse(t.attr.rawValue, 8), t.attr.target);
    }
};

Sn.inject = [ _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.IExpressionParser ];

Sn = ot([ cn("attr") ], Sn);

let Rn = class StyleBindingCommand {
    constructor(t) {
        this.type = 1;
        this.ep = t;
    }
    get name() {
        return "style";
    }
    build(t) {
        return new AttributeBindingInstruction("style", this.ep.parse(t.attr.rawValue, 8), t.attr.target);
    }
};

Rn.inject = [ _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.IExpressionParser ];

Rn = ot([ cn("style") ], Rn);

let En = class ClassBindingCommand {
    constructor(t) {
        this.type = 1;
        this.ep = t;
    }
    get name() {
        return "class";
    }
    build(t) {
        return new AttributeBindingInstruction("class", this.ep.parse(t.attr.rawValue, 8), t.attr.target);
    }
};

En.inject = [ _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.IExpressionParser ];

En = ot([ cn("class") ], En);

let Bn = class RefBindingCommand {
    constructor(t) {
        this.type = 1;
        this.ep = t;
    }
    get name() {
        return "ref";
    }
    build(t) {
        return new RefBindingInstruction(this.ep.parse(t.attr.rawValue, 8), t.attr.target);
    }
};

Bn.inject = [ _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.IExpressionParser ];

Bn = ot([ cn("ref") ], Bn);

let In = class SpreadBindingCommand {
    constructor() {
        this.type = 1;
    }
    get name() {
        return "...$attrs";
    }
    build(t) {
        return new SpreadBindingInstruction;
    }
};

In = ot([ cn("...$attrs") ], In);

const Tn = _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.DI.createInterface("ITemplateElementFactory", (t => t.singleton(TemplateElementFactory)));

const Dn = {};

class TemplateElementFactory {
    constructor(t) {
        this.p = t;
        this.ne = t.document.createElement("template");
    }
    createTemplate(t) {
        var e;
        if (At(t)) {
            let e = Dn[t];
            if (void 0 === e) {
                const i = this.ne;
                i.innerHTML = t;
                const s = i.content.firstElementChild;
                if (null == s || "TEMPLATE" !== s.nodeName || null != s.nextElementSibling) {
                    this.ne = this.p.document.createElement("template");
                    e = i;
                } else {
                    i.content.removeChild(s);
                    e = s;
                }
                Dn[t] = e;
            }
            return e.cloneNode(true);
        }
        if ("TEMPLATE" !== t.nodeName) {
            const e = this.p.document.createElement("template");
            e.content.appendChild(t);
            return e;
        }
        null === (e = t.parentNode) || void 0 === e ? void 0 : e.removeChild(t);
        return t.cloneNode(true);
    }
}

TemplateElementFactory.inject = [ Kt ];

const Pn = function(t) {
    function e(t, i, s) {
        _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.DI.inject(e)(t, i, s);
    }
    e.$isResolver = true;
    e.resolve = function(e, i) {
        if (i.root === i) return i.getAll(t, false);
        return i.has(t, false) ? i.getAll(t, false).concat(i.root.getAll(t, false)) : i.root.getAll(t, false);
    };
    return e;
};

class TemplateCompiler {
    constructor() {
        this.debug = false;
        this.resolveResources = true;
    }
    static register(t) {
        return _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.Registration.singleton(As, this).register(t);
    }
    compile(t, e, i) {
        var s, n, r, o;
        const l = CustomElementDefinition.getOrCreate(t);
        if (null === l.template || void 0 === l.template) return l;
        if (false === l.needsCompile) return l;
        null !== i && void 0 !== i ? i : i = Ln;
        const a = new CompilationContext(t, e, i, null, null, void 0);
        const c = At(l.template) || !t.enhance ? a.re.createTemplate(l.template) : l.template;
        const u = "TEMPLATE" === c.nodeName && null != c.content;
        const f = u ? c.content : c;
        const d = e.get(Pn(zn));
        const m = d.length;
        let v = 0;
        if (m > 0) while (m > v) {
            null === (n = (s = d[v]).compiling) || void 0 === n ? void 0 : n.call(s, c);
            ++v;
        }
        if (c.hasAttribute(Nn)) throw new Error("AUR0701");
        this.oe(f, a);
        this.le(f, a);
        return CustomElementDefinition.create({
            ...t,
            name: t.name || Qn(),
            dependencies: (null !== (r = t.dependencies) && void 0 !== r ? r : _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.emptyArray).concat(null !== (o = a.deps) && void 0 !== o ? o : _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.emptyArray),
            instructions: a.rows,
            surrogates: u ? this.he(c, a) : _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.emptyArray,
            template: c,
            hasSlots: a.hasSlot,
            needsCompile: false
        });
    }
    compileSpread(t, e, i, s) {
        var n;
        const r = new CompilationContext(t, i, Ln, null, null, void 0);
        const o = [];
        const l = r.ae(s.nodeName.toLowerCase());
        const h = r.ep;
        const a = e.length;
        let c = 0;
        let u;
        let f = null;
        let d;
        let m;
        let v;
        let p;
        let g;
        let w = null;
        let b;
        let x;
        let y;
        let k;
        for (;a > c; ++c) {
            u = e[c];
            y = u.target;
            k = u.rawValue;
            w = r.ce(u);
            if (null !== w && (1 & w.type) > 0) {
                Mn.node = s;
                Mn.attr = u;
                Mn.bindable = null;
                Mn.def = null;
                o.push(w.build(Mn));
                continue;
            }
            f = r.ue(y);
            if (null !== f) {
                if (f.isTemplateController) throw new Error(`AUR0703:${y}`);
                v = BindablesInfo.from(f, true);
                x = false === f.noMultiBindings && null === w && On(k);
                if (x) m = this.fe(s, k, f, r); else {
                    g = v.primary;
                    if (null === w) {
                        b = h.parse(k, 1);
                        m = [ null === b ? new SetPropertyInstruction(k, g.property) : new InterpolationInstruction(b, g.property) ];
                    } else {
                        Mn.node = s;
                        Mn.attr = u;
                        Mn.bindable = g;
                        Mn.def = f;
                        m = [ w.build(Mn) ];
                    }
                }
                (null !== d && void 0 !== d ? d : d = []).push(new HydrateAttributeInstruction(this.resolveResources ? f : f.name, null != f.aliases && f.aliases.includes(y) ? y : void 0, m));
                continue;
            }
            if (null === w) {
                b = h.parse(k, 1);
                if (null !== l) {
                    v = BindablesInfo.from(l, false);
                    p = v.attrs[y];
                    if (void 0 !== p) {
                        b = h.parse(k, 1);
                        o.push(new SpreadElementPropBindingInstruction(null == b ? new SetPropertyInstruction(k, p.property) : new InterpolationInstruction(b, p.property)));
                        continue;
                    }
                }
                if (null != b) o.push(new InterpolationInstruction(b, null !== (n = r.m.map(s, y)) && void 0 !== n ? n : (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.camelCase)(y))); else switch (y) {
                  case "class":
                    o.push(new SetClassAttributeInstruction(k));
                    break;

                  case "style":
                    o.push(new SetStyleAttributeInstruction(k));
                    break;

                  default:
                    o.push(new SetAttributeInstruction(k, y));
                }
            } else {
                if (null !== l) {
                    v = BindablesInfo.from(l, false);
                    p = v.attrs[y];
                    if (void 0 !== p) {
                        Mn.node = s;
                        Mn.attr = u;
                        Mn.bindable = p;
                        Mn.def = l;
                        o.push(new SpreadElementPropBindingInstruction(w.build(Mn)));
                        continue;
                    }
                }
                Mn.node = s;
                Mn.attr = u;
                Mn.bindable = null;
                Mn.def = null;
                o.push(w.build(Mn));
            }
        }
        $n();
        if (null != d) return d.concat(o);
        return o;
    }
    he(t, e) {
        var i;
        const s = [];
        const n = t.attributes;
        const r = e.ep;
        let o = n.length;
        let l = 0;
        let h;
        let a;
        let c;
        let u;
        let f = null;
        let d;
        let m;
        let v;
        let p;
        let g = null;
        let w;
        let b;
        let x;
        let y;
        for (;o > l; ++l) {
            h = n[l];
            a = h.name;
            c = h.value;
            u = e.de.parse(a, c);
            x = u.target;
            y = u.rawValue;
            if (Un[x]) throw new Error(`AUR0702:${a}`);
            g = e.ce(u);
            if (null !== g && (1 & g.type) > 0) {
                Mn.node = t;
                Mn.attr = u;
                Mn.bindable = null;
                Mn.def = null;
                s.push(g.build(Mn));
                continue;
            }
            f = e.ue(x);
            if (null !== f) {
                if (f.isTemplateController) throw new Error(`AUR0703:${x}`);
                v = BindablesInfo.from(f, true);
                b = false === f.noMultiBindings && null === g && On(y);
                if (b) m = this.fe(t, y, f, e); else {
                    p = v.primary;
                    if (null === g) {
                        w = r.parse(y, 1);
                        m = [ null === w ? new SetPropertyInstruction(y, p.property) : new InterpolationInstruction(w, p.property) ];
                    } else {
                        Mn.node = t;
                        Mn.attr = u;
                        Mn.bindable = p;
                        Mn.def = f;
                        m = [ g.build(Mn) ];
                    }
                }
                t.removeAttribute(a);
                --l;
                --o;
                (null !== d && void 0 !== d ? d : d = []).push(new HydrateAttributeInstruction(this.resolveResources ? f : f.name, null != f.aliases && f.aliases.includes(x) ? x : void 0, m));
                continue;
            }
            if (null === g) {
                w = r.parse(y, 1);
                if (null != w) {
                    t.removeAttribute(a);
                    --l;
                    --o;
                    s.push(new InterpolationInstruction(w, null !== (i = e.m.map(t, x)) && void 0 !== i ? i : (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.camelCase)(x)));
                } else switch (a) {
                  case "class":
                    s.push(new SetClassAttributeInstruction(y));
                    break;

                  case "style":
                    s.push(new SetStyleAttributeInstruction(y));
                    break;

                  default:
                    s.push(new SetAttributeInstruction(y, a));
                }
            } else {
                Mn.node = t;
                Mn.attr = u;
                Mn.bindable = null;
                Mn.def = null;
                s.push(g.build(Mn));
            }
        }
        $n();
        if (null != d) return d.concat(s);
        return s;
    }
    le(t, e) {
        switch (t.nodeType) {
          case 1:
            switch (t.nodeName) {
              case "LET":
                return this.me(t, e);

              default:
                return this.ve(t, e);
            }

          case 3:
            return this.pe(t, e);

          case 11:
            {
                let i = t.firstChild;
                while (null !== i) i = this.le(i, e);
                break;
            }
        }
        return t.nextSibling;
    }
    me(t, e) {
        const i = t.attributes;
        const s = i.length;
        const n = [];
        const r = e.ep;
        let o = false;
        let l = 0;
        let h;
        let a;
        let c;
        let u;
        let f;
        let d;
        let m;
        let v;
        for (;s > l; ++l) {
            h = i[l];
            c = h.name;
            u = h.value;
            if ("to-binding-context" === c) {
                o = true;
                continue;
            }
            a = e.de.parse(c, u);
            d = a.target;
            m = a.rawValue;
            f = e.ce(a);
            if (null !== f) switch (f.name) {
              case "to-view":
              case "bind":
                n.push(new LetBindingInstruction(r.parse(m, 8), (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.camelCase)(d)));
                continue;

              default:
                throw new Error(`AUR0704:${a.command}`);
            }
            v = r.parse(m, 1);
            n.push(new LetBindingInstruction(null === v ? new _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.PrimitiveLiteralExpression(m) : v, (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.camelCase)(d)));
        }
        e.rows.push([ new HydrateLetElementInstruction(n, o) ]);
        return this.ge(t).nextSibling;
    }
    ve(t, e) {
        var i, s, n, r, l, a;
        var c, u;
        const f = t.nextSibling;
        const d = (null !== (i = t.getAttribute("as-element")) && void 0 !== i ? i : t.nodeName).toLowerCase();
        const m = e.ae(d);
        const v = !!(null === m || void 0 === m ? void 0 : m.capture);
        const p = v ? [] : _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.emptyArray;
        const g = e.ep;
        const w = this.debug ? _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.noop : () => {
            t.removeAttribute(A);
            --k;
            --y;
        };
        let b = t.attributes;
        let x;
        let y = b.length;
        let k = 0;
        let C;
        let A;
        let R;
        let E;
        let B;
        let I;
        let T = null;
        let D = false;
        let P;
        let O;
        let $;
        let L;
        let q;
        let M;
        let U;
        let F = null;
        let V;
        let _;
        let j;
        let N;
        let W = true;
        let H = false;
        if ("slot" === d) e.root.hasSlot = true;
        if (null !== m) {
            W = null === (s = m.processContent) || void 0 === s ? void 0 : s.call(m.Type, t, e.p);
            b = t.attributes;
            y = b.length;
        }
        if (e.root.def.enhance && t.classList.contains("au")) throw new Error(`AUR0705`);
        for (;y > k; ++k) {
            C = b[k];
            A = C.name;
            R = C.value;
            switch (A) {
              case "as-element":
              case "containerless":
                w();
                if (!H) H = "containerless" === A;
                continue;
            }
            E = e.de.parse(A, R);
            F = e.ce(E);
            j = E.target;
            N = E.rawValue;
            if (v) {
                if (null != F && 1 & F.type) {
                    w();
                    p.push(E);
                    continue;
                }
                if ("au-slot" !== j) {
                    V = BindablesInfo.from(m, false);
                    if (null == V.attrs[j] && !(null === (n = e.ue(j)) || void 0 === n ? void 0 : n.isTemplateController)) {
                        w();
                        p.push(E);
                        continue;
                    }
                }
            }
            if (null !== F && 1 & F.type) {
                Mn.node = t;
                Mn.attr = E;
                Mn.bindable = null;
                Mn.def = null;
                (null !== B && void 0 !== B ? B : B = []).push(F.build(Mn));
                w();
                continue;
            }
            T = e.ue(j);
            if (null !== T) {
                V = BindablesInfo.from(T, true);
                D = false === T.noMultiBindings && null === F && On(R);
                if (D) $ = this.fe(t, R, T, e); else {
                    _ = V.primary;
                    if (null === F) {
                        M = g.parse(R, 1);
                        $ = [ null === M ? new SetPropertyInstruction(R, _.property) : new InterpolationInstruction(M, _.property) ];
                    } else {
                        Mn.node = t;
                        Mn.attr = E;
                        Mn.bindable = _;
                        Mn.def = T;
                        $ = [ F.build(Mn) ];
                    }
                }
                w();
                if (T.isTemplateController) (null !== L && void 0 !== L ? L : L = []).push(new HydrateTemplateController(qn, this.resolveResources ? T : T.name, void 0, $)); else (null !== O && void 0 !== O ? O : O = []).push(new HydrateAttributeInstruction(this.resolveResources ? T : T.name, null != T.aliases && T.aliases.includes(j) ? j : void 0, $));
                continue;
            }
            if (null === F) {
                if (null !== m) {
                    V = BindablesInfo.from(m, false);
                    P = V.attrs[j];
                    if (void 0 !== P) {
                        M = g.parse(N, 1);
                        (null !== I && void 0 !== I ? I : I = []).push(null == M ? new SetPropertyInstruction(N, P.property) : new InterpolationInstruction(M, P.property));
                        w();
                        continue;
                    }
                }
                M = g.parse(N, 1);
                if (null != M) {
                    w();
                    (null !== B && void 0 !== B ? B : B = []).push(new InterpolationInstruction(M, null !== (r = e.m.map(t, j)) && void 0 !== r ? r : (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.camelCase)(j)));
                }
                continue;
            }
            w();
            if (null !== m) {
                V = BindablesInfo.from(m, false);
                P = V.attrs[j];
                if (void 0 !== P) {
                    Mn.node = t;
                    Mn.attr = E;
                    Mn.bindable = P;
                    Mn.def = m;
                    (null !== I && void 0 !== I ? I : I = []).push(F.build(Mn));
                    continue;
                }
            }
            Mn.node = t;
            Mn.attr = E;
            Mn.bindable = null;
            Mn.def = null;
            (null !== B && void 0 !== B ? B : B = []).push(F.build(Mn));
        }
        $n();
        if (this.we(t) && null != B && B.length > 1) this.be(t, B);
        if (null !== m) {
            U = new HydrateElementInstruction(this.resolveResources ? m : m.name, void 0, null !== I && void 0 !== I ? I : _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.emptyArray, null, H, p);
            if ("au-slot" === d) {
                const i = t.getAttribute("name") || "default";
                const s = e.h("template");
                const n = e.xe();
                let r = t.firstChild;
                while (null !== r) {
                    if (1 === r.nodeType && r.hasAttribute("au-slot")) t.removeChild(r); else s.content.appendChild(r);
                    r = t.firstChild;
                }
                this.le(s.content, n);
                U.auSlot = {
                    name: i,
                    fallback: CustomElementDefinition.create({
                        name: Qn(),
                        template: s,
                        instructions: n.rows,
                        needsCompile: false
                    })
                };
                t = this.ye(t, e);
            }
        }
        if (null != B || null != U || null != O) {
            x = _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.emptyArray.concat(null !== U && void 0 !== U ? U : _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.emptyArray, null !== O && void 0 !== O ? O : _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.emptyArray, null !== B && void 0 !== B ? B : _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.emptyArray);
            this.ge(t);
        }
        let z;
        if (null != L) {
            y = L.length - 1;
            k = y;
            q = L[k];
            let i;
            this.ye(t, e);
            if ("TEMPLATE" === t.nodeName) i = t; else {
                i = e.h("template");
                i.content.appendChild(t);
            }
            const s = i;
            const n = e.xe(null == x ? [] : [ x ]);
            let r;
            let o;
            let h;
            let a;
            let u;
            let f;
            let v;
            let p;
            let g = 0, w = 0;
            let b = t.firstChild;
            if (false !== W) while (null !== b) if (1 === b.nodeType) {
                r = b;
                b = b.nextSibling;
                o = r.getAttribute("au-slot");
                if (null !== o) {
                    if (null === m) throw new Error(`AUR0706:${d}[${o}]`);
                    if ("" === o) o = "default";
                    r.removeAttribute("au-slot");
                    t.removeChild(r);
                    (null !== (l = (c = null !== a && void 0 !== a ? a : a = {})[o]) && void 0 !== l ? l : c[o] = []).push(r);
                }
            } else b = b.nextSibling;
            if (null != a) {
                h = {};
                for (o in a) {
                    i = e.h("template");
                    u = a[o];
                    for (g = 0, w = u.length; w > g; ++g) {
                        f = u[g];
                        if ("TEMPLATE" === f.nodeName) if (f.attributes.length > 0) i.content.appendChild(f); else i.content.appendChild(f.content); else i.content.appendChild(f);
                    }
                    p = e.xe();
                    this.le(i.content, p);
                    h[o] = CustomElementDefinition.create({
                        name: Qn(),
                        template: i,
                        instructions: p.rows,
                        needsCompile: false,
                        isStrictBinding: e.root.def.isStrictBinding
                    });
                }
                U.projections = h;
            }
            if (null !== m && m.containerless) this.ye(t, e);
            z = null === m || !m.containerless && !H && false !== W;
            if (z) if ("TEMPLATE" === t.nodeName) this.le(t.content, n); else {
                b = t.firstChild;
                while (null !== b) b = this.le(b, n);
            }
            q.def = CustomElementDefinition.create({
                name: Qn(),
                template: s,
                instructions: n.rows,
                needsCompile: false,
                isStrictBinding: e.root.def.isStrictBinding
            });
            while (k-- > 0) {
                q = L[k];
                i = e.h("template");
                v = e.h("au-m");
                v.classList.add("au");
                i.content.appendChild(v);
                q.def = CustomElementDefinition.create({
                    name: Qn(),
                    template: i,
                    needsCompile: false,
                    instructions: [ [ L[k + 1] ] ],
                    isStrictBinding: e.root.def.isStrictBinding
                });
            }
            e.rows.push([ q ]);
        } else {
            if (null != x) e.rows.push(x);
            let i = t.firstChild;
            let s;
            let n;
            let r = null;
            let o;
            let l;
            let h;
            let c;
            let f;
            let d = 0, v = 0;
            if (false !== W) while (null !== i) if (1 === i.nodeType) {
                s = i;
                i = i.nextSibling;
                n = s.getAttribute("au-slot");
                if (null !== n) {
                    if (null === m) throw new Error(`AUR0706:${t.nodeName}[${n}]`);
                    if ("" === n) n = "default";
                    t.removeChild(s);
                    s.removeAttribute("au-slot");
                    (null !== (a = (u = null !== o && void 0 !== o ? o : o = {})[n]) && void 0 !== a ? a : u[n] = []).push(s);
                }
            } else i = i.nextSibling;
            if (null != o) {
                r = {};
                for (n in o) {
                    c = e.h("template");
                    l = o[n];
                    for (d = 0, v = l.length; v > d; ++d) {
                        h = l[d];
                        if ("TEMPLATE" === h.nodeName) if (h.attributes.length > 0) c.content.appendChild(h); else c.content.appendChild(h.content); else c.content.appendChild(h);
                    }
                    f = e.xe();
                    this.le(c.content, f);
                    r[n] = CustomElementDefinition.create({
                        name: Qn(),
                        template: c,
                        instructions: f.rows,
                        needsCompile: false,
                        isStrictBinding: e.root.def.isStrictBinding
                    });
                }
                U.projections = r;
            }
            if (null !== m && m.containerless) this.ye(t, e);
            z = null === m || !m.containerless && !H && false !== W;
            if (z && t.childNodes.length > 0) {
                i = t.firstChild;
                while (null !== i) i = this.le(i, e);
            }
        }
        return f;
    }
    pe(t, e) {
        let i = "";
        let s = t;
        while (null !== s && 3 === s.nodeType) {
            i += s.textContent;
            s = s.nextSibling;
        }
        const n = e.ep.parse(i, 1);
        if (null === n) return s;
        const r = t.parentNode;
        r.insertBefore(this.ge(e.h("au-m")), t);
        e.rows.push([ new TextBindingInstruction(n, !!e.def.isStrictBinding) ]);
        t.textContent = "";
        s = t.nextSibling;
        while (null !== s && 3 === s.nodeType) {
            r.removeChild(s);
            s = t.nextSibling;
        }
        return t.nextSibling;
    }
    fe(t, e, i, s) {
        const n = BindablesInfo.from(i, true);
        const r = e.length;
        const o = [];
        let l;
        let h;
        let a = 0;
        let c = 0;
        let u;
        let f;
        let d;
        let m;
        for (let v = 0; v < r; ++v) {
            c = e.charCodeAt(v);
            if (92 === c) ++v; else if (58 === c) {
                l = e.slice(a, v);
                while (e.charCodeAt(++v) <= 32) ;
                a = v;
                for (;v < r; ++v) {
                    c = e.charCodeAt(v);
                    if (92 === c) ++v; else if (59 === c) {
                        h = e.slice(a, v);
                        break;
                    }
                }
                if (void 0 === h) h = e.slice(a);
                f = s.de.parse(l, h);
                d = s.ce(f);
                m = n.attrs[f.target];
                if (null == m) throw new Error(`AUR0707:${i.name}.${f.target}`);
                if (null === d) {
                    u = s.ep.parse(h, 1);
                    o.push(null === u ? new SetPropertyInstruction(h, m.property) : new InterpolationInstruction(u, m.property));
                } else {
                    Mn.node = t;
                    Mn.attr = f;
                    Mn.bindable = m;
                    Mn.def = i;
                    o.push(d.build(Mn));
                }
                while (v < r && e.charCodeAt(++v) <= 32) ;
                a = v;
                l = void 0;
                h = void 0;
            }
        }
        $n();
        return o;
    }
    oe(t, e) {
        const i = t;
        const s = (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.toArray)(i.querySelectorAll("template[as-custom-element]"));
        const n = s.length;
        if (0 === n) return;
        if (n === i.childElementCount) throw new Error("AUR0708");
        const r = new Set;
        for (const t of s) {
            if (t.parentNode !== i) throw new Error("AUR0709");
            const s = Wn(t, r);
            const n = class LocalTemplate {};
            const o = t.content;
            const l = (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.toArray)(o.querySelectorAll("bindable"));
            const h = Bt.for(n);
            const a = new Set;
            const c = new Set;
            for (const t of l) {
                if (t.parentNode !== o) throw new Error("AUR0710");
                const e = t.getAttribute("property");
                if (null === e) throw new Error("AUR0711");
                const i = t.getAttribute("attribute");
                if (null !== i && c.has(i) || a.has(e)) throw new Error(`AUR0712:${e}+${i}`); else {
                    if (null !== i) c.add(i);
                    a.add(e);
                }
                h.add({
                    property: e,
                    attribute: null !== i && void 0 !== i ? i : void 0,
                    mode: Hn(t)
                });
                const s = t.getAttributeNames().filter((t => !jn.includes(t)));
                if (s.length > 0) ;
                o.removeChild(t);
            }
            e.ke(si.define({
                name: s,
                template: t
            }, n));
            i.removeChild(t);
        }
    }
    we(t) {
        return "INPUT" === t.nodeName && 1 === Fn[t.type];
    }
    be(t, e) {
        switch (t.nodeName) {
          case "INPUT":
            {
                const t = e;
                let i;
                let s;
                let n = 0;
                let r;
                for (let e = 0; e < t.length && n < 3; e++) {
                    r = t[e];
                    switch (r.to) {
                      case "model":
                      case "value":
                      case "matcher":
                        i = e;
                        n++;
                        break;

                      case "checked":
                        s = e;
                        n++;
                        break;
                    }
                }
                if (void 0 !== s && void 0 !== i && s < i) [t[i], t[s]] = [ t[s], t[i] ];
            }
        }
    }
    ge(t) {
        t.classList.add("au");
        return t;
    }
    ye(t, e) {
        const i = t.parentNode;
        const s = e.h("au-m");
        this.ge(i.insertBefore(s, t));
        i.removeChild(t);
        return s;
    }
}

class CompilationContext {
    constructor(t, e, i, s, n, r) {
        this.hasSlot = false;
        this.Ce = wt();
        const o = null !== s;
        this.c = e;
        this.root = null === n ? this : n;
        this.def = t;
        this.ci = i;
        this.parent = s;
        this.re = o ? s.re : e.get(Tn);
        this.de = o ? s.de : e.get(Ut);
        this.ep = o ? s.ep : e.get(_aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.IExpressionParser);
        this.m = o ? s.m : e.get(Zt);
        this.Ft = o ? s.Ft : e.get(_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.ILogger);
        this.p = o ? s.p : e.get(Kt);
        this.localEls = o ? s.localEls : new Set;
        this.rows = null !== r && void 0 !== r ? r : [];
    }
    ke(t) {
        var e;
        var i;
        (null !== (e = (i = this.root).deps) && void 0 !== e ? e : i.deps = []).push(t);
        this.root.c.register(t);
    }
    h(t) {
        const e = this.p.document.createElement(t);
        if ("template" === t) this.p.document.adoptNode(e.content);
        return e;
    }
    ae(t) {
        return this.c.find(si, t);
    }
    ue(t) {
        return this.c.find(Me, t);
    }
    xe(t) {
        return new CompilationContext(this.def, this.c, this.ci, this, this.root, t);
    }
    ce(t) {
        if (this.root !== this) return this.root.ce(t);
        const e = t.command;
        if (null === e) return null;
        let i = this.Ce[e];
        if (void 0 === i) {
            i = this.c.create(mn, e);
            if (null === i) throw new Error(`AUR0713:${e}`);
            this.Ce[e] = i;
        }
        return i;
    }
}

function On(t) {
    const e = t.length;
    let i = 0;
    let s = 0;
    while (e > s) {
        i = t.charCodeAt(s);
        if (92 === i) ++s; else if (58 === i) return true; else if (36 === i && 123 === t.charCodeAt(s + 1)) return false;
        ++s;
    }
    return false;
}

function $n() {
    Mn.node = Mn.attr = Mn.bindable = Mn.def = null;
}

const Ln = {
    projections: null
};

const qn = {
    name: "unnamed"
};

const Mn = {
    node: null,
    attr: null,
    bindable: null,
    def: null
};

const Un = Object.assign(wt(), {
    id: true,
    name: true,
    "au-slot": true,
    "as-element": true
});

const Fn = {
    checkbox: 1,
    radio: 1
};

const Vn = new WeakMap;

class BindablesInfo {
    constructor(t, e, i) {
        this.attrs = t;
        this.bindables = e;
        this.primary = i;
    }
    static from(t, e) {
        let i = Vn.get(t);
        if (null == i) {
            const s = t.bindables;
            const n = wt();
            const r = e ? void 0 === t.defaultBindingMode ? _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.BindingMode.default : t.defaultBindingMode : _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.BindingMode.default;
            let o;
            let l;
            let h = false;
            let a;
            let c;
            for (l in s) {
                o = s[l];
                c = o.attribute;
                if (true === o.primary) {
                    if (h) throw new Error(`AUR0714:${t.name}`);
                    h = true;
                    a = o;
                } else if (!h && null == a) a = o;
                n[c] = BindableDefinition.create(l, t.Type, o);
            }
            if (null == o && e) a = n.value = BindableDefinition.create("value", t.Type, {
                mode: r
            });
            Vn.set(t, i = new BindablesInfo(n, s, a));
        }
        return i;
    }
}

var _n;

(function(t) {
    t["property"] = "property";
    t["attribute"] = "attribute";
    t["mode"] = "mode";
})(_n || (_n = {}));

const jn = Object.freeze([ "property", "attribute", "mode" ]);

const Nn = "as-custom-element";

function Wn(t, e) {
    const i = t.getAttribute(Nn);
    if (null === i || "" === i) throw new Error("AUR0715");
    if (e.has(i)) throw new Error(`AUR0716:${i}`); else {
        e.add(i);
        t.removeAttribute(Nn);
    }
    return i;
}

function Hn(t) {
    switch (t.getAttribute("mode")) {
      case "oneTime":
        return _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.BindingMode.oneTime;

      case "toView":
        return _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.BindingMode.toView;

      case "fromView":
        return _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.BindingMode.fromView;

      case "twoWay":
        return _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.BindingMode.twoWay;

      case "default":
      default:
        return _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.BindingMode.default;
    }
}

const zn = _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.DI.createInterface("ITemplateCompilerHooks");

const Gn = new WeakMap;

const Xn = mt("compiler-hooks");

const Kn = Object.freeze({
    name: Xn,
    define(t) {
        let e = Gn.get(t);
        if (void 0 === e) {
            Gn.set(t, e = new TemplateCompilerHooksDefinition(t));
            ct(Xn, e, t);
            vt(t, Xn);
        }
        return t;
    }
});

class TemplateCompilerHooksDefinition {
    constructor(t) {
        this.Type = t;
    }
    get name() {
        return "";
    }
    register(t) {
        t.register(_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.Registration.singleton(zn, this.Type));
    }
}

const Yn = t => {
    return void 0 === t ? e : e(t);
    function e(t) {
        return Kn.define(t);
    }
};

const Qn = si.generateName;

class BindingModeBehavior {
    constructor(t) {
        this.mode = t;
        this.Ae = new Map;
    }
    bind(t, e, i) {
        this.Ae.set(i, i.mode);
        i.mode = this.mode;
    }
    unbind(t, e, i) {
        i.mode = this.Ae.get(i);
        this.Ae.delete(i);
    }
}

class OneTimeBindingBehavior extends BindingModeBehavior {
    constructor() {
        super(_aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.BindingMode.oneTime);
    }
}

class ToViewBindingBehavior extends BindingModeBehavior {
    constructor() {
        super(_aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.BindingMode.toView);
    }
}

class FromViewBindingBehavior extends BindingModeBehavior {
    constructor() {
        super(_aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.BindingMode.fromView);
    }
}

class TwoWayBindingBehavior extends BindingModeBehavior {
    constructor() {
        super(_aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.BindingMode.twoWay);
    }
}

(0,_aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.bindingBehavior)("oneTime")(OneTimeBindingBehavior);

(0,_aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.bindingBehavior)("toView")(ToViewBindingBehavior);

(0,_aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.bindingBehavior)("fromView")(FromViewBindingBehavior);

(0,_aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.bindingBehavior)("twoWay")(TwoWayBindingBehavior);

const Zn = 200;

class DebounceBindingBehavior extends _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.BindingInterceptor {
    constructor(t, e) {
        super(t, e);
        this.opts = {
            delay: Zn
        };
        this.firstArg = null;
        this.task = null;
        this.taskQueue = t.locator.get(_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.IPlatform).taskQueue;
        if (e.args.length > 0) this.firstArg = e.args[0];
    }
    callSource(t) {
        this.queueTask((() => this.binding.callSource(t)));
        return;
    }
    handleChange(t, e, i) {
        if (null !== this.task) {
            this.task.cancel();
            this.task = null;
        }
        this.binding.handleChange(t, e, i);
    }
    updateSource(t, e) {
        this.queueTask((() => this.binding.updateSource(t, e)));
    }
    queueTask(t) {
        const e = this.task;
        this.task = this.taskQueue.queueTask((() => {
            this.task = null;
            return t();
        }), this.opts);
        null === e || void 0 === e ? void 0 : e.cancel();
    }
    $bind(t, e) {
        if (null !== this.firstArg) {
            const i = Number(this.firstArg.evaluate(t, e, this.locator, null));
            this.opts.delay = isNaN(i) ? Zn : i;
        }
        this.binding.$bind(t, e);
    }
    $unbind(t) {
        var e;
        null === (e = this.task) || void 0 === e ? void 0 : e.cancel();
        this.task = null;
        this.binding.$unbind(t);
    }
}

(0,_aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.bindingBehavior)("debounce")(DebounceBindingBehavior);

class SignalBindingBehavior {
    constructor(t) {
        this.Zt = new Map;
        this.Se = t;
    }
    bind(t, e, i, ...s) {
        if (!("handleChange" in i)) throw new Error("AUR0817");
        if (0 === s.length) throw new Error("AUR0818");
        this.Zt.set(i, s);
        let n;
        for (n of s) this.Se.addSignalListener(n, i);
    }
    unbind(t, e, i) {
        const s = this.Zt.get(i);
        this.Zt.delete(i);
        let n;
        for (n of s) this.Se.removeSignalListener(n, i);
    }
}

SignalBindingBehavior.inject = [ _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.ISignaler ];

(0,_aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.bindingBehavior)("signal")(SignalBindingBehavior);

const Jn = 200;

class ThrottleBindingBehavior extends _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.BindingInterceptor {
    constructor(t, e) {
        super(t, e);
        this.opts = {
            delay: Jn
        };
        this.firstArg = null;
        this.task = null;
        this.lastCall = 0;
        this.delay = 0;
        this.p = t.locator.get(_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.IPlatform);
        this.Re = this.p.taskQueue;
        if (e.args.length > 0) this.firstArg = e.args[0];
    }
    callSource(t) {
        this.Ee((() => this.binding.callSource(t)));
        return;
    }
    handleChange(t, e, i) {
        if (null !== this.task) {
            this.task.cancel();
            this.task = null;
            this.lastCall = this.p.performanceNow();
        }
        this.binding.handleChange(t, e, i);
    }
    updateSource(t, e) {
        this.Ee((() => this.binding.updateSource(t, e)));
    }
    Ee(t) {
        const e = this.opts;
        const i = this.p;
        const s = this.lastCall + e.delay - i.performanceNow();
        if (s > 0) {
            const n = this.task;
            e.delay = s;
            this.task = this.Re.queueTask((() => {
                this.lastCall = i.performanceNow();
                this.task = null;
                e.delay = this.delay;
                t();
            }), e);
            null === n || void 0 === n ? void 0 : n.cancel();
        } else {
            this.lastCall = i.performanceNow();
            t();
        }
    }
    $bind(t, e) {
        if (null !== this.firstArg) {
            const i = Number(this.firstArg.evaluate(t, e, this.locator, null));
            this.opts.delay = this.delay = isNaN(i) ? Jn : i;
        }
        this.binding.$bind(t, e);
    }
    $unbind(t) {
        var e;
        null === (e = this.task) || void 0 === e ? void 0 : e.cancel();
        this.task = null;
        super.$unbind(t);
    }
}

(0,_aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.bindingBehavior)("throttle")(ThrottleBindingBehavior);

class DataAttributeAccessor {
    constructor() {
        this.type = 2 | 4;
    }
    getValue(t, e) {
        return t.getAttribute(e);
    }
    setValue(t, e, i, s) {
        if (void 0 == t) i.removeAttribute(s); else i.setAttribute(s, t);
    }
}

const tr = new DataAttributeAccessor;

class AttrBindingBehavior {
    bind(t, e, i) {
        i.targetObserver = tr;
    }
    unbind(t, e, i) {
        return;
    }
}

(0,_aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.bindingBehavior)("attr")(AttrBindingBehavior);

function er(t) {
    const e = t.composedPath()[0];
    if (this.target !== e) return;
    return this.selfEventCallSource(t);
}

class SelfBindingBehavior {
    bind(t, e, i) {
        if (!i.callSource || !i.targetEvent) throw new Error("AUR0801");
        i.selfEventCallSource = i.callSource;
        i.callSource = er;
    }
    unbind(t, e, i) {
        i.callSource = i.selfEventCallSource;
        i.selfEventCallSource = null;
    }
}

(0,_aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.bindingBehavior)("self")(SelfBindingBehavior);

const ir = wt();

class AttributeNSAccessor {
    constructor(t) {
        this.ns = t;
        this.type = 2 | 4;
    }
    static forNs(t) {
        var e;
        return null !== (e = ir[t]) && void 0 !== e ? e : ir[t] = new AttributeNSAccessor(t);
    }
    getValue(t, e) {
        return t.getAttributeNS(this.ns, e);
    }
    setValue(t, e, i, s) {
        if (void 0 == t) i.removeAttributeNS(this.ns, s); else i.setAttributeNS(this.ns, s, t);
    }
}

function sr(t, e) {
    return t === e;
}

class CheckedObserver {
    constructor(t, e, i, s) {
        this.handler = i;
        this.type = 2 | 1 | 4;
        this.v = void 0;
        this.ov = void 0;
        this.Be = void 0;
        this.Ie = void 0;
        this.f = 0;
        this.o = t;
        this.oL = s;
    }
    getValue() {
        return this.v;
    }
    setValue(t, e) {
        const i = this.v;
        if (t === i) return;
        this.v = t;
        this.ov = i;
        this.f = e;
        this.Te();
        this.De();
        this.queue.add(this);
    }
    handleCollectionChange(t, e) {
        this.De();
    }
    handleChange(t, e, i) {
        this.De();
    }
    De() {
        const t = this.v;
        const e = this.o;
        const i = bt.call(e, "model") ? e.model : e.value;
        const s = "radio" === e.type;
        const n = void 0 !== e.matcher ? e.matcher : sr;
        if (s) e.checked = !!n(t, i); else if (true === t) e.checked = true; else {
            let s = false;
            if (t instanceof Array) s = -1 !== t.findIndex((t => !!n(t, i))); else if (t instanceof Set) {
                for (const e of t) if (n(e, i)) {
                    s = true;
                    break;
                }
            } else if (t instanceof Map) for (const e of t) {
                const t = e[0];
                const r = e[1];
                if (n(t, i) && true === r) {
                    s = true;
                    break;
                }
            }
            e.checked = s;
        }
    }
    handleEvent() {
        let t = this.ov = this.v;
        const e = this.o;
        const i = bt.call(e, "model") ? e.model : e.value;
        const s = e.checked;
        const n = void 0 !== e.matcher ? e.matcher : sr;
        if ("checkbox" === e.type) {
            if (t instanceof Array) {
                const e = t.findIndex((t => !!n(t, i)));
                if (s && -1 === e) t.push(i); else if (!s && -1 !== e) t.splice(e, 1);
                return;
            } else if (t instanceof Set) {
                const e = {};
                let r = e;
                for (const e of t) if (true === n(e, i)) {
                    r = e;
                    break;
                }
                if (s && r === e) t.add(i); else if (!s && r !== e) t.delete(r);
                return;
            } else if (t instanceof Map) {
                let e;
                for (const s of t) {
                    const t = s[0];
                    if (true === n(t, i)) {
                        e = t;
                        break;
                    }
                }
                t.set(e, s);
                return;
            }
            t = s;
        } else if (s) t = i; else return;
        this.v = t;
        this.queue.add(this);
    }
    start() {
        this.handler.subscribe(this.o, this);
        this.Te();
    }
    stop() {
        var t, e;
        this.handler.dispose();
        null === (t = this.Be) || void 0 === t ? void 0 : t.unsubscribe(this);
        this.Be = void 0;
        null === (e = this.Ie) || void 0 === e ? void 0 : e.unsubscribe(this);
    }
    subscribe(t) {
        if (this.subs.add(t) && 1 === this.subs.count) this.start();
    }
    unsubscribe(t) {
        if (this.subs.remove(t) && 0 === this.subs.count) this.stop();
    }
    flush() {
        nr = this.ov;
        this.ov = this.v;
        this.subs.notify(this.v, nr, this.f);
    }
    Te() {
        var t, e, i, s, n, r, o;
        const l = this.o;
        null === (n = null !== (t = this.Ie) && void 0 !== t ? t : this.Ie = null !== (i = null === (e = l.$observers) || void 0 === e ? void 0 : e.model) && void 0 !== i ? i : null === (s = l.$observers) || void 0 === s ? void 0 : s.value) || void 0 === n ? void 0 : n.subscribe(this);
        null === (r = this.Be) || void 0 === r ? void 0 : r.unsubscribe(this);
        this.Be = void 0;
        if ("checkbox" === l.type) null === (o = this.Be = gr(this.v, this.oL)) || void 0 === o ? void 0 : o.subscribe(this);
    }
}

(0,_aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.subscriberCollection)(CheckedObserver);

(0,_aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.withFlushQueue)(CheckedObserver);

let nr;

const rr = Object.prototype.hasOwnProperty;

const or = {
    childList: true,
    subtree: true,
    characterData: true
};

function lr(t, e) {
    return t === e;
}

class SelectValueObserver {
    constructor(t, e, i, s) {
        this.type = 2 | 1 | 4;
        this.v = void 0;
        this.ov = void 0;
        this.H = false;
        this.Pe = void 0;
        this.Oe = void 0;
        this.iO = false;
        this.o = t;
        this.oL = s;
        this.handler = i;
    }
    getValue() {
        return this.iO ? this.v : this.o.multiple ? hr(this.o.options) : this.o.value;
    }
    setValue(t, e) {
        this.ov = this.v;
        this.v = t;
        this.H = t !== this.ov;
        this.$e(t instanceof Array ? t : null);
        if (0 === (256 & e)) this.K();
    }
    K() {
        if (this.H) {
            this.H = false;
            this.syncOptions();
        }
    }
    handleCollectionChange() {
        this.syncOptions();
    }
    syncOptions() {
        var t;
        const e = this.v;
        const i = this.o;
        const s = Array.isArray(e);
        const n = null !== (t = i.matcher) && void 0 !== t ? t : lr;
        const r = i.options;
        let o = r.length;
        while (o-- > 0) {
            const t = r[o];
            const i = rr.call(t, "model") ? t.model : t.value;
            if (s) {
                t.selected = -1 !== e.findIndex((t => !!n(i, t)));
                continue;
            }
            t.selected = !!n(i, e);
        }
    }
    syncValue() {
        const t = this.o;
        const e = t.options;
        const i = e.length;
        const s = this.v;
        let n = 0;
        if (t.multiple) {
            if (!(s instanceof Array)) return true;
            let r;
            const o = t.matcher || lr;
            const l = [];
            while (n < i) {
                r = e[n];
                if (r.selected) l.push(rr.call(r, "model") ? r.model : r.value);
                ++n;
            }
            let h;
            n = 0;
            while (n < s.length) {
                h = s[n];
                if (-1 === l.findIndex((t => !!o(h, t)))) s.splice(n, 1); else ++n;
            }
            n = 0;
            while (n < l.length) {
                h = l[n];
                if (-1 === s.findIndex((t => !!o(h, t)))) s.push(h);
                ++n;
            }
            return false;
        }
        let r = null;
        let o;
        while (n < i) {
            o = e[n];
            if (o.selected) {
                r = rr.call(o, "model") ? o.model : o.value;
                break;
            }
            ++n;
        }
        this.ov = this.v;
        this.v = r;
        return true;
    }
    Le() {
        (this.Oe = new this.o.ownerDocument.defaultView.MutationObserver(this.qe.bind(this))).observe(this.o, or);
        this.$e(this.v instanceof Array ? this.v : null);
        this.iO = true;
    }
    Me() {
        var t;
        this.Oe.disconnect();
        null === (t = this.Pe) || void 0 === t ? void 0 : t.unsubscribe(this);
        this.Oe = this.Pe = void 0;
        this.iO = false;
    }
    $e(t) {
        var e;
        null === (e = this.Pe) || void 0 === e ? void 0 : e.unsubscribe(this);
        this.Pe = void 0;
        if (null != t) {
            if (!this.o.multiple) throw new Error("AUR0654");
            (this.Pe = this.oL.getArrayObserver(t)).subscribe(this);
        }
    }
    handleEvent() {
        const t = this.syncValue();
        if (t) this.queue.add(this);
    }
    qe(t) {
        this.syncOptions();
        const e = this.syncValue();
        if (e) this.queue.add(this);
    }
    subscribe(t) {
        if (this.subs.add(t) && 1 === this.subs.count) {
            this.handler.subscribe(this.o, this);
            this.Le();
        }
    }
    unsubscribe(t) {
        if (this.subs.remove(t) && 0 === this.subs.count) {
            this.handler.dispose();
            this.Me();
        }
    }
    flush() {
        ar = this.ov;
        this.ov = this.v;
        this.subs.notify(this.v, ar, 0);
    }
}

(0,_aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.subscriberCollection)(SelectValueObserver);

(0,_aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.withFlushQueue)(SelectValueObserver);

function hr(t) {
    const e = [];
    if (0 === t.length) return e;
    const i = t.length;
    let s = 0;
    let n;
    while (i > s) {
        n = t[s];
        if (n.selected) e[e.length] = rr.call(n, "model") ? n.model : n.value;
        ++s;
    }
    return e;
}

let ar;

const cr = "--";

class StyleAttributeAccessor {
    constructor(t) {
        this.obj = t;
        this.type = 2 | 4;
        this.value = "";
        this.ov = "";
        this.styles = {};
        this.version = 0;
        this.H = false;
    }
    getValue() {
        return this.obj.style.cssText;
    }
    setValue(t, e) {
        this.value = t;
        this.H = t !== this.ov;
        if (0 === (256 & e)) this.K();
    }
    Ue(t) {
        const e = [];
        const i = /url\([^)]+$/;
        let s = 0;
        let n = "";
        let r;
        let o;
        let l;
        let h;
        while (s < t.length) {
            r = t.indexOf(";", s);
            if (-1 === r) r = t.length;
            n += t.substring(s, r);
            s = r + 1;
            if (i.test(n)) {
                n += ";";
                continue;
            }
            o = n.indexOf(":");
            l = n.substring(0, o).trim();
            h = n.substring(o + 1).trim();
            e.push([ l, h ]);
            n = "";
        }
        return e;
    }
    Fe(t) {
        let e;
        let i;
        const s = [];
        for (i in t) {
            e = t[i];
            if (null == e) continue;
            if (At(e)) {
                if (i.startsWith(cr)) {
                    s.push([ i, e ]);
                    continue;
                }
                s.push([ (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.kebabCase)(i), e ]);
                continue;
            }
            s.push(...this.Ve(e));
        }
        return s;
    }
    _e(t) {
        const e = t.length;
        if (e > 0) {
            const i = [];
            let s = 0;
            for (;e > s; ++s) i.push(...this.Ve(t[s]));
            return i;
        }
        return _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.emptyArray;
    }
    Ve(t) {
        if (At(t)) return this.Ue(t);
        if (t instanceof Array) return this._e(t);
        if (t instanceof Object) return this.Fe(t);
        return _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.emptyArray;
    }
    K() {
        if (this.H) {
            this.H = false;
            const t = this.value;
            const e = this.styles;
            const i = this.Ve(t);
            let s;
            let n = this.version;
            this.ov = t;
            let r;
            let o;
            let l;
            let h = 0;
            const a = i.length;
            for (;h < a; ++h) {
                r = i[h];
                o = r[0];
                l = r[1];
                this.setProperty(o, l);
                e[o] = n;
            }
            this.styles = e;
            this.version += 1;
            if (0 === n) return;
            n -= 1;
            for (s in e) {
                if (!Object.prototype.hasOwnProperty.call(e, s) || e[s] !== n) continue;
                this.obj.style.removeProperty(s);
            }
        }
    }
    setProperty(t, e) {
        let i = "";
        if (null != e && Ct(e.indexOf) && e.includes("!important")) {
            i = "important";
            e = e.replace("!important", "");
        }
        this.obj.style.setProperty(t, e, i);
    }
    bind(t) {
        this.value = this.ov = this.obj.style.cssText;
    }
}

class ValueAttributeObserver {
    constructor(t, e, i) {
        this.handler = i;
        this.type = 2 | 1 | 4;
        this.v = "";
        this.ov = "";
        this.H = false;
        this.o = t;
        this.k = e;
    }
    getValue() {
        return this.v;
    }
    setValue(t, e) {
        if (Object.is(t, this.v)) return;
        this.ov = this.v;
        this.v = t;
        this.H = true;
        if (!this.handler.config.readonly && 0 === (256 & e)) this.K(e);
    }
    K(t) {
        var e;
        if (this.H) {
            this.H = false;
            this.o[this.k] = null !== (e = this.v) && void 0 !== e ? e : this.handler.config.default;
            if (0 === (2 & t)) this.queue.add(this);
        }
    }
    handleEvent() {
        this.ov = this.v;
        this.v = this.o[this.k];
        if (this.ov !== this.v) {
            this.H = false;
            this.queue.add(this);
        }
    }
    subscribe(t) {
        if (this.subs.add(t) && 1 === this.subs.count) {
            this.handler.subscribe(this.o, this);
            this.v = this.ov = this.o[this.k];
        }
    }
    unsubscribe(t) {
        if (this.subs.remove(t) && 0 === this.subs.count) this.handler.dispose();
    }
    flush() {
        ur = this.ov;
        this.ov = this.v;
        this.subs.notify(this.v, ur, 0);
    }
}

(0,_aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.subscriberCollection)(ValueAttributeObserver);

(0,_aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.withFlushQueue)(ValueAttributeObserver);

let ur;

const fr = "http://www.w3.org/1999/xlink";

const dr = "http://www.w3.org/XML/1998/namespace";

const mr = "http://www.w3.org/2000/xmlns/";

const vr = Object.assign(wt(), {
    "xlink:actuate": [ "actuate", fr ],
    "xlink:arcrole": [ "arcrole", fr ],
    "xlink:href": [ "href", fr ],
    "xlink:role": [ "role", fr ],
    "xlink:show": [ "show", fr ],
    "xlink:title": [ "title", fr ],
    "xlink:type": [ "type", fr ],
    "xml:lang": [ "lang", dr ],
    "xml:space": [ "space", dr ],
    xmlns: [ "xmlns", mr ],
    "xmlns:xlink": [ "xlink", mr ]
});

const pr = new _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.PropertyAccessor;

pr.type = 2 | 4;

class NodeObserverConfig {
    constructor(t) {
        var e;
        this.type = null !== (e = t.type) && void 0 !== e ? e : ValueAttributeObserver;
        this.events = t.events;
        this.readonly = t.readonly;
        this.default = t.default;
    }
}

class NodeObserverLocator {
    constructor(t, e, i, s) {
        this.locator = t;
        this.platform = e;
        this.dirtyChecker = i;
        this.svgAnalyzer = s;
        this.allowDirtyCheck = true;
        this.je = wt();
        this.Ne = wt();
        this.We = wt();
        this.He = wt();
        const n = [ "change", "input" ];
        const r = {
            events: n,
            default: ""
        };
        this.useConfig({
            INPUT: {
                value: r,
                valueAsNumber: {
                    events: n,
                    default: 0
                },
                checked: {
                    type: CheckedObserver,
                    events: n
                },
                files: {
                    events: n,
                    readonly: true
                }
            },
            SELECT: {
                value: {
                    type: SelectValueObserver,
                    events: [ "change" ],
                    default: ""
                }
            },
            TEXTAREA: {
                value: r
            }
        });
        const o = {
            events: [ "change", "input", "blur", "keyup", "paste" ],
            default: ""
        };
        const l = {
            events: [ "scroll" ],
            default: 0
        };
        this.useConfigGlobal({
            scrollTop: l,
            scrollLeft: l,
            textContent: o,
            innerHTML: o
        });
        this.overrideAccessorGlobal("css", "style", "class");
        this.overrideAccessor({
            INPUT: [ "value", "checked", "model" ],
            SELECT: [ "value" ],
            TEXTAREA: [ "value" ]
        });
    }
    static register(t) {
        _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.Registration.aliasTo(_aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.INodeObserverLocator, NodeObserverLocator).register(t);
        _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.Registration.singleton(_aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.INodeObserverLocator, NodeObserverLocator).register(t);
    }
    handles(t, e) {
        return t instanceof this.platform.Node;
    }
    useConfig(t, e, i) {
        var s, n;
        const r = this.je;
        let o;
        if (At(t)) {
            o = null !== (s = r[t]) && void 0 !== s ? s : r[t] = wt();
            if (null == o[e]) o[e] = new NodeObserverConfig(i); else wr(t, e);
        } else for (const i in t) {
            o = null !== (n = r[i]) && void 0 !== n ? n : r[i] = wt();
            const s = t[i];
            for (e in s) if (null == o[e]) o[e] = new NodeObserverConfig(s[e]); else wr(i, e);
        }
    }
    useConfigGlobal(t, e) {
        const i = this.Ne;
        if ("object" === typeof t) for (const e in t) if (null == i[e]) i[e] = new NodeObserverConfig(t[e]); else wr("*", e); else if (null == i[t]) i[t] = new NodeObserverConfig(e); else wr("*", t);
    }
    getAccessor(t, e, i) {
        var s;
        if (e in this.He || e in (null !== (s = this.We[t.tagName]) && void 0 !== s ? s : _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.emptyObject)) return this.getObserver(t, e, i);
        switch (e) {
          case "src":
          case "href":
          case "role":
            return tr;

          default:
            {
                const i = vr[e];
                if (void 0 !== i) return AttributeNSAccessor.forNs(i[1]);
                if (yt(t, e, this.svgAnalyzer)) return tr;
                return pr;
            }
        }
    }
    overrideAccessor(t, e) {
        var i, s;
        var n, r;
        let o;
        if (At(t)) {
            o = null !== (i = (n = this.We)[t]) && void 0 !== i ? i : n[t] = wt();
            o[e] = true;
        } else for (const e in t) for (const i of t[e]) {
            o = null !== (s = (r = this.We)[e]) && void 0 !== s ? s : r[e] = wt();
            o[i] = true;
        }
    }
    overrideAccessorGlobal(...t) {
        for (const e of t) this.He[e] = true;
    }
    getObserver(t, e, i) {
        var s, n;
        switch (e) {
          case "role":
            return tr;

          case "class":
            return new ClassAttributeAccessor(t);

          case "css":
          case "style":
            return new StyleAttributeAccessor(t);
        }
        const r = null !== (n = null === (s = this.je[t.tagName]) || void 0 === s ? void 0 : s[e]) && void 0 !== n ? n : this.Ne[e];
        if (null != r) return new r.type(t, e, new EventSubscriber(r), i, this.locator);
        const o = vr[e];
        if (void 0 !== o) return AttributeNSAccessor.forNs(o[1]);
        if (yt(t, e, this.svgAnalyzer)) return tr;
        if (e in t.constructor.prototype) {
            if (this.allowDirtyCheck) return this.dirtyChecker.createProperty(t, e);
            throw new Error(`AUR0652:${String(e)}`);
        } else return new _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.SetterObserver(t, e);
    }
}

NodeObserverLocator.inject = [ _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.IServiceLocator, Kt, _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.IDirtyChecker, Yt ];

function gr(t, e) {
    if (t instanceof Array) return e.getArrayObserver(t);
    if (t instanceof Map) return e.getMapObserver(t);
    if (t instanceof Set) return e.getSetObserver(t);
}

function wr(t, e) {
    throw new Error(`AUR0653:${String(e)}@${t}`);
}

class UpdateTriggerBindingBehavior {
    constructor(t) {
        this.oL = t;
    }
    bind(t, e, i, ...s) {
        if (0 === s.length) throw new Error(`AUR0802`);
        if (i.mode !== _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.BindingMode.twoWay && i.mode !== _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.BindingMode.fromView) throw new Error("AUR0803");
        const n = this.oL.getObserver(i.target, i.targetProperty);
        if (!n.handler) throw new Error("AUR0804");
        i.targetObserver = n;
        const r = n.handler;
        n.originalHandler = r;
        n.handler = new EventSubscriber(new NodeObserverConfig({
            default: r.config.default,
            events: s,
            readonly: r.config.readonly
        }));
    }
    unbind(t, e, i) {
        i.targetObserver.handler.dispose();
        i.targetObserver.handler = i.targetObserver.originalHandler;
        i.targetObserver.originalHandler = null;
    }
}

UpdateTriggerBindingBehavior.inject = [ _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.IObserverLocator ];

(0,_aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.bindingBehavior)("updateTrigger")(UpdateTriggerBindingBehavior);

class Focus {
    constructor(t, e) {
        this.ze = t;
        this.p = e;
        this.Ge = false;
    }
    binding() {
        this.valueChanged();
    }
    valueChanged() {
        if (this.$controller.isActive) this.Xe(); else this.Ge = true;
    }
    attached() {
        if (this.Ge) {
            this.Ge = false;
            this.Xe();
        }
        this.ze.addEventListener("focus", this);
        this.ze.addEventListener("blur", this);
    }
    afterDetachChildren() {
        const t = this.ze;
        t.removeEventListener("focus", this);
        t.removeEventListener("blur", this);
    }
    handleEvent(t) {
        if ("focus" === t.type) this.value = true; else if (!this.Ke) this.value = false;
    }
    Xe() {
        const t = this.ze;
        const e = this.Ke;
        const i = this.value;
        if (i && !e) t.focus(); else if (!i && e) t.blur();
    }
    get Ke() {
        return this.ze === this.p.document.activeElement;
    }
}

Focus.inject = [ ns, Kt ];

ot([ St({
    mode: _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.BindingMode.twoWay
}) ], Focus.prototype, "value", void 0);

Pe("focus")(Focus);

let br = class Show {
    constructor(t, e, i) {
        this.el = t;
        this.p = e;
        this.Ye = false;
        this.Qe = null;
        this.$val = "";
        this.$prio = "";
        this.update = () => {
            this.Qe = null;
            if (Boolean(this.value) !== this.Ze) if (this.Ze === this.Je) {
                this.Ze = !this.Je;
                this.$val = this.el.style.getPropertyValue("display");
                this.$prio = this.el.style.getPropertyPriority("display");
                this.el.style.setProperty("display", "none", "important");
            } else {
                this.Ze = this.Je;
                this.el.style.setProperty("display", this.$val, this.$prio);
                if ("" === this.el.getAttribute("style")) this.el.removeAttribute("style");
            }
        };
        this.Ze = this.Je = "hide" !== i.alias;
    }
    binding() {
        this.Ye = true;
        this.update();
    }
    detaching() {
        var t;
        this.Ye = false;
        null === (t = this.Qe) || void 0 === t ? void 0 : t.cancel();
        this.Qe = null;
    }
    valueChanged() {
        if (this.Ye && null === this.Qe) this.Qe = this.p.domWriteQueue.queueTask(this.update);
    }
};

ot([ St ], br.prototype, "value", void 0);

br = ot([ lt(0, ns), lt(1, Kt), lt(2, ks) ], br);

(0,_aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.alias)("hide")(br);

Pe("show")(br);

class Portal {
    constructor(t, e, i) {
        this.id = (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.nextId)("au$component");
        this.strict = false;
        this.p = i;
        this.ti = i.document.createElement("div");
        this.view = t.create();
        cs(this.view.nodes, e);
    }
    attaching(t, e, i) {
        if (null == this.callbackContext) this.callbackContext = this.$controller.scope.bindingContext;
        const s = this.ti = this.ei();
        this.view.setHost(s);
        return this.ii(t, s, i);
    }
    detaching(t, e, i) {
        return this.si(t, this.ti, i);
    }
    targetChanged() {
        const {$controller: t} = this;
        if (!t.isActive) return;
        const e = this.ti;
        const i = this.ti = this.ei();
        if (e === i) return;
        this.view.setHost(i);
        const s = (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.onResolve)(this.si(null, i, t.flags), (() => this.ii(null, i, t.flags)));
        if (s instanceof Promise) s.catch((t => {
            throw t;
        }));
    }
    ii(t, e, i) {
        const {activating: s, callbackContext: n, view: r} = this;
        r.setHost(e);
        return (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.onResolve)(null === s || void 0 === s ? void 0 : s.call(n, e, r), (() => this.ni(t, e, i)));
    }
    ni(t, e, i) {
        const {$controller: s, view: n} = this;
        if (null === t) n.nodes.appendTo(e); else return (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.onResolve)(n.activate(null !== t && void 0 !== t ? t : n, s, i, s.scope), (() => this.ri(e)));
        return this.ri(e);
    }
    ri(t) {
        const {activated: e, callbackContext: i, view: s} = this;
        return null === e || void 0 === e ? void 0 : e.call(i, t, s);
    }
    si(t, e, i) {
        const {deactivating: s, callbackContext: n, view: r} = this;
        return (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.onResolve)(null === s || void 0 === s ? void 0 : s.call(n, e, r), (() => this.oi(t, e, i)));
    }
    oi(t, e, i) {
        const {$controller: s, view: n} = this;
        if (null === t) n.nodes.remove(); else return (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.onResolve)(n.deactivate(t, s, i), (() => this.li(e)));
        return this.li(e);
    }
    li(t) {
        const {deactivated: e, callbackContext: i, view: s} = this;
        return null === e || void 0 === e ? void 0 : e.call(i, t, s);
    }
    ei() {
        const t = this.p;
        const e = t.document;
        let i = this.target;
        let s = this.renderContext;
        if ("" === i) {
            if (this.strict) throw new Error("AUR0811");
            return e.body;
        }
        if (At(i)) {
            let n = e;
            if (At(s)) s = e.querySelector(s);
            if (s instanceof t.Node) n = s;
            i = n.querySelector(i);
        }
        if (i instanceof t.Node) return i;
        if (null == i) {
            if (this.strict) throw new Error("AUR0812");
            return e.body;
        }
        return i;
    }
    dispose() {
        this.view.dispose();
        this.view = void 0;
        this.callbackContext = null;
    }
    accept(t) {
        var e;
        if (true === (null === (e = this.view) || void 0 === e ? void 0 : e.accept(t))) return true;
    }
}

Portal.inject = [ Ai, os, Kt ];

ot([ St({
    primary: true
}) ], Portal.prototype, "target", void 0);

ot([ St({
    callback: "targetChanged"
}) ], Portal.prototype, "renderContext", void 0);

ot([ St() ], Portal.prototype, "strict", void 0);

ot([ St() ], Portal.prototype, "deactivating", void 0);

ot([ St() ], Portal.prototype, "activating", void 0);

ot([ St() ], Portal.prototype, "deactivated", void 0);

ot([ St() ], Portal.prototype, "activated", void 0);

ot([ St() ], Portal.prototype, "callbackContext", void 0);

Oe("portal")(Portal);

class FlagsTemplateController {
    constructor(t, e, i) {
        this.fs = i;
        this.id = (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.nextId)("au$component");
        this.view = t.create().setLocation(e);
    }
    attaching(t, e, i) {
        const {$controller: s} = this;
        return this.view.activate(t, s, i | this.fs, s.scope);
    }
    detaching(t, e, i) {
        return this.view.deactivate(t, this.$controller, i);
    }
    dispose() {
        this.view.dispose();
        this.view = void 0;
    }
    accept(t) {
        var e;
        if (true === (null === (e = this.view) || void 0 === e ? void 0 : e.accept(t))) return true;
    }
}

class FrequentMutations extends FlagsTemplateController {
    constructor(t, e) {
        super(t, e, 512);
    }
}

FrequentMutations.inject = [ Ai, os ];

class ObserveShallow extends FlagsTemplateController {
    constructor(t, e) {
        super(t, e, 128);
    }
}

ObserveShallow.inject = [ Ai, os ];

Oe("frequent-mutations")(FrequentMutations);

Oe("observe-shallow")(ObserveShallow);

class If {
    constructor(t, e, i) {
        this.ifFactory = t;
        this.location = e;
        this.work = i;
        this.id = (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.nextId)("au$component");
        this.elseFactory = void 0;
        this.elseView = void 0;
        this.ifView = void 0;
        this.view = void 0;
        this.value = false;
        this.cache = true;
        this.pending = void 0;
        this.hi = false;
        this.ai = 0;
    }
    attaching(t, e, i) {
        let s;
        const n = this.$controller;
        const r = this.ai++;
        const o = () => !this.hi && this.ai === r + 1;
        return (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.onResolve)(this.pending, (() => {
            var e;
            if (!o()) return;
            this.pending = void 0;
            if (this.value) s = this.view = this.ifView = this.cache && null != this.ifView ? this.ifView : this.ifFactory.create(); else s = this.view = this.elseView = this.cache && null != this.elseView ? this.elseView : null === (e = this.elseFactory) || void 0 === e ? void 0 : e.create();
            if (null == s) return;
            s.setLocation(this.location);
            this.pending = (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.onResolve)(s.activate(t, n, i, n.scope), (() => {
                if (o()) this.pending = void 0;
            }));
        }));
    }
    detaching(t, e, i) {
        this.hi = true;
        return (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.onResolve)(this.pending, (() => {
            var e;
            this.hi = false;
            this.pending = void 0;
            void (null === (e = this.view) || void 0 === e ? void 0 : e.deactivate(t, this.$controller, i));
        }));
    }
    valueChanged(t, e, i) {
        if (!this.$controller.isActive) return;
        t = !!t;
        e = !!e;
        if (t === e) return;
        this.work.start();
        const s = this.view;
        const n = this.$controller;
        const r = this.ai++;
        const o = () => !this.hi && this.ai === r + 1;
        let l;
        return (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.onResolve)((0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.onResolve)(this.pending, (() => this.pending = (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.onResolve)(null === s || void 0 === s ? void 0 : s.deactivate(s, n, i), (() => {
            var e;
            if (!o()) return;
            if (t) l = this.view = this.ifView = this.cache && null != this.ifView ? this.ifView : this.ifFactory.create(); else l = this.view = this.elseView = this.cache && null != this.elseView ? this.elseView : null === (e = this.elseFactory) || void 0 === e ? void 0 : e.create();
            if (null == l) return;
            l.setLocation(this.location);
            return (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.onResolve)(l.activate(l, n, i, n.scope), (() => {
                if (o()) this.pending = void 0;
            }));
        })))), (() => this.work.finish()));
    }
    dispose() {
        var t, e;
        null === (t = this.ifView) || void 0 === t ? void 0 : t.dispose();
        null === (e = this.elseView) || void 0 === e ? void 0 : e.dispose();
        this.ifView = this.elseView = this.view = void 0;
    }
    accept(t) {
        var e;
        if (true === (null === (e = this.view) || void 0 === e ? void 0 : e.accept(t))) return true;
    }
}

If.inject = [ Ai, os, es ];

ot([ St ], If.prototype, "value", void 0);

ot([ St({
    set: t => "" === t || !!t && "false" !== t
}) ], If.prototype, "cache", void 0);

Oe("if")(If);

class Else {
    constructor(t) {
        this.factory = t;
        this.id = (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.nextId)("au$component");
    }
    link(t, e, i, s) {
        const n = t.children;
        const r = n[n.length - 1];
        if (r instanceof If) r.elseFactory = this.factory; else if (r.viewModel instanceof If) r.viewModel.elseFactory = this.factory; else throw new Error("AUR0810");
    }
}

Else.inject = [ Ai ];

Oe({
    name: "else"
})(Else);

function xr(t) {
    t.dispose();
}

const yr = [ 38962, 36913 ];

class Repeat {
    constructor(t, e, i) {
        this.l = t;
        this.ui = e;
        this.f = i;
        this.id = (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.nextId)("au$component");
        this.views = [];
        this.key = void 0;
        this.fi = void 0;
        this.di = false;
        this.mi = false;
        this.vi = null;
        this.pi = void 0;
        this.gi = false;
    }
    binding(t, e, i) {
        const s = this.ui.bindings;
        const n = s.length;
        let r;
        let o;
        let l = 0;
        for (;n > l; ++l) {
            r = s[l];
            if (r.target === this && "items" === r.targetProperty) {
                o = this.forOf = r.sourceExpression;
                this.wi = r;
                let t = o.iterable;
                while (null != t && yr.includes(t.$kind)) {
                    t = t.expression;
                    this.di = true;
                }
                this.vi = t;
                break;
            }
        }
        this.bi(i);
        const h = o.declaration;
        if (!(this.gi = 90137 === h.$kind || 106521 === h.$kind)) this.local = h.evaluate(i, this.$controller.scope, r.locator, null);
    }
    attaching(t, e, i) {
        this.xi(i);
        return this.yi(t, i);
    }
    detaching(t, e, i) {
        this.bi(i);
        return this.ki(t, i);
    }
    itemsChanged(t) {
        const {$controller: e} = this;
        if (!e.isActive) return;
        t |= e.flags;
        this.bi(t);
        this.xi(t);
        const i = (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.onResolve)(this.ki(null, t), (() => this.yi(null, t)));
        if (i instanceof Promise) i.catch((t => {
            throw t;
        }));
    }
    handleCollectionChange(t, e) {
        const {$controller: i} = this;
        if (!i.isActive) return;
        if (this.di) {
            if (this.mi) return;
            this.mi = true;
            this.items = this.forOf.iterable.evaluate(e, i.scope, this.wi.locator, null);
            this.mi = false;
            return;
        }
        e |= i.flags;
        this.xi(e);
        if (void 0 === t) {
            const t = (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.onResolve)(this.ki(null, e), (() => this.yi(null, e)));
            if (t instanceof Promise) t.catch((t => {
                throw t;
            }));
        } else {
            const i = this.views.length;
            (0,_aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.applyMutationsToIndices)(t);
            if (t.deletedItems.length > 0) {
                t.deletedItems.sort(_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.compareNumber);
                const s = (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.onResolve)(this.Ci(t, e), (() => this.Ai(i, t, e)));
                if (s instanceof Promise) s.catch((t => {
                    throw t;
                }));
            } else this.Ai(i, t, e);
        }
    }
    bi(t) {
        var e;
        const i = this.$controller.scope;
        let s = this.Si;
        let n = this.di;
        if (n) {
            s = this.Si = null !== (e = this.vi.evaluate(t, i, this.wi.locator, null)) && void 0 !== e ? e : null;
            n = this.di = !Object.is(this.items, s);
        }
        const r = this.fi;
        if (4 & t) {
            if (void 0 !== r) r.unsubscribe(this);
        } else if (this.$controller.isActive) {
            const t = this.fi = (0,_aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.getCollectionObserver)(n ? s : this.items);
            if (r !== t && r) r.unsubscribe(this);
            if (t) t.subscribe(this);
        }
    }
    xi(t) {
        const e = this.items;
        if (e instanceof Array) {
            this.pi = e;
            return;
        }
        const i = this.forOf;
        if (void 0 === i) return;
        const s = [];
        this.forOf.iterate(t, e, ((t, e, i) => {
            s[e] = i;
        }));
        this.pi = s;
    }
    yi(t, e) {
        let i;
        let s;
        let n;
        let r;
        const {$controller: o, f: l, local: h, l: a, items: c} = this;
        const u = o.scope;
        const f = this.forOf;
        const d = f.count(e, c);
        const m = this.views = Array(d);
        f.iterate(e, c, ((c, v, p) => {
            n = m[v] = l.create().setLocation(a);
            n.nodes.unlink();
            if (this.gi) f.declaration.assign(e, r = _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.Scope.fromParent(u, _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.BindingContext.create()), this.wi.locator, p); else r = _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.Scope.fromParent(u, _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.BindingContext.create(h, p));
            Rr(r.overrideContext, v, d);
            s = n.activate(null !== t && void 0 !== t ? t : n, o, e, r);
            if (s instanceof Promise) (null !== i && void 0 !== i ? i : i = []).push(s);
        }));
        if (void 0 !== i) return 1 === i.length ? i[0] : Promise.all(i);
    }
    ki(t, e) {
        let i;
        let s;
        let n;
        let r = 0;
        const {views: o, $controller: l} = this;
        const h = o.length;
        for (;h > r; ++r) {
            n = o[r];
            n.release();
            s = n.deactivate(null !== t && void 0 !== t ? t : n, l, e);
            if (s instanceof Promise) (null !== i && void 0 !== i ? i : i = []).push(s);
        }
        if (void 0 !== i) return 1 === i.length ? i[0] : Promise.all(i);
    }
    Ci(t, e) {
        let i;
        let s;
        let n;
        const {$controller: r, views: o} = this;
        const l = t.deletedItems;
        const h = l.length;
        let a = 0;
        for (;h > a; ++a) {
            n = o[l[a]];
            n.release();
            s = n.deactivate(n, r, e);
            if (s instanceof Promise) (null !== i && void 0 !== i ? i : i = []).push(s);
        }
        a = 0;
        let c = 0;
        for (;h > a; ++a) {
            c = l[a] - a;
            o.splice(c, 1);
        }
        if (void 0 !== i) return 1 === i.length ? i[0] : Promise.all(i);
    }
    Ai(t, e, i) {
        var s;
        let n;
        let r;
        let o;
        let l;
        let h = 0;
        const {$controller: a, f: c, local: u, pi: f, l: d, views: m} = this;
        const v = e.length;
        for (;v > h; ++h) if (-2 === e[h]) {
            o = c.create();
            m.splice(h, 0, o);
        }
        if (m.length !== v) throw new Error(`AUR0814:${m.length}!=${v}`);
        const p = a.scope;
        const g = e.length;
        (0,_aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.synchronizeIndices)(m, e);
        const w = Sr(e);
        const b = w.length;
        let x;
        let y = b - 1;
        h = g - 1;
        for (;h >= 0; --h) {
            o = m[h];
            x = m[h + 1];
            o.nodes.link(null !== (s = null === x || void 0 === x ? void 0 : x.nodes) && void 0 !== s ? s : d);
            if (-2 === e[h]) {
                if (this.gi) this.forOf.declaration.assign(i, l = _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.Scope.fromParent(p, _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.BindingContext.create()), this.wi.locator, f[h]); else l = _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.Scope.fromParent(p, _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.BindingContext.create(u, f[h]));
                Rr(l.overrideContext, h, g);
                o.setLocation(d);
                r = o.activate(o, a, i, l);
                if (r instanceof Promise) (null !== n && void 0 !== n ? n : n = []).push(r);
            } else if (y < 0 || 1 === b || h !== w[y]) {
                Rr(o.scope.overrideContext, h, g);
                o.nodes.insertBefore(o.location);
            } else {
                if (t !== g) Rr(o.scope.overrideContext, h, g);
                --y;
            }
        }
        if (void 0 !== n) return 1 === n.length ? n[0] : Promise.all(n);
    }
    dispose() {
        this.views.forEach(xr);
        this.views = void 0;
    }
    accept(t) {
        const {views: e} = this;
        if (void 0 !== e) for (let i = 0, s = e.length; i < s; ++i) if (true === e[i].accept(t)) return true;
    }
}

Repeat.inject = [ os, Xi, Ai ];

ot([ St ], Repeat.prototype, "items", void 0);

Oe("repeat")(Repeat);

let kr = 16;

let Cr = new Int32Array(kr);

let Ar = new Int32Array(kr);

function Sr(t) {
    const e = t.length;
    if (e > kr) {
        kr = e;
        Cr = new Int32Array(e);
        Ar = new Int32Array(e);
    }
    let i = 0;
    let s = 0;
    let n = 0;
    let r = 0;
    let o = 0;
    let l = 0;
    let h = 0;
    let a = 0;
    for (;r < e; r++) {
        s = t[r];
        if (-2 !== s) {
            o = Cr[i];
            n = t[o];
            if (-2 !== n && n < s) {
                Ar[r] = o;
                Cr[++i] = r;
                continue;
            }
            l = 0;
            h = i;
            while (l < h) {
                a = l + h >> 1;
                n = t[Cr[a]];
                if (-2 !== n && n < s) l = a + 1; else h = a;
            }
            n = t[Cr[l]];
            if (s < n || -2 === n) {
                if (l > 0) Ar[r] = Cr[l - 1];
                Cr[l] = r;
            }
        }
    }
    r = ++i;
    const c = new Int32Array(r);
    s = Cr[i - 1];
    while (i-- > 0) {
        c[i] = s;
        s = Ar[s];
    }
    while (r-- > 0) Cr[r] = 0;
    return c;
}

function Rr(t, e, i) {
    const s = 0 === e;
    const n = e === i - 1;
    const r = e % 2 === 0;
    t.$index = e;
    t.$first = s;
    t.$last = n;
    t.$middle = !s && !n;
    t.$even = r;
    t.$odd = !r;
    t.$length = i;
}

class With {
    constructor(t, e) {
        this.id = (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.nextId)("au$component");
        this.id = (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.nextId)("au$component");
        this.view = t.create().setLocation(e);
    }
    valueChanged(t, e, i) {
        const s = this.$controller;
        const n = this.view.bindings;
        let r;
        let o = 0, l = 0;
        if (s.isActive && null != n) {
            r = _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.Scope.fromParent(s.scope, void 0 === t ? {} : t);
            for (l = n.length; l > o; ++o) n[o].$bind(2, r);
        }
    }
    attaching(t, e, i) {
        const {$controller: s, value: n} = this;
        const r = _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.Scope.fromParent(s.scope, void 0 === n ? {} : n);
        return this.view.activate(t, s, i, r);
    }
    detaching(t, e, i) {
        return this.view.deactivate(t, this.$controller, i);
    }
    dispose() {
        this.view.dispose();
        this.view = void 0;
    }
    accept(t) {
        var e;
        if (true === (null === (e = this.view) || void 0 === e ? void 0 : e.accept(t))) return true;
    }
}

With.inject = [ Ai, os ];

ot([ St ], With.prototype, "value", void 0);

Oe("with")(With);

let Er = class Switch {
    constructor(t, e) {
        this.f = t;
        this.l = e;
        this.id = (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.nextId)("au$component");
        this.cases = [];
        this.activeCases = [];
        this.promise = void 0;
    }
    link(t, e, i, s) {
        this.view = this.f.create(this.$controller).setLocation(this.l);
    }
    attaching(t, e, i) {
        const s = this.view;
        const n = this.$controller;
        this.queue((() => s.activate(t, n, i, n.scope)));
        this.queue((() => this.swap(t, i, this.value)));
        return this.promise;
    }
    detaching(t, e, i) {
        this.queue((() => {
            const e = this.view;
            return e.deactivate(t, this.$controller, i);
        }));
        return this.promise;
    }
    dispose() {
        var t;
        null === (t = this.view) || void 0 === t ? void 0 : t.dispose();
        this.view = void 0;
    }
    valueChanged(t, e, i) {
        if (!this.$controller.isActive) return;
        this.queue((() => this.swap(null, i, this.value)));
    }
    caseChanged(t, e) {
        this.queue((() => this.Ri(t, e)));
    }
    Ri(t, e) {
        const i = t.isMatch(this.value, e);
        const s = this.activeCases;
        const n = s.length;
        if (!i) {
            if (n > 0 && s[0].id === t.id) return this.Ei(null, e);
            return;
        }
        if (n > 0 && s[0].id < t.id) return;
        const r = [];
        let o = t.fallThrough;
        if (!o) r.push(t); else {
            const e = this.cases;
            const i = e.indexOf(t);
            for (let t = i, s = e.length; t < s && o; t++) {
                const i = e[t];
                r.push(i);
                o = i.fallThrough;
            }
        }
        return (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.onResolve)(this.Ei(null, e, r), (() => {
            this.activeCases = r;
            return this.Bi(null, e);
        }));
    }
    swap(t, e, i) {
        const s = [];
        let n = false;
        for (const t of this.cases) {
            if (n || t.isMatch(i, e)) {
                s.push(t);
                n = t.fallThrough;
            }
            if (s.length > 0 && !n) break;
        }
        const r = this.defaultCase;
        if (0 === s.length && void 0 !== r) s.push(r);
        return (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.onResolve)(this.activeCases.length > 0 ? this.Ei(t, e, s) : void 0, (() => {
            this.activeCases = s;
            if (0 === s.length) return;
            return this.Bi(t, e);
        }));
    }
    Bi(t, e) {
        const i = this.$controller;
        if (!i.isActive) return;
        const s = this.activeCases;
        const n = s.length;
        if (0 === n) return;
        const r = i.scope;
        if (1 === n) return s[0].activate(t, e, r);
        return (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.resolveAll)(...s.map((i => i.activate(t, e, r))));
    }
    Ei(t, e, i = []) {
        const s = this.activeCases;
        const n = s.length;
        if (0 === n) return;
        if (1 === n) {
            const n = s[0];
            if (!i.includes(n)) {
                s.length = 0;
                return n.deactivate(t, e);
            }
            return;
        }
        return (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.onResolve)((0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.resolveAll)(...s.reduce(((s, n) => {
            if (!i.includes(n)) s.push(n.deactivate(t, e));
            return s;
        }), [])), (() => {
            s.length = 0;
        }));
    }
    queue(t) {
        const e = this.promise;
        let i;
        i = this.promise = (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.onResolve)((0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.onResolve)(e, t), (() => {
            if (this.promise === i) this.promise = void 0;
        }));
    }
    accept(t) {
        if (true === this.$controller.accept(t)) return true;
        if (this.activeCases.some((e => e.accept(t)))) return true;
    }
};

ot([ St ], Er.prototype, "value", void 0);

Er = ot([ Oe("switch"), lt(0, Ai), lt(1, os) ], Er);

let Br = class Case {
    constructor(t, e, i, s) {
        this.Ii = e;
        this.id = (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.nextId)("au$component");
        this.fallThrough = false;
        this.Ti = s.config.level <= 1;
        this.Ft = s.scopeTo(`${this.constructor.name}-#${this.id}`);
        this.view = t.create().setLocation(i);
    }
    link(t, e, i, s) {
        const n = t.parent;
        const r = null === n || void 0 === n ? void 0 : n.viewModel;
        if (r instanceof Er) {
            this.$switch = r;
            this.linkToSwitch(r);
        } else throw new Error("AUR0815");
    }
    detaching(t, e, i) {
        return this.deactivate(t, i);
    }
    isMatch(t, e) {
        this.Ft.debug("isMatch()");
        const i = this.value;
        if (Array.isArray(i)) {
            if (void 0 === this.fi) this.fi = this.Di(e, i);
            return i.includes(t);
        }
        return i === t;
    }
    valueChanged(t, e, i) {
        var s;
        if (Array.isArray(t)) {
            null === (s = this.fi) || void 0 === s ? void 0 : s.unsubscribe(this);
            this.fi = this.Di(i, t);
        } else if (void 0 !== this.fi) this.fi.unsubscribe(this);
        this.$switch.caseChanged(this, i);
    }
    handleCollectionChange(t, e) {
        this.$switch.caseChanged(this, e);
    }
    activate(t, e, i) {
        const s = this.view;
        if (s.isActive) return;
        return s.activate(null !== t && void 0 !== t ? t : s, this.$controller, e, i);
    }
    deactivate(t, e) {
        const i = this.view;
        if (!i.isActive) return;
        return i.deactivate(null !== t && void 0 !== t ? t : i, this.$controller, e);
    }
    dispose() {
        var t, e;
        null === (t = this.fi) || void 0 === t ? void 0 : t.unsubscribe(this);
        null === (e = this.view) || void 0 === e ? void 0 : e.dispose();
        this.view = void 0;
    }
    linkToSwitch(t) {
        t.cases.push(this);
    }
    Di(t, e) {
        const i = this.Ii.getArrayObserver(e);
        i.subscribe(this);
        return i;
    }
    accept(t) {
        var e;
        if (true === this.$controller.accept(t)) return true;
        return null === (e = this.view) || void 0 === e ? void 0 : e.accept(t);
    }
};

Br.inject = [ Ai, _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.IObserverLocator, os, _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.ILogger ];

ot([ St ], Br.prototype, "value", void 0);

ot([ St({
    set: t => {
        switch (t) {
          case "true":
            return true;

          case "false":
            return false;

          default:
            return !!t;
        }
    },
    mode: _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.BindingMode.oneTime
}) ], Br.prototype, "fallThrough", void 0);

Br = ot([ Oe("case") ], Br);

let Ir = class DefaultCase extends Br {
    linkToSwitch(t) {
        if (void 0 !== t.defaultCase) throw new Error("AUR0816");
        t.defaultCase = this;
    }
};

Ir = ot([ Oe("default-case") ], Ir);

let Tr = class PromiseTemplateController {
    constructor(t, e, i, s) {
        this.f = t;
        this.l = e;
        this.p = i;
        this.id = (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.nextId)("au$component");
        this.preSettledTask = null;
        this.postSettledTask = null;
        this.logger = s.scopeTo("promise.resolve");
    }
    link(t, e, i, s) {
        this.view = this.f.create(this.$controller).setLocation(this.l);
    }
    attaching(t, e, i) {
        const s = this.view;
        const n = this.$controller;
        return (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.onResolve)(s.activate(t, n, i, this.viewScope = _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.Scope.fromParent(n.scope, {})), (() => this.swap(t, i)));
    }
    valueChanged(t, e, i) {
        if (!this.$controller.isActive) return;
        this.swap(null, i);
    }
    swap(t, e) {
        var i, s;
        const n = this.value;
        if (!(n instanceof Promise)) {
            this.logger.warn(`The value '${String(n)}' is not a promise. No change will be done.`);
            return;
        }
        const r = this.p.domWriteQueue;
        const o = this.fulfilled;
        const l = this.rejected;
        const h = this.pending;
        const a = this.viewScope;
        let c;
        const u = {
            reusable: false
        };
        const f = () => {
            void (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.resolveAll)(c = (this.preSettledTask = r.queueTask((() => (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.resolveAll)(null === o || void 0 === o ? void 0 : o.deactivate(t, e), null === l || void 0 === l ? void 0 : l.deactivate(t, e), null === h || void 0 === h ? void 0 : h.activate(t, e, a))), u)).result, n.then((i => {
                if (this.value !== n) return;
                const s = () => {
                    this.postSettlePromise = (this.postSettledTask = r.queueTask((() => (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.resolveAll)(null === h || void 0 === h ? void 0 : h.deactivate(t, e), null === l || void 0 === l ? void 0 : l.deactivate(t, e), null === o || void 0 === o ? void 0 : o.activate(t, e, a, i))), u)).result;
                };
                if (1 === this.preSettledTask.status) void c.then(s); else {
                    this.preSettledTask.cancel();
                    s();
                }
            }), (i => {
                if (this.value !== n) return;
                const s = () => {
                    this.postSettlePromise = (this.postSettledTask = r.queueTask((() => (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.resolveAll)(null === h || void 0 === h ? void 0 : h.deactivate(t, e), null === o || void 0 === o ? void 0 : o.deactivate(t, e), null === l || void 0 === l ? void 0 : l.activate(t, e, a, i))), u)).result;
                };
                if (1 === this.preSettledTask.status) void c.then(s); else {
                    this.preSettledTask.cancel();
                    s();
                }
            })));
        };
        if (1 === (null === (i = this.postSettledTask) || void 0 === i ? void 0 : i.status)) void this.postSettlePromise.then(f); else {
            null === (s = this.postSettledTask) || void 0 === s ? void 0 : s.cancel();
            f();
        }
    }
    detaching(t, e, i) {
        var s, n;
        null === (s = this.preSettledTask) || void 0 === s ? void 0 : s.cancel();
        null === (n = this.postSettledTask) || void 0 === n ? void 0 : n.cancel();
        this.preSettledTask = this.postSettledTask = null;
        return this.view.deactivate(t, this.$controller, i);
    }
    dispose() {
        var t;
        null === (t = this.view) || void 0 === t ? void 0 : t.dispose();
        this.view = void 0;
    }
};

ot([ St ], Tr.prototype, "value", void 0);

Tr = ot([ Oe("promise"), lt(0, Ai), lt(1, os), lt(2, Kt), lt(3, _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.ILogger) ], Tr);

let Dr = class PendingTemplateController {
    constructor(t, e) {
        this.factory = t;
        this.id = (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.nextId)("au$component");
        this.view = this.factory.create().setLocation(e);
    }
    link(t, e, i, s) {
        $r(t).pending = this;
    }
    activate(t, e, i) {
        const s = this.view;
        if (s.isActive) return;
        return s.activate(s, this.$controller, e, i);
    }
    deactivate(t, e) {
        const i = this.view;
        if (!i.isActive) return;
        return i.deactivate(i, this.$controller, e);
    }
    detaching(t, e, i) {
        return this.deactivate(t, i);
    }
    dispose() {
        var t;
        null === (t = this.view) || void 0 === t ? void 0 : t.dispose();
        this.view = void 0;
    }
};

ot([ St({
    mode: _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.BindingMode.toView
}) ], Dr.prototype, "value", void 0);

Dr = ot([ Oe("pending"), lt(0, Ai), lt(1, os) ], Dr);

let Pr = class FulfilledTemplateController {
    constructor(t, e) {
        this.factory = t;
        this.id = (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.nextId)("au$component");
        this.view = this.factory.create().setLocation(e);
    }
    link(t, e, i, s) {
        $r(t).fulfilled = this;
    }
    activate(t, e, i, s) {
        this.value = s;
        const n = this.view;
        if (n.isActive) return;
        return n.activate(n, this.$controller, e, i);
    }
    deactivate(t, e) {
        const i = this.view;
        if (!i.isActive) return;
        return i.deactivate(i, this.$controller, e);
    }
    detaching(t, e, i) {
        return this.deactivate(t, i);
    }
    dispose() {
        var t;
        null === (t = this.view) || void 0 === t ? void 0 : t.dispose();
        this.view = void 0;
    }
};

ot([ St({
    mode: _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.BindingMode.fromView
}) ], Pr.prototype, "value", void 0);

Pr = ot([ Oe("then"), lt(0, Ai), lt(1, os) ], Pr);

let Or = class RejectedTemplateController {
    constructor(t, e) {
        this.factory = t;
        this.id = (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.nextId)("au$component");
        this.view = this.factory.create().setLocation(e);
    }
    link(t, e, i, s) {
        $r(t).rejected = this;
    }
    activate(t, e, i, s) {
        this.value = s;
        const n = this.view;
        if (n.isActive) return;
        return n.activate(n, this.$controller, e, i);
    }
    deactivate(t, e) {
        const i = this.view;
        if (!i.isActive) return;
        return i.deactivate(i, this.$controller, e);
    }
    detaching(t, e, i) {
        return this.deactivate(t, i);
    }
    dispose() {
        var t;
        null === (t = this.view) || void 0 === t ? void 0 : t.dispose();
        this.view = void 0;
    }
};

ot([ St({
    mode: _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.BindingMode.fromView
}) ], Or.prototype, "value", void 0);

Or = ot([ Oe("catch"), lt(0, Ai), lt(1, os) ], Or);

function $r(t) {
    const e = t.parent;
    const i = null === e || void 0 === e ? void 0 : e.viewModel;
    if (i instanceof Tr) return i;
    throw new Error("AUR0813");
}

let Lr = class PromiseAttributePattern {
    "promise.resolve"(t, e, i) {
        return new AttrSyntax(t, e, "promise", "bind");
    }
};

Lr = ot([ Ft({
    pattern: "promise.resolve",
    symbols: ""
}) ], Lr);

let qr = class FulfilledAttributePattern {
    then(t, e, i) {
        return new AttrSyntax(t, e, "then", "from-view");
    }
};

qr = ot([ Ft({
    pattern: "then",
    symbols: ""
}) ], qr);

let Mr = class RejectedAttributePattern {
    catch(t, e, i) {
        return new AttrSyntax(t, e, "catch", "from-view");
    }
};

Mr = ot([ Ft({
    pattern: "catch",
    symbols: ""
}) ], Mr);

function Ur(t, e, i, s) {
    if (At(e)) return Fr(t, e, i, s);
    if (si.isType(e)) return Vr(t, e, i, s);
    throw new Error(`Invalid Tag or Type.`);
}

class RenderPlan {
    constructor(t, e, i) {
        this.node = t;
        this.instructions = e;
        this.Pi = i;
        this.Oi = void 0;
    }
    get definition() {
        if (void 0 === this.Oi) this.Oi = CustomElementDefinition.create({
            name: si.generateName(),
            template: this.node,
            needsCompile: At(this.node),
            instructions: this.instructions,
            dependencies: this.Pi
        });
        return this.Oi;
    }
    createView(t) {
        return this.getViewFactory(t).create();
    }
    getViewFactory(t) {
        return t.root.get(Pi).getViewFactory(this.definition, t.createChild().register(...this.Pi));
    }
    mergeInto(t, e, i) {
        t.appendChild(this.node);
        e.push(...this.instructions);
        i.push(...this.Pi);
    }
}

function Fr(t, e, i, s) {
    const n = [];
    const r = [];
    const o = [];
    const l = t.document.createElement(e);
    let h = false;
    if (i) Object.keys(i).forEach((t => {
        const e = i[t];
        if (Cs(e)) {
            h = true;
            n.push(e);
        } else l.setAttribute(t, e);
    }));
    if (h) {
        l.className = "au";
        r.push(n);
    }
    if (s) _r(t, l, s, r, o);
    return new RenderPlan(l, r, o);
}

function Vr(t, e, i, s) {
    const n = si.getDefinition(e);
    const r = [];
    const o = [ r ];
    const l = [];
    const h = [];
    const a = n.bindables;
    const c = t.document.createElement(n.name);
    c.className = "au";
    if (!l.includes(e)) l.push(e);
    r.push(new HydrateElementInstruction(n, void 0, h, null, false, void 0));
    if (i) Object.keys(i).forEach((t => {
        const e = i[t];
        if (Cs(e)) h.push(e); else if (void 0 === a[t]) h.push(new SetAttributeInstruction(e, t)); else h.push(new SetPropertyInstruction(e, t));
    }));
    if (s) _r(t, c, s, o, l);
    return new RenderPlan(c, o, l);
}

function _r(t, e, i, s, n) {
    for (let r = 0, o = i.length; r < o; ++r) {
        const o = i[r];
        switch (typeof o) {
          case "string":
            e.appendChild(t.document.createTextNode(o));
            break;

          case "object":
            if (o instanceof t.Node) e.appendChild(o); else if ("mergeInto" in o) o.mergeInto(e, s, n);
        }
    }
}

function jr(t, e) {
    const i = e.to;
    if (void 0 !== i && "subject" !== i && "composing" !== i) t[i] = e;
    return t;
}

class AuRender {
    constructor(t, e, i, s) {
        this.p = t;
        this.$i = e;
        this.Li = i;
        this.r = s;
        this.id = (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.nextId)("au$component");
        this.component = void 0;
        this.composing = false;
        this.view = void 0;
        this.qi = void 0;
        this.Mi = e.props.reduce(jr, {});
    }
    attaching(t, e, i) {
        const {component: s, view: n} = this;
        if (void 0 === n || this.qi !== s) {
            this.qi = s;
            this.composing = true;
            return this.compose(void 0, s, t, i);
        }
        return this.compose(n, s, t, i);
    }
    detaching(t, e, i) {
        return this.oi(this.view, t, i);
    }
    componentChanged(t, e, i) {
        const {$controller: s} = this;
        if (!s.isActive) return;
        if (this.qi === t) return;
        this.qi = t;
        this.composing = true;
        i |= s.flags;
        const n = (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.onResolve)(this.oi(this.view, null, i), (() => this.compose(void 0, t, null, i)));
        if (n instanceof Promise) n.catch((t => {
            throw t;
        }));
    }
    compose(t, e, i, s) {
        return (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.onResolve)(void 0 === t ? (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.onResolve)(e, (t => this.Ui(t, s))) : t, (t => this.ni(this.view = t, i, s)));
    }
    oi(t, e, i) {
        return null === t || void 0 === t ? void 0 : t.deactivate(null !== e && void 0 !== e ? e : t, this.$controller, i);
    }
    ni(t, e, i) {
        const {$controller: s} = this;
        return (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.onResolve)(null === t || void 0 === t ? void 0 : t.activate(null !== e && void 0 !== e ? e : t, s, i, s.scope), (() => {
            this.composing = false;
        }));
    }
    Ui(t, e) {
        const i = this.Fi(t, e);
        if (i) {
            i.setLocation(this.$controller.location);
            i.lockScope(this.$controller.scope);
            return i;
        }
        return;
    }
    Fi(t, e) {
        if (!t) return;
        const i = this.Li.controller.container;
        if ("object" === typeof t) {
            if (Nr(t)) return t;
            if ("createView" in t) return t.createView(i);
            if ("create" in t) return t.create();
            if ("template" in t) return this.r.getViewFactory(CustomElementDefinition.getOrCreate(t), i).create();
        }
        if (At(t)) {
            const e = i.find(si, t);
            if (null == e) throw new Error(`AUR0809:${t}`);
            t = e.Type;
        }
        return Ur(this.p, t, this.Mi, this.$controller.host.childNodes).createView(i);
    }
    dispose() {
        var t;
        null === (t = this.view) || void 0 === t ? void 0 : t.dispose();
        this.view = void 0;
    }
    accept(t) {
        var e;
        if (true === (null === (e = this.view) || void 0 === e ? void 0 : e.accept(t))) return true;
    }
}

AuRender.inject = [ Kt, ks, Ki, Pi ];

ot([ St ], AuRender.prototype, "component", void 0);

ot([ St({
    mode: _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.BindingMode.fromView
}) ], AuRender.prototype, "composing", void 0);

je({
    name: "au-render",
    template: null,
    containerless: true,
    capture: true
})(AuRender);

function Nr(t) {
    return "lockScope" in t;
}

class AuCompose {
    constructor(t, e, i, s, n, r) {
        this.c = t;
        this.parent = e;
        this.host = i;
        this.p = s;
        this.scopeBehavior = "auto";
        this.Vi = void 0;
        this.l = n.containerless ? us(this.host) : void 0;
        this.r = t.get(Pi);
        this.$i = n;
        this._i = r;
    }
    static get inject() {
        return [ _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.IContainer, Xi, ns, Kt, ks, (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.transient)(CompositionContextFactory) ];
    }
    get pending() {
        return this.ji;
    }
    get composition() {
        return this.Vi;
    }
    attaching(t, e, i) {
        return this.ji = (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.onResolve)(this.queue(new ChangeInfo(this.view, this.viewModel, this.model, void 0), t), (t => {
            if (this._i.isCurrent(t)) this.ji = void 0;
        }));
    }
    detaching(t) {
        const e = this.Vi;
        const i = this.ji;
        this._i.invalidate();
        this.Vi = this.ji = void 0;
        return (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.onResolve)(i, (() => null === e || void 0 === e ? void 0 : e.deactivate(t)));
    }
    propertyChanged(t) {
        if ("model" === t && null != this.Vi) {
            this.Vi.update(this.model);
            return;
        }
        this.ji = (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.onResolve)(this.ji, (() => (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.onResolve)(this.queue(new ChangeInfo(this.view, this.viewModel, this.model, t), void 0), (t => {
            if (this._i.isCurrent(t)) this.ji = void 0;
        }))));
    }
    queue(t, e) {
        const i = this._i;
        const s = this.Vi;
        return (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.onResolve)(i.create(t), (t => {
            if (i.isCurrent(t)) return (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.onResolve)(this.compose(t), (n => {
                if (i.isCurrent(t)) return (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.onResolve)(n.activate(e), (() => {
                    if (i.isCurrent(t)) {
                        this.Vi = n;
                        return (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.onResolve)(null === s || void 0 === s ? void 0 : s.deactivate(e), (() => t));
                    } else return (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.onResolve)(n.controller.deactivate(n.controller, this.$controller, 4), (() => {
                        n.controller.dispose();
                        return t;
                    }));
                }));
                n.controller.dispose();
                return t;
            }));
            return t;
        }));
    }
    compose(t) {
        let e;
        let i;
        let s;
        const {view: n, viewModel: r, model: o} = t.change;
        const {c: l, host: h, $controller: a, l: c} = this;
        const u = this.getDef(r);
        const f = l.createChild();
        const d = null == c ? h.parentNode : c.parentNode;
        if (null !== u) {
            if (u.containerless) throw new Error("AUR0806");
            if (null == c) {
                i = h;
                s = () => {};
            } else {
                i = d.insertBefore(this.p.document.createElement(u.name), c);
                s = () => {
                    i.remove();
                };
            }
            e = this.getVm(f, r, i);
        } else {
            i = null == c ? h : c;
            e = this.getVm(f, r, i);
        }
        const m = () => {
            if (null !== u) {
                const n = Controller.$el(f, e, i, {
                    projections: this.$i.projections
                }, u);
                return new CompositionController(n, (t => n.activate(null !== t && void 0 !== t ? t : n, a, 2, a.scope.parentScope)), (t => (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.onResolve)(n.deactivate(null !== t && void 0 !== t ? t : n, a, 4), s)), (t => {
                    var i;
                    return null === (i = e.activate) || void 0 === i ? void 0 : i.call(e, t);
                }), t);
            } else {
                const s = CustomElementDefinition.create({
                    name: si.generateName(),
                    template: n
                });
                const r = this.r.getViewFactory(s, f);
                const o = Controller.$view(r, a);
                const l = "auto" === this.scopeBehavior ? _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.Scope.fromParent(this.parent.scope, e) : _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.Scope.create(e);
                if (fs(i)) o.setLocation(i); else o.setHost(i);
                return new CompositionController(o, (t => o.activate(null !== t && void 0 !== t ? t : o, a, 2, l)), (t => o.deactivate(null !== t && void 0 !== t ? t : o, a, 4)), (t => {
                    var i;
                    return null === (i = e.activate) || void 0 === i ? void 0 : i.call(e, t);
                }), t);
            }
        };
        if ("activate" in e) return (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.onResolve)(e.activate(o), (() => m())); else return m();
    }
    getVm(t, e, i) {
        if (null == e) return new EmptyComponent$1;
        if ("object" === typeof e) return e;
        const s = this.p;
        const n = fs(i);
        t.registerResolver(s.Element, t.registerResolver(ns, new _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.InstanceProvider("ElementResolver", n ? null : i)));
        t.registerResolver(os, new _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.InstanceProvider("IRenderLocation", n ? i : null));
        const r = t.invoke(e);
        t.registerResolver(e, new _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.InstanceProvider("au-compose.viewModel", r));
        return r;
    }
    getDef(t) {
        const e = Ct(t) ? t : null === t || void 0 === t ? void 0 : t.constructor;
        return si.isType(e) ? si.getDefinition(e) : null;
    }
}

ot([ St ], AuCompose.prototype, "view", void 0);

ot([ St ], AuCompose.prototype, "viewModel", void 0);

ot([ St ], AuCompose.prototype, "model", void 0);

ot([ St({
    set: t => {
        if ("scoped" === t || "auto" === t) return t;
        throw new Error("AUR0805");
    }
}) ], AuCompose.prototype, "scopeBehavior", void 0);

je("au-compose")(AuCompose);

class EmptyComponent$1 {}

class CompositionContextFactory {
    constructor() {
        this.id = 0;
    }
    isCurrent(t) {
        return t.id === this.id;
    }
    create(t) {
        return (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.onResolve)(t.load(), (t => new CompositionContext(++this.id, t)));
    }
    invalidate() {
        this.id++;
    }
}

class ChangeInfo {
    constructor(t, e, i, s) {
        this.view = t;
        this.viewModel = e;
        this.model = i;
        this.src = s;
    }
    load() {
        if (kt(this.view) || kt(this.viewModel)) return Promise.all([ this.view, this.viewModel ]).then((([t, e]) => new LoadedChangeInfo(t, e, this.model, this.src))); else return new LoadedChangeInfo(this.view, this.viewModel, this.model, this.src);
    }
}

class LoadedChangeInfo {
    constructor(t, e, i, s) {
        this.view = t;
        this.viewModel = e;
        this.model = i;
        this.src = s;
    }
}

class CompositionContext {
    constructor(t, e) {
        this.id = t;
        this.change = e;
    }
}

class CompositionController {
    constructor(t, e, i, s, n) {
        this.controller = t;
        this.start = e;
        this.stop = i;
        this.update = s;
        this.context = n;
        this.state = 0;
    }
    activate(t) {
        if (0 !== this.state) throw new Error(`AUR0807:${this.controller.name}`);
        this.state = 1;
        return this.start(t);
    }
    deactivate(t) {
        switch (this.state) {
          case 1:
            this.state = -1;
            return this.stop(t);

          case -1:
            throw new Error("AUR0808");

          default:
            this.state = -1;
        }
    }
}

class AuSlot {
    constructor(t, e, i, s) {
        var n, r;
        this.Ni = null;
        this.Wi = null;
        let o;
        const l = e.auSlot;
        const h = null === (r = null === (n = i.instruction) || void 0 === n ? void 0 : n.projections) || void 0 === r ? void 0 : r[l.name];
        if (null == h) {
            o = s.getViewFactory(l.fallback, i.controller.container);
            this.Hi = false;
        } else {
            o = s.getViewFactory(h, i.parent.controller.container);
            this.Hi = true;
        }
        this.Li = i;
        this.view = o.create().setLocation(t);
    }
    static get inject() {
        return [ os, ks, Ki, Pi ];
    }
    binding(t, e, i) {
        var s;
        this.Ni = this.$controller.scope.parentScope;
        let n;
        if (this.Hi) {
            n = this.Li.controller.scope.parentScope;
            (this.Wi = _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.Scope.fromParent(n, n.bindingContext)).overrideContext.$host = null !== (s = this.expose) && void 0 !== s ? s : this.Ni.bindingContext;
        }
    }
    attaching(t, e, i) {
        return this.view.activate(t, this.$controller, i, this.Hi ? this.Wi : this.Ni);
    }
    detaching(t, e, i) {
        return this.view.deactivate(t, this.$controller, i);
    }
    exposeChanged(t) {
        if (this.Hi && null != this.Wi) this.Wi.overrideContext.$host = t;
    }
    dispose() {
        this.view.dispose();
        this.view = void 0;
    }
    accept(t) {
        var e;
        if (true === (null === (e = this.view) || void 0 === e ? void 0 : e.accept(t))) return true;
    }
}

ot([ St ], AuSlot.prototype, "expose", void 0);

je({
    name: "au-slot",
    template: null,
    containerless: true
})(AuSlot);

const Wr = /<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi;

const Hr = _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.DI.createInterface("ISanitizer", (t => t.singleton(class {
    sanitize(t) {
        return t.replace(Wr, "");
    }
})));

let zr = class SanitizeValueConverter {
    constructor(t) {
        this.zi = t;
    }
    toView(t) {
        if (null == t) return null;
        return this.zi.sanitize(t);
    }
};

zr = ot([ lt(0, Hr) ], zr);

(0,_aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.valueConverter)("sanitize")(zr);

let Gr = class ViewValueConverter {
    constructor(t) {
        this.Gi = t;
    }
    toView(t, e) {
        return this.Gi.getViewComponentForObject(t, e);
    }
};

Gr = ot([ lt(0, Di) ], Gr);

(0,_aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.valueConverter)("view")(Gr);

const Xr = DebounceBindingBehavior;

const Kr = OneTimeBindingBehavior;

const Yr = ToViewBindingBehavior;

const Qr = FromViewBindingBehavior;

const Zr = SignalBindingBehavior;

const Jr = ThrottleBindingBehavior;

const to = TwoWayBindingBehavior;

const eo = TemplateCompiler;

const io = NodeObserverLocator;

const so = [ eo, io ];

const no = SVGAnalyzer;

const ro = Gt;

const oo = zt;

const lo = Ht;

const ho = Wt;

const ao = Xt;

const co = [ lo, ho, ao ];

const uo = [ ro, oo ];

const fo = xn;

const mo = bn;

const vo = yn;

const po = gn;

const go = vn;

const wo = pn;

const bo = wn;

const xo = Bn;

const yo = kn;

const ko = Cn;

const Co = An;

const Ao = Sn;

const So = En;

const Ro = Rn;

const Eo = In;

const Bo = [ mo, go, po, wo, bo, fo, vo, xo, yo, ko, Co, So, Ro, Ao, Eo ];

const Io = zr;

const To = Gr;

const Do = FrequentMutations;

const Po = ObserveShallow;

const Oo = If;

const $o = Else;

const Lo = Repeat;

const qo = With;

const Mo = Er;

const Uo = Br;

const Fo = Ir;

const Vo = Tr;

const _o = Dr;

const jo = Pr;

const No = Or;

const Wo = Lr;

const Ho = qr;

const zo = Mr;

const Go = AttrBindingBehavior;

const Xo = SelfBindingBehavior;

const Ko = UpdateTriggerBindingBehavior;

const Yo = AuRender;

const Qo = AuCompose;

const Zo = Portal;

const Jo = Focus;

const tl = br;

const el = [ Xr, Kr, Yr, Qr, Zr, Jr, to, Io, To, Do, Po, Oo, $o, Lo, qo, Mo, Uo, Fo, Vo, _o, jo, No, Wo, Ho, zo, Go, Xo, Ko, Yo, Qo, Zo, Jo, tl, AuSlot ];

const il = Ls;

const sl = Ps;

const nl = Ds;

const rl = Ms;

const ol = Fs;

const ll = $s;

const hl = Us;

const al = qs;

const cl = Ts;

const ul = Os;

const fl = Ws;

const dl = Ks;

const ml = Hs;

const vl = zs;

const pl = Gs;

const gl = Xs;

const wl = Ns;

const bl = Ys;

const xl = [ hl, ol, il, al, rl, cl, nl, sl, ul, ll, fl, dl, ml, vl, pl, gl, wl, bl ];

const yl = kl(_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.noop);

function kl(t) {
    return {
        optionsProvider: t,
        register(e) {
            const i = {
                coercingOptions: {
                    enableCoercion: false,
                    coerceNullish: false
                }
            };
            t(i);
            return e.register(_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.Registration.instance(_aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.ICoercionConfiguration, i.coercingOptions), ...so, ...el, ...co, ...Bo, ...xl);
        },
        customize(e) {
            return kl(null !== e && void 0 !== e ? e : t);
        }
    };
}

const Cl = _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.DI.createInterface("IAurelia");

class Aurelia {
    constructor(t = _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.DI.createContainer()) {
        this.container = t;
        this.ir = false;
        this.Xi = false;
        this.Ki = false;
        this.Yi = void 0;
        this.next = void 0;
        this.Qi = void 0;
        this.Zi = void 0;
        if (t.has(Cl, true)) throw new Error("AUR0768");
        t.registerResolver(Cl, new _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.InstanceProvider("IAurelia", this));
        t.registerResolver(ts, this.Ji = new _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.InstanceProvider("IAppRoot"));
    }
    get isRunning() {
        return this.ir;
    }
    get isStarting() {
        return this.Xi;
    }
    get isStopping() {
        return this.Ki;
    }
    get root() {
        if (null == this.Yi) {
            if (null == this.next) throw new Error("AUR0767");
            return this.next;
        }
        return this.Yi;
    }
    register(...t) {
        this.container.register(...t);
        return this;
    }
    app(t) {
        this.next = new AppRoot(t, this.ts(t.host), this.container, this.Ji);
        return this;
    }
    enhance(t, e) {
        var i;
        const s = null !== (i = t.container) && void 0 !== i ? i : this.container.createChild();
        const n = t.host;
        const r = this.ts(n);
        const o = t.component;
        let l;
        if (Ct(o)) {
            s.registerResolver(r.HTMLElement, s.registerResolver(r.Element, s.registerResolver(ns, new _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.InstanceProvider("ElementResolver", n))));
            l = s.invoke(o);
        } else l = o;
        s.registerResolver(rs, new _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.InstanceProvider("IEventTarget", n));
        e = null !== e && void 0 !== e ? e : null;
        const h = Controller.$el(s, l, n, null, CustomElementDefinition.create({
            name: si.generateName(),
            template: n,
            enhance: true
        }));
        return (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.onResolve)(h.activate(h, e, 2), (() => h));
    }
    async waitForIdle() {
        const t = this.root.platform;
        await t.domWriteQueue.yield();
        await t.domReadQueue.yield();
        await t.taskQueue.yield();
    }
    ts(e) {
        let i;
        if (!this.container.has(Kt, false)) {
            if (null === e.ownerDocument.defaultView) throw new Error("AUR0769");
            i = new _aurelia_platform_browser__WEBPACK_IMPORTED_MODULE_1__.BrowserPlatform(e.ownerDocument.defaultView);
            this.container.register(_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.Registration.instance(Kt, i));
        } else i = this.container.get(Kt);
        return i;
    }
    start(t = this.next) {
        if (null == t) throw new Error("AUR0770");
        if (this.Qi instanceof Promise) return this.Qi;
        return this.Qi = (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.onResolve)(this.stop(), (() => {
            Reflect.set(t.host, "$aurelia", this);
            this.Ji.prepare(this.Yi = t);
            this.Xi = true;
            return (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.onResolve)(t.activate(), (() => {
                this.ir = true;
                this.Xi = false;
                this.Qi = void 0;
                this.es(t, "au-started", t.host);
            }));
        }));
    }
    stop(t = false) {
        if (this.Zi instanceof Promise) return this.Zi;
        if (true === this.ir) {
            const e = this.Yi;
            this.ir = false;
            this.Ki = true;
            return this.Zi = (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.onResolve)(e.deactivate(), (() => {
                Reflect.deleteProperty(e.host, "$aurelia");
                if (t) e.dispose();
                this.Yi = void 0;
                this.Ji.dispose();
                this.Ki = false;
                this.es(e, "au-stopped", e.host);
            }));
        }
    }
    dispose() {
        if (this.ir || this.Ki) throw new Error("AUR0771");
        this.container.dispose();
    }
    es(t, e, i) {
        const s = new t.platform.window.CustomEvent(e, {
            detail: this,
            bubbles: true,
            cancelable: true
        });
        i.dispatchEvent(s);
    }
}

var Al;

(function(t) {
    t[t["Element"] = 1] = "Element";
    t[t["Attribute"] = 2] = "Attribute";
})(Al || (Al = {}));

const Sl = _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.DI.createInterface("IDialogService");

const Rl = _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.DI.createInterface("IDialogController");

const El = _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.DI.createInterface("IDialogDomRenderer");

const Bl = _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.DI.createInterface("IDialogDom");

const Il = _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.DI.createInterface("IDialogGlobalSettings");

class DialogOpenResult {
    constructor(t, e) {
        this.wasCancelled = t;
        this.dialog = e;
    }
    static create(t, e) {
        return new DialogOpenResult(t, e);
    }
}

class DialogCloseResult {
    constructor(t, e) {
        this.status = t;
        this.value = e;
    }
    static create(t, e) {
        return new DialogCloseResult(t, e);
    }
}

var Tl;

(function(t) {
    t["Ok"] = "ok";
    t["Error"] = "error";
    t["Cancel"] = "cancel";
    t["Abort"] = "abort";
})(Tl || (Tl = {}));

class DialogController {
    constructor(t, e) {
        this.p = t;
        this.ctn = e;
        this.closed = new Promise(((t, e) => {
            this.$t = t;
            this.Bt = e;
        }));
    }
    static get inject() {
        return [ Kt, _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.IContainer ];
    }
    activate(t) {
        var e;
        const i = this.ctn.createChild();
        const {model: s, template: n, rejectOnCancel: r} = t;
        const o = i.get(El);
        const l = null !== (e = t.host) && void 0 !== e ? e : this.p.document.body;
        const h = this.dom = o.render(l, t);
        const a = i.has(rs, true) ? i.get(rs) : null;
        const u = h.contentHost;
        this.settings = t;
        if (null == a || !a.contains(l)) i.register(_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.Registration.instance(rs, l));
        i.register(_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.Registration.instance(ns, u), _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.Registration.instance(Bl, h));
        return new Promise((e => {
            var n, r;
            const o = Object.assign(this.cmp = this.getOrCreateVm(i, t, u), {
                $dialog: this
            });
            e(null !== (r = null === (n = o.canActivate) || void 0 === n ? void 0 : n.call(o, s)) && void 0 !== r ? r : true);
        })).then((e => {
            var o;
            if (true !== e) {
                h.dispose();
                if (r) throw Dl(null, "Dialog activation rejected");
                return DialogOpenResult.create(true, this);
            }
            const l = this.cmp;
            return (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.onResolve)(null === (o = l.activate) || void 0 === o ? void 0 : o.call(l, s), (() => {
                var e;
                const s = this.controller = Controller.$el(i, l, u, null, CustomElementDefinition.create(null !== (e = this.getDefinition(l)) && void 0 !== e ? e : {
                    name: si.generateName(),
                    template: n
                }));
                return (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.onResolve)(s.activate(s, null, 2), (() => {
                    var e;
                    h.overlay.addEventListener(null !== (e = t.mouseEvent) && void 0 !== e ? e : "click", this);
                    return DialogOpenResult.create(false, this);
                }));
            }));
        }), (t => {
            h.dispose();
            throw t;
        }));
    }
    deactivate(t, e) {
        if (this.ss) return this.ss;
        let i = true;
        const {controller: s, dom: n, cmp: r, settings: {mouseEvent: o, rejectOnCancel: l}} = this;
        const h = DialogCloseResult.create(t, e);
        const a = new Promise((a => {
            var c, u;
            a((0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.onResolve)(null !== (u = null === (c = r.canDeactivate) || void 0 === c ? void 0 : c.call(r, h)) && void 0 !== u ? u : true, (a => {
                var c;
                if (true !== a) {
                    i = false;
                    this.ss = void 0;
                    if (l) throw Dl(null, "Dialog cancellation rejected");
                    return DialogCloseResult.create("abort");
                }
                return (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.onResolve)(null === (c = r.deactivate) || void 0 === c ? void 0 : c.call(r, h), (() => (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.onResolve)(s.deactivate(s, null, 4), (() => {
                    n.dispose();
                    n.overlay.removeEventListener(null !== o && void 0 !== o ? o : "click", this);
                    if (!l && "error" !== t) this.$t(h); else this.Bt(Dl(e, "Dialog cancelled with a rejection on cancel"));
                    return h;
                }))));
            })));
        })).catch((t => {
            this.ss = void 0;
            throw t;
        }));
        this.ss = i ? a : void 0;
        return a;
    }
    ok(t) {
        return this.deactivate("ok", t);
    }
    cancel(t) {
        return this.deactivate("cancel", t);
    }
    error(t) {
        const e = Pl(t);
        return new Promise((t => {
            var i, s;
            return t((0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.onResolve)(null === (s = (i = this.cmp).deactivate) || void 0 === s ? void 0 : s.call(i, DialogCloseResult.create("error", e)), (() => (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.onResolve)(this.controller.deactivate(this.controller, null, 4), (() => {
                this.dom.dispose();
                this.Bt(e);
            })))));
        }));
    }
    handleEvent(t) {
        if (this.settings.overlayDismiss && !this.dom.contentHost.contains(t.target)) this.cancel();
    }
    getOrCreateVm(t, e, i) {
        const s = e.component;
        if (null == s) return new EmptyComponent;
        if ("object" === typeof s) return s;
        const n = this.p;
        t.registerResolver(n.HTMLElement, t.registerResolver(n.Element, t.registerResolver(ns, new _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.InstanceProvider("ElementResolver", i))));
        return t.invoke(s);
    }
    getDefinition(t) {
        const e = Ct(t) ? t : null === t || void 0 === t ? void 0 : t.constructor;
        return si.isType(e) ? si.getDefinition(e) : null;
    }
}

class EmptyComponent {}

function Dl(t, e) {
    const i = new Error(e);
    i.wasCancelled = true;
    i.value = t;
    return i;
}

function Pl(t) {
    const e = new Error;
    e.wasCancelled = false;
    e.value = t;
    return e;
}

class DialogService {
    constructor(t, e, i) {
        this.ut = t;
        this.p = e;
        this.os = i;
        this.dlgs = [];
    }
    get controllers() {
        return this.dlgs.slice(0);
    }
    get top() {
        const t = this.dlgs;
        return t.length > 0 ? t[t.length - 1] : null;
    }
    static get inject() {
        return [ _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.IContainer, Kt, Il ];
    }
    static register(t) {
        t.register(_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.Registration.singleton(Sl, this), xe.beforeDeactivate(Sl, (t => (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.onResolve)(t.closeAll(), (t => {
            if (t.length > 0) throw new Error(`AUR0901:${t.length}`);
        })))));
    }
    open(t) {
        return $l(new Promise((e => {
            var i;
            const s = DialogSettings.from(this.os, t);
            const n = null !== (i = s.container) && void 0 !== i ? i : this.ut.createChild();
            e((0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.onResolve)(s.load(), (t => {
                const e = n.invoke(DialogController);
                n.register(_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.Registration.instance(Rl, e));
                n.register(_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.Registration.callback(DialogController, (() => {
                    throw new Error("AUR0902");
                })));
                return (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.onResolve)(e.activate(t), (t => {
                    if (!t.wasCancelled) {
                        if (1 === this.dlgs.push(e)) this.p.window.addEventListener("keydown", this);
                        const t = () => this.remove(e);
                        e.closed.then(t, t);
                    }
                    return t;
                }));
            })));
        })));
    }
    closeAll() {
        return Promise.all(Array.from(this.dlgs).map((t => {
            if (t.settings.rejectOnCancel) return t.cancel().then((() => null));
            return t.cancel().then((e => "cancel" === e.status ? null : t));
        }))).then((t => t.filter((t => !!t))));
    }
    remove(t) {
        const e = this.dlgs;
        const i = e.indexOf(t);
        if (i > -1) this.dlgs.splice(i, 1);
        if (0 === e.length) this.p.window.removeEventListener("keydown", this);
    }
    handleEvent(t) {
        const e = t;
        const i = Ll(e);
        if (null == i) return;
        const s = this.top;
        if (null === s || 0 === s.settings.keyboard.length) return;
        const n = s.settings.keyboard;
        if ("Escape" === i && n.includes(i)) void s.cancel(); else if ("Enter" === i && n.includes(i)) void s.ok();
    }
}

class DialogSettings {
    static from(...t) {
        return Object.assign(new DialogSettings, ...t).cs().ls();
    }
    load() {
        const t = this;
        const e = this.component;
        const i = this.template;
        const s = (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.resolveAll)(null == e ? void 0 : (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.onResolve)(e(), (e => {
            t.component = e;
        })), Ct(i) ? (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.onResolve)(i(), (e => {
            t.template = e;
        })) : void 0);
        return s instanceof Promise ? s.then((() => t)) : t;
    }
    cs() {
        if (null == this.component && null == this.template) throw new Error("AUR0903");
        return this;
    }
    ls() {
        if (null == this.keyboard) this.keyboard = this.lock ? [] : [ "Enter", "Escape" ];
        if ("boolean" !== typeof this.overlayDismiss) this.overlayDismiss = !this.lock;
        return this;
    }
}

function Ol(t, e) {
    return this.then((i => i.dialog.closed.then(t, e)), e);
}

function $l(t) {
    t.whenClosed = Ol;
    return t;
}

function Ll(t) {
    if ("Escape" === (t.code || t.key) || 27 === t.keyCode) return "Escape";
    if ("Enter" === (t.code || t.key) || 13 === t.keyCode) return "Enter";
    return;
}

class DefaultDialogGlobalSettings {
    constructor() {
        this.lock = true;
        this.startingZIndex = 1e3;
        this.rejectOnCancel = false;
    }
    static register(t) {
        _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.Registration.singleton(Il, this).register(t);
    }
}

const ql = "position:absolute;width:100%;height:100%;top:0;left:0;";

class DefaultDialogDomRenderer {
    constructor(t) {
        this.p = t;
        this.wrapperCss = `${ql} display:flex;`;
        this.overlayCss = ql;
        this.hostCss = "position:relative;margin:auto;";
    }
    static register(t) {
        _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.Registration.singleton(El, this).register(t);
    }
    render(t) {
        const e = this.p.document;
        const i = (t, i) => {
            const s = e.createElement(t);
            s.style.cssText = i;
            return s;
        };
        const s = t.appendChild(i("au-dialog-container", this.wrapperCss));
        const n = s.appendChild(i("au-dialog-overlay", this.overlayCss));
        const r = s.appendChild(i("div", this.hostCss));
        return new DefaultDialogDom(s, n, r);
    }
}

DefaultDialogDomRenderer.inject = [ Kt ];

class DefaultDialogDom {
    constructor(t, e, i) {
        this.wrapper = t;
        this.overlay = e;
        this.contentHost = i;
    }
    dispose() {
        this.wrapper.remove();
    }
}

function Ml(t, e) {
    return {
        settingsProvider: t,
        register: i => i.register(...e, xe.beforeCreate((() => t(i.get(Il))))),
        customize(t, i) {
            return Ml(t, null !== i && void 0 !== i ? i : e);
        }
    };
}

const Ul = Ml((() => {
    throw new Error("AUR0904");
}), [ class NoopDialogGlobalSettings {
    static register(t) {
        t.register(_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.Registration.singleton(Il, this));
    }
} ]);

const Fl = Ml(_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.noop, [ DialogService, DefaultDialogGlobalSettings, DefaultDialogDomRenderer ]);

const Vl = _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.DI.createInterface((t => t.singleton(WcCustomElementRegistry)));

class WcCustomElementRegistry {
    constructor(t, e, i) {
        this.ctn = t;
        this.p = e;
        this.r = i;
    }
    define(t, e, i) {
        if (!t.includes("-")) throw new Error('Invalid web-components custom element name. It must include a "-"');
        let s;
        if (null == e) throw new Error("Invalid custom element definition");
        switch (typeof e) {
          case "function":
            s = si.isType(e) ? si.getDefinition(e) : CustomElementDefinition.create(si.generateName(), e);
            break;

          default:
            s = CustomElementDefinition.getOrCreate(e);
            break;
        }
        if (s.containerless) throw new Error("Containerless custom element is not supported. Consider using buitl-in extends instead");
        const n = !(null === i || void 0 === i ? void 0 : i.extends) ? HTMLElement : this.p.document.createElement(i.extends).constructor;
        const r = this.ctn;
        const o = this.r;
        const l = s.bindables;
        const h = this.p;
        class CustomElementClass extends n {
            auInit() {
                if (this.auInited) return;
                this.auInited = true;
                const t = r.createChild();
                t.registerResolver(h.HTMLElement, t.registerResolver(h.Element, t.registerResolver(ns, new _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.InstanceProvider("ElementProvider", this))));
                const e = o.compile(s, t, {
                    projections: null
                });
                const i = t.invoke(e.Type);
                const n = this.auCtrl = Controller.$el(t, i, this, null, e);
                ss(this, e.key, n);
            }
            connectedCallback() {
                this.auInit();
                this.auCtrl.activate(this.auCtrl, null, 0);
            }
            disconnectedCallback() {
                this.auCtrl.deactivate(this.auCtrl, null, 0);
            }
            adoptedCallback() {
                this.auInit();
            }
            attributeChangedCallback(t, e, i) {
                this.auInit();
                this.auCtrl.viewModel[t] = i;
            }
        }
        CustomElementClass.observedAttributes = Object.keys(l);
        for (const t in l) Object.defineProperty(CustomElementClass.prototype, t, {
            configurable: true,
            enumerable: false,
            get() {
                return this["auCtrl"].viewModel[t];
            },
            set(e) {
                if (!this["auInited"]) this["auInit"]();
                this["auCtrl"].viewModel[t] = e;
            }
        });
        this.p.customElements.define(t, CustomElementClass, i);
        return CustomElementClass;
    }
}

WcCustomElementRegistry.inject = [ _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.IContainer, Kt, Pi ];


//# sourceMappingURL=index.js.map


/***/ }),

/***/ "./node_modules/@aurelia/runtime/dist/esm/index.js":
/*!*********************************************************!*\
  !*** ./node_modules/@aurelia/runtime/dist/esm/index.js ***!
  \*********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "IPlatform": () => /* reexport safe */ _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__.IPlatform,
/* harmony export */   "Platform": () => /* reexport safe */ _aurelia_platform__WEBPACK_IMPORTED_MODULE_1__.Platform,
/* harmony export */   "Task": () => /* reexport safe */ _aurelia_platform__WEBPACK_IMPORTED_MODULE_1__.Task,
/* harmony export */   "TaskAbortError": () => /* reexport safe */ _aurelia_platform__WEBPACK_IMPORTED_MODULE_1__.TaskAbortError,
/* harmony export */   "TaskQueue": () => /* reexport safe */ _aurelia_platform__WEBPACK_IMPORTED_MODULE_1__.TaskQueue,
/* harmony export */   "TaskQueuePriority": () => /* reexport safe */ _aurelia_platform__WEBPACK_IMPORTED_MODULE_1__.TaskQueuePriority,
/* harmony export */   "TaskStatus": () => /* reexport safe */ _aurelia_platform__WEBPACK_IMPORTED_MODULE_1__.TaskStatus,
/* harmony export */   "Access": () => /* binding */ Ue,
/* harmony export */   "AccessKeyedExpression": () => /* binding */ AccessKeyedExpression,
/* harmony export */   "AccessMemberExpression": () => /* binding */ AccessMemberExpression,
/* harmony export */   "AccessScopeExpression": () => /* binding */ AccessScopeExpression,
/* harmony export */   "AccessThisExpression": () => /* binding */ AccessThisExpression,
/* harmony export */   "AccessorType": () => /* binding */ X,
/* harmony export */   "ArrayBindingPattern": () => /* binding */ ArrayBindingPattern,
/* harmony export */   "ArrayIndexObserver": () => /* binding */ ArrayIndexObserver,
/* harmony export */   "ArrayLiteralExpression": () => /* binding */ ArrayLiteralExpression,
/* harmony export */   "ArrayObserver": () => /* binding */ ArrayObserver,
/* harmony export */   "AssignExpression": () => /* binding */ AssignExpression,
/* harmony export */   "BinaryExpression": () => /* binding */ BinaryExpression,
/* harmony export */   "BindingBehavior": () => /* binding */ T,
/* harmony export */   "BindingBehaviorDefinition": () => /* binding */ BindingBehaviorDefinition,
/* harmony export */   "BindingBehaviorExpression": () => /* binding */ BindingBehaviorExpression,
/* harmony export */   "BindingBehaviorFactory": () => /* binding */ BindingBehaviorFactory,
/* harmony export */   "BindingBehaviorStrategy": () => /* binding */ $,
/* harmony export */   "BindingContext": () => /* binding */ BindingContext,
/* harmony export */   "BindingIdentifier": () => /* binding */ BindingIdentifier,
/* harmony export */   "BindingInterceptor": () => /* binding */ BindingInterceptor,
/* harmony export */   "BindingMediator": () => /* binding */ BindingMediator,
/* harmony export */   "BindingMode": () => /* binding */ z,
/* harmony export */   "BindingObserverRecord": () => /* binding */ BindingObserverRecord,
/* harmony export */   "CallFunctionExpression": () => /* binding */ CallFunctionExpression,
/* harmony export */   "CallMemberExpression": () => /* binding */ CallMemberExpression,
/* harmony export */   "CallScopeExpression": () => /* binding */ CallScopeExpression,
/* harmony export */   "Char": () => /* binding */ ye,
/* harmony export */   "CollectionKind": () => /* binding */ J,
/* harmony export */   "CollectionLengthObserver": () => /* binding */ CollectionLengthObserver,
/* harmony export */   "CollectionSizeObserver": () => /* binding */ CollectionSizeObserver,
/* harmony export */   "ComputedObserver": () => /* binding */ ComputedObserver,
/* harmony export */   "ConditionalExpression": () => /* binding */ ConditionalExpression,
/* harmony export */   "ConnectableSwitcher": () => /* binding */ vs,
/* harmony export */   "CustomExpression": () => /* binding */ CustomExpression,
/* harmony export */   "DelegationStrategy": () => /* binding */ Z,
/* harmony export */   "DestructuringAssignmentExpression": () => /* binding */ DestructuringAssignmentExpression,
/* harmony export */   "DestructuringAssignmentRestExpression": () => /* binding */ DestructuringAssignmentRestExpression,
/* harmony export */   "DestructuringAssignmentSingleExpression": () => /* binding */ DestructuringAssignmentSingleExpression,
/* harmony export */   "DirtyCheckProperty": () => /* binding */ DirtyCheckProperty,
/* harmony export */   "DirtyCheckSettings": () => /* binding */ ar,
/* harmony export */   "ExpressionKind": () => /* binding */ F,
/* harmony export */   "ExpressionType": () => /* binding */ Re,
/* harmony export */   "FlushQueue": () => /* binding */ FlushQueue,
/* harmony export */   "ForOfStatement": () => /* binding */ ForOfStatement,
/* harmony export */   "HtmlLiteralExpression": () => /* binding */ HtmlLiteralExpression,
/* harmony export */   "ICoercionConfiguration": () => /* binding */ _,
/* harmony export */   "IDirtyChecker": () => /* binding */ ur,
/* harmony export */   "IExpressionParser": () => /* binding */ Ae,
/* harmony export */   "INodeObserverLocator": () => /* binding */ pr,
/* harmony export */   "IObservation": () => /* binding */ Er,
/* harmony export */   "IObserverLocator": () => /* binding */ vr,
/* harmony export */   "ISignaler": () => /* binding */ B,
/* harmony export */   "Interpolation": () => /* binding */ Interpolation,
/* harmony export */   "LifecycleFlags": () => /* binding */ W,
/* harmony export */   "MapObserver": () => /* binding */ MapObserver,
/* harmony export */   "ObjectBindingPattern": () => /* binding */ ObjectBindingPattern,
/* harmony export */   "ObjectLiteralExpression": () => /* binding */ ObjectLiteralExpression,
/* harmony export */   "Observation": () => /* binding */ Observation,
/* harmony export */   "ObserverLocator": () => /* binding */ ObserverLocator,
/* harmony export */   "OverrideContext": () => /* binding */ OverrideContext,
/* harmony export */   "ParserState": () => /* binding */ ParserState,
/* harmony export */   "Precedence": () => /* binding */ xe,
/* harmony export */   "PrimitiveLiteralExpression": () => /* binding */ PrimitiveLiteralExpression,
/* harmony export */   "PrimitiveObserver": () => /* binding */ PrimitiveObserver,
/* harmony export */   "PropertyAccessor": () => /* binding */ PropertyAccessor,
/* harmony export */   "ProxyObservable": () => /* binding */ hr,
/* harmony export */   "Scope": () => /* binding */ Scope,
/* harmony export */   "SetObserver": () => /* binding */ SetObserver,
/* harmony export */   "SetterObserver": () => /* binding */ SetterObserver,
/* harmony export */   "SubscriberRecord": () => /* binding */ SubscriberRecord,
/* harmony export */   "TaggedTemplateExpression": () => /* binding */ TaggedTemplateExpression,
/* harmony export */   "TemplateExpression": () => /* binding */ TemplateExpression,
/* harmony export */   "UnaryExpression": () => /* binding */ UnaryExpression,
/* harmony export */   "ValueConverter": () => /* binding */ D,
/* harmony export */   "ValueConverterDefinition": () => /* binding */ ValueConverterDefinition,
/* harmony export */   "ValueConverterExpression": () => /* binding */ ValueConverterExpression,
/* harmony export */   "alias": () => /* binding */ O,
/* harmony export */   "applyMutationsToIndices": () => /* binding */ It,
/* harmony export */   "bindingBehavior": () => /* binding */ L,
/* harmony export */   "cloneIndexMap": () => /* binding */ et,
/* harmony export */   "connectable": () => /* binding */ Ee,
/* harmony export */   "copyIndexMap": () => /* binding */ Y,
/* harmony export */   "createIndexMap": () => /* binding */ tt,
/* harmony export */   "disableArrayObservation": () => /* binding */ Tt,
/* harmony export */   "disableMapObservation": () => /* binding */ ce,
/* harmony export */   "disableSetObservation": () => /* binding */ Gt,
/* harmony export */   "enableArrayObservation": () => /* binding */ Pt,
/* harmony export */   "enableMapObservation": () => /* binding */ he,
/* harmony export */   "enableSetObservation": () => /* binding */ Wt,
/* harmony export */   "getCollectionObserver": () => /* binding */ gr,
/* harmony export */   "isIndexMap": () => /* binding */ st,
/* harmony export */   "observable": () => /* binding */ mr,
/* harmony export */   "parse": () => /* binding */ je,
/* harmony export */   "parseExpression": () => /* binding */ Te,
/* harmony export */   "registerAliases": () => /* binding */ C,
/* harmony export */   "subscriberCollection": () => /* binding */ rt,
/* harmony export */   "synchronizeIndices": () => /* binding */ Mt,
/* harmony export */   "valueConverter": () => /* binding */ j,
/* harmony export */   "withFlushQueue": () => /* binding */ ct
/* harmony export */ });
/* harmony import */ var _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @aurelia/kernel */ "./node_modules/@aurelia/kernel/dist/esm/index.js");
/* harmony import */ var _aurelia_platform__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @aurelia/platform */ "./node_modules/@aurelia/platform/dist/esm/index.js");






const d = Object.prototype.hasOwnProperty;

const v = Reflect.defineProperty;

const p = t => "function" === typeof t;

const g = t => "string" === typeof t;

function w(t, e, s) {
    v(t, e, {
        enumerable: false,
        configurable: true,
        writable: true,
        value: s
    });
    return s;
}

function b(t, e, s, r = false) {
    if (r || !d.call(t, e)) w(t, e, s);
}

const E = () => Object.create(null);

const A = _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__.Metadata.getOwn;

const y = _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__.Metadata.hasOwn;

const m = _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__.Metadata.define;

const U = _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__.Protocol.annotation.keyFor;

const x = _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__.Protocol.resource.keyFor;

const S = _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__.Protocol.resource.appendTo;

function O(...t) {
    return function(e) {
        const s = U("aliases");
        const r = A(s, e);
        if (void 0 === r) m(s, t, e); else r.push(...t);
    };
}

function C(t, e, r, i) {
    for (let n = 0, o = t.length; n < o; ++n) _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__.Registration.aliasTo(r, e.keyFrom(t[n])).register(i);
}

const k = Object.freeze({});

class BindingContext {
    constructor(t, e) {
        if (void 0 !== t) if (void 0 !== e) this[t] = e; else for (const e in t) if (Object.prototype.hasOwnProperty.call(t, e)) this[e] = t[e];
    }
    static create(t, e) {
        return new BindingContext(t, e);
    }
    static get(t, e, s, r) {
        var i, n;
        if (null == t) throw new Error(`AUR0203:${t}`);
        let o = t.overrideContext;
        let h = t;
        if (s > 0) {
            while (s > 0) {
                s--;
                h = h.parentScope;
                if (null == (null === h || void 0 === h ? void 0 : h.overrideContext)) return;
            }
            o = h.overrideContext;
            return e in o ? o : o.bindingContext;
        }
        while (!(null === h || void 0 === h ? void 0 : h.isBoundary) && null != o && !(e in o) && !(o.bindingContext && e in o.bindingContext)) {
            h = null !== (i = h.parentScope) && void 0 !== i ? i : null;
            o = null !== (n = null === h || void 0 === h ? void 0 : h.overrideContext) && void 0 !== n ? n : null;
        }
        if (o) return e in o ? o : o.bindingContext;
        if (16 & r) return k;
        return t.bindingContext || t.overrideContext;
    }
}

class Scope {
    constructor(t, e, s, r) {
        this.parentScope = t;
        this.bindingContext = e;
        this.overrideContext = s;
        this.isBoundary = r;
    }
    static create(t, e, s) {
        return new Scope(null, t, null == e ? OverrideContext.create(t) : e, null !== s && void 0 !== s ? s : false);
    }
    static fromOverride(t) {
        if (null == t) throw new Error(`AUR0204:${t}`);
        return new Scope(null, t.bindingContext, t, false);
    }
    static fromParent(t, e) {
        if (null == t) throw new Error(`AUR0205:${t}`);
        return new Scope(t, e, OverrideContext.create(e), false);
    }
}

class OverrideContext {
    constructor(t) {
        this.bindingContext = t;
    }
    static create(t) {
        return new OverrideContext(t);
    }
}

const B = _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__.DI.createInterface("ISignaler", (t => t.singleton(Signaler)));

class Signaler {
    constructor() {
        this.signals = E();
    }
    dispatchSignal(t, e) {
        const s = this.signals[t];
        if (void 0 === s) return;
        let r;
        for (r of s.keys()) r.handleChange(void 0, void 0, e);
    }
    addSignalListener(t, e) {
        const s = this.signals;
        const r = s[t];
        if (void 0 === r) s[t] = new Set([ e ]); else r.add(e);
    }
    removeSignalListener(t, e) {
        const s = this.signals[t];
        if (s) s.delete(e);
    }
}

var $;

(function(t) {
    t[t["singleton"] = 1] = "singleton";
    t[t["interceptor"] = 2] = "interceptor";
})($ || ($ = {}));

function L(t) {
    return function(e) {
        return T.define(t, e);
    };
}

class BindingBehaviorDefinition {
    constructor(t, e, s, r, i) {
        this.Type = t;
        this.name = e;
        this.aliases = s;
        this.key = r;
        this.strategy = i;
    }
    static create(t, e) {
        let s;
        let r;
        if (g(t)) {
            s = t;
            r = {
                name: s
            };
        } else {
            s = t.name;
            r = t;
        }
        const h = Object.getPrototypeOf(e) === BindingInterceptor;
        return new BindingBehaviorDefinition(e, (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__.firstDefined)(P(e, "name"), s), (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__.mergeArrays)(P(e, "aliases"), r.aliases, e.aliases), T.keyFrom(s), (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__.fromAnnotationOrDefinitionOrTypeOrDefault)("strategy", r, e, (() => h ? 2 : 1)));
    }
    register(t) {
        const {Type: e, key: r, aliases: i, strategy: n} = this;
        switch (n) {
          case 1:
            _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__.Registration.singleton(r, e).register(t);
            break;

          case 2:
            _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__.Registration.instance(r, new BindingBehaviorFactory(t, e)).register(t);
            break;
        }
        _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__.Registration.aliasTo(r, e).register(t);
        C(i, T, r, t);
    }
}

class BindingBehaviorFactory {
    constructor(t, e) {
        this.ctn = t;
        this.Type = e;
        this.deps = _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__.DI.getDependencies(e);
    }
    construct(t, e) {
        const s = this.ctn;
        const r = this.deps;
        switch (r.length) {
          case 0:
            return new this.Type(t, e);

          case 1:
            return new this.Type(s.get(r[0]), t, e);

          case 2:
            return new this.Type(s.get(r[0]), s.get(r[1]), t, e);

          default:
            return new this.Type(...r.map((t => s.get(t))), t, e);
        }
    }
}

class BindingInterceptor {
    constructor(t, e) {
        this.binding = t;
        this.expr = e;
        this.interceptor = this;
        let s;
        while (t.interceptor !== this) {
            s = t.interceptor;
            t.interceptor = this;
            t = s;
        }
    }
    get oL() {
        return this.binding.oL;
    }
    get locator() {
        return this.binding.locator;
    }
    get $scope() {
        return this.binding.$scope;
    }
    get isBound() {
        return this.binding.isBound;
    }
    get obs() {
        return this.binding.obs;
    }
    get sourceExpression() {
        return this.binding.sourceExpression;
    }
    updateTarget(t, e) {
        this.binding.updateTarget(t, e);
    }
    updateSource(t, e) {
        this.binding.updateSource(t, e);
    }
    callSource(t) {
        return this.binding.callSource(t);
    }
    handleChange(t, e, s) {
        this.binding.handleChange(t, e, s);
    }
    handleCollectionChange(t, e) {
        this.binding.handleCollectionChange(t, e);
    }
    observe(t, e) {
        this.binding.observe(t, e);
    }
    observeCollection(t) {
        this.binding.observeCollection(t);
    }
    $bind(t, e) {
        this.binding.$bind(t, e);
    }
    $unbind(t) {
        this.binding.$unbind(t);
    }
}

const R = x("binding-behavior");

const P = (t, e) => A(U(e), t);

const T = Object.freeze({
    name: R,
    keyFrom(t) {
        return `${R}:${t}`;
    },
    isType(t) {
        return p(t) && y(R, t);
    },
    define(t, e) {
        const s = BindingBehaviorDefinition.create(t, e);
        m(R, s, s.Type);
        m(R, s, s);
        S(e, R);
        return s.Type;
    },
    getDefinition(t) {
        const e = A(R, t);
        if (void 0 === e) throw new Error(`AUR0151:${t.name}`);
        return e;
    },
    annotate(t, e, s) {
        m(U(e), s, t);
    },
    getAnnotation: P
});

function j(t) {
    return function(e) {
        return D.define(t, e);
    };
}

class ValueConverterDefinition {
    constructor(t, e, s, r) {
        this.Type = t;
        this.name = e;
        this.aliases = s;
        this.key = r;
    }
    static create(t, e) {
        let s;
        let r;
        if (g(t)) {
            s = t;
            r = {
                name: s
            };
        } else {
            s = t.name;
            r = t;
        }
        return new ValueConverterDefinition(e, (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__.firstDefined)(M(e, "name"), s), (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__.mergeArrays)(M(e, "aliases"), r.aliases, e.aliases), D.keyFrom(s));
    }
    register(t) {
        const {Type: e, key: r, aliases: i} = this;
        _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__.Registration.singleton(r, e).register(t);
        _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__.Registration.aliasTo(r, e).register(t);
        C(i, D, r, t);
    }
}

const I = x("value-converter");

const M = (t, e) => A(U(e), t);

const D = Object.freeze({
    name: I,
    keyFrom: t => `${I}:${t}`,
    isType(t) {
        return p(t) && y(I, t);
    },
    define(t, e) {
        const s = ValueConverterDefinition.create(t, e);
        m(I, s, s.Type);
        m(I, s, s);
        S(e, I);
        return s.Type;
    },
    getDefinition(t) {
        const e = A(I, t);
        if (void 0 === e) throw new Error(`AUR0152:${t.name}`);
        return e;
    },
    annotate(t, e, s) {
        m(U(e), s, t);
    },
    getAnnotation: M
});

var F;

(function(t) {
    t[t["CallsFunction"] = 128] = "CallsFunction";
    t[t["HasAncestor"] = 256] = "HasAncestor";
    t[t["IsPrimary"] = 512] = "IsPrimary";
    t[t["IsLeftHandSide"] = 1024] = "IsLeftHandSide";
    t[t["HasBind"] = 2048] = "HasBind";
    t[t["HasUnbind"] = 4096] = "HasUnbind";
    t[t["IsAssignable"] = 8192] = "IsAssignable";
    t[t["IsLiteral"] = 16384] = "IsLiteral";
    t[t["IsResource"] = 32768] = "IsResource";
    t[t["IsForDeclaration"] = 65536] = "IsForDeclaration";
    t[t["Type"] = 31] = "Type";
    t[t["AccessThis"] = 1793] = "AccessThis";
    t[t["AccessScope"] = 10082] = "AccessScope";
    t[t["ArrayLiteral"] = 17955] = "ArrayLiteral";
    t[t["ObjectLiteral"] = 17956] = "ObjectLiteral";
    t[t["PrimitiveLiteral"] = 17925] = "PrimitiveLiteral";
    t[t["Template"] = 17958] = "Template";
    t[t["Unary"] = 39] = "Unary";
    t[t["CallScope"] = 1448] = "CallScope";
    t[t["CallMember"] = 1161] = "CallMember";
    t[t["CallFunction"] = 1162] = "CallFunction";
    t[t["AccessMember"] = 9323] = "AccessMember";
    t[t["AccessKeyed"] = 9324] = "AccessKeyed";
    t[t["TaggedTemplate"] = 1197] = "TaggedTemplate";
    t[t["Binary"] = 46] = "Binary";
    t[t["Conditional"] = 63] = "Conditional";
    t[t["Assign"] = 8208] = "Assign";
    t[t["ValueConverter"] = 36913] = "ValueConverter";
    t[t["BindingBehavior"] = 38962] = "BindingBehavior";
    t[t["HtmlLiteral"] = 51] = "HtmlLiteral";
    t[t["ArrayBindingPattern"] = 65556] = "ArrayBindingPattern";
    t[t["ObjectBindingPattern"] = 65557] = "ObjectBindingPattern";
    t[t["BindingIdentifier"] = 65558] = "BindingIdentifier";
    t[t["ForOfStatement"] = 6199] = "ForOfStatement";
    t[t["Interpolation"] = 24] = "Interpolation";
    t[t["ArrayDestructuring"] = 90137] = "ArrayDestructuring";
    t[t["ObjectDestructuring"] = 106521] = "ObjectDestructuring";
    t[t["DestructuringAssignmentLeaf"] = 139289] = "DestructuringAssignmentLeaf";
})(F || (F = {}));

class Unparser {
    constructor() {
        this.text = "";
    }
    static unparse(t) {
        const e = new Unparser;
        t.accept(e);
        return e.text;
    }
    visitAccessMember(t) {
        t.object.accept(this);
        this.text += `.${t.name}`;
    }
    visitAccessKeyed(t) {
        t.object.accept(this);
        this.text += "[";
        t.key.accept(this);
        this.text += "]";
    }
    visitAccessThis(t) {
        if (0 === t.ancestor) {
            this.text += "$this";
            return;
        }
        this.text += "$parent";
        let e = t.ancestor - 1;
        while (e--) this.text += ".$parent";
    }
    visitAccessScope(t) {
        let e = t.ancestor;
        while (e--) this.text += "$parent.";
        this.text += t.name;
    }
    visitArrayLiteral(t) {
        const e = t.elements;
        this.text += "[";
        for (let t = 0, s = e.length; t < s; ++t) {
            if (0 !== t) this.text += ",";
            e[t].accept(this);
        }
        this.text += "]";
    }
    visitObjectLiteral(t) {
        const e = t.keys;
        const s = t.values;
        this.text += "{";
        for (let t = 0, r = e.length; t < r; ++t) {
            if (0 !== t) this.text += ",";
            this.text += `'${e[t]}':`;
            s[t].accept(this);
        }
        this.text += "}";
    }
    visitPrimitiveLiteral(t) {
        this.text += "(";
        if (g(t.value)) {
            const e = t.value.replace(/'/g, "\\'");
            this.text += `'${e}'`;
        } else this.text += `${t.value}`;
        this.text += ")";
    }
    visitCallFunction(t) {
        this.text += "(";
        t.func.accept(this);
        this.writeArgs(t.args);
        this.text += ")";
    }
    visitCallMember(t) {
        this.text += "(";
        t.object.accept(this);
        this.text += `.${t.name}`;
        this.writeArgs(t.args);
        this.text += ")";
    }
    visitCallScope(t) {
        this.text += "(";
        let e = t.ancestor;
        while (e--) this.text += "$parent.";
        this.text += t.name;
        this.writeArgs(t.args);
        this.text += ")";
    }
    visitTemplate(t) {
        const {cooked: e, expressions: s} = t;
        const r = s.length;
        this.text += "`";
        this.text += e[0];
        for (let t = 0; t < r; t++) {
            s[t].accept(this);
            this.text += e[t + 1];
        }
        this.text += "`";
    }
    visitTaggedTemplate(t) {
        const {cooked: e, expressions: s} = t;
        const r = s.length;
        t.func.accept(this);
        this.text += "`";
        this.text += e[0];
        for (let t = 0; t < r; t++) {
            s[t].accept(this);
            this.text += e[t + 1];
        }
        this.text += "`";
    }
    visitUnary(t) {
        this.text += `(${t.operation}`;
        if (t.operation.charCodeAt(0) >= 97) this.text += " ";
        t.expression.accept(this);
        this.text += ")";
    }
    visitBinary(t) {
        this.text += "(";
        t.left.accept(this);
        if (105 === t.operation.charCodeAt(0)) this.text += ` ${t.operation} `; else this.text += t.operation;
        t.right.accept(this);
        this.text += ")";
    }
    visitConditional(t) {
        this.text += "(";
        t.condition.accept(this);
        this.text += "?";
        t.yes.accept(this);
        this.text += ":";
        t.no.accept(this);
        this.text += ")";
    }
    visitAssign(t) {
        this.text += "(";
        t.target.accept(this);
        this.text += "=";
        t.value.accept(this);
        this.text += ")";
    }
    visitValueConverter(t) {
        const e = t.args;
        t.expression.accept(this);
        this.text += `|${t.name}`;
        for (let t = 0, s = e.length; t < s; ++t) {
            this.text += ":";
            e[t].accept(this);
        }
    }
    visitBindingBehavior(t) {
        const e = t.args;
        t.expression.accept(this);
        this.text += `&${t.name}`;
        for (let t = 0, s = e.length; t < s; ++t) {
            this.text += ":";
            e[t].accept(this);
        }
    }
    visitArrayBindingPattern(t) {
        const e = t.elements;
        this.text += "[";
        for (let t = 0, s = e.length; t < s; ++t) {
            if (0 !== t) this.text += ",";
            e[t].accept(this);
        }
        this.text += "]";
    }
    visitObjectBindingPattern(t) {
        const e = t.keys;
        const s = t.values;
        this.text += "{";
        for (let t = 0, r = e.length; t < r; ++t) {
            if (0 !== t) this.text += ",";
            this.text += `'${e[t]}':`;
            s[t].accept(this);
        }
        this.text += "}";
    }
    visitBindingIdentifier(t) {
        this.text += t.name;
    }
    visitHtmlLiteral(t) {
        throw new Error("visitHtmlLiteral");
    }
    visitForOfStatement(t) {
        t.declaration.accept(this);
        this.text += " of ";
        t.iterable.accept(this);
    }
    visitInterpolation(t) {
        const {parts: e, expressions: s} = t;
        const r = s.length;
        this.text += "${";
        this.text += e[0];
        for (let t = 0; t < r; t++) {
            s[t].accept(this);
            this.text += e[t + 1];
        }
        this.text += "}";
    }
    visitDestructuringAssignmentExpression(t) {
        const e = t.$kind;
        const s = 106521 === e;
        this.text += s ? "{" : "[";
        const r = t.list;
        const i = r.length;
        let n;
        let o;
        for (n = 0; n < i; n++) {
            o = r[n];
            switch (o.$kind) {
              case 139289:
                o.accept(this);
                break;

              case 90137:
              case 106521:
                {
                    const t = o.source;
                    if (t) {
                        t.accept(this);
                        this.text += ":";
                    }
                    o.accept(this);
                    break;
                }
            }
        }
        this.text += s ? "}" : "]";
    }
    visitDestructuringAssignmentSingleExpression(t) {
        t.source.accept(this);
        this.text += ":";
        t.target.accept(this);
        const e = t.initializer;
        if (void 0 !== e) {
            this.text += "=";
            e.accept(this);
        }
    }
    visitDestructuringAssignmentRestExpression(t) {
        this.text += "...";
        t.accept(this);
    }
    writeArgs(t) {
        this.text += "(";
        for (let e = 0, s = t.length; e < s; ++e) {
            if (0 !== e) this.text += ",";
            t[e].accept(this);
        }
        this.text += ")";
    }
}

class CustomExpression {
    constructor(t) {
        this.value = t;
    }
    evaluate(t, e, s, r) {
        return this.value;
    }
}

class BindingBehaviorExpression {
    constructor(t, e, s) {
        this.expression = t;
        this.name = e;
        this.args = s;
        this.behaviorKey = T.keyFrom(e);
    }
    get $kind() {
        return 38962;
    }
    get hasBind() {
        return true;
    }
    get hasUnbind() {
        return true;
    }
    evaluate(t, e, s, r) {
        return this.expression.evaluate(t, e, s, r);
    }
    assign(t, e, s, r) {
        return this.expression.assign(t, e, s, r);
    }
    bind(t, e, s) {
        if (this.expression.hasBind) this.expression.bind(t, e, s);
        const r = s.locator.get(this.behaviorKey);
        if (null == r) throw new Error(`AUR0101:${this.name}`);
        if (!(r instanceof BindingBehaviorFactory)) if (void 0 === s[this.behaviorKey]) {
            s[this.behaviorKey] = r;
            r.bind.call(r, t, e, s, ...this.args.map((r => r.evaluate(t, e, s.locator, null))));
        } else throw new Error(`AUR0102:${this.name}`);
    }
    unbind(t, e, s) {
        const r = this.behaviorKey;
        const i = s;
        if (void 0 !== i[r]) {
            if (p(i[r].unbind)) i[r].unbind(t, e, s);
            i[r] = void 0;
        }
        if (this.expression.hasUnbind) this.expression.unbind(t, e, s);
    }
    accept(t) {
        return t.visitBindingBehavior(this);
    }
    toString() {
        return Unparser.unparse(this);
    }
}

class ValueConverterExpression {
    constructor(t, e, s) {
        this.expression = t;
        this.name = e;
        this.args = s;
        this.converterKey = D.keyFrom(e);
    }
    get $kind() {
        return 36913;
    }
    get hasBind() {
        return false;
    }
    get hasUnbind() {
        return true;
    }
    evaluate(t, e, s, r) {
        const i = s.get(this.converterKey);
        if (null == i) throw new Error(`AUR0103:${this.name}`);
        if (null !== r && "handleChange" in r) {
            const t = i.signals;
            if (null != t) {
                const e = s.get(B);
                for (let s = 0, i = t.length; s < i; ++s) e.addSignalListener(t[s], r);
            }
        }
        if ("toView" in i) return i.toView(this.expression.evaluate(t, e, s, r), ...this.args.map((i => i.evaluate(t, e, s, r))));
        return this.expression.evaluate(t, e, s, r);
    }
    assign(t, e, s, r) {
        const i = s.get(this.converterKey);
        if (null == i) throw new Error(`AUR0104:${this.name}`);
        if ("fromView" in i) r = i.fromView(r, ...this.args.map((r => r.evaluate(t, e, s, null))));
        return this.expression.assign(t, e, s, r);
    }
    unbind(t, e, s) {
        const r = s.locator.get(this.converterKey);
        if (void 0 === r.signals) return;
        const i = s.locator.get(B);
        for (let t = 0; t < r.signals.length; ++t) i.removeSignalListener(r.signals[t], s);
    }
    accept(t) {
        return t.visitValueConverter(this);
    }
    toString() {
        return Unparser.unparse(this);
    }
}

class AssignExpression {
    constructor(t, e) {
        this.target = t;
        this.value = e;
    }
    get $kind() {
        return 8208;
    }
    get hasBind() {
        return false;
    }
    get hasUnbind() {
        return false;
    }
    evaluate(t, e, s, r) {
        return this.target.assign(t, e, s, this.value.evaluate(t, e, s, r));
    }
    assign(t, e, s, r) {
        this.value.assign(t, e, s, r);
        return this.target.assign(t, e, s, r);
    }
    accept(t) {
        return t.visitAssign(this);
    }
    toString() {
        return Unparser.unparse(this);
    }
}

class ConditionalExpression {
    constructor(t, e, s) {
        this.condition = t;
        this.yes = e;
        this.no = s;
    }
    get $kind() {
        return 63;
    }
    get hasBind() {
        return false;
    }
    get hasUnbind() {
        return false;
    }
    evaluate(t, e, s, r) {
        return this.condition.evaluate(t, e, s, r) ? this.yes.evaluate(t, e, s, r) : this.no.evaluate(t, e, s, r);
    }
    assign(t, e, s, r) {
        return;
    }
    accept(t) {
        return t.visitConditional(this);
    }
    toString() {
        return Unparser.unparse(this);
    }
}

class AccessThisExpression {
    constructor(t = 0) {
        this.ancestor = t;
    }
    get $kind() {
        return 1793;
    }
    get hasBind() {
        return false;
    }
    get hasUnbind() {
        return false;
    }
    evaluate(t, e, s, r) {
        var i;
        let n = e.overrideContext;
        let o = e;
        let h = this.ancestor;
        while (h-- && n) {
            o = o.parentScope;
            n = null !== (i = null === o || void 0 === o ? void 0 : o.overrideContext) && void 0 !== i ? i : null;
        }
        return h < 1 && n ? n.bindingContext : void 0;
    }
    assign(t, e, s, r) {
        return;
    }
    accept(t) {
        return t.visitAccessThis(this);
    }
    toString() {
        return Unparser.unparse(this);
    }
}

AccessThisExpression.$this = new AccessThisExpression(0);

AccessThisExpression.$parent = new AccessThisExpression(1);

class AccessScopeExpression {
    constructor(t, e = 0) {
        this.name = t;
        this.ancestor = e;
    }
    get $kind() {
        return 10082;
    }
    get hasBind() {
        return false;
    }
    get hasUnbind() {
        return false;
    }
    evaluate(t, e, s, r) {
        const i = BindingContext.get(e, this.name, this.ancestor, t);
        if (null !== r) r.observe(i, this.name);
        const n = i[this.name];
        if (null == n && "$host" === this.name) throw new Error("AUR0105");
        if (1 & t) return n;
        return null == n ? "" : n;
    }
    assign(t, e, s, r) {
        var i;
        if ("$host" === this.name) throw new Error("AUR0106");
        const n = BindingContext.get(e, this.name, this.ancestor, t);
        if (n instanceof Object) if (void 0 !== (null === (i = n.$observers) || void 0 === i ? void 0 : i[this.name])) {
            n.$observers[this.name].setValue(r, t);
            return r;
        } else return n[this.name] = r;
        return;
    }
    accept(t) {
        return t.visitAccessScope(this);
    }
    toString() {
        return Unparser.unparse(this);
    }
}

class AccessMemberExpression {
    constructor(t, e) {
        this.object = t;
        this.name = e;
    }
    get $kind() {
        return 9323;
    }
    get hasBind() {
        return false;
    }
    get hasUnbind() {
        return false;
    }
    evaluate(t, e, s, r) {
        const i = this.object.evaluate(t, e, s, (128 & t) > 0 ? null : r);
        if (1 & t) {
            if (null == i) return i;
            if (null !== r) r.observe(i, this.name);
            return i[this.name];
        }
        if (null !== r && i instanceof Object) r.observe(i, this.name);
        return i ? i[this.name] : "";
    }
    assign(t, e, s, r) {
        const i = this.object.evaluate(t, e, s, null);
        if (i instanceof Object) if (void 0 !== i.$observers && void 0 !== i.$observers[this.name]) i.$observers[this.name].setValue(r, t); else i[this.name] = r; else this.object.assign(t, e, s, {
            [this.name]: r
        });
        return r;
    }
    accept(t) {
        return t.visitAccessMember(this);
    }
    toString() {
        return Unparser.unparse(this);
    }
}

class AccessKeyedExpression {
    constructor(t, e) {
        this.object = t;
        this.key = e;
    }
    get $kind() {
        return 9324;
    }
    get hasBind() {
        return false;
    }
    get hasUnbind() {
        return false;
    }
    evaluate(t, e, s, r) {
        const i = this.object.evaluate(t, e, s, (128 & t) > 0 ? null : r);
        if (i instanceof Object) {
            const n = this.key.evaluate(t, e, s, (128 & t) > 0 ? null : r);
            if (null !== r) r.observe(i, n);
            return i[n];
        }
        return;
    }
    assign(t, e, s, r) {
        const i = this.object.evaluate(t, e, s, null);
        const n = this.key.evaluate(t, e, s, null);
        return i[n] = r;
    }
    accept(t) {
        return t.visitAccessKeyed(this);
    }
    toString() {
        return Unparser.unparse(this);
    }
}

class CallScopeExpression {
    constructor(t, e, s = 0) {
        this.name = t;
        this.args = e;
        this.ancestor = s;
    }
    get $kind() {
        return 1448;
    }
    get hasBind() {
        return false;
    }
    get hasUnbind() {
        return false;
    }
    evaluate(t, e, s, r) {
        const i = this.args.map((i => i.evaluate(t, e, s, r)));
        const n = BindingContext.get(e, this.name, this.ancestor, t);
        const o = N(t, n, this.name);
        if (o) return o.apply(n, i);
        return;
    }
    assign(t, e, s, r) {
        return;
    }
    accept(t) {
        return t.visitCallScope(this);
    }
    toString() {
        return Unparser.unparse(this);
    }
}

class CallMemberExpression {
    constructor(t, e, s) {
        this.object = t;
        this.name = e;
        this.args = s;
    }
    get $kind() {
        return 1161;
    }
    get hasBind() {
        return false;
    }
    get hasUnbind() {
        return false;
    }
    evaluate(t, e, s, r) {
        const i = this.object.evaluate(t, e, s, (128 & t) > 0 ? null : r);
        const n = this.args.map((i => i.evaluate(t, e, s, r)));
        const o = N(t, i, this.name);
        if (o) return o.apply(i, n);
        return;
    }
    assign(t, e, s, r) {
        return;
    }
    accept(t) {
        return t.visitCallMember(this);
    }
    toString() {
        return Unparser.unparse(this);
    }
}

class CallFunctionExpression {
    constructor(t, e) {
        this.func = t;
        this.args = e;
    }
    get $kind() {
        return 1162;
    }
    get hasBind() {
        return false;
    }
    get hasUnbind() {
        return false;
    }
    evaluate(t, e, s, r) {
        const i = this.func.evaluate(t, e, s, r);
        if (p(i)) return i(...this.args.map((i => i.evaluate(t, e, s, r))));
        if (!(8 & t) && null == i) return;
        throw new Error("AUR0107");
    }
    assign(t, e, s, r) {
        return;
    }
    accept(t) {
        return t.visitCallFunction(this);
    }
    toString() {
        return Unparser.unparse(this);
    }
}

class BinaryExpression {
    constructor(t, e, s) {
        this.operation = t;
        this.left = e;
        this.right = s;
    }
    get $kind() {
        return 46;
    }
    get hasBind() {
        return false;
    }
    get hasUnbind() {
        return false;
    }
    evaluate(t, e, s, r) {
        switch (this.operation) {
          case "&&":
            return this.left.evaluate(t, e, s, r) && this.right.evaluate(t, e, s, r);

          case "||":
            return this.left.evaluate(t, e, s, r) || this.right.evaluate(t, e, s, r);

          case "==":
            return this.left.evaluate(t, e, s, r) == this.right.evaluate(t, e, s, r);

          case "===":
            return this.left.evaluate(t, e, s, r) === this.right.evaluate(t, e, s, r);

          case "!=":
            return this.left.evaluate(t, e, s, r) != this.right.evaluate(t, e, s, r);

          case "!==":
            return this.left.evaluate(t, e, s, r) !== this.right.evaluate(t, e, s, r);

          case "instanceof":
            {
                const i = this.right.evaluate(t, e, s, r);
                if (p(i)) return this.left.evaluate(t, e, s, r) instanceof i;
                return false;
            }

          case "in":
            {
                const i = this.right.evaluate(t, e, s, r);
                if (i instanceof Object) return this.left.evaluate(t, e, s, r) in i;
                return false;
            }

          case "+":
            {
                const i = this.left.evaluate(t, e, s, r);
                const n = this.right.evaluate(t, e, s, r);
                if ((1 & t) > 0) return i + n;
                if (!i || !n) {
                    if ((0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__.isNumberOrBigInt)(i) || (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__.isNumberOrBigInt)(n)) return (i || 0) + (n || 0);
                    if ((0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__.isStringOrDate)(i) || (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__.isStringOrDate)(n)) return (i || "") + (n || "");
                }
                return i + n;
            }

          case "-":
            return this.left.evaluate(t, e, s, r) - this.right.evaluate(t, e, s, r);

          case "*":
            return this.left.evaluate(t, e, s, r) * this.right.evaluate(t, e, s, r);

          case "/":
            return this.left.evaluate(t, e, s, r) / this.right.evaluate(t, e, s, r);

          case "%":
            return this.left.evaluate(t, e, s, r) % this.right.evaluate(t, e, s, r);

          case "<":
            return this.left.evaluate(t, e, s, r) < this.right.evaluate(t, e, s, r);

          case ">":
            return this.left.evaluate(t, e, s, r) > this.right.evaluate(t, e, s, r);

          case "<=":
            return this.left.evaluate(t, e, s, r) <= this.right.evaluate(t, e, s, r);

          case ">=":
            return this.left.evaluate(t, e, s, r) >= this.right.evaluate(t, e, s, r);

          default:
            throw new Error(`AUR0108:${this.operation}`);
        }
    }
    assign(t, e, s, r) {
        return;
    }
    accept(t) {
        return t.visitBinary(this);
    }
    toString() {
        return Unparser.unparse(this);
    }
}

class UnaryExpression {
    constructor(t, e) {
        this.operation = t;
        this.expression = e;
    }
    get $kind() {
        return 39;
    }
    get hasBind() {
        return false;
    }
    get hasUnbind() {
        return false;
    }
    evaluate(t, e, s, r) {
        switch (this.operation) {
          case "void":
            return void this.expression.evaluate(t, e, s, r);

          case "typeof":
            return typeof this.expression.evaluate(1 | t, e, s, r);

          case "!":
            return !this.expression.evaluate(t, e, s, r);

          case "-":
            return -this.expression.evaluate(t, e, s, r);

          case "+":
            return +this.expression.evaluate(t, e, s, r);

          default:
            throw new Error(`AUR0109:${this.operation}`);
        }
    }
    assign(t, e, s, r) {
        return;
    }
    accept(t) {
        return t.visitUnary(this);
    }
    toString() {
        return Unparser.unparse(this);
    }
}

class PrimitiveLiteralExpression {
    constructor(t) {
        this.value = t;
    }
    get $kind() {
        return 17925;
    }
    get hasBind() {
        return false;
    }
    get hasUnbind() {
        return false;
    }
    evaluate(t, e, s, r) {
        return this.value;
    }
    assign(t, e, s, r) {
        return;
    }
    accept(t) {
        return t.visitPrimitiveLiteral(this);
    }
    toString() {
        return Unparser.unparse(this);
    }
}

PrimitiveLiteralExpression.$undefined = new PrimitiveLiteralExpression(void 0);

PrimitiveLiteralExpression.$null = new PrimitiveLiteralExpression(null);

PrimitiveLiteralExpression.$true = new PrimitiveLiteralExpression(true);

PrimitiveLiteralExpression.$false = new PrimitiveLiteralExpression(false);

PrimitiveLiteralExpression.$empty = new PrimitiveLiteralExpression("");

class HtmlLiteralExpression {
    constructor(t) {
        this.parts = t;
    }
    get $kind() {
        return 51;
    }
    get hasBind() {
        return false;
    }
    get hasUnbind() {
        return false;
    }
    evaluate(t, e, s, r) {
        let i = "";
        for (let n = 0; n < this.parts.length; ++n) {
            const o = this.parts[n].evaluate(t, e, s, r);
            if (null == o) continue;
            i += o;
        }
        return i;
    }
    assign(t, e, s, r, i) {
        return;
    }
    accept(t) {
        return t.visitHtmlLiteral(this);
    }
    toString() {
        return Unparser.unparse(this);
    }
}

class ArrayLiteralExpression {
    constructor(t) {
        this.elements = t;
    }
    get $kind() {
        return 17955;
    }
    get hasBind() {
        return false;
    }
    get hasUnbind() {
        return false;
    }
    evaluate(t, e, s, r) {
        return this.elements.map((i => i.evaluate(t, e, s, r)));
    }
    assign(t, e, s, r) {
        return;
    }
    accept(t) {
        return t.visitArrayLiteral(this);
    }
    toString() {
        return Unparser.unparse(this);
    }
}

ArrayLiteralExpression.$empty = new ArrayLiteralExpression(_aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__.emptyArray);

class ObjectLiteralExpression {
    constructor(t, e) {
        this.keys = t;
        this.values = e;
    }
    get $kind() {
        return 17956;
    }
    get hasBind() {
        return false;
    }
    get hasUnbind() {
        return false;
    }
    evaluate(t, e, s, r) {
        const i = {};
        for (let n = 0; n < this.keys.length; ++n) i[this.keys[n]] = this.values[n].evaluate(t, e, s, r);
        return i;
    }
    assign(t, e, s, r) {
        return;
    }
    accept(t) {
        return t.visitObjectLiteral(this);
    }
    toString() {
        return Unparser.unparse(this);
    }
}

ObjectLiteralExpression.$empty = new ObjectLiteralExpression(_aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__.emptyArray, _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__.emptyArray);

class TemplateExpression {
    constructor(t, e = _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__.emptyArray) {
        this.cooked = t;
        this.expressions = e;
    }
    get $kind() {
        return 17958;
    }
    get hasBind() {
        return false;
    }
    get hasUnbind() {
        return false;
    }
    evaluate(t, e, s, r) {
        let i = this.cooked[0];
        for (let n = 0; n < this.expressions.length; ++n) {
            i += String(this.expressions[n].evaluate(t, e, s, r));
            i += this.cooked[n + 1];
        }
        return i;
    }
    assign(t, e, s, r) {
        return;
    }
    accept(t) {
        return t.visitTemplate(this);
    }
    toString() {
        return Unparser.unparse(this);
    }
}

TemplateExpression.$empty = new TemplateExpression([ "" ]);

class TaggedTemplateExpression {
    constructor(t, e, s, r = _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__.emptyArray) {
        this.cooked = t;
        this.func = s;
        this.expressions = r;
        t.raw = e;
    }
    get $kind() {
        return 1197;
    }
    get hasBind() {
        return false;
    }
    get hasUnbind() {
        return false;
    }
    evaluate(t, e, s, r) {
        const i = this.expressions.map((i => i.evaluate(t, e, s, r)));
        const n = this.func.evaluate(t, e, s, r);
        if (!p(n)) throw new Error(`AUR0110`);
        return n(this.cooked, ...i);
    }
    assign(t, e, s, r) {
        return;
    }
    accept(t) {
        return t.visitTaggedTemplate(this);
    }
    toString() {
        return Unparser.unparse(this);
    }
}

class ArrayBindingPattern {
    constructor(t) {
        this.elements = t;
    }
    get $kind() {
        return 65556;
    }
    get hasBind() {
        return false;
    }
    get hasUnbind() {
        return false;
    }
    evaluate(t, e, s, r) {
        return;
    }
    assign(t, e, s, r) {
        return;
    }
    accept(t) {
        return t.visitArrayBindingPattern(this);
    }
    toString() {
        return Unparser.unparse(this);
    }
}

class ObjectBindingPattern {
    constructor(t, e) {
        this.keys = t;
        this.values = e;
    }
    get $kind() {
        return 65557;
    }
    get hasBind() {
        return false;
    }
    get hasUnbind() {
        return false;
    }
    evaluate(t, e, s, r) {
        return;
    }
    assign(t, e, s, r) {
        return;
    }
    accept(t) {
        return t.visitObjectBindingPattern(this);
    }
    toString() {
        return Unparser.unparse(this);
    }
}

class BindingIdentifier {
    constructor(t) {
        this.name = t;
    }
    get $kind() {
        return 65558;
    }
    get hasBind() {
        return false;
    }
    get hasUnbind() {
        return false;
    }
    evaluate(t, e, s, r) {
        return this.name;
    }
    accept(t) {
        return t.visitBindingIdentifier(this);
    }
    toString() {
        return Unparser.unparse(this);
    }
}

const V = Object.prototype.toString;

class ForOfStatement {
    constructor(t, e) {
        this.declaration = t;
        this.iterable = e;
    }
    get $kind() {
        return 6199;
    }
    get hasBind() {
        return false;
    }
    get hasUnbind() {
        return false;
    }
    evaluate(t, e, s, r) {
        return this.iterable.evaluate(t, e, s, r);
    }
    assign(t, e, s, r) {
        return;
    }
    count(t, e) {
        switch (V.call(e)) {
          case "[object Array]":
            return e.length;

          case "[object Map]":
            return e.size;

          case "[object Set]":
            return e.size;

          case "[object Number]":
            return e;

          case "[object Null]":
            return 0;

          case "[object Undefined]":
            return 0;

          default:
            throw new Error(`Cannot count ${V.call(e)}`);
        }
    }
    iterate(t, e, s) {
        switch (V.call(e)) {
          case "[object Array]":
            return K(e, s);

          case "[object Map]":
            return q(e, s);

          case "[object Set]":
            return H(e, s);

          case "[object Number]":
            return Q(e, s);

          case "[object Null]":
            return;

          case "[object Undefined]":
            return;

          default:
            throw new Error(`Cannot iterate over ${V.call(e)}`);
        }
    }
    bind(t, e, s) {
        if (this.iterable.hasBind) this.iterable.bind(t, e, s);
    }
    unbind(t, e, s) {
        if (this.iterable.hasUnbind) this.iterable.unbind(t, e, s);
    }
    accept(t) {
        return t.visitForOfStatement(this);
    }
    toString() {
        return Unparser.unparse(this);
    }
}

class Interpolation {
    constructor(t, e = _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__.emptyArray) {
        this.parts = t;
        this.expressions = e;
        this.isMulti = e.length > 1;
        this.firstExpression = e[0];
    }
    get $kind() {
        return 24;
    }
    get hasBind() {
        return false;
    }
    get hasUnbind() {
        return false;
    }
    evaluate(t, e, s, r) {
        if (this.isMulti) {
            let i = this.parts[0];
            for (let n = 0; n < this.expressions.length; ++n) {
                i += String(this.expressions[n].evaluate(t, e, s, r));
                i += this.parts[n + 1];
            }
            return i;
        } else return `${this.parts[0]}${this.firstExpression.evaluate(t, e, s, r)}${this.parts[1]}`;
    }
    assign(t, e, s, r) {
        return;
    }
    accept(t) {
        return t.visitInterpolation(this);
    }
    toString() {
        return Unparser.unparse(this);
    }
}

class DestructuringAssignmentExpression {
    constructor(t, e, s, r) {
        this.$kind = t;
        this.list = e;
        this.source = s;
        this.initializer = r;
    }
    get hasBind() {
        return false;
    }
    get hasUnbind() {
        return false;
    }
    evaluate(t, e, s, r) {
        return;
    }
    assign(t, e, s, r) {
        var i;
        const n = this.list;
        const o = n.length;
        let h;
        let c;
        for (h = 0; h < o; h++) {
            c = n[h];
            switch (c.$kind) {
              case 139289:
                c.assign(t, e, s, r);
                break;

              case 90137:
              case 106521:
                {
                    if ("object" !== typeof r || null === r) throw new Error("AUR0112");
                    let n = c.source.evaluate(t, Scope.create(r), s, null);
                    if (void 0 === n) n = null === (i = c.initializer) || void 0 === i ? void 0 : i.evaluate(t, e, s, null);
                    c.assign(t, e, s, n);
                    break;
                }
            }
        }
    }
    accept(t) {
        return t.visitDestructuringAssignmentExpression(this);
    }
    toString() {
        return Unparser.unparse(this);
    }
}

class DestructuringAssignmentSingleExpression {
    constructor(t, e, s) {
        this.target = t;
        this.source = e;
        this.initializer = s;
    }
    get $kind() {
        return 139289;
    }
    evaluate(t, e, s, r) {
        return;
    }
    assign(t, e, s, r) {
        var i;
        if (null == r) return;
        if ("object" !== typeof r) throw new Error("AUR0112");
        let n = this.source.evaluate(t, Scope.create(r), s, null);
        if (void 0 === n) n = null === (i = this.initializer) || void 0 === i ? void 0 : i.evaluate(t, e, s, null);
        this.target.assign(t, e, s, n);
    }
    accept(t) {
        return t.visitDestructuringAssignmentSingleExpression(this);
    }
    toString() {
        return Unparser.unparse(this);
    }
}

class DestructuringAssignmentRestExpression {
    constructor(t, e) {
        this.target = t;
        this.indexOrProperties = e;
    }
    get $kind() {
        return 139289;
    }
    evaluate(t, e, s, r) {
        return;
    }
    assign(t, e, s, r) {
        if (null == r) return;
        if ("object" !== typeof r) throw new Error("AUR0112");
        const i = this.indexOrProperties;
        let n;
        if ((0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__.isArrayIndex)(i)) {
            if (!Array.isArray(r)) throw new Error("AUR0112");
            n = r.slice(i);
        } else n = Object.entries(r).reduce(((t, [e, s]) => {
            if (!i.includes(e)) t[e] = s;
            return t;
        }), {});
        this.target.assign(t, e, s, n);
    }
    accept(t) {
        return t.visitDestructuringAssignmentRestExpression(this);
    }
    toString() {
        return Unparser.unparse(this);
    }
}

function N(t, e, s) {
    const r = null == e ? null : e[s];
    if (p(r)) return r;
    if (!(8 & t) && null == r) return null;
    throw new Error(`AUR0111:${s}`);
}

function K(t, e) {
    for (let s = 0, r = t.length; s < r; ++s) e(t, s, t[s]);
}

function q(t, e) {
    const s = Array(t.size);
    let r = -1;
    for (const e of t.entries()) s[++r] = e;
    K(s, e);
}

function H(t, e) {
    const s = Array(t.size);
    let r = -1;
    for (const e of t.keys()) s[++r] = e;
    K(s, e);
}

function Q(t, e) {
    const s = Array(t);
    for (let e = 0; e < t; ++e) s[e] = e;
    K(s, e);
}

const _ = _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__.DI.createInterface("ICoercionConfiguration");

var z;

(function(t) {
    t[t["oneTime"] = 1] = "oneTime";
    t[t["toView"] = 2] = "toView";
    t[t["fromView"] = 4] = "fromView";
    t[t["twoWay"] = 6] = "twoWay";
    t[t["default"] = 8] = "default";
})(z || (z = {}));

var W;

(function(t) {
    t[t["none"] = 0] = "none";
    t[t["persistentBindingFlags"] = 961] = "persistentBindingFlags";
    t[t["allowParentScopeTraversal"] = 64] = "allowParentScopeTraversal";
    t[t["observeLeafPropertiesOnly"] = 128] = "observeLeafPropertiesOnly";
    t[t["targetObserverFlags"] = 769] = "targetObserverFlags";
    t[t["noFlush"] = 256] = "noFlush";
    t[t["persistentTargetObserverQueue"] = 512] = "persistentTargetObserverQueue";
    t[t["bindingStrategy"] = 1] = "bindingStrategy";
    t[t["isStrictBindingStrategy"] = 1] = "isStrictBindingStrategy";
    t[t["fromBind"] = 2] = "fromBind";
    t[t["fromUnbind"] = 4] = "fromUnbind";
    t[t["mustEvaluate"] = 8] = "mustEvaluate";
    t[t["isTraversingParentScope"] = 16] = "isTraversingParentScope";
    t[t["dispose"] = 32] = "dispose";
})(W || (W = {}));

var G;

(function(t) {
    t[t["None"] = 0] = "None";
    t[t["Subscriber0"] = 1] = "Subscriber0";
    t[t["Subscriber1"] = 2] = "Subscriber1";
    t[t["Subscriber2"] = 4] = "Subscriber2";
    t[t["SubscribersRest"] = 8] = "SubscribersRest";
    t[t["Any"] = 15] = "Any";
})(G || (G = {}));

var Z;

(function(t) {
    t[t["none"] = 0] = "none";
    t[t["capturing"] = 1] = "capturing";
    t[t["bubbling"] = 2] = "bubbling";
})(Z || (Z = {}));

var J;

(function(t) {
    t[t["indexed"] = 8] = "indexed";
    t[t["keyed"] = 4] = "keyed";
    t[t["array"] = 9] = "array";
    t[t["map"] = 6] = "map";
    t[t["set"] = 7] = "set";
})(J || (J = {}));

var X;

(function(t) {
    t[t["None"] = 0] = "None";
    t[t["Observer"] = 1] = "Observer";
    t[t["Node"] = 2] = "Node";
    t[t["Layout"] = 4] = "Layout";
    t[t["Primtive"] = 8] = "Primtive";
    t[t["Array"] = 18] = "Array";
    t[t["Set"] = 34] = "Set";
    t[t["Map"] = 66] = "Map";
})(X || (X = {}));

function Y(t, e) {
    const {length: s} = t;
    const r = Array(s);
    let i = 0;
    while (i < s) {
        r[i] = t[i];
        ++i;
    }
    if (void 0 !== e) r.deletedItems = e.slice(0); else if (void 0 !== t.deletedItems) r.deletedItems = t.deletedItems.slice(0); else r.deletedItems = [];
    r.isIndexMap = true;
    return r;
}

function tt(t = 0) {
    const e = Array(t);
    let s = 0;
    while (s < t) e[s] = s++;
    e.deletedItems = [];
    e.isIndexMap = true;
    return e;
}

function et(t) {
    const e = t.slice();
    e.deletedItems = t.deletedItems.slice();
    e.isIndexMap = true;
    return e;
}

function st(t) {
    return t instanceof Array && true === t.isIndexMap;
}

function rt(t) {
    return null == t ? it : it(t);
}

function it(t) {
    const e = t.prototype;
    v(e, "subs", {
        get: nt
    });
    b(e, "subscribe", ot);
    b(e, "unsubscribe", ht);
}

class SubscriberRecord {
    constructor() {
        this.sf = 0;
        this.count = 0;
    }
    add(t) {
        if (this.has(t)) return false;
        const e = this.sf;
        if (0 === (1 & e)) {
            this.s0 = t;
            this.sf |= 1;
        } else if (0 === (2 & e)) {
            this.s1 = t;
            this.sf |= 2;
        } else if (0 === (4 & e)) {
            this.s2 = t;
            this.sf |= 4;
        } else if (0 === (8 & e)) {
            this.sr = [ t ];
            this.sf |= 8;
        } else this.sr.push(t);
        ++this.count;
        return true;
    }
    has(t) {
        const e = this.sf;
        if ((1 & e) > 0 && this.s0 === t) return true;
        if ((2 & e) > 0 && this.s1 === t) return true;
        if ((4 & e) > 0 && this.s2 === t) return true;
        if ((8 & e) > 0) {
            const e = this.sr;
            const s = e.length;
            let r = 0;
            for (;r < s; ++r) if (e[r] === t) return true;
        }
        return false;
    }
    any() {
        return 0 !== this.sf;
    }
    remove(t) {
        const e = this.sf;
        if ((1 & e) > 0 && this.s0 === t) {
            this.s0 = void 0;
            this.sf = 1 ^ (1 | this.sf);
            --this.count;
            return true;
        } else if ((2 & e) > 0 && this.s1 === t) {
            this.s1 = void 0;
            this.sf = 2 ^ (2 | this.sf);
            --this.count;
            return true;
        } else if ((4 & e) > 0 && this.s2 === t) {
            this.s2 = void 0;
            this.sf = 4 ^ (4 | this.sf);
            --this.count;
            return true;
        } else if ((8 & e) > 0) {
            const e = this.sr;
            const s = e.length;
            let r = 0;
            for (;r < s; ++r) if (e[r] === t) {
                e.splice(r, 1);
                if (1 === s) this.sf = 8 ^ (8 | this.sf);
                --this.count;
                return true;
            }
        }
        return false;
    }
    notify(t, e, s) {
        const r = this.s0;
        const i = this.s1;
        const n = this.s2;
        let o = this.sr;
        if (void 0 !== o) o = o.slice();
        if (void 0 !== r) r.handleChange(t, e, s);
        if (void 0 !== i) i.handleChange(t, e, s);
        if (void 0 !== n) n.handleChange(t, e, s);
        if (void 0 !== o) {
            const r = o.length;
            let i;
            let n = 0;
            for (;n < r; ++n) {
                i = o[n];
                if (void 0 !== i) i.handleChange(t, e, s);
            }
        }
    }
    notifyCollection(t, e) {
        const s = this.s0;
        const r = this.s1;
        const i = this.s2;
        let n = this.sr;
        if (void 0 !== n) n = n.slice();
        if (void 0 !== s) s.handleCollectionChange(t, e);
        if (void 0 !== r) r.handleCollectionChange(t, e);
        if (void 0 !== i) i.handleCollectionChange(t, e);
        if (void 0 !== n) {
            const s = n.length;
            let r;
            let i = 0;
            for (;i < s; ++i) {
                r = n[i];
                if (void 0 !== r) r.handleCollectionChange(t, e);
            }
        }
    }
}

function nt() {
    return w(this, "subs", new SubscriberRecord);
}

function ot(t) {
    return this.subs.add(t);
}

function ht(t) {
    return this.subs.remove(t);
}

function ct(t) {
    return null == t ? ut : ut(t);
}

function ut(t) {
    const e = t.prototype;
    v(e, "queue", {
        get: at
    });
}

class FlushQueue {
    constructor() {
        this.t = false;
        this.i = new Set;
    }
    get count() {
        return this.i.size;
    }
    add(t) {
        this.i.add(t);
        if (this.t) return;
        this.t = true;
        try {
            this.i.forEach(lt);
        } finally {
            this.t = false;
        }
    }
    clear() {
        this.i.clear();
        this.t = false;
    }
}

FlushQueue.instance = new FlushQueue;

function at() {
    return FlushQueue.instance;
}

function lt(t, e, s) {
    s.delete(t);
    t.flush();
}

class CollectionLengthObserver {
    constructor(t) {
        this.owner = t;
        this.type = 18;
        this.f = 0;
        this.v = this.h = (this.o = t.collection).length;
    }
    getValue() {
        return this.o.length;
    }
    setValue(t, e) {
        const s = this.v;
        if (t !== s && (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__.isArrayIndex)(t)) {
            if (0 === (256 & e)) this.o.length = t;
            this.v = t;
            this.h = s;
            this.f = e;
            this.queue.add(this);
        }
    }
    handleCollectionChange(t, e) {
        const s = this.v;
        const r = this.o.length;
        if ((this.v = r) !== s) {
            this.h = s;
            this.f = e;
            this.queue.add(this);
        }
    }
    flush() {
        pt = this.h;
        this.h = this.v;
        this.subs.notify(this.v, pt, this.f);
    }
}

class CollectionSizeObserver {
    constructor(t) {
        this.owner = t;
        this.f = 0;
        this.v = this.h = (this.o = t.collection).size;
        this.type = this.o instanceof Map ? 66 : 34;
    }
    getValue() {
        return this.o.size;
    }
    setValue() {
        throw new Error("AUR02");
    }
    handleCollectionChange(t, e) {
        const s = this.v;
        const r = this.o.size;
        if ((this.v = r) !== s) {
            this.h = s;
            this.f = e;
            this.queue.add(this);
        }
    }
    flush() {
        pt = this.h;
        this.h = this.v;
        this.subs.notify(this.v, pt, this.f);
    }
}

function ft(t) {
    const e = t.prototype;
    b(e, "subscribe", dt, true);
    b(e, "unsubscribe", vt, true);
    ct(t);
    rt(t);
}

function dt(t) {
    if (this.subs.add(t) && 1 === this.subs.count) this.owner.subscribe(this);
}

function vt(t) {
    if (this.subs.remove(t) && 0 === this.subs.count) this.owner.subscribe(this);
}

ft(CollectionLengthObserver);

ft(CollectionSizeObserver);

let pt;

const gt = new WeakMap;

function wt(t, e) {
    if (t === e) return 0;
    t = null === t ? "null" : t.toString();
    e = null === e ? "null" : e.toString();
    return t < e ? -1 : 1;
}

function bt(t, e) {
    if (void 0 === t) if (void 0 === e) return 0; else return 1;
    if (void 0 === e) return -1;
    return 0;
}

function Et(t, e, s, r, i) {
    let n, o, h, c, u;
    let a, l;
    for (a = s + 1; a < r; a++) {
        n = t[a];
        o = e[a];
        for (l = a - 1; l >= s; l--) {
            h = t[l];
            c = e[l];
            u = i(h, n);
            if (u > 0) {
                t[l + 1] = h;
                e[l + 1] = c;
            } else break;
        }
        t[l + 1] = n;
        e[l + 1] = o;
    }
}

function At(t, e, s, r, i) {
    let n = 0, o = 0;
    let h, c, u;
    let a, l, f;
    let d, v, p;
    let g, w;
    let b, E, A, y;
    let m, U, x, S;
    while (true) {
        if (r - s <= 10) {
            Et(t, e, s, r, i);
            return;
        }
        n = s + (r - s >> 1);
        h = t[s];
        a = e[s];
        c = t[r - 1];
        l = e[r - 1];
        u = t[n];
        f = e[n];
        d = i(h, c);
        if (d > 0) {
            g = h;
            w = a;
            h = c;
            a = l;
            c = g;
            l = w;
        }
        v = i(h, u);
        if (v >= 0) {
            g = h;
            w = a;
            h = u;
            a = f;
            u = c;
            f = l;
            c = g;
            l = w;
        } else {
            p = i(c, u);
            if (p > 0) {
                g = c;
                w = l;
                c = u;
                l = f;
                u = g;
                f = w;
            }
        }
        t[s] = h;
        e[s] = a;
        t[r - 1] = u;
        e[r - 1] = f;
        b = c;
        E = l;
        A = s + 1;
        y = r - 1;
        t[n] = t[A];
        e[n] = e[A];
        t[A] = b;
        e[A] = E;
        t: for (o = A + 1; o < y; o++) {
            m = t[o];
            U = e[o];
            x = i(m, b);
            if (x < 0) {
                t[o] = t[A];
                e[o] = e[A];
                t[A] = m;
                e[A] = U;
                A++;
            } else if (x > 0) {
                do {
                    y--;
                    if (y == o) break t;
                    S = t[y];
                    x = i(S, b);
                } while (x > 0);
                t[o] = t[y];
                e[o] = e[y];
                t[y] = m;
                e[y] = U;
                if (x < 0) {
                    m = t[o];
                    U = e[o];
                    t[o] = t[A];
                    e[o] = e[A];
                    t[A] = m;
                    e[A] = U;
                    A++;
                }
            }
        }
        if (r - y < A - s) {
            At(t, e, y, r, i);
            r = A;
        } else {
            At(t, e, s, A, i);
            s = y;
        }
    }
}

const yt = Array.prototype;

const mt = yt.push;

const Ut = yt.unshift;

const xt = yt.pop;

const St = yt.shift;

const Ot = yt.splice;

const Ct = yt.reverse;

const kt = yt.sort;

const Bt = {
    push: mt,
    unshift: Ut,
    pop: xt,
    shift: St,
    splice: Ot,
    reverse: Ct,
    sort: kt
};

const $t = [ "push", "unshift", "pop", "shift", "splice", "reverse", "sort" ];

const Lt = {
    push: function(...t) {
        const e = gt.get(this);
        if (void 0 === e) return mt.apply(this, t);
        const s = this.length;
        const r = t.length;
        if (0 === r) return s;
        this.length = e.indexMap.length = s + r;
        let i = s;
        while (i < this.length) {
            this[i] = t[i - s];
            e.indexMap[i] = -2;
            i++;
        }
        e.notify();
        return this.length;
    },
    unshift: function(...t) {
        const e = gt.get(this);
        if (void 0 === e) return Ut.apply(this, t);
        const s = t.length;
        const r = new Array(s);
        let i = 0;
        while (i < s) r[i++] = -2;
        Ut.apply(e.indexMap, r);
        const n = Ut.apply(this, t);
        e.notify();
        return n;
    },
    pop: function() {
        const t = gt.get(this);
        if (void 0 === t) return xt.call(this);
        const e = t.indexMap;
        const s = xt.call(this);
        const r = e.length - 1;
        if (e[r] > -1) e.deletedItems.push(e[r]);
        xt.call(e);
        t.notify();
        return s;
    },
    shift: function() {
        const t = gt.get(this);
        if (void 0 === t) return St.call(this);
        const e = t.indexMap;
        const s = St.call(this);
        if (e[0] > -1) e.deletedItems.push(e[0]);
        St.call(e);
        t.notify();
        return s;
    },
    splice: function(...t) {
        const e = t[0];
        const s = t[1];
        const r = gt.get(this);
        if (void 0 === r) return Ot.apply(this, t);
        const i = this.length;
        const n = 0 | e;
        const o = n < 0 ? Math.max(i + n, 0) : Math.min(n, i);
        const h = r.indexMap;
        const c = t.length;
        const u = 0 === c ? 0 : 1 === c ? i - o : s;
        if (u > 0) {
            let t = o;
            const e = t + u;
            while (t < e) {
                if (h[t] > -1) h.deletedItems.push(h[t]);
                t++;
            }
        }
        if (c > 2) {
            const t = c - 2;
            const r = new Array(t);
            let i = 0;
            while (i < t) r[i++] = -2;
            Ot.call(h, e, s, ...r);
        } else Ot.apply(h, t);
        const a = Ot.apply(this, t);
        r.notify();
        return a;
    },
    reverse: function() {
        const t = gt.get(this);
        if (void 0 === t) {
            Ct.call(this);
            return this;
        }
        const e = this.length;
        const s = e / 2 | 0;
        let r = 0;
        while (r !== s) {
            const s = e - r - 1;
            const i = this[r];
            const n = t.indexMap[r];
            const o = this[s];
            const h = t.indexMap[s];
            this[r] = o;
            t.indexMap[r] = h;
            this[s] = i;
            t.indexMap[s] = n;
            r++;
        }
        t.notify();
        return this;
    },
    sort: function(t) {
        const e = gt.get(this);
        if (void 0 === e) {
            kt.call(this, t);
            return this;
        }
        const s = this.length;
        if (s < 2) return this;
        At(this, e.indexMap, 0, s, bt);
        let r = 0;
        while (r < s) {
            if (void 0 === this[r]) break;
            r++;
        }
        if (void 0 === t || !p(t)) t = wt;
        At(this, e.indexMap, 0, r, t);
        e.notify();
        return this;
    }
};

for (const t of $t) v(Lt[t], "observing", {
    value: true,
    writable: false,
    configurable: false,
    enumerable: false
});

let Rt = false;

function Pt() {
    for (const t of $t) if (true !== yt[t].observing) w(yt, t, Lt[t]);
}

function Tt() {
    for (const t of $t) if (true === yt[t].observing) w(yt, t, Bt[t]);
}

class ArrayObserver {
    constructor(t) {
        this.type = 18;
        if (!Rt) {
            Rt = true;
            Pt();
        }
        this.indexObservers = {};
        this.collection = t;
        this.indexMap = tt(t.length);
        this.lenObs = void 0;
        gt.set(t, this);
    }
    notify() {
        const t = this.indexMap;
        const e = this.collection.length;
        this.indexMap = tt(e);
        this.subs.notifyCollection(t, 0);
    }
    getLengthObserver() {
        var t;
        return null !== (t = this.lenObs) && void 0 !== t ? t : this.lenObs = new CollectionLengthObserver(this);
    }
    getIndexObserver(t) {
        var e;
        var s;
        return null !== (e = (s = this.indexObservers)[t]) && void 0 !== e ? e : s[t] = new ArrayIndexObserver(this, t);
    }
}

class ArrayIndexObserver {
    constructor(t, e) {
        this.owner = t;
        this.index = e;
        this.doNotCache = true;
        this.value = this.getValue();
    }
    getValue() {
        return this.owner.collection[this.index];
    }
    setValue(t, e) {
        if (t === this.getValue()) return;
        const s = this.owner;
        const r = this.index;
        const i = s.indexMap;
        if (i[r] > -1) i.deletedItems.push(i[r]);
        i[r] = -2;
        s.collection[r] = t;
        s.notify();
    }
    handleCollectionChange(t, e) {
        const s = this.index;
        const r = t[s] === s;
        if (r) return;
        const i = this.value;
        const n = this.value = this.getValue();
        if (i !== n) this.subs.notify(n, i, e);
    }
    subscribe(t) {
        if (this.subs.add(t) && 1 === this.subs.count) this.owner.subscribe(this);
    }
    unsubscribe(t) {
        if (this.subs.remove(t) && 0 === this.subs.count) this.owner.unsubscribe(this);
    }
}

rt(ArrayObserver);

rt(ArrayIndexObserver);

function jt(t) {
    let e = gt.get(t);
    if (void 0 === e) e = new ArrayObserver(t);
    return e;
}

function It(t) {
    let e = 0;
    let s = 0;
    const r = t.length;
    for (let i = 0; i < r; ++i) {
        while (t.deletedItems[s] <= i - e) {
            ++s;
            --e;
        }
        if (-2 === t[i]) ++e; else t[i] += e;
    }
}

function Mt(t, e) {
    const s = t.slice();
    const r = e.length;
    let i = 0;
    let n = 0;
    while (i < r) {
        n = e[i];
        if (-2 !== n) t[i] = s[n];
        ++i;
    }
}

const Dt = new WeakMap;

const Ft = Set.prototype;

const Vt = Ft.add;

const Nt = Ft.clear;

const Kt = Ft.delete;

const qt = {
    add: Vt,
    clear: Nt,
    delete: Kt
};

const Ht = [ "add", "clear", "delete" ];

const Qt = {
    add: function(t) {
        const e = Dt.get(this);
        if (void 0 === e) {
            Vt.call(this, t);
            return this;
        }
        const s = this.size;
        Vt.call(this, t);
        const r = this.size;
        if (r === s) return this;
        e.indexMap[s] = -2;
        e.notify();
        return this;
    },
    clear: function() {
        const t = Dt.get(this);
        if (void 0 === t) return Nt.call(this);
        const e = this.size;
        if (e > 0) {
            const e = t.indexMap;
            let s = 0;
            for (const t of this.keys()) {
                if (e[s] > -1) e.deletedItems.push(e[s]);
                s++;
            }
            Nt.call(this);
            e.length = 0;
            t.notify();
        }
        return;
    },
    delete: function(t) {
        const e = Dt.get(this);
        if (void 0 === e) return Kt.call(this, t);
        const s = this.size;
        if (0 === s) return false;
        let r = 0;
        const i = e.indexMap;
        for (const s of this.keys()) {
            if (s === t) {
                if (i[r] > -1) i.deletedItems.push(i[r]);
                i.splice(r, 1);
                const s = Kt.call(this, t);
                if (true === s) e.notify();
                return s;
            }
            r++;
        }
        return false;
    }
};

const _t = {
    writable: true,
    enumerable: false,
    configurable: true
};

for (const t of Ht) v(Qt[t], "observing", {
    value: true,
    writable: false,
    configurable: false,
    enumerable: false
});

let zt = false;

function Wt() {
    for (const t of Ht) if (true !== Ft[t].observing) v(Ft, t, {
        ..._t,
        value: Qt[t]
    });
}

function Gt() {
    for (const t of Ht) if (true === Ft[t].observing) v(Ft, t, {
        ..._t,
        value: qt[t]
    });
}

class SetObserver {
    constructor(t) {
        this.type = 34;
        if (!zt) {
            zt = true;
            Wt();
        }
        this.collection = t;
        this.indexMap = tt(t.size);
        this.lenObs = void 0;
        Dt.set(t, this);
    }
    notify() {
        const t = this.indexMap;
        const e = this.collection.size;
        this.indexMap = tt(e);
        this.subs.notifyCollection(t, 0);
    }
    getLengthObserver() {
        var t;
        return null !== (t = this.lenObs) && void 0 !== t ? t : this.lenObs = new CollectionSizeObserver(this);
    }
}

rt(SetObserver);

function Zt(t) {
    let e = Dt.get(t);
    if (void 0 === e) e = new SetObserver(t);
    return e;
}

const Jt = new WeakMap;

const Xt = Map.prototype;

const Yt = Xt.set;

const te = Xt.clear;

const ee = Xt.delete;

const se = {
    set: Yt,
    clear: te,
    delete: ee
};

const re = [ "set", "clear", "delete" ];

const ie = {
    set: function(t, e) {
        const s = Jt.get(this);
        if (void 0 === s) {
            Yt.call(this, t, e);
            return this;
        }
        const r = this.get(t);
        const i = this.size;
        Yt.call(this, t, e);
        const n = this.size;
        if (n === i) {
            let e = 0;
            for (const i of this.entries()) {
                if (i[0] === t) {
                    if (i[1] !== r) {
                        s.indexMap.deletedItems.push(s.indexMap[e]);
                        s.indexMap[e] = -2;
                        s.notify();
                    }
                    return this;
                }
                e++;
            }
            return this;
        }
        s.indexMap[i] = -2;
        s.notify();
        return this;
    },
    clear: function() {
        const t = Jt.get(this);
        if (void 0 === t) return te.call(this);
        const e = this.size;
        if (e > 0) {
            const e = t.indexMap;
            let s = 0;
            for (const t of this.keys()) {
                if (e[s] > -1) e.deletedItems.push(e[s]);
                s++;
            }
            te.call(this);
            e.length = 0;
            t.notify();
        }
        return;
    },
    delete: function(t) {
        const e = Jt.get(this);
        if (void 0 === e) return ee.call(this, t);
        const s = this.size;
        if (0 === s) return false;
        let r = 0;
        const i = e.indexMap;
        for (const s of this.keys()) {
            if (s === t) {
                if (i[r] > -1) i.deletedItems.push(i[r]);
                i.splice(r, 1);
                const s = ee.call(this, t);
                if (true === s) e.notify();
                return s;
            }
            ++r;
        }
        return false;
    }
};

const ne = {
    writable: true,
    enumerable: false,
    configurable: true
};

for (const t of re) v(ie[t], "observing", {
    value: true,
    writable: false,
    configurable: false,
    enumerable: false
});

let oe = false;

function he() {
    for (const t of re) if (true !== Xt[t].observing) v(Xt, t, {
        ...ne,
        value: ie[t]
    });
}

function ce() {
    for (const t of re) if (true === Xt[t].observing) v(Xt, t, {
        ...ne,
        value: se[t]
    });
}

class MapObserver {
    constructor(t) {
        this.type = 66;
        if (!oe) {
            oe = true;
            he();
        }
        this.collection = t;
        this.indexMap = tt(t.size);
        this.lenObs = void 0;
        Jt.set(t, this);
    }
    notify() {
        const t = this.indexMap;
        const e = this.collection.size;
        this.indexMap = tt(e);
        this.subs.notifyCollection(t, 0);
    }
    getLengthObserver() {
        var t;
        return null !== (t = this.lenObs) && void 0 !== t ? t : this.lenObs = new CollectionSizeObserver(this);
    }
}

rt(MapObserver);

function ue(t) {
    let e = Jt.get(t);
    if (void 0 === e) e = new MapObserver(t);
    return e;
}

function ae(t, e) {
    const s = this.oL.getObserver(t, e);
    this.obs.add(s);
}

function le() {
    return w(this, "obs", new BindingObserverRecord(this));
}

function fe(t) {
    let e;
    if (t instanceof Array) e = jt(t); else if (t instanceof Set) e = Zt(t); else if (t instanceof Map) e = ue(t); else throw new Error("AUR0210");
    this.obs.add(e);
}

function de(t) {
    this.obs.add(t);
}

function ve() {
    throw new Error(`AUR2011:handleChange`);
}

function pe() {
    throw new Error("AUR2012:handleCollectionChange");
}

class BindingObserverRecord {
    constructor(t) {
        this.version = 0;
        this.count = 0;
        this.o = new Map;
        this.b = t;
    }
    handleChange(t, e, s) {
        return this.b.interceptor.handleChange(t, e, s);
    }
    handleCollectionChange(t, e) {
        this.b.interceptor.handleCollectionChange(t, e);
    }
    add(t) {
        if (!this.o.has(t)) {
            t.subscribe(this);
            ++this.count;
        }
        this.o.set(t, this.version);
    }
    clear() {
        this.o.forEach(we, this);
        this.count = this.o.size;
    }
    clearAll() {
        this.o.forEach(ge, this);
        this.o.clear();
        this.count = 0;
    }
}

function ge(t, e) {
    e.unsubscribe(this);
}

function we(t, e) {
    if (this.version !== t) {
        e.unsubscribe(this);
        this.o.delete(e);
    }
}

function be(t) {
    const e = t.prototype;
    b(e, "observe", ae, true);
    b(e, "observeCollection", fe, true);
    b(e, "subscribeTo", de, true);
    v(e, "obs", {
        get: le
    });
    b(e, "handleChange", ve);
    b(e, "handleCollectionChange", pe);
    return t;
}

function Ee(t) {
    return null == t ? be : be(t);
}

class BindingMediator {
    constructor(t, e, s, r) {
        this.key = t;
        this.binding = e;
        this.oL = s;
        this.locator = r;
        this.interceptor = this;
    }
    $bind() {
        throw new Error("AUR0213:$bind");
    }
    $unbind() {
        throw new Error("AUR0214:$unbind");
    }
    handleChange(t, e, s) {
        this.binding[this.key](t, e, s);
    }
}

be(BindingMediator);

const Ae = _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__.DI.createInterface("IExpressionParser", (t => t.singleton(ExpressionParser)));

class ExpressionParser {
    constructor() {
        this.u = E();
        this.A = E();
        this.U = E();
    }
    parse(t, e) {
        let s;
        switch (e) {
          case 16:
            return new CustomExpression(t);

          case 1:
            s = this.U[t];
            if (void 0 === s) s = this.U[t] = this.$parse(t, e);
            return s;

          case 2:
            s = this.A[t];
            if (void 0 === s) s = this.A[t] = this.$parse(t, e);
            return s;

          default:
            if (0 === t.length) {
                if ((e & (4 | 8)) > 0) return PrimitiveLiteralExpression.$empty;
                throw new Error("AUR0169");
            }
            s = this.u[t];
            if (void 0 === s) s = this.u[t] = this.$parse(t, e);
            return s;
        }
    }
    $parse(t, e) {
        Pe.ip = t;
        Pe.length = t.length;
        Pe.index = 0;
        Pe.O = t.charCodeAt(0);
        return je(Pe, 0, 61, void 0 === e ? 8 : e);
    }
}

var ye;

(function(t) {
    t[t["Null"] = 0] = "Null";
    t[t["Backspace"] = 8] = "Backspace";
    t[t["Tab"] = 9] = "Tab";
    t[t["LineFeed"] = 10] = "LineFeed";
    t[t["VerticalTab"] = 11] = "VerticalTab";
    t[t["FormFeed"] = 12] = "FormFeed";
    t[t["CarriageReturn"] = 13] = "CarriageReturn";
    t[t["Space"] = 32] = "Space";
    t[t["Exclamation"] = 33] = "Exclamation";
    t[t["DoubleQuote"] = 34] = "DoubleQuote";
    t[t["Dollar"] = 36] = "Dollar";
    t[t["Percent"] = 37] = "Percent";
    t[t["Ampersand"] = 38] = "Ampersand";
    t[t["SingleQuote"] = 39] = "SingleQuote";
    t[t["OpenParen"] = 40] = "OpenParen";
    t[t["CloseParen"] = 41] = "CloseParen";
    t[t["Asterisk"] = 42] = "Asterisk";
    t[t["Plus"] = 43] = "Plus";
    t[t["Comma"] = 44] = "Comma";
    t[t["Minus"] = 45] = "Minus";
    t[t["Dot"] = 46] = "Dot";
    t[t["Slash"] = 47] = "Slash";
    t[t["Semicolon"] = 59] = "Semicolon";
    t[t["Backtick"] = 96] = "Backtick";
    t[t["OpenBracket"] = 91] = "OpenBracket";
    t[t["Backslash"] = 92] = "Backslash";
    t[t["CloseBracket"] = 93] = "CloseBracket";
    t[t["Caret"] = 94] = "Caret";
    t[t["Underscore"] = 95] = "Underscore";
    t[t["OpenBrace"] = 123] = "OpenBrace";
    t[t["Bar"] = 124] = "Bar";
    t[t["CloseBrace"] = 125] = "CloseBrace";
    t[t["Colon"] = 58] = "Colon";
    t[t["LessThan"] = 60] = "LessThan";
    t[t["Equals"] = 61] = "Equals";
    t[t["GreaterThan"] = 62] = "GreaterThan";
    t[t["Question"] = 63] = "Question";
    t[t["Zero"] = 48] = "Zero";
    t[t["One"] = 49] = "One";
    t[t["Two"] = 50] = "Two";
    t[t["Three"] = 51] = "Three";
    t[t["Four"] = 52] = "Four";
    t[t["Five"] = 53] = "Five";
    t[t["Six"] = 54] = "Six";
    t[t["Seven"] = 55] = "Seven";
    t[t["Eight"] = 56] = "Eight";
    t[t["Nine"] = 57] = "Nine";
    t[t["UpperA"] = 65] = "UpperA";
    t[t["UpperB"] = 66] = "UpperB";
    t[t["UpperC"] = 67] = "UpperC";
    t[t["UpperD"] = 68] = "UpperD";
    t[t["UpperE"] = 69] = "UpperE";
    t[t["UpperF"] = 70] = "UpperF";
    t[t["UpperG"] = 71] = "UpperG";
    t[t["UpperH"] = 72] = "UpperH";
    t[t["UpperI"] = 73] = "UpperI";
    t[t["UpperJ"] = 74] = "UpperJ";
    t[t["UpperK"] = 75] = "UpperK";
    t[t["UpperL"] = 76] = "UpperL";
    t[t["UpperM"] = 77] = "UpperM";
    t[t["UpperN"] = 78] = "UpperN";
    t[t["UpperO"] = 79] = "UpperO";
    t[t["UpperP"] = 80] = "UpperP";
    t[t["UpperQ"] = 81] = "UpperQ";
    t[t["UpperR"] = 82] = "UpperR";
    t[t["UpperS"] = 83] = "UpperS";
    t[t["UpperT"] = 84] = "UpperT";
    t[t["UpperU"] = 85] = "UpperU";
    t[t["UpperV"] = 86] = "UpperV";
    t[t["UpperW"] = 87] = "UpperW";
    t[t["UpperX"] = 88] = "UpperX";
    t[t["UpperY"] = 89] = "UpperY";
    t[t["UpperZ"] = 90] = "UpperZ";
    t[t["LowerA"] = 97] = "LowerA";
    t[t["LowerB"] = 98] = "LowerB";
    t[t["LowerC"] = 99] = "LowerC";
    t[t["LowerD"] = 100] = "LowerD";
    t[t["LowerE"] = 101] = "LowerE";
    t[t["LowerF"] = 102] = "LowerF";
    t[t["LowerG"] = 103] = "LowerG";
    t[t["LowerH"] = 104] = "LowerH";
    t[t["LowerI"] = 105] = "LowerI";
    t[t["LowerJ"] = 106] = "LowerJ";
    t[t["LowerK"] = 107] = "LowerK";
    t[t["LowerL"] = 108] = "LowerL";
    t[t["LowerM"] = 109] = "LowerM";
    t[t["LowerN"] = 110] = "LowerN";
    t[t["LowerO"] = 111] = "LowerO";
    t[t["LowerP"] = 112] = "LowerP";
    t[t["LowerQ"] = 113] = "LowerQ";
    t[t["LowerR"] = 114] = "LowerR";
    t[t["LowerS"] = 115] = "LowerS";
    t[t["LowerT"] = 116] = "LowerT";
    t[t["LowerU"] = 117] = "LowerU";
    t[t["LowerV"] = 118] = "LowerV";
    t[t["LowerW"] = 119] = "LowerW";
    t[t["LowerX"] = 120] = "LowerX";
    t[t["LowerY"] = 121] = "LowerY";
    t[t["LowerZ"] = 122] = "LowerZ";
})(ye || (ye = {}));

function me(t) {
    switch (t) {
      case 98:
        return 8;

      case 116:
        return 9;

      case 110:
        return 10;

      case 118:
        return 11;

      case 102:
        return 12;

      case 114:
        return 13;

      case 34:
        return 34;

      case 39:
        return 39;

      case 92:
        return 92;

      default:
        return t;
    }
}

var Ue;

(function(t) {
    t[t["Reset"] = 0] = "Reset";
    t[t["Ancestor"] = 511] = "Ancestor";
    t[t["This"] = 512] = "This";
    t[t["Scope"] = 1024] = "Scope";
    t[t["Member"] = 2048] = "Member";
    t[t["Keyed"] = 4096] = "Keyed";
})(Ue || (Ue = {}));

var xe;

(function(t) {
    t[t["Variadic"] = 61] = "Variadic";
    t[t["Assign"] = 62] = "Assign";
    t[t["Conditional"] = 63] = "Conditional";
    t[t["LogicalOR"] = 64] = "LogicalOR";
    t[t["LogicalAND"] = 128] = "LogicalAND";
    t[t["Equality"] = 192] = "Equality";
    t[t["Relational"] = 256] = "Relational";
    t[t["Additive"] = 320] = "Additive";
    t[t["Multiplicative"] = 384] = "Multiplicative";
    t[t["Binary"] = 448] = "Binary";
    t[t["LeftHandSide"] = 449] = "LeftHandSide";
    t[t["Primary"] = 450] = "Primary";
    t[t["Unary"] = 451] = "Unary";
})(xe || (xe = {}));

var Se;

(function(t) {
    t[t["EOF"] = 1572864] = "EOF";
    t[t["ExpressionTerminal"] = 1048576] = "ExpressionTerminal";
    t[t["AccessScopeTerminal"] = 524288] = "AccessScopeTerminal";
    t[t["ClosingToken"] = 262144] = "ClosingToken";
    t[t["OpeningToken"] = 131072] = "OpeningToken";
    t[t["BinaryOp"] = 65536] = "BinaryOp";
    t[t["UnaryOp"] = 32768] = "UnaryOp";
    t[t["LeftHandSide"] = 16384] = "LeftHandSide";
    t[t["StringOrNumericLiteral"] = 12288] = "StringOrNumericLiteral";
    t[t["NumericLiteral"] = 8192] = "NumericLiteral";
    t[t["StringLiteral"] = 4096] = "StringLiteral";
    t[t["IdentifierName"] = 3072] = "IdentifierName";
    t[t["Keyword"] = 2048] = "Keyword";
    t[t["Identifier"] = 1024] = "Identifier";
    t[t["Contextual"] = 512] = "Contextual";
    t[t["Precedence"] = 448] = "Precedence";
    t[t["Type"] = 63] = "Type";
    t[t["FalseKeyword"] = 2048] = "FalseKeyword";
    t[t["TrueKeyword"] = 2049] = "TrueKeyword";
    t[t["NullKeyword"] = 2050] = "NullKeyword";
    t[t["UndefinedKeyword"] = 2051] = "UndefinedKeyword";
    t[t["ThisScope"] = 3076] = "ThisScope";
    t[t["ParentScope"] = 3078] = "ParentScope";
    t[t["OpenParen"] = 671751] = "OpenParen";
    t[t["OpenBrace"] = 131080] = "OpenBrace";
    t[t["Dot"] = 16393] = "Dot";
    t[t["CloseBrace"] = 1835018] = "CloseBrace";
    t[t["CloseParen"] = 1835019] = "CloseParen";
    t[t["Comma"] = 1572876] = "Comma";
    t[t["OpenBracket"] = 671757] = "OpenBracket";
    t[t["CloseBracket"] = 1835022] = "CloseBracket";
    t[t["Colon"] = 1572879] = "Colon";
    t[t["Question"] = 1572880] = "Question";
    t[t["Ampersand"] = 1572883] = "Ampersand";
    t[t["Bar"] = 1572884] = "Bar";
    t[t["BarBar"] = 1638549] = "BarBar";
    t[t["AmpersandAmpersand"] = 1638614] = "AmpersandAmpersand";
    t[t["EqualsEquals"] = 1638679] = "EqualsEquals";
    t[t["ExclamationEquals"] = 1638680] = "ExclamationEquals";
    t[t["EqualsEqualsEquals"] = 1638681] = "EqualsEqualsEquals";
    t[t["ExclamationEqualsEquals"] = 1638682] = "ExclamationEqualsEquals";
    t[t["LessThan"] = 1638747] = "LessThan";
    t[t["GreaterThan"] = 1638748] = "GreaterThan";
    t[t["LessThanEquals"] = 1638749] = "LessThanEquals";
    t[t["GreaterThanEquals"] = 1638750] = "GreaterThanEquals";
    t[t["InKeyword"] = 1640799] = "InKeyword";
    t[t["InstanceOfKeyword"] = 1640800] = "InstanceOfKeyword";
    t[t["Plus"] = 623009] = "Plus";
    t[t["Minus"] = 623010] = "Minus";
    t[t["TypeofKeyword"] = 34851] = "TypeofKeyword";
    t[t["VoidKeyword"] = 34852] = "VoidKeyword";
    t[t["Asterisk"] = 1638885] = "Asterisk";
    t[t["Percent"] = 1638886] = "Percent";
    t[t["Slash"] = 1638887] = "Slash";
    t[t["Equals"] = 1048616] = "Equals";
    t[t["Exclamation"] = 32809] = "Exclamation";
    t[t["TemplateTail"] = 540714] = "TemplateTail";
    t[t["TemplateContinuation"] = 540715] = "TemplateContinuation";
    t[t["OfKeyword"] = 1051180] = "OfKeyword";
})(Se || (Se = {}));

const Oe = PrimitiveLiteralExpression.$false;

const Ce = PrimitiveLiteralExpression.$true;

const ke = PrimitiveLiteralExpression.$null;

const Be = PrimitiveLiteralExpression.$undefined;

const $e = AccessThisExpression.$this;

const Le = AccessThisExpression.$parent;

var Re;

(function(t) {
    t[t["None"] = 0] = "None";
    t[t["Interpolation"] = 1] = "Interpolation";
    t[t["IsIterator"] = 2] = "IsIterator";
    t[t["IsFunction"] = 4] = "IsFunction";
    t[t["IsProperty"] = 8] = "IsProperty";
    t[t["IsCustom"] = 16] = "IsCustom";
})(Re || (Re = {}));

class ParserState {
    constructor(t) {
        this.ip = t;
        this.index = 0;
        this.C = 0;
        this.B = 0;
        this.$ = 1572864;
        this.L = "";
        this.R = true;
        this.length = t.length;
        this.O = t.charCodeAt(0);
    }
    get P() {
        return this.ip.slice(this.C, this.index);
    }
}

const Pe = new ParserState("");

function Te(t, e) {
    Pe.ip = t;
    Pe.length = t.length;
    Pe.index = 0;
    Pe.O = t.charCodeAt(0);
    return je(Pe, 0, 61, void 0 === e ? 8 : e);
}

function je(t, e, s, r) {
    if (16 === r) return new CustomExpression(t.ip);
    if (0 === t.index) {
        if (1 & r) return Ve(t);
        Ke(t);
        if (1048576 & t.$) throw new Error(`AUR0151:${t.ip}`);
    }
    t.R = 448 > s;
    let i;
    if (32768 & t.$) {
        const s = Je[63 & t.$];
        Ke(t);
        i = new UnaryExpression(s, je(t, e, 449, r));
        t.R = false;
    } else {
        t: switch (t.$) {
          case 3078:
            t.R = false;
            do {
                Ke(t);
                e++;
                if (Ge(t, 16393)) {
                    if (16393 === t.$) throw new Error(`AUR0152:${t.ip}`); else if (1572864 === t.$) throw new Error(`AUR0153:${t.ip}`);
                } else if (524288 & t.$) {
                    const t = 511 & e;
                    i = 0 === t ? $e : 1 === t ? Le : new AccessThisExpression(t);
                    e = 512;
                    break t;
                } else throw new Error(`AUR0154:${t.ip}`);
            } while (3078 === t.$);

          case 1024:
            if (2 & r) i = new BindingIdentifier(t.L); else {
                i = new AccessScopeExpression(t.L, 511 & e);
                e = 1024;
            }
            t.R = true;
            Ke(t);
            break;

          case 3076:
            t.R = false;
            Ke(t);
            i = $e;
            e = 512;
            break;

          case 671751:
            Ke(t);
            i = je(t, 0, 62, r);
            Ze(t, 1835019);
            e = 0;
            break;

          case 671757:
            i = t.ip.search(/\s+of\s+/) > t.index ? Ie(t) : Me(t, e, r);
            e = 0;
            break;

          case 131080:
            i = Fe(t, r);
            e = 0;
            break;

          case 540714:
            i = new TemplateExpression([ t.L ]);
            t.R = false;
            Ke(t);
            e = 0;
            break;

          case 540715:
            i = Ne(t, e, r, i, false);
            e = 0;
            break;

          case 4096:
          case 8192:
            i = new PrimitiveLiteralExpression(t.L);
            t.R = false;
            Ke(t);
            e = 0;
            break;

          case 2050:
          case 2051:
          case 2049:
          case 2048:
            i = Je[63 & t.$];
            t.R = false;
            Ke(t);
            e = 0;
            break;

          default:
            if (t.index >= t.length) throw new Error(`AUR0155:${t.ip}`); else throw new Error(`AUR0156:${t.ip}`);
        }
        if (2 & r) return De(t, i);
        if (449 < s) return i;
        let n = t.L;
        while ((16384 & t.$) > 0) {
            const s = [];
            let o;
            switch (t.$) {
              case 16393:
                t.R = true;
                Ke(t);
                if (0 === (3072 & t.$)) throw new Error(`AUR0153:${t.ip}`);
                n = t.L;
                Ke(t);
                e = (e & (512 | 1024)) << 1 | 2048 & e | (4096 & e) >> 1;
                if (671751 === t.$) {
                    if (0 === e) e = 2048;
                    continue;
                }
                if (1024 & e) i = new AccessScopeExpression(n, i.ancestor); else i = new AccessMemberExpression(i, n);
                continue;

              case 671757:
                t.R = true;
                Ke(t);
                e = 4096;
                i = new AccessKeyedExpression(i, je(t, 0, 62, r));
                Ze(t, 1835022);
                break;

              case 671751:
                t.R = false;
                Ke(t);
                while (1835019 !== t.$) {
                    s.push(je(t, 0, 62, r));
                    if (!Ge(t, 1572876)) break;
                }
                Ze(t, 1835019);
                if (1024 & e) i = new CallScopeExpression(n, s, i.ancestor); else if (2048 & e) i = new CallMemberExpression(i, n, s); else i = new CallFunctionExpression(i, s);
                e = 0;
                break;

              case 540714:
                t.R = false;
                o = [ t.L ];
                i = new TaggedTemplateExpression(o, o, i);
                Ke(t);
                break;

              case 540715:
                i = Ne(t, e, r, i, true);
            }
        }
    }
    if (448 < s) return i;
    while ((65536 & t.$) > 0) {
        const n = t.$;
        if ((448 & n) <= s) break;
        Ke(t);
        i = new BinaryExpression(Je[63 & n], i, je(t, e, 448 & n, r));
        t.R = false;
    }
    if (63 < s) return i;
    if (Ge(t, 1572880)) {
        const s = je(t, e, 62, r);
        Ze(t, 1572879);
        i = new ConditionalExpression(i, s, je(t, e, 62, r));
        t.R = false;
    }
    if (62 < s) return i;
    if (Ge(t, 1048616)) {
        if (!t.R) throw new Error(`AUR0158:${t.ip}`);
        i = new AssignExpression(i, je(t, e, 62, r));
    }
    if (61 < s) return i;
    while (Ge(t, 1572884)) {
        if (1572864 === t.$) throw new Error(`AUR0159:${t.ip}`);
        const s = t.L;
        Ke(t);
        const n = new Array;
        while (Ge(t, 1572879)) n.push(je(t, e, 62, r));
        i = new ValueConverterExpression(i, s, n);
    }
    while (Ge(t, 1572883)) {
        if (1572864 === t.$) throw new Error(`AUR0160:${t.ip}`);
        const s = t.L;
        Ke(t);
        const n = new Array;
        while (Ge(t, 1572879)) n.push(je(t, e, 62, r));
        i = new BindingBehaviorExpression(i, s, n);
    }
    if (1572864 !== t.$) {
        if (1 & r) return i;
        if ("of" === t.P) throw new Error(`AUR0161:${t.ip}`);
        throw new Error(`AUR0162:${t.ip}`);
    }
    return i;
}

function Ie(t) {
    const e = [];
    const s = new DestructuringAssignmentExpression(90137, e, void 0, void 0);
    let r = "";
    let i = true;
    let n = 0;
    while (i) {
        Ke(t);
        switch (t.$) {
          case 1835022:
            i = false;
            o();
            break;

          case 1572876:
            o();
            break;

          case 1024:
            r = t.P;
            break;

          default:
            throw new Error(`AUR0170:${t.ip}`);
        }
    }
    Ze(t, 1835022);
    return s;
    function o() {
        if ("" !== r) {
            e.push(new DestructuringAssignmentSingleExpression(new AccessMemberExpression($e, r), new AccessKeyedExpression($e, new PrimitiveLiteralExpression(n++)), void 0));
            r = "";
        } else n++;
    }
}

function Me(t, e, s) {
    Ke(t);
    const r = new Array;
    while (1835022 !== t.$) if (Ge(t, 1572876)) {
        r.push(Be);
        if (1835022 === t.$) break;
    } else {
        r.push(je(t, e, 62, ~2 & s));
        if (Ge(t, 1572876)) {
            if (1835022 === t.$) break;
        } else break;
    }
    Ze(t, 1835022);
    if (2 & s) return new ArrayBindingPattern(r); else {
        t.R = false;
        return new ArrayLiteralExpression(r);
    }
}

function De(t, e) {
    if (0 === (65536 & e.$kind)) throw new Error(`AUR0163:${t.ip}`);
    if (1051180 !== t.$) throw new Error(`AUR0163:${t.ip}`);
    Ke(t);
    const s = e;
    const r = je(t, 0, 61, 0);
    return new ForOfStatement(s, r);
}

function Fe(t, e) {
    const s = new Array;
    const r = new Array;
    Ke(t);
    while (1835018 !== t.$) {
        s.push(t.L);
        if (12288 & t.$) {
            Ke(t);
            Ze(t, 1572879);
            r.push(je(t, 0, 62, ~2 & e));
        } else if (3072 & t.$) {
            const {O: s, $: i, index: n} = t;
            Ke(t);
            if (Ge(t, 1572879)) r.push(je(t, 0, 62, ~2 & e)); else {
                t.O = s;
                t.$ = i;
                t.index = n;
                r.push(je(t, 0, 450, ~2 & e));
            }
        } else throw new Error(`AUR0164:${t.ip}`);
        if (1835018 !== t.$) Ze(t, 1572876);
    }
    Ze(t, 1835018);
    if (2 & e) return new ObjectBindingPattern(s, r); else {
        t.R = false;
        return new ObjectLiteralExpression(s, r);
    }
}

function Ve(t) {
    const e = [];
    const s = [];
    const r = t.length;
    let i = "";
    while (t.index < r) {
        switch (t.O) {
          case 36:
            if (123 === t.ip.charCodeAt(t.index + 1)) {
                e.push(i);
                i = "";
                t.index += 2;
                t.O = t.ip.charCodeAt(t.index);
                Ke(t);
                const r = je(t, 0, 61, 1);
                s.push(r);
                continue;
            } else i += "$";
            break;

          case 92:
            i += String.fromCharCode(me(qe(t)));
            break;

          default:
            i += String.fromCharCode(t.O);
        }
        qe(t);
    }
    if (s.length) {
        e.push(i);
        return new Interpolation(e, s);
    }
    return null;
}

function Ne(t, e, s, r, i) {
    const n = [ t.L ];
    Ze(t, 540715);
    const o = [ je(t, e, 62, s) ];
    while (540714 !== (t.$ = We(t))) {
        n.push(t.L);
        Ze(t, 540715);
        o.push(je(t, e, 62, s));
    }
    n.push(t.L);
    t.R = false;
    if (i) {
        Ke(t);
        return new TaggedTemplateExpression(n, n, r, o);
    } else {
        Ke(t);
        return new TemplateExpression(n, o);
    }
}

function Ke(t) {
    while (t.index < t.length) {
        t.C = t.index;
        if (null != (t.$ = ns[t.O](t))) return;
    }
    t.$ = 1572864;
}

function qe(t) {
    return t.O = t.ip.charCodeAt(++t.index);
}

function He(t) {
    while (is[qe(t)]) ;
    const e = Xe[t.L = t.P];
    return void 0 === e ? 1024 : e;
}

function Qe(t, e) {
    let s = t.O;
    if (false === e) {
        do {
            s = qe(t);
        } while (s <= 57 && s >= 48);
        if (46 !== s) {
            t.L = parseInt(t.P, 10);
            return 8192;
        }
        s = qe(t);
        if (t.index >= t.length) {
            t.L = parseInt(t.P.slice(0, -1), 10);
            return 8192;
        }
    }
    if (s <= 57 && s >= 48) do {
        s = qe(t);
    } while (s <= 57 && s >= 48); else t.O = t.ip.charCodeAt(--t.index);
    t.L = parseFloat(t.P);
    return 8192;
}

function _e(t) {
    const e = t.O;
    qe(t);
    let s = 0;
    const r = new Array;
    let i = t.index;
    while (t.O !== e) if (92 === t.O) {
        r.push(t.ip.slice(i, t.index));
        qe(t);
        s = me(t.O);
        qe(t);
        r.push(String.fromCharCode(s));
        i = t.index;
    } else if (t.index >= t.length) throw new Error(`AUR0165:${t.ip}`); else qe(t);
    const n = t.ip.slice(i, t.index);
    qe(t);
    r.push(n);
    const o = r.join("");
    t.L = o;
    return 4096;
}

function ze(t) {
    let e = true;
    let s = "";
    while (96 !== qe(t)) if (36 === t.O) if (t.index + 1 < t.length && 123 === t.ip.charCodeAt(t.index + 1)) {
        t.index++;
        e = false;
        break;
    } else s += "$"; else if (92 === t.O) s += String.fromCharCode(me(qe(t))); else {
        if (t.index >= t.length) throw new Error(`AUR0166:${t.ip}`);
        s += String.fromCharCode(t.O);
    }
    qe(t);
    t.L = s;
    if (e) return 540714;
    return 540715;
}

function We(t) {
    if (t.index >= t.length) throw new Error(`AUR0166:${t.ip}`);
    t.index--;
    return ze(t);
}

function Ge(t, e) {
    if (t.$ === e) {
        Ke(t);
        return true;
    }
    return false;
}

function Ze(t, e) {
    if (t.$ === e) Ke(t); else throw new Error(`AUR0167:${t.ip}<${e}`);
}

const Je = [ Oe, Ce, ke, Be, "$this", null, "$parent", "(", "{", ".", "}", ")", ",", "[", "]", ":", "?", "'", '"', "&", "|", "||", "&&", "==", "!=", "===", "!==", "<", ">", "<=", ">=", "in", "instanceof", "+", "-", "typeof", "void", "*", "%", "/", "=", "!", 540714, 540715, "of" ];

const Xe = E();

Xe.true = 2049;

Xe.null = 2050;

Xe.false = 2048;

Xe.undefined = 2051;

Xe.$this = 3076;

Xe.$parent = 3078;

Xe.in = 1640799;

Xe.instanceof = 1640800;

Xe.typeof = 34851;

Xe.void = 34852;

Xe.of = 1051180;

const Ye = {
    AsciiIdPart: [ 36, 0, 48, 58, 65, 91, 95, 0, 97, 123 ],
    IdStart: [ 36, 0, 65, 91, 95, 0, 97, 123, 170, 0, 186, 0, 192, 215, 216, 247, 248, 697, 736, 741, 7424, 7462, 7468, 7517, 7522, 7526, 7531, 7544, 7545, 7615, 7680, 7936, 8305, 0, 8319, 0, 8336, 8349, 8490, 8492, 8498, 0, 8526, 0, 8544, 8585, 11360, 11392, 42786, 42888, 42891, 42927, 42928, 42936, 42999, 43008, 43824, 43867, 43868, 43877, 64256, 64263, 65313, 65339, 65345, 65371 ],
    Digit: [ 48, 58 ],
    Skip: [ 0, 33, 127, 161 ]
};

function ts(t, e, s, r) {
    const i = s.length;
    for (let n = 0; n < i; n += 2) {
        const i = s[n];
        let o = s[n + 1];
        o = o > 0 ? o : i + 1;
        if (t) t.fill(r, i, o);
        if (e) for (let t = i; t < o; t++) e.add(t);
    }
}

function es(t) {
    return e => {
        qe(e);
        return t;
    };
}

const ss = t => {
    throw new Error(`AUR0168:${t.ip}`);
};

ss.notMapped = true;

const rs = new Set;

ts(null, rs, Ye.AsciiIdPart, true);

const is = new Uint8Array(65535);

ts(is, null, Ye.IdStart, 1);

ts(is, null, Ye.Digit, 1);

const ns = new Array(65535);

ns.fill(ss, 0, 65535);

ts(ns, null, Ye.Skip, (t => {
    qe(t);
    return null;
}));

ts(ns, null, Ye.IdStart, He);

ts(ns, null, Ye.Digit, (t => Qe(t, false)));

ns[34] = ns[39] = t => _e(t);

ns[96] = t => ze(t);

ns[33] = t => {
    if (61 !== qe(t)) return 32809;
    if (61 !== qe(t)) return 1638680;
    qe(t);
    return 1638682;
};

ns[61] = t => {
    if (61 !== qe(t)) return 1048616;
    if (61 !== qe(t)) return 1638679;
    qe(t);
    return 1638681;
};

ns[38] = t => {
    if (38 !== qe(t)) return 1572883;
    qe(t);
    return 1638614;
};

ns[124] = t => {
    if (124 !== qe(t)) return 1572884;
    qe(t);
    return 1638549;
};

ns[46] = t => {
    if (qe(t) <= 57 && t.O >= 48) return Qe(t, true);
    return 16393;
};

ns[60] = t => {
    if (61 !== qe(t)) return 1638747;
    qe(t);
    return 1638749;
};

ns[62] = t => {
    if (61 !== qe(t)) return 1638748;
    qe(t);
    return 1638750;
};

ns[37] = es(1638886);

ns[40] = es(671751);

ns[41] = es(1835019);

ns[42] = es(1638885);

ns[43] = es(623009);

ns[44] = es(1572876);

ns[45] = es(623010);

ns[47] = es(1638887);

ns[58] = es(1572879);

ns[63] = es(1572880);

ns[91] = es(671757);

ns[93] = es(1835022);

ns[123] = es(131080);

ns[125] = es(1835018);

let os = null;

const hs = [];

let cs = false;

function us() {
    cs = false;
}

function as() {
    cs = true;
}

function ls() {
    return os;
}

function fs(t) {
    if (null == t) throw new Error("AUR0206");
    if (null == os) {
        os = t;
        hs[0] = os;
        cs = true;
        return;
    }
    if (os === t) throw new Error("AUR0207");
    hs.push(os);
    os = t;
    cs = true;
}

function ds(t) {
    if (null == t) throw new Error("AUR0208");
    if (os !== t) throw new Error("AUR0209");
    hs.pop();
    os = hs.length > 0 ? hs[hs.length - 1] : null;
    cs = null != os;
}

const vs = Object.freeze({
    get current() {
        return os;
    },
    get connecting() {
        return cs;
    },
    enter: fs,
    exit: ds,
    pause: us,
    resume: as
});

const ps = Reflect.get;

const gs = Object.prototype.toString;

const ws = new WeakMap;

function bs(t) {
    switch (gs.call(t)) {
      case "[object Object]":
      case "[object Array]":
      case "[object Map]":
      case "[object Set]":
        return true;

      default:
        return false;
    }
}

const Es = "__raw__";

function As(t) {
    return bs(t) ? ys(t) : t;
}

function ys(t) {
    var e;
    return null !== (e = ws.get(t)) && void 0 !== e ? e : Ss(t);
}

function ms(t) {
    var e;
    return null !== (e = t[Es]) && void 0 !== e ? e : t;
}

function Us(t) {
    return bs(t) && t[Es] || t;
}

function xs(t) {
    return "constructor" === t || "__proto__" === t || "$observers" === t || t === Symbol.toPrimitive || t === Symbol.toStringTag;
}

function Ss(t) {
    const e = t instanceof Array ? Cs : t instanceof Map || t instanceof Set ? Zs : Os;
    const s = new Proxy(t, e);
    ws.set(t, s);
    return s;
}

const Os = {
    get(t, e, s) {
        if (e === Es) return t;
        const r = ls();
        if (!cs || xs(e) || null == r) return ps(t, e, s);
        r.observe(t, e);
        return As(ps(t, e, s));
    }
};

const Cs = {
    get(t, e, s) {
        if (e === Es) return t;
        const r = ls();
        if (!cs || xs(e) || null == r) return ps(t, e, s);
        switch (e) {
          case "length":
            r.observe(t, "length");
            return t.length;

          case "map":
            return ks;

          case "includes":
            return Ls;

          case "indexOf":
            return Rs;

          case "lastIndexOf":
            return Ps;

          case "every":
            return Bs;

          case "filter":
            return $s;

          case "find":
            return js;

          case "findIndex":
            return Ts;

          case "flat":
            return Is;

          case "flatMap":
            return Ms;

          case "join":
            return Ds;

          case "push":
            return Vs;

          case "pop":
            return Fs;

          case "reduce":
            return Ws;

          case "reduceRight":
            return Gs;

          case "reverse":
            return Hs;

          case "shift":
            return Ns;

          case "unshift":
            return Ks;

          case "slice":
            return zs;

          case "splice":
            return qs;

          case "some":
            return Qs;

          case "sort":
            return _s;

          case "keys":
            return ir;

          case "values":
          case Symbol.iterator:
            return nr;

          case "entries":
            return or;
        }
        r.observe(t, e);
        return As(ps(t, e, s));
    },
    ownKeys(t) {
        var e;
        null === (e = ls()) || void 0 === e ? void 0 : e.observe(t, "length");
        return Reflect.ownKeys(t);
    }
};

function ks(t, e) {
    var s;
    const r = ms(this);
    const i = r.map(((s, r) => Us(t.call(e, As(s), r, this))));
    null === (s = ls()) || void 0 === s ? void 0 : s.observeCollection(r);
    return As(i);
}

function Bs(t, e) {
    var s;
    const r = ms(this);
    const i = r.every(((s, r) => t.call(e, As(s), r, this)));
    null === (s = ls()) || void 0 === s ? void 0 : s.observeCollection(r);
    return i;
}

function $s(t, e) {
    var s;
    const r = ms(this);
    const i = r.filter(((s, r) => Us(t.call(e, As(s), r, this))));
    null === (s = ls()) || void 0 === s ? void 0 : s.observeCollection(r);
    return As(i);
}

function Ls(t) {
    var e;
    const s = ms(this);
    const r = s.includes(Us(t));
    null === (e = ls()) || void 0 === e ? void 0 : e.observeCollection(s);
    return r;
}

function Rs(t) {
    var e;
    const s = ms(this);
    const r = s.indexOf(Us(t));
    null === (e = ls()) || void 0 === e ? void 0 : e.observeCollection(s);
    return r;
}

function Ps(t) {
    var e;
    const s = ms(this);
    const r = s.lastIndexOf(Us(t));
    null === (e = ls()) || void 0 === e ? void 0 : e.observeCollection(s);
    return r;
}

function Ts(t, e) {
    var s;
    const r = ms(this);
    const i = r.findIndex(((s, r) => Us(t.call(e, As(s), r, this))));
    null === (s = ls()) || void 0 === s ? void 0 : s.observeCollection(r);
    return i;
}

function js(t, e) {
    var s;
    const r = ms(this);
    const i = r.find(((e, s) => t(As(e), s, this)), e);
    null === (s = ls()) || void 0 === s ? void 0 : s.observeCollection(r);
    return As(i);
}

function Is() {
    var t;
    const e = ms(this);
    null === (t = ls()) || void 0 === t ? void 0 : t.observeCollection(e);
    return As(e.flat());
}

function Ms(t, e) {
    var s;
    const r = ms(this);
    null === (s = ls()) || void 0 === s ? void 0 : s.observeCollection(r);
    return ys(r.flatMap(((s, r) => As(t.call(e, As(s), r, this)))));
}

function Ds(t) {
    var e;
    const s = ms(this);
    null === (e = ls()) || void 0 === e ? void 0 : e.observeCollection(s);
    return s.join(t);
}

function Fs() {
    return As(ms(this).pop());
}

function Vs(...t) {
    return ms(this).push(...t);
}

function Ns() {
    return As(ms(this).shift());
}

function Ks(...t) {
    return ms(this).unshift(...t);
}

function qs(...t) {
    return As(ms(this).splice(...t));
}

function Hs(...t) {
    var e;
    const s = ms(this);
    const r = s.reverse();
    null === (e = ls()) || void 0 === e ? void 0 : e.observeCollection(s);
    return As(r);
}

function Qs(t, e) {
    var s;
    const r = ms(this);
    const i = r.some(((s, r) => Us(t.call(e, As(s), r, this))));
    null === (s = ls()) || void 0 === s ? void 0 : s.observeCollection(r);
    return i;
}

function _s(t) {
    var e;
    const s = ms(this);
    const r = s.sort(t);
    null === (e = ls()) || void 0 === e ? void 0 : e.observeCollection(s);
    return As(r);
}

function zs(t, e) {
    var s;
    const r = ms(this);
    null === (s = ls()) || void 0 === s ? void 0 : s.observeCollection(r);
    return ys(r.slice(t, e));
}

function Ws(t, e) {
    var s;
    const r = ms(this);
    const i = r.reduce(((e, s, r) => t(e, As(s), r, this)), e);
    null === (s = ls()) || void 0 === s ? void 0 : s.observeCollection(r);
    return As(i);
}

function Gs(t, e) {
    var s;
    const r = ms(this);
    const i = r.reduceRight(((e, s, r) => t(e, As(s), r, this)), e);
    null === (s = ls()) || void 0 === s ? void 0 : s.observeCollection(r);
    return As(i);
}

const Zs = {
    get(t, e, s) {
        if (e === Es) return t;
        const r = ls();
        if (!cs || xs(e) || null == r) return ps(t, e, s);
        switch (e) {
          case "size":
            r.observe(t, "size");
            return t.size;

          case "clear":
            return sr;

          case "delete":
            return rr;

          case "forEach":
            return Js;

          case "add":
            if (t instanceof Set) return er;
            break;

          case "get":
            if (t instanceof Map) return Ys;
            break;

          case "set":
            if (t instanceof Map) return tr;
            break;

          case "has":
            return Xs;

          case "keys":
            return ir;

          case "values":
            return nr;

          case "entries":
            return or;

          case Symbol.iterator:
            return t instanceof Map ? or : nr;
        }
        return As(ps(t, e, s));
    }
};

function Js(t, e) {
    var s;
    const r = ms(this);
    null === (s = ls()) || void 0 === s ? void 0 : s.observeCollection(r);
    return r.forEach(((s, r) => {
        t.call(e, As(s), As(r), this);
    }));
}

function Xs(t) {
    var e;
    const s = ms(this);
    null === (e = ls()) || void 0 === e ? void 0 : e.observeCollection(s);
    return s.has(Us(t));
}

function Ys(t) {
    var e;
    const s = ms(this);
    null === (e = ls()) || void 0 === e ? void 0 : e.observeCollection(s);
    return As(s.get(Us(t)));
}

function tr(t, e) {
    return As(ms(this).set(Us(t), Us(e)));
}

function er(t) {
    return As(ms(this).add(Us(t)));
}

function sr() {
    return As(ms(this).clear());
}

function rr(t) {
    return As(ms(this).delete(Us(t)));
}

function ir() {
    var t;
    const e = ms(this);
    null === (t = ls()) || void 0 === t ? void 0 : t.observeCollection(e);
    const s = e.keys();
    return {
        next() {
            const t = s.next();
            const e = t.value;
            const r = t.done;
            return r ? {
                value: void 0,
                done: r
            } : {
                value: As(e),
                done: r
            };
        },
        [Symbol.iterator]() {
            return this;
        }
    };
}

function nr() {
    var t;
    const e = ms(this);
    null === (t = ls()) || void 0 === t ? void 0 : t.observeCollection(e);
    const s = e.values();
    return {
        next() {
            const t = s.next();
            const e = t.value;
            const r = t.done;
            return r ? {
                value: void 0,
                done: r
            } : {
                value: As(e),
                done: r
            };
        },
        [Symbol.iterator]() {
            return this;
        }
    };
}

function or() {
    var t;
    const e = ms(this);
    null === (t = ls()) || void 0 === t ? void 0 : t.observeCollection(e);
    const s = e.entries();
    return {
        next() {
            const t = s.next();
            const e = t.value;
            const r = t.done;
            return r ? {
                value: void 0,
                done: r
            } : {
                value: [ As(e[0]), As(e[1]) ],
                done: r
            };
        },
        [Symbol.iterator]() {
            return this;
        }
    };
}

const hr = Object.freeze({
    getProxy: ys,
    getRaw: ms,
    wrap: As,
    unwrap: Us,
    rawKey: Es
});

class ComputedObserver {
    constructor(t, e, s, r, i) {
        this.interceptor = this;
        this.type = 1;
        this.v = void 0;
        this.ov = void 0;
        this.ir = false;
        this.D = false;
        this.o = t;
        this.get = e;
        this.set = s;
        this.up = r;
        this.oL = i;
    }
    static create(t, e, s, r, i) {
        const n = s.get;
        const o = s.set;
        const h = new ComputedObserver(t, n, o, i, r);
        const c = () => h.getValue();
        c.getObserver = () => h;
        v(t, e, {
            enumerable: s.enumerable,
            configurable: true,
            get: c,
            set: t => {
                h.setValue(t, 0);
            }
        });
        return h;
    }
    getValue() {
        if (0 === this.subs.count) return this.get.call(this.o, this);
        if (this.D) {
            this.compute();
            this.D = false;
        }
        return this.v;
    }
    setValue(t, e) {
        if (p(this.set)) {
            if (t !== this.v) {
                this.ir = true;
                this.set.call(this.o, t);
                this.ir = false;
                this.run();
            }
        } else throw new Error("AUR0221");
    }
    handleChange() {
        this.D = true;
        if (this.subs.count > 0) this.run();
    }
    handleCollectionChange() {
        this.D = true;
        if (this.subs.count > 0) this.run();
    }
    subscribe(t) {
        if (this.subs.add(t) && 1 === this.subs.count) {
            this.compute();
            this.D = false;
        }
    }
    unsubscribe(t) {
        if (this.subs.remove(t) && 0 === this.subs.count) {
            this.D = true;
            this.obs.clearAll();
        }
    }
    flush() {
        cr = this.ov;
        this.ov = this.v;
        this.subs.notify(this.v, cr, 0);
    }
    run() {
        if (this.ir) return;
        const t = this.v;
        const e = this.compute();
        this.D = false;
        if (!Object.is(e, t)) {
            this.ov = t;
            this.queue.add(this);
        }
    }
    compute() {
        this.ir = true;
        this.obs.version++;
        try {
            fs(this);
            return this.v = Us(this.get.call(this.up ? As(this.o) : this.o, this));
        } finally {
            this.obs.clear();
            this.ir = false;
            ds(this);
        }
    }
}

Ee(ComputedObserver);

rt(ComputedObserver);

ct(ComputedObserver);

let cr;

const ur = _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__.DI.createInterface("IDirtyChecker", (t => t.singleton(DirtyChecker)));

const ar = {
    timeoutsPerCheck: 25,
    disabled: false,
    throw: false,
    resetToDefault() {
        this.timeoutsPerCheck = 6;
        this.disabled = false;
        this.throw = false;
    }
};

const lr = {
    persistent: true
};

class DirtyChecker {
    constructor(t) {
        this.p = t;
        this.tracked = [];
        this.T = null;
        this.j = 0;
        this.check = () => {
            if (ar.disabled) return;
            if (++this.j < ar.timeoutsPerCheck) return;
            this.j = 0;
            const t = this.tracked;
            const e = t.length;
            let s;
            let r = 0;
            for (;r < e; ++r) {
                s = t[r];
                if (s.isDirty()) this.queue.add(s);
            }
        };
    }
    createProperty(t, e) {
        if (ar.throw) throw new Error(`AUR0222:${e}`);
        return new DirtyCheckProperty(this, t, e);
    }
    addProperty(t) {
        this.tracked.push(t);
        if (1 === this.tracked.length) this.T = this.p.taskQueue.queueTask(this.check, lr);
    }
    removeProperty(t) {
        this.tracked.splice(this.tracked.indexOf(t), 1);
        if (0 === this.tracked.length) {
            this.T.cancel();
            this.T = null;
        }
    }
}

DirtyChecker.inject = [ _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__.IPlatform ];

ct(DirtyChecker);

class DirtyCheckProperty {
    constructor(t, e, s) {
        this.obj = e;
        this.key = s;
        this.type = 0;
        this.ov = void 0;
        this.I = t;
    }
    getValue() {
        return this.obj[this.key];
    }
    setValue(t, e) {
        throw new Error(`Trying to set value for property ${this.key} in dirty checker`);
    }
    isDirty() {
        return this.ov !== this.obj[this.key];
    }
    flush() {
        const t = this.ov;
        const e = this.getValue();
        this.ov = e;
        this.subs.notify(e, t, 0);
    }
    subscribe(t) {
        if (this.subs.add(t) && 1 === this.subs.count) {
            this.ov = this.obj[this.key];
            this.I.addProperty(this);
        }
    }
    unsubscribe(t) {
        if (this.subs.remove(t) && 0 === this.subs.count) this.I.removeProperty(this);
    }
}

rt(DirtyCheckProperty);

class PrimitiveObserver {
    constructor(t, e) {
        this.type = 0;
        this.o = t;
        this.k = e;
    }
    get doNotCache() {
        return true;
    }
    getValue() {
        return this.o[this.k];
    }
    setValue() {}
    subscribe() {}
    unsubscribe() {}
}

class PropertyAccessor {
    constructor() {
        this.type = 0;
    }
    getValue(t, e) {
        return t[e];
    }
    setValue(t, e, s, r) {
        s[r] = t;
    }
}

let fr;

class SetterObserver {
    constructor(t, e) {
        this.type = 1;
        this.v = void 0;
        this.ov = void 0;
        this.iO = false;
        this.f = 0;
        this.o = t;
        this.k = e;
    }
    getValue() {
        return this.v;
    }
    setValue(t, e) {
        if (this.iO) {
            if (Object.is(t, this.v)) return;
            this.ov = this.v;
            this.v = t;
            this.f = e;
            this.queue.add(this);
        } else this.o[this.k] = t;
    }
    subscribe(t) {
        if (false === this.iO) this.start();
        this.subs.add(t);
    }
    flush() {
        fr = this.ov;
        this.ov = this.v;
        this.subs.notify(this.v, fr, this.f);
    }
    start() {
        if (false === this.iO) {
            this.iO = true;
            this.v = this.o[this.k];
            v(this.o, this.k, {
                enumerable: true,
                configurable: true,
                get: () => this.getValue(),
                set: t => {
                    this.setValue(t, 0);
                }
            });
        }
        return this;
    }
    stop() {
        if (this.iO) {
            v(this.o, this.k, {
                enumerable: true,
                configurable: true,
                writable: true,
                value: this.v
            });
            this.iO = false;
        }
        return this;
    }
}

class SetterNotifier {
    constructor(t, e, s, r) {
        this.type = 1;
        this.v = void 0;
        this.ov = void 0;
        this.f = 0;
        this.o = t;
        this.S = s;
        this.hs = p(s);
        const i = t[e];
        this.cb = p(i) ? i : void 0;
        this.v = r;
    }
    getValue() {
        return this.v;
    }
    setValue(t, e) {
        var s;
        if (this.hs) t = this.S(t, null);
        if (!Object.is(t, this.v)) {
            this.ov = this.v;
            this.v = t;
            this.f = e;
            null === (s = this.cb) || void 0 === s ? void 0 : s.call(this.o, this.v, this.ov, e);
            this.queue.add(this);
        }
    }
    flush() {
        fr = this.ov;
        this.ov = this.v;
        this.subs.notify(this.v, fr, this.f);
    }
}

rt(SetterObserver);

rt(SetterNotifier);

ct(SetterObserver);

ct(SetterNotifier);

const dr = new PropertyAccessor;

const vr = _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__.DI.createInterface("IObserverLocator", (t => t.singleton(ObserverLocator)));

const pr = _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__.DI.createInterface("INodeObserverLocator", (t => t.cachedCallback((t => {
    t.getAll(_aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__.ILogger).forEach((t => {
        t.error("Using default INodeObserverLocator implementation. Will not be able to observe nodes (HTML etc...).");
    }));
    return new DefaultNodeObserverLocator;
}))));

class DefaultNodeObserverLocator {
    handles() {
        return false;
    }
    getObserver() {
        return dr;
    }
    getAccessor() {
        return dr;
    }
}

class ObserverLocator {
    constructor(t, e) {
        this.I = t;
        this.M = e;
        this.F = [];
    }
    addAdapter(t) {
        this.F.push(t);
    }
    getObserver(t, e) {
        var s, r;
        return null !== (r = null === (s = t.$observers) || void 0 === s ? void 0 : s[e]) && void 0 !== r ? r : this.V(t, e, this.createObserver(t, e));
    }
    getAccessor(t, e) {
        var s;
        const r = null === (s = t.$observers) || void 0 === s ? void 0 : s[e];
        if (void 0 !== r) return r;
        if (this.M.handles(t, e, this)) return this.M.getAccessor(t, e, this);
        return dr;
    }
    getArrayObserver(t) {
        return jt(t);
    }
    getMapObserver(t) {
        return ue(t);
    }
    getSetObserver(t) {
        return Zt(t);
    }
    createObserver(t, e) {
        var s, r, i, n;
        if (!(t instanceof Object)) return new PrimitiveObserver(t, e);
        if (this.M.handles(t, e, this)) return this.M.getObserver(t, e, this);
        switch (e) {
          case "length":
            if (t instanceof Array) return jt(t).getLengthObserver();
            break;

          case "size":
            if (t instanceof Map) return ue(t).getLengthObserver(); else if (t instanceof Set) return Zt(t).getLengthObserver();
            break;

          default:
            if (t instanceof Array && (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__.isArrayIndex)(e)) return jt(t).getIndexObserver(Number(e));
            break;
        }
        let o = br(t, e);
        if (void 0 === o) {
            let s = wr(t);
            while (null !== s) {
                o = br(s, e);
                if (void 0 === o) s = wr(s); else break;
            }
        }
        if (void 0 !== o && !d.call(o, "value")) {
            let h = this.N(t, e, o);
            if (null == h) h = null === (n = null !== (r = null === (s = o.get) || void 0 === s ? void 0 : s.getObserver) && void 0 !== r ? r : null === (i = o.set) || void 0 === i ? void 0 : i.getObserver) || void 0 === n ? void 0 : n(t, this);
            return null == h ? o.configurable ? ComputedObserver.create(t, e, o, this, true) : this.I.createProperty(t, e) : h;
        }
        return new SetterObserver(t, e);
    }
    N(t, e, s) {
        if (this.F.length > 0) for (const r of this.F) {
            const i = r.getObserver(t, e, s, this);
            if (null != i) return i;
        }
        return null;
    }
    V(t, e, s) {
        if (true === s.doNotCache) return s;
        if (void 0 === t.$observers) {
            v(t, "$observers", {
                value: {
                    [e]: s
                }
            });
            return s;
        }
        return t.$observers[e] = s;
    }
}

ObserverLocator.inject = [ ur, pr ];

function gr(t) {
    let e;
    if (t instanceof Array) e = jt(t); else if (t instanceof Map) e = ue(t); else if (t instanceof Set) e = Zt(t);
    return e;
}

const wr = Object.getPrototypeOf;

const br = Object.getOwnPropertyDescriptor;

const Er = _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__.DI.createInterface("IObservation", (t => t.singleton(Observation)));

class Observation {
    constructor(t) {
        this.oL = t;
    }
    static get inject() {
        return [ vr ];
    }
    run(t) {
        const e = new Effect(this.oL, t);
        e.run();
        return e;
    }
}

class Effect {
    constructor(t, e) {
        this.oL = t;
        this.fn = e;
        this.interceptor = this;
        this.maxRunCount = 10;
        this.queued = false;
        this.running = false;
        this.runCount = 0;
        this.stopped = false;
    }
    handleChange() {
        this.queued = true;
        this.run();
    }
    handleCollectionChange() {
        this.queued = true;
        this.run();
    }
    run() {
        if (this.stopped) throw new Error("AUR0225");
        if (this.running) return;
        ++this.runCount;
        this.running = true;
        this.queued = false;
        ++this.obs.version;
        try {
            fs(this);
            this.fn(this);
        } finally {
            this.obs.clear();
            this.running = false;
            ds(this);
        }
        if (this.queued) {
            if (this.runCount > this.maxRunCount) {
                this.runCount = 0;
                throw new Error(`AUR0226`);
            }
            this.run();
        } else this.runCount = 0;
    }
    stop() {
        this.stopped = true;
        this.obs.clearAll();
    }
}

Ee(Effect);

function Ar(t) {
    if (void 0 === t.$observers) v(t, "$observers", {
        value: {}
    });
    return t.$observers;
}

const yr = {};

function mr(t, e, s) {
    if (null == e) return (e, s, i) => r(e, s, i, t);
    return r(t, e, s);
    function r(t, e, s, r) {
        var i;
        const n = void 0 === e;
        r = "object" !== typeof r ? {
            name: r
        } : r || {};
        if (n) e = r.name;
        if (null == e || "" === e) throw new Error("AUR0224");
        const o = r.callback || `${String(e)}Changed`;
        let h = yr;
        if (s) {
            delete s.value;
            delete s.writable;
            h = null === (i = s.initializer) || void 0 === i ? void 0 : i.call(s);
            delete s.initializer;
        } else s = {
            configurable: true
        };
        if (!("enumerable" in s)) s.enumerable = true;
        const c = r.set;
        s.get = function t() {
            var s;
            const r = Ur(this, e, o, h, c);
            null === (s = ls()) || void 0 === s ? void 0 : s.subscribeTo(r);
            return r.getValue();
        };
        s.set = function t(s) {
            Ur(this, e, o, h, c).setValue(s, 0);
        };
        s.get.getObserver = function t(s) {
            return Ur(s, e, o, h, c);
        };
        if (n) v(t.prototype, e, s); else return s;
    }
}

function Ur(t, e, s, r, i) {
    const n = Ar(t);
    let o = n[e];
    if (null == o) {
        o = new SetterNotifier(t, s, i, r === yr ? void 0 : r);
        n[e] = o;
    }
    return o;
}


//# sourceMappingURL=index.js.map


/***/ }),

/***/ "./src/contentscript/contentscript.ts":
/*!********************************************!*\
  !*** ./src/contentscript/contentscript.ts ***!
  \********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "installScript": () => /* binding */ installScript,
/* harmony export */   "getAureliaInstance": () => /* binding */ getAureliaInstance,
/* harmony export */   "getCustomElementInfo": () => /* binding */ getCustomElementInfo,
/* harmony export */   "install": () => /* binding */ install
/* harmony export */ });
/* harmony import */ var aurelia__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! aurelia */ "./node_modules/@aurelia/runtime-html/dist/esm/index.js");
/* harmony import */ var _shared_env__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../shared/env */ "./src/shared/env.ts");


function installScript(fn) {
    const source = ';(' + fn.toString() + ')(window, )';
    if (_shared_env__WEBPACK_IMPORTED_MODULE_0__.isFirefox) {
        // eslint-disable-next-line no-eval
        window.eval(source); // in Firefox, this evaluates on the content window
    }
    else {
        const script = document.createElement('script');
        script.textContent = source;
        document.documentElement.appendChild(script);
        script.parentNode.removeChild(script);
    }
}
function getAureliaInstance(win) {
    const all = document.querySelectorAll('*');
    for (let i = 0; i < all.length; i++) {
        const aurelia = all[i].$aurelia;
        if (aurelia) {
            return aurelia;
        }
    }
}
function getCustomElementInfo(element) {
    return aurelia__WEBPACK_IMPORTED_MODULE_1__.CustomElement.for(element);
}
function install(win) {
    let nextDebugId = 0;
    let debugValueLookup = {};
    const hooks = {
        Aurelia: undefined,
        currentElement: undefined,
        currentAttributes: [],
        getAllInfo: (root) => {
            root = root ?? document.body;
            return [hooks.getCustomElementInfo(root, false), ...Array.from(root.children).flatMap(y => hooks.getAllInfo(y))].filter(x => x);
        },
        updateValues: (info, property) => {
            if (!hooks.currentElement && !hooks.currentAttributes.length)
                return;
            const currentInfo = hooks.currentElement?.definition.key === info.key ? hooks.currentElement : hooks.currentAttributes.find(y => y.definition.key === info.key);
            info.bindables.forEach(x => currentInfo.viewModel[x.name] = x.value);
            info.properties.forEach(x => {
                // HMM: Not sure if we need the .value check
                const isObject = x.value === 'Object' && x.type === 'object';
                if (isObject) {
                    let targetProp = currentInfo.viewModel[x.name][property.name];
                    if (!targetProp)
                        return;
                    currentInfo.viewModel[x.name][property.name] = property.value;
                    return;
                }
                ;
                currentInfo.viewModel[x.name] = x.value;
            });
            return undefined;
        },
        getCustomElementInfo: (element, traverse = true) => {
            let customElement;
            let customAttributes;
            try {
                while (!customElement && element !== document.body) {
                    const au = element['$au'];
                    if (au) {
                        customElement = element['$au']['au:resource:custom-element'];
                        const customAttributeKeys = Object.getOwnPropertyNames(au).filter(y => y.includes('custom-attribute'));
                        customAttributes = customAttributeKeys.map(x => au[x]);
                    }
                    element = element.parentElement;
                    if (!traverse)
                        break;
                }
            }
            catch (e) {
                console.log(e);
            }
            if (!customElement && !customAttributes)
                return;
            hooks.currentElement = customElement;
            hooks.currentAttributes = customAttributes;
            const customElementInfo = extractControllerInfo(customElement);
            const customAttributesInfo = customAttributes && customAttributes.map(extractControllerInfo).filter(x => x);
            return {
                customElementInfo,
                customAttributesInfo
            };
        },
        getExpandedDebugValueForId(id) {
            let value = debugValueLookup[id].expandableValue;
            if (Array.isArray(value)) {
                let newValue = {};
                value.forEach((value, index) => {
                    newValue[index] = value;
                });
                value = newValue;
            }
            else if (isMap(value)) {
                let mapToArr = [];
                value = value.forEach((value, key) => {
                    mapToArr.push([value, key]);
                });
                value = mapToArr;
            }
            else if (isSet(value)) {
                value = Array.from(value);
            }
            return convertObjectToDebugInfo(value);
            // https://stackoverflow.com/questions/29924932/how-to-reliably-check-an-object-is-an-ecmascript-6-map-set
            function isMap(o) {
                try {
                    Map.prototype.has.call(o); // throws if o is not an object or has no [[MapData]]
                    return true;
                }
                catch (e) {
                    return false;
                }
            }
            function isSet(o) {
                try {
                    Set.prototype.has.call(o); // throws if o is not an object or has no [[SetData]]
                    return true;
                }
                catch (e) {
                    return false;
                }
            }
        }
    };
    window.addEventListener('au-started', (customEvent) => {
        hooks.Aurelia = customEvent.detail;
    }, { once: true });
    Object.defineProperty(win, '__AURELIA_DEVTOOLS_GLOBAL_HOOK__', {
        get() {
            return hooks;
        }
    });
    function extractControllerInfo(customElement) {
        if (!customElement)
            return;
        const bindableKeys = Object.keys(customElement.definition.bindables);
        const returnVal = {
            bindables: bindableKeys.map(y => {
                return setValueOnDebugInfo({
                    name: y
                }, customElement.viewModel[y], customElement.viewModel);
                // return {
                //   bindable: customElement.definition.bindables[y],
                //   type: typeof (customElement.viewModel[y]),
                //   name: y, value: customElement.viewModel[y]
                // }
            }),
            properties: Object.keys(customElement.viewModel).filter(x => !bindableKeys.some(y => y === x)).
                filter(x => !x.startsWith('$')).map(y => {
                return setValueOnDebugInfo({
                    name: y
                }, customElement.viewModel[y], customElement.viewModel);
                // return {
                //   type: typeof (customElement.viewModel[y]),
                //   name: y,
                //   value: getValueFor(customElement.viewModel[y])
                // }
            }),
            name: customElement.definition.name,
            aliases: customElement.definition.aliases,
            key: customElement.definition.key
        };
        return returnVal;
    }
    function getValueFor(value) {
        if (value instanceof Node) {
            return value.constructor.name;
        }
        else if (Array.isArray(value)) {
            return `Array[${value.length}]`;
        }
        else if (typeof (value) === 'object') {
            if (value.constructor) {
                return value.constructor.name;
            }
            else {
                return 'Object';
            }
        }
        else {
            return value;
        }
    }
    function setValueOnDebugInfo(debugInfo, value, instance) {
        try {
            let expandableValue;
            if (value instanceof Node) {
                debugInfo.canExpand = true;
                debugInfo.type = 'node';
                debugInfo.value = value.constructor.name;
                expandableValue = value;
            }
            else if (Array.isArray(value)) {
                debugInfo.canExpand = true;
                debugInfo.type = 'array';
                debugInfo.value = `Array[${value.length}]`;
                expandableValue = value;
            }
            else {
                debugInfo.type = typeof value;
                debugInfo.value = value;
            }
            if (value === null) {
                debugInfo.type = 'null';
                debugInfo.value = 'null';
            }
            else if (value === undefined) {
                debugInfo.type = 'undefined';
                debugInfo.value = 'undefined';
            }
            else if (debugInfo.type === 'object') {
                debugInfo.canExpand = true;
                expandableValue = value;
                if (value.constructor) {
                    debugInfo.value = value.constructor.name;
                }
                else {
                    debugInfo.value = 'Object';
                }
            }
            if (debugInfo.type === 'string' || debugInfo.type === 'number' || debugInfo.type === 'boolean') {
                debugInfo.canEdit = true;
            }
            debugInfo.debugId = debugInfo.debugId || getNextDebugId();
            debugValueLookup[debugInfo.debugId] = Object.assign({
                instance: instance,
                expandableValue: expandableValue
            }, debugInfo);
            return debugInfo;
        }
        catch (e) {
            return createErrorObject(e);
        }
    }
    function createControllerDebugInfo(controller) {
        try {
            let controllerDebugInfo = {
                name: controller.behavior.elementName || controller.behavior.attributeName
            };
            let viewModel = controller.viewModel;
            let bindableKeys = {};
            controllerDebugInfo.bindables = controller.behavior.properties.map(x => {
                bindableKeys[x.name] = true;
                return setValueOnDebugInfo({
                    name: x.name,
                    attribute: x.attribute,
                }, viewModel[x.name], viewModel);
            });
            controllerDebugInfo.properties = getDebugPropertyKeys(viewModel)
                .filter(x => !(x in bindableKeys))
                .map(x => {
                return setValueOnDebugInfo({
                    name: x
                }, viewModel[x], viewModel);
            });
            return controllerDebugInfo;
        }
        catch (e) {
            return createErrorObject(e);
        }
    }
    function convertObjectToDebugInfo(obj, blackList) {
        blackList = blackList || {};
        return {
            properties: getDebugPropertyKeys(obj)
                .filter(x => !(x in blackList))
                .map(x => {
                return setValueOnDebugInfo({
                    name: x
                }, obj[x], obj);
            })
        };
    }
    function getDebugInfoForNode(selectedNode) {
        try {
            var debugInfo = {};
            nextDebugId = 0;
            if (selectedNode.au) {
                var au = selectedNode.au;
                if (au.controller) {
                    debugInfo.customElement = createControllerDebugInfo(au.controller);
                }
                var tagName = selectedNode.tagName ? selectedNode.tagName.toLowerCase() : null;
                var customAttributeNames = getDebugPropertyKeys(au)
                    .filter(function (key) {
                    return key !== 'controller' && key !== tagName;
                });
                if (customAttributeNames.length) {
                    debugInfo.customAttributes = customAttributeNames.map(x => createControllerDebugInfo(au[x]));
                }
            }
            let owningView = findOwningViewOfNode(selectedNode);
            if (owningView) {
                if (owningView.bindingContext) {
                    debugInfo.bindingContext = convertObjectToDebugInfo(owningView.bindingContext);
                }
                if (owningView.overrideContext) {
                    debugInfo.overrideContext = convertObjectToDebugInfo(owningView.overrideContext, { bindingContext: true, parentOverrideContext: true });
                }
            }
            return debugInfo;
        }
        catch (e) {
            return createErrorObject(e);
        }
    }
    function findOwningViewOfNode(node) {
        function moveUp(n) {
            let current = n.parentNode;
            if (current) {
                return findComposingView(current) || findSiblingRepeaterView(current) || findImmediateControllerOwningView(current) || moveUp(current);
            }
            return null;
        }
        return attachedOwner(node) || findSiblingRepeaterView(node) || findImmediateControllerOwningView(node) || moveUp(node);
    }
    function updateValueForId(id, value) {
        let debugInfo = debugValueLookup[id];
        debugInfo.instance[debugInfo.name] = value;
        setValueOnDebugInfo(debugInfo, value, debugInfo.instance);
    }
    function getNextDebugId() {
        return ++nextDebugId;
    }
    function createErrorObject(e) {
        return [{
                // bindingContext: {
                // properties: [
                // {
                name: 'Debugger Error',
                value: e.message,
                type: 'string',
                canEdit: false
                // }
                // ]
                // }
            }];
    }
    function attachedOwner(node) {
        let ownerView = node.auOwnerView;
        if (ownerView && ownerView.viewFactory) {
            return ownerView;
        }
        return null;
    }
    function nodeIsImmediateChildOfView(view, node) {
        let currentChild = view.firstChild;
        let lastChild = view.lastChild;
        let nextChild;
        while (currentChild) {
            nextChild = currentChild.nextSibling;
            if (currentChild === node) {
                return true;
            }
            if (currentChild === lastChild) {
                break;
            }
            currentChild = nextChild;
        }
        return false;
    }
    function findSiblingRepeaterView(node) {
        if (!node) {
            return null;
        }
        let current = node.nextSibling;
        while (current) {
            if (current.nodeType === 8 && current.viewSlot && current.data === 'anchor') {
                let children = current.viewSlot.children;
                for (let i = 0, ii = children.length; i < ii; ++i) {
                    let view = children[i];
                    if (nodeIsImmediateChildOfView(view, node)) {
                        return view;
                    }
                }
            }
            current = current.nextSibling;
        }
        return null;
    }
    function findImmediateControllerOwningView(node) {
        let parent = node.parentNode;
        if (parent && parent.au && parent.au.controller
            && parent.au.controller.view && nodeIsImmediateChildOfView(parent.au.controller.view, node)) {
            return parent.au.controller.view;
        }
        return null;
    }
    function findComposingView(node) {
        if (!node) {
            return null;
        }
        if (node.aurelia) {
            return node.aurelia.root.view;
        }
        else if (attachedOwner(node)) {
            return attachedOwner(node);
        }
        else if (node.au) {
            var au = node.au;
            if (au.controller) { //custom element
                var controller = au.controller;
                var tagName = node.tagName ? node.tagName.toLowerCase() : null;
                if (tagName === 'router-view') {
                    return controller.viewModel.view;
                }
                else if (tagName === 'compose') {
                    return controller.viewModel.currentController.view;
                }
                else if (controller['with']) {
                    return controller['with'].viewModel.view;
                }
            }
        }
        return null;
    }
    function getDebugPropertyKeys(obj) {
        let props = [];
        const keys = [...Object.keys(obj), ...Object.getOwnPropertyNames(obj)];
        const uniqueKeys = keys.filter((value, i, arr) => arr.indexOf(value) === i);
        for (const key of uniqueKeys) {
            if (key && !key.startsWith('_') && typeof obj[key] !== 'function') {
                props.push(key);
            }
        }
        return props;
    }
}
Object.defineProperty(window, '__AURELIA_DEVTOOLS_HOOK__', {
    get() {
        return {
            getCustomElementInfo: (element) => {
            }
        };
    }
});
// inject the hook
if (document instanceof HTMLDocument) {
    installScript(install);
}


/***/ }),

/***/ "./src/shared/env.ts":
/*!***************************!*\
  !*** ./src/shared/env.ts ***!
  \***************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "isBrowser": () => /* binding */ isBrowser,
/* harmony export */   "target": () => /* binding */ target,
/* harmony export */   "isChrome": () => /* binding */ isChrome,
/* harmony export */   "isFirefox": () => /* binding */ isFirefox,
/* harmony export */   "isWindows": () => /* binding */ isWindows,
/* harmony export */   "isMac": () => /* binding */ isMac,
/* harmony export */   "isLinux": () => /* binding */ isLinux
/* harmony export */ });
const isBrowser = typeof navigator !== 'undefined';
const target = isBrowser ? window : typeof __webpack_require__.g !== 'undefined' ? __webpack_require__.g : {};
const isChrome = typeof chrome !== 'undefined' && !!chrome.devtools;
const isFirefox = isBrowser && navigator.userAgent.includes('Firefox');
const isWindows = isBrowser && navigator.platform.startsWith('Win');
const isMac = isBrowser && navigator.platform === 'MacIntel';
const isLinux = isBrowser && navigator.platform.startsWith('Linux');


/***/ })

/******/ 	});
/************************************************************************/
/******/ 	// The module cache
/******/ 	var __webpack_module_cache__ = {};
/******/ 	
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/ 		// Check if module is in cache
/******/ 		if(__webpack_module_cache__[moduleId]) {
/******/ 			return __webpack_module_cache__[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = __webpack_module_cache__[moduleId] = {
/******/ 			// no module.id needed
/******/ 			// no module.loaded needed
/******/ 			exports: {}
/******/ 		};
/******/ 	
/******/ 		// Execute the module function
/******/ 		__webpack_modules__[moduleId](module, module.exports, __webpack_require__);
/******/ 	
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/ 	
/************************************************************************/
/******/ 	/* webpack/runtime/define property getters */
/******/ 	(() => {
/******/ 		// define getter functions for harmony exports
/******/ 		__webpack_require__.d = (exports, definition) => {
/******/ 			for(var key in definition) {
/******/ 				if(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {
/******/ 					Object.defineProperty(exports, key, { enumerable: true, get: definition[key] });
/******/ 				}
/******/ 			}
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/global */
/******/ 	(() => {
/******/ 		__webpack_require__.g = (function() {
/******/ 			if (typeof globalThis === 'object') return globalThis;
/******/ 			try {
/******/ 				return this || new Function('return this')();
/******/ 			} catch (e) {
/******/ 				if (typeof window === 'object') return window;
/******/ 			}
/******/ 		})();
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/hasOwnProperty shorthand */
/******/ 	(() => {
/******/ 		__webpack_require__.o = (obj, prop) => Object.prototype.hasOwnProperty.call(obj, prop)
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/make namespace object */
/******/ 	(() => {
/******/ 		// define __esModule on exports
/******/ 		__webpack_require__.r = (exports) => {
/******/ 			if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 				Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 			}
/******/ 			Object.defineProperty(exports, '__esModule', { value: true });
/******/ 		};
/******/ 	})();
/******/ 	
/************************************************************************/
/******/ 	// module exports must be returned from runtime so entry inlining is disabled
/******/ 	// startup
/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__("./src/contentscript/contentscript.ts");
/******/ })()
;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9bbmFtZV0vLi9ub2RlX21vZHVsZXMvQGF1cmVsaWEva2VybmVsL2Rpc3QvZXNtL2luZGV4LmpzIiwid2VicGFjazovL1tuYW1lXS8uL25vZGVfbW9kdWxlcy9AYXVyZWxpYS9tZXRhZGF0YS9kaXN0L2VzbS9pbmRleC5qcyIsIndlYnBhY2s6Ly9bbmFtZV0vLi9ub2RlX21vZHVsZXMvQGF1cmVsaWEvcGxhdGZvcm0tYnJvd3Nlci9kaXN0L2VzbS9pbmRleC5qcyIsIndlYnBhY2s6Ly9bbmFtZV0vLi9ub2RlX21vZHVsZXMvQGF1cmVsaWEvcGxhdGZvcm0vZGlzdC9lc20vaW5kZXguanMiLCJ3ZWJwYWNrOi8vW25hbWVdLy4vbm9kZV9tb2R1bGVzL0BhdXJlbGlhL3J1bnRpbWUtaHRtbC9kaXN0L2VzbS9pbmRleC5qcyIsIndlYnBhY2s6Ly9bbmFtZV0vLi9ub2RlX21vZHVsZXMvQGF1cmVsaWEvcnVudGltZS9kaXN0L2VzbS9pbmRleC5qcyIsIndlYnBhY2s6Ly9bbmFtZV0vLi9zcmMvY29udGVudHNjcmlwdC9jb250ZW50c2NyaXB0LnRzIiwid2VicGFjazovL1tuYW1lXS8uL3NyYy9zaGFyZWQvZW52LnRzIiwid2VicGFjazovL1tuYW1lXS93ZWJwYWNrL2Jvb3RzdHJhcCIsIndlYnBhY2s6Ly9bbmFtZV0vd2VicGFjay9ydW50aW1lL2RlZmluZSBwcm9wZXJ0eSBnZXR0ZXJzIiwid2VicGFjazovL1tuYW1lXS93ZWJwYWNrL3J1bnRpbWUvZ2xvYmFsIiwid2VicGFjazovL1tuYW1lXS93ZWJwYWNrL3J1bnRpbWUvaGFzT3duUHJvcGVydHkgc2hvcnRoYW5kIiwid2VicGFjazovL1tuYW1lXS93ZWJwYWNrL3J1bnRpbWUvbWFrZSBuYW1lc3BhY2Ugb2JqZWN0Iiwid2VicGFjazovL1tuYW1lXS93ZWJwYWNrL3N0YXJ0dXAiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQTZGOztBQUVjOztBQUVFOztBQUU3Rzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCLE1BQU07QUFDeEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLLGNBQWM7QUFDbkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFjLE1BQU07QUFDcEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDOztBQUVEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQzs7QUFFRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQzs7QUFFRDtBQUNBO0FBQ0E7QUFDQSx1QkFBdUIsZ0JBQWdCO0FBQ3ZDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7O0FBRUQ7QUFDQSxXQUFXLFVBQVU7QUFDckI7QUFDQTtBQUNBLFVBQVUsTUFBTTtBQUNoQjtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtB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Q0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQSx3Q0FBd0M7QUFDeEMsQ0FBQzs7QUFFRDtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7O0FBRUQ7O0FBRUE7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQyxnQkFBZ0I7O0FBRWpCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSwyREFBMkQsZ0JBQWdCO0FBQzNFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsMkRBQTJELGlCQUFpQjtBQUM1RTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0EsdUNBQXVDLGNBQWM7QUFDckQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkVBQTZFO0FBQzdFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtB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TDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDOztBQUVEO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZSxpRUFBaUU7QUFDaEYsc0NBQXNDLFNBQVMsSUFBSSxTQUFTLElBQUksRUFBRTtBQUNsRSxrQkFBa0IsU0FBUyxJQUFJLFNBQVMsR0FBRyxTQUFTLElBQUksRUFBRTtBQUMxRDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQ0FBcUMsT0FBTztBQUM1QztBQUNBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBO0FBQ0EsWUFBWSxpREFBaUQsS0FBSztBQUNsRTtBQUNBO0FBQ0E7QUFDQSw2RUFBNkU7QUFDN0U7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBLENBQUM7O0FBRUQ7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbURBQW1ELGdFQUFnRSx3Q0FBd0MsVUFBVTtBQUNySztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFFQUFxRSxFQUFFO0FBQ3ZFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlFQUFpRSxFQUFFO0FBQ25FO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNB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O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVEsbUVBQVc7QUFDbkI7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQSxnQkFBZ0Isb0VBQWdCOztBQUVoQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVEsb0VBQWdCO0FBQ3hCO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQSxDQUFDOztBQUVEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQSxDQUFDOztBQUVEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQSxDQUFDOztBQUVEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsQ0FBQzs7QUFFRDtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLENBQUM7O0FBRUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxDQUFDOztBQUVELFdBQVcsc0RBQUM7O0FBRVosV0FBVywrREFBaUI7O0FBRTVCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWUsbUVBQVc7QUFDMUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUEsV0FBVywrREFBaUI7O0FBRTVCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxrQ0FBa0MsRUFBRSxtQ0FBbUMsaUNBQWlDLEVBQUUsSUFBSTtBQUM5Rzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsbUVBQW1FO0FBQ25FO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQ0FBcUMsT0FBTztBQUM1QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0EsMkNBQTJDLE9BQU87QUFDbEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsc0VBQUM7O0FBRUQsZ0VBQUM7O0FBRUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLE9BQU8sc0NBQXNDLEdBQUcseURBQUM7O0FBRWpEOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsNkRBQUM7O0FBRUQsT0FBTyxXQUFXLEdBQUcseURBQUM7O0FBRXRCO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWMsTUFBTTtBQUNwQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtEQUFrRDtBQUNsRDtBQUNBLGtCQUFrQixNQUFNO0FBQ3hCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFjLE1BQU07QUFDcEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFjLE1BQU07QUFDcEI7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQixnRUFBUTtBQUM1QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsNkRBQUM7O0FBRUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQixnRUFBUTtBQUM1QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0NBQXNDO0FBQ3RDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBOztBQUVBLDZEQUFDOztBQUVEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsNkRBQUM7O0FBRUQsT0FBTyxzQ0FBc0MsR0FBRyx5REFBQzs7QUFFakQ7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0RUFBNEU7QUFDNUU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLDZEQUFDOztBQUVEOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FB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QTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSw2REFBQzs7QUFFRCw2REFBQzs7QUFFRCxXQUFXLCtEQUFpQjs7QUFFNUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVEsbUVBQVc7QUFDbkI7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1EQUFtRDtBQUNuRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQzs7QUFFRDs7QUFFQTtBQUNBO0FBQ0EsMkJBQTJCO0FBQzNCO0FBQ0E7O0FBRUEsV0FBVywrREFBaUI7O0FBRTVCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3REFB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QTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMENBQTBDLHlCQUF5QjtBQUNuRTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUI7QUFDckI7QUFDQSxxQkFBcUI7QUFDckI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5QkFBeUI7QUFDekI7QUFDQSx5QkFBeUI7QUFDekI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMERBQTBEO0FBQzFEO0FBQ0E7QUFDQSwwREFBMEQ7QUFDMUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUJBQW1CLFlBQVk7QUFDL0IseUNBQXlDLE9BQU87QUFDaEQ7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QixvRUFBQyxnQkFBZ0Isb0VBQUM7QUFDMUMsY0FBYyxNQUFNO0FBQ3BCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFjLE1BQU07QUFDcEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVcsdURBQUM7QUFDWjs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxnQkFBZ0IsbUVBQUM7QUFDakI7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxvQkFBb0IsOERBQUM7QUFDckIsb0JBQW9CLCtEQUFDO0FBQ3JCO0FBQ0EseUNBQXlDLDBEQUFRO0FBQ2pEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVLE1BQU07QUFDaEIsVUFBVSwyQkFBMkI7QUFDckM7QUFDQSwrQ0FBK0MsVUFBVTtBQUN6RCx1RUFBdUU7QUFDdkU7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxXQUFXLHlEQUFDO0FBQ1o7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsNkNBQTZDOztBQUU3QztBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDLGdCQUFnQjs7QUFFakI7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUMsZ0JBQWdCOztBQUVqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxXQUFXLCtEQUFpQjs7QUFFNUIsV0FBVywrREFBaUI7O0FBRTVCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQSxXQUFXLCtEQUFpQjs7QUFFNUIsV0FBVywrREFBaUI7O0FBRTVCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQ0FBcUMsUUFBUTtBQUM3QztBQUNBO0FBQ0E7QUFDQSxzQ0FBc0MsUUFBUTtBQUM5QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQ0FBb0MsUUFBUTtBQUM1QztBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTs7QUFFQSx1QkFBdUIsb0RBQUM7O0FBRXhCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUdBQW1HLDZEQUFDO0FBQ3BHLGtCQUFrQiwwREFBQztBQUNuQjtBQUNBO0FBQ0E7QUFDQSx3REFBd0Q7QUFDeEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUJBQW1CLDBEQUFDO0FBQ3BCO0FBQ0EsdUJBQXVCLDBEQUFDO0FBQ3hCO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakIsYUFBYTtBQUNiLFNBQVM7QUFDVDtBQUNBO0FBQ0EsZUFBZSwwREFBQyxpQkFBaUIsMERBQUMsbUNBQW1DLDBEQUFDO0FBQ3RFO0FBQ0E7QUFDQSxlQUFlLDBEQUFDLHFDQUFxQywwREFBQztBQUN0RDtBQUNBO0FBQ0EsZUFBZSwyREFBQztBQUNoQjtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLFdBQVcsK0RBQWlCOztBQUU1QixXQUFXLCtEQUFpQjtBQUM1QjtBQUNBO0FBQ0EsQ0FBQzs7QUFFRCxXQUFXLCtEQUFpQjs7QUFFNUI7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDLGdCQUFnQjs7QUFFakI7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxxQ0FBcUMsT0FBTztBQUM1QyxLQUFLO0FBQ0w7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0RBQW9EO0FBQ3BEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0VBQWdFO0FBQ2hFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0NBQW9DO0FBQ3BDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzRUFBc0U7QUFDdEU7QUFDQTs7QUFFQSxXQUFXLCtEQUFpQjs7QUFFNUIsV0FBVywrREFBaUI7O0FBRTVCLFdBQVcsK0RBQWlCOztBQUU1QjtBQUNBLEtBQUssMEVBQVc7QUFDaEI7QUFDQSxLQUFLO0FBQ0wsS0FBSyx5RUFBVTtBQUNmO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3Q0FBd0MscUVBQU0sdURBQXVEO0FBQ3JHO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0NBQXdDLHFFQUFNLDBEQUEwRDtBQUN4RztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0QkFBNEI7QUFDNUI7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlLHNCQUFzQjtBQUNyQztBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLFdBQVcsK0RBQWlCOztBQUU1QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLFdBQVcsK0RBQWlCOztBQUU1QixXQUFXLCtEQUFpQjs7QUFFNUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDLGdCQUFnQjs7QUFFakIsV0FBVywrREFBaUI7O0FBRTVCO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxXQUFXLCtEQUFpQjs7QUFFNUIsV0FBVywrREFBaUI7O0FBRTVCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZLG1FQUFXO0FBQ3ZCO0FBQ0Esa0JBQWtCLGdFQUFZO0FBQzlCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2IseURBQXlELEVBQUU7QUFDM0Q7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsOEdBQThHO0FBQzlHO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNEQUFzRCxFQUFFLEdBQUcsVUFBVTtBQUNyRTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0NBQWtDLDZEQUFDO0FBQ25DO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0RBQXNELE1BQU0sR0FBRyxVQUFVO0FBQ3pFOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNEQUFzRCxNQUFNLEdBQUcsVUFBVTtBQUN6RTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsY0FBYywrREFBQyxFQUFFLDhEQUFDOztBQUVsQjs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLGNBQWMsK0RBQUMsRUFBRSw4REFBQzs7QUFFbEI7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsY0FBYywrREFBQzs7QUFFZjs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvRUFBb0UsZ0VBQVE7QUFDNUU7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFjLE1BQU07QUFDcEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLGNBQWMsK0RBQUMsRUFBRSw4REFBQzs7QUFFbEI7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLGNBQWMsK0RBQUMsRUFBRSw4REFBQzs7QUFFbEI7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNEQUFzRCxnRUFBUTtBQUM5RDtBQUNBO0FBQ0E7O0FBRUEsY0FBYywrREFBQyxFQUFFLDhEQUFDOztBQUVsQjs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBLHdCQUF3Qix1RUFBQztBQUN6QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5QkFBeUIsb0VBQUM7QUFDMUI7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWMsTUFBTTtBQUNwQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsY0FBYywrREFBQyxFQUFFLDhEQUFDOztBQUVsQjs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsY0FBYywrREFBQzs7QUFFZjs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0RBQXdELGdFQUFRO0FBQ2hFO0FBQ0E7QUFDQTs7QUFFQSxjQUFjLCtEQUFDLEVBQUUsOERBQUM7O0FBRWxCOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMkRBQTJELGdFQUFRO0FBQ25FO0FBQ0E7QUFDQTs7QUFFQSxjQUFjLCtEQUFDLEVBQUUsOERBQUM7O0FBRWxCOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2S0FBNkssdURBQUM7QUFDOUs7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLG1CQUFtQixPQUFPO0FBQzFCO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTtBQUNBLCtGQUErRiw2REFBQztBQUNoRywrQkFBK0IsNkRBQUM7QUFDaEMsK0JBQStCLDZEQUFDO0FBQ2hDLGdEQUFnRCw2REFBQztBQUNqRDtBQUNBLGdEQUFnRCw2REFBQztBQUNqRDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLCtGQUErRiw2REFBQztBQUNoRztBQUNBLCtCQUErQiw2REFBQztBQUNoQywrQkFBK0IsNkRBQUM7QUFDaEMsZ0RBQWdELDZEQUFDO0FBQ2pEO0FBQ0EsZ0RBQWdELDZEQUFDO0FBQ2pEO0FBQ0E7O0FBRUEsZUFBZSw2REFBQzs7QUFFaEI7O0FBRUEsZUFBZSw2REFBQyxxQkFBcUIsdURBQUM7O0FBRXRDOztBQUVBO0FBQ0E7QUFDQTtBQUNBLENBQUMsZ0JBQWdCOztBQUVqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBLCtDQUErQyw2REFBQyxvQkFBb0IsNERBQUMsaURBQWlELDZEQUFDO0FBQ3ZIO0FBQ0E7QUFDQSxlQUFlLDRCQUE0QjtBQUMzQyxRQUFRLG1FQUFXO0FBQ25CLFFBQVEsaUVBQVM7QUFDakIsUUFBUSxpRUFBQztBQUNUO0FBQ0E7O0FBRUE7O0FBRUEsbUJBQW1CLEdBQUcsR0FBRyxFQUFFOztBQUUzQjs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQSxDQUFDOztBQUVEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwrRkFBK0YsMERBQUMsSUFBSTtBQUNwRyxrREFBa0QsMERBQUM7QUFDbkQ7QUFDQTtBQUNBLHNFQUFzRSxpRUFBUztBQUMvRTtBQUNBOztBQUVBLGtCQUFrQiwrREFBQzs7QUFFbkI7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLCtGQUErRiwwREFBQyxJQUFJO0FBQ3BHLGtEQUFrRCwwREFBQztBQUNuRDtBQUNBO0FBQ0Esc0VBQXNFLGdFQUFRO0FBQzlFO0FBQ0E7O0FBRUEsa0JBQWtCLCtEQUFDOztBQUVuQjs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsK0ZBQStGLDBEQUFDLElBQUk7QUFDcEcsa0RBQWtELDBEQUFDO0FBQ25EO0FBQ0E7QUFDQSxzRUFBc0Usa0VBQVU7QUFDaEY7QUFDQTs7QUFFQSxrQkFBa0IsK0RBQUM7O0FBRW5COztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwrRkFBK0YsMERBQUMsSUFBSTtBQUNwRyxrREFBa0QsMERBQUM7QUFDbkQ7QUFDQTtBQUNBLHNFQUFzRSxnRUFBUTtBQUM5RTtBQUNBOztBQUVBLGtCQUFrQiwrREFBQzs7QUFFbkI7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkNBQTZDLGdFQUFRLEdBQUcsZ0VBQVE7QUFDaEUsMkVBQTJFLDBEQUFDO0FBQzVFLFNBQVM7QUFDVCxrREFBa0QsMERBQUM7QUFDbkQ7QUFDQSwyQkFBMkIsaUVBQVMsd0NBQXdDLGlFQUFTLEdBQUcsZ0VBQVE7QUFDaEc7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxrQkFBa0IsK0RBQUM7O0FBRW5COztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdDQUF3QywwREFBQztBQUN6QztBQUNBO0FBQ0E7O0FBRUEsY0FBYywrREFBQzs7QUFFZjs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3Q0FBd0MsMERBQUM7QUFDekM7QUFDQTtBQUNBOztBQUVBLGNBQWMsK0RBQUM7O0FBRWY7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0dBQXNHLHFFQUFNO0FBQzVHO0FBQ0E7O0FBRUEsY0FBYywrREFBQzs7QUFFZjs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1R0FBdUcseUVBQVU7QUFDakg7QUFDQTs7QUFFQSxjQUFjLCtEQUFDOztBQUVmOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVHQUF1RywwRUFBVztBQUNsSDtBQUNBOztBQUVBLGNBQWMsK0RBQUM7O0FBRWY7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLGNBQWMsK0RBQUM7O0FBRWY7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLGNBQWMsK0RBQUM7O0FBRWY7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLGNBQWMsK0RBQUM7O0FBRWY7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLGNBQWMsK0RBQUM7O0FBRWY7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQSxXQUFXLCtEQUFpQjs7QUFFNUI7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBLFFBQVEsc0RBQVE7QUFDaEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlLG1FQUFXO0FBQzFCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLCtFQUErRSx1REFBQyxxREFBcUQsdURBQUM7QUFDdEk7QUFDQSw0Q0FBNEMsdURBQUM7QUFDN0M7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWMsTUFBTTtBQUNwQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUVBQXVFLEVBQUU7QUFDekU7QUFDQTtBQUNBLCtDQUErQztBQUMvQztBQUNBO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQjtBQUNyQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNB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Q0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxpRUFBQzs7QUFFRDtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsaUVBQUM7O0FBRUQ7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5REFBeUQ7QUFDekQ7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQ0FBcUMsdUNBQXVDO0FBQzVFO0FBQ0EsNkVBQTZFO0FBQzdFO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkNBQTZDO0FBQzdDO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJDQUEyQztBQUMzQztBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTLG1CQUFtQjtBQUM1QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxzRUFBQzs7QUFFRCxnRUFBQzs7QUFFRDs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlFQUF5RTtBQUN6RTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLHNFQUFDOztBQUVELGdFQUFDOztBQUVEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNEJBQTRCO0FBQzVCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUJBQXVCO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUJBQXlCLDBEQUFDO0FBQzFCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQkFBa0IsTUFBTTtBQUN4QjtBQUNBO0FBQ0EsZUFBZSx1REFBQztBQUNoQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZSx1REFBQztBQUNoQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQkFBa0IsTUFBTTtBQUN4QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNB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QUFDQTtBQUNBLGtCQUFrQix1REFBQztBQUNuQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLFVBQVUsa0VBQVU7QUFDcEIsQ0FBQzs7QUFFRDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxDQUFDOztBQUVEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsQ0FBQzs7QUFFRDtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLENBQUM7O0FBRUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVCxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2QkFBNkIscUVBQXFFO0FBQ2xHLEtBQUs7QUFDTDtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxpQ0FBaUMsT0FBTztBQUN4QztBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0Esc0RBQXNEO0FBQ3REO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtB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O0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdLQUF3SztBQUN4SztBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseURBQXlELHFCQUFxQjtBQUM5RTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVCQUF1Qiw4REFBWTtBQUNuQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQzs7QUFFRDs7QUFFQSxXQUFXLCtEQUFpQjtBQUM1QjtBQUNBO0FBQ0E7QUFDQSxDQUFDOztBQUVEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQSxnRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBLGdFQUFFOztBQUVGOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztB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Q0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQ0FBcUMsT0FBTztBQUM1QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtEQUFrRCxVQUFVO0FBQzVEO0FBQ0E7QUFDQTtBQUNBLFNBQVMsaUNBQWlDLFVBQVU7QUFDcEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrREFBa0QsVUFBVTtBQUM1RDtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZDQUE2QyxPQUFPO0FBQ3BEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0RBQWtELFVBQVU7QUFDNUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1QkFBdUIsc0JBQXNCO0FBQzdDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJJQUEySSx1QkFBdUI7QUFDbEs7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsaUVBQUMsT0FBTyxpRUFBQztBQUNqQyx3QkFBd0IsK0RBQUMsT0FBTywrREFBQztBQUNqQztBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0EsdUNBQXVDLGVBQWU7QUFDdEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0EsdUNBQXVDLGVBQWU7QUFDdEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUJBQXVCLHVCQUF1QjtBQUM5QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLDJEQUEyRCx1REFBQzs7QUFFNUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1QkFBdUIsc0JBQXNCO0FBQzdDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSw2REFBNkQsdURBQUMsRUFBRSx1REFBQzs7QUFFakU7QUFDQSx1QkFBdUIsdURBQUM7QUFDeEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVCQUF1Qiw2QkFBNkI7QUFDcEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0EsNkJBQTZCLHVEQUFDO0FBQzlCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFF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OztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCLE1BQU07QUFDeEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCLE1BQU07QUFDeEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCLE1BQU07QUFDeEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCLE1BQU07QUFDeEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVCQUF1Qiw2REFBQztBQUN4QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLGlEQUFpRDtBQUNqRDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsbUJBQW1CLE9BQU87QUFDMUI7QUFDQTtBQUNBLHVCQUF1QixRQUFRO0FBQy9CO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBCQUEwQixPQUFPO0FBQ2pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDOztBQUVEOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQkFBbUIsT0FBTztBQUMxQjtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZCQUE2QjtBQUM3QjtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQzs7QUFFRDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQzs7QUFFRDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxzQ0FBc0Msc0NBQXNDLHNDQUFzQztBQUNsSDtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUEsV0FBVywrREFBaUI7O0FBRTVCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQyxnQkFBZ0I7O0FBRWpCO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUMsZ0JBQWdCOztBQUVqQjs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQyxnQkFBZ0I7O0FBRWpCOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUMsZ0JBQWdCOztBQUVqQjs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUMsZ0JBQWdCOztBQUVqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0RBQXNELEtBQUs7QUFDM0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtFQUFrRSxLQUFLLEdBQUcsc0RBQXNELEtBQUs7QUFDckksaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCLGlDQUFpQyxLQUFLO0FBQ3ZELGFBQWE7O0FBRWI7QUFDQSxzREFBc0Q7QUFDdEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLGdFQUFnRSxLQUFLLEdBQUcsaUNBQWlDLEtBQUs7QUFDOUc7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1FQUFtRSxLQUFLO0FBQ3hFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMkVBQTJFO0FBQzNFOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0RUFBNEUsMERBQTBEO0FBQ3RJO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkNBQTZDLEtBQUs7QUFDbEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3REFBd0QsS0FBSztBQUM3RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdEQUF3RCxLQUFLO0FBQzdEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxREFBcUQsS0FBSztBQUMxRCxtQ0FBbUMsS0FBSztBQUN4QztBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtB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QUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7O0FBRUQ7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7O0FBRUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBLFdBQVcsK0RBQWlCOztBQUU1QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQixNQUFNO0FBQ3hCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlEQUFpRCxFQUFFO0FBQ25EO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsd0JBQXdCLHNEQUFDOztBQUV6Qjs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0REFBNEQsU0FBUztBQUNyRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUEsV0FBVywrREFBaUI7O0FBRTVCLFdBQVcsK0RBQWlCO0FBQzVCLGFBQWEsb0RBQUM7QUFDZDtBQUNBLEtBQUs7QUFDTDtBQUNBLENBQUM7O0FBRUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLG1FQUFtRTtBQUNuRTs7QUFFQTtBQUNBLHNDQUFzQyw2REFBQztBQUN2QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRDQUE0QztBQUM1QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBLHNDQUFzQyxzQ0FBc0M7QUFDNUU7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQSxXQUFXLCtEQUFpQjs7QUFFNUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsbUNBQW1DLFVBQVU7QUFDN0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0NBQW9DO0FBQ3BDO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVzbkU7QUFDdG5FOzs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQzMxSndDO0FBQ0U7QUFDbkM7QUFDUCxxQkFBcUI7QUFDckIsUUFBUSxrREFBUztBQUNqQjtBQUNBLDRCQUE0QjtBQUM1QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBLG1CQUFtQixnQkFBZ0I7QUFDbkM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUCxXQUFXLHNEQUFpQjtBQUM1QjtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDhDQUE4QztBQUM5QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOENBQThDO0FBQzlDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSyxHQUFHLGFBQWE7QUFDckI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRCQUE0QixhQUFhO0FBQ3pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMkNBQTJDLGFBQWE7QUFDeEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzR0FBc0csb0RBQW9EO0FBQzFKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFEQUFxRCxRQUFRO0FBQzdEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdDQUFnQztBQUNoQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDNWJPO0FBQ0EsMkNBQTJDLHFCQUFNLG1CQUFtQixxQkFBTTtBQUMxRTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7O1VDTlA7VUFDQTs7VUFFQTtVQUNBO1VBQ0E7VUFDQTtVQUNBO1VBQ0E7VUFDQTtVQUNBO1VBQ0E7VUFDQTtVQUNBO1VBQ0E7O1VBRUE7VUFDQTs7VUFFQTtVQUNBO1VBQ0E7Ozs7O1dDckJBO1dBQ0E7V0FDQTtXQUNBO1dBQ0Esd0NBQXdDLHlDQUF5QztXQUNqRjtXQUNBO1dBQ0EsRTs7Ozs7V0NQQTtXQUNBO1dBQ0E7V0FDQTtXQUNBLEVBQUU7V0FDRjtXQUNBO1dBQ0EsQ0FBQyxJOzs7OztXQ1BELHNGOzs7OztXQ0FBO1dBQ0E7V0FDQTtXQUNBLHNEQUFzRCxrQkFBa0I7V0FDeEU7V0FDQSwrQ0FBK0MsY0FBYztXQUM3RCxFOzs7O1VDTkE7VUFDQTtVQUNBO1VBQ0EiLCJmaWxlIjoiYnVpbGQvY29udGVudHNjcmlwdC5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IE1ldGFkYXRhIGFzIHQsIGFwcGx5TWV0YWRhdGFQb2x5ZmlsbCBhcyBlLCBpc09iamVjdCBhcyBuIH0gZnJvbSBcIkBhdXJlbGlhL21ldGFkYXRhXCI7XG5cbmV4cG9ydCB7IE1ldGFkYXRhLCBhcHBseU1ldGFkYXRhUG9seWZpbGwsIGlzTnVsbE9yVW5kZWZpbmVkLCBpc09iamVjdCwgbWV0YWRhdGEgfSBmcm9tIFwiQGF1cmVsaWEvbWV0YWRhdGFcIjtcblxuZXhwb3J0IHsgUGxhdGZvcm0sIFRhc2ssIFRhc2tBYm9ydEVycm9yLCBUYXNrUXVldWUsIFRhc2tRdWV1ZVByaW9yaXR5LCBUYXNrU3RhdHVzIH0gZnJvbSBcIkBhdXJlbGlhL3BsYXRmb3JtXCI7XG5cbmNvbnN0IHIgPSB7fTtcblxuZnVuY3Rpb24gaSh0KSB7XG4gICAgc3dpdGNoICh0eXBlb2YgdCkge1xuICAgICAgY2FzZSBcIm51bWJlclwiOlxuICAgICAgICByZXR1cm4gdCA+PSAwICYmICgwIHwgdCkgPT09IHQ7XG5cbiAgICAgIGNhc2UgXCJzdHJpbmdcIjpcbiAgICAgICAge1xuICAgICAgICAgICAgY29uc3QgZSA9IHJbdF07XG4gICAgICAgICAgICBpZiAodm9pZCAwICE9PSBlKSByZXR1cm4gZTtcbiAgICAgICAgICAgIGNvbnN0IG4gPSB0Lmxlbmd0aDtcbiAgICAgICAgICAgIGlmICgwID09PSBuKSByZXR1cm4gclt0XSA9IGZhbHNlO1xuICAgICAgICAgICAgbGV0IGkgPSAwO1xuICAgICAgICAgICAgbGV0IHMgPSAwO1xuICAgICAgICAgICAgZm9yICg7cyA8IG47ICsrcykge1xuICAgICAgICAgICAgICAgIGkgPSB0LmNoYXJDb2RlQXQocyk7XG4gICAgICAgICAgICAgICAgaWYgKDAgPT09IHMgJiYgNDggPT09IGkgJiYgbiA+IDEgfHwgaSA8IDQ4IHx8IGkgPiA1NykgcmV0dXJuIHJbdF0gPSBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiByW3RdID0gdHJ1ZTtcbiAgICAgICAgfVxuXG4gICAgICBkZWZhdWx0OlxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBzKHQpIHtcbiAgICBzd2l0Y2ggKHR5cGVvZiB0KSB7XG4gICAgICBjYXNlIFwibnVtYmVyXCI6XG4gICAgICBjYXNlIFwiYmlnaW50XCI6XG4gICAgICAgIHJldHVybiB0cnVlO1xuXG4gICAgICBkZWZhdWx0OlxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBvKHQpIHtcbiAgICBzd2l0Y2ggKHR5cGVvZiB0KSB7XG4gICAgICBjYXNlIFwic3RyaW5nXCI6XG4gICAgICAgIHJldHVybiB0cnVlO1xuXG4gICAgICBjYXNlIFwib2JqZWN0XCI6XG4gICAgICAgIHJldHVybiB0IGluc3RhbmNlb2YgRGF0ZTtcblxuICAgICAgZGVmYXVsdDpcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbn1cblxuY29uc3QgdSA9IGZ1bmN0aW9uKCkge1xuICAgIGxldCB0O1xuICAgIChmdW5jdGlvbih0KSB7XG4gICAgICAgIHRbdFtcIm5vbmVcIl0gPSAwXSA9IFwibm9uZVwiO1xuICAgICAgICB0W3RbXCJkaWdpdFwiXSA9IDFdID0gXCJkaWdpdFwiO1xuICAgICAgICB0W3RbXCJ1cHBlclwiXSA9IDJdID0gXCJ1cHBlclwiO1xuICAgICAgICB0W3RbXCJsb3dlclwiXSA9IDNdID0gXCJsb3dlclwiO1xuICAgIH0pKHQgfHwgKHQgPSB7fSkpO1xuICAgIGNvbnN0IGUgPSBPYmplY3QuYXNzaWduKE9iamVjdC5jcmVhdGUobnVsbCksIHtcbiAgICAgICAgMDogdHJ1ZSxcbiAgICAgICAgMTogdHJ1ZSxcbiAgICAgICAgMjogdHJ1ZSxcbiAgICAgICAgMzogdHJ1ZSxcbiAgICAgICAgNDogdHJ1ZSxcbiAgICAgICAgNTogdHJ1ZSxcbiAgICAgICAgNjogdHJ1ZSxcbiAgICAgICAgNzogdHJ1ZSxcbiAgICAgICAgODogdHJ1ZSxcbiAgICAgICAgOTogdHJ1ZVxuICAgIH0pO1xuICAgIGZ1bmN0aW9uIG4odCkge1xuICAgICAgICBpZiAoXCJcIiA9PT0gdCkgcmV0dXJuIDA7XG4gICAgICAgIGlmICh0ICE9PSB0LnRvVXBwZXJDYXNlKCkpIHJldHVybiAzO1xuICAgICAgICBpZiAodCAhPT0gdC50b0xvd2VyQ2FzZSgpKSByZXR1cm4gMjtcbiAgICAgICAgaWYgKHRydWUgPT09IGVbdF0pIHJldHVybiAxO1xuICAgICAgICByZXR1cm4gMDtcbiAgICB9XG4gICAgcmV0dXJuIGZ1bmN0aW9uKHQsIGUpIHtcbiAgICAgICAgY29uc3QgciA9IHQubGVuZ3RoO1xuICAgICAgICBpZiAoMCA9PT0gcikgcmV0dXJuIHQ7XG4gICAgICAgIGxldCBpID0gZmFsc2U7XG4gICAgICAgIGxldCBzID0gXCJcIjtcbiAgICAgICAgbGV0IG87XG4gICAgICAgIGxldCB1ID0gXCJcIjtcbiAgICAgICAgbGV0IGwgPSAwO1xuICAgICAgICBsZXQgYyA9IHQuY2hhckF0KDApO1xuICAgICAgICBsZXQgZiA9IG4oYyk7XG4gICAgICAgIGxldCBhID0gMDtcbiAgICAgICAgZm9yICg7YSA8IHI7ICsrYSkge1xuICAgICAgICAgICAgbyA9IGw7XG4gICAgICAgICAgICB1ID0gYztcbiAgICAgICAgICAgIGwgPSBmO1xuICAgICAgICAgICAgYyA9IHQuY2hhckF0KGEgKyAxKTtcbiAgICAgICAgICAgIGYgPSBuKGMpO1xuICAgICAgICAgICAgaWYgKDAgPT09IGwpIHtcbiAgICAgICAgICAgICAgICBpZiAocy5sZW5ndGggPiAwKSBpID0gdHJ1ZTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgaWYgKCFpICYmIHMubGVuZ3RoID4gMCAmJiAyID09PSBsKSBpID0gMyA9PT0gbyB8fCAzID09PSBmO1xuICAgICAgICAgICAgICAgIHMgKz0gZSh1LCBpKTtcbiAgICAgICAgICAgICAgICBpID0gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHM7XG4gICAgfTtcbn0oKTtcblxuY29uc3QgbCA9IGZ1bmN0aW9uKCkge1xuICAgIGNvbnN0IHQgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuICAgIGZ1bmN0aW9uIGUodCwgZSkge1xuICAgICAgICByZXR1cm4gZSA/IHQudG9VcHBlckNhc2UoKSA6IHQudG9Mb3dlckNhc2UoKTtcbiAgICB9XG4gICAgcmV0dXJuIGZ1bmN0aW9uKG4pIHtcbiAgICAgICAgbGV0IHIgPSB0W25dO1xuICAgICAgICBpZiAodm9pZCAwID09PSByKSByID0gdFtuXSA9IHUobiwgZSk7XG4gICAgICAgIHJldHVybiByO1xuICAgIH07XG59KCk7XG5cbmNvbnN0IGMgPSBmdW5jdGlvbigpIHtcbiAgICBjb25zdCB0ID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiAgICByZXR1cm4gZnVuY3Rpb24oZSkge1xuICAgICAgICBsZXQgbiA9IHRbZV07XG4gICAgICAgIGlmICh2b2lkIDAgPT09IG4pIHtcbiAgICAgICAgICAgIG4gPSBsKGUpO1xuICAgICAgICAgICAgaWYgKG4ubGVuZ3RoID4gMCkgbiA9IG5bMF0udG9VcHBlckNhc2UoKSArIG4uc2xpY2UoMSk7XG4gICAgICAgICAgICB0W2VdID0gbjtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbjtcbiAgICB9O1xufSgpO1xuXG5jb25zdCBmID0gZnVuY3Rpb24oKSB7XG4gICAgY29uc3QgdCA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gICAgZnVuY3Rpb24gZSh0LCBlKSB7XG4gICAgICAgIHJldHVybiBlID8gYC0ke3QudG9Mb3dlckNhc2UoKX1gIDogdC50b0xvd2VyQ2FzZSgpO1xuICAgIH1cbiAgICByZXR1cm4gZnVuY3Rpb24obikge1xuICAgICAgICBsZXQgciA9IHRbbl07XG4gICAgICAgIGlmICh2b2lkIDAgPT09IHIpIHIgPSB0W25dID0gdShuLCBlKTtcbiAgICAgICAgcmV0dXJuIHI7XG4gICAgfTtcbn0oKTtcblxuZnVuY3Rpb24gYSh0KSB7XG4gICAgY29uc3Qge2xlbmd0aDogZX0gPSB0O1xuICAgIGNvbnN0IG4gPSBBcnJheShlKTtcbiAgICBsZXQgciA9IDA7XG4gICAgZm9yICg7ciA8IGU7ICsrcikgbltyXSA9IHRbcl07XG4gICAgcmV0dXJuIG47XG59XG5cbmNvbnN0IGggPSB7fTtcblxuZnVuY3Rpb24gZCh0KSB7XG4gICAgaWYgKHZvaWQgMCA9PT0gaFt0XSkgaFt0XSA9IDA7XG4gICAgcmV0dXJuICsraFt0XTtcbn1cblxuZnVuY3Rpb24gdih0KSB7XG4gICAgaFt0XSA9IDA7XG59XG5cbmZ1bmN0aW9uIHcodCwgZSkge1xuICAgIHJldHVybiB0IC0gZTtcbn1cblxuZnVuY3Rpb24gZyh0LCBlLCBuKSB7XG4gICAgaWYgKHZvaWQgMCA9PT0gdCB8fCBudWxsID09PSB0IHx8IHQgPT09IE90KSBpZiAodm9pZCAwID09PSBlIHx8IG51bGwgPT09IGUgfHwgZSA9PT0gT3QpIHJldHVybiBPdDsgZWxzZSByZXR1cm4gbiA/IGUuc2xpY2UoMCkgOiBlOyBlbHNlIGlmICh2b2lkIDAgPT09IGUgfHwgbnVsbCA9PT0gZSB8fCBlID09PSBPdCkgcmV0dXJuIG4gPyB0LnNsaWNlKDApIDogdDtcbiAgICBjb25zdCByID0ge307XG4gICAgY29uc3QgaSA9IG4gPyB0LnNsaWNlKDApIDogdDtcbiAgICBsZXQgcyA9IHQubGVuZ3RoO1xuICAgIGxldCBvID0gZS5sZW5ndGg7XG4gICAgd2hpbGUgKHMtLSA+IDApIHJbdFtzXV0gPSB0cnVlO1xuICAgIGxldCB1O1xuICAgIHdoaWxlIChvLS0gPiAwKSB7XG4gICAgICAgIHUgPSBlW29dO1xuICAgICAgICBpZiAodm9pZCAwID09PSByW3VdKSB7XG4gICAgICAgICAgICBpLnB1c2godSk7XG4gICAgICAgICAgICByW3VdID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gaTtcbn1cblxuZnVuY3Rpb24gbSh0LCBlLCBuKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICBlbnVtZXJhYmxlOiBuLmVudW1lcmFibGUsXG4gICAgICAgIGdldCgpIHtcbiAgICAgICAgICAgIGNvbnN0IHQgPSBuLnZhbHVlLmJpbmQodGhpcyk7XG4gICAgICAgICAgICBSZWZsZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIGUsIHtcbiAgICAgICAgICAgICAgICB2YWx1ZTogdCxcbiAgICAgICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICAgICAgZW51bWVyYWJsZTogbi5lbnVtZXJhYmxlXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiB0O1xuICAgICAgICB9XG4gICAgfTtcbn1cblxuZnVuY3Rpb24gcCguLi50KSB7XG4gICAgY29uc3QgZSA9IFtdO1xuICAgIGxldCBuID0gMDtcbiAgICBjb25zdCByID0gdC5sZW5ndGg7XG4gICAgbGV0IGkgPSAwO1xuICAgIGxldCBzO1xuICAgIGxldCBvID0gMDtcbiAgICBmb3IgKDtvIDwgcjsgKytvKSB7XG4gICAgICAgIHMgPSB0W29dO1xuICAgICAgICBpZiAodm9pZCAwICE9PSBzKSB7XG4gICAgICAgICAgICBpID0gcy5sZW5ndGg7XG4gICAgICAgICAgICBsZXQgdCA9IDA7XG4gICAgICAgICAgICBmb3IgKDt0IDwgaTsgKyt0KSBlW24rK10gPSBzW3RdO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBlO1xufVxuXG5mdW5jdGlvbiB5KC4uLnQpIHtcbiAgICBjb25zdCBlID0ge307XG4gICAgY29uc3QgbiA9IHQubGVuZ3RoO1xuICAgIGxldCByO1xuICAgIGxldCBpO1xuICAgIGxldCBzID0gMDtcbiAgICBmb3IgKDtuID4gczsgKytzKSB7XG4gICAgICAgIHIgPSB0W3NdO1xuICAgICAgICBpZiAodm9pZCAwICE9PSByKSBmb3IgKGkgaW4gcikgZVtpXSA9IHJbaV07XG4gICAgfVxuICAgIHJldHVybiBlO1xufVxuXG5mdW5jdGlvbiBSKC4uLnQpIHtcbiAgICBjb25zdCBlID0gdC5sZW5ndGg7XG4gICAgbGV0IG47XG4gICAgbGV0IHIgPSAwO1xuICAgIGZvciAoO2UgPiByOyArK3IpIHtcbiAgICAgICAgbiA9IHRbcl07XG4gICAgICAgIGlmICh2b2lkIDAgIT09IG4pIHJldHVybiBuO1xuICAgIH1cbiAgICB0aHJvdyBuZXcgRXJyb3IoYE5vIGRlZmF1bHQgdmFsdWUgZm91bmRgKTtcbn1cblxuY29uc3QgYiA9IGZ1bmN0aW9uKCkge1xuICAgIGNvbnN0IHQgPSBGdW5jdGlvbi5wcm90b3R5cGU7XG4gICAgY29uc3QgZSA9IE9iamVjdC5nZXRQcm90b3R5cGVPZjtcbiAgICBjb25zdCBuID0gbmV3IFdlYWtNYXA7XG4gICAgbGV0IHIgPSB0O1xuICAgIGxldCBpID0gMDtcbiAgICBsZXQgcztcbiAgICByZXR1cm4gZnVuY3Rpb24obykge1xuICAgICAgICBzID0gbi5nZXQobyk7XG4gICAgICAgIGlmICh2b2lkIDAgPT09IHMpIHtcbiAgICAgICAgICAgIG4uc2V0KG8sIHMgPSBbIHIgPSBvIF0pO1xuICAgICAgICAgICAgaSA9IDA7XG4gICAgICAgICAgICB3aGlsZSAoKHIgPSBlKHIpKSAhPT0gdCkgc1srK2ldID0gcjtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcztcbiAgICB9O1xufSgpO1xuXG5mdW5jdGlvbiBDKC4uLnQpIHtcbiAgICByZXR1cm4gT2JqZWN0LmFzc2lnbihPYmplY3QuY3JlYXRlKG51bGwpLCAuLi50KTtcbn1cblxuY29uc3QgJCA9IGZ1bmN0aW9uKCkge1xuICAgIGNvbnN0IHQgPSBuZXcgV2Vha01hcDtcbiAgICBsZXQgZSA9IGZhbHNlO1xuICAgIGxldCBuID0gXCJcIjtcbiAgICBsZXQgciA9IDA7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKGkpIHtcbiAgICAgICAgZSA9IHQuZ2V0KGkpO1xuICAgICAgICBpZiAodm9pZCAwID09PSBlKSB7XG4gICAgICAgICAgICBuID0gaS50b1N0cmluZygpO1xuICAgICAgICAgICAgciA9IG4ubGVuZ3RoO1xuICAgICAgICAgICAgZSA9IHIgPj0gMjkgJiYgciA8PSAxMDAgJiYgMTI1ID09PSBuLmNoYXJDb2RlQXQociAtIDEpICYmIG4uY2hhckNvZGVBdChyIC0gMikgPD0gMzIgJiYgOTMgPT09IG4uY2hhckNvZGVBdChyIC0gMykgJiYgMTAxID09PSBuLmNoYXJDb2RlQXQociAtIDQpICYmIDEwMCA9PT0gbi5jaGFyQ29kZUF0KHIgLSA1KSAmJiAxMTEgPT09IG4uY2hhckNvZGVBdChyIC0gNikgJiYgOTkgPT09IG4uY2hhckNvZGVBdChyIC0gNykgJiYgMzIgPT09IG4uY2hhckNvZGVBdChyIC0gOCkgJiYgMTAxID09PSBuLmNoYXJDb2RlQXQociAtIDkpICYmIDExOCA9PT0gbi5jaGFyQ29kZUF0KHIgLSAxMCkgJiYgMTA1ID09PSBuLmNoYXJDb2RlQXQociAtIDExKSAmJiAxMTYgPT09IG4uY2hhckNvZGVBdChyIC0gMTIpICYmIDk3ID09PSBuLmNoYXJDb2RlQXQociAtIDEzKSAmJiAxMTAgPT09IG4uY2hhckNvZGVBdChyIC0gMTQpICYmIDg4ID09PSBuLmNoYXJDb2RlQXQociAtIDE1KTtcbiAgICAgICAgICAgIHQuc2V0KGksIGUpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBlO1xuICAgIH07XG59KCk7XG5cbmZ1bmN0aW9uIEUodCwgZSkge1xuICAgIGlmICh0IGluc3RhbmNlb2YgUHJvbWlzZSkgcmV0dXJuIHQudGhlbihlKTtcbiAgICByZXR1cm4gZSh0KTtcbn1cblxuZnVuY3Rpb24gQSguLi50KSB7XG4gICAgbGV0IGU7XG4gICAgbGV0IG47XG4gICAgbGV0IHI7XG4gICAgbGV0IGkgPSAwO1xuICAgIGxldCBzID0gdC5sZW5ndGg7XG4gICAgZm9yICg7aSA8IHM7ICsraSkge1xuICAgICAgICBlID0gdFtpXTtcbiAgICAgICAgaWYgKChlID0gdFtpXSkgaW5zdGFuY2VvZiBQcm9taXNlKSBpZiAodm9pZCAwID09PSBuKSBuID0gZTsgZWxzZSBpZiAodm9pZCAwID09PSByKSByID0gWyBuLCBlIF07IGVsc2Ugci5wdXNoKGUpO1xuICAgIH1cbiAgICBpZiAodm9pZCAwID09PSByKSByZXR1cm4gbjtcbiAgICByZXR1cm4gUHJvbWlzZS5hbGwocik7XG59XG5cbmNvbnN0IGogPSB0LmdldE93bjtcblxuY29uc3QgTyA9IHQuaGFzT3duO1xuXG5jb25zdCBrID0gdC5kZWZpbmU7XG5cbmNvbnN0IEkgPSB0ID0+IFwiZnVuY3Rpb25cIiA9PT0gdHlwZW9mIHQ7XG5cbmNvbnN0IE0gPSB0ID0+IFwic3RyaW5nXCIgPT09IHR5cGVvZiB0O1xuXG5jb25zdCBUID0gXCJhdTphbm5vdGF0aW9uXCI7XG5cbmNvbnN0IEYgPSAodCwgZSkgPT4ge1xuICAgIGlmICh2b2lkIDAgPT09IGUpIHJldHVybiBgJHtUfToke3R9YDtcbiAgICByZXR1cm4gYCR7VH06JHt0fToke2V9YDtcbn07XG5cbmNvbnN0IFUgPSAodCwgZSkgPT4ge1xuICAgIGNvbnN0IG4gPSBqKFQsIHQpO1xuICAgIGlmICh2b2lkIDAgPT09IG4pIGsoVCwgWyBlIF0sIHQpOyBlbHNlIG4ucHVzaChlKTtcbn07XG5cbmNvbnN0IEwgPSBPYmplY3QuZnJlZXplKHtcbiAgICBuYW1lOiBcImF1OmFubm90YXRpb25cIixcbiAgICBhcHBlbmRUbzogVSxcbiAgICBzZXQodCwgZSwgbikge1xuICAgICAgICBrKEYoZSksIG4sIHQpO1xuICAgIH0sXG4gICAgZ2V0OiAodCwgZSkgPT4gaihGKGUpLCB0KSxcbiAgICBnZXRLZXlzKHQpIHtcbiAgICAgICAgbGV0IGUgPSBqKFQsIHQpO1xuICAgICAgICBpZiAodm9pZCAwID09PSBlKSBrKFQsIGUgPSBbXSwgdCk7XG4gICAgICAgIHJldHVybiBlO1xuICAgIH0sXG4gICAgaXNLZXk6IHQgPT4gdC5zdGFydHNXaXRoKFQpLFxuICAgIGtleUZvcjogRlxufSk7XG5cbmNvbnN0IFAgPSBcImF1OnJlc291cmNlXCI7XG5cbmNvbnN0IEQgPSBPYmplY3QuZnJlZXplKHtcbiAgICBuYW1lOiBQLFxuICAgIGFwcGVuZFRvKHQsIGUpIHtcbiAgICAgICAgY29uc3QgbiA9IGooUCwgdCk7XG4gICAgICAgIGlmICh2b2lkIDAgPT09IG4pIGsoUCwgWyBlIF0sIHQpOyBlbHNlIG4ucHVzaChlKTtcbiAgICB9LFxuICAgIGhhczogdCA9PiBPKFAsIHQpLFxuICAgIGdldEFsbCh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSBqKFAsIHQpO1xuICAgICAgICBpZiAodm9pZCAwID09PSBlKSByZXR1cm4gT3Q7IGVsc2UgcmV0dXJuIGUubWFwKChlID0+IGooZSwgdCkpKTtcbiAgICB9LFxuICAgIGdldEtleXModCkge1xuICAgICAgICBsZXQgZSA9IGooUCwgdCk7XG4gICAgICAgIGlmICh2b2lkIDAgPT09IGUpIGsoUCwgZSA9IFtdLCB0KTtcbiAgICAgICAgcmV0dXJuIGU7XG4gICAgfSxcbiAgICBpc0tleTogdCA9PiB0LnN0YXJ0c1dpdGgoUCksXG4gICAga2V5Rm9yKHQsIGUpIHtcbiAgICAgICAgaWYgKHZvaWQgMCA9PT0gZSkgcmV0dXJuIGAke1B9OiR7dH1gO1xuICAgICAgICByZXR1cm4gYCR7UH06JHt0fToke2V9YDtcbiAgICB9XG59KTtcblxuY29uc3QgUyA9IHtcbiAgICBhbm5vdGF0aW9uOiBMLFxuICAgIHJlc291cmNlOiBEXG59O1xuXG5jb25zdCBOID0gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eTtcblxuZnVuY3Rpb24gVyh0LCBlLCBuLCByKSB7XG4gICAgbGV0IGkgPSBqKEYodCksIG4pO1xuICAgIGlmICh2b2lkIDAgPT09IGkpIHtcbiAgICAgICAgaSA9IGVbdF07XG4gICAgICAgIGlmICh2b2lkIDAgPT09IGkpIHtcbiAgICAgICAgICAgIGkgPSBuW3RdO1xuICAgICAgICAgICAgaWYgKHZvaWQgMCA9PT0gaSB8fCAhTi5jYWxsKG4sIHQpKSByZXR1cm4gcigpO1xuICAgICAgICAgICAgcmV0dXJuIGk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGk7XG4gICAgfVxuICAgIHJldHVybiBpO1xufVxuXG5mdW5jdGlvbiBCKHQsIGUsIG4pIHtcbiAgICBsZXQgciA9IGooRih0KSwgZSk7XG4gICAgaWYgKHZvaWQgMCA9PT0gcikge1xuICAgICAgICByID0gZVt0XTtcbiAgICAgICAgaWYgKHZvaWQgMCA9PT0gciB8fCAhTi5jYWxsKGUsIHQpKSByZXR1cm4gbigpO1xuICAgICAgICByZXR1cm4gcjtcbiAgICB9XG4gICAgcmV0dXJuIHI7XG59XG5cbmZ1bmN0aW9uIFEodCwgZSwgbikge1xuICAgIGNvbnN0IHIgPSBlW3RdO1xuICAgIGlmICh2b2lkIDAgPT09IHIpIHJldHVybiBuKCk7XG4gICAgcmV0dXJuIHI7XG59XG5cbmUoUmVmbGVjdCwgZmFsc2UsIGZhbHNlKTtcblxuY2xhc3MgUmVzb2x2ZXJCdWlsZGVyIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlKSB7XG4gICAgICAgIHRoaXMuY29udGFpbmVyID0gdDtcbiAgICAgICAgdGhpcy5rZXkgPSBlO1xuICAgIH1cbiAgICBpbnN0YW5jZSh0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJlZ2lzdGVyUmVzb2x2ZXIoMCwgdCk7XG4gICAgfVxuICAgIHNpbmdsZXRvbih0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJlZ2lzdGVyUmVzb2x2ZXIoMSwgdCk7XG4gICAgfVxuICAgIHRyYW5zaWVudCh0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJlZ2lzdGVyUmVzb2x2ZXIoMiwgdCk7XG4gICAgfVxuICAgIGNhbGxiYWNrKHQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucmVnaXN0ZXJSZXNvbHZlcigzLCB0KTtcbiAgICB9XG4gICAgY2FjaGVkQ2FsbGJhY2sodCkge1xuICAgICAgICByZXR1cm4gdGhpcy5yZWdpc3RlclJlc29sdmVyKDMsIEN0KHQpKTtcbiAgICB9XG4gICAgYWxpYXNUbyh0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJlZ2lzdGVyUmVzb2x2ZXIoNSwgdCk7XG4gICAgfVxuICAgIHJlZ2lzdGVyUmVzb2x2ZXIodCwgZSkge1xuICAgICAgICBjb25zdCB7Y29udGFpbmVyOiBuLCBrZXk6IHJ9ID0gdGhpcztcbiAgICAgICAgdGhpcy5jb250YWluZXIgPSB0aGlzLmtleSA9IHZvaWQgMDtcbiAgICAgICAgcmV0dXJuIG4ucmVnaXN0ZXJSZXNvbHZlcihyLCBuZXcgUmVzb2x2ZXIociwgdCwgZSkpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24geCh0KSB7XG4gICAgY29uc3QgZSA9IHQuc2xpY2UoKTtcbiAgICBjb25zdCBuID0gT2JqZWN0LmtleXModCk7XG4gICAgY29uc3QgciA9IG4ubGVuZ3RoO1xuICAgIGxldCBzO1xuICAgIGZvciAobGV0IG8gPSAwOyBvIDwgcjsgKytvKSB7XG4gICAgICAgIHMgPSBuW29dO1xuICAgICAgICBpZiAoIWkocykpIGVbc10gPSB0W3NdO1xuICAgIH1cbiAgICByZXR1cm4gZTtcbn1cblxuY29uc3QgeiA9IHtcbiAgICBub25lKHQpIHtcbiAgICAgICAgdGhyb3cgRXJyb3IoYEFVUjAwMDI6JHt0LnRvU3RyaW5nKCl9YCk7XG4gICAgfSxcbiAgICBzaW5nbGV0b24odCkge1xuICAgICAgICByZXR1cm4gbmV3IFJlc29sdmVyKHQsIDEsIHQpO1xuICAgIH0sXG4gICAgdHJhbnNpZW50KHQpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBSZXNvbHZlcih0LCAyLCB0KTtcbiAgICB9XG59O1xuXG5jbGFzcyBDb250YWluZXJDb25maWd1cmF0aW9uIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlKSB7XG4gICAgICAgIHRoaXMuaW5oZXJpdFBhcmVudFJlc291cmNlcyA9IHQ7XG4gICAgICAgIHRoaXMuZGVmYXVsdFJlc29sdmVyID0gZTtcbiAgICB9XG4gICAgc3RhdGljIGZyb20odCkge1xuICAgICAgICB2YXIgZSwgbjtcbiAgICAgICAgaWYgKHZvaWQgMCA9PT0gdCB8fCB0ID09PSBDb250YWluZXJDb25maWd1cmF0aW9uLkRFRkFVTFQpIHJldHVybiBDb250YWluZXJDb25maWd1cmF0aW9uLkRFRkFVTFQ7XG4gICAgICAgIHJldHVybiBuZXcgQ29udGFpbmVyQ29uZmlndXJhdGlvbihudWxsICE9PSAoZSA9IHQuaW5oZXJpdFBhcmVudFJlc291cmNlcykgJiYgdm9pZCAwICE9PSBlID8gZSA6IGZhbHNlLCBudWxsICE9PSAobiA9IHQuZGVmYXVsdFJlc29sdmVyKSAmJiB2b2lkIDAgIT09IG4gPyBuIDogei5zaW5nbGV0b24pO1xuICAgIH1cbn1cblxuQ29udGFpbmVyQ29uZmlndXJhdGlvbi5ERUZBVUxUID0gQ29udGFpbmVyQ29uZmlndXJhdGlvbi5mcm9tKHt9KTtcblxuY29uc3QgRyA9IHtcbiAgICBjcmVhdGVDb250YWluZXIodCkge1xuICAgICAgICByZXR1cm4gbmV3IENvbnRhaW5lcihudWxsLCBDb250YWluZXJDb25maWd1cmF0aW9uLmZyb20odCkpO1xuICAgIH0sXG4gICAgZ2V0RGVzaWduUGFyYW10eXBlcyh0KSB7XG4gICAgICAgIHJldHVybiBqKFwiZGVzaWduOnBhcmFtdHlwZXNcIiwgdCk7XG4gICAgfSxcbiAgICBnZXRBbm5vdGF0aW9uUGFyYW10eXBlcyh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSBGKFwiZGk6cGFyYW10eXBlc1wiKTtcbiAgICAgICAgcmV0dXJuIGooZSwgdCk7XG4gICAgfSxcbiAgICBnZXRPckNyZWF0ZUFubm90YXRpb25QYXJhbVR5cGVzOiBfLFxuICAgIGdldERlcGVuZGVuY2llczogSyxcbiAgICBjcmVhdGVJbnRlcmZhY2UodCwgZSkge1xuICAgICAgICBjb25zdCBuID0gSSh0KSA/IHQgOiBlO1xuICAgICAgICBjb25zdCByID0gTSh0KSA/IHQgOiB2b2lkIDA7XG4gICAgICAgIGNvbnN0IGkgPSBmdW5jdGlvbih0LCBlLCBuKSB7XG4gICAgICAgICAgICBpZiAobnVsbCA9PSB0IHx8IHZvaWQgMCAhPT0gbmV3LnRhcmdldCkgdGhyb3cgbmV3IEVycm9yKGBBVVIwMDAxOiR7aS5mcmllbmRseU5hbWV9YCk7XG4gICAgICAgICAgICBjb25zdCByID0gXyh0KTtcbiAgICAgICAgICAgIHJbbl0gPSBpO1xuICAgICAgICB9O1xuICAgICAgICBpLiRpc0ludGVyZmFjZSA9IHRydWU7XG4gICAgICAgIGkuZnJpZW5kbHlOYW1lID0gbnVsbCA9PSByID8gXCIoYW5vbnltb3VzKVwiIDogcjtcbiAgICAgICAgaWYgKG51bGwgIT0gbikgaS5yZWdpc3RlciA9IGZ1bmN0aW9uKHQsIGUpIHtcbiAgICAgICAgICAgIHJldHVybiBuKG5ldyBSZXNvbHZlckJ1aWxkZXIodCwgbnVsbCAhPT0gZSAmJiB2b2lkIDAgIT09IGUgPyBlIDogaSkpO1xuICAgICAgICB9O1xuICAgICAgICBpLnRvU3RyaW5nID0gZnVuY3Rpb24gdCgpIHtcbiAgICAgICAgICAgIHJldHVybiBgSW50ZXJmYWNlU3ltYm9sPCR7aS5mcmllbmRseU5hbWV9PmA7XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBpO1xuICAgIH0sXG4gICAgaW5qZWN0KC4uLnQpIHtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKGUsIG4sIHIpIHtcbiAgICAgICAgICAgIGlmIChcIm51bWJlclwiID09PSB0eXBlb2Ygcikge1xuICAgICAgICAgICAgICAgIGNvbnN0IG4gPSBfKGUpO1xuICAgICAgICAgICAgICAgIGNvbnN0IGkgPSB0WzBdO1xuICAgICAgICAgICAgICAgIGlmICh2b2lkIDAgIT09IGkpIG5bcl0gPSBpO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChuKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgciA9IF8oZS5jb25zdHJ1Y3Rvcik7XG4gICAgICAgICAgICAgICAgY29uc3QgaSA9IHRbMF07XG4gICAgICAgICAgICAgICAgaWYgKHZvaWQgMCAhPT0gaSkgcltuXSA9IGk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHIpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBlID0gci52YWx1ZTtcbiAgICAgICAgICAgICAgICBjb25zdCBuID0gXyhlKTtcbiAgICAgICAgICAgICAgICBsZXQgaTtcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBlID0gMDsgZSA8IHQubGVuZ3RoOyArK2UpIHtcbiAgICAgICAgICAgICAgICAgICAgaSA9IHRbZV07XG4gICAgICAgICAgICAgICAgICAgIGlmICh2b2lkIDAgIT09IGkpIG5bZV0gPSBpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgY29uc3QgbiA9IF8oZSk7XG4gICAgICAgICAgICAgICAgbGV0IHI7XG4gICAgICAgICAgICAgICAgZm9yIChsZXQgZSA9IDA7IGUgPCB0Lmxlbmd0aDsgKytlKSB7XG4gICAgICAgICAgICAgICAgICAgIHIgPSB0W2VdO1xuICAgICAgICAgICAgICAgICAgICBpZiAodm9pZCAwICE9PSByKSBuW2VdID0gcjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgfSxcbiAgICB0cmFuc2llbnQodCkge1xuICAgICAgICB0LnJlZ2lzdGVyID0gZnVuY3Rpb24gZShuKSB7XG4gICAgICAgICAgICBjb25zdCByID0gJHQudHJhbnNpZW50KHQsIHQpO1xuICAgICAgICAgICAgcmV0dXJuIHIucmVnaXN0ZXIobiwgdCk7XG4gICAgICAgIH07XG4gICAgICAgIHQucmVnaXN0ZXJJblJlcXVlc3RvciA9IGZhbHNlO1xuICAgICAgICByZXR1cm4gdDtcbiAgICB9LFxuICAgIHNpbmdsZXRvbih0LCBlID0gWikge1xuICAgICAgICB0LnJlZ2lzdGVyID0gZnVuY3Rpb24gZShuKSB7XG4gICAgICAgICAgICBjb25zdCByID0gJHQuc2luZ2xldG9uKHQsIHQpO1xuICAgICAgICAgICAgcmV0dXJuIHIucmVnaXN0ZXIobiwgdCk7XG4gICAgICAgIH07XG4gICAgICAgIHQucmVnaXN0ZXJJblJlcXVlc3RvciA9IGUuc2NvcGVkO1xuICAgICAgICByZXR1cm4gdDtcbiAgICB9XG59O1xuXG5mdW5jdGlvbiBLKHQpIHtcbiAgICBjb25zdCBlID0gRihcImRpOmRlcGVuZGVuY2llc1wiKTtcbiAgICBsZXQgbiA9IGooZSwgdCk7XG4gICAgaWYgKHZvaWQgMCA9PT0gbikge1xuICAgICAgICBjb25zdCByID0gdC5pbmplY3Q7XG4gICAgICAgIGlmICh2b2lkIDAgPT09IHIpIHtcbiAgICAgICAgICAgIGNvbnN0IGUgPSBHLmdldERlc2lnblBhcmFtdHlwZXModCk7XG4gICAgICAgICAgICBjb25zdCByID0gRy5nZXRBbm5vdGF0aW9uUGFyYW10eXBlcyh0KTtcbiAgICAgICAgICAgIGlmICh2b2lkIDAgPT09IGUpIGlmICh2b2lkIDAgPT09IHIpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBlID0gT2JqZWN0LmdldFByb3RvdHlwZU9mKHQpO1xuICAgICAgICAgICAgICAgIGlmIChJKGUpICYmIGUgIT09IEZ1bmN0aW9uLnByb3RvdHlwZSkgbiA9IHgoSyhlKSk7IGVsc2UgbiA9IFtdO1xuICAgICAgICAgICAgfSBlbHNlIG4gPSB4KHIpOyBlbHNlIGlmICh2b2lkIDAgPT09IHIpIG4gPSB4KGUpOyBlbHNlIHtcbiAgICAgICAgICAgICAgICBuID0geChlKTtcbiAgICAgICAgICAgICAgICBsZXQgdCA9IHIubGVuZ3RoO1xuICAgICAgICAgICAgICAgIGxldCBzO1xuICAgICAgICAgICAgICAgIGxldCBvID0gMDtcbiAgICAgICAgICAgICAgICBmb3IgKDtvIDwgdDsgKytvKSB7XG4gICAgICAgICAgICAgICAgICAgIHMgPSByW29dO1xuICAgICAgICAgICAgICAgICAgICBpZiAodm9pZCAwICE9PSBzKSBuW29dID0gcztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY29uc3QgdSA9IE9iamVjdC5rZXlzKHIpO1xuICAgICAgICAgICAgICAgIGxldCBsO1xuICAgICAgICAgICAgICAgIG8gPSAwO1xuICAgICAgICAgICAgICAgIHQgPSB1Lmxlbmd0aDtcbiAgICAgICAgICAgICAgICBmb3IgKG8gPSAwOyBvIDwgdDsgKytvKSB7XG4gICAgICAgICAgICAgICAgICAgIGwgPSB1W29dO1xuICAgICAgICAgICAgICAgICAgICBpZiAoIWkobCkpIG5bbF0gPSByW2xdO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIG4gPSB4KHIpO1xuICAgICAgICBrKGUsIG4sIHQpO1xuICAgICAgICBVKHQsIGUpO1xuICAgIH1cbiAgICByZXR1cm4gbjtcbn1cblxuZnVuY3Rpb24gXyh0KSB7XG4gICAgY29uc3QgZSA9IEYoXCJkaTpwYXJhbXR5cGVzXCIpO1xuICAgIGxldCBuID0gaihlLCB0KTtcbiAgICBpZiAodm9pZCAwID09PSBuKSB7XG4gICAgICAgIGsoZSwgbiA9IFtdLCB0KTtcbiAgICAgICAgVSh0LCBlKTtcbiAgICB9XG4gICAgcmV0dXJuIG47XG59XG5cbmNvbnN0IEggPSBHLmNyZWF0ZUludGVyZmFjZShcIklDb250YWluZXJcIik7XG5cbmNvbnN0IFYgPSBIO1xuXG5mdW5jdGlvbiBxKHQpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24oZSkge1xuICAgICAgICBjb25zdCBuID0gZnVuY3Rpb24odCwgZSwgcikge1xuICAgICAgICAgICAgRy5pbmplY3QobikodCwgZSwgcik7XG4gICAgICAgIH07XG4gICAgICAgIG4uJGlzUmVzb2x2ZXIgPSB0cnVlO1xuICAgICAgICBuLnJlc29sdmUgPSBmdW5jdGlvbihuLCByKSB7XG4gICAgICAgICAgICByZXR1cm4gdChlLCBuLCByKTtcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIG47XG4gICAgfTtcbn1cblxuY29uc3QgSiA9IEcuaW5qZWN0O1xuXG5mdW5jdGlvbiBYKHQpIHtcbiAgICByZXR1cm4gRy50cmFuc2llbnQodCk7XG59XG5cbmZ1bmN0aW9uIFkodCkge1xuICAgIHJldHVybiBudWxsID09IHQgPyBYIDogWCh0KTtcbn1cblxuY29uc3QgWiA9IHtcbiAgICBzY29wZWQ6IGZhbHNlXG59O1xuXG5mdW5jdGlvbiB0dCh0KSB7XG4gICAgaWYgKEkodCkpIHJldHVybiBHLnNpbmdsZXRvbih0KTtcbiAgICByZXR1cm4gZnVuY3Rpb24oZSkge1xuICAgICAgICByZXR1cm4gRy5zaW5nbGV0b24oZSwgdCk7XG4gICAgfTtcbn1cblxuZnVuY3Rpb24gZXQodCkge1xuICAgIHJldHVybiBmdW5jdGlvbihlLCBuKSB7XG4gICAgICAgIG4gPSAhIW47XG4gICAgICAgIGNvbnN0IHIgPSBmdW5jdGlvbih0LCBlLCBuKSB7XG4gICAgICAgICAgICBHLmluamVjdChyKSh0LCBlLCBuKTtcbiAgICAgICAgfTtcbiAgICAgICAgci4kaXNSZXNvbHZlciA9IHRydWU7XG4gICAgICAgIHIucmVzb2x2ZSA9IGZ1bmN0aW9uKHIsIGkpIHtcbiAgICAgICAgICAgIHJldHVybiB0KGUsIHIsIGksIG4pO1xuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gcjtcbiAgICB9O1xufVxuXG5jb25zdCBudCA9IGV0KCgodCwgZSwgbiwgcikgPT4gbi5nZXRBbGwodCwgcikpKTtcblxuY29uc3QgcnQgPSBxKCgodCwgZSwgbikgPT4gKCkgPT4gbi5nZXQodCkpKTtcblxuY29uc3QgaXQgPSBxKCgodCwgZSwgbikgPT4ge1xuICAgIGlmIChuLmhhcyh0LCB0cnVlKSkgcmV0dXJuIG4uZ2V0KHQpOyBlbHNlIHJldHVybjtcbn0pKTtcblxuZnVuY3Rpb24gc3QodCwgZSwgbikge1xuICAgIEcuaW5qZWN0KHN0KSh0LCBlLCBuKTtcbn1cblxuc3QuJGlzUmVzb2x2ZXIgPSB0cnVlO1xuXG5zdC5yZXNvbHZlID0gKCkgPT4ge307XG5cbmNvbnN0IG90ID0gcSgoKHQsIGUsIG4pID0+ICguLi5yKSA9PiBlLmdldEZhY3RvcnkodCkuY29uc3RydWN0KG4sIHIpKSk7XG5cbmNvbnN0IHV0ID0gcSgoKHQsIGUsIG4pID0+IHtcbiAgICBjb25zdCByID0gY3QodCwgZSwgbik7XG4gICAgY29uc3QgaSA9IG5ldyBJbnN0YW5jZVByb3ZpZGVyKFN0cmluZyh0KSwgcik7XG4gICAgbi5yZWdpc3RlclJlc29sdmVyKHQsIGksIHRydWUpO1xuICAgIHJldHVybiByO1xufSkpO1xuXG5jb25zdCBsdCA9IHEoKCh0LCBlLCBuKSA9PiBjdCh0LCBlLCBuKSkpO1xuXG5mdW5jdGlvbiBjdCh0LCBlLCBuKSB7XG4gICAgcmV0dXJuIGUuZ2V0RmFjdG9yeSh0KS5jb25zdHJ1Y3Qobik7XG59XG5cbnZhciBmdDtcblxuKGZ1bmN0aW9uKHQpIHtcbiAgICB0W3RbXCJpbnN0YW5jZVwiXSA9IDBdID0gXCJpbnN0YW5jZVwiO1xuICAgIHRbdFtcInNpbmdsZXRvblwiXSA9IDFdID0gXCJzaW5nbGV0b25cIjtcbiAgICB0W3RbXCJ0cmFuc2llbnRcIl0gPSAyXSA9IFwidHJhbnNpZW50XCI7XG4gICAgdFt0W1wiY2FsbGJhY2tcIl0gPSAzXSA9IFwiY2FsbGJhY2tcIjtcbiAgICB0W3RbXCJhcnJheVwiXSA9IDRdID0gXCJhcnJheVwiO1xuICAgIHRbdFtcImFsaWFzXCJdID0gNV0gPSBcImFsaWFzXCI7XG59KShmdCB8fCAoZnQgPSB7fSkpO1xuXG5jbGFzcyBSZXNvbHZlciB7XG4gICAgY29uc3RydWN0b3IodCwgZSwgbikge1xuICAgICAgICB0aGlzLmtleSA9IHQ7XG4gICAgICAgIHRoaXMuc3RyYXRlZ3kgPSBlO1xuICAgICAgICB0aGlzLnN0YXRlID0gbjtcbiAgICAgICAgdGhpcy5yZXNvbHZpbmcgPSBmYWxzZTtcbiAgICB9XG4gICAgZ2V0ICRpc1Jlc29sdmVyKCkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgcmVnaXN0ZXIodCwgZSkge1xuICAgICAgICByZXR1cm4gdC5yZWdpc3RlclJlc29sdmVyKGUgfHwgdGhpcy5rZXksIHRoaXMpO1xuICAgIH1cbiAgICByZXNvbHZlKHQsIGUpIHtcbiAgICAgICAgc3dpdGNoICh0aGlzLnN0cmF0ZWd5KSB7XG4gICAgICAgICAgY2FzZSAwOlxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuc3RhdGU7XG5cbiAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICBpZiAodGhpcy5yZXNvbHZpbmcpIHRocm93IG5ldyBFcnJvcihgQVVSMDAwMzoke3RoaXMuc3RhdGUubmFtZX1gKTtcbiAgICAgICAgICAgIHRoaXMucmVzb2x2aW5nID0gdHJ1ZTtcbiAgICAgICAgICAgIHRoaXMuc3RhdGUgPSB0LmdldEZhY3RvcnkodGhpcy5zdGF0ZSkuY29uc3RydWN0KGUpO1xuICAgICAgICAgICAgdGhpcy5zdHJhdGVneSA9IDA7XG4gICAgICAgICAgICB0aGlzLnJlc29sdmluZyA9IGZhbHNlO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuc3RhdGU7XG5cbiAgICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgY29uc3QgbiA9IHQuZ2V0RmFjdG9yeSh0aGlzLnN0YXRlKTtcbiAgICAgICAgICAgICAgICBpZiAobnVsbCA9PT0gbikgdGhyb3cgbmV3IEVycm9yKGBBVVIwMDA0OiR7U3RyaW5nKHRoaXMua2V5KX1gKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gbi5jb25zdHJ1Y3QoZSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICBjYXNlIDM6XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5zdGF0ZSh0LCBlLCB0aGlzKTtcblxuICAgICAgICAgIGNhc2UgNDpcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnN0YXRlWzBdLnJlc29sdmUodCwgZSk7XG5cbiAgICAgICAgICBjYXNlIDU6XG4gICAgICAgICAgICByZXR1cm4gZS5nZXQodGhpcy5zdGF0ZSk7XG5cbiAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBBVVIwMDA1OiR7dGhpcy5zdHJhdGVneX1gKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBnZXRGYWN0b3J5KHQpIHtcbiAgICAgICAgdmFyIGUsIG4sIHI7XG4gICAgICAgIHN3aXRjaCAodGhpcy5zdHJhdGVneSkge1xuICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgICByZXR1cm4gdC5nZXRGYWN0b3J5KHRoaXMuc3RhdGUpO1xuXG4gICAgICAgICAgY2FzZSA1OlxuICAgICAgICAgICAgcmV0dXJuIG51bGwgIT09IChyID0gbnVsbCA9PT0gKG4gPSBudWxsID09PSAoZSA9IHQuZ2V0UmVzb2x2ZXIodGhpcy5zdGF0ZSkpIHx8IHZvaWQgMCA9PT0gZSA/IHZvaWQgMCA6IGUuZ2V0RmFjdG9yeSkgfHwgdm9pZCAwID09PSBuID8gdm9pZCAwIDogbi5jYWxsKGUsIHQpKSAmJiB2b2lkIDAgIT09IHIgPyByIDogbnVsbDtcblxuICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuICAgIH1cbn1cblxuZnVuY3Rpb24gYXQodCkge1xuICAgIHJldHVybiB0aGlzLmdldCh0KTtcbn1cblxuZnVuY3Rpb24gaHQodCwgZSkge1xuICAgIHJldHVybiBlKHQpO1xufVxuXG5jbGFzcyBGYWN0b3J5IHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlKSB7XG4gICAgICAgIHRoaXMuVHlwZSA9IHQ7XG4gICAgICAgIHRoaXMuZGVwZW5kZW5jaWVzID0gZTtcbiAgICAgICAgdGhpcy50cmFuc2Zvcm1lcnMgPSBudWxsO1xuICAgIH1cbiAgICBjb25zdHJ1Y3QodCwgZSkge1xuICAgICAgICBsZXQgbjtcbiAgICAgICAgaWYgKHZvaWQgMCA9PT0gZSkgbiA9IG5ldyB0aGlzLlR5cGUoLi4udGhpcy5kZXBlbmRlbmNpZXMubWFwKGF0LCB0KSk7IGVsc2UgbiA9IG5ldyB0aGlzLlR5cGUoLi4udGhpcy5kZXBlbmRlbmNpZXMubWFwKGF0LCB0KSwgLi4uZSk7XG4gICAgICAgIGlmIChudWxsID09IHRoaXMudHJhbnNmb3JtZXJzKSByZXR1cm4gbjtcbiAgICAgICAgcmV0dXJuIHRoaXMudHJhbnNmb3JtZXJzLnJlZHVjZShodCwgbik7XG4gICAgfVxuICAgIHJlZ2lzdGVyVHJhbnNmb3JtZXIodCkge1xuICAgICAgICB2YXIgZTtcbiAgICAgICAgKG51bGwgIT09IChlID0gdGhpcy50cmFuc2Zvcm1lcnMpICYmIHZvaWQgMCAhPT0gZSA/IGUgOiB0aGlzLnRyYW5zZm9ybWVycyA9IFtdKS5wdXNoKHQpO1xuICAgIH1cbn1cblxuY29uc3QgZHQgPSB7XG4gICAgJGlzUmVzb2x2ZXI6IHRydWUsXG4gICAgcmVzb2x2ZSh0LCBlKSB7XG4gICAgICAgIHJldHVybiBlO1xuICAgIH1cbn07XG5cbmZ1bmN0aW9uIHZ0KHQpIHtcbiAgICByZXR1cm4gSSh0LnJlZ2lzdGVyKTtcbn1cblxuZnVuY3Rpb24gd3QodCkge1xuICAgIHJldHVybiB2dCh0KSAmJiBcImJvb2xlYW5cIiA9PT0gdHlwZW9mIHQucmVnaXN0ZXJJblJlcXVlc3Rvcjtcbn1cblxuZnVuY3Rpb24gZ3QodCkge1xuICAgIHJldHVybiB3dCh0KSAmJiB0LnJlZ2lzdGVySW5SZXF1ZXN0b3I7XG59XG5cbmZ1bmN0aW9uIG10KHQpIHtcbiAgICByZXR1cm4gdm9pZCAwICE9PSB0LnByb3RvdHlwZTtcbn1cblxuZnVuY3Rpb24gcHQodCkge1xuICAgIHJldHVybiBNKHQpICYmIHQuaW5kZXhPZihcIjpcIikgPiAwO1xufVxuXG5jb25zdCB5dCA9IG5ldyBTZXQoWyBcIkFycmF5XCIsIFwiQXJyYXlCdWZmZXJcIiwgXCJCb29sZWFuXCIsIFwiRGF0YVZpZXdcIiwgXCJEYXRlXCIsIFwiRXJyb3JcIiwgXCJFdmFsRXJyb3JcIiwgXCJGbG9hdDMyQXJyYXlcIiwgXCJGbG9hdDY0QXJyYXlcIiwgXCJGdW5jdGlvblwiLCBcIkludDhBcnJheVwiLCBcIkludDE2QXJyYXlcIiwgXCJJbnQzMkFycmF5XCIsIFwiTWFwXCIsIFwiTnVtYmVyXCIsIFwiT2JqZWN0XCIsIFwiUHJvbWlzZVwiLCBcIlJhbmdlRXJyb3JcIiwgXCJSZWZlcmVuY2VFcnJvclwiLCBcIlJlZ0V4cFwiLCBcIlNldFwiLCBcIlNoYXJlZEFycmF5QnVmZmVyXCIsIFwiU3RyaW5nXCIsIFwiU3ludGF4RXJyb3JcIiwgXCJUeXBlRXJyb3JcIiwgXCJVaW50OEFycmF5XCIsIFwiVWludDhDbGFtcGVkQXJyYXlcIiwgXCJVaW50MTZBcnJheVwiLCBcIlVpbnQzMkFycmF5XCIsIFwiVVJJRXJyb3JcIiwgXCJXZWFrTWFwXCIsIFwiV2Vha1NldFwiIF0pO1xuXG5sZXQgUnQgPSAwO1xuXG5jbGFzcyBDb250YWluZXIge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUpIHtcbiAgICAgICAgdGhpcy5wYXJlbnQgPSB0O1xuICAgICAgICB0aGlzLmNvbmZpZyA9IGU7XG4gICAgICAgIHRoaXMuaWQgPSArK1J0O1xuICAgICAgICB0aGlzLnQgPSAwO1xuICAgICAgICB0aGlzLmkgPSBuZXcgTWFwO1xuICAgICAgICBpZiAobnVsbCA9PT0gdCkge1xuICAgICAgICAgICAgdGhpcy5yb290ID0gdGhpcztcbiAgICAgICAgICAgIHRoaXMudSA9IG5ldyBNYXA7XG4gICAgICAgICAgICB0aGlzLmggPSBuZXcgTWFwO1xuICAgICAgICAgICAgdGhpcy5yZXMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5yb290ID0gdC5yb290O1xuICAgICAgICAgICAgdGhpcy51ID0gbmV3IE1hcDtcbiAgICAgICAgICAgIHRoaXMuaCA9IHQuaDtcbiAgICAgICAgICAgIGlmIChlLmluaGVyaXRQYXJlbnRSZXNvdXJjZXMpIHRoaXMucmVzID0gT2JqZWN0LmFzc2lnbihPYmplY3QuY3JlYXRlKG51bGwpLCB0LnJlcywgdGhpcy5yb290LnJlcyk7IGVsc2UgdGhpcy5yZXMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMudS5zZXQoSCwgZHQpO1xuICAgIH1cbiAgICBnZXQgZGVwdGgoKSB7XG4gICAgICAgIHJldHVybiBudWxsID09PSB0aGlzLnBhcmVudCA/IDAgOiB0aGlzLnBhcmVudC5kZXB0aCArIDE7XG4gICAgfVxuICAgIHJlZ2lzdGVyKC4uLnQpIHtcbiAgICAgICAgaWYgKDEwMCA9PT0gKyt0aGlzLnQpIHRocm93IG5ldyBFcnJvcihgQVVSMDAwNjoke3QubWFwKFN0cmluZyl9YCk7XG4gICAgICAgIGxldCBlO1xuICAgICAgICBsZXQgcjtcbiAgICAgICAgbGV0IGk7XG4gICAgICAgIGxldCBzO1xuICAgICAgICBsZXQgbztcbiAgICAgICAgbGV0IHUgPSAwO1xuICAgICAgICBsZXQgbCA9IHQubGVuZ3RoO1xuICAgICAgICBmb3IgKDt1IDwgbDsgKyt1KSB7XG4gICAgICAgICAgICBlID0gdFt1XTtcbiAgICAgICAgICAgIGlmICghbihlKSkgY29udGludWU7XG4gICAgICAgICAgICBpZiAodnQoZSkpIGUucmVnaXN0ZXIodGhpcyk7IGVsc2UgaWYgKFMucmVzb3VyY2UuaGFzKGUpKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgdCA9IFMucmVzb3VyY2UuZ2V0QWxsKGUpO1xuICAgICAgICAgICAgICAgIGlmICgxID09PSB0Lmxlbmd0aCkgdFswXS5yZWdpc3Rlcih0aGlzKTsgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHMgPSAwO1xuICAgICAgICAgICAgICAgICAgICBvID0gdC5sZW5ndGg7XG4gICAgICAgICAgICAgICAgICAgIHdoaWxlIChvID4gcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgdFtzXS5yZWdpc3Rlcih0aGlzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICsrcztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSBpZiAobXQoZSkpICR0LnNpbmdsZXRvbihlLCBlKS5yZWdpc3Rlcih0aGlzKTsgZWxzZSB7XG4gICAgICAgICAgICAgICAgciA9IE9iamVjdC5rZXlzKGUpO1xuICAgICAgICAgICAgICAgIHMgPSAwO1xuICAgICAgICAgICAgICAgIG8gPSByLmxlbmd0aDtcbiAgICAgICAgICAgICAgICBmb3IgKDtzIDwgbzsgKytzKSB7XG4gICAgICAgICAgICAgICAgICAgIGkgPSBlW3Jbc11dO1xuICAgICAgICAgICAgICAgICAgICBpZiAoIW4oaSkpIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgICAgICBpZiAodnQoaSkpIGkucmVnaXN0ZXIodGhpcyk7IGVsc2UgdGhpcy5yZWdpc3RlcihpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgLS10aGlzLnQ7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICByZWdpc3RlclJlc29sdmVyKHQsIGUsIG4gPSBmYWxzZSkge1xuICAgICAgICBFdCh0KTtcbiAgICAgICAgY29uc3QgciA9IHRoaXMudTtcbiAgICAgICAgY29uc3QgaSA9IHIuZ2V0KHQpO1xuICAgICAgICBpZiAobnVsbCA9PSBpKSB7XG4gICAgICAgICAgICByLnNldCh0LCBlKTtcbiAgICAgICAgICAgIGlmIChwdCh0KSkge1xuICAgICAgICAgICAgICAgIGlmICh2b2lkIDAgIT09IHRoaXMucmVzW3RdKSB0aHJvdyBuZXcgRXJyb3IoYEFVUjAwMDc6JHt0fWApO1xuICAgICAgICAgICAgICAgIHRoaXMucmVzW3RdID0gZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIGlmIChpIGluc3RhbmNlb2YgUmVzb2x2ZXIgJiYgNCA9PT0gaS5zdHJhdGVneSkgaS5zdGF0ZS5wdXNoKGUpOyBlbHNlIHIuc2V0KHQsIG5ldyBSZXNvbHZlcih0LCA0LCBbIGksIGUgXSkpO1xuICAgICAgICBpZiAobikgdGhpcy5pLnNldCh0LCBlKTtcbiAgICAgICAgcmV0dXJuIGU7XG4gICAgfVxuICAgIHJlZ2lzdGVyVHJhbnNmb3JtZXIodCwgZSkge1xuICAgICAgICBjb25zdCBuID0gdGhpcy5nZXRSZXNvbHZlcih0KTtcbiAgICAgICAgaWYgKG51bGwgPT0gbikgcmV0dXJuIGZhbHNlO1xuICAgICAgICBpZiAobi5nZXRGYWN0b3J5KSB7XG4gICAgICAgICAgICBjb25zdCB0ID0gbi5nZXRGYWN0b3J5KHRoaXMpO1xuICAgICAgICAgICAgaWYgKG51bGwgPT0gdCkgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgdC5yZWdpc3RlclRyYW5zZm9ybWVyKGUpO1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBnZXRSZXNvbHZlcih0LCBlID0gdHJ1ZSkge1xuICAgICAgICBFdCh0KTtcbiAgICAgICAgaWYgKHZvaWQgMCAhPT0gdC5yZXNvbHZlKSByZXR1cm4gdDtcbiAgICAgICAgbGV0IG4gPSB0aGlzO1xuICAgICAgICBsZXQgcjtcbiAgICAgICAgd2hpbGUgKG51bGwgIT0gbikge1xuICAgICAgICAgICAgciA9IG4udS5nZXQodCk7XG4gICAgICAgICAgICBpZiAobnVsbCA9PSByKSB7XG4gICAgICAgICAgICAgICAgaWYgKG51bGwgPT0gbi5wYXJlbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgciA9IGd0KHQpID8gdGhpcyA6IG47XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBlID8gdGhpcy5SKHQsIHIpIDogbnVsbDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgbiA9IG4ucGFyZW50O1xuICAgICAgICAgICAgfSBlbHNlIHJldHVybiByO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICBoYXModCwgZSA9IGZhbHNlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnUuaGFzKHQpID8gdHJ1ZSA6IGUgJiYgbnVsbCAhPSB0aGlzLnBhcmVudCA/IHRoaXMucGFyZW50Lmhhcyh0LCB0cnVlKSA6IGZhbHNlO1xuICAgIH1cbiAgICBnZXQodCkge1xuICAgICAgICBFdCh0KTtcbiAgICAgICAgaWYgKHQuJGlzUmVzb2x2ZXIpIHJldHVybiB0LnJlc29sdmUodGhpcywgdGhpcyk7XG4gICAgICAgIGxldCBlID0gdGhpcztcbiAgICAgICAgbGV0IG47XG4gICAgICAgIHdoaWxlIChudWxsICE9IGUpIHtcbiAgICAgICAgICAgIG4gPSBlLnUuZ2V0KHQpO1xuICAgICAgICAgICAgaWYgKG51bGwgPT0gbikge1xuICAgICAgICAgICAgICAgIGlmIChudWxsID09IGUucGFyZW50KSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHIgPSBndCh0KSA/IHRoaXMgOiBlO1xuICAgICAgICAgICAgICAgICAgICBuID0gdGhpcy5SKHQsIHIpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbi5yZXNvbHZlKGUsIHRoaXMpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlID0gZS5wYXJlbnQ7XG4gICAgICAgICAgICB9IGVsc2UgcmV0dXJuIG4ucmVzb2x2ZShlLCB0aGlzKTtcbiAgICAgICAgfVxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEFVUjAwMDg6JHt0fWApO1xuICAgIH1cbiAgICBnZXRBbGwodCwgZSA9IGZhbHNlKSB7XG4gICAgICAgIEV0KHQpO1xuICAgICAgICBjb25zdCBuID0gdGhpcztcbiAgICAgICAgbGV0IHIgPSBuO1xuICAgICAgICBsZXQgaTtcbiAgICAgICAgaWYgKGUpIHtcbiAgICAgICAgICAgIGxldCBlID0gT3Q7XG4gICAgICAgICAgICB3aGlsZSAobnVsbCAhPSByKSB7XG4gICAgICAgICAgICAgICAgaSA9IHIudS5nZXQodCk7XG4gICAgICAgICAgICAgICAgaWYgKG51bGwgIT0gaSkgZSA9IGUuY29uY2F0KEF0KGksIHIsIG4pKTtcbiAgICAgICAgICAgICAgICByID0gci5wYXJlbnQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gZTtcbiAgICAgICAgfSBlbHNlIHdoaWxlIChudWxsICE9IHIpIHtcbiAgICAgICAgICAgIGkgPSByLnUuZ2V0KHQpO1xuICAgICAgICAgICAgaWYgKG51bGwgPT0gaSkge1xuICAgICAgICAgICAgICAgIHIgPSByLnBhcmVudDtcbiAgICAgICAgICAgICAgICBpZiAobnVsbCA9PSByKSByZXR1cm4gT3Q7XG4gICAgICAgICAgICB9IGVsc2UgcmV0dXJuIEF0KGksIHIsIG4pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBPdDtcbiAgICB9XG4gICAgaW52b2tlKHQsIGUpIHtcbiAgICAgICAgaWYgKCQodCkpIHRocm93IGp0KHQpO1xuICAgICAgICBpZiAodm9pZCAwID09PSBlKSByZXR1cm4gbmV3IHQoLi4uSyh0KS5tYXAoYXQsIHRoaXMpKTsgZWxzZSByZXR1cm4gbmV3IHQoLi4uSyh0KS5tYXAoYXQsIHRoaXMpLCAuLi5lKTtcbiAgICB9XG4gICAgZ2V0RmFjdG9yeSh0KSB7XG4gICAgICAgIGxldCBlID0gdGhpcy5oLmdldCh0KTtcbiAgICAgICAgaWYgKHZvaWQgMCA9PT0gZSkge1xuICAgICAgICAgICAgaWYgKCQodCkpIHRocm93IGp0KHQpO1xuICAgICAgICAgICAgdGhpcy5oLnNldCh0LCBlID0gbmV3IEZhY3RvcnkodCwgSyh0KSkpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBlO1xuICAgIH1cbiAgICByZWdpc3RlckZhY3RvcnkodCwgZSkge1xuICAgICAgICB0aGlzLmguc2V0KHQsIGUpO1xuICAgIH1cbiAgICBjcmVhdGVDaGlsZCh0KSB7XG4gICAgICAgIGlmICh2b2lkIDAgPT09IHQgJiYgdGhpcy5jb25maWcuaW5oZXJpdFBhcmVudFJlc291cmNlcykge1xuICAgICAgICAgICAgaWYgKHRoaXMuY29uZmlnID09PSBDb250YWluZXJDb25maWd1cmF0aW9uLkRFRkFVTFQpIHJldHVybiBuZXcgQ29udGFpbmVyKHRoaXMsIHRoaXMuY29uZmlnKTtcbiAgICAgICAgICAgIHJldHVybiBuZXcgQ29udGFpbmVyKHRoaXMsIENvbnRhaW5lckNvbmZpZ3VyYXRpb24uZnJvbSh7XG4gICAgICAgICAgICAgICAgLi4udGhpcy5jb25maWcsXG4gICAgICAgICAgICAgICAgaW5oZXJpdFBhcmVudFJlc291cmNlczogZmFsc2VcbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbmV3IENvbnRhaW5lcih0aGlzLCBDb250YWluZXJDb25maWd1cmF0aW9uLmZyb20obnVsbCAhPT0gdCAmJiB2b2lkIDAgIT09IHQgPyB0IDogdGhpcy5jb25maWcpKTtcbiAgICB9XG4gICAgZGlzcG9zZVJlc29sdmVycygpIHtcbiAgICAgICAgY29uc3QgdCA9IHRoaXMudTtcbiAgICAgICAgY29uc3QgZSA9IHRoaXMuaTtcbiAgICAgICAgbGV0IG47XG4gICAgICAgIGxldCByO1xuICAgICAgICBmb3IgKFtyLCBuXSBvZiBlLmVudHJpZXMoKSkge1xuICAgICAgICAgICAgbi5kaXNwb3NlKCk7XG4gICAgICAgICAgICB0LmRlbGV0ZShyKTtcbiAgICAgICAgfVxuICAgICAgICBlLmNsZWFyKCk7XG4gICAgfVxuICAgIGZpbmQodCwgZSkge1xuICAgICAgICBjb25zdCBuID0gdC5rZXlGcm9tKGUpO1xuICAgICAgICBsZXQgciA9IHRoaXMucmVzW25dO1xuICAgICAgICBpZiAodm9pZCAwID09PSByKSB7XG4gICAgICAgICAgICByID0gdGhpcy5yb290LnJlc1tuXTtcbiAgICAgICAgICAgIGlmICh2b2lkIDAgPT09IHIpIHJldHVybiBudWxsO1xuICAgICAgICB9XG4gICAgICAgIGlmIChudWxsID09PSByKSByZXR1cm4gbnVsbDtcbiAgICAgICAgaWYgKEkoci5nZXRGYWN0b3J5KSkge1xuICAgICAgICAgICAgY29uc3QgZSA9IHIuZ2V0RmFjdG9yeSh0aGlzKTtcbiAgICAgICAgICAgIGlmIChudWxsID09PSBlIHx8IHZvaWQgMCA9PT0gZSkgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICBjb25zdCBuID0gaih0Lm5hbWUsIGUuVHlwZSk7XG4gICAgICAgICAgICBpZiAodm9pZCAwID09PSBuKSByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgIHJldHVybiBuO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICBjcmVhdGUodCwgZSkge1xuICAgICAgICB2YXIgbiwgcjtcbiAgICAgICAgY29uc3QgaSA9IHQua2V5RnJvbShlKTtcbiAgICAgICAgbGV0IHMgPSB0aGlzLnJlc1tpXTtcbiAgICAgICAgaWYgKHZvaWQgMCA9PT0gcykge1xuICAgICAgICAgICAgcyA9IHRoaXMucm9vdC5yZXNbaV07XG4gICAgICAgICAgICBpZiAodm9pZCAwID09PSBzKSByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgIHJldHVybiBudWxsICE9PSAobiA9IHMucmVzb2x2ZSh0aGlzLnJvb3QsIHRoaXMpKSAmJiB2b2lkIDAgIT09IG4gPyBuIDogbnVsbDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbnVsbCAhPT0gKHIgPSBzLnJlc29sdmUodGhpcywgdGhpcykpICYmIHZvaWQgMCAhPT0gciA/IHIgOiBudWxsO1xuICAgIH1cbiAgICBkaXNwb3NlKCkge1xuICAgICAgICBpZiAodGhpcy5pLnNpemUgPiAwKSB0aGlzLmRpc3Bvc2VSZXNvbHZlcnMoKTtcbiAgICAgICAgdGhpcy51LmNsZWFyKCk7XG4gICAgfVxuICAgIFIodCwgZSkge1xuICAgICAgICBpZiAoIUkodCkpIHRocm93IG5ldyBFcnJvcihgQVVSMDAwOToke3R9YCk7XG4gICAgICAgIGlmICh5dC5oYXModC5uYW1lKSkgdGhyb3cgbmV3IEVycm9yKGBBVVIwMDEwOiR7dC5uYW1lfWApO1xuICAgICAgICBpZiAodnQodCkpIHtcbiAgICAgICAgICAgIGNvbnN0IG4gPSB0LnJlZ2lzdGVyKGUsIHQpO1xuICAgICAgICAgICAgaWYgKCEobiBpbnN0YW5jZW9mIE9iamVjdCkgfHwgbnVsbCA9PSBuLnJlc29sdmUpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBuID0gZS51LmdldCh0KTtcbiAgICAgICAgICAgICAgICBpZiAodm9pZCAwICE9IG4pIHJldHVybiBuO1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgQVVSMDAxMWApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIG47XG4gICAgICAgIH0gZWxzZSBpZiAoUy5yZXNvdXJjZS5oYXModCkpIHtcbiAgICAgICAgICAgIGNvbnN0IG4gPSBTLnJlc291cmNlLmdldEFsbCh0KTtcbiAgICAgICAgICAgIGlmICgxID09PSBuLmxlbmd0aCkgblswXS5yZWdpc3RlcihlKTsgZWxzZSB7XG4gICAgICAgICAgICAgICAgY29uc3QgdCA9IG4ubGVuZ3RoO1xuICAgICAgICAgICAgICAgIGZvciAobGV0IHIgPSAwOyByIDwgdDsgKytyKSBuW3JdLnJlZ2lzdGVyKGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgciA9IGUudS5nZXQodCk7XG4gICAgICAgICAgICBpZiAodm9pZCAwICE9IHIpIHJldHVybiByO1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBBVVIwMDExYCk7XG4gICAgICAgIH0gZWxzZSBpZiAodC4kaXNJbnRlcmZhY2UpIHRocm93IG5ldyBFcnJvcihgQVVSMDAxMjoke3QuZnJpZW5kbHlOYW1lfWApOyBlbHNlIHtcbiAgICAgICAgICAgIGNvbnN0IG4gPSB0aGlzLmNvbmZpZy5kZWZhdWx0UmVzb2x2ZXIodCwgZSk7XG4gICAgICAgICAgICBlLnUuc2V0KHQsIG4pO1xuICAgICAgICAgICAgcmV0dXJuIG47XG4gICAgICAgIH1cbiAgICB9XG59XG5cbmNsYXNzIFBhcmFtZXRlcml6ZWRSZWdpc3RyeSB7XG4gICAgY29uc3RydWN0b3IodCwgZSkge1xuICAgICAgICB0aGlzLmtleSA9IHQ7XG4gICAgICAgIHRoaXMucGFyYW1zID0gZTtcbiAgICB9XG4gICAgcmVnaXN0ZXIodCkge1xuICAgICAgICBpZiAodC5oYXModGhpcy5rZXksIHRydWUpKSB7XG4gICAgICAgICAgICBjb25zdCBlID0gdC5nZXQodGhpcy5rZXkpO1xuICAgICAgICAgICAgZS5yZWdpc3Rlcih0LCAuLi50aGlzLnBhcmFtcyk7XG4gICAgICAgIH0gZWxzZSB0LnJlZ2lzdGVyKC4uLnRoaXMucGFyYW1zLmZpbHRlcigodCA9PiBcIm9iamVjdFwiID09PSB0eXBlb2YgdCkpKTtcbiAgICB9XG59XG5cbmNvbnN0IGJ0ID0gbmV3IFdlYWtNYXA7XG5cbmZ1bmN0aW9uIEN0KHQpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24oZSwgbiwgcikge1xuICAgICAgICBsZXQgaSA9IGJ0LmdldChlKTtcbiAgICAgICAgaWYgKHZvaWQgMCA9PT0gaSkgYnQuc2V0KGUsIGkgPSBuZXcgV2Vha01hcCk7XG4gICAgICAgIGlmIChpLmhhcyhyKSkgcmV0dXJuIGkuZ2V0KHIpO1xuICAgICAgICBjb25zdCBzID0gdChlLCBuLCByKTtcbiAgICAgICAgaS5zZXQociwgcyk7XG4gICAgICAgIHJldHVybiBzO1xuICAgIH07XG59XG5cbmNvbnN0ICR0ID0ge1xuICAgIGluc3RhbmNlKHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBSZXNvbHZlcih0LCAwLCBlKTtcbiAgICB9LFxuICAgIHNpbmdsZXRvbih0LCBlKSB7XG4gICAgICAgIHJldHVybiBuZXcgUmVzb2x2ZXIodCwgMSwgZSk7XG4gICAgfSxcbiAgICB0cmFuc2llbnQodCwgZSkge1xuICAgICAgICByZXR1cm4gbmV3IFJlc29sdmVyKHQsIDIsIGUpO1xuICAgIH0sXG4gICAgY2FsbGJhY2sodCwgZSkge1xuICAgICAgICByZXR1cm4gbmV3IFJlc29sdmVyKHQsIDMsIGUpO1xuICAgIH0sXG4gICAgY2FjaGVkQ2FsbGJhY2sodCwgZSkge1xuICAgICAgICByZXR1cm4gbmV3IFJlc29sdmVyKHQsIDMsIEN0KGUpKTtcbiAgICB9LFxuICAgIGFsaWFzVG8odCwgZSkge1xuICAgICAgICByZXR1cm4gbmV3IFJlc29sdmVyKGUsIDUsIHQpO1xuICAgIH0sXG4gICAgZGVmZXIodCwgLi4uZSkge1xuICAgICAgICByZXR1cm4gbmV3IFBhcmFtZXRlcml6ZWRSZWdpc3RyeSh0LCBlKTtcbiAgICB9XG59O1xuXG5jbGFzcyBJbnN0YW5jZVByb3ZpZGVyIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlKSB7XG4gICAgICAgIHRoaXMuQyA9IG51bGw7XG4gICAgICAgIHRoaXMuJCA9IHQ7XG4gICAgICAgIGlmICh2b2lkIDAgIT09IGUpIHRoaXMuQyA9IGU7XG4gICAgfVxuICAgIGdldCBmcmllbmRseU5hbWUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLiQ7XG4gICAgfVxuICAgIHByZXBhcmUodCkge1xuICAgICAgICB0aGlzLkMgPSB0O1xuICAgIH1cbiAgICBnZXQgJGlzUmVzb2x2ZXIoKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICByZXNvbHZlKCkge1xuICAgICAgICBpZiAobnVsbCA9PSB0aGlzLkMpIHRocm93IG5ldyBFcnJvcihgQVVSMDAxMzoke3RoaXMuJH1gKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuQztcbiAgICB9XG4gICAgZGlzcG9zZSgpIHtcbiAgICAgICAgdGhpcy5DID0gbnVsbDtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIEV0KHQpIHtcbiAgICBpZiAobnVsbCA9PT0gdCB8fCB2b2lkIDAgPT09IHQpIHRocm93IG5ldyBFcnJvcihgQVVSMDAxNGApO1xufVxuXG5mdW5jdGlvbiBBdCh0LCBlLCBuKSB7XG4gICAgaWYgKHQgaW5zdGFuY2VvZiBSZXNvbHZlciAmJiA0ID09PSB0LnN0cmF0ZWd5KSB7XG4gICAgICAgIGNvbnN0IHIgPSB0LnN0YXRlO1xuICAgICAgICBsZXQgaSA9IHIubGVuZ3RoO1xuICAgICAgICBjb25zdCBzID0gbmV3IEFycmF5KGkpO1xuICAgICAgICB3aGlsZSAoaS0tKSBzW2ldID0gcltpXS5yZXNvbHZlKGUsIG4pO1xuICAgICAgICByZXR1cm4gcztcbiAgICB9XG4gICAgcmV0dXJuIFsgdC5yZXNvbHZlKGUsIG4pIF07XG59XG5cbmZ1bmN0aW9uIGp0KHQpIHtcbiAgICByZXR1cm4gbmV3IEVycm9yKGBBVVIwMDE1OiR7dC5uYW1lfWApO1xufVxuXG5jb25zdCBPdCA9IE9iamVjdC5mcmVlemUoW10pO1xuXG5jb25zdCBrdCA9IE9iamVjdC5mcmVlemUoe30pO1xuXG5mdW5jdGlvbiBJdCgpIHt9XG5cbmNvbnN0IE10ID0gRy5jcmVhdGVJbnRlcmZhY2UoXCJJUGxhdGZvcm1cIik7XG5cbi8qISAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKlxuQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uXG5cblBlcm1pc3Npb24gdG8gdXNlLCBjb3B5LCBtb2RpZnksIGFuZC9vciBkaXN0cmlidXRlIHRoaXMgc29mdHdhcmUgZm9yIGFueVxucHVycG9zZSB3aXRoIG9yIHdpdGhvdXQgZmVlIGlzIGhlcmVieSBncmFudGVkLlxuXG5USEUgU09GVFdBUkUgSVMgUFJPVklERUQgXCJBUyBJU1wiIEFORCBUSEUgQVVUSE9SIERJU0NMQUlNUyBBTEwgV0FSUkFOVElFUyBXSVRIXG5SRUdBUkQgVE8gVEhJUyBTT0ZUV0FSRSBJTkNMVURJTkcgQUxMIElNUExJRUQgV0FSUkFOVElFUyBPRiBNRVJDSEFOVEFCSUxJVFlcbkFORCBGSVRORVNTLiBJTiBOTyBFVkVOVCBTSEFMTCBUSEUgQVVUSE9SIEJFIExJQUJMRSBGT1IgQU5ZIFNQRUNJQUwsIERJUkVDVCxcbklORElSRUNULCBPUiBDT05TRVFVRU5USUFMIERBTUFHRVMgT1IgQU5ZIERBTUFHRVMgV0hBVFNPRVZFUiBSRVNVTFRJTkcgRlJPTVxuTE9TUyBPRiBVU0UsIERBVEEgT1IgUFJPRklUUywgV0hFVEhFUiBJTiBBTiBBQ1RJT04gT0YgQ09OVFJBQ1QsIE5FR0xJR0VOQ0UgT1Jcbk9USEVSIFRPUlRJT1VTIEFDVElPTiwgQVJJU0lORyBPVVQgT0YgT1IgSU4gQ09OTkVDVElPTiBXSVRIIFRIRSBVU0UgT1JcblBFUkZPUk1BTkNFIE9GIFRISVMgU09GVFdBUkUuXG4qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiAqLyBmdW5jdGlvbiBUdCh0LCBlLCBuLCByKSB7XG4gICAgdmFyIGkgPSBhcmd1bWVudHMubGVuZ3RoLCBzID0gaSA8IDMgPyBlIDogbnVsbCA9PT0gciA/IHIgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKGUsIG4pIDogciwgbztcbiAgICBpZiAoXCJvYmplY3RcIiA9PT0gdHlwZW9mIFJlZmxlY3QgJiYgXCJmdW5jdGlvblwiID09PSB0eXBlb2YgUmVmbGVjdC5kZWNvcmF0ZSkgcyA9IFJlZmxlY3QuZGVjb3JhdGUodCwgZSwgbiwgcik7IGVsc2UgZm9yICh2YXIgdSA9IHQubGVuZ3RoIC0gMTsgdSA+PSAwOyB1LS0pIGlmIChvID0gdFt1XSkgcyA9IChpIDwgMyA/IG8ocykgOiBpID4gMyA/IG8oZSwgbiwgcykgOiBvKGUsIG4pKSB8fCBzO1xuICAgIHJldHVybiBpID4gMyAmJiBzICYmIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLCBuLCBzKSwgcztcbn1cblxuZnVuY3Rpb24gRnQodCwgZSkge1xuICAgIHJldHVybiBmdW5jdGlvbihuLCByKSB7XG4gICAgICAgIGUobiwgciwgdCk7XG4gICAgfTtcbn1cblxudmFyIFV0O1xuXG4oZnVuY3Rpb24odCkge1xuICAgIHRbdFtcInRyYWNlXCJdID0gMF0gPSBcInRyYWNlXCI7XG4gICAgdFt0W1wiZGVidWdcIl0gPSAxXSA9IFwiZGVidWdcIjtcbiAgICB0W3RbXCJpbmZvXCJdID0gMl0gPSBcImluZm9cIjtcbiAgICB0W3RbXCJ3YXJuXCJdID0gM10gPSBcIndhcm5cIjtcbiAgICB0W3RbXCJlcnJvclwiXSA9IDRdID0gXCJlcnJvclwiO1xuICAgIHRbdFtcImZhdGFsXCJdID0gNV0gPSBcImZhdGFsXCI7XG4gICAgdFt0W1wibm9uZVwiXSA9IDZdID0gXCJub25lXCI7XG59KShVdCB8fCAoVXQgPSB7fSkpO1xuXG52YXIgTHQ7XG5cbihmdW5jdGlvbih0KSB7XG4gICAgdFt0W1wibm9Db2xvcnNcIl0gPSAwXSA9IFwibm9Db2xvcnNcIjtcbiAgICB0W3RbXCJjb2xvcnNcIl0gPSAxXSA9IFwiY29sb3JzXCI7XG59KShMdCB8fCAoTHQgPSB7fSkpO1xuXG5jb25zdCBQdCA9IEcuY3JlYXRlSW50ZXJmYWNlKFwiSUxvZ0NvbmZpZ1wiLCAodCA9PiB0Lmluc3RhbmNlKG5ldyBMb2dDb25maWcoMCwgMykpKSk7XG5cbmNvbnN0IER0ID0gRy5jcmVhdGVJbnRlcmZhY2UoXCJJU2lua1wiKTtcblxuY29uc3QgU3QgPSBHLmNyZWF0ZUludGVyZmFjZShcIklMb2dFdmVudEZhY3RvcnlcIiwgKHQgPT4gdC5zaW5nbGV0b24oX3QpKSk7XG5cbmNvbnN0IE50ID0gRy5jcmVhdGVJbnRlcmZhY2UoXCJJTG9nZ2VyXCIsICh0ID0+IHQuc2luZ2xldG9uKFZ0KSkpO1xuXG5jb25zdCBXdCA9IEcuY3JlYXRlSW50ZXJmYWNlKFwiSUxvZ1Njb3BlXCIpO1xuXG5jb25zdCBCdCA9IE9iamVjdC5mcmVlemUoe1xuICAgIGtleTogRihcImxvZ2dlci1zaW5rLWhhbmRsZXNcIiksXG4gICAgZGVmaW5lKHQsIGUpIHtcbiAgICAgICAgayh0aGlzLmtleSwgZS5oYW5kbGVzLCB0LnByb3RvdHlwZSk7XG4gICAgICAgIHJldHVybiB0O1xuICAgIH0sXG4gICAgZ2V0SGFuZGxlcyhlKSB7XG4gICAgICAgIHJldHVybiB0LmdldCh0aGlzLmtleSwgZSk7XG4gICAgfVxufSk7XG5cbmZ1bmN0aW9uIFF0KHQpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24oZSkge1xuICAgICAgICByZXR1cm4gQnQuZGVmaW5lKGUsIHQpO1xuICAgIH07XG59XG5cbmNvbnN0IHh0ID0gQyh7XG4gICAgcmVkKHQpIHtcbiAgICAgICAgcmV0dXJuIGBcdTAwMWJbMzFtJHt0fVx1MDAxYlszOW1gO1xuICAgIH0sXG4gICAgZ3JlZW4odCkge1xuICAgICAgICByZXR1cm4gYFx1MDAxYlszMm0ke3R9XHUwMDFiWzM5bWA7XG4gICAgfSxcbiAgICB5ZWxsb3codCkge1xuICAgICAgICByZXR1cm4gYFx1MDAxYlszM20ke3R9XHUwMDFiWzM5bWA7XG4gICAgfSxcbiAgICBibHVlKHQpIHtcbiAgICAgICAgcmV0dXJuIGBcdTAwMWJbMzRtJHt0fVx1MDAxYlszOW1gO1xuICAgIH0sXG4gICAgbWFnZW50YSh0KSB7XG4gICAgICAgIHJldHVybiBgXHUwMDFiWzM1bSR7dH1cdTAwMWJbMzltYDtcbiAgICB9LFxuICAgIGN5YW4odCkge1xuICAgICAgICByZXR1cm4gYFx1MDAxYlszNm0ke3R9XHUwMDFiWzM5bWA7XG4gICAgfSxcbiAgICB3aGl0ZSh0KSB7XG4gICAgICAgIHJldHVybiBgXHUwMDFiWzM3bSR7dH1cdTAwMWJbMzltYDtcbiAgICB9LFxuICAgIGdyZXkodCkge1xuICAgICAgICByZXR1cm4gYFx1MDAxYls5MG0ke3R9XHUwMDFiWzM5bWA7XG4gICAgfVxufSk7XG5cbmNsYXNzIExvZ0NvbmZpZyB7XG4gICAgY29uc3RydWN0b3IodCwgZSkge1xuICAgICAgICB0aGlzLmNvbG9yT3B0aW9ucyA9IHQ7XG4gICAgICAgIHRoaXMubGV2ZWwgPSBlO1xuICAgIH1cbn1cblxuY29uc3QgenQgPSBmdW5jdGlvbigpIHtcbiAgICBjb25zdCB0ID0gWyBDKHtcbiAgICAgICAgVFJDOiBcIlRSQ1wiLFxuICAgICAgICBEQkc6IFwiREJHXCIsXG4gICAgICAgIElORjogXCJJTkZcIixcbiAgICAgICAgV1JOOiBcIldSTlwiLFxuICAgICAgICBFUlI6IFwiRVJSXCIsXG4gICAgICAgIEZUTDogXCJGVExcIixcbiAgICAgICAgUVFROiBcIj8/P1wiXG4gICAgfSksIEMoe1xuICAgICAgICBUUkM6IHh0LmdyZXkoXCJUUkNcIiksXG4gICAgICAgIERCRzogeHQuZ3JleShcIkRCR1wiKSxcbiAgICAgICAgSU5GOiB4dC53aGl0ZShcIklORlwiKSxcbiAgICAgICAgV1JOOiB4dC55ZWxsb3coXCJXUk5cIiksXG4gICAgICAgIEVSUjogeHQucmVkKFwiRVJSXCIpLFxuICAgICAgICBGVEw6IHh0LnJlZChcIkZUTFwiKSxcbiAgICAgICAgUVFROiB4dC5ncmV5KFwiPz8/XCIpXG4gICAgfSkgXTtcbiAgICByZXR1cm4gZnVuY3Rpb24oZSwgbikge1xuICAgICAgICBpZiAoZSA8PSAwKSByZXR1cm4gdFtuXS5UUkM7XG4gICAgICAgIGlmIChlIDw9IDEpIHJldHVybiB0W25dLkRCRztcbiAgICAgICAgaWYgKGUgPD0gMikgcmV0dXJuIHRbbl0uSU5GO1xuICAgICAgICBpZiAoZSA8PSAzKSByZXR1cm4gdFtuXS5XUk47XG4gICAgICAgIGlmIChlIDw9IDQpIHJldHVybiB0W25dLkVSUjtcbiAgICAgICAgaWYgKGUgPD0gNSkgcmV0dXJuIHRbbl0uRlRMO1xuICAgICAgICByZXR1cm4gdFtuXS5RUVE7XG4gICAgfTtcbn0oKTtcblxuZnVuY3Rpb24gR3QodCwgZSkge1xuICAgIGlmICgwID09PSBlKSByZXR1cm4gdC5qb2luKFwiLlwiKTtcbiAgICByZXR1cm4gdC5tYXAoeHQuY3lhbikuam9pbihcIi5cIik7XG59XG5cbmZ1bmN0aW9uIEt0KHQsIGUpIHtcbiAgICBpZiAoMCA9PT0gZSkgcmV0dXJuIG5ldyBEYXRlKHQpLnRvSVNPU3RyaW5nKCk7XG4gICAgcmV0dXJuIHh0LmdyZXkobmV3IERhdGUodCkudG9JU09TdHJpbmcoKSk7XG59XG5cbmNsYXNzIERlZmF1bHRMb2dFdmVudCB7XG4gICAgY29uc3RydWN0b3IodCwgZSwgbiwgciwgaSwgcykge1xuICAgICAgICB0aGlzLnNldmVyaXR5ID0gdDtcbiAgICAgICAgdGhpcy5tZXNzYWdlID0gZTtcbiAgICAgICAgdGhpcy5vcHRpb25hbFBhcmFtcyA9IG47XG4gICAgICAgIHRoaXMuc2NvcGUgPSByO1xuICAgICAgICB0aGlzLmNvbG9yT3B0aW9ucyA9IGk7XG4gICAgICAgIHRoaXMudGltZXN0YW1wID0gcztcbiAgICB9XG4gICAgdG9TdHJpbmcoKSB7XG4gICAgICAgIGNvbnN0IHtzZXZlcml0eTogdCwgbWVzc2FnZTogZSwgc2NvcGU6IG4sIGNvbG9yT3B0aW9uczogciwgdGltZXN0YW1wOiBpfSA9IHRoaXM7XG4gICAgICAgIGlmICgwID09PSBuLmxlbmd0aCkgcmV0dXJuIGAke0t0KGksIHIpfSBbJHt6dCh0LCByKX1dICR7ZX1gO1xuICAgICAgICByZXR1cm4gYCR7S3QoaSwgcil9IFske3p0KHQsIHIpfSAke0d0KG4sIHIpfV0gJHtlfWA7XG4gICAgfVxufVxuXG5sZXQgX3QgPSBjbGFzcyBEZWZhdWx0TG9nRXZlbnRGYWN0b3J5IHtcbiAgICBjb25zdHJ1Y3Rvcih0KSB7XG4gICAgICAgIHRoaXMuY29uZmlnID0gdDtcbiAgICB9XG4gICAgY3JlYXRlTG9nRXZlbnQodCwgZSwgbiwgcikge1xuICAgICAgICByZXR1cm4gbmV3IERlZmF1bHRMb2dFdmVudChlLCBuLCByLCB0LnNjb3BlLCB0aGlzLmNvbmZpZy5jb2xvck9wdGlvbnMsIERhdGUubm93KCkpO1xuICAgIH1cbn07XG5cbl90ID0gVHQoWyBGdCgwLCBQdCkgXSwgX3QpO1xuXG5sZXQgSHQgPSBjbGFzcyBDb25zb2xlU2luayB7XG4gICAgY29uc3RydWN0b3IodCkge1xuICAgICAgICBjb25zdCBlID0gdC5jb25zb2xlO1xuICAgICAgICB0aGlzLmhhbmRsZUV2ZW50ID0gZnVuY3Rpb24gdChuKSB7XG4gICAgICAgICAgICBjb25zdCByID0gbi5vcHRpb25hbFBhcmFtcztcbiAgICAgICAgICAgIGlmICh2b2lkIDAgPT09IHIgfHwgMCA9PT0gci5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICBjb25zdCB0ID0gbi50b1N0cmluZygpO1xuICAgICAgICAgICAgICAgIHN3aXRjaCAobi5zZXZlcml0eSkge1xuICAgICAgICAgICAgICAgICAgY2FzZSAwOlxuICAgICAgICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZS5kZWJ1Zyh0KTtcblxuICAgICAgICAgICAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZS5pbmZvKHQpO1xuXG4gICAgICAgICAgICAgICAgICBjYXNlIDM6XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBlLndhcm4odCk7XG5cbiAgICAgICAgICAgICAgICAgIGNhc2UgNDpcbiAgICAgICAgICAgICAgICAgIGNhc2UgNTpcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGUuZXJyb3IodCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBsZXQgdCA9IG4udG9TdHJpbmcoKTtcbiAgICAgICAgICAgICAgICBsZXQgaSA9IDA7XG4gICAgICAgICAgICAgICAgd2hpbGUgKHQuaW5jbHVkZXMoXCIlc1wiKSkgdCA9IHQucmVwbGFjZShcIiVzXCIsIFN0cmluZyhyW2krK10pKTtcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKG4uc2V2ZXJpdHkpIHtcbiAgICAgICAgICAgICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGUuZGVidWcodCwgLi4uci5zbGljZShpKSk7XG5cbiAgICAgICAgICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGUuaW5mbyh0LCAuLi5yLnNsaWNlKGkpKTtcblxuICAgICAgICAgICAgICAgICAgY2FzZSAzOlxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZS53YXJuKHQsIC4uLnIuc2xpY2UoaSkpO1xuXG4gICAgICAgICAgICAgICAgICBjYXNlIDQ6XG4gICAgICAgICAgICAgICAgICBjYXNlIDU6XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBlLmVycm9yKHQsIC4uLnIuc2xpY2UoaSkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICB9XG4gICAgc3RhdGljIHJlZ2lzdGVyKHQpIHtcbiAgICAgICAgJHQuc2luZ2xldG9uKER0LCBDb25zb2xlU2luaykucmVnaXN0ZXIodCk7XG4gICAgfVxufTtcblxuSHQgPSBUdChbIEZ0KDAsIE10KSBdLCBIdCk7XG5cbmxldCBWdCA9IGNsYXNzIERlZmF1bHRMb2dnZXIge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUsIG4sIHIgPSBbXSwgaSA9IG51bGwpIHtcbiAgICAgICAgdmFyIHMsIG8sIHUsIGwsIGMsIGY7XG4gICAgICAgIHRoaXMuY29uZmlnID0gdDtcbiAgICAgICAgdGhpcy5mYWN0b3J5ID0gZTtcbiAgICAgICAgdGhpcy5zY29wZSA9IHI7XG4gICAgICAgIHRoaXMuc2NvcGVkTG9nZ2VycyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gICAgICAgIGxldCBhO1xuICAgICAgICBsZXQgaDtcbiAgICAgICAgbGV0IGQ7XG4gICAgICAgIGxldCB2O1xuICAgICAgICBsZXQgdztcbiAgICAgICAgbGV0IGc7XG4gICAgICAgIGlmIChudWxsID09PSBpKSB7XG4gICAgICAgICAgICB0aGlzLnJvb3QgPSB0aGlzO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQgPSB0aGlzO1xuICAgICAgICAgICAgYSA9IHRoaXMudHJhY2VTaW5rcyA9IFtdO1xuICAgICAgICAgICAgaCA9IHRoaXMuZGVidWdTaW5rcyA9IFtdO1xuICAgICAgICAgICAgZCA9IHRoaXMuaW5mb1NpbmtzID0gW107XG4gICAgICAgICAgICB2ID0gdGhpcy53YXJuU2lua3MgPSBbXTtcbiAgICAgICAgICAgIHcgPSB0aGlzLmVycm9yU2lua3MgPSBbXTtcbiAgICAgICAgICAgIGcgPSB0aGlzLmZhdGFsU2lua3MgPSBbXTtcbiAgICAgICAgICAgIGZvciAoY29uc3QgdCBvZiBuKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZSA9IEJ0LmdldEhhbmRsZXModCk7XG4gICAgICAgICAgICAgICAgaWYgKG51bGwgIT09IChzID0gbnVsbCA9PT0gZSB8fCB2b2lkIDAgPT09IGUgPyB2b2lkIDAgOiBlLmluY2x1ZGVzKDApKSAmJiB2b2lkIDAgIT09IHMgPyBzIDogdHJ1ZSkgYS5wdXNoKHQpO1xuICAgICAgICAgICAgICAgIGlmIChudWxsICE9PSAobyA9IG51bGwgPT09IGUgfHwgdm9pZCAwID09PSBlID8gdm9pZCAwIDogZS5pbmNsdWRlcygxKSkgJiYgdm9pZCAwICE9PSBvID8gbyA6IHRydWUpIGgucHVzaCh0KTtcbiAgICAgICAgICAgICAgICBpZiAobnVsbCAhPT0gKHUgPSBudWxsID09PSBlIHx8IHZvaWQgMCA9PT0gZSA/IHZvaWQgMCA6IGUuaW5jbHVkZXMoMikpICYmIHZvaWQgMCAhPT0gdSA/IHUgOiB0cnVlKSBkLnB1c2godCk7XG4gICAgICAgICAgICAgICAgaWYgKG51bGwgIT09IChsID0gbnVsbCA9PT0gZSB8fCB2b2lkIDAgPT09IGUgPyB2b2lkIDAgOiBlLmluY2x1ZGVzKDMpKSAmJiB2b2lkIDAgIT09IGwgPyBsIDogdHJ1ZSkgdi5wdXNoKHQpO1xuICAgICAgICAgICAgICAgIGlmIChudWxsICE9PSAoYyA9IG51bGwgPT09IGUgfHwgdm9pZCAwID09PSBlID8gdm9pZCAwIDogZS5pbmNsdWRlcyg0KSkgJiYgdm9pZCAwICE9PSBjID8gYyA6IHRydWUpIHcucHVzaCh0KTtcbiAgICAgICAgICAgICAgICBpZiAobnVsbCAhPT0gKGYgPSBudWxsID09PSBlIHx8IHZvaWQgMCA9PT0gZSA/IHZvaWQgMCA6IGUuaW5jbHVkZXMoNSkpICYmIHZvaWQgMCAhPT0gZiA/IGYgOiB0cnVlKSBnLnB1c2godCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLnJvb3QgPSBpLnJvb3Q7XG4gICAgICAgICAgICB0aGlzLnBhcmVudCA9IGk7XG4gICAgICAgICAgICBhID0gdGhpcy50cmFjZVNpbmtzID0gaS50cmFjZVNpbmtzO1xuICAgICAgICAgICAgaCA9IHRoaXMuZGVidWdTaW5rcyA9IGkuZGVidWdTaW5rcztcbiAgICAgICAgICAgIGQgPSB0aGlzLmluZm9TaW5rcyA9IGkuaW5mb1NpbmtzO1xuICAgICAgICAgICAgdiA9IHRoaXMud2FyblNpbmtzID0gaS53YXJuU2lua3M7XG4gICAgICAgICAgICB3ID0gdGhpcy5lcnJvclNpbmtzID0gaS5lcnJvclNpbmtzO1xuICAgICAgICAgICAgZyA9IHRoaXMuZmF0YWxTaW5rcyA9IGkuZmF0YWxTaW5rcztcbiAgICAgICAgfVxuICAgIH1cbiAgICB0cmFjZSh0LCAuLi5lKSB7XG4gICAgICAgIGlmICh0aGlzLmNvbmZpZy5sZXZlbCA8PSAwKSB0aGlzLmVtaXQodGhpcy50cmFjZVNpbmtzLCAwLCB0LCBlKTtcbiAgICB9XG4gICAgZGVidWcodCwgLi4uZSkge1xuICAgICAgICBpZiAodGhpcy5jb25maWcubGV2ZWwgPD0gMSkgdGhpcy5lbWl0KHRoaXMuZGVidWdTaW5rcywgMSwgdCwgZSk7XG4gICAgfVxuICAgIGluZm8odCwgLi4uZSkge1xuICAgICAgICBpZiAodGhpcy5jb25maWcubGV2ZWwgPD0gMikgdGhpcy5lbWl0KHRoaXMuaW5mb1NpbmtzLCAyLCB0LCBlKTtcbiAgICB9XG4gICAgd2Fybih0LCAuLi5lKSB7XG4gICAgICAgIGlmICh0aGlzLmNvbmZpZy5sZXZlbCA8PSAzKSB0aGlzLmVtaXQodGhpcy53YXJuU2lua3MsIDMsIHQsIGUpO1xuICAgIH1cbiAgICBlcnJvcih0LCAuLi5lKSB7XG4gICAgICAgIGlmICh0aGlzLmNvbmZpZy5sZXZlbCA8PSA0KSB0aGlzLmVtaXQodGhpcy5lcnJvclNpbmtzLCA0LCB0LCBlKTtcbiAgICB9XG4gICAgZmF0YWwodCwgLi4uZSkge1xuICAgICAgICBpZiAodGhpcy5jb25maWcubGV2ZWwgPD0gNSkgdGhpcy5lbWl0KHRoaXMuZmF0YWxTaW5rcywgNSwgdCwgZSk7XG4gICAgfVxuICAgIHNjb3BlVG8odCkge1xuICAgICAgICBjb25zdCBlID0gdGhpcy5zY29wZWRMb2dnZXJzO1xuICAgICAgICBsZXQgbiA9IGVbdF07XG4gICAgICAgIGlmICh2b2lkIDAgPT09IG4pIG4gPSBlW3RdID0gbmV3IERlZmF1bHRMb2dnZXIodGhpcy5jb25maWcsIHRoaXMuZmFjdG9yeSwgdm9pZCAwLCB0aGlzLnNjb3BlLmNvbmNhdCh0KSwgdGhpcyk7XG4gICAgICAgIHJldHVybiBuO1xuICAgIH1cbiAgICBlbWl0KHQsIGUsIG4sIHIpIHtcbiAgICAgICAgY29uc3QgaSA9IEkobikgPyBuKCkgOiBuO1xuICAgICAgICBjb25zdCBzID0gdGhpcy5mYWN0b3J5LmNyZWF0ZUxvZ0V2ZW50KHRoaXMsIGUsIGksIHIpO1xuICAgICAgICBmb3IgKGxldCBlID0gMCwgbiA9IHQubGVuZ3RoOyBlIDwgbjsgKytlKSB0W2VdLmhhbmRsZUV2ZW50KHMpO1xuICAgIH1cbn07XG5cblR0KFsgbSBdLCBWdC5wcm90b3R5cGUsIFwidHJhY2VcIiwgbnVsbCk7XG5cblR0KFsgbSBdLCBWdC5wcm90b3R5cGUsIFwiZGVidWdcIiwgbnVsbCk7XG5cblR0KFsgbSBdLCBWdC5wcm90b3R5cGUsIFwiaW5mb1wiLCBudWxsKTtcblxuVHQoWyBtIF0sIFZ0LnByb3RvdHlwZSwgXCJ3YXJuXCIsIG51bGwpO1xuXG5UdChbIG0gXSwgVnQucHJvdG90eXBlLCBcImVycm9yXCIsIG51bGwpO1xuXG5UdChbIG0gXSwgVnQucHJvdG90eXBlLCBcImZhdGFsXCIsIG51bGwpO1xuXG5WdCA9IFR0KFsgRnQoMCwgUHQpLCBGdCgxLCBTdCksIEZ0KDIsIG50KER0KSksIEZ0KDMsIGl0KFd0KSksIEZ0KDQsIHN0KSBdLCBWdCk7XG5cbmNvbnN0IHF0ID0gQyh7XG4gICAgY3JlYXRlKHtsZXZlbDogdCA9IDMsIGNvbG9yT3B0aW9uczogZSA9IDAsIHNpbmtzOiBuID0gW119ID0ge30pIHtcbiAgICAgICAgcmV0dXJuIEMoe1xuICAgICAgICAgICAgcmVnaXN0ZXIocikge1xuICAgICAgICAgICAgICAgIHIucmVnaXN0ZXIoJHQuaW5zdGFuY2UoUHQsIG5ldyBMb2dDb25maWcoZSwgdCkpKTtcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IHQgb2YgbikgaWYgKEkodCkpIHIucmVnaXN0ZXIoJHQuc2luZ2xldG9uKER0LCB0KSk7IGVsc2Ugci5yZWdpc3Rlcih0KTtcbiAgICAgICAgICAgICAgICByZXR1cm4gcjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxufSk7XG5cbmNvbnN0IEp0ID0gRy5jcmVhdGVJbnRlcmZhY2UoKHQgPT4gdC5zaW5nbGV0b24oTW9kdWxlTG9hZGVyKSkpO1xuXG5mdW5jdGlvbiBYdCh0KSB7XG4gICAgcmV0dXJuIHQ7XG59XG5cbmNsYXNzIE1vZHVsZVRyYW5zZm9ybWVyIHtcbiAgICBjb25zdHJ1Y3Rvcih0KSB7XG4gICAgICAgIHRoaXMuJHRyYW5zZm9ybSA9IHQ7XG4gICAgICAgIHRoaXMuQSA9IG5ldyBNYXA7XG4gICAgICAgIHRoaXMuaiA9IG5ldyBNYXA7XG4gICAgfVxuICAgIHRyYW5zZm9ybSh0KSB7XG4gICAgICAgIGlmICh0IGluc3RhbmNlb2YgUHJvbWlzZSkgcmV0dXJuIHRoaXMuTyh0KTsgZWxzZSBpZiAoXCJvYmplY3RcIiA9PT0gdHlwZW9mIHQgJiYgbnVsbCAhPT0gdCkgcmV0dXJuIHRoaXMuSSh0KTsgZWxzZSB0aHJvdyBuZXcgRXJyb3IoYEludmFsaWQgaW5wdXQ6ICR7U3RyaW5nKHQpfS4gRXhwZWN0ZWQgUHJvbWlzZSBvciBPYmplY3QuYCk7XG4gICAgfVxuICAgIE8odCkge1xuICAgICAgICBpZiAodGhpcy5BLmhhcyh0KSkgcmV0dXJuIHRoaXMuQS5nZXQodCk7XG4gICAgICAgIGNvbnN0IGUgPSB0LnRoZW4oKHQgPT4gdGhpcy5JKHQpKSk7XG4gICAgICAgIHRoaXMuQS5zZXQodCwgZSk7XG4gICAgICAgIHZvaWQgZS50aGVuKChlID0+IHtcbiAgICAgICAgICAgIHRoaXMuQS5zZXQodCwgZSk7XG4gICAgICAgIH0pKTtcbiAgICAgICAgcmV0dXJuIGU7XG4gICAgfVxuICAgIEkodCkge1xuICAgICAgICBpZiAodGhpcy5qLmhhcyh0KSkgcmV0dXJuIHRoaXMuai5nZXQodCk7XG4gICAgICAgIGNvbnN0IGUgPSB0aGlzLiR0cmFuc2Zvcm0odGhpcy5NKHQpKTtcbiAgICAgICAgdGhpcy5qLnNldCh0LCBlKTtcbiAgICAgICAgaWYgKGUgaW5zdGFuY2VvZiBQcm9taXNlKSB2b2lkIGUudGhlbigoZSA9PiB7XG4gICAgICAgICAgICB0aGlzLmouc2V0KHQsIGUpO1xuICAgICAgICB9KSk7XG4gICAgICAgIHJldHVybiBlO1xuICAgIH1cbiAgICBNKHQpIHtcbiAgICAgICAgbGV0IGU7XG4gICAgICAgIGxldCBuO1xuICAgICAgICBsZXQgcjtcbiAgICAgICAgbGV0IGk7XG4gICAgICAgIGNvbnN0IHMgPSBbXTtcbiAgICAgICAgZm9yIChjb25zdCBvIGluIHQpIHtcbiAgICAgICAgICAgIHN3aXRjaCAodHlwZW9mIChlID0gdFtvXSkpIHtcbiAgICAgICAgICAgICAgY2FzZSBcIm9iamVjdFwiOlxuICAgICAgICAgICAgICAgIGlmIChudWxsID09PSBlKSBjb250aW51ZTtcbiAgICAgICAgICAgICAgICBuID0gSShlLnJlZ2lzdGVyKTtcbiAgICAgICAgICAgICAgICByID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgaSA9IE90O1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICAgIGNhc2UgXCJmdW5jdGlvblwiOlxuICAgICAgICAgICAgICAgIG4gPSBJKGUucmVnaXN0ZXIpO1xuICAgICAgICAgICAgICAgIHIgPSB2b2lkIDAgIT09IGUucHJvdG90eXBlO1xuICAgICAgICAgICAgICAgIGkgPSBTLnJlc291cmNlLmdldEFsbChlKTtcbiAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcy5wdXNoKG5ldyBNb2R1bGVJdGVtKG8sIGUsIG4sIHIsIGkpKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbmV3IEFuYWx5emVkTW9kdWxlKHQsIHMpO1xuICAgIH1cbn1cblxuY2xhc3MgTW9kdWxlTG9hZGVyIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgdGhpcy50cmFuc2Zvcm1lcnMgPSBuZXcgTWFwO1xuICAgIH1cbiAgICBsb2FkKHQsIGUgPSBYdCkge1xuICAgICAgICBjb25zdCBuID0gdGhpcy50cmFuc2Zvcm1lcnM7XG4gICAgICAgIGxldCByID0gbi5nZXQoZSk7XG4gICAgICAgIGlmICh2b2lkIDAgPT09IHIpIG4uc2V0KGUsIHIgPSBuZXcgTW9kdWxlVHJhbnNmb3JtZXIoZSkpO1xuICAgICAgICByZXR1cm4gci50cmFuc2Zvcm0odCk7XG4gICAgfVxuICAgIGRpc3Bvc2UoKSB7XG4gICAgICAgIHRoaXMudHJhbnNmb3JtZXJzLmNsZWFyKCk7XG4gICAgfVxufVxuXG5jbGFzcyBBbmFseXplZE1vZHVsZSB7XG4gICAgY29uc3RydWN0b3IodCwgZSkge1xuICAgICAgICB0aGlzLnJhdyA9IHQ7XG4gICAgICAgIHRoaXMuaXRlbXMgPSBlO1xuICAgIH1cbn1cblxuY2xhc3MgTW9kdWxlSXRlbSB7XG4gICAgY29uc3RydWN0b3IodCwgZSwgbiwgciwgaSkge1xuICAgICAgICB0aGlzLmtleSA9IHQ7XG4gICAgICAgIHRoaXMudmFsdWUgPSBlO1xuICAgICAgICB0aGlzLmlzUmVnaXN0cnkgPSBuO1xuICAgICAgICB0aGlzLmlzQ29uc3RydWN0YWJsZSA9IHI7XG4gICAgICAgIHRoaXMuZGVmaW5pdGlvbnMgPSBpO1xuICAgIH1cbn1cblxuY2xhc3MgSGFuZGxlciB7XG4gICAgY29uc3RydWN0b3IodCwgZSkge1xuICAgICAgICB0aGlzLm1lc3NhZ2VUeXBlID0gdDtcbiAgICAgICAgdGhpcy5jYWxsYmFjayA9IGU7XG4gICAgfVxuICAgIGhhbmRsZSh0KSB7XG4gICAgICAgIGlmICh0IGluc3RhbmNlb2YgdGhpcy5tZXNzYWdlVHlwZSkgdGhpcy5jYWxsYmFjay5jYWxsKG51bGwsIHQpO1xuICAgIH1cbn1cblxuY29uc3QgWXQgPSBHLmNyZWF0ZUludGVyZmFjZShcIklFdmVudEFnZ3JlZ2F0b3JcIiwgKHQgPT4gdC5zaW5nbGV0b24oRXZlbnRBZ2dyZWdhdG9yKSkpO1xuXG5jbGFzcyBFdmVudEFnZ3JlZ2F0b3Ige1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICB0aGlzLmV2ZW50TG9va3VwID0ge307XG4gICAgICAgIHRoaXMubWVzc2FnZUhhbmRsZXJzID0gW107XG4gICAgfVxuICAgIHB1Ymxpc2godCwgZSkge1xuICAgICAgICBpZiAoIXQpIHRocm93IG5ldyBFcnJvcihgSW52YWxpZCBjaGFubmVsIG5hbWUgb3IgaW5zdGFuY2U6ICR7dH0uYCk7XG4gICAgICAgIGlmIChNKHQpKSB7XG4gICAgICAgICAgICBsZXQgbiA9IHRoaXMuZXZlbnRMb29rdXBbdF07XG4gICAgICAgICAgICBpZiAodm9pZCAwICE9PSBuKSB7XG4gICAgICAgICAgICAgICAgbiA9IG4uc2xpY2UoKTtcbiAgICAgICAgICAgICAgICBsZXQgciA9IG4ubGVuZ3RoO1xuICAgICAgICAgICAgICAgIHdoaWxlIChyLS0gPiAwKSBuW3JdKGUsIHQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY29uc3QgZSA9IHRoaXMubWVzc2FnZUhhbmRsZXJzLnNsaWNlKCk7XG4gICAgICAgICAgICBsZXQgbiA9IGUubGVuZ3RoO1xuICAgICAgICAgICAgd2hpbGUgKG4tLSA+IDApIGVbbl0uaGFuZGxlKHQpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHN1YnNjcmliZSh0LCBlKSB7XG4gICAgICAgIGlmICghdCkgdGhyb3cgbmV3IEVycm9yKGBJbnZhbGlkIGNoYW5uZWwgbmFtZSBvciB0eXBlOiAke3R9LmApO1xuICAgICAgICBsZXQgbjtcbiAgICAgICAgbGV0IHI7XG4gICAgICAgIGlmIChNKHQpKSB7XG4gICAgICAgICAgICBpZiAodm9pZCAwID09PSB0aGlzLmV2ZW50TG9va3VwW3RdKSB0aGlzLmV2ZW50TG9va3VwW3RdID0gW107XG4gICAgICAgICAgICBuID0gZTtcbiAgICAgICAgICAgIHIgPSB0aGlzLmV2ZW50TG9va3VwW3RdO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgbiA9IG5ldyBIYW5kbGVyKHQsIGUpO1xuICAgICAgICAgICAgciA9IHRoaXMubWVzc2FnZUhhbmRsZXJzO1xuICAgICAgICB9XG4gICAgICAgIHIucHVzaChuKTtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGRpc3Bvc2UoKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgdCA9IHIuaW5kZXhPZihuKTtcbiAgICAgICAgICAgICAgICBpZiAoLTEgIT09IHQpIHIuc3BsaWNlKHQsIDEpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgIH1cbiAgICBzdWJzY3JpYmVPbmNlKHQsIGUpIHtcbiAgICAgICAgY29uc3QgbiA9IHRoaXMuc3Vic2NyaWJlKHQsIChmdW5jdGlvbih0LCByKSB7XG4gICAgICAgICAgICBuLmRpc3Bvc2UoKTtcbiAgICAgICAgICAgIGUodCwgcik7XG4gICAgICAgIH0pKTtcbiAgICAgICAgcmV0dXJuIG47XG4gICAgfVxufVxuXG5leHBvcnQgeyBBbmFseXplZE1vZHVsZSwgTHQgYXMgQ29sb3JPcHRpb25zLCBIdCBhcyBDb25zb2xlU2luaywgQ29udGFpbmVyQ29uZmlndXJhdGlvbiwgRyBhcyBESSwgRGVmYXVsdExvZ0V2ZW50LCBfdCBhcyBEZWZhdWx0TG9nRXZlbnRGYWN0b3J5LCBWdCBhcyBEZWZhdWx0TG9nZ2VyLCB6IGFzIERlZmF1bHRSZXNvbHZlciwgRXZlbnRBZ2dyZWdhdG9yLCBIIGFzIElDb250YWluZXIsIFl0IGFzIElFdmVudEFnZ3JlZ2F0b3IsIFB0IGFzIElMb2dDb25maWcsIFN0IGFzIElMb2dFdmVudEZhY3RvcnksIE50IGFzIElMb2dnZXIsIEp0IGFzIElNb2R1bGVMb2FkZXIsIE10IGFzIElQbGF0Zm9ybSwgViBhcyBJU2VydmljZUxvY2F0b3IsIER0IGFzIElTaW5rLCBJbnN0YW5jZVByb3ZpZGVyLCBMb2dDb25maWcsIFV0IGFzIExvZ0xldmVsLCBxdCBhcyBMb2dnZXJDb25maWd1cmF0aW9uLCBNb2R1bGVJdGVtLCBTIGFzIFByb3RvY29sLCAkdCBhcyBSZWdpc3RyYXRpb24sIG50IGFzIGFsbCwgbSBhcyBib3VuZCwgbCBhcyBjYW1lbENhc2UsIHcgYXMgY29tcGFyZU51bWJlciwgT3QgYXMgZW1wdHlBcnJheSwga3QgYXMgZW1wdHlPYmplY3QsIG90IGFzIGZhY3RvcnksIFIgYXMgZmlyc3REZWZpbmVkLCB4dCBhcyBmb3JtYXQsIFcgYXMgZnJvbUFubm90YXRpb25PckRlZmluaXRpb25PclR5cGVPckRlZmF1bHQsIEIgYXMgZnJvbUFubm90YXRpb25PclR5cGVPckRlZmF1bHQsIFEgYXMgZnJvbURlZmluaXRpb25PckRlZmF1bHQsIGIgYXMgZ2V0UHJvdG90eXBlQ2hhaW4sIHN0IGFzIGlnbm9yZSwgSiBhcyBpbmplY3QsIGkgYXMgaXNBcnJheUluZGV4LCAkIGFzIGlzTmF0aXZlRnVuY3Rpb24sIHMgYXMgaXNOdW1iZXJPckJpZ0ludCwgbyBhcyBpc1N0cmluZ09yRGF0ZSwgZiBhcyBrZWJhYkNhc2UsIHJ0IGFzIGxhenksIHAgYXMgbWVyZ2VBcnJheXMsIGcgYXMgbWVyZ2VEaXN0aW5jdCwgeSBhcyBtZXJnZU9iamVjdHMsIHV0IGFzIG5ld0luc3RhbmNlRm9yU2NvcGUsIGx0IGFzIG5ld0luc3RhbmNlT2YsIGQgYXMgbmV4dElkLCBJdCBhcyBub29wLCBFIGFzIG9uUmVzb2x2ZSwgaXQgYXMgb3B0aW9uYWwsIGMgYXMgcGFzY2FsQ2FzZSwgdiBhcyByZXNldElkLCBBIGFzIHJlc29sdmVBbGwsIHR0IGFzIHNpbmdsZXRvbiwgUXQgYXMgc2luaywgYSBhcyB0b0FycmF5LCBZIGFzIHRyYW5zaWVudCB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXguanMubWFwXG4iLCJmdW5jdGlvbiB0KHQpIHtcbiAgICByZXR1cm4gXCJvYmplY3RcIiA9PT0gdHlwZW9mIHQgJiYgbnVsbCAhPT0gdCB8fCBcImZ1bmN0aW9uXCIgPT09IHR5cGVvZiB0O1xufVxuXG5mdW5jdGlvbiBlKHQpIHtcbiAgICByZXR1cm4gbnVsbCA9PT0gdCB8fCB2b2lkIDAgPT09IHQ7XG59XG5cbmNvbnN0IG4gPSBuZXcgV2Vha01hcDtcblxuZnVuY3Rpb24gcih0LCBlLCBuLCByLCBhKSB7XG4gICAgcmV0dXJuIG5ldyBUeXBlRXJyb3IoYCR7dH0oJHtlLm1hcChTdHJpbmcpLmpvaW4oXCIsXCIpfSkgLSBFeHBlY3RlZCAnJHtufScgdG8gYmUgb2YgdHlwZSAke2F9LCBidXQgZ290OiAke09iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChyKX0gKCR7U3RyaW5nKHIpfSlgKTtcbn1cblxuZnVuY3Rpb24gYSh0KSB7XG4gICAgc3dpdGNoICh0eXBlb2YgdCkge1xuICAgICAgY2FzZSBcInVuZGVmaW5lZFwiOlxuICAgICAgY2FzZSBcInN0cmluZ1wiOlxuICAgICAgY2FzZSBcInN5bWJvbFwiOlxuICAgICAgICByZXR1cm4gdDtcblxuICAgICAgZGVmYXVsdDpcbiAgICAgICAgcmV0dXJuIGAke3R9YDtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIG8odCkge1xuICAgIHN3aXRjaCAodHlwZW9mIHQpIHtcbiAgICAgIGNhc2UgXCJzdHJpbmdcIjpcbiAgICAgIGNhc2UgXCJzeW1ib2xcIjpcbiAgICAgICAgcmV0dXJuIHQ7XG5cbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHJldHVybiBgJHt0fWA7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBpKHQpIHtcbiAgICBzd2l0Y2ggKHR5cGVvZiB0KSB7XG4gICAgICBjYXNlIFwidW5kZWZpbmVkXCI6XG4gICAgICBjYXNlIFwic3RyaW5nXCI6XG4gICAgICBjYXNlIFwic3ltYm9sXCI6XG4gICAgICAgIHJldHVybiB0O1xuXG4gICAgICBkZWZhdWx0OlxuICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKGBJbnZhbGlkIG1ldGFkYXRhIHByb3BlcnR5S2V5OiAke3R9LmApO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gdSh0LCBlLCByKSB7XG4gICAgbGV0IGEgPSBuLmdldCh0KTtcbiAgICBpZiAodm9pZCAwID09PSBhKSB7XG4gICAgICAgIGlmICghcikgcmV0dXJuO1xuICAgICAgICBhID0gbmV3IE1hcDtcbiAgICAgICAgbi5zZXQodCwgYSk7XG4gICAgfVxuICAgIGxldCBvID0gYS5nZXQoZSk7XG4gICAgaWYgKHZvaWQgMCA9PT0gbykge1xuICAgICAgICBpZiAoIXIpIHJldHVybjtcbiAgICAgICAgbyA9IG5ldyBNYXA7XG4gICAgICAgIGEuc2V0KGUsIG8pO1xuICAgIH1cbiAgICByZXR1cm4gbztcbn1cblxuZnVuY3Rpb24gYyh0LCBlLCBuKSB7XG4gICAgY29uc3QgciA9IHUoZSwgbiwgZmFsc2UpO1xuICAgIGlmICh2b2lkIDAgPT09IHIpIHJldHVybiBmYWxzZTtcbiAgICByZXR1cm4gci5oYXModCk7XG59XG5cbmZ1bmN0aW9uIGYodCwgZSwgbikge1xuICAgIGlmIChjKHQsIGUsIG4pKSByZXR1cm4gdHJ1ZTtcbiAgICBjb25zdCByID0gT2JqZWN0LmdldFByb3RvdHlwZU9mKGUpO1xuICAgIGlmIChudWxsICE9PSByKSByZXR1cm4gZih0LCByLCBuKTtcbiAgICByZXR1cm4gZmFsc2U7XG59XG5cbmZ1bmN0aW9uIHModCwgZSwgbikge1xuICAgIGNvbnN0IHIgPSB1KGUsIG4sIGZhbHNlKTtcbiAgICBpZiAodm9pZCAwID09PSByKSByZXR1cm47XG4gICAgcmV0dXJuIHIuZ2V0KHQpO1xufVxuXG5mdW5jdGlvbiBsKHQsIGUsIG4pIHtcbiAgICBpZiAoYyh0LCBlLCBuKSkgcmV0dXJuIHModCwgZSwgbik7XG4gICAgY29uc3QgciA9IE9iamVjdC5nZXRQcm90b3R5cGVPZihlKTtcbiAgICBpZiAobnVsbCAhPT0gcikgcmV0dXJuIGwodCwgciwgbik7XG4gICAgcmV0dXJuO1xufVxuXG5mdW5jdGlvbiBkKHQsIGUsIG4sIHIpIHtcbiAgICBjb25zdCBhID0gdShuLCByLCB0cnVlKTtcbiAgICBhLnNldCh0LCBlKTtcbn1cblxuZnVuY3Rpb24gdyh0LCBlKSB7XG4gICAgY29uc3QgbiA9IFtdO1xuICAgIGNvbnN0IHIgPSB1KHQsIGUsIGZhbHNlKTtcbiAgICBpZiAodm9pZCAwID09PSByKSByZXR1cm4gbjtcbiAgICBjb25zdCBhID0gci5rZXlzKCk7XG4gICAgbGV0IG8gPSAwO1xuICAgIGZvciAoY29uc3QgdCBvZiBhKSB7XG4gICAgICAgIG5bb10gPSB0O1xuICAgICAgICArK287XG4gICAgfVxuICAgIHJldHVybiBuO1xufVxuXG5mdW5jdGlvbiB5KHQsIGUpIHtcbiAgICBjb25zdCBuID0gdyh0LCBlKTtcbiAgICBjb25zdCByID0gT2JqZWN0LmdldFByb3RvdHlwZU9mKHQpO1xuICAgIGlmIChudWxsID09PSByKSByZXR1cm4gbjtcbiAgICBjb25zdCBhID0geShyLCBlKTtcbiAgICBjb25zdCBvID0gbi5sZW5ndGg7XG4gICAgaWYgKDAgPT09IG8pIHJldHVybiBhO1xuICAgIGNvbnN0IGkgPSBhLmxlbmd0aDtcbiAgICBpZiAoMCA9PT0gaSkgcmV0dXJuIG47XG4gICAgY29uc3QgdSA9IG5ldyBTZXQ7XG4gICAgY29uc3QgYyA9IFtdO1xuICAgIGxldCBmID0gMDtcbiAgICBsZXQgcztcbiAgICBmb3IgKGxldCB0ID0gMDsgdCA8IG87ICsrdCkge1xuICAgICAgICBzID0gblt0XTtcbiAgICAgICAgaWYgKCF1LmhhcyhzKSkge1xuICAgICAgICAgICAgdS5hZGQocyk7XG4gICAgICAgICAgICBjW2ZdID0gcztcbiAgICAgICAgICAgICsrZjtcbiAgICAgICAgfVxuICAgIH1cbiAgICBmb3IgKGxldCB0ID0gMDsgdCA8IGk7ICsrdCkge1xuICAgICAgICBzID0gYVt0XTtcbiAgICAgICAgaWYgKCF1LmhhcyhzKSkge1xuICAgICAgICAgICAgdS5hZGQocyk7XG4gICAgICAgICAgICBjW2ZdID0gcztcbiAgICAgICAgICAgICsrZjtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gYztcbn1cblxuZnVuY3Rpb24gaCh0LCBlLCBuKSB7XG4gICAgY29uc3QgciA9IHUodCwgbiwgZmFsc2UpO1xuICAgIGlmICh2b2lkIDAgPT09IHIpIHJldHVybiBmYWxzZTtcbiAgICByZXR1cm4gci5kZWxldGUoZSk7XG59XG5cbmZ1bmN0aW9uIGcoZSwgbikge1xuICAgIGZ1bmN0aW9uIGEoYSwgbykge1xuICAgICAgICBpZiAoIXQoYSkpIHRocm93IHIoXCJAbWV0YWRhdGFcIiwgWyBlLCBuLCBhLCBvIF0sIFwidGFyZ2V0XCIsIGEsIFwiT2JqZWN0IG9yIEZ1bmN0aW9uXCIpO1xuICAgICAgICBkKGUsIG4sIGEsIGkobykpO1xuICAgIH1cbiAgICByZXR1cm4gYTtcbn1cblxuZnVuY3Rpb24gcChuLCBhLCBpLCB1KSB7XG4gICAgaWYgKHZvaWQgMCAhPT0gaSkge1xuICAgICAgICBpZiAoIUFycmF5LmlzQXJyYXkobikpIHRocm93IHIoXCJNZXRhZGF0YS5kZWNvcmF0ZVwiLCBbIG4sIGEsIGksIHUgXSwgXCJkZWNvcmF0b3JzXCIsIG4sIFwiQXJyYXlcIik7XG4gICAgICAgIGlmICghdChhKSkgdGhyb3cgcihcIk1ldGFkYXRhLmRlY29yYXRlXCIsIFsgbiwgYSwgaSwgdSBdLCBcInRhcmdldFwiLCBhLCBcIk9iamVjdCBvciBGdW5jdGlvblwiKTtcbiAgICAgICAgaWYgKCF0KHUpICYmICFlKHUpKSB0aHJvdyByKFwiTWV0YWRhdGEuZGVjb3JhdGVcIiwgWyBuLCBhLCBpLCB1IF0sIFwiYXR0cmlidXRlc1wiLCB1LCBcIk9iamVjdCwgRnVuY3Rpb24sIG51bGwsIG9yIHVuZGVmaW5lZFwiKTtcbiAgICAgICAgaWYgKG51bGwgPT09IHUpIHUgPSB2b2lkIDA7XG4gICAgICAgIGkgPSBvKGkpO1xuICAgICAgICByZXR1cm4gYihuLCBhLCBpLCB1KTtcbiAgICB9IGVsc2Uge1xuICAgICAgICBpZiAoIUFycmF5LmlzQXJyYXkobikpIHRocm93IHIoXCJNZXRhZGF0YS5kZWNvcmF0ZVwiLCBbIG4sIGEsIGksIHUgXSwgXCJkZWNvcmF0b3JzXCIsIG4sIFwiQXJyYXlcIik7XG4gICAgICAgIGlmIChcImZ1bmN0aW9uXCIgIT09IHR5cGVvZiBhKSB0aHJvdyByKFwiTWV0YWRhdGEuZGVjb3JhdGVcIiwgWyBuLCBhLCBpLCB1IF0sIFwidGFyZ2V0XCIsIGEsIFwiRnVuY3Rpb25cIik7XG4gICAgICAgIHJldHVybiBNKG4sIGEpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gTSh0LCBuKSB7XG4gICAgZm9yIChsZXQgYSA9IHQubGVuZ3RoIC0gMTsgYSA+PSAwOyAtLWEpIHtcbiAgICAgICAgY29uc3QgbyA9IHRbYV07XG4gICAgICAgIGNvbnN0IGkgPSBvKG4pO1xuICAgICAgICBpZiAoIWUoaSkpIHtcbiAgICAgICAgICAgIGlmIChcImZ1bmN0aW9uXCIgIT09IHR5cGVvZiBpKSB0aHJvdyByKFwiRGVjb3JhdGVDb25zdHJ1Y3RvclwiLCBbIHQsIG4gXSwgXCJkZWNvcmF0ZWRcIiwgaSwgXCJGdW5jdGlvbiwgbnVsbCwgb3IgdW5kZWZpbmVkXCIpO1xuICAgICAgICAgICAgbiA9IGk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG47XG59XG5cbmZ1bmN0aW9uIGIobiwgYSwgbywgaSkge1xuICAgIGZvciAobGV0IHUgPSBuLmxlbmd0aCAtIDE7IHUgPj0gMDsgLS11KSB7XG4gICAgICAgIGNvbnN0IGMgPSBuW3VdO1xuICAgICAgICBjb25zdCBmID0gYyhhLCBvLCBpKTtcbiAgICAgICAgaWYgKCFlKGYpKSB7XG4gICAgICAgICAgICBpZiAoIXQoZikpIHRocm93IHIoXCJEZWNvcmF0ZVByb3BlcnR5XCIsIFsgbiwgYSwgbywgaSBdLCBcImRlY29yYXRlZFwiLCBmLCBcIk9iamVjdCwgRnVuY3Rpb24sIG51bGwsIG9yIHVuZGVmaW5lZFwiKTtcbiAgICAgICAgICAgIGkgPSBmO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBpO1xufVxuXG5mdW5jdGlvbiBPKGUsIG4sIG8sIGkpIHtcbiAgICBpZiAoIXQobykpIHRocm93IHIoXCJNZXRhZGF0YS5kZWZpbmVcIiwgWyBlLCBuLCBvLCBpIF0sIFwidGFyZ2V0XCIsIG8sIFwiT2JqZWN0IG9yIEZ1bmN0aW9uXCIpO1xuICAgIHJldHVybiBkKGUsIG4sIG8sIGEoaSkpO1xufVxuXG5mdW5jdGlvbiBtKGUsIG4sIG8pIHtcbiAgICBpZiAoIXQobikpIHRocm93IHIoXCJNZXRhZGF0YS5oYXNcIiwgWyBlLCBuLCBvIF0sIFwidGFyZ2V0XCIsIG4sIFwiT2JqZWN0IG9yIEZ1bmN0aW9uXCIpO1xuICAgIHJldHVybiBmKGUsIG4sIGEobykpO1xufVxuXG5mdW5jdGlvbiBqKGUsIG4sIG8pIHtcbiAgICBpZiAoIXQobikpIHRocm93IHIoXCJNZXRhZGF0YS5oYXNPd25cIiwgWyBlLCBuLCBvIF0sIFwidGFyZ2V0XCIsIG4sIFwiT2JqZWN0IG9yIEZ1bmN0aW9uXCIpO1xuICAgIHJldHVybiBjKGUsIG4sIGEobykpO1xufVxuXG5mdW5jdGlvbiB2KGUsIG4sIG8pIHtcbiAgICBpZiAoIXQobikpIHRocm93IHIoXCJNZXRhZGF0YS5nZXRcIiwgWyBlLCBuLCBvIF0sIFwidGFyZ2V0XCIsIG4sIFwiT2JqZWN0IG9yIEZ1bmN0aW9uXCIpO1xuICAgIHJldHVybiBsKGUsIG4sIGEobykpO1xufVxuXG5mdW5jdGlvbiAkKGUsIG4sIG8pIHtcbiAgICBpZiAoIXQobikpIHRocm93IHIoXCJNZXRhZGF0YS5nZXRPd25cIiwgWyBlLCBuLCBvIF0sIFwidGFyZ2V0XCIsIG4sIFwiT2JqZWN0IG9yIEZ1bmN0aW9uXCIpO1xuICAgIHJldHVybiBzKGUsIG4sIGEobykpO1xufVxuXG5mdW5jdGlvbiBGKGUsIG4pIHtcbiAgICBpZiAoIXQoZSkpIHRocm93IHIoXCJNZXRhZGF0YS5nZXRLZXlzXCIsIFsgZSwgbiBdLCBcInRhcmdldFwiLCBlLCBcIk9iamVjdCBvciBGdW5jdGlvblwiKTtcbiAgICByZXR1cm4geShlLCBhKG4pKTtcbn1cblxuZnVuY3Rpb24gSyhlLCBuKSB7XG4gICAgaWYgKCF0KGUpKSB0aHJvdyByKFwiTWV0YWRhdGEuZ2V0T3duS2V5c1wiLCBbIGUsIG4gXSwgXCJ0YXJnZXRcIiwgZSwgXCJPYmplY3Qgb3IgRnVuY3Rpb25cIik7XG4gICAgcmV0dXJuIHcoZSwgYShuKSk7XG59XG5cbmZ1bmN0aW9uIEUoZSwgbiwgbykge1xuICAgIGlmICghdChuKSkgdGhyb3cgcihcIk1ldGFkYXRhLmRlbGV0ZVwiLCBbIGUsIG4sIG8gXSwgXCJ0YXJnZXRcIiwgbiwgXCJPYmplY3Qgb3IgRnVuY3Rpb25cIik7XG4gICAgcmV0dXJuIGgobiwgZSwgYShvKSk7XG59XG5cbmNvbnN0IEEgPSB7XG4gICAgZGVmaW5lOiBPLFxuICAgIGhhczogbSxcbiAgICBoYXNPd246IGosXG4gICAgZ2V0OiB2LFxuICAgIGdldE93bjogJCxcbiAgICBnZXRLZXlzOiBGLFxuICAgIGdldE93bktleXM6IEssXG4gICAgZGVsZXRlOiBFXG59O1xuXG5mdW5jdGlvbiBrKHQsIGUsIG4sIHIsIGEpIHtcbiAgICBpZiAoIVJlZmxlY3QuZGVmaW5lUHJvcGVydHkodCwgZSwge1xuICAgICAgICB3cml0YWJsZTogcixcbiAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogYSxcbiAgICAgICAgdmFsdWU6IG5cbiAgICB9KSkgdGhyb3cgbmV3IEVycm9yKGBVbmFibGUgdG8gYXBwbHkgbWV0YWRhdGEgcG9seWZpbGw6IGNvdWxkIG5vdCBhZGQgcHJvcGVydHkgJyR7ZX0nIHRvIHRoZSBnbG9iYWwgUmVmbGVjdCBvYmplY3RgKTtcbn1cblxuY29uc3QgUiA9IFwiW1skYXVdXVwiO1xuXG5mdW5jdGlvbiBDKHQpIHtcbiAgICByZXR1cm4gUiBpbiB0O1xufVxuXG5mdW5jdGlvbiBJKHQsIGUsIHIpIHtcbiAgICBrKHQsIFIsIG4sIGUsIHIpO1xuICAgIGsodCwgXCJtZXRhZGF0YVwiLCBnLCBlLCByKTtcbiAgICBrKHQsIFwiZGVjb3JhdGVcIiwgcCwgZSwgcik7XG4gICAgayh0LCBcImRlZmluZU1ldGFkYXRhXCIsIE8sIGUsIHIpO1xuICAgIGsodCwgXCJoYXNNZXRhZGF0YVwiLCBtLCBlLCByKTtcbiAgICBrKHQsIFwiaGFzT3duTWV0YWRhdGFcIiwgaiwgZSwgcik7XG4gICAgayh0LCBcImdldE1ldGFkYXRhXCIsIHYsIGUsIHIpO1xuICAgIGsodCwgXCJnZXRPd25NZXRhZGF0YVwiLCAkLCBlLCByKTtcbiAgICBrKHQsIFwiZ2V0TWV0YWRhdGFLZXlzXCIsIEYsIGUsIHIpO1xuICAgIGsodCwgXCJnZXRPd25NZXRhZGF0YUtleXNcIiwgSywgZSwgcik7XG4gICAgayh0LCBcImRlbGV0ZU1ldGFkYXRhXCIsIEUsIGUsIHIpO1xufVxuXG5mdW5jdGlvbiBTKHQsIGUgPSB0cnVlLCByID0gZmFsc2UsIGEgPSB0cnVlLCBvID0gdHJ1ZSkge1xuICAgIGlmIChDKHQpKSB7XG4gICAgICAgIGlmICh0W1JdID09PSBuKSByZXR1cm47XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgQ29uZmxpY3RpbmcgQGF1cmVsaWEvbWV0YWRhdGEgbW9kdWxlIGltcG9ydCBkZXRlY3RlZC4gUGxlYXNlIG1ha2Ugc3VyZSB5b3UgaGF2ZSB0aGUgc2FtZSB2ZXJzaW9uIG9mIGFsbCBBdXJlbGlhIHBhY2thZ2VzIGluIHlvdXIgZGVwZW5kZW5jeSB0cmVlLmApO1xuICAgIH1cbiAgICBjb25zdCBpID0gWyBcIm1ldGFkYXRhXCIsIFwiZGVjb3JhdGVcIiwgXCJkZWZpbmVNZXRhZGF0YVwiLCBcImhhc01ldGFkYXRhXCIsIFwiaGFzT3duTWV0YWRhdGFcIiwgXCJnZXRNZXRhZGF0YVwiLCBcImdldE93bk1ldGFkYXRhXCIsIFwiZ2V0TWV0YWRhdGFLZXlzXCIsIFwiZ2V0T3duTWV0YWRhdGFLZXlzXCIsIFwiZGVsZXRlTWV0YWRhdGFcIiBdLmZpbHRlcigoZnVuY3Rpb24odCkge1xuICAgICAgICByZXR1cm4gdCBpbiBSZWZsZWN0O1xuICAgIH0pKTtcbiAgICBpZiAoaS5sZW5ndGggPiAwKSB7XG4gICAgICAgIGlmIChlKSB7XG4gICAgICAgICAgICBjb25zdCB0ID0gaS5tYXAoKGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBlID0gYCR7UmVmbGVjdFt0XS50b1N0cmluZygpLnNsaWNlKDAsIDEwMCl9Li4uYDtcbiAgICAgICAgICAgICAgICByZXR1cm4gYCR7dH06XFxuJHtlfWA7XG4gICAgICAgICAgICB9KSkuam9pbihcIlxcblxcblwiKTtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgQ29uZmxpY3RpbmcgcmVmbGVjdC5tZXRhZGF0YSBwb2x5ZmlsbCBmb3VuZC4gSWYgeW91IGhhdmUgJ3JlZmxlY3QtbWV0YWRhdGEnIG9yIGFueSBvdGhlciByZWZsZWN0IHBvbHlmaWxsIGltcG9ydGVkLCBwbGVhc2UgcmVtb3ZlIGl0LCBpZiBub3QgKG9yIGlmIHlvdSBtdXN0IHVzZSBhIHNwZWNpZmljIHBvbHlmaWxsKSBwbGVhc2UgZmlsZSBhbiBpc3N1ZSBhdCBodHRwczovL2dpdGh1Yi5jb20vYXVyZWxpYS9hdXJlbGlhL2lzc3VlcyBzbyB0aGF0IHdlIGNhbiBsb29rIGludG8gY29tcGF0aWJpbGl0eSBvcHRpb25zIGZvciB0aGlzIHNjZW5hcmlvLiBJbXBsZW1lbnRhdGlvbiBzdW1tYXJ5OlxcblxcbiR7dH1gKTtcbiAgICAgICAgfSBlbHNlIGlmIChyKSBJKHQsIGEsIG8pO1xuICAgIH0gZWxzZSBJKHQsIGEsIG8pO1xufVxuXG5leHBvcnQgeyBBIGFzIE1ldGFkYXRhLCBTIGFzIGFwcGx5TWV0YWRhdGFQb2x5ZmlsbCwgZSBhcyBpc051bGxPclVuZGVmaW5lZCwgdCBhcyBpc09iamVjdCwgZyBhcyBtZXRhZGF0YSB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXguanMubWFwXG4iLCJpbXBvcnQgeyBQbGF0Zm9ybSBhcyB0LCBUYXNrUXVldWUgYXMgaSB9IGZyb20gXCJAYXVyZWxpYS9wbGF0Zm9ybVwiO1xuXG5jb25zdCBzID0gbmV3IE1hcDtcblxuZnVuY3Rpb24gZSh0KSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIGkoKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgVGhlIFBMQVRGT1JNIGRpZCBub3QgcmVjZWl2ZSBhIHZhbGlkIHJlZmVyZW5jZSB0byB0aGUgZ2xvYmFsIGZ1bmN0aW9uICcke3R9Jy5gKTtcbiAgICB9O1xufVxuXG5jbGFzcyBCcm93c2VyUGxhdGZvcm0gZXh0ZW5kcyB0IHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBzID0ge30pIHtcbiAgICAgICAgc3VwZXIodCwgcyk7XG4gICAgICAgIHRoaXMudCA9IGZhbHNlO1xuICAgICAgICB0aGlzLmkgPSAtMTtcbiAgICAgICAgdGhpcy5oID0gZmFsc2U7XG4gICAgICAgIHRoaXMudSA9IC0xO1xuICAgICAgICAoXCJOb2RlLEVsZW1lbnQsSFRNTEVsZW1lbnQsQ3VzdG9tRXZlbnQsQ1NTU3R5bGVTaGVldCxTaGFkb3dSb290LE11dGF0aW9uT2JzZXJ2ZXIsXCIgKyBcIndpbmRvdyxkb2N1bWVudCxsb2NhdGlvbixoaXN0b3J5LG5hdmlnYXRvcixjdXN0b21FbGVtZW50c1wiKS5zcGxpdChcIixcIikuZm9yRWFjaCgoaSA9PiB7XG4gICAgICAgICAgICB0aGlzW2ldID0gaSBpbiBzID8gc1tpXSA6IHRbaV07XG4gICAgICAgIH0pKTtcbiAgICAgICAgXCJmZXRjaCxyZXF1ZXN0QW5pbWF0aW9uRnJhbWUsY2FuY2VsQW5pbWF0aW9uRnJhbWVcIi5zcGxpdChcIixcIikuZm9yRWFjaCgoaSA9PiB7XG4gICAgICAgICAgICB2YXIgaCwgcjtcbiAgICAgICAgICAgIHRoaXNbaV0gPSBpIGluIHMgPyBzW2ldIDogbnVsbCAhPT0gKHIgPSBudWxsID09PSAoaCA9IHRbaV0pIHx8IHZvaWQgMCA9PT0gaCA/IHZvaWQgMCA6IGguYmluZCh0KSkgJiYgdm9pZCAwICE9PSByID8gciA6IGUoaSk7XG4gICAgICAgIH0pKTtcbiAgICAgICAgdGhpcy5mbHVzaERvbVJlYWQgPSB0aGlzLmZsdXNoRG9tUmVhZC5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLmZsdXNoRG9tV3JpdGUgPSB0aGlzLmZsdXNoRG9tV3JpdGUuYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5kb21SZWFkUXVldWUgPSBuZXcgaSh0aGlzLCB0aGlzLnJlcXVlc3REb21SZWFkLmJpbmQodGhpcyksIHRoaXMuY2FuY2VsRG9tUmVhZC5iaW5kKHRoaXMpKTtcbiAgICAgICAgdGhpcy5kb21Xcml0ZVF1ZXVlID0gbmV3IGkodGhpcywgdGhpcy5yZXF1ZXN0RG9tV3JpdGUuYmluZCh0aGlzKSwgdGhpcy5jYW5jZWxEb21Xcml0ZS5iaW5kKHRoaXMpKTtcbiAgICB9XG4gICAgc3RhdGljIGdldE9yQ3JlYXRlKHQsIGkgPSB7fSkge1xuICAgICAgICBsZXQgZSA9IHMuZ2V0KHQpO1xuICAgICAgICBpZiAodm9pZCAwID09PSBlKSBzLnNldCh0LCBlID0gbmV3IEJyb3dzZXJQbGF0Zm9ybSh0LCBpKSk7XG4gICAgICAgIHJldHVybiBlO1xuICAgIH1cbiAgICBzdGF0aWMgc2V0KHQsIGkpIHtcbiAgICAgICAgcy5zZXQodCwgaSk7XG4gICAgfVxuICAgIHJlcXVlc3REb21SZWFkKCkge1xuICAgICAgICB0aGlzLnQgPSB0cnVlO1xuICAgICAgICBpZiAoLTEgPT09IHRoaXMudSkgdGhpcy51ID0gdGhpcy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUodGhpcy5mbHVzaERvbVdyaXRlKTtcbiAgICB9XG4gICAgY2FuY2VsRG9tUmVhZCgpIHtcbiAgICAgICAgdGhpcy50ID0gZmFsc2U7XG4gICAgICAgIGlmICh0aGlzLmkgPiAtMSkge1xuICAgICAgICAgICAgdGhpcy5jbGVhclRpbWVvdXQodGhpcy5pKTtcbiAgICAgICAgICAgIHRoaXMuaSA9IC0xO1xuICAgICAgICB9XG4gICAgICAgIGlmIChmYWxzZSA9PT0gdGhpcy5oICYmIHRoaXMudSA+IC0xKSB7XG4gICAgICAgICAgICB0aGlzLmNhbmNlbEFuaW1hdGlvbkZyYW1lKHRoaXMudSk7XG4gICAgICAgICAgICB0aGlzLnUgPSAtMTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBmbHVzaERvbVJlYWQoKSB7XG4gICAgICAgIHRoaXMuaSA9IC0xO1xuICAgICAgICBpZiAodHJ1ZSA9PT0gdGhpcy50KSB7XG4gICAgICAgICAgICB0aGlzLnQgPSBmYWxzZTtcbiAgICAgICAgICAgIHRoaXMuZG9tUmVhZFF1ZXVlLmZsdXNoKCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmVxdWVzdERvbVdyaXRlKCkge1xuICAgICAgICB0aGlzLmggPSB0cnVlO1xuICAgICAgICBpZiAoLTEgPT09IHRoaXMudSkgdGhpcy51ID0gdGhpcy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUodGhpcy5mbHVzaERvbVdyaXRlKTtcbiAgICB9XG4gICAgY2FuY2VsRG9tV3JpdGUoKSB7XG4gICAgICAgIHRoaXMuaCA9IGZhbHNlO1xuICAgICAgICBpZiAodGhpcy51ID4gLTEgJiYgKGZhbHNlID09PSB0aGlzLnQgfHwgdGhpcy5pID4gLTEpKSB7XG4gICAgICAgICAgICB0aGlzLmNhbmNlbEFuaW1hdGlvbkZyYW1lKHRoaXMudSk7XG4gICAgICAgICAgICB0aGlzLnUgPSAtMTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBmbHVzaERvbVdyaXRlKCkge1xuICAgICAgICB0aGlzLnUgPSAtMTtcbiAgICAgICAgaWYgKHRydWUgPT09IHRoaXMuaCkge1xuICAgICAgICAgICAgdGhpcy5oID0gZmFsc2U7XG4gICAgICAgICAgICB0aGlzLmRvbVdyaXRlUXVldWUuZmx1c2goKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodHJ1ZSA9PT0gdGhpcy50ICYmIC0xID09PSB0aGlzLmkpIHRoaXMuaSA9IHRoaXMuc2V0VGltZW91dCh0aGlzLmZsdXNoRG9tUmVhZCwgMCk7XG4gICAgfVxufVxuXG5leHBvcnQgeyBCcm93c2VyUGxhdGZvcm0gfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluZGV4LmpzLm1hcFxuIiwiY29uc3QgdCA9IG5ldyBNYXA7XG5cbmZ1bmN0aW9uIHModCkge1xuICAgIHJldHVybiBmdW5jdGlvbiBzKCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFRoZSBQTEFURk9STSBkaWQgbm90IHJlY2VpdmUgYSB2YWxpZCByZWZlcmVuY2UgdG8gdGhlIGdsb2JhbCBmdW5jdGlvbiAnJHt0fScuYCk7XG4gICAgfTtcbn1cblxuY2xhc3MgUGxhdGZvcm0ge1xuICAgIGNvbnN0cnVjdG9yKHQsIGkgPSB7fSkge1xuICAgICAgICB2YXIgZSwgaCwgciwgbiwgbywgYSwgbCwgYywgdSwgZiwgZCwgdiwgdztcbiAgICAgICAgdGhpcy5tYWNyb1Rhc2tSZXF1ZXN0ZWQgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5tYWNyb1Rhc2tIYW5kbGUgPSAtMTtcbiAgICAgICAgdGhpcy5nbG9iYWxUaGlzID0gdDtcbiAgICAgICAgdGhpcy5kZWNvZGVVUkkgPSBcImRlY29kZVVSSVwiIGluIGkgPyBpLmRlY29kZVVSSSA6IHQuZGVjb2RlVVJJO1xuICAgICAgICB0aGlzLmRlY29kZVVSSUNvbXBvbmVudCA9IFwiZGVjb2RlVVJJQ29tcG9uZW50XCIgaW4gaSA/IGkuZGVjb2RlVVJJQ29tcG9uZW50IDogdC5kZWNvZGVVUklDb21wb25lbnQ7XG4gICAgICAgIHRoaXMuZW5jb2RlVVJJID0gXCJlbmNvZGVVUklcIiBpbiBpID8gaS5lbmNvZGVVUkkgOiB0LmVuY29kZVVSSTtcbiAgICAgICAgdGhpcy5lbmNvZGVVUklDb21wb25lbnQgPSBcImVuY29kZVVSSUNvbXBvbmVudFwiIGluIGkgPyBpLmVuY29kZVVSSUNvbXBvbmVudCA6IHQuZW5jb2RlVVJJQ29tcG9uZW50O1xuICAgICAgICB0aGlzLkRhdGUgPSBcIkRhdGVcIiBpbiBpID8gaS5EYXRlIDogdC5EYXRlO1xuICAgICAgICB0aGlzLlJlZmxlY3QgPSBcIlJlZmxlY3RcIiBpbiBpID8gaS5SZWZsZWN0IDogdC5SZWZsZWN0O1xuICAgICAgICB0aGlzLmNsZWFySW50ZXJ2YWwgPSBcImNsZWFySW50ZXJ2YWxcIiBpbiBpID8gaS5jbGVhckludGVydmFsIDogbnVsbCAhPT0gKGggPSBudWxsID09PSAoZSA9IHQuY2xlYXJJbnRlcnZhbCkgfHwgdm9pZCAwID09PSBlID8gdm9pZCAwIDogZS5iaW5kKHQpKSAmJiB2b2lkIDAgIT09IGggPyBoIDogcyhcImNsZWFySW50ZXJ2YWxcIik7XG4gICAgICAgIHRoaXMuY2xlYXJUaW1lb3V0ID0gXCJjbGVhclRpbWVvdXRcIiBpbiBpID8gaS5jbGVhclRpbWVvdXQgOiBudWxsICE9PSAobiA9IG51bGwgPT09IChyID0gdC5jbGVhclRpbWVvdXQpIHx8IHZvaWQgMCA9PT0gciA/IHZvaWQgMCA6IHIuYmluZCh0KSkgJiYgdm9pZCAwICE9PSBuID8gbiA6IHMoXCJjbGVhclRpbWVvdXRcIik7XG4gICAgICAgIHRoaXMucXVldWVNaWNyb3Rhc2sgPSBcInF1ZXVlTWljcm90YXNrXCIgaW4gaSA/IGkucXVldWVNaWNyb3Rhc2sgOiBudWxsICE9PSAoYSA9IG51bGwgPT09IChvID0gdC5xdWV1ZU1pY3JvdGFzaykgfHwgdm9pZCAwID09PSBvID8gdm9pZCAwIDogby5iaW5kKHQpKSAmJiB2b2lkIDAgIT09IGEgPyBhIDogcyhcInF1ZXVlTWljcm90YXNrXCIpO1xuICAgICAgICB0aGlzLnNldEludGVydmFsID0gXCJzZXRJbnRlcnZhbFwiIGluIGkgPyBpLnNldEludGVydmFsIDogbnVsbCAhPT0gKGMgPSBudWxsID09PSAobCA9IHQuc2V0SW50ZXJ2YWwpIHx8IHZvaWQgMCA9PT0gbCA/IHZvaWQgMCA6IGwuYmluZCh0KSkgJiYgdm9pZCAwICE9PSBjID8gYyA6IHMoXCJzZXRJbnRlcnZhbFwiKTtcbiAgICAgICAgdGhpcy5zZXRUaW1lb3V0ID0gXCJzZXRUaW1lb3V0XCIgaW4gaSA/IGkuc2V0VGltZW91dCA6IG51bGwgIT09IChmID0gbnVsbCA9PT0gKHUgPSB0LnNldFRpbWVvdXQpIHx8IHZvaWQgMCA9PT0gdSA/IHZvaWQgMCA6IHUuYmluZCh0KSkgJiYgdm9pZCAwICE9PSBmID8gZiA6IHMoXCJzZXRUaW1lb3V0XCIpO1xuICAgICAgICB0aGlzLmNvbnNvbGUgPSBcImNvbnNvbGVcIiBpbiBpID8gaS5jb25zb2xlIDogdC5jb25zb2xlO1xuICAgICAgICB0aGlzLnBlcmZvcm1hbmNlTm93ID0gXCJwZXJmb3JtYW5jZU5vd1wiIGluIGkgPyBpLnBlcmZvcm1hbmNlTm93IDogbnVsbCAhPT0gKHcgPSBudWxsID09PSAodiA9IG51bGwgPT09IChkID0gdC5wZXJmb3JtYW5jZSkgfHwgdm9pZCAwID09PSBkID8gdm9pZCAwIDogZC5ub3cpIHx8IHZvaWQgMCA9PT0gdiA/IHZvaWQgMCA6IHYuYmluZCh0LnBlcmZvcm1hbmNlKSkgJiYgdm9pZCAwICE9PSB3ID8gdyA6IHMoXCJwZXJmb3JtYW5jZS5ub3dcIik7XG4gICAgICAgIHRoaXMuZmx1c2hNYWNyb1Rhc2sgPSB0aGlzLmZsdXNoTWFjcm9UYXNrLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMudGFza1F1ZXVlID0gbmV3IFRhc2tRdWV1ZSh0aGlzLCB0aGlzLnJlcXVlc3RNYWNyb1Rhc2suYmluZCh0aGlzKSwgdGhpcy5jYW5jZWxNYWNyb1Rhc2suYmluZCh0aGlzKSk7XG4gICAgfVxuICAgIHN0YXRpYyBnZXRPckNyZWF0ZShzLCBpID0ge30pIHtcbiAgICAgICAgbGV0IGUgPSB0LmdldChzKTtcbiAgICAgICAgaWYgKHZvaWQgMCA9PT0gZSkgdC5zZXQocywgZSA9IG5ldyBQbGF0Zm9ybShzLCBpKSk7XG4gICAgICAgIHJldHVybiBlO1xuICAgIH1cbiAgICBzdGF0aWMgc2V0KHMsIGkpIHtcbiAgICAgICAgdC5zZXQocywgaSk7XG4gICAgfVxuICAgIHJlcXVlc3RNYWNyb1Rhc2soKSB7XG4gICAgICAgIHRoaXMubWFjcm9UYXNrUmVxdWVzdGVkID0gdHJ1ZTtcbiAgICAgICAgaWYgKC0xID09PSB0aGlzLm1hY3JvVGFza0hhbmRsZSkgdGhpcy5tYWNyb1Rhc2tIYW5kbGUgPSB0aGlzLnNldFRpbWVvdXQodGhpcy5mbHVzaE1hY3JvVGFzaywgMCk7XG4gICAgfVxuICAgIGNhbmNlbE1hY3JvVGFzaygpIHtcbiAgICAgICAgdGhpcy5tYWNyb1Rhc2tSZXF1ZXN0ZWQgPSBmYWxzZTtcbiAgICAgICAgaWYgKHRoaXMubWFjcm9UYXNrSGFuZGxlID4gLTEpIHtcbiAgICAgICAgICAgIHRoaXMuY2xlYXJUaW1lb3V0KHRoaXMubWFjcm9UYXNrSGFuZGxlKTtcbiAgICAgICAgICAgIHRoaXMubWFjcm9UYXNrSGFuZGxlID0gLTE7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZmx1c2hNYWNyb1Rhc2soKSB7XG4gICAgICAgIHRoaXMubWFjcm9UYXNrSGFuZGxlID0gLTE7XG4gICAgICAgIGlmICh0cnVlID09PSB0aGlzLm1hY3JvVGFza1JlcXVlc3RlZCkge1xuICAgICAgICAgICAgdGhpcy5tYWNyb1Rhc2tSZXF1ZXN0ZWQgPSBmYWxzZTtcbiAgICAgICAgICAgIHRoaXMudGFza1F1ZXVlLmZsdXNoKCk7XG4gICAgICAgIH1cbiAgICB9XG59XG5cbmZ1bmN0aW9uIGkodCkge1xuICAgIHJldHVybiB0LnBlcnNpc3RlbnQ7XG59XG5cbmNsYXNzIFRhc2tRdWV1ZSB7XG4gICAgY29uc3RydWN0b3IodCwgcywgaSkge1xuICAgICAgICB0aGlzLnBsYXRmb3JtID0gdDtcbiAgICAgICAgdGhpcy4kcmVxdWVzdCA9IHM7XG4gICAgICAgIHRoaXMuJGNhbmNlbCA9IGk7XG4gICAgICAgIHRoaXMudCA9IHZvaWQgMDtcbiAgICAgICAgdGhpcy5pID0gMDtcbiAgICAgICAgdGhpcy5wcm9jZXNzaW5nID0gW107XG4gICAgICAgIHRoaXMucGVuZGluZyA9IFtdO1xuICAgICAgICB0aGlzLmRlbGF5ZWQgPSBbXTtcbiAgICAgICAgdGhpcy5mbHVzaFJlcXVlc3RlZCA9IGZhbHNlO1xuICAgICAgICB0aGlzLmggPSB2b2lkIDA7XG4gICAgICAgIHRoaXMudGFza1Bvb2wgPSBbXTtcbiAgICAgICAgdGhpcy51ID0gMDtcbiAgICAgICAgdGhpcy5UID0gMDtcbiAgICAgICAgdGhpcy4kID0gMDtcbiAgICAgICAgdGhpcy5JID0gKCkgPT4ge1xuICAgICAgICAgICAgaWYgKCF0aGlzLmZsdXNoUmVxdWVzdGVkKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5mbHVzaFJlcXVlc3RlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgdGhpcy5UID0gdGhpcy5wbGF0Zm9ybS5wZXJmb3JtYW5jZU5vdygpO1xuICAgICAgICAgICAgICAgIHRoaXMuJHJlcXVlc3QoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5NID0gbmV3IFRyYWNlcih0LmNvbnNvbGUpO1xuICAgIH1cbiAgICBnZXQgaXNFbXB0eSgpIHtcbiAgICAgICAgcmV0dXJuIDAgPT09IHRoaXMuaSAmJiAwID09PSB0aGlzLnByb2Nlc3NpbmcubGVuZ3RoICYmIDAgPT09IHRoaXMucGVuZGluZy5sZW5ndGggJiYgMCA9PT0gdGhpcy5kZWxheWVkLmxlbmd0aDtcbiAgICB9XG4gICAgZ2V0IFAoKSB7XG4gICAgICAgIHJldHVybiAwID09PSB0aGlzLmkgJiYgdGhpcy5wcm9jZXNzaW5nLmV2ZXJ5KGkpICYmIHRoaXMucGVuZGluZy5ldmVyeShpKSAmJiB0aGlzLmRlbGF5ZWQuZXZlcnkoaSk7XG4gICAgfVxuICAgIGZsdXNoKHQgPSB0aGlzLnBsYXRmb3JtLnBlcmZvcm1hbmNlTm93KCkpIHtcbiAgICAgICAgdGhpcy5mbHVzaFJlcXVlc3RlZCA9IGZhbHNlO1xuICAgICAgICB0aGlzLiQgPSB0O1xuICAgICAgICBpZiAodm9pZCAwID09PSB0aGlzLnQpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnBlbmRpbmcubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgIHRoaXMucHJvY2Vzc2luZy5wdXNoKC4uLnRoaXMucGVuZGluZyk7XG4gICAgICAgICAgICAgICAgdGhpcy5wZW5kaW5nLmxlbmd0aCA9IDA7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5kZWxheWVkLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICBsZXQgcyA9IC0xO1xuICAgICAgICAgICAgICAgIHdoaWxlICgrK3MgPCB0aGlzLmRlbGF5ZWQubGVuZ3RoICYmIHRoaXMuZGVsYXllZFtzXS5xdWV1ZVRpbWUgPD0gdCkgO1xuICAgICAgICAgICAgICAgIHRoaXMucHJvY2Vzc2luZy5wdXNoKC4uLnRoaXMuZGVsYXllZC5zcGxpY2UoMCwgcykpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbGV0IHM7XG4gICAgICAgICAgICB3aGlsZSAodGhpcy5wcm9jZXNzaW5nLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICAocyA9IHRoaXMucHJvY2Vzc2luZy5zaGlmdCgpKS5ydW4oKTtcbiAgICAgICAgICAgICAgICBpZiAoMSA9PT0gcy5zdGF0dXMpIGlmICh0cnVlID09PSBzLnN1c3BlbmQpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy50ID0gcztcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5JKCk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9IGVsc2UgKyt0aGlzLmk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5wZW5kaW5nLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICB0aGlzLnByb2Nlc3NpbmcucHVzaCguLi50aGlzLnBlbmRpbmcpO1xuICAgICAgICAgICAgICAgIHRoaXMucGVuZGluZy5sZW5ndGggPSAwO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMuZGVsYXllZC5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgbGV0IHMgPSAtMTtcbiAgICAgICAgICAgICAgICB3aGlsZSAoKytzIDwgdGhpcy5kZWxheWVkLmxlbmd0aCAmJiB0aGlzLmRlbGF5ZWRbc10ucXVldWVUaW1lIDw9IHQpIDtcbiAgICAgICAgICAgICAgICB0aGlzLnByb2Nlc3NpbmcucHVzaCguLi50aGlzLmRlbGF5ZWQuc3BsaWNlKDAsIHMpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLnByb2Nlc3NpbmcubGVuZ3RoID4gMCB8fCB0aGlzLmRlbGF5ZWQubGVuZ3RoID4gMCB8fCB0aGlzLmkgPiAwKSB0aGlzLkkoKTtcbiAgICAgICAgICAgIGlmICh2b2lkIDAgIT09IHRoaXMuaCAmJiB0aGlzLlApIHtcbiAgICAgICAgICAgICAgICBjb25zdCB0ID0gdGhpcy5oO1xuICAgICAgICAgICAgICAgIHRoaXMuaCA9IHZvaWQgMDtcbiAgICAgICAgICAgICAgICB0LnJlc29sdmUoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHRoaXMuSSgpO1xuICAgIH1cbiAgICBjYW5jZWwoKSB7XG4gICAgICAgIGlmICh0aGlzLmZsdXNoUmVxdWVzdGVkKSB7XG4gICAgICAgICAgICB0aGlzLiRjYW5jZWwoKTtcbiAgICAgICAgICAgIHRoaXMuZmx1c2hSZXF1ZXN0ZWQgPSBmYWxzZTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBhc3luYyB5aWVsZCgpIHtcbiAgICAgICAgaWYgKHRoaXMuaXNFbXB0eSkgOyBlbHNlIHtcbiAgICAgICAgICAgIGlmICh2b2lkIDAgPT09IHRoaXMuaCkgdGhpcy5oID0gdSgpO1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5oO1xuICAgICAgICB9XG4gICAgfVxuICAgIHF1ZXVlVGFzayh0LCBzKSB7XG4gICAgICAgIGNvbnN0IHtkZWxheTogaSwgcHJlZW1wdDogZSwgcGVyc2lzdGVudDogaCwgcmV1c2FibGU6IHIsIHN1c3BlbmQ6IG59ID0ge1xuICAgICAgICAgICAgLi4ubyxcbiAgICAgICAgICAgIC4uLnNcbiAgICAgICAgfTtcbiAgICAgICAgaWYgKGUpIHtcbiAgICAgICAgICAgIGlmIChpID4gMCkgdGhyb3cgbmV3IEVycm9yKGBJbnZhbGlkIGFyZ3VtZW50czogcHJlZW1wdCBjYW5ub3QgYmUgY29tYmluZWQgd2l0aCBhIGdyZWF0ZXItdGhhbi16ZXJvIGRlbGF5YCk7XG4gICAgICAgICAgICBpZiAoaCkgdGhyb3cgbmV3IEVycm9yKGBJbnZhbGlkIGFyZ3VtZW50czogcHJlZW1wdCBjYW5ub3QgYmUgY29tYmluZWQgd2l0aCBwZXJzaXN0ZW50YCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKDAgPT09IHRoaXMucHJvY2Vzc2luZy5sZW5ndGgpIHRoaXMuSSgpO1xuICAgICAgICBjb25zdCBhID0gdGhpcy5wbGF0Zm9ybS5wZXJmb3JtYW5jZU5vdygpO1xuICAgICAgICBsZXQgbDtcbiAgICAgICAgaWYgKHIpIHtcbiAgICAgICAgICAgIGNvbnN0IHMgPSB0aGlzLnRhc2tQb29sO1xuICAgICAgICAgICAgY29uc3QgbyA9IHRoaXMudSAtIDE7XG4gICAgICAgICAgICBpZiAobyA+PSAwKSB7XG4gICAgICAgICAgICAgICAgbCA9IHNbb107XG4gICAgICAgICAgICAgICAgc1tvXSA9IHZvaWQgMDtcbiAgICAgICAgICAgICAgICB0aGlzLnUgPSBvO1xuICAgICAgICAgICAgICAgIGwucmV1c2UoYSwgaSwgZSwgaCwgbiwgdCk7XG4gICAgICAgICAgICB9IGVsc2UgbCA9IG5ldyBUYXNrKHRoaXMuTSwgdGhpcywgYSwgYSArIGksIGUsIGgsIG4sIHIsIHQpO1xuICAgICAgICB9IGVsc2UgbCA9IG5ldyBUYXNrKHRoaXMuTSwgdGhpcywgYSwgYSArIGksIGUsIGgsIG4sIHIsIHQpO1xuICAgICAgICBpZiAoZSkgdGhpcy5wcm9jZXNzaW5nW3RoaXMucHJvY2Vzc2luZy5sZW5ndGhdID0gbDsgZWxzZSBpZiAoMCA9PT0gaSkgdGhpcy5wZW5kaW5nW3RoaXMucGVuZGluZy5sZW5ndGhdID0gbDsgZWxzZSB0aGlzLmRlbGF5ZWRbdGhpcy5kZWxheWVkLmxlbmd0aF0gPSBsO1xuICAgICAgICByZXR1cm4gbDtcbiAgICB9XG4gICAgcmVtb3ZlKHQpIHtcbiAgICAgICAgbGV0IHMgPSB0aGlzLnByb2Nlc3NpbmcuaW5kZXhPZih0KTtcbiAgICAgICAgaWYgKHMgPiAtMSkge1xuICAgICAgICAgICAgdGhpcy5wcm9jZXNzaW5nLnNwbGljZShzLCAxKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBzID0gdGhpcy5wZW5kaW5nLmluZGV4T2YodCk7XG4gICAgICAgIGlmIChzID4gLTEpIHtcbiAgICAgICAgICAgIHRoaXMucGVuZGluZy5zcGxpY2UocywgMSk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgcyA9IHRoaXMuZGVsYXllZC5pbmRleE9mKHQpO1xuICAgICAgICBpZiAocyA+IC0xKSB7XG4gICAgICAgICAgICB0aGlzLmRlbGF5ZWQuc3BsaWNlKHMsIDEpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgVGFzayAjJHt0LmlkfSBjb3VsZCBub3QgYmUgZm91bmRgKTtcbiAgICB9XG4gICAgcmV0dXJuVG9Qb29sKHQpIHtcbiAgICAgICAgdGhpcy50YXNrUG9vbFt0aGlzLnUrK10gPSB0O1xuICAgIH1cbiAgICByZXNldFBlcnNpc3RlbnRUYXNrKHQpIHtcbiAgICAgICAgdC5yZXNldCh0aGlzLnBsYXRmb3JtLnBlcmZvcm1hbmNlTm93KCkpO1xuICAgICAgICBpZiAodC5jcmVhdGVkVGltZSA9PT0gdC5xdWV1ZVRpbWUpIHRoaXMucGVuZGluZ1t0aGlzLnBlbmRpbmcubGVuZ3RoXSA9IHQ7IGVsc2UgdGhpcy5kZWxheWVkW3RoaXMuZGVsYXllZC5sZW5ndGhdID0gdDtcbiAgICB9XG4gICAgY29tcGxldGVBc3luY1Rhc2sodCkge1xuICAgICAgICB2YXIgcztcbiAgICAgICAgaWYgKHRydWUgPT09IHQuc3VzcGVuZCkge1xuICAgICAgICAgICAgaWYgKHRoaXMudCAhPT0gdCkgdGhyb3cgbmV3IEVycm9yKGBBc3luYyB0YXNrIGNvbXBsZXRpb24gbWlzbWF0Y2g6IHN1c3BlbmRlclRhc2s9JHtudWxsID09PSAocyA9IHRoaXMudCkgfHwgdm9pZCAwID09PSBzID8gdm9pZCAwIDogcy5pZH0sIHRhc2s9JHt0LmlkfWApO1xuICAgICAgICAgICAgdGhpcy50ID0gdm9pZCAwO1xuICAgICAgICB9IGVsc2UgLS10aGlzLmk7XG4gICAgICAgIGlmICh2b2lkIDAgIT09IHRoaXMuaCAmJiB0aGlzLlApIHtcbiAgICAgICAgICAgIGNvbnN0IHQgPSB0aGlzLmg7XG4gICAgICAgICAgICB0aGlzLmggPSB2b2lkIDA7XG4gICAgICAgICAgICB0LnJlc29sdmUoKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5pc0VtcHR5KSB0aGlzLmNhbmNlbCgpO1xuICAgIH1cbn1cblxuY2xhc3MgVGFza0Fib3J0RXJyb3IgZXh0ZW5kcyBFcnJvciB7XG4gICAgY29uc3RydWN0b3IodCkge1xuICAgICAgICBzdXBlcihcIlRhc2sgd2FzIGNhbmNlbGVkLlwiKTtcbiAgICAgICAgdGhpcy50YXNrID0gdDtcbiAgICB9XG59XG5cbmxldCBlID0gMDtcblxudmFyIGg7XG5cbihmdW5jdGlvbih0KSB7XG4gICAgdFt0W1wicGVuZGluZ1wiXSA9IDBdID0gXCJwZW5kaW5nXCI7XG4gICAgdFt0W1wicnVubmluZ1wiXSA9IDFdID0gXCJydW5uaW5nXCI7XG4gICAgdFt0W1wiY29tcGxldGVkXCJdID0gMl0gPSBcImNvbXBsZXRlZFwiO1xuICAgIHRbdFtcImNhbmNlbGVkXCJdID0gM10gPSBcImNhbmNlbGVkXCI7XG59KShoIHx8IChoID0ge30pKTtcblxuY2xhc3MgVGFzayB7XG4gICAgY29uc3RydWN0b3IodCwgcywgaSwgaCwgciwgbiwgbywgYSwgbCkge1xuICAgICAgICB0aGlzLnRhc2tRdWV1ZSA9IHM7XG4gICAgICAgIHRoaXMuY3JlYXRlZFRpbWUgPSBpO1xuICAgICAgICB0aGlzLnF1ZXVlVGltZSA9IGg7XG4gICAgICAgIHRoaXMucHJlZW1wdCA9IHI7XG4gICAgICAgIHRoaXMucGVyc2lzdGVudCA9IG47XG4gICAgICAgIHRoaXMuc3VzcGVuZCA9IG87XG4gICAgICAgIHRoaXMucmV1c2FibGUgPSBhO1xuICAgICAgICB0aGlzLmNhbGxiYWNrID0gbDtcbiAgICAgICAgdGhpcy5pZCA9ICsrZTtcbiAgICAgICAgdGhpcy5SID0gdm9pZCAwO1xuICAgICAgICB0aGlzLkEgPSB2b2lkIDA7XG4gICAgICAgIHRoaXMucSA9IHZvaWQgMDtcbiAgICAgICAgdGhpcy5DID0gMDtcbiAgICAgICAgdGhpcy5NID0gdDtcbiAgICB9XG4gICAgZ2V0IHJlc3VsdCgpIHtcbiAgICAgICAgY29uc3QgdCA9IHRoaXMucTtcbiAgICAgICAgaWYgKHZvaWQgMCA9PT0gdCkgc3dpdGNoICh0aGlzLkMpIHtcbiAgICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgY29uc3QgdCA9IHRoaXMucSA9IHUoKTtcbiAgICAgICAgICAgICAgICB0aGlzLlIgPSB0LnJlc29sdmU7XG4gICAgICAgICAgICAgICAgdGhpcy5BID0gdC5yZWplY3Q7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHQ7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJUcnlpbmcgdG8gYXdhaXQgdGFzayBmcm9tIHdpdGhpbiB0YXNrIHdpbGwgY2F1c2UgYSBkZWFkbG9jay5cIik7XG5cbiAgICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5xID0gUHJvbWlzZS5yZXNvbHZlKCk7XG5cbiAgICAgICAgICBjYXNlIDM6XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5xID0gUHJvbWlzZS5yZWplY3QobmV3IFRhc2tBYm9ydEVycm9yKHRoaXMpKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdDtcbiAgICB9XG4gICAgZ2V0IHN0YXR1cygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuQztcbiAgICB9XG4gICAgcnVuKHQgPSB0aGlzLnRhc2tRdWV1ZS5wbGF0Zm9ybS5wZXJmb3JtYW5jZU5vdygpKSB7XG4gICAgICAgIGlmICgwICE9PSB0aGlzLkMpIHRocm93IG5ldyBFcnJvcihgQ2Fubm90IHJ1biB0YXNrIGluICR7dGhpcy5DfSBzdGF0ZWApO1xuICAgICAgICBjb25zdCB7cGVyc2lzdGVudDogcywgcmV1c2FibGU6IGksIHRhc2tRdWV1ZTogZSwgY2FsbGJhY2s6IGgsIFI6IHIsIEE6IG4sIGNyZWF0ZWRUaW1lOiBvfSA9IHRoaXM7XG4gICAgICAgIGxldCBhO1xuICAgICAgICB0aGlzLkMgPSAxO1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgYSA9IGgodCAtIG8pO1xuICAgICAgICAgICAgaWYgKGEgaW5zdGFuY2VvZiBQcm9taXNlKSBhLnRoZW4oKHQgPT4ge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLnBlcnNpc3RlbnQpIGVbXCJyZXNldFBlcnNpc3RlbnRUYXNrXCJdKHRoaXMpOyBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHMpIHRoaXMuQyA9IDM7IGVsc2UgdGhpcy5DID0gMjtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5kaXNwb3NlKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVbXCJjb21wbGV0ZUFzeW5jVGFza1wiXSh0aGlzKTtcbiAgICAgICAgICAgICAgICBpZiAoZmFsc2UgJiYgdGhpcy5NLmVuYWJsZWQpIDtcbiAgICAgICAgICAgICAgICBpZiAodm9pZCAwICE9PSByKSByKHQpO1xuICAgICAgICAgICAgICAgIGlmICghdGhpcy5wZXJzaXN0ZW50ICYmIGkpIGVbXCJyZXR1cm5Ub1Bvb2xcIl0odGhpcyk7XG4gICAgICAgICAgICB9KSkuY2F0Y2goKHQgPT4ge1xuICAgICAgICAgICAgICAgIGlmICghdGhpcy5wZXJzaXN0ZW50KSB0aGlzLmRpc3Bvc2UoKTtcbiAgICAgICAgICAgICAgICBlW1wiY29tcGxldGVBc3luY1Rhc2tcIl0odGhpcyk7XG4gICAgICAgICAgICAgICAgaWYgKGZhbHNlICYmIHRoaXMuTS5lbmFibGVkKSA7XG4gICAgICAgICAgICAgICAgaWYgKHZvaWQgMCAhPT0gbikgbih0KTsgZWxzZSB0aHJvdyB0O1xuICAgICAgICAgICAgfSkpOyBlbHNlIHtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5wZXJzaXN0ZW50KSBlW1wicmVzZXRQZXJzaXN0ZW50VGFza1wiXSh0aGlzKTsgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChzKSB0aGlzLkMgPSAzOyBlbHNlIHRoaXMuQyA9IDI7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZGlzcG9zZSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoZmFsc2UgJiYgdGhpcy5NLmVuYWJsZWQpIDtcbiAgICAgICAgICAgICAgICBpZiAodm9pZCAwICE9PSByKSByKGEpO1xuICAgICAgICAgICAgICAgIGlmICghdGhpcy5wZXJzaXN0ZW50ICYmIGkpIGVbXCJyZXR1cm5Ub1Bvb2xcIl0odGhpcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gY2F0Y2ggKHQpIHtcbiAgICAgICAgICAgIGlmICghdGhpcy5wZXJzaXN0ZW50KSB0aGlzLmRpc3Bvc2UoKTtcbiAgICAgICAgICAgIGlmICh2b2lkIDAgIT09IG4pIG4odCk7IGVsc2UgdGhyb3cgdDtcbiAgICAgICAgfVxuICAgIH1cbiAgICBjYW5jZWwoKSB7XG4gICAgICAgIGlmICgwID09PSB0aGlzLkMpIHtcbiAgICAgICAgICAgIGNvbnN0IHQgPSB0aGlzLnRhc2tRdWV1ZTtcbiAgICAgICAgICAgIGNvbnN0IHMgPSB0aGlzLnJldXNhYmxlO1xuICAgICAgICAgICAgY29uc3QgaSA9IHRoaXMuQTtcbiAgICAgICAgICAgIHQucmVtb3ZlKHRoaXMpO1xuICAgICAgICAgICAgaWYgKHQuaXNFbXB0eSkgdC5jYW5jZWwoKTtcbiAgICAgICAgICAgIHRoaXMuQyA9IDM7XG4gICAgICAgICAgICB0aGlzLmRpc3Bvc2UoKTtcbiAgICAgICAgICAgIGlmIChzKSB0W1wicmV0dXJuVG9Qb29sXCJdKHRoaXMpO1xuICAgICAgICAgICAgaWYgKHZvaWQgMCAhPT0gaSkgaShuZXcgVGFza0Fib3J0RXJyb3IodGhpcykpO1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH0gZWxzZSBpZiAoMSA9PT0gdGhpcy5DICYmIHRoaXMucGVyc2lzdGVudCkge1xuICAgICAgICAgICAgdGhpcy5wZXJzaXN0ZW50ID0gZmFsc2U7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIHJlc2V0KHQpIHtcbiAgICAgICAgY29uc3QgcyA9IHRoaXMucXVldWVUaW1lIC0gdGhpcy5jcmVhdGVkVGltZTtcbiAgICAgICAgdGhpcy5jcmVhdGVkVGltZSA9IHQ7XG4gICAgICAgIHRoaXMucXVldWVUaW1lID0gdCArIHM7XG4gICAgICAgIHRoaXMuQyA9IDA7XG4gICAgICAgIHRoaXMuUiA9IHZvaWQgMDtcbiAgICAgICAgdGhpcy5BID0gdm9pZCAwO1xuICAgICAgICB0aGlzLnEgPSB2b2lkIDA7XG4gICAgfVxuICAgIHJldXNlKHQsIHMsIGksIGUsIGgsIHIpIHtcbiAgICAgICAgdGhpcy5jcmVhdGVkVGltZSA9IHQ7XG4gICAgICAgIHRoaXMucXVldWVUaW1lID0gdCArIHM7XG4gICAgICAgIHRoaXMucHJlZW1wdCA9IGk7XG4gICAgICAgIHRoaXMucGVyc2lzdGVudCA9IGU7XG4gICAgICAgIHRoaXMuc3VzcGVuZCA9IGg7XG4gICAgICAgIHRoaXMuY2FsbGJhY2sgPSByO1xuICAgICAgICB0aGlzLkMgPSAwO1xuICAgIH1cbiAgICBkaXNwb3NlKCkge1xuICAgICAgICB0aGlzLmNhbGxiYWNrID0gdm9pZCAwO1xuICAgICAgICB0aGlzLlIgPSB2b2lkIDA7XG4gICAgICAgIHRoaXMuQSA9IHZvaWQgMDtcbiAgICAgICAgdGhpcy5xID0gdm9pZCAwO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gcih0KSB7XG4gICAgc3dpdGNoICh0KSB7XG4gICAgICBjYXNlIDA6XG4gICAgICAgIHJldHVybiBcInBlbmRpbmdcIjtcblxuICAgICAgY2FzZSAxOlxuICAgICAgICByZXR1cm4gXCJydW5uaW5nXCI7XG5cbiAgICAgIGNhc2UgMzpcbiAgICAgICAgcmV0dXJuIFwiY2FuY2VsZWRcIjtcblxuICAgICAgY2FzZSAyOlxuICAgICAgICByZXR1cm4gXCJjb21wbGV0ZWRcIjtcbiAgICB9XG59XG5cbmNsYXNzIFRyYWNlciB7XG4gICAgY29uc3RydWN0b3IodCkge1xuICAgICAgICB0aGlzLmNvbnNvbGUgPSB0O1xuICAgICAgICB0aGlzLmVuYWJsZWQgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5kZXB0aCA9IDA7XG4gICAgfVxuICAgIGVudGVyKHQsIHMpIHtcbiAgICAgICAgdGhpcy5sb2coYCR7XCIgIFwiLnJlcGVhdCh0aGlzLmRlcHRoKyspfT4gYCwgdCwgcyk7XG4gICAgfVxuICAgIGxlYXZlKHQsIHMpIHtcbiAgICAgICAgdGhpcy5sb2coYCR7XCIgIFwiLnJlcGVhdCgtLXRoaXMuZGVwdGgpfTwgYCwgdCwgcyk7XG4gICAgfVxuICAgIHRyYWNlKHQsIHMpIHtcbiAgICAgICAgdGhpcy5sb2coYCR7XCIgIFwiLnJlcGVhdCh0aGlzLmRlcHRoKX0tIGAsIHQsIHMpO1xuICAgIH1cbiAgICBsb2codCwgcywgaSkge1xuICAgICAgICBpZiAocyBpbnN0YW5jZW9mIFRhc2tRdWV1ZSkge1xuICAgICAgICAgICAgY29uc3QgZSA9IHNbXCJwcm9jZXNzaW5nXCJdLmxlbmd0aDtcbiAgICAgICAgICAgIGNvbnN0IGggPSBzW1wicGVuZGluZ1wiXS5sZW5ndGg7XG4gICAgICAgICAgICBjb25zdCByID0gc1tcImRlbGF5ZWRcIl0ubGVuZ3RoO1xuICAgICAgICAgICAgY29uc3QgbiA9IHNbXCJmbHVzaFJlcXVlc3RlZFwiXTtcbiAgICAgICAgICAgIGNvbnN0IG8gPSAhIXMudDtcbiAgICAgICAgICAgIGNvbnN0IGEgPSBgcHJvY2Vzc2luZz0ke2V9IHBlbmRpbmc9JHtofSBkZWxheWVkPSR7cn0gZmx1c2hSZXE9JHtufSBzdXNUYXNrPSR7b31gO1xuICAgICAgICAgICAgdGhpcy5jb25zb2xlLmxvZyhgJHt0fVtRLiR7aX1dICR7YX1gKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNvbnN0IGUgPSBzW1wiaWRcIl07XG4gICAgICAgICAgICBjb25zdCBoID0gTWF0aC5yb3VuZCgxMCAqIHNbXCJjcmVhdGVkVGltZVwiXSkgLyAxMDtcbiAgICAgICAgICAgIGNvbnN0IG4gPSBNYXRoLnJvdW5kKDEwICogc1tcInF1ZXVlVGltZVwiXSkgLyAxMDtcbiAgICAgICAgICAgIGNvbnN0IG8gPSBzW1wicHJlZW1wdFwiXTtcbiAgICAgICAgICAgIGNvbnN0IGEgPSBzW1wicmV1c2FibGVcIl07XG4gICAgICAgICAgICBjb25zdCBsID0gc1tcInBlcnNpc3RlbnRcIl07XG4gICAgICAgICAgICBjb25zdCBjID0gc1tcInN1c3BlbmRcIl07XG4gICAgICAgICAgICBjb25zdCB1ID0gcihzW1wiQ1wiXSk7XG4gICAgICAgICAgICBjb25zdCBmID0gYGlkPSR7ZX0gY3JlYXRlZD0ke2h9IHF1ZXVlPSR7bn0gcHJlZW1wdD0ke299IHBlcnNpc3RlbnQ9JHtsfSByZXVzYWJsZT0ke2F9IHN0YXR1cz0ke3V9IHN1c3BlbmQ9JHtjfWA7XG4gICAgICAgICAgICB0aGlzLmNvbnNvbGUubG9nKGAke3R9W1QuJHtpfV0gJHtmfWApO1xuICAgICAgICB9XG4gICAgfVxufVxuXG52YXIgbjtcblxuKGZ1bmN0aW9uKHQpIHtcbiAgICB0W3RbXCJyZW5kZXJcIl0gPSAwXSA9IFwicmVuZGVyXCI7XG4gICAgdFt0W1wibWFjcm9UYXNrXCJdID0gMV0gPSBcIm1hY3JvVGFza1wiO1xuICAgIHRbdFtcInBvc3RSZW5kZXJcIl0gPSAyXSA9IFwicG9zdFJlbmRlclwiO1xufSkobiB8fCAobiA9IHt9KSk7XG5cbmNvbnN0IG8gPSB7XG4gICAgZGVsYXk6IDAsXG4gICAgcHJlZW1wdDogZmFsc2UsXG4gICAgcGVyc2lzdGVudDogZmFsc2UsXG4gICAgcmV1c2FibGU6IHRydWUsXG4gICAgc3VzcGVuZDogZmFsc2Vcbn07XG5cbmxldCBhO1xuXG5sZXQgbDtcblxuZnVuY3Rpb24gYyh0LCBzKSB7XG4gICAgYSA9IHQ7XG4gICAgbCA9IHM7XG59XG5cbmZ1bmN0aW9uIHUoKSB7XG4gICAgY29uc3QgdCA9IG5ldyBQcm9taXNlKGMpO1xuICAgIHQucmVzb2x2ZSA9IGE7XG4gICAgdC5yZWplY3QgPSBsO1xuICAgIHJldHVybiB0O1xufVxuXG5leHBvcnQgeyBQbGF0Zm9ybSwgVGFzaywgVGFza0Fib3J0RXJyb3IsIFRhc2tRdWV1ZSwgbiBhcyBUYXNrUXVldWVQcmlvcml0eSwgaCBhcyBUYXNrU3RhdHVzIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC5qcy5tYXBcbiIsImV4cG9ydCB7IFBsYXRmb3JtLCBUYXNrLCBUYXNrQWJvcnRFcnJvciwgVGFza1F1ZXVlLCBUYXNrUXVldWVQcmlvcml0eSwgVGFza1N0YXR1cyB9IGZyb20gXCJAYXVyZWxpYS9wbGF0Zm9ybVwiO1xuXG5pbXBvcnQgeyBCcm93c2VyUGxhdGZvcm0gYXMgdCB9IGZyb20gXCJAYXVyZWxpYS9wbGF0Zm9ybS1icm93c2VyXCI7XG5cbmV4cG9ydCB7IEJyb3dzZXJQbGF0Zm9ybSB9IGZyb20gXCJAYXVyZWxpYS9wbGF0Zm9ybS1icm93c2VyXCI7XG5cbmltcG9ydCB7IE1ldGFkYXRhIGFzIGUsIFByb3RvY29sIGFzIGksIGdldFByb3RvdHlwZUNoYWluIGFzIHMsIGZpcnN0RGVmaW5lZCBhcyBuLCBrZWJhYkNhc2UgYXMgciwgbm9vcCBhcyBvLCBESSBhcyBsLCBlbXB0eUFycmF5IGFzIGgsIGFsbCBhcyBhLCBSZWdpc3RyYXRpb24gYXMgYywgSVBsYXRmb3JtIGFzIHUsIG1lcmdlQXJyYXlzIGFzIGYsIGZyb21EZWZpbml0aW9uT3JEZWZhdWx0IGFzIGQsIHBhc2NhbENhc2UgYXMgbSwgZnJvbUFubm90YXRpb25PclR5cGVPckRlZmF1bHQgYXMgdiwgZnJvbUFubm90YXRpb25PckRlZmluaXRpb25PclR5cGVPckRlZmF1bHQgYXMgcCwgSUNvbnRhaW5lciBhcyBnLCBuZXh0SWQgYXMgdywgb3B0aW9uYWwgYXMgYiwgSW5zdGFuY2VQcm92aWRlciBhcyB4LCBpc09iamVjdCBhcyB5LCBJTG9nZ2VyIGFzIGssIG9uUmVzb2x2ZSBhcyBDLCByZXNvbHZlQWxsIGFzIEEsIGNhbWVsQ2FzZSBhcyBTLCB0b0FycmF5IGFzIFIsIGVtcHR5T2JqZWN0IGFzIEUsIElTZXJ2aWNlTG9jYXRvciBhcyBCLCBjb21wYXJlTnVtYmVyIGFzIEksIHRyYW5zaWVudCBhcyBUIH0gZnJvbSBcIkBhdXJlbGlhL2tlcm5lbFwiO1xuXG5pbXBvcnQgeyBCaW5kaW5nTW9kZSBhcyBELCBzdWJzY3JpYmVyQ29sbGVjdGlvbiBhcyBQLCB3aXRoRmx1c2hRdWV1ZSBhcyBPLCBjb25uZWN0YWJsZSBhcyAkLCByZWdpc3RlckFsaWFzZXMgYXMgTCwgQ29ubmVjdGFibGVTd2l0Y2hlciBhcyBxLCBQcm94eU9ic2VydmFibGUgYXMgTSwgU2NvcGUgYXMgVSwgSUNvZXJjaW9uQ29uZmlndXJhdGlvbiBhcyBGLCBJT2JzZXJ2ZXJMb2NhdG9yIGFzIFYsIElFeHByZXNzaW9uUGFyc2VyIGFzIF8sIEFjY2Vzc1Njb3BlRXhwcmVzc2lvbiBhcyBqLCBEZWxlZ2F0aW9uU3RyYXRlZ3kgYXMgTiwgQmluZGluZ0JlaGF2aW9yRXhwcmVzc2lvbiBhcyBXLCBCaW5kaW5nQmVoYXZpb3JGYWN0b3J5IGFzIEgsIFByaW1pdGl2ZUxpdGVyYWxFeHByZXNzaW9uIGFzIHosIGJpbmRpbmdCZWhhdmlvciBhcyBHLCBCaW5kaW5nSW50ZXJjZXB0b3IgYXMgWCwgSVNpZ25hbGVyIGFzIEssIFByb3BlcnR5QWNjZXNzb3IgYXMgWSwgSU5vZGVPYnNlcnZlckxvY2F0b3IgYXMgUSwgU2V0dGVyT2JzZXJ2ZXIgYXMgWiwgSURpcnR5Q2hlY2tlciBhcyBKLCBhbGlhcyBhcyB0dCwgYXBwbHlNdXRhdGlvbnNUb0luZGljZXMgYXMgZXQsIGdldENvbGxlY3Rpb25PYnNlcnZlciBhcyBpdCwgQmluZGluZ0NvbnRleHQgYXMgc3QsIHN5bmNocm9uaXplSW5kaWNlcyBhcyBudCwgdmFsdWVDb252ZXJ0ZXIgYXMgcnQgfSBmcm9tIFwiQGF1cmVsaWEvcnVudGltZVwiO1xuXG5leHBvcnQgeyBBY2Nlc3MsIEFjY2Vzc0tleWVkRXhwcmVzc2lvbiwgQWNjZXNzTWVtYmVyRXhwcmVzc2lvbiwgQWNjZXNzU2NvcGVFeHByZXNzaW9uLCBBY2Nlc3NUaGlzRXhwcmVzc2lvbiwgQWNjZXNzb3JUeXBlLCBBcnJheUJpbmRpbmdQYXR0ZXJuLCBBcnJheUluZGV4T2JzZXJ2ZXIsIEFycmF5TGl0ZXJhbEV4cHJlc3Npb24sIEFycmF5T2JzZXJ2ZXIsIEFzc2lnbkV4cHJlc3Npb24sIEJpbmFyeUV4cHJlc3Npb24sIEJpbmRpbmdCZWhhdmlvciwgQmluZGluZ0JlaGF2aW9yRGVmaW5pdGlvbiwgQmluZGluZ0JlaGF2aW9yRXhwcmVzc2lvbiwgQmluZGluZ0JlaGF2aW9yRmFjdG9yeSwgQmluZGluZ0JlaGF2aW9yU3RyYXRlZ3ksIEJpbmRpbmdDb250ZXh0LCBCaW5kaW5nSWRlbnRpZmllciwgQmluZGluZ0ludGVyY2VwdG9yLCBCaW5kaW5nTWVkaWF0b3IsIEJpbmRpbmdNb2RlLCBDYWxsRnVuY3Rpb25FeHByZXNzaW9uLCBDYWxsTWVtYmVyRXhwcmVzc2lvbiwgQ2FsbFNjb3BlRXhwcmVzc2lvbiwgQ2hhciwgQ29sbGVjdGlvbktpbmQsIENvbGxlY3Rpb25MZW5ndGhPYnNlcnZlciwgQ29sbGVjdGlvblNpemVPYnNlcnZlciwgQ29tcHV0ZWRPYnNlcnZlciwgQ29uZGl0aW9uYWxFeHByZXNzaW9uLCBDdXN0b21FeHByZXNzaW9uLCBEZWxlZ2F0aW9uU3RyYXRlZ3ksIERpcnR5Q2hlY2tQcm9wZXJ0eSwgRGlydHlDaGVja1NldHRpbmdzLCBFeHByZXNzaW9uS2luZCwgRXhwcmVzc2lvblR5cGUsIEZvck9mU3RhdGVtZW50LCBIdG1sTGl0ZXJhbEV4cHJlc3Npb24sIElEaXJ0eUNoZWNrZXIsIElFeHByZXNzaW9uUGFyc2VyLCBJTm9kZU9ic2VydmVyTG9jYXRvciwgSU9ic2VydmVyTG9jYXRvciwgSVNpZ25hbGVyLCBJbnRlcnBvbGF0aW9uLCBMaWZlY3ljbGVGbGFncywgTWFwT2JzZXJ2ZXIsIE9iamVjdEJpbmRpbmdQYXR0ZXJuLCBPYmplY3RMaXRlcmFsRXhwcmVzc2lvbiwgT2JzZXJ2ZXJMb2NhdG9yLCBPdmVycmlkZUNvbnRleHQsIFByZWNlZGVuY2UsIFByaW1pdGl2ZUxpdGVyYWxFeHByZXNzaW9uLCBQcmltaXRpdmVPYnNlcnZlciwgUHJvcGVydHlBY2Nlc3NvciwgU2NvcGUsIFNldE9ic2VydmVyLCBTZXR0ZXJPYnNlcnZlciwgVGFnZ2VkVGVtcGxhdGVFeHByZXNzaW9uLCBUZW1wbGF0ZUV4cHJlc3Npb24sIFVuYXJ5RXhwcmVzc2lvbiwgVmFsdWVDb252ZXJ0ZXIsIFZhbHVlQ29udmVydGVyRGVmaW5pdGlvbiwgVmFsdWVDb252ZXJ0ZXJFeHByZXNzaW9uLCBhbGlhcywgYXBwbHlNdXRhdGlvbnNUb0luZGljZXMsIGJpbmRpbmdCZWhhdmlvciwgY2xvbmVJbmRleE1hcCwgY29ubmVjdGFibGUsIGNvcHlJbmRleE1hcCwgY3JlYXRlSW5kZXhNYXAsIGRpc2FibGVBcnJheU9ic2VydmF0aW9uLCBkaXNhYmxlTWFwT2JzZXJ2YXRpb24sIGRpc2FibGVTZXRPYnNlcnZhdGlvbiwgZW5hYmxlQXJyYXlPYnNlcnZhdGlvbiwgZW5hYmxlTWFwT2JzZXJ2YXRpb24sIGVuYWJsZVNldE9ic2VydmF0aW9uLCBnZXRDb2xsZWN0aW9uT2JzZXJ2ZXIsIGlzSW5kZXhNYXAsIG9ic2VydmFibGUsIHBhcnNlRXhwcmVzc2lvbiwgcmVnaXN0ZXJBbGlhc2VzLCBzdWJzY3JpYmVyQ29sbGVjdGlvbiwgc3luY2hyb25pemVJbmRpY2VzLCB2YWx1ZUNvbnZlcnRlciB9IGZyb20gXCJAYXVyZWxpYS9ydW50aW1lXCI7XG5cbi8qISAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKlxuQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uXG5cblBlcm1pc3Npb24gdG8gdXNlLCBjb3B5LCBtb2RpZnksIGFuZC9vciBkaXN0cmlidXRlIHRoaXMgc29mdHdhcmUgZm9yIGFueVxucHVycG9zZSB3aXRoIG9yIHdpdGhvdXQgZmVlIGlzIGhlcmVieSBncmFudGVkLlxuXG5USEUgU09GVFdBUkUgSVMgUFJPVklERUQgXCJBUyBJU1wiIEFORCBUSEUgQVVUSE9SIERJU0NMQUlNUyBBTEwgV0FSUkFOVElFUyBXSVRIXG5SRUdBUkQgVE8gVEhJUyBTT0ZUV0FSRSBJTkNMVURJTkcgQUxMIElNUExJRUQgV0FSUkFOVElFUyBPRiBNRVJDSEFOVEFCSUxJVFlcbkFORCBGSVRORVNTLiBJTiBOTyBFVkVOVCBTSEFMTCBUSEUgQVVUSE9SIEJFIExJQUJMRSBGT1IgQU5ZIFNQRUNJQUwsIERJUkVDVCxcbklORElSRUNULCBPUiBDT05TRVFVRU5USUFMIERBTUFHRVMgT1IgQU5ZIERBTUFHRVMgV0hBVFNPRVZFUiBSRVNVTFRJTkcgRlJPTVxuTE9TUyBPRiBVU0UsIERBVEEgT1IgUFJPRklUUywgV0hFVEhFUiBJTiBBTiBBQ1RJT04gT0YgQ09OVFJBQ1QsIE5FR0xJR0VOQ0UgT1Jcbk9USEVSIFRPUlRJT1VTIEFDVElPTiwgQVJJU0lORyBPVVQgT0YgT1IgSU4gQ09OTkVDVElPTiBXSVRIIFRIRSBVU0UgT1JcblBFUkZPUk1BTkNFIE9GIFRISVMgU09GVFdBUkUuXG4qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiAqLyBmdW5jdGlvbiBvdCh0LCBlLCBpLCBzKSB7XG4gICAgdmFyIG4gPSBhcmd1bWVudHMubGVuZ3RoLCByID0gbiA8IDMgPyBlIDogbnVsbCA9PT0gcyA/IHMgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKGUsIGkpIDogcywgbztcbiAgICBpZiAoXCJvYmplY3RcIiA9PT0gdHlwZW9mIFJlZmxlY3QgJiYgXCJmdW5jdGlvblwiID09PSB0eXBlb2YgUmVmbGVjdC5kZWNvcmF0ZSkgciA9IFJlZmxlY3QuZGVjb3JhdGUodCwgZSwgaSwgcyk7IGVsc2UgZm9yICh2YXIgbCA9IHQubGVuZ3RoIC0gMTsgbCA+PSAwOyBsLS0pIGlmIChvID0gdFtsXSkgciA9IChuIDwgMyA/IG8ocikgOiBuID4gMyA/IG8oZSwgaSwgcikgOiBvKGUsIGkpKSB8fCByO1xuICAgIHJldHVybiBuID4gMyAmJiByICYmIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLCBpLCByKSwgcjtcbn1cblxuZnVuY3Rpb24gbHQodCwgZSkge1xuICAgIHJldHVybiBmdW5jdGlvbihpLCBzKSB7XG4gICAgICAgIGUoaSwgcywgdCk7XG4gICAgfTtcbn1cblxuY29uc3QgaHQgPSBlLmdldE93bjtcblxuY29uc3QgYXQgPSBlLmhhc093bjtcblxuY29uc3QgY3QgPSBlLmRlZmluZTtcblxuY29uc3Qge2Fubm90YXRpb246IHV0LCByZXNvdXJjZTogZnR9ID0gaTtcblxuY29uc3QgZHQgPSB1dC5rZXlGb3I7XG5cbmNvbnN0IG10ID0gZnQua2V5Rm9yO1xuXG5jb25zdCB2dCA9IGZ0LmFwcGVuZFRvO1xuXG5jb25zdCBwdCA9IHV0LmFwcGVuZFRvO1xuXG5jb25zdCBndCA9IHV0LmdldEtleXM7XG5cbmNvbnN0IHd0ID0gKCkgPT4gT2JqZWN0LmNyZWF0ZShudWxsKTtcblxuY29uc3QgYnQgPSBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5O1xuXG5jb25zdCB4dCA9IHd0KCk7XG5cbmNvbnN0IHl0ID0gKHQsIGUsIGkpID0+IHtcbiAgICBpZiAodHJ1ZSA9PT0geHRbZV0pIHJldHVybiB0cnVlO1xuICAgIGlmICghQXQoZSkpIHJldHVybiBmYWxzZTtcbiAgICBjb25zdCBzID0gZS5zbGljZSgwLCA1KTtcbiAgICByZXR1cm4geHRbZV0gPSBcImFyaWEtXCIgPT09IHMgfHwgXCJkYXRhLVwiID09PSBzIHx8IGkuaXNTdGFuZGFyZFN2Z0F0dHJpYnV0ZSh0LCBlKTtcbn07XG5cbmNvbnN0IGt0ID0gdCA9PiB0IGluc3RhbmNlb2YgUHJvbWlzZTtcblxuY29uc3QgQ3QgPSB0ID0+IFwiZnVuY3Rpb25cIiA9PT0gdHlwZW9mIHQ7XG5cbmNvbnN0IEF0ID0gdCA9PiBcInN0cmluZ1wiID09PSB0eXBlb2YgdDtcblxuZnVuY3Rpb24gU3QodCwgZSkge1xuICAgIGxldCBpO1xuICAgIGZ1bmN0aW9uIHModCwgZSkge1xuICAgICAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA+IDEpIGkucHJvcGVydHkgPSBlO1xuICAgICAgICBjdChFdCwgQmluZGFibGVEZWZpbml0aW9uLmNyZWF0ZShlLCB0LCBpKSwgdC5jb25zdHJ1Y3RvciwgZSk7XG4gICAgICAgIHB0KHQuY29uc3RydWN0b3IsIEJ0LmtleUZyb20oZSkpO1xuICAgIH1cbiAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgaSA9IHt9O1xuICAgICAgICBzKHQsIGUpO1xuICAgICAgICByZXR1cm47XG4gICAgfSBlbHNlIGlmIChBdCh0KSkge1xuICAgICAgICBpID0ge307XG4gICAgICAgIHJldHVybiBzO1xuICAgIH1cbiAgICBpID0gdm9pZCAwID09PSB0ID8ge30gOiB0O1xuICAgIHJldHVybiBzO1xufVxuXG5mdW5jdGlvbiBSdCh0KSB7XG4gICAgcmV0dXJuIHQuc3RhcnRzV2l0aChFdCk7XG59XG5cbmNvbnN0IEV0ID0gZHQoXCJiaW5kYWJsZVwiKTtcblxuY29uc3QgQnQgPSBPYmplY3QuZnJlZXplKHtcbiAgICBuYW1lOiBFdCxcbiAgICBrZXlGcm9tOiB0ID0+IGAke0V0fToke3R9YCxcbiAgICBmcm9tKHQsIC4uLmUpIHtcbiAgICAgICAgY29uc3QgaSA9IHt9O1xuICAgICAgICBjb25zdCBzID0gQXJyYXkuaXNBcnJheTtcbiAgICAgICAgZnVuY3Rpb24gbihlKSB7XG4gICAgICAgICAgICBpW2VdID0gQmluZGFibGVEZWZpbml0aW9uLmNyZWF0ZShlLCB0KTtcbiAgICAgICAgfVxuICAgICAgICBmdW5jdGlvbiByKGUsIHMpIHtcbiAgICAgICAgICAgIGlbZV0gPSBzIGluc3RhbmNlb2YgQmluZGFibGVEZWZpbml0aW9uID8gcyA6IEJpbmRhYmxlRGVmaW5pdGlvbi5jcmVhdGUoZSwgdCwgcyk7XG4gICAgICAgIH1cbiAgICAgICAgZnVuY3Rpb24gbyh0KSB7XG4gICAgICAgICAgICBpZiAocyh0KSkgdC5mb3JFYWNoKG4pOyBlbHNlIGlmICh0IGluc3RhbmNlb2YgQmluZGFibGVEZWZpbml0aW9uKSBpW3QucHJvcGVydHldID0gdDsgZWxzZSBpZiAodm9pZCAwICE9PSB0KSBPYmplY3Qua2V5cyh0KS5mb3JFYWNoKChlID0+IHIoZSwgdFtlXSkpKTtcbiAgICAgICAgfVxuICAgICAgICBlLmZvckVhY2gobyk7XG4gICAgICAgIHJldHVybiBpO1xuICAgIH0sXG4gICAgZm9yKHQpIHtcbiAgICAgICAgbGV0IGU7XG4gICAgICAgIGNvbnN0IGkgPSB7XG4gICAgICAgICAgICBhZGQocykge1xuICAgICAgICAgICAgICAgIGxldCBuO1xuICAgICAgICAgICAgICAgIGxldCByO1xuICAgICAgICAgICAgICAgIGlmIChBdChzKSkge1xuICAgICAgICAgICAgICAgICAgICBuID0gcztcbiAgICAgICAgICAgICAgICAgICAgciA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHByb3BlcnR5OiBuXG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgbiA9IHMucHJvcGVydHk7XG4gICAgICAgICAgICAgICAgICAgIHIgPSBzO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlID0gQmluZGFibGVEZWZpbml0aW9uLmNyZWF0ZShuLCB0LCByKTtcbiAgICAgICAgICAgICAgICBpZiAoIWF0KEV0LCB0LCBuKSkgcHQodCwgQnQua2V5RnJvbShuKSk7XG4gICAgICAgICAgICAgICAgY3QoRXQsIGUsIHQsIG4pO1xuICAgICAgICAgICAgICAgIHJldHVybiBpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIG1vZGUodCkge1xuICAgICAgICAgICAgICAgIGUubW9kZSA9IHQ7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgY2FsbGJhY2sodCkge1xuICAgICAgICAgICAgICAgIGUuY2FsbGJhY2sgPSB0O1xuICAgICAgICAgICAgICAgIHJldHVybiBpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGF0dHJpYnV0ZSh0KSB7XG4gICAgICAgICAgICAgICAgZS5hdHRyaWJ1dGUgPSB0O1xuICAgICAgICAgICAgICAgIHJldHVybiBpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHByaW1hcnkoKSB7XG4gICAgICAgICAgICAgICAgZS5wcmltYXJ5ID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICByZXR1cm4gaTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBzZXQodCkge1xuICAgICAgICAgICAgICAgIGUuc2V0ID0gdDtcbiAgICAgICAgICAgICAgICByZXR1cm4gaTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIGk7XG4gICAgfSxcbiAgICBnZXRBbGwodCkge1xuICAgICAgICBjb25zdCBlID0gRXQubGVuZ3RoICsgMTtcbiAgICAgICAgY29uc3QgaSA9IFtdO1xuICAgICAgICBjb25zdCBuID0gcyh0KTtcbiAgICAgICAgbGV0IHIgPSBuLmxlbmd0aDtcbiAgICAgICAgbGV0IG8gPSAwO1xuICAgICAgICBsZXQgbDtcbiAgICAgICAgbGV0IGg7XG4gICAgICAgIGxldCBhO1xuICAgICAgICBsZXQgYztcbiAgICAgICAgd2hpbGUgKC0tciA+PSAwKSB7XG4gICAgICAgICAgICBhID0gbltyXTtcbiAgICAgICAgICAgIGwgPSBndChhKS5maWx0ZXIoUnQpO1xuICAgICAgICAgICAgaCA9IGwubGVuZ3RoO1xuICAgICAgICAgICAgZm9yIChjID0gMDsgYyA8IGg7ICsrYykgaVtvKytdID0gaHQoRXQsIGEsIGxbY10uc2xpY2UoZSkpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBpO1xuICAgIH1cbn0pO1xuXG5jbGFzcyBCaW5kYWJsZURlZmluaXRpb24ge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUsIGksIHMsIG4sIHIpIHtcbiAgICAgICAgdGhpcy5hdHRyaWJ1dGUgPSB0O1xuICAgICAgICB0aGlzLmNhbGxiYWNrID0gZTtcbiAgICAgICAgdGhpcy5tb2RlID0gaTtcbiAgICAgICAgdGhpcy5wcmltYXJ5ID0gcztcbiAgICAgICAgdGhpcy5wcm9wZXJ0eSA9IG47XG4gICAgICAgIHRoaXMuc2V0ID0gcjtcbiAgICB9XG4gICAgc3RhdGljIGNyZWF0ZSh0LCBlLCBpID0ge30pIHtcbiAgICAgICAgcmV0dXJuIG5ldyBCaW5kYWJsZURlZmluaXRpb24obihpLmF0dHJpYnV0ZSwgcih0KSksIG4oaS5jYWxsYmFjaywgYCR7dH1DaGFuZ2VkYCksIG4oaS5tb2RlLCBELnRvVmlldyksIG4oaS5wcmltYXJ5LCBmYWxzZSksIG4oaS5wcm9wZXJ0eSwgdCksIG4oaS5zZXQsIER0KHQsIGUsIGkpKSk7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBJdCh0LCBlLCBpKSB7XG4gICAgVHQuZGVmaW5lKHQsIGUpO1xufVxuXG5jb25zdCBUdCA9IHtcbiAgICBrZXk6IGR0KFwiY29lcmNlclwiKSxcbiAgICBkZWZpbmUodCwgZSkge1xuICAgICAgICBjdChUdC5rZXksIHRbZV0uYmluZCh0KSwgdCk7XG4gICAgfSxcbiAgICBmb3IodCkge1xuICAgICAgICByZXR1cm4gaHQoVHQua2V5LCB0KTtcbiAgICB9XG59O1xuXG5mdW5jdGlvbiBEdCh0LCBlLCBpID0ge30pIHtcbiAgICB2YXIgcywgbiwgcjtcbiAgICBjb25zdCBsID0gbnVsbCAhPT0gKG4gPSBudWxsICE9PSAocyA9IGkudHlwZSkgJiYgdm9pZCAwICE9PSBzID8gcyA6IFJlZmxlY3QuZ2V0TWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBlLCB0KSkgJiYgdm9pZCAwICE9PSBuID8gbiA6IG51bGw7XG4gICAgaWYgKG51bGwgPT0gbCkgcmV0dXJuIG87XG4gICAgbGV0IGg7XG4gICAgc3dpdGNoIChsKSB7XG4gICAgICBjYXNlIE51bWJlcjpcbiAgICAgIGNhc2UgQm9vbGVhbjpcbiAgICAgIGNhc2UgU3RyaW5nOlxuICAgICAgY2FzZSBCaWdJbnQ6XG4gICAgICAgIGggPSBsO1xuICAgICAgICBicmVhaztcblxuICAgICAgZGVmYXVsdDpcbiAgICAgICAge1xuICAgICAgICAgICAgY29uc3QgdCA9IGwuY29lcmNlO1xuICAgICAgICAgICAgaCA9IFwiZnVuY3Rpb25cIiA9PT0gdHlwZW9mIHQgPyB0LmJpbmQobCkgOiBudWxsICE9PSAociA9IFR0LmZvcihsKSkgJiYgdm9pZCAwICE9PSByID8gciA6IG87XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gaCA9PT0gbyA/IGggOiBQdChoLCBpLm51bGxhYmxlKTtcbn1cblxuZnVuY3Rpb24gUHQodCwgZSkge1xuICAgIHJldHVybiBmdW5jdGlvbihpLCBzKSB7XG4gICAgICAgIHZhciBuO1xuICAgICAgICBpZiAoIShudWxsID09PSBzIHx8IHZvaWQgMCA9PT0gcyA/IHZvaWQgMCA6IHMuZW5hYmxlQ29lcmNpb24pKSByZXR1cm4gaTtcbiAgICAgICAgcmV0dXJuIChudWxsICE9PSBlICYmIHZvaWQgMCAhPT0gZSA/IGUgOiAobnVsbCAhPT0gKG4gPSBudWxsID09PSBzIHx8IHZvaWQgMCA9PT0gcyA/IHZvaWQgMCA6IHMuY29lcmNlTnVsbGlzaCkgJiYgdm9pZCAwICE9PSBuID8gbiA6IGZhbHNlKSA/IGZhbHNlIDogdHJ1ZSkgJiYgbnVsbCA9PSBpID8gaSA6IHQoaSwgcyk7XG4gICAgfTtcbn1cblxuY2xhc3MgQmluZGFibGVPYnNlcnZlciB7XG4gICAgY29uc3RydWN0b3IodCwgZSwgaSwgcywgbiwgcikge1xuICAgICAgICB0aGlzLnNldCA9IHM7XG4gICAgICAgIHRoaXMuJGNvbnRyb2xsZXIgPSBuO1xuICAgICAgICB0aGlzLnQgPSByO1xuICAgICAgICB0aGlzLnYgPSB2b2lkIDA7XG4gICAgICAgIHRoaXMub3YgPSB2b2lkIDA7XG4gICAgICAgIHRoaXMuZiA9IDA7XG4gICAgICAgIGNvbnN0IGwgPSB0W2ldO1xuICAgICAgICBjb25zdCBoID0gdC5wcm9wZXJ0eUNoYW5nZWQ7XG4gICAgICAgIGNvbnN0IGEgPSB0aGlzLmkgPSBDdChsKTtcbiAgICAgICAgY29uc3QgYyA9IHRoaXMudSA9IEN0KGgpO1xuICAgICAgICBjb25zdCB1ID0gdGhpcy5ocyA9IHMgIT09IG87XG4gICAgICAgIGxldCBmO1xuICAgICAgICB0aGlzLm8gPSB0O1xuICAgICAgICB0aGlzLmsgPSBlO1xuICAgICAgICB0aGlzLmNiID0gYSA/IGwgOiBvO1xuICAgICAgICB0aGlzLkMgPSBjID8gaCA6IG87XG4gICAgICAgIGlmICh2b2lkIDAgPT09IHRoaXMuY2IgJiYgIWMgJiYgIXUpIHRoaXMuaU8gPSBmYWxzZTsgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmlPID0gdHJ1ZTtcbiAgICAgICAgICAgIGYgPSB0W2VdO1xuICAgICAgICAgICAgdGhpcy52ID0gdSAmJiB2b2lkIDAgIT09IGYgPyBzKGYsIHRoaXMudCkgOiBmO1xuICAgICAgICAgICAgdGhpcy5BKCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZ2V0IHR5cGUoKSB7XG4gICAgICAgIHJldHVybiAxO1xuICAgIH1cbiAgICBnZXRWYWx1ZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudjtcbiAgICB9XG4gICAgc2V0VmFsdWUodCwgZSkge1xuICAgICAgICBpZiAodGhpcy5ocykgdCA9IHRoaXMuc2V0KHQsIHRoaXMudCk7XG4gICAgICAgIGNvbnN0IGkgPSB0aGlzLnY7XG4gICAgICAgIGlmICh0aGlzLmlPKSB7XG4gICAgICAgICAgICBpZiAoT2JqZWN0LmlzKHQsIGkpKSByZXR1cm47XG4gICAgICAgICAgICB0aGlzLnYgPSB0O1xuICAgICAgICAgICAgdGhpcy5vdiA9IGk7XG4gICAgICAgICAgICB0aGlzLmYgPSBlO1xuICAgICAgICAgICAgaWYgKG51bGwgPT0gdGhpcy4kY29udHJvbGxlciB8fCB0aGlzLiRjb250cm9sbGVyLmlzQm91bmQpIHtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5pKSB0aGlzLmNiLmNhbGwodGhpcy5vLCB0LCBpLCBlKTtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy51KSB0aGlzLkMuY2FsbCh0aGlzLm8sIHRoaXMuaywgdCwgaSwgZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnF1ZXVlLmFkZCh0aGlzKTtcbiAgICAgICAgfSBlbHNlIHRoaXMub1t0aGlzLmtdID0gdDtcbiAgICB9XG4gICAgc3Vic2NyaWJlKHQpIHtcbiAgICAgICAgaWYgKGZhbHNlID09PSAhdGhpcy5pTykge1xuICAgICAgICAgICAgdGhpcy5pTyA9IHRydWU7XG4gICAgICAgICAgICB0aGlzLnYgPSB0aGlzLmhzID8gdGhpcy5zZXQodGhpcy5vW3RoaXMua10sIHRoaXMudCkgOiB0aGlzLm9bdGhpcy5rXTtcbiAgICAgICAgICAgIHRoaXMuQSgpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuc3Vicy5hZGQodCk7XG4gICAgfVxuICAgIGZsdXNoKCkge1xuICAgICAgICBPdCA9IHRoaXMub3Y7XG4gICAgICAgIHRoaXMub3YgPSB0aGlzLnY7XG4gICAgICAgIHRoaXMuc3Vicy5ub3RpZnkodGhpcy52LCBPdCwgdGhpcy5mKTtcbiAgICB9XG4gICAgQSgpIHtcbiAgICAgICAgUmVmbGVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLm8sIHRoaXMuaywge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGdldDogKCkgPT4gdGhpcy52LFxuICAgICAgICAgICAgc2V0OiB0ID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLnNldFZhbHVlKHQsIDApO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG59XG5cblAoQmluZGFibGVPYnNlcnZlcik7XG5cbk8oQmluZGFibGVPYnNlcnZlcik7XG5cbmxldCBPdDtcblxuY2xhc3MgQ2hhclNwZWMge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUsIGksIHMpIHtcbiAgICAgICAgdGhpcy5jaGFycyA9IHQ7XG4gICAgICAgIHRoaXMucmVwZWF0ID0gZTtcbiAgICAgICAgdGhpcy5pc1N5bWJvbCA9IGk7XG4gICAgICAgIHRoaXMuaXNJbnZlcnRlZCA9IHM7XG4gICAgICAgIGlmIChzKSBzd2l0Y2ggKHQubGVuZ3RoKSB7XG4gICAgICAgICAgY2FzZSAwOlxuICAgICAgICAgICAgdGhpcy5oYXMgPSB0aGlzLlI7XG4gICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgIHRoaXMuaGFzID0gdGhpcy5CO1xuICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgdGhpcy5oYXMgPSB0aGlzLkk7XG4gICAgICAgIH0gZWxzZSBzd2l0Y2ggKHQubGVuZ3RoKSB7XG4gICAgICAgICAgY2FzZSAwOlxuICAgICAgICAgICAgdGhpcy5oYXMgPSB0aGlzLlQ7XG4gICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgIHRoaXMuaGFzID0gdGhpcy5QO1xuICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgdGhpcy5oYXMgPSB0aGlzLk87XG4gICAgICAgIH1cbiAgICB9XG4gICAgZXF1YWxzKHQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY2hhcnMgPT09IHQuY2hhcnMgJiYgdGhpcy5yZXBlYXQgPT09IHQucmVwZWF0ICYmIHRoaXMuaXNTeW1ib2wgPT09IHQuaXNTeW1ib2wgJiYgdGhpcy5pc0ludmVydGVkID09PSB0LmlzSW52ZXJ0ZWQ7XG4gICAgfVxuICAgIE8odCkge1xuICAgICAgICByZXR1cm4gdGhpcy5jaGFycy5pbmNsdWRlcyh0KTtcbiAgICB9XG4gICAgUCh0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLmNoYXJzID09PSB0O1xuICAgIH1cbiAgICBUKHQpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBJKHQpIHtcbiAgICAgICAgcmV0dXJuICF0aGlzLmNoYXJzLmluY2x1ZGVzKHQpO1xuICAgIH1cbiAgICBCKHQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY2hhcnMgIT09IHQ7XG4gICAgfVxuICAgIFIodCkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG59XG5cbmNsYXNzIEludGVycHJldGF0aW9uIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgdGhpcy5wYXJ0cyA9IGg7XG4gICAgICAgIHRoaXMuJCA9IFwiXCI7XG4gICAgICAgIHRoaXMuTCA9IHt9O1xuICAgICAgICB0aGlzLnEgPSB7fTtcbiAgICB9XG4gICAgZ2V0IHBhdHRlcm4oKSB7XG4gICAgICAgIGNvbnN0IHQgPSB0aGlzLiQ7XG4gICAgICAgIGlmIChcIlwiID09PSB0KSByZXR1cm4gbnVsbDsgZWxzZSByZXR1cm4gdDtcbiAgICB9XG4gICAgc2V0IHBhdHRlcm4odCkge1xuICAgICAgICBpZiAobnVsbCA9PSB0KSB7XG4gICAgICAgICAgICB0aGlzLiQgPSBcIlwiO1xuICAgICAgICAgICAgdGhpcy5wYXJ0cyA9IGg7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLiQgPSB0O1xuICAgICAgICAgICAgdGhpcy5wYXJ0cyA9IHRoaXMucVt0XTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBhcHBlbmQodCwgZSkge1xuICAgICAgICBjb25zdCBpID0gdGhpcy5MO1xuICAgICAgICBpZiAodm9pZCAwID09PSBpW3RdKSBpW3RdID0gZTsgZWxzZSBpW3RdICs9IGU7XG4gICAgfVxuICAgIG5leHQodCkge1xuICAgICAgICBjb25zdCBlID0gdGhpcy5MO1xuICAgICAgICBsZXQgaTtcbiAgICAgICAgaWYgKHZvaWQgMCAhPT0gZVt0XSkge1xuICAgICAgICAgICAgaSA9IHRoaXMucTtcbiAgICAgICAgICAgIGlmICh2b2lkIDAgPT09IGlbdF0pIGlbdF0gPSBbIGVbdF0gXTsgZWxzZSBpW3RdLnB1c2goZVt0XSk7XG4gICAgICAgICAgICBlW3RdID0gdm9pZCAwO1xuICAgICAgICB9XG4gICAgfVxufVxuXG5jbGFzcyBTdGF0ZSQxIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCAuLi5lKSB7XG4gICAgICAgIHRoaXMuY2hhclNwZWMgPSB0O1xuICAgICAgICB0aGlzLm5leHRTdGF0ZXMgPSBbXTtcbiAgICAgICAgdGhpcy50eXBlcyA9IG51bGw7XG4gICAgICAgIHRoaXMuaXNFbmRwb2ludCA9IGZhbHNlO1xuICAgICAgICB0aGlzLnBhdHRlcm5zID0gZTtcbiAgICB9XG4gICAgZ2V0IHBhdHRlcm4oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmlzRW5kcG9pbnQgPyB0aGlzLnBhdHRlcm5zWzBdIDogbnVsbDtcbiAgICB9XG4gICAgZmluZENoaWxkKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IHRoaXMubmV4dFN0YXRlcztcbiAgICAgICAgY29uc3QgaSA9IGUubGVuZ3RoO1xuICAgICAgICBsZXQgcyA9IG51bGw7XG4gICAgICAgIGxldCBuID0gMDtcbiAgICAgICAgZm9yICg7biA8IGk7ICsrbikge1xuICAgICAgICAgICAgcyA9IGVbbl07XG4gICAgICAgICAgICBpZiAodC5lcXVhbHMocy5jaGFyU3BlYykpIHJldHVybiBzO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICBhcHBlbmQodCwgZSkge1xuICAgICAgICBjb25zdCBpID0gdGhpcy5wYXR0ZXJucztcbiAgICAgICAgaWYgKCFpLmluY2x1ZGVzKGUpKSBpLnB1c2goZSk7XG4gICAgICAgIGxldCBzID0gdGhpcy5maW5kQ2hpbGQodCk7XG4gICAgICAgIGlmIChudWxsID09IHMpIHtcbiAgICAgICAgICAgIHMgPSBuZXcgU3RhdGUkMSh0LCBlKTtcbiAgICAgICAgICAgIHRoaXMubmV4dFN0YXRlcy5wdXNoKHMpO1xuICAgICAgICAgICAgaWYgKHQucmVwZWF0KSBzLm5leHRTdGF0ZXMucHVzaChzKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcztcbiAgICB9XG4gICAgZmluZE1hdGNoZXModCwgZSkge1xuICAgICAgICBjb25zdCBpID0gW107XG4gICAgICAgIGNvbnN0IHMgPSB0aGlzLm5leHRTdGF0ZXM7XG4gICAgICAgIGNvbnN0IG4gPSBzLmxlbmd0aDtcbiAgICAgICAgbGV0IHIgPSAwO1xuICAgICAgICBsZXQgbyA9IG51bGw7XG4gICAgICAgIGxldCBsID0gMDtcbiAgICAgICAgbGV0IGggPSAwO1xuICAgICAgICBmb3IgKDtsIDwgbjsgKytsKSB7XG4gICAgICAgICAgICBvID0gc1tsXTtcbiAgICAgICAgICAgIGlmIChvLmNoYXJTcGVjLmhhcyh0KSkge1xuICAgICAgICAgICAgICAgIGkucHVzaChvKTtcbiAgICAgICAgICAgICAgICByID0gby5wYXR0ZXJucy5sZW5ndGg7XG4gICAgICAgICAgICAgICAgaCA9IDA7XG4gICAgICAgICAgICAgICAgaWYgKG8uY2hhclNwZWMuaXNTeW1ib2wpIGZvciAoO2ggPCByOyArK2gpIGUubmV4dChvLnBhdHRlcm5zW2hdKTsgZWxzZSBmb3IgKDtoIDwgcjsgKytoKSBlLmFwcGVuZChvLnBhdHRlcm5zW2hdLCB0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gaTtcbiAgICB9XG59XG5cbmNsYXNzIFN0YXRpY1NlZ21lbnQge1xuICAgIGNvbnN0cnVjdG9yKHQpIHtcbiAgICAgICAgdGhpcy50ZXh0ID0gdDtcbiAgICAgICAgY29uc3QgZSA9IHRoaXMubGVuID0gdC5sZW5ndGg7XG4gICAgICAgIGNvbnN0IGkgPSB0aGlzLnNwZWNzID0gW107XG4gICAgICAgIGxldCBzID0gMDtcbiAgICAgICAgZm9yICg7ZSA+IHM7ICsrcykgaS5wdXNoKG5ldyBDaGFyU3BlYyh0W3NdLCBmYWxzZSwgZmFsc2UsIGZhbHNlKSk7XG4gICAgfVxuICAgIGVhY2hDaGFyKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IHRoaXMubGVuO1xuICAgICAgICBjb25zdCBpID0gdGhpcy5zcGVjcztcbiAgICAgICAgbGV0IHMgPSAwO1xuICAgICAgICBmb3IgKDtlID4gczsgKytzKSB0KGlbc10pO1xuICAgIH1cbn1cblxuY2xhc3MgRHluYW1pY1NlZ21lbnQge1xuICAgIGNvbnN0cnVjdG9yKHQpIHtcbiAgICAgICAgdGhpcy50ZXh0ID0gXCJQQVJUXCI7XG4gICAgICAgIHRoaXMuc3BlYyA9IG5ldyBDaGFyU3BlYyh0LCB0cnVlLCBmYWxzZSwgdHJ1ZSk7XG4gICAgfVxuICAgIGVhY2hDaGFyKHQpIHtcbiAgICAgICAgdCh0aGlzLnNwZWMpO1xuICAgIH1cbn1cblxuY2xhc3MgU3ltYm9sU2VnbWVudCB7XG4gICAgY29uc3RydWN0b3IodCkge1xuICAgICAgICB0aGlzLnRleHQgPSB0O1xuICAgICAgICB0aGlzLnNwZWMgPSBuZXcgQ2hhclNwZWModCwgZmFsc2UsIHRydWUsIGZhbHNlKTtcbiAgICB9XG4gICAgZWFjaENoYXIodCkge1xuICAgICAgICB0KHRoaXMuc3BlYyk7XG4gICAgfVxufVxuXG5jbGFzcyBTZWdtZW50VHlwZXMge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICB0aGlzLnN0YXRpY3MgPSAwO1xuICAgICAgICB0aGlzLmR5bmFtaWNzID0gMDtcbiAgICAgICAgdGhpcy5zeW1ib2xzID0gMDtcbiAgICB9XG59XG5cbmNvbnN0ICR0ID0gbC5jcmVhdGVJbnRlcmZhY2UoXCJJU3ludGF4SW50ZXJwcmV0ZXJcIiwgKHQgPT4gdC5zaW5nbGV0b24oU3ludGF4SW50ZXJwcmV0ZXIpKSk7XG5cbmNsYXNzIFN5bnRheEludGVycHJldGVyIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgdGhpcy5yb290U3RhdGUgPSBuZXcgU3RhdGUkMShudWxsKTtcbiAgICAgICAgdGhpcy5pbml0aWFsU3RhdGVzID0gWyB0aGlzLnJvb3RTdGF0ZSBdO1xuICAgIH1cbiAgICBhZGQodCkge1xuICAgICAgICB0ID0gdC5zbGljZSgwKS5zb3J0KCgodCwgZSkgPT4gdC5wYXR0ZXJuID4gZS5wYXR0ZXJuID8gMSA6IC0xKSk7XG4gICAgICAgIGNvbnN0IGUgPSB0Lmxlbmd0aDtcbiAgICAgICAgbGV0IGk7XG4gICAgICAgIGxldCBzO1xuICAgICAgICBsZXQgbjtcbiAgICAgICAgbGV0IHI7XG4gICAgICAgIGxldCBvO1xuICAgICAgICBsZXQgbDtcbiAgICAgICAgbGV0IGg7XG4gICAgICAgIGxldCBhID0gMDtcbiAgICAgICAgbGV0IGM7XG4gICAgICAgIHdoaWxlIChlID4gYSkge1xuICAgICAgICAgICAgaSA9IHRoaXMucm9vdFN0YXRlO1xuICAgICAgICAgICAgcyA9IHRbYV07XG4gICAgICAgICAgICBuID0gcy5wYXR0ZXJuO1xuICAgICAgICAgICAgciA9IG5ldyBTZWdtZW50VHlwZXM7XG4gICAgICAgICAgICBvID0gdGhpcy5wYXJzZShzLCByKTtcbiAgICAgICAgICAgIGwgPSBvLmxlbmd0aDtcbiAgICAgICAgICAgIGggPSB0ID0+IHtcbiAgICAgICAgICAgICAgICBpID0gaS5hcHBlbmQodCwgbik7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgZm9yIChjID0gMDsgbCA+IGM7ICsrYykgb1tjXS5lYWNoQ2hhcihoKTtcbiAgICAgICAgICAgIGkudHlwZXMgPSByO1xuICAgICAgICAgICAgaS5pc0VuZHBvaW50ID0gdHJ1ZTtcbiAgICAgICAgICAgICsrYTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBpbnRlcnByZXQodCkge1xuICAgICAgICBjb25zdCBlID0gbmV3IEludGVycHJldGF0aW9uO1xuICAgICAgICBjb25zdCBpID0gdC5sZW5ndGg7XG4gICAgICAgIGxldCBzID0gdGhpcy5pbml0aWFsU3RhdGVzO1xuICAgICAgICBsZXQgbiA9IDA7XG4gICAgICAgIGxldCByO1xuICAgICAgICBmb3IgKDtuIDwgaTsgKytuKSB7XG4gICAgICAgICAgICBzID0gdGhpcy5nZXROZXh0U3RhdGVzKHMsIHQuY2hhckF0KG4pLCBlKTtcbiAgICAgICAgICAgIGlmICgwID09PSBzLmxlbmd0aCkgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgcyA9IHMuZmlsdGVyKEx0KTtcbiAgICAgICAgaWYgKHMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgcy5zb3J0KHF0KTtcbiAgICAgICAgICAgIHIgPSBzWzBdO1xuICAgICAgICAgICAgaWYgKCFyLmNoYXJTcGVjLmlzU3ltYm9sKSBlLm5leHQoci5wYXR0ZXJuKTtcbiAgICAgICAgICAgIGUucGF0dGVybiA9IHIucGF0dGVybjtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZTtcbiAgICB9XG4gICAgZ2V0TmV4dFN0YXRlcyh0LCBlLCBpKSB7XG4gICAgICAgIGNvbnN0IHMgPSBbXTtcbiAgICAgICAgbGV0IG4gPSBudWxsO1xuICAgICAgICBjb25zdCByID0gdC5sZW5ndGg7XG4gICAgICAgIGxldCBvID0gMDtcbiAgICAgICAgZm9yICg7byA8IHI7ICsrbykge1xuICAgICAgICAgICAgbiA9IHRbb107XG4gICAgICAgICAgICBzLnB1c2goLi4ubi5maW5kTWF0Y2hlcyhlLCBpKSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHM7XG4gICAgfVxuICAgIHBhcnNlKHQsIGUpIHtcbiAgICAgICAgY29uc3QgaSA9IFtdO1xuICAgICAgICBjb25zdCBzID0gdC5wYXR0ZXJuO1xuICAgICAgICBjb25zdCBuID0gcy5sZW5ndGg7XG4gICAgICAgIGNvbnN0IHIgPSB0LnN5bWJvbHM7XG4gICAgICAgIGxldCBvID0gMDtcbiAgICAgICAgbGV0IGwgPSAwO1xuICAgICAgICBsZXQgaCA9IFwiXCI7XG4gICAgICAgIHdoaWxlIChvIDwgbikge1xuICAgICAgICAgICAgaCA9IHMuY2hhckF0KG8pO1xuICAgICAgICAgICAgaWYgKDAgPT09IHIubGVuZ3RoIHx8ICFyLmluY2x1ZGVzKGgpKSBpZiAobyA9PT0gbCkgaWYgKFwiUFwiID09PSBoICYmIFwiUEFSVFwiID09PSBzLnNsaWNlKG8sIG8gKyA0KSkge1xuICAgICAgICAgICAgICAgIGwgPSBvICs9IDQ7XG4gICAgICAgICAgICAgICAgaS5wdXNoKG5ldyBEeW5hbWljU2VnbWVudChyKSk7XG4gICAgICAgICAgICAgICAgKytlLmR5bmFtaWNzO1xuICAgICAgICAgICAgfSBlbHNlICsrbzsgZWxzZSArK287IGVsc2UgaWYgKG8gIT09IGwpIHtcbiAgICAgICAgICAgICAgICBpLnB1c2gobmV3IFN0YXRpY1NlZ21lbnQocy5zbGljZShsLCBvKSkpO1xuICAgICAgICAgICAgICAgICsrZS5zdGF0aWNzO1xuICAgICAgICAgICAgICAgIGwgPSBvO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBpLnB1c2gobmV3IFN5bWJvbFNlZ21lbnQocy5zbGljZShsLCBvICsgMSkpKTtcbiAgICAgICAgICAgICAgICArK2Uuc3ltYm9scztcbiAgICAgICAgICAgICAgICBsID0gKytvO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChsICE9PSBvKSB7XG4gICAgICAgICAgICBpLnB1c2gobmV3IFN0YXRpY1NlZ21lbnQocy5zbGljZShsLCBvKSkpO1xuICAgICAgICAgICAgKytlLnN0YXRpY3M7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGk7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBMdCh0KSB7XG4gICAgcmV0dXJuIHQuaXNFbmRwb2ludDtcbn1cblxuZnVuY3Rpb24gcXQodCwgZSkge1xuICAgIGNvbnN0IGkgPSB0LnR5cGVzO1xuICAgIGNvbnN0IHMgPSBlLnR5cGVzO1xuICAgIGlmIChpLnN0YXRpY3MgIT09IHMuc3RhdGljcykgcmV0dXJuIHMuc3RhdGljcyAtIGkuc3RhdGljcztcbiAgICBpZiAoaS5keW5hbWljcyAhPT0gcy5keW5hbWljcykgcmV0dXJuIHMuZHluYW1pY3MgLSBpLmR5bmFtaWNzO1xuICAgIGlmIChpLnN5bWJvbHMgIT09IHMuc3ltYm9scykgcmV0dXJuIHMuc3ltYm9scyAtIGkuc3ltYm9scztcbiAgICByZXR1cm4gMDtcbn1cblxuY2xhc3MgQXR0clN5bnRheCB7XG4gICAgY29uc3RydWN0b3IodCwgZSwgaSwgcykge1xuICAgICAgICB0aGlzLnJhd05hbWUgPSB0O1xuICAgICAgICB0aGlzLnJhd1ZhbHVlID0gZTtcbiAgICAgICAgdGhpcy50YXJnZXQgPSBpO1xuICAgICAgICB0aGlzLmNvbW1hbmQgPSBzO1xuICAgIH1cbn1cblxuY29uc3QgTXQgPSBsLmNyZWF0ZUludGVyZmFjZShcIklBdHRyaWJ1dGVQYXR0ZXJuXCIpO1xuXG5jb25zdCBVdCA9IGwuY3JlYXRlSW50ZXJmYWNlKFwiSUF0dHJpYnV0ZVBhcnNlclwiLCAodCA9PiB0LnNpbmdsZXRvbihBdHRyaWJ1dGVQYXJzZXIpKSk7XG5cbmNsYXNzIEF0dHJpYnV0ZVBhcnNlciB7XG4gICAgY29uc3RydWN0b3IodCwgZSkge1xuICAgICAgICB0aGlzLk0gPSB7fTtcbiAgICAgICAgdGhpcy5VID0gdDtcbiAgICAgICAgY29uc3QgaSA9IHRoaXMuRiA9IHt9O1xuICAgICAgICBjb25zdCBzID0gZS5yZWR1Y2UoKCh0LCBlKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBzID0ganQoZS5jb25zdHJ1Y3Rvcik7XG4gICAgICAgICAgICBzLmZvckVhY2goKHQgPT4gaVt0LnBhdHRlcm5dID0gZSkpO1xuICAgICAgICAgICAgcmV0dXJuIHQuY29uY2F0KHMpO1xuICAgICAgICB9KSwgaCk7XG4gICAgICAgIHQuYWRkKHMpO1xuICAgIH1cbiAgICBwYXJzZSh0LCBlKSB7XG4gICAgICAgIGxldCBpID0gdGhpcy5NW3RdO1xuICAgICAgICBpZiAobnVsbCA9PSBpKSBpID0gdGhpcy5NW3RdID0gdGhpcy5VLmludGVycHJldCh0KTtcbiAgICAgICAgY29uc3QgcyA9IGkucGF0dGVybjtcbiAgICAgICAgaWYgKG51bGwgPT0gcykgcmV0dXJuIG5ldyBBdHRyU3ludGF4KHQsIGUsIHQsIG51bGwpOyBlbHNlIHJldHVybiB0aGlzLkZbc11bc10odCwgZSwgaS5wYXJ0cyk7XG4gICAgfVxufVxuXG5BdHRyaWJ1dGVQYXJzZXIuaW5qZWN0ID0gWyAkdCwgYShNdCkgXTtcblxuZnVuY3Rpb24gRnQoLi4udCkge1xuICAgIHJldHVybiBmdW5jdGlvbiBlKGkpIHtcbiAgICAgICAgcmV0dXJuIE50LmRlZmluZSh0LCBpKTtcbiAgICB9O1xufVxuXG5jbGFzcyBBdHRyaWJ1dGVQYXR0ZXJuUmVzb3VyY2VEZWZpbml0aW9uIHtcbiAgICBjb25zdHJ1Y3Rvcih0KSB7XG4gICAgICAgIHRoaXMuVHlwZSA9IHQ7XG4gICAgICAgIHRoaXMubmFtZSA9IHZvaWQgMDtcbiAgICB9XG4gICAgcmVnaXN0ZXIodCkge1xuICAgICAgICBjLnNpbmdsZXRvbihNdCwgdGhpcy5UeXBlKS5yZWdpc3Rlcih0KTtcbiAgICB9XG59XG5cbmNvbnN0IFZ0ID0gbXQoXCJhdHRyaWJ1dGUtcGF0dGVyblwiKTtcblxuY29uc3QgX3QgPSBcImF0dHJpYnV0ZS1wYXR0ZXJuLWRlZmluaXRpb25zXCI7XG5cbmNvbnN0IGp0ID0gdCA9PiBpLmFubm90YXRpb24uZ2V0KHQsIF90KTtcblxuY29uc3QgTnQgPSBPYmplY3QuZnJlZXplKHtcbiAgICBuYW1lOiBWdCxcbiAgICBkZWZpbml0aW9uQW5ub3RhdGlvbktleTogX3QsXG4gICAgZGVmaW5lKHQsIGUpIHtcbiAgICAgICAgY29uc3QgcyA9IG5ldyBBdHRyaWJ1dGVQYXR0ZXJuUmVzb3VyY2VEZWZpbml0aW9uKGUpO1xuICAgICAgICBjdChWdCwgcywgZSk7XG4gICAgICAgIHZ0KGUsIFZ0KTtcbiAgICAgICAgaS5hbm5vdGF0aW9uLnNldChlLCBfdCwgdCk7XG4gICAgICAgIHB0KGUsIF90KTtcbiAgICAgICAgcmV0dXJuIGU7XG4gICAgfSxcbiAgICBnZXRQYXR0ZXJuRGVmaW5pdGlvbnM6IGp0XG59KTtcblxubGV0IFd0ID0gY2xhc3MgRG90U2VwYXJhdGVkQXR0cmlidXRlUGF0dGVybiB7XG4gICAgXCJQQVJULlBBUlRcIih0LCBlLCBpKSB7XG4gICAgICAgIHJldHVybiBuZXcgQXR0clN5bnRheCh0LCBlLCBpWzBdLCBpWzFdKTtcbiAgICB9XG4gICAgXCJQQVJULlBBUlQuUEFSVFwiKHQsIGUsIGkpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBBdHRyU3ludGF4KHQsIGUsIGlbMF0sIGlbMl0pO1xuICAgIH1cbn07XG5cbld0ID0gb3QoWyBGdCh7XG4gICAgcGF0dGVybjogXCJQQVJULlBBUlRcIixcbiAgICBzeW1ib2xzOiBcIi5cIlxufSwge1xuICAgIHBhdHRlcm46IFwiUEFSVC5QQVJULlBBUlRcIixcbiAgICBzeW1ib2xzOiBcIi5cIlxufSkgXSwgV3QpO1xuXG5sZXQgSHQgPSBjbGFzcyBSZWZBdHRyaWJ1dGVQYXR0ZXJuIHtcbiAgICByZWYodCwgZSwgaSkge1xuICAgICAgICByZXR1cm4gbmV3IEF0dHJTeW50YXgodCwgZSwgXCJlbGVtZW50XCIsIFwicmVmXCIpO1xuICAgIH1cbiAgICBcIlBBUlQucmVmXCIodCwgZSwgaSkge1xuICAgICAgICByZXR1cm4gbmV3IEF0dHJTeW50YXgodCwgZSwgaVswXSwgXCJyZWZcIik7XG4gICAgfVxufTtcblxuSHQgPSBvdChbIEZ0KHtcbiAgICBwYXR0ZXJuOiBcInJlZlwiLFxuICAgIHN5bWJvbHM6IFwiXCJcbn0sIHtcbiAgICBwYXR0ZXJuOiBcIlBBUlQucmVmXCIsXG4gICAgc3ltYm9sczogXCIuXCJcbn0pIF0sIEh0KTtcblxubGV0IHp0ID0gY2xhc3MgQ29sb25QcmVmaXhlZEJpbmRBdHRyaWJ1dGVQYXR0ZXJuIHtcbiAgICBcIjpQQVJUXCIodCwgZSwgaSkge1xuICAgICAgICByZXR1cm4gbmV3IEF0dHJTeW50YXgodCwgZSwgaVswXSwgXCJiaW5kXCIpO1xuICAgIH1cbn07XG5cbnp0ID0gb3QoWyBGdCh7XG4gICAgcGF0dGVybjogXCI6UEFSVFwiLFxuICAgIHN5bWJvbHM6IFwiOlwiXG59KSBdLCB6dCk7XG5cbmxldCBHdCA9IGNsYXNzIEF0UHJlZml4ZWRUcmlnZ2VyQXR0cmlidXRlUGF0dGVybiB7XG4gICAgXCJAUEFSVFwiKHQsIGUsIGkpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBBdHRyU3ludGF4KHQsIGUsIGlbMF0sIFwidHJpZ2dlclwiKTtcbiAgICB9XG59O1xuXG5HdCA9IG90KFsgRnQoe1xuICAgIHBhdHRlcm46IFwiQFBBUlRcIixcbiAgICBzeW1ib2xzOiBcIkBcIlxufSkgXSwgR3QpO1xuXG5sZXQgWHQgPSBjbGFzcyBTcHJlYWRBdHRyaWJ1dGVQYXR0ZXJuIHtcbiAgICBcIi4uLiRhdHRyc1wiKHQsIGUsIGkpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBBdHRyU3ludGF4KHQsIGUsIFwiXCIsIFwiLi4uJGF0dHJzXCIpO1xuICAgIH1cbn07XG5cblh0ID0gb3QoWyBGdCh7XG4gICAgcGF0dGVybjogXCIuLi4kYXR0cnNcIixcbiAgICBzeW1ib2xzOiBcIlwiXG59KSBdLCBYdCk7XG5cbmNvbnN0IEt0ID0gdTtcblxuY29uc3QgWXQgPSBsLmNyZWF0ZUludGVyZmFjZShcIklTVkdBbmFseXplclwiLCAodCA9PiB0LnNpbmdsZXRvbihOb29wU1ZHQW5hbHl6ZXIpKSk7XG5cbmNsYXNzIE5vb3BTVkdBbmFseXplciB7XG4gICAgaXNTdGFuZGFyZFN2Z0F0dHJpYnV0ZSh0LCBlKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIFF0KHQpIHtcbiAgICBjb25zdCBlID0gd3QoKTtcbiAgICBsZXQgaTtcbiAgICBmb3IgKGkgb2YgdCkgZVtpXSA9IHRydWU7XG4gICAgcmV0dXJuIGU7XG59XG5cbmNsYXNzIFNWR0FuYWx5emVyIHtcbiAgICBjb25zdHJ1Y3Rvcih0KSB7XG4gICAgICAgIHRoaXMuViA9IE9iamVjdC5hc3NpZ24od3QoKSwge1xuICAgICAgICAgICAgYTogUXQoWyBcImNsYXNzXCIsIFwiZXh0ZXJuYWxSZXNvdXJjZXNSZXF1aXJlZFwiLCBcImlkXCIsIFwib25hY3RpdmF0ZVwiLCBcIm9uY2xpY2tcIiwgXCJvbmZvY3VzaW5cIiwgXCJvbmZvY3Vzb3V0XCIsIFwib25sb2FkXCIsIFwib25tb3VzZWRvd25cIiwgXCJvbm1vdXNlbW92ZVwiLCBcIm9ubW91c2VvdXRcIiwgXCJvbm1vdXNlb3ZlclwiLCBcIm9ubW91c2V1cFwiLCBcInJlcXVpcmVkRXh0ZW5zaW9uc1wiLCBcInJlcXVpcmVkRmVhdHVyZXNcIiwgXCJzdHlsZVwiLCBcInN5c3RlbUxhbmd1YWdlXCIsIFwidGFyZ2V0XCIsIFwidHJhbnNmb3JtXCIsIFwieGxpbms6YWN0dWF0ZVwiLCBcInhsaW5rOmFyY3JvbGVcIiwgXCJ4bGluazpocmVmXCIsIFwieGxpbms6cm9sZVwiLCBcInhsaW5rOnNob3dcIiwgXCJ4bGluazp0aXRsZVwiLCBcInhsaW5rOnR5cGVcIiwgXCJ4bWw6YmFzZVwiLCBcInhtbDpsYW5nXCIsIFwieG1sOnNwYWNlXCIgXSksXG4gICAgICAgICAgICBhbHRHbHlwaDogUXQoWyBcImNsYXNzXCIsIFwiZHhcIiwgXCJkeVwiLCBcImV4dGVybmFsUmVzb3VyY2VzUmVxdWlyZWRcIiwgXCJmb3JtYXRcIiwgXCJnbHlwaFJlZlwiLCBcImlkXCIsIFwib25hY3RpdmF0ZVwiLCBcIm9uY2xpY2tcIiwgXCJvbmZvY3VzaW5cIiwgXCJvbmZvY3Vzb3V0XCIsIFwib25sb2FkXCIsIFwib25tb3VzZWRvd25cIiwgXCJvbm1vdXNlbW92ZVwiLCBcIm9ubW91c2VvdXRcIiwgXCJvbm1vdXNlb3ZlclwiLCBcIm9ubW91c2V1cFwiLCBcInJlcXVpcmVkRXh0ZW5zaW9uc1wiLCBcInJlcXVpcmVkRmVhdHVyZXNcIiwgXCJyb3RhdGVcIiwgXCJzdHlsZVwiLCBcInN5c3RlbUxhbmd1YWdlXCIsIFwieFwiLCBcInhsaW5rOmFjdHVhdGVcIiwgXCJ4bGluazphcmNyb2xlXCIsIFwieGxpbms6aHJlZlwiLCBcInhsaW5rOnJvbGVcIiwgXCJ4bGluazpzaG93XCIsIFwieGxpbms6dGl0bGVcIiwgXCJ4bGluazp0eXBlXCIsIFwieG1sOmJhc2VcIiwgXCJ4bWw6bGFuZ1wiLCBcInhtbDpzcGFjZVwiLCBcInlcIiBdKSxcbiAgICAgICAgICAgIGFsdGdseXBoOiB3dCgpLFxuICAgICAgICAgICAgYWx0R2x5cGhEZWY6IFF0KFsgXCJpZFwiLCBcInhtbDpiYXNlXCIsIFwieG1sOmxhbmdcIiwgXCJ4bWw6c3BhY2VcIiBdKSxcbiAgICAgICAgICAgIGFsdGdseXBoZGVmOiB3dCgpLFxuICAgICAgICAgICAgYWx0R2x5cGhJdGVtOiBRdChbIFwiaWRcIiwgXCJ4bWw6YmFzZVwiLCBcInhtbDpsYW5nXCIsIFwieG1sOnNwYWNlXCIgXSksXG4gICAgICAgICAgICBhbHRnbHlwaGl0ZW06IHd0KCksXG4gICAgICAgICAgICBhbmltYXRlOiBRdChbIFwiYWNjdW11bGF0ZVwiLCBcImFkZGl0aXZlXCIsIFwiYXR0cmlidXRlTmFtZVwiLCBcImF0dHJpYnV0ZVR5cGVcIiwgXCJiZWdpblwiLCBcImJ5XCIsIFwiY2FsY01vZGVcIiwgXCJkdXJcIiwgXCJlbmRcIiwgXCJleHRlcm5hbFJlc291cmNlc1JlcXVpcmVkXCIsIFwiZmlsbFwiLCBcImZyb21cIiwgXCJpZFwiLCBcImtleVNwbGluZXNcIiwgXCJrZXlUaW1lc1wiLCBcIm1heFwiLCBcIm1pblwiLCBcIm9uYmVnaW5cIiwgXCJvbmVuZFwiLCBcIm9ubG9hZFwiLCBcIm9ucmVwZWF0XCIsIFwicmVwZWF0Q291bnRcIiwgXCJyZXBlYXREdXJcIiwgXCJyZXF1aXJlZEV4dGVuc2lvbnNcIiwgXCJyZXF1aXJlZEZlYXR1cmVzXCIsIFwicmVzdGFydFwiLCBcInN5c3RlbUxhbmd1YWdlXCIsIFwidG9cIiwgXCJ2YWx1ZXNcIiwgXCJ4bGluazphY3R1YXRlXCIsIFwieGxpbms6YXJjcm9sZVwiLCBcInhsaW5rOmhyZWZcIiwgXCJ4bGluazpyb2xlXCIsIFwieGxpbms6c2hvd1wiLCBcInhsaW5rOnRpdGxlXCIsIFwieGxpbms6dHlwZVwiLCBcInhtbDpiYXNlXCIsIFwieG1sOmxhbmdcIiwgXCJ4bWw6c3BhY2VcIiBdKSxcbiAgICAgICAgICAgIGFuaW1hdGVDb2xvcjogUXQoWyBcImFjY3VtdWxhdGVcIiwgXCJhZGRpdGl2ZVwiLCBcImF0dHJpYnV0ZU5hbWVcIiwgXCJhdHRyaWJ1dGVUeXBlXCIsIFwiYmVnaW5cIiwgXCJieVwiLCBcImNhbGNNb2RlXCIsIFwiZHVyXCIsIFwiZW5kXCIsIFwiZXh0ZXJuYWxSZXNvdXJjZXNSZXF1aXJlZFwiLCBcImZpbGxcIiwgXCJmcm9tXCIsIFwiaWRcIiwgXCJrZXlTcGxpbmVzXCIsIFwia2V5VGltZXNcIiwgXCJtYXhcIiwgXCJtaW5cIiwgXCJvbmJlZ2luXCIsIFwib25lbmRcIiwgXCJvbmxvYWRcIiwgXCJvbnJlcGVhdFwiLCBcInJlcGVhdENvdW50XCIsIFwicmVwZWF0RHVyXCIsIFwicmVxdWlyZWRFeHRlbnNpb25zXCIsIFwicmVxdWlyZWRGZWF0dXJlc1wiLCBcInJlc3RhcnRcIiwgXCJzeXN0ZW1MYW5ndWFnZVwiLCBcInRvXCIsIFwidmFsdWVzXCIsIFwieGxpbms6YWN0dWF0ZVwiLCBcInhsaW5rOmFyY3JvbGVcIiwgXCJ4bGluazpocmVmXCIsIFwieGxpbms6cm9sZVwiLCBcInhsaW5rOnNob3dcIiwgXCJ4bGluazp0aXRsZVwiLCBcInhsaW5rOnR5cGVcIiwgXCJ4bWw6YmFzZVwiLCBcInhtbDpsYW5nXCIsIFwieG1sOnNwYWNlXCIgXSksXG4gICAgICAgICAgICBhbmltYXRlTW90aW9uOiBRdChbIFwiYWNjdW11bGF0ZVwiLCBcImFkZGl0aXZlXCIsIFwiYmVnaW5cIiwgXCJieVwiLCBcImNhbGNNb2RlXCIsIFwiZHVyXCIsIFwiZW5kXCIsIFwiZXh0ZXJuYWxSZXNvdXJjZXNSZXF1aXJlZFwiLCBcImZpbGxcIiwgXCJmcm9tXCIsIFwiaWRcIiwgXCJrZXlQb2ludHNcIiwgXCJrZXlTcGxpbmVzXCIsIFwia2V5VGltZXNcIiwgXCJtYXhcIiwgXCJtaW5cIiwgXCJvbmJlZ2luXCIsIFwib25lbmRcIiwgXCJvbmxvYWRcIiwgXCJvbnJlcGVhdFwiLCBcIm9yaWdpblwiLCBcInBhdGhcIiwgXCJyZXBlYXRDb3VudFwiLCBcInJlcGVhdER1clwiLCBcInJlcXVpcmVkRXh0ZW5zaW9uc1wiLCBcInJlcXVpcmVkRmVhdHVyZXNcIiwgXCJyZXN0YXJ0XCIsIFwicm90YXRlXCIsIFwic3lzdGVtTGFuZ3VhZ2VcIiwgXCJ0b1wiLCBcInZhbHVlc1wiLCBcInhsaW5rOmFjdHVhdGVcIiwgXCJ4bGluazphcmNyb2xlXCIsIFwieGxpbms6aHJlZlwiLCBcInhsaW5rOnJvbGVcIiwgXCJ4bGluazpzaG93XCIsIFwieGxpbms6dGl0bGVcIiwgXCJ4bGluazp0eXBlXCIsIFwieG1sOmJhc2VcIiwgXCJ4bWw6bGFuZ1wiLCBcInhtbDpzcGFjZVwiIF0pLFxuICAgICAgICAgICAgYW5pbWF0ZVRyYW5zZm9ybTogUXQoWyBcImFjY3VtdWxhdGVcIiwgXCJhZGRpdGl2ZVwiLCBcImF0dHJpYnV0ZU5hbWVcIiwgXCJhdHRyaWJ1dGVUeXBlXCIsIFwiYmVnaW5cIiwgXCJieVwiLCBcImNhbGNNb2RlXCIsIFwiZHVyXCIsIFwiZW5kXCIsIFwiZXh0ZXJuYWxSZXNvdXJjZXNSZXF1aXJlZFwiLCBcImZpbGxcIiwgXCJmcm9tXCIsIFwiaWRcIiwgXCJrZXlTcGxpbmVzXCIsIFwia2V5VGltZXNcIiwgXCJtYXhcIiwgXCJtaW5cIiwgXCJvbmJlZ2luXCIsIFwib25lbmRcIiwgXCJvbmxvYWRcIiwgXCJvbnJlcGVhdFwiLCBcInJlcGVhdENvdW50XCIsIFwicmVwZWF0RHVyXCIsIFwicmVxdWlyZWRFeHRlbnNpb25zXCIsIFwicmVxdWlyZWRGZWF0dXJlc1wiLCBcInJlc3RhcnRcIiwgXCJzeXN0ZW1MYW5ndWFnZVwiLCBcInRvXCIsIFwidHlwZVwiLCBcInZhbHVlc1wiLCBcInhsaW5rOmFjdHVhdGVcIiwgXCJ4bGluazphcmNyb2xlXCIsIFwieGxpbms6aHJlZlwiLCBcInhsaW5rOnJvbGVcIiwgXCJ4bGluazpzaG93XCIsIFwieGxpbms6dGl0bGVcIiwgXCJ4bGluazp0eXBlXCIsIFwieG1sOmJhc2VcIiwgXCJ4bWw6bGFuZ1wiLCBcInhtbDpzcGFjZVwiIF0pLFxuICAgICAgICAgICAgY2lyY2xlOiBRdChbIFwiY2xhc3NcIiwgXCJjeFwiLCBcImN5XCIsIFwiZXh0ZXJuYWxSZXNvdXJjZXNSZXF1aXJlZFwiLCBcImlkXCIsIFwib25hY3RpdmF0ZVwiLCBcIm9uY2xpY2tcIiwgXCJvbmZvY3VzaW5cIiwgXCJvbmZvY3Vzb3V0XCIsIFwib25sb2FkXCIsIFwib25tb3VzZWRvd25cIiwgXCJvbm1vdXNlbW92ZVwiLCBcIm9ubW91c2VvdXRcIiwgXCJvbm1vdXNlb3ZlclwiLCBcIm9ubW91c2V1cFwiLCBcInJcIiwgXCJyZXF1aXJlZEV4dGVuc2lvbnNcIiwgXCJyZXF1aXJlZEZlYXR1cmVzXCIsIFwic3R5bGVcIiwgXCJzeXN0ZW1MYW5ndWFnZVwiLCBcInRyYW5zZm9ybVwiLCBcInhtbDpiYXNlXCIsIFwieG1sOmxhbmdcIiwgXCJ4bWw6c3BhY2VcIiBdKSxcbiAgICAgICAgICAgIGNsaXBQYXRoOiBRdChbIFwiY2xhc3NcIiwgXCJjbGlwUGF0aFVuaXRzXCIsIFwiZXh0ZXJuYWxSZXNvdXJjZXNSZXF1aXJlZFwiLCBcImlkXCIsIFwicmVxdWlyZWRFeHRlbnNpb25zXCIsIFwicmVxdWlyZWRGZWF0dXJlc1wiLCBcInN0eWxlXCIsIFwic3lzdGVtTGFuZ3VhZ2VcIiwgXCJ0cmFuc2Zvcm1cIiwgXCJ4bWw6YmFzZVwiLCBcInhtbDpsYW5nXCIsIFwieG1sOnNwYWNlXCIgXSksXG4gICAgICAgICAgICBcImNvbG9yLXByb2ZpbGVcIjogUXQoWyBcImlkXCIsIFwibG9jYWxcIiwgXCJuYW1lXCIsIFwicmVuZGVyaW5nLWludGVudFwiLCBcInhsaW5rOmFjdHVhdGVcIiwgXCJ4bGluazphcmNyb2xlXCIsIFwieGxpbms6aHJlZlwiLCBcInhsaW5rOnJvbGVcIiwgXCJ4bGluazpzaG93XCIsIFwieGxpbms6dGl0bGVcIiwgXCJ4bGluazp0eXBlXCIsIFwieG1sOmJhc2VcIiwgXCJ4bWw6bGFuZ1wiLCBcInhtbDpzcGFjZVwiIF0pLFxuICAgICAgICAgICAgY3Vyc29yOiBRdChbIFwiZXh0ZXJuYWxSZXNvdXJjZXNSZXF1aXJlZFwiLCBcImlkXCIsIFwicmVxdWlyZWRFeHRlbnNpb25zXCIsIFwicmVxdWlyZWRGZWF0dXJlc1wiLCBcInN5c3RlbUxhbmd1YWdlXCIsIFwieFwiLCBcInhsaW5rOmFjdHVhdGVcIiwgXCJ4bGluazphcmNyb2xlXCIsIFwieGxpbms6aHJlZlwiLCBcInhsaW5rOnJvbGVcIiwgXCJ4bGluazpzaG93XCIsIFwieGxpbms6dGl0bGVcIiwgXCJ4bGluazp0eXBlXCIsIFwieG1sOmJhc2VcIiwgXCJ4bWw6bGFuZ1wiLCBcInhtbDpzcGFjZVwiLCBcInlcIiBdKSxcbiAgICAgICAgICAgIGRlZnM6IFF0KFsgXCJjbGFzc1wiLCBcImV4dGVybmFsUmVzb3VyY2VzUmVxdWlyZWRcIiwgXCJpZFwiLCBcIm9uYWN0aXZhdGVcIiwgXCJvbmNsaWNrXCIsIFwib25mb2N1c2luXCIsIFwib25mb2N1c291dFwiLCBcIm9ubG9hZFwiLCBcIm9ubW91c2Vkb3duXCIsIFwib25tb3VzZW1vdmVcIiwgXCJvbm1vdXNlb3V0XCIsIFwib25tb3VzZW92ZXJcIiwgXCJvbm1vdXNldXBcIiwgXCJyZXF1aXJlZEV4dGVuc2lvbnNcIiwgXCJyZXF1aXJlZEZlYXR1cmVzXCIsIFwic3R5bGVcIiwgXCJzeXN0ZW1MYW5ndWFnZVwiLCBcInRyYW5zZm9ybVwiLCBcInhtbDpiYXNlXCIsIFwieG1sOmxhbmdcIiwgXCJ4bWw6c3BhY2VcIiBdKSxcbiAgICAgICAgICAgIGRlc2M6IFF0KFsgXCJjbGFzc1wiLCBcImlkXCIsIFwic3R5bGVcIiwgXCJ4bWw6YmFzZVwiLCBcInhtbDpsYW5nXCIsIFwieG1sOnNwYWNlXCIgXSksXG4gICAgICAgICAgICBlbGxpcHNlOiBRdChbIFwiY2xhc3NcIiwgXCJjeFwiLCBcImN5XCIsIFwiZXh0ZXJuYWxSZXNvdXJjZXNSZXF1aXJlZFwiLCBcImlkXCIsIFwib25hY3RpdmF0ZVwiLCBcIm9uY2xpY2tcIiwgXCJvbmZvY3VzaW5cIiwgXCJvbmZvY3Vzb3V0XCIsIFwib25sb2FkXCIsIFwib25tb3VzZWRvd25cIiwgXCJvbm1vdXNlbW92ZVwiLCBcIm9ubW91c2VvdXRcIiwgXCJvbm1vdXNlb3ZlclwiLCBcIm9ubW91c2V1cFwiLCBcInJlcXVpcmVkRXh0ZW5zaW9uc1wiLCBcInJlcXVpcmVkRmVhdHVyZXNcIiwgXCJyeFwiLCBcInJ5XCIsIFwic3R5bGVcIiwgXCJzeXN0ZW1MYW5ndWFnZVwiLCBcInRyYW5zZm9ybVwiLCBcInhtbDpiYXNlXCIsIFwieG1sOmxhbmdcIiwgXCJ4bWw6c3BhY2VcIiBdKSxcbiAgICAgICAgICAgIGZlQmxlbmQ6IFF0KFsgXCJjbGFzc1wiLCBcImhlaWdodFwiLCBcImlkXCIsIFwiaW5cIiwgXCJpbjJcIiwgXCJtb2RlXCIsIFwicmVzdWx0XCIsIFwic3R5bGVcIiwgXCJ3aWR0aFwiLCBcInhcIiwgXCJ4bWw6YmFzZVwiLCBcInhtbDpsYW5nXCIsIFwieG1sOnNwYWNlXCIsIFwieVwiIF0pLFxuICAgICAgICAgICAgZmVDb2xvck1hdHJpeDogUXQoWyBcImNsYXNzXCIsIFwiaGVpZ2h0XCIsIFwiaWRcIiwgXCJpblwiLCBcInJlc3VsdFwiLCBcInN0eWxlXCIsIFwidHlwZVwiLCBcInZhbHVlc1wiLCBcIndpZHRoXCIsIFwieFwiLCBcInhtbDpiYXNlXCIsIFwieG1sOmxhbmdcIiwgXCJ4bWw6c3BhY2VcIiwgXCJ5XCIgXSksXG4gICAgICAgICAgICBmZUNvbXBvbmVudFRyYW5zZmVyOiBRdChbIFwiY2xhc3NcIiwgXCJoZWlnaHRcIiwgXCJpZFwiLCBcImluXCIsIFwicmVzdWx0XCIsIFwic3R5bGVcIiwgXCJ3aWR0aFwiLCBcInhcIiwgXCJ4bWw6YmFzZVwiLCBcInhtbDpsYW5nXCIsIFwieG1sOnNwYWNlXCIsIFwieVwiIF0pLFxuICAgICAgICAgICAgZmVDb21wb3NpdGU6IFF0KFsgXCJjbGFzc1wiLCBcImhlaWdodFwiLCBcImlkXCIsIFwiaW5cIiwgXCJpbjJcIiwgXCJrMVwiLCBcImsyXCIsIFwiazNcIiwgXCJrNFwiLCBcIm9wZXJhdG9yXCIsIFwicmVzdWx0XCIsIFwic3R5bGVcIiwgXCJ3aWR0aFwiLCBcInhcIiwgXCJ4bWw6YmFzZVwiLCBcInhtbDpsYW5nXCIsIFwieG1sOnNwYWNlXCIsIFwieVwiIF0pLFxuICAgICAgICAgICAgZmVDb252b2x2ZU1hdHJpeDogUXQoWyBcImJpYXNcIiwgXCJjbGFzc1wiLCBcImRpdmlzb3JcIiwgXCJlZGdlTW9kZVwiLCBcImhlaWdodFwiLCBcImlkXCIsIFwiaW5cIiwgXCJrZXJuZWxNYXRyaXhcIiwgXCJrZXJuZWxVbml0TGVuZ3RoXCIsIFwib3JkZXJcIiwgXCJwcmVzZXJ2ZUFscGhhXCIsIFwicmVzdWx0XCIsIFwic3R5bGVcIiwgXCJ0YXJnZXRYXCIsIFwidGFyZ2V0WVwiLCBcIndpZHRoXCIsIFwieFwiLCBcInhtbDpiYXNlXCIsIFwieG1sOmxhbmdcIiwgXCJ4bWw6c3BhY2VcIiwgXCJ5XCIgXSksXG4gICAgICAgICAgICBmZURpZmZ1c2VMaWdodGluZzogUXQoWyBcImNsYXNzXCIsIFwiZGlmZnVzZUNvbnN0YW50XCIsIFwiaGVpZ2h0XCIsIFwiaWRcIiwgXCJpblwiLCBcImtlcm5lbFVuaXRMZW5ndGhcIiwgXCJyZXN1bHRcIiwgXCJzdHlsZVwiLCBcInN1cmZhY2VTY2FsZVwiLCBcIndpZHRoXCIsIFwieFwiLCBcInhtbDpiYXNlXCIsIFwieG1sOmxhbmdcIiwgXCJ4bWw6c3BhY2VcIiwgXCJ5XCIgXSksXG4gICAgICAgICAgICBmZURpc3BsYWNlbWVudE1hcDogUXQoWyBcImNsYXNzXCIsIFwiaGVpZ2h0XCIsIFwiaWRcIiwgXCJpblwiLCBcImluMlwiLCBcInJlc3VsdFwiLCBcInNjYWxlXCIsIFwic3R5bGVcIiwgXCJ3aWR0aFwiLCBcInhcIiwgXCJ4Q2hhbm5lbFNlbGVjdG9yXCIsIFwieG1sOmJhc2VcIiwgXCJ4bWw6bGFuZ1wiLCBcInhtbDpzcGFjZVwiLCBcInlcIiwgXCJ5Q2hhbm5lbFNlbGVjdG9yXCIgXSksXG4gICAgICAgICAgICBmZURpc3RhbnRMaWdodDogUXQoWyBcImF6aW11dGhcIiwgXCJlbGV2YXRpb25cIiwgXCJpZFwiLCBcInhtbDpiYXNlXCIsIFwieG1sOmxhbmdcIiwgXCJ4bWw6c3BhY2VcIiBdKSxcbiAgICAgICAgICAgIGZlRmxvb2Q6IFF0KFsgXCJjbGFzc1wiLCBcImhlaWdodFwiLCBcImlkXCIsIFwicmVzdWx0XCIsIFwic3R5bGVcIiwgXCJ3aWR0aFwiLCBcInhcIiwgXCJ4bWw6YmFzZVwiLCBcInhtbDpsYW5nXCIsIFwieG1sOnNwYWNlXCIsIFwieVwiIF0pLFxuICAgICAgICAgICAgZmVGdW5jQTogUXQoWyBcImFtcGxpdHVkZVwiLCBcImV4cG9uZW50XCIsIFwiaWRcIiwgXCJpbnRlcmNlcHRcIiwgXCJvZmZzZXRcIiwgXCJzbG9wZVwiLCBcInRhYmxlVmFsdWVzXCIsIFwidHlwZVwiLCBcInhtbDpiYXNlXCIsIFwieG1sOmxhbmdcIiwgXCJ4bWw6c3BhY2VcIiBdKSxcbiAgICAgICAgICAgIGZlRnVuY0I6IFF0KFsgXCJhbXBsaXR1ZGVcIiwgXCJleHBvbmVudFwiLCBcImlkXCIsIFwiaW50ZXJjZXB0XCIsIFwib2Zmc2V0XCIsIFwic2xvcGVcIiwgXCJ0YWJsZVZhbHVlc1wiLCBcInR5cGVcIiwgXCJ4bWw6YmFzZVwiLCBcInhtbDpsYW5nXCIsIFwieG1sOnNwYWNlXCIgXSksXG4gICAgICAgICAgICBmZUZ1bmNHOiBRdChbIFwiYW1wbGl0dWRlXCIsIFwiZXhwb25lbnRcIiwgXCJpZFwiLCBcImludGVyY2VwdFwiLCBcIm9mZnNldFwiLCBcInNsb3BlXCIsIFwidGFibGVWYWx1ZXNcIiwgXCJ0eXBlXCIsIFwieG1sOmJhc2VcIiwgXCJ4bWw6bGFuZ1wiLCBcInhtbDpzcGFjZVwiIF0pLFxuICAgICAgICAgICAgZmVGdW5jUjogUXQoWyBcImFtcGxpdHVkZVwiLCBcImV4cG9uZW50XCIsIFwiaWRcIiwgXCJpbnRlcmNlcHRcIiwgXCJvZmZzZXRcIiwgXCJzbG9wZVwiLCBcInRhYmxlVmFsdWVzXCIsIFwidHlwZVwiLCBcInhtbDpiYXNlXCIsIFwieG1sOmxhbmdcIiwgXCJ4bWw6c3BhY2VcIiBdKSxcbiAgICAgICAgICAgIGZlR2F1c3NpYW5CbHVyOiBRdChbIFwiY2xhc3NcIiwgXCJoZWlnaHRcIiwgXCJpZFwiLCBcImluXCIsIFwicmVzdWx0XCIsIFwic3RkRGV2aWF0aW9uXCIsIFwic3R5bGVcIiwgXCJ3aWR0aFwiLCBcInhcIiwgXCJ4bWw6YmFzZVwiLCBcInhtbDpsYW5nXCIsIFwieG1sOnNwYWNlXCIsIFwieVwiIF0pLFxuICAgICAgICAgICAgZmVJbWFnZTogUXQoWyBcImNsYXNzXCIsIFwiZXh0ZXJuYWxSZXNvdXJjZXNSZXF1aXJlZFwiLCBcImhlaWdodFwiLCBcImlkXCIsIFwicHJlc2VydmVBc3BlY3RSYXRpb1wiLCBcInJlc3VsdFwiLCBcInN0eWxlXCIsIFwid2lkdGhcIiwgXCJ4XCIsIFwieGxpbms6YWN0dWF0ZVwiLCBcInhsaW5rOmFyY3JvbGVcIiwgXCJ4bGluazpocmVmXCIsIFwieGxpbms6cm9sZVwiLCBcInhsaW5rOnNob3dcIiwgXCJ4bGluazp0aXRsZVwiLCBcInhsaW5rOnR5cGVcIiwgXCJ4bWw6YmFzZVwiLCBcInhtbDpsYW5nXCIsIFwieG1sOnNwYWNlXCIsIFwieVwiIF0pLFxuICAgICAgICAgICAgZmVNZXJnZTogUXQoWyBcImNsYXNzXCIsIFwiaGVpZ2h0XCIsIFwiaWRcIiwgXCJyZXN1bHRcIiwgXCJzdHlsZVwiLCBcIndpZHRoXCIsIFwieFwiLCBcInhtbDpiYXNlXCIsIFwieG1sOmxhbmdcIiwgXCJ4bWw6c3BhY2VcIiwgXCJ5XCIgXSksXG4gICAgICAgICAgICBmZU1lcmdlTm9kZTogUXQoWyBcImlkXCIsIFwieG1sOmJhc2VcIiwgXCJ4bWw6bGFuZ1wiLCBcInhtbDpzcGFjZVwiIF0pLFxuICAgICAgICAgICAgZmVNb3JwaG9sb2d5OiBRdChbIFwiY2xhc3NcIiwgXCJoZWlnaHRcIiwgXCJpZFwiLCBcImluXCIsIFwib3BlcmF0b3JcIiwgXCJyYWRpdXNcIiwgXCJyZXN1bHRcIiwgXCJzdHlsZVwiLCBcIndpZHRoXCIsIFwieFwiLCBcInhtbDpiYXNlXCIsIFwieG1sOmxhbmdcIiwgXCJ4bWw6c3BhY2VcIiwgXCJ5XCIgXSksXG4gICAgICAgICAgICBmZU9mZnNldDogUXQoWyBcImNsYXNzXCIsIFwiZHhcIiwgXCJkeVwiLCBcImhlaWdodFwiLCBcImlkXCIsIFwiaW5cIiwgXCJyZXN1bHRcIiwgXCJzdHlsZVwiLCBcIndpZHRoXCIsIFwieFwiLCBcInhtbDpiYXNlXCIsIFwieG1sOmxhbmdcIiwgXCJ4bWw6c3BhY2VcIiwgXCJ5XCIgXSksXG4gICAgICAgICAgICBmZVBvaW50TGlnaHQ6IFF0KFsgXCJpZFwiLCBcInhcIiwgXCJ4bWw6YmFzZVwiLCBcInhtbDpsYW5nXCIsIFwieG1sOnNwYWNlXCIsIFwieVwiLCBcInpcIiBdKSxcbiAgICAgICAgICAgIGZlU3BlY3VsYXJMaWdodGluZzogUXQoWyBcImNsYXNzXCIsIFwiaGVpZ2h0XCIsIFwiaWRcIiwgXCJpblwiLCBcImtlcm5lbFVuaXRMZW5ndGhcIiwgXCJyZXN1bHRcIiwgXCJzcGVjdWxhckNvbnN0YW50XCIsIFwic3BlY3VsYXJFeHBvbmVudFwiLCBcInN0eWxlXCIsIFwic3VyZmFjZVNjYWxlXCIsIFwid2lkdGhcIiwgXCJ4XCIsIFwieG1sOmJhc2VcIiwgXCJ4bWw6bGFuZ1wiLCBcInhtbDpzcGFjZVwiLCBcInlcIiBdKSxcbiAgICAgICAgICAgIGZlU3BvdExpZ2h0OiBRdChbIFwiaWRcIiwgXCJsaW1pdGluZ0NvbmVBbmdsZVwiLCBcInBvaW50c0F0WFwiLCBcInBvaW50c0F0WVwiLCBcInBvaW50c0F0WlwiLCBcInNwZWN1bGFyRXhwb25lbnRcIiwgXCJ4XCIsIFwieG1sOmJhc2VcIiwgXCJ4bWw6bGFuZ1wiLCBcInhtbDpzcGFjZVwiLCBcInlcIiwgXCJ6XCIgXSksXG4gICAgICAgICAgICBmZVRpbGU6IFF0KFsgXCJjbGFzc1wiLCBcImhlaWdodFwiLCBcImlkXCIsIFwiaW5cIiwgXCJyZXN1bHRcIiwgXCJzdHlsZVwiLCBcIndpZHRoXCIsIFwieFwiLCBcInhtbDpiYXNlXCIsIFwieG1sOmxhbmdcIiwgXCJ4bWw6c3BhY2VcIiwgXCJ5XCIgXSksXG4gICAgICAgICAgICBmZVR1cmJ1bGVuY2U6IFF0KFsgXCJiYXNlRnJlcXVlbmN5XCIsIFwiY2xhc3NcIiwgXCJoZWlnaHRcIiwgXCJpZFwiLCBcIm51bU9jdGF2ZXNcIiwgXCJyZXN1bHRcIiwgXCJzZWVkXCIsIFwic3RpdGNoVGlsZXNcIiwgXCJzdHlsZVwiLCBcInR5cGVcIiwgXCJ3aWR0aFwiLCBcInhcIiwgXCJ4bWw6YmFzZVwiLCBcInhtbDpsYW5nXCIsIFwieG1sOnNwYWNlXCIsIFwieVwiIF0pLFxuICAgICAgICAgICAgZmlsdGVyOiBRdChbIFwiY2xhc3NcIiwgXCJleHRlcm5hbFJlc291cmNlc1JlcXVpcmVkXCIsIFwiZmlsdGVyUmVzXCIsIFwiZmlsdGVyVW5pdHNcIiwgXCJoZWlnaHRcIiwgXCJpZFwiLCBcInByaW1pdGl2ZVVuaXRzXCIsIFwic3R5bGVcIiwgXCJ3aWR0aFwiLCBcInhcIiwgXCJ4bGluazphY3R1YXRlXCIsIFwieGxpbms6YXJjcm9sZVwiLCBcInhsaW5rOmhyZWZcIiwgXCJ4bGluazpyb2xlXCIsIFwieGxpbms6c2hvd1wiLCBcInhsaW5rOnRpdGxlXCIsIFwieGxpbms6dHlwZVwiLCBcInhtbDpiYXNlXCIsIFwieG1sOmxhbmdcIiwgXCJ4bWw6c3BhY2VcIiwgXCJ5XCIgXSksXG4gICAgICAgICAgICBmb250OiBRdChbIFwiY2xhc3NcIiwgXCJleHRlcm5hbFJlc291cmNlc1JlcXVpcmVkXCIsIFwiaG9yaXotYWR2LXhcIiwgXCJob3Jpei1vcmlnaW4teFwiLCBcImhvcml6LW9yaWdpbi15XCIsIFwiaWRcIiwgXCJzdHlsZVwiLCBcInZlcnQtYWR2LXlcIiwgXCJ2ZXJ0LW9yaWdpbi14XCIsIFwidmVydC1vcmlnaW4teVwiLCBcInhtbDpiYXNlXCIsIFwieG1sOmxhbmdcIiwgXCJ4bWw6c3BhY2VcIiBdKSxcbiAgICAgICAgICAgIFwiZm9udC1mYWNlXCI6IFF0KFsgXCJhY2NlbnQtaGVpZ2h0XCIsIFwiYWxwaGFiZXRpY1wiLCBcImFzY2VudFwiLCBcImJib3hcIiwgXCJjYXAtaGVpZ2h0XCIsIFwiZGVzY2VudFwiLCBcImZvbnQtZmFtaWx5XCIsIFwiZm9udC1zaXplXCIsIFwiZm9udC1zdHJldGNoXCIsIFwiZm9udC1zdHlsZVwiLCBcImZvbnQtdmFyaWFudFwiLCBcImZvbnQtd2VpZ2h0XCIsIFwiaGFuZ2luZ1wiLCBcImlkXCIsIFwiaWRlb2dyYXBoaWNcIiwgXCJtYXRoZW1hdGljYWxcIiwgXCJvdmVybGluZS1wb3NpdGlvblwiLCBcIm92ZXJsaW5lLXRoaWNrbmVzc1wiLCBcInBhbm9zZS0xXCIsIFwic2xvcGVcIiwgXCJzdGVtaFwiLCBcInN0ZW12XCIsIFwic3RyaWtldGhyb3VnaC1wb3NpdGlvblwiLCBcInN0cmlrZXRocm91Z2gtdGhpY2tuZXNzXCIsIFwidW5kZXJsaW5lLXBvc2l0aW9uXCIsIFwidW5kZXJsaW5lLXRoaWNrbmVzc1wiLCBcInVuaWNvZGUtcmFuZ2VcIiwgXCJ1bml0cy1wZXItZW1cIiwgXCJ2LWFscGhhYmV0aWNcIiwgXCJ2LWhhbmdpbmdcIiwgXCJ2LWlkZW9ncmFwaGljXCIsIFwidi1tYXRoZW1hdGljYWxcIiwgXCJ3aWR0aHNcIiwgXCJ4LWhlaWdodFwiLCBcInhtbDpiYXNlXCIsIFwieG1sOmxhbmdcIiwgXCJ4bWw6c3BhY2VcIiBdKSxcbiAgICAgICAgICAgIFwiZm9udC1mYWNlLWZvcm1hdFwiOiBRdChbIFwiaWRcIiwgXCJzdHJpbmdcIiwgXCJ4bWw6YmFzZVwiLCBcInhtbDpsYW5nXCIsIFwieG1sOnNwYWNlXCIgXSksXG4gICAgICAgICAgICBcImZvbnQtZmFjZS1uYW1lXCI6IFF0KFsgXCJpZFwiLCBcIm5hbWVcIiwgXCJ4bWw6YmFzZVwiLCBcInhtbDpsYW5nXCIsIFwieG1sOnNwYWNlXCIgXSksXG4gICAgICAgICAgICBcImZvbnQtZmFjZS1zcmNcIjogUXQoWyBcImlkXCIsIFwieG1sOmJhc2VcIiwgXCJ4bWw6bGFuZ1wiLCBcInhtbDpzcGFjZVwiIF0pLFxuICAgICAgICAgICAgXCJmb250LWZhY2UtdXJpXCI6IFF0KFsgXCJpZFwiLCBcInhsaW5rOmFjdHVhdGVcIiwgXCJ4bGluazphcmNyb2xlXCIsIFwieGxpbms6aHJlZlwiLCBcInhsaW5rOnJvbGVcIiwgXCJ4bGluazpzaG93XCIsIFwieGxpbms6dGl0bGVcIiwgXCJ4bGluazp0eXBlXCIsIFwieG1sOmJhc2VcIiwgXCJ4bWw6bGFuZ1wiLCBcInhtbDpzcGFjZVwiIF0pLFxuICAgICAgICAgICAgZm9yZWlnbk9iamVjdDogUXQoWyBcImNsYXNzXCIsIFwiZXh0ZXJuYWxSZXNvdXJjZXNSZXF1aXJlZFwiLCBcImhlaWdodFwiLCBcImlkXCIsIFwib25hY3RpdmF0ZVwiLCBcIm9uY2xpY2tcIiwgXCJvbmZvY3VzaW5cIiwgXCJvbmZvY3Vzb3V0XCIsIFwib25sb2FkXCIsIFwib25tb3VzZWRvd25cIiwgXCJvbm1vdXNlbW92ZVwiLCBcIm9ubW91c2VvdXRcIiwgXCJvbm1vdXNlb3ZlclwiLCBcIm9ubW91c2V1cFwiLCBcInJlcXVpcmVkRXh0ZW5zaW9uc1wiLCBcInJlcXVpcmVkRmVhdHVyZXNcIiwgXCJzdHlsZVwiLCBcInN5c3RlbUxhbmd1YWdlXCIsIFwidHJhbnNmb3JtXCIsIFwid2lkdGhcIiwgXCJ4XCIsIFwieG1sOmJhc2VcIiwgXCJ4bWw6bGFuZ1wiLCBcInhtbDpzcGFjZVwiLCBcInlcIiBdKSxcbiAgICAgICAgICAgIGc6IFF0KFsgXCJjbGFzc1wiLCBcImV4dGVybmFsUmVzb3VyY2VzUmVxdWlyZWRcIiwgXCJpZFwiLCBcIm9uYWN0aXZhdGVcIiwgXCJvbmNsaWNrXCIsIFwib25mb2N1c2luXCIsIFwib25mb2N1c291dFwiLCBcIm9ubG9hZFwiLCBcIm9ubW91c2Vkb3duXCIsIFwib25tb3VzZW1vdmVcIiwgXCJvbm1vdXNlb3V0XCIsIFwib25tb3VzZW92ZXJcIiwgXCJvbm1vdXNldXBcIiwgXCJyZXF1aXJlZEV4dGVuc2lvbnNcIiwgXCJyZXF1aXJlZEZlYXR1cmVzXCIsIFwic3R5bGVcIiwgXCJzeXN0ZW1MYW5ndWFnZVwiLCBcInRyYW5zZm9ybVwiLCBcInhtbDpiYXNlXCIsIFwieG1sOmxhbmdcIiwgXCJ4bWw6c3BhY2VcIiBdKSxcbiAgICAgICAgICAgIGdseXBoOiBRdChbIFwiYXJhYmljLWZvcm1cIiwgXCJjbGFzc1wiLCBcImRcIiwgXCJnbHlwaC1uYW1lXCIsIFwiaG9yaXotYWR2LXhcIiwgXCJpZFwiLCBcImxhbmdcIiwgXCJvcmllbnRhdGlvblwiLCBcInN0eWxlXCIsIFwidW5pY29kZVwiLCBcInZlcnQtYWR2LXlcIiwgXCJ2ZXJ0LW9yaWdpbi14XCIsIFwidmVydC1vcmlnaW4teVwiLCBcInhtbDpiYXNlXCIsIFwieG1sOmxhbmdcIiwgXCJ4bWw6c3BhY2VcIiBdKSxcbiAgICAgICAgICAgIGdseXBoUmVmOiBRdChbIFwiY2xhc3NcIiwgXCJkeFwiLCBcImR5XCIsIFwiZm9ybWF0XCIsIFwiZ2x5cGhSZWZcIiwgXCJpZFwiLCBcInN0eWxlXCIsIFwieFwiLCBcInhsaW5rOmFjdHVhdGVcIiwgXCJ4bGluazphcmNyb2xlXCIsIFwieGxpbms6aHJlZlwiLCBcInhsaW5rOnJvbGVcIiwgXCJ4bGluazpzaG93XCIsIFwieGxpbms6dGl0bGVcIiwgXCJ4bGluazp0eXBlXCIsIFwieG1sOmJhc2VcIiwgXCJ4bWw6bGFuZ1wiLCBcInhtbDpzcGFjZVwiLCBcInlcIiBdKSxcbiAgICAgICAgICAgIGdseXBocmVmOiB3dCgpLFxuICAgICAgICAgICAgaGtlcm46IFF0KFsgXCJnMVwiLCBcImcyXCIsIFwiaWRcIiwgXCJrXCIsIFwidTFcIiwgXCJ1MlwiLCBcInhtbDpiYXNlXCIsIFwieG1sOmxhbmdcIiwgXCJ4bWw6c3BhY2VcIiBdKSxcbiAgICAgICAgICAgIGltYWdlOiBRdChbIFwiY2xhc3NcIiwgXCJleHRlcm5hbFJlc291cmNlc1JlcXVpcmVkXCIsIFwiaGVpZ2h0XCIsIFwiaWRcIiwgXCJvbmFjdGl2YXRlXCIsIFwib25jbGlja1wiLCBcIm9uZm9jdXNpblwiLCBcIm9uZm9jdXNvdXRcIiwgXCJvbmxvYWRcIiwgXCJvbm1vdXNlZG93blwiLCBcIm9ubW91c2Vtb3ZlXCIsIFwib25tb3VzZW91dFwiLCBcIm9ubW91c2VvdmVyXCIsIFwib25tb3VzZXVwXCIsIFwicHJlc2VydmVBc3BlY3RSYXRpb1wiLCBcInJlcXVpcmVkRXh0ZW5zaW9uc1wiLCBcInJlcXVpcmVkRmVhdHVyZXNcIiwgXCJzdHlsZVwiLCBcInN5c3RlbUxhbmd1YWdlXCIsIFwidHJhbnNmb3JtXCIsIFwid2lkdGhcIiwgXCJ4XCIsIFwieGxpbms6YWN0dWF0ZVwiLCBcInhsaW5rOmFyY3JvbGVcIiwgXCJ4bGluazpocmVmXCIsIFwieGxpbms6cm9sZVwiLCBcInhsaW5rOnNob3dcIiwgXCJ4bGluazp0aXRsZVwiLCBcInhsaW5rOnR5cGVcIiwgXCJ4bWw6YmFzZVwiLCBcInhtbDpsYW5nXCIsIFwieG1sOnNwYWNlXCIsIFwieVwiIF0pLFxuICAgICAgICAgICAgbGluZTogUXQoWyBcImNsYXNzXCIsIFwiZXh0ZXJuYWxSZXNvdXJjZXNSZXF1aXJlZFwiLCBcImlkXCIsIFwib25hY3RpdmF0ZVwiLCBcIm9uY2xpY2tcIiwgXCJvbmZvY3VzaW5cIiwgXCJvbmZvY3Vzb3V0XCIsIFwib25sb2FkXCIsIFwib25tb3VzZWRvd25cIiwgXCJvbm1vdXNlbW92ZVwiLCBcIm9ubW91c2VvdXRcIiwgXCJvbm1vdXNlb3ZlclwiLCBcIm9ubW91c2V1cFwiLCBcInJlcXVpcmVkRXh0ZW5zaW9uc1wiLCBcInJlcXVpcmVkRmVhdHVyZXNcIiwgXCJzdHlsZVwiLCBcInN5c3RlbUxhbmd1YWdlXCIsIFwidHJhbnNmb3JtXCIsIFwieDFcIiwgXCJ4MlwiLCBcInhtbDpiYXNlXCIsIFwieG1sOmxhbmdcIiwgXCJ4bWw6c3BhY2VcIiwgXCJ5MVwiLCBcInkyXCIgXSksXG4gICAgICAgICAgICBsaW5lYXJHcmFkaWVudDogUXQoWyBcImNsYXNzXCIsIFwiZXh0ZXJuYWxSZXNvdXJjZXNSZXF1aXJlZFwiLCBcImdyYWRpZW50VHJhbnNmb3JtXCIsIFwiZ3JhZGllbnRVbml0c1wiLCBcImlkXCIsIFwic3ByZWFkTWV0aG9kXCIsIFwic3R5bGVcIiwgXCJ4MVwiLCBcIngyXCIsIFwieGxpbms6YXJjcm9sZVwiLCBcInhsaW5rOmhyZWZcIiwgXCJ4bGluazpyb2xlXCIsIFwieGxpbms6dGl0bGVcIiwgXCJ4bGluazp0eXBlXCIsIFwieG1sOmJhc2VcIiwgXCJ4bWw6bGFuZ1wiLCBcInhtbDpzcGFjZVwiLCBcInkxXCIsIFwieTJcIiBdKSxcbiAgICAgICAgICAgIG1hcmtlcjogUXQoWyBcImNsYXNzXCIsIFwiZXh0ZXJuYWxSZXNvdXJjZXNSZXF1aXJlZFwiLCBcImlkXCIsIFwibWFya2VySGVpZ2h0XCIsIFwibWFya2VyVW5pdHNcIiwgXCJtYXJrZXJXaWR0aFwiLCBcIm9yaWVudFwiLCBcInByZXNlcnZlQXNwZWN0UmF0aW9cIiwgXCJyZWZYXCIsIFwicmVmWVwiLCBcInN0eWxlXCIsIFwidmlld0JveFwiLCBcInhtbDpiYXNlXCIsIFwieG1sOmxhbmdcIiwgXCJ4bWw6c3BhY2VcIiBdKSxcbiAgICAgICAgICAgIG1hc2s6IFF0KFsgXCJjbGFzc1wiLCBcImV4dGVybmFsUmVzb3VyY2VzUmVxdWlyZWRcIiwgXCJoZWlnaHRcIiwgXCJpZFwiLCBcIm1hc2tDb250ZW50VW5pdHNcIiwgXCJtYXNrVW5pdHNcIiwgXCJyZXF1aXJlZEV4dGVuc2lvbnNcIiwgXCJyZXF1aXJlZEZlYXR1cmVzXCIsIFwic3R5bGVcIiwgXCJzeXN0ZW1MYW5ndWFnZVwiLCBcIndpZHRoXCIsIFwieFwiLCBcInhtbDpiYXNlXCIsIFwieG1sOmxhbmdcIiwgXCJ4bWw6c3BhY2VcIiwgXCJ5XCIgXSksXG4gICAgICAgICAgICBtZXRhZGF0YTogUXQoWyBcImlkXCIsIFwieG1sOmJhc2VcIiwgXCJ4bWw6bGFuZ1wiLCBcInhtbDpzcGFjZVwiIF0pLFxuICAgICAgICAgICAgXCJtaXNzaW5nLWdseXBoXCI6IFF0KFsgXCJjbGFzc1wiLCBcImRcIiwgXCJob3Jpei1hZHYteFwiLCBcImlkXCIsIFwic3R5bGVcIiwgXCJ2ZXJ0LWFkdi15XCIsIFwidmVydC1vcmlnaW4teFwiLCBcInZlcnQtb3JpZ2luLXlcIiwgXCJ4bWw6YmFzZVwiLCBcInhtbDpsYW5nXCIsIFwieG1sOnNwYWNlXCIgXSksXG4gICAgICAgICAgICBtcGF0aDogUXQoWyBcImV4dGVybmFsUmVzb3VyY2VzUmVxdWlyZWRcIiwgXCJpZFwiLCBcInhsaW5rOmFjdHVhdGVcIiwgXCJ4bGluazphcmNyb2xlXCIsIFwieGxpbms6aHJlZlwiLCBcInhsaW5rOnJvbGVcIiwgXCJ4bGluazpzaG93XCIsIFwieGxpbms6dGl0bGVcIiwgXCJ4bGluazp0eXBlXCIsIFwieG1sOmJhc2VcIiwgXCJ4bWw6bGFuZ1wiLCBcInhtbDpzcGFjZVwiIF0pLFxuICAgICAgICAgICAgcGF0aDogUXQoWyBcImNsYXNzXCIsIFwiZFwiLCBcImV4dGVybmFsUmVzb3VyY2VzUmVxdWlyZWRcIiwgXCJpZFwiLCBcIm9uYWN0aXZhdGVcIiwgXCJvbmNsaWNrXCIsIFwib25mb2N1c2luXCIsIFwib25mb2N1c291dFwiLCBcIm9ubG9hZFwiLCBcIm9ubW91c2Vkb3duXCIsIFwib25tb3VzZW1vdmVcIiwgXCJvbm1vdXNlb3V0XCIsIFwib25tb3VzZW92ZXJcIiwgXCJvbm1vdXNldXBcIiwgXCJwYXRoTGVuZ3RoXCIsIFwicmVxdWlyZWRFeHRlbnNpb25zXCIsIFwicmVxdWlyZWRGZWF0dXJlc1wiLCBcInN0eWxlXCIsIFwic3lzdGVtTGFuZ3VhZ2VcIiwgXCJ0cmFuc2Zvcm1cIiwgXCJ4bWw6YmFzZVwiLCBcInhtbDpsYW5nXCIsIFwieG1sOnNwYWNlXCIgXSksXG4gICAgICAgICAgICBwYXR0ZXJuOiBRdChbIFwiY2xhc3NcIiwgXCJleHRlcm5hbFJlc291cmNlc1JlcXVpcmVkXCIsIFwiaGVpZ2h0XCIsIFwiaWRcIiwgXCJwYXR0ZXJuQ29udGVudFVuaXRzXCIsIFwicGF0dGVyblRyYW5zZm9ybVwiLCBcInBhdHRlcm5Vbml0c1wiLCBcInByZXNlcnZlQXNwZWN0UmF0aW9cIiwgXCJyZXF1aXJlZEV4dGVuc2lvbnNcIiwgXCJyZXF1aXJlZEZlYXR1cmVzXCIsIFwic3R5bGVcIiwgXCJzeXN0ZW1MYW5ndWFnZVwiLCBcInZpZXdCb3hcIiwgXCJ3aWR0aFwiLCBcInhcIiwgXCJ4bGluazphY3R1YXRlXCIsIFwieGxpbms6YXJjcm9sZVwiLCBcInhsaW5rOmhyZWZcIiwgXCJ4bGluazpyb2xlXCIsIFwieGxpbms6c2hvd1wiLCBcInhsaW5rOnRpdGxlXCIsIFwieGxpbms6dHlwZVwiLCBcInhtbDpiYXNlXCIsIFwieG1sOmxhbmdcIiwgXCJ4bWw6c3BhY2VcIiwgXCJ5XCIgXSksXG4gICAgICAgICAgICBwb2x5Z29uOiBRdChbIFwiY2xhc3NcIiwgXCJleHRlcm5hbFJlc291cmNlc1JlcXVpcmVkXCIsIFwiaWRcIiwgXCJvbmFjdGl2YXRlXCIsIFwib25jbGlja1wiLCBcIm9uZm9jdXNpblwiLCBcIm9uZm9jdXNvdXRcIiwgXCJvbmxvYWRcIiwgXCJvbm1vdXNlZG93blwiLCBcIm9ubW91c2Vtb3ZlXCIsIFwib25tb3VzZW91dFwiLCBcIm9ubW91c2VvdmVyXCIsIFwib25tb3VzZXVwXCIsIFwicG9pbnRzXCIsIFwicmVxdWlyZWRFeHRlbnNpb25zXCIsIFwicmVxdWlyZWRGZWF0dXJlc1wiLCBcInN0eWxlXCIsIFwic3lzdGVtTGFuZ3VhZ2VcIiwgXCJ0cmFuc2Zvcm1cIiwgXCJ4bWw6YmFzZVwiLCBcInhtbDpsYW5nXCIsIFwieG1sOnNwYWNlXCIgXSksXG4gICAgICAgICAgICBwb2x5bGluZTogUXQoWyBcImNsYXNzXCIsIFwiZXh0ZXJuYWxSZXNvdXJjZXNSZXF1aXJlZFwiLCBcImlkXCIsIFwib25hY3RpdmF0ZVwiLCBcIm9uY2xpY2tcIiwgXCJvbmZvY3VzaW5cIiwgXCJvbmZvY3Vzb3V0XCIsIFwib25sb2FkXCIsIFwib25tb3VzZWRvd25cIiwgXCJvbm1vdXNlbW92ZVwiLCBcIm9ubW91c2VvdXRcIiwgXCJvbm1vdXNlb3ZlclwiLCBcIm9ubW91c2V1cFwiLCBcInBvaW50c1wiLCBcInJlcXVpcmVkRXh0ZW5zaW9uc1wiLCBcInJlcXVpcmVkRmVhdHVyZXNcIiwgXCJzdHlsZVwiLCBcInN5c3RlbUxhbmd1YWdlXCIsIFwidHJhbnNmb3JtXCIsIFwieG1sOmJhc2VcIiwgXCJ4bWw6bGFuZ1wiLCBcInhtbDpzcGFjZVwiIF0pLFxuICAgICAgICAgICAgcmFkaWFsR3JhZGllbnQ6IFF0KFsgXCJjbGFzc1wiLCBcImN4XCIsIFwiY3lcIiwgXCJleHRlcm5hbFJlc291cmNlc1JlcXVpcmVkXCIsIFwiZnhcIiwgXCJmeVwiLCBcImdyYWRpZW50VHJhbnNmb3JtXCIsIFwiZ3JhZGllbnRVbml0c1wiLCBcImlkXCIsIFwiclwiLCBcInNwcmVhZE1ldGhvZFwiLCBcInN0eWxlXCIsIFwieGxpbms6YXJjcm9sZVwiLCBcInhsaW5rOmhyZWZcIiwgXCJ4bGluazpyb2xlXCIsIFwieGxpbms6dGl0bGVcIiwgXCJ4bGluazp0eXBlXCIsIFwieG1sOmJhc2VcIiwgXCJ4bWw6bGFuZ1wiLCBcInhtbDpzcGFjZVwiIF0pLFxuICAgICAgICAgICAgcmVjdDogUXQoWyBcImNsYXNzXCIsIFwiZXh0ZXJuYWxSZXNvdXJjZXNSZXF1aXJlZFwiLCBcImhlaWdodFwiLCBcImlkXCIsIFwib25hY3RpdmF0ZVwiLCBcIm9uY2xpY2tcIiwgXCJvbmZvY3VzaW5cIiwgXCJvbmZvY3Vzb3V0XCIsIFwib25sb2FkXCIsIFwib25tb3VzZWRvd25cIiwgXCJvbm1vdXNlbW92ZVwiLCBcIm9ubW91c2VvdXRcIiwgXCJvbm1vdXNlb3ZlclwiLCBcIm9ubW91c2V1cFwiLCBcInJlcXVpcmVkRXh0ZW5zaW9uc1wiLCBcInJlcXVpcmVkRmVhdHVyZXNcIiwgXCJyeFwiLCBcInJ5XCIsIFwic3R5bGVcIiwgXCJzeXN0ZW1MYW5ndWFnZVwiLCBcInRyYW5zZm9ybVwiLCBcIndpZHRoXCIsIFwieFwiLCBcInhtbDpiYXNlXCIsIFwieG1sOmxhbmdcIiwgXCJ4bWw6c3BhY2VcIiwgXCJ5XCIgXSksXG4gICAgICAgICAgICBzY3JpcHQ6IFF0KFsgXCJleHRlcm5hbFJlc291cmNlc1JlcXVpcmVkXCIsIFwiaWRcIiwgXCJ0eXBlXCIsIFwieGxpbms6YWN0dWF0ZVwiLCBcInhsaW5rOmFyY3JvbGVcIiwgXCJ4bGluazpocmVmXCIsIFwieGxpbms6cm9sZVwiLCBcInhsaW5rOnNob3dcIiwgXCJ4bGluazp0aXRsZVwiLCBcInhsaW5rOnR5cGVcIiwgXCJ4bWw6YmFzZVwiLCBcInhtbDpsYW5nXCIsIFwieG1sOnNwYWNlXCIgXSksXG4gICAgICAgICAgICBzZXQ6IFF0KFsgXCJhdHRyaWJ1dGVOYW1lXCIsIFwiYXR0cmlidXRlVHlwZVwiLCBcImJlZ2luXCIsIFwiZHVyXCIsIFwiZW5kXCIsIFwiZXh0ZXJuYWxSZXNvdXJjZXNSZXF1aXJlZFwiLCBcImZpbGxcIiwgXCJpZFwiLCBcIm1heFwiLCBcIm1pblwiLCBcIm9uYmVnaW5cIiwgXCJvbmVuZFwiLCBcIm9ubG9hZFwiLCBcIm9ucmVwZWF0XCIsIFwicmVwZWF0Q291bnRcIiwgXCJyZXBlYXREdXJcIiwgXCJyZXF1aXJlZEV4dGVuc2lvbnNcIiwgXCJyZXF1aXJlZEZlYXR1cmVzXCIsIFwicmVzdGFydFwiLCBcInN5c3RlbUxhbmd1YWdlXCIsIFwidG9cIiwgXCJ4bGluazphY3R1YXRlXCIsIFwieGxpbms6YXJjcm9sZVwiLCBcInhsaW5rOmhyZWZcIiwgXCJ4bGluazpyb2xlXCIsIFwieGxpbms6c2hvd1wiLCBcInhsaW5rOnRpdGxlXCIsIFwieGxpbms6dHlwZVwiLCBcInhtbDpiYXNlXCIsIFwieG1sOmxhbmdcIiwgXCJ4bWw6c3BhY2VcIiBdKSxcbiAgICAgICAgICAgIHN0b3A6IFF0KFsgXCJjbGFzc1wiLCBcImlkXCIsIFwib2Zmc2V0XCIsIFwic3R5bGVcIiwgXCJ4bWw6YmFzZVwiLCBcInhtbDpsYW5nXCIsIFwieG1sOnNwYWNlXCIgXSksXG4gICAgICAgICAgICBzdHlsZTogUXQoWyBcImlkXCIsIFwibWVkaWFcIiwgXCJ0aXRsZVwiLCBcInR5cGVcIiwgXCJ4bWw6YmFzZVwiLCBcInhtbDpsYW5nXCIsIFwieG1sOnNwYWNlXCIgXSksXG4gICAgICAgICAgICBzdmc6IFF0KFsgXCJiYXNlUHJvZmlsZVwiLCBcImNsYXNzXCIsIFwiY29udGVudFNjcmlwdFR5cGVcIiwgXCJjb250ZW50U3R5bGVUeXBlXCIsIFwiZXh0ZXJuYWxSZXNvdXJjZXNSZXF1aXJlZFwiLCBcImhlaWdodFwiLCBcImlkXCIsIFwib25hYm9ydFwiLCBcIm9uYWN0aXZhdGVcIiwgXCJvbmNsaWNrXCIsIFwib25lcnJvclwiLCBcIm9uZm9jdXNpblwiLCBcIm9uZm9jdXNvdXRcIiwgXCJvbmxvYWRcIiwgXCJvbm1vdXNlZG93blwiLCBcIm9ubW91c2Vtb3ZlXCIsIFwib25tb3VzZW91dFwiLCBcIm9ubW91c2VvdmVyXCIsIFwib25tb3VzZXVwXCIsIFwib25yZXNpemVcIiwgXCJvbnNjcm9sbFwiLCBcIm9udW5sb2FkXCIsIFwib256b29tXCIsIFwicHJlc2VydmVBc3BlY3RSYXRpb1wiLCBcInJlcXVpcmVkRXh0ZW5zaW9uc1wiLCBcInJlcXVpcmVkRmVhdHVyZXNcIiwgXCJzdHlsZVwiLCBcInN5c3RlbUxhbmd1YWdlXCIsIFwidmVyc2lvblwiLCBcInZpZXdCb3hcIiwgXCJ3aWR0aFwiLCBcInhcIiwgXCJ4bWw6YmFzZVwiLCBcInhtbDpsYW5nXCIsIFwieG1sOnNwYWNlXCIsIFwieVwiLCBcInpvb21BbmRQYW5cIiBdKSxcbiAgICAgICAgICAgIHN3aXRjaDogUXQoWyBcImNsYXNzXCIsIFwiZXh0ZXJuYWxSZXNvdXJjZXNSZXF1aXJlZFwiLCBcImlkXCIsIFwib25hY3RpdmF0ZVwiLCBcIm9uY2xpY2tcIiwgXCJvbmZvY3VzaW5cIiwgXCJvbmZvY3Vzb3V0XCIsIFwib25sb2FkXCIsIFwib25tb3VzZWRvd25cIiwgXCJvbm1vdXNlbW92ZVwiLCBcIm9ubW91c2VvdXRcIiwgXCJvbm1vdXNlb3ZlclwiLCBcIm9ubW91c2V1cFwiLCBcInJlcXVpcmVkRXh0ZW5zaW9uc1wiLCBcInJlcXVpcmVkRmVhdHVyZXNcIiwgXCJzdHlsZVwiLCBcInN5c3RlbUxhbmd1YWdlXCIsIFwidHJhbnNmb3JtXCIsIFwieG1sOmJhc2VcIiwgXCJ4bWw6bGFuZ1wiLCBcInhtbDpzcGFjZVwiIF0pLFxuICAgICAgICAgICAgc3ltYm9sOiBRdChbIFwiY2xhc3NcIiwgXCJleHRlcm5hbFJlc291cmNlc1JlcXVpcmVkXCIsIFwiaWRcIiwgXCJvbmFjdGl2YXRlXCIsIFwib25jbGlja1wiLCBcIm9uZm9jdXNpblwiLCBcIm9uZm9jdXNvdXRcIiwgXCJvbmxvYWRcIiwgXCJvbm1vdXNlZG93blwiLCBcIm9ubW91c2Vtb3ZlXCIsIFwib25tb3VzZW91dFwiLCBcIm9ubW91c2VvdmVyXCIsIFwib25tb3VzZXVwXCIsIFwicHJlc2VydmVBc3BlY3RSYXRpb1wiLCBcInN0eWxlXCIsIFwidmlld0JveFwiLCBcInhtbDpiYXNlXCIsIFwieG1sOmxhbmdcIiwgXCJ4bWw6c3BhY2VcIiBdKSxcbiAgICAgICAgICAgIHRleHQ6IFF0KFsgXCJjbGFzc1wiLCBcImR4XCIsIFwiZHlcIiwgXCJleHRlcm5hbFJlc291cmNlc1JlcXVpcmVkXCIsIFwiaWRcIiwgXCJsZW5ndGhBZGp1c3RcIiwgXCJvbmFjdGl2YXRlXCIsIFwib25jbGlja1wiLCBcIm9uZm9jdXNpblwiLCBcIm9uZm9jdXNvdXRcIiwgXCJvbmxvYWRcIiwgXCJvbm1vdXNlZG93blwiLCBcIm9ubW91c2Vtb3ZlXCIsIFwib25tb3VzZW91dFwiLCBcIm9ubW91c2VvdmVyXCIsIFwib25tb3VzZXVwXCIsIFwicmVxdWlyZWRFeHRlbnNpb25zXCIsIFwicmVxdWlyZWRGZWF0dXJlc1wiLCBcInJvdGF0ZVwiLCBcInN0eWxlXCIsIFwic3lzdGVtTGFuZ3VhZ2VcIiwgXCJ0ZXh0TGVuZ3RoXCIsIFwidHJhbnNmb3JtXCIsIFwieFwiLCBcInhtbDpiYXNlXCIsIFwieG1sOmxhbmdcIiwgXCJ4bWw6c3BhY2VcIiwgXCJ5XCIgXSksXG4gICAgICAgICAgICB0ZXh0UGF0aDogUXQoWyBcImNsYXNzXCIsIFwiZXh0ZXJuYWxSZXNvdXJjZXNSZXF1aXJlZFwiLCBcImlkXCIsIFwibGVuZ3RoQWRqdXN0XCIsIFwibWV0aG9kXCIsIFwib25hY3RpdmF0ZVwiLCBcIm9uY2xpY2tcIiwgXCJvbmZvY3VzaW5cIiwgXCJvbmZvY3Vzb3V0XCIsIFwib25sb2FkXCIsIFwib25tb3VzZWRvd25cIiwgXCJvbm1vdXNlbW92ZVwiLCBcIm9ubW91c2VvdXRcIiwgXCJvbm1vdXNlb3ZlclwiLCBcIm9ubW91c2V1cFwiLCBcInJlcXVpcmVkRXh0ZW5zaW9uc1wiLCBcInJlcXVpcmVkRmVhdHVyZXNcIiwgXCJzcGFjaW5nXCIsIFwic3RhcnRPZmZzZXRcIiwgXCJzdHlsZVwiLCBcInN5c3RlbUxhbmd1YWdlXCIsIFwidGV4dExlbmd0aFwiLCBcInhsaW5rOmFyY3JvbGVcIiwgXCJ4bGluazpocmVmXCIsIFwieGxpbms6cm9sZVwiLCBcInhsaW5rOnRpdGxlXCIsIFwieGxpbms6dHlwZVwiLCBcInhtbDpiYXNlXCIsIFwieG1sOmxhbmdcIiwgXCJ4bWw6c3BhY2VcIiBdKSxcbiAgICAgICAgICAgIHRpdGxlOiBRdChbIFwiY2xhc3NcIiwgXCJpZFwiLCBcInN0eWxlXCIsIFwieG1sOmJhc2VcIiwgXCJ4bWw6bGFuZ1wiLCBcInhtbDpzcGFjZVwiIF0pLFxuICAgICAgICAgICAgdHJlZjogUXQoWyBcImNsYXNzXCIsIFwiZHhcIiwgXCJkeVwiLCBcImV4dGVybmFsUmVzb3VyY2VzUmVxdWlyZWRcIiwgXCJpZFwiLCBcImxlbmd0aEFkanVzdFwiLCBcIm9uYWN0aXZhdGVcIiwgXCJvbmNsaWNrXCIsIFwib25mb2N1c2luXCIsIFwib25mb2N1c291dFwiLCBcIm9ubG9hZFwiLCBcIm9ubW91c2Vkb3duXCIsIFwib25tb3VzZW1vdmVcIiwgXCJvbm1vdXNlb3V0XCIsIFwib25tb3VzZW92ZXJcIiwgXCJvbm1vdXNldXBcIiwgXCJyZXF1aXJlZEV4dGVuc2lvbnNcIiwgXCJyZXF1aXJlZEZlYXR1cmVzXCIsIFwicm90YXRlXCIsIFwic3R5bGVcIiwgXCJzeXN0ZW1MYW5ndWFnZVwiLCBcInRleHRMZW5ndGhcIiwgXCJ4XCIsIFwieGxpbms6YXJjcm9sZVwiLCBcInhsaW5rOmhyZWZcIiwgXCJ4bGluazpyb2xlXCIsIFwieGxpbms6dGl0bGVcIiwgXCJ4bGluazp0eXBlXCIsIFwieG1sOmJhc2VcIiwgXCJ4bWw6bGFuZ1wiLCBcInhtbDpzcGFjZVwiLCBcInlcIiBdKSxcbiAgICAgICAgICAgIHRzcGFuOiBRdChbIFwiY2xhc3NcIiwgXCJkeFwiLCBcImR5XCIsIFwiZXh0ZXJuYWxSZXNvdXJjZXNSZXF1aXJlZFwiLCBcImlkXCIsIFwibGVuZ3RoQWRqdXN0XCIsIFwib25hY3RpdmF0ZVwiLCBcIm9uY2xpY2tcIiwgXCJvbmZvY3VzaW5cIiwgXCJvbmZvY3Vzb3V0XCIsIFwib25sb2FkXCIsIFwib25tb3VzZWRvd25cIiwgXCJvbm1vdXNlbW92ZVwiLCBcIm9ubW91c2VvdXRcIiwgXCJvbm1vdXNlb3ZlclwiLCBcIm9ubW91c2V1cFwiLCBcInJlcXVpcmVkRXh0ZW5zaW9uc1wiLCBcInJlcXVpcmVkRmVhdHVyZXNcIiwgXCJyb3RhdGVcIiwgXCJzdHlsZVwiLCBcInN5c3RlbUxhbmd1YWdlXCIsIFwidGV4dExlbmd0aFwiLCBcInhcIiwgXCJ4bWw6YmFzZVwiLCBcInhtbDpsYW5nXCIsIFwieG1sOnNwYWNlXCIsIFwieVwiIF0pLFxuICAgICAgICAgICAgdXNlOiBRdChbIFwiY2xhc3NcIiwgXCJleHRlcm5hbFJlc291cmNlc1JlcXVpcmVkXCIsIFwiaGVpZ2h0XCIsIFwiaWRcIiwgXCJvbmFjdGl2YXRlXCIsIFwib25jbGlja1wiLCBcIm9uZm9jdXNpblwiLCBcIm9uZm9jdXNvdXRcIiwgXCJvbmxvYWRcIiwgXCJvbm1vdXNlZG93blwiLCBcIm9ubW91c2Vtb3ZlXCIsIFwib25tb3VzZW91dFwiLCBcIm9ubW91c2VvdmVyXCIsIFwib25tb3VzZXVwXCIsIFwicmVxdWlyZWRFeHRlbnNpb25zXCIsIFwicmVxdWlyZWRGZWF0dXJlc1wiLCBcInN0eWxlXCIsIFwic3lzdGVtTGFuZ3VhZ2VcIiwgXCJ0cmFuc2Zvcm1cIiwgXCJ3aWR0aFwiLCBcInhcIiwgXCJ4bGluazphY3R1YXRlXCIsIFwieGxpbms6YXJjcm9sZVwiLCBcInhsaW5rOmhyZWZcIiwgXCJ4bGluazpyb2xlXCIsIFwieGxpbms6c2hvd1wiLCBcInhsaW5rOnRpdGxlXCIsIFwieGxpbms6dHlwZVwiLCBcInhtbDpiYXNlXCIsIFwieG1sOmxhbmdcIiwgXCJ4bWw6c3BhY2VcIiwgXCJ5XCIgXSksXG4gICAgICAgICAgICB2aWV3OiBRdChbIFwiZXh0ZXJuYWxSZXNvdXJjZXNSZXF1aXJlZFwiLCBcImlkXCIsIFwicHJlc2VydmVBc3BlY3RSYXRpb1wiLCBcInZpZXdCb3hcIiwgXCJ2aWV3VGFyZ2V0XCIsIFwieG1sOmJhc2VcIiwgXCJ4bWw6bGFuZ1wiLCBcInhtbDpzcGFjZVwiLCBcInpvb21BbmRQYW5cIiBdKSxcbiAgICAgICAgICAgIHZrZXJuOiBRdChbIFwiZzFcIiwgXCJnMlwiLCBcImlkXCIsIFwia1wiLCBcInUxXCIsIFwidTJcIiwgXCJ4bWw6YmFzZVwiLCBcInhtbDpsYW5nXCIsIFwieG1sOnNwYWNlXCIgXSlcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuXyA9IFF0KFsgXCJhXCIsIFwiYWx0R2x5cGhcIiwgXCJhbmltYXRlXCIsIFwiYW5pbWF0ZUNvbG9yXCIsIFwiY2lyY2xlXCIsIFwiY2xpcFBhdGhcIiwgXCJkZWZzXCIsIFwiZWxsaXBzZVwiLCBcImZlQmxlbmRcIiwgXCJmZUNvbG9yTWF0cml4XCIsIFwiZmVDb21wb25lbnRUcmFuc2ZlclwiLCBcImZlQ29tcG9zaXRlXCIsIFwiZmVDb252b2x2ZU1hdHJpeFwiLCBcImZlRGlmZnVzZUxpZ2h0aW5nXCIsIFwiZmVEaXNwbGFjZW1lbnRNYXBcIiwgXCJmZUZsb29kXCIsIFwiZmVHYXVzc2lhbkJsdXJcIiwgXCJmZUltYWdlXCIsIFwiZmVNZXJnZVwiLCBcImZlTW9ycGhvbG9neVwiLCBcImZlT2Zmc2V0XCIsIFwiZmVTcGVjdWxhckxpZ2h0aW5nXCIsIFwiZmVUaWxlXCIsIFwiZmVUdXJidWxlbmNlXCIsIFwiZmlsdGVyXCIsIFwiZm9udFwiLCBcImZvcmVpZ25PYmplY3RcIiwgXCJnXCIsIFwiZ2x5cGhcIiwgXCJnbHlwaFJlZlwiLCBcImltYWdlXCIsIFwibGluZVwiLCBcImxpbmVhckdyYWRpZW50XCIsIFwibWFya2VyXCIsIFwibWFza1wiLCBcIm1pc3NpbmctZ2x5cGhcIiwgXCJwYXRoXCIsIFwicGF0dGVyblwiLCBcInBvbHlnb25cIiwgXCJwb2x5bGluZVwiLCBcInJhZGlhbEdyYWRpZW50XCIsIFwicmVjdFwiLCBcInN0b3BcIiwgXCJzdmdcIiwgXCJzd2l0Y2hcIiwgXCJzeW1ib2xcIiwgXCJ0ZXh0XCIsIFwidGV4dFBhdGhcIiwgXCJ0cmVmXCIsIFwidHNwYW5cIiwgXCJ1c2VcIiBdKTtcbiAgICAgICAgdGhpcy5qID0gUXQoWyBcImFsaWdubWVudC1iYXNlbGluZVwiLCBcImJhc2VsaW5lLXNoaWZ0XCIsIFwiY2xpcC1wYXRoXCIsIFwiY2xpcC1ydWxlXCIsIFwiY2xpcFwiLCBcImNvbG9yLWludGVycG9sYXRpb24tZmlsdGVyc1wiLCBcImNvbG9yLWludGVycG9sYXRpb25cIiwgXCJjb2xvci1wcm9maWxlXCIsIFwiY29sb3ItcmVuZGVyaW5nXCIsIFwiY29sb3JcIiwgXCJjdXJzb3JcIiwgXCJkaXJlY3Rpb25cIiwgXCJkaXNwbGF5XCIsIFwiZG9taW5hbnQtYmFzZWxpbmVcIiwgXCJlbmFibGUtYmFja2dyb3VuZFwiLCBcImZpbGwtb3BhY2l0eVwiLCBcImZpbGwtcnVsZVwiLCBcImZpbGxcIiwgXCJmaWx0ZXJcIiwgXCJmbG9vZC1jb2xvclwiLCBcImZsb29kLW9wYWNpdHlcIiwgXCJmb250LWZhbWlseVwiLCBcImZvbnQtc2l6ZS1hZGp1c3RcIiwgXCJmb250LXNpemVcIiwgXCJmb250LXN0cmV0Y2hcIiwgXCJmb250LXN0eWxlXCIsIFwiZm9udC12YXJpYW50XCIsIFwiZm9udC13ZWlnaHRcIiwgXCJnbHlwaC1vcmllbnRhdGlvbi1ob3Jpem9udGFsXCIsIFwiZ2x5cGgtb3JpZW50YXRpb24tdmVydGljYWxcIiwgXCJpbWFnZS1yZW5kZXJpbmdcIiwgXCJrZXJuaW5nXCIsIFwibGV0dGVyLXNwYWNpbmdcIiwgXCJsaWdodGluZy1jb2xvclwiLCBcIm1hcmtlci1lbmRcIiwgXCJtYXJrZXItbWlkXCIsIFwibWFya2VyLXN0YXJ0XCIsIFwibWFza1wiLCBcIm9wYWNpdHlcIiwgXCJvdmVyZmxvd1wiLCBcInBvaW50ZXItZXZlbnRzXCIsIFwic2hhcGUtcmVuZGVyaW5nXCIsIFwic3RvcC1jb2xvclwiLCBcInN0b3Atb3BhY2l0eVwiLCBcInN0cm9rZS1kYXNoYXJyYXlcIiwgXCJzdHJva2UtZGFzaG9mZnNldFwiLCBcInN0cm9rZS1saW5lY2FwXCIsIFwic3Ryb2tlLWxpbmVqb2luXCIsIFwic3Ryb2tlLW1pdGVybGltaXRcIiwgXCJzdHJva2Utb3BhY2l0eVwiLCBcInN0cm9rZS13aWR0aFwiLCBcInN0cm9rZVwiLCBcInRleHQtYW5jaG9yXCIsIFwidGV4dC1kZWNvcmF0aW9uXCIsIFwidGV4dC1yZW5kZXJpbmdcIiwgXCJ1bmljb2RlLWJpZGlcIiwgXCJ2aXNpYmlsaXR5XCIsIFwid29yZC1zcGFjaW5nXCIsIFwid3JpdGluZy1tb2RlXCIgXSk7XG4gICAgICAgIHRoaXMuU1ZHRWxlbWVudCA9IHQuZ2xvYmFsVGhpcy5TVkdFbGVtZW50O1xuICAgICAgICBjb25zdCBlID0gdC5kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgICBlLmlubmVySFRNTCA9IFwiPHN2Zz48YWx0R2x5cGggLz48L3N2Zz5cIjtcbiAgICAgICAgaWYgKFwiYWx0Z2x5cGhcIiA9PT0gZS5maXJzdEVsZW1lbnRDaGlsZC5ub2RlTmFtZSkge1xuICAgICAgICAgICAgY29uc3QgdCA9IHRoaXMuVjtcbiAgICAgICAgICAgIGxldCBlID0gdC5hbHRHbHlwaDtcbiAgICAgICAgICAgIHQuYWx0R2x5cGggPSB0LmFsdGdseXBoO1xuICAgICAgICAgICAgdC5hbHRnbHlwaCA9IGU7XG4gICAgICAgICAgICBlID0gdC5hbHRHbHlwaERlZjtcbiAgICAgICAgICAgIHQuYWx0R2x5cGhEZWYgPSB0LmFsdGdseXBoZGVmO1xuICAgICAgICAgICAgdC5hbHRnbHlwaGRlZiA9IGU7XG4gICAgICAgICAgICBlID0gdC5hbHRHbHlwaEl0ZW07XG4gICAgICAgICAgICB0LmFsdEdseXBoSXRlbSA9IHQuYWx0Z2x5cGhpdGVtO1xuICAgICAgICAgICAgdC5hbHRnbHlwaGl0ZW0gPSBlO1xuICAgICAgICAgICAgZSA9IHQuZ2x5cGhSZWY7XG4gICAgICAgICAgICB0LmdseXBoUmVmID0gdC5nbHlwaHJlZjtcbiAgICAgICAgICAgIHQuZ2x5cGhyZWYgPSBlO1xuICAgICAgICB9XG4gICAgfVxuICAgIHN0YXRpYyByZWdpc3Rlcih0KSB7XG4gICAgICAgIHJldHVybiBjLnNpbmdsZXRvbihZdCwgdGhpcykucmVnaXN0ZXIodCk7XG4gICAgfVxuICAgIGlzU3RhbmRhcmRTdmdBdHRyaWJ1dGUodCwgZSkge1xuICAgICAgICB2YXIgaTtcbiAgICAgICAgaWYgKCEodCBpbnN0YW5jZW9mIHRoaXMuU1ZHRWxlbWVudCkpIHJldHVybiBmYWxzZTtcbiAgICAgICAgcmV0dXJuIHRydWUgPT09IHRoaXMuX1t0Lm5vZGVOYW1lXSAmJiB0cnVlID09PSB0aGlzLmpbZV0gfHwgdHJ1ZSA9PT0gKG51bGwgPT09IChpID0gdGhpcy5WW3Qubm9kZU5hbWVdKSB8fCB2b2lkIDAgPT09IGkgPyB2b2lkIDAgOiBpW2VdKTtcbiAgICB9XG59XG5cblNWR0FuYWx5emVyLmluamVjdCA9IFsgS3QgXTtcblxuY29uc3QgWnQgPSBsLmNyZWF0ZUludGVyZmFjZShcIklBdHRyTWFwcGVyXCIsICh0ID0+IHQuc2luZ2xldG9uKEF0dHJNYXBwZXIpKSk7XG5cbmNsYXNzIEF0dHJNYXBwZXIge1xuICAgIGNvbnN0cnVjdG9yKHQpIHtcbiAgICAgICAgdGhpcy5zdmcgPSB0O1xuICAgICAgICB0aGlzLmZucyA9IFtdO1xuICAgICAgICB0aGlzLk4gPSB3dCgpO1xuICAgICAgICB0aGlzLlcgPSB3dCgpO1xuICAgICAgICB0aGlzLnVzZU1hcHBpbmcoe1xuICAgICAgICAgICAgTEFCRUw6IHtcbiAgICAgICAgICAgICAgICBmb3I6IFwiaHRtbEZvclwiXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgSU1HOiB7XG4gICAgICAgICAgICAgICAgdXNlbWFwOiBcInVzZU1hcFwiXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgSU5QVVQ6IHtcbiAgICAgICAgICAgICAgICBtYXhsZW5ndGg6IFwibWF4TGVuZ3RoXCIsXG4gICAgICAgICAgICAgICAgbWlubGVuZ3RoOiBcIm1pbkxlbmd0aFwiLFxuICAgICAgICAgICAgICAgIGZvcm1hY3Rpb246IFwiZm9ybUFjdGlvblwiLFxuICAgICAgICAgICAgICAgIGZvcm1lbmN0eXBlOiBcImZvcm1FbmNUeXBlXCIsXG4gICAgICAgICAgICAgICAgZm9ybW1ldGhvZDogXCJmb3JtTWV0aG9kXCIsXG4gICAgICAgICAgICAgICAgZm9ybW5vdmFsaWRhdGU6IFwiZm9ybU5vVmFsaWRhdGVcIixcbiAgICAgICAgICAgICAgICBmb3JtdGFyZ2V0OiBcImZvcm1UYXJnZXRcIixcbiAgICAgICAgICAgICAgICBpbnB1dG1vZGU6IFwiaW5wdXRNb2RlXCJcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBURVhUQVJFQToge1xuICAgICAgICAgICAgICAgIG1heGxlbmd0aDogXCJtYXhMZW5ndGhcIlxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIFREOiB7XG4gICAgICAgICAgICAgICAgcm93c3BhbjogXCJyb3dTcGFuXCIsXG4gICAgICAgICAgICAgICAgY29sc3BhbjogXCJjb2xTcGFuXCJcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBUSDoge1xuICAgICAgICAgICAgICAgIHJvd3NwYW46IFwicm93U3BhblwiLFxuICAgICAgICAgICAgICAgIGNvbHNwYW46IFwiY29sU3BhblwiXG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLnVzZUdsb2JhbE1hcHBpbmcoe1xuICAgICAgICAgICAgYWNjZXNza2V5OiBcImFjY2Vzc0tleVwiLFxuICAgICAgICAgICAgY29udGVudGVkaXRhYmxlOiBcImNvbnRlbnRFZGl0YWJsZVwiLFxuICAgICAgICAgICAgdGFiaW5kZXg6IFwidGFiSW5kZXhcIixcbiAgICAgICAgICAgIHRleHRjb250ZW50OiBcInRleHRDb250ZW50XCIsXG4gICAgICAgICAgICBpbm5lcmh0bWw6IFwiaW5uZXJIVE1MXCIsXG4gICAgICAgICAgICBzY3JvbGx0b3A6IFwic2Nyb2xsVG9wXCIsXG4gICAgICAgICAgICBzY3JvbGxsZWZ0OiBcInNjcm9sbExlZnRcIixcbiAgICAgICAgICAgIHJlYWRvbmx5OiBcInJlYWRPbmx5XCJcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIHN0YXRpYyBnZXQgaW5qZWN0KCkge1xuICAgICAgICByZXR1cm4gWyBZdCBdO1xuICAgIH1cbiAgICB1c2VNYXBwaW5nKHQpIHtcbiAgICAgICAgdmFyIGU7XG4gICAgICAgIHZhciBpO1xuICAgICAgICBsZXQgcztcbiAgICAgICAgbGV0IG47XG4gICAgICAgIGxldCByO1xuICAgICAgICBsZXQgbztcbiAgICAgICAgZm9yIChyIGluIHQpIHtcbiAgICAgICAgICAgIHMgPSB0W3JdO1xuICAgICAgICAgICAgbiA9IG51bGwgIT09IChlID0gKGkgPSB0aGlzLk4pW3JdKSAmJiB2b2lkIDAgIT09IGUgPyBlIDogaVtyXSA9IHd0KCk7XG4gICAgICAgICAgICBmb3IgKG8gaW4gcykge1xuICAgICAgICAgICAgICAgIGlmICh2b2lkIDAgIT09IG5bb10pIHRocm93IHRlKG8sIHIpO1xuICAgICAgICAgICAgICAgIG5bb10gPSBzW29dO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIHVzZUdsb2JhbE1hcHBpbmcodCkge1xuICAgICAgICBjb25zdCBlID0gdGhpcy5XO1xuICAgICAgICBmb3IgKGNvbnN0IGkgaW4gdCkge1xuICAgICAgICAgICAgaWYgKHZvaWQgMCAhPT0gZVtpXSkgdGhyb3cgdGUoaSwgXCIqXCIpO1xuICAgICAgICAgICAgZVtpXSA9IHRbaV07XG4gICAgICAgIH1cbiAgICB9XG4gICAgdXNlVHdvV2F5KHQpIHtcbiAgICAgICAgdGhpcy5mbnMucHVzaCh0KTtcbiAgICB9XG4gICAgaXNUd29XYXkodCwgZSkge1xuICAgICAgICByZXR1cm4gSnQodCwgZSkgfHwgdGhpcy5mbnMubGVuZ3RoID4gMCAmJiB0aGlzLmZucy5zb21lKChpID0+IGkodCwgZSkpKTtcbiAgICB9XG4gICAgbWFwKHQsIGUpIHtcbiAgICAgICAgdmFyIGksIHMsIG47XG4gICAgICAgIHJldHVybiBudWxsICE9PSAobiA9IG51bGwgIT09IChzID0gbnVsbCA9PT0gKGkgPSB0aGlzLk5bdC5ub2RlTmFtZV0pIHx8IHZvaWQgMCA9PT0gaSA/IHZvaWQgMCA6IGlbZV0pICYmIHZvaWQgMCAhPT0gcyA/IHMgOiB0aGlzLldbZV0pICYmIHZvaWQgMCAhPT0gbiA/IG4gOiB5dCh0LCBlLCB0aGlzLnN2ZykgPyBlIDogbnVsbDtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIEp0KHQsIGUpIHtcbiAgICBzd2l0Y2ggKHQubm9kZU5hbWUpIHtcbiAgICAgIGNhc2UgXCJJTlBVVFwiOlxuICAgICAgICBzd2l0Y2ggKHQudHlwZSkge1xuICAgICAgICAgIGNhc2UgXCJjaGVja2JveFwiOlxuICAgICAgICAgIGNhc2UgXCJyYWRpb1wiOlxuICAgICAgICAgICAgcmV0dXJuIFwiY2hlY2tlZFwiID09PSBlO1xuXG4gICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIHJldHVybiBcInZhbHVlXCIgPT09IGUgfHwgXCJmaWxlc1wiID09PSBlIHx8IFwidmFsdWUtYXMtbnVtYmVyXCIgPT09IGUgfHwgXCJ2YWx1ZS1hcy1kYXRlXCIgPT09IGU7XG4gICAgICAgIH1cblxuICAgICAgY2FzZSBcIlRFWFRBUkVBXCI6XG4gICAgICBjYXNlIFwiU0VMRUNUXCI6XG4gICAgICAgIHJldHVybiBcInZhbHVlXCIgPT09IGU7XG5cbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHN3aXRjaCAoZSkge1xuICAgICAgICAgIGNhc2UgXCJ0ZXh0Y29udGVudFwiOlxuICAgICAgICAgIGNhc2UgXCJpbm5lcmh0bWxcIjpcbiAgICAgICAgICAgIHJldHVybiB0Lmhhc0F0dHJpYnV0ZShcImNvbnRlbnRlZGl0YWJsZVwiKTtcblxuICAgICAgICAgIGNhc2UgXCJzY3JvbGx0b3BcIjpcbiAgICAgICAgICBjYXNlIFwic2Nyb2xsbGVmdFwiOlxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG5cbiAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgfVxufVxuXG5mdW5jdGlvbiB0ZSh0LCBlKSB7XG4gICAgcmV0dXJuIG5ldyBFcnJvcihgQXR0cmlidXRlICR7dH0gaGFzIGJlZW4gYWxyZWFkeSByZWdpc3RlcmVkIGZvciAke1wiKlwiID09PSBlID8gXCJhbGwgZWxlbWVudHNcIiA6IGA8JHtlfS8+YH1gKTtcbn1cblxuY2xhc3MgQ2FsbEJpbmRpbmcge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUsIGksIHMsIG4pIHtcbiAgICAgICAgdGhpcy5zb3VyY2VFeHByZXNzaW9uID0gdDtcbiAgICAgICAgdGhpcy50YXJnZXQgPSBlO1xuICAgICAgICB0aGlzLnRhcmdldFByb3BlcnR5ID0gaTtcbiAgICAgICAgdGhpcy5sb2NhdG9yID0gbjtcbiAgICAgICAgdGhpcy5pbnRlcmNlcHRvciA9IHRoaXM7XG4gICAgICAgIHRoaXMuaXNCb3VuZCA9IGZhbHNlO1xuICAgICAgICB0aGlzLnRhcmdldE9ic2VydmVyID0gcy5nZXRBY2Nlc3NvcihlLCBpKTtcbiAgICB9XG4gICAgY2FsbFNvdXJjZSh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSB0aGlzLiRzY29wZS5vdmVycmlkZUNvbnRleHQ7XG4gICAgICAgIGUuJGV2ZW50ID0gdDtcbiAgICAgICAgY29uc3QgaSA9IHRoaXMuc291cmNlRXhwcmVzc2lvbi5ldmFsdWF0ZSg4LCB0aGlzLiRzY29wZSwgdGhpcy5sb2NhdG9yLCBudWxsKTtcbiAgICAgICAgUmVmbGVjdC5kZWxldGVQcm9wZXJ0eShlLCBcIiRldmVudFwiKTtcbiAgICAgICAgcmV0dXJuIGk7XG4gICAgfVxuICAgICRiaW5kKHQsIGUpIHtcbiAgICAgICAgaWYgKHRoaXMuaXNCb3VuZCkge1xuICAgICAgICAgICAgaWYgKHRoaXMuJHNjb3BlID09PSBlKSByZXR1cm47XG4gICAgICAgICAgICB0aGlzLmludGVyY2VwdG9yLiR1bmJpbmQoMiB8IHQpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuJHNjb3BlID0gZTtcbiAgICAgICAgaWYgKHRoaXMuc291cmNlRXhwcmVzc2lvbi5oYXNCaW5kKSB0aGlzLnNvdXJjZUV4cHJlc3Npb24uYmluZCh0LCBlLCB0aGlzLmludGVyY2VwdG9yKTtcbiAgICAgICAgdGhpcy50YXJnZXRPYnNlcnZlci5zZXRWYWx1ZSgodCA9PiB0aGlzLmludGVyY2VwdG9yLmNhbGxTb3VyY2UodCkpLCB0LCB0aGlzLnRhcmdldCwgdGhpcy50YXJnZXRQcm9wZXJ0eSk7XG4gICAgICAgIHRoaXMuaXNCb3VuZCA9IHRydWU7XG4gICAgfVxuICAgICR1bmJpbmQodCkge1xuICAgICAgICBpZiAoIXRoaXMuaXNCb3VuZCkgcmV0dXJuO1xuICAgICAgICBpZiAodGhpcy5zb3VyY2VFeHByZXNzaW9uLmhhc1VuYmluZCkgdGhpcy5zb3VyY2VFeHByZXNzaW9uLnVuYmluZCh0LCB0aGlzLiRzY29wZSwgdGhpcy5pbnRlcmNlcHRvcik7XG4gICAgICAgIHRoaXMuJHNjb3BlID0gdm9pZCAwO1xuICAgICAgICB0aGlzLnRhcmdldE9ic2VydmVyLnNldFZhbHVlKG51bGwsIHQsIHRoaXMudGFyZ2V0LCB0aGlzLnRhcmdldFByb3BlcnR5KTtcbiAgICAgICAgdGhpcy5pc0JvdW5kID0gZmFsc2U7XG4gICAgfVxuICAgIG9ic2VydmUodCwgZSkge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIGhhbmRsZUNoYW5nZSh0LCBlLCBpKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG59XG5cbmNsYXNzIEF0dHJpYnV0ZU9ic2VydmVyIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlLCBpKSB7XG4gICAgICAgIHRoaXMudHlwZSA9IDIgfCAxIHwgNDtcbiAgICAgICAgdGhpcy52ID0gbnVsbDtcbiAgICAgICAgdGhpcy5vdiA9IG51bGw7XG4gICAgICAgIHRoaXMuSCA9IGZhbHNlO1xuICAgICAgICB0aGlzLmYgPSAwO1xuICAgICAgICB0aGlzLm8gPSB0O1xuICAgICAgICB0aGlzLkcgPSBlO1xuICAgICAgICB0aGlzLlggPSBpO1xuICAgIH1cbiAgICBnZXRWYWx1ZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudjtcbiAgICB9XG4gICAgc2V0VmFsdWUodCwgZSkge1xuICAgICAgICB0aGlzLnYgPSB0O1xuICAgICAgICB0aGlzLkggPSB0ICE9PSB0aGlzLm92O1xuICAgICAgICBpZiAoMCA9PT0gKDI1NiAmIGUpKSB0aGlzLksoKTtcbiAgICB9XG4gICAgSygpIHtcbiAgICAgICAgaWYgKHRoaXMuSCkge1xuICAgICAgICAgICAgdGhpcy5IID0gZmFsc2U7XG4gICAgICAgICAgICB0aGlzLm92ID0gdGhpcy52O1xuICAgICAgICAgICAgc3dpdGNoICh0aGlzLlgpIHtcbiAgICAgICAgICAgICAgY2FzZSBcImNsYXNzXCI6XG4gICAgICAgICAgICAgICAgdGhpcy5vLmNsYXNzTGlzdC50b2dnbGUodGhpcy5HLCAhIXRoaXMudik7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgICAgY2FzZSBcInN0eWxlXCI6XG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBsZXQgdCA9IFwiXCI7XG4gICAgICAgICAgICAgICAgICAgIGxldCBlID0gdGhpcy52O1xuICAgICAgICAgICAgICAgICAgICBpZiAoQXQoZSkgJiYgZS5pbmNsdWRlcyhcIiFpbXBvcnRhbnRcIikpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHQgPSBcImltcG9ydGFudFwiO1xuICAgICAgICAgICAgICAgICAgICAgICAgZSA9IGUucmVwbGFjZShcIiFpbXBvcnRhbnRcIiwgXCJcIik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgdGhpcy5vLnN0eWxlLnNldFByb3BlcnR5KHRoaXMuRywgZSwgdCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIGlmIChudWxsID09IHRoaXMudikgdGhpcy5vLnJlbW92ZUF0dHJpYnV0ZSh0aGlzLlgpOyBlbHNlIHRoaXMuby5zZXRBdHRyaWJ1dGUodGhpcy5YLCBTdHJpbmcodGhpcy52KSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgaGFuZGxlTXV0YXRpb24odCkge1xuICAgICAgICBsZXQgZSA9IGZhbHNlO1xuICAgICAgICBmb3IgKGxldCBpID0gMCwgcyA9IHQubGVuZ3RoOyBzID4gaTsgKytpKSB7XG4gICAgICAgICAgICBjb25zdCBzID0gdFtpXTtcbiAgICAgICAgICAgIGlmIChcImF0dHJpYnV0ZXNcIiA9PT0gcy50eXBlICYmIHMuYXR0cmlidXRlTmFtZSA9PT0gdGhpcy5HKSB7XG4gICAgICAgICAgICAgICAgZSA9IHRydWU7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGUpIHtcbiAgICAgICAgICAgIGxldCB0O1xuICAgICAgICAgICAgc3dpdGNoICh0aGlzLlgpIHtcbiAgICAgICAgICAgICAgY2FzZSBcImNsYXNzXCI6XG4gICAgICAgICAgICAgICAgdCA9IHRoaXMuby5jbGFzc0xpc3QuY29udGFpbnModGhpcy5HKTtcbiAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgICBjYXNlIFwic3R5bGVcIjpcbiAgICAgICAgICAgICAgICB0ID0gdGhpcy5vLnN0eWxlLmdldFByb3BlcnR5VmFsdWUodGhpcy5HKTtcbiAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgQVVSMDY1MToke3RoaXMuWH1gKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0ICE9PSB0aGlzLnYpIHtcbiAgICAgICAgICAgICAgICB0aGlzLm92ID0gdGhpcy52O1xuICAgICAgICAgICAgICAgIHRoaXMudiA9IHQ7XG4gICAgICAgICAgICAgICAgdGhpcy5IID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgdGhpcy5mID0gMDtcbiAgICAgICAgICAgICAgICB0aGlzLnF1ZXVlLmFkZCh0aGlzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBzdWJzY3JpYmUodCkge1xuICAgICAgICBpZiAodGhpcy5zdWJzLmFkZCh0KSAmJiAxID09PSB0aGlzLnN1YnMuY291bnQpIHtcbiAgICAgICAgICAgIHRoaXMudiA9IHRoaXMub3YgPSB0aGlzLm8uZ2V0QXR0cmlidXRlKHRoaXMuRyk7XG4gICAgICAgICAgICBlZSh0aGlzLm8ub3duZXJEb2N1bWVudC5kZWZhdWx0Vmlldy5NdXRhdGlvbk9ic2VydmVyLCB0aGlzLm8sIHRoaXMpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHVuc3Vic2NyaWJlKHQpIHtcbiAgICAgICAgaWYgKHRoaXMuc3Vicy5yZW1vdmUodCkgJiYgMCA9PT0gdGhpcy5zdWJzLmNvdW50KSBpZSh0aGlzLm8sIHRoaXMpO1xuICAgIH1cbiAgICBmbHVzaCgpIHtcbiAgICAgICAgcmUgPSB0aGlzLm92O1xuICAgICAgICB0aGlzLm92ID0gdGhpcy52O1xuICAgICAgICB0aGlzLnN1YnMubm90aWZ5KHRoaXMudiwgcmUsIHRoaXMuZik7XG4gICAgfVxufVxuXG5QKEF0dHJpYnV0ZU9ic2VydmVyKTtcblxuTyhBdHRyaWJ1dGVPYnNlcnZlcik7XG5cbmNvbnN0IGVlID0gKHQsIGUsIGkpID0+IHtcbiAgICBpZiAodm9pZCAwID09PSBlLiRlTU9icykgZS4kZU1PYnMgPSBuZXcgU2V0O1xuICAgIGlmICh2b2lkIDAgPT09IGUuJG1PYnMpIChlLiRtT2JzID0gbmV3IHQoc2UpKS5vYnNlcnZlKGUsIHtcbiAgICAgICAgYXR0cmlidXRlczogdHJ1ZVxuICAgIH0pO1xuICAgIGUuJGVNT2JzLmFkZChpKTtcbn07XG5cbmNvbnN0IGllID0gKHQsIGUpID0+IHtcbiAgICBjb25zdCBpID0gdC4kZU1PYnM7XG4gICAgaWYgKGkgJiYgaS5kZWxldGUoZSkpIHtcbiAgICAgICAgaWYgKDAgPT09IGkuc2l6ZSkge1xuICAgICAgICAgICAgdC4kbU9icy5kaXNjb25uZWN0KCk7XG4gICAgICAgICAgICB0LiRtT2JzID0gdm9pZCAwO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG59O1xuXG5jb25zdCBzZSA9IHQgPT4ge1xuICAgIHRbMF0udGFyZ2V0LiRlTU9icy5mb3JFYWNoKG5lLCB0KTtcbn07XG5cbmZ1bmN0aW9uIG5lKHQpIHtcbiAgICB0LmhhbmRsZU11dGF0aW9uKHRoaXMpO1xufVxuXG5sZXQgcmU7XG5cbmNsYXNzIEJpbmRpbmdUYXJnZXRTdWJzY3JpYmVyIHtcbiAgICBjb25zdHJ1Y3Rvcih0KSB7XG4gICAgICAgIHRoaXMuYiA9IHQ7XG4gICAgfVxuICAgIGhhbmRsZUNoYW5nZSh0LCBlLCBpKSB7XG4gICAgICAgIGNvbnN0IHMgPSB0aGlzLmI7XG4gICAgICAgIGlmICh0ICE9PSBzLnNvdXJjZUV4cHJlc3Npb24uZXZhbHVhdGUoaSwgcy4kc2NvcGUsIHMubG9jYXRvciwgbnVsbCkpIHMudXBkYXRlU291cmNlKHQsIGkpO1xuICAgIH1cbn1cblxuY29uc3Qge29uZVRpbWU6IG9lLCB0b1ZpZXc6IGxlLCBmcm9tVmlldzogaGV9ID0gRDtcblxuY29uc3QgYWUgPSBsZSB8IG9lO1xuXG5jb25zdCBjZSA9IHtcbiAgICByZXVzYWJsZTogZmFsc2UsXG4gICAgcHJlZW1wdDogdHJ1ZVxufTtcblxuY2xhc3MgQXR0cmlidXRlQmluZGluZyB7XG4gICAgY29uc3RydWN0b3IodCwgZSwgaSwgcywgbiwgciwgbykge1xuICAgICAgICB0aGlzLnNvdXJjZUV4cHJlc3Npb24gPSB0O1xuICAgICAgICB0aGlzLnRhcmdldEF0dHJpYnV0ZSA9IGk7XG4gICAgICAgIHRoaXMudGFyZ2V0UHJvcGVydHkgPSBzO1xuICAgICAgICB0aGlzLm1vZGUgPSBuO1xuICAgICAgICB0aGlzLmxvY2F0b3IgPSBvO1xuICAgICAgICB0aGlzLmludGVyY2VwdG9yID0gdGhpcztcbiAgICAgICAgdGhpcy5pc0JvdW5kID0gZmFsc2U7XG4gICAgICAgIHRoaXMuJHNjb3BlID0gbnVsbDtcbiAgICAgICAgdGhpcy50YXNrID0gbnVsbDtcbiAgICAgICAgdGhpcy50YXJnZXRTdWJzY3JpYmVyID0gbnVsbDtcbiAgICAgICAgdGhpcy5wZXJzaXN0ZW50RmxhZ3MgPSAwO1xuICAgICAgICB0aGlzLnZhbHVlID0gdm9pZCAwO1xuICAgICAgICB0aGlzLnRhcmdldCA9IGU7XG4gICAgICAgIHRoaXMucCA9IG8uZ2V0KEt0KTtcbiAgICAgICAgdGhpcy5vTCA9IHI7XG4gICAgfVxuICAgIHVwZGF0ZVRhcmdldCh0LCBlKSB7XG4gICAgICAgIGUgfD0gdGhpcy5wZXJzaXN0ZW50RmxhZ3M7XG4gICAgICAgIHRoaXMudGFyZ2V0T2JzZXJ2ZXIuc2V0VmFsdWUodCwgZSwgdGhpcy50YXJnZXQsIHRoaXMudGFyZ2V0UHJvcGVydHkpO1xuICAgIH1cbiAgICB1cGRhdGVTb3VyY2UodCwgZSkge1xuICAgICAgICBlIHw9IHRoaXMucGVyc2lzdGVudEZsYWdzO1xuICAgICAgICB0aGlzLnNvdXJjZUV4cHJlc3Npb24uYXNzaWduKGUsIHRoaXMuJHNjb3BlLCB0aGlzLmxvY2F0b3IsIHQpO1xuICAgIH1cbiAgICBoYW5kbGVDaGFuZ2UodCwgZSwgaSkge1xuICAgICAgICBpZiAoIXRoaXMuaXNCb3VuZCkgcmV0dXJuO1xuICAgICAgICBpIHw9IHRoaXMucGVyc2lzdGVudEZsYWdzO1xuICAgICAgICBjb25zdCBzID0gdGhpcy5tb2RlO1xuICAgICAgICBjb25zdCBuID0gdGhpcy5pbnRlcmNlcHRvcjtcbiAgICAgICAgY29uc3QgciA9IHRoaXMuc291cmNlRXhwcmVzc2lvbjtcbiAgICAgICAgY29uc3QgbyA9IHRoaXMuJHNjb3BlO1xuICAgICAgICBjb25zdCBsID0gdGhpcy5sb2NhdG9yO1xuICAgICAgICBjb25zdCBoID0gdGhpcy50YXJnZXRPYnNlcnZlcjtcbiAgICAgICAgY29uc3QgYSA9IDAgPT09ICgyICYgaSkgJiYgKDQgJiBoLnR5cGUpID4gMDtcbiAgICAgICAgbGV0IGMgPSBmYWxzZTtcbiAgICAgICAgbGV0IHU7XG4gICAgICAgIGlmICgxMDA4MiAhPT0gci4ka2luZCB8fCB0aGlzLm9icy5jb3VudCA+IDEpIHtcbiAgICAgICAgICAgIGMgPSAwID09PSAocyAmIG9lKTtcbiAgICAgICAgICAgIGlmIChjKSB0aGlzLm9icy52ZXJzaW9uKys7XG4gICAgICAgICAgICB0ID0gci5ldmFsdWF0ZShpLCBvLCBsLCBuKTtcbiAgICAgICAgICAgIGlmIChjKSB0aGlzLm9icy5jbGVhcigpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0ICE9PSB0aGlzLnZhbHVlKSB7XG4gICAgICAgICAgICB0aGlzLnZhbHVlID0gdDtcbiAgICAgICAgICAgIGlmIChhKSB7XG4gICAgICAgICAgICAgICAgdSA9IHRoaXMudGFzaztcbiAgICAgICAgICAgICAgICB0aGlzLnRhc2sgPSB0aGlzLnAuZG9tV3JpdGVRdWV1ZS5xdWV1ZVRhc2soKCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy50YXNrID0gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgbi51cGRhdGVUYXJnZXQodCwgaSk7XG4gICAgICAgICAgICAgICAgfSksIGNlKTtcbiAgICAgICAgICAgICAgICBudWxsID09PSB1IHx8IHZvaWQgMCA9PT0gdSA/IHZvaWQgMCA6IHUuY2FuY2VsKCk7XG4gICAgICAgICAgICB9IGVsc2Ugbi51cGRhdGVUYXJnZXQodCwgaSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgJGJpbmQodCwgZSkge1xuICAgICAgICB2YXIgaTtcbiAgICAgICAgaWYgKHRoaXMuaXNCb3VuZCkge1xuICAgICAgICAgICAgaWYgKHRoaXMuJHNjb3BlID09PSBlKSByZXR1cm47XG4gICAgICAgICAgICB0aGlzLmludGVyY2VwdG9yLiR1bmJpbmQoMiB8IHQpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMucGVyc2lzdGVudEZsYWdzID0gOTYxICYgdDtcbiAgICAgICAgdGhpcy4kc2NvcGUgPSBlO1xuICAgICAgICBsZXQgcyA9IHRoaXMuc291cmNlRXhwcmVzc2lvbjtcbiAgICAgICAgaWYgKHMuaGFzQmluZCkgcy5iaW5kKHQsIGUsIHRoaXMuaW50ZXJjZXB0b3IpO1xuICAgICAgICBsZXQgbiA9IHRoaXMudGFyZ2V0T2JzZXJ2ZXI7XG4gICAgICAgIGlmICghbikgbiA9IHRoaXMudGFyZ2V0T2JzZXJ2ZXIgPSBuZXcgQXR0cmlidXRlT2JzZXJ2ZXIodGhpcy50YXJnZXQsIHRoaXMudGFyZ2V0UHJvcGVydHksIHRoaXMudGFyZ2V0QXR0cmlidXRlKTtcbiAgICAgICAgcyA9IHRoaXMuc291cmNlRXhwcmVzc2lvbjtcbiAgICAgICAgY29uc3QgciA9IHRoaXMubW9kZTtcbiAgICAgICAgY29uc3QgbyA9IHRoaXMuaW50ZXJjZXB0b3I7XG4gICAgICAgIGxldCBsID0gZmFsc2U7XG4gICAgICAgIGlmIChyICYgYWUpIHtcbiAgICAgICAgICAgIGwgPSAociAmIGxlKSA+IDA7XG4gICAgICAgICAgICBvLnVwZGF0ZVRhcmdldCh0aGlzLnZhbHVlID0gcy5ldmFsdWF0ZSh0LCBlLCB0aGlzLmxvY2F0b3IsIGwgPyBvIDogbnVsbCksIHQpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChyICYgaGUpIG4uc3Vic2NyaWJlKG51bGwgIT09IChpID0gdGhpcy50YXJnZXRTdWJzY3JpYmVyKSAmJiB2b2lkIDAgIT09IGkgPyBpIDogdGhpcy50YXJnZXRTdWJzY3JpYmVyID0gbmV3IEJpbmRpbmdUYXJnZXRTdWJzY3JpYmVyKG8pKTtcbiAgICAgICAgdGhpcy5pc0JvdW5kID0gdHJ1ZTtcbiAgICB9XG4gICAgJHVuYmluZCh0KSB7XG4gICAgICAgIHZhciBlO1xuICAgICAgICBpZiAoIXRoaXMuaXNCb3VuZCkgcmV0dXJuO1xuICAgICAgICB0aGlzLnBlcnNpc3RlbnRGbGFncyA9IDA7XG4gICAgICAgIGlmICh0aGlzLnNvdXJjZUV4cHJlc3Npb24uaGFzVW5iaW5kKSB0aGlzLnNvdXJjZUV4cHJlc3Npb24udW5iaW5kKHQsIHRoaXMuJHNjb3BlLCB0aGlzLmludGVyY2VwdG9yKTtcbiAgICAgICAgdGhpcy4kc2NvcGUgPSBudWxsO1xuICAgICAgICB0aGlzLnZhbHVlID0gdm9pZCAwO1xuICAgICAgICBpZiAodGhpcy50YXJnZXRTdWJzY3JpYmVyKSB0aGlzLnRhcmdldE9ic2VydmVyLnVuc3Vic2NyaWJlKHRoaXMudGFyZ2V0U3Vic2NyaWJlcik7XG4gICAgICAgIG51bGwgPT09IChlID0gdGhpcy50YXNrKSB8fCB2b2lkIDAgPT09IGUgPyB2b2lkIDAgOiBlLmNhbmNlbCgpO1xuICAgICAgICB0aGlzLnRhc2sgPSBudWxsO1xuICAgICAgICB0aGlzLm9icy5jbGVhckFsbCgpO1xuICAgICAgICB0aGlzLmlzQm91bmQgPSBmYWxzZTtcbiAgICB9XG59XG5cbiQoQXR0cmlidXRlQmluZGluZyk7XG5cbmNvbnN0IHt0b1ZpZXc6IHVlfSA9IEQ7XG5cbmNvbnN0IGZlID0ge1xuICAgIHJldXNhYmxlOiBmYWxzZSxcbiAgICBwcmVlbXB0OiB0cnVlXG59O1xuXG5jbGFzcyBJbnRlcnBvbGF0aW9uQmluZGluZyB7XG4gICAgY29uc3RydWN0b3IodCwgZSwgaSwgcywgbiwgciwgbykge1xuICAgICAgICB0aGlzLmludGVycG9sYXRpb24gPSBlO1xuICAgICAgICB0aGlzLnRhcmdldCA9IGk7XG4gICAgICAgIHRoaXMudGFyZ2V0UHJvcGVydHkgPSBzO1xuICAgICAgICB0aGlzLm1vZGUgPSBuO1xuICAgICAgICB0aGlzLmxvY2F0b3IgPSByO1xuICAgICAgICB0aGlzLnRhc2tRdWV1ZSA9IG87XG4gICAgICAgIHRoaXMuaW50ZXJjZXB0b3IgPSB0aGlzO1xuICAgICAgICB0aGlzLmlzQm91bmQgPSBmYWxzZTtcbiAgICAgICAgdGhpcy4kc2NvcGUgPSB2b2lkIDA7XG4gICAgICAgIHRoaXMudGFzayA9IG51bGw7XG4gICAgICAgIHRoaXMub0wgPSB0O1xuICAgICAgICB0aGlzLnRhcmdldE9ic2VydmVyID0gdC5nZXRBY2Nlc3NvcihpLCBzKTtcbiAgICAgICAgY29uc3QgbCA9IGUuZXhwcmVzc2lvbnM7XG4gICAgICAgIGNvbnN0IGggPSB0aGlzLnBhcnRCaW5kaW5ncyA9IEFycmF5KGwubGVuZ3RoKTtcbiAgICAgICAgY29uc3QgYSA9IGwubGVuZ3RoO1xuICAgICAgICBsZXQgYyA9IDA7XG4gICAgICAgIGZvciAoO2EgPiBjOyArK2MpIGhbY10gPSBuZXcgSW50ZXJwb2xhdGlvblBhcnRCaW5kaW5nKGxbY10sIGksIHMsIHIsIHQsIHRoaXMpO1xuICAgIH1cbiAgICB1cGRhdGVUYXJnZXQodCwgZSkge1xuICAgICAgICBjb25zdCBpID0gdGhpcy5wYXJ0QmluZGluZ3M7XG4gICAgICAgIGNvbnN0IHMgPSB0aGlzLmludGVycG9sYXRpb24ucGFydHM7XG4gICAgICAgIGNvbnN0IG4gPSBpLmxlbmd0aDtcbiAgICAgICAgbGV0IHIgPSBcIlwiO1xuICAgICAgICBsZXQgbyA9IDA7XG4gICAgICAgIGlmICgxID09PSBuKSByID0gc1swXSArIGlbMF0udmFsdWUgKyBzWzFdOyBlbHNlIHtcbiAgICAgICAgICAgIHIgPSBzWzBdO1xuICAgICAgICAgICAgZm9yICg7biA+IG87ICsrbykgciArPSBpW29dLnZhbHVlICsgc1tvICsgMV07XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgbCA9IHRoaXMudGFyZ2V0T2JzZXJ2ZXI7XG4gICAgICAgIGNvbnN0IGggPSAwID09PSAoMiAmIGUpICYmICg0ICYgbC50eXBlKSA+IDA7XG4gICAgICAgIGxldCBhO1xuICAgICAgICBpZiAoaCkge1xuICAgICAgICAgICAgYSA9IHRoaXMudGFzaztcbiAgICAgICAgICAgIHRoaXMudGFzayA9IHRoaXMudGFza1F1ZXVlLnF1ZXVlVGFzaygoKCkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMudGFzayA9IG51bGw7XG4gICAgICAgICAgICAgICAgbC5zZXRWYWx1ZShyLCBlLCB0aGlzLnRhcmdldCwgdGhpcy50YXJnZXRQcm9wZXJ0eSk7XG4gICAgICAgICAgICB9KSwgZmUpO1xuICAgICAgICAgICAgbnVsbCA9PT0gYSB8fCB2b2lkIDAgPT09IGEgPyB2b2lkIDAgOiBhLmNhbmNlbCgpO1xuICAgICAgICAgICAgYSA9IG51bGw7XG4gICAgICAgIH0gZWxzZSBsLnNldFZhbHVlKHIsIGUsIHRoaXMudGFyZ2V0LCB0aGlzLnRhcmdldFByb3BlcnR5KTtcbiAgICB9XG4gICAgJGJpbmQodCwgZSkge1xuICAgICAgICBpZiAodGhpcy5pc0JvdW5kKSB7XG4gICAgICAgICAgICBpZiAodGhpcy4kc2NvcGUgPT09IGUpIHJldHVybjtcbiAgICAgICAgICAgIHRoaXMuaW50ZXJjZXB0b3IuJHVuYmluZCh0KTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmlzQm91bmQgPSB0cnVlO1xuICAgICAgICB0aGlzLiRzY29wZSA9IGU7XG4gICAgICAgIGNvbnN0IGkgPSB0aGlzLnBhcnRCaW5kaW5ncztcbiAgICAgICAgY29uc3QgcyA9IGkubGVuZ3RoO1xuICAgICAgICBsZXQgbiA9IDA7XG4gICAgICAgIGZvciAoO3MgPiBuOyArK24pIGlbbl0uJGJpbmQodCwgZSk7XG4gICAgICAgIHRoaXMudXBkYXRlVGFyZ2V0KHZvaWQgMCwgdCk7XG4gICAgfVxuICAgICR1bmJpbmQodCkge1xuICAgICAgICB2YXIgZTtcbiAgICAgICAgaWYgKCF0aGlzLmlzQm91bmQpIHJldHVybjtcbiAgICAgICAgdGhpcy5pc0JvdW5kID0gZmFsc2U7XG4gICAgICAgIHRoaXMuJHNjb3BlID0gdm9pZCAwO1xuICAgICAgICBjb25zdCBpID0gdGhpcy5wYXJ0QmluZGluZ3M7XG4gICAgICAgIGNvbnN0IHMgPSBpLmxlbmd0aDtcbiAgICAgICAgbGV0IG4gPSAwO1xuICAgICAgICBmb3IgKDtzID4gbjsgKytuKSBpW25dLmludGVyY2VwdG9yLiR1bmJpbmQodCk7XG4gICAgICAgIG51bGwgPT09IChlID0gdGhpcy50YXNrKSB8fCB2b2lkIDAgPT09IGUgPyB2b2lkIDAgOiBlLmNhbmNlbCgpO1xuICAgICAgICB0aGlzLnRhc2sgPSBudWxsO1xuICAgIH1cbn1cblxuY2xhc3MgSW50ZXJwb2xhdGlvblBhcnRCaW5kaW5nIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlLCBpLCBzLCBuLCByKSB7XG4gICAgICAgIHRoaXMuc291cmNlRXhwcmVzc2lvbiA9IHQ7XG4gICAgICAgIHRoaXMudGFyZ2V0ID0gZTtcbiAgICAgICAgdGhpcy50YXJnZXRQcm9wZXJ0eSA9IGk7XG4gICAgICAgIHRoaXMubG9jYXRvciA9IHM7XG4gICAgICAgIHRoaXMub3duZXIgPSByO1xuICAgICAgICB0aGlzLmludGVyY2VwdG9yID0gdGhpcztcbiAgICAgICAgdGhpcy5tb2RlID0gRC50b1ZpZXc7XG4gICAgICAgIHRoaXMudmFsdWUgPSBcIlwiO1xuICAgICAgICB0aGlzLnRhc2sgPSBudWxsO1xuICAgICAgICB0aGlzLmlzQm91bmQgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5vTCA9IG47XG4gICAgfVxuICAgIGhhbmRsZUNoYW5nZSh0LCBlLCBpKSB7XG4gICAgICAgIGlmICghdGhpcy5pc0JvdW5kKSByZXR1cm47XG4gICAgICAgIGNvbnN0IHMgPSB0aGlzLnNvdXJjZUV4cHJlc3Npb247XG4gICAgICAgIGNvbnN0IG4gPSB0aGlzLm9icztcbiAgICAgICAgY29uc3QgciA9IDEwMDgyID09PSBzLiRraW5kICYmIDEgPT09IG4uY291bnQ7XG4gICAgICAgIGxldCBvID0gZmFsc2U7XG4gICAgICAgIGlmICghcikge1xuICAgICAgICAgICAgbyA9ICh0aGlzLm1vZGUgJiB1ZSkgPiAwO1xuICAgICAgICAgICAgaWYgKG8pIG4udmVyc2lvbisrO1xuICAgICAgICAgICAgdCA9IHMuZXZhbHVhdGUoaSwgdGhpcy4kc2NvcGUsIHRoaXMubG9jYXRvciwgbyA/IHRoaXMuaW50ZXJjZXB0b3IgOiBudWxsKTtcbiAgICAgICAgICAgIGlmIChvKSBuLmNsZWFyKCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHQgIT0gdGhpcy52YWx1ZSkge1xuICAgICAgICAgICAgdGhpcy52YWx1ZSA9IHQ7XG4gICAgICAgICAgICBpZiAodCBpbnN0YW5jZW9mIEFycmF5KSB0aGlzLm9ic2VydmVDb2xsZWN0aW9uKHQpO1xuICAgICAgICAgICAgdGhpcy5vd25lci51cGRhdGVUYXJnZXQodCwgaSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgaGFuZGxlQ29sbGVjdGlvbkNoYW5nZSh0LCBlKSB7XG4gICAgICAgIHRoaXMub3duZXIudXBkYXRlVGFyZ2V0KHZvaWQgMCwgZSk7XG4gICAgfVxuICAgICRiaW5kKHQsIGUpIHtcbiAgICAgICAgaWYgKHRoaXMuaXNCb3VuZCkge1xuICAgICAgICAgICAgaWYgKHRoaXMuJHNjb3BlID09PSBlKSByZXR1cm47XG4gICAgICAgICAgICB0aGlzLmludGVyY2VwdG9yLiR1bmJpbmQodCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5pc0JvdW5kID0gdHJ1ZTtcbiAgICAgICAgdGhpcy4kc2NvcGUgPSBlO1xuICAgICAgICBpZiAodGhpcy5zb3VyY2VFeHByZXNzaW9uLmhhc0JpbmQpIHRoaXMuc291cmNlRXhwcmVzc2lvbi5iaW5kKHQsIGUsIHRoaXMuaW50ZXJjZXB0b3IpO1xuICAgICAgICB0aGlzLnZhbHVlID0gdGhpcy5zb3VyY2VFeHByZXNzaW9uLmV2YWx1YXRlKHQsIGUsIHRoaXMubG9jYXRvciwgKHRoaXMubW9kZSAmIHVlKSA+IDAgPyB0aGlzLmludGVyY2VwdG9yIDogbnVsbCk7XG4gICAgICAgIGlmICh0aGlzLnZhbHVlIGluc3RhbmNlb2YgQXJyYXkpIHRoaXMub2JzZXJ2ZUNvbGxlY3Rpb24odGhpcy52YWx1ZSk7XG4gICAgfVxuICAgICR1bmJpbmQodCkge1xuICAgICAgICBpZiAoIXRoaXMuaXNCb3VuZCkgcmV0dXJuO1xuICAgICAgICB0aGlzLmlzQm91bmQgPSBmYWxzZTtcbiAgICAgICAgaWYgKHRoaXMuc291cmNlRXhwcmVzc2lvbi5oYXNVbmJpbmQpIHRoaXMuc291cmNlRXhwcmVzc2lvbi51bmJpbmQodCwgdGhpcy4kc2NvcGUsIHRoaXMuaW50ZXJjZXB0b3IpO1xuICAgICAgICB0aGlzLiRzY29wZSA9IHZvaWQgMDtcbiAgICAgICAgdGhpcy5vYnMuY2xlYXJBbGwoKTtcbiAgICB9XG59XG5cbiQoSW50ZXJwb2xhdGlvblBhcnRCaW5kaW5nKTtcblxuY2xhc3MgQ29udGVudEJpbmRpbmcge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUsIGksIHMsIG4sIHIpIHtcbiAgICAgICAgdGhpcy5zb3VyY2VFeHByZXNzaW9uID0gdDtcbiAgICAgICAgdGhpcy50YXJnZXQgPSBlO1xuICAgICAgICB0aGlzLmxvY2F0b3IgPSBpO1xuICAgICAgICB0aGlzLnAgPSBuO1xuICAgICAgICB0aGlzLnN0cmljdCA9IHI7XG4gICAgICAgIHRoaXMuaW50ZXJjZXB0b3IgPSB0aGlzO1xuICAgICAgICB0aGlzLm1vZGUgPSBELnRvVmlldztcbiAgICAgICAgdGhpcy52YWx1ZSA9IFwiXCI7XG4gICAgICAgIHRoaXMudGFzayA9IG51bGw7XG4gICAgICAgIHRoaXMuaXNCb3VuZCA9IGZhbHNlO1xuICAgICAgICB0aGlzLm9MID0gcztcbiAgICB9XG4gICAgdXBkYXRlVGFyZ2V0KHQsIGUpIHtcbiAgICAgICAgdmFyIGksIHM7XG4gICAgICAgIGNvbnN0IG4gPSB0aGlzLnRhcmdldDtcbiAgICAgICAgY29uc3QgciA9IHRoaXMucC5Ob2RlO1xuICAgICAgICBjb25zdCBvID0gdGhpcy52YWx1ZTtcbiAgICAgICAgdGhpcy52YWx1ZSA9IHQ7XG4gICAgICAgIGlmIChvIGluc3RhbmNlb2YgcikgbnVsbCA9PT0gKGkgPSBvLnBhcmVudE5vZGUpIHx8IHZvaWQgMCA9PT0gaSA/IHZvaWQgMCA6IGkucmVtb3ZlQ2hpbGQobyk7XG4gICAgICAgIGlmICh0IGluc3RhbmNlb2Ygcikge1xuICAgICAgICAgICAgbi50ZXh0Q29udGVudCA9IFwiXCI7XG4gICAgICAgICAgICBudWxsID09PSAocyA9IG4ucGFyZW50Tm9kZSkgfHwgdm9pZCAwID09PSBzID8gdm9pZCAwIDogcy5pbnNlcnRCZWZvcmUodCwgbik7XG4gICAgICAgIH0gZWxzZSBuLnRleHRDb250ZW50ID0gU3RyaW5nKHQpO1xuICAgIH1cbiAgICBoYW5kbGVDaGFuZ2UodCwgZSwgaSkge1xuICAgICAgICB2YXIgcztcbiAgICAgICAgaWYgKCF0aGlzLmlzQm91bmQpIHJldHVybjtcbiAgICAgICAgY29uc3QgbiA9IHRoaXMuc291cmNlRXhwcmVzc2lvbjtcbiAgICAgICAgY29uc3QgciA9IHRoaXMub2JzO1xuICAgICAgICBjb25zdCBvID0gMTAwODIgPT09IG4uJGtpbmQgJiYgMSA9PT0gci5jb3VudDtcbiAgICAgICAgbGV0IGwgPSBmYWxzZTtcbiAgICAgICAgaWYgKCFvKSB7XG4gICAgICAgICAgICBsID0gKHRoaXMubW9kZSAmIHVlKSA+IDA7XG4gICAgICAgICAgICBpZiAobCkgci52ZXJzaW9uKys7XG4gICAgICAgICAgICBpIHw9IHRoaXMuc3RyaWN0ID8gMSA6IDA7XG4gICAgICAgICAgICB0ID0gbi5ldmFsdWF0ZShpLCB0aGlzLiRzY29wZSwgdGhpcy5sb2NhdG9yLCBsID8gdGhpcy5pbnRlcmNlcHRvciA6IG51bGwpO1xuICAgICAgICAgICAgaWYgKGwpIHIuY2xlYXIoKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodCA9PT0gdGhpcy52YWx1ZSkge1xuICAgICAgICAgICAgbnVsbCA9PT0gKHMgPSB0aGlzLnRhc2spIHx8IHZvaWQgMCA9PT0gcyA/IHZvaWQgMCA6IHMuY2FuY2VsKCk7XG4gICAgICAgICAgICB0aGlzLnRhc2sgPSBudWxsO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGggPSAwID09PSAoMiAmIGkpO1xuICAgICAgICBpZiAoaCkgdGhpcy5xdWV1ZVVwZGF0ZSh0LCBpKTsgZWxzZSB0aGlzLnVwZGF0ZVRhcmdldCh0LCBpKTtcbiAgICB9XG4gICAgaGFuZGxlQ29sbGVjdGlvbkNoYW5nZSgpIHtcbiAgICAgICAgdGhpcy5xdWV1ZVVwZGF0ZSh0aGlzLnZhbHVlLCAwKTtcbiAgICB9XG4gICAgJGJpbmQodCwgZSkge1xuICAgICAgICBpZiAodGhpcy5pc0JvdW5kKSB7XG4gICAgICAgICAgICBpZiAodGhpcy4kc2NvcGUgPT09IGUpIHJldHVybjtcbiAgICAgICAgICAgIHRoaXMuaW50ZXJjZXB0b3IuJHVuYmluZCh0KTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmlzQm91bmQgPSB0cnVlO1xuICAgICAgICB0aGlzLiRzY29wZSA9IGU7XG4gICAgICAgIGlmICh0aGlzLnNvdXJjZUV4cHJlc3Npb24uaGFzQmluZCkgdGhpcy5zb3VyY2VFeHByZXNzaW9uLmJpbmQodCwgZSwgdGhpcy5pbnRlcmNlcHRvcik7XG4gICAgICAgIHQgfD0gdGhpcy5zdHJpY3QgPyAxIDogMDtcbiAgICAgICAgY29uc3QgaSA9IHRoaXMudmFsdWUgPSB0aGlzLnNvdXJjZUV4cHJlc3Npb24uZXZhbHVhdGUodCwgZSwgdGhpcy5sb2NhdG9yLCAodGhpcy5tb2RlICYgdWUpID4gMCA/IHRoaXMuaW50ZXJjZXB0b3IgOiBudWxsKTtcbiAgICAgICAgaWYgKGkgaW5zdGFuY2VvZiBBcnJheSkgdGhpcy5vYnNlcnZlQ29sbGVjdGlvbihpKTtcbiAgICAgICAgdGhpcy51cGRhdGVUYXJnZXQoaSwgdCk7XG4gICAgfVxuICAgICR1bmJpbmQodCkge1xuICAgICAgICB2YXIgZTtcbiAgICAgICAgaWYgKCF0aGlzLmlzQm91bmQpIHJldHVybjtcbiAgICAgICAgdGhpcy5pc0JvdW5kID0gZmFsc2U7XG4gICAgICAgIGlmICh0aGlzLnNvdXJjZUV4cHJlc3Npb24uaGFzVW5iaW5kKSB0aGlzLnNvdXJjZUV4cHJlc3Npb24udW5iaW5kKHQsIHRoaXMuJHNjb3BlLCB0aGlzLmludGVyY2VwdG9yKTtcbiAgICAgICAgdGhpcy4kc2NvcGUgPSB2b2lkIDA7XG4gICAgICAgIHRoaXMub2JzLmNsZWFyQWxsKCk7XG4gICAgICAgIG51bGwgPT09IChlID0gdGhpcy50YXNrKSB8fCB2b2lkIDAgPT09IGUgPyB2b2lkIDAgOiBlLmNhbmNlbCgpO1xuICAgICAgICB0aGlzLnRhc2sgPSBudWxsO1xuICAgIH1cbiAgICBxdWV1ZVVwZGF0ZSh0LCBlKSB7XG4gICAgICAgIGNvbnN0IGkgPSB0aGlzLnRhc2s7XG4gICAgICAgIHRoaXMudGFzayA9IHRoaXMucC5kb21Xcml0ZVF1ZXVlLnF1ZXVlVGFzaygoKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy50YXNrID0gbnVsbDtcbiAgICAgICAgICAgIHRoaXMudXBkYXRlVGFyZ2V0KHQsIGUpO1xuICAgICAgICB9KSwgZmUpO1xuICAgICAgICBudWxsID09PSBpIHx8IHZvaWQgMCA9PT0gaSA/IHZvaWQgMCA6IGkuY2FuY2VsKCk7XG4gICAgfVxufVxuXG4kKENvbnRlbnRCaW5kaW5nKTtcblxuY2xhc3MgTGV0QmluZGluZyB7XG4gICAgY29uc3RydWN0b3IodCwgZSwgaSwgcywgbiA9IGZhbHNlKSB7XG4gICAgICAgIHRoaXMuc291cmNlRXhwcmVzc2lvbiA9IHQ7XG4gICAgICAgIHRoaXMudGFyZ2V0UHJvcGVydHkgPSBlO1xuICAgICAgICB0aGlzLmxvY2F0b3IgPSBzO1xuICAgICAgICB0aGlzLmludGVyY2VwdG9yID0gdGhpcztcbiAgICAgICAgdGhpcy5pc0JvdW5kID0gZmFsc2U7XG4gICAgICAgIHRoaXMuJHNjb3BlID0gdm9pZCAwO1xuICAgICAgICB0aGlzLnRhc2sgPSBudWxsO1xuICAgICAgICB0aGlzLnRhcmdldCA9IG51bGw7XG4gICAgICAgIHRoaXMub0wgPSBpO1xuICAgICAgICB0aGlzLlkgPSBuO1xuICAgIH1cbiAgICBoYW5kbGVDaGFuZ2UodCwgZSwgaSkge1xuICAgICAgICBpZiAoIXRoaXMuaXNCb3VuZCkgcmV0dXJuO1xuICAgICAgICBjb25zdCBzID0gdGhpcy50YXJnZXQ7XG4gICAgICAgIGNvbnN0IG4gPSB0aGlzLnRhcmdldFByb3BlcnR5O1xuICAgICAgICBjb25zdCByID0gc1tuXTtcbiAgICAgICAgdGhpcy5vYnMudmVyc2lvbisrO1xuICAgICAgICB0ID0gdGhpcy5zb3VyY2VFeHByZXNzaW9uLmV2YWx1YXRlKGksIHRoaXMuJHNjb3BlLCB0aGlzLmxvY2F0b3IsIHRoaXMuaW50ZXJjZXB0b3IpO1xuICAgICAgICB0aGlzLm9icy5jbGVhcigpO1xuICAgICAgICBpZiAodCAhPT0gcikgc1tuXSA9IHQ7XG4gICAgfVxuICAgICRiaW5kKHQsIGUpIHtcbiAgICAgICAgaWYgKHRoaXMuaXNCb3VuZCkge1xuICAgICAgICAgICAgaWYgKHRoaXMuJHNjb3BlID09PSBlKSByZXR1cm47XG4gICAgICAgICAgICB0aGlzLmludGVyY2VwdG9yLiR1bmJpbmQoMiB8IHQpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuJHNjb3BlID0gZTtcbiAgICAgICAgdGhpcy50YXJnZXQgPSB0aGlzLlkgPyBlLmJpbmRpbmdDb250ZXh0IDogZS5vdmVycmlkZUNvbnRleHQ7XG4gICAgICAgIGNvbnN0IGkgPSB0aGlzLnNvdXJjZUV4cHJlc3Npb247XG4gICAgICAgIGlmIChpLmhhc0JpbmQpIGkuYmluZCh0LCBlLCB0aGlzLmludGVyY2VwdG9yKTtcbiAgICAgICAgdGhpcy50YXJnZXRbdGhpcy50YXJnZXRQcm9wZXJ0eV0gPSB0aGlzLnNvdXJjZUV4cHJlc3Npb24uZXZhbHVhdGUoMiB8IHQsIGUsIHRoaXMubG9jYXRvciwgdGhpcy5pbnRlcmNlcHRvcik7XG4gICAgICAgIHRoaXMuaXNCb3VuZCA9IHRydWU7XG4gICAgfVxuICAgICR1bmJpbmQodCkge1xuICAgICAgICBpZiAoIXRoaXMuaXNCb3VuZCkgcmV0dXJuO1xuICAgICAgICBjb25zdCBlID0gdGhpcy5zb3VyY2VFeHByZXNzaW9uO1xuICAgICAgICBpZiAoZS5oYXNVbmJpbmQpIGUudW5iaW5kKHQsIHRoaXMuJHNjb3BlLCB0aGlzLmludGVyY2VwdG9yKTtcbiAgICAgICAgdGhpcy4kc2NvcGUgPSB2b2lkIDA7XG4gICAgICAgIHRoaXMub2JzLmNsZWFyQWxsKCk7XG4gICAgICAgIHRoaXMuaXNCb3VuZCA9IGZhbHNlO1xuICAgIH1cbn1cblxuJChMZXRCaW5kaW5nKTtcblxuY29uc3Qge29uZVRpbWU6IGRlLCB0b1ZpZXc6IG1lLCBmcm9tVmlldzogdmV9ID0gRDtcblxuY29uc3QgcGUgPSBtZSB8IGRlO1xuXG5jb25zdCBnZSA9IHtcbiAgICByZXVzYWJsZTogZmFsc2UsXG4gICAgcHJlZW1wdDogdHJ1ZVxufTtcblxuY2xhc3MgUHJvcGVydHlCaW5kaW5nIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlLCBpLCBzLCBuLCByLCBvKSB7XG4gICAgICAgIHRoaXMuc291cmNlRXhwcmVzc2lvbiA9IHQ7XG4gICAgICAgIHRoaXMudGFyZ2V0ID0gZTtcbiAgICAgICAgdGhpcy50YXJnZXRQcm9wZXJ0eSA9IGk7XG4gICAgICAgIHRoaXMubW9kZSA9IHM7XG4gICAgICAgIHRoaXMubG9jYXRvciA9IHI7XG4gICAgICAgIHRoaXMudGFza1F1ZXVlID0gbztcbiAgICAgICAgdGhpcy5pbnRlcmNlcHRvciA9IHRoaXM7XG4gICAgICAgIHRoaXMuaXNCb3VuZCA9IGZhbHNlO1xuICAgICAgICB0aGlzLiRzY29wZSA9IHZvaWQgMDtcbiAgICAgICAgdGhpcy50YXJnZXRPYnNlcnZlciA9IHZvaWQgMDtcbiAgICAgICAgdGhpcy5wZXJzaXN0ZW50RmxhZ3MgPSAwO1xuICAgICAgICB0aGlzLnRhc2sgPSBudWxsO1xuICAgICAgICB0aGlzLnRhcmdldFN1YnNjcmliZXIgPSBudWxsO1xuICAgICAgICB0aGlzLm9MID0gbjtcbiAgICB9XG4gICAgdXBkYXRlVGFyZ2V0KHQsIGUpIHtcbiAgICAgICAgZSB8PSB0aGlzLnBlcnNpc3RlbnRGbGFncztcbiAgICAgICAgdGhpcy50YXJnZXRPYnNlcnZlci5zZXRWYWx1ZSh0LCBlLCB0aGlzLnRhcmdldCwgdGhpcy50YXJnZXRQcm9wZXJ0eSk7XG4gICAgfVxuICAgIHVwZGF0ZVNvdXJjZSh0LCBlKSB7XG4gICAgICAgIGUgfD0gdGhpcy5wZXJzaXN0ZW50RmxhZ3M7XG4gICAgICAgIHRoaXMuc291cmNlRXhwcmVzc2lvbi5hc3NpZ24oZSwgdGhpcy4kc2NvcGUsIHRoaXMubG9jYXRvciwgdCk7XG4gICAgfVxuICAgIGhhbmRsZUNoYW5nZSh0LCBlLCBpKSB7XG4gICAgICAgIGlmICghdGhpcy5pc0JvdW5kKSByZXR1cm47XG4gICAgICAgIGkgfD0gdGhpcy5wZXJzaXN0ZW50RmxhZ3M7XG4gICAgICAgIGNvbnN0IHMgPSAwID09PSAoMiAmIGkpICYmICg0ICYgdGhpcy50YXJnZXRPYnNlcnZlci50eXBlKSA+IDA7XG4gICAgICAgIGNvbnN0IG4gPSB0aGlzLm9icztcbiAgICAgICAgbGV0IHIgPSBmYWxzZTtcbiAgICAgICAgaWYgKDEwMDgyICE9PSB0aGlzLnNvdXJjZUV4cHJlc3Npb24uJGtpbmQgfHwgbi5jb3VudCA+IDEpIHtcbiAgICAgICAgICAgIHIgPSB0aGlzLm1vZGUgPiBkZTtcbiAgICAgICAgICAgIGlmIChyKSBuLnZlcnNpb24rKztcbiAgICAgICAgICAgIHQgPSB0aGlzLnNvdXJjZUV4cHJlc3Npb24uZXZhbHVhdGUoaSwgdGhpcy4kc2NvcGUsIHRoaXMubG9jYXRvciwgdGhpcy5pbnRlcmNlcHRvcik7XG4gICAgICAgICAgICBpZiAocikgbi5jbGVhcigpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChzKSB7XG4gICAgICAgICAgICB3ZSA9IHRoaXMudGFzaztcbiAgICAgICAgICAgIHRoaXMudGFzayA9IHRoaXMudGFza1F1ZXVlLnF1ZXVlVGFzaygoKCkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuaW50ZXJjZXB0b3IudXBkYXRlVGFyZ2V0KHQsIGkpO1xuICAgICAgICAgICAgICAgIHRoaXMudGFzayA9IG51bGw7XG4gICAgICAgICAgICB9KSwgZ2UpO1xuICAgICAgICAgICAgbnVsbCA9PT0gd2UgfHwgdm9pZCAwID09PSB3ZSA/IHZvaWQgMCA6IHdlLmNhbmNlbCgpO1xuICAgICAgICAgICAgd2UgPSBudWxsO1xuICAgICAgICB9IGVsc2UgdGhpcy5pbnRlcmNlcHRvci51cGRhdGVUYXJnZXQodCwgaSk7XG4gICAgfVxuICAgICRiaW5kKHQsIGUpIHtcbiAgICAgICAgdmFyIGk7XG4gICAgICAgIGlmICh0aGlzLmlzQm91bmQpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLiRzY29wZSA9PT0gZSkgcmV0dXJuO1xuICAgICAgICAgICAgdGhpcy5pbnRlcmNlcHRvci4kdW5iaW5kKDIgfCB0KTtcbiAgICAgICAgfVxuICAgICAgICB0IHw9IDE7XG4gICAgICAgIHRoaXMucGVyc2lzdGVudEZsYWdzID0gOTYxICYgdDtcbiAgICAgICAgdGhpcy4kc2NvcGUgPSBlO1xuICAgICAgICBsZXQgcyA9IHRoaXMuc291cmNlRXhwcmVzc2lvbjtcbiAgICAgICAgaWYgKHMuaGFzQmluZCkgcy5iaW5kKHQsIGUsIHRoaXMuaW50ZXJjZXB0b3IpO1xuICAgICAgICBjb25zdCBuID0gdGhpcy5vTDtcbiAgICAgICAgY29uc3QgciA9IHRoaXMubW9kZTtcbiAgICAgICAgbGV0IG8gPSB0aGlzLnRhcmdldE9ic2VydmVyO1xuICAgICAgICBpZiAoIW8pIHtcbiAgICAgICAgICAgIGlmIChyICYgdmUpIG8gPSBuLmdldE9ic2VydmVyKHRoaXMudGFyZ2V0LCB0aGlzLnRhcmdldFByb3BlcnR5KTsgZWxzZSBvID0gbi5nZXRBY2Nlc3Nvcih0aGlzLnRhcmdldCwgdGhpcy50YXJnZXRQcm9wZXJ0eSk7XG4gICAgICAgICAgICB0aGlzLnRhcmdldE9ic2VydmVyID0gbztcbiAgICAgICAgfVxuICAgICAgICBzID0gdGhpcy5zb3VyY2VFeHByZXNzaW9uO1xuICAgICAgICBjb25zdCBsID0gdGhpcy5pbnRlcmNlcHRvcjtcbiAgICAgICAgY29uc3QgaCA9IChyICYgbWUpID4gMDtcbiAgICAgICAgaWYgKHIgJiBwZSkgbC51cGRhdGVUYXJnZXQocy5ldmFsdWF0ZSh0LCBlLCB0aGlzLmxvY2F0b3IsIGggPyBsIDogbnVsbCksIHQpO1xuICAgICAgICBpZiAociAmIHZlKSB7XG4gICAgICAgICAgICBvLnN1YnNjcmliZShudWxsICE9PSAoaSA9IHRoaXMudGFyZ2V0U3Vic2NyaWJlcikgJiYgdm9pZCAwICE9PSBpID8gaSA6IHRoaXMudGFyZ2V0U3Vic2NyaWJlciA9IG5ldyBCaW5kaW5nVGFyZ2V0U3Vic2NyaWJlcihsKSk7XG4gICAgICAgICAgICBpZiAoIWgpIGwudXBkYXRlU291cmNlKG8uZ2V0VmFsdWUodGhpcy50YXJnZXQsIHRoaXMudGFyZ2V0UHJvcGVydHkpLCB0KTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmlzQm91bmQgPSB0cnVlO1xuICAgIH1cbiAgICAkdW5iaW5kKHQpIHtcbiAgICAgICAgaWYgKCF0aGlzLmlzQm91bmQpIHJldHVybjtcbiAgICAgICAgdGhpcy5wZXJzaXN0ZW50RmxhZ3MgPSAwO1xuICAgICAgICBpZiAodGhpcy5zb3VyY2VFeHByZXNzaW9uLmhhc1VuYmluZCkgdGhpcy5zb3VyY2VFeHByZXNzaW9uLnVuYmluZCh0LCB0aGlzLiRzY29wZSwgdGhpcy5pbnRlcmNlcHRvcik7XG4gICAgICAgIHRoaXMuJHNjb3BlID0gdm9pZCAwO1xuICAgICAgICB3ZSA9IHRoaXMudGFzaztcbiAgICAgICAgaWYgKHRoaXMudGFyZ2V0U3Vic2NyaWJlcikgdGhpcy50YXJnZXRPYnNlcnZlci51bnN1YnNjcmliZSh0aGlzLnRhcmdldFN1YnNjcmliZXIpO1xuICAgICAgICBpZiAobnVsbCAhPSB3ZSkge1xuICAgICAgICAgICAgd2UuY2FuY2VsKCk7XG4gICAgICAgICAgICB3ZSA9IHRoaXMudGFzayA9IG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5vYnMuY2xlYXJBbGwoKTtcbiAgICAgICAgdGhpcy5pc0JvdW5kID0gZmFsc2U7XG4gICAgfVxufVxuXG4kKFByb3BlcnR5QmluZGluZyk7XG5cbmxldCB3ZSA9IG51bGw7XG5cbmNsYXNzIFJlZkJpbmRpbmcge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUsIGkpIHtcbiAgICAgICAgdGhpcy5zb3VyY2VFeHByZXNzaW9uID0gdDtcbiAgICAgICAgdGhpcy50YXJnZXQgPSBlO1xuICAgICAgICB0aGlzLmxvY2F0b3IgPSBpO1xuICAgICAgICB0aGlzLmludGVyY2VwdG9yID0gdGhpcztcbiAgICAgICAgdGhpcy5pc0JvdW5kID0gZmFsc2U7XG4gICAgICAgIHRoaXMuJHNjb3BlID0gdm9pZCAwO1xuICAgIH1cbiAgICAkYmluZCh0LCBlKSB7XG4gICAgICAgIGlmICh0aGlzLmlzQm91bmQpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLiRzY29wZSA9PT0gZSkgcmV0dXJuO1xuICAgICAgICAgICAgdGhpcy5pbnRlcmNlcHRvci4kdW5iaW5kKDIgfCB0KTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLiRzY29wZSA9IGU7XG4gICAgICAgIGlmICh0aGlzLnNvdXJjZUV4cHJlc3Npb24uaGFzQmluZCkgdGhpcy5zb3VyY2VFeHByZXNzaW9uLmJpbmQodCwgZSwgdGhpcyk7XG4gICAgICAgIHRoaXMuc291cmNlRXhwcmVzc2lvbi5hc3NpZ24odCwgdGhpcy4kc2NvcGUsIHRoaXMubG9jYXRvciwgdGhpcy50YXJnZXQpO1xuICAgICAgICB0aGlzLmlzQm91bmQgPSB0cnVlO1xuICAgIH1cbiAgICAkdW5iaW5kKHQpIHtcbiAgICAgICAgaWYgKCF0aGlzLmlzQm91bmQpIHJldHVybjtcbiAgICAgICAgbGV0IGUgPSB0aGlzLnNvdXJjZUV4cHJlc3Npb247XG4gICAgICAgIGlmIChlLmV2YWx1YXRlKHQsIHRoaXMuJHNjb3BlLCB0aGlzLmxvY2F0b3IsIG51bGwpID09PSB0aGlzLnRhcmdldCkgZS5hc3NpZ24odCwgdGhpcy4kc2NvcGUsIHRoaXMubG9jYXRvciwgbnVsbCk7XG4gICAgICAgIGUgPSB0aGlzLnNvdXJjZUV4cHJlc3Npb247XG4gICAgICAgIGlmIChlLmhhc1VuYmluZCkgZS51bmJpbmQodCwgdGhpcy4kc2NvcGUsIHRoaXMuaW50ZXJjZXB0b3IpO1xuICAgICAgICB0aGlzLiRzY29wZSA9IHZvaWQgMDtcbiAgICAgICAgdGhpcy5pc0JvdW5kID0gZmFsc2U7XG4gICAgfVxuICAgIG9ic2VydmUodCwgZSkge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIGhhbmRsZUNoYW5nZSh0LCBlLCBpKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG59XG5cbmNvbnN0IGJlID0gbC5jcmVhdGVJbnRlcmZhY2UoXCJJQXBwVGFza1wiKTtcblxuY2xhc3MgJEFwcFRhc2sge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUsIGkpIHtcbiAgICAgICAgdGhpcy5jID0gdm9pZCAwO1xuICAgICAgICB0aGlzLnNsb3QgPSB0O1xuICAgICAgICB0aGlzLmsgPSBlO1xuICAgICAgICB0aGlzLmNiID0gaTtcbiAgICB9XG4gICAgcmVnaXN0ZXIodCkge1xuICAgICAgICByZXR1cm4gdGhpcy5jID0gdC5yZWdpc3RlcihjLmluc3RhbmNlKGJlLCB0aGlzKSk7XG4gICAgfVxuICAgIHJ1bigpIHtcbiAgICAgICAgY29uc3QgdCA9IHRoaXMuaztcbiAgICAgICAgY29uc3QgZSA9IHRoaXMuY2I7XG4gICAgICAgIHJldHVybiBudWxsID09PSB0ID8gZSgpIDogZSh0aGlzLmMuZ2V0KHQpKTtcbiAgICB9XG59XG5cbmNvbnN0IHhlID0gT2JqZWN0LmZyZWV6ZSh7XG4gICAgYmVmb3JlQ3JlYXRlOiB5ZShcImJlZm9yZUNyZWF0ZVwiKSxcbiAgICBoeWRyYXRpbmc6IHllKFwiaHlkcmF0aW5nXCIpLFxuICAgIGh5ZHJhdGVkOiB5ZShcImh5ZHJhdGVkXCIpLFxuICAgIGJlZm9yZUFjdGl2YXRlOiB5ZShcImJlZm9yZUFjdGl2YXRlXCIpLFxuICAgIGFmdGVyQWN0aXZhdGU6IHllKFwiYWZ0ZXJBY3RpdmF0ZVwiKSxcbiAgICBiZWZvcmVEZWFjdGl2YXRlOiB5ZShcImJlZm9yZURlYWN0aXZhdGVcIiksXG4gICAgYWZ0ZXJEZWFjdGl2YXRlOiB5ZShcImFmdGVyRGVhY3RpdmF0ZVwiKVxufSk7XG5cbmZ1bmN0aW9uIHllKHQpIHtcbiAgICBmdW5jdGlvbiBlKGUsIGkpIHtcbiAgICAgICAgaWYgKEN0KGkpKSByZXR1cm4gbmV3ICRBcHBUYXNrKHQsIGUsIGkpO1xuICAgICAgICByZXR1cm4gbmV3ICRBcHBUYXNrKHQsIG51bGwsIGUpO1xuICAgIH1cbiAgICByZXR1cm4gZTtcbn1cblxuZnVuY3Rpb24ga2UodCwgZSkge1xuICAgIGxldCBpO1xuICAgIGZ1bmN0aW9uIHModCwgZSkge1xuICAgICAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA+IDEpIGkucHJvcGVydHkgPSBlO1xuICAgICAgICBjdChBZSwgQ2hpbGRyZW5EZWZpbml0aW9uLmNyZWF0ZShlLCBpKSwgdC5jb25zdHJ1Y3RvciwgZSk7XG4gICAgICAgIHB0KHQuY29uc3RydWN0b3IsIFNlLmtleUZyb20oZSkpO1xuICAgIH1cbiAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgaSA9IHt9O1xuICAgICAgICBzKHQsIGUpO1xuICAgICAgICByZXR1cm47XG4gICAgfSBlbHNlIGlmIChBdCh0KSkge1xuICAgICAgICBpID0ge307XG4gICAgICAgIHJldHVybiBzO1xuICAgIH1cbiAgICBpID0gdm9pZCAwID09PSB0ID8ge30gOiB0O1xuICAgIHJldHVybiBzO1xufVxuXG5mdW5jdGlvbiBDZSh0KSB7XG4gICAgcmV0dXJuIHQuc3RhcnRzV2l0aChBZSk7XG59XG5cbmNvbnN0IEFlID0gZHQoXCJjaGlsZHJlbi1vYnNlcnZlclwiKTtcblxuY29uc3QgU2UgPSBPYmplY3QuZnJlZXplKHtcbiAgICBuYW1lOiBBZSxcbiAgICBrZXlGcm9tOiB0ID0+IGAke0FlfToke3R9YCxcbiAgICBmcm9tKC4uLnQpIHtcbiAgICAgICAgY29uc3QgZSA9IHt9O1xuICAgICAgICBjb25zdCBpID0gQXJyYXkuaXNBcnJheTtcbiAgICAgICAgZnVuY3Rpb24gcyh0KSB7XG4gICAgICAgICAgICBlW3RdID0gQ2hpbGRyZW5EZWZpbml0aW9uLmNyZWF0ZSh0KTtcbiAgICAgICAgfVxuICAgICAgICBmdW5jdGlvbiBuKHQsIGkpIHtcbiAgICAgICAgICAgIGVbdF0gPSBDaGlsZHJlbkRlZmluaXRpb24uY3JlYXRlKHQsIGkpO1xuICAgICAgICB9XG4gICAgICAgIGZ1bmN0aW9uIHIodCkge1xuICAgICAgICAgICAgaWYgKGkodCkpIHQuZm9yRWFjaChzKTsgZWxzZSBpZiAodCBpbnN0YW5jZW9mIENoaWxkcmVuRGVmaW5pdGlvbikgZVt0LnByb3BlcnR5XSA9IHQ7IGVsc2UgaWYgKHZvaWQgMCAhPT0gdCkgT2JqZWN0LmtleXModCkuZm9yRWFjaCgoZSA9PiBuKGUsIHQpKSk7XG4gICAgICAgIH1cbiAgICAgICAgdC5mb3JFYWNoKHIpO1xuICAgICAgICByZXR1cm4gZTtcbiAgICB9LFxuICAgIGdldEFsbCh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSBBZS5sZW5ndGggKyAxO1xuICAgICAgICBjb25zdCBpID0gW107XG4gICAgICAgIGNvbnN0IG4gPSBzKHQpO1xuICAgICAgICBsZXQgciA9IG4ubGVuZ3RoO1xuICAgICAgICBsZXQgbyA9IDA7XG4gICAgICAgIGxldCBsO1xuICAgICAgICBsZXQgaDtcbiAgICAgICAgbGV0IGE7XG4gICAgICAgIHdoaWxlICgtLXIgPj0gMCkge1xuICAgICAgICAgICAgYSA9IG5bcl07XG4gICAgICAgICAgICBsID0gZ3QoYSkuZmlsdGVyKENlKTtcbiAgICAgICAgICAgIGggPSBsLmxlbmd0aDtcbiAgICAgICAgICAgIGZvciAobGV0IHQgPSAwOyB0IDwgaDsgKyt0KSBpW28rK10gPSBodChBZSwgYSwgbFt0XS5zbGljZShlKSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGk7XG4gICAgfVxufSk7XG5cbmNvbnN0IFJlID0ge1xuICAgIGNoaWxkTGlzdDogdHJ1ZVxufTtcblxuY2xhc3MgQ2hpbGRyZW5EZWZpbml0aW9uIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlLCBpLCBzLCBuLCByKSB7XG4gICAgICAgIHRoaXMuY2FsbGJhY2sgPSB0O1xuICAgICAgICB0aGlzLnByb3BlcnR5ID0gZTtcbiAgICAgICAgdGhpcy5vcHRpb25zID0gaTtcbiAgICAgICAgdGhpcy5xdWVyeSA9IHM7XG4gICAgICAgIHRoaXMuZmlsdGVyID0gbjtcbiAgICAgICAgdGhpcy5tYXAgPSByO1xuICAgIH1cbiAgICBzdGF0aWMgY3JlYXRlKHQsIGUgPSB7fSkge1xuICAgICAgICB2YXIgaTtcbiAgICAgICAgcmV0dXJuIG5ldyBDaGlsZHJlbkRlZmluaXRpb24obihlLmNhbGxiYWNrLCBgJHt0fUNoYW5nZWRgKSwgbihlLnByb3BlcnR5LCB0KSwgbnVsbCAhPT0gKGkgPSBlLm9wdGlvbnMpICYmIHZvaWQgMCAhPT0gaSA/IGkgOiBSZSwgZS5xdWVyeSwgZS5maWx0ZXIsIGUubWFwKTtcbiAgICB9XG59XG5cbmNsYXNzIENoaWxkcmVuT2JzZXJ2ZXIge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUsIGksIHMsIG4gPSBFZSwgciA9IEJlLCBvID0gSWUsIGwpIHtcbiAgICAgICAgdGhpcy5jb250cm9sbGVyID0gdDtcbiAgICAgICAgdGhpcy5vYmogPSBlO1xuICAgICAgICB0aGlzLnByb3BlcnR5S2V5ID0gaTtcbiAgICAgICAgdGhpcy5xdWVyeSA9IG47XG4gICAgICAgIHRoaXMuZmlsdGVyID0gcjtcbiAgICAgICAgdGhpcy5tYXAgPSBvO1xuICAgICAgICB0aGlzLm9wdGlvbnMgPSBsO1xuICAgICAgICB0aGlzLm9ic2VydmluZyA9IGZhbHNlO1xuICAgICAgICB0aGlzLmNoaWxkcmVuID0gdm9pZCAwO1xuICAgICAgICB0aGlzLm9ic2VydmVyID0gdm9pZCAwO1xuICAgICAgICB0aGlzLmNhbGxiYWNrID0gZVtzXTtcbiAgICAgICAgUmVmbGVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLm9iaiwgdGhpcy5wcm9wZXJ0eUtleSwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGdldDogKCkgPT4gdGhpcy5nZXRWYWx1ZSgpLFxuICAgICAgICAgICAgc2V0OiAoKSA9PiB7fVxuICAgICAgICB9KTtcbiAgICB9XG4gICAgZ2V0VmFsdWUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm9ic2VydmluZyA/IHRoaXMuY2hpbGRyZW4gOiB0aGlzLmdldCgpO1xuICAgIH1cbiAgICBzZXRWYWx1ZSh0KSB7fVxuICAgIHN0YXJ0KCkge1xuICAgICAgICB2YXIgdDtcbiAgICAgICAgaWYgKCF0aGlzLm9ic2VydmluZykge1xuICAgICAgICAgICAgdGhpcy5vYnNlcnZpbmcgPSB0cnVlO1xuICAgICAgICAgICAgdGhpcy5jaGlsZHJlbiA9IHRoaXMuZ2V0KCk7XG4gICAgICAgICAgICAobnVsbCAhPT0gKHQgPSB0aGlzLm9ic2VydmVyKSAmJiB2b2lkIDAgIT09IHQgPyB0IDogdGhpcy5vYnNlcnZlciA9IG5ldyB0aGlzLmNvbnRyb2xsZXIuaG9zdC5vd25lckRvY3VtZW50LmRlZmF1bHRWaWV3Lk11dGF0aW9uT2JzZXJ2ZXIoKCgpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLlooKTtcbiAgICAgICAgICAgIH0pKSkub2JzZXJ2ZSh0aGlzLmNvbnRyb2xsZXIuaG9zdCwgdGhpcy5vcHRpb25zKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBzdG9wKCkge1xuICAgICAgICBpZiAodGhpcy5vYnNlcnZpbmcpIHtcbiAgICAgICAgICAgIHRoaXMub2JzZXJ2aW5nID0gZmFsc2U7XG4gICAgICAgICAgICB0aGlzLm9ic2VydmVyLmRpc2Nvbm5lY3QoKTtcbiAgICAgICAgICAgIHRoaXMuY2hpbGRyZW4gPSBoO1xuICAgICAgICB9XG4gICAgfVxuICAgIFooKSB7XG4gICAgICAgIHRoaXMuY2hpbGRyZW4gPSB0aGlzLmdldCgpO1xuICAgICAgICBpZiAodm9pZCAwICE9PSB0aGlzLmNhbGxiYWNrKSB0aGlzLmNhbGxiYWNrLmNhbGwodGhpcy5vYmopO1xuICAgICAgICB0aGlzLnN1YnMubm90aWZ5KHRoaXMuY2hpbGRyZW4sIHZvaWQgMCwgMCk7XG4gICAgfVxuICAgIGdldCgpIHtcbiAgICAgICAgcmV0dXJuIERlKHRoaXMuY29udHJvbGxlciwgdGhpcy5xdWVyeSwgdGhpcy5maWx0ZXIsIHRoaXMubWFwKTtcbiAgICB9XG59XG5cblAoKShDaGlsZHJlbk9ic2VydmVyKTtcblxuZnVuY3Rpb24gRWUodCkge1xuICAgIHJldHVybiB0Lmhvc3QuY2hpbGROb2Rlcztcbn1cblxuZnVuY3Rpb24gQmUodCwgZSwgaSkge1xuICAgIHJldHVybiAhIWk7XG59XG5cbmZ1bmN0aW9uIEllKHQsIGUsIGkpIHtcbiAgICByZXR1cm4gaTtcbn1cblxuY29uc3QgVGUgPSB7XG4gICAgb3B0aW9uYWw6IHRydWVcbn07XG5cbmZ1bmN0aW9uIERlKHQsIGUsIGksIHMpIHtcbiAgICB2YXIgbjtcbiAgICBjb25zdCByID0gZSh0KTtcbiAgICBjb25zdCBvID0gci5sZW5ndGg7XG4gICAgY29uc3QgbCA9IFtdO1xuICAgIGxldCBoO1xuICAgIGxldCBhO1xuICAgIGxldCBjO1xuICAgIGxldCB1ID0gMDtcbiAgICBmb3IgKDt1IDwgbzsgKyt1KSB7XG4gICAgICAgIGggPSByW3VdO1xuICAgICAgICBhID0gc2kuZm9yKGgsIFRlKTtcbiAgICAgICAgYyA9IG51bGwgIT09IChuID0gbnVsbCA9PT0gYSB8fCB2b2lkIDAgPT09IGEgPyB2b2lkIDAgOiBhLnZpZXdNb2RlbCkgJiYgdm9pZCAwICE9PSBuID8gbiA6IG51bGw7XG4gICAgICAgIGlmIChpKGgsIGEsIGMpKSBsLnB1c2gocyhoLCBhLCBjKSk7XG4gICAgfVxuICAgIHJldHVybiBsO1xufVxuXG5mdW5jdGlvbiBQZSh0KSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgcmV0dXJuIE1lLmRlZmluZSh0LCBlKTtcbiAgICB9O1xufVxuXG5mdW5jdGlvbiBPZSh0KSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgcmV0dXJuIE1lLmRlZmluZShBdCh0KSA/IHtcbiAgICAgICAgICAgIGlzVGVtcGxhdGVDb250cm9sbGVyOiB0cnVlLFxuICAgICAgICAgICAgbmFtZTogdFxuICAgICAgICB9IDoge1xuICAgICAgICAgICAgaXNUZW1wbGF0ZUNvbnRyb2xsZXI6IHRydWUsXG4gICAgICAgICAgICAuLi50XG4gICAgICAgIH0sIGUpO1xuICAgIH07XG59XG5cbmNsYXNzIEN1c3RvbUF0dHJpYnV0ZURlZmluaXRpb24ge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUsIGksIHMsIG4sIHIsIG8sIGwsIGgpIHtcbiAgICAgICAgdGhpcy5UeXBlID0gdDtcbiAgICAgICAgdGhpcy5uYW1lID0gZTtcbiAgICAgICAgdGhpcy5hbGlhc2VzID0gaTtcbiAgICAgICAgdGhpcy5rZXkgPSBzO1xuICAgICAgICB0aGlzLmRlZmF1bHRCaW5kaW5nTW9kZSA9IG47XG4gICAgICAgIHRoaXMuaXNUZW1wbGF0ZUNvbnRyb2xsZXIgPSByO1xuICAgICAgICB0aGlzLmJpbmRhYmxlcyA9IG87XG4gICAgICAgIHRoaXMubm9NdWx0aUJpbmRpbmdzID0gbDtcbiAgICAgICAgdGhpcy53YXRjaGVzID0gaDtcbiAgICB9XG4gICAgZ2V0IHR5cGUoKSB7XG4gICAgICAgIHJldHVybiAyO1xuICAgIH1cbiAgICBzdGF0aWMgY3JlYXRlKHQsIGUpIHtcbiAgICAgICAgbGV0IGk7XG4gICAgICAgIGxldCBzO1xuICAgICAgICBpZiAoQXQodCkpIHtcbiAgICAgICAgICAgIGkgPSB0O1xuICAgICAgICAgICAgcyA9IHtcbiAgICAgICAgICAgICAgICBuYW1lOiBpXG4gICAgICAgICAgICB9O1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgaSA9IHQubmFtZTtcbiAgICAgICAgICAgIHMgPSB0O1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBuZXcgQ3VzdG9tQXR0cmlidXRlRGVmaW5pdGlvbihlLCBuKHFlKGUsIFwibmFtZVwiKSwgaSksIGYocWUoZSwgXCJhbGlhc2VzXCIpLCBzLmFsaWFzZXMsIGUuYWxpYXNlcyksIE1lLmtleUZyb20oaSksIG4ocWUoZSwgXCJkZWZhdWx0QmluZGluZ01vZGVcIiksIHMuZGVmYXVsdEJpbmRpbmdNb2RlLCBlLmRlZmF1bHRCaW5kaW5nTW9kZSwgRC50b1ZpZXcpLCBuKHFlKGUsIFwiaXNUZW1wbGF0ZUNvbnRyb2xsZXJcIiksIHMuaXNUZW1wbGF0ZUNvbnRyb2xsZXIsIGUuaXNUZW1wbGF0ZUNvbnRyb2xsZXIsIGZhbHNlKSwgQnQuZnJvbShlLCAuLi5CdC5nZXRBbGwoZSksIHFlKGUsIFwiYmluZGFibGVzXCIpLCBlLmJpbmRhYmxlcywgcy5iaW5kYWJsZXMpLCBuKHFlKGUsIFwibm9NdWx0aUJpbmRpbmdzXCIpLCBzLm5vTXVsdGlCaW5kaW5ncywgZS5ub011bHRpQmluZGluZ3MsIGZhbHNlKSwgZihfZS5nZXRBbm5vdGF0aW9uKGUpLCBlLndhdGNoZXMpKTtcbiAgICB9XG4gICAgcmVnaXN0ZXIodCkge1xuICAgICAgICBjb25zdCB7VHlwZTogZSwga2V5OiBpLCBhbGlhc2VzOiBzfSA9IHRoaXM7XG4gICAgICAgIGMudHJhbnNpZW50KGksIGUpLnJlZ2lzdGVyKHQpO1xuICAgICAgICBjLmFsaWFzVG8oaSwgZSkucmVnaXN0ZXIodCk7XG4gICAgICAgIEwocywgTWUsIGksIHQpO1xuICAgIH1cbn1cblxuY29uc3QgJGUgPSBtdChcImN1c3RvbS1hdHRyaWJ1dGVcIik7XG5cbmNvbnN0IExlID0gdCA9PiBgJHskZX06JHt0fWA7XG5cbmNvbnN0IHFlID0gKHQsIGUpID0+IGh0KGR0KGUpLCB0KTtcblxuY29uc3QgTWUgPSBPYmplY3QuZnJlZXplKHtcbiAgICBuYW1lOiAkZSxcbiAgICBrZXlGcm9tOiBMZSxcbiAgICBpc1R5cGUodCkge1xuICAgICAgICByZXR1cm4gQ3QodCkgJiYgYXQoJGUsIHQpO1xuICAgIH0sXG4gICAgZm9yKHQsIGUpIHtcbiAgICAgICAgdmFyIGk7XG4gICAgICAgIHJldHVybiBudWxsICE9PSAoaSA9IGlzKHQsIExlKGUpKSkgJiYgdm9pZCAwICE9PSBpID8gaSA6IHZvaWQgMDtcbiAgICB9LFxuICAgIGRlZmluZSh0LCBlKSB7XG4gICAgICAgIGNvbnN0IGkgPSBDdXN0b21BdHRyaWJ1dGVEZWZpbml0aW9uLmNyZWF0ZSh0LCBlKTtcbiAgICAgICAgY3QoJGUsIGksIGkuVHlwZSk7XG4gICAgICAgIGN0KCRlLCBpLCBpKTtcbiAgICAgICAgdnQoZSwgJGUpO1xuICAgICAgICByZXR1cm4gaS5UeXBlO1xuICAgIH0sXG4gICAgZ2V0RGVmaW5pdGlvbih0KSB7XG4gICAgICAgIGNvbnN0IGUgPSBodCgkZSwgdCk7XG4gICAgICAgIGlmICh2b2lkIDAgPT09IGUpIHRocm93IG5ldyBFcnJvcihgQVVSMDc1OToke3QubmFtZX1gKTtcbiAgICAgICAgcmV0dXJuIGU7XG4gICAgfSxcbiAgICBhbm5vdGF0ZSh0LCBlLCBpKSB7XG4gICAgICAgIGN0KGR0KGUpLCBpLCB0KTtcbiAgICB9LFxuICAgIGdldEFubm90YXRpb246IHFlXG59KTtcblxuZnVuY3Rpb24gVWUodCwgZSkge1xuICAgIGlmICghdCkgdGhyb3cgbmV3IEVycm9yKFwiQVVSMDc3MlwiKTtcbiAgICByZXR1cm4gZnVuY3Rpb24gaShzLCBuLCByKSB7XG4gICAgICAgIGNvbnN0IG8gPSBudWxsID09IG47XG4gICAgICAgIGNvbnN0IGwgPSBvID8gcyA6IHMuY29uc3RydWN0b3I7XG4gICAgICAgIGNvbnN0IGggPSBuZXcgV2F0Y2hEZWZpbml0aW9uKHQsIG8gPyBlIDogci52YWx1ZSk7XG4gICAgICAgIGlmIChvKSB7XG4gICAgICAgICAgICBpZiAoIUN0KGUpICYmIChudWxsID09IGUgfHwgIShlIGluIGwucHJvdG90eXBlKSkpIHRocm93IG5ldyBFcnJvcihgQVVSMDc3Mzoke1N0cmluZyhlKX1AJHtsLm5hbWV9fWApO1xuICAgICAgICB9IGVsc2UgaWYgKCFDdChudWxsID09PSByIHx8IHZvaWQgMCA9PT0gciA/IHZvaWQgMCA6IHIudmFsdWUpKSB0aHJvdyBuZXcgRXJyb3IoYEFVUjA3NzQ6JHtTdHJpbmcobil9YCk7XG4gICAgICAgIF9lLmFkZChsLCBoKTtcbiAgICAgICAgaWYgKE1lLmlzVHlwZShsKSkgTWUuZ2V0RGVmaW5pdGlvbihsKS53YXRjaGVzLnB1c2goaCk7XG4gICAgICAgIGlmIChzaS5pc1R5cGUobCkpIHNpLmdldERlZmluaXRpb24obCkud2F0Y2hlcy5wdXNoKGgpO1xuICAgIH07XG59XG5cbmNsYXNzIFdhdGNoRGVmaW5pdGlvbiB7XG4gICAgY29uc3RydWN0b3IodCwgZSkge1xuICAgICAgICB0aGlzLmV4cHJlc3Npb24gPSB0O1xuICAgICAgICB0aGlzLmNhbGxiYWNrID0gZTtcbiAgICB9XG59XG5cbmNvbnN0IEZlID0gaDtcblxuY29uc3QgVmUgPSBkdChcIndhdGNoXCIpO1xuXG5jb25zdCBfZSA9IE9iamVjdC5mcmVlemUoe1xuICAgIG5hbWU6IFZlLFxuICAgIGFkZCh0LCBlKSB7XG4gICAgICAgIGxldCBpID0gaHQoVmUsIHQpO1xuICAgICAgICBpZiAobnVsbCA9PSBpKSBjdChWZSwgaSA9IFtdLCB0KTtcbiAgICAgICAgaS5wdXNoKGUpO1xuICAgIH0sXG4gICAgZ2V0QW5ub3RhdGlvbih0KSB7XG4gICAgICAgIHZhciBlO1xuICAgICAgICByZXR1cm4gbnVsbCAhPT0gKGUgPSBodChWZSwgdCkpICYmIHZvaWQgMCAhPT0gZSA/IGUgOiBGZTtcbiAgICB9XG59KTtcblxuZnVuY3Rpb24gamUodCkge1xuICAgIHJldHVybiBmdW5jdGlvbihlKSB7XG4gICAgICAgIHJldHVybiBzaS5kZWZpbmUodCwgZSk7XG4gICAgfTtcbn1cblxuZnVuY3Rpb24gTmUodCkge1xuICAgIGlmICh2b2lkIDAgPT09IHQpIHJldHVybiBmdW5jdGlvbih0KSB7XG4gICAgICAgIGVpKHQsIFwic2hhZG93T3B0aW9uc1wiLCB7XG4gICAgICAgICAgICBtb2RlOiBcIm9wZW5cIlxuICAgICAgICB9KTtcbiAgICB9O1xuICAgIGlmICghQ3QodCkpIHJldHVybiBmdW5jdGlvbihlKSB7XG4gICAgICAgIGVpKGUsIFwic2hhZG93T3B0aW9uc1wiLCB0KTtcbiAgICB9O1xuICAgIGVpKHQsIFwic2hhZG93T3B0aW9uc1wiLCB7XG4gICAgICAgIG1vZGU6IFwib3BlblwiXG4gICAgfSk7XG59XG5cbmZ1bmN0aW9uIFdlKHQpIHtcbiAgICBpZiAodm9pZCAwID09PSB0KSByZXR1cm4gZnVuY3Rpb24odCkge1xuICAgICAgICBlaSh0LCBcImNvbnRhaW5lcmxlc3NcIiwgdHJ1ZSk7XG4gICAgfTtcbiAgICBlaSh0LCBcImNvbnRhaW5lcmxlc3NcIiwgdHJ1ZSk7XG59XG5cbmNvbnN0IEhlID0gbmV3IFdlYWtNYXA7XG5cbmNsYXNzIEN1c3RvbUVsZW1lbnREZWZpbml0aW9uIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlLCBpLCBzLCBuLCByLCBvLCBsLCBoLCBhLCBjLCB1LCBmLCBkLCBtLCB2LCBwLCBnLCB3LCBiLCB4KSB7XG4gICAgICAgIHRoaXMuVHlwZSA9IHQ7XG4gICAgICAgIHRoaXMubmFtZSA9IGU7XG4gICAgICAgIHRoaXMuYWxpYXNlcyA9IGk7XG4gICAgICAgIHRoaXMua2V5ID0gcztcbiAgICAgICAgdGhpcy5jYWNoZSA9IG47XG4gICAgICAgIHRoaXMuY2FwdHVyZSA9IHI7XG4gICAgICAgIHRoaXMudGVtcGxhdGUgPSBvO1xuICAgICAgICB0aGlzLmluc3RydWN0aW9ucyA9IGw7XG4gICAgICAgIHRoaXMuZGVwZW5kZW5jaWVzID0gaDtcbiAgICAgICAgdGhpcy5pbmplY3RhYmxlID0gYTtcbiAgICAgICAgdGhpcy5uZWVkc0NvbXBpbGUgPSBjO1xuICAgICAgICB0aGlzLnN1cnJvZ2F0ZXMgPSB1O1xuICAgICAgICB0aGlzLmJpbmRhYmxlcyA9IGY7XG4gICAgICAgIHRoaXMuY2hpbGRyZW5PYnNlcnZlcnMgPSBkO1xuICAgICAgICB0aGlzLmNvbnRhaW5lcmxlc3MgPSBtO1xuICAgICAgICB0aGlzLmlzU3RyaWN0QmluZGluZyA9IHY7XG4gICAgICAgIHRoaXMuc2hhZG93T3B0aW9ucyA9IHA7XG4gICAgICAgIHRoaXMuaGFzU2xvdHMgPSBnO1xuICAgICAgICB0aGlzLmVuaGFuY2UgPSB3O1xuICAgICAgICB0aGlzLndhdGNoZXMgPSBiO1xuICAgICAgICB0aGlzLnByb2Nlc3NDb250ZW50ID0geDtcbiAgICB9XG4gICAgZ2V0IHR5cGUoKSB7XG4gICAgICAgIHJldHVybiAxO1xuICAgIH1cbiAgICBzdGF0aWMgY3JlYXRlKHQsIGUgPSBudWxsKSB7XG4gICAgICAgIGlmIChudWxsID09PSBlKSB7XG4gICAgICAgICAgICBjb25zdCBpID0gdDtcbiAgICAgICAgICAgIGlmIChBdChpKSkgdGhyb3cgbmV3IEVycm9yKGBBVVIwNzYxOiR7dH1gKTtcbiAgICAgICAgICAgIGNvbnN0IHMgPSBkKFwibmFtZVwiLCBpLCB0aSk7XG4gICAgICAgICAgICBpZiAoQ3QoaS5UeXBlKSkgZSA9IGkuVHlwZTsgZWxzZSBlID0gc2kuZ2VuZXJhdGVUeXBlKG0ocykpO1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBDdXN0b21FbGVtZW50RGVmaW5pdGlvbihlLCBzLCBmKGkuYWxpYXNlcyksIGQoXCJrZXlcIiwgaSwgKCgpID0+IHNpLmtleUZyb20ocykpKSwgZChcImNhY2hlXCIsIGksIEdlKSwgZChcImNhcHR1cmVcIiwgaSwgS2UpLCBkKFwidGVtcGxhdGVcIiwgaSwgWGUpLCBmKGkuaW5zdHJ1Y3Rpb25zKSwgZihpLmRlcGVuZGVuY2llcyksIGQoXCJpbmplY3RhYmxlXCIsIGksIFhlKSwgZChcIm5lZWRzQ29tcGlsZVwiLCBpLCBZZSksIGYoaS5zdXJyb2dhdGVzKSwgQnQuZnJvbShlLCBpLmJpbmRhYmxlcyksIFNlLmZyb20oaS5jaGlsZHJlbk9ic2VydmVycyksIGQoXCJjb250YWluZXJsZXNzXCIsIGksIEtlKSwgZChcImlzU3RyaWN0QmluZGluZ1wiLCBpLCBLZSksIGQoXCJzaGFkb3dPcHRpb25zXCIsIGksIFhlKSwgZChcImhhc1Nsb3RzXCIsIGksIEtlKSwgZChcImVuaGFuY2VcIiwgaSwgS2UpLCBkKFwid2F0Y2hlc1wiLCBpLCBRZSksIHYoXCJwcm9jZXNzQ29udGVudFwiLCBlLCBYZSkpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChBdCh0KSkgcmV0dXJuIG5ldyBDdXN0b21FbGVtZW50RGVmaW5pdGlvbihlLCB0LCBmKGlpKGUsIFwiYWxpYXNlc1wiKSwgZS5hbGlhc2VzKSwgc2kua2V5RnJvbSh0KSwgdihcImNhY2hlXCIsIGUsIEdlKSwgdihcImNhcHR1cmVcIiwgZSwgS2UpLCB2KFwidGVtcGxhdGVcIiwgZSwgWGUpLCBmKGlpKGUsIFwiaW5zdHJ1Y3Rpb25zXCIpLCBlLmluc3RydWN0aW9ucyksIGYoaWkoZSwgXCJkZXBlbmRlbmNpZXNcIiksIGUuZGVwZW5kZW5jaWVzKSwgdihcImluamVjdGFibGVcIiwgZSwgWGUpLCB2KFwibmVlZHNDb21waWxlXCIsIGUsIFllKSwgZihpaShlLCBcInN1cnJvZ2F0ZXNcIiksIGUuc3Vycm9nYXRlcyksIEJ0LmZyb20oZSwgLi4uQnQuZ2V0QWxsKGUpLCBpaShlLCBcImJpbmRhYmxlc1wiKSwgZS5iaW5kYWJsZXMpLCBTZS5mcm9tKC4uLlNlLmdldEFsbChlKSwgaWkoZSwgXCJjaGlsZHJlbk9ic2VydmVyc1wiKSwgZS5jaGlsZHJlbk9ic2VydmVycyksIHYoXCJjb250YWluZXJsZXNzXCIsIGUsIEtlKSwgdihcImlzU3RyaWN0QmluZGluZ1wiLCBlLCBLZSksIHYoXCJzaGFkb3dPcHRpb25zXCIsIGUsIFhlKSwgdihcImhhc1Nsb3RzXCIsIGUsIEtlKSwgdihcImVuaGFuY2VcIiwgZSwgS2UpLCBmKF9lLmdldEFubm90YXRpb24oZSksIGUud2F0Y2hlcyksIHYoXCJwcm9jZXNzQ29udGVudFwiLCBlLCBYZSkpO1xuICAgICAgICBjb25zdCBpID0gZChcIm5hbWVcIiwgdCwgdGkpO1xuICAgICAgICByZXR1cm4gbmV3IEN1c3RvbUVsZW1lbnREZWZpbml0aW9uKGUsIGksIGYoaWkoZSwgXCJhbGlhc2VzXCIpLCB0LmFsaWFzZXMsIGUuYWxpYXNlcyksIHNpLmtleUZyb20oaSksIHAoXCJjYWNoZVwiLCB0LCBlLCBHZSksIHAoXCJjYXB0dXJlXCIsIHQsIGUsIEtlKSwgcChcInRlbXBsYXRlXCIsIHQsIGUsIFhlKSwgZihpaShlLCBcImluc3RydWN0aW9uc1wiKSwgdC5pbnN0cnVjdGlvbnMsIGUuaW5zdHJ1Y3Rpb25zKSwgZihpaShlLCBcImRlcGVuZGVuY2llc1wiKSwgdC5kZXBlbmRlbmNpZXMsIGUuZGVwZW5kZW5jaWVzKSwgcChcImluamVjdGFibGVcIiwgdCwgZSwgWGUpLCBwKFwibmVlZHNDb21waWxlXCIsIHQsIGUsIFllKSwgZihpaShlLCBcInN1cnJvZ2F0ZXNcIiksIHQuc3Vycm9nYXRlcywgZS5zdXJyb2dhdGVzKSwgQnQuZnJvbShlLCAuLi5CdC5nZXRBbGwoZSksIGlpKGUsIFwiYmluZGFibGVzXCIpLCBlLmJpbmRhYmxlcywgdC5iaW5kYWJsZXMpLCBTZS5mcm9tKC4uLlNlLmdldEFsbChlKSwgaWkoZSwgXCJjaGlsZHJlbk9ic2VydmVyc1wiKSwgZS5jaGlsZHJlbk9ic2VydmVycywgdC5jaGlsZHJlbk9ic2VydmVycyksIHAoXCJjb250YWluZXJsZXNzXCIsIHQsIGUsIEtlKSwgcChcImlzU3RyaWN0QmluZGluZ1wiLCB0LCBlLCBLZSksIHAoXCJzaGFkb3dPcHRpb25zXCIsIHQsIGUsIFhlKSwgcChcImhhc1Nsb3RzXCIsIHQsIGUsIEtlKSwgcChcImVuaGFuY2VcIiwgdCwgZSwgS2UpLCBmKHQud2F0Y2hlcywgX2UuZ2V0QW5ub3RhdGlvbihlKSwgZS53YXRjaGVzKSwgcChcInByb2Nlc3NDb250ZW50XCIsIHQsIGUsIFhlKSk7XG4gICAgfVxuICAgIHN0YXRpYyBnZXRPckNyZWF0ZSh0KSB7XG4gICAgICAgIGlmICh0IGluc3RhbmNlb2YgQ3VzdG9tRWxlbWVudERlZmluaXRpb24pIHJldHVybiB0O1xuICAgICAgICBpZiAoSGUuaGFzKHQpKSByZXR1cm4gSGUuZ2V0KHQpO1xuICAgICAgICBjb25zdCBlID0gQ3VzdG9tRWxlbWVudERlZmluaXRpb24uY3JlYXRlKHQpO1xuICAgICAgICBIZS5zZXQodCwgZSk7XG4gICAgICAgIGN0KFplLCBlLCBlLlR5cGUpO1xuICAgICAgICByZXR1cm4gZTtcbiAgICB9XG4gICAgcmVnaXN0ZXIodCkge1xuICAgICAgICBjb25zdCB7VHlwZTogZSwga2V5OiBpLCBhbGlhc2VzOiBzfSA9IHRoaXM7XG4gICAgICAgIGlmICghdC5oYXMoaSwgZmFsc2UpKSB7XG4gICAgICAgICAgICBjLnRyYW5zaWVudChpLCBlKS5yZWdpc3Rlcih0KTtcbiAgICAgICAgICAgIGMuYWxpYXNUbyhpLCBlKS5yZWdpc3Rlcih0KTtcbiAgICAgICAgICAgIEwocywgc2ksIGksIHQpO1xuICAgICAgICB9XG4gICAgfVxufVxuXG5jb25zdCB6ZSA9IHtcbiAgICBuYW1lOiB2b2lkIDAsXG4gICAgc2VhcmNoUGFyZW50czogZmFsc2UsXG4gICAgb3B0aW9uYWw6IGZhbHNlXG59O1xuXG5jb25zdCBHZSA9ICgpID0+IDA7XG5cbmNvbnN0IFhlID0gKCkgPT4gbnVsbDtcblxuY29uc3QgS2UgPSAoKSA9PiBmYWxzZTtcblxuY29uc3QgWWUgPSAoKSA9PiB0cnVlO1xuXG5jb25zdCBRZSA9ICgpID0+IGg7XG5cbmNvbnN0IFplID0gbXQoXCJjdXN0b20tZWxlbWVudFwiKTtcblxuY29uc3QgSmUgPSB0ID0+IGAke1plfToke3R9YDtcblxuY29uc3QgdGkgPSAoKCkgPT4ge1xuICAgIGxldCB0ID0gMDtcbiAgICByZXR1cm4gKCkgPT4gYHVubmFtZWQtJHsrK3R9YDtcbn0pKCk7XG5cbmNvbnN0IGVpID0gKHQsIGUsIGkpID0+IHtcbiAgICBjdChkdChlKSwgaSwgdCk7XG59O1xuXG5jb25zdCBpaSA9ICh0LCBlKSA9PiBodChkdChlKSwgdCk7XG5cbmNvbnN0IHNpID0gT2JqZWN0LmZyZWV6ZSh7XG4gICAgbmFtZTogWmUsXG4gICAga2V5RnJvbTogSmUsXG4gICAgaXNUeXBlKHQpIHtcbiAgICAgICAgcmV0dXJuIEN0KHQpICYmIGF0KFplLCB0KTtcbiAgICB9LFxuICAgIGZvcih0LCBlID0gemUpIHtcbiAgICAgICAgaWYgKHZvaWQgMCA9PT0gZS5uYW1lICYmIHRydWUgIT09IGUuc2VhcmNoUGFyZW50cykge1xuICAgICAgICAgICAgY29uc3QgaSA9IGlzKHQsIFplKTtcbiAgICAgICAgICAgIGlmIChudWxsID09PSBpKSB7XG4gICAgICAgICAgICAgICAgaWYgKHRydWUgPT09IGUub3B0aW9uYWwpIHJldHVybiBudWxsO1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkFVUjA3NjJcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gaTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodm9pZCAwICE9PSBlLm5hbWUpIHtcbiAgICAgICAgICAgIGlmICh0cnVlICE9PSBlLnNlYXJjaFBhcmVudHMpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBpID0gaXModCwgWmUpO1xuICAgICAgICAgICAgICAgIGlmIChudWxsID09PSBpKSB0aHJvdyBuZXcgRXJyb3IoXCJBVVIwNzYzXCIpO1xuICAgICAgICAgICAgICAgIGlmIChpLmlzKGUubmFtZSkpIHJldHVybiBpO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGxldCBpID0gdDtcbiAgICAgICAgICAgIGxldCBzID0gZmFsc2U7XG4gICAgICAgICAgICB3aGlsZSAobnVsbCAhPT0gaSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHQgPSBpcyhpLCBaZSk7XG4gICAgICAgICAgICAgICAgaWYgKG51bGwgIT09IHQpIHtcbiAgICAgICAgICAgICAgICAgICAgcyA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0LmlzKGUubmFtZSkpIHJldHVybiB0O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpID0gYXMoaSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAocykgcmV0dXJuO1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiQVVSMDc2NFwiKTtcbiAgICAgICAgfVxuICAgICAgICBsZXQgaSA9IHQ7XG4gICAgICAgIHdoaWxlIChudWxsICE9PSBpKSB7XG4gICAgICAgICAgICBjb25zdCB0ID0gaXMoaSwgWmUpO1xuICAgICAgICAgICAgaWYgKG51bGwgIT09IHQpIHJldHVybiB0O1xuICAgICAgICAgICAgaSA9IGFzKGkpO1xuICAgICAgICB9XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIkFVUjA3NjVcIik7XG4gICAgfSxcbiAgICBkZWZpbmUodCwgZSkge1xuICAgICAgICBjb25zdCBpID0gQ3VzdG9tRWxlbWVudERlZmluaXRpb24uY3JlYXRlKHQsIGUpO1xuICAgICAgICBjdChaZSwgaSwgaS5UeXBlKTtcbiAgICAgICAgY3QoWmUsIGksIGkpO1xuICAgICAgICB2dChpLlR5cGUsIFplKTtcbiAgICAgICAgcmV0dXJuIGkuVHlwZTtcbiAgICB9LFxuICAgIGdldERlZmluaXRpb24odCkge1xuICAgICAgICBjb25zdCBlID0gaHQoWmUsIHQpO1xuICAgICAgICBpZiAodm9pZCAwID09PSBlKSB0aHJvdyBuZXcgRXJyb3IoYEFVUjA3NjA6JHt0Lm5hbWV9YCk7XG4gICAgICAgIHJldHVybiBlO1xuICAgIH0sXG4gICAgYW5ub3RhdGU6IGVpLFxuICAgIGdldEFubm90YXRpb246IGlpLFxuICAgIGdlbmVyYXRlTmFtZTogdGksXG4gICAgY3JlYXRlSW5qZWN0YWJsZSgpIHtcbiAgICAgICAgY29uc3QgdCA9IGZ1bmN0aW9uKGUsIGksIHMpIHtcbiAgICAgICAgICAgIGNvbnN0IG4gPSBsLmdldE9yQ3JlYXRlQW5ub3RhdGlvblBhcmFtVHlwZXMoZSk7XG4gICAgICAgICAgICBuW3NdID0gdDtcbiAgICAgICAgICAgIHJldHVybiBlO1xuICAgICAgICB9O1xuICAgICAgICB0LnJlZ2lzdGVyID0gZnVuY3Rpb24oZSkge1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICByZXNvbHZlKGUsIGkpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGkuaGFzKHQsIHRydWUpKSByZXR1cm4gaS5nZXQodCk7IGVsc2UgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIHQ7XG4gICAgfSxcbiAgICBnZW5lcmF0ZVR5cGU6IGZ1bmN0aW9uKCkge1xuICAgICAgICBjb25zdCB0ID0ge1xuICAgICAgICAgICAgdmFsdWU6IFwiXCIsXG4gICAgICAgICAgICB3cml0YWJsZTogZmFsc2UsXG4gICAgICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgICAgICB9O1xuICAgICAgICBjb25zdCBlID0ge307XG4gICAgICAgIHJldHVybiBmdW5jdGlvbihpLCBzID0gZSkge1xuICAgICAgICAgICAgY29uc3QgbiA9IGNsYXNzIHt9O1xuICAgICAgICAgICAgdC52YWx1ZSA9IGk7XG4gICAgICAgICAgICBSZWZsZWN0LmRlZmluZVByb3BlcnR5KG4sIFwibmFtZVwiLCB0KTtcbiAgICAgICAgICAgIGlmIChzICE9PSBlKSBPYmplY3QuYXNzaWduKG4ucHJvdG90eXBlLCBzKTtcbiAgICAgICAgICAgIHJldHVybiBuO1xuICAgICAgICB9O1xuICAgIH0oKVxufSk7XG5cbmNvbnN0IG5pID0gZHQoXCJwcm9jZXNzQ29udGVudFwiKTtcblxuZnVuY3Rpb24gcmkodCkge1xuICAgIHJldHVybiB2b2lkIDAgPT09IHQgPyBmdW5jdGlvbih0LCBlLCBpKSB7XG4gICAgICAgIGN0KG5pLCBvaSh0LCBlKSwgdCk7XG4gICAgfSA6IGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgdCA9IG9pKGUsIHQpO1xuICAgICAgICBjb25zdCBpID0gaHQoWmUsIGUpO1xuICAgICAgICBpZiAodm9pZCAwICE9PSBpKSBpLnByb2Nlc3NDb250ZW50ID0gdDsgZWxzZSBjdChuaSwgdCwgZSk7XG4gICAgICAgIHJldHVybiBlO1xuICAgIH07XG59XG5cbmZ1bmN0aW9uIG9pKHQsIGUpIHtcbiAgICBpZiAoQXQoZSkpIGUgPSB0W2VdO1xuICAgIGlmICghQ3QoZSkpIHRocm93IG5ldyBFcnJvcihgQVVSMDc2Njoke3R5cGVvZiBlfWApO1xuICAgIHJldHVybiBlO1xufVxuXG5jbGFzcyBDbGFzc0F0dHJpYnV0ZUFjY2Vzc29yIHtcbiAgICBjb25zdHJ1Y3Rvcih0KSB7XG4gICAgICAgIHRoaXMub2JqID0gdDtcbiAgICAgICAgdGhpcy50eXBlID0gMiB8IDQ7XG4gICAgICAgIHRoaXMudmFsdWUgPSBcIlwiO1xuICAgICAgICB0aGlzLm92ID0gXCJcIjtcbiAgICAgICAgdGhpcy5KID0ge307XG4gICAgICAgIHRoaXMudHQgPSAwO1xuICAgICAgICB0aGlzLkggPSBmYWxzZTtcbiAgICB9XG4gICAgZ2V0IGRvTm90Q2FjaGUoKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICBnZXRWYWx1ZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudmFsdWU7XG4gICAgfVxuICAgIHNldFZhbHVlKHQsIGUpIHtcbiAgICAgICAgdGhpcy52YWx1ZSA9IHQ7XG4gICAgICAgIHRoaXMuSCA9IHQgIT09IHRoaXMub3Y7XG4gICAgICAgIGlmICgwID09PSAoMjU2ICYgZSkpIHRoaXMuSygpO1xuICAgIH1cbiAgICBLKCkge1xuICAgICAgICBpZiAodGhpcy5IKSB7XG4gICAgICAgICAgICB0aGlzLkggPSBmYWxzZTtcbiAgICAgICAgICAgIGNvbnN0IHQgPSB0aGlzLnZhbHVlO1xuICAgICAgICAgICAgY29uc3QgZSA9IHRoaXMuSjtcbiAgICAgICAgICAgIGNvbnN0IGkgPSBsaSh0KTtcbiAgICAgICAgICAgIGxldCBzID0gdGhpcy50dDtcbiAgICAgICAgICAgIHRoaXMub3YgPSB0O1xuICAgICAgICAgICAgaWYgKGkubGVuZ3RoID4gMCkgdGhpcy5ldChpKTtcbiAgICAgICAgICAgIHRoaXMudHQgKz0gMTtcbiAgICAgICAgICAgIGlmICgwID09PSBzKSByZXR1cm47XG4gICAgICAgICAgICBzIC09IDE7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IHQgaW4gZSkge1xuICAgICAgICAgICAgICAgIGlmICghT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGUsIHQpIHx8IGVbdF0gIT09IHMpIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIHRoaXMub2JqLmNsYXNzTGlzdC5yZW1vdmUodCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgZXQodCkge1xuICAgICAgICBjb25zdCBlID0gdGhpcy5vYmo7XG4gICAgICAgIGNvbnN0IGkgPSB0Lmxlbmd0aDtcbiAgICAgICAgbGV0IHMgPSAwO1xuICAgICAgICBsZXQgbjtcbiAgICAgICAgZm9yICg7cyA8IGk7IHMrKykge1xuICAgICAgICAgICAgbiA9IHRbc107XG4gICAgICAgICAgICBpZiAoMCA9PT0gbi5sZW5ndGgpIGNvbnRpbnVlO1xuICAgICAgICAgICAgdGhpcy5KW25dID0gdGhpcy50dDtcbiAgICAgICAgICAgIGUuY2xhc3NMaXN0LmFkZChuKTtcbiAgICAgICAgfVxuICAgIH1cbn1cblxuZnVuY3Rpb24gbGkodCkge1xuICAgIGlmIChBdCh0KSkgcmV0dXJuIGhpKHQpO1xuICAgIGlmIChcIm9iamVjdFwiICE9PSB0eXBlb2YgdCkgcmV0dXJuIGg7XG4gICAgaWYgKHQgaW5zdGFuY2VvZiBBcnJheSkge1xuICAgICAgICBjb25zdCBlID0gdC5sZW5ndGg7XG4gICAgICAgIGlmIChlID4gMCkge1xuICAgICAgICAgICAgY29uc3QgaSA9IFtdO1xuICAgICAgICAgICAgbGV0IHMgPSAwO1xuICAgICAgICAgICAgZm9yICg7ZSA+IHM7ICsrcykgaS5wdXNoKC4uLmxpKHRbc10pKTtcbiAgICAgICAgICAgIHJldHVybiBpO1xuICAgICAgICB9IGVsc2UgcmV0dXJuIGg7XG4gICAgfVxuICAgIGNvbnN0IGUgPSBbXTtcbiAgICBsZXQgaTtcbiAgICBmb3IgKGkgaW4gdCkgaWYgKEJvb2xlYW4odFtpXSkpIGlmIChpLmluY2x1ZGVzKFwiIFwiKSkgZS5wdXNoKC4uLmhpKGkpKTsgZWxzZSBlLnB1c2goaSk7XG4gICAgcmV0dXJuIGU7XG59XG5cbmZ1bmN0aW9uIGhpKHQpIHtcbiAgICBjb25zdCBlID0gdC5tYXRjaCgvXFxTKy9nKTtcbiAgICBpZiAobnVsbCA9PT0gZSkgcmV0dXJuIGg7XG4gICAgcmV0dXJuIGU7XG59XG5cbmZ1bmN0aW9uIGFpKC4uLnQpIHtcbiAgICByZXR1cm4gbmV3IENTU01vZHVsZXNQcm9jZXNzb3JSZWdpc3RyeSh0KTtcbn1cblxuY2xhc3MgQ1NTTW9kdWxlc1Byb2Nlc3NvclJlZ2lzdHJ5IHtcbiAgICBjb25zdHJ1Y3Rvcih0KSB7XG4gICAgICAgIHRoaXMubW9kdWxlcyA9IHQ7XG4gICAgfVxuICAgIHJlZ2lzdGVyKHQpIHtcbiAgICAgICAgdmFyIGU7XG4gICAgICAgIGNvbnN0IGkgPSBPYmplY3QuYXNzaWduKHt9LCAuLi50aGlzLm1vZHVsZXMpO1xuICAgICAgICBjb25zdCBzID0gTWUuZGVmaW5lKHtcbiAgICAgICAgICAgIG5hbWU6IFwiY2xhc3NcIixcbiAgICAgICAgICAgIGJpbmRhYmxlczogWyBcInZhbHVlXCIgXVxuICAgICAgICB9LCAoZSA9IGNsYXNzIEN1c3RvbUF0dHJpYnV0ZUNsYXNzIHtcbiAgICAgICAgICAgIGNvbnN0cnVjdG9yKHQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmVsZW1lbnQgPSB0O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYmluZGluZygpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnZhbHVlQ2hhbmdlZCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFsdWVDaGFuZ2VkKCkge1xuICAgICAgICAgICAgICAgIGlmICghdGhpcy52YWx1ZSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmVsZW1lbnQuY2xhc3NOYW1lID0gXCJcIjtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLmVsZW1lbnQuY2xhc3NOYW1lID0gbGkodGhpcy52YWx1ZSkubWFwKCh0ID0+IGlbdF0gfHwgdCkpLmpvaW4oXCIgXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LCBlLmluamVjdCA9IFsgbnMgXSwgZSkpO1xuICAgICAgICB0LnJlZ2lzdGVyKHMpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gY2koLi4udCkge1xuICAgIHJldHVybiBuZXcgU2hhZG93RE9NUmVnaXN0cnkodCk7XG59XG5cbmNvbnN0IHVpID0gbC5jcmVhdGVJbnRlcmZhY2UoXCJJU2hhZG93RE9NU3R5bGVGYWN0b3J5XCIsICh0ID0+IHQuY2FjaGVkQ2FsbGJhY2soKHQgPT4ge1xuICAgIGlmIChBZG9wdGVkU3R5bGVTaGVldHNTdHlsZXMuc3VwcG9ydGVkKHQuZ2V0KEt0KSkpIHJldHVybiB0LmdldChBZG9wdGVkU3R5bGVTaGVldHNTdHlsZXNGYWN0b3J5KTtcbiAgICByZXR1cm4gdC5nZXQoU3R5bGVFbGVtZW50U3R5bGVzRmFjdG9yeSk7XG59KSkpKTtcblxuY2xhc3MgU2hhZG93RE9NUmVnaXN0cnkge1xuICAgIGNvbnN0cnVjdG9yKHQpIHtcbiAgICAgICAgdGhpcy5jc3MgPSB0O1xuICAgIH1cbiAgICByZWdpc3Rlcih0KSB7XG4gICAgICAgIGNvbnN0IGUgPSB0LmdldChkaSk7XG4gICAgICAgIGNvbnN0IGkgPSB0LmdldCh1aSk7XG4gICAgICAgIHQucmVnaXN0ZXIoYy5pbnN0YW5jZShmaSwgaS5jcmVhdGVTdHlsZXModGhpcy5jc3MsIGUpKSk7XG4gICAgfVxufVxuXG5jbGFzcyBBZG9wdGVkU3R5bGVTaGVldHNTdHlsZXNGYWN0b3J5IHtcbiAgICBjb25zdHJ1Y3Rvcih0KSB7XG4gICAgICAgIHRoaXMucCA9IHQ7XG4gICAgICAgIHRoaXMuY2FjaGUgPSBuZXcgTWFwO1xuICAgIH1cbiAgICBjcmVhdGVTdHlsZXModCwgZSkge1xuICAgICAgICByZXR1cm4gbmV3IEFkb3B0ZWRTdHlsZVNoZWV0c1N0eWxlcyh0aGlzLnAsIHQsIHRoaXMuY2FjaGUsIGUpO1xuICAgIH1cbn1cblxuQWRvcHRlZFN0eWxlU2hlZXRzU3R5bGVzRmFjdG9yeS5pbmplY3QgPSBbIEt0IF07XG5cbmNsYXNzIFN0eWxlRWxlbWVudFN0eWxlc0ZhY3Rvcnkge1xuICAgIGNvbnN0cnVjdG9yKHQpIHtcbiAgICAgICAgdGhpcy5wID0gdDtcbiAgICB9XG4gICAgY3JlYXRlU3R5bGVzKHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBTdHlsZUVsZW1lbnRTdHlsZXModGhpcy5wLCB0LCBlKTtcbiAgICB9XG59XG5cblN0eWxlRWxlbWVudFN0eWxlc0ZhY3RvcnkuaW5qZWN0ID0gWyBLdCBdO1xuXG5jb25zdCBmaSA9IGwuY3JlYXRlSW50ZXJmYWNlKFwiSVNoYWRvd0RPTVN0eWxlc1wiKTtcblxuY29uc3QgZGkgPSBsLmNyZWF0ZUludGVyZmFjZShcIklTaGFkb3dET01HbG9iYWxTdHlsZXNcIiwgKHQgPT4gdC5pbnN0YW5jZSh7XG4gICAgYXBwbHlUbzogb1xufSkpKTtcblxuY2xhc3MgQWRvcHRlZFN0eWxlU2hlZXRzU3R5bGVzIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlLCBpLCBzID0gbnVsbCkge1xuICAgICAgICB0aGlzLnNoYXJlZFN0eWxlcyA9IHM7XG4gICAgICAgIHRoaXMuc3R5bGVTaGVldHMgPSBlLm1hcCgoZSA9PiB7XG4gICAgICAgICAgICBsZXQgcztcbiAgICAgICAgICAgIGlmIChlIGluc3RhbmNlb2YgdC5DU1NTdHlsZVNoZWV0KSBzID0gZTsgZWxzZSB7XG4gICAgICAgICAgICAgICAgcyA9IGkuZ2V0KGUpO1xuICAgICAgICAgICAgICAgIGlmICh2b2lkIDAgPT09IHMpIHtcbiAgICAgICAgICAgICAgICAgICAgcyA9IG5ldyB0LkNTU1N0eWxlU2hlZXQ7XG4gICAgICAgICAgICAgICAgICAgIHMucmVwbGFjZVN5bmMoZSk7XG4gICAgICAgICAgICAgICAgICAgIGkuc2V0KGUsIHMpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBzO1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIHN0YXRpYyBzdXBwb3J0ZWQodCkge1xuICAgICAgICByZXR1cm4gXCJhZG9wdGVkU3R5bGVTaGVldHNcIiBpbiB0LlNoYWRvd1Jvb3QucHJvdG90eXBlO1xuICAgIH1cbiAgICBhcHBseVRvKHQpIHtcbiAgICAgICAgaWYgKG51bGwgIT09IHRoaXMuc2hhcmVkU3R5bGVzKSB0aGlzLnNoYXJlZFN0eWxlcy5hcHBseVRvKHQpO1xuICAgICAgICB0LmFkb3B0ZWRTdHlsZVNoZWV0cyA9IFsgLi4udC5hZG9wdGVkU3R5bGVTaGVldHMsIC4uLnRoaXMuc3R5bGVTaGVldHMgXTtcbiAgICB9XG59XG5cbmNsYXNzIFN0eWxlRWxlbWVudFN0eWxlcyB7XG4gICAgY29uc3RydWN0b3IodCwgZSwgaSA9IG51bGwpIHtcbiAgICAgICAgdGhpcy5wID0gdDtcbiAgICAgICAgdGhpcy5sb2NhbFN0eWxlcyA9IGU7XG4gICAgICAgIHRoaXMuc2hhcmVkU3R5bGVzID0gaTtcbiAgICB9XG4gICAgYXBwbHlUbyh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSB0aGlzLmxvY2FsU3R5bGVzO1xuICAgICAgICBjb25zdCBpID0gdGhpcy5wO1xuICAgICAgICBmb3IgKGxldCBzID0gZS5sZW5ndGggLSAxOyBzID4gLTE7IC0tcykge1xuICAgICAgICAgICAgY29uc3QgbiA9IGkuZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInN0eWxlXCIpO1xuICAgICAgICAgICAgbi5pbm5lckhUTUwgPSBlW3NdO1xuICAgICAgICAgICAgdC5wcmVwZW5kKG4pO1xuICAgICAgICB9XG4gICAgICAgIGlmIChudWxsICE9PSB0aGlzLnNoYXJlZFN0eWxlcykgdGhpcy5zaGFyZWRTdHlsZXMuYXBwbHlUbyh0KTtcbiAgICB9XG59XG5cbmNvbnN0IG1pID0ge1xuICAgIHNoYWRvd0RPTSh0KSB7XG4gICAgICAgIHJldHVybiB4ZS5iZWZvcmVDcmVhdGUoZywgKGUgPT4ge1xuICAgICAgICAgICAgaWYgKG51bGwgIT0gdC5zaGFyZWRTdHlsZXMpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBpID0gZS5nZXQodWkpO1xuICAgICAgICAgICAgICAgIGUucmVnaXN0ZXIoYy5pbnN0YW5jZShkaSwgaS5jcmVhdGVTdHlsZXModC5zaGFyZWRTdHlsZXMsIG51bGwpKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pKTtcbiAgICB9XG59O1xuXG5jb25zdCB7ZW50ZXI6IHZpLCBleGl0OiBwaX0gPSBxO1xuXG5jb25zdCB7d3JhcDogZ2ksIHVud3JhcDogd2l9ID0gTTtcblxuY2xhc3MgQ29tcHV0ZWRXYXRjaGVyIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlLCBpLCBzLCBuKSB7XG4gICAgICAgIHRoaXMub2JqID0gdDtcbiAgICAgICAgdGhpcy5nZXQgPSBpO1xuICAgICAgICB0aGlzLmNiID0gcztcbiAgICAgICAgdGhpcy51c2VQcm94eSA9IG47XG4gICAgICAgIHRoaXMuaW50ZXJjZXB0b3IgPSB0aGlzO1xuICAgICAgICB0aGlzLnZhbHVlID0gdm9pZCAwO1xuICAgICAgICB0aGlzLmlzQm91bmQgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5ydW5uaW5nID0gZmFsc2U7XG4gICAgICAgIHRoaXMub0wgPSBlO1xuICAgIH1cbiAgICBoYW5kbGVDaGFuZ2UoKSB7XG4gICAgICAgIHRoaXMucnVuKCk7XG4gICAgfVxuICAgIGhhbmRsZUNvbGxlY3Rpb25DaGFuZ2UoKSB7XG4gICAgICAgIHRoaXMucnVuKCk7XG4gICAgfVxuICAgICRiaW5kKCkge1xuICAgICAgICBpZiAodGhpcy5pc0JvdW5kKSByZXR1cm47XG4gICAgICAgIHRoaXMuaXNCb3VuZCA9IHRydWU7XG4gICAgICAgIHRoaXMuY29tcHV0ZSgpO1xuICAgIH1cbiAgICAkdW5iaW5kKCkge1xuICAgICAgICBpZiAoIXRoaXMuaXNCb3VuZCkgcmV0dXJuO1xuICAgICAgICB0aGlzLmlzQm91bmQgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5vYnMuY2xlYXJBbGwoKTtcbiAgICB9XG4gICAgcnVuKCkge1xuICAgICAgICBpZiAoIXRoaXMuaXNCb3VuZCB8fCB0aGlzLnJ1bm5pbmcpIHJldHVybjtcbiAgICAgICAgY29uc3QgdCA9IHRoaXMub2JqO1xuICAgICAgICBjb25zdCBlID0gdGhpcy52YWx1ZTtcbiAgICAgICAgY29uc3QgaSA9IHRoaXMuY29tcHV0ZSgpO1xuICAgICAgICBpZiAoIU9iamVjdC5pcyhpLCBlKSkgdGhpcy5jYi5jYWxsKHQsIGksIGUsIHQpO1xuICAgIH1cbiAgICBjb21wdXRlKCkge1xuICAgICAgICB0aGlzLnJ1bm5pbmcgPSB0cnVlO1xuICAgICAgICB0aGlzLm9icy52ZXJzaW9uKys7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICB2aSh0aGlzKTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnZhbHVlID0gd2kodGhpcy5nZXQuY2FsbCh2b2lkIDAsIHRoaXMudXNlUHJveHkgPyBnaSh0aGlzLm9iaikgOiB0aGlzLm9iaiwgdGhpcykpO1xuICAgICAgICB9IGZpbmFsbHkge1xuICAgICAgICAgICAgdGhpcy5vYnMuY2xlYXIoKTtcbiAgICAgICAgICAgIHRoaXMucnVubmluZyA9IGZhbHNlO1xuICAgICAgICAgICAgcGkodGhpcyk7XG4gICAgICAgIH1cbiAgICB9XG59XG5cbmNsYXNzIEV4cHJlc3Npb25XYXRjaGVyIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlLCBpLCBzLCBuKSB7XG4gICAgICAgIHRoaXMuc2NvcGUgPSB0O1xuICAgICAgICB0aGlzLmxvY2F0b3IgPSBlO1xuICAgICAgICB0aGlzLm9MID0gaTtcbiAgICAgICAgdGhpcy5leHByZXNzaW9uID0gcztcbiAgICAgICAgdGhpcy5jYWxsYmFjayA9IG47XG4gICAgICAgIHRoaXMuaW50ZXJjZXB0b3IgPSB0aGlzO1xuICAgICAgICB0aGlzLmlzQm91bmQgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5vYmogPSB0LmJpbmRpbmdDb250ZXh0O1xuICAgIH1cbiAgICBoYW5kbGVDaGFuZ2UodCkge1xuICAgICAgICBjb25zdCBlID0gdGhpcy5leHByZXNzaW9uO1xuICAgICAgICBjb25zdCBpID0gdGhpcy5vYmo7XG4gICAgICAgIGNvbnN0IHMgPSB0aGlzLnZhbHVlO1xuICAgICAgICBjb25zdCBuID0gMTAwODIgPT09IGUuJGtpbmQgJiYgMSA9PT0gdGhpcy5vYnMuY291bnQ7XG4gICAgICAgIGlmICghbikge1xuICAgICAgICAgICAgdGhpcy5vYnMudmVyc2lvbisrO1xuICAgICAgICAgICAgdCA9IGUuZXZhbHVhdGUoMCwgdGhpcy5zY29wZSwgdGhpcy5sb2NhdG9yLCB0aGlzKTtcbiAgICAgICAgICAgIHRoaXMub2JzLmNsZWFyKCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFPYmplY3QuaXModCwgcykpIHtcbiAgICAgICAgICAgIHRoaXMudmFsdWUgPSB0O1xuICAgICAgICAgICAgdGhpcy5jYWxsYmFjay5jYWxsKGksIHQsIHMsIGkpO1xuICAgICAgICB9XG4gICAgfVxuICAgICRiaW5kKCkge1xuICAgICAgICBpZiAodGhpcy5pc0JvdW5kKSByZXR1cm47XG4gICAgICAgIHRoaXMuaXNCb3VuZCA9IHRydWU7XG4gICAgICAgIHRoaXMub2JzLnZlcnNpb24rKztcbiAgICAgICAgdGhpcy52YWx1ZSA9IHRoaXMuZXhwcmVzc2lvbi5ldmFsdWF0ZSgwLCB0aGlzLnNjb3BlLCB0aGlzLmxvY2F0b3IsIHRoaXMpO1xuICAgICAgICB0aGlzLm9icy5jbGVhcigpO1xuICAgIH1cbiAgICAkdW5iaW5kKCkge1xuICAgICAgICBpZiAoIXRoaXMuaXNCb3VuZCkgcmV0dXJuO1xuICAgICAgICB0aGlzLmlzQm91bmQgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5vYnMuY2xlYXJBbGwoKTtcbiAgICAgICAgdGhpcy52YWx1ZSA9IHZvaWQgMDtcbiAgICB9XG59XG5cbiQoQ29tcHV0ZWRXYXRjaGVyKTtcblxuJChFeHByZXNzaW9uV2F0Y2hlcik7XG5cbmNvbnN0IGJpID0gbC5jcmVhdGVJbnRlcmZhY2UoXCJJTGlmZWN5Y2xlSG9va3NcIik7XG5cbmNsYXNzIExpZmVjeWNsZUhvb2tzRW50cnkge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUpIHtcbiAgICAgICAgdGhpcy5kZWZpbml0aW9uID0gdDtcbiAgICAgICAgdGhpcy5pbnN0YW5jZSA9IGU7XG4gICAgfVxufVxuXG5jbGFzcyBMaWZlY3ljbGVIb29rc0RlZmluaXRpb24ge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUpIHtcbiAgICAgICAgdGhpcy5UeXBlID0gdDtcbiAgICAgICAgdGhpcy5wcm9wZXJ0eU5hbWVzID0gZTtcbiAgICB9XG4gICAgc3RhdGljIGNyZWF0ZSh0LCBlKSB7XG4gICAgICAgIGNvbnN0IGkgPSBuZXcgU2V0O1xuICAgICAgICBsZXQgcyA9IGUucHJvdG90eXBlO1xuICAgICAgICB3aGlsZSAocyAhPT0gT2JqZWN0LnByb3RvdHlwZSkge1xuICAgICAgICAgICAgZm9yIChjb25zdCB0IG9mIE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKHMpKSBpZiAoXCJjb25zdHJ1Y3RvclwiICE9PSB0KSBpLmFkZCh0KTtcbiAgICAgICAgICAgIHMgPSBPYmplY3QuZ2V0UHJvdG90eXBlT2Yocyk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5ldyBMaWZlY3ljbGVIb29rc0RlZmluaXRpb24oZSwgaSk7XG4gICAgfVxuICAgIHJlZ2lzdGVyKHQpIHtcbiAgICAgICAgYy5zaW5nbGV0b24oYmksIHRoaXMuVHlwZSkucmVnaXN0ZXIodCk7XG4gICAgfVxufVxuXG5jb25zdCB4aSA9IG5ldyBXZWFrTWFwO1xuXG5jb25zdCB5aSA9IGR0KFwibGlmZWN5Y2xlLWhvb2tzXCIpO1xuXG5jb25zdCBraSA9IE9iamVjdC5mcmVlemUoe1xuICAgIG5hbWU6IHlpLFxuICAgIGRlZmluZSh0LCBlKSB7XG4gICAgICAgIGNvbnN0IGkgPSBMaWZlY3ljbGVIb29rc0RlZmluaXRpb24uY3JlYXRlKHQsIGUpO1xuICAgICAgICBjdCh5aSwgaSwgZSk7XG4gICAgICAgIHZ0KGUsIHlpKTtcbiAgICAgICAgcmV0dXJuIGkuVHlwZTtcbiAgICB9LFxuICAgIHJlc29sdmUodCkge1xuICAgICAgICBsZXQgZSA9IHhpLmdldCh0KTtcbiAgICAgICAgaWYgKHZvaWQgMCA9PT0gZSkge1xuICAgICAgICAgICAgZSA9IG5ldyBMaWZlY3ljbGVIb29rc0xvb2t1cEltcGw7XG4gICAgICAgICAgICBjb25zdCBpID0gdC5yb290O1xuICAgICAgICAgICAgY29uc3QgcyA9IGkuaWQgPT09IHQuaWQgPyB0LmdldEFsbChiaSkgOiB0LmhhcyhiaSwgZmFsc2UpID8gWyAuLi5pLmdldEFsbChiaSksIC4uLnQuZ2V0QWxsKGJpKSBdIDogaS5nZXRBbGwoYmkpO1xuICAgICAgICAgICAgbGV0IG47XG4gICAgICAgICAgICBsZXQgcjtcbiAgICAgICAgICAgIGxldCBvO1xuICAgICAgICAgICAgbGV0IGw7XG4gICAgICAgICAgICBsZXQgaDtcbiAgICAgICAgICAgIGZvciAobiBvZiBzKSB7XG4gICAgICAgICAgICAgICAgciA9IGh0KHlpLCBuLmNvbnN0cnVjdG9yKTtcbiAgICAgICAgICAgICAgICBvID0gbmV3IExpZmVjeWNsZUhvb2tzRW50cnkociwgbik7XG4gICAgICAgICAgICAgICAgZm9yIChsIG9mIHIucHJvcGVydHlOYW1lcykge1xuICAgICAgICAgICAgICAgICAgICBoID0gZVtsXTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHZvaWQgMCA9PT0gaCkgZVtsXSA9IFsgbyBdOyBlbHNlIGgucHVzaChvKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGU7XG4gICAgfVxufSk7XG5cbmNsYXNzIExpZmVjeWNsZUhvb2tzTG9va3VwSW1wbCB7fVxuXG5mdW5jdGlvbiBDaSgpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gdChlKSB7XG4gICAgICAgIHJldHVybiBraS5kZWZpbmUoe30sIGUpO1xuICAgIH07XG59XG5cbmNvbnN0IEFpID0gbC5jcmVhdGVJbnRlcmZhY2UoXCJJVmlld0ZhY3RvcnlcIik7XG5cbmNsYXNzIFZpZXdGYWN0b3J5IHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlKSB7XG4gICAgICAgIHRoaXMuaXNDYWNoaW5nID0gZmFsc2U7XG4gICAgICAgIHRoaXMuY2FjaGUgPSBudWxsO1xuICAgICAgICB0aGlzLmNhY2hlU2l6ZSA9IC0xO1xuICAgICAgICB0aGlzLm5hbWUgPSBlLm5hbWU7XG4gICAgICAgIHRoaXMuY29udGFpbmVyID0gdDtcbiAgICAgICAgdGhpcy5kZWYgPSBlO1xuICAgIH1cbiAgICBzZXRDYWNoZVNpemUodCwgZSkge1xuICAgICAgICBpZiAodCkge1xuICAgICAgICAgICAgaWYgKFwiKlwiID09PSB0KSB0ID0gVmlld0ZhY3RvcnkubWF4Q2FjaGVTaXplOyBlbHNlIGlmIChBdCh0KSkgdCA9IHBhcnNlSW50KHQsIDEwKTtcbiAgICAgICAgICAgIGlmICgtMSA9PT0gdGhpcy5jYWNoZVNpemUgfHwgIWUpIHRoaXMuY2FjaGVTaXplID0gdDtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5jYWNoZVNpemUgPiAwKSB0aGlzLmNhY2hlID0gW107IGVsc2UgdGhpcy5jYWNoZSA9IG51bGw7XG4gICAgICAgIHRoaXMuaXNDYWNoaW5nID0gdGhpcy5jYWNoZVNpemUgPiAwO1xuICAgIH1cbiAgICBjYW5SZXR1cm5Ub0NhY2hlKHQpIHtcbiAgICAgICAgcmV0dXJuIG51bGwgIT0gdGhpcy5jYWNoZSAmJiB0aGlzLmNhY2hlLmxlbmd0aCA8IHRoaXMuY2FjaGVTaXplO1xuICAgIH1cbiAgICB0cnlSZXR1cm5Ub0NhY2hlKHQpIHtcbiAgICAgICAgaWYgKHRoaXMuY2FuUmV0dXJuVG9DYWNoZSh0KSkge1xuICAgICAgICAgICAgdGhpcy5jYWNoZS5wdXNoKHQpO1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBjcmVhdGUodCkge1xuICAgICAgICBjb25zdCBlID0gdGhpcy5jYWNoZTtcbiAgICAgICAgbGV0IGk7XG4gICAgICAgIGlmIChudWxsICE9IGUgJiYgZS5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICBpID0gZS5wb3AoKTtcbiAgICAgICAgICAgIHJldHVybiBpO1xuICAgICAgICB9XG4gICAgICAgIGkgPSBDb250cm9sbGVyLiR2aWV3KHRoaXMsIHQpO1xuICAgICAgICByZXR1cm4gaTtcbiAgICB9XG59XG5cblZpZXdGYWN0b3J5Lm1heENhY2hlU2l6ZSA9IDY1NTM1O1xuXG5jb25zdCBTaSA9IG5ldyBXZWFrU2V0O1xuXG5mdW5jdGlvbiBSaSh0KSB7XG4gICAgcmV0dXJuICFTaS5oYXModCk7XG59XG5cbmZ1bmN0aW9uIEVpKHQpIHtcbiAgICBTaS5hZGQodCk7XG4gICAgcmV0dXJuIEN1c3RvbUVsZW1lbnREZWZpbml0aW9uLmNyZWF0ZSh0KTtcbn1cblxuY29uc3QgQmkgPSBtdChcInZpZXdzXCIpO1xuXG5jb25zdCBJaSA9IE9iamVjdC5mcmVlemUoe1xuICAgIG5hbWU6IEJpLFxuICAgIGhhcyh0KSB7XG4gICAgICAgIHJldHVybiBDdCh0KSAmJiAoYXQoQmksIHQpIHx8IFwiJHZpZXdzXCIgaW4gdCk7XG4gICAgfSxcbiAgICBnZXQodCkge1xuICAgICAgICBpZiAoQ3QodCkgJiYgXCIkdmlld3NcIiBpbiB0KSB7XG4gICAgICAgICAgICBjb25zdCBlID0gdC4kdmlld3M7XG4gICAgICAgICAgICBjb25zdCBpID0gZS5maWx0ZXIoUmkpLm1hcChFaSk7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IGUgb2YgaSkgSWkuYWRkKHQsIGUpO1xuICAgICAgICB9XG4gICAgICAgIGxldCBlID0gaHQoQmksIHQpO1xuICAgICAgICBpZiAodm9pZCAwID09PSBlKSBjdChCaSwgZSA9IFtdLCB0KTtcbiAgICAgICAgcmV0dXJuIGU7XG4gICAgfSxcbiAgICBhZGQodCwgZSkge1xuICAgICAgICBjb25zdCBpID0gQ3VzdG9tRWxlbWVudERlZmluaXRpb24uY3JlYXRlKGUpO1xuICAgICAgICBsZXQgcyA9IGh0KEJpLCB0KTtcbiAgICAgICAgaWYgKHZvaWQgMCA9PT0gcykgY3QoQmksIHMgPSBbIGkgXSwgdCk7IGVsc2Ugcy5wdXNoKGkpO1xuICAgICAgICByZXR1cm4gcztcbiAgICB9XG59KTtcblxuZnVuY3Rpb24gVGkodCkge1xuICAgIHJldHVybiBmdW5jdGlvbihlKSB7XG4gICAgICAgIElpLmFkZChlLCB0KTtcbiAgICB9O1xufVxuXG5jb25zdCBEaSA9IGwuY3JlYXRlSW50ZXJmYWNlKFwiSVZpZXdMb2NhdG9yXCIsICh0ID0+IHQuc2luZ2xldG9uKFZpZXdMb2NhdG9yKSkpO1xuXG5jbGFzcyBWaWV3TG9jYXRvciB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMuaXQgPSBuZXcgV2Vha01hcDtcbiAgICAgICAgdGhpcy5zdCA9IG5ldyBNYXA7XG4gICAgfVxuICAgIGdldFZpZXdDb21wb25lbnRGb3JPYmplY3QodCwgZSkge1xuICAgICAgICBpZiAodCkge1xuICAgICAgICAgICAgY29uc3QgaSA9IElpLmhhcyh0LmNvbnN0cnVjdG9yKSA/IElpLmdldCh0LmNvbnN0cnVjdG9yKSA6IFtdO1xuICAgICAgICAgICAgY29uc3QgcyA9IEN0KGUpID8gZSh0LCBpKSA6IHRoaXMubnQoaSwgZSk7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5ydCh0LCBpLCBzKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgcnQodCwgZSwgaSkge1xuICAgICAgICBsZXQgcyA9IHRoaXMuaXQuZ2V0KHQpO1xuICAgICAgICBsZXQgbjtcbiAgICAgICAgaWYgKHZvaWQgMCA9PT0gcykge1xuICAgICAgICAgICAgcyA9IHt9O1xuICAgICAgICAgICAgdGhpcy5pdC5zZXQodCwgcyk7XG4gICAgICAgIH0gZWxzZSBuID0gc1tpXTtcbiAgICAgICAgaWYgKHZvaWQgMCA9PT0gbikge1xuICAgICAgICAgICAgY29uc3QgciA9IHRoaXMub3QodCwgZSwgaSk7XG4gICAgICAgICAgICBuID0gc2kuZGVmaW5lKHNpLmdldERlZmluaXRpb24ociksIGNsYXNzIGV4dGVuZHMgciB7XG4gICAgICAgICAgICAgICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgICAgICAgICAgICAgIHN1cGVyKHQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgc1tpXSA9IG47XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG47XG4gICAgfVxuICAgIG90KHQsIGUsIGkpIHtcbiAgICAgICAgbGV0IHMgPSB0aGlzLnN0LmdldCh0LmNvbnN0cnVjdG9yKTtcbiAgICAgICAgbGV0IG47XG4gICAgICAgIGlmICh2b2lkIDAgPT09IHMpIHtcbiAgICAgICAgICAgIHMgPSB7fTtcbiAgICAgICAgICAgIHRoaXMuc3Quc2V0KHQuY29uc3RydWN0b3IsIHMpO1xuICAgICAgICB9IGVsc2UgbiA9IHNbaV07XG4gICAgICAgIGlmICh2b2lkIDAgPT09IG4pIHtcbiAgICAgICAgICAgIG4gPSBzaS5kZWZpbmUodGhpcy5sdChlLCBpKSwgY2xhc3Mge1xuICAgICAgICAgICAgICAgIGNvbnN0cnVjdG9yKHQpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy52aWV3TW9kZWwgPSB0O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBkZWZpbmUodCwgZSwgaSkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBzID0gdGhpcy52aWV3TW9kZWw7XG4gICAgICAgICAgICAgICAgICAgIHQuc2NvcGUgPSBVLmZyb21QYXJlbnQodC5zY29wZSwgcyk7XG4gICAgICAgICAgICAgICAgICAgIGlmICh2b2lkIDAgIT09IHMuZGVmaW5lKSByZXR1cm4gcy5kZWZpbmUodCwgZSwgaSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBjb25zdCByID0gbi5wcm90b3R5cGU7XG4gICAgICAgICAgICBpZiAoXCJoeWRyYXRpbmdcIiBpbiB0KSByLmh5ZHJhdGluZyA9IGZ1bmN0aW9uIHQoZSkge1xuICAgICAgICAgICAgICAgIHRoaXMudmlld01vZGVsLmh5ZHJhdGluZyhlKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBpZiAoXCJoeWRyYXRlZFwiIGluIHQpIHIuaHlkcmF0ZWQgPSBmdW5jdGlvbiB0KGUpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnZpZXdNb2RlbC5oeWRyYXRlZChlKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBpZiAoXCJjcmVhdGVkXCIgaW4gdCkgci5jcmVhdGVkID0gZnVuY3Rpb24gdChlKSB7XG4gICAgICAgICAgICAgICAgdGhpcy52aWV3TW9kZWwuY3JlYXRlZChlKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBpZiAoXCJiaW5kaW5nXCIgaW4gdCkgci5iaW5kaW5nID0gZnVuY3Rpb24gdChlLCBpLCBzKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMudmlld01vZGVsLmJpbmRpbmcoZSwgaSwgcyk7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgaWYgKFwiYm91bmRcIiBpbiB0KSByLmJvdW5kID0gZnVuY3Rpb24gdChlLCBpLCBzKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMudmlld01vZGVsLmJvdW5kKGUsIGksIHMpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGlmIChcImF0dGFjaGluZ1wiIGluIHQpIHIuYXR0YWNoaW5nID0gZnVuY3Rpb24gdChlLCBpLCBzKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMudmlld01vZGVsLmF0dGFjaGluZyhlLCBpLCBzKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBpZiAoXCJhdHRhY2hlZFwiIGluIHQpIHIuYXR0YWNoZWQgPSBmdW5jdGlvbiB0KGUsIGkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy52aWV3TW9kZWwuYXR0YWNoZWQoZSwgaSk7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgaWYgKFwiZGV0YWNoaW5nXCIgaW4gdCkgci5kZXRhY2hpbmcgPSBmdW5jdGlvbiB0KGUsIGksIHMpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy52aWV3TW9kZWwuZGV0YWNoaW5nKGUsIGksIHMpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGlmIChcInVuYmluZGluZ1wiIGluIHQpIHIudW5iaW5kaW5nID0gZnVuY3Rpb24gdChlLCBpLCBzKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMudmlld01vZGVsLnVuYmluZGluZyhlLCBpLCBzKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBpZiAoXCJkaXNwb3NlXCIgaW4gdCkgci5kaXNwb3NlID0gZnVuY3Rpb24gdCgpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnZpZXdNb2RlbC5kaXNwb3NlKCk7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgc1tpXSA9IG47XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG47XG4gICAgfVxuICAgIG50KHQsIGUpIHtcbiAgICAgICAgaWYgKGUpIHJldHVybiBlO1xuICAgICAgICBpZiAoMSA9PT0gdC5sZW5ndGgpIHJldHVybiB0WzBdLm5hbWU7XG4gICAgICAgIHJldHVybiBcImRlZmF1bHQtdmlld1wiO1xuICAgIH1cbiAgICBsdCh0LCBlKSB7XG4gICAgICAgIGNvbnN0IGkgPSB0LmZpbmQoKHQgPT4gdC5uYW1lID09PSBlKSk7XG4gICAgICAgIGlmICh2b2lkIDAgPT09IGkpIHRocm93IG5ldyBFcnJvcihgQ291bGQgbm90IGZpbmQgdmlldzogJHtlfWApO1xuICAgICAgICByZXR1cm4gaTtcbiAgICB9XG59XG5cbmNvbnN0IFBpID0gbC5jcmVhdGVJbnRlcmZhY2UoXCJJUmVuZGVyaW5nXCIsICh0ID0+IHQuc2luZ2xldG9uKFJlbmRlcmluZykpKTtcblxuY2xhc3MgUmVuZGVyaW5nIHtcbiAgICBjb25zdHJ1Y3Rvcih0KSB7XG4gICAgICAgIHRoaXMuaHQgPSBuZXcgV2Vha01hcDtcbiAgICAgICAgdGhpcy5hdCA9IG5ldyBXZWFrTWFwO1xuICAgICAgICB0aGlzLmN0ID0gKHRoaXMudXQgPSB0LnJvb3QpLmdldChLdCk7XG4gICAgICAgIHRoaXMuZnQgPSBuZXcgRnJhZ21lbnROb2RlU2VxdWVuY2UodGhpcy5jdCwgdGhpcy5jdC5kb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCkpO1xuICAgIH1cbiAgICBnZXQgcmVuZGVyZXJzKCkge1xuICAgICAgICByZXR1cm4gbnVsbCA9PSB0aGlzLnJzID8gdGhpcy5ycyA9IHRoaXMudXQuZ2V0QWxsKFNzLCBmYWxzZSkucmVkdWNlKCgodCwgZSkgPT4ge1xuICAgICAgICAgICAgdFtlLmluc3RydWN0aW9uVHlwZV0gPSBlO1xuICAgICAgICAgICAgcmV0dXJuIHQ7XG4gICAgICAgIH0pLCB3dCgpKSA6IHRoaXMucnM7XG4gICAgfVxuICAgIGNvbXBpbGUodCwgZSwgaSkge1xuICAgICAgICBpZiAoZmFsc2UgIT09IHQubmVlZHNDb21waWxlKSB7XG4gICAgICAgICAgICBjb25zdCBzID0gdGhpcy5odDtcbiAgICAgICAgICAgIGNvbnN0IG4gPSBlLmdldChBcyk7XG4gICAgICAgICAgICBsZXQgciA9IHMuZ2V0KHQpO1xuICAgICAgICAgICAgaWYgKG51bGwgPT0gcikgcy5zZXQodCwgciA9IG4uY29tcGlsZSh0LCBlLCBpKSk7IGVsc2UgZS5yZWdpc3RlciguLi5yLmRlcGVuZGVuY2llcyk7XG4gICAgICAgICAgICByZXR1cm4gcjtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdDtcbiAgICB9XG4gICAgZ2V0Vmlld0ZhY3RvcnkodCwgZSkge1xuICAgICAgICByZXR1cm4gbmV3IFZpZXdGYWN0b3J5KGUsIEN1c3RvbUVsZW1lbnREZWZpbml0aW9uLmdldE9yQ3JlYXRlKHQpKTtcbiAgICB9XG4gICAgY3JlYXRlTm9kZXModCkge1xuICAgICAgICBpZiAodHJ1ZSA9PT0gdC5lbmhhbmNlKSByZXR1cm4gbmV3IEZyYWdtZW50Tm9kZVNlcXVlbmNlKHRoaXMuY3QsIHQudGVtcGxhdGUpO1xuICAgICAgICBsZXQgZTtcbiAgICAgICAgY29uc3QgaSA9IHRoaXMuYXQ7XG4gICAgICAgIGlmIChpLmhhcyh0KSkgZSA9IGkuZ2V0KHQpOyBlbHNlIHtcbiAgICAgICAgICAgIGNvbnN0IHMgPSB0aGlzLmN0O1xuICAgICAgICAgICAgY29uc3QgbiA9IHMuZG9jdW1lbnQ7XG4gICAgICAgICAgICBjb25zdCByID0gdC50ZW1wbGF0ZTtcbiAgICAgICAgICAgIGxldCBvO1xuICAgICAgICAgICAgaWYgKG51bGwgPT09IHIpIGUgPSBudWxsOyBlbHNlIGlmIChyIGluc3RhbmNlb2Ygcy5Ob2RlKSBpZiAoXCJURU1QTEFURVwiID09PSByLm5vZGVOYW1lKSBlID0gbi5hZG9wdE5vZGUoci5jb250ZW50KTsgZWxzZSAoZSA9IG4uYWRvcHROb2RlKG4uY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpKSkuYXBwZW5kQ2hpbGQoci5jbG9uZU5vZGUodHJ1ZSkpOyBlbHNlIHtcbiAgICAgICAgICAgICAgICBvID0gbi5jcmVhdGVFbGVtZW50KFwidGVtcGxhdGVcIik7XG4gICAgICAgICAgICAgICAgaWYgKEF0KHIpKSBvLmlubmVySFRNTCA9IHI7XG4gICAgICAgICAgICAgICAgbi5hZG9wdE5vZGUoZSA9IG8uY29udGVudCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpLnNldCh0LCBlKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbnVsbCA9PSBlID8gdGhpcy5mdCA6IG5ldyBGcmFnbWVudE5vZGVTZXF1ZW5jZSh0aGlzLmN0LCBlLmNsb25lTm9kZSh0cnVlKSk7XG4gICAgfVxuICAgIHJlbmRlcih0LCBlLCBpLCBzKSB7XG4gICAgICAgIGNvbnN0IG4gPSBpLmluc3RydWN0aW9ucztcbiAgICAgICAgY29uc3QgciA9IHRoaXMucmVuZGVyZXJzO1xuICAgICAgICBjb25zdCBvID0gZS5sZW5ndGg7XG4gICAgICAgIGlmIChlLmxlbmd0aCAhPT0gbi5sZW5ndGgpIHRocm93IG5ldyBFcnJvcihgQVVSMDc1Nzoke299PD4ke24ubGVuZ3RofWApO1xuICAgICAgICBsZXQgbCA9IDA7XG4gICAgICAgIGxldCBoID0gMDtcbiAgICAgICAgbGV0IGEgPSAwO1xuICAgICAgICBsZXQgYztcbiAgICAgICAgbGV0IHU7XG4gICAgICAgIGxldCBmO1xuICAgICAgICBpZiAobyA+IDApIHdoaWxlIChvID4gbCkge1xuICAgICAgICAgICAgYyA9IG5bbF07XG4gICAgICAgICAgICBmID0gZVtsXTtcbiAgICAgICAgICAgIGggPSAwO1xuICAgICAgICAgICAgYSA9IGMubGVuZ3RoO1xuICAgICAgICAgICAgd2hpbGUgKGEgPiBoKSB7XG4gICAgICAgICAgICAgICAgdSA9IGNbaF07XG4gICAgICAgICAgICAgICAgclt1LnR5cGVdLnJlbmRlcih0LCBmLCB1KTtcbiAgICAgICAgICAgICAgICArK2g7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICArK2w7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHZvaWQgMCAhPT0gcyAmJiBudWxsICE9PSBzKSB7XG4gICAgICAgICAgICBjID0gaS5zdXJyb2dhdGVzO1xuICAgICAgICAgICAgaWYgKChhID0gYy5sZW5ndGgpID4gMCkge1xuICAgICAgICAgICAgICAgIGggPSAwO1xuICAgICAgICAgICAgICAgIHdoaWxlIChhID4gaCkge1xuICAgICAgICAgICAgICAgICAgICB1ID0gY1toXTtcbiAgICAgICAgICAgICAgICAgICAgclt1LnR5cGVdLnJlbmRlcih0LCBzLCB1KTtcbiAgICAgICAgICAgICAgICAgICAgKytoO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbn1cblxuUmVuZGVyaW5nLmluamVjdCA9IFsgZyBdO1xuXG52YXIgT2k7XG5cbihmdW5jdGlvbih0KSB7XG4gICAgdFt0W1wibm9uZVwiXSA9IDBdID0gXCJub25lXCI7XG4gICAgdFt0W1wiaG9zdFwiXSA9IDFdID0gXCJob3N0XCI7XG4gICAgdFt0W1wic2hhZG93Um9vdFwiXSA9IDJdID0gXCJzaGFkb3dSb290XCI7XG4gICAgdFt0W1wibG9jYXRpb25cIl0gPSAzXSA9IFwibG9jYXRpb25cIjtcbn0pKE9pIHx8IChPaSA9IHt9KSk7XG5cbmNvbnN0ICRpID0ge1xuICAgIG9wdGlvbmFsOiB0cnVlXG59O1xuXG5jb25zdCBMaSA9IG5ldyBXZWFrTWFwO1xuXG5jbGFzcyBDb250cm9sbGVyIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlLCBpLCBzLCBuLCByKSB7XG4gICAgICAgIHRoaXMuY29udGFpbmVyID0gdDtcbiAgICAgICAgdGhpcy52bUtpbmQgPSBlO1xuICAgICAgICB0aGlzLmRlZmluaXRpb24gPSBpO1xuICAgICAgICB0aGlzLnZpZXdGYWN0b3J5ID0gcztcbiAgICAgICAgdGhpcy52aWV3TW9kZWwgPSBuO1xuICAgICAgICB0aGlzLmhvc3QgPSByO1xuICAgICAgICB0aGlzLmlkID0gdyhcImF1JGNvbXBvbmVudFwiKTtcbiAgICAgICAgdGhpcy5oZWFkID0gbnVsbDtcbiAgICAgICAgdGhpcy50YWlsID0gbnVsbDtcbiAgICAgICAgdGhpcy5uZXh0ID0gbnVsbDtcbiAgICAgICAgdGhpcy5wYXJlbnQgPSBudWxsO1xuICAgICAgICB0aGlzLmJpbmRpbmdzID0gbnVsbDtcbiAgICAgICAgdGhpcy5jaGlsZHJlbiA9IG51bGw7XG4gICAgICAgIHRoaXMuaGFzTG9ja2VkU2NvcGUgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5pc1N0cmljdEJpbmRpbmcgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5zY29wZSA9IG51bGw7XG4gICAgICAgIHRoaXMuaXNCb3VuZCA9IGZhbHNlO1xuICAgICAgICB0aGlzLmhvc3RDb250cm9sbGVyID0gbnVsbDtcbiAgICAgICAgdGhpcy5tb3VudFRhcmdldCA9IDA7XG4gICAgICAgIHRoaXMuc2hhZG93Um9vdCA9IG51bGw7XG4gICAgICAgIHRoaXMubm9kZXMgPSBudWxsO1xuICAgICAgICB0aGlzLmxvY2F0aW9uID0gbnVsbDtcbiAgICAgICAgdGhpcy5saWZlY3ljbGVIb29rcyA9IG51bGw7XG4gICAgICAgIHRoaXMuc3RhdGUgPSAwO1xuICAgICAgICB0aGlzLmR0ID0gZmFsc2U7XG4gICAgICAgIHRoaXMudnQgPSBoO1xuICAgICAgICB0aGlzLmZsYWdzID0gMDtcbiAgICAgICAgdGhpcy4kaW5pdGlhdG9yID0gbnVsbDtcbiAgICAgICAgdGhpcy4kZmxhZ3MgPSAwO1xuICAgICAgICB0aGlzLiRyZXNvbHZlID0gdm9pZCAwO1xuICAgICAgICB0aGlzLiRyZWplY3QgPSB2b2lkIDA7XG4gICAgICAgIHRoaXMuJHByb21pc2UgPSB2b2lkIDA7XG4gICAgICAgIHRoaXMuZ3QgPSAwO1xuICAgICAgICB0aGlzLnd0ID0gMDtcbiAgICAgICAgdGhpcy5idCA9IDA7XG4gICAgICAgIHRoaXMuciA9IHQucm9vdC5nZXQoUGkpO1xuICAgICAgICBzd2l0Y2ggKGUpIHtcbiAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgY2FzZSAwOlxuICAgICAgICAgICAgdGhpcy5ob29rcyA9IG5ldyBIb29rc0RlZmluaXRpb24obik7XG4gICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgIHRoaXMuaG9va3MgPSBIb29rc0RlZmluaXRpb24ubm9uZTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgfVxuICAgIGdldCBpc0FjdGl2ZSgpIHtcbiAgICAgICAgcmV0dXJuICh0aGlzLnN0YXRlICYgKDEgfCAyKSkgPiAwICYmIDAgPT09ICg0ICYgdGhpcy5zdGF0ZSk7XG4gICAgfVxuICAgIGdldCBuYW1lKCkge1xuICAgICAgICB2YXIgdDtcbiAgICAgICAgaWYgKG51bGwgPT09IHRoaXMucGFyZW50KSBzd2l0Y2ggKHRoaXMudm1LaW5kKSB7XG4gICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgcmV0dXJuIGBbJHt0aGlzLmRlZmluaXRpb24ubmFtZX1dYDtcblxuICAgICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmRlZmluaXRpb24ubmFtZTtcblxuICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnZpZXdGYWN0b3J5Lm5hbWU7XG4gICAgICAgIH1cbiAgICAgICAgc3dpdGNoICh0aGlzLnZtS2luZCkge1xuICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgIHJldHVybiBgJHt0aGlzLnBhcmVudC5uYW1lfT5bJHt0aGlzLmRlZmluaXRpb24ubmFtZX1dYDtcblxuICAgICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAgIHJldHVybiBgJHt0aGlzLnBhcmVudC5uYW1lfT4ke3RoaXMuZGVmaW5pdGlvbi5uYW1lfWA7XG5cbiAgICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgICByZXR1cm4gdGhpcy52aWV3RmFjdG9yeS5uYW1lID09PSAobnVsbCA9PT0gKHQgPSB0aGlzLnBhcmVudC5kZWZpbml0aW9uKSB8fCB2b2lkIDAgPT09IHQgPyB2b2lkIDAgOiB0Lm5hbWUpID8gYCR7dGhpcy5wYXJlbnQubmFtZX1bdmlld11gIDogYCR7dGhpcy5wYXJlbnQubmFtZX1bdmlldzoke3RoaXMudmlld0ZhY3RvcnkubmFtZX1dYDtcbiAgICAgICAgfVxuICAgIH1cbiAgICBzdGF0aWMgZ2V0Q2FjaGVkKHQpIHtcbiAgICAgICAgcmV0dXJuIExpLmdldCh0KTtcbiAgICB9XG4gICAgc3RhdGljIGdldENhY2hlZE9yVGhyb3codCkge1xuICAgICAgICBjb25zdCBlID0gQ29udHJvbGxlci5nZXRDYWNoZWQodCk7XG4gICAgICAgIGlmICh2b2lkIDAgPT09IGUpIHRocm93IG5ldyBFcnJvcihgQVVSMDUwMDoke3R9YCk7XG4gICAgICAgIHJldHVybiBlO1xuICAgIH1cbiAgICBzdGF0aWMgJGVsKHQsIGUsIGksIHMsIG4gPSB2b2lkIDApIHtcbiAgICAgICAgaWYgKExpLmhhcyhlKSkgcmV0dXJuIExpLmdldChlKTtcbiAgICAgICAgbiA9IG51bGwgIT09IG4gJiYgdm9pZCAwICE9PSBuID8gbiA6IHNpLmdldERlZmluaXRpb24oZS5jb25zdHJ1Y3Rvcik7XG4gICAgICAgIGNvbnN0IHIgPSBuZXcgQ29udHJvbGxlcih0LCAwLCBuLCBudWxsLCBlLCBpKTtcbiAgICAgICAgY29uc3QgbyA9IHQuZ2V0KGIoS2kpKTtcbiAgICAgICAgaWYgKG4uZGVwZW5kZW5jaWVzLmxlbmd0aCA+IDApIHQucmVnaXN0ZXIoLi4ubi5kZXBlbmRlbmNpZXMpO1xuICAgICAgICB0LnJlZ2lzdGVyUmVzb2x2ZXIoS2ksIG5ldyB4KFwiSUh5ZHJhdGlvbkNvbnRleHRcIiwgbmV3IEh5ZHJhdGlvbkNvbnRleHQociwgcywgbykpKTtcbiAgICAgICAgTGkuc2V0KGUsIHIpO1xuICAgICAgICBpZiAobnVsbCA9PSBzIHx8IGZhbHNlICE9PSBzLmh5ZHJhdGUpIHIueHQocywgbyk7XG4gICAgICAgIHJldHVybiByO1xuICAgIH1cbiAgICBzdGF0aWMgJGF0dHIodCwgZSwgaSwgcykge1xuICAgICAgICBpZiAoTGkuaGFzKGUpKSByZXR1cm4gTGkuZ2V0KGUpO1xuICAgICAgICBzID0gbnVsbCAhPT0gcyAmJiB2b2lkIDAgIT09IHMgPyBzIDogTWUuZ2V0RGVmaW5pdGlvbihlLmNvbnN0cnVjdG9yKTtcbiAgICAgICAgY29uc3QgbiA9IG5ldyBDb250cm9sbGVyKHQsIDEsIHMsIG51bGwsIGUsIGkpO1xuICAgICAgICBMaS5zZXQoZSwgbik7XG4gICAgICAgIG4ueXQoKTtcbiAgICAgICAgcmV0dXJuIG47XG4gICAgfVxuICAgIHN0YXRpYyAkdmlldyh0LCBlID0gdm9pZCAwKSB7XG4gICAgICAgIGNvbnN0IGkgPSBuZXcgQ29udHJvbGxlcih0LmNvbnRhaW5lciwgMiwgbnVsbCwgdCwgbnVsbCwgbnVsbCk7XG4gICAgICAgIGkucGFyZW50ID0gbnVsbCAhPT0gZSAmJiB2b2lkIDAgIT09IGUgPyBlIDogbnVsbDtcbiAgICAgICAgaS5rdCgpO1xuICAgICAgICByZXR1cm4gaTtcbiAgICB9XG4gICAgeHQodCwgZSkge1xuICAgICAgICBjb25zdCBpID0gdGhpcy5jb250YWluZXI7XG4gICAgICAgIGNvbnN0IHMgPSB0aGlzLmZsYWdzO1xuICAgICAgICBjb25zdCBuID0gdGhpcy52aWV3TW9kZWw7XG4gICAgICAgIGxldCByID0gdGhpcy5kZWZpbml0aW9uO1xuICAgICAgICB0aGlzLnNjb3BlID0gVS5jcmVhdGUobiwgbnVsbCwgdHJ1ZSk7XG4gICAgICAgIGlmIChyLndhdGNoZXMubGVuZ3RoID4gMCkgX2kodGhpcywgaSwgciwgbik7XG4gICAgICAgIE1pKHRoaXMsIHIsIHMsIG4pO1xuICAgICAgICB0aGlzLnZ0ID0gVWkodGhpcywgciwgbik7XG4gICAgICAgIGlmICh0aGlzLmhvb2tzLmhhc0RlZmluZSkge1xuICAgICAgICAgICAgY29uc3QgdCA9IG4uZGVmaW5lKHRoaXMsIGUsIHIpO1xuICAgICAgICAgICAgaWYgKHZvaWQgMCAhPT0gdCAmJiB0ICE9PSByKSByID0gQ3VzdG9tRWxlbWVudERlZmluaXRpb24uZ2V0T3JDcmVhdGUodCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5saWZlY3ljbGVIb29rcyA9IGtpLnJlc29sdmUoaSk7XG4gICAgICAgIHIucmVnaXN0ZXIoaSk7XG4gICAgICAgIGlmIChudWxsICE9PSByLmluamVjdGFibGUpIGkucmVnaXN0ZXJSZXNvbHZlcihyLmluamVjdGFibGUsIG5ldyB4KFwiZGVmaW5pdGlvbi5pbmplY3RhYmxlXCIsIG4pKTtcbiAgICAgICAgaWYgKG51bGwgPT0gdCB8fCBmYWxzZSAhPT0gdC5oeWRyYXRlKSB7XG4gICAgICAgICAgICB0aGlzLkN0KHQpO1xuICAgICAgICAgICAgdGhpcy5BdCgpO1xuICAgICAgICB9XG4gICAgfVxuICAgIEN0KHQpIHtcbiAgICAgICAgaWYgKHRoaXMuaG9va3MuaGFzSHlkcmF0aW5nKSB0aGlzLnZpZXdNb2RlbC5oeWRyYXRpbmcodGhpcyk7XG4gICAgICAgIGNvbnN0IGUgPSB0aGlzLlN0ID0gdGhpcy5yLmNvbXBpbGUodGhpcy5kZWZpbml0aW9uLCB0aGlzLmNvbnRhaW5lciwgdCk7XG4gICAgICAgIGNvbnN0IHtzaGFkb3dPcHRpb25zOiBpLCBpc1N0cmljdEJpbmRpbmc6IHMsIGhhc1Nsb3RzOiBuLCBjb250YWluZXJsZXNzOiByfSA9IGU7XG4gICAgICAgIHRoaXMuaXNTdHJpY3RCaW5kaW5nID0gcztcbiAgICAgICAgaWYgKG51bGwgIT09ICh0aGlzLmhvc3RDb250cm9sbGVyID0gc2kuZm9yKHRoaXMuaG9zdCwgJGkpKSkgdGhpcy5ob3N0ID0gdGhpcy5jb250YWluZXIucm9vdC5nZXQoS3QpLmRvY3VtZW50LmNyZWF0ZUVsZW1lbnQodGhpcy5kZWZpbml0aW9uLm5hbWUpO1xuICAgICAgICBzcyh0aGlzLmhvc3QsIHNpLm5hbWUsIHRoaXMpO1xuICAgICAgICBzcyh0aGlzLmhvc3QsIHRoaXMuZGVmaW5pdGlvbi5rZXksIHRoaXMpO1xuICAgICAgICBpZiAobnVsbCAhPT0gaSB8fCBuKSB7XG4gICAgICAgICAgICBpZiAocikgdGhyb3cgbmV3IEVycm9yKFwiQVVSMDUwMVwiKTtcbiAgICAgICAgICAgIHNzKHRoaXMuc2hhZG93Um9vdCA9IHRoaXMuaG9zdC5hdHRhY2hTaGFkb3cobnVsbCAhPT0gaSAmJiB2b2lkIDAgIT09IGkgPyBpIDogV2kpLCBzaS5uYW1lLCB0aGlzKTtcbiAgICAgICAgICAgIHNzKHRoaXMuc2hhZG93Um9vdCwgdGhpcy5kZWZpbml0aW9uLmtleSwgdGhpcyk7XG4gICAgICAgICAgICB0aGlzLm1vdW50VGFyZ2V0ID0gMjtcbiAgICAgICAgfSBlbHNlIGlmIChyKSB7XG4gICAgICAgICAgICBzcyh0aGlzLmxvY2F0aW9uID0gdXModGhpcy5ob3N0KSwgc2kubmFtZSwgdGhpcyk7XG4gICAgICAgICAgICBzcyh0aGlzLmxvY2F0aW9uLCB0aGlzLmRlZmluaXRpb24ua2V5LCB0aGlzKTtcbiAgICAgICAgICAgIHRoaXMubW91bnRUYXJnZXQgPSAzO1xuICAgICAgICB9IGVsc2UgdGhpcy5tb3VudFRhcmdldCA9IDE7XG4gICAgICAgIHRoaXMudmlld01vZGVsLiRjb250cm9sbGVyID0gdGhpcztcbiAgICAgICAgdGhpcy5ub2RlcyA9IHRoaXMuci5jcmVhdGVOb2RlcyhlKTtcbiAgICAgICAgaWYgKHRoaXMuaG9va3MuaGFzSHlkcmF0ZWQpIHRoaXMudmlld01vZGVsLmh5ZHJhdGVkKHRoaXMpO1xuICAgIH1cbiAgICBBdCgpIHtcbiAgICAgICAgdGhpcy5yLnJlbmRlcih0aGlzLCB0aGlzLm5vZGVzLmZpbmRUYXJnZXRzKCksIHRoaXMuU3QsIHRoaXMuaG9zdCk7XG4gICAgICAgIGlmICh0aGlzLmhvb2tzLmhhc0NyZWF0ZWQpIHRoaXMudmlld01vZGVsLmNyZWF0ZWQodGhpcyk7XG4gICAgfVxuICAgIHl0KCkge1xuICAgICAgICBjb25zdCB0ID0gdGhpcy5kZWZpbml0aW9uO1xuICAgICAgICBjb25zdCBlID0gdGhpcy52aWV3TW9kZWw7XG4gICAgICAgIGlmICh0LndhdGNoZXMubGVuZ3RoID4gMCkgX2kodGhpcywgdGhpcy5jb250YWluZXIsIHQsIGUpO1xuICAgICAgICBNaSh0aGlzLCB0LCB0aGlzLmZsYWdzLCBlKTtcbiAgICAgICAgZS4kY29udHJvbGxlciA9IHRoaXM7XG4gICAgICAgIHRoaXMubGlmZWN5Y2xlSG9va3MgPSBraS5yZXNvbHZlKHRoaXMuY29udGFpbmVyKTtcbiAgICAgICAgaWYgKHRoaXMuaG9va3MuaGFzQ3JlYXRlZCkgdGhpcy52aWV3TW9kZWwuY3JlYXRlZCh0aGlzKTtcbiAgICB9XG4gICAga3QoKSB7XG4gICAgICAgIHRoaXMuU3QgPSB0aGlzLnIuY29tcGlsZSh0aGlzLnZpZXdGYWN0b3J5LmRlZiwgdGhpcy5jb250YWluZXIsIG51bGwpO1xuICAgICAgICB0aGlzLmlzU3RyaWN0QmluZGluZyA9IHRoaXMuU3QuaXNTdHJpY3RCaW5kaW5nO1xuICAgICAgICB0aGlzLnIucmVuZGVyKHRoaXMsICh0aGlzLm5vZGVzID0gdGhpcy5yLmNyZWF0ZU5vZGVzKHRoaXMuU3QpKS5maW5kVGFyZ2V0cygpLCB0aGlzLlN0LCB2b2lkIDApO1xuICAgIH1cbiAgICBhY3RpdmF0ZSh0LCBlLCBpLCBzKSB7XG4gICAgICAgIHN3aXRjaCAodGhpcy5zdGF0ZSkge1xuICAgICAgICAgIGNhc2UgMDpcbiAgICAgICAgICBjYXNlIDg6XG4gICAgICAgICAgICBpZiAoIShudWxsID09PSBlIHx8IGUuaXNBY3RpdmUpKSByZXR1cm47XG4gICAgICAgICAgICB0aGlzLnN0YXRlID0gMTtcbiAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgcmV0dXJuO1xuXG4gICAgICAgICAgY2FzZSAzMjpcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgQVVSMDUwMjoke3RoaXMubmFtZX1gKTtcblxuICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEFVUjA1MDM6JHt0aGlzLm5hbWV9ICR7R2kodGhpcy5zdGF0ZSl9YCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5wYXJlbnQgPSBlO1xuICAgICAgICBpIHw9IDI7XG4gICAgICAgIHN3aXRjaCAodGhpcy52bUtpbmQpIHtcbiAgICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgICB0aGlzLnNjb3BlLnBhcmVudFNjb3BlID0gbnVsbCAhPT0gcyAmJiB2b2lkIDAgIT09IHMgPyBzIDogbnVsbDtcbiAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgdGhpcy5zY29wZSA9IG51bGwgIT09IHMgJiYgdm9pZCAwICE9PSBzID8gcyA6IG51bGw7XG4gICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgIGlmICh2b2lkIDAgPT09IHMgfHwgbnVsbCA9PT0gcykgdGhyb3cgbmV3IEVycm9yKFwiQVVSMDUwNFwiKTtcbiAgICAgICAgICAgIGlmICghdGhpcy5oYXNMb2NrZWRTY29wZSkgdGhpcy5zY29wZSA9IHM7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5pc1N0cmljdEJpbmRpbmcpIGkgfD0gMTtcbiAgICAgICAgdGhpcy4kaW5pdGlhdG9yID0gdDtcbiAgICAgICAgdGhpcy4kZmxhZ3MgPSBpO1xuICAgICAgICB0aGlzLlJ0KCk7XG4gICAgICAgIGlmICh0aGlzLmhvb2tzLmhhc0JpbmRpbmcpIHtcbiAgICAgICAgICAgIGNvbnN0IHQgPSB0aGlzLnZpZXdNb2RlbC5iaW5kaW5nKHRoaXMuJGluaXRpYXRvciwgdGhpcy5wYXJlbnQsIHRoaXMuJGZsYWdzKTtcbiAgICAgICAgICAgIGlmICh0IGluc3RhbmNlb2YgUHJvbWlzZSkge1xuICAgICAgICAgICAgICAgIHRoaXMuRXQoKTtcbiAgICAgICAgICAgICAgICB0LnRoZW4oKCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5iaW5kKCk7XG4gICAgICAgICAgICAgICAgfSkpLmNhdGNoKCh0ID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5CdCh0KTtcbiAgICAgICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuJHByb21pc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5iaW5kKCk7XG4gICAgICAgIHJldHVybiB0aGlzLiRwcm9taXNlO1xuICAgIH1cbiAgICBiaW5kKCkge1xuICAgICAgICBsZXQgdCA9IDA7XG4gICAgICAgIGxldCBlID0gdGhpcy52dC5sZW5ndGg7XG4gICAgICAgIGxldCBpO1xuICAgICAgICBpZiAoZSA+IDApIHdoaWxlIChlID4gdCkge1xuICAgICAgICAgICAgdGhpcy52dFt0XS5zdGFydCgpO1xuICAgICAgICAgICAgKyt0O1xuICAgICAgICB9XG4gICAgICAgIGlmIChudWxsICE9PSB0aGlzLmJpbmRpbmdzKSB7XG4gICAgICAgICAgICB0ID0gMDtcbiAgICAgICAgICAgIGUgPSB0aGlzLmJpbmRpbmdzLmxlbmd0aDtcbiAgICAgICAgICAgIHdoaWxlIChlID4gdCkge1xuICAgICAgICAgICAgICAgIHRoaXMuYmluZGluZ3NbdF0uJGJpbmQodGhpcy4kZmxhZ3MsIHRoaXMuc2NvcGUpO1xuICAgICAgICAgICAgICAgICsrdDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5ob29rcy5oYXNCb3VuZCkge1xuICAgICAgICAgICAgaSA9IHRoaXMudmlld01vZGVsLmJvdW5kKHRoaXMuJGluaXRpYXRvciwgdGhpcy5wYXJlbnQsIHRoaXMuJGZsYWdzKTtcbiAgICAgICAgICAgIGlmIChpIGluc3RhbmNlb2YgUHJvbWlzZSkge1xuICAgICAgICAgICAgICAgIHRoaXMuRXQoKTtcbiAgICAgICAgICAgICAgICBpLnRoZW4oKCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5pc0JvdW5kID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5JdCgpO1xuICAgICAgICAgICAgICAgIH0pKS5jYXRjaCgodCA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuQnQodCk7XG4gICAgICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB0aGlzLmlzQm91bmQgPSB0cnVlO1xuICAgICAgICB0aGlzLkl0KCk7XG4gICAgfVxuICAgIFR0KC4uLnQpIHtcbiAgICAgICAgc3dpdGNoICh0aGlzLm1vdW50VGFyZ2V0KSB7XG4gICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgdGhpcy5ob3N0LmFwcGVuZCguLi50KTtcbiAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgdGhpcy5zaGFkb3dSb290LmFwcGVuZCguLi50KTtcbiAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgY2FzZSAzOlxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGxldCBlID0gMDtcbiAgICAgICAgICAgICAgICBmb3IgKDtlIDwgdC5sZW5ndGg7ICsrZSkgdGhpcy5sb2NhdGlvbi5wYXJlbnROb2RlLmluc2VydEJlZm9yZSh0W2VdLCB0aGlzLmxvY2F0aW9uKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBJdCgpIHtcbiAgICAgICAgaWYgKG51bGwgIT09IHRoaXMuaG9zdENvbnRyb2xsZXIpIHN3aXRjaCAodGhpcy5tb3VudFRhcmdldCkge1xuICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgICB0aGlzLmhvc3RDb250cm9sbGVyLlR0KHRoaXMuaG9zdCk7XG4gICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgIGNhc2UgMzpcbiAgICAgICAgICAgIHRoaXMuaG9zdENvbnRyb2xsZXIuVHQodGhpcy5sb2NhdGlvbi4kc3RhcnQsIHRoaXMubG9jYXRpb24pO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgc3dpdGNoICh0aGlzLm1vdW50VGFyZ2V0KSB7XG4gICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgdGhpcy5ub2Rlcy5hcHBlbmRUbyh0aGlzLmhvc3QsIG51bGwgIT0gdGhpcy5kZWZpbml0aW9uICYmIHRoaXMuZGVmaW5pdGlvbi5lbmhhbmNlKTtcbiAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGNvbnN0IHQgPSB0aGlzLmNvbnRhaW5lcjtcbiAgICAgICAgICAgICAgICBjb25zdCBlID0gdC5oYXMoZmksIGZhbHNlKSA/IHQuZ2V0KGZpKSA6IHQuZ2V0KGRpKTtcbiAgICAgICAgICAgICAgICBlLmFwcGx5VG8odGhpcy5zaGFkb3dSb290KTtcbiAgICAgICAgICAgICAgICB0aGlzLm5vZGVzLmFwcGVuZFRvKHRoaXMuc2hhZG93Um9vdCk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICBjYXNlIDM6XG4gICAgICAgICAgICB0aGlzLm5vZGVzLmluc2VydEJlZm9yZSh0aGlzLmxvY2F0aW9uKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLmhvb2tzLmhhc0F0dGFjaGluZykge1xuICAgICAgICAgICAgY29uc3QgdCA9IHRoaXMudmlld01vZGVsLmF0dGFjaGluZyh0aGlzLiRpbml0aWF0b3IsIHRoaXMucGFyZW50LCB0aGlzLiRmbGFncyk7XG4gICAgICAgICAgICBpZiAodCBpbnN0YW5jZW9mIFByb21pc2UpIHtcbiAgICAgICAgICAgICAgICB0aGlzLkV0KCk7XG4gICAgICAgICAgICAgICAgdGhpcy5SdCgpO1xuICAgICAgICAgICAgICAgIHQudGhlbigoKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLkR0KCk7XG4gICAgICAgICAgICAgICAgfSkpLmNhdGNoKCh0ID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5CdCh0KTtcbiAgICAgICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG51bGwgIT09IHRoaXMuY2hpbGRyZW4pIHtcbiAgICAgICAgICAgIGxldCB0ID0gMDtcbiAgICAgICAgICAgIGZvciAoO3QgPCB0aGlzLmNoaWxkcmVuLmxlbmd0aDsgKyt0KSB2b2lkIHRoaXMuY2hpbGRyZW5bdF0uYWN0aXZhdGUodGhpcy4kaW5pdGlhdG9yLCB0aGlzLCB0aGlzLiRmbGFncywgdGhpcy5zY29wZSk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5EdCgpO1xuICAgIH1cbiAgICBkZWFjdGl2YXRlKHQsIGUsIGkpIHtcbiAgICAgICAgc3dpdGNoICh+MTYgJiB0aGlzLnN0YXRlKSB7XG4gICAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgdGhpcy5zdGF0ZSA9IDQ7XG4gICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgIGNhc2UgMDpcbiAgICAgICAgICBjYXNlIDg6XG4gICAgICAgICAgY2FzZSAzMjpcbiAgICAgICAgICBjYXNlIDggfCAzMjpcbiAgICAgICAgICAgIHJldHVybjtcblxuICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEFVUjA1MDU6JHt0aGlzLm5hbWV9ICR7R2kodGhpcy5zdGF0ZSl9YCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy4kaW5pdGlhdG9yID0gdDtcbiAgICAgICAgdGhpcy4kZmxhZ3MgPSBpO1xuICAgICAgICBpZiAodCA9PT0gdGhpcykgdGhpcy5QdCgpO1xuICAgICAgICBsZXQgcyA9IDA7XG4gICAgICAgIGlmICh0aGlzLnZ0Lmxlbmd0aCkgZm9yICg7cyA8IHRoaXMudnQubGVuZ3RoOyArK3MpIHRoaXMudnRbc10uc3RvcCgpO1xuICAgICAgICBpZiAobnVsbCAhPT0gdGhpcy5jaGlsZHJlbikgZm9yIChzID0gMDsgcyA8IHRoaXMuY2hpbGRyZW4ubGVuZ3RoOyArK3MpIHZvaWQgdGhpcy5jaGlsZHJlbltzXS5kZWFjdGl2YXRlKHQsIHRoaXMsIGkpO1xuICAgICAgICBpZiAodGhpcy5ob29rcy5oYXNEZXRhY2hpbmcpIHtcbiAgICAgICAgICAgIGNvbnN0IGUgPSB0aGlzLnZpZXdNb2RlbC5kZXRhY2hpbmcodGhpcy4kaW5pdGlhdG9yLCB0aGlzLnBhcmVudCwgdGhpcy4kZmxhZ3MpO1xuICAgICAgICAgICAgaWYgKGUgaW5zdGFuY2VvZiBQcm9taXNlKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5FdCgpO1xuICAgICAgICAgICAgICAgIHQuUHQoKTtcbiAgICAgICAgICAgICAgICBlLnRoZW4oKCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdC5PdCgpO1xuICAgICAgICAgICAgICAgIH0pKS5jYXRjaCgoZSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHQuQnQoZSk7XG4gICAgICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChudWxsID09PSB0LmhlYWQpIHQuaGVhZCA9IHRoaXM7IGVsc2UgdC50YWlsLm5leHQgPSB0aGlzO1xuICAgICAgICB0LnRhaWwgPSB0aGlzO1xuICAgICAgICBpZiAodCAhPT0gdGhpcykgcmV0dXJuO1xuICAgICAgICB0aGlzLk90KCk7XG4gICAgICAgIHJldHVybiB0aGlzLiRwcm9taXNlO1xuICAgIH1cbiAgICByZW1vdmVOb2RlcygpIHtcbiAgICAgICAgc3dpdGNoICh0aGlzLnZtS2luZCkge1xuICAgICAgICAgIGNhc2UgMDpcbiAgICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgICB0aGlzLm5vZGVzLnJlbW92ZSgpO1xuICAgICAgICAgICAgdGhpcy5ub2Rlcy51bmxpbmsoKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobnVsbCAhPT0gdGhpcy5ob3N0Q29udHJvbGxlcikgc3dpdGNoICh0aGlzLm1vdW50VGFyZ2V0KSB7XG4gICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgIHRoaXMuaG9zdC5yZW1vdmUoKTtcbiAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgY2FzZSAzOlxuICAgICAgICAgICAgdGhpcy5sb2NhdGlvbi4kc3RhcnQucmVtb3ZlKCk7XG4gICAgICAgICAgICB0aGlzLmxvY2F0aW9uLnJlbW92ZSgpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICB9XG4gICAgdW5iaW5kKCkge1xuICAgICAgICBjb25zdCB0ID0gNCB8IHRoaXMuJGZsYWdzO1xuICAgICAgICBsZXQgZSA9IDA7XG4gICAgICAgIGlmIChudWxsICE9PSB0aGlzLmJpbmRpbmdzKSBmb3IgKDtlIDwgdGhpcy5iaW5kaW5ncy5sZW5ndGg7ICsrZSkgdGhpcy5iaW5kaW5nc1tlXS4kdW5iaW5kKHQpO1xuICAgICAgICB0aGlzLnBhcmVudCA9IG51bGw7XG4gICAgICAgIHN3aXRjaCAodGhpcy52bUtpbmQpIHtcbiAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICB0aGlzLnNjb3BlID0gbnVsbDtcbiAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgaWYgKCF0aGlzLmhhc0xvY2tlZFNjb3BlKSB0aGlzLnNjb3BlID0gbnVsbDtcbiAgICAgICAgICAgIGlmICgxNiA9PT0gKDE2ICYgdGhpcy5zdGF0ZSkgJiYgIXRoaXMudmlld0ZhY3RvcnkudHJ5UmV0dXJuVG9DYWNoZSh0aGlzKSAmJiB0aGlzLiRpbml0aWF0b3IgPT09IHRoaXMpIHRoaXMuZGlzcG9zZSgpO1xuICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgICB0aGlzLnNjb3BlLnBhcmVudFNjb3BlID0gbnVsbDtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIGlmICgzMiA9PT0gKDMyICYgdCkgJiYgdGhpcy4kaW5pdGlhdG9yID09PSB0aGlzKSB0aGlzLmRpc3Bvc2UoKTtcbiAgICAgICAgdGhpcy5zdGF0ZSA9IDMyICYgdGhpcy5zdGF0ZSB8IDg7XG4gICAgICAgIHRoaXMuJGluaXRpYXRvciA9IG51bGw7XG4gICAgICAgIHRoaXMuJHQoKTtcbiAgICB9XG4gICAgRXQoKSB7XG4gICAgICAgIGlmICh2b2lkIDAgPT09IHRoaXMuJHByb21pc2UpIHtcbiAgICAgICAgICAgIHRoaXMuJHByb21pc2UgPSBuZXcgUHJvbWlzZSgoKHQsIGUpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLiRyZXNvbHZlID0gdDtcbiAgICAgICAgICAgICAgICB0aGlzLiRyZWplY3QgPSBlO1xuICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgaWYgKHRoaXMuJGluaXRpYXRvciAhPT0gdGhpcykgdGhpcy5wYXJlbnQuRXQoKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAkdCgpIHtcbiAgICAgICAgaWYgKHZvaWQgMCAhPT0gdGhpcy4kcHJvbWlzZSkge1xuICAgICAgICAgICAgUWkgPSB0aGlzLiRyZXNvbHZlO1xuICAgICAgICAgICAgdGhpcy4kcmVzb2x2ZSA9IHRoaXMuJHJlamVjdCA9IHRoaXMuJHByb21pc2UgPSB2b2lkIDA7XG4gICAgICAgICAgICBRaSgpO1xuICAgICAgICAgICAgUWkgPSB2b2lkIDA7XG4gICAgICAgIH1cbiAgICB9XG4gICAgQnQodCkge1xuICAgICAgICBpZiAodm9pZCAwICE9PSB0aGlzLiRwcm9taXNlKSB7XG4gICAgICAgICAgICBaaSA9IHRoaXMuJHJlamVjdDtcbiAgICAgICAgICAgIHRoaXMuJHJlc29sdmUgPSB0aGlzLiRyZWplY3QgPSB0aGlzLiRwcm9taXNlID0gdm9pZCAwO1xuICAgICAgICAgICAgWmkodCk7XG4gICAgICAgICAgICBaaSA9IHZvaWQgMDtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy4kaW5pdGlhdG9yICE9PSB0aGlzKSB0aGlzLnBhcmVudC5CdCh0KTtcbiAgICB9XG4gICAgUnQoKSB7XG4gICAgICAgICsrdGhpcy5ndDtcbiAgICAgICAgaWYgKHRoaXMuJGluaXRpYXRvciAhPT0gdGhpcykgdGhpcy5wYXJlbnQuUnQoKTtcbiAgICB9XG4gICAgRHQoKSB7XG4gICAgICAgIGlmICgwID09PSAtLXRoaXMuZ3QpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLmhvb2tzLmhhc0F0dGFjaGVkKSB7XG4gICAgICAgICAgICAgICAgSmkgPSB0aGlzLnZpZXdNb2RlbC5hdHRhY2hlZCh0aGlzLiRpbml0aWF0b3IsIHRoaXMuJGZsYWdzKTtcbiAgICAgICAgICAgICAgICBpZiAoSmkgaW5zdGFuY2VvZiBQcm9taXNlKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuRXQoKTtcbiAgICAgICAgICAgICAgICAgICAgSmkudGhlbigoKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zdGF0ZSA9IDI7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLiR0KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy4kaW5pdGlhdG9yICE9PSB0aGlzKSB0aGlzLnBhcmVudC5EdCgpO1xuICAgICAgICAgICAgICAgICAgICB9KSkuY2F0Y2goKHQgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5CdCh0KTtcbiAgICAgICAgICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgICAgICAgICBKaSA9IHZvaWQgMDtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBKaSA9IHZvaWQgMDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuc3RhdGUgPSAyO1xuICAgICAgICAgICAgdGhpcy4kdCgpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLiRpbml0aWF0b3IgIT09IHRoaXMpIHRoaXMucGFyZW50LkR0KCk7XG4gICAgfVxuICAgIFB0KCkge1xuICAgICAgICArK3RoaXMud3Q7XG4gICAgfVxuICAgIE90KCkge1xuICAgICAgICBpZiAoMCA9PT0gLS10aGlzLnd0KSB7XG4gICAgICAgICAgICB0aGlzLkx0KCk7XG4gICAgICAgICAgICB0aGlzLnJlbW92ZU5vZGVzKCk7XG4gICAgICAgICAgICBsZXQgdCA9IHRoaXMuJGluaXRpYXRvci5oZWFkO1xuICAgICAgICAgICAgd2hpbGUgKG51bGwgIT09IHQpIHtcbiAgICAgICAgICAgICAgICBpZiAodCAhPT0gdGhpcykge1xuICAgICAgICAgICAgICAgICAgICBpZiAodC5kZWJ1ZykgdC5sb2dnZXIudHJhY2UoYGRldGFjaCgpYCk7XG4gICAgICAgICAgICAgICAgICAgIHQucmVtb3ZlTm9kZXMoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHQuaG9va3MuaGFzVW5iaW5kaW5nKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0LmRlYnVnKSB0LmxvZ2dlci50cmFjZShcInVuYmluZGluZygpXCIpO1xuICAgICAgICAgICAgICAgICAgICBKaSA9IHQudmlld01vZGVsLnVuYmluZGluZyh0LiRpbml0aWF0b3IsIHQucGFyZW50LCB0LiRmbGFncyk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChKaSBpbnN0YW5jZW9mIFByb21pc2UpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuRXQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuTHQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIEppLnRoZW4oKCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnF0KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KSkuY2F0Y2goKHQgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuQnQodCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgSmkgPSB2b2lkIDA7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHQgPSB0Lm5leHQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnF0KCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgTHQoKSB7XG4gICAgICAgICsrdGhpcy5idDtcbiAgICB9XG4gICAgcXQoKSB7XG4gICAgICAgIGlmICgwID09PSAtLXRoaXMuYnQpIHtcbiAgICAgICAgICAgIGxldCB0ID0gdGhpcy4kaW5pdGlhdG9yLmhlYWQ7XG4gICAgICAgICAgICBsZXQgZSA9IG51bGw7XG4gICAgICAgICAgICB3aGlsZSAobnVsbCAhPT0gdCkge1xuICAgICAgICAgICAgICAgIGlmICh0ICE9PSB0aGlzKSB7XG4gICAgICAgICAgICAgICAgICAgIHQuaXNCb3VuZCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICB0LnVuYmluZCgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlID0gdC5uZXh0O1xuICAgICAgICAgICAgICAgIHQubmV4dCA9IG51bGw7XG4gICAgICAgICAgICAgICAgdCA9IGU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmhlYWQgPSB0aGlzLnRhaWwgPSBudWxsO1xuICAgICAgICAgICAgdGhpcy5pc0JvdW5kID0gZmFsc2U7XG4gICAgICAgICAgICB0aGlzLnVuYmluZCgpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGFkZEJpbmRpbmcodCkge1xuICAgICAgICBpZiAobnVsbCA9PT0gdGhpcy5iaW5kaW5ncykgdGhpcy5iaW5kaW5ncyA9IFsgdCBdOyBlbHNlIHRoaXMuYmluZGluZ3NbdGhpcy5iaW5kaW5ncy5sZW5ndGhdID0gdDtcbiAgICB9XG4gICAgYWRkQ2hpbGQodCkge1xuICAgICAgICBpZiAobnVsbCA9PT0gdGhpcy5jaGlsZHJlbikgdGhpcy5jaGlsZHJlbiA9IFsgdCBdOyBlbHNlIHRoaXMuY2hpbGRyZW5bdGhpcy5jaGlsZHJlbi5sZW5ndGhdID0gdDtcbiAgICB9XG4gICAgaXModCkge1xuICAgICAgICBzd2l0Y2ggKHRoaXMudm1LaW5kKSB7XG4gICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgcmV0dXJuIE1lLmdldERlZmluaXRpb24odGhpcy52aWV3TW9kZWwuY29uc3RydWN0b3IpLm5hbWUgPT09IHQ7XG5cbiAgICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgICByZXR1cm4gc2kuZ2V0RGVmaW5pdGlvbih0aGlzLnZpZXdNb2RlbC5jb25zdHJ1Y3RvcikubmFtZSA9PT0gdDtcblxuICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnZpZXdGYWN0b3J5Lm5hbWUgPT09IHQ7XG4gICAgICAgIH1cbiAgICB9XG4gICAgbG9ja1Njb3BlKHQpIHtcbiAgICAgICAgdGhpcy5zY29wZSA9IHQ7XG4gICAgICAgIHRoaXMuaGFzTG9ja2VkU2NvcGUgPSB0cnVlO1xuICAgIH1cbiAgICBzZXRIb3N0KHQpIHtcbiAgICAgICAgaWYgKDAgPT09IHRoaXMudm1LaW5kKSB7XG4gICAgICAgICAgICBzcyh0LCBzaS5uYW1lLCB0aGlzKTtcbiAgICAgICAgICAgIHNzKHQsIHRoaXMuZGVmaW5pdGlvbi5rZXksIHRoaXMpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuaG9zdCA9IHQ7XG4gICAgICAgIHRoaXMubW91bnRUYXJnZXQgPSAxO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgc2V0U2hhZG93Um9vdCh0KSB7XG4gICAgICAgIGlmICgwID09PSB0aGlzLnZtS2luZCkge1xuICAgICAgICAgICAgc3ModCwgc2kubmFtZSwgdGhpcyk7XG4gICAgICAgICAgICBzcyh0LCB0aGlzLmRlZmluaXRpb24ua2V5LCB0aGlzKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnNoYWRvd1Jvb3QgPSB0O1xuICAgICAgICB0aGlzLm1vdW50VGFyZ2V0ID0gMjtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIHNldExvY2F0aW9uKHQpIHtcbiAgICAgICAgaWYgKDAgPT09IHRoaXMudm1LaW5kKSB7XG4gICAgICAgICAgICBzcyh0LCBzaS5uYW1lLCB0aGlzKTtcbiAgICAgICAgICAgIHNzKHQsIHRoaXMuZGVmaW5pdGlvbi5rZXksIHRoaXMpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMubG9jYXRpb24gPSB0O1xuICAgICAgICB0aGlzLm1vdW50VGFyZ2V0ID0gMztcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIHJlbGVhc2UoKSB7XG4gICAgICAgIHRoaXMuc3RhdGUgfD0gMTY7XG4gICAgfVxuICAgIGRpc3Bvc2UoKSB7XG4gICAgICAgIGlmICgzMiA9PT0gKDMyICYgdGhpcy5zdGF0ZSkpIHJldHVybjtcbiAgICAgICAgdGhpcy5zdGF0ZSB8PSAzMjtcbiAgICAgICAgaWYgKHRoaXMuaG9va3MuaGFzRGlzcG9zZSkgdGhpcy52aWV3TW9kZWwuZGlzcG9zZSgpO1xuICAgICAgICBpZiAobnVsbCAhPT0gdGhpcy5jaGlsZHJlbikge1xuICAgICAgICAgICAgdGhpcy5jaGlsZHJlbi5mb3JFYWNoKFlpKTtcbiAgICAgICAgICAgIHRoaXMuY2hpbGRyZW4gPSBudWxsO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuaG9zdENvbnRyb2xsZXIgPSBudWxsO1xuICAgICAgICB0aGlzLnNjb3BlID0gbnVsbDtcbiAgICAgICAgdGhpcy5ub2RlcyA9IG51bGw7XG4gICAgICAgIHRoaXMubG9jYXRpb24gPSBudWxsO1xuICAgICAgICB0aGlzLnZpZXdGYWN0b3J5ID0gbnVsbDtcbiAgICAgICAgaWYgKG51bGwgIT09IHRoaXMudmlld01vZGVsKSB7XG4gICAgICAgICAgICBMaS5kZWxldGUodGhpcy52aWV3TW9kZWwpO1xuICAgICAgICAgICAgdGhpcy52aWV3TW9kZWwgPSBudWxsO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMudmlld01vZGVsID0gbnVsbDtcbiAgICAgICAgdGhpcy5ob3N0ID0gbnVsbDtcbiAgICAgICAgdGhpcy5zaGFkb3dSb290ID0gbnVsbDtcbiAgICAgICAgdGhpcy5jb250YWluZXIuZGlzcG9zZVJlc29sdmVycygpO1xuICAgIH1cbiAgICBhY2NlcHQodCkge1xuICAgICAgICBpZiAodHJ1ZSA9PT0gdCh0aGlzKSkgcmV0dXJuIHRydWU7XG4gICAgICAgIGlmICh0aGlzLmhvb2tzLmhhc0FjY2VwdCAmJiB0cnVlID09PSB0aGlzLnZpZXdNb2RlbC5hY2NlcHQodCkpIHJldHVybiB0cnVlO1xuICAgICAgICBpZiAobnVsbCAhPT0gdGhpcy5jaGlsZHJlbikge1xuICAgICAgICAgICAgY29uc3Qge2NoaWxkcmVuOiBlfSA9IHRoaXM7XG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMCwgcyA9IGUubGVuZ3RoOyBpIDwgczsgKytpKSBpZiAodHJ1ZSA9PT0gZVtpXS5hY2NlcHQodCkpIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgfVxufVxuXG5mdW5jdGlvbiBxaSh0KSB7XG4gICAgbGV0IGUgPSB0LiRvYnNlcnZlcnM7XG4gICAgaWYgKHZvaWQgMCA9PT0gZSkgUmVmbGVjdC5kZWZpbmVQcm9wZXJ0eSh0LCBcIiRvYnNlcnZlcnNcIiwge1xuICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgICAgdmFsdWU6IGUgPSB7fVxuICAgIH0pO1xuICAgIHJldHVybiBlO1xufVxuXG5mdW5jdGlvbiBNaSh0LCBlLCBpLCBzKSB7XG4gICAgY29uc3QgbiA9IGUuYmluZGFibGVzO1xuICAgIGNvbnN0IHIgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyhuKTtcbiAgICBjb25zdCBvID0gci5sZW5ndGg7XG4gICAgaWYgKG8gPiAwKSB7XG4gICAgICAgIGxldCBlO1xuICAgICAgICBsZXQgaTtcbiAgICAgICAgbGV0IGwgPSAwO1xuICAgICAgICBjb25zdCBoID0gcWkocyk7XG4gICAgICAgIGNvbnN0IGEgPSB0LmNvbnRhaW5lcjtcbiAgICAgICAgY29uc3QgYyA9IGEuaGFzKEYsIHRydWUpID8gYS5nZXQoRikgOiBudWxsO1xuICAgICAgICBmb3IgKDtsIDwgbzsgKytsKSB7XG4gICAgICAgICAgICBlID0gcltsXTtcbiAgICAgICAgICAgIGlmICh2b2lkIDAgPT09IGhbZV0pIHtcbiAgICAgICAgICAgICAgICBpID0gbltlXTtcbiAgICAgICAgICAgICAgICBoW2VdID0gbmV3IEJpbmRhYmxlT2JzZXJ2ZXIocywgZSwgaS5jYWxsYmFjaywgaS5zZXQsIHQsIGMpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxufVxuXG5mdW5jdGlvbiBVaSh0LCBlLCBpKSB7XG4gICAgY29uc3QgcyA9IGUuY2hpbGRyZW5PYnNlcnZlcnM7XG4gICAgY29uc3QgbiA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKHMpO1xuICAgIGNvbnN0IHIgPSBuLmxlbmd0aDtcbiAgICBpZiAociA+IDApIHtcbiAgICAgICAgY29uc3QgZSA9IHFpKGkpO1xuICAgICAgICBjb25zdCBvID0gW107XG4gICAgICAgIGxldCBsO1xuICAgICAgICBsZXQgaCA9IDA7XG4gICAgICAgIGxldCBhO1xuICAgICAgICBmb3IgKDtoIDwgcjsgKytoKSB7XG4gICAgICAgICAgICBsID0gbltoXTtcbiAgICAgICAgICAgIGlmICh2b2lkIDAgPT0gZVtsXSkge1xuICAgICAgICAgICAgICAgIGEgPSBzW2xdO1xuICAgICAgICAgICAgICAgIG9bby5sZW5ndGhdID0gZVtsXSA9IG5ldyBDaGlsZHJlbk9ic2VydmVyKHQsIGksIGwsIGEuY2FsbGJhY2ssIGEucXVlcnksIGEuZmlsdGVyLCBhLm1hcCwgYS5vcHRpb25zKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbztcbiAgICB9XG4gICAgcmV0dXJuIGg7XG59XG5cbmNvbnN0IEZpID0gbmV3IE1hcDtcblxuY29uc3QgVmkgPSB0ID0+IHtcbiAgICBsZXQgZSA9IEZpLmdldCh0KTtcbiAgICBpZiAobnVsbCA9PSBlKSB7XG4gICAgICAgIGUgPSBuZXcgaih0LCAwKTtcbiAgICAgICAgRmkuc2V0KHQsIGUpO1xuICAgIH1cbiAgICByZXR1cm4gZTtcbn07XG5cbmZ1bmN0aW9uIF9pKHQsIGUsIGksIHMpIHtcbiAgICBjb25zdCBuID0gZS5nZXQoVik7XG4gICAgY29uc3QgciA9IGUuZ2V0KF8pO1xuICAgIGNvbnN0IG8gPSBpLndhdGNoZXM7XG4gICAgY29uc3QgbCA9IDAgPT09IHQudm1LaW5kID8gdC5zY29wZSA6IFUuY3JlYXRlKHMsIG51bGwsIHRydWUpO1xuICAgIGNvbnN0IGggPSBvLmxlbmd0aDtcbiAgICBsZXQgYTtcbiAgICBsZXQgYztcbiAgICBsZXQgdTtcbiAgICBsZXQgZiA9IDA7XG4gICAgZm9yICg7aCA+IGY7ICsrZikge1xuICAgICAgICAoe2V4cHJlc3Npb246IGEsIGNhbGxiYWNrOiBjfSA9IG9bZl0pO1xuICAgICAgICBjID0gQ3QoYykgPyBjIDogUmVmbGVjdC5nZXQocywgYyk7XG4gICAgICAgIGlmICghQ3QoYykpIHRocm93IG5ldyBFcnJvcihgQVVSMDUwNjoke1N0cmluZyhjKX1gKTtcbiAgICAgICAgaWYgKEN0KGEpKSB0LmFkZEJpbmRpbmcobmV3IENvbXB1dGVkV2F0Y2hlcihzLCBuLCBhLCBjLCB0cnVlKSk7IGVsc2Uge1xuICAgICAgICAgICAgdSA9IEF0KGEpID8gci5wYXJzZShhLCA4KSA6IFZpKGEpO1xuICAgICAgICAgICAgdC5hZGRCaW5kaW5nKG5ldyBFeHByZXNzaW9uV2F0Y2hlcihsLCBlLCBuLCB1LCBjKSk7XG4gICAgICAgIH1cbiAgICB9XG59XG5cbmZ1bmN0aW9uIGppKHQpIHtcbiAgICByZXR1cm4gdCBpbnN0YW5jZW9mIENvbnRyb2xsZXIgJiYgMCA9PT0gdC52bUtpbmQ7XG59XG5cbmZ1bmN0aW9uIE5pKHQpIHtcbiAgICByZXR1cm4geSh0KSAmJiBzaS5pc1R5cGUodC5jb25zdHJ1Y3Rvcik7XG59XG5cbmNsYXNzIEhvb2tzRGVmaW5pdGlvbiB7XG4gICAgY29uc3RydWN0b3IodCkge1xuICAgICAgICB0aGlzLmhhc0RlZmluZSA9IFwiZGVmaW5lXCIgaW4gdDtcbiAgICAgICAgdGhpcy5oYXNIeWRyYXRpbmcgPSBcImh5ZHJhdGluZ1wiIGluIHQ7XG4gICAgICAgIHRoaXMuaGFzSHlkcmF0ZWQgPSBcImh5ZHJhdGVkXCIgaW4gdDtcbiAgICAgICAgdGhpcy5oYXNDcmVhdGVkID0gXCJjcmVhdGVkXCIgaW4gdDtcbiAgICAgICAgdGhpcy5oYXNCaW5kaW5nID0gXCJiaW5kaW5nXCIgaW4gdDtcbiAgICAgICAgdGhpcy5oYXNCb3VuZCA9IFwiYm91bmRcIiBpbiB0O1xuICAgICAgICB0aGlzLmhhc0F0dGFjaGluZyA9IFwiYXR0YWNoaW5nXCIgaW4gdDtcbiAgICAgICAgdGhpcy5oYXNBdHRhY2hlZCA9IFwiYXR0YWNoZWRcIiBpbiB0O1xuICAgICAgICB0aGlzLmhhc0RldGFjaGluZyA9IFwiZGV0YWNoaW5nXCIgaW4gdDtcbiAgICAgICAgdGhpcy5oYXNVbmJpbmRpbmcgPSBcInVuYmluZGluZ1wiIGluIHQ7XG4gICAgICAgIHRoaXMuaGFzRGlzcG9zZSA9IFwiZGlzcG9zZVwiIGluIHQ7XG4gICAgICAgIHRoaXMuaGFzQWNjZXB0ID0gXCJhY2NlcHRcIiBpbiB0O1xuICAgIH1cbn1cblxuSG9va3NEZWZpbml0aW9uLm5vbmUgPSBuZXcgSG9va3NEZWZpbml0aW9uKHt9KTtcblxuY29uc3QgV2kgPSB7XG4gICAgbW9kZTogXCJvcGVuXCJcbn07XG5cbnZhciBIaTtcblxuKGZ1bmN0aW9uKHQpIHtcbiAgICB0W3RbXCJjdXN0b21FbGVtZW50XCJdID0gMF0gPSBcImN1c3RvbUVsZW1lbnRcIjtcbiAgICB0W3RbXCJjdXN0b21BdHRyaWJ1dGVcIl0gPSAxXSA9IFwiY3VzdG9tQXR0cmlidXRlXCI7XG4gICAgdFt0W1wic3ludGhldGljXCJdID0gMl0gPSBcInN5bnRoZXRpY1wiO1xufSkoSGkgfHwgKEhpID0ge30pKTtcblxudmFyIHppO1xuXG4oZnVuY3Rpb24odCkge1xuICAgIHRbdFtcIm5vbmVcIl0gPSAwXSA9IFwibm9uZVwiO1xuICAgIHRbdFtcImFjdGl2YXRpbmdcIl0gPSAxXSA9IFwiYWN0aXZhdGluZ1wiO1xuICAgIHRbdFtcImFjdGl2YXRlZFwiXSA9IDJdID0gXCJhY3RpdmF0ZWRcIjtcbiAgICB0W3RbXCJkZWFjdGl2YXRpbmdcIl0gPSA0XSA9IFwiZGVhY3RpdmF0aW5nXCI7XG4gICAgdFt0W1wiZGVhY3RpdmF0ZWRcIl0gPSA4XSA9IFwiZGVhY3RpdmF0ZWRcIjtcbiAgICB0W3RbXCJyZWxlYXNlZFwiXSA9IDE2XSA9IFwicmVsZWFzZWRcIjtcbiAgICB0W3RbXCJkaXNwb3NlZFwiXSA9IDMyXSA9IFwiZGlzcG9zZWRcIjtcbn0pKHppIHx8ICh6aSA9IHt9KSk7XG5cbmZ1bmN0aW9uIEdpKHQpIHtcbiAgICBjb25zdCBlID0gW107XG4gICAgaWYgKDEgPT09ICgxICYgdCkpIGUucHVzaChcImFjdGl2YXRpbmdcIik7XG4gICAgaWYgKDIgPT09ICgyICYgdCkpIGUucHVzaChcImFjdGl2YXRlZFwiKTtcbiAgICBpZiAoNCA9PT0gKDQgJiB0KSkgZS5wdXNoKFwiZGVhY3RpdmF0aW5nXCIpO1xuICAgIGlmICg4ID09PSAoOCAmIHQpKSBlLnB1c2goXCJkZWFjdGl2YXRlZFwiKTtcbiAgICBpZiAoMTYgPT09ICgxNiAmIHQpKSBlLnB1c2goXCJyZWxlYXNlZFwiKTtcbiAgICBpZiAoMzIgPT09ICgzMiAmIHQpKSBlLnB1c2goXCJkaXNwb3NlZFwiKTtcbiAgICByZXR1cm4gMCA9PT0gZS5sZW5ndGggPyBcIm5vbmVcIiA6IGUuam9pbihcInxcIik7XG59XG5cbmNvbnN0IFhpID0gbC5jcmVhdGVJbnRlcmZhY2UoXCJJQ29udHJvbGxlclwiKTtcblxuY29uc3QgS2kgPSBsLmNyZWF0ZUludGVyZmFjZShcIklIeWRyYXRpb25Db250ZXh0XCIpO1xuXG5jbGFzcyBIeWRyYXRpb25Db250ZXh0IHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlLCBpKSB7XG4gICAgICAgIHRoaXMuaW5zdHJ1Y3Rpb24gPSBlO1xuICAgICAgICB0aGlzLnBhcmVudCA9IGk7XG4gICAgICAgIHRoaXMuY29udHJvbGxlciA9IHQ7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBZaSh0KSB7XG4gICAgdC5kaXNwb3NlKCk7XG59XG5cbmxldCBRaTtcblxubGV0IFppO1xuXG5sZXQgSmk7XG5cbmNvbnN0IHRzID0gbC5jcmVhdGVJbnRlcmZhY2UoXCJJQXBwUm9vdFwiKTtcblxuY29uc3QgZXMgPSBsLmNyZWF0ZUludGVyZmFjZShcIklXb3JrVHJhY2tlclwiLCAodCA9PiB0LnNpbmdsZXRvbihXb3JrVHJhY2tlcikpKTtcblxuY2xhc3MgV29ya1RyYWNrZXIge1xuICAgIGNvbnN0cnVjdG9yKHQpIHtcbiAgICAgICAgdGhpcy5NdCA9IDA7XG4gICAgICAgIHRoaXMuVXQgPSBudWxsO1xuICAgICAgICB0aGlzLiR0ID0gbnVsbDtcbiAgICAgICAgdGhpcy5GdCA9IHQuc2NvcGVUbyhcIldvcmtUcmFja2VyXCIpO1xuICAgIH1cbiAgICBzdGFydCgpIHtcbiAgICAgICAgdGhpcy5GdC50cmFjZShgc3RhcnQoc3RhY2s6JHt0aGlzLk10fSlgKTtcbiAgICAgICAgKyt0aGlzLk10O1xuICAgIH1cbiAgICBmaW5pc2goKSB7XG4gICAgICAgIHRoaXMuRnQudHJhY2UoYGZpbmlzaChzdGFjazoke3RoaXMuTXR9KWApO1xuICAgICAgICBpZiAoMCA9PT0gLS10aGlzLk10KSB7XG4gICAgICAgICAgICBjb25zdCB0ID0gdGhpcy4kdDtcbiAgICAgICAgICAgIGlmIChudWxsICE9PSB0KSB7XG4gICAgICAgICAgICAgICAgdGhpcy4kdCA9IHRoaXMuVXQgPSBudWxsO1xuICAgICAgICAgICAgICAgIHQoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICB3YWl0KCkge1xuICAgICAgICB0aGlzLkZ0LnRyYWNlKGB3YWl0KHN0YWNrOiR7dGhpcy5NdH0pYCk7XG4gICAgICAgIGlmIChudWxsID09PSB0aGlzLlV0KSB7XG4gICAgICAgICAgICBpZiAoMCA9PT0gdGhpcy5NdCkgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xuICAgICAgICAgICAgdGhpcy5VdCA9IG5ldyBQcm9taXNlKCh0ID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLiR0ID0gdDtcbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5VdDtcbiAgICB9XG59XG5cbldvcmtUcmFja2VyLmluamVjdCA9IFsgayBdO1xuXG5jbGFzcyBBcHBSb290IHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlLCBpLCBzKSB7XG4gICAgICAgIHRoaXMuY29uZmlnID0gdDtcbiAgICAgICAgdGhpcy5wbGF0Zm9ybSA9IGU7XG4gICAgICAgIHRoaXMuY29udGFpbmVyID0gaTtcbiAgICAgICAgdGhpcy5jb250cm9sbGVyID0gdm9pZCAwO1xuICAgICAgICB0aGlzLlZ0ID0gdm9pZCAwO1xuICAgICAgICB0aGlzLmhvc3QgPSB0Lmhvc3Q7XG4gICAgICAgIHRoaXMud29yayA9IGkuZ2V0KGVzKTtcbiAgICAgICAgcy5wcmVwYXJlKHRoaXMpO1xuICAgICAgICBpLnJlZ2lzdGVyUmVzb2x2ZXIoZS5IVE1MRWxlbWVudCwgaS5yZWdpc3RlclJlc29sdmVyKGUuRWxlbWVudCwgaS5yZWdpc3RlclJlc29sdmVyKG5zLCBuZXcgeChcIkVsZW1lbnRSZXNvbHZlclwiLCB0Lmhvc3QpKSkpO1xuICAgICAgICB0aGlzLlZ0ID0gQyh0aGlzLl90KFwiYmVmb3JlQ3JlYXRlXCIpLCAoKCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgZSA9IHQuY29tcG9uZW50O1xuICAgICAgICAgICAgY29uc3QgcyA9IGkuY3JlYXRlQ2hpbGQoKTtcbiAgICAgICAgICAgIGxldCBuO1xuICAgICAgICAgICAgaWYgKHNpLmlzVHlwZShlKSkgbiA9IHRoaXMuY29udGFpbmVyLmdldChlKTsgZWxzZSBuID0gdC5jb21wb25lbnQ7XG4gICAgICAgICAgICBjb25zdCByID0ge1xuICAgICAgICAgICAgICAgIGh5ZHJhdGU6IGZhbHNlLFxuICAgICAgICAgICAgICAgIHByb2plY3Rpb25zOiBudWxsXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgY29uc3QgbyA9IHRoaXMuY29udHJvbGxlciA9IENvbnRyb2xsZXIuJGVsKHMsIG4sIHRoaXMuaG9zdCwgcik7XG4gICAgICAgICAgICBvLnh0KHIsIG51bGwpO1xuICAgICAgICAgICAgcmV0dXJuIEModGhpcy5fdChcImh5ZHJhdGluZ1wiKSwgKCgpID0+IHtcbiAgICAgICAgICAgICAgICBvLkN0KG51bGwpO1xuICAgICAgICAgICAgICAgIHJldHVybiBDKHRoaXMuX3QoXCJoeWRyYXRlZFwiKSwgKCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgby5BdCgpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLlZ0ID0gdm9pZCAwO1xuICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICBhY3RpdmF0ZSgpIHtcbiAgICAgICAgcmV0dXJuIEModGhpcy5WdCwgKCgpID0+IEModGhpcy5fdChcImJlZm9yZUFjdGl2YXRlXCIpLCAoKCkgPT4gQyh0aGlzLmNvbnRyb2xsZXIuYWN0aXZhdGUodGhpcy5jb250cm9sbGVyLCBudWxsLCAyLCB2b2lkIDApLCAoKCkgPT4gdGhpcy5fdChcImFmdGVyQWN0aXZhdGVcIikpKSkpKSk7XG4gICAgfVxuICAgIGRlYWN0aXZhdGUoKSB7XG4gICAgICAgIHJldHVybiBDKHRoaXMuX3QoXCJiZWZvcmVEZWFjdGl2YXRlXCIpLCAoKCkgPT4gQyh0aGlzLmNvbnRyb2xsZXIuZGVhY3RpdmF0ZSh0aGlzLmNvbnRyb2xsZXIsIG51bGwsIDApLCAoKCkgPT4gdGhpcy5fdChcImFmdGVyRGVhY3RpdmF0ZVwiKSkpKSk7XG4gICAgfVxuICAgIF90KHQpIHtcbiAgICAgICAgcmV0dXJuIEEoLi4udGhpcy5jb250YWluZXIuZ2V0QWxsKGJlKS5yZWR1Y2UoKChlLCBpKSA9PiB7XG4gICAgICAgICAgICBpZiAoaS5zbG90ID09PSB0KSBlLnB1c2goaS5ydW4oKSk7XG4gICAgICAgICAgICByZXR1cm4gZTtcbiAgICAgICAgfSksIFtdKSk7XG4gICAgfVxuICAgIGRpc3Bvc2UoKSB7XG4gICAgICAgIHZhciB0O1xuICAgICAgICBudWxsID09PSAodCA9IHRoaXMuY29udHJvbGxlcikgfHwgdm9pZCAwID09PSB0ID8gdm9pZCAwIDogdC5kaXNwb3NlKCk7XG4gICAgfVxufVxuXG5jbGFzcyBSZWZzIHt9XG5cbmZ1bmN0aW9uIGlzKHQsIGUpIHtcbiAgICB2YXIgaSwgcztcbiAgICByZXR1cm4gbnVsbCAhPT0gKHMgPSBudWxsID09PSAoaSA9IHQuJGF1KSB8fCB2b2lkIDAgPT09IGkgPyB2b2lkIDAgOiBpW2VdKSAmJiB2b2lkIDAgIT09IHMgPyBzIDogbnVsbDtcbn1cblxuZnVuY3Rpb24gc3ModCwgZSwgaSkge1xuICAgIHZhciBzO1xuICAgIHZhciBuO1xuICAgIChudWxsICE9PSAocyA9IChuID0gdCkuJGF1KSAmJiB2b2lkIDAgIT09IHMgPyBzIDogbi4kYXUgPSBuZXcgUmVmcylbZV0gPSBpO1xufVxuXG5jb25zdCBucyA9IGwuY3JlYXRlSW50ZXJmYWNlKFwiSU5vZGVcIik7XG5cbmNvbnN0IHJzID0gbC5jcmVhdGVJbnRlcmZhY2UoXCJJRXZlbnRUYXJnZXRcIiwgKHQgPT4gdC5jYWNoZWRDYWxsYmFjaygodCA9PiB7XG4gICAgaWYgKHQuaGFzKHRzLCB0cnVlKSkgcmV0dXJuIHQuZ2V0KHRzKS5ob3N0O1xuICAgIHJldHVybiB0LmdldChLdCkuZG9jdW1lbnQ7XG59KSkpKTtcblxuY29uc3Qgb3MgPSBsLmNyZWF0ZUludGVyZmFjZShcIklSZW5kZXJMb2NhdGlvblwiKTtcblxudmFyIGxzO1xuXG4oZnVuY3Rpb24odCkge1xuICAgIHRbdFtcIkVsZW1lbnRcIl0gPSAxXSA9IFwiRWxlbWVudFwiO1xuICAgIHRbdFtcIkF0dHJcIl0gPSAyXSA9IFwiQXR0clwiO1xuICAgIHRbdFtcIlRleHRcIl0gPSAzXSA9IFwiVGV4dFwiO1xuICAgIHRbdFtcIkNEQVRBU2VjdGlvblwiXSA9IDRdID0gXCJDREFUQVNlY3Rpb25cIjtcbiAgICB0W3RbXCJFbnRpdHlSZWZlcmVuY2VcIl0gPSA1XSA9IFwiRW50aXR5UmVmZXJlbmNlXCI7XG4gICAgdFt0W1wiRW50aXR5XCJdID0gNl0gPSBcIkVudGl0eVwiO1xuICAgIHRbdFtcIlByb2Nlc3NpbmdJbnN0cnVjdGlvblwiXSA9IDddID0gXCJQcm9jZXNzaW5nSW5zdHJ1Y3Rpb25cIjtcbiAgICB0W3RbXCJDb21tZW50XCJdID0gOF0gPSBcIkNvbW1lbnRcIjtcbiAgICB0W3RbXCJEb2N1bWVudFwiXSA9IDldID0gXCJEb2N1bWVudFwiO1xuICAgIHRbdFtcIkRvY3VtZW50VHlwZVwiXSA9IDEwXSA9IFwiRG9jdW1lbnRUeXBlXCI7XG4gICAgdFt0W1wiRG9jdW1lbnRGcmFnbWVudFwiXSA9IDExXSA9IFwiRG9jdW1lbnRGcmFnbWVudFwiO1xuICAgIHRbdFtcIk5vdGF0aW9uXCJdID0gMTJdID0gXCJOb3RhdGlvblwiO1xufSkobHMgfHwgKGxzID0ge30pKTtcblxuY29uc3QgaHMgPSBuZXcgV2Vha01hcDtcblxuZnVuY3Rpb24gYXModCkge1xuICAgIGlmIChocy5oYXModCkpIHJldHVybiBocy5nZXQodCk7XG4gICAgbGV0IGUgPSAwO1xuICAgIGxldCBpID0gdC5uZXh0U2libGluZztcbiAgICB3aGlsZSAobnVsbCAhPT0gaSkge1xuICAgICAgICBpZiAoOCA9PT0gaS5ub2RlVHlwZSkgc3dpdGNoIChpLnRleHRDb250ZW50KSB7XG4gICAgICAgICAgY2FzZSBcImF1LXN0YXJ0XCI6XG4gICAgICAgICAgICArK2U7XG4gICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgIGNhc2UgXCJhdS1lbmRcIjpcbiAgICAgICAgICAgIGlmICgwID09PSBlLS0pIHJldHVybiBpO1xuICAgICAgICB9XG4gICAgICAgIGkgPSBpLm5leHRTaWJsaW5nO1xuICAgIH1cbiAgICBpZiAobnVsbCA9PT0gdC5wYXJlbnROb2RlICYmIDExID09PSB0Lm5vZGVUeXBlKSB7XG4gICAgICAgIGNvbnN0IGUgPSBzaS5mb3IodCk7XG4gICAgICAgIGlmICh2b2lkIDAgPT09IGUpIHJldHVybiBudWxsO1xuICAgICAgICBpZiAoMiA9PT0gZS5tb3VudFRhcmdldCkgcmV0dXJuIGFzKGUuaG9zdCk7XG4gICAgfVxuICAgIHJldHVybiB0LnBhcmVudE5vZGU7XG59XG5cbmZ1bmN0aW9uIGNzKHQsIGUpIHtcbiAgICBpZiAodm9pZCAwICE9PSB0LnBsYXRmb3JtICYmICEodCBpbnN0YW5jZW9mIHQucGxhdGZvcm0uTm9kZSkpIHtcbiAgICAgICAgY29uc3QgaSA9IHQuY2hpbGROb2RlcztcbiAgICAgICAgZm9yIChsZXQgdCA9IDAsIHMgPSBpLmxlbmd0aDsgdCA8IHM7ICsrdCkgaHMuc2V0KGlbdF0sIGUpO1xuICAgIH0gZWxzZSBocy5zZXQodCwgZSk7XG59XG5cbmZ1bmN0aW9uIHVzKHQpIHtcbiAgICBpZiAoZnModCkpIHJldHVybiB0O1xuICAgIGNvbnN0IGUgPSB0Lm93bmVyRG9jdW1lbnQuY3JlYXRlQ29tbWVudChcImF1LWVuZFwiKTtcbiAgICBjb25zdCBpID0gdC5vd25lckRvY3VtZW50LmNyZWF0ZUNvbW1lbnQoXCJhdS1zdGFydFwiKTtcbiAgICBpZiAobnVsbCAhPT0gdC5wYXJlbnROb2RlKSB7XG4gICAgICAgIHQucGFyZW50Tm9kZS5yZXBsYWNlQ2hpbGQoZSwgdCk7XG4gICAgICAgIGUucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUoaSwgZSk7XG4gICAgfVxuICAgIGUuJHN0YXJ0ID0gaTtcbiAgICByZXR1cm4gZTtcbn1cblxuZnVuY3Rpb24gZnModCkge1xuICAgIHJldHVybiBcImF1LWVuZFwiID09PSB0LnRleHRDb250ZW50O1xufVxuXG5jbGFzcyBGcmFnbWVudE5vZGVTZXF1ZW5jZSB7XG4gICAgY29uc3RydWN0b3IodCwgZSkge1xuICAgICAgICB0aGlzLnBsYXRmb3JtID0gdDtcbiAgICAgICAgdGhpcy5mcmFnbWVudCA9IGU7XG4gICAgICAgIHRoaXMuaXNNb3VudGVkID0gZmFsc2U7XG4gICAgICAgIHRoaXMuaXNMaW5rZWQgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5uZXh0ID0gdm9pZCAwO1xuICAgICAgICB0aGlzLnJlZk5vZGUgPSB2b2lkIDA7XG4gICAgICAgIGNvbnN0IGkgPSBlLnF1ZXJ5U2VsZWN0b3JBbGwoXCIuYXVcIik7XG4gICAgICAgIGxldCBzID0gMDtcbiAgICAgICAgbGV0IG4gPSBpLmxlbmd0aDtcbiAgICAgICAgbGV0IHI7XG4gICAgICAgIGxldCBvID0gdGhpcy50YXJnZXRzID0gQXJyYXkobik7XG4gICAgICAgIHdoaWxlIChuID4gcykge1xuICAgICAgICAgICAgciA9IGlbc107XG4gICAgICAgICAgICBpZiAoXCJBVS1NXCIgPT09IHIubm9kZU5hbWUpIG9bc10gPSB1cyhyKTsgZWxzZSBvW3NdID0gcjtcbiAgICAgICAgICAgICsrcztcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBsID0gZS5jaGlsZE5vZGVzO1xuICAgICAgICBjb25zdCBoID0gdGhpcy5jaGlsZE5vZGVzID0gQXJyYXkobiA9IGwubGVuZ3RoKTtcbiAgICAgICAgcyA9IDA7XG4gICAgICAgIHdoaWxlIChuID4gcykge1xuICAgICAgICAgICAgaFtzXSA9IGxbc107XG4gICAgICAgICAgICArK3M7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5maXJzdENoaWxkID0gZS5maXJzdENoaWxkO1xuICAgICAgICB0aGlzLmxhc3RDaGlsZCA9IGUubGFzdENoaWxkO1xuICAgIH1cbiAgICBmaW5kVGFyZ2V0cygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudGFyZ2V0cztcbiAgICB9XG4gICAgaW5zZXJ0QmVmb3JlKHQpIHtcbiAgICAgICAgaWYgKHRoaXMuaXNMaW5rZWQgJiYgISF0aGlzLnJlZk5vZGUpIHRoaXMuYWRkVG9MaW5rZWQoKTsgZWxzZSB7XG4gICAgICAgICAgICBjb25zdCBlID0gdC5wYXJlbnROb2RlO1xuICAgICAgICAgICAgaWYgKHRoaXMuaXNNb3VudGVkKSB7XG4gICAgICAgICAgICAgICAgbGV0IGkgPSB0aGlzLmZpcnN0Q2hpbGQ7XG4gICAgICAgICAgICAgICAgbGV0IHM7XG4gICAgICAgICAgICAgICAgY29uc3QgbiA9IHRoaXMubGFzdENoaWxkO1xuICAgICAgICAgICAgICAgIHdoaWxlIChudWxsICE9IGkpIHtcbiAgICAgICAgICAgICAgICAgICAgcyA9IGkubmV4dFNpYmxpbmc7XG4gICAgICAgICAgICAgICAgICAgIGUuaW5zZXJ0QmVmb3JlKGksIHQpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoaSA9PT0gbikgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGkgPSBzO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5pc01vdW50ZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgIHQucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUodGhpcy5mcmFnbWVudCwgdCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgYXBwZW5kVG8odCwgZSA9IGZhbHNlKSB7XG4gICAgICAgIGlmICh0aGlzLmlzTW91bnRlZCkge1xuICAgICAgICAgICAgbGV0IGUgPSB0aGlzLmZpcnN0Q2hpbGQ7XG4gICAgICAgICAgICBsZXQgaTtcbiAgICAgICAgICAgIGNvbnN0IHMgPSB0aGlzLmxhc3RDaGlsZDtcbiAgICAgICAgICAgIHdoaWxlIChudWxsICE9IGUpIHtcbiAgICAgICAgICAgICAgICBpID0gZS5uZXh0U2libGluZztcbiAgICAgICAgICAgICAgICB0LmFwcGVuZENoaWxkKGUpO1xuICAgICAgICAgICAgICAgIGlmIChlID09PSBzKSBicmVhaztcbiAgICAgICAgICAgICAgICBlID0gaTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuaXNNb3VudGVkID0gdHJ1ZTtcbiAgICAgICAgICAgIGlmICghZSkgdC5hcHBlbmRDaGlsZCh0aGlzLmZyYWdtZW50KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZW1vdmUoKSB7XG4gICAgICAgIGlmICh0aGlzLmlzTW91bnRlZCkge1xuICAgICAgICAgICAgdGhpcy5pc01vdW50ZWQgPSBmYWxzZTtcbiAgICAgICAgICAgIGNvbnN0IHQgPSB0aGlzLmZyYWdtZW50O1xuICAgICAgICAgICAgY29uc3QgZSA9IHRoaXMubGFzdENoaWxkO1xuICAgICAgICAgICAgbGV0IGk7XG4gICAgICAgICAgICBsZXQgcyA9IHRoaXMuZmlyc3RDaGlsZDtcbiAgICAgICAgICAgIHdoaWxlIChudWxsICE9PSBzKSB7XG4gICAgICAgICAgICAgICAgaSA9IHMubmV4dFNpYmxpbmc7XG4gICAgICAgICAgICAgICAgdC5hcHBlbmRDaGlsZChzKTtcbiAgICAgICAgICAgICAgICBpZiAocyA9PT0gZSkgYnJlYWs7XG4gICAgICAgICAgICAgICAgcyA9IGk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgYWRkVG9MaW5rZWQoKSB7XG4gICAgICAgIGNvbnN0IHQgPSB0aGlzLnJlZk5vZGU7XG4gICAgICAgIGNvbnN0IGUgPSB0LnBhcmVudE5vZGU7XG4gICAgICAgIGlmICh0aGlzLmlzTW91bnRlZCkge1xuICAgICAgICAgICAgbGV0IGkgPSB0aGlzLmZpcnN0Q2hpbGQ7XG4gICAgICAgICAgICBsZXQgcztcbiAgICAgICAgICAgIGNvbnN0IG4gPSB0aGlzLmxhc3RDaGlsZDtcbiAgICAgICAgICAgIHdoaWxlIChudWxsICE9IGkpIHtcbiAgICAgICAgICAgICAgICBzID0gaS5uZXh0U2libGluZztcbiAgICAgICAgICAgICAgICBlLmluc2VydEJlZm9yZShpLCB0KTtcbiAgICAgICAgICAgICAgICBpZiAoaSA9PT0gbikgYnJlYWs7XG4gICAgICAgICAgICAgICAgaSA9IHM7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmlzTW91bnRlZCA9IHRydWU7XG4gICAgICAgICAgICBlLmluc2VydEJlZm9yZSh0aGlzLmZyYWdtZW50LCB0KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICB1bmxpbmsoKSB7XG4gICAgICAgIHRoaXMuaXNMaW5rZWQgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5uZXh0ID0gdm9pZCAwO1xuICAgICAgICB0aGlzLnJlZk5vZGUgPSB2b2lkIDA7XG4gICAgfVxuICAgIGxpbmsodCkge1xuICAgICAgICB0aGlzLmlzTGlua2VkID0gdHJ1ZTtcbiAgICAgICAgaWYgKGZzKHQpKSB0aGlzLnJlZk5vZGUgPSB0OyBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMubmV4dCA9IHQ7XG4gICAgICAgICAgICB0aGlzLm9idGFpblJlZk5vZGUoKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBvYnRhaW5SZWZOb2RlKCkge1xuICAgICAgICBpZiAodm9pZCAwICE9PSB0aGlzLm5leHQpIHRoaXMucmVmTm9kZSA9IHRoaXMubmV4dC5maXJzdENoaWxkOyBlbHNlIHRoaXMucmVmTm9kZSA9IHZvaWQgMDtcbiAgICB9XG59XG5cbmNvbnN0IGRzID0gbC5jcmVhdGVJbnRlcmZhY2UoXCJJV2luZG93XCIsICh0ID0+IHQuY2FsbGJhY2soKHQgPT4gdC5nZXQoS3QpLndpbmRvdykpKSk7XG5cbmNvbnN0IG1zID0gbC5jcmVhdGVJbnRlcmZhY2UoXCJJTG9jYXRpb25cIiwgKHQgPT4gdC5jYWxsYmFjaygodCA9PiB0LmdldChkcykubG9jYXRpb24pKSkpO1xuXG5jb25zdCB2cyA9IGwuY3JlYXRlSW50ZXJmYWNlKFwiSUhpc3RvcnlcIiwgKHQgPT4gdC5jYWxsYmFjaygodCA9PiB0LmdldChkcykuaGlzdG9yeSkpKSk7XG5cbmNvbnN0IHBzID0ge1xuICAgIFtOLmNhcHR1cmluZ106IHtcbiAgICAgICAgY2FwdHVyZTogdHJ1ZVxuICAgIH0sXG4gICAgW04uYnViYmxpbmddOiB7XG4gICAgICAgIGNhcHR1cmU6IGZhbHNlXG4gICAgfVxufTtcblxuY2xhc3MgTGlzdGVuZXIge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUsIGksIHMsIG4sIHIsIG8sIGwpIHtcbiAgICAgICAgdGhpcy5wbGF0Zm9ybSA9IHQ7XG4gICAgICAgIHRoaXMudGFyZ2V0RXZlbnQgPSBlO1xuICAgICAgICB0aGlzLmRlbGVnYXRpb25TdHJhdGVneSA9IGk7XG4gICAgICAgIHRoaXMuc291cmNlRXhwcmVzc2lvbiA9IHM7XG4gICAgICAgIHRoaXMudGFyZ2V0ID0gbjtcbiAgICAgICAgdGhpcy5wcmV2ZW50RGVmYXVsdCA9IHI7XG4gICAgICAgIHRoaXMuZXZlbnREZWxlZ2F0b3IgPSBvO1xuICAgICAgICB0aGlzLmxvY2F0b3IgPSBsO1xuICAgICAgICB0aGlzLmludGVyY2VwdG9yID0gdGhpcztcbiAgICAgICAgdGhpcy5pc0JvdW5kID0gZmFsc2U7XG4gICAgICAgIHRoaXMuaGFuZGxlciA9IG51bGw7XG4gICAgfVxuICAgIGNhbGxTb3VyY2UodCkge1xuICAgICAgICBjb25zdCBlID0gdGhpcy4kc2NvcGUub3ZlcnJpZGVDb250ZXh0O1xuICAgICAgICBlLiRldmVudCA9IHQ7XG4gICAgICAgIGNvbnN0IGkgPSB0aGlzLnNvdXJjZUV4cHJlc3Npb24uZXZhbHVhdGUoOCwgdGhpcy4kc2NvcGUsIHRoaXMubG9jYXRvciwgbnVsbCk7XG4gICAgICAgIFJlZmxlY3QuZGVsZXRlUHJvcGVydHkoZSwgXCIkZXZlbnRcIik7XG4gICAgICAgIGlmICh0cnVlICE9PSBpICYmIHRoaXMucHJldmVudERlZmF1bHQpIHQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgcmV0dXJuIGk7XG4gICAgfVxuICAgIGhhbmRsZUV2ZW50KHQpIHtcbiAgICAgICAgdGhpcy5pbnRlcmNlcHRvci5jYWxsU291cmNlKHQpO1xuICAgIH1cbiAgICAkYmluZCh0LCBlKSB7XG4gICAgICAgIGlmICh0aGlzLmlzQm91bmQpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLiRzY29wZSA9PT0gZSkgcmV0dXJuO1xuICAgICAgICAgICAgdGhpcy5pbnRlcmNlcHRvci4kdW5iaW5kKDIgfCB0KTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLiRzY29wZSA9IGU7XG4gICAgICAgIGNvbnN0IGkgPSB0aGlzLnNvdXJjZUV4cHJlc3Npb247XG4gICAgICAgIGlmIChpLmhhc0JpbmQpIGkuYmluZCh0LCBlLCB0aGlzLmludGVyY2VwdG9yKTtcbiAgICAgICAgaWYgKHRoaXMuZGVsZWdhdGlvblN0cmF0ZWd5ID09PSBOLm5vbmUpIHRoaXMudGFyZ2V0LmFkZEV2ZW50TGlzdGVuZXIodGhpcy50YXJnZXRFdmVudCwgdGhpcyk7IGVsc2UgdGhpcy5oYW5kbGVyID0gdGhpcy5ldmVudERlbGVnYXRvci5hZGRFdmVudExpc3RlbmVyKHRoaXMubG9jYXRvci5nZXQocnMpLCB0aGlzLnRhcmdldCwgdGhpcy50YXJnZXRFdmVudCwgdGhpcywgcHNbdGhpcy5kZWxlZ2F0aW9uU3RyYXRlZ3ldKTtcbiAgICAgICAgdGhpcy5pc0JvdW5kID0gdHJ1ZTtcbiAgICB9XG4gICAgJHVuYmluZCh0KSB7XG4gICAgICAgIGlmICghdGhpcy5pc0JvdW5kKSByZXR1cm47XG4gICAgICAgIGNvbnN0IGUgPSB0aGlzLnNvdXJjZUV4cHJlc3Npb247XG4gICAgICAgIGlmIChlLmhhc1VuYmluZCkgZS51bmJpbmQodCwgdGhpcy4kc2NvcGUsIHRoaXMuaW50ZXJjZXB0b3IpO1xuICAgICAgICB0aGlzLiRzY29wZSA9IG51bGw7XG4gICAgICAgIGlmICh0aGlzLmRlbGVnYXRpb25TdHJhdGVneSA9PT0gTi5ub25lKSB0aGlzLnRhcmdldC5yZW1vdmVFdmVudExpc3RlbmVyKHRoaXMudGFyZ2V0RXZlbnQsIHRoaXMpOyBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuaGFuZGxlci5kaXNwb3NlKCk7XG4gICAgICAgICAgICB0aGlzLmhhbmRsZXIgPSBudWxsO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuaXNCb3VuZCA9IGZhbHNlO1xuICAgIH1cbiAgICBvYnNlcnZlKHQsIGUpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBoYW5kbGVDaGFuZ2UodCwgZSwgaSkge1xuICAgICAgICByZXR1cm47XG4gICAgfVxufVxuXG5jb25zdCBncyA9IHtcbiAgICBjYXB0dXJlOiBmYWxzZVxufTtcblxuY2xhc3MgTGlzdGVuZXJUcmFja2VyIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlLCBpID0gZ3MpIHtcbiAgICAgICAgdGhpcy5qdCA9IHQ7XG4gICAgICAgIHRoaXMuTnQgPSBlO1xuICAgICAgICB0aGlzLld0ID0gaTtcbiAgICAgICAgdGhpcy5IdCA9IDA7XG4gICAgICAgIHRoaXMuenQgPSBuZXcgTWFwO1xuICAgICAgICB0aGlzLkd0ID0gbmV3IE1hcDtcbiAgICB9XG4gICAgWHQoKSB7XG4gICAgICAgIGlmICgxID09PSArK3RoaXMuSHQpIHRoaXMuanQuYWRkRXZlbnRMaXN0ZW5lcih0aGlzLk50LCB0aGlzLCB0aGlzLld0KTtcbiAgICB9XG4gICAgS3QoKSB7XG4gICAgICAgIGlmICgwID09PSAtLXRoaXMuSHQpIHRoaXMuanQucmVtb3ZlRXZlbnRMaXN0ZW5lcih0aGlzLk50LCB0aGlzLCB0aGlzLld0KTtcbiAgICB9XG4gICAgZGlzcG9zZSgpIHtcbiAgICAgICAgaWYgKHRoaXMuSHQgPiAwKSB7XG4gICAgICAgICAgICB0aGlzLkh0ID0gMDtcbiAgICAgICAgICAgIHRoaXMuanQucmVtb3ZlRXZlbnRMaXN0ZW5lcih0aGlzLk50LCB0aGlzLCB0aGlzLld0KTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnp0LmNsZWFyKCk7XG4gICAgICAgIHRoaXMuR3QuY2xlYXIoKTtcbiAgICB9XG4gICAgWXQodCkge1xuICAgICAgICBjb25zdCBlID0gdHJ1ZSA9PT0gdGhpcy5XdC5jYXB0dXJlID8gdGhpcy56dCA6IHRoaXMuR3Q7XG4gICAgICAgIGxldCBpID0gZS5nZXQodCk7XG4gICAgICAgIGlmICh2b2lkIDAgPT09IGkpIGUuc2V0KHQsIGkgPSB3dCgpKTtcbiAgICAgICAgcmV0dXJuIGk7XG4gICAgfVxuICAgIGhhbmRsZUV2ZW50KHQpIHtcbiAgICAgICAgY29uc3QgZSA9IHRydWUgPT09IHRoaXMuV3QuY2FwdHVyZSA/IHRoaXMuenQgOiB0aGlzLkd0O1xuICAgICAgICBjb25zdCBpID0gdC5jb21wb3NlZFBhdGgoKTtcbiAgICAgICAgaWYgKHRydWUgPT09IHRoaXMuV3QuY2FwdHVyZSkgaS5yZXZlcnNlKCk7XG4gICAgICAgIGZvciAoY29uc3QgcyBvZiBpKSB7XG4gICAgICAgICAgICBjb25zdCBpID0gZS5nZXQocyk7XG4gICAgICAgICAgICBpZiAodm9pZCAwID09PSBpKSBjb250aW51ZTtcbiAgICAgICAgICAgIGNvbnN0IG4gPSBpW3RoaXMuTnRdO1xuICAgICAgICAgICAgaWYgKHZvaWQgMCA9PT0gbikgY29udGludWU7XG4gICAgICAgICAgICBpZiAoQ3QobikpIG4odCk7IGVsc2Ugbi5oYW5kbGVFdmVudCh0KTtcbiAgICAgICAgICAgIGlmICh0cnVlID09PSB0LmNhbmNlbEJ1YmJsZSkgcmV0dXJuO1xuICAgICAgICB9XG4gICAgfVxufVxuXG5jbGFzcyBEZWxlZ2F0ZVN1YnNjcmlwdGlvbiB7XG4gICAgY29uc3RydWN0b3IodCwgZSwgaSwgcykge1xuICAgICAgICB0aGlzLlF0ID0gdDtcbiAgICAgICAgdGhpcy5adCA9IGU7XG4gICAgICAgIHRoaXMuTnQgPSBpO1xuICAgICAgICB0Llh0KCk7XG4gICAgICAgIGVbaV0gPSBzO1xuICAgIH1cbiAgICBkaXNwb3NlKCkge1xuICAgICAgICB0aGlzLlF0Lkt0KCk7XG4gICAgICAgIHRoaXMuWnRbdGhpcy5OdF0gPSB2b2lkIDA7XG4gICAgfVxufVxuXG5jbGFzcyBFdmVudFN1YnNjcmliZXIge1xuICAgIGNvbnN0cnVjdG9yKHQpIHtcbiAgICAgICAgdGhpcy5jb25maWcgPSB0O1xuICAgICAgICB0aGlzLnRhcmdldCA9IG51bGw7XG4gICAgICAgIHRoaXMuaGFuZGxlciA9IG51bGw7XG4gICAgfVxuICAgIHN1YnNjcmliZSh0LCBlKSB7XG4gICAgICAgIHRoaXMudGFyZ2V0ID0gdDtcbiAgICAgICAgdGhpcy5oYW5kbGVyID0gZTtcbiAgICAgICAgbGV0IGk7XG4gICAgICAgIGZvciAoaSBvZiB0aGlzLmNvbmZpZy5ldmVudHMpIHQuYWRkRXZlbnRMaXN0ZW5lcihpLCBlKTtcbiAgICB9XG4gICAgZGlzcG9zZSgpIHtcbiAgICAgICAgY29uc3Qge3RhcmdldDogdCwgaGFuZGxlcjogZX0gPSB0aGlzO1xuICAgICAgICBsZXQgaTtcbiAgICAgICAgaWYgKG51bGwgIT09IHQgJiYgbnVsbCAhPT0gZSkgZm9yIChpIG9mIHRoaXMuY29uZmlnLmV2ZW50cykgdC5yZW1vdmVFdmVudExpc3RlbmVyKGksIGUpO1xuICAgICAgICB0aGlzLnRhcmdldCA9IHRoaXMuaGFuZGxlciA9IG51bGw7XG4gICAgfVxufVxuXG5jb25zdCB3cyA9IGwuY3JlYXRlSW50ZXJmYWNlKFwiSUV2ZW50RGVsZWdhdG9yXCIsICh0ID0+IHQuc2luZ2xldG9uKEV2ZW50RGVsZWdhdG9yKSkpO1xuXG5jbGFzcyBFdmVudERlbGVnYXRvciB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMuSnQgPSB3dCgpO1xuICAgIH1cbiAgICBhZGRFdmVudExpc3RlbmVyKHQsIGUsIGksIHMsIG4pIHtcbiAgICAgICAgdmFyIHI7XG4gICAgICAgIHZhciBvO1xuICAgICAgICBjb25zdCBsID0gbnVsbCAhPT0gKHIgPSAobyA9IHRoaXMuSnQpW2ldKSAmJiB2b2lkIDAgIT09IHIgPyByIDogb1tpXSA9IG5ldyBNYXA7XG4gICAgICAgIGxldCBoID0gbC5nZXQodCk7XG4gICAgICAgIGlmICh2b2lkIDAgPT09IGgpIGwuc2V0KHQsIGggPSBuZXcgTGlzdGVuZXJUcmFja2VyKHQsIGksIG4pKTtcbiAgICAgICAgcmV0dXJuIG5ldyBEZWxlZ2F0ZVN1YnNjcmlwdGlvbihoLCBoLll0KGUpLCBpLCBzKTtcbiAgICB9XG4gICAgZGlzcG9zZSgpIHtcbiAgICAgICAgZm9yIChjb25zdCB0IGluIHRoaXMuSnQpIHtcbiAgICAgICAgICAgIGNvbnN0IGUgPSB0aGlzLkp0W3RdO1xuICAgICAgICAgICAgZm9yIChjb25zdCB0IG9mIGUudmFsdWVzKCkpIHQuZGlzcG9zZSgpO1xuICAgICAgICAgICAgZS5jbGVhcigpO1xuICAgICAgICB9XG4gICAgfVxufVxuXG5jb25zdCBicyA9IGwuY3JlYXRlSW50ZXJmYWNlKFwiSVByb2plY3Rpb25zXCIpO1xuXG5jb25zdCB4cyA9IGwuY3JlYXRlSW50ZXJmYWNlKFwiSUF1U2xvdHNJbmZvXCIpO1xuXG5jbGFzcyBBdVNsb3RzSW5mbyB7XG4gICAgY29uc3RydWN0b3IodCkge1xuICAgICAgICB0aGlzLnByb2plY3RlZFNsb3RzID0gdDtcbiAgICB9XG59XG5cbnZhciB5cztcblxuKGZ1bmN0aW9uKHQpIHtcbiAgICB0W1wiaHlkcmF0ZUVsZW1lbnRcIl0gPSBcInJhXCI7XG4gICAgdFtcImh5ZHJhdGVBdHRyaWJ1dGVcIl0gPSBcInJiXCI7XG4gICAgdFtcImh5ZHJhdGVUZW1wbGF0ZUNvbnRyb2xsZXJcIl0gPSBcInJjXCI7XG4gICAgdFtcImh5ZHJhdGVMZXRFbGVtZW50XCJdID0gXCJyZFwiO1xuICAgIHRbXCJzZXRQcm9wZXJ0eVwiXSA9IFwicmVcIjtcbiAgICB0W1wiaW50ZXJwb2xhdGlvblwiXSA9IFwicmZcIjtcbiAgICB0W1wicHJvcGVydHlCaW5kaW5nXCJdID0gXCJyZ1wiO1xuICAgIHRbXCJjYWxsQmluZGluZ1wiXSA9IFwicmhcIjtcbiAgICB0W1wibGV0QmluZGluZ1wiXSA9IFwicmlcIjtcbiAgICB0W1wicmVmQmluZGluZ1wiXSA9IFwicmpcIjtcbiAgICB0W1wiaXRlcmF0b3JCaW5kaW5nXCJdID0gXCJya1wiO1xuICAgIHRbXCJ0ZXh0QmluZGluZ1wiXSA9IFwiaGFcIjtcbiAgICB0W1wibGlzdGVuZXJCaW5kaW5nXCJdID0gXCJoYlwiO1xuICAgIHRbXCJhdHRyaWJ1dGVCaW5kaW5nXCJdID0gXCJoY1wiO1xuICAgIHRbXCJzdHlsZVByb3BlcnR5QmluZGluZ1wiXSA9IFwiaGRcIjtcbiAgICB0W1wic2V0QXR0cmlidXRlXCJdID0gXCJoZVwiO1xuICAgIHRbXCJzZXRDbGFzc0F0dHJpYnV0ZVwiXSA9IFwiaGZcIjtcbiAgICB0W1wic2V0U3R5bGVBdHRyaWJ1dGVcIl0gPSBcImhnXCI7XG4gICAgdFtcInNwcmVhZEJpbmRpbmdcIl0gPSBcImhzXCI7XG4gICAgdFtcInNwcmVhZEVsZW1lbnRQcm9wXCJdID0gXCJocFwiO1xufSkoeXMgfHwgKHlzID0ge30pKTtcblxuY29uc3Qga3MgPSBsLmNyZWF0ZUludGVyZmFjZShcIkluc3RydWN0aW9uXCIpO1xuXG5mdW5jdGlvbiBDcyh0KSB7XG4gICAgY29uc3QgZSA9IHQudHlwZTtcbiAgICByZXR1cm4gQXQoZSkgJiYgMiA9PT0gZS5sZW5ndGg7XG59XG5cbmNsYXNzIEludGVycG9sYXRpb25JbnN0cnVjdGlvbiB7XG4gICAgY29uc3RydWN0b3IodCwgZSkge1xuICAgICAgICB0aGlzLmZyb20gPSB0O1xuICAgICAgICB0aGlzLnRvID0gZTtcbiAgICB9XG4gICAgZ2V0IHR5cGUoKSB7XG4gICAgICAgIHJldHVybiBcInJmXCI7XG4gICAgfVxufVxuXG5jbGFzcyBQcm9wZXJ0eUJpbmRpbmdJbnN0cnVjdGlvbiB7XG4gICAgY29uc3RydWN0b3IodCwgZSwgaSkge1xuICAgICAgICB0aGlzLmZyb20gPSB0O1xuICAgICAgICB0aGlzLnRvID0gZTtcbiAgICAgICAgdGhpcy5tb2RlID0gaTtcbiAgICB9XG4gICAgZ2V0IHR5cGUoKSB7XG4gICAgICAgIHJldHVybiBcInJnXCI7XG4gICAgfVxufVxuXG5jbGFzcyBJdGVyYXRvckJpbmRpbmdJbnN0cnVjdGlvbiB7XG4gICAgY29uc3RydWN0b3IodCwgZSkge1xuICAgICAgICB0aGlzLmZyb20gPSB0O1xuICAgICAgICB0aGlzLnRvID0gZTtcbiAgICB9XG4gICAgZ2V0IHR5cGUoKSB7XG4gICAgICAgIHJldHVybiBcInJrXCI7XG4gICAgfVxufVxuXG5jbGFzcyBDYWxsQmluZGluZ0luc3RydWN0aW9uIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlKSB7XG4gICAgICAgIHRoaXMuZnJvbSA9IHQ7XG4gICAgICAgIHRoaXMudG8gPSBlO1xuICAgIH1cbiAgICBnZXQgdHlwZSgpIHtcbiAgICAgICAgcmV0dXJuIFwicmhcIjtcbiAgICB9XG59XG5cbmNsYXNzIFJlZkJpbmRpbmdJbnN0cnVjdGlvbiB7XG4gICAgY29uc3RydWN0b3IodCwgZSkge1xuICAgICAgICB0aGlzLmZyb20gPSB0O1xuICAgICAgICB0aGlzLnRvID0gZTtcbiAgICB9XG4gICAgZ2V0IHR5cGUoKSB7XG4gICAgICAgIHJldHVybiBcInJqXCI7XG4gICAgfVxufVxuXG5jbGFzcyBTZXRQcm9wZXJ0eUluc3RydWN0aW9uIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlKSB7XG4gICAgICAgIHRoaXMudmFsdWUgPSB0O1xuICAgICAgICB0aGlzLnRvID0gZTtcbiAgICB9XG4gICAgZ2V0IHR5cGUoKSB7XG4gICAgICAgIHJldHVybiBcInJlXCI7XG4gICAgfVxufVxuXG5jbGFzcyBIeWRyYXRlRWxlbWVudEluc3RydWN0aW9uIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlLCBpLCBzLCBuLCByKSB7XG4gICAgICAgIHRoaXMucmVzID0gdDtcbiAgICAgICAgdGhpcy5hbGlhcyA9IGU7XG4gICAgICAgIHRoaXMucHJvcHMgPSBpO1xuICAgICAgICB0aGlzLnByb2plY3Rpb25zID0gcztcbiAgICAgICAgdGhpcy5jb250YWluZXJsZXNzID0gbjtcbiAgICAgICAgdGhpcy5jYXB0dXJlcyA9IHI7XG4gICAgICAgIHRoaXMuYXVTbG90ID0gbnVsbDtcbiAgICB9XG4gICAgZ2V0IHR5cGUoKSB7XG4gICAgICAgIHJldHVybiBcInJhXCI7XG4gICAgfVxufVxuXG5jbGFzcyBIeWRyYXRlQXR0cmlidXRlSW5zdHJ1Y3Rpb24ge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUsIGkpIHtcbiAgICAgICAgdGhpcy5yZXMgPSB0O1xuICAgICAgICB0aGlzLmFsaWFzID0gZTtcbiAgICAgICAgdGhpcy5wcm9wcyA9IGk7XG4gICAgfVxuICAgIGdldCB0eXBlKCkge1xuICAgICAgICByZXR1cm4gXCJyYlwiO1xuICAgIH1cbn1cblxuY2xhc3MgSHlkcmF0ZVRlbXBsYXRlQ29udHJvbGxlciB7XG4gICAgY29uc3RydWN0b3IodCwgZSwgaSwgcykge1xuICAgICAgICB0aGlzLmRlZiA9IHQ7XG4gICAgICAgIHRoaXMucmVzID0gZTtcbiAgICAgICAgdGhpcy5hbGlhcyA9IGk7XG4gICAgICAgIHRoaXMucHJvcHMgPSBzO1xuICAgIH1cbiAgICBnZXQgdHlwZSgpIHtcbiAgICAgICAgcmV0dXJuIFwicmNcIjtcbiAgICB9XG59XG5cbmNsYXNzIEh5ZHJhdGVMZXRFbGVtZW50SW5zdHJ1Y3Rpb24ge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUpIHtcbiAgICAgICAgdGhpcy5pbnN0cnVjdGlvbnMgPSB0O1xuICAgICAgICB0aGlzLnRvQmluZGluZ0NvbnRleHQgPSBlO1xuICAgIH1cbiAgICBnZXQgdHlwZSgpIHtcbiAgICAgICAgcmV0dXJuIFwicmRcIjtcbiAgICB9XG59XG5cbmNsYXNzIExldEJpbmRpbmdJbnN0cnVjdGlvbiB7XG4gICAgY29uc3RydWN0b3IodCwgZSkge1xuICAgICAgICB0aGlzLmZyb20gPSB0O1xuICAgICAgICB0aGlzLnRvID0gZTtcbiAgICB9XG4gICAgZ2V0IHR5cGUoKSB7XG4gICAgICAgIHJldHVybiBcInJpXCI7XG4gICAgfVxufVxuXG5jbGFzcyBUZXh0QmluZGluZ0luc3RydWN0aW9uIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlKSB7XG4gICAgICAgIHRoaXMuZnJvbSA9IHQ7XG4gICAgICAgIHRoaXMuc3RyaWN0ID0gZTtcbiAgICB9XG4gICAgZ2V0IHR5cGUoKSB7XG4gICAgICAgIHJldHVybiBcImhhXCI7XG4gICAgfVxufVxuXG5jbGFzcyBMaXN0ZW5lckJpbmRpbmdJbnN0cnVjdGlvbiB7XG4gICAgY29uc3RydWN0b3IodCwgZSwgaSwgcykge1xuICAgICAgICB0aGlzLmZyb20gPSB0O1xuICAgICAgICB0aGlzLnRvID0gZTtcbiAgICAgICAgdGhpcy5wcmV2ZW50RGVmYXVsdCA9IGk7XG4gICAgICAgIHRoaXMuc3RyYXRlZ3kgPSBzO1xuICAgIH1cbiAgICBnZXQgdHlwZSgpIHtcbiAgICAgICAgcmV0dXJuIFwiaGJcIjtcbiAgICB9XG59XG5cbmNsYXNzIFN0eWxlUHJvcGVydHlCaW5kaW5nSW5zdHJ1Y3Rpb24ge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUpIHtcbiAgICAgICAgdGhpcy5mcm9tID0gdDtcbiAgICAgICAgdGhpcy50byA9IGU7XG4gICAgfVxuICAgIGdldCB0eXBlKCkge1xuICAgICAgICByZXR1cm4gXCJoZFwiO1xuICAgIH1cbn1cblxuY2xhc3MgU2V0QXR0cmlidXRlSW5zdHJ1Y3Rpb24ge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUpIHtcbiAgICAgICAgdGhpcy52YWx1ZSA9IHQ7XG4gICAgICAgIHRoaXMudG8gPSBlO1xuICAgIH1cbiAgICBnZXQgdHlwZSgpIHtcbiAgICAgICAgcmV0dXJuIFwiaGVcIjtcbiAgICB9XG59XG5cbmNsYXNzIFNldENsYXNzQXR0cmlidXRlSW5zdHJ1Y3Rpb24ge1xuICAgIGNvbnN0cnVjdG9yKHQpIHtcbiAgICAgICAgdGhpcy52YWx1ZSA9IHQ7XG4gICAgICAgIHRoaXMudHlwZSA9IFwiaGZcIjtcbiAgICB9XG59XG5cbmNsYXNzIFNldFN0eWxlQXR0cmlidXRlSW5zdHJ1Y3Rpb24ge1xuICAgIGNvbnN0cnVjdG9yKHQpIHtcbiAgICAgICAgdGhpcy52YWx1ZSA9IHQ7XG4gICAgICAgIHRoaXMudHlwZSA9IFwiaGdcIjtcbiAgICB9XG59XG5cbmNsYXNzIEF0dHJpYnV0ZUJpbmRpbmdJbnN0cnVjdGlvbiB7XG4gICAgY29uc3RydWN0b3IodCwgZSwgaSkge1xuICAgICAgICB0aGlzLmF0dHIgPSB0O1xuICAgICAgICB0aGlzLmZyb20gPSBlO1xuICAgICAgICB0aGlzLnRvID0gaTtcbiAgICB9XG4gICAgZ2V0IHR5cGUoKSB7XG4gICAgICAgIHJldHVybiBcImhjXCI7XG4gICAgfVxufVxuXG5jbGFzcyBTcHJlYWRCaW5kaW5nSW5zdHJ1Y3Rpb24ge1xuICAgIGdldCB0eXBlKCkge1xuICAgICAgICByZXR1cm4gXCJoc1wiO1xuICAgIH1cbn1cblxuY2xhc3MgU3ByZWFkRWxlbWVudFByb3BCaW5kaW5nSW5zdHJ1Y3Rpb24ge1xuICAgIGNvbnN0cnVjdG9yKHQpIHtcbiAgICAgICAgdGhpcy5pbnN0cnVjdGlvbnMgPSB0O1xuICAgIH1cbiAgICBnZXQgdHlwZSgpIHtcbiAgICAgICAgcmV0dXJuIFwiaHBcIjtcbiAgICB9XG59XG5cbmNvbnN0IEFzID0gbC5jcmVhdGVJbnRlcmZhY2UoXCJJVGVtcGxhdGVDb21waWxlclwiKTtcblxuY29uc3QgU3MgPSBsLmNyZWF0ZUludGVyZmFjZShcIklSZW5kZXJlclwiKTtcblxuZnVuY3Rpb24gUnModCkge1xuICAgIHJldHVybiBmdW5jdGlvbiBpKHMpIHtcbiAgICAgICAgY29uc3QgbiA9IGZ1bmN0aW9uKC4uLmUpIHtcbiAgICAgICAgICAgIGNvbnN0IGkgPSBuZXcgcyguLi5lKTtcbiAgICAgICAgICAgIGkuaW5zdHJ1Y3Rpb25UeXBlID0gdDtcbiAgICAgICAgICAgIHJldHVybiBpO1xuICAgICAgICB9O1xuICAgICAgICBuLnJlZ2lzdGVyID0gZnVuY3Rpb24gdChlKSB7XG4gICAgICAgICAgICBjLnNpbmdsZXRvbihTcywgbikucmVnaXN0ZXIoZSk7XG4gICAgICAgIH07XG4gICAgICAgIGNvbnN0IHIgPSBlLmdldE93bktleXMocyk7XG4gICAgICAgIGZvciAoY29uc3QgdCBvZiByKSBjdCh0LCBodCh0LCBzKSwgbik7XG4gICAgICAgIGNvbnN0IG8gPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycyhzKTtcbiAgICAgICAgT2JqZWN0LmtleXMobykuZmlsdGVyKCh0ID0+IFwicHJvdG90eXBlXCIgIT09IHQpKS5mb3JFYWNoKCh0ID0+IHtcbiAgICAgICAgICAgIFJlZmxlY3QuZGVmaW5lUHJvcGVydHkobiwgdCwgb1t0XSk7XG4gICAgICAgIH0pKTtcbiAgICAgICAgcmV0dXJuIG47XG4gICAgfTtcbn1cblxuZnVuY3Rpb24gRXModCwgZSwgaSkge1xuICAgIGlmIChBdChlKSkgcmV0dXJuIHQucGFyc2UoZSwgaSk7XG4gICAgcmV0dXJuIGU7XG59XG5cbmZ1bmN0aW9uIEJzKHQpIHtcbiAgICBpZiAobnVsbCAhPSB0LnZpZXdNb2RlbCkgcmV0dXJuIHQudmlld01vZGVsO1xuICAgIHJldHVybiB0O1xufVxuXG5mdW5jdGlvbiBJcyh0LCBlKSB7XG4gICAgaWYgKFwiZWxlbWVudFwiID09PSBlKSByZXR1cm4gdDtcbiAgICBzd2l0Y2ggKGUpIHtcbiAgICAgIGNhc2UgXCJjb250cm9sbGVyXCI6XG4gICAgICAgIHJldHVybiBzaS5mb3IodCk7XG5cbiAgICAgIGNhc2UgXCJ2aWV3XCI6XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIkFVUjA3NTBcIik7XG5cbiAgICAgIGNhc2UgXCJ2aWV3LW1vZGVsXCI6XG4gICAgICAgIHJldHVybiBzaS5mb3IodCkudmlld01vZGVsO1xuXG4gICAgICBkZWZhdWx0OlxuICAgICAgICB7XG4gICAgICAgICAgICBjb25zdCBpID0gTWUuZm9yKHQsIGUpO1xuICAgICAgICAgICAgaWYgKHZvaWQgMCAhPT0gaSkgcmV0dXJuIGkudmlld01vZGVsO1xuICAgICAgICAgICAgY29uc3QgcyA9IHNpLmZvcih0LCB7XG4gICAgICAgICAgICAgICAgbmFtZTogZVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBpZiAodm9pZCAwID09PSBzKSB0aHJvdyBuZXcgRXJyb3IoYEFVUjA3NTE6JHtlfWApO1xuICAgICAgICAgICAgcmV0dXJuIHMudmlld01vZGVsO1xuICAgICAgICB9XG4gICAgfVxufVxuXG5sZXQgVHMgPSBjbGFzcyBTZXRQcm9wZXJ0eVJlbmRlcmVyIHtcbiAgICByZW5kZXIodCwgZSwgaSkge1xuICAgICAgICBjb25zdCBzID0gQnMoZSk7XG4gICAgICAgIGlmICh2b2lkIDAgIT09IHMuJG9ic2VydmVycyAmJiB2b2lkIDAgIT09IHMuJG9ic2VydmVyc1tpLnRvXSkgcy4kb2JzZXJ2ZXJzW2kudG9dLnNldFZhbHVlKGkudmFsdWUsIDIpOyBlbHNlIHNbaS50b10gPSBpLnZhbHVlO1xuICAgIH1cbn07XG5cblRzID0gb3QoWyBScyhcInJlXCIpIF0sIFRzKTtcblxubGV0IERzID0gY2xhc3MgQ3VzdG9tRWxlbWVudFJlbmRlcmVyIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlKSB7XG4gICAgICAgIHRoaXMuciA9IHQ7XG4gICAgICAgIHRoaXMucCA9IGU7XG4gICAgfVxuICAgIHN0YXRpYyBnZXQgaW5qZWN0KCkge1xuICAgICAgICByZXR1cm4gWyBQaSwgS3QgXTtcbiAgICB9XG4gICAgcmVuZGVyKHQsIGUsIGkpIHtcbiAgICAgICAgbGV0IHM7XG4gICAgICAgIGxldCBuO1xuICAgICAgICBsZXQgcjtcbiAgICAgICAgbGV0IG87XG4gICAgICAgIGNvbnN0IGwgPSBpLnJlcztcbiAgICAgICAgY29uc3QgaCA9IGkucHJvamVjdGlvbnM7XG4gICAgICAgIGNvbnN0IGEgPSB0LmNvbnRhaW5lcjtcbiAgICAgICAgY29uc3QgYyA9IG5uKHRoaXMucCwgdCwgZSwgaSwgZSwgbnVsbCA9PSBoID8gdm9pZCAwIDogbmV3IEF1U2xvdHNJbmZvKE9iamVjdC5rZXlzKGgpKSk7XG4gICAgICAgIHN3aXRjaCAodHlwZW9mIGwpIHtcbiAgICAgICAgICBjYXNlIFwic3RyaW5nXCI6XG4gICAgICAgICAgICBzID0gYS5maW5kKHNpLCBsKTtcbiAgICAgICAgICAgIGlmIChudWxsID09IHMpIHRocm93IG5ldyBFcnJvcihgQVVSMDc1Mjoke2x9QCR7dFtcIm5hbWVcIl19YCk7XG4gICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICBzID0gbDtcbiAgICAgICAgfVxuICAgICAgICBuID0gcy5UeXBlO1xuICAgICAgICByID0gYy5pbnZva2Uobik7XG4gICAgICAgIGMucmVnaXN0ZXJSZXNvbHZlcihuLCBuZXcgeChzLmtleSwgcikpO1xuICAgICAgICBvID0gQ29udHJvbGxlci4kZWwoYywgciwgZSwgaSwgcyk7XG4gICAgICAgIHNzKGUsIHMua2V5LCBvKTtcbiAgICAgICAgY29uc3QgdSA9IHRoaXMuci5yZW5kZXJlcnM7XG4gICAgICAgIGNvbnN0IGYgPSBpLnByb3BzO1xuICAgICAgICBjb25zdCBkID0gZi5sZW5ndGg7XG4gICAgICAgIGxldCBtID0gMDtcbiAgICAgICAgbGV0IHY7XG4gICAgICAgIHdoaWxlIChkID4gbSkge1xuICAgICAgICAgICAgdiA9IGZbbV07XG4gICAgICAgICAgICB1W3YudHlwZV0ucmVuZGVyKHQsIG8sIHYpO1xuICAgICAgICAgICAgKyttO1xuICAgICAgICB9XG4gICAgICAgIHQuYWRkQ2hpbGQobyk7XG4gICAgfVxufTtcblxuRHMgPSBvdChbIFJzKFwicmFcIikgXSwgRHMpO1xuXG5sZXQgUHMgPSBjbGFzcyBDdXN0b21BdHRyaWJ1dGVSZW5kZXJlciB7XG4gICAgY29uc3RydWN0b3IodCwgZSkge1xuICAgICAgICB0aGlzLnIgPSB0O1xuICAgICAgICB0aGlzLnAgPSBlO1xuICAgIH1cbiAgICBzdGF0aWMgZ2V0IGluamVjdCgpIHtcbiAgICAgICAgcmV0dXJuIFsgUGksIEt0IF07XG4gICAgfVxuICAgIHJlbmRlcih0LCBlLCBpKSB7XG4gICAgICAgIGxldCBzID0gdC5jb250YWluZXI7XG4gICAgICAgIGxldCBuO1xuICAgICAgICBzd2l0Y2ggKHR5cGVvZiBpLnJlcykge1xuICAgICAgICAgIGNhc2UgXCJzdHJpbmdcIjpcbiAgICAgICAgICAgIG4gPSBzLmZpbmQoTWUsIGkucmVzKTtcbiAgICAgICAgICAgIGlmIChudWxsID09IG4pIHRocm93IG5ldyBFcnJvcihgQVVSMDc1Mzoke2kucmVzfUAke3RbXCJuYW1lXCJdfWApO1xuICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgbiA9IGkucmVzO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHIgPSBybih0aGlzLnAsIG4sIHQsIGUsIGksIHZvaWQgMCwgdm9pZCAwKTtcbiAgICAgICAgY29uc3QgbyA9IENvbnRyb2xsZXIuJGF0dHIodC5jb250YWluZXIsIHIsIGUsIG4pO1xuICAgICAgICBzcyhlLCBuLmtleSwgbyk7XG4gICAgICAgIGNvbnN0IGwgPSB0aGlzLnIucmVuZGVyZXJzO1xuICAgICAgICBjb25zdCBoID0gaS5wcm9wcztcbiAgICAgICAgY29uc3QgYSA9IGgubGVuZ3RoO1xuICAgICAgICBsZXQgYyA9IDA7XG4gICAgICAgIGxldCB1O1xuICAgICAgICB3aGlsZSAoYSA+IGMpIHtcbiAgICAgICAgICAgIHUgPSBoW2NdO1xuICAgICAgICAgICAgbFt1LnR5cGVdLnJlbmRlcih0LCBvLCB1KTtcbiAgICAgICAgICAgICsrYztcbiAgICAgICAgfVxuICAgICAgICB0LmFkZENoaWxkKG8pO1xuICAgIH1cbn07XG5cblBzID0gb3QoWyBScyhcInJiXCIpIF0sIFBzKTtcblxubGV0IE9zID0gY2xhc3MgVGVtcGxhdGVDb250cm9sbGVyUmVuZGVyZXIge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUpIHtcbiAgICAgICAgdGhpcy5yID0gdDtcbiAgICAgICAgdGhpcy5wID0gZTtcbiAgICB9XG4gICAgc3RhdGljIGdldCBpbmplY3QoKSB7XG4gICAgICAgIHJldHVybiBbIFBpLCBLdCBdO1xuICAgIH1cbiAgICByZW5kZXIodCwgZSwgaSkge1xuICAgICAgICB2YXIgcztcbiAgICAgICAgbGV0IG4gPSB0LmNvbnRhaW5lcjtcbiAgICAgICAgbGV0IHI7XG4gICAgICAgIHN3aXRjaCAodHlwZW9mIGkucmVzKSB7XG4gICAgICAgICAgY2FzZSBcInN0cmluZ1wiOlxuICAgICAgICAgICAgciA9IG4uZmluZChNZSwgaS5yZXMpO1xuICAgICAgICAgICAgaWYgKG51bGwgPT0gcikgdGhyb3cgbmV3IEVycm9yKGBBVVIwNzU0OiR7aS5yZXN9QCR7dFtcIm5hbWVcIl19YCk7XG4gICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICByID0gaS5yZXM7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgbyA9IHRoaXMuci5nZXRWaWV3RmFjdG9yeShpLmRlZiwgbik7XG4gICAgICAgIGNvbnN0IGwgPSB1cyhlKTtcbiAgICAgICAgY29uc3QgaCA9IHJuKHRoaXMucCwgciwgdCwgZSwgaSwgbywgbCk7XG4gICAgICAgIGNvbnN0IGEgPSBDb250cm9sbGVyLiRhdHRyKHQuY29udGFpbmVyLCBoLCBlLCByKTtcbiAgICAgICAgc3MobCwgci5rZXksIGEpO1xuICAgICAgICBudWxsID09PSAocyA9IGgubGluaykgfHwgdm9pZCAwID09PSBzID8gdm9pZCAwIDogcy5jYWxsKGgsIHQsIGEsIGUsIGkpO1xuICAgICAgICBjb25zdCBjID0gdGhpcy5yLnJlbmRlcmVycztcbiAgICAgICAgY29uc3QgdSA9IGkucHJvcHM7XG4gICAgICAgIGNvbnN0IGYgPSB1Lmxlbmd0aDtcbiAgICAgICAgbGV0IGQgPSAwO1xuICAgICAgICBsZXQgbTtcbiAgICAgICAgd2hpbGUgKGYgPiBkKSB7XG4gICAgICAgICAgICBtID0gdVtkXTtcbiAgICAgICAgICAgIGNbbS50eXBlXS5yZW5kZXIodCwgYSwgbSk7XG4gICAgICAgICAgICArK2Q7XG4gICAgICAgIH1cbiAgICAgICAgdC5hZGRDaGlsZChhKTtcbiAgICB9XG59O1xuXG5PcyA9IG90KFsgUnMoXCJyY1wiKSBdLCBPcyk7XG5cbmxldCAkcyA9IGNsYXNzIExldEVsZW1lbnRSZW5kZXJlciB7XG4gICAgY29uc3RydWN0b3IodCwgZSkge1xuICAgICAgICB0aGlzLmVwID0gdDtcbiAgICAgICAgdGhpcy5vTCA9IGU7XG4gICAgfVxuICAgIHJlbmRlcih0LCBlLCBpKSB7XG4gICAgICAgIGUucmVtb3ZlKCk7XG4gICAgICAgIGNvbnN0IHMgPSBpLmluc3RydWN0aW9ucztcbiAgICAgICAgY29uc3QgbiA9IGkudG9CaW5kaW5nQ29udGV4dDtcbiAgICAgICAgY29uc3QgciA9IHQuY29udGFpbmVyO1xuICAgICAgICBjb25zdCBvID0gcy5sZW5ndGg7XG4gICAgICAgIGxldCBsO1xuICAgICAgICBsZXQgaDtcbiAgICAgICAgbGV0IGE7XG4gICAgICAgIGxldCBjID0gMDtcbiAgICAgICAgd2hpbGUgKG8gPiBjKSB7XG4gICAgICAgICAgICBsID0gc1tjXTtcbiAgICAgICAgICAgIGggPSBFcyh0aGlzLmVwLCBsLmZyb20sIDgpO1xuICAgICAgICAgICAgYSA9IG5ldyBMZXRCaW5kaW5nKGgsIGwudG8sIHRoaXMub0wsIHIsIG4pO1xuICAgICAgICAgICAgdC5hZGRCaW5kaW5nKDM4OTYyID09PSBoLiRraW5kID8ganMoYSwgaCwgcikgOiBhKTtcbiAgICAgICAgICAgICsrYztcbiAgICAgICAgfVxuICAgIH1cbn07XG5cbiRzLmluamVjdCA9IFsgXywgViBdO1xuXG4kcyA9IG90KFsgUnMoXCJyZFwiKSBdLCAkcyk7XG5cbmxldCBMcyA9IGNsYXNzIENhbGxCaW5kaW5nUmVuZGVyZXIge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUpIHtcbiAgICAgICAgdGhpcy5lcCA9IHQ7XG4gICAgICAgIHRoaXMub0wgPSBlO1xuICAgIH1cbiAgICByZW5kZXIodCwgZSwgaSkge1xuICAgICAgICBjb25zdCBzID0gRXModGhpcy5lcCwgaS5mcm9tLCA4IHwgNCk7XG4gICAgICAgIGNvbnN0IG4gPSBuZXcgQ2FsbEJpbmRpbmcocywgQnMoZSksIGkudG8sIHRoaXMub0wsIHQuY29udGFpbmVyKTtcbiAgICAgICAgdC5hZGRCaW5kaW5nKDM4OTYyID09PSBzLiRraW5kID8ganMobiwgcywgdC5jb250YWluZXIpIDogbik7XG4gICAgfVxufTtcblxuTHMuaW5qZWN0ID0gWyBfLCBWIF07XG5cbkxzID0gb3QoWyBScyhcInJoXCIpIF0sIExzKTtcblxubGV0IHFzID0gY2xhc3MgUmVmQmluZGluZ1JlbmRlcmVyIHtcbiAgICBjb25zdHJ1Y3Rvcih0KSB7XG4gICAgICAgIHRoaXMuZXAgPSB0O1xuICAgIH1cbiAgICByZW5kZXIodCwgZSwgaSkge1xuICAgICAgICBjb25zdCBzID0gRXModGhpcy5lcCwgaS5mcm9tLCA4KTtcbiAgICAgICAgY29uc3QgbiA9IG5ldyBSZWZCaW5kaW5nKHMsIElzKGUsIGkudG8pLCB0LmNvbnRhaW5lcik7XG4gICAgICAgIHQuYWRkQmluZGluZygzODk2MiA9PT0gcy4ka2luZCA/IGpzKG4sIHMsIHQuY29udGFpbmVyKSA6IG4pO1xuICAgIH1cbn07XG5cbnFzLmluamVjdCA9IFsgXyBdO1xuXG5xcyA9IG90KFsgUnMoXCJyalwiKSBdLCBxcyk7XG5cbmxldCBNcyA9IGNsYXNzIEludGVycG9sYXRpb25CaW5kaW5nUmVuZGVyZXIge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUsIGkpIHtcbiAgICAgICAgdGhpcy5lcCA9IHQ7XG4gICAgICAgIHRoaXMub0wgPSBlO1xuICAgICAgICB0aGlzLnAgPSBpO1xuICAgIH1cbiAgICByZW5kZXIodCwgZSwgaSkge1xuICAgICAgICBjb25zdCBzID0gdC5jb250YWluZXI7XG4gICAgICAgIGNvbnN0IG4gPSBFcyh0aGlzLmVwLCBpLmZyb20sIDEpO1xuICAgICAgICBjb25zdCByID0gbmV3IEludGVycG9sYXRpb25CaW5kaW5nKHRoaXMub0wsIG4sIEJzKGUpLCBpLnRvLCBELnRvVmlldywgcywgdGhpcy5wLmRvbVdyaXRlUXVldWUpO1xuICAgICAgICBjb25zdCBvID0gci5wYXJ0QmluZGluZ3M7XG4gICAgICAgIGNvbnN0IGwgPSBvLmxlbmd0aDtcbiAgICAgICAgbGV0IGggPSAwO1xuICAgICAgICBsZXQgYTtcbiAgICAgICAgZm9yICg7bCA+IGg7ICsraCkge1xuICAgICAgICAgICAgYSA9IG9baF07XG4gICAgICAgICAgICBpZiAoMzg5NjIgPT09IGEuc291cmNlRXhwcmVzc2lvbi4ka2luZCkgb1toXSA9IGpzKGEsIGEuc291cmNlRXhwcmVzc2lvbiwgcyk7XG4gICAgICAgIH1cbiAgICAgICAgdC5hZGRCaW5kaW5nKHIpO1xuICAgIH1cbn07XG5cbk1zLmluamVjdCA9IFsgXywgViwgS3QgXTtcblxuTXMgPSBvdChbIFJzKFwicmZcIikgXSwgTXMpO1xuXG5sZXQgVXMgPSBjbGFzcyBQcm9wZXJ0eUJpbmRpbmdSZW5kZXJlciB7XG4gICAgY29uc3RydWN0b3IodCwgZSwgaSkge1xuICAgICAgICB0aGlzLmVwID0gdDtcbiAgICAgICAgdGhpcy5vTCA9IGU7XG4gICAgICAgIHRoaXMucCA9IGk7XG4gICAgfVxuICAgIHJlbmRlcih0LCBlLCBpKSB7XG4gICAgICAgIGNvbnN0IHMgPSBFcyh0aGlzLmVwLCBpLmZyb20sIDgpO1xuICAgICAgICBjb25zdCBuID0gbmV3IFByb3BlcnR5QmluZGluZyhzLCBCcyhlKSwgaS50bywgaS5tb2RlLCB0aGlzLm9MLCB0LmNvbnRhaW5lciwgdGhpcy5wLmRvbVdyaXRlUXVldWUpO1xuICAgICAgICB0LmFkZEJpbmRpbmcoMzg5NjIgPT09IHMuJGtpbmQgPyBqcyhuLCBzLCB0LmNvbnRhaW5lcikgOiBuKTtcbiAgICB9XG59O1xuXG5Vcy5pbmplY3QgPSBbIF8sIFYsIEt0IF07XG5cblVzID0gb3QoWyBScyhcInJnXCIpIF0sIFVzKTtcblxubGV0IEZzID0gY2xhc3MgSXRlcmF0b3JCaW5kaW5nUmVuZGVyZXIge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUsIGkpIHtcbiAgICAgICAgdGhpcy5lcCA9IHQ7XG4gICAgICAgIHRoaXMub0wgPSBlO1xuICAgICAgICB0aGlzLnAgPSBpO1xuICAgIH1cbiAgICByZW5kZXIodCwgZSwgaSkge1xuICAgICAgICBjb25zdCBzID0gRXModGhpcy5lcCwgaS5mcm9tLCAyKTtcbiAgICAgICAgY29uc3QgbiA9IG5ldyBQcm9wZXJ0eUJpbmRpbmcocywgQnMoZSksIGkudG8sIEQudG9WaWV3LCB0aGlzLm9MLCB0LmNvbnRhaW5lciwgdGhpcy5wLmRvbVdyaXRlUXVldWUpO1xuICAgICAgICB0LmFkZEJpbmRpbmcoMzg5NjIgPT09IHMuaXRlcmFibGUuJGtpbmQgPyBqcyhuLCBzLml0ZXJhYmxlLCB0LmNvbnRhaW5lcikgOiBuKTtcbiAgICB9XG59O1xuXG5Gcy5pbmplY3QgPSBbIF8sIFYsIEt0IF07XG5cbkZzID0gb3QoWyBScyhcInJrXCIpIF0sIEZzKTtcblxubGV0IFZzID0gMDtcblxuY29uc3QgX3MgPSBbXTtcblxuZnVuY3Rpb24ganModCwgZSwgaSkge1xuICAgIHdoaWxlIChlIGluc3RhbmNlb2YgVykge1xuICAgICAgICBfc1tWcysrXSA9IGU7XG4gICAgICAgIGUgPSBlLmV4cHJlc3Npb247XG4gICAgfVxuICAgIHdoaWxlIChWcyA+IDApIHtcbiAgICAgICAgY29uc3QgZSA9IF9zWy0tVnNdO1xuICAgICAgICBjb25zdCBzID0gaS5nZXQoZS5iZWhhdmlvcktleSk7XG4gICAgICAgIGlmIChzIGluc3RhbmNlb2YgSCkgdCA9IHMuY29uc3RydWN0KHQsIGUpO1xuICAgIH1cbiAgICBfcy5sZW5ndGggPSAwO1xuICAgIHJldHVybiB0O1xufVxuXG5sZXQgTnMgPSBjbGFzcyBUZXh0QmluZGluZ1JlbmRlcmVyIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlLCBpKSB7XG4gICAgICAgIHRoaXMuZXAgPSB0O1xuICAgICAgICB0aGlzLm9MID0gZTtcbiAgICAgICAgdGhpcy5wID0gaTtcbiAgICB9XG4gICAgcmVuZGVyKHQsIGUsIGkpIHtcbiAgICAgICAgY29uc3QgcyA9IHQuY29udGFpbmVyO1xuICAgICAgICBjb25zdCBuID0gZS5uZXh0U2libGluZztcbiAgICAgICAgY29uc3QgciA9IGUucGFyZW50Tm9kZTtcbiAgICAgICAgY29uc3QgbyA9IHRoaXMucC5kb2N1bWVudDtcbiAgICAgICAgY29uc3QgbCA9IEVzKHRoaXMuZXAsIGkuZnJvbSwgMSk7XG4gICAgICAgIGNvbnN0IGggPSBsLnBhcnRzO1xuICAgICAgICBjb25zdCBhID0gbC5leHByZXNzaW9ucztcbiAgICAgICAgY29uc3QgYyA9IGEubGVuZ3RoO1xuICAgICAgICBsZXQgdSA9IDA7XG4gICAgICAgIGxldCBmID0gaFswXTtcbiAgICAgICAgbGV0IGQ7XG4gICAgICAgIGxldCBtO1xuICAgICAgICBpZiAoXCJcIiAhPT0gZikgci5pbnNlcnRCZWZvcmUoby5jcmVhdGVUZXh0Tm9kZShmKSwgbik7XG4gICAgICAgIGZvciAoO2MgPiB1OyArK3UpIHtcbiAgICAgICAgICAgIG0gPSBhW3VdO1xuICAgICAgICAgICAgZCA9IG5ldyBDb250ZW50QmluZGluZyhtLCByLmluc2VydEJlZm9yZShvLmNyZWF0ZVRleHROb2RlKFwiXCIpLCBuKSwgcywgdGhpcy5vTCwgdGhpcy5wLCBpLnN0cmljdCk7XG4gICAgICAgICAgICB0LmFkZEJpbmRpbmcoMzg5NjIgPT09IG0uJGtpbmQgPyBqcyhkLCBtLCBzKSA6IGQpO1xuICAgICAgICAgICAgZiA9IGhbdSArIDFdO1xuICAgICAgICAgICAgaWYgKFwiXCIgIT09IGYpIHIuaW5zZXJ0QmVmb3JlKG8uY3JlYXRlVGV4dE5vZGUoZiksIG4pO1xuICAgICAgICB9XG4gICAgICAgIGlmIChcIkFVLU1cIiA9PT0gZS5ub2RlTmFtZSkgZS5yZW1vdmUoKTtcbiAgICB9XG59O1xuXG5Ocy5pbmplY3QgPSBbIF8sIFYsIEt0IF07XG5cbk5zID0gb3QoWyBScyhcImhhXCIpIF0sIE5zKTtcblxubGV0IFdzID0gY2xhc3MgTGlzdGVuZXJCaW5kaW5nUmVuZGVyZXIge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUsIGkpIHtcbiAgICAgICAgdGhpcy5lcCA9IHQ7XG4gICAgICAgIHRoaXMudGUgPSBlO1xuICAgICAgICB0aGlzLnAgPSBpO1xuICAgIH1cbiAgICByZW5kZXIodCwgZSwgaSkge1xuICAgICAgICBjb25zdCBzID0gRXModGhpcy5lcCwgaS5mcm9tLCA0KTtcbiAgICAgICAgY29uc3QgbiA9IG5ldyBMaXN0ZW5lcih0aGlzLnAsIGkudG8sIGkuc3RyYXRlZ3ksIHMsIGUsIGkucHJldmVudERlZmF1bHQsIHRoaXMudGUsIHQuY29udGFpbmVyKTtcbiAgICAgICAgdC5hZGRCaW5kaW5nKDM4OTYyID09PSBzLiRraW5kID8ganMobiwgcywgdC5jb250YWluZXIpIDogbik7XG4gICAgfVxufTtcblxuV3MuaW5qZWN0ID0gWyBfLCB3cywgS3QgXTtcblxuV3MgPSBvdChbIFJzKFwiaGJcIikgXSwgV3MpO1xuXG5sZXQgSHMgPSBjbGFzcyBTZXRBdHRyaWJ1dGVSZW5kZXJlciB7XG4gICAgcmVuZGVyKHQsIGUsIGkpIHtcbiAgICAgICAgZS5zZXRBdHRyaWJ1dGUoaS50bywgaS52YWx1ZSk7XG4gICAgfVxufTtcblxuSHMgPSBvdChbIFJzKFwiaGVcIikgXSwgSHMpO1xuXG5sZXQgenMgPSBjbGFzcyBTZXRDbGFzc0F0dHJpYnV0ZVJlbmRlcmVyIHtcbiAgICByZW5kZXIodCwgZSwgaSkge1xuICAgICAgICBRcyhlLmNsYXNzTGlzdCwgaS52YWx1ZSk7XG4gICAgfVxufTtcblxuenMgPSBvdChbIFJzKFwiaGZcIikgXSwgenMpO1xuXG5sZXQgR3MgPSBjbGFzcyBTZXRTdHlsZUF0dHJpYnV0ZVJlbmRlcmVyIHtcbiAgICByZW5kZXIodCwgZSwgaSkge1xuICAgICAgICBlLnN0eWxlLmNzc1RleHQgKz0gaS52YWx1ZTtcbiAgICB9XG59O1xuXG5HcyA9IG90KFsgUnMoXCJoZ1wiKSBdLCBHcyk7XG5cbmxldCBYcyA9IGNsYXNzIFN0eWxlUHJvcGVydHlCaW5kaW5nUmVuZGVyZXIge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUsIGkpIHtcbiAgICAgICAgdGhpcy5lcCA9IHQ7XG4gICAgICAgIHRoaXMub0wgPSBlO1xuICAgICAgICB0aGlzLnAgPSBpO1xuICAgIH1cbiAgICByZW5kZXIodCwgZSwgaSkge1xuICAgICAgICBjb25zdCBzID0gRXModGhpcy5lcCwgaS5mcm9tLCA4KTtcbiAgICAgICAgY29uc3QgbiA9IG5ldyBQcm9wZXJ0eUJpbmRpbmcocywgZS5zdHlsZSwgaS50bywgRC50b1ZpZXcsIHRoaXMub0wsIHQuY29udGFpbmVyLCB0aGlzLnAuZG9tV3JpdGVRdWV1ZSk7XG4gICAgICAgIHQuYWRkQmluZGluZygzODk2MiA9PT0gcy4ka2luZCA/IGpzKG4sIHMsIHQuY29udGFpbmVyKSA6IG4pO1xuICAgIH1cbn07XG5cblhzLmluamVjdCA9IFsgXywgViwgS3QgXTtcblxuWHMgPSBvdChbIFJzKFwiaGRcIikgXSwgWHMpO1xuXG5sZXQgS3MgPSBjbGFzcyBBdHRyaWJ1dGVCaW5kaW5nUmVuZGVyZXIge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUpIHtcbiAgICAgICAgdGhpcy5lcCA9IHQ7XG4gICAgICAgIHRoaXMub0wgPSBlO1xuICAgIH1cbiAgICByZW5kZXIodCwgZSwgaSkge1xuICAgICAgICBjb25zdCBzID0gRXModGhpcy5lcCwgaS5mcm9tLCA4KTtcbiAgICAgICAgY29uc3QgbiA9IG5ldyBBdHRyaWJ1dGVCaW5kaW5nKHMsIGUsIGkuYXR0ciwgaS50bywgRC50b1ZpZXcsIHRoaXMub0wsIHQuY29udGFpbmVyKTtcbiAgICAgICAgdC5hZGRCaW5kaW5nKDM4OTYyID09PSBzLiRraW5kID8ganMobiwgcywgdC5jb250YWluZXIpIDogbik7XG4gICAgfVxufTtcblxuS3MuaW5qZWN0ID0gWyBfLCBWIF07XG5cbktzID0gb3QoWyBScyhcImhjXCIpIF0sIEtzKTtcblxubGV0IFlzID0gY2xhc3MgU3ByZWFkUmVuZGVyZXIge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUpIHtcbiAgICAgICAgdGhpcy5lZSA9IHQ7XG4gICAgICAgIHRoaXMuciA9IGU7XG4gICAgfVxuICAgIHN0YXRpYyBnZXQgaW5qZWN0KCkge1xuICAgICAgICByZXR1cm4gWyBBcywgUGkgXTtcbiAgICB9XG4gICAgcmVuZGVyKHQsIGUsIGkpIHtcbiAgICAgICAgY29uc3QgcyA9IHQuY29udGFpbmVyO1xuICAgICAgICBjb25zdCBuID0gcy5nZXQoS2kpO1xuICAgICAgICBjb25zdCByID0gdGhpcy5yLnJlbmRlcmVycztcbiAgICAgICAgY29uc3QgbyA9IHQgPT4ge1xuICAgICAgICAgICAgbGV0IGUgPSB0O1xuICAgICAgICAgICAgbGV0IGkgPSBuO1xuICAgICAgICAgICAgd2hpbGUgKG51bGwgIT0gaSAmJiBlID4gMCkge1xuICAgICAgICAgICAgICAgIGkgPSBpLnBhcmVudDtcbiAgICAgICAgICAgICAgICAtLWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAobnVsbCA9PSBpKSB0aHJvdyBuZXcgRXJyb3IoXCJObyBzY29wZSBjb250ZXh0IGZvciBzcHJlYWQgYmluZGluZy5cIik7XG4gICAgICAgICAgICByZXR1cm4gaTtcbiAgICAgICAgfTtcbiAgICAgICAgY29uc3QgbCA9IGkgPT4ge1xuICAgICAgICAgICAgdmFyIHMsIG47XG4gICAgICAgICAgICBjb25zdCBhID0gbyhpKTtcbiAgICAgICAgICAgIGNvbnN0IGMgPSBacyhhKTtcbiAgICAgICAgICAgIGNvbnN0IHUgPSB0aGlzLmVlLmNvbXBpbGVTcHJlYWQoYS5jb250cm9sbGVyLmRlZmluaXRpb24sIG51bGwgIT09IChuID0gbnVsbCA9PT0gKHMgPSBhLmluc3RydWN0aW9uKSB8fCB2b2lkIDAgPT09IHMgPyB2b2lkIDAgOiBzLmNhcHR1cmVzKSAmJiB2b2lkIDAgIT09IG4gPyBuIDogaCwgYS5jb250cm9sbGVyLmNvbnRhaW5lciwgZSk7XG4gICAgICAgICAgICBsZXQgZjtcbiAgICAgICAgICAgIGZvciAoZiBvZiB1KSBzd2l0Y2ggKGYudHlwZSkge1xuICAgICAgICAgICAgICBjYXNlIFwiaHNcIjpcbiAgICAgICAgICAgICAgICBsKGkgKyAxKTtcbiAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgICBjYXNlIFwiaHBcIjpcbiAgICAgICAgICAgICAgICByW2YuaW5zdHJ1Y3Rpb25zLnR5cGVdLnJlbmRlcihjLCBzaS5mb3IoZSksIGYuaW5zdHJ1Y3Rpb25zKTtcbiAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIHJbZi50eXBlXS5yZW5kZXIoYywgZSwgZik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0LmFkZEJpbmRpbmcoYyk7XG4gICAgICAgIH07XG4gICAgICAgIGwoMCk7XG4gICAgfVxufTtcblxuWXMgPSBvdChbIFJzKFwiaHNcIikgXSwgWXMpO1xuXG5jbGFzcyBTcHJlYWRCaW5kaW5nIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlKSB7XG4gICAgICAgIHRoaXMuaWUgPSB0O1xuICAgICAgICB0aGlzLnNlID0gZTtcbiAgICAgICAgdGhpcy5pbnRlcmNlcHRvciA9IHRoaXM7XG4gICAgICAgIHRoaXMuaXNCb3VuZCA9IGZhbHNlO1xuICAgICAgICB0aGlzLmN0cmwgPSBlLmNvbnRyb2xsZXI7XG4gICAgICAgIHRoaXMubG9jYXRvciA9IHRoaXMuY3RybC5jb250YWluZXI7XG4gICAgfVxuICAgIGdldCBjb250YWluZXIoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmxvY2F0b3I7XG4gICAgfVxuICAgIGdldCBkZWZpbml0aW9uKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5jdHJsLmRlZmluaXRpb247XG4gICAgfVxuICAgIGdldCBpc1N0cmljdEJpbmRpbmcoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmN0cmwuaXNTdHJpY3RCaW5kaW5nO1xuICAgIH1cbiAgICAkYmluZCh0LCBlKSB7XG4gICAgICAgIHZhciBpO1xuICAgICAgICBpZiAodGhpcy5pc0JvdW5kKSByZXR1cm47XG4gICAgICAgIHRoaXMuaXNCb3VuZCA9IHRydWU7XG4gICAgICAgIGNvbnN0IHMgPSB0aGlzLiRzY29wZSA9IG51bGwgIT09IChpID0gdGhpcy5zZS5jb250cm9sbGVyLnNjb3BlLnBhcmVudFNjb3BlKSAmJiB2b2lkIDAgIT09IGkgPyBpIDogdm9pZCAwO1xuICAgICAgICBpZiAobnVsbCA9PSBzKSB0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIHNwcmVhZGluZy4gQ29udGV4dCBzY29wZSBpcyBudWxsL3VuZGVmaW5lZFwiKTtcbiAgICAgICAgdGhpcy5pZS5mb3JFYWNoKChlID0+IGUuJGJpbmQodCwgcykpKTtcbiAgICB9XG4gICAgJHVuYmluZCh0KSB7XG4gICAgICAgIHRoaXMuaWUuZm9yRWFjaCgoZSA9PiBlLiR1bmJpbmQodCkpKTtcbiAgICAgICAgdGhpcy5pc0JvdW5kID0gZmFsc2U7XG4gICAgfVxuICAgIGFkZEJpbmRpbmcodCkge1xuICAgICAgICB0aGlzLmllLnB1c2godCk7XG4gICAgfVxuICAgIGFkZENoaWxkKHQpIHtcbiAgICAgICAgaWYgKDEgIT09IHQudm1LaW5kKSB0aHJvdyBuZXcgRXJyb3IoXCJTcHJlYWQgYmluZGluZyBkb2VzIG5vdCBzdXBwb3J0IHNwcmVhZGluZyBjdXN0b20gYXR0cmlidXRlcy90ZW1wbGF0ZSBjb250cm9sbGVyc1wiKTtcbiAgICAgICAgdGhpcy5jdHJsLmFkZENoaWxkKHQpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gUXModCwgZSkge1xuICAgIGNvbnN0IGkgPSBlLmxlbmd0aDtcbiAgICBsZXQgcyA9IDA7XG4gICAgZm9yIChsZXQgbiA9IDA7IG4gPCBpOyArK24pIGlmICgzMiA9PT0gZS5jaGFyQ29kZUF0KG4pKSB7XG4gICAgICAgIGlmIChuICE9PSBzKSB0LmFkZChlLnNsaWNlKHMsIG4pKTtcbiAgICAgICAgcyA9IG4gKyAxO1xuICAgIH0gZWxzZSBpZiAobiArIDEgPT09IGkpIHQuYWRkKGUuc2xpY2UocykpO1xufVxuXG5jb25zdCBacyA9IHQgPT4gbmV3IFNwcmVhZEJpbmRpbmcoW10sIHQpO1xuXG5jb25zdCBKcyA9IFwiSUNvbnRyb2xsZXJcIjtcblxuY29uc3QgdG4gPSBcIklJbnN0cnVjdGlvblwiO1xuXG5jb25zdCBlbiA9IFwiSVJlbmRlckxvY2F0aW9uXCI7XG5cbmNvbnN0IHNuID0gXCJJQXVTbG90c0luZm9cIjtcblxuZnVuY3Rpb24gbm4odCwgZSwgaSwgcywgbiwgcikge1xuICAgIGNvbnN0IG8gPSBlLmNvbnRhaW5lci5jcmVhdGVDaGlsZCgpO1xuICAgIG8ucmVnaXN0ZXJSZXNvbHZlcih0LkhUTUxFbGVtZW50LCBvLnJlZ2lzdGVyUmVzb2x2ZXIodC5FbGVtZW50LCBvLnJlZ2lzdGVyUmVzb2x2ZXIobnMsIG5ldyB4KFwiRWxlbWVudFJlc29sdmVyXCIsIGkpKSkpO1xuICAgIG8ucmVnaXN0ZXJSZXNvbHZlcihYaSwgbmV3IHgoSnMsIGUpKTtcbiAgICBvLnJlZ2lzdGVyUmVzb2x2ZXIoa3MsIG5ldyB4KHRuLCBzKSk7XG4gICAgby5yZWdpc3RlclJlc29sdmVyKG9zLCBudWxsID09IG4gPyBvbiA6IG5ldyB4KGVuLCBuKSk7XG4gICAgby5yZWdpc3RlclJlc29sdmVyKEFpLCBsbik7XG4gICAgby5yZWdpc3RlclJlc29sdmVyKHhzLCBudWxsID09IHIgPyBobiA6IG5ldyB4KHNuLCByKSk7XG4gICAgcmV0dXJuIG87XG59XG5cbmNsYXNzIFZpZXdGYWN0b3J5UHJvdmlkZXIge1xuICAgIGNvbnN0cnVjdG9yKHQpIHtcbiAgICAgICAgdGhpcy5mID0gdDtcbiAgICB9XG4gICAgZ2V0ICRpc1Jlc29sdmVyKCkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgcmVzb2x2ZSgpIHtcbiAgICAgICAgY29uc3QgdCA9IHRoaXMuZjtcbiAgICAgICAgaWYgKG51bGwgPT09IHQpIHRocm93IG5ldyBFcnJvcihcIkFVUjcwNTVcIik7XG4gICAgICAgIGlmICghQXQodC5uYW1lKSB8fCAwID09PSB0Lm5hbWUubGVuZ3RoKSB0aHJvdyBuZXcgRXJyb3IoXCJBVVIwNzU2XCIpO1xuICAgICAgICByZXR1cm4gdDtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIHJuKHQsIGUsIGksIHMsIG4sIHIsIG8sIGwpIHtcbiAgICBjb25zdCBoID0gaS5jb250YWluZXIuY3JlYXRlQ2hpbGQoKTtcbiAgICBoLnJlZ2lzdGVyUmVzb2x2ZXIodC5IVE1MRWxlbWVudCwgaC5yZWdpc3RlclJlc29sdmVyKHQuRWxlbWVudCwgaC5yZWdpc3RlclJlc29sdmVyKG5zLCBuZXcgeChcIkVsZW1lbnRSZXNvbHZlclwiLCBzKSkpKTtcbiAgICBpID0gaSBpbnN0YW5jZW9mIENvbnRyb2xsZXIgPyBpIDogaS5jdHJsO1xuICAgIGgucmVnaXN0ZXJSZXNvbHZlcihYaSwgbmV3IHgoSnMsIGkpKTtcbiAgICBoLnJlZ2lzdGVyUmVzb2x2ZXIoa3MsIG5ldyB4KHRuLCBuKSk7XG4gICAgaC5yZWdpc3RlclJlc29sdmVyKG9zLCBudWxsID09IG8gPyBvbiA6IG5ldyB4KGVuLCBvKSk7XG4gICAgaC5yZWdpc3RlclJlc29sdmVyKEFpLCBudWxsID09IHIgPyBsbiA6IG5ldyBWaWV3RmFjdG9yeVByb3ZpZGVyKHIpKTtcbiAgICBoLnJlZ2lzdGVyUmVzb2x2ZXIoeHMsIG51bGwgPT0gbCA/IGhuIDogbmV3IHgoc24sIGwpKTtcbiAgICByZXR1cm4gaC5pbnZva2UoZS5UeXBlKTtcbn1cblxuY29uc3Qgb24gPSBuZXcgeChlbik7XG5cbmNvbnN0IGxuID0gbmV3IFZpZXdGYWN0b3J5UHJvdmlkZXIobnVsbCk7XG5cbmNvbnN0IGhuID0gbmV3IHgoc24sIG5ldyBBdVNsb3RzSW5mbyhoKSk7XG5cbnZhciBhbjtcblxuKGZ1bmN0aW9uKHQpIHtcbiAgICB0W3RbXCJOb25lXCJdID0gMF0gPSBcIk5vbmVcIjtcbiAgICB0W3RbXCJJZ25vcmVBdHRyXCJdID0gMV0gPSBcIklnbm9yZUF0dHJcIjtcbn0pKGFuIHx8IChhbiA9IHt9KSk7XG5cbmZ1bmN0aW9uIGNuKHQpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24oZSkge1xuICAgICAgICByZXR1cm4gbW4uZGVmaW5lKHQsIGUpO1xuICAgIH07XG59XG5cbmNsYXNzIEJpbmRpbmdDb21tYW5kRGVmaW5pdGlvbiB7XG4gICAgY29uc3RydWN0b3IodCwgZSwgaSwgcywgbikge1xuICAgICAgICB0aGlzLlR5cGUgPSB0O1xuICAgICAgICB0aGlzLm5hbWUgPSBlO1xuICAgICAgICB0aGlzLmFsaWFzZXMgPSBpO1xuICAgICAgICB0aGlzLmtleSA9IHM7XG4gICAgICAgIHRoaXMudHlwZSA9IG47XG4gICAgfVxuICAgIHN0YXRpYyBjcmVhdGUodCwgZSkge1xuICAgICAgICBsZXQgaTtcbiAgICAgICAgbGV0IHM7XG4gICAgICAgIGlmIChBdCh0KSkge1xuICAgICAgICAgICAgaSA9IHQ7XG4gICAgICAgICAgICBzID0ge1xuICAgICAgICAgICAgICAgIG5hbWU6IGlcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBpID0gdC5uYW1lO1xuICAgICAgICAgICAgcyA9IHQ7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5ldyBCaW5kaW5nQ29tbWFuZERlZmluaXRpb24oZSwgbihkbihlLCBcIm5hbWVcIiksIGkpLCBmKGRuKGUsIFwiYWxpYXNlc1wiKSwgcy5hbGlhc2VzLCBlLmFsaWFzZXMpLCBmbihpKSwgbihkbihlLCBcInR5cGVcIiksIHMudHlwZSwgZS50eXBlLCBudWxsKSk7XG4gICAgfVxuICAgIHJlZ2lzdGVyKHQpIHtcbiAgICAgICAgY29uc3Qge1R5cGU6IGUsIGtleTogaSwgYWxpYXNlczogc30gPSB0aGlzO1xuICAgICAgICBjLnNpbmdsZXRvbihpLCBlKS5yZWdpc3Rlcih0KTtcbiAgICAgICAgYy5hbGlhc1RvKGksIGUpLnJlZ2lzdGVyKHQpO1xuICAgICAgICBMKHMsIG1uLCBpLCB0KTtcbiAgICB9XG59XG5cbmNvbnN0IHVuID0gbXQoXCJiaW5kaW5nLWNvbW1hbmRcIik7XG5cbmNvbnN0IGZuID0gdCA9PiBgJHt1bn06JHt0fWA7XG5cbmNvbnN0IGRuID0gKHQsIGUpID0+IGh0KGR0KGUpLCB0KTtcblxuY29uc3QgbW4gPSBPYmplY3QuZnJlZXplKHtcbiAgICBuYW1lOiB1bixcbiAgICBrZXlGcm9tOiBmbixcbiAgICBkZWZpbmUodCwgZSkge1xuICAgICAgICBjb25zdCBpID0gQmluZGluZ0NvbW1hbmREZWZpbml0aW9uLmNyZWF0ZSh0LCBlKTtcbiAgICAgICAgY3QodW4sIGksIGkuVHlwZSk7XG4gICAgICAgIGN0KHVuLCBpLCBpKTtcbiAgICAgICAgdnQoZSwgdW4pO1xuICAgICAgICByZXR1cm4gaS5UeXBlO1xuICAgIH0sXG4gICAgZ2V0QW5ub3RhdGlvbjogZG5cbn0pO1xuXG5sZXQgdm4gPSBjbGFzcyBPbmVUaW1lQmluZGluZ0NvbW1hbmQge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUpIHtcbiAgICAgICAgdGhpcy50eXBlID0gMDtcbiAgICAgICAgdGhpcy5tID0gdDtcbiAgICAgICAgdGhpcy5lcCA9IGU7XG4gICAgfVxuICAgIGdldCBuYW1lKCkge1xuICAgICAgICByZXR1cm4gXCJvbmUtdGltZVwiO1xuICAgIH1cbiAgICBidWlsZCh0KSB7XG4gICAgICAgIHZhciBlO1xuICAgICAgICBjb25zdCBpID0gdC5hdHRyO1xuICAgICAgICBsZXQgcyA9IGkudGFyZ2V0O1xuICAgICAgICBsZXQgbiA9IHQuYXR0ci5yYXdWYWx1ZTtcbiAgICAgICAgaWYgKG51bGwgPT0gdC5iaW5kYWJsZSkgcyA9IG51bGwgIT09IChlID0gdGhpcy5tLm1hcCh0Lm5vZGUsIHMpKSAmJiB2b2lkIDAgIT09IGUgPyBlIDogUyhzKTsgZWxzZSB7XG4gICAgICAgICAgICBpZiAoXCJcIiA9PT0gbiAmJiAxID09PSB0LmRlZi50eXBlKSBuID0gUyhzKTtcbiAgICAgICAgICAgIHMgPSB0LmJpbmRhYmxlLnByb3BlcnR5O1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBuZXcgUHJvcGVydHlCaW5kaW5nSW5zdHJ1Y3Rpb24odGhpcy5lcC5wYXJzZShuLCA4KSwgcywgRC5vbmVUaW1lKTtcbiAgICB9XG59O1xuXG52bi5pbmplY3QgPSBbIFp0LCBfIF07XG5cbnZuID0gb3QoWyBjbihcIm9uZS10aW1lXCIpIF0sIHZuKTtcblxubGV0IHBuID0gY2xhc3MgVG9WaWV3QmluZGluZ0NvbW1hbmQge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUpIHtcbiAgICAgICAgdGhpcy50eXBlID0gMDtcbiAgICAgICAgdGhpcy5tID0gdDtcbiAgICAgICAgdGhpcy5lcCA9IGU7XG4gICAgfVxuICAgIGdldCBuYW1lKCkge1xuICAgICAgICByZXR1cm4gXCJ0by12aWV3XCI7XG4gICAgfVxuICAgIGJ1aWxkKHQpIHtcbiAgICAgICAgdmFyIGU7XG4gICAgICAgIGNvbnN0IGkgPSB0LmF0dHI7XG4gICAgICAgIGxldCBzID0gaS50YXJnZXQ7XG4gICAgICAgIGxldCBuID0gdC5hdHRyLnJhd1ZhbHVlO1xuICAgICAgICBpZiAobnVsbCA9PSB0LmJpbmRhYmxlKSBzID0gbnVsbCAhPT0gKGUgPSB0aGlzLm0ubWFwKHQubm9kZSwgcykpICYmIHZvaWQgMCAhPT0gZSA/IGUgOiBTKHMpOyBlbHNlIHtcbiAgICAgICAgICAgIGlmIChcIlwiID09PSBuICYmIDEgPT09IHQuZGVmLnR5cGUpIG4gPSBTKHMpO1xuICAgICAgICAgICAgcyA9IHQuYmluZGFibGUucHJvcGVydHk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5ldyBQcm9wZXJ0eUJpbmRpbmdJbnN0cnVjdGlvbih0aGlzLmVwLnBhcnNlKG4sIDgpLCBzLCBELnRvVmlldyk7XG4gICAgfVxufTtcblxucG4uaW5qZWN0ID0gWyBadCwgXyBdO1xuXG5wbiA9IG90KFsgY24oXCJ0by12aWV3XCIpIF0sIHBuKTtcblxubGV0IGduID0gY2xhc3MgRnJvbVZpZXdCaW5kaW5nQ29tbWFuZCB7XG4gICAgY29uc3RydWN0b3IodCwgZSkge1xuICAgICAgICB0aGlzLnR5cGUgPSAwO1xuICAgICAgICB0aGlzLm0gPSB0O1xuICAgICAgICB0aGlzLmVwID0gZTtcbiAgICB9XG4gICAgZ2V0IG5hbWUoKSB7XG4gICAgICAgIHJldHVybiBcImZyb20tdmlld1wiO1xuICAgIH1cbiAgICBidWlsZCh0KSB7XG4gICAgICAgIHZhciBlO1xuICAgICAgICBjb25zdCBpID0gdC5hdHRyO1xuICAgICAgICBsZXQgcyA9IGkudGFyZ2V0O1xuICAgICAgICBsZXQgbiA9IGkucmF3VmFsdWU7XG4gICAgICAgIGlmIChudWxsID09IHQuYmluZGFibGUpIHMgPSBudWxsICE9PSAoZSA9IHRoaXMubS5tYXAodC5ub2RlLCBzKSkgJiYgdm9pZCAwICE9PSBlID8gZSA6IFMocyk7IGVsc2Uge1xuICAgICAgICAgICAgaWYgKFwiXCIgPT09IG4gJiYgMSA9PT0gdC5kZWYudHlwZSkgbiA9IFMocyk7XG4gICAgICAgICAgICBzID0gdC5iaW5kYWJsZS5wcm9wZXJ0eTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbmV3IFByb3BlcnR5QmluZGluZ0luc3RydWN0aW9uKHRoaXMuZXAucGFyc2UobiwgOCksIHMsIEQuZnJvbVZpZXcpO1xuICAgIH1cbn07XG5cbmduLmluamVjdCA9IFsgWnQsIF8gXTtcblxuZ24gPSBvdChbIGNuKFwiZnJvbS12aWV3XCIpIF0sIGduKTtcblxubGV0IHduID0gY2xhc3MgVHdvV2F5QmluZGluZ0NvbW1hbmQge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUpIHtcbiAgICAgICAgdGhpcy50eXBlID0gMDtcbiAgICAgICAgdGhpcy5tID0gdDtcbiAgICAgICAgdGhpcy5lcCA9IGU7XG4gICAgfVxuICAgIGdldCBuYW1lKCkge1xuICAgICAgICByZXR1cm4gXCJ0d28td2F5XCI7XG4gICAgfVxuICAgIGJ1aWxkKHQpIHtcbiAgICAgICAgdmFyIGU7XG4gICAgICAgIGNvbnN0IGkgPSB0LmF0dHI7XG4gICAgICAgIGxldCBzID0gaS50YXJnZXQ7XG4gICAgICAgIGxldCBuID0gaS5yYXdWYWx1ZTtcbiAgICAgICAgaWYgKG51bGwgPT0gdC5iaW5kYWJsZSkgcyA9IG51bGwgIT09IChlID0gdGhpcy5tLm1hcCh0Lm5vZGUsIHMpKSAmJiB2b2lkIDAgIT09IGUgPyBlIDogUyhzKTsgZWxzZSB7XG4gICAgICAgICAgICBpZiAoXCJcIiA9PT0gbiAmJiAxID09PSB0LmRlZi50eXBlKSBuID0gUyhzKTtcbiAgICAgICAgICAgIHMgPSB0LmJpbmRhYmxlLnByb3BlcnR5O1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBuZXcgUHJvcGVydHlCaW5kaW5nSW5zdHJ1Y3Rpb24odGhpcy5lcC5wYXJzZShuLCA4KSwgcywgRC50d29XYXkpO1xuICAgIH1cbn07XG5cbnduLmluamVjdCA9IFsgWnQsIF8gXTtcblxud24gPSBvdChbIGNuKFwidHdvLXdheVwiKSBdLCB3bik7XG5cbmxldCBibiA9IGNsYXNzIERlZmF1bHRCaW5kaW5nQ29tbWFuZCB7XG4gICAgY29uc3RydWN0b3IodCwgZSkge1xuICAgICAgICB0aGlzLnR5cGUgPSAwO1xuICAgICAgICB0aGlzLm0gPSB0O1xuICAgICAgICB0aGlzLmVwID0gZTtcbiAgICB9XG4gICAgZ2V0IG5hbWUoKSB7XG4gICAgICAgIHJldHVybiBcImJpbmRcIjtcbiAgICB9XG4gICAgYnVpbGQodCkge1xuICAgICAgICB2YXIgZTtcbiAgICAgICAgY29uc3QgaSA9IHQuYXR0cjtcbiAgICAgICAgY29uc3QgcyA9IHQuYmluZGFibGU7XG4gICAgICAgIGxldCBuO1xuICAgICAgICBsZXQgcjtcbiAgICAgICAgbGV0IG8gPSBpLnRhcmdldDtcbiAgICAgICAgbGV0IGwgPSBpLnJhd1ZhbHVlO1xuICAgICAgICBpZiAobnVsbCA9PSBzKSB7XG4gICAgICAgICAgICByID0gdGhpcy5tLmlzVHdvV2F5KHQubm9kZSwgbykgPyBELnR3b1dheSA6IEQudG9WaWV3O1xuICAgICAgICAgICAgbyA9IG51bGwgIT09IChlID0gdGhpcy5tLm1hcCh0Lm5vZGUsIG8pKSAmJiB2b2lkIDAgIT09IGUgPyBlIDogUyhvKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGlmIChcIlwiID09PSBsICYmIDEgPT09IHQuZGVmLnR5cGUpIGwgPSBTKG8pO1xuICAgICAgICAgICAgbiA9IHQuZGVmLmRlZmF1bHRCaW5kaW5nTW9kZTtcbiAgICAgICAgICAgIHIgPSBzLm1vZGUgPT09IEQuZGVmYXVsdCB8fCBudWxsID09IHMubW9kZSA/IG51bGwgPT0gbiB8fCBuID09PSBELmRlZmF1bHQgPyBELnRvVmlldyA6IG4gOiBzLm1vZGU7XG4gICAgICAgICAgICBvID0gcy5wcm9wZXJ0eTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbmV3IFByb3BlcnR5QmluZGluZ0luc3RydWN0aW9uKHRoaXMuZXAucGFyc2UobCwgOCksIG8sIHIpO1xuICAgIH1cbn07XG5cbmJuLmluamVjdCA9IFsgWnQsIF8gXTtcblxuYm4gPSBvdChbIGNuKFwiYmluZFwiKSBdLCBibik7XG5cbmxldCB4biA9IGNsYXNzIENhbGxCaW5kaW5nQ29tbWFuZCB7XG4gICAgY29uc3RydWN0b3IodCkge1xuICAgICAgICB0aGlzLnR5cGUgPSAwO1xuICAgICAgICB0aGlzLmVwID0gdDtcbiAgICB9XG4gICAgZ2V0IG5hbWUoKSB7XG4gICAgICAgIHJldHVybiBcImNhbGxcIjtcbiAgICB9XG4gICAgYnVpbGQodCkge1xuICAgICAgICBjb25zdCBlID0gbnVsbCA9PT0gdC5iaW5kYWJsZSA/IFModC5hdHRyLnRhcmdldCkgOiB0LmJpbmRhYmxlLnByb3BlcnR5O1xuICAgICAgICByZXR1cm4gbmV3IENhbGxCaW5kaW5nSW5zdHJ1Y3Rpb24odGhpcy5lcC5wYXJzZSh0LmF0dHIucmF3VmFsdWUsIDggfCA0KSwgZSk7XG4gICAgfVxufTtcblxueG4uaW5qZWN0ID0gWyBfIF07XG5cbnhuID0gb3QoWyBjbihcImNhbGxcIikgXSwgeG4pO1xuXG5sZXQgeW4gPSBjbGFzcyBGb3JCaW5kaW5nQ29tbWFuZCB7XG4gICAgY29uc3RydWN0b3IodCkge1xuICAgICAgICB0aGlzLnR5cGUgPSAwO1xuICAgICAgICB0aGlzLmVwID0gdDtcbiAgICB9XG4gICAgZ2V0IG5hbWUoKSB7XG4gICAgICAgIHJldHVybiBcImZvclwiO1xuICAgIH1cbiAgICBidWlsZCh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSBudWxsID09PSB0LmJpbmRhYmxlID8gUyh0LmF0dHIudGFyZ2V0KSA6IHQuYmluZGFibGUucHJvcGVydHk7XG4gICAgICAgIHJldHVybiBuZXcgSXRlcmF0b3JCaW5kaW5nSW5zdHJ1Y3Rpb24odGhpcy5lcC5wYXJzZSh0LmF0dHIucmF3VmFsdWUsIDIpLCBlKTtcbiAgICB9XG59O1xuXG55bi5pbmplY3QgPSBbIF8gXTtcblxueW4gPSBvdChbIGNuKFwiZm9yXCIpIF0sIHluKTtcblxubGV0IGtuID0gY2xhc3MgVHJpZ2dlckJpbmRpbmdDb21tYW5kIHtcbiAgICBjb25zdHJ1Y3Rvcih0KSB7XG4gICAgICAgIHRoaXMudHlwZSA9IDE7XG4gICAgICAgIHRoaXMuZXAgPSB0O1xuICAgIH1cbiAgICBnZXQgbmFtZSgpIHtcbiAgICAgICAgcmV0dXJuIFwidHJpZ2dlclwiO1xuICAgIH1cbiAgICBidWlsZCh0KSB7XG4gICAgICAgIHJldHVybiBuZXcgTGlzdGVuZXJCaW5kaW5nSW5zdHJ1Y3Rpb24odGhpcy5lcC5wYXJzZSh0LmF0dHIucmF3VmFsdWUsIDQpLCB0LmF0dHIudGFyZ2V0LCB0cnVlLCBOLm5vbmUpO1xuICAgIH1cbn07XG5cbmtuLmluamVjdCA9IFsgXyBdO1xuXG5rbiA9IG90KFsgY24oXCJ0cmlnZ2VyXCIpIF0sIGtuKTtcblxubGV0IENuID0gY2xhc3MgRGVsZWdhdGVCaW5kaW5nQ29tbWFuZCB7XG4gICAgY29uc3RydWN0b3IodCkge1xuICAgICAgICB0aGlzLnR5cGUgPSAxO1xuICAgICAgICB0aGlzLmVwID0gdDtcbiAgICB9XG4gICAgZ2V0IG5hbWUoKSB7XG4gICAgICAgIHJldHVybiBcImRlbGVnYXRlXCI7XG4gICAgfVxuICAgIGJ1aWxkKHQpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBMaXN0ZW5lckJpbmRpbmdJbnN0cnVjdGlvbih0aGlzLmVwLnBhcnNlKHQuYXR0ci5yYXdWYWx1ZSwgNCksIHQuYXR0ci50YXJnZXQsIGZhbHNlLCBOLmJ1YmJsaW5nKTtcbiAgICB9XG59O1xuXG5Dbi5pbmplY3QgPSBbIF8gXTtcblxuQ24gPSBvdChbIGNuKFwiZGVsZWdhdGVcIikgXSwgQ24pO1xuXG5sZXQgQW4gPSBjbGFzcyBDYXB0dXJlQmluZGluZ0NvbW1hbmQge1xuICAgIGNvbnN0cnVjdG9yKHQpIHtcbiAgICAgICAgdGhpcy50eXBlID0gMTtcbiAgICAgICAgdGhpcy5lcCA9IHQ7XG4gICAgfVxuICAgIGdldCBuYW1lKCkge1xuICAgICAgICByZXR1cm4gXCJjYXB0dXJlXCI7XG4gICAgfVxuICAgIGJ1aWxkKHQpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBMaXN0ZW5lckJpbmRpbmdJbnN0cnVjdGlvbih0aGlzLmVwLnBhcnNlKHQuYXR0ci5yYXdWYWx1ZSwgNCksIHQuYXR0ci50YXJnZXQsIGZhbHNlLCBOLmNhcHR1cmluZyk7XG4gICAgfVxufTtcblxuQW4uaW5qZWN0ID0gWyBfIF07XG5cbkFuID0gb3QoWyBjbihcImNhcHR1cmVcIikgXSwgQW4pO1xuXG5sZXQgU24gPSBjbGFzcyBBdHRyQmluZGluZ0NvbW1hbmQge1xuICAgIGNvbnN0cnVjdG9yKHQpIHtcbiAgICAgICAgdGhpcy50eXBlID0gMTtcbiAgICAgICAgdGhpcy5lcCA9IHQ7XG4gICAgfVxuICAgIGdldCBuYW1lKCkge1xuICAgICAgICByZXR1cm4gXCJhdHRyXCI7XG4gICAgfVxuICAgIGJ1aWxkKHQpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBBdHRyaWJ1dGVCaW5kaW5nSW5zdHJ1Y3Rpb24odC5hdHRyLnRhcmdldCwgdGhpcy5lcC5wYXJzZSh0LmF0dHIucmF3VmFsdWUsIDgpLCB0LmF0dHIudGFyZ2V0KTtcbiAgICB9XG59O1xuXG5Tbi5pbmplY3QgPSBbIF8gXTtcblxuU24gPSBvdChbIGNuKFwiYXR0clwiKSBdLCBTbik7XG5cbmxldCBSbiA9IGNsYXNzIFN0eWxlQmluZGluZ0NvbW1hbmQge1xuICAgIGNvbnN0cnVjdG9yKHQpIHtcbiAgICAgICAgdGhpcy50eXBlID0gMTtcbiAgICAgICAgdGhpcy5lcCA9IHQ7XG4gICAgfVxuICAgIGdldCBuYW1lKCkge1xuICAgICAgICByZXR1cm4gXCJzdHlsZVwiO1xuICAgIH1cbiAgICBidWlsZCh0KSB7XG4gICAgICAgIHJldHVybiBuZXcgQXR0cmlidXRlQmluZGluZ0luc3RydWN0aW9uKFwic3R5bGVcIiwgdGhpcy5lcC5wYXJzZSh0LmF0dHIucmF3VmFsdWUsIDgpLCB0LmF0dHIudGFyZ2V0KTtcbiAgICB9XG59O1xuXG5Sbi5pbmplY3QgPSBbIF8gXTtcblxuUm4gPSBvdChbIGNuKFwic3R5bGVcIikgXSwgUm4pO1xuXG5sZXQgRW4gPSBjbGFzcyBDbGFzc0JpbmRpbmdDb21tYW5kIHtcbiAgICBjb25zdHJ1Y3Rvcih0KSB7XG4gICAgICAgIHRoaXMudHlwZSA9IDE7XG4gICAgICAgIHRoaXMuZXAgPSB0O1xuICAgIH1cbiAgICBnZXQgbmFtZSgpIHtcbiAgICAgICAgcmV0dXJuIFwiY2xhc3NcIjtcbiAgICB9XG4gICAgYnVpbGQodCkge1xuICAgICAgICByZXR1cm4gbmV3IEF0dHJpYnV0ZUJpbmRpbmdJbnN0cnVjdGlvbihcImNsYXNzXCIsIHRoaXMuZXAucGFyc2UodC5hdHRyLnJhd1ZhbHVlLCA4KSwgdC5hdHRyLnRhcmdldCk7XG4gICAgfVxufTtcblxuRW4uaW5qZWN0ID0gWyBfIF07XG5cbkVuID0gb3QoWyBjbihcImNsYXNzXCIpIF0sIEVuKTtcblxubGV0IEJuID0gY2xhc3MgUmVmQmluZGluZ0NvbW1hbmQge1xuICAgIGNvbnN0cnVjdG9yKHQpIHtcbiAgICAgICAgdGhpcy50eXBlID0gMTtcbiAgICAgICAgdGhpcy5lcCA9IHQ7XG4gICAgfVxuICAgIGdldCBuYW1lKCkge1xuICAgICAgICByZXR1cm4gXCJyZWZcIjtcbiAgICB9XG4gICAgYnVpbGQodCkge1xuICAgICAgICByZXR1cm4gbmV3IFJlZkJpbmRpbmdJbnN0cnVjdGlvbih0aGlzLmVwLnBhcnNlKHQuYXR0ci5yYXdWYWx1ZSwgOCksIHQuYXR0ci50YXJnZXQpO1xuICAgIH1cbn07XG5cbkJuLmluamVjdCA9IFsgXyBdO1xuXG5CbiA9IG90KFsgY24oXCJyZWZcIikgXSwgQm4pO1xuXG5sZXQgSW4gPSBjbGFzcyBTcHJlYWRCaW5kaW5nQ29tbWFuZCB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMudHlwZSA9IDE7XG4gICAgfVxuICAgIGdldCBuYW1lKCkge1xuICAgICAgICByZXR1cm4gXCIuLi4kYXR0cnNcIjtcbiAgICB9XG4gICAgYnVpbGQodCkge1xuICAgICAgICByZXR1cm4gbmV3IFNwcmVhZEJpbmRpbmdJbnN0cnVjdGlvbjtcbiAgICB9XG59O1xuXG5JbiA9IG90KFsgY24oXCIuLi4kYXR0cnNcIikgXSwgSW4pO1xuXG5jb25zdCBUbiA9IGwuY3JlYXRlSW50ZXJmYWNlKFwiSVRlbXBsYXRlRWxlbWVudEZhY3RvcnlcIiwgKHQgPT4gdC5zaW5nbGV0b24oVGVtcGxhdGVFbGVtZW50RmFjdG9yeSkpKTtcblxuY29uc3QgRG4gPSB7fTtcblxuY2xhc3MgVGVtcGxhdGVFbGVtZW50RmFjdG9yeSB7XG4gICAgY29uc3RydWN0b3IodCkge1xuICAgICAgICB0aGlzLnAgPSB0O1xuICAgICAgICB0aGlzLm5lID0gdC5kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwidGVtcGxhdGVcIik7XG4gICAgfVxuICAgIGNyZWF0ZVRlbXBsYXRlKHQpIHtcbiAgICAgICAgdmFyIGU7XG4gICAgICAgIGlmIChBdCh0KSkge1xuICAgICAgICAgICAgbGV0IGUgPSBEblt0XTtcbiAgICAgICAgICAgIGlmICh2b2lkIDAgPT09IGUpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBpID0gdGhpcy5uZTtcbiAgICAgICAgICAgICAgICBpLmlubmVySFRNTCA9IHQ7XG4gICAgICAgICAgICAgICAgY29uc3QgcyA9IGkuY29udGVudC5maXJzdEVsZW1lbnRDaGlsZDtcbiAgICAgICAgICAgICAgICBpZiAobnVsbCA9PSBzIHx8IFwiVEVNUExBVEVcIiAhPT0gcy5ub2RlTmFtZSB8fCBudWxsICE9IHMubmV4dEVsZW1lbnRTaWJsaW5nKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMubmUgPSB0aGlzLnAuZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInRlbXBsYXRlXCIpO1xuICAgICAgICAgICAgICAgICAgICBlID0gaTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBpLmNvbnRlbnQucmVtb3ZlQ2hpbGQocyk7XG4gICAgICAgICAgICAgICAgICAgIGUgPSBzO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBEblt0XSA9IGU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gZS5jbG9uZU5vZGUodHJ1ZSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKFwiVEVNUExBVEVcIiAhPT0gdC5ub2RlTmFtZSkge1xuICAgICAgICAgICAgY29uc3QgZSA9IHRoaXMucC5kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwidGVtcGxhdGVcIik7XG4gICAgICAgICAgICBlLmNvbnRlbnQuYXBwZW5kQ2hpbGQodCk7XG4gICAgICAgICAgICByZXR1cm4gZTtcbiAgICAgICAgfVxuICAgICAgICBudWxsID09PSAoZSA9IHQucGFyZW50Tm9kZSkgfHwgdm9pZCAwID09PSBlID8gdm9pZCAwIDogZS5yZW1vdmVDaGlsZCh0KTtcbiAgICAgICAgcmV0dXJuIHQuY2xvbmVOb2RlKHRydWUpO1xuICAgIH1cbn1cblxuVGVtcGxhdGVFbGVtZW50RmFjdG9yeS5pbmplY3QgPSBbIEt0IF07XG5cbmNvbnN0IFBuID0gZnVuY3Rpb24odCkge1xuICAgIGZ1bmN0aW9uIGUodCwgaSwgcykge1xuICAgICAgICBsLmluamVjdChlKSh0LCBpLCBzKTtcbiAgICB9XG4gICAgZS4kaXNSZXNvbHZlciA9IHRydWU7XG4gICAgZS5yZXNvbHZlID0gZnVuY3Rpb24oZSwgaSkge1xuICAgICAgICBpZiAoaS5yb290ID09PSBpKSByZXR1cm4gaS5nZXRBbGwodCwgZmFsc2UpO1xuICAgICAgICByZXR1cm4gaS5oYXModCwgZmFsc2UpID8gaS5nZXRBbGwodCwgZmFsc2UpLmNvbmNhdChpLnJvb3QuZ2V0QWxsKHQsIGZhbHNlKSkgOiBpLnJvb3QuZ2V0QWxsKHQsIGZhbHNlKTtcbiAgICB9O1xuICAgIHJldHVybiBlO1xufTtcblxuY2xhc3MgVGVtcGxhdGVDb21waWxlciB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMuZGVidWcgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5yZXNvbHZlUmVzb3VyY2VzID0gdHJ1ZTtcbiAgICB9XG4gICAgc3RhdGljIHJlZ2lzdGVyKHQpIHtcbiAgICAgICAgcmV0dXJuIGMuc2luZ2xldG9uKEFzLCB0aGlzKS5yZWdpc3Rlcih0KTtcbiAgICB9XG4gICAgY29tcGlsZSh0LCBlLCBpKSB7XG4gICAgICAgIHZhciBzLCBuLCByLCBvO1xuICAgICAgICBjb25zdCBsID0gQ3VzdG9tRWxlbWVudERlZmluaXRpb24uZ2V0T3JDcmVhdGUodCk7XG4gICAgICAgIGlmIChudWxsID09PSBsLnRlbXBsYXRlIHx8IHZvaWQgMCA9PT0gbC50ZW1wbGF0ZSkgcmV0dXJuIGw7XG4gICAgICAgIGlmIChmYWxzZSA9PT0gbC5uZWVkc0NvbXBpbGUpIHJldHVybiBsO1xuICAgICAgICBudWxsICE9PSBpICYmIHZvaWQgMCAhPT0gaSA/IGkgOiBpID0gTG47XG4gICAgICAgIGNvbnN0IGEgPSBuZXcgQ29tcGlsYXRpb25Db250ZXh0KHQsIGUsIGksIG51bGwsIG51bGwsIHZvaWQgMCk7XG4gICAgICAgIGNvbnN0IGMgPSBBdChsLnRlbXBsYXRlKSB8fCAhdC5lbmhhbmNlID8gYS5yZS5jcmVhdGVUZW1wbGF0ZShsLnRlbXBsYXRlKSA6IGwudGVtcGxhdGU7XG4gICAgICAgIGNvbnN0IHUgPSBcIlRFTVBMQVRFXCIgPT09IGMubm9kZU5hbWUgJiYgbnVsbCAhPSBjLmNvbnRlbnQ7XG4gICAgICAgIGNvbnN0IGYgPSB1ID8gYy5jb250ZW50IDogYztcbiAgICAgICAgY29uc3QgZCA9IGUuZ2V0KFBuKHpuKSk7XG4gICAgICAgIGNvbnN0IG0gPSBkLmxlbmd0aDtcbiAgICAgICAgbGV0IHYgPSAwO1xuICAgICAgICBpZiAobSA+IDApIHdoaWxlIChtID4gdikge1xuICAgICAgICAgICAgbnVsbCA9PT0gKG4gPSAocyA9IGRbdl0pLmNvbXBpbGluZykgfHwgdm9pZCAwID09PSBuID8gdm9pZCAwIDogbi5jYWxsKHMsIGMpO1xuICAgICAgICAgICAgKyt2O1xuICAgICAgICB9XG4gICAgICAgIGlmIChjLmhhc0F0dHJpYnV0ZShObikpIHRocm93IG5ldyBFcnJvcihcIkFVUjA3MDFcIik7XG4gICAgICAgIHRoaXMub2UoZiwgYSk7XG4gICAgICAgIHRoaXMubGUoZiwgYSk7XG4gICAgICAgIHJldHVybiBDdXN0b21FbGVtZW50RGVmaW5pdGlvbi5jcmVhdGUoe1xuICAgICAgICAgICAgLi4udCxcbiAgICAgICAgICAgIG5hbWU6IHQubmFtZSB8fCBRbigpLFxuICAgICAgICAgICAgZGVwZW5kZW5jaWVzOiAobnVsbCAhPT0gKHIgPSB0LmRlcGVuZGVuY2llcykgJiYgdm9pZCAwICE9PSByID8gciA6IGgpLmNvbmNhdChudWxsICE9PSAobyA9IGEuZGVwcykgJiYgdm9pZCAwICE9PSBvID8gbyA6IGgpLFxuICAgICAgICAgICAgaW5zdHJ1Y3Rpb25zOiBhLnJvd3MsXG4gICAgICAgICAgICBzdXJyb2dhdGVzOiB1ID8gdGhpcy5oZShjLCBhKSA6IGgsXG4gICAgICAgICAgICB0ZW1wbGF0ZTogYyxcbiAgICAgICAgICAgIGhhc1Nsb3RzOiBhLmhhc1Nsb3QsXG4gICAgICAgICAgICBuZWVkc0NvbXBpbGU6IGZhbHNlXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBjb21waWxlU3ByZWFkKHQsIGUsIGksIHMpIHtcbiAgICAgICAgdmFyIG47XG4gICAgICAgIGNvbnN0IHIgPSBuZXcgQ29tcGlsYXRpb25Db250ZXh0KHQsIGksIExuLCBudWxsLCBudWxsLCB2b2lkIDApO1xuICAgICAgICBjb25zdCBvID0gW107XG4gICAgICAgIGNvbnN0IGwgPSByLmFlKHMubm9kZU5hbWUudG9Mb3dlckNhc2UoKSk7XG4gICAgICAgIGNvbnN0IGggPSByLmVwO1xuICAgICAgICBjb25zdCBhID0gZS5sZW5ndGg7XG4gICAgICAgIGxldCBjID0gMDtcbiAgICAgICAgbGV0IHU7XG4gICAgICAgIGxldCBmID0gbnVsbDtcbiAgICAgICAgbGV0IGQ7XG4gICAgICAgIGxldCBtO1xuICAgICAgICBsZXQgdjtcbiAgICAgICAgbGV0IHA7XG4gICAgICAgIGxldCBnO1xuICAgICAgICBsZXQgdyA9IG51bGw7XG4gICAgICAgIGxldCBiO1xuICAgICAgICBsZXQgeDtcbiAgICAgICAgbGV0IHk7XG4gICAgICAgIGxldCBrO1xuICAgICAgICBmb3IgKDthID4gYzsgKytjKSB7XG4gICAgICAgICAgICB1ID0gZVtjXTtcbiAgICAgICAgICAgIHkgPSB1LnRhcmdldDtcbiAgICAgICAgICAgIGsgPSB1LnJhd1ZhbHVlO1xuICAgICAgICAgICAgdyA9IHIuY2UodSk7XG4gICAgICAgICAgICBpZiAobnVsbCAhPT0gdyAmJiAoMSAmIHcudHlwZSkgPiAwKSB7XG4gICAgICAgICAgICAgICAgTW4ubm9kZSA9IHM7XG4gICAgICAgICAgICAgICAgTW4uYXR0ciA9IHU7XG4gICAgICAgICAgICAgICAgTW4uYmluZGFibGUgPSBudWxsO1xuICAgICAgICAgICAgICAgIE1uLmRlZiA9IG51bGw7XG4gICAgICAgICAgICAgICAgby5wdXNoKHcuYnVpbGQoTW4pKTtcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGYgPSByLnVlKHkpO1xuICAgICAgICAgICAgaWYgKG51bGwgIT09IGYpIHtcbiAgICAgICAgICAgICAgICBpZiAoZi5pc1RlbXBsYXRlQ29udHJvbGxlcikgdGhyb3cgbmV3IEVycm9yKGBBVVIwNzAzOiR7eX1gKTtcbiAgICAgICAgICAgICAgICB2ID0gQmluZGFibGVzSW5mby5mcm9tKGYsIHRydWUpO1xuICAgICAgICAgICAgICAgIHggPSBmYWxzZSA9PT0gZi5ub011bHRpQmluZGluZ3MgJiYgbnVsbCA9PT0gdyAmJiBPbihrKTtcbiAgICAgICAgICAgICAgICBpZiAoeCkgbSA9IHRoaXMuZmUocywgaywgZiwgcik7IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBnID0gdi5wcmltYXJ5O1xuICAgICAgICAgICAgICAgICAgICBpZiAobnVsbCA9PT0gdykge1xuICAgICAgICAgICAgICAgICAgICAgICAgYiA9IGgucGFyc2UoaywgMSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBtID0gWyBudWxsID09PSBiID8gbmV3IFNldFByb3BlcnR5SW5zdHJ1Y3Rpb24oaywgZy5wcm9wZXJ0eSkgOiBuZXcgSW50ZXJwb2xhdGlvbkluc3RydWN0aW9uKGIsIGcucHJvcGVydHkpIF07XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBNbi5ub2RlID0gcztcbiAgICAgICAgICAgICAgICAgICAgICAgIE1uLmF0dHIgPSB1O1xuICAgICAgICAgICAgICAgICAgICAgICAgTW4uYmluZGFibGUgPSBnO1xuICAgICAgICAgICAgICAgICAgICAgICAgTW4uZGVmID0gZjtcbiAgICAgICAgICAgICAgICAgICAgICAgIG0gPSBbIHcuYnVpbGQoTW4pIF07XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgKG51bGwgIT09IGQgJiYgdm9pZCAwICE9PSBkID8gZCA6IGQgPSBbXSkucHVzaChuZXcgSHlkcmF0ZUF0dHJpYnV0ZUluc3RydWN0aW9uKHRoaXMucmVzb2x2ZVJlc291cmNlcyA/IGYgOiBmLm5hbWUsIG51bGwgIT0gZi5hbGlhc2VzICYmIGYuYWxpYXNlcy5pbmNsdWRlcyh5KSA/IHkgOiB2b2lkIDAsIG0pKTtcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChudWxsID09PSB3KSB7XG4gICAgICAgICAgICAgICAgYiA9IGgucGFyc2UoaywgMSk7XG4gICAgICAgICAgICAgICAgaWYgKG51bGwgIT09IGwpIHtcbiAgICAgICAgICAgICAgICAgICAgdiA9IEJpbmRhYmxlc0luZm8uZnJvbShsLCBmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgIHAgPSB2LmF0dHJzW3ldO1xuICAgICAgICAgICAgICAgICAgICBpZiAodm9pZCAwICE9PSBwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBiID0gaC5wYXJzZShrLCAxKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIG8ucHVzaChuZXcgU3ByZWFkRWxlbWVudFByb3BCaW5kaW5nSW5zdHJ1Y3Rpb24obnVsbCA9PSBiID8gbmV3IFNldFByb3BlcnR5SW5zdHJ1Y3Rpb24oaywgcC5wcm9wZXJ0eSkgOiBuZXcgSW50ZXJwb2xhdGlvbkluc3RydWN0aW9uKGIsIHAucHJvcGVydHkpKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAobnVsbCAhPSBiKSBvLnB1c2gobmV3IEludGVycG9sYXRpb25JbnN0cnVjdGlvbihiLCBudWxsICE9PSAobiA9IHIubS5tYXAocywgeSkpICYmIHZvaWQgMCAhPT0gbiA/IG4gOiBTKHkpKSk7IGVsc2Ugc3dpdGNoICh5KSB7XG4gICAgICAgICAgICAgICAgICBjYXNlIFwiY2xhc3NcIjpcbiAgICAgICAgICAgICAgICAgICAgby5wdXNoKG5ldyBTZXRDbGFzc0F0dHJpYnV0ZUluc3RydWN0aW9uKGspKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgICAgICAgIGNhc2UgXCJzdHlsZVwiOlxuICAgICAgICAgICAgICAgICAgICBvLnB1c2gobmV3IFNldFN0eWxlQXR0cmlidXRlSW5zdHJ1Y3Rpb24oaykpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgby5wdXNoKG5ldyBTZXRBdHRyaWJ1dGVJbnN0cnVjdGlvbihrLCB5KSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBpZiAobnVsbCAhPT0gbCkge1xuICAgICAgICAgICAgICAgICAgICB2ID0gQmluZGFibGVzSW5mby5mcm9tKGwsIGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgcCA9IHYuYXR0cnNbeV07XG4gICAgICAgICAgICAgICAgICAgIGlmICh2b2lkIDAgIT09IHApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIE1uLm5vZGUgPSBzO1xuICAgICAgICAgICAgICAgICAgICAgICAgTW4uYXR0ciA9IHU7XG4gICAgICAgICAgICAgICAgICAgICAgICBNbi5iaW5kYWJsZSA9IHA7XG4gICAgICAgICAgICAgICAgICAgICAgICBNbi5kZWYgPSBsO1xuICAgICAgICAgICAgICAgICAgICAgICAgby5wdXNoKG5ldyBTcHJlYWRFbGVtZW50UHJvcEJpbmRpbmdJbnN0cnVjdGlvbih3LmJ1aWxkKE1uKSkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgTW4ubm9kZSA9IHM7XG4gICAgICAgICAgICAgICAgTW4uYXR0ciA9IHU7XG4gICAgICAgICAgICAgICAgTW4uYmluZGFibGUgPSBudWxsO1xuICAgICAgICAgICAgICAgIE1uLmRlZiA9IG51bGw7XG4gICAgICAgICAgICAgICAgby5wdXNoKHcuYnVpbGQoTW4pKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICAkbigpO1xuICAgICAgICBpZiAobnVsbCAhPSBkKSByZXR1cm4gZC5jb25jYXQobyk7XG4gICAgICAgIHJldHVybiBvO1xuICAgIH1cbiAgICBoZSh0LCBlKSB7XG4gICAgICAgIHZhciBpO1xuICAgICAgICBjb25zdCBzID0gW107XG4gICAgICAgIGNvbnN0IG4gPSB0LmF0dHJpYnV0ZXM7XG4gICAgICAgIGNvbnN0IHIgPSBlLmVwO1xuICAgICAgICBsZXQgbyA9IG4ubGVuZ3RoO1xuICAgICAgICBsZXQgbCA9IDA7XG4gICAgICAgIGxldCBoO1xuICAgICAgICBsZXQgYTtcbiAgICAgICAgbGV0IGM7XG4gICAgICAgIGxldCB1O1xuICAgICAgICBsZXQgZiA9IG51bGw7XG4gICAgICAgIGxldCBkO1xuICAgICAgICBsZXQgbTtcbiAgICAgICAgbGV0IHY7XG4gICAgICAgIGxldCBwO1xuICAgICAgICBsZXQgZyA9IG51bGw7XG4gICAgICAgIGxldCB3O1xuICAgICAgICBsZXQgYjtcbiAgICAgICAgbGV0IHg7XG4gICAgICAgIGxldCB5O1xuICAgICAgICBmb3IgKDtvID4gbDsgKytsKSB7XG4gICAgICAgICAgICBoID0gbltsXTtcbiAgICAgICAgICAgIGEgPSBoLm5hbWU7XG4gICAgICAgICAgICBjID0gaC52YWx1ZTtcbiAgICAgICAgICAgIHUgPSBlLmRlLnBhcnNlKGEsIGMpO1xuICAgICAgICAgICAgeCA9IHUudGFyZ2V0O1xuICAgICAgICAgICAgeSA9IHUucmF3VmFsdWU7XG4gICAgICAgICAgICBpZiAoVW5beF0pIHRocm93IG5ldyBFcnJvcihgQVVSMDcwMjoke2F9YCk7XG4gICAgICAgICAgICBnID0gZS5jZSh1KTtcbiAgICAgICAgICAgIGlmIChudWxsICE9PSBnICYmICgxICYgZy50eXBlKSA+IDApIHtcbiAgICAgICAgICAgICAgICBNbi5ub2RlID0gdDtcbiAgICAgICAgICAgICAgICBNbi5hdHRyID0gdTtcbiAgICAgICAgICAgICAgICBNbi5iaW5kYWJsZSA9IG51bGw7XG4gICAgICAgICAgICAgICAgTW4uZGVmID0gbnVsbDtcbiAgICAgICAgICAgICAgICBzLnB1c2goZy5idWlsZChNbikpO1xuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZiA9IGUudWUoeCk7XG4gICAgICAgICAgICBpZiAobnVsbCAhPT0gZikge1xuICAgICAgICAgICAgICAgIGlmIChmLmlzVGVtcGxhdGVDb250cm9sbGVyKSB0aHJvdyBuZXcgRXJyb3IoYEFVUjA3MDM6JHt4fWApO1xuICAgICAgICAgICAgICAgIHYgPSBCaW5kYWJsZXNJbmZvLmZyb20oZiwgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgYiA9IGZhbHNlID09PSBmLm5vTXVsdGlCaW5kaW5ncyAmJiBudWxsID09PSBnICYmIE9uKHkpO1xuICAgICAgICAgICAgICAgIGlmIChiKSBtID0gdGhpcy5mZSh0LCB5LCBmLCBlKTsgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHAgPSB2LnByaW1hcnk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChudWxsID09PSBnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB3ID0gci5wYXJzZSh5LCAxKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIG0gPSBbIG51bGwgPT09IHcgPyBuZXcgU2V0UHJvcGVydHlJbnN0cnVjdGlvbih5LCBwLnByb3BlcnR5KSA6IG5ldyBJbnRlcnBvbGF0aW9uSW5zdHJ1Y3Rpb24odywgcC5wcm9wZXJ0eSkgXTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIE1uLm5vZGUgPSB0O1xuICAgICAgICAgICAgICAgICAgICAgICAgTW4uYXR0ciA9IHU7XG4gICAgICAgICAgICAgICAgICAgICAgICBNbi5iaW5kYWJsZSA9IHA7XG4gICAgICAgICAgICAgICAgICAgICAgICBNbi5kZWYgPSBmO1xuICAgICAgICAgICAgICAgICAgICAgICAgbSA9IFsgZy5idWlsZChNbikgXTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0LnJlbW92ZUF0dHJpYnV0ZShhKTtcbiAgICAgICAgICAgICAgICAtLWw7XG4gICAgICAgICAgICAgICAgLS1vO1xuICAgICAgICAgICAgICAgIChudWxsICE9PSBkICYmIHZvaWQgMCAhPT0gZCA/IGQgOiBkID0gW10pLnB1c2gobmV3IEh5ZHJhdGVBdHRyaWJ1dGVJbnN0cnVjdGlvbih0aGlzLnJlc29sdmVSZXNvdXJjZXMgPyBmIDogZi5uYW1lLCBudWxsICE9IGYuYWxpYXNlcyAmJiBmLmFsaWFzZXMuaW5jbHVkZXMoeCkgPyB4IDogdm9pZCAwLCBtKSk7XG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAobnVsbCA9PT0gZykge1xuICAgICAgICAgICAgICAgIHcgPSByLnBhcnNlKHksIDEpO1xuICAgICAgICAgICAgICAgIGlmIChudWxsICE9IHcpIHtcbiAgICAgICAgICAgICAgICAgICAgdC5yZW1vdmVBdHRyaWJ1dGUoYSk7XG4gICAgICAgICAgICAgICAgICAgIC0tbDtcbiAgICAgICAgICAgICAgICAgICAgLS1vO1xuICAgICAgICAgICAgICAgICAgICBzLnB1c2gobmV3IEludGVycG9sYXRpb25JbnN0cnVjdGlvbih3LCBudWxsICE9PSAoaSA9IGUubS5tYXAodCwgeCkpICYmIHZvaWQgMCAhPT0gaSA/IGkgOiBTKHgpKSk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHN3aXRjaCAoYSkge1xuICAgICAgICAgICAgICAgICAgY2FzZSBcImNsYXNzXCI6XG4gICAgICAgICAgICAgICAgICAgIHMucHVzaChuZXcgU2V0Q2xhc3NBdHRyaWJ1dGVJbnN0cnVjdGlvbih5KSk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICAgICAgICBjYXNlIFwic3R5bGVcIjpcbiAgICAgICAgICAgICAgICAgICAgcy5wdXNoKG5ldyBTZXRTdHlsZUF0dHJpYnV0ZUluc3RydWN0aW9uKHkpKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgIHMucHVzaChuZXcgU2V0QXR0cmlidXRlSW5zdHJ1Y3Rpb24oeSwgYSkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgTW4ubm9kZSA9IHQ7XG4gICAgICAgICAgICAgICAgTW4uYXR0ciA9IHU7XG4gICAgICAgICAgICAgICAgTW4uYmluZGFibGUgPSBudWxsO1xuICAgICAgICAgICAgICAgIE1uLmRlZiA9IG51bGw7XG4gICAgICAgICAgICAgICAgcy5wdXNoKGcuYnVpbGQoTW4pKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICAkbigpO1xuICAgICAgICBpZiAobnVsbCAhPSBkKSByZXR1cm4gZC5jb25jYXQocyk7XG4gICAgICAgIHJldHVybiBzO1xuICAgIH1cbiAgICBsZSh0LCBlKSB7XG4gICAgICAgIHN3aXRjaCAodC5ub2RlVHlwZSkge1xuICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgIHN3aXRjaCAodC5ub2RlTmFtZSkge1xuICAgICAgICAgICAgICBjYXNlIFwiTEVUXCI6XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMubWUodCwgZSk7XG5cbiAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy52ZSh0LCBlKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgIGNhc2UgMzpcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnBlKHQsIGUpO1xuXG4gICAgICAgICAgY2FzZSAxMTpcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBsZXQgaSA9IHQuZmlyc3RDaGlsZDtcbiAgICAgICAgICAgICAgICB3aGlsZSAobnVsbCAhPT0gaSkgaSA9IHRoaXMubGUoaSwgZSk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHQubmV4dFNpYmxpbmc7XG4gICAgfVxuICAgIG1lKHQsIGUpIHtcbiAgICAgICAgY29uc3QgaSA9IHQuYXR0cmlidXRlcztcbiAgICAgICAgY29uc3QgcyA9IGkubGVuZ3RoO1xuICAgICAgICBjb25zdCBuID0gW107XG4gICAgICAgIGNvbnN0IHIgPSBlLmVwO1xuICAgICAgICBsZXQgbyA9IGZhbHNlO1xuICAgICAgICBsZXQgbCA9IDA7XG4gICAgICAgIGxldCBoO1xuICAgICAgICBsZXQgYTtcbiAgICAgICAgbGV0IGM7XG4gICAgICAgIGxldCB1O1xuICAgICAgICBsZXQgZjtcbiAgICAgICAgbGV0IGQ7XG4gICAgICAgIGxldCBtO1xuICAgICAgICBsZXQgdjtcbiAgICAgICAgZm9yICg7cyA+IGw7ICsrbCkge1xuICAgICAgICAgICAgaCA9IGlbbF07XG4gICAgICAgICAgICBjID0gaC5uYW1lO1xuICAgICAgICAgICAgdSA9IGgudmFsdWU7XG4gICAgICAgICAgICBpZiAoXCJ0by1iaW5kaW5nLWNvbnRleHRcIiA9PT0gYykge1xuICAgICAgICAgICAgICAgIG8gPSB0cnVlO1xuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYSA9IGUuZGUucGFyc2UoYywgdSk7XG4gICAgICAgICAgICBkID0gYS50YXJnZXQ7XG4gICAgICAgICAgICBtID0gYS5yYXdWYWx1ZTtcbiAgICAgICAgICAgIGYgPSBlLmNlKGEpO1xuICAgICAgICAgICAgaWYgKG51bGwgIT09IGYpIHN3aXRjaCAoZi5uYW1lKSB7XG4gICAgICAgICAgICAgIGNhc2UgXCJ0by12aWV3XCI6XG4gICAgICAgICAgICAgIGNhc2UgXCJiaW5kXCI6XG4gICAgICAgICAgICAgICAgbi5wdXNoKG5ldyBMZXRCaW5kaW5nSW5zdHJ1Y3Rpb24oci5wYXJzZShtLCA4KSwgUyhkKSkpO1xuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuXG4gICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBBVVIwNzA0OiR7YS5jb21tYW5kfWApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdiA9IHIucGFyc2UobSwgMSk7XG4gICAgICAgICAgICBuLnB1c2gobmV3IExldEJpbmRpbmdJbnN0cnVjdGlvbihudWxsID09PSB2ID8gbmV3IHoobSkgOiB2LCBTKGQpKSk7XG4gICAgICAgIH1cbiAgICAgICAgZS5yb3dzLnB1c2goWyBuZXcgSHlkcmF0ZUxldEVsZW1lbnRJbnN0cnVjdGlvbihuLCBvKSBdKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2UodCkubmV4dFNpYmxpbmc7XG4gICAgfVxuICAgIHZlKHQsIGUpIHtcbiAgICAgICAgdmFyIGksIHMsIG4sIHIsIGwsIGE7XG4gICAgICAgIHZhciBjLCB1O1xuICAgICAgICBjb25zdCBmID0gdC5uZXh0U2libGluZztcbiAgICAgICAgY29uc3QgZCA9IChudWxsICE9PSAoaSA9IHQuZ2V0QXR0cmlidXRlKFwiYXMtZWxlbWVudFwiKSkgJiYgdm9pZCAwICE9PSBpID8gaSA6IHQubm9kZU5hbWUpLnRvTG93ZXJDYXNlKCk7XG4gICAgICAgIGNvbnN0IG0gPSBlLmFlKGQpO1xuICAgICAgICBjb25zdCB2ID0gISEobnVsbCA9PT0gbSB8fCB2b2lkIDAgPT09IG0gPyB2b2lkIDAgOiBtLmNhcHR1cmUpO1xuICAgICAgICBjb25zdCBwID0gdiA/IFtdIDogaDtcbiAgICAgICAgY29uc3QgZyA9IGUuZXA7XG4gICAgICAgIGNvbnN0IHcgPSB0aGlzLmRlYnVnID8gbyA6ICgpID0+IHtcbiAgICAgICAgICAgIHQucmVtb3ZlQXR0cmlidXRlKEEpO1xuICAgICAgICAgICAgLS1rO1xuICAgICAgICAgICAgLS15O1xuICAgICAgICB9O1xuICAgICAgICBsZXQgYiA9IHQuYXR0cmlidXRlcztcbiAgICAgICAgbGV0IHg7XG4gICAgICAgIGxldCB5ID0gYi5sZW5ndGg7XG4gICAgICAgIGxldCBrID0gMDtcbiAgICAgICAgbGV0IEM7XG4gICAgICAgIGxldCBBO1xuICAgICAgICBsZXQgUjtcbiAgICAgICAgbGV0IEU7XG4gICAgICAgIGxldCBCO1xuICAgICAgICBsZXQgSTtcbiAgICAgICAgbGV0IFQgPSBudWxsO1xuICAgICAgICBsZXQgRCA9IGZhbHNlO1xuICAgICAgICBsZXQgUDtcbiAgICAgICAgbGV0IE87XG4gICAgICAgIGxldCAkO1xuICAgICAgICBsZXQgTDtcbiAgICAgICAgbGV0IHE7XG4gICAgICAgIGxldCBNO1xuICAgICAgICBsZXQgVTtcbiAgICAgICAgbGV0IEYgPSBudWxsO1xuICAgICAgICBsZXQgVjtcbiAgICAgICAgbGV0IF87XG4gICAgICAgIGxldCBqO1xuICAgICAgICBsZXQgTjtcbiAgICAgICAgbGV0IFcgPSB0cnVlO1xuICAgICAgICBsZXQgSCA9IGZhbHNlO1xuICAgICAgICBpZiAoXCJzbG90XCIgPT09IGQpIGUucm9vdC5oYXNTbG90ID0gdHJ1ZTtcbiAgICAgICAgaWYgKG51bGwgIT09IG0pIHtcbiAgICAgICAgICAgIFcgPSBudWxsID09PSAocyA9IG0ucHJvY2Vzc0NvbnRlbnQpIHx8IHZvaWQgMCA9PT0gcyA/IHZvaWQgMCA6IHMuY2FsbChtLlR5cGUsIHQsIGUucCk7XG4gICAgICAgICAgICBiID0gdC5hdHRyaWJ1dGVzO1xuICAgICAgICAgICAgeSA9IGIubGVuZ3RoO1xuICAgICAgICB9XG4gICAgICAgIGlmIChlLnJvb3QuZGVmLmVuaGFuY2UgJiYgdC5jbGFzc0xpc3QuY29udGFpbnMoXCJhdVwiKSkgdGhyb3cgbmV3IEVycm9yKGBBVVIwNzA1YCk7XG4gICAgICAgIGZvciAoO3kgPiBrOyArK2spIHtcbiAgICAgICAgICAgIEMgPSBiW2tdO1xuICAgICAgICAgICAgQSA9IEMubmFtZTtcbiAgICAgICAgICAgIFIgPSBDLnZhbHVlO1xuICAgICAgICAgICAgc3dpdGNoIChBKSB7XG4gICAgICAgICAgICAgIGNhc2UgXCJhcy1lbGVtZW50XCI6XG4gICAgICAgICAgICAgIGNhc2UgXCJjb250YWluZXJsZXNzXCI6XG4gICAgICAgICAgICAgICAgdygpO1xuICAgICAgICAgICAgICAgIGlmICghSCkgSCA9IFwiY29udGFpbmVybGVzc1wiID09PSBBO1xuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgRSA9IGUuZGUucGFyc2UoQSwgUik7XG4gICAgICAgICAgICBGID0gZS5jZShFKTtcbiAgICAgICAgICAgIGogPSBFLnRhcmdldDtcbiAgICAgICAgICAgIE4gPSBFLnJhd1ZhbHVlO1xuICAgICAgICAgICAgaWYgKHYpIHtcbiAgICAgICAgICAgICAgICBpZiAobnVsbCAhPSBGICYmIDEgJiBGLnR5cGUpIHtcbiAgICAgICAgICAgICAgICAgICAgdygpO1xuICAgICAgICAgICAgICAgICAgICBwLnB1c2goRSk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoXCJhdS1zbG90XCIgIT09IGopIHtcbiAgICAgICAgICAgICAgICAgICAgViA9IEJpbmRhYmxlc0luZm8uZnJvbShtLCBmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChudWxsID09IFYuYXR0cnNbal0gJiYgIShudWxsID09PSAobiA9IGUudWUoaikpIHx8IHZvaWQgMCA9PT0gbiA/IHZvaWQgMCA6IG4uaXNUZW1wbGF0ZUNvbnRyb2xsZXIpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB3KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBwLnB1c2goRSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChudWxsICE9PSBGICYmIDEgJiBGLnR5cGUpIHtcbiAgICAgICAgICAgICAgICBNbi5ub2RlID0gdDtcbiAgICAgICAgICAgICAgICBNbi5hdHRyID0gRTtcbiAgICAgICAgICAgICAgICBNbi5iaW5kYWJsZSA9IG51bGw7XG4gICAgICAgICAgICAgICAgTW4uZGVmID0gbnVsbDtcbiAgICAgICAgICAgICAgICAobnVsbCAhPT0gQiAmJiB2b2lkIDAgIT09IEIgPyBCIDogQiA9IFtdKS5wdXNoKEYuYnVpbGQoTW4pKTtcbiAgICAgICAgICAgICAgICB3KCk7XG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBUID0gZS51ZShqKTtcbiAgICAgICAgICAgIGlmIChudWxsICE9PSBUKSB7XG4gICAgICAgICAgICAgICAgViA9IEJpbmRhYmxlc0luZm8uZnJvbShULCB0cnVlKTtcbiAgICAgICAgICAgICAgICBEID0gZmFsc2UgPT09IFQubm9NdWx0aUJpbmRpbmdzICYmIG51bGwgPT09IEYgJiYgT24oUik7XG4gICAgICAgICAgICAgICAgaWYgKEQpICQgPSB0aGlzLmZlKHQsIFIsIFQsIGUpOyBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgXyA9IFYucHJpbWFyeTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG51bGwgPT09IEYpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIE0gPSBnLnBhcnNlKFIsIDEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgJCA9IFsgbnVsbCA9PT0gTSA/IG5ldyBTZXRQcm9wZXJ0eUluc3RydWN0aW9uKFIsIF8ucHJvcGVydHkpIDogbmV3IEludGVycG9sYXRpb25JbnN0cnVjdGlvbihNLCBfLnByb3BlcnR5KSBdO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgTW4ubm9kZSA9IHQ7XG4gICAgICAgICAgICAgICAgICAgICAgICBNbi5hdHRyID0gRTtcbiAgICAgICAgICAgICAgICAgICAgICAgIE1uLmJpbmRhYmxlID0gXztcbiAgICAgICAgICAgICAgICAgICAgICAgIE1uLmRlZiA9IFQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAkID0gWyBGLmJ1aWxkKE1uKSBdO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHcoKTtcbiAgICAgICAgICAgICAgICBpZiAoVC5pc1RlbXBsYXRlQ29udHJvbGxlcikgKG51bGwgIT09IEwgJiYgdm9pZCAwICE9PSBMID8gTCA6IEwgPSBbXSkucHVzaChuZXcgSHlkcmF0ZVRlbXBsYXRlQ29udHJvbGxlcihxbiwgdGhpcy5yZXNvbHZlUmVzb3VyY2VzID8gVCA6IFQubmFtZSwgdm9pZCAwLCAkKSk7IGVsc2UgKG51bGwgIT09IE8gJiYgdm9pZCAwICE9PSBPID8gTyA6IE8gPSBbXSkucHVzaChuZXcgSHlkcmF0ZUF0dHJpYnV0ZUluc3RydWN0aW9uKHRoaXMucmVzb2x2ZVJlc291cmNlcyA/IFQgOiBULm5hbWUsIG51bGwgIT0gVC5hbGlhc2VzICYmIFQuYWxpYXNlcy5pbmNsdWRlcyhqKSA/IGogOiB2b2lkIDAsICQpKTtcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChudWxsID09PSBGKSB7XG4gICAgICAgICAgICAgICAgaWYgKG51bGwgIT09IG0pIHtcbiAgICAgICAgICAgICAgICAgICAgViA9IEJpbmRhYmxlc0luZm8uZnJvbShtLCBmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgIFAgPSBWLmF0dHJzW2pdO1xuICAgICAgICAgICAgICAgICAgICBpZiAodm9pZCAwICE9PSBQKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBNID0gZy5wYXJzZShOLCAxKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIChudWxsICE9PSBJICYmIHZvaWQgMCAhPT0gSSA/IEkgOiBJID0gW10pLnB1c2gobnVsbCA9PSBNID8gbmV3IFNldFByb3BlcnR5SW5zdHJ1Y3Rpb24oTiwgUC5wcm9wZXJ0eSkgOiBuZXcgSW50ZXJwb2xhdGlvbkluc3RydWN0aW9uKE0sIFAucHJvcGVydHkpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHcoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIE0gPSBnLnBhcnNlKE4sIDEpO1xuICAgICAgICAgICAgICAgIGlmIChudWxsICE9IE0pIHtcbiAgICAgICAgICAgICAgICAgICAgdygpO1xuICAgICAgICAgICAgICAgICAgICAobnVsbCAhPT0gQiAmJiB2b2lkIDAgIT09IEIgPyBCIDogQiA9IFtdKS5wdXNoKG5ldyBJbnRlcnBvbGF0aW9uSW5zdHJ1Y3Rpb24oTSwgbnVsbCAhPT0gKHIgPSBlLm0ubWFwKHQsIGopKSAmJiB2b2lkIDAgIT09IHIgPyByIDogUyhqKSkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHcoKTtcbiAgICAgICAgICAgIGlmIChudWxsICE9PSBtKSB7XG4gICAgICAgICAgICAgICAgViA9IEJpbmRhYmxlc0luZm8uZnJvbShtLCBmYWxzZSk7XG4gICAgICAgICAgICAgICAgUCA9IFYuYXR0cnNbal07XG4gICAgICAgICAgICAgICAgaWYgKHZvaWQgMCAhPT0gUCkge1xuICAgICAgICAgICAgICAgICAgICBNbi5ub2RlID0gdDtcbiAgICAgICAgICAgICAgICAgICAgTW4uYXR0ciA9IEU7XG4gICAgICAgICAgICAgICAgICAgIE1uLmJpbmRhYmxlID0gUDtcbiAgICAgICAgICAgICAgICAgICAgTW4uZGVmID0gbTtcbiAgICAgICAgICAgICAgICAgICAgKG51bGwgIT09IEkgJiYgdm9pZCAwICE9PSBJID8gSSA6IEkgPSBbXSkucHVzaChGLmJ1aWxkKE1uKSk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIE1uLm5vZGUgPSB0O1xuICAgICAgICAgICAgTW4uYXR0ciA9IEU7XG4gICAgICAgICAgICBNbi5iaW5kYWJsZSA9IG51bGw7XG4gICAgICAgICAgICBNbi5kZWYgPSBudWxsO1xuICAgICAgICAgICAgKG51bGwgIT09IEIgJiYgdm9pZCAwICE9PSBCID8gQiA6IEIgPSBbXSkucHVzaChGLmJ1aWxkKE1uKSk7XG4gICAgICAgIH1cbiAgICAgICAgJG4oKTtcbiAgICAgICAgaWYgKHRoaXMud2UodCkgJiYgbnVsbCAhPSBCICYmIEIubGVuZ3RoID4gMSkgdGhpcy5iZSh0LCBCKTtcbiAgICAgICAgaWYgKG51bGwgIT09IG0pIHtcbiAgICAgICAgICAgIFUgPSBuZXcgSHlkcmF0ZUVsZW1lbnRJbnN0cnVjdGlvbih0aGlzLnJlc29sdmVSZXNvdXJjZXMgPyBtIDogbS5uYW1lLCB2b2lkIDAsIG51bGwgIT09IEkgJiYgdm9pZCAwICE9PSBJID8gSSA6IGgsIG51bGwsIEgsIHApO1xuICAgICAgICAgICAgaWYgKFwiYXUtc2xvdFwiID09PSBkKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgaSA9IHQuZ2V0QXR0cmlidXRlKFwibmFtZVwiKSB8fCBcImRlZmF1bHRcIjtcbiAgICAgICAgICAgICAgICBjb25zdCBzID0gZS5oKFwidGVtcGxhdGVcIik7XG4gICAgICAgICAgICAgICAgY29uc3QgbiA9IGUueGUoKTtcbiAgICAgICAgICAgICAgICBsZXQgciA9IHQuZmlyc3RDaGlsZDtcbiAgICAgICAgICAgICAgICB3aGlsZSAobnVsbCAhPT0gcikge1xuICAgICAgICAgICAgICAgICAgICBpZiAoMSA9PT0gci5ub2RlVHlwZSAmJiByLmhhc0F0dHJpYnV0ZShcImF1LXNsb3RcIikpIHQucmVtb3ZlQ2hpbGQocik7IGVsc2Ugcy5jb250ZW50LmFwcGVuZENoaWxkKHIpO1xuICAgICAgICAgICAgICAgICAgICByID0gdC5maXJzdENoaWxkO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLmxlKHMuY29udGVudCwgbik7XG4gICAgICAgICAgICAgICAgVS5hdVNsb3QgPSB7XG4gICAgICAgICAgICAgICAgICAgIG5hbWU6IGksXG4gICAgICAgICAgICAgICAgICAgIGZhbGxiYWNrOiBDdXN0b21FbGVtZW50RGVmaW5pdGlvbi5jcmVhdGUoe1xuICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogUW4oKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBsYXRlOiBzLFxuICAgICAgICAgICAgICAgICAgICAgICAgaW5zdHJ1Y3Rpb25zOiBuLnJvd3MsXG4gICAgICAgICAgICAgICAgICAgICAgICBuZWVkc0NvbXBpbGU6IGZhbHNlXG4gICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICB0ID0gdGhpcy55ZSh0LCBlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAobnVsbCAhPSBCIHx8IG51bGwgIT0gVSB8fCBudWxsICE9IE8pIHtcbiAgICAgICAgICAgIHggPSBoLmNvbmNhdChudWxsICE9PSBVICYmIHZvaWQgMCAhPT0gVSA/IFUgOiBoLCBudWxsICE9PSBPICYmIHZvaWQgMCAhPT0gTyA/IE8gOiBoLCBudWxsICE9PSBCICYmIHZvaWQgMCAhPT0gQiA/IEIgOiBoKTtcbiAgICAgICAgICAgIHRoaXMuZ2UodCk7XG4gICAgICAgIH1cbiAgICAgICAgbGV0IHo7XG4gICAgICAgIGlmIChudWxsICE9IEwpIHtcbiAgICAgICAgICAgIHkgPSBMLmxlbmd0aCAtIDE7XG4gICAgICAgICAgICBrID0geTtcbiAgICAgICAgICAgIHEgPSBMW2tdO1xuICAgICAgICAgICAgbGV0IGk7XG4gICAgICAgICAgICB0aGlzLnllKHQsIGUpO1xuICAgICAgICAgICAgaWYgKFwiVEVNUExBVEVcIiA9PT0gdC5ub2RlTmFtZSkgaSA9IHQ7IGVsc2Uge1xuICAgICAgICAgICAgICAgIGkgPSBlLmgoXCJ0ZW1wbGF0ZVwiKTtcbiAgICAgICAgICAgICAgICBpLmNvbnRlbnQuYXBwZW5kQ2hpbGQodCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBzID0gaTtcbiAgICAgICAgICAgIGNvbnN0IG4gPSBlLnhlKG51bGwgPT0geCA/IFtdIDogWyB4IF0pO1xuICAgICAgICAgICAgbGV0IHI7XG4gICAgICAgICAgICBsZXQgbztcbiAgICAgICAgICAgIGxldCBoO1xuICAgICAgICAgICAgbGV0IGE7XG4gICAgICAgICAgICBsZXQgdTtcbiAgICAgICAgICAgIGxldCBmO1xuICAgICAgICAgICAgbGV0IHY7XG4gICAgICAgICAgICBsZXQgcDtcbiAgICAgICAgICAgIGxldCBnID0gMCwgdyA9IDA7XG4gICAgICAgICAgICBsZXQgYiA9IHQuZmlyc3RDaGlsZDtcbiAgICAgICAgICAgIGlmIChmYWxzZSAhPT0gVykgd2hpbGUgKG51bGwgIT09IGIpIGlmICgxID09PSBiLm5vZGVUeXBlKSB7XG4gICAgICAgICAgICAgICAgciA9IGI7XG4gICAgICAgICAgICAgICAgYiA9IGIubmV4dFNpYmxpbmc7XG4gICAgICAgICAgICAgICAgbyA9IHIuZ2V0QXR0cmlidXRlKFwiYXUtc2xvdFwiKTtcbiAgICAgICAgICAgICAgICBpZiAobnVsbCAhPT0gbykge1xuICAgICAgICAgICAgICAgICAgICBpZiAobnVsbCA9PT0gbSkgdGhyb3cgbmV3IEVycm9yKGBBVVIwNzA2OiR7ZH1bJHtvfV1gKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKFwiXCIgPT09IG8pIG8gPSBcImRlZmF1bHRcIjtcbiAgICAgICAgICAgICAgICAgICAgci5yZW1vdmVBdHRyaWJ1dGUoXCJhdS1zbG90XCIpO1xuICAgICAgICAgICAgICAgICAgICB0LnJlbW92ZUNoaWxkKHIpO1xuICAgICAgICAgICAgICAgICAgICAobnVsbCAhPT0gKGwgPSAoYyA9IG51bGwgIT09IGEgJiYgdm9pZCAwICE9PSBhID8gYSA6IGEgPSB7fSlbb10pICYmIHZvaWQgMCAhPT0gbCA/IGwgOiBjW29dID0gW10pLnB1c2gocik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIGIgPSBiLm5leHRTaWJsaW5nO1xuICAgICAgICAgICAgaWYgKG51bGwgIT0gYSkge1xuICAgICAgICAgICAgICAgIGggPSB7fTtcbiAgICAgICAgICAgICAgICBmb3IgKG8gaW4gYSkge1xuICAgICAgICAgICAgICAgICAgICBpID0gZS5oKFwidGVtcGxhdGVcIik7XG4gICAgICAgICAgICAgICAgICAgIHUgPSBhW29dO1xuICAgICAgICAgICAgICAgICAgICBmb3IgKGcgPSAwLCB3ID0gdS5sZW5ndGg7IHcgPiBnOyArK2cpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGYgPSB1W2ddO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKFwiVEVNUExBVEVcIiA9PT0gZi5ub2RlTmFtZSkgaWYgKGYuYXR0cmlidXRlcy5sZW5ndGggPiAwKSBpLmNvbnRlbnQuYXBwZW5kQ2hpbGQoZik7IGVsc2UgaS5jb250ZW50LmFwcGVuZENoaWxkKGYuY29udGVudCk7IGVsc2UgaS5jb250ZW50LmFwcGVuZENoaWxkKGYpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHAgPSBlLnhlKCk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMubGUoaS5jb250ZW50LCBwKTtcbiAgICAgICAgICAgICAgICAgICAgaFtvXSA9IEN1c3RvbUVsZW1lbnREZWZpbml0aW9uLmNyZWF0ZSh7XG4gICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiBRbigpLFxuICAgICAgICAgICAgICAgICAgICAgICAgdGVtcGxhdGU6IGksXG4gICAgICAgICAgICAgICAgICAgICAgICBpbnN0cnVjdGlvbnM6IHAucm93cyxcbiAgICAgICAgICAgICAgICAgICAgICAgIG5lZWRzQ29tcGlsZTogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgICAgICBpc1N0cmljdEJpbmRpbmc6IGUucm9vdC5kZWYuaXNTdHJpY3RCaW5kaW5nXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBVLnByb2plY3Rpb25zID0gaDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChudWxsICE9PSBtICYmIG0uY29udGFpbmVybGVzcykgdGhpcy55ZSh0LCBlKTtcbiAgICAgICAgICAgIHogPSBudWxsID09PSBtIHx8ICFtLmNvbnRhaW5lcmxlc3MgJiYgIUggJiYgZmFsc2UgIT09IFc7XG4gICAgICAgICAgICBpZiAoeikgaWYgKFwiVEVNUExBVEVcIiA9PT0gdC5ub2RlTmFtZSkgdGhpcy5sZSh0LmNvbnRlbnQsIG4pOyBlbHNlIHtcbiAgICAgICAgICAgICAgICBiID0gdC5maXJzdENoaWxkO1xuICAgICAgICAgICAgICAgIHdoaWxlIChudWxsICE9PSBiKSBiID0gdGhpcy5sZShiLCBuKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHEuZGVmID0gQ3VzdG9tRWxlbWVudERlZmluaXRpb24uY3JlYXRlKHtcbiAgICAgICAgICAgICAgICBuYW1lOiBRbigpLFxuICAgICAgICAgICAgICAgIHRlbXBsYXRlOiBzLFxuICAgICAgICAgICAgICAgIGluc3RydWN0aW9uczogbi5yb3dzLFxuICAgICAgICAgICAgICAgIG5lZWRzQ29tcGlsZTogZmFsc2UsXG4gICAgICAgICAgICAgICAgaXNTdHJpY3RCaW5kaW5nOiBlLnJvb3QuZGVmLmlzU3RyaWN0QmluZGluZ1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB3aGlsZSAoay0tID4gMCkge1xuICAgICAgICAgICAgICAgIHEgPSBMW2tdO1xuICAgICAgICAgICAgICAgIGkgPSBlLmgoXCJ0ZW1wbGF0ZVwiKTtcbiAgICAgICAgICAgICAgICB2ID0gZS5oKFwiYXUtbVwiKTtcbiAgICAgICAgICAgICAgICB2LmNsYXNzTGlzdC5hZGQoXCJhdVwiKTtcbiAgICAgICAgICAgICAgICBpLmNvbnRlbnQuYXBwZW5kQ2hpbGQodik7XG4gICAgICAgICAgICAgICAgcS5kZWYgPSBDdXN0b21FbGVtZW50RGVmaW5pdGlvbi5jcmVhdGUoe1xuICAgICAgICAgICAgICAgICAgICBuYW1lOiBRbigpLFxuICAgICAgICAgICAgICAgICAgICB0ZW1wbGF0ZTogaSxcbiAgICAgICAgICAgICAgICAgICAgbmVlZHNDb21waWxlOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgaW5zdHJ1Y3Rpb25zOiBbIFsgTFtrICsgMV0gXSBdLFxuICAgICAgICAgICAgICAgICAgICBpc1N0cmljdEJpbmRpbmc6IGUucm9vdC5kZWYuaXNTdHJpY3RCaW5kaW5nXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlLnJvd3MucHVzaChbIHEgXSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBpZiAobnVsbCAhPSB4KSBlLnJvd3MucHVzaCh4KTtcbiAgICAgICAgICAgIGxldCBpID0gdC5maXJzdENoaWxkO1xuICAgICAgICAgICAgbGV0IHM7XG4gICAgICAgICAgICBsZXQgbjtcbiAgICAgICAgICAgIGxldCByID0gbnVsbDtcbiAgICAgICAgICAgIGxldCBvO1xuICAgICAgICAgICAgbGV0IGw7XG4gICAgICAgICAgICBsZXQgaDtcbiAgICAgICAgICAgIGxldCBjO1xuICAgICAgICAgICAgbGV0IGY7XG4gICAgICAgICAgICBsZXQgZCA9IDAsIHYgPSAwO1xuICAgICAgICAgICAgaWYgKGZhbHNlICE9PSBXKSB3aGlsZSAobnVsbCAhPT0gaSkgaWYgKDEgPT09IGkubm9kZVR5cGUpIHtcbiAgICAgICAgICAgICAgICBzID0gaTtcbiAgICAgICAgICAgICAgICBpID0gaS5uZXh0U2libGluZztcbiAgICAgICAgICAgICAgICBuID0gcy5nZXRBdHRyaWJ1dGUoXCJhdS1zbG90XCIpO1xuICAgICAgICAgICAgICAgIGlmIChudWxsICE9PSBuKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChudWxsID09PSBtKSB0aHJvdyBuZXcgRXJyb3IoYEFVUjA3MDY6JHt0Lm5vZGVOYW1lfVske259XWApO1xuICAgICAgICAgICAgICAgICAgICBpZiAoXCJcIiA9PT0gbikgbiA9IFwiZGVmYXVsdFwiO1xuICAgICAgICAgICAgICAgICAgICB0LnJlbW92ZUNoaWxkKHMpO1xuICAgICAgICAgICAgICAgICAgICBzLnJlbW92ZUF0dHJpYnV0ZShcImF1LXNsb3RcIik7XG4gICAgICAgICAgICAgICAgICAgIChudWxsICE9PSAoYSA9ICh1ID0gbnVsbCAhPT0gbyAmJiB2b2lkIDAgIT09IG8gPyBvIDogbyA9IHt9KVtuXSkgJiYgdm9pZCAwICE9PSBhID8gYSA6IHVbbl0gPSBbXSkucHVzaChzKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2UgaSA9IGkubmV4dFNpYmxpbmc7XG4gICAgICAgICAgICBpZiAobnVsbCAhPSBvKSB7XG4gICAgICAgICAgICAgICAgciA9IHt9O1xuICAgICAgICAgICAgICAgIGZvciAobiBpbiBvKSB7XG4gICAgICAgICAgICAgICAgICAgIGMgPSBlLmgoXCJ0ZW1wbGF0ZVwiKTtcbiAgICAgICAgICAgICAgICAgICAgbCA9IG9bbl07XG4gICAgICAgICAgICAgICAgICAgIGZvciAoZCA9IDAsIHYgPSBsLmxlbmd0aDsgdiA+IGQ7ICsrZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaCA9IGxbZF07XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoXCJURU1QTEFURVwiID09PSBoLm5vZGVOYW1lKSBpZiAoaC5hdHRyaWJ1dGVzLmxlbmd0aCA+IDApIGMuY29udGVudC5hcHBlbmRDaGlsZChoKTsgZWxzZSBjLmNvbnRlbnQuYXBwZW5kQ2hpbGQoaC5jb250ZW50KTsgZWxzZSBjLmNvbnRlbnQuYXBwZW5kQ2hpbGQoaCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZiA9IGUueGUoKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5sZShjLmNvbnRlbnQsIGYpO1xuICAgICAgICAgICAgICAgICAgICByW25dID0gQ3VzdG9tRWxlbWVudERlZmluaXRpb24uY3JlYXRlKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6IFFuKCksXG4gICAgICAgICAgICAgICAgICAgICAgICB0ZW1wbGF0ZTogYyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGluc3RydWN0aW9uczogZi5yb3dzLFxuICAgICAgICAgICAgICAgICAgICAgICAgbmVlZHNDb21waWxlOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGlzU3RyaWN0QmluZGluZzogZS5yb290LmRlZi5pc1N0cmljdEJpbmRpbmdcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIFUucHJvamVjdGlvbnMgPSByO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKG51bGwgIT09IG0gJiYgbS5jb250YWluZXJsZXNzKSB0aGlzLnllKHQsIGUpO1xuICAgICAgICAgICAgeiA9IG51bGwgPT09IG0gfHwgIW0uY29udGFpbmVybGVzcyAmJiAhSCAmJiBmYWxzZSAhPT0gVztcbiAgICAgICAgICAgIGlmICh6ICYmIHQuY2hpbGROb2Rlcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgaSA9IHQuZmlyc3RDaGlsZDtcbiAgICAgICAgICAgICAgICB3aGlsZSAobnVsbCAhPT0gaSkgaSA9IHRoaXMubGUoaSwgZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGY7XG4gICAgfVxuICAgIHBlKHQsIGUpIHtcbiAgICAgICAgbGV0IGkgPSBcIlwiO1xuICAgICAgICBsZXQgcyA9IHQ7XG4gICAgICAgIHdoaWxlIChudWxsICE9PSBzICYmIDMgPT09IHMubm9kZVR5cGUpIHtcbiAgICAgICAgICAgIGkgKz0gcy50ZXh0Q29udGVudDtcbiAgICAgICAgICAgIHMgPSBzLm5leHRTaWJsaW5nO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IG4gPSBlLmVwLnBhcnNlKGksIDEpO1xuICAgICAgICBpZiAobnVsbCA9PT0gbikgcmV0dXJuIHM7XG4gICAgICAgIGNvbnN0IHIgPSB0LnBhcmVudE5vZGU7XG4gICAgICAgIHIuaW5zZXJ0QmVmb3JlKHRoaXMuZ2UoZS5oKFwiYXUtbVwiKSksIHQpO1xuICAgICAgICBlLnJvd3MucHVzaChbIG5ldyBUZXh0QmluZGluZ0luc3RydWN0aW9uKG4sICEhZS5kZWYuaXNTdHJpY3RCaW5kaW5nKSBdKTtcbiAgICAgICAgdC50ZXh0Q29udGVudCA9IFwiXCI7XG4gICAgICAgIHMgPSB0Lm5leHRTaWJsaW5nO1xuICAgICAgICB3aGlsZSAobnVsbCAhPT0gcyAmJiAzID09PSBzLm5vZGVUeXBlKSB7XG4gICAgICAgICAgICByLnJlbW92ZUNoaWxkKHMpO1xuICAgICAgICAgICAgcyA9IHQubmV4dFNpYmxpbmc7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHQubmV4dFNpYmxpbmc7XG4gICAgfVxuICAgIGZlKHQsIGUsIGksIHMpIHtcbiAgICAgICAgY29uc3QgbiA9IEJpbmRhYmxlc0luZm8uZnJvbShpLCB0cnVlKTtcbiAgICAgICAgY29uc3QgciA9IGUubGVuZ3RoO1xuICAgICAgICBjb25zdCBvID0gW107XG4gICAgICAgIGxldCBsO1xuICAgICAgICBsZXQgaDtcbiAgICAgICAgbGV0IGEgPSAwO1xuICAgICAgICBsZXQgYyA9IDA7XG4gICAgICAgIGxldCB1O1xuICAgICAgICBsZXQgZjtcbiAgICAgICAgbGV0IGQ7XG4gICAgICAgIGxldCBtO1xuICAgICAgICBmb3IgKGxldCB2ID0gMDsgdiA8IHI7ICsrdikge1xuICAgICAgICAgICAgYyA9IGUuY2hhckNvZGVBdCh2KTtcbiAgICAgICAgICAgIGlmICg5MiA9PT0gYykgKyt2OyBlbHNlIGlmICg1OCA9PT0gYykge1xuICAgICAgICAgICAgICAgIGwgPSBlLnNsaWNlKGEsIHYpO1xuICAgICAgICAgICAgICAgIHdoaWxlIChlLmNoYXJDb2RlQXQoKyt2KSA8PSAzMikgO1xuICAgICAgICAgICAgICAgIGEgPSB2O1xuICAgICAgICAgICAgICAgIGZvciAoO3YgPCByOyArK3YpIHtcbiAgICAgICAgICAgICAgICAgICAgYyA9IGUuY2hhckNvZGVBdCh2KTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKDkyID09PSBjKSArK3Y7IGVsc2UgaWYgKDU5ID09PSBjKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBoID0gZS5zbGljZShhLCB2KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmICh2b2lkIDAgPT09IGgpIGggPSBlLnNsaWNlKGEpO1xuICAgICAgICAgICAgICAgIGYgPSBzLmRlLnBhcnNlKGwsIGgpO1xuICAgICAgICAgICAgICAgIGQgPSBzLmNlKGYpO1xuICAgICAgICAgICAgICAgIG0gPSBuLmF0dHJzW2YudGFyZ2V0XTtcbiAgICAgICAgICAgICAgICBpZiAobnVsbCA9PSBtKSB0aHJvdyBuZXcgRXJyb3IoYEFVUjA3MDc6JHtpLm5hbWV9LiR7Zi50YXJnZXR9YCk7XG4gICAgICAgICAgICAgICAgaWYgKG51bGwgPT09IGQpIHtcbiAgICAgICAgICAgICAgICAgICAgdSA9IHMuZXAucGFyc2UoaCwgMSk7XG4gICAgICAgICAgICAgICAgICAgIG8ucHVzaChudWxsID09PSB1ID8gbmV3IFNldFByb3BlcnR5SW5zdHJ1Y3Rpb24oaCwgbS5wcm9wZXJ0eSkgOiBuZXcgSW50ZXJwb2xhdGlvbkluc3RydWN0aW9uKHUsIG0ucHJvcGVydHkpKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBNbi5ub2RlID0gdDtcbiAgICAgICAgICAgICAgICAgICAgTW4uYXR0ciA9IGY7XG4gICAgICAgICAgICAgICAgICAgIE1uLmJpbmRhYmxlID0gbTtcbiAgICAgICAgICAgICAgICAgICAgTW4uZGVmID0gaTtcbiAgICAgICAgICAgICAgICAgICAgby5wdXNoKGQuYnVpbGQoTW4pKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgd2hpbGUgKHYgPCByICYmIGUuY2hhckNvZGVBdCgrK3YpIDw9IDMyKSA7XG4gICAgICAgICAgICAgICAgYSA9IHY7XG4gICAgICAgICAgICAgICAgbCA9IHZvaWQgMDtcbiAgICAgICAgICAgICAgICBoID0gdm9pZCAwO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgICRuKCk7XG4gICAgICAgIHJldHVybiBvO1xuICAgIH1cbiAgICBvZSh0LCBlKSB7XG4gICAgICAgIGNvbnN0IGkgPSB0O1xuICAgICAgICBjb25zdCBzID0gUihpLnF1ZXJ5U2VsZWN0b3JBbGwoXCJ0ZW1wbGF0ZVthcy1jdXN0b20tZWxlbWVudF1cIikpO1xuICAgICAgICBjb25zdCBuID0gcy5sZW5ndGg7XG4gICAgICAgIGlmICgwID09PSBuKSByZXR1cm47XG4gICAgICAgIGlmIChuID09PSBpLmNoaWxkRWxlbWVudENvdW50KSB0aHJvdyBuZXcgRXJyb3IoXCJBVVIwNzA4XCIpO1xuICAgICAgICBjb25zdCByID0gbmV3IFNldDtcbiAgICAgICAgZm9yIChjb25zdCB0IG9mIHMpIHtcbiAgICAgICAgICAgIGlmICh0LnBhcmVudE5vZGUgIT09IGkpIHRocm93IG5ldyBFcnJvcihcIkFVUjA3MDlcIik7XG4gICAgICAgICAgICBjb25zdCBzID0gV24odCwgcik7XG4gICAgICAgICAgICBjb25zdCBuID0gY2xhc3MgTG9jYWxUZW1wbGF0ZSB7fTtcbiAgICAgICAgICAgIGNvbnN0IG8gPSB0LmNvbnRlbnQ7XG4gICAgICAgICAgICBjb25zdCBsID0gUihvLnF1ZXJ5U2VsZWN0b3JBbGwoXCJiaW5kYWJsZVwiKSk7XG4gICAgICAgICAgICBjb25zdCBoID0gQnQuZm9yKG4pO1xuICAgICAgICAgICAgY29uc3QgYSA9IG5ldyBTZXQ7XG4gICAgICAgICAgICBjb25zdCBjID0gbmV3IFNldDtcbiAgICAgICAgICAgIGZvciAoY29uc3QgdCBvZiBsKSB7XG4gICAgICAgICAgICAgICAgaWYgKHQucGFyZW50Tm9kZSAhPT0gbykgdGhyb3cgbmV3IEVycm9yKFwiQVVSMDcxMFwiKTtcbiAgICAgICAgICAgICAgICBjb25zdCBlID0gdC5nZXRBdHRyaWJ1dGUoXCJwcm9wZXJ0eVwiKTtcbiAgICAgICAgICAgICAgICBpZiAobnVsbCA9PT0gZSkgdGhyb3cgbmV3IEVycm9yKFwiQVVSMDcxMVwiKTtcbiAgICAgICAgICAgICAgICBjb25zdCBpID0gdC5nZXRBdHRyaWJ1dGUoXCJhdHRyaWJ1dGVcIik7XG4gICAgICAgICAgICAgICAgaWYgKG51bGwgIT09IGkgJiYgYy5oYXMoaSkgfHwgYS5oYXMoZSkpIHRocm93IG5ldyBFcnJvcihgQVVSMDcxMjoke2V9KyR7aX1gKTsgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChudWxsICE9PSBpKSBjLmFkZChpKTtcbiAgICAgICAgICAgICAgICAgICAgYS5hZGQoZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGguYWRkKHtcbiAgICAgICAgICAgICAgICAgICAgcHJvcGVydHk6IGUsXG4gICAgICAgICAgICAgICAgICAgIGF0dHJpYnV0ZTogbnVsbCAhPT0gaSAmJiB2b2lkIDAgIT09IGkgPyBpIDogdm9pZCAwLFxuICAgICAgICAgICAgICAgICAgICBtb2RlOiBIbih0KVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGNvbnN0IHMgPSB0LmdldEF0dHJpYnV0ZU5hbWVzKCkuZmlsdGVyKCh0ID0+ICFqbi5pbmNsdWRlcyh0KSkpO1xuICAgICAgICAgICAgICAgIGlmIChzLmxlbmd0aCA+IDApIDtcbiAgICAgICAgICAgICAgICBvLnJlbW92ZUNoaWxkKHQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZS5rZShzaS5kZWZpbmUoe1xuICAgICAgICAgICAgICAgIG5hbWU6IHMsXG4gICAgICAgICAgICAgICAgdGVtcGxhdGU6IHRcbiAgICAgICAgICAgIH0sIG4pKTtcbiAgICAgICAgICAgIGkucmVtb3ZlQ2hpbGQodCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgd2UodCkge1xuICAgICAgICByZXR1cm4gXCJJTlBVVFwiID09PSB0Lm5vZGVOYW1lICYmIDEgPT09IEZuW3QudHlwZV07XG4gICAgfVxuICAgIGJlKHQsIGUpIHtcbiAgICAgICAgc3dpdGNoICh0Lm5vZGVOYW1lKSB7XG4gICAgICAgICAgY2FzZSBcIklOUFVUXCI6XG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgY29uc3QgdCA9IGU7XG4gICAgICAgICAgICAgICAgbGV0IGk7XG4gICAgICAgICAgICAgICAgbGV0IHM7XG4gICAgICAgICAgICAgICAgbGV0IG4gPSAwO1xuICAgICAgICAgICAgICAgIGxldCByO1xuICAgICAgICAgICAgICAgIGZvciAobGV0IGUgPSAwOyBlIDwgdC5sZW5ndGggJiYgbiA8IDM7IGUrKykge1xuICAgICAgICAgICAgICAgICAgICByID0gdFtlXTtcbiAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChyLnRvKSB7XG4gICAgICAgICAgICAgICAgICAgICAgY2FzZSBcIm1vZGVsXCI6XG4gICAgICAgICAgICAgICAgICAgICAgY2FzZSBcInZhbHVlXCI6XG4gICAgICAgICAgICAgICAgICAgICAgY2FzZSBcIm1hdGNoZXJcIjpcbiAgICAgICAgICAgICAgICAgICAgICAgIGkgPSBlO1xuICAgICAgICAgICAgICAgICAgICAgICAgbisrO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwiY2hlY2tlZFwiOlxuICAgICAgICAgICAgICAgICAgICAgICAgcyA9IGU7XG4gICAgICAgICAgICAgICAgICAgICAgICBuKys7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAodm9pZCAwICE9PSBzICYmIHZvaWQgMCAhPT0gaSAmJiBzIDwgaSkgW3RbaV0sIHRbc11dID0gWyB0W3NdLCB0W2ldIF07XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgZ2UodCkge1xuICAgICAgICB0LmNsYXNzTGlzdC5hZGQoXCJhdVwiKTtcbiAgICAgICAgcmV0dXJuIHQ7XG4gICAgfVxuICAgIHllKHQsIGUpIHtcbiAgICAgICAgY29uc3QgaSA9IHQucGFyZW50Tm9kZTtcbiAgICAgICAgY29uc3QgcyA9IGUuaChcImF1LW1cIik7XG4gICAgICAgIHRoaXMuZ2UoaS5pbnNlcnRCZWZvcmUocywgdCkpO1xuICAgICAgICBpLnJlbW92ZUNoaWxkKHQpO1xuICAgICAgICByZXR1cm4gcztcbiAgICB9XG59XG5cbmNsYXNzIENvbXBpbGF0aW9uQ29udGV4dCB7XG4gICAgY29uc3RydWN0b3IodCwgZSwgaSwgcywgbiwgcikge1xuICAgICAgICB0aGlzLmhhc1Nsb3QgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5DZSA9IHd0KCk7XG4gICAgICAgIGNvbnN0IG8gPSBudWxsICE9PSBzO1xuICAgICAgICB0aGlzLmMgPSBlO1xuICAgICAgICB0aGlzLnJvb3QgPSBudWxsID09PSBuID8gdGhpcyA6IG47XG4gICAgICAgIHRoaXMuZGVmID0gdDtcbiAgICAgICAgdGhpcy5jaSA9IGk7XG4gICAgICAgIHRoaXMucGFyZW50ID0gcztcbiAgICAgICAgdGhpcy5yZSA9IG8gPyBzLnJlIDogZS5nZXQoVG4pO1xuICAgICAgICB0aGlzLmRlID0gbyA/IHMuZGUgOiBlLmdldChVdCk7XG4gICAgICAgIHRoaXMuZXAgPSBvID8gcy5lcCA6IGUuZ2V0KF8pO1xuICAgICAgICB0aGlzLm0gPSBvID8gcy5tIDogZS5nZXQoWnQpO1xuICAgICAgICB0aGlzLkZ0ID0gbyA/IHMuRnQgOiBlLmdldChrKTtcbiAgICAgICAgdGhpcy5wID0gbyA/IHMucCA6IGUuZ2V0KEt0KTtcbiAgICAgICAgdGhpcy5sb2NhbEVscyA9IG8gPyBzLmxvY2FsRWxzIDogbmV3IFNldDtcbiAgICAgICAgdGhpcy5yb3dzID0gbnVsbCAhPT0gciAmJiB2b2lkIDAgIT09IHIgPyByIDogW107XG4gICAgfVxuICAgIGtlKHQpIHtcbiAgICAgICAgdmFyIGU7XG4gICAgICAgIHZhciBpO1xuICAgICAgICAobnVsbCAhPT0gKGUgPSAoaSA9IHRoaXMucm9vdCkuZGVwcykgJiYgdm9pZCAwICE9PSBlID8gZSA6IGkuZGVwcyA9IFtdKS5wdXNoKHQpO1xuICAgICAgICB0aGlzLnJvb3QuYy5yZWdpc3Rlcih0KTtcbiAgICB9XG4gICAgaCh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSB0aGlzLnAuZG9jdW1lbnQuY3JlYXRlRWxlbWVudCh0KTtcbiAgICAgICAgaWYgKFwidGVtcGxhdGVcIiA9PT0gdCkgdGhpcy5wLmRvY3VtZW50LmFkb3B0Tm9kZShlLmNvbnRlbnQpO1xuICAgICAgICByZXR1cm4gZTtcbiAgICB9XG4gICAgYWUodCkge1xuICAgICAgICByZXR1cm4gdGhpcy5jLmZpbmQoc2ksIHQpO1xuICAgIH1cbiAgICB1ZSh0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLmMuZmluZChNZSwgdCk7XG4gICAgfVxuICAgIHhlKHQpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBDb21waWxhdGlvbkNvbnRleHQodGhpcy5kZWYsIHRoaXMuYywgdGhpcy5jaSwgdGhpcywgdGhpcy5yb290LCB0KTtcbiAgICB9XG4gICAgY2UodCkge1xuICAgICAgICBpZiAodGhpcy5yb290ICE9PSB0aGlzKSByZXR1cm4gdGhpcy5yb290LmNlKHQpO1xuICAgICAgICBjb25zdCBlID0gdC5jb21tYW5kO1xuICAgICAgICBpZiAobnVsbCA9PT0gZSkgcmV0dXJuIG51bGw7XG4gICAgICAgIGxldCBpID0gdGhpcy5DZVtlXTtcbiAgICAgICAgaWYgKHZvaWQgMCA9PT0gaSkge1xuICAgICAgICAgICAgaSA9IHRoaXMuYy5jcmVhdGUobW4sIGUpO1xuICAgICAgICAgICAgaWYgKG51bGwgPT09IGkpIHRocm93IG5ldyBFcnJvcihgQVVSMDcxMzoke2V9YCk7XG4gICAgICAgICAgICB0aGlzLkNlW2VdID0gaTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gaTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIE9uKHQpIHtcbiAgICBjb25zdCBlID0gdC5sZW5ndGg7XG4gICAgbGV0IGkgPSAwO1xuICAgIGxldCBzID0gMDtcbiAgICB3aGlsZSAoZSA+IHMpIHtcbiAgICAgICAgaSA9IHQuY2hhckNvZGVBdChzKTtcbiAgICAgICAgaWYgKDkyID09PSBpKSArK3M7IGVsc2UgaWYgKDU4ID09PSBpKSByZXR1cm4gdHJ1ZTsgZWxzZSBpZiAoMzYgPT09IGkgJiYgMTIzID09PSB0LmNoYXJDb2RlQXQocyArIDEpKSByZXR1cm4gZmFsc2U7XG4gICAgICAgICsrcztcbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xufVxuXG5mdW5jdGlvbiAkbigpIHtcbiAgICBNbi5ub2RlID0gTW4uYXR0ciA9IE1uLmJpbmRhYmxlID0gTW4uZGVmID0gbnVsbDtcbn1cblxuY29uc3QgTG4gPSB7XG4gICAgcHJvamVjdGlvbnM6IG51bGxcbn07XG5cbmNvbnN0IHFuID0ge1xuICAgIG5hbWU6IFwidW5uYW1lZFwiXG59O1xuXG5jb25zdCBNbiA9IHtcbiAgICBub2RlOiBudWxsLFxuICAgIGF0dHI6IG51bGwsXG4gICAgYmluZGFibGU6IG51bGwsXG4gICAgZGVmOiBudWxsXG59O1xuXG5jb25zdCBVbiA9IE9iamVjdC5hc3NpZ24od3QoKSwge1xuICAgIGlkOiB0cnVlLFxuICAgIG5hbWU6IHRydWUsXG4gICAgXCJhdS1zbG90XCI6IHRydWUsXG4gICAgXCJhcy1lbGVtZW50XCI6IHRydWVcbn0pO1xuXG5jb25zdCBGbiA9IHtcbiAgICBjaGVja2JveDogMSxcbiAgICByYWRpbzogMVxufTtcblxuY29uc3QgVm4gPSBuZXcgV2Vha01hcDtcblxuY2xhc3MgQmluZGFibGVzSW5mbyB7XG4gICAgY29uc3RydWN0b3IodCwgZSwgaSkge1xuICAgICAgICB0aGlzLmF0dHJzID0gdDtcbiAgICAgICAgdGhpcy5iaW5kYWJsZXMgPSBlO1xuICAgICAgICB0aGlzLnByaW1hcnkgPSBpO1xuICAgIH1cbiAgICBzdGF0aWMgZnJvbSh0LCBlKSB7XG4gICAgICAgIGxldCBpID0gVm4uZ2V0KHQpO1xuICAgICAgICBpZiAobnVsbCA9PSBpKSB7XG4gICAgICAgICAgICBjb25zdCBzID0gdC5iaW5kYWJsZXM7XG4gICAgICAgICAgICBjb25zdCBuID0gd3QoKTtcbiAgICAgICAgICAgIGNvbnN0IHIgPSBlID8gdm9pZCAwID09PSB0LmRlZmF1bHRCaW5kaW5nTW9kZSA/IEQuZGVmYXVsdCA6IHQuZGVmYXVsdEJpbmRpbmdNb2RlIDogRC5kZWZhdWx0O1xuICAgICAgICAgICAgbGV0IG87XG4gICAgICAgICAgICBsZXQgbDtcbiAgICAgICAgICAgIGxldCBoID0gZmFsc2U7XG4gICAgICAgICAgICBsZXQgYTtcbiAgICAgICAgICAgIGxldCBjO1xuICAgICAgICAgICAgZm9yIChsIGluIHMpIHtcbiAgICAgICAgICAgICAgICBvID0gc1tsXTtcbiAgICAgICAgICAgICAgICBjID0gby5hdHRyaWJ1dGU7XG4gICAgICAgICAgICAgICAgaWYgKHRydWUgPT09IG8ucHJpbWFyeSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoaCkgdGhyb3cgbmV3IEVycm9yKGBBVVIwNzE0OiR7dC5uYW1lfWApO1xuICAgICAgICAgICAgICAgICAgICBoID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgYSA9IG87XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmICghaCAmJiBudWxsID09IGEpIGEgPSBvO1xuICAgICAgICAgICAgICAgIG5bY10gPSBCaW5kYWJsZURlZmluaXRpb24uY3JlYXRlKGwsIHQuVHlwZSwgbyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAobnVsbCA9PSBvICYmIGUpIGEgPSBuLnZhbHVlID0gQmluZGFibGVEZWZpbml0aW9uLmNyZWF0ZShcInZhbHVlXCIsIHQuVHlwZSwge1xuICAgICAgICAgICAgICAgIG1vZGU6IHJcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgVm4uc2V0KHQsIGkgPSBuZXcgQmluZGFibGVzSW5mbyhuLCBzLCBhKSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGk7XG4gICAgfVxufVxuXG52YXIgX247XG5cbihmdW5jdGlvbih0KSB7XG4gICAgdFtcInByb3BlcnR5XCJdID0gXCJwcm9wZXJ0eVwiO1xuICAgIHRbXCJhdHRyaWJ1dGVcIl0gPSBcImF0dHJpYnV0ZVwiO1xuICAgIHRbXCJtb2RlXCJdID0gXCJtb2RlXCI7XG59KShfbiB8fCAoX24gPSB7fSkpO1xuXG5jb25zdCBqbiA9IE9iamVjdC5mcmVlemUoWyBcInByb3BlcnR5XCIsIFwiYXR0cmlidXRlXCIsIFwibW9kZVwiIF0pO1xuXG5jb25zdCBObiA9IFwiYXMtY3VzdG9tLWVsZW1lbnRcIjtcblxuZnVuY3Rpb24gV24odCwgZSkge1xuICAgIGNvbnN0IGkgPSB0LmdldEF0dHJpYnV0ZShObik7XG4gICAgaWYgKG51bGwgPT09IGkgfHwgXCJcIiA9PT0gaSkgdGhyb3cgbmV3IEVycm9yKFwiQVVSMDcxNVwiKTtcbiAgICBpZiAoZS5oYXMoaSkpIHRocm93IG5ldyBFcnJvcihgQVVSMDcxNjoke2l9YCk7IGVsc2Uge1xuICAgICAgICBlLmFkZChpKTtcbiAgICAgICAgdC5yZW1vdmVBdHRyaWJ1dGUoTm4pO1xuICAgIH1cbiAgICByZXR1cm4gaTtcbn1cblxuZnVuY3Rpb24gSG4odCkge1xuICAgIHN3aXRjaCAodC5nZXRBdHRyaWJ1dGUoXCJtb2RlXCIpKSB7XG4gICAgICBjYXNlIFwib25lVGltZVwiOlxuICAgICAgICByZXR1cm4gRC5vbmVUaW1lO1xuXG4gICAgICBjYXNlIFwidG9WaWV3XCI6XG4gICAgICAgIHJldHVybiBELnRvVmlldztcblxuICAgICAgY2FzZSBcImZyb21WaWV3XCI6XG4gICAgICAgIHJldHVybiBELmZyb21WaWV3O1xuXG4gICAgICBjYXNlIFwidHdvV2F5XCI6XG4gICAgICAgIHJldHVybiBELnR3b1dheTtcblxuICAgICAgY2FzZSBcImRlZmF1bHRcIjpcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHJldHVybiBELmRlZmF1bHQ7XG4gICAgfVxufVxuXG5jb25zdCB6biA9IGwuY3JlYXRlSW50ZXJmYWNlKFwiSVRlbXBsYXRlQ29tcGlsZXJIb29rc1wiKTtcblxuY29uc3QgR24gPSBuZXcgV2Vha01hcDtcblxuY29uc3QgWG4gPSBtdChcImNvbXBpbGVyLWhvb2tzXCIpO1xuXG5jb25zdCBLbiA9IE9iamVjdC5mcmVlemUoe1xuICAgIG5hbWU6IFhuLFxuICAgIGRlZmluZSh0KSB7XG4gICAgICAgIGxldCBlID0gR24uZ2V0KHQpO1xuICAgICAgICBpZiAodm9pZCAwID09PSBlKSB7XG4gICAgICAgICAgICBHbi5zZXQodCwgZSA9IG5ldyBUZW1wbGF0ZUNvbXBpbGVySG9va3NEZWZpbml0aW9uKHQpKTtcbiAgICAgICAgICAgIGN0KFhuLCBlLCB0KTtcbiAgICAgICAgICAgIHZ0KHQsIFhuKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdDtcbiAgICB9XG59KTtcblxuY2xhc3MgVGVtcGxhdGVDb21waWxlckhvb2tzRGVmaW5pdGlvbiB7XG4gICAgY29uc3RydWN0b3IodCkge1xuICAgICAgICB0aGlzLlR5cGUgPSB0O1xuICAgIH1cbiAgICBnZXQgbmFtZSgpIHtcbiAgICAgICAgcmV0dXJuIFwiXCI7XG4gICAgfVxuICAgIHJlZ2lzdGVyKHQpIHtcbiAgICAgICAgdC5yZWdpc3RlcihjLnNpbmdsZXRvbih6biwgdGhpcy5UeXBlKSk7XG4gICAgfVxufVxuXG5jb25zdCBZbiA9IHQgPT4ge1xuICAgIHJldHVybiB2b2lkIDAgPT09IHQgPyBlIDogZSh0KTtcbiAgICBmdW5jdGlvbiBlKHQpIHtcbiAgICAgICAgcmV0dXJuIEtuLmRlZmluZSh0KTtcbiAgICB9XG59O1xuXG5jb25zdCBRbiA9IHNpLmdlbmVyYXRlTmFtZTtcblxuY2xhc3MgQmluZGluZ01vZGVCZWhhdmlvciB7XG4gICAgY29uc3RydWN0b3IodCkge1xuICAgICAgICB0aGlzLm1vZGUgPSB0O1xuICAgICAgICB0aGlzLkFlID0gbmV3IE1hcDtcbiAgICB9XG4gICAgYmluZCh0LCBlLCBpKSB7XG4gICAgICAgIHRoaXMuQWUuc2V0KGksIGkubW9kZSk7XG4gICAgICAgIGkubW9kZSA9IHRoaXMubW9kZTtcbiAgICB9XG4gICAgdW5iaW5kKHQsIGUsIGkpIHtcbiAgICAgICAgaS5tb2RlID0gdGhpcy5BZS5nZXQoaSk7XG4gICAgICAgIHRoaXMuQWUuZGVsZXRlKGkpO1xuICAgIH1cbn1cblxuY2xhc3MgT25lVGltZUJpbmRpbmdCZWhhdmlvciBleHRlbmRzIEJpbmRpbmdNb2RlQmVoYXZpb3Ige1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICBzdXBlcihELm9uZVRpbWUpO1xuICAgIH1cbn1cblxuY2xhc3MgVG9WaWV3QmluZGluZ0JlaGF2aW9yIGV4dGVuZHMgQmluZGluZ01vZGVCZWhhdmlvciB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHN1cGVyKEQudG9WaWV3KTtcbiAgICB9XG59XG5cbmNsYXNzIEZyb21WaWV3QmluZGluZ0JlaGF2aW9yIGV4dGVuZHMgQmluZGluZ01vZGVCZWhhdmlvciB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHN1cGVyKEQuZnJvbVZpZXcpO1xuICAgIH1cbn1cblxuY2xhc3MgVHdvV2F5QmluZGluZ0JlaGF2aW9yIGV4dGVuZHMgQmluZGluZ01vZGVCZWhhdmlvciB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHN1cGVyKEQudHdvV2F5KTtcbiAgICB9XG59XG5cbkcoXCJvbmVUaW1lXCIpKE9uZVRpbWVCaW5kaW5nQmVoYXZpb3IpO1xuXG5HKFwidG9WaWV3XCIpKFRvVmlld0JpbmRpbmdCZWhhdmlvcik7XG5cbkcoXCJmcm9tVmlld1wiKShGcm9tVmlld0JpbmRpbmdCZWhhdmlvcik7XG5cbkcoXCJ0d29XYXlcIikoVHdvV2F5QmluZGluZ0JlaGF2aW9yKTtcblxuY29uc3QgWm4gPSAyMDA7XG5cbmNsYXNzIERlYm91bmNlQmluZGluZ0JlaGF2aW9yIGV4dGVuZHMgWCB7XG4gICAgY29uc3RydWN0b3IodCwgZSkge1xuICAgICAgICBzdXBlcih0LCBlKTtcbiAgICAgICAgdGhpcy5vcHRzID0ge1xuICAgICAgICAgICAgZGVsYXk6IFpuXG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuZmlyc3RBcmcgPSBudWxsO1xuICAgICAgICB0aGlzLnRhc2sgPSBudWxsO1xuICAgICAgICB0aGlzLnRhc2tRdWV1ZSA9IHQubG9jYXRvci5nZXQodSkudGFza1F1ZXVlO1xuICAgICAgICBpZiAoZS5hcmdzLmxlbmd0aCA+IDApIHRoaXMuZmlyc3RBcmcgPSBlLmFyZ3NbMF07XG4gICAgfVxuICAgIGNhbGxTb3VyY2UodCkge1xuICAgICAgICB0aGlzLnF1ZXVlVGFzaygoKCkgPT4gdGhpcy5iaW5kaW5nLmNhbGxTb3VyY2UodCkpKTtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBoYW5kbGVDaGFuZ2UodCwgZSwgaSkge1xuICAgICAgICBpZiAobnVsbCAhPT0gdGhpcy50YXNrKSB7XG4gICAgICAgICAgICB0aGlzLnRhc2suY2FuY2VsKCk7XG4gICAgICAgICAgICB0aGlzLnRhc2sgPSBudWxsO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuYmluZGluZy5oYW5kbGVDaGFuZ2UodCwgZSwgaSk7XG4gICAgfVxuICAgIHVwZGF0ZVNvdXJjZSh0LCBlKSB7XG4gICAgICAgIHRoaXMucXVldWVUYXNrKCgoKSA9PiB0aGlzLmJpbmRpbmcudXBkYXRlU291cmNlKHQsIGUpKSk7XG4gICAgfVxuICAgIHF1ZXVlVGFzayh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSB0aGlzLnRhc2s7XG4gICAgICAgIHRoaXMudGFzayA9IHRoaXMudGFza1F1ZXVlLnF1ZXVlVGFzaygoKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy50YXNrID0gbnVsbDtcbiAgICAgICAgICAgIHJldHVybiB0KCk7XG4gICAgICAgIH0pLCB0aGlzLm9wdHMpO1xuICAgICAgICBudWxsID09PSBlIHx8IHZvaWQgMCA9PT0gZSA/IHZvaWQgMCA6IGUuY2FuY2VsKCk7XG4gICAgfVxuICAgICRiaW5kKHQsIGUpIHtcbiAgICAgICAgaWYgKG51bGwgIT09IHRoaXMuZmlyc3RBcmcpIHtcbiAgICAgICAgICAgIGNvbnN0IGkgPSBOdW1iZXIodGhpcy5maXJzdEFyZy5ldmFsdWF0ZSh0LCBlLCB0aGlzLmxvY2F0b3IsIG51bGwpKTtcbiAgICAgICAgICAgIHRoaXMub3B0cy5kZWxheSA9IGlzTmFOKGkpID8gWm4gOiBpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuYmluZGluZy4kYmluZCh0LCBlKTtcbiAgICB9XG4gICAgJHVuYmluZCh0KSB7XG4gICAgICAgIHZhciBlO1xuICAgICAgICBudWxsID09PSAoZSA9IHRoaXMudGFzaykgfHwgdm9pZCAwID09PSBlID8gdm9pZCAwIDogZS5jYW5jZWwoKTtcbiAgICAgICAgdGhpcy50YXNrID0gbnVsbDtcbiAgICAgICAgdGhpcy5iaW5kaW5nLiR1bmJpbmQodCk7XG4gICAgfVxufVxuXG5HKFwiZGVib3VuY2VcIikoRGVib3VuY2VCaW5kaW5nQmVoYXZpb3IpO1xuXG5jbGFzcyBTaWduYWxCaW5kaW5nQmVoYXZpb3Ige1xuICAgIGNvbnN0cnVjdG9yKHQpIHtcbiAgICAgICAgdGhpcy5adCA9IG5ldyBNYXA7XG4gICAgICAgIHRoaXMuU2UgPSB0O1xuICAgIH1cbiAgICBiaW5kKHQsIGUsIGksIC4uLnMpIHtcbiAgICAgICAgaWYgKCEoXCJoYW5kbGVDaGFuZ2VcIiBpbiBpKSkgdGhyb3cgbmV3IEVycm9yKFwiQVVSMDgxN1wiKTtcbiAgICAgICAgaWYgKDAgPT09IHMubGVuZ3RoKSB0aHJvdyBuZXcgRXJyb3IoXCJBVVIwODE4XCIpO1xuICAgICAgICB0aGlzLlp0LnNldChpLCBzKTtcbiAgICAgICAgbGV0IG47XG4gICAgICAgIGZvciAobiBvZiBzKSB0aGlzLlNlLmFkZFNpZ25hbExpc3RlbmVyKG4sIGkpO1xuICAgIH1cbiAgICB1bmJpbmQodCwgZSwgaSkge1xuICAgICAgICBjb25zdCBzID0gdGhpcy5adC5nZXQoaSk7XG4gICAgICAgIHRoaXMuWnQuZGVsZXRlKGkpO1xuICAgICAgICBsZXQgbjtcbiAgICAgICAgZm9yIChuIG9mIHMpIHRoaXMuU2UucmVtb3ZlU2lnbmFsTGlzdGVuZXIobiwgaSk7XG4gICAgfVxufVxuXG5TaWduYWxCaW5kaW5nQmVoYXZpb3IuaW5qZWN0ID0gWyBLIF07XG5cbkcoXCJzaWduYWxcIikoU2lnbmFsQmluZGluZ0JlaGF2aW9yKTtcblxuY29uc3QgSm4gPSAyMDA7XG5cbmNsYXNzIFRocm90dGxlQmluZGluZ0JlaGF2aW9yIGV4dGVuZHMgWCB7XG4gICAgY29uc3RydWN0b3IodCwgZSkge1xuICAgICAgICBzdXBlcih0LCBlKTtcbiAgICAgICAgdGhpcy5vcHRzID0ge1xuICAgICAgICAgICAgZGVsYXk6IEpuXG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuZmlyc3RBcmcgPSBudWxsO1xuICAgICAgICB0aGlzLnRhc2sgPSBudWxsO1xuICAgICAgICB0aGlzLmxhc3RDYWxsID0gMDtcbiAgICAgICAgdGhpcy5kZWxheSA9IDA7XG4gICAgICAgIHRoaXMucCA9IHQubG9jYXRvci5nZXQodSk7XG4gICAgICAgIHRoaXMuUmUgPSB0aGlzLnAudGFza1F1ZXVlO1xuICAgICAgICBpZiAoZS5hcmdzLmxlbmd0aCA+IDApIHRoaXMuZmlyc3RBcmcgPSBlLmFyZ3NbMF07XG4gICAgfVxuICAgIGNhbGxTb3VyY2UodCkge1xuICAgICAgICB0aGlzLkVlKCgoKSA9PiB0aGlzLmJpbmRpbmcuY2FsbFNvdXJjZSh0KSkpO1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIGhhbmRsZUNoYW5nZSh0LCBlLCBpKSB7XG4gICAgICAgIGlmIChudWxsICE9PSB0aGlzLnRhc2spIHtcbiAgICAgICAgICAgIHRoaXMudGFzay5jYW5jZWwoKTtcbiAgICAgICAgICAgIHRoaXMudGFzayA9IG51bGw7XG4gICAgICAgICAgICB0aGlzLmxhc3RDYWxsID0gdGhpcy5wLnBlcmZvcm1hbmNlTm93KCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5iaW5kaW5nLmhhbmRsZUNoYW5nZSh0LCBlLCBpKTtcbiAgICB9XG4gICAgdXBkYXRlU291cmNlKHQsIGUpIHtcbiAgICAgICAgdGhpcy5FZSgoKCkgPT4gdGhpcy5iaW5kaW5nLnVwZGF0ZVNvdXJjZSh0LCBlKSkpO1xuICAgIH1cbiAgICBFZSh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSB0aGlzLm9wdHM7XG4gICAgICAgIGNvbnN0IGkgPSB0aGlzLnA7XG4gICAgICAgIGNvbnN0IHMgPSB0aGlzLmxhc3RDYWxsICsgZS5kZWxheSAtIGkucGVyZm9ybWFuY2VOb3coKTtcbiAgICAgICAgaWYgKHMgPiAwKSB7XG4gICAgICAgICAgICBjb25zdCBuID0gdGhpcy50YXNrO1xuICAgICAgICAgICAgZS5kZWxheSA9IHM7XG4gICAgICAgICAgICB0aGlzLnRhc2sgPSB0aGlzLlJlLnF1ZXVlVGFzaygoKCkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMubGFzdENhbGwgPSBpLnBlcmZvcm1hbmNlTm93KCk7XG4gICAgICAgICAgICAgICAgdGhpcy50YXNrID0gbnVsbDtcbiAgICAgICAgICAgICAgICBlLmRlbGF5ID0gdGhpcy5kZWxheTtcbiAgICAgICAgICAgICAgICB0KCk7XG4gICAgICAgICAgICB9KSwgZSk7XG4gICAgICAgICAgICBudWxsID09PSBuIHx8IHZvaWQgMCA9PT0gbiA/IHZvaWQgMCA6IG4uY2FuY2VsKCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmxhc3RDYWxsID0gaS5wZXJmb3JtYW5jZU5vdygpO1xuICAgICAgICAgICAgdCgpO1xuICAgICAgICB9XG4gICAgfVxuICAgICRiaW5kKHQsIGUpIHtcbiAgICAgICAgaWYgKG51bGwgIT09IHRoaXMuZmlyc3RBcmcpIHtcbiAgICAgICAgICAgIGNvbnN0IGkgPSBOdW1iZXIodGhpcy5maXJzdEFyZy5ldmFsdWF0ZSh0LCBlLCB0aGlzLmxvY2F0b3IsIG51bGwpKTtcbiAgICAgICAgICAgIHRoaXMub3B0cy5kZWxheSA9IHRoaXMuZGVsYXkgPSBpc05hTihpKSA/IEpuIDogaTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmJpbmRpbmcuJGJpbmQodCwgZSk7XG4gICAgfVxuICAgICR1bmJpbmQodCkge1xuICAgICAgICB2YXIgZTtcbiAgICAgICAgbnVsbCA9PT0gKGUgPSB0aGlzLnRhc2spIHx8IHZvaWQgMCA9PT0gZSA/IHZvaWQgMCA6IGUuY2FuY2VsKCk7XG4gICAgICAgIHRoaXMudGFzayA9IG51bGw7XG4gICAgICAgIHN1cGVyLiR1bmJpbmQodCk7XG4gICAgfVxufVxuXG5HKFwidGhyb3R0bGVcIikoVGhyb3R0bGVCaW5kaW5nQmVoYXZpb3IpO1xuXG5jbGFzcyBEYXRhQXR0cmlidXRlQWNjZXNzb3Ige1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICB0aGlzLnR5cGUgPSAyIHwgNDtcbiAgICB9XG4gICAgZ2V0VmFsdWUodCwgZSkge1xuICAgICAgICByZXR1cm4gdC5nZXRBdHRyaWJ1dGUoZSk7XG4gICAgfVxuICAgIHNldFZhbHVlKHQsIGUsIGksIHMpIHtcbiAgICAgICAgaWYgKHZvaWQgMCA9PSB0KSBpLnJlbW92ZUF0dHJpYnV0ZShzKTsgZWxzZSBpLnNldEF0dHJpYnV0ZShzLCB0KTtcbiAgICB9XG59XG5cbmNvbnN0IHRyID0gbmV3IERhdGFBdHRyaWJ1dGVBY2Nlc3NvcjtcblxuY2xhc3MgQXR0ckJpbmRpbmdCZWhhdmlvciB7XG4gICAgYmluZCh0LCBlLCBpKSB7XG4gICAgICAgIGkudGFyZ2V0T2JzZXJ2ZXIgPSB0cjtcbiAgICB9XG4gICAgdW5iaW5kKHQsIGUsIGkpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbn1cblxuRyhcImF0dHJcIikoQXR0ckJpbmRpbmdCZWhhdmlvcik7XG5cbmZ1bmN0aW9uIGVyKHQpIHtcbiAgICBjb25zdCBlID0gdC5jb21wb3NlZFBhdGgoKVswXTtcbiAgICBpZiAodGhpcy50YXJnZXQgIT09IGUpIHJldHVybjtcbiAgICByZXR1cm4gdGhpcy5zZWxmRXZlbnRDYWxsU291cmNlKHQpO1xufVxuXG5jbGFzcyBTZWxmQmluZGluZ0JlaGF2aW9yIHtcbiAgICBiaW5kKHQsIGUsIGkpIHtcbiAgICAgICAgaWYgKCFpLmNhbGxTb3VyY2UgfHwgIWkudGFyZ2V0RXZlbnQpIHRocm93IG5ldyBFcnJvcihcIkFVUjA4MDFcIik7XG4gICAgICAgIGkuc2VsZkV2ZW50Q2FsbFNvdXJjZSA9IGkuY2FsbFNvdXJjZTtcbiAgICAgICAgaS5jYWxsU291cmNlID0gZXI7XG4gICAgfVxuICAgIHVuYmluZCh0LCBlLCBpKSB7XG4gICAgICAgIGkuY2FsbFNvdXJjZSA9IGkuc2VsZkV2ZW50Q2FsbFNvdXJjZTtcbiAgICAgICAgaS5zZWxmRXZlbnRDYWxsU291cmNlID0gbnVsbDtcbiAgICB9XG59XG5cbkcoXCJzZWxmXCIpKFNlbGZCaW5kaW5nQmVoYXZpb3IpO1xuXG5jb25zdCBpciA9IHd0KCk7XG5cbmNsYXNzIEF0dHJpYnV0ZU5TQWNjZXNzb3Ige1xuICAgIGNvbnN0cnVjdG9yKHQpIHtcbiAgICAgICAgdGhpcy5ucyA9IHQ7XG4gICAgICAgIHRoaXMudHlwZSA9IDIgfCA0O1xuICAgIH1cbiAgICBzdGF0aWMgZm9yTnModCkge1xuICAgICAgICB2YXIgZTtcbiAgICAgICAgcmV0dXJuIG51bGwgIT09IChlID0gaXJbdF0pICYmIHZvaWQgMCAhPT0gZSA/IGUgOiBpclt0XSA9IG5ldyBBdHRyaWJ1dGVOU0FjY2Vzc29yKHQpO1xuICAgIH1cbiAgICBnZXRWYWx1ZSh0LCBlKSB7XG4gICAgICAgIHJldHVybiB0LmdldEF0dHJpYnV0ZU5TKHRoaXMubnMsIGUpO1xuICAgIH1cbiAgICBzZXRWYWx1ZSh0LCBlLCBpLCBzKSB7XG4gICAgICAgIGlmICh2b2lkIDAgPT0gdCkgaS5yZW1vdmVBdHRyaWJ1dGVOUyh0aGlzLm5zLCBzKTsgZWxzZSBpLnNldEF0dHJpYnV0ZU5TKHRoaXMubnMsIHMsIHQpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gc3IodCwgZSkge1xuICAgIHJldHVybiB0ID09PSBlO1xufVxuXG5jbGFzcyBDaGVja2VkT2JzZXJ2ZXIge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUsIGksIHMpIHtcbiAgICAgICAgdGhpcy5oYW5kbGVyID0gaTtcbiAgICAgICAgdGhpcy50eXBlID0gMiB8IDEgfCA0O1xuICAgICAgICB0aGlzLnYgPSB2b2lkIDA7XG4gICAgICAgIHRoaXMub3YgPSB2b2lkIDA7XG4gICAgICAgIHRoaXMuQmUgPSB2b2lkIDA7XG4gICAgICAgIHRoaXMuSWUgPSB2b2lkIDA7XG4gICAgICAgIHRoaXMuZiA9IDA7XG4gICAgICAgIHRoaXMubyA9IHQ7XG4gICAgICAgIHRoaXMub0wgPSBzO1xuICAgIH1cbiAgICBnZXRWYWx1ZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudjtcbiAgICB9XG4gICAgc2V0VmFsdWUodCwgZSkge1xuICAgICAgICBjb25zdCBpID0gdGhpcy52O1xuICAgICAgICBpZiAodCA9PT0gaSkgcmV0dXJuO1xuICAgICAgICB0aGlzLnYgPSB0O1xuICAgICAgICB0aGlzLm92ID0gaTtcbiAgICAgICAgdGhpcy5mID0gZTtcbiAgICAgICAgdGhpcy5UZSgpO1xuICAgICAgICB0aGlzLkRlKCk7XG4gICAgICAgIHRoaXMucXVldWUuYWRkKHRoaXMpO1xuICAgIH1cbiAgICBoYW5kbGVDb2xsZWN0aW9uQ2hhbmdlKHQsIGUpIHtcbiAgICAgICAgdGhpcy5EZSgpO1xuICAgIH1cbiAgICBoYW5kbGVDaGFuZ2UodCwgZSwgaSkge1xuICAgICAgICB0aGlzLkRlKCk7XG4gICAgfVxuICAgIERlKCkge1xuICAgICAgICBjb25zdCB0ID0gdGhpcy52O1xuICAgICAgICBjb25zdCBlID0gdGhpcy5vO1xuICAgICAgICBjb25zdCBpID0gYnQuY2FsbChlLCBcIm1vZGVsXCIpID8gZS5tb2RlbCA6IGUudmFsdWU7XG4gICAgICAgIGNvbnN0IHMgPSBcInJhZGlvXCIgPT09IGUudHlwZTtcbiAgICAgICAgY29uc3QgbiA9IHZvaWQgMCAhPT0gZS5tYXRjaGVyID8gZS5tYXRjaGVyIDogc3I7XG4gICAgICAgIGlmIChzKSBlLmNoZWNrZWQgPSAhIW4odCwgaSk7IGVsc2UgaWYgKHRydWUgPT09IHQpIGUuY2hlY2tlZCA9IHRydWU7IGVsc2Uge1xuICAgICAgICAgICAgbGV0IHMgPSBmYWxzZTtcbiAgICAgICAgICAgIGlmICh0IGluc3RhbmNlb2YgQXJyYXkpIHMgPSAtMSAhPT0gdC5maW5kSW5kZXgoKHQgPT4gISFuKHQsIGkpKSk7IGVsc2UgaWYgKHQgaW5zdGFuY2VvZiBTZXQpIHtcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGUgb2YgdCkgaWYgKG4oZSwgaSkpIHtcbiAgICAgICAgICAgICAgICAgICAgcyA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSBpZiAodCBpbnN0YW5jZW9mIE1hcCkgZm9yIChjb25zdCBlIG9mIHQpIHtcbiAgICAgICAgICAgICAgICBjb25zdCB0ID0gZVswXTtcbiAgICAgICAgICAgICAgICBjb25zdCByID0gZVsxXTtcbiAgICAgICAgICAgICAgICBpZiAobih0LCBpKSAmJiB0cnVlID09PSByKSB7XG4gICAgICAgICAgICAgICAgICAgIHMgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlLmNoZWNrZWQgPSBzO1xuICAgICAgICB9XG4gICAgfVxuICAgIGhhbmRsZUV2ZW50KCkge1xuICAgICAgICBsZXQgdCA9IHRoaXMub3YgPSB0aGlzLnY7XG4gICAgICAgIGNvbnN0IGUgPSB0aGlzLm87XG4gICAgICAgIGNvbnN0IGkgPSBidC5jYWxsKGUsIFwibW9kZWxcIikgPyBlLm1vZGVsIDogZS52YWx1ZTtcbiAgICAgICAgY29uc3QgcyA9IGUuY2hlY2tlZDtcbiAgICAgICAgY29uc3QgbiA9IHZvaWQgMCAhPT0gZS5tYXRjaGVyID8gZS5tYXRjaGVyIDogc3I7XG4gICAgICAgIGlmIChcImNoZWNrYm94XCIgPT09IGUudHlwZSkge1xuICAgICAgICAgICAgaWYgKHQgaW5zdGFuY2VvZiBBcnJheSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGUgPSB0LmZpbmRJbmRleCgodCA9PiAhIW4odCwgaSkpKTtcbiAgICAgICAgICAgICAgICBpZiAocyAmJiAtMSA9PT0gZSkgdC5wdXNoKGkpOyBlbHNlIGlmICghcyAmJiAtMSAhPT0gZSkgdC5zcGxpY2UoZSwgMSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfSBlbHNlIGlmICh0IGluc3RhbmNlb2YgU2V0KSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZSA9IHt9O1xuICAgICAgICAgICAgICAgIGxldCByID0gZTtcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGUgb2YgdCkgaWYgKHRydWUgPT09IG4oZSwgaSkpIHtcbiAgICAgICAgICAgICAgICAgICAgciA9IGU7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAocyAmJiByID09PSBlKSB0LmFkZChpKTsgZWxzZSBpZiAoIXMgJiYgciAhPT0gZSkgdC5kZWxldGUocik7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfSBlbHNlIGlmICh0IGluc3RhbmNlb2YgTWFwKSB7XG4gICAgICAgICAgICAgICAgbGV0IGU7XG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCBzIG9mIHQpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgdCA9IHNbMF07XG4gICAgICAgICAgICAgICAgICAgIGlmICh0cnVlID09PSBuKHQsIGkpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBlID0gdDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHQuc2V0KGUsIHMpO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHQgPSBzO1xuICAgICAgICB9IGVsc2UgaWYgKHMpIHQgPSBpOyBlbHNlIHJldHVybjtcbiAgICAgICAgdGhpcy52ID0gdDtcbiAgICAgICAgdGhpcy5xdWV1ZS5hZGQodGhpcyk7XG4gICAgfVxuICAgIHN0YXJ0KCkge1xuICAgICAgICB0aGlzLmhhbmRsZXIuc3Vic2NyaWJlKHRoaXMubywgdGhpcyk7XG4gICAgICAgIHRoaXMuVGUoKTtcbiAgICB9XG4gICAgc3RvcCgpIHtcbiAgICAgICAgdmFyIHQsIGU7XG4gICAgICAgIHRoaXMuaGFuZGxlci5kaXNwb3NlKCk7XG4gICAgICAgIG51bGwgPT09ICh0ID0gdGhpcy5CZSkgfHwgdm9pZCAwID09PSB0ID8gdm9pZCAwIDogdC51bnN1YnNjcmliZSh0aGlzKTtcbiAgICAgICAgdGhpcy5CZSA9IHZvaWQgMDtcbiAgICAgICAgbnVsbCA9PT0gKGUgPSB0aGlzLkllKSB8fCB2b2lkIDAgPT09IGUgPyB2b2lkIDAgOiBlLnVuc3Vic2NyaWJlKHRoaXMpO1xuICAgIH1cbiAgICBzdWJzY3JpYmUodCkge1xuICAgICAgICBpZiAodGhpcy5zdWJzLmFkZCh0KSAmJiAxID09PSB0aGlzLnN1YnMuY291bnQpIHRoaXMuc3RhcnQoKTtcbiAgICB9XG4gICAgdW5zdWJzY3JpYmUodCkge1xuICAgICAgICBpZiAodGhpcy5zdWJzLnJlbW92ZSh0KSAmJiAwID09PSB0aGlzLnN1YnMuY291bnQpIHRoaXMuc3RvcCgpO1xuICAgIH1cbiAgICBmbHVzaCgpIHtcbiAgICAgICAgbnIgPSB0aGlzLm92O1xuICAgICAgICB0aGlzLm92ID0gdGhpcy52O1xuICAgICAgICB0aGlzLnN1YnMubm90aWZ5KHRoaXMudiwgbnIsIHRoaXMuZik7XG4gICAgfVxuICAgIFRlKCkge1xuICAgICAgICB2YXIgdCwgZSwgaSwgcywgbiwgciwgbztcbiAgICAgICAgY29uc3QgbCA9IHRoaXMubztcbiAgICAgICAgbnVsbCA9PT0gKG4gPSBudWxsICE9PSAodCA9IHRoaXMuSWUpICYmIHZvaWQgMCAhPT0gdCA/IHQgOiB0aGlzLkllID0gbnVsbCAhPT0gKGkgPSBudWxsID09PSAoZSA9IGwuJG9ic2VydmVycykgfHwgdm9pZCAwID09PSBlID8gdm9pZCAwIDogZS5tb2RlbCkgJiYgdm9pZCAwICE9PSBpID8gaSA6IG51bGwgPT09IChzID0gbC4kb2JzZXJ2ZXJzKSB8fCB2b2lkIDAgPT09IHMgPyB2b2lkIDAgOiBzLnZhbHVlKSB8fCB2b2lkIDAgPT09IG4gPyB2b2lkIDAgOiBuLnN1YnNjcmliZSh0aGlzKTtcbiAgICAgICAgbnVsbCA9PT0gKHIgPSB0aGlzLkJlKSB8fCB2b2lkIDAgPT09IHIgPyB2b2lkIDAgOiByLnVuc3Vic2NyaWJlKHRoaXMpO1xuICAgICAgICB0aGlzLkJlID0gdm9pZCAwO1xuICAgICAgICBpZiAoXCJjaGVja2JveFwiID09PSBsLnR5cGUpIG51bGwgPT09IChvID0gdGhpcy5CZSA9IGdyKHRoaXMudiwgdGhpcy5vTCkpIHx8IHZvaWQgMCA9PT0gbyA/IHZvaWQgMCA6IG8uc3Vic2NyaWJlKHRoaXMpO1xuICAgIH1cbn1cblxuUChDaGVja2VkT2JzZXJ2ZXIpO1xuXG5PKENoZWNrZWRPYnNlcnZlcik7XG5cbmxldCBucjtcblxuY29uc3QgcnIgPSBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5O1xuXG5jb25zdCBvciA9IHtcbiAgICBjaGlsZExpc3Q6IHRydWUsXG4gICAgc3VidHJlZTogdHJ1ZSxcbiAgICBjaGFyYWN0ZXJEYXRhOiB0cnVlXG59O1xuXG5mdW5jdGlvbiBscih0LCBlKSB7XG4gICAgcmV0dXJuIHQgPT09IGU7XG59XG5cbmNsYXNzIFNlbGVjdFZhbHVlT2JzZXJ2ZXIge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUsIGksIHMpIHtcbiAgICAgICAgdGhpcy50eXBlID0gMiB8IDEgfCA0O1xuICAgICAgICB0aGlzLnYgPSB2b2lkIDA7XG4gICAgICAgIHRoaXMub3YgPSB2b2lkIDA7XG4gICAgICAgIHRoaXMuSCA9IGZhbHNlO1xuICAgICAgICB0aGlzLlBlID0gdm9pZCAwO1xuICAgICAgICB0aGlzLk9lID0gdm9pZCAwO1xuICAgICAgICB0aGlzLmlPID0gZmFsc2U7XG4gICAgICAgIHRoaXMubyA9IHQ7XG4gICAgICAgIHRoaXMub0wgPSBzO1xuICAgICAgICB0aGlzLmhhbmRsZXIgPSBpO1xuICAgIH1cbiAgICBnZXRWYWx1ZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuaU8gPyB0aGlzLnYgOiB0aGlzLm8ubXVsdGlwbGUgPyBocih0aGlzLm8ub3B0aW9ucykgOiB0aGlzLm8udmFsdWU7XG4gICAgfVxuICAgIHNldFZhbHVlKHQsIGUpIHtcbiAgICAgICAgdGhpcy5vdiA9IHRoaXMudjtcbiAgICAgICAgdGhpcy52ID0gdDtcbiAgICAgICAgdGhpcy5IID0gdCAhPT0gdGhpcy5vdjtcbiAgICAgICAgdGhpcy4kZSh0IGluc3RhbmNlb2YgQXJyYXkgPyB0IDogbnVsbCk7XG4gICAgICAgIGlmICgwID09PSAoMjU2ICYgZSkpIHRoaXMuSygpO1xuICAgIH1cbiAgICBLKCkge1xuICAgICAgICBpZiAodGhpcy5IKSB7XG4gICAgICAgICAgICB0aGlzLkggPSBmYWxzZTtcbiAgICAgICAgICAgIHRoaXMuc3luY09wdGlvbnMoKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBoYW5kbGVDb2xsZWN0aW9uQ2hhbmdlKCkge1xuICAgICAgICB0aGlzLnN5bmNPcHRpb25zKCk7XG4gICAgfVxuICAgIHN5bmNPcHRpb25zKCkge1xuICAgICAgICB2YXIgdDtcbiAgICAgICAgY29uc3QgZSA9IHRoaXMudjtcbiAgICAgICAgY29uc3QgaSA9IHRoaXMubztcbiAgICAgICAgY29uc3QgcyA9IEFycmF5LmlzQXJyYXkoZSk7XG4gICAgICAgIGNvbnN0IG4gPSBudWxsICE9PSAodCA9IGkubWF0Y2hlcikgJiYgdm9pZCAwICE9PSB0ID8gdCA6IGxyO1xuICAgICAgICBjb25zdCByID0gaS5vcHRpb25zO1xuICAgICAgICBsZXQgbyA9IHIubGVuZ3RoO1xuICAgICAgICB3aGlsZSAoby0tID4gMCkge1xuICAgICAgICAgICAgY29uc3QgdCA9IHJbb107XG4gICAgICAgICAgICBjb25zdCBpID0gcnIuY2FsbCh0LCBcIm1vZGVsXCIpID8gdC5tb2RlbCA6IHQudmFsdWU7XG4gICAgICAgICAgICBpZiAocykge1xuICAgICAgICAgICAgICAgIHQuc2VsZWN0ZWQgPSAtMSAhPT0gZS5maW5kSW5kZXgoKHQgPT4gISFuKGksIHQpKSk7XG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0LnNlbGVjdGVkID0gISFuKGksIGUpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHN5bmNWYWx1ZSgpIHtcbiAgICAgICAgY29uc3QgdCA9IHRoaXMubztcbiAgICAgICAgY29uc3QgZSA9IHQub3B0aW9ucztcbiAgICAgICAgY29uc3QgaSA9IGUubGVuZ3RoO1xuICAgICAgICBjb25zdCBzID0gdGhpcy52O1xuICAgICAgICBsZXQgbiA9IDA7XG4gICAgICAgIGlmICh0Lm11bHRpcGxlKSB7XG4gICAgICAgICAgICBpZiAoIShzIGluc3RhbmNlb2YgQXJyYXkpKSByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIGxldCByO1xuICAgICAgICAgICAgY29uc3QgbyA9IHQubWF0Y2hlciB8fCBscjtcbiAgICAgICAgICAgIGNvbnN0IGwgPSBbXTtcbiAgICAgICAgICAgIHdoaWxlIChuIDwgaSkge1xuICAgICAgICAgICAgICAgIHIgPSBlW25dO1xuICAgICAgICAgICAgICAgIGlmIChyLnNlbGVjdGVkKSBsLnB1c2gocnIuY2FsbChyLCBcIm1vZGVsXCIpID8gci5tb2RlbCA6IHIudmFsdWUpO1xuICAgICAgICAgICAgICAgICsrbjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGxldCBoO1xuICAgICAgICAgICAgbiA9IDA7XG4gICAgICAgICAgICB3aGlsZSAobiA8IHMubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgaCA9IHNbbl07XG4gICAgICAgICAgICAgICAgaWYgKC0xID09PSBsLmZpbmRJbmRleCgodCA9PiAhIW8oaCwgdCkpKSkgcy5zcGxpY2UobiwgMSk7IGVsc2UgKytuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbiA9IDA7XG4gICAgICAgICAgICB3aGlsZSAobiA8IGwubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgaCA9IGxbbl07XG4gICAgICAgICAgICAgICAgaWYgKC0xID09PSBzLmZpbmRJbmRleCgodCA9PiAhIW8oaCwgdCkpKSkgcy5wdXNoKGgpO1xuICAgICAgICAgICAgICAgICsrbjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICBsZXQgciA9IG51bGw7XG4gICAgICAgIGxldCBvO1xuICAgICAgICB3aGlsZSAobiA8IGkpIHtcbiAgICAgICAgICAgIG8gPSBlW25dO1xuICAgICAgICAgICAgaWYgKG8uc2VsZWN0ZWQpIHtcbiAgICAgICAgICAgICAgICByID0gcnIuY2FsbChvLCBcIm1vZGVsXCIpID8gby5tb2RlbCA6IG8udmFsdWU7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICArK247XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5vdiA9IHRoaXMudjtcbiAgICAgICAgdGhpcy52ID0gcjtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIExlKCkge1xuICAgICAgICAodGhpcy5PZSA9IG5ldyB0aGlzLm8ub3duZXJEb2N1bWVudC5kZWZhdWx0Vmlldy5NdXRhdGlvbk9ic2VydmVyKHRoaXMucWUuYmluZCh0aGlzKSkpLm9ic2VydmUodGhpcy5vLCBvcik7XG4gICAgICAgIHRoaXMuJGUodGhpcy52IGluc3RhbmNlb2YgQXJyYXkgPyB0aGlzLnYgOiBudWxsKTtcbiAgICAgICAgdGhpcy5pTyA9IHRydWU7XG4gICAgfVxuICAgIE1lKCkge1xuICAgICAgICB2YXIgdDtcbiAgICAgICAgdGhpcy5PZS5kaXNjb25uZWN0KCk7XG4gICAgICAgIG51bGwgPT09ICh0ID0gdGhpcy5QZSkgfHwgdm9pZCAwID09PSB0ID8gdm9pZCAwIDogdC51bnN1YnNjcmliZSh0aGlzKTtcbiAgICAgICAgdGhpcy5PZSA9IHRoaXMuUGUgPSB2b2lkIDA7XG4gICAgICAgIHRoaXMuaU8gPSBmYWxzZTtcbiAgICB9XG4gICAgJGUodCkge1xuICAgICAgICB2YXIgZTtcbiAgICAgICAgbnVsbCA9PT0gKGUgPSB0aGlzLlBlKSB8fCB2b2lkIDAgPT09IGUgPyB2b2lkIDAgOiBlLnVuc3Vic2NyaWJlKHRoaXMpO1xuICAgICAgICB0aGlzLlBlID0gdm9pZCAwO1xuICAgICAgICBpZiAobnVsbCAhPSB0KSB7XG4gICAgICAgICAgICBpZiAoIXRoaXMuby5tdWx0aXBsZSkgdGhyb3cgbmV3IEVycm9yKFwiQVVSMDY1NFwiKTtcbiAgICAgICAgICAgICh0aGlzLlBlID0gdGhpcy5vTC5nZXRBcnJheU9ic2VydmVyKHQpKS5zdWJzY3JpYmUodGhpcyk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgaGFuZGxlRXZlbnQoKSB7XG4gICAgICAgIGNvbnN0IHQgPSB0aGlzLnN5bmNWYWx1ZSgpO1xuICAgICAgICBpZiAodCkgdGhpcy5xdWV1ZS5hZGQodGhpcyk7XG4gICAgfVxuICAgIHFlKHQpIHtcbiAgICAgICAgdGhpcy5zeW5jT3B0aW9ucygpO1xuICAgICAgICBjb25zdCBlID0gdGhpcy5zeW5jVmFsdWUoKTtcbiAgICAgICAgaWYgKGUpIHRoaXMucXVldWUuYWRkKHRoaXMpO1xuICAgIH1cbiAgICBzdWJzY3JpYmUodCkge1xuICAgICAgICBpZiAodGhpcy5zdWJzLmFkZCh0KSAmJiAxID09PSB0aGlzLnN1YnMuY291bnQpIHtcbiAgICAgICAgICAgIHRoaXMuaGFuZGxlci5zdWJzY3JpYmUodGhpcy5vLCB0aGlzKTtcbiAgICAgICAgICAgIHRoaXMuTGUoKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICB1bnN1YnNjcmliZSh0KSB7XG4gICAgICAgIGlmICh0aGlzLnN1YnMucmVtb3ZlKHQpICYmIDAgPT09IHRoaXMuc3Vicy5jb3VudCkge1xuICAgICAgICAgICAgdGhpcy5oYW5kbGVyLmRpc3Bvc2UoKTtcbiAgICAgICAgICAgIHRoaXMuTWUoKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBmbHVzaCgpIHtcbiAgICAgICAgYXIgPSB0aGlzLm92O1xuICAgICAgICB0aGlzLm92ID0gdGhpcy52O1xuICAgICAgICB0aGlzLnN1YnMubm90aWZ5KHRoaXMudiwgYXIsIDApO1xuICAgIH1cbn1cblxuUChTZWxlY3RWYWx1ZU9ic2VydmVyKTtcblxuTyhTZWxlY3RWYWx1ZU9ic2VydmVyKTtcblxuZnVuY3Rpb24gaHIodCkge1xuICAgIGNvbnN0IGUgPSBbXTtcbiAgICBpZiAoMCA9PT0gdC5sZW5ndGgpIHJldHVybiBlO1xuICAgIGNvbnN0IGkgPSB0Lmxlbmd0aDtcbiAgICBsZXQgcyA9IDA7XG4gICAgbGV0IG47XG4gICAgd2hpbGUgKGkgPiBzKSB7XG4gICAgICAgIG4gPSB0W3NdO1xuICAgICAgICBpZiAobi5zZWxlY3RlZCkgZVtlLmxlbmd0aF0gPSByci5jYWxsKG4sIFwibW9kZWxcIikgPyBuLm1vZGVsIDogbi52YWx1ZTtcbiAgICAgICAgKytzO1xuICAgIH1cbiAgICByZXR1cm4gZTtcbn1cblxubGV0IGFyO1xuXG5jb25zdCBjciA9IFwiLS1cIjtcblxuY2xhc3MgU3R5bGVBdHRyaWJ1dGVBY2Nlc3NvciB7XG4gICAgY29uc3RydWN0b3IodCkge1xuICAgICAgICB0aGlzLm9iaiA9IHQ7XG4gICAgICAgIHRoaXMudHlwZSA9IDIgfCA0O1xuICAgICAgICB0aGlzLnZhbHVlID0gXCJcIjtcbiAgICAgICAgdGhpcy5vdiA9IFwiXCI7XG4gICAgICAgIHRoaXMuc3R5bGVzID0ge307XG4gICAgICAgIHRoaXMudmVyc2lvbiA9IDA7XG4gICAgICAgIHRoaXMuSCA9IGZhbHNlO1xuICAgIH1cbiAgICBnZXRWYWx1ZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMub2JqLnN0eWxlLmNzc1RleHQ7XG4gICAgfVxuICAgIHNldFZhbHVlKHQsIGUpIHtcbiAgICAgICAgdGhpcy52YWx1ZSA9IHQ7XG4gICAgICAgIHRoaXMuSCA9IHQgIT09IHRoaXMub3Y7XG4gICAgICAgIGlmICgwID09PSAoMjU2ICYgZSkpIHRoaXMuSygpO1xuICAgIH1cbiAgICBVZSh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSBbXTtcbiAgICAgICAgY29uc3QgaSA9IC91cmxcXChbXildKyQvO1xuICAgICAgICBsZXQgcyA9IDA7XG4gICAgICAgIGxldCBuID0gXCJcIjtcbiAgICAgICAgbGV0IHI7XG4gICAgICAgIGxldCBvO1xuICAgICAgICBsZXQgbDtcbiAgICAgICAgbGV0IGg7XG4gICAgICAgIHdoaWxlIChzIDwgdC5sZW5ndGgpIHtcbiAgICAgICAgICAgIHIgPSB0LmluZGV4T2YoXCI7XCIsIHMpO1xuICAgICAgICAgICAgaWYgKC0xID09PSByKSByID0gdC5sZW5ndGg7XG4gICAgICAgICAgICBuICs9IHQuc3Vic3RyaW5nKHMsIHIpO1xuICAgICAgICAgICAgcyA9IHIgKyAxO1xuICAgICAgICAgICAgaWYgKGkudGVzdChuKSkge1xuICAgICAgICAgICAgICAgIG4gKz0gXCI7XCI7XG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBvID0gbi5pbmRleE9mKFwiOlwiKTtcbiAgICAgICAgICAgIGwgPSBuLnN1YnN0cmluZygwLCBvKS50cmltKCk7XG4gICAgICAgICAgICBoID0gbi5zdWJzdHJpbmcobyArIDEpLnRyaW0oKTtcbiAgICAgICAgICAgIGUucHVzaChbIGwsIGggXSk7XG4gICAgICAgICAgICBuID0gXCJcIjtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZTtcbiAgICB9XG4gICAgRmUodCkge1xuICAgICAgICBsZXQgZTtcbiAgICAgICAgbGV0IGk7XG4gICAgICAgIGNvbnN0IHMgPSBbXTtcbiAgICAgICAgZm9yIChpIGluIHQpIHtcbiAgICAgICAgICAgIGUgPSB0W2ldO1xuICAgICAgICAgICAgaWYgKG51bGwgPT0gZSkgY29udGludWU7XG4gICAgICAgICAgICBpZiAoQXQoZSkpIHtcbiAgICAgICAgICAgICAgICBpZiAoaS5zdGFydHNXaXRoKGNyKSkge1xuICAgICAgICAgICAgICAgICAgICBzLnB1c2goWyBpLCBlIF0pO1xuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcy5wdXNoKFsgcihpKSwgZSBdKTtcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHMucHVzaCguLi50aGlzLlZlKGUpKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcztcbiAgICB9XG4gICAgX2UodCkge1xuICAgICAgICBjb25zdCBlID0gdC5sZW5ndGg7XG4gICAgICAgIGlmIChlID4gMCkge1xuICAgICAgICAgICAgY29uc3QgaSA9IFtdO1xuICAgICAgICAgICAgbGV0IHMgPSAwO1xuICAgICAgICAgICAgZm9yICg7ZSA+IHM7ICsrcykgaS5wdXNoKC4uLnRoaXMuVmUodFtzXSkpO1xuICAgICAgICAgICAgcmV0dXJuIGk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGg7XG4gICAgfVxuICAgIFZlKHQpIHtcbiAgICAgICAgaWYgKEF0KHQpKSByZXR1cm4gdGhpcy5VZSh0KTtcbiAgICAgICAgaWYgKHQgaW5zdGFuY2VvZiBBcnJheSkgcmV0dXJuIHRoaXMuX2UodCk7XG4gICAgICAgIGlmICh0IGluc3RhbmNlb2YgT2JqZWN0KSByZXR1cm4gdGhpcy5GZSh0KTtcbiAgICAgICAgcmV0dXJuIGg7XG4gICAgfVxuICAgIEsoKSB7XG4gICAgICAgIGlmICh0aGlzLkgpIHtcbiAgICAgICAgICAgIHRoaXMuSCA9IGZhbHNlO1xuICAgICAgICAgICAgY29uc3QgdCA9IHRoaXMudmFsdWU7XG4gICAgICAgICAgICBjb25zdCBlID0gdGhpcy5zdHlsZXM7XG4gICAgICAgICAgICBjb25zdCBpID0gdGhpcy5WZSh0KTtcbiAgICAgICAgICAgIGxldCBzO1xuICAgICAgICAgICAgbGV0IG4gPSB0aGlzLnZlcnNpb247XG4gICAgICAgICAgICB0aGlzLm92ID0gdDtcbiAgICAgICAgICAgIGxldCByO1xuICAgICAgICAgICAgbGV0IG87XG4gICAgICAgICAgICBsZXQgbDtcbiAgICAgICAgICAgIGxldCBoID0gMDtcbiAgICAgICAgICAgIGNvbnN0IGEgPSBpLmxlbmd0aDtcbiAgICAgICAgICAgIGZvciAoO2ggPCBhOyArK2gpIHtcbiAgICAgICAgICAgICAgICByID0gaVtoXTtcbiAgICAgICAgICAgICAgICBvID0gclswXTtcbiAgICAgICAgICAgICAgICBsID0gclsxXTtcbiAgICAgICAgICAgICAgICB0aGlzLnNldFByb3BlcnR5KG8sIGwpO1xuICAgICAgICAgICAgICAgIGVbb10gPSBuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5zdHlsZXMgPSBlO1xuICAgICAgICAgICAgdGhpcy52ZXJzaW9uICs9IDE7XG4gICAgICAgICAgICBpZiAoMCA9PT0gbikgcmV0dXJuO1xuICAgICAgICAgICAgbiAtPSAxO1xuICAgICAgICAgICAgZm9yIChzIGluIGUpIHtcbiAgICAgICAgICAgICAgICBpZiAoIU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChlLCBzKSB8fCBlW3NdICE9PSBuKSBjb250aW51ZTtcbiAgICAgICAgICAgICAgICB0aGlzLm9iai5zdHlsZS5yZW1vdmVQcm9wZXJ0eShzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBzZXRQcm9wZXJ0eSh0LCBlKSB7XG4gICAgICAgIGxldCBpID0gXCJcIjtcbiAgICAgICAgaWYgKG51bGwgIT0gZSAmJiBDdChlLmluZGV4T2YpICYmIGUuaW5jbHVkZXMoXCIhaW1wb3J0YW50XCIpKSB7XG4gICAgICAgICAgICBpID0gXCJpbXBvcnRhbnRcIjtcbiAgICAgICAgICAgIGUgPSBlLnJlcGxhY2UoXCIhaW1wb3J0YW50XCIsIFwiXCIpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMub2JqLnN0eWxlLnNldFByb3BlcnR5KHQsIGUsIGkpO1xuICAgIH1cbiAgICBiaW5kKHQpIHtcbiAgICAgICAgdGhpcy52YWx1ZSA9IHRoaXMub3YgPSB0aGlzLm9iai5zdHlsZS5jc3NUZXh0O1xuICAgIH1cbn1cblxuY2xhc3MgVmFsdWVBdHRyaWJ1dGVPYnNlcnZlciB7XG4gICAgY29uc3RydWN0b3IodCwgZSwgaSkge1xuICAgICAgICB0aGlzLmhhbmRsZXIgPSBpO1xuICAgICAgICB0aGlzLnR5cGUgPSAyIHwgMSB8IDQ7XG4gICAgICAgIHRoaXMudiA9IFwiXCI7XG4gICAgICAgIHRoaXMub3YgPSBcIlwiO1xuICAgICAgICB0aGlzLkggPSBmYWxzZTtcbiAgICAgICAgdGhpcy5vID0gdDtcbiAgICAgICAgdGhpcy5rID0gZTtcbiAgICB9XG4gICAgZ2V0VmFsdWUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnY7XG4gICAgfVxuICAgIHNldFZhbHVlKHQsIGUpIHtcbiAgICAgICAgaWYgKE9iamVjdC5pcyh0LCB0aGlzLnYpKSByZXR1cm47XG4gICAgICAgIHRoaXMub3YgPSB0aGlzLnY7XG4gICAgICAgIHRoaXMudiA9IHQ7XG4gICAgICAgIHRoaXMuSCA9IHRydWU7XG4gICAgICAgIGlmICghdGhpcy5oYW5kbGVyLmNvbmZpZy5yZWFkb25seSAmJiAwID09PSAoMjU2ICYgZSkpIHRoaXMuSyhlKTtcbiAgICB9XG4gICAgSyh0KSB7XG4gICAgICAgIHZhciBlO1xuICAgICAgICBpZiAodGhpcy5IKSB7XG4gICAgICAgICAgICB0aGlzLkggPSBmYWxzZTtcbiAgICAgICAgICAgIHRoaXMub1t0aGlzLmtdID0gbnVsbCAhPT0gKGUgPSB0aGlzLnYpICYmIHZvaWQgMCAhPT0gZSA/IGUgOiB0aGlzLmhhbmRsZXIuY29uZmlnLmRlZmF1bHQ7XG4gICAgICAgICAgICBpZiAoMCA9PT0gKDIgJiB0KSkgdGhpcy5xdWV1ZS5hZGQodGhpcyk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgaGFuZGxlRXZlbnQoKSB7XG4gICAgICAgIHRoaXMub3YgPSB0aGlzLnY7XG4gICAgICAgIHRoaXMudiA9IHRoaXMub1t0aGlzLmtdO1xuICAgICAgICBpZiAodGhpcy5vdiAhPT0gdGhpcy52KSB7XG4gICAgICAgICAgICB0aGlzLkggPSBmYWxzZTtcbiAgICAgICAgICAgIHRoaXMucXVldWUuYWRkKHRoaXMpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHN1YnNjcmliZSh0KSB7XG4gICAgICAgIGlmICh0aGlzLnN1YnMuYWRkKHQpICYmIDEgPT09IHRoaXMuc3Vicy5jb3VudCkge1xuICAgICAgICAgICAgdGhpcy5oYW5kbGVyLnN1YnNjcmliZSh0aGlzLm8sIHRoaXMpO1xuICAgICAgICAgICAgdGhpcy52ID0gdGhpcy5vdiA9IHRoaXMub1t0aGlzLmtdO1xuICAgICAgICB9XG4gICAgfVxuICAgIHVuc3Vic2NyaWJlKHQpIHtcbiAgICAgICAgaWYgKHRoaXMuc3Vicy5yZW1vdmUodCkgJiYgMCA9PT0gdGhpcy5zdWJzLmNvdW50KSB0aGlzLmhhbmRsZXIuZGlzcG9zZSgpO1xuICAgIH1cbiAgICBmbHVzaCgpIHtcbiAgICAgICAgdXIgPSB0aGlzLm92O1xuICAgICAgICB0aGlzLm92ID0gdGhpcy52O1xuICAgICAgICB0aGlzLnN1YnMubm90aWZ5KHRoaXMudiwgdXIsIDApO1xuICAgIH1cbn1cblxuUChWYWx1ZUF0dHJpYnV0ZU9ic2VydmVyKTtcblxuTyhWYWx1ZUF0dHJpYnV0ZU9ic2VydmVyKTtcblxubGV0IHVyO1xuXG5jb25zdCBmciA9IFwiaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGlua1wiO1xuXG5jb25zdCBkciA9IFwiaHR0cDovL3d3dy53My5vcmcvWE1MLzE5OTgvbmFtZXNwYWNlXCI7XG5cbmNvbnN0IG1yID0gXCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3htbG5zL1wiO1xuXG5jb25zdCB2ciA9IE9iamVjdC5hc3NpZ24od3QoKSwge1xuICAgIFwieGxpbms6YWN0dWF0ZVwiOiBbIFwiYWN0dWF0ZVwiLCBmciBdLFxuICAgIFwieGxpbms6YXJjcm9sZVwiOiBbIFwiYXJjcm9sZVwiLCBmciBdLFxuICAgIFwieGxpbms6aHJlZlwiOiBbIFwiaHJlZlwiLCBmciBdLFxuICAgIFwieGxpbms6cm9sZVwiOiBbIFwicm9sZVwiLCBmciBdLFxuICAgIFwieGxpbms6c2hvd1wiOiBbIFwic2hvd1wiLCBmciBdLFxuICAgIFwieGxpbms6dGl0bGVcIjogWyBcInRpdGxlXCIsIGZyIF0sXG4gICAgXCJ4bGluazp0eXBlXCI6IFsgXCJ0eXBlXCIsIGZyIF0sXG4gICAgXCJ4bWw6bGFuZ1wiOiBbIFwibGFuZ1wiLCBkciBdLFxuICAgIFwieG1sOnNwYWNlXCI6IFsgXCJzcGFjZVwiLCBkciBdLFxuICAgIHhtbG5zOiBbIFwieG1sbnNcIiwgbXIgXSxcbiAgICBcInhtbG5zOnhsaW5rXCI6IFsgXCJ4bGlua1wiLCBtciBdXG59KTtcblxuY29uc3QgcHIgPSBuZXcgWTtcblxucHIudHlwZSA9IDIgfCA0O1xuXG5jbGFzcyBOb2RlT2JzZXJ2ZXJDb25maWcge1xuICAgIGNvbnN0cnVjdG9yKHQpIHtcbiAgICAgICAgdmFyIGU7XG4gICAgICAgIHRoaXMudHlwZSA9IG51bGwgIT09IChlID0gdC50eXBlKSAmJiB2b2lkIDAgIT09IGUgPyBlIDogVmFsdWVBdHRyaWJ1dGVPYnNlcnZlcjtcbiAgICAgICAgdGhpcy5ldmVudHMgPSB0LmV2ZW50cztcbiAgICAgICAgdGhpcy5yZWFkb25seSA9IHQucmVhZG9ubHk7XG4gICAgICAgIHRoaXMuZGVmYXVsdCA9IHQuZGVmYXVsdDtcbiAgICB9XG59XG5cbmNsYXNzIE5vZGVPYnNlcnZlckxvY2F0b3Ige1xuICAgIGNvbnN0cnVjdG9yKHQsIGUsIGksIHMpIHtcbiAgICAgICAgdGhpcy5sb2NhdG9yID0gdDtcbiAgICAgICAgdGhpcy5wbGF0Zm9ybSA9IGU7XG4gICAgICAgIHRoaXMuZGlydHlDaGVja2VyID0gaTtcbiAgICAgICAgdGhpcy5zdmdBbmFseXplciA9IHM7XG4gICAgICAgIHRoaXMuYWxsb3dEaXJ0eUNoZWNrID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5qZSA9IHd0KCk7XG4gICAgICAgIHRoaXMuTmUgPSB3dCgpO1xuICAgICAgICB0aGlzLldlID0gd3QoKTtcbiAgICAgICAgdGhpcy5IZSA9IHd0KCk7XG4gICAgICAgIGNvbnN0IG4gPSBbIFwiY2hhbmdlXCIsIFwiaW5wdXRcIiBdO1xuICAgICAgICBjb25zdCByID0ge1xuICAgICAgICAgICAgZXZlbnRzOiBuLFxuICAgICAgICAgICAgZGVmYXVsdDogXCJcIlxuICAgICAgICB9O1xuICAgICAgICB0aGlzLnVzZUNvbmZpZyh7XG4gICAgICAgICAgICBJTlBVVDoge1xuICAgICAgICAgICAgICAgIHZhbHVlOiByLFxuICAgICAgICAgICAgICAgIHZhbHVlQXNOdW1iZXI6IHtcbiAgICAgICAgICAgICAgICAgICAgZXZlbnRzOiBuLFxuICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OiAwXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBjaGVja2VkOiB7XG4gICAgICAgICAgICAgICAgICAgIHR5cGU6IENoZWNrZWRPYnNlcnZlcixcbiAgICAgICAgICAgICAgICAgICAgZXZlbnRzOiBuXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBmaWxlczoge1xuICAgICAgICAgICAgICAgICAgICBldmVudHM6IG4sXG4gICAgICAgICAgICAgICAgICAgIHJlYWRvbmx5OiB0cnVlXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIFNFTEVDVDoge1xuICAgICAgICAgICAgICAgIHZhbHVlOiB7XG4gICAgICAgICAgICAgICAgICAgIHR5cGU6IFNlbGVjdFZhbHVlT2JzZXJ2ZXIsXG4gICAgICAgICAgICAgICAgICAgIGV2ZW50czogWyBcImNoYW5nZVwiIF0sXG4gICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6IFwiXCJcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgVEVYVEFSRUE6IHtcbiAgICAgICAgICAgICAgICB2YWx1ZTogclxuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgY29uc3QgbyA9IHtcbiAgICAgICAgICAgIGV2ZW50czogWyBcImNoYW5nZVwiLCBcImlucHV0XCIsIFwiYmx1clwiLCBcImtleXVwXCIsIFwicGFzdGVcIiBdLFxuICAgICAgICAgICAgZGVmYXVsdDogXCJcIlxuICAgICAgICB9O1xuICAgICAgICBjb25zdCBsID0ge1xuICAgICAgICAgICAgZXZlbnRzOiBbIFwic2Nyb2xsXCIgXSxcbiAgICAgICAgICAgIGRlZmF1bHQ6IDBcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy51c2VDb25maWdHbG9iYWwoe1xuICAgICAgICAgICAgc2Nyb2xsVG9wOiBsLFxuICAgICAgICAgICAgc2Nyb2xsTGVmdDogbCxcbiAgICAgICAgICAgIHRleHRDb250ZW50OiBvLFxuICAgICAgICAgICAgaW5uZXJIVE1MOiBvXG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLm92ZXJyaWRlQWNjZXNzb3JHbG9iYWwoXCJjc3NcIiwgXCJzdHlsZVwiLCBcImNsYXNzXCIpO1xuICAgICAgICB0aGlzLm92ZXJyaWRlQWNjZXNzb3Ioe1xuICAgICAgICAgICAgSU5QVVQ6IFsgXCJ2YWx1ZVwiLCBcImNoZWNrZWRcIiwgXCJtb2RlbFwiIF0sXG4gICAgICAgICAgICBTRUxFQ1Q6IFsgXCJ2YWx1ZVwiIF0sXG4gICAgICAgICAgICBURVhUQVJFQTogWyBcInZhbHVlXCIgXVxuICAgICAgICB9KTtcbiAgICB9XG4gICAgc3RhdGljIHJlZ2lzdGVyKHQpIHtcbiAgICAgICAgYy5hbGlhc1RvKFEsIE5vZGVPYnNlcnZlckxvY2F0b3IpLnJlZ2lzdGVyKHQpO1xuICAgICAgICBjLnNpbmdsZXRvbihRLCBOb2RlT2JzZXJ2ZXJMb2NhdG9yKS5yZWdpc3Rlcih0KTtcbiAgICB9XG4gICAgaGFuZGxlcyh0LCBlKSB7XG4gICAgICAgIHJldHVybiB0IGluc3RhbmNlb2YgdGhpcy5wbGF0Zm9ybS5Ob2RlO1xuICAgIH1cbiAgICB1c2VDb25maWcodCwgZSwgaSkge1xuICAgICAgICB2YXIgcywgbjtcbiAgICAgICAgY29uc3QgciA9IHRoaXMuamU7XG4gICAgICAgIGxldCBvO1xuICAgICAgICBpZiAoQXQodCkpIHtcbiAgICAgICAgICAgIG8gPSBudWxsICE9PSAocyA9IHJbdF0pICYmIHZvaWQgMCAhPT0gcyA/IHMgOiByW3RdID0gd3QoKTtcbiAgICAgICAgICAgIGlmIChudWxsID09IG9bZV0pIG9bZV0gPSBuZXcgTm9kZU9ic2VydmVyQ29uZmlnKGkpOyBlbHNlIHdyKHQsIGUpO1xuICAgICAgICB9IGVsc2UgZm9yIChjb25zdCBpIGluIHQpIHtcbiAgICAgICAgICAgIG8gPSBudWxsICE9PSAobiA9IHJbaV0pICYmIHZvaWQgMCAhPT0gbiA/IG4gOiByW2ldID0gd3QoKTtcbiAgICAgICAgICAgIGNvbnN0IHMgPSB0W2ldO1xuICAgICAgICAgICAgZm9yIChlIGluIHMpIGlmIChudWxsID09IG9bZV0pIG9bZV0gPSBuZXcgTm9kZU9ic2VydmVyQ29uZmlnKHNbZV0pOyBlbHNlIHdyKGksIGUpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHVzZUNvbmZpZ0dsb2JhbCh0LCBlKSB7XG4gICAgICAgIGNvbnN0IGkgPSB0aGlzLk5lO1xuICAgICAgICBpZiAoXCJvYmplY3RcIiA9PT0gdHlwZW9mIHQpIGZvciAoY29uc3QgZSBpbiB0KSBpZiAobnVsbCA9PSBpW2VdKSBpW2VdID0gbmV3IE5vZGVPYnNlcnZlckNvbmZpZyh0W2VdKTsgZWxzZSB3cihcIipcIiwgZSk7IGVsc2UgaWYgKG51bGwgPT0gaVt0XSkgaVt0XSA9IG5ldyBOb2RlT2JzZXJ2ZXJDb25maWcoZSk7IGVsc2Ugd3IoXCIqXCIsIHQpO1xuICAgIH1cbiAgICBnZXRBY2Nlc3Nvcih0LCBlLCBpKSB7XG4gICAgICAgIHZhciBzO1xuICAgICAgICBpZiAoZSBpbiB0aGlzLkhlIHx8IGUgaW4gKG51bGwgIT09IChzID0gdGhpcy5XZVt0LnRhZ05hbWVdKSAmJiB2b2lkIDAgIT09IHMgPyBzIDogRSkpIHJldHVybiB0aGlzLmdldE9ic2VydmVyKHQsIGUsIGkpO1xuICAgICAgICBzd2l0Y2ggKGUpIHtcbiAgICAgICAgICBjYXNlIFwic3JjXCI6XG4gICAgICAgICAgY2FzZSBcImhyZWZcIjpcbiAgICAgICAgICBjYXNlIFwicm9sZVwiOlxuICAgICAgICAgICAgcmV0dXJuIHRyO1xuXG4gICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBjb25zdCBpID0gdnJbZV07XG4gICAgICAgICAgICAgICAgaWYgKHZvaWQgMCAhPT0gaSkgcmV0dXJuIEF0dHJpYnV0ZU5TQWNjZXNzb3IuZm9yTnMoaVsxXSk7XG4gICAgICAgICAgICAgICAgaWYgKHl0KHQsIGUsIHRoaXMuc3ZnQW5hbHl6ZXIpKSByZXR1cm4gdHI7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHByO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIG92ZXJyaWRlQWNjZXNzb3IodCwgZSkge1xuICAgICAgICB2YXIgaSwgcztcbiAgICAgICAgdmFyIG4sIHI7XG4gICAgICAgIGxldCBvO1xuICAgICAgICBpZiAoQXQodCkpIHtcbiAgICAgICAgICAgIG8gPSBudWxsICE9PSAoaSA9IChuID0gdGhpcy5XZSlbdF0pICYmIHZvaWQgMCAhPT0gaSA/IGkgOiBuW3RdID0gd3QoKTtcbiAgICAgICAgICAgIG9bZV0gPSB0cnVlO1xuICAgICAgICB9IGVsc2UgZm9yIChjb25zdCBlIGluIHQpIGZvciAoY29uc3QgaSBvZiB0W2VdKSB7XG4gICAgICAgICAgICBvID0gbnVsbCAhPT0gKHMgPSAociA9IHRoaXMuV2UpW2VdKSAmJiB2b2lkIDAgIT09IHMgPyBzIDogcltlXSA9IHd0KCk7XG4gICAgICAgICAgICBvW2ldID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBvdmVycmlkZUFjY2Vzc29yR2xvYmFsKC4uLnQpIHtcbiAgICAgICAgZm9yIChjb25zdCBlIG9mIHQpIHRoaXMuSGVbZV0gPSB0cnVlO1xuICAgIH1cbiAgICBnZXRPYnNlcnZlcih0LCBlLCBpKSB7XG4gICAgICAgIHZhciBzLCBuO1xuICAgICAgICBzd2l0Y2ggKGUpIHtcbiAgICAgICAgICBjYXNlIFwicm9sZVwiOlxuICAgICAgICAgICAgcmV0dXJuIHRyO1xuXG4gICAgICAgICAgY2FzZSBcImNsYXNzXCI6XG4gICAgICAgICAgICByZXR1cm4gbmV3IENsYXNzQXR0cmlidXRlQWNjZXNzb3IodCk7XG5cbiAgICAgICAgICBjYXNlIFwiY3NzXCI6XG4gICAgICAgICAgY2FzZSBcInN0eWxlXCI6XG4gICAgICAgICAgICByZXR1cm4gbmV3IFN0eWxlQXR0cmlidXRlQWNjZXNzb3IodCk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgciA9IG51bGwgIT09IChuID0gbnVsbCA9PT0gKHMgPSB0aGlzLmplW3QudGFnTmFtZV0pIHx8IHZvaWQgMCA9PT0gcyA/IHZvaWQgMCA6IHNbZV0pICYmIHZvaWQgMCAhPT0gbiA/IG4gOiB0aGlzLk5lW2VdO1xuICAgICAgICBpZiAobnVsbCAhPSByKSByZXR1cm4gbmV3IHIudHlwZSh0LCBlLCBuZXcgRXZlbnRTdWJzY3JpYmVyKHIpLCBpLCB0aGlzLmxvY2F0b3IpO1xuICAgICAgICBjb25zdCBvID0gdnJbZV07XG4gICAgICAgIGlmICh2b2lkIDAgIT09IG8pIHJldHVybiBBdHRyaWJ1dGVOU0FjY2Vzc29yLmZvck5zKG9bMV0pO1xuICAgICAgICBpZiAoeXQodCwgZSwgdGhpcy5zdmdBbmFseXplcikpIHJldHVybiB0cjtcbiAgICAgICAgaWYgKGUgaW4gdC5jb25zdHJ1Y3Rvci5wcm90b3R5cGUpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLmFsbG93RGlydHlDaGVjaykgcmV0dXJuIHRoaXMuZGlydHlDaGVja2VyLmNyZWF0ZVByb3BlcnR5KHQsIGUpO1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBBVVIwNjUyOiR7U3RyaW5nKGUpfWApO1xuICAgICAgICB9IGVsc2UgcmV0dXJuIG5ldyBaKHQsIGUpO1xuICAgIH1cbn1cblxuTm9kZU9ic2VydmVyTG9jYXRvci5pbmplY3QgPSBbIEIsIEt0LCBKLCBZdCBdO1xuXG5mdW5jdGlvbiBncih0LCBlKSB7XG4gICAgaWYgKHQgaW5zdGFuY2VvZiBBcnJheSkgcmV0dXJuIGUuZ2V0QXJyYXlPYnNlcnZlcih0KTtcbiAgICBpZiAodCBpbnN0YW5jZW9mIE1hcCkgcmV0dXJuIGUuZ2V0TWFwT2JzZXJ2ZXIodCk7XG4gICAgaWYgKHQgaW5zdGFuY2VvZiBTZXQpIHJldHVybiBlLmdldFNldE9ic2VydmVyKHQpO1xufVxuXG5mdW5jdGlvbiB3cih0LCBlKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKGBBVVIwNjUzOiR7U3RyaW5nKGUpfUAke3R9YCk7XG59XG5cbmNsYXNzIFVwZGF0ZVRyaWdnZXJCaW5kaW5nQmVoYXZpb3Ige1xuICAgIGNvbnN0cnVjdG9yKHQpIHtcbiAgICAgICAgdGhpcy5vTCA9IHQ7XG4gICAgfVxuICAgIGJpbmQodCwgZSwgaSwgLi4ucykge1xuICAgICAgICBpZiAoMCA9PT0gcy5sZW5ndGgpIHRocm93IG5ldyBFcnJvcihgQVVSMDgwMmApO1xuICAgICAgICBpZiAoaS5tb2RlICE9PSBELnR3b1dheSAmJiBpLm1vZGUgIT09IEQuZnJvbVZpZXcpIHRocm93IG5ldyBFcnJvcihcIkFVUjA4MDNcIik7XG4gICAgICAgIGNvbnN0IG4gPSB0aGlzLm9MLmdldE9ic2VydmVyKGkudGFyZ2V0LCBpLnRhcmdldFByb3BlcnR5KTtcbiAgICAgICAgaWYgKCFuLmhhbmRsZXIpIHRocm93IG5ldyBFcnJvcihcIkFVUjA4MDRcIik7XG4gICAgICAgIGkudGFyZ2V0T2JzZXJ2ZXIgPSBuO1xuICAgICAgICBjb25zdCByID0gbi5oYW5kbGVyO1xuICAgICAgICBuLm9yaWdpbmFsSGFuZGxlciA9IHI7XG4gICAgICAgIG4uaGFuZGxlciA9IG5ldyBFdmVudFN1YnNjcmliZXIobmV3IE5vZGVPYnNlcnZlckNvbmZpZyh7XG4gICAgICAgICAgICBkZWZhdWx0OiByLmNvbmZpZy5kZWZhdWx0LFxuICAgICAgICAgICAgZXZlbnRzOiBzLFxuICAgICAgICAgICAgcmVhZG9ubHk6IHIuY29uZmlnLnJlYWRvbmx5XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgdW5iaW5kKHQsIGUsIGkpIHtcbiAgICAgICAgaS50YXJnZXRPYnNlcnZlci5oYW5kbGVyLmRpc3Bvc2UoKTtcbiAgICAgICAgaS50YXJnZXRPYnNlcnZlci5oYW5kbGVyID0gaS50YXJnZXRPYnNlcnZlci5vcmlnaW5hbEhhbmRsZXI7XG4gICAgICAgIGkudGFyZ2V0T2JzZXJ2ZXIub3JpZ2luYWxIYW5kbGVyID0gbnVsbDtcbiAgICB9XG59XG5cblVwZGF0ZVRyaWdnZXJCaW5kaW5nQmVoYXZpb3IuaW5qZWN0ID0gWyBWIF07XG5cbkcoXCJ1cGRhdGVUcmlnZ2VyXCIpKFVwZGF0ZVRyaWdnZXJCaW5kaW5nQmVoYXZpb3IpO1xuXG5jbGFzcyBGb2N1cyB7XG4gICAgY29uc3RydWN0b3IodCwgZSkge1xuICAgICAgICB0aGlzLnplID0gdDtcbiAgICAgICAgdGhpcy5wID0gZTtcbiAgICAgICAgdGhpcy5HZSA9IGZhbHNlO1xuICAgIH1cbiAgICBiaW5kaW5nKCkge1xuICAgICAgICB0aGlzLnZhbHVlQ2hhbmdlZCgpO1xuICAgIH1cbiAgICB2YWx1ZUNoYW5nZWQoKSB7XG4gICAgICAgIGlmICh0aGlzLiRjb250cm9sbGVyLmlzQWN0aXZlKSB0aGlzLlhlKCk7IGVsc2UgdGhpcy5HZSA9IHRydWU7XG4gICAgfVxuICAgIGF0dGFjaGVkKCkge1xuICAgICAgICBpZiAodGhpcy5HZSkge1xuICAgICAgICAgICAgdGhpcy5HZSA9IGZhbHNlO1xuICAgICAgICAgICAgdGhpcy5YZSgpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuemUuYWRkRXZlbnRMaXN0ZW5lcihcImZvY3VzXCIsIHRoaXMpO1xuICAgICAgICB0aGlzLnplLmFkZEV2ZW50TGlzdGVuZXIoXCJibHVyXCIsIHRoaXMpO1xuICAgIH1cbiAgICBhZnRlckRldGFjaENoaWxkcmVuKCkge1xuICAgICAgICBjb25zdCB0ID0gdGhpcy56ZTtcbiAgICAgICAgdC5yZW1vdmVFdmVudExpc3RlbmVyKFwiZm9jdXNcIiwgdGhpcyk7XG4gICAgICAgIHQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImJsdXJcIiwgdGhpcyk7XG4gICAgfVxuICAgIGhhbmRsZUV2ZW50KHQpIHtcbiAgICAgICAgaWYgKFwiZm9jdXNcIiA9PT0gdC50eXBlKSB0aGlzLnZhbHVlID0gdHJ1ZTsgZWxzZSBpZiAoIXRoaXMuS2UpIHRoaXMudmFsdWUgPSBmYWxzZTtcbiAgICB9XG4gICAgWGUoKSB7XG4gICAgICAgIGNvbnN0IHQgPSB0aGlzLnplO1xuICAgICAgICBjb25zdCBlID0gdGhpcy5LZTtcbiAgICAgICAgY29uc3QgaSA9IHRoaXMudmFsdWU7XG4gICAgICAgIGlmIChpICYmICFlKSB0LmZvY3VzKCk7IGVsc2UgaWYgKCFpICYmIGUpIHQuYmx1cigpO1xuICAgIH1cbiAgICBnZXQgS2UoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnplID09PSB0aGlzLnAuZG9jdW1lbnQuYWN0aXZlRWxlbWVudDtcbiAgICB9XG59XG5cbkZvY3VzLmluamVjdCA9IFsgbnMsIEt0IF07XG5cbm90KFsgU3Qoe1xuICAgIG1vZGU6IEQudHdvV2F5XG59KSBdLCBGb2N1cy5wcm90b3R5cGUsIFwidmFsdWVcIiwgdm9pZCAwKTtcblxuUGUoXCJmb2N1c1wiKShGb2N1cyk7XG5cbmxldCBiciA9IGNsYXNzIFNob3cge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUsIGkpIHtcbiAgICAgICAgdGhpcy5lbCA9IHQ7XG4gICAgICAgIHRoaXMucCA9IGU7XG4gICAgICAgIHRoaXMuWWUgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5RZSA9IG51bGw7XG4gICAgICAgIHRoaXMuJHZhbCA9IFwiXCI7XG4gICAgICAgIHRoaXMuJHByaW8gPSBcIlwiO1xuICAgICAgICB0aGlzLnVwZGF0ZSA9ICgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuUWUgPSBudWxsO1xuICAgICAgICAgICAgaWYgKEJvb2xlYW4odGhpcy52YWx1ZSkgIT09IHRoaXMuWmUpIGlmICh0aGlzLlplID09PSB0aGlzLkplKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5aZSA9ICF0aGlzLkplO1xuICAgICAgICAgICAgICAgIHRoaXMuJHZhbCA9IHRoaXMuZWwuc3R5bGUuZ2V0UHJvcGVydHlWYWx1ZShcImRpc3BsYXlcIik7XG4gICAgICAgICAgICAgICAgdGhpcy4kcHJpbyA9IHRoaXMuZWwuc3R5bGUuZ2V0UHJvcGVydHlQcmlvcml0eShcImRpc3BsYXlcIik7XG4gICAgICAgICAgICAgICAgdGhpcy5lbC5zdHlsZS5zZXRQcm9wZXJ0eShcImRpc3BsYXlcIiwgXCJub25lXCIsIFwiaW1wb3J0YW50XCIpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLlplID0gdGhpcy5KZTtcbiAgICAgICAgICAgICAgICB0aGlzLmVsLnN0eWxlLnNldFByb3BlcnR5KFwiZGlzcGxheVwiLCB0aGlzLiR2YWwsIHRoaXMuJHByaW8pO1xuICAgICAgICAgICAgICAgIGlmIChcIlwiID09PSB0aGlzLmVsLmdldEF0dHJpYnV0ZShcInN0eWxlXCIpKSB0aGlzLmVsLnJlbW92ZUF0dHJpYnV0ZShcInN0eWxlXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICB0aGlzLlplID0gdGhpcy5KZSA9IFwiaGlkZVwiICE9PSBpLmFsaWFzO1xuICAgIH1cbiAgICBiaW5kaW5nKCkge1xuICAgICAgICB0aGlzLlllID0gdHJ1ZTtcbiAgICAgICAgdGhpcy51cGRhdGUoKTtcbiAgICB9XG4gICAgZGV0YWNoaW5nKCkge1xuICAgICAgICB2YXIgdDtcbiAgICAgICAgdGhpcy5ZZSA9IGZhbHNlO1xuICAgICAgICBudWxsID09PSAodCA9IHRoaXMuUWUpIHx8IHZvaWQgMCA9PT0gdCA/IHZvaWQgMCA6IHQuY2FuY2VsKCk7XG4gICAgICAgIHRoaXMuUWUgPSBudWxsO1xuICAgIH1cbiAgICB2YWx1ZUNoYW5nZWQoKSB7XG4gICAgICAgIGlmICh0aGlzLlllICYmIG51bGwgPT09IHRoaXMuUWUpIHRoaXMuUWUgPSB0aGlzLnAuZG9tV3JpdGVRdWV1ZS5xdWV1ZVRhc2sodGhpcy51cGRhdGUpO1xuICAgIH1cbn07XG5cbm90KFsgU3QgXSwgYnIucHJvdG90eXBlLCBcInZhbHVlXCIsIHZvaWQgMCk7XG5cbmJyID0gb3QoWyBsdCgwLCBucyksIGx0KDEsIEt0KSwgbHQoMiwga3MpIF0sIGJyKTtcblxudHQoXCJoaWRlXCIpKGJyKTtcblxuUGUoXCJzaG93XCIpKGJyKTtcblxuY2xhc3MgUG9ydGFsIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlLCBpKSB7XG4gICAgICAgIHRoaXMuaWQgPSB3KFwiYXUkY29tcG9uZW50XCIpO1xuICAgICAgICB0aGlzLnN0cmljdCA9IGZhbHNlO1xuICAgICAgICB0aGlzLnAgPSBpO1xuICAgICAgICB0aGlzLnRpID0gaS5kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgICB0aGlzLnZpZXcgPSB0LmNyZWF0ZSgpO1xuICAgICAgICBjcyh0aGlzLnZpZXcubm9kZXMsIGUpO1xuICAgIH1cbiAgICBhdHRhY2hpbmcodCwgZSwgaSkge1xuICAgICAgICBpZiAobnVsbCA9PSB0aGlzLmNhbGxiYWNrQ29udGV4dCkgdGhpcy5jYWxsYmFja0NvbnRleHQgPSB0aGlzLiRjb250cm9sbGVyLnNjb3BlLmJpbmRpbmdDb250ZXh0O1xuICAgICAgICBjb25zdCBzID0gdGhpcy50aSA9IHRoaXMuZWkoKTtcbiAgICAgICAgdGhpcy52aWV3LnNldEhvc3Qocyk7XG4gICAgICAgIHJldHVybiB0aGlzLmlpKHQsIHMsIGkpO1xuICAgIH1cbiAgICBkZXRhY2hpbmcodCwgZSwgaSkge1xuICAgICAgICByZXR1cm4gdGhpcy5zaSh0LCB0aGlzLnRpLCBpKTtcbiAgICB9XG4gICAgdGFyZ2V0Q2hhbmdlZCgpIHtcbiAgICAgICAgY29uc3QgeyRjb250cm9sbGVyOiB0fSA9IHRoaXM7XG4gICAgICAgIGlmICghdC5pc0FjdGl2ZSkgcmV0dXJuO1xuICAgICAgICBjb25zdCBlID0gdGhpcy50aTtcbiAgICAgICAgY29uc3QgaSA9IHRoaXMudGkgPSB0aGlzLmVpKCk7XG4gICAgICAgIGlmIChlID09PSBpKSByZXR1cm47XG4gICAgICAgIHRoaXMudmlldy5zZXRIb3N0KGkpO1xuICAgICAgICBjb25zdCBzID0gQyh0aGlzLnNpKG51bGwsIGksIHQuZmxhZ3MpLCAoKCkgPT4gdGhpcy5paShudWxsLCBpLCB0LmZsYWdzKSkpO1xuICAgICAgICBpZiAocyBpbnN0YW5jZW9mIFByb21pc2UpIHMuY2F0Y2goKHQgPT4ge1xuICAgICAgICAgICAgdGhyb3cgdDtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICBpaSh0LCBlLCBpKSB7XG4gICAgICAgIGNvbnN0IHthY3RpdmF0aW5nOiBzLCBjYWxsYmFja0NvbnRleHQ6IG4sIHZpZXc6IHJ9ID0gdGhpcztcbiAgICAgICAgci5zZXRIb3N0KGUpO1xuICAgICAgICByZXR1cm4gQyhudWxsID09PSBzIHx8IHZvaWQgMCA9PT0gcyA/IHZvaWQgMCA6IHMuY2FsbChuLCBlLCByKSwgKCgpID0+IHRoaXMubmkodCwgZSwgaSkpKTtcbiAgICB9XG4gICAgbmkodCwgZSwgaSkge1xuICAgICAgICBjb25zdCB7JGNvbnRyb2xsZXI6IHMsIHZpZXc6IG59ID0gdGhpcztcbiAgICAgICAgaWYgKG51bGwgPT09IHQpIG4ubm9kZXMuYXBwZW5kVG8oZSk7IGVsc2UgcmV0dXJuIEMobi5hY3RpdmF0ZShudWxsICE9PSB0ICYmIHZvaWQgMCAhPT0gdCA/IHQgOiBuLCBzLCBpLCBzLnNjb3BlKSwgKCgpID0+IHRoaXMucmkoZSkpKTtcbiAgICAgICAgcmV0dXJuIHRoaXMucmkoZSk7XG4gICAgfVxuICAgIHJpKHQpIHtcbiAgICAgICAgY29uc3Qge2FjdGl2YXRlZDogZSwgY2FsbGJhY2tDb250ZXh0OiBpLCB2aWV3OiBzfSA9IHRoaXM7XG4gICAgICAgIHJldHVybiBudWxsID09PSBlIHx8IHZvaWQgMCA9PT0gZSA/IHZvaWQgMCA6IGUuY2FsbChpLCB0LCBzKTtcbiAgICB9XG4gICAgc2kodCwgZSwgaSkge1xuICAgICAgICBjb25zdCB7ZGVhY3RpdmF0aW5nOiBzLCBjYWxsYmFja0NvbnRleHQ6IG4sIHZpZXc6IHJ9ID0gdGhpcztcbiAgICAgICAgcmV0dXJuIEMobnVsbCA9PT0gcyB8fCB2b2lkIDAgPT09IHMgPyB2b2lkIDAgOiBzLmNhbGwobiwgZSwgciksICgoKSA9PiB0aGlzLm9pKHQsIGUsIGkpKSk7XG4gICAgfVxuICAgIG9pKHQsIGUsIGkpIHtcbiAgICAgICAgY29uc3QgeyRjb250cm9sbGVyOiBzLCB2aWV3OiBufSA9IHRoaXM7XG4gICAgICAgIGlmIChudWxsID09PSB0KSBuLm5vZGVzLnJlbW92ZSgpOyBlbHNlIHJldHVybiBDKG4uZGVhY3RpdmF0ZSh0LCBzLCBpKSwgKCgpID0+IHRoaXMubGkoZSkpKTtcbiAgICAgICAgcmV0dXJuIHRoaXMubGkoZSk7XG4gICAgfVxuICAgIGxpKHQpIHtcbiAgICAgICAgY29uc3Qge2RlYWN0aXZhdGVkOiBlLCBjYWxsYmFja0NvbnRleHQ6IGksIHZpZXc6IHN9ID0gdGhpcztcbiAgICAgICAgcmV0dXJuIG51bGwgPT09IGUgfHwgdm9pZCAwID09PSBlID8gdm9pZCAwIDogZS5jYWxsKGksIHQsIHMpO1xuICAgIH1cbiAgICBlaSgpIHtcbiAgICAgICAgY29uc3QgdCA9IHRoaXMucDtcbiAgICAgICAgY29uc3QgZSA9IHQuZG9jdW1lbnQ7XG4gICAgICAgIGxldCBpID0gdGhpcy50YXJnZXQ7XG4gICAgICAgIGxldCBzID0gdGhpcy5yZW5kZXJDb250ZXh0O1xuICAgICAgICBpZiAoXCJcIiA9PT0gaSkge1xuICAgICAgICAgICAgaWYgKHRoaXMuc3RyaWN0KSB0aHJvdyBuZXcgRXJyb3IoXCJBVVIwODExXCIpO1xuICAgICAgICAgICAgcmV0dXJuIGUuYm9keTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoQXQoaSkpIHtcbiAgICAgICAgICAgIGxldCBuID0gZTtcbiAgICAgICAgICAgIGlmIChBdChzKSkgcyA9IGUucXVlcnlTZWxlY3RvcihzKTtcbiAgICAgICAgICAgIGlmIChzIGluc3RhbmNlb2YgdC5Ob2RlKSBuID0gcztcbiAgICAgICAgICAgIGkgPSBuLnF1ZXJ5U2VsZWN0b3IoaSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGkgaW5zdGFuY2VvZiB0Lk5vZGUpIHJldHVybiBpO1xuICAgICAgICBpZiAobnVsbCA9PSBpKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5zdHJpY3QpIHRocm93IG5ldyBFcnJvcihcIkFVUjA4MTJcIik7XG4gICAgICAgICAgICByZXR1cm4gZS5ib2R5O1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBpO1xuICAgIH1cbiAgICBkaXNwb3NlKCkge1xuICAgICAgICB0aGlzLnZpZXcuZGlzcG9zZSgpO1xuICAgICAgICB0aGlzLnZpZXcgPSB2b2lkIDA7XG4gICAgICAgIHRoaXMuY2FsbGJhY2tDb250ZXh0ID0gbnVsbDtcbiAgICB9XG4gICAgYWNjZXB0KHQpIHtcbiAgICAgICAgdmFyIGU7XG4gICAgICAgIGlmICh0cnVlID09PSAobnVsbCA9PT0gKGUgPSB0aGlzLnZpZXcpIHx8IHZvaWQgMCA9PT0gZSA/IHZvaWQgMCA6IGUuYWNjZXB0KHQpKSkgcmV0dXJuIHRydWU7XG4gICAgfVxufVxuXG5Qb3J0YWwuaW5qZWN0ID0gWyBBaSwgb3MsIEt0IF07XG5cbm90KFsgU3Qoe1xuICAgIHByaW1hcnk6IHRydWVcbn0pIF0sIFBvcnRhbC5wcm90b3R5cGUsIFwidGFyZ2V0XCIsIHZvaWQgMCk7XG5cbm90KFsgU3Qoe1xuICAgIGNhbGxiYWNrOiBcInRhcmdldENoYW5nZWRcIlxufSkgXSwgUG9ydGFsLnByb3RvdHlwZSwgXCJyZW5kZXJDb250ZXh0XCIsIHZvaWQgMCk7XG5cbm90KFsgU3QoKSBdLCBQb3J0YWwucHJvdG90eXBlLCBcInN0cmljdFwiLCB2b2lkIDApO1xuXG5vdChbIFN0KCkgXSwgUG9ydGFsLnByb3RvdHlwZSwgXCJkZWFjdGl2YXRpbmdcIiwgdm9pZCAwKTtcblxub3QoWyBTdCgpIF0sIFBvcnRhbC5wcm90b3R5cGUsIFwiYWN0aXZhdGluZ1wiLCB2b2lkIDApO1xuXG5vdChbIFN0KCkgXSwgUG9ydGFsLnByb3RvdHlwZSwgXCJkZWFjdGl2YXRlZFwiLCB2b2lkIDApO1xuXG5vdChbIFN0KCkgXSwgUG9ydGFsLnByb3RvdHlwZSwgXCJhY3RpdmF0ZWRcIiwgdm9pZCAwKTtcblxub3QoWyBTdCgpIF0sIFBvcnRhbC5wcm90b3R5cGUsIFwiY2FsbGJhY2tDb250ZXh0XCIsIHZvaWQgMCk7XG5cbk9lKFwicG9ydGFsXCIpKFBvcnRhbCk7XG5cbmNsYXNzIEZsYWdzVGVtcGxhdGVDb250cm9sbGVyIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlLCBpKSB7XG4gICAgICAgIHRoaXMuZnMgPSBpO1xuICAgICAgICB0aGlzLmlkID0gdyhcImF1JGNvbXBvbmVudFwiKTtcbiAgICAgICAgdGhpcy52aWV3ID0gdC5jcmVhdGUoKS5zZXRMb2NhdGlvbihlKTtcbiAgICB9XG4gICAgYXR0YWNoaW5nKHQsIGUsIGkpIHtcbiAgICAgICAgY29uc3QgeyRjb250cm9sbGVyOiBzfSA9IHRoaXM7XG4gICAgICAgIHJldHVybiB0aGlzLnZpZXcuYWN0aXZhdGUodCwgcywgaSB8IHRoaXMuZnMsIHMuc2NvcGUpO1xuICAgIH1cbiAgICBkZXRhY2hpbmcodCwgZSwgaSkge1xuICAgICAgICByZXR1cm4gdGhpcy52aWV3LmRlYWN0aXZhdGUodCwgdGhpcy4kY29udHJvbGxlciwgaSk7XG4gICAgfVxuICAgIGRpc3Bvc2UoKSB7XG4gICAgICAgIHRoaXMudmlldy5kaXNwb3NlKCk7XG4gICAgICAgIHRoaXMudmlldyA9IHZvaWQgMDtcbiAgICB9XG4gICAgYWNjZXB0KHQpIHtcbiAgICAgICAgdmFyIGU7XG4gICAgICAgIGlmICh0cnVlID09PSAobnVsbCA9PT0gKGUgPSB0aGlzLnZpZXcpIHx8IHZvaWQgMCA9PT0gZSA/IHZvaWQgMCA6IGUuYWNjZXB0KHQpKSkgcmV0dXJuIHRydWU7XG4gICAgfVxufVxuXG5jbGFzcyBGcmVxdWVudE11dGF0aW9ucyBleHRlbmRzIEZsYWdzVGVtcGxhdGVDb250cm9sbGVyIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlKSB7XG4gICAgICAgIHN1cGVyKHQsIGUsIDUxMik7XG4gICAgfVxufVxuXG5GcmVxdWVudE11dGF0aW9ucy5pbmplY3QgPSBbIEFpLCBvcyBdO1xuXG5jbGFzcyBPYnNlcnZlU2hhbGxvdyBleHRlbmRzIEZsYWdzVGVtcGxhdGVDb250cm9sbGVyIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlKSB7XG4gICAgICAgIHN1cGVyKHQsIGUsIDEyOCk7XG4gICAgfVxufVxuXG5PYnNlcnZlU2hhbGxvdy5pbmplY3QgPSBbIEFpLCBvcyBdO1xuXG5PZShcImZyZXF1ZW50LW11dGF0aW9uc1wiKShGcmVxdWVudE11dGF0aW9ucyk7XG5cbk9lKFwib2JzZXJ2ZS1zaGFsbG93XCIpKE9ic2VydmVTaGFsbG93KTtcblxuY2xhc3MgSWYge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUsIGkpIHtcbiAgICAgICAgdGhpcy5pZkZhY3RvcnkgPSB0O1xuICAgICAgICB0aGlzLmxvY2F0aW9uID0gZTtcbiAgICAgICAgdGhpcy53b3JrID0gaTtcbiAgICAgICAgdGhpcy5pZCA9IHcoXCJhdSRjb21wb25lbnRcIik7XG4gICAgICAgIHRoaXMuZWxzZUZhY3RvcnkgPSB2b2lkIDA7XG4gICAgICAgIHRoaXMuZWxzZVZpZXcgPSB2b2lkIDA7XG4gICAgICAgIHRoaXMuaWZWaWV3ID0gdm9pZCAwO1xuICAgICAgICB0aGlzLnZpZXcgPSB2b2lkIDA7XG4gICAgICAgIHRoaXMudmFsdWUgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5jYWNoZSA9IHRydWU7XG4gICAgICAgIHRoaXMucGVuZGluZyA9IHZvaWQgMDtcbiAgICAgICAgdGhpcy5oaSA9IGZhbHNlO1xuICAgICAgICB0aGlzLmFpID0gMDtcbiAgICB9XG4gICAgYXR0YWNoaW5nKHQsIGUsIGkpIHtcbiAgICAgICAgbGV0IHM7XG4gICAgICAgIGNvbnN0IG4gPSB0aGlzLiRjb250cm9sbGVyO1xuICAgICAgICBjb25zdCByID0gdGhpcy5haSsrO1xuICAgICAgICBjb25zdCBvID0gKCkgPT4gIXRoaXMuaGkgJiYgdGhpcy5haSA9PT0gciArIDE7XG4gICAgICAgIHJldHVybiBDKHRoaXMucGVuZGluZywgKCgpID0+IHtcbiAgICAgICAgICAgIHZhciBlO1xuICAgICAgICAgICAgaWYgKCFvKCkpIHJldHVybjtcbiAgICAgICAgICAgIHRoaXMucGVuZGluZyA9IHZvaWQgMDtcbiAgICAgICAgICAgIGlmICh0aGlzLnZhbHVlKSBzID0gdGhpcy52aWV3ID0gdGhpcy5pZlZpZXcgPSB0aGlzLmNhY2hlICYmIG51bGwgIT0gdGhpcy5pZlZpZXcgPyB0aGlzLmlmVmlldyA6IHRoaXMuaWZGYWN0b3J5LmNyZWF0ZSgpOyBlbHNlIHMgPSB0aGlzLnZpZXcgPSB0aGlzLmVsc2VWaWV3ID0gdGhpcy5jYWNoZSAmJiBudWxsICE9IHRoaXMuZWxzZVZpZXcgPyB0aGlzLmVsc2VWaWV3IDogbnVsbCA9PT0gKGUgPSB0aGlzLmVsc2VGYWN0b3J5KSB8fCB2b2lkIDAgPT09IGUgPyB2b2lkIDAgOiBlLmNyZWF0ZSgpO1xuICAgICAgICAgICAgaWYgKG51bGwgPT0gcykgcmV0dXJuO1xuICAgICAgICAgICAgcy5zZXRMb2NhdGlvbih0aGlzLmxvY2F0aW9uKTtcbiAgICAgICAgICAgIHRoaXMucGVuZGluZyA9IEMocy5hY3RpdmF0ZSh0LCBuLCBpLCBuLnNjb3BlKSwgKCgpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAobygpKSB0aGlzLnBlbmRpbmcgPSB2b2lkIDA7XG4gICAgICAgICAgICB9KSk7XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgZGV0YWNoaW5nKHQsIGUsIGkpIHtcbiAgICAgICAgdGhpcy5oaSA9IHRydWU7XG4gICAgICAgIHJldHVybiBDKHRoaXMucGVuZGluZywgKCgpID0+IHtcbiAgICAgICAgICAgIHZhciBlO1xuICAgICAgICAgICAgdGhpcy5oaSA9IGZhbHNlO1xuICAgICAgICAgICAgdGhpcy5wZW5kaW5nID0gdm9pZCAwO1xuICAgICAgICAgICAgdm9pZCAobnVsbCA9PT0gKGUgPSB0aGlzLnZpZXcpIHx8IHZvaWQgMCA9PT0gZSA/IHZvaWQgMCA6IGUuZGVhY3RpdmF0ZSh0LCB0aGlzLiRjb250cm9sbGVyLCBpKSk7XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgdmFsdWVDaGFuZ2VkKHQsIGUsIGkpIHtcbiAgICAgICAgaWYgKCF0aGlzLiRjb250cm9sbGVyLmlzQWN0aXZlKSByZXR1cm47XG4gICAgICAgIHQgPSAhIXQ7XG4gICAgICAgIGUgPSAhIWU7XG4gICAgICAgIGlmICh0ID09PSBlKSByZXR1cm47XG4gICAgICAgIHRoaXMud29yay5zdGFydCgpO1xuICAgICAgICBjb25zdCBzID0gdGhpcy52aWV3O1xuICAgICAgICBjb25zdCBuID0gdGhpcy4kY29udHJvbGxlcjtcbiAgICAgICAgY29uc3QgciA9IHRoaXMuYWkrKztcbiAgICAgICAgY29uc3QgbyA9ICgpID0+ICF0aGlzLmhpICYmIHRoaXMuYWkgPT09IHIgKyAxO1xuICAgICAgICBsZXQgbDtcbiAgICAgICAgcmV0dXJuIEMoQyh0aGlzLnBlbmRpbmcsICgoKSA9PiB0aGlzLnBlbmRpbmcgPSBDKG51bGwgPT09IHMgfHwgdm9pZCAwID09PSBzID8gdm9pZCAwIDogcy5kZWFjdGl2YXRlKHMsIG4sIGkpLCAoKCkgPT4ge1xuICAgICAgICAgICAgdmFyIGU7XG4gICAgICAgICAgICBpZiAoIW8oKSkgcmV0dXJuO1xuICAgICAgICAgICAgaWYgKHQpIGwgPSB0aGlzLnZpZXcgPSB0aGlzLmlmVmlldyA9IHRoaXMuY2FjaGUgJiYgbnVsbCAhPSB0aGlzLmlmVmlldyA/IHRoaXMuaWZWaWV3IDogdGhpcy5pZkZhY3RvcnkuY3JlYXRlKCk7IGVsc2UgbCA9IHRoaXMudmlldyA9IHRoaXMuZWxzZVZpZXcgPSB0aGlzLmNhY2hlICYmIG51bGwgIT0gdGhpcy5lbHNlVmlldyA/IHRoaXMuZWxzZVZpZXcgOiBudWxsID09PSAoZSA9IHRoaXMuZWxzZUZhY3RvcnkpIHx8IHZvaWQgMCA9PT0gZSA/IHZvaWQgMCA6IGUuY3JlYXRlKCk7XG4gICAgICAgICAgICBpZiAobnVsbCA9PSBsKSByZXR1cm47XG4gICAgICAgICAgICBsLnNldExvY2F0aW9uKHRoaXMubG9jYXRpb24pO1xuICAgICAgICAgICAgcmV0dXJuIEMobC5hY3RpdmF0ZShsLCBuLCBpLCBuLnNjb3BlKSwgKCgpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAobygpKSB0aGlzLnBlbmRpbmcgPSB2b2lkIDA7XG4gICAgICAgICAgICB9KSk7XG4gICAgICAgIH0pKSkpLCAoKCkgPT4gdGhpcy53b3JrLmZpbmlzaCgpKSk7XG4gICAgfVxuICAgIGRpc3Bvc2UoKSB7XG4gICAgICAgIHZhciB0LCBlO1xuICAgICAgICBudWxsID09PSAodCA9IHRoaXMuaWZWaWV3KSB8fCB2b2lkIDAgPT09IHQgPyB2b2lkIDAgOiB0LmRpc3Bvc2UoKTtcbiAgICAgICAgbnVsbCA9PT0gKGUgPSB0aGlzLmVsc2VWaWV3KSB8fCB2b2lkIDAgPT09IGUgPyB2b2lkIDAgOiBlLmRpc3Bvc2UoKTtcbiAgICAgICAgdGhpcy5pZlZpZXcgPSB0aGlzLmVsc2VWaWV3ID0gdGhpcy52aWV3ID0gdm9pZCAwO1xuICAgIH1cbiAgICBhY2NlcHQodCkge1xuICAgICAgICB2YXIgZTtcbiAgICAgICAgaWYgKHRydWUgPT09IChudWxsID09PSAoZSA9IHRoaXMudmlldykgfHwgdm9pZCAwID09PSBlID8gdm9pZCAwIDogZS5hY2NlcHQodCkpKSByZXR1cm4gdHJ1ZTtcbiAgICB9XG59XG5cbklmLmluamVjdCA9IFsgQWksIG9zLCBlcyBdO1xuXG5vdChbIFN0IF0sIElmLnByb3RvdHlwZSwgXCJ2YWx1ZVwiLCB2b2lkIDApO1xuXG5vdChbIFN0KHtcbiAgICBzZXQ6IHQgPT4gXCJcIiA9PT0gdCB8fCAhIXQgJiYgXCJmYWxzZVwiICE9PSB0XG59KSBdLCBJZi5wcm90b3R5cGUsIFwiY2FjaGVcIiwgdm9pZCAwKTtcblxuT2UoXCJpZlwiKShJZik7XG5cbmNsYXNzIEVsc2Uge1xuICAgIGNvbnN0cnVjdG9yKHQpIHtcbiAgICAgICAgdGhpcy5mYWN0b3J5ID0gdDtcbiAgICAgICAgdGhpcy5pZCA9IHcoXCJhdSRjb21wb25lbnRcIik7XG4gICAgfVxuICAgIGxpbmsodCwgZSwgaSwgcykge1xuICAgICAgICBjb25zdCBuID0gdC5jaGlsZHJlbjtcbiAgICAgICAgY29uc3QgciA9IG5bbi5sZW5ndGggLSAxXTtcbiAgICAgICAgaWYgKHIgaW5zdGFuY2VvZiBJZikgci5lbHNlRmFjdG9yeSA9IHRoaXMuZmFjdG9yeTsgZWxzZSBpZiAoci52aWV3TW9kZWwgaW5zdGFuY2VvZiBJZikgci52aWV3TW9kZWwuZWxzZUZhY3RvcnkgPSB0aGlzLmZhY3Rvcnk7IGVsc2UgdGhyb3cgbmV3IEVycm9yKFwiQVVSMDgxMFwiKTtcbiAgICB9XG59XG5cbkVsc2UuaW5qZWN0ID0gWyBBaSBdO1xuXG5PZSh7XG4gICAgbmFtZTogXCJlbHNlXCJcbn0pKEVsc2UpO1xuXG5mdW5jdGlvbiB4cih0KSB7XG4gICAgdC5kaXNwb3NlKCk7XG59XG5cbmNvbnN0IHlyID0gWyAzODk2MiwgMzY5MTMgXTtcblxuY2xhc3MgUmVwZWF0IHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlLCBpKSB7XG4gICAgICAgIHRoaXMubCA9IHQ7XG4gICAgICAgIHRoaXMudWkgPSBlO1xuICAgICAgICB0aGlzLmYgPSBpO1xuICAgICAgICB0aGlzLmlkID0gdyhcImF1JGNvbXBvbmVudFwiKTtcbiAgICAgICAgdGhpcy52aWV3cyA9IFtdO1xuICAgICAgICB0aGlzLmtleSA9IHZvaWQgMDtcbiAgICAgICAgdGhpcy5maSA9IHZvaWQgMDtcbiAgICAgICAgdGhpcy5kaSA9IGZhbHNlO1xuICAgICAgICB0aGlzLm1pID0gZmFsc2U7XG4gICAgICAgIHRoaXMudmkgPSBudWxsO1xuICAgICAgICB0aGlzLnBpID0gdm9pZCAwO1xuICAgICAgICB0aGlzLmdpID0gZmFsc2U7XG4gICAgfVxuICAgIGJpbmRpbmcodCwgZSwgaSkge1xuICAgICAgICBjb25zdCBzID0gdGhpcy51aS5iaW5kaW5ncztcbiAgICAgICAgY29uc3QgbiA9IHMubGVuZ3RoO1xuICAgICAgICBsZXQgcjtcbiAgICAgICAgbGV0IG87XG4gICAgICAgIGxldCBsID0gMDtcbiAgICAgICAgZm9yICg7biA+IGw7ICsrbCkge1xuICAgICAgICAgICAgciA9IHNbbF07XG4gICAgICAgICAgICBpZiAoci50YXJnZXQgPT09IHRoaXMgJiYgXCJpdGVtc1wiID09PSByLnRhcmdldFByb3BlcnR5KSB7XG4gICAgICAgICAgICAgICAgbyA9IHRoaXMuZm9yT2YgPSByLnNvdXJjZUV4cHJlc3Npb247XG4gICAgICAgICAgICAgICAgdGhpcy53aSA9IHI7XG4gICAgICAgICAgICAgICAgbGV0IHQgPSBvLml0ZXJhYmxlO1xuICAgICAgICAgICAgICAgIHdoaWxlIChudWxsICE9IHQgJiYgeXIuaW5jbHVkZXModC4ka2luZCkpIHtcbiAgICAgICAgICAgICAgICAgICAgdCA9IHQuZXhwcmVzc2lvbjtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5kaSA9IHRydWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMudmkgPSB0O1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHRoaXMuYmkoaSk7XG4gICAgICAgIGNvbnN0IGggPSBvLmRlY2xhcmF0aW9uO1xuICAgICAgICBpZiAoISh0aGlzLmdpID0gOTAxMzcgPT09IGguJGtpbmQgfHwgMTA2NTIxID09PSBoLiRraW5kKSkgdGhpcy5sb2NhbCA9IGguZXZhbHVhdGUoaSwgdGhpcy4kY29udHJvbGxlci5zY29wZSwgci5sb2NhdG9yLCBudWxsKTtcbiAgICB9XG4gICAgYXR0YWNoaW5nKHQsIGUsIGkpIHtcbiAgICAgICAgdGhpcy54aShpKTtcbiAgICAgICAgcmV0dXJuIHRoaXMueWkodCwgaSk7XG4gICAgfVxuICAgIGRldGFjaGluZyh0LCBlLCBpKSB7XG4gICAgICAgIHRoaXMuYmkoaSk7XG4gICAgICAgIHJldHVybiB0aGlzLmtpKHQsIGkpO1xuICAgIH1cbiAgICBpdGVtc0NoYW5nZWQodCkge1xuICAgICAgICBjb25zdCB7JGNvbnRyb2xsZXI6IGV9ID0gdGhpcztcbiAgICAgICAgaWYgKCFlLmlzQWN0aXZlKSByZXR1cm47XG4gICAgICAgIHQgfD0gZS5mbGFncztcbiAgICAgICAgdGhpcy5iaSh0KTtcbiAgICAgICAgdGhpcy54aSh0KTtcbiAgICAgICAgY29uc3QgaSA9IEModGhpcy5raShudWxsLCB0KSwgKCgpID0+IHRoaXMueWkobnVsbCwgdCkpKTtcbiAgICAgICAgaWYgKGkgaW5zdGFuY2VvZiBQcm9taXNlKSBpLmNhdGNoKCh0ID0+IHtcbiAgICAgICAgICAgIHRocm93IHQ7XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgaGFuZGxlQ29sbGVjdGlvbkNoYW5nZSh0LCBlKSB7XG4gICAgICAgIGNvbnN0IHskY29udHJvbGxlcjogaX0gPSB0aGlzO1xuICAgICAgICBpZiAoIWkuaXNBY3RpdmUpIHJldHVybjtcbiAgICAgICAgaWYgKHRoaXMuZGkpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLm1pKSByZXR1cm47XG4gICAgICAgICAgICB0aGlzLm1pID0gdHJ1ZTtcbiAgICAgICAgICAgIHRoaXMuaXRlbXMgPSB0aGlzLmZvck9mLml0ZXJhYmxlLmV2YWx1YXRlKGUsIGkuc2NvcGUsIHRoaXMud2kubG9jYXRvciwgbnVsbCk7XG4gICAgICAgICAgICB0aGlzLm1pID0gZmFsc2U7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgZSB8PSBpLmZsYWdzO1xuICAgICAgICB0aGlzLnhpKGUpO1xuICAgICAgICBpZiAodm9pZCAwID09PSB0KSB7XG4gICAgICAgICAgICBjb25zdCB0ID0gQyh0aGlzLmtpKG51bGwsIGUpLCAoKCkgPT4gdGhpcy55aShudWxsLCBlKSkpO1xuICAgICAgICAgICAgaWYgKHQgaW5zdGFuY2VvZiBQcm9taXNlKSB0LmNhdGNoKCh0ID0+IHtcbiAgICAgICAgICAgICAgICB0aHJvdyB0O1xuICAgICAgICAgICAgfSkpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY29uc3QgaSA9IHRoaXMudmlld3MubGVuZ3RoO1xuICAgICAgICAgICAgZXQodCk7XG4gICAgICAgICAgICBpZiAodC5kZWxldGVkSXRlbXMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgIHQuZGVsZXRlZEl0ZW1zLnNvcnQoSSk7XG4gICAgICAgICAgICAgICAgY29uc3QgcyA9IEModGhpcy5DaSh0LCBlKSwgKCgpID0+IHRoaXMuQWkoaSwgdCwgZSkpKTtcbiAgICAgICAgICAgICAgICBpZiAocyBpbnN0YW5jZW9mIFByb21pc2UpIHMuY2F0Y2goKHQgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyB0O1xuICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgIH0gZWxzZSB0aGlzLkFpKGksIHQsIGUpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGJpKHQpIHtcbiAgICAgICAgdmFyIGU7XG4gICAgICAgIGNvbnN0IGkgPSB0aGlzLiRjb250cm9sbGVyLnNjb3BlO1xuICAgICAgICBsZXQgcyA9IHRoaXMuU2k7XG4gICAgICAgIGxldCBuID0gdGhpcy5kaTtcbiAgICAgICAgaWYgKG4pIHtcbiAgICAgICAgICAgIHMgPSB0aGlzLlNpID0gbnVsbCAhPT0gKGUgPSB0aGlzLnZpLmV2YWx1YXRlKHQsIGksIHRoaXMud2kubG9jYXRvciwgbnVsbCkpICYmIHZvaWQgMCAhPT0gZSA/IGUgOiBudWxsO1xuICAgICAgICAgICAgbiA9IHRoaXMuZGkgPSAhT2JqZWN0LmlzKHRoaXMuaXRlbXMsIHMpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHIgPSB0aGlzLmZpO1xuICAgICAgICBpZiAoNCAmIHQpIHtcbiAgICAgICAgICAgIGlmICh2b2lkIDAgIT09IHIpIHIudW5zdWJzY3JpYmUodGhpcyk7XG4gICAgICAgIH0gZWxzZSBpZiAodGhpcy4kY29udHJvbGxlci5pc0FjdGl2ZSkge1xuICAgICAgICAgICAgY29uc3QgdCA9IHRoaXMuZmkgPSBpdChuID8gcyA6IHRoaXMuaXRlbXMpO1xuICAgICAgICAgICAgaWYgKHIgIT09IHQgJiYgcikgci51bnN1YnNjcmliZSh0aGlzKTtcbiAgICAgICAgICAgIGlmICh0KSB0LnN1YnNjcmliZSh0aGlzKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICB4aSh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSB0aGlzLml0ZW1zO1xuICAgICAgICBpZiAoZSBpbnN0YW5jZW9mIEFycmF5KSB7XG4gICAgICAgICAgICB0aGlzLnBpID0gZTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBpID0gdGhpcy5mb3JPZjtcbiAgICAgICAgaWYgKHZvaWQgMCA9PT0gaSkgcmV0dXJuO1xuICAgICAgICBjb25zdCBzID0gW107XG4gICAgICAgIHRoaXMuZm9yT2YuaXRlcmF0ZSh0LCBlLCAoKHQsIGUsIGkpID0+IHtcbiAgICAgICAgICAgIHNbZV0gPSBpO1xuICAgICAgICB9KSk7XG4gICAgICAgIHRoaXMucGkgPSBzO1xuICAgIH1cbiAgICB5aSh0LCBlKSB7XG4gICAgICAgIGxldCBpO1xuICAgICAgICBsZXQgcztcbiAgICAgICAgbGV0IG47XG4gICAgICAgIGxldCByO1xuICAgICAgICBjb25zdCB7JGNvbnRyb2xsZXI6IG8sIGY6IGwsIGxvY2FsOiBoLCBsOiBhLCBpdGVtczogY30gPSB0aGlzO1xuICAgICAgICBjb25zdCB1ID0gby5zY29wZTtcbiAgICAgICAgY29uc3QgZiA9IHRoaXMuZm9yT2Y7XG4gICAgICAgIGNvbnN0IGQgPSBmLmNvdW50KGUsIGMpO1xuICAgICAgICBjb25zdCBtID0gdGhpcy52aWV3cyA9IEFycmF5KGQpO1xuICAgICAgICBmLml0ZXJhdGUoZSwgYywgKChjLCB2LCBwKSA9PiB7XG4gICAgICAgICAgICBuID0gbVt2XSA9IGwuY3JlYXRlKCkuc2V0TG9jYXRpb24oYSk7XG4gICAgICAgICAgICBuLm5vZGVzLnVubGluaygpO1xuICAgICAgICAgICAgaWYgKHRoaXMuZ2kpIGYuZGVjbGFyYXRpb24uYXNzaWduKGUsIHIgPSBVLmZyb21QYXJlbnQodSwgc3QuY3JlYXRlKCkpLCB0aGlzLndpLmxvY2F0b3IsIHApOyBlbHNlIHIgPSBVLmZyb21QYXJlbnQodSwgc3QuY3JlYXRlKGgsIHApKTtcbiAgICAgICAgICAgIFJyKHIub3ZlcnJpZGVDb250ZXh0LCB2LCBkKTtcbiAgICAgICAgICAgIHMgPSBuLmFjdGl2YXRlKG51bGwgIT09IHQgJiYgdm9pZCAwICE9PSB0ID8gdCA6IG4sIG8sIGUsIHIpO1xuICAgICAgICAgICAgaWYgKHMgaW5zdGFuY2VvZiBQcm9taXNlKSAobnVsbCAhPT0gaSAmJiB2b2lkIDAgIT09IGkgPyBpIDogaSA9IFtdKS5wdXNoKHMpO1xuICAgICAgICB9KSk7XG4gICAgICAgIGlmICh2b2lkIDAgIT09IGkpIHJldHVybiAxID09PSBpLmxlbmd0aCA/IGlbMF0gOiBQcm9taXNlLmFsbChpKTtcbiAgICB9XG4gICAga2kodCwgZSkge1xuICAgICAgICBsZXQgaTtcbiAgICAgICAgbGV0IHM7XG4gICAgICAgIGxldCBuO1xuICAgICAgICBsZXQgciA9IDA7XG4gICAgICAgIGNvbnN0IHt2aWV3czogbywgJGNvbnRyb2xsZXI6IGx9ID0gdGhpcztcbiAgICAgICAgY29uc3QgaCA9IG8ubGVuZ3RoO1xuICAgICAgICBmb3IgKDtoID4gcjsgKytyKSB7XG4gICAgICAgICAgICBuID0gb1tyXTtcbiAgICAgICAgICAgIG4ucmVsZWFzZSgpO1xuICAgICAgICAgICAgcyA9IG4uZGVhY3RpdmF0ZShudWxsICE9PSB0ICYmIHZvaWQgMCAhPT0gdCA/IHQgOiBuLCBsLCBlKTtcbiAgICAgICAgICAgIGlmIChzIGluc3RhbmNlb2YgUHJvbWlzZSkgKG51bGwgIT09IGkgJiYgdm9pZCAwICE9PSBpID8gaSA6IGkgPSBbXSkucHVzaChzKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodm9pZCAwICE9PSBpKSByZXR1cm4gMSA9PT0gaS5sZW5ndGggPyBpWzBdIDogUHJvbWlzZS5hbGwoaSk7XG4gICAgfVxuICAgIENpKHQsIGUpIHtcbiAgICAgICAgbGV0IGk7XG4gICAgICAgIGxldCBzO1xuICAgICAgICBsZXQgbjtcbiAgICAgICAgY29uc3QgeyRjb250cm9sbGVyOiByLCB2aWV3czogb30gPSB0aGlzO1xuICAgICAgICBjb25zdCBsID0gdC5kZWxldGVkSXRlbXM7XG4gICAgICAgIGNvbnN0IGggPSBsLmxlbmd0aDtcbiAgICAgICAgbGV0IGEgPSAwO1xuICAgICAgICBmb3IgKDtoID4gYTsgKythKSB7XG4gICAgICAgICAgICBuID0gb1tsW2FdXTtcbiAgICAgICAgICAgIG4ucmVsZWFzZSgpO1xuICAgICAgICAgICAgcyA9IG4uZGVhY3RpdmF0ZShuLCByLCBlKTtcbiAgICAgICAgICAgIGlmIChzIGluc3RhbmNlb2YgUHJvbWlzZSkgKG51bGwgIT09IGkgJiYgdm9pZCAwICE9PSBpID8gaSA6IGkgPSBbXSkucHVzaChzKTtcbiAgICAgICAgfVxuICAgICAgICBhID0gMDtcbiAgICAgICAgbGV0IGMgPSAwO1xuICAgICAgICBmb3IgKDtoID4gYTsgKythKSB7XG4gICAgICAgICAgICBjID0gbFthXSAtIGE7XG4gICAgICAgICAgICBvLnNwbGljZShjLCAxKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodm9pZCAwICE9PSBpKSByZXR1cm4gMSA9PT0gaS5sZW5ndGggPyBpWzBdIDogUHJvbWlzZS5hbGwoaSk7XG4gICAgfVxuICAgIEFpKHQsIGUsIGkpIHtcbiAgICAgICAgdmFyIHM7XG4gICAgICAgIGxldCBuO1xuICAgICAgICBsZXQgcjtcbiAgICAgICAgbGV0IG87XG4gICAgICAgIGxldCBsO1xuICAgICAgICBsZXQgaCA9IDA7XG4gICAgICAgIGNvbnN0IHskY29udHJvbGxlcjogYSwgZjogYywgbG9jYWw6IHUsIHBpOiBmLCBsOiBkLCB2aWV3czogbX0gPSB0aGlzO1xuICAgICAgICBjb25zdCB2ID0gZS5sZW5ndGg7XG4gICAgICAgIGZvciAoO3YgPiBoOyArK2gpIGlmICgtMiA9PT0gZVtoXSkge1xuICAgICAgICAgICAgbyA9IGMuY3JlYXRlKCk7XG4gICAgICAgICAgICBtLnNwbGljZShoLCAwLCBvKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobS5sZW5ndGggIT09IHYpIHRocm93IG5ldyBFcnJvcihgQVVSMDgxNDoke20ubGVuZ3RofSE9JHt2fWApO1xuICAgICAgICBjb25zdCBwID0gYS5zY29wZTtcbiAgICAgICAgY29uc3QgZyA9IGUubGVuZ3RoO1xuICAgICAgICBudChtLCBlKTtcbiAgICAgICAgY29uc3QgdyA9IFNyKGUpO1xuICAgICAgICBjb25zdCBiID0gdy5sZW5ndGg7XG4gICAgICAgIGxldCB4O1xuICAgICAgICBsZXQgeSA9IGIgLSAxO1xuICAgICAgICBoID0gZyAtIDE7XG4gICAgICAgIGZvciAoO2ggPj0gMDsgLS1oKSB7XG4gICAgICAgICAgICBvID0gbVtoXTtcbiAgICAgICAgICAgIHggPSBtW2ggKyAxXTtcbiAgICAgICAgICAgIG8ubm9kZXMubGluayhudWxsICE9PSAocyA9IG51bGwgPT09IHggfHwgdm9pZCAwID09PSB4ID8gdm9pZCAwIDogeC5ub2RlcykgJiYgdm9pZCAwICE9PSBzID8gcyA6IGQpO1xuICAgICAgICAgICAgaWYgKC0yID09PSBlW2hdKSB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuZ2kpIHRoaXMuZm9yT2YuZGVjbGFyYXRpb24uYXNzaWduKGksIGwgPSBVLmZyb21QYXJlbnQocCwgc3QuY3JlYXRlKCkpLCB0aGlzLndpLmxvY2F0b3IsIGZbaF0pOyBlbHNlIGwgPSBVLmZyb21QYXJlbnQocCwgc3QuY3JlYXRlKHUsIGZbaF0pKTtcbiAgICAgICAgICAgICAgICBScihsLm92ZXJyaWRlQ29udGV4dCwgaCwgZyk7XG4gICAgICAgICAgICAgICAgby5zZXRMb2NhdGlvbihkKTtcbiAgICAgICAgICAgICAgICByID0gby5hY3RpdmF0ZShvLCBhLCBpLCBsKTtcbiAgICAgICAgICAgICAgICBpZiAociBpbnN0YW5jZW9mIFByb21pc2UpIChudWxsICE9PSBuICYmIHZvaWQgMCAhPT0gbiA/IG4gOiBuID0gW10pLnB1c2gocik7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHkgPCAwIHx8IDEgPT09IGIgfHwgaCAhPT0gd1t5XSkge1xuICAgICAgICAgICAgICAgIFJyKG8uc2NvcGUub3ZlcnJpZGVDb250ZXh0LCBoLCBnKTtcbiAgICAgICAgICAgICAgICBvLm5vZGVzLmluc2VydEJlZm9yZShvLmxvY2F0aW9uKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgaWYgKHQgIT09IGcpIFJyKG8uc2NvcGUub3ZlcnJpZGVDb250ZXh0LCBoLCBnKTtcbiAgICAgICAgICAgICAgICAtLXk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHZvaWQgMCAhPT0gbikgcmV0dXJuIDEgPT09IG4ubGVuZ3RoID8gblswXSA6IFByb21pc2UuYWxsKG4pO1xuICAgIH1cbiAgICBkaXNwb3NlKCkge1xuICAgICAgICB0aGlzLnZpZXdzLmZvckVhY2goeHIpO1xuICAgICAgICB0aGlzLnZpZXdzID0gdm9pZCAwO1xuICAgIH1cbiAgICBhY2NlcHQodCkge1xuICAgICAgICBjb25zdCB7dmlld3M6IGV9ID0gdGhpcztcbiAgICAgICAgaWYgKHZvaWQgMCAhPT0gZSkgZm9yIChsZXQgaSA9IDAsIHMgPSBlLmxlbmd0aDsgaSA8IHM7ICsraSkgaWYgKHRydWUgPT09IGVbaV0uYWNjZXB0KHQpKSByZXR1cm4gdHJ1ZTtcbiAgICB9XG59XG5cblJlcGVhdC5pbmplY3QgPSBbIG9zLCBYaSwgQWkgXTtcblxub3QoWyBTdCBdLCBSZXBlYXQucHJvdG90eXBlLCBcIml0ZW1zXCIsIHZvaWQgMCk7XG5cbk9lKFwicmVwZWF0XCIpKFJlcGVhdCk7XG5cbmxldCBrciA9IDE2O1xuXG5sZXQgQ3IgPSBuZXcgSW50MzJBcnJheShrcik7XG5cbmxldCBBciA9IG5ldyBJbnQzMkFycmF5KGtyKTtcblxuZnVuY3Rpb24gU3IodCkge1xuICAgIGNvbnN0IGUgPSB0Lmxlbmd0aDtcbiAgICBpZiAoZSA+IGtyKSB7XG4gICAgICAgIGtyID0gZTtcbiAgICAgICAgQ3IgPSBuZXcgSW50MzJBcnJheShlKTtcbiAgICAgICAgQXIgPSBuZXcgSW50MzJBcnJheShlKTtcbiAgICB9XG4gICAgbGV0IGkgPSAwO1xuICAgIGxldCBzID0gMDtcbiAgICBsZXQgbiA9IDA7XG4gICAgbGV0IHIgPSAwO1xuICAgIGxldCBvID0gMDtcbiAgICBsZXQgbCA9IDA7XG4gICAgbGV0IGggPSAwO1xuICAgIGxldCBhID0gMDtcbiAgICBmb3IgKDtyIDwgZTsgcisrKSB7XG4gICAgICAgIHMgPSB0W3JdO1xuICAgICAgICBpZiAoLTIgIT09IHMpIHtcbiAgICAgICAgICAgIG8gPSBDcltpXTtcbiAgICAgICAgICAgIG4gPSB0W29dO1xuICAgICAgICAgICAgaWYgKC0yICE9PSBuICYmIG4gPCBzKSB7XG4gICAgICAgICAgICAgICAgQXJbcl0gPSBvO1xuICAgICAgICAgICAgICAgIENyWysraV0gPSByO1xuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbCA9IDA7XG4gICAgICAgICAgICBoID0gaTtcbiAgICAgICAgICAgIHdoaWxlIChsIDwgaCkge1xuICAgICAgICAgICAgICAgIGEgPSBsICsgaCA+PiAxO1xuICAgICAgICAgICAgICAgIG4gPSB0W0NyW2FdXTtcbiAgICAgICAgICAgICAgICBpZiAoLTIgIT09IG4gJiYgbiA8IHMpIGwgPSBhICsgMTsgZWxzZSBoID0gYTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIG4gPSB0W0NyW2xdXTtcbiAgICAgICAgICAgIGlmIChzIDwgbiB8fCAtMiA9PT0gbikge1xuICAgICAgICAgICAgICAgIGlmIChsID4gMCkgQXJbcl0gPSBDcltsIC0gMV07XG4gICAgICAgICAgICAgICAgQ3JbbF0gPSByO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIHIgPSArK2k7XG4gICAgY29uc3QgYyA9IG5ldyBJbnQzMkFycmF5KHIpO1xuICAgIHMgPSBDcltpIC0gMV07XG4gICAgd2hpbGUgKGktLSA+IDApIHtcbiAgICAgICAgY1tpXSA9IHM7XG4gICAgICAgIHMgPSBBcltzXTtcbiAgICB9XG4gICAgd2hpbGUgKHItLSA+IDApIENyW3JdID0gMDtcbiAgICByZXR1cm4gYztcbn1cblxuZnVuY3Rpb24gUnIodCwgZSwgaSkge1xuICAgIGNvbnN0IHMgPSAwID09PSBlO1xuICAgIGNvbnN0IG4gPSBlID09PSBpIC0gMTtcbiAgICBjb25zdCByID0gZSAlIDIgPT09IDA7XG4gICAgdC4kaW5kZXggPSBlO1xuICAgIHQuJGZpcnN0ID0gcztcbiAgICB0LiRsYXN0ID0gbjtcbiAgICB0LiRtaWRkbGUgPSAhcyAmJiAhbjtcbiAgICB0LiRldmVuID0gcjtcbiAgICB0LiRvZGQgPSAhcjtcbiAgICB0LiRsZW5ndGggPSBpO1xufVxuXG5jbGFzcyBXaXRoIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlKSB7XG4gICAgICAgIHRoaXMuaWQgPSB3KFwiYXUkY29tcG9uZW50XCIpO1xuICAgICAgICB0aGlzLmlkID0gdyhcImF1JGNvbXBvbmVudFwiKTtcbiAgICAgICAgdGhpcy52aWV3ID0gdC5jcmVhdGUoKS5zZXRMb2NhdGlvbihlKTtcbiAgICB9XG4gICAgdmFsdWVDaGFuZ2VkKHQsIGUsIGkpIHtcbiAgICAgICAgY29uc3QgcyA9IHRoaXMuJGNvbnRyb2xsZXI7XG4gICAgICAgIGNvbnN0IG4gPSB0aGlzLnZpZXcuYmluZGluZ3M7XG4gICAgICAgIGxldCByO1xuICAgICAgICBsZXQgbyA9IDAsIGwgPSAwO1xuICAgICAgICBpZiAocy5pc0FjdGl2ZSAmJiBudWxsICE9IG4pIHtcbiAgICAgICAgICAgIHIgPSBVLmZyb21QYXJlbnQocy5zY29wZSwgdm9pZCAwID09PSB0ID8ge30gOiB0KTtcbiAgICAgICAgICAgIGZvciAobCA9IG4ubGVuZ3RoOyBsID4gbzsgKytvKSBuW29dLiRiaW5kKDIsIHIpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGF0dGFjaGluZyh0LCBlLCBpKSB7XG4gICAgICAgIGNvbnN0IHskY29udHJvbGxlcjogcywgdmFsdWU6IG59ID0gdGhpcztcbiAgICAgICAgY29uc3QgciA9IFUuZnJvbVBhcmVudChzLnNjb3BlLCB2b2lkIDAgPT09IG4gPyB7fSA6IG4pO1xuICAgICAgICByZXR1cm4gdGhpcy52aWV3LmFjdGl2YXRlKHQsIHMsIGksIHIpO1xuICAgIH1cbiAgICBkZXRhY2hpbmcodCwgZSwgaSkge1xuICAgICAgICByZXR1cm4gdGhpcy52aWV3LmRlYWN0aXZhdGUodCwgdGhpcy4kY29udHJvbGxlciwgaSk7XG4gICAgfVxuICAgIGRpc3Bvc2UoKSB7XG4gICAgICAgIHRoaXMudmlldy5kaXNwb3NlKCk7XG4gICAgICAgIHRoaXMudmlldyA9IHZvaWQgMDtcbiAgICB9XG4gICAgYWNjZXB0KHQpIHtcbiAgICAgICAgdmFyIGU7XG4gICAgICAgIGlmICh0cnVlID09PSAobnVsbCA9PT0gKGUgPSB0aGlzLnZpZXcpIHx8IHZvaWQgMCA9PT0gZSA/IHZvaWQgMCA6IGUuYWNjZXB0KHQpKSkgcmV0dXJuIHRydWU7XG4gICAgfVxufVxuXG5XaXRoLmluamVjdCA9IFsgQWksIG9zIF07XG5cbm90KFsgU3QgXSwgV2l0aC5wcm90b3R5cGUsIFwidmFsdWVcIiwgdm9pZCAwKTtcblxuT2UoXCJ3aXRoXCIpKFdpdGgpO1xuXG5sZXQgRXIgPSBjbGFzcyBTd2l0Y2gge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUpIHtcbiAgICAgICAgdGhpcy5mID0gdDtcbiAgICAgICAgdGhpcy5sID0gZTtcbiAgICAgICAgdGhpcy5pZCA9IHcoXCJhdSRjb21wb25lbnRcIik7XG4gICAgICAgIHRoaXMuY2FzZXMgPSBbXTtcbiAgICAgICAgdGhpcy5hY3RpdmVDYXNlcyA9IFtdO1xuICAgICAgICB0aGlzLnByb21pc2UgPSB2b2lkIDA7XG4gICAgfVxuICAgIGxpbmsodCwgZSwgaSwgcykge1xuICAgICAgICB0aGlzLnZpZXcgPSB0aGlzLmYuY3JlYXRlKHRoaXMuJGNvbnRyb2xsZXIpLnNldExvY2F0aW9uKHRoaXMubCk7XG4gICAgfVxuICAgIGF0dGFjaGluZyh0LCBlLCBpKSB7XG4gICAgICAgIGNvbnN0IHMgPSB0aGlzLnZpZXc7XG4gICAgICAgIGNvbnN0IG4gPSB0aGlzLiRjb250cm9sbGVyO1xuICAgICAgICB0aGlzLnF1ZXVlKCgoKSA9PiBzLmFjdGl2YXRlKHQsIG4sIGksIG4uc2NvcGUpKSk7XG4gICAgICAgIHRoaXMucXVldWUoKCgpID0+IHRoaXMuc3dhcCh0LCBpLCB0aGlzLnZhbHVlKSkpO1xuICAgICAgICByZXR1cm4gdGhpcy5wcm9taXNlO1xuICAgIH1cbiAgICBkZXRhY2hpbmcodCwgZSwgaSkge1xuICAgICAgICB0aGlzLnF1ZXVlKCgoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBlID0gdGhpcy52aWV3O1xuICAgICAgICAgICAgcmV0dXJuIGUuZGVhY3RpdmF0ZSh0LCB0aGlzLiRjb250cm9sbGVyLCBpKTtcbiAgICAgICAgfSkpO1xuICAgICAgICByZXR1cm4gdGhpcy5wcm9taXNlO1xuICAgIH1cbiAgICBkaXNwb3NlKCkge1xuICAgICAgICB2YXIgdDtcbiAgICAgICAgbnVsbCA9PT0gKHQgPSB0aGlzLnZpZXcpIHx8IHZvaWQgMCA9PT0gdCA/IHZvaWQgMCA6IHQuZGlzcG9zZSgpO1xuICAgICAgICB0aGlzLnZpZXcgPSB2b2lkIDA7XG4gICAgfVxuICAgIHZhbHVlQ2hhbmdlZCh0LCBlLCBpKSB7XG4gICAgICAgIGlmICghdGhpcy4kY29udHJvbGxlci5pc0FjdGl2ZSkgcmV0dXJuO1xuICAgICAgICB0aGlzLnF1ZXVlKCgoKSA9PiB0aGlzLnN3YXAobnVsbCwgaSwgdGhpcy52YWx1ZSkpKTtcbiAgICB9XG4gICAgY2FzZUNoYW5nZWQodCwgZSkge1xuICAgICAgICB0aGlzLnF1ZXVlKCgoKSA9PiB0aGlzLlJpKHQsIGUpKSk7XG4gICAgfVxuICAgIFJpKHQsIGUpIHtcbiAgICAgICAgY29uc3QgaSA9IHQuaXNNYXRjaCh0aGlzLnZhbHVlLCBlKTtcbiAgICAgICAgY29uc3QgcyA9IHRoaXMuYWN0aXZlQ2FzZXM7XG4gICAgICAgIGNvbnN0IG4gPSBzLmxlbmd0aDtcbiAgICAgICAgaWYgKCFpKSB7XG4gICAgICAgICAgICBpZiAobiA+IDAgJiYgc1swXS5pZCA9PT0gdC5pZCkgcmV0dXJuIHRoaXMuRWkobnVsbCwgZSk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG4gPiAwICYmIHNbMF0uaWQgPCB0LmlkKSByZXR1cm47XG4gICAgICAgIGNvbnN0IHIgPSBbXTtcbiAgICAgICAgbGV0IG8gPSB0LmZhbGxUaHJvdWdoO1xuICAgICAgICBpZiAoIW8pIHIucHVzaCh0KTsgZWxzZSB7XG4gICAgICAgICAgICBjb25zdCBlID0gdGhpcy5jYXNlcztcbiAgICAgICAgICAgIGNvbnN0IGkgPSBlLmluZGV4T2YodCk7XG4gICAgICAgICAgICBmb3IgKGxldCB0ID0gaSwgcyA9IGUubGVuZ3RoOyB0IDwgcyAmJiBvOyB0KyspIHtcbiAgICAgICAgICAgICAgICBjb25zdCBpID0gZVt0XTtcbiAgICAgICAgICAgICAgICByLnB1c2goaSk7XG4gICAgICAgICAgICAgICAgbyA9IGkuZmFsbFRocm91Z2g7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIEModGhpcy5FaShudWxsLCBlLCByKSwgKCgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuYWN0aXZlQ2FzZXMgPSByO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuQmkobnVsbCwgZSk7XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgc3dhcCh0LCBlLCBpKSB7XG4gICAgICAgIGNvbnN0IHMgPSBbXTtcbiAgICAgICAgbGV0IG4gPSBmYWxzZTtcbiAgICAgICAgZm9yIChjb25zdCB0IG9mIHRoaXMuY2FzZXMpIHtcbiAgICAgICAgICAgIGlmIChuIHx8IHQuaXNNYXRjaChpLCBlKSkge1xuICAgICAgICAgICAgICAgIHMucHVzaCh0KTtcbiAgICAgICAgICAgICAgICBuID0gdC5mYWxsVGhyb3VnaDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChzLmxlbmd0aCA+IDAgJiYgIW4pIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHIgPSB0aGlzLmRlZmF1bHRDYXNlO1xuICAgICAgICBpZiAoMCA9PT0gcy5sZW5ndGggJiYgdm9pZCAwICE9PSByKSBzLnB1c2gocik7XG4gICAgICAgIHJldHVybiBDKHRoaXMuYWN0aXZlQ2FzZXMubGVuZ3RoID4gMCA/IHRoaXMuRWkodCwgZSwgcykgOiB2b2lkIDAsICgoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLmFjdGl2ZUNhc2VzID0gcztcbiAgICAgICAgICAgIGlmICgwID09PSBzLmxlbmd0aCkgcmV0dXJuO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuQmkodCwgZSk7XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgQmkodCwgZSkge1xuICAgICAgICBjb25zdCBpID0gdGhpcy4kY29udHJvbGxlcjtcbiAgICAgICAgaWYgKCFpLmlzQWN0aXZlKSByZXR1cm47XG4gICAgICAgIGNvbnN0IHMgPSB0aGlzLmFjdGl2ZUNhc2VzO1xuICAgICAgICBjb25zdCBuID0gcy5sZW5ndGg7XG4gICAgICAgIGlmICgwID09PSBuKSByZXR1cm47XG4gICAgICAgIGNvbnN0IHIgPSBpLnNjb3BlO1xuICAgICAgICBpZiAoMSA9PT0gbikgcmV0dXJuIHNbMF0uYWN0aXZhdGUodCwgZSwgcik7XG4gICAgICAgIHJldHVybiBBKC4uLnMubWFwKChpID0+IGkuYWN0aXZhdGUodCwgZSwgcikpKSk7XG4gICAgfVxuICAgIEVpKHQsIGUsIGkgPSBbXSkge1xuICAgICAgICBjb25zdCBzID0gdGhpcy5hY3RpdmVDYXNlcztcbiAgICAgICAgY29uc3QgbiA9IHMubGVuZ3RoO1xuICAgICAgICBpZiAoMCA9PT0gbikgcmV0dXJuO1xuICAgICAgICBpZiAoMSA9PT0gbikge1xuICAgICAgICAgICAgY29uc3QgbiA9IHNbMF07XG4gICAgICAgICAgICBpZiAoIWkuaW5jbHVkZXMobikpIHtcbiAgICAgICAgICAgICAgICBzLmxlbmd0aCA9IDA7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG4uZGVhY3RpdmF0ZSh0LCBlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gQyhBKC4uLnMucmVkdWNlKCgocywgbikgPT4ge1xuICAgICAgICAgICAgaWYgKCFpLmluY2x1ZGVzKG4pKSBzLnB1c2gobi5kZWFjdGl2YXRlKHQsIGUpKTtcbiAgICAgICAgICAgIHJldHVybiBzO1xuICAgICAgICB9KSwgW10pKSwgKCgpID0+IHtcbiAgICAgICAgICAgIHMubGVuZ3RoID0gMDtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICBxdWV1ZSh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSB0aGlzLnByb21pc2U7XG4gICAgICAgIGxldCBpO1xuICAgICAgICBpID0gdGhpcy5wcm9taXNlID0gQyhDKGUsIHQpLCAoKCkgPT4ge1xuICAgICAgICAgICAgaWYgKHRoaXMucHJvbWlzZSA9PT0gaSkgdGhpcy5wcm9taXNlID0gdm9pZCAwO1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIGFjY2VwdCh0KSB7XG4gICAgICAgIGlmICh0cnVlID09PSB0aGlzLiRjb250cm9sbGVyLmFjY2VwdCh0KSkgcmV0dXJuIHRydWU7XG4gICAgICAgIGlmICh0aGlzLmFjdGl2ZUNhc2VzLnNvbWUoKGUgPT4gZS5hY2NlcHQodCkpKSkgcmV0dXJuIHRydWU7XG4gICAgfVxufTtcblxub3QoWyBTdCBdLCBFci5wcm90b3R5cGUsIFwidmFsdWVcIiwgdm9pZCAwKTtcblxuRXIgPSBvdChbIE9lKFwic3dpdGNoXCIpLCBsdCgwLCBBaSksIGx0KDEsIG9zKSBdLCBFcik7XG5cbmxldCBCciA9IGNsYXNzIENhc2Uge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUsIGksIHMpIHtcbiAgICAgICAgdGhpcy5JaSA9IGU7XG4gICAgICAgIHRoaXMuaWQgPSB3KFwiYXUkY29tcG9uZW50XCIpO1xuICAgICAgICB0aGlzLmZhbGxUaHJvdWdoID0gZmFsc2U7XG4gICAgICAgIHRoaXMuVGkgPSBzLmNvbmZpZy5sZXZlbCA8PSAxO1xuICAgICAgICB0aGlzLkZ0ID0gcy5zY29wZVRvKGAke3RoaXMuY29uc3RydWN0b3IubmFtZX0tIyR7dGhpcy5pZH1gKTtcbiAgICAgICAgdGhpcy52aWV3ID0gdC5jcmVhdGUoKS5zZXRMb2NhdGlvbihpKTtcbiAgICB9XG4gICAgbGluayh0LCBlLCBpLCBzKSB7XG4gICAgICAgIGNvbnN0IG4gPSB0LnBhcmVudDtcbiAgICAgICAgY29uc3QgciA9IG51bGwgPT09IG4gfHwgdm9pZCAwID09PSBuID8gdm9pZCAwIDogbi52aWV3TW9kZWw7XG4gICAgICAgIGlmIChyIGluc3RhbmNlb2YgRXIpIHtcbiAgICAgICAgICAgIHRoaXMuJHN3aXRjaCA9IHI7XG4gICAgICAgICAgICB0aGlzLmxpbmtUb1N3aXRjaChyKTtcbiAgICAgICAgfSBlbHNlIHRocm93IG5ldyBFcnJvcihcIkFVUjA4MTVcIik7XG4gICAgfVxuICAgIGRldGFjaGluZyh0LCBlLCBpKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmRlYWN0aXZhdGUodCwgaSk7XG4gICAgfVxuICAgIGlzTWF0Y2godCwgZSkge1xuICAgICAgICB0aGlzLkZ0LmRlYnVnKFwiaXNNYXRjaCgpXCIpO1xuICAgICAgICBjb25zdCBpID0gdGhpcy52YWx1ZTtcbiAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkoaSkpIHtcbiAgICAgICAgICAgIGlmICh2b2lkIDAgPT09IHRoaXMuZmkpIHRoaXMuZmkgPSB0aGlzLkRpKGUsIGkpO1xuICAgICAgICAgICAgcmV0dXJuIGkuaW5jbHVkZXModCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGkgPT09IHQ7XG4gICAgfVxuICAgIHZhbHVlQ2hhbmdlZCh0LCBlLCBpKSB7XG4gICAgICAgIHZhciBzO1xuICAgICAgICBpZiAoQXJyYXkuaXNBcnJheSh0KSkge1xuICAgICAgICAgICAgbnVsbCA9PT0gKHMgPSB0aGlzLmZpKSB8fCB2b2lkIDAgPT09IHMgPyB2b2lkIDAgOiBzLnVuc3Vic2NyaWJlKHRoaXMpO1xuICAgICAgICAgICAgdGhpcy5maSA9IHRoaXMuRGkoaSwgdCk7XG4gICAgICAgIH0gZWxzZSBpZiAodm9pZCAwICE9PSB0aGlzLmZpKSB0aGlzLmZpLnVuc3Vic2NyaWJlKHRoaXMpO1xuICAgICAgICB0aGlzLiRzd2l0Y2guY2FzZUNoYW5nZWQodGhpcywgaSk7XG4gICAgfVxuICAgIGhhbmRsZUNvbGxlY3Rpb25DaGFuZ2UodCwgZSkge1xuICAgICAgICB0aGlzLiRzd2l0Y2guY2FzZUNoYW5nZWQodGhpcywgZSk7XG4gICAgfVxuICAgIGFjdGl2YXRlKHQsIGUsIGkpIHtcbiAgICAgICAgY29uc3QgcyA9IHRoaXMudmlldztcbiAgICAgICAgaWYgKHMuaXNBY3RpdmUpIHJldHVybjtcbiAgICAgICAgcmV0dXJuIHMuYWN0aXZhdGUobnVsbCAhPT0gdCAmJiB2b2lkIDAgIT09IHQgPyB0IDogcywgdGhpcy4kY29udHJvbGxlciwgZSwgaSk7XG4gICAgfVxuICAgIGRlYWN0aXZhdGUodCwgZSkge1xuICAgICAgICBjb25zdCBpID0gdGhpcy52aWV3O1xuICAgICAgICBpZiAoIWkuaXNBY3RpdmUpIHJldHVybjtcbiAgICAgICAgcmV0dXJuIGkuZGVhY3RpdmF0ZShudWxsICE9PSB0ICYmIHZvaWQgMCAhPT0gdCA/IHQgOiBpLCB0aGlzLiRjb250cm9sbGVyLCBlKTtcbiAgICB9XG4gICAgZGlzcG9zZSgpIHtcbiAgICAgICAgdmFyIHQsIGU7XG4gICAgICAgIG51bGwgPT09ICh0ID0gdGhpcy5maSkgfHwgdm9pZCAwID09PSB0ID8gdm9pZCAwIDogdC51bnN1YnNjcmliZSh0aGlzKTtcbiAgICAgICAgbnVsbCA9PT0gKGUgPSB0aGlzLnZpZXcpIHx8IHZvaWQgMCA9PT0gZSA/IHZvaWQgMCA6IGUuZGlzcG9zZSgpO1xuICAgICAgICB0aGlzLnZpZXcgPSB2b2lkIDA7XG4gICAgfVxuICAgIGxpbmtUb1N3aXRjaCh0KSB7XG4gICAgICAgIHQuY2FzZXMucHVzaCh0aGlzKTtcbiAgICB9XG4gICAgRGkodCwgZSkge1xuICAgICAgICBjb25zdCBpID0gdGhpcy5JaS5nZXRBcnJheU9ic2VydmVyKGUpO1xuICAgICAgICBpLnN1YnNjcmliZSh0aGlzKTtcbiAgICAgICAgcmV0dXJuIGk7XG4gICAgfVxuICAgIGFjY2VwdCh0KSB7XG4gICAgICAgIHZhciBlO1xuICAgICAgICBpZiAodHJ1ZSA9PT0gdGhpcy4kY29udHJvbGxlci5hY2NlcHQodCkpIHJldHVybiB0cnVlO1xuICAgICAgICByZXR1cm4gbnVsbCA9PT0gKGUgPSB0aGlzLnZpZXcpIHx8IHZvaWQgMCA9PT0gZSA/IHZvaWQgMCA6IGUuYWNjZXB0KHQpO1xuICAgIH1cbn07XG5cbkJyLmluamVjdCA9IFsgQWksIFYsIG9zLCBrIF07XG5cbm90KFsgU3QgXSwgQnIucHJvdG90eXBlLCBcInZhbHVlXCIsIHZvaWQgMCk7XG5cbm90KFsgU3Qoe1xuICAgIHNldDogdCA9PiB7XG4gICAgICAgIHN3aXRjaCAodCkge1xuICAgICAgICAgIGNhc2UgXCJ0cnVlXCI6XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcblxuICAgICAgICAgIGNhc2UgXCJmYWxzZVwiOlxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuXG4gICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIHJldHVybiAhIXQ7XG4gICAgICAgIH1cbiAgICB9LFxuICAgIG1vZGU6IEQub25lVGltZVxufSkgXSwgQnIucHJvdG90eXBlLCBcImZhbGxUaHJvdWdoXCIsIHZvaWQgMCk7XG5cbkJyID0gb3QoWyBPZShcImNhc2VcIikgXSwgQnIpO1xuXG5sZXQgSXIgPSBjbGFzcyBEZWZhdWx0Q2FzZSBleHRlbmRzIEJyIHtcbiAgICBsaW5rVG9Td2l0Y2godCkge1xuICAgICAgICBpZiAodm9pZCAwICE9PSB0LmRlZmF1bHRDYXNlKSB0aHJvdyBuZXcgRXJyb3IoXCJBVVIwODE2XCIpO1xuICAgICAgICB0LmRlZmF1bHRDYXNlID0gdGhpcztcbiAgICB9XG59O1xuXG5JciA9IG90KFsgT2UoXCJkZWZhdWx0LWNhc2VcIikgXSwgSXIpO1xuXG5sZXQgVHIgPSBjbGFzcyBQcm9taXNlVGVtcGxhdGVDb250cm9sbGVyIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlLCBpLCBzKSB7XG4gICAgICAgIHRoaXMuZiA9IHQ7XG4gICAgICAgIHRoaXMubCA9IGU7XG4gICAgICAgIHRoaXMucCA9IGk7XG4gICAgICAgIHRoaXMuaWQgPSB3KFwiYXUkY29tcG9uZW50XCIpO1xuICAgICAgICB0aGlzLnByZVNldHRsZWRUYXNrID0gbnVsbDtcbiAgICAgICAgdGhpcy5wb3N0U2V0dGxlZFRhc2sgPSBudWxsO1xuICAgICAgICB0aGlzLmxvZ2dlciA9IHMuc2NvcGVUbyhcInByb21pc2UucmVzb2x2ZVwiKTtcbiAgICB9XG4gICAgbGluayh0LCBlLCBpLCBzKSB7XG4gICAgICAgIHRoaXMudmlldyA9IHRoaXMuZi5jcmVhdGUodGhpcy4kY29udHJvbGxlcikuc2V0TG9jYXRpb24odGhpcy5sKTtcbiAgICB9XG4gICAgYXR0YWNoaW5nKHQsIGUsIGkpIHtcbiAgICAgICAgY29uc3QgcyA9IHRoaXMudmlldztcbiAgICAgICAgY29uc3QgbiA9IHRoaXMuJGNvbnRyb2xsZXI7XG4gICAgICAgIHJldHVybiBDKHMuYWN0aXZhdGUodCwgbiwgaSwgdGhpcy52aWV3U2NvcGUgPSBVLmZyb21QYXJlbnQobi5zY29wZSwge30pKSwgKCgpID0+IHRoaXMuc3dhcCh0LCBpKSkpO1xuICAgIH1cbiAgICB2YWx1ZUNoYW5nZWQodCwgZSwgaSkge1xuICAgICAgICBpZiAoIXRoaXMuJGNvbnRyb2xsZXIuaXNBY3RpdmUpIHJldHVybjtcbiAgICAgICAgdGhpcy5zd2FwKG51bGwsIGkpO1xuICAgIH1cbiAgICBzd2FwKHQsIGUpIHtcbiAgICAgICAgdmFyIGksIHM7XG4gICAgICAgIGNvbnN0IG4gPSB0aGlzLnZhbHVlO1xuICAgICAgICBpZiAoIShuIGluc3RhbmNlb2YgUHJvbWlzZSkpIHtcbiAgICAgICAgICAgIHRoaXMubG9nZ2VyLndhcm4oYFRoZSB2YWx1ZSAnJHtTdHJpbmcobil9JyBpcyBub3QgYSBwcm9taXNlLiBObyBjaGFuZ2Ugd2lsbCBiZSBkb25lLmApO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHIgPSB0aGlzLnAuZG9tV3JpdGVRdWV1ZTtcbiAgICAgICAgY29uc3QgbyA9IHRoaXMuZnVsZmlsbGVkO1xuICAgICAgICBjb25zdCBsID0gdGhpcy5yZWplY3RlZDtcbiAgICAgICAgY29uc3QgaCA9IHRoaXMucGVuZGluZztcbiAgICAgICAgY29uc3QgYSA9IHRoaXMudmlld1Njb3BlO1xuICAgICAgICBsZXQgYztcbiAgICAgICAgY29uc3QgdSA9IHtcbiAgICAgICAgICAgIHJldXNhYmxlOiBmYWxzZVxuICAgICAgICB9O1xuICAgICAgICBjb25zdCBmID0gKCkgPT4ge1xuICAgICAgICAgICAgdm9pZCBBKGMgPSAodGhpcy5wcmVTZXR0bGVkVGFzayA9IHIucXVldWVUYXNrKCgoKSA9PiBBKG51bGwgPT09IG8gfHwgdm9pZCAwID09PSBvID8gdm9pZCAwIDogby5kZWFjdGl2YXRlKHQsIGUpLCBudWxsID09PSBsIHx8IHZvaWQgMCA9PT0gbCA/IHZvaWQgMCA6IGwuZGVhY3RpdmF0ZSh0LCBlKSwgbnVsbCA9PT0gaCB8fCB2b2lkIDAgPT09IGggPyB2b2lkIDAgOiBoLmFjdGl2YXRlKHQsIGUsIGEpKSksIHUpKS5yZXN1bHQsIG4udGhlbigoaSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMudmFsdWUgIT09IG4pIHJldHVybjtcbiAgICAgICAgICAgICAgICBjb25zdCBzID0gKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnBvc3RTZXR0bGVQcm9taXNlID0gKHRoaXMucG9zdFNldHRsZWRUYXNrID0gci5xdWV1ZVRhc2soKCgpID0+IEEobnVsbCA9PT0gaCB8fCB2b2lkIDAgPT09IGggPyB2b2lkIDAgOiBoLmRlYWN0aXZhdGUodCwgZSksIG51bGwgPT09IGwgfHwgdm9pZCAwID09PSBsID8gdm9pZCAwIDogbC5kZWFjdGl2YXRlKHQsIGUpLCBudWxsID09PSBvIHx8IHZvaWQgMCA9PT0gbyA/IHZvaWQgMCA6IG8uYWN0aXZhdGUodCwgZSwgYSwgaSkpKSwgdSkpLnJlc3VsdDtcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIGlmICgxID09PSB0aGlzLnByZVNldHRsZWRUYXNrLnN0YXR1cykgdm9pZCBjLnRoZW4ocyk7IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnByZVNldHRsZWRUYXNrLmNhbmNlbCgpO1xuICAgICAgICAgICAgICAgICAgICBzKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSksIChpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy52YWx1ZSAhPT0gbikgcmV0dXJuO1xuICAgICAgICAgICAgICAgIGNvbnN0IHMgPSAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucG9zdFNldHRsZVByb21pc2UgPSAodGhpcy5wb3N0U2V0dGxlZFRhc2sgPSByLnF1ZXVlVGFzaygoKCkgPT4gQShudWxsID09PSBoIHx8IHZvaWQgMCA9PT0gaCA/IHZvaWQgMCA6IGguZGVhY3RpdmF0ZSh0LCBlKSwgbnVsbCA9PT0gbyB8fCB2b2lkIDAgPT09IG8gPyB2b2lkIDAgOiBvLmRlYWN0aXZhdGUodCwgZSksIG51bGwgPT09IGwgfHwgdm9pZCAwID09PSBsID8gdm9pZCAwIDogbC5hY3RpdmF0ZSh0LCBlLCBhLCBpKSkpLCB1KSkucmVzdWx0O1xuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgaWYgKDEgPT09IHRoaXMucHJlU2V0dGxlZFRhc2suc3RhdHVzKSB2b2lkIGMudGhlbihzKTsgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucHJlU2V0dGxlZFRhc2suY2FuY2VsKCk7XG4gICAgICAgICAgICAgICAgICAgIHMoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KSkpO1xuICAgICAgICB9O1xuICAgICAgICBpZiAoMSA9PT0gKG51bGwgPT09IChpID0gdGhpcy5wb3N0U2V0dGxlZFRhc2spIHx8IHZvaWQgMCA9PT0gaSA/IHZvaWQgMCA6IGkuc3RhdHVzKSkgdm9pZCB0aGlzLnBvc3RTZXR0bGVQcm9taXNlLnRoZW4oZik7IGVsc2Uge1xuICAgICAgICAgICAgbnVsbCA9PT0gKHMgPSB0aGlzLnBvc3RTZXR0bGVkVGFzaykgfHwgdm9pZCAwID09PSBzID8gdm9pZCAwIDogcy5jYW5jZWwoKTtcbiAgICAgICAgICAgIGYoKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBkZXRhY2hpbmcodCwgZSwgaSkge1xuICAgICAgICB2YXIgcywgbjtcbiAgICAgICAgbnVsbCA9PT0gKHMgPSB0aGlzLnByZVNldHRsZWRUYXNrKSB8fCB2b2lkIDAgPT09IHMgPyB2b2lkIDAgOiBzLmNhbmNlbCgpO1xuICAgICAgICBudWxsID09PSAobiA9IHRoaXMucG9zdFNldHRsZWRUYXNrKSB8fCB2b2lkIDAgPT09IG4gPyB2b2lkIDAgOiBuLmNhbmNlbCgpO1xuICAgICAgICB0aGlzLnByZVNldHRsZWRUYXNrID0gdGhpcy5wb3N0U2V0dGxlZFRhc2sgPSBudWxsO1xuICAgICAgICByZXR1cm4gdGhpcy52aWV3LmRlYWN0aXZhdGUodCwgdGhpcy4kY29udHJvbGxlciwgaSk7XG4gICAgfVxuICAgIGRpc3Bvc2UoKSB7XG4gICAgICAgIHZhciB0O1xuICAgICAgICBudWxsID09PSAodCA9IHRoaXMudmlldykgfHwgdm9pZCAwID09PSB0ID8gdm9pZCAwIDogdC5kaXNwb3NlKCk7XG4gICAgICAgIHRoaXMudmlldyA9IHZvaWQgMDtcbiAgICB9XG59O1xuXG5vdChbIFN0IF0sIFRyLnByb3RvdHlwZSwgXCJ2YWx1ZVwiLCB2b2lkIDApO1xuXG5UciA9IG90KFsgT2UoXCJwcm9taXNlXCIpLCBsdCgwLCBBaSksIGx0KDEsIG9zKSwgbHQoMiwgS3QpLCBsdCgzLCBrKSBdLCBUcik7XG5cbmxldCBEciA9IGNsYXNzIFBlbmRpbmdUZW1wbGF0ZUNvbnRyb2xsZXIge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUpIHtcbiAgICAgICAgdGhpcy5mYWN0b3J5ID0gdDtcbiAgICAgICAgdGhpcy5pZCA9IHcoXCJhdSRjb21wb25lbnRcIik7XG4gICAgICAgIHRoaXMudmlldyA9IHRoaXMuZmFjdG9yeS5jcmVhdGUoKS5zZXRMb2NhdGlvbihlKTtcbiAgICB9XG4gICAgbGluayh0LCBlLCBpLCBzKSB7XG4gICAgICAgICRyKHQpLnBlbmRpbmcgPSB0aGlzO1xuICAgIH1cbiAgICBhY3RpdmF0ZSh0LCBlLCBpKSB7XG4gICAgICAgIGNvbnN0IHMgPSB0aGlzLnZpZXc7XG4gICAgICAgIGlmIChzLmlzQWN0aXZlKSByZXR1cm47XG4gICAgICAgIHJldHVybiBzLmFjdGl2YXRlKHMsIHRoaXMuJGNvbnRyb2xsZXIsIGUsIGkpO1xuICAgIH1cbiAgICBkZWFjdGl2YXRlKHQsIGUpIHtcbiAgICAgICAgY29uc3QgaSA9IHRoaXMudmlldztcbiAgICAgICAgaWYgKCFpLmlzQWN0aXZlKSByZXR1cm47XG4gICAgICAgIHJldHVybiBpLmRlYWN0aXZhdGUoaSwgdGhpcy4kY29udHJvbGxlciwgZSk7XG4gICAgfVxuICAgIGRldGFjaGluZyh0LCBlLCBpKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmRlYWN0aXZhdGUodCwgaSk7XG4gICAgfVxuICAgIGRpc3Bvc2UoKSB7XG4gICAgICAgIHZhciB0O1xuICAgICAgICBudWxsID09PSAodCA9IHRoaXMudmlldykgfHwgdm9pZCAwID09PSB0ID8gdm9pZCAwIDogdC5kaXNwb3NlKCk7XG4gICAgICAgIHRoaXMudmlldyA9IHZvaWQgMDtcbiAgICB9XG59O1xuXG5vdChbIFN0KHtcbiAgICBtb2RlOiBELnRvVmlld1xufSkgXSwgRHIucHJvdG90eXBlLCBcInZhbHVlXCIsIHZvaWQgMCk7XG5cbkRyID0gb3QoWyBPZShcInBlbmRpbmdcIiksIGx0KDAsIEFpKSwgbHQoMSwgb3MpIF0sIERyKTtcblxubGV0IFByID0gY2xhc3MgRnVsZmlsbGVkVGVtcGxhdGVDb250cm9sbGVyIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlKSB7XG4gICAgICAgIHRoaXMuZmFjdG9yeSA9IHQ7XG4gICAgICAgIHRoaXMuaWQgPSB3KFwiYXUkY29tcG9uZW50XCIpO1xuICAgICAgICB0aGlzLnZpZXcgPSB0aGlzLmZhY3RvcnkuY3JlYXRlKCkuc2V0TG9jYXRpb24oZSk7XG4gICAgfVxuICAgIGxpbmsodCwgZSwgaSwgcykge1xuICAgICAgICAkcih0KS5mdWxmaWxsZWQgPSB0aGlzO1xuICAgIH1cbiAgICBhY3RpdmF0ZSh0LCBlLCBpLCBzKSB7XG4gICAgICAgIHRoaXMudmFsdWUgPSBzO1xuICAgICAgICBjb25zdCBuID0gdGhpcy52aWV3O1xuICAgICAgICBpZiAobi5pc0FjdGl2ZSkgcmV0dXJuO1xuICAgICAgICByZXR1cm4gbi5hY3RpdmF0ZShuLCB0aGlzLiRjb250cm9sbGVyLCBlLCBpKTtcbiAgICB9XG4gICAgZGVhY3RpdmF0ZSh0LCBlKSB7XG4gICAgICAgIGNvbnN0IGkgPSB0aGlzLnZpZXc7XG4gICAgICAgIGlmICghaS5pc0FjdGl2ZSkgcmV0dXJuO1xuICAgICAgICByZXR1cm4gaS5kZWFjdGl2YXRlKGksIHRoaXMuJGNvbnRyb2xsZXIsIGUpO1xuICAgIH1cbiAgICBkZXRhY2hpbmcodCwgZSwgaSkge1xuICAgICAgICByZXR1cm4gdGhpcy5kZWFjdGl2YXRlKHQsIGkpO1xuICAgIH1cbiAgICBkaXNwb3NlKCkge1xuICAgICAgICB2YXIgdDtcbiAgICAgICAgbnVsbCA9PT0gKHQgPSB0aGlzLnZpZXcpIHx8IHZvaWQgMCA9PT0gdCA/IHZvaWQgMCA6IHQuZGlzcG9zZSgpO1xuICAgICAgICB0aGlzLnZpZXcgPSB2b2lkIDA7XG4gICAgfVxufTtcblxub3QoWyBTdCh7XG4gICAgbW9kZTogRC5mcm9tVmlld1xufSkgXSwgUHIucHJvdG90eXBlLCBcInZhbHVlXCIsIHZvaWQgMCk7XG5cblByID0gb3QoWyBPZShcInRoZW5cIiksIGx0KDAsIEFpKSwgbHQoMSwgb3MpIF0sIFByKTtcblxubGV0IE9yID0gY2xhc3MgUmVqZWN0ZWRUZW1wbGF0ZUNvbnRyb2xsZXIge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUpIHtcbiAgICAgICAgdGhpcy5mYWN0b3J5ID0gdDtcbiAgICAgICAgdGhpcy5pZCA9IHcoXCJhdSRjb21wb25lbnRcIik7XG4gICAgICAgIHRoaXMudmlldyA9IHRoaXMuZmFjdG9yeS5jcmVhdGUoKS5zZXRMb2NhdGlvbihlKTtcbiAgICB9XG4gICAgbGluayh0LCBlLCBpLCBzKSB7XG4gICAgICAgICRyKHQpLnJlamVjdGVkID0gdGhpcztcbiAgICB9XG4gICAgYWN0aXZhdGUodCwgZSwgaSwgcykge1xuICAgICAgICB0aGlzLnZhbHVlID0gcztcbiAgICAgICAgY29uc3QgbiA9IHRoaXMudmlldztcbiAgICAgICAgaWYgKG4uaXNBY3RpdmUpIHJldHVybjtcbiAgICAgICAgcmV0dXJuIG4uYWN0aXZhdGUobiwgdGhpcy4kY29udHJvbGxlciwgZSwgaSk7XG4gICAgfVxuICAgIGRlYWN0aXZhdGUodCwgZSkge1xuICAgICAgICBjb25zdCBpID0gdGhpcy52aWV3O1xuICAgICAgICBpZiAoIWkuaXNBY3RpdmUpIHJldHVybjtcbiAgICAgICAgcmV0dXJuIGkuZGVhY3RpdmF0ZShpLCB0aGlzLiRjb250cm9sbGVyLCBlKTtcbiAgICB9XG4gICAgZGV0YWNoaW5nKHQsIGUsIGkpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZGVhY3RpdmF0ZSh0LCBpKTtcbiAgICB9XG4gICAgZGlzcG9zZSgpIHtcbiAgICAgICAgdmFyIHQ7XG4gICAgICAgIG51bGwgPT09ICh0ID0gdGhpcy52aWV3KSB8fCB2b2lkIDAgPT09IHQgPyB2b2lkIDAgOiB0LmRpc3Bvc2UoKTtcbiAgICAgICAgdGhpcy52aWV3ID0gdm9pZCAwO1xuICAgIH1cbn07XG5cbm90KFsgU3Qoe1xuICAgIG1vZGU6IEQuZnJvbVZpZXdcbn0pIF0sIE9yLnByb3RvdHlwZSwgXCJ2YWx1ZVwiLCB2b2lkIDApO1xuXG5PciA9IG90KFsgT2UoXCJjYXRjaFwiKSwgbHQoMCwgQWkpLCBsdCgxLCBvcykgXSwgT3IpO1xuXG5mdW5jdGlvbiAkcih0KSB7XG4gICAgY29uc3QgZSA9IHQucGFyZW50O1xuICAgIGNvbnN0IGkgPSBudWxsID09PSBlIHx8IHZvaWQgMCA9PT0gZSA/IHZvaWQgMCA6IGUudmlld01vZGVsO1xuICAgIGlmIChpIGluc3RhbmNlb2YgVHIpIHJldHVybiBpO1xuICAgIHRocm93IG5ldyBFcnJvcihcIkFVUjA4MTNcIik7XG59XG5cbmxldCBMciA9IGNsYXNzIFByb21pc2VBdHRyaWJ1dGVQYXR0ZXJuIHtcbiAgICBcInByb21pc2UucmVzb2x2ZVwiKHQsIGUsIGkpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBBdHRyU3ludGF4KHQsIGUsIFwicHJvbWlzZVwiLCBcImJpbmRcIik7XG4gICAgfVxufTtcblxuTHIgPSBvdChbIEZ0KHtcbiAgICBwYXR0ZXJuOiBcInByb21pc2UucmVzb2x2ZVwiLFxuICAgIHN5bWJvbHM6IFwiXCJcbn0pIF0sIExyKTtcblxubGV0IHFyID0gY2xhc3MgRnVsZmlsbGVkQXR0cmlidXRlUGF0dGVybiB7XG4gICAgdGhlbih0LCBlLCBpKSB7XG4gICAgICAgIHJldHVybiBuZXcgQXR0clN5bnRheCh0LCBlLCBcInRoZW5cIiwgXCJmcm9tLXZpZXdcIik7XG4gICAgfVxufTtcblxucXIgPSBvdChbIEZ0KHtcbiAgICBwYXR0ZXJuOiBcInRoZW5cIixcbiAgICBzeW1ib2xzOiBcIlwiXG59KSBdLCBxcik7XG5cbmxldCBNciA9IGNsYXNzIFJlamVjdGVkQXR0cmlidXRlUGF0dGVybiB7XG4gICAgY2F0Y2godCwgZSwgaSkge1xuICAgICAgICByZXR1cm4gbmV3IEF0dHJTeW50YXgodCwgZSwgXCJjYXRjaFwiLCBcImZyb20tdmlld1wiKTtcbiAgICB9XG59O1xuXG5NciA9IG90KFsgRnQoe1xuICAgIHBhdHRlcm46IFwiY2F0Y2hcIixcbiAgICBzeW1ib2xzOiBcIlwiXG59KSBdLCBNcik7XG5cbmZ1bmN0aW9uIFVyKHQsIGUsIGksIHMpIHtcbiAgICBpZiAoQXQoZSkpIHJldHVybiBGcih0LCBlLCBpLCBzKTtcbiAgICBpZiAoc2kuaXNUeXBlKGUpKSByZXR1cm4gVnIodCwgZSwgaSwgcyk7XG4gICAgdGhyb3cgbmV3IEVycm9yKGBJbnZhbGlkIFRhZyBvciBUeXBlLmApO1xufVxuXG5jbGFzcyBSZW5kZXJQbGFuIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlLCBpKSB7XG4gICAgICAgIHRoaXMubm9kZSA9IHQ7XG4gICAgICAgIHRoaXMuaW5zdHJ1Y3Rpb25zID0gZTtcbiAgICAgICAgdGhpcy5QaSA9IGk7XG4gICAgICAgIHRoaXMuT2kgPSB2b2lkIDA7XG4gICAgfVxuICAgIGdldCBkZWZpbml0aW9uKCkge1xuICAgICAgICBpZiAodm9pZCAwID09PSB0aGlzLk9pKSB0aGlzLk9pID0gQ3VzdG9tRWxlbWVudERlZmluaXRpb24uY3JlYXRlKHtcbiAgICAgICAgICAgIG5hbWU6IHNpLmdlbmVyYXRlTmFtZSgpLFxuICAgICAgICAgICAgdGVtcGxhdGU6IHRoaXMubm9kZSxcbiAgICAgICAgICAgIG5lZWRzQ29tcGlsZTogQXQodGhpcy5ub2RlKSxcbiAgICAgICAgICAgIGluc3RydWN0aW9uczogdGhpcy5pbnN0cnVjdGlvbnMsXG4gICAgICAgICAgICBkZXBlbmRlbmNpZXM6IHRoaXMuUGlcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiB0aGlzLk9pO1xuICAgIH1cbiAgICBjcmVhdGVWaWV3KHQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0Vmlld0ZhY3RvcnkodCkuY3JlYXRlKCk7XG4gICAgfVxuICAgIGdldFZpZXdGYWN0b3J5KHQpIHtcbiAgICAgICAgcmV0dXJuIHQucm9vdC5nZXQoUGkpLmdldFZpZXdGYWN0b3J5KHRoaXMuZGVmaW5pdGlvbiwgdC5jcmVhdGVDaGlsZCgpLnJlZ2lzdGVyKC4uLnRoaXMuUGkpKTtcbiAgICB9XG4gICAgbWVyZ2VJbnRvKHQsIGUsIGkpIHtcbiAgICAgICAgdC5hcHBlbmRDaGlsZCh0aGlzLm5vZGUpO1xuICAgICAgICBlLnB1c2goLi4udGhpcy5pbnN0cnVjdGlvbnMpO1xuICAgICAgICBpLnB1c2goLi4udGhpcy5QaSk7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBGcih0LCBlLCBpLCBzKSB7XG4gICAgY29uc3QgbiA9IFtdO1xuICAgIGNvbnN0IHIgPSBbXTtcbiAgICBjb25zdCBvID0gW107XG4gICAgY29uc3QgbCA9IHQuZG9jdW1lbnQuY3JlYXRlRWxlbWVudChlKTtcbiAgICBsZXQgaCA9IGZhbHNlO1xuICAgIGlmIChpKSBPYmplY3Qua2V5cyhpKS5mb3JFYWNoKCh0ID0+IHtcbiAgICAgICAgY29uc3QgZSA9IGlbdF07XG4gICAgICAgIGlmIChDcyhlKSkge1xuICAgICAgICAgICAgaCA9IHRydWU7XG4gICAgICAgICAgICBuLnB1c2goZSk7XG4gICAgICAgIH0gZWxzZSBsLnNldEF0dHJpYnV0ZSh0LCBlKTtcbiAgICB9KSk7XG4gICAgaWYgKGgpIHtcbiAgICAgICAgbC5jbGFzc05hbWUgPSBcImF1XCI7XG4gICAgICAgIHIucHVzaChuKTtcbiAgICB9XG4gICAgaWYgKHMpIF9yKHQsIGwsIHMsIHIsIG8pO1xuICAgIHJldHVybiBuZXcgUmVuZGVyUGxhbihsLCByLCBvKTtcbn1cblxuZnVuY3Rpb24gVnIodCwgZSwgaSwgcykge1xuICAgIGNvbnN0IG4gPSBzaS5nZXREZWZpbml0aW9uKGUpO1xuICAgIGNvbnN0IHIgPSBbXTtcbiAgICBjb25zdCBvID0gWyByIF07XG4gICAgY29uc3QgbCA9IFtdO1xuICAgIGNvbnN0IGggPSBbXTtcbiAgICBjb25zdCBhID0gbi5iaW5kYWJsZXM7XG4gICAgY29uc3QgYyA9IHQuZG9jdW1lbnQuY3JlYXRlRWxlbWVudChuLm5hbWUpO1xuICAgIGMuY2xhc3NOYW1lID0gXCJhdVwiO1xuICAgIGlmICghbC5pbmNsdWRlcyhlKSkgbC5wdXNoKGUpO1xuICAgIHIucHVzaChuZXcgSHlkcmF0ZUVsZW1lbnRJbnN0cnVjdGlvbihuLCB2b2lkIDAsIGgsIG51bGwsIGZhbHNlLCB2b2lkIDApKTtcbiAgICBpZiAoaSkgT2JqZWN0LmtleXMoaSkuZm9yRWFjaCgodCA9PiB7XG4gICAgICAgIGNvbnN0IGUgPSBpW3RdO1xuICAgICAgICBpZiAoQ3MoZSkpIGgucHVzaChlKTsgZWxzZSBpZiAodm9pZCAwID09PSBhW3RdKSBoLnB1c2gobmV3IFNldEF0dHJpYnV0ZUluc3RydWN0aW9uKGUsIHQpKTsgZWxzZSBoLnB1c2gobmV3IFNldFByb3BlcnR5SW5zdHJ1Y3Rpb24oZSwgdCkpO1xuICAgIH0pKTtcbiAgICBpZiAocykgX3IodCwgYywgcywgbywgbCk7XG4gICAgcmV0dXJuIG5ldyBSZW5kZXJQbGFuKGMsIG8sIGwpO1xufVxuXG5mdW5jdGlvbiBfcih0LCBlLCBpLCBzLCBuKSB7XG4gICAgZm9yIChsZXQgciA9IDAsIG8gPSBpLmxlbmd0aDsgciA8IG87ICsrcikge1xuICAgICAgICBjb25zdCBvID0gaVtyXTtcbiAgICAgICAgc3dpdGNoICh0eXBlb2Ygbykge1xuICAgICAgICAgIGNhc2UgXCJzdHJpbmdcIjpcbiAgICAgICAgICAgIGUuYXBwZW5kQ2hpbGQodC5kb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShvKSk7XG4gICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgIGNhc2UgXCJvYmplY3RcIjpcbiAgICAgICAgICAgIGlmIChvIGluc3RhbmNlb2YgdC5Ob2RlKSBlLmFwcGVuZENoaWxkKG8pOyBlbHNlIGlmIChcIm1lcmdlSW50b1wiIGluIG8pIG8ubWVyZ2VJbnRvKGUsIHMsIG4pO1xuICAgICAgICB9XG4gICAgfVxufVxuXG5mdW5jdGlvbiBqcih0LCBlKSB7XG4gICAgY29uc3QgaSA9IGUudG87XG4gICAgaWYgKHZvaWQgMCAhPT0gaSAmJiBcInN1YmplY3RcIiAhPT0gaSAmJiBcImNvbXBvc2luZ1wiICE9PSBpKSB0W2ldID0gZTtcbiAgICByZXR1cm4gdDtcbn1cblxuY2xhc3MgQXVSZW5kZXIge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUsIGksIHMpIHtcbiAgICAgICAgdGhpcy5wID0gdDtcbiAgICAgICAgdGhpcy4kaSA9IGU7XG4gICAgICAgIHRoaXMuTGkgPSBpO1xuICAgICAgICB0aGlzLnIgPSBzO1xuICAgICAgICB0aGlzLmlkID0gdyhcImF1JGNvbXBvbmVudFwiKTtcbiAgICAgICAgdGhpcy5jb21wb25lbnQgPSB2b2lkIDA7XG4gICAgICAgIHRoaXMuY29tcG9zaW5nID0gZmFsc2U7XG4gICAgICAgIHRoaXMudmlldyA9IHZvaWQgMDtcbiAgICAgICAgdGhpcy5xaSA9IHZvaWQgMDtcbiAgICAgICAgdGhpcy5NaSA9IGUucHJvcHMucmVkdWNlKGpyLCB7fSk7XG4gICAgfVxuICAgIGF0dGFjaGluZyh0LCBlLCBpKSB7XG4gICAgICAgIGNvbnN0IHtjb21wb25lbnQ6IHMsIHZpZXc6IG59ID0gdGhpcztcbiAgICAgICAgaWYgKHZvaWQgMCA9PT0gbiB8fCB0aGlzLnFpICE9PSBzKSB7XG4gICAgICAgICAgICB0aGlzLnFpID0gcztcbiAgICAgICAgICAgIHRoaXMuY29tcG9zaW5nID0gdHJ1ZTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmNvbXBvc2Uodm9pZCAwLCBzLCB0LCBpKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5jb21wb3NlKG4sIHMsIHQsIGkpO1xuICAgIH1cbiAgICBkZXRhY2hpbmcodCwgZSwgaSkge1xuICAgICAgICByZXR1cm4gdGhpcy5vaSh0aGlzLnZpZXcsIHQsIGkpO1xuICAgIH1cbiAgICBjb21wb25lbnRDaGFuZ2VkKHQsIGUsIGkpIHtcbiAgICAgICAgY29uc3QgeyRjb250cm9sbGVyOiBzfSA9IHRoaXM7XG4gICAgICAgIGlmICghcy5pc0FjdGl2ZSkgcmV0dXJuO1xuICAgICAgICBpZiAodGhpcy5xaSA9PT0gdCkgcmV0dXJuO1xuICAgICAgICB0aGlzLnFpID0gdDtcbiAgICAgICAgdGhpcy5jb21wb3NpbmcgPSB0cnVlO1xuICAgICAgICBpIHw9IHMuZmxhZ3M7XG4gICAgICAgIGNvbnN0IG4gPSBDKHRoaXMub2kodGhpcy52aWV3LCBudWxsLCBpKSwgKCgpID0+IHRoaXMuY29tcG9zZSh2b2lkIDAsIHQsIG51bGwsIGkpKSk7XG4gICAgICAgIGlmIChuIGluc3RhbmNlb2YgUHJvbWlzZSkgbi5jYXRjaCgodCA9PiB7XG4gICAgICAgICAgICB0aHJvdyB0O1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIGNvbXBvc2UodCwgZSwgaSwgcykge1xuICAgICAgICByZXR1cm4gQyh2b2lkIDAgPT09IHQgPyBDKGUsICh0ID0+IHRoaXMuVWkodCwgcykpKSA6IHQsICh0ID0+IHRoaXMubmkodGhpcy52aWV3ID0gdCwgaSwgcykpKTtcbiAgICB9XG4gICAgb2kodCwgZSwgaSkge1xuICAgICAgICByZXR1cm4gbnVsbCA9PT0gdCB8fCB2b2lkIDAgPT09IHQgPyB2b2lkIDAgOiB0LmRlYWN0aXZhdGUobnVsbCAhPT0gZSAmJiB2b2lkIDAgIT09IGUgPyBlIDogdCwgdGhpcy4kY29udHJvbGxlciwgaSk7XG4gICAgfVxuICAgIG5pKHQsIGUsIGkpIHtcbiAgICAgICAgY29uc3QgeyRjb250cm9sbGVyOiBzfSA9IHRoaXM7XG4gICAgICAgIHJldHVybiBDKG51bGwgPT09IHQgfHwgdm9pZCAwID09PSB0ID8gdm9pZCAwIDogdC5hY3RpdmF0ZShudWxsICE9PSBlICYmIHZvaWQgMCAhPT0gZSA/IGUgOiB0LCBzLCBpLCBzLnNjb3BlKSwgKCgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuY29tcG9zaW5nID0gZmFsc2U7XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgVWkodCwgZSkge1xuICAgICAgICBjb25zdCBpID0gdGhpcy5GaSh0LCBlKTtcbiAgICAgICAgaWYgKGkpIHtcbiAgICAgICAgICAgIGkuc2V0TG9jYXRpb24odGhpcy4kY29udHJvbGxlci5sb2NhdGlvbik7XG4gICAgICAgICAgICBpLmxvY2tTY29wZSh0aGlzLiRjb250cm9sbGVyLnNjb3BlKTtcbiAgICAgICAgICAgIHJldHVybiBpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgRmkodCwgZSkge1xuICAgICAgICBpZiAoIXQpIHJldHVybjtcbiAgICAgICAgY29uc3QgaSA9IHRoaXMuTGkuY29udHJvbGxlci5jb250YWluZXI7XG4gICAgICAgIGlmIChcIm9iamVjdFwiID09PSB0eXBlb2YgdCkge1xuICAgICAgICAgICAgaWYgKE5yKHQpKSByZXR1cm4gdDtcbiAgICAgICAgICAgIGlmIChcImNyZWF0ZVZpZXdcIiBpbiB0KSByZXR1cm4gdC5jcmVhdGVWaWV3KGkpO1xuICAgICAgICAgICAgaWYgKFwiY3JlYXRlXCIgaW4gdCkgcmV0dXJuIHQuY3JlYXRlKCk7XG4gICAgICAgICAgICBpZiAoXCJ0ZW1wbGF0ZVwiIGluIHQpIHJldHVybiB0aGlzLnIuZ2V0Vmlld0ZhY3RvcnkoQ3VzdG9tRWxlbWVudERlZmluaXRpb24uZ2V0T3JDcmVhdGUodCksIGkpLmNyZWF0ZSgpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChBdCh0KSkge1xuICAgICAgICAgICAgY29uc3QgZSA9IGkuZmluZChzaSwgdCk7XG4gICAgICAgICAgICBpZiAobnVsbCA9PSBlKSB0aHJvdyBuZXcgRXJyb3IoYEFVUjA4MDk6JHt0fWApO1xuICAgICAgICAgICAgdCA9IGUuVHlwZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gVXIodGhpcy5wLCB0LCB0aGlzLk1pLCB0aGlzLiRjb250cm9sbGVyLmhvc3QuY2hpbGROb2RlcykuY3JlYXRlVmlldyhpKTtcbiAgICB9XG4gICAgZGlzcG9zZSgpIHtcbiAgICAgICAgdmFyIHQ7XG4gICAgICAgIG51bGwgPT09ICh0ID0gdGhpcy52aWV3KSB8fCB2b2lkIDAgPT09IHQgPyB2b2lkIDAgOiB0LmRpc3Bvc2UoKTtcbiAgICAgICAgdGhpcy52aWV3ID0gdm9pZCAwO1xuICAgIH1cbiAgICBhY2NlcHQodCkge1xuICAgICAgICB2YXIgZTtcbiAgICAgICAgaWYgKHRydWUgPT09IChudWxsID09PSAoZSA9IHRoaXMudmlldykgfHwgdm9pZCAwID09PSBlID8gdm9pZCAwIDogZS5hY2NlcHQodCkpKSByZXR1cm4gdHJ1ZTtcbiAgICB9XG59XG5cbkF1UmVuZGVyLmluamVjdCA9IFsgS3QsIGtzLCBLaSwgUGkgXTtcblxub3QoWyBTdCBdLCBBdVJlbmRlci5wcm90b3R5cGUsIFwiY29tcG9uZW50XCIsIHZvaWQgMCk7XG5cbm90KFsgU3Qoe1xuICAgIG1vZGU6IEQuZnJvbVZpZXdcbn0pIF0sIEF1UmVuZGVyLnByb3RvdHlwZSwgXCJjb21wb3NpbmdcIiwgdm9pZCAwKTtcblxuamUoe1xuICAgIG5hbWU6IFwiYXUtcmVuZGVyXCIsXG4gICAgdGVtcGxhdGU6IG51bGwsXG4gICAgY29udGFpbmVybGVzczogdHJ1ZSxcbiAgICBjYXB0dXJlOiB0cnVlXG59KShBdVJlbmRlcik7XG5cbmZ1bmN0aW9uIE5yKHQpIHtcbiAgICByZXR1cm4gXCJsb2NrU2NvcGVcIiBpbiB0O1xufVxuXG5jbGFzcyBBdUNvbXBvc2Uge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUsIGksIHMsIG4sIHIpIHtcbiAgICAgICAgdGhpcy5jID0gdDtcbiAgICAgICAgdGhpcy5wYXJlbnQgPSBlO1xuICAgICAgICB0aGlzLmhvc3QgPSBpO1xuICAgICAgICB0aGlzLnAgPSBzO1xuICAgICAgICB0aGlzLnNjb3BlQmVoYXZpb3IgPSBcImF1dG9cIjtcbiAgICAgICAgdGhpcy5WaSA9IHZvaWQgMDtcbiAgICAgICAgdGhpcy5sID0gbi5jb250YWluZXJsZXNzID8gdXModGhpcy5ob3N0KSA6IHZvaWQgMDtcbiAgICAgICAgdGhpcy5yID0gdC5nZXQoUGkpO1xuICAgICAgICB0aGlzLiRpID0gbjtcbiAgICAgICAgdGhpcy5faSA9IHI7XG4gICAgfVxuICAgIHN0YXRpYyBnZXQgaW5qZWN0KCkge1xuICAgICAgICByZXR1cm4gWyBnLCBYaSwgbnMsIEt0LCBrcywgVChDb21wb3NpdGlvbkNvbnRleHRGYWN0b3J5KSBdO1xuICAgIH1cbiAgICBnZXQgcGVuZGluZygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuamk7XG4gICAgfVxuICAgIGdldCBjb21wb3NpdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuVmk7XG4gICAgfVxuICAgIGF0dGFjaGluZyh0LCBlLCBpKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmppID0gQyh0aGlzLnF1ZXVlKG5ldyBDaGFuZ2VJbmZvKHRoaXMudmlldywgdGhpcy52aWV3TW9kZWwsIHRoaXMubW9kZWwsIHZvaWQgMCksIHQpLCAodCA9PiB7XG4gICAgICAgICAgICBpZiAodGhpcy5faS5pc0N1cnJlbnQodCkpIHRoaXMuamkgPSB2b2lkIDA7XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgZGV0YWNoaW5nKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IHRoaXMuVmk7XG4gICAgICAgIGNvbnN0IGkgPSB0aGlzLmppO1xuICAgICAgICB0aGlzLl9pLmludmFsaWRhdGUoKTtcbiAgICAgICAgdGhpcy5WaSA9IHRoaXMuamkgPSB2b2lkIDA7XG4gICAgICAgIHJldHVybiBDKGksICgoKSA9PiBudWxsID09PSBlIHx8IHZvaWQgMCA9PT0gZSA/IHZvaWQgMCA6IGUuZGVhY3RpdmF0ZSh0KSkpO1xuICAgIH1cbiAgICBwcm9wZXJ0eUNoYW5nZWQodCkge1xuICAgICAgICBpZiAoXCJtb2RlbFwiID09PSB0ICYmIG51bGwgIT0gdGhpcy5WaSkge1xuICAgICAgICAgICAgdGhpcy5WaS51cGRhdGUodGhpcy5tb2RlbCk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5qaSA9IEModGhpcy5qaSwgKCgpID0+IEModGhpcy5xdWV1ZShuZXcgQ2hhbmdlSW5mbyh0aGlzLnZpZXcsIHRoaXMudmlld01vZGVsLCB0aGlzLm1vZGVsLCB0KSwgdm9pZCAwKSwgKHQgPT4ge1xuICAgICAgICAgICAgaWYgKHRoaXMuX2kuaXNDdXJyZW50KHQpKSB0aGlzLmppID0gdm9pZCAwO1xuICAgICAgICB9KSkpKTtcbiAgICB9XG4gICAgcXVldWUodCwgZSkge1xuICAgICAgICBjb25zdCBpID0gdGhpcy5faTtcbiAgICAgICAgY29uc3QgcyA9IHRoaXMuVmk7XG4gICAgICAgIHJldHVybiBDKGkuY3JlYXRlKHQpLCAodCA9PiB7XG4gICAgICAgICAgICBpZiAoaS5pc0N1cnJlbnQodCkpIHJldHVybiBDKHRoaXMuY29tcG9zZSh0KSwgKG4gPT4ge1xuICAgICAgICAgICAgICAgIGlmIChpLmlzQ3VycmVudCh0KSkgcmV0dXJuIEMobi5hY3RpdmF0ZShlKSwgKCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGkuaXNDdXJyZW50KHQpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLlZpID0gbjtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBDKG51bGwgPT09IHMgfHwgdm9pZCAwID09PSBzID8gdm9pZCAwIDogcy5kZWFjdGl2YXRlKGUpLCAoKCkgPT4gdCkpO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgcmV0dXJuIEMobi5jb250cm9sbGVyLmRlYWN0aXZhdGUobi5jb250cm9sbGVyLCB0aGlzLiRjb250cm9sbGVyLCA0KSwgKCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG4uY29udHJvbGxlci5kaXNwb3NlKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdDtcbiAgICAgICAgICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgICAgICBuLmNvbnRyb2xsZXIuZGlzcG9zZSgpO1xuICAgICAgICAgICAgICAgIHJldHVybiB0O1xuICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgcmV0dXJuIHQ7XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgY29tcG9zZSh0KSB7XG4gICAgICAgIGxldCBlO1xuICAgICAgICBsZXQgaTtcbiAgICAgICAgbGV0IHM7XG4gICAgICAgIGNvbnN0IHt2aWV3OiBuLCB2aWV3TW9kZWw6IHIsIG1vZGVsOiBvfSA9IHQuY2hhbmdlO1xuICAgICAgICBjb25zdCB7YzogbCwgaG9zdDogaCwgJGNvbnRyb2xsZXI6IGEsIGw6IGN9ID0gdGhpcztcbiAgICAgICAgY29uc3QgdSA9IHRoaXMuZ2V0RGVmKHIpO1xuICAgICAgICBjb25zdCBmID0gbC5jcmVhdGVDaGlsZCgpO1xuICAgICAgICBjb25zdCBkID0gbnVsbCA9PSBjID8gaC5wYXJlbnROb2RlIDogYy5wYXJlbnROb2RlO1xuICAgICAgICBpZiAobnVsbCAhPT0gdSkge1xuICAgICAgICAgICAgaWYgKHUuY29udGFpbmVybGVzcykgdGhyb3cgbmV3IEVycm9yKFwiQVVSMDgwNlwiKTtcbiAgICAgICAgICAgIGlmIChudWxsID09IGMpIHtcbiAgICAgICAgICAgICAgICBpID0gaDtcbiAgICAgICAgICAgICAgICBzID0gKCkgPT4ge307XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGkgPSBkLmluc2VydEJlZm9yZSh0aGlzLnAuZG9jdW1lbnQuY3JlYXRlRWxlbWVudCh1Lm5hbWUpLCBjKTtcbiAgICAgICAgICAgICAgICBzID0gKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBpLnJlbW92ZSgpO1xuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlID0gdGhpcy5nZXRWbShmLCByLCBpKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGkgPSBudWxsID09IGMgPyBoIDogYztcbiAgICAgICAgICAgIGUgPSB0aGlzLmdldFZtKGYsIHIsIGkpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IG0gPSAoKSA9PiB7XG4gICAgICAgICAgICBpZiAobnVsbCAhPT0gdSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IG4gPSBDb250cm9sbGVyLiRlbChmLCBlLCBpLCB7XG4gICAgICAgICAgICAgICAgICAgIHByb2plY3Rpb25zOiB0aGlzLiRpLnByb2plY3Rpb25zXG4gICAgICAgICAgICAgICAgfSwgdSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBDb21wb3NpdGlvbkNvbnRyb2xsZXIobiwgKHQgPT4gbi5hY3RpdmF0ZShudWxsICE9PSB0ICYmIHZvaWQgMCAhPT0gdCA/IHQgOiBuLCBhLCAyLCBhLnNjb3BlLnBhcmVudFNjb3BlKSksICh0ID0+IEMobi5kZWFjdGl2YXRlKG51bGwgIT09IHQgJiYgdm9pZCAwICE9PSB0ID8gdCA6IG4sIGEsIDQpLCBzKSksICh0ID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBudWxsID09PSAoaSA9IGUuYWN0aXZhdGUpIHx8IHZvaWQgMCA9PT0gaSA/IHZvaWQgMCA6IGkuY2FsbChlLCB0KTtcbiAgICAgICAgICAgICAgICB9KSwgdCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGNvbnN0IHMgPSBDdXN0b21FbGVtZW50RGVmaW5pdGlvbi5jcmVhdGUoe1xuICAgICAgICAgICAgICAgICAgICBuYW1lOiBzaS5nZW5lcmF0ZU5hbWUoKSxcbiAgICAgICAgICAgICAgICAgICAgdGVtcGxhdGU6IG5cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBjb25zdCByID0gdGhpcy5yLmdldFZpZXdGYWN0b3J5KHMsIGYpO1xuICAgICAgICAgICAgICAgIGNvbnN0IG8gPSBDb250cm9sbGVyLiR2aWV3KHIsIGEpO1xuICAgICAgICAgICAgICAgIGNvbnN0IGwgPSBcImF1dG9cIiA9PT0gdGhpcy5zY29wZUJlaGF2aW9yID8gVS5mcm9tUGFyZW50KHRoaXMucGFyZW50LnNjb3BlLCBlKSA6IFUuY3JlYXRlKGUpO1xuICAgICAgICAgICAgICAgIGlmIChmcyhpKSkgby5zZXRMb2NhdGlvbihpKTsgZWxzZSBvLnNldEhvc3QoaSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBDb21wb3NpdGlvbkNvbnRyb2xsZXIobywgKHQgPT4gby5hY3RpdmF0ZShudWxsICE9PSB0ICYmIHZvaWQgMCAhPT0gdCA/IHQgOiBvLCBhLCAyLCBsKSksICh0ID0+IG8uZGVhY3RpdmF0ZShudWxsICE9PSB0ICYmIHZvaWQgMCAhPT0gdCA/IHQgOiBvLCBhLCA0KSksICh0ID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBudWxsID09PSAoaSA9IGUuYWN0aXZhdGUpIHx8IHZvaWQgMCA9PT0gaSA/IHZvaWQgMCA6IGkuY2FsbChlLCB0KTtcbiAgICAgICAgICAgICAgICB9KSwgdCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIGlmIChcImFjdGl2YXRlXCIgaW4gZSkgcmV0dXJuIEMoZS5hY3RpdmF0ZShvKSwgKCgpID0+IG0oKSkpOyBlbHNlIHJldHVybiBtKCk7XG4gICAgfVxuICAgIGdldFZtKHQsIGUsIGkpIHtcbiAgICAgICAgaWYgKG51bGwgPT0gZSkgcmV0dXJuIG5ldyBFbXB0eUNvbXBvbmVudCQxO1xuICAgICAgICBpZiAoXCJvYmplY3RcIiA9PT0gdHlwZW9mIGUpIHJldHVybiBlO1xuICAgICAgICBjb25zdCBzID0gdGhpcy5wO1xuICAgICAgICBjb25zdCBuID0gZnMoaSk7XG4gICAgICAgIHQucmVnaXN0ZXJSZXNvbHZlcihzLkVsZW1lbnQsIHQucmVnaXN0ZXJSZXNvbHZlcihucywgbmV3IHgoXCJFbGVtZW50UmVzb2x2ZXJcIiwgbiA/IG51bGwgOiBpKSkpO1xuICAgICAgICB0LnJlZ2lzdGVyUmVzb2x2ZXIob3MsIG5ldyB4KFwiSVJlbmRlckxvY2F0aW9uXCIsIG4gPyBpIDogbnVsbCkpO1xuICAgICAgICBjb25zdCByID0gdC5pbnZva2UoZSk7XG4gICAgICAgIHQucmVnaXN0ZXJSZXNvbHZlcihlLCBuZXcgeChcImF1LWNvbXBvc2Uudmlld01vZGVsXCIsIHIpKTtcbiAgICAgICAgcmV0dXJuIHI7XG4gICAgfVxuICAgIGdldERlZih0KSB7XG4gICAgICAgIGNvbnN0IGUgPSBDdCh0KSA/IHQgOiBudWxsID09PSB0IHx8IHZvaWQgMCA9PT0gdCA/IHZvaWQgMCA6IHQuY29uc3RydWN0b3I7XG4gICAgICAgIHJldHVybiBzaS5pc1R5cGUoZSkgPyBzaS5nZXREZWZpbml0aW9uKGUpIDogbnVsbDtcbiAgICB9XG59XG5cbm90KFsgU3QgXSwgQXVDb21wb3NlLnByb3RvdHlwZSwgXCJ2aWV3XCIsIHZvaWQgMCk7XG5cbm90KFsgU3QgXSwgQXVDb21wb3NlLnByb3RvdHlwZSwgXCJ2aWV3TW9kZWxcIiwgdm9pZCAwKTtcblxub3QoWyBTdCBdLCBBdUNvbXBvc2UucHJvdG90eXBlLCBcIm1vZGVsXCIsIHZvaWQgMCk7XG5cbm90KFsgU3Qoe1xuICAgIHNldDogdCA9PiB7XG4gICAgICAgIGlmIChcInNjb3BlZFwiID09PSB0IHx8IFwiYXV0b1wiID09PSB0KSByZXR1cm4gdDtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiQVVSMDgwNVwiKTtcbiAgICB9XG59KSBdLCBBdUNvbXBvc2UucHJvdG90eXBlLCBcInNjb3BlQmVoYXZpb3JcIiwgdm9pZCAwKTtcblxuamUoXCJhdS1jb21wb3NlXCIpKEF1Q29tcG9zZSk7XG5cbmNsYXNzIEVtcHR5Q29tcG9uZW50JDEge31cblxuY2xhc3MgQ29tcG9zaXRpb25Db250ZXh0RmFjdG9yeSB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMuaWQgPSAwO1xuICAgIH1cbiAgICBpc0N1cnJlbnQodCkge1xuICAgICAgICByZXR1cm4gdC5pZCA9PT0gdGhpcy5pZDtcbiAgICB9XG4gICAgY3JlYXRlKHQpIHtcbiAgICAgICAgcmV0dXJuIEModC5sb2FkKCksICh0ID0+IG5ldyBDb21wb3NpdGlvbkNvbnRleHQoKyt0aGlzLmlkLCB0KSkpO1xuICAgIH1cbiAgICBpbnZhbGlkYXRlKCkge1xuICAgICAgICB0aGlzLmlkKys7XG4gICAgfVxufVxuXG5jbGFzcyBDaGFuZ2VJbmZvIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlLCBpLCBzKSB7XG4gICAgICAgIHRoaXMudmlldyA9IHQ7XG4gICAgICAgIHRoaXMudmlld01vZGVsID0gZTtcbiAgICAgICAgdGhpcy5tb2RlbCA9IGk7XG4gICAgICAgIHRoaXMuc3JjID0gcztcbiAgICB9XG4gICAgbG9hZCgpIHtcbiAgICAgICAgaWYgKGt0KHRoaXMudmlldykgfHwga3QodGhpcy52aWV3TW9kZWwpKSByZXR1cm4gUHJvbWlzZS5hbGwoWyB0aGlzLnZpZXcsIHRoaXMudmlld01vZGVsIF0pLnRoZW4oKChbdCwgZV0pID0+IG5ldyBMb2FkZWRDaGFuZ2VJbmZvKHQsIGUsIHRoaXMubW9kZWwsIHRoaXMuc3JjKSkpOyBlbHNlIHJldHVybiBuZXcgTG9hZGVkQ2hhbmdlSW5mbyh0aGlzLnZpZXcsIHRoaXMudmlld01vZGVsLCB0aGlzLm1vZGVsLCB0aGlzLnNyYyk7XG4gICAgfVxufVxuXG5jbGFzcyBMb2FkZWRDaGFuZ2VJbmZvIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlLCBpLCBzKSB7XG4gICAgICAgIHRoaXMudmlldyA9IHQ7XG4gICAgICAgIHRoaXMudmlld01vZGVsID0gZTtcbiAgICAgICAgdGhpcy5tb2RlbCA9IGk7XG4gICAgICAgIHRoaXMuc3JjID0gcztcbiAgICB9XG59XG5cbmNsYXNzIENvbXBvc2l0aW9uQ29udGV4dCB7XG4gICAgY29uc3RydWN0b3IodCwgZSkge1xuICAgICAgICB0aGlzLmlkID0gdDtcbiAgICAgICAgdGhpcy5jaGFuZ2UgPSBlO1xuICAgIH1cbn1cblxuY2xhc3MgQ29tcG9zaXRpb25Db250cm9sbGVyIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlLCBpLCBzLCBuKSB7XG4gICAgICAgIHRoaXMuY29udHJvbGxlciA9IHQ7XG4gICAgICAgIHRoaXMuc3RhcnQgPSBlO1xuICAgICAgICB0aGlzLnN0b3AgPSBpO1xuICAgICAgICB0aGlzLnVwZGF0ZSA9IHM7XG4gICAgICAgIHRoaXMuY29udGV4dCA9IG47XG4gICAgICAgIHRoaXMuc3RhdGUgPSAwO1xuICAgIH1cbiAgICBhY3RpdmF0ZSh0KSB7XG4gICAgICAgIGlmICgwICE9PSB0aGlzLnN0YXRlKSB0aHJvdyBuZXcgRXJyb3IoYEFVUjA4MDc6JHt0aGlzLmNvbnRyb2xsZXIubmFtZX1gKTtcbiAgICAgICAgdGhpcy5zdGF0ZSA9IDE7XG4gICAgICAgIHJldHVybiB0aGlzLnN0YXJ0KHQpO1xuICAgIH1cbiAgICBkZWFjdGl2YXRlKHQpIHtcbiAgICAgICAgc3dpdGNoICh0aGlzLnN0YXRlKSB7XG4gICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgdGhpcy5zdGF0ZSA9IC0xO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuc3RvcCh0KTtcblxuICAgICAgICAgIGNhc2UgLTE6XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJBVVIwODA4XCIpO1xuXG4gICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIHRoaXMuc3RhdGUgPSAtMTtcbiAgICAgICAgfVxuICAgIH1cbn1cblxuY2xhc3MgQXVTbG90IHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlLCBpLCBzKSB7XG4gICAgICAgIHZhciBuLCByO1xuICAgICAgICB0aGlzLk5pID0gbnVsbDtcbiAgICAgICAgdGhpcy5XaSA9IG51bGw7XG4gICAgICAgIGxldCBvO1xuICAgICAgICBjb25zdCBsID0gZS5hdVNsb3Q7XG4gICAgICAgIGNvbnN0IGggPSBudWxsID09PSAociA9IG51bGwgPT09IChuID0gaS5pbnN0cnVjdGlvbikgfHwgdm9pZCAwID09PSBuID8gdm9pZCAwIDogbi5wcm9qZWN0aW9ucykgfHwgdm9pZCAwID09PSByID8gdm9pZCAwIDogcltsLm5hbWVdO1xuICAgICAgICBpZiAobnVsbCA9PSBoKSB7XG4gICAgICAgICAgICBvID0gcy5nZXRWaWV3RmFjdG9yeShsLmZhbGxiYWNrLCBpLmNvbnRyb2xsZXIuY29udGFpbmVyKTtcbiAgICAgICAgICAgIHRoaXMuSGkgPSBmYWxzZTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIG8gPSBzLmdldFZpZXdGYWN0b3J5KGgsIGkucGFyZW50LmNvbnRyb2xsZXIuY29udGFpbmVyKTtcbiAgICAgICAgICAgIHRoaXMuSGkgPSB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuTGkgPSBpO1xuICAgICAgICB0aGlzLnZpZXcgPSBvLmNyZWF0ZSgpLnNldExvY2F0aW9uKHQpO1xuICAgIH1cbiAgICBzdGF0aWMgZ2V0IGluamVjdCgpIHtcbiAgICAgICAgcmV0dXJuIFsgb3MsIGtzLCBLaSwgUGkgXTtcbiAgICB9XG4gICAgYmluZGluZyh0LCBlLCBpKSB7XG4gICAgICAgIHZhciBzO1xuICAgICAgICB0aGlzLk5pID0gdGhpcy4kY29udHJvbGxlci5zY29wZS5wYXJlbnRTY29wZTtcbiAgICAgICAgbGV0IG47XG4gICAgICAgIGlmICh0aGlzLkhpKSB7XG4gICAgICAgICAgICBuID0gdGhpcy5MaS5jb250cm9sbGVyLnNjb3BlLnBhcmVudFNjb3BlO1xuICAgICAgICAgICAgKHRoaXMuV2kgPSBVLmZyb21QYXJlbnQobiwgbi5iaW5kaW5nQ29udGV4dCkpLm92ZXJyaWRlQ29udGV4dC4kaG9zdCA9IG51bGwgIT09IChzID0gdGhpcy5leHBvc2UpICYmIHZvaWQgMCAhPT0gcyA/IHMgOiB0aGlzLk5pLmJpbmRpbmdDb250ZXh0O1xuICAgICAgICB9XG4gICAgfVxuICAgIGF0dGFjaGluZyh0LCBlLCBpKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnZpZXcuYWN0aXZhdGUodCwgdGhpcy4kY29udHJvbGxlciwgaSwgdGhpcy5IaSA/IHRoaXMuV2kgOiB0aGlzLk5pKTtcbiAgICB9XG4gICAgZGV0YWNoaW5nKHQsIGUsIGkpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudmlldy5kZWFjdGl2YXRlKHQsIHRoaXMuJGNvbnRyb2xsZXIsIGkpO1xuICAgIH1cbiAgICBleHBvc2VDaGFuZ2VkKHQpIHtcbiAgICAgICAgaWYgKHRoaXMuSGkgJiYgbnVsbCAhPSB0aGlzLldpKSB0aGlzLldpLm92ZXJyaWRlQ29udGV4dC4kaG9zdCA9IHQ7XG4gICAgfVxuICAgIGRpc3Bvc2UoKSB7XG4gICAgICAgIHRoaXMudmlldy5kaXNwb3NlKCk7XG4gICAgICAgIHRoaXMudmlldyA9IHZvaWQgMDtcbiAgICB9XG4gICAgYWNjZXB0KHQpIHtcbiAgICAgICAgdmFyIGU7XG4gICAgICAgIGlmICh0cnVlID09PSAobnVsbCA9PT0gKGUgPSB0aGlzLnZpZXcpIHx8IHZvaWQgMCA9PT0gZSA/IHZvaWQgMCA6IGUuYWNjZXB0KHQpKSkgcmV0dXJuIHRydWU7XG4gICAgfVxufVxuXG5vdChbIFN0IF0sIEF1U2xvdC5wcm90b3R5cGUsIFwiZXhwb3NlXCIsIHZvaWQgMCk7XG5cbmplKHtcbiAgICBuYW1lOiBcImF1LXNsb3RcIixcbiAgICB0ZW1wbGF0ZTogbnVsbCxcbiAgICBjb250YWluZXJsZXNzOiB0cnVlXG59KShBdVNsb3QpO1xuXG5jb25zdCBXciA9IC88c2NyaXB0XFxiW148XSooPzooPyE8XFwvc2NyaXB0Pik8W148XSopKjxcXC9zY3JpcHQ+L2dpO1xuXG5jb25zdCBIciA9IGwuY3JlYXRlSW50ZXJmYWNlKFwiSVNhbml0aXplclwiLCAodCA9PiB0LnNpbmdsZXRvbihjbGFzcyB7XG4gICAgc2FuaXRpemUodCkge1xuICAgICAgICByZXR1cm4gdC5yZXBsYWNlKFdyLCBcIlwiKTtcbiAgICB9XG59KSkpO1xuXG5sZXQgenIgPSBjbGFzcyBTYW5pdGl6ZVZhbHVlQ29udmVydGVyIHtcbiAgICBjb25zdHJ1Y3Rvcih0KSB7XG4gICAgICAgIHRoaXMuemkgPSB0O1xuICAgIH1cbiAgICB0b1ZpZXcodCkge1xuICAgICAgICBpZiAobnVsbCA9PSB0KSByZXR1cm4gbnVsbDtcbiAgICAgICAgcmV0dXJuIHRoaXMuemkuc2FuaXRpemUodCk7XG4gICAgfVxufTtcblxuenIgPSBvdChbIGx0KDAsIEhyKSBdLCB6cik7XG5cbnJ0KFwic2FuaXRpemVcIikoenIpO1xuXG5sZXQgR3IgPSBjbGFzcyBWaWV3VmFsdWVDb252ZXJ0ZXIge1xuICAgIGNvbnN0cnVjdG9yKHQpIHtcbiAgICAgICAgdGhpcy5HaSA9IHQ7XG4gICAgfVxuICAgIHRvVmlldyh0LCBlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLkdpLmdldFZpZXdDb21wb25lbnRGb3JPYmplY3QodCwgZSk7XG4gICAgfVxufTtcblxuR3IgPSBvdChbIGx0KDAsIERpKSBdLCBHcik7XG5cbnJ0KFwidmlld1wiKShHcik7XG5cbmNvbnN0IFhyID0gRGVib3VuY2VCaW5kaW5nQmVoYXZpb3I7XG5cbmNvbnN0IEtyID0gT25lVGltZUJpbmRpbmdCZWhhdmlvcjtcblxuY29uc3QgWXIgPSBUb1ZpZXdCaW5kaW5nQmVoYXZpb3I7XG5cbmNvbnN0IFFyID0gRnJvbVZpZXdCaW5kaW5nQmVoYXZpb3I7XG5cbmNvbnN0IFpyID0gU2lnbmFsQmluZGluZ0JlaGF2aW9yO1xuXG5jb25zdCBKciA9IFRocm90dGxlQmluZGluZ0JlaGF2aW9yO1xuXG5jb25zdCB0byA9IFR3b1dheUJpbmRpbmdCZWhhdmlvcjtcblxuY29uc3QgZW8gPSBUZW1wbGF0ZUNvbXBpbGVyO1xuXG5jb25zdCBpbyA9IE5vZGVPYnNlcnZlckxvY2F0b3I7XG5cbmNvbnN0IHNvID0gWyBlbywgaW8gXTtcblxuY29uc3Qgbm8gPSBTVkdBbmFseXplcjtcblxuY29uc3Qgcm8gPSBHdDtcblxuY29uc3Qgb28gPSB6dDtcblxuY29uc3QgbG8gPSBIdDtcblxuY29uc3QgaG8gPSBXdDtcblxuY29uc3QgYW8gPSBYdDtcblxuY29uc3QgY28gPSBbIGxvLCBobywgYW8gXTtcblxuY29uc3QgdW8gPSBbIHJvLCBvbyBdO1xuXG5jb25zdCBmbyA9IHhuO1xuXG5jb25zdCBtbyA9IGJuO1xuXG5jb25zdCB2byA9IHluO1xuXG5jb25zdCBwbyA9IGduO1xuXG5jb25zdCBnbyA9IHZuO1xuXG5jb25zdCB3byA9IHBuO1xuXG5jb25zdCBibyA9IHduO1xuXG5jb25zdCB4byA9IEJuO1xuXG5jb25zdCB5byA9IGtuO1xuXG5jb25zdCBrbyA9IENuO1xuXG5jb25zdCBDbyA9IEFuO1xuXG5jb25zdCBBbyA9IFNuO1xuXG5jb25zdCBTbyA9IEVuO1xuXG5jb25zdCBSbyA9IFJuO1xuXG5jb25zdCBFbyA9IEluO1xuXG5jb25zdCBCbyA9IFsgbW8sIGdvLCBwbywgd28sIGJvLCBmbywgdm8sIHhvLCB5bywga28sIENvLCBTbywgUm8sIEFvLCBFbyBdO1xuXG5jb25zdCBJbyA9IHpyO1xuXG5jb25zdCBUbyA9IEdyO1xuXG5jb25zdCBEbyA9IEZyZXF1ZW50TXV0YXRpb25zO1xuXG5jb25zdCBQbyA9IE9ic2VydmVTaGFsbG93O1xuXG5jb25zdCBPbyA9IElmO1xuXG5jb25zdCAkbyA9IEVsc2U7XG5cbmNvbnN0IExvID0gUmVwZWF0O1xuXG5jb25zdCBxbyA9IFdpdGg7XG5cbmNvbnN0IE1vID0gRXI7XG5cbmNvbnN0IFVvID0gQnI7XG5cbmNvbnN0IEZvID0gSXI7XG5cbmNvbnN0IFZvID0gVHI7XG5cbmNvbnN0IF9vID0gRHI7XG5cbmNvbnN0IGpvID0gUHI7XG5cbmNvbnN0IE5vID0gT3I7XG5cbmNvbnN0IFdvID0gTHI7XG5cbmNvbnN0IEhvID0gcXI7XG5cbmNvbnN0IHpvID0gTXI7XG5cbmNvbnN0IEdvID0gQXR0ckJpbmRpbmdCZWhhdmlvcjtcblxuY29uc3QgWG8gPSBTZWxmQmluZGluZ0JlaGF2aW9yO1xuXG5jb25zdCBLbyA9IFVwZGF0ZVRyaWdnZXJCaW5kaW5nQmVoYXZpb3I7XG5cbmNvbnN0IFlvID0gQXVSZW5kZXI7XG5cbmNvbnN0IFFvID0gQXVDb21wb3NlO1xuXG5jb25zdCBabyA9IFBvcnRhbDtcblxuY29uc3QgSm8gPSBGb2N1cztcblxuY29uc3QgdGwgPSBicjtcblxuY29uc3QgZWwgPSBbIFhyLCBLciwgWXIsIFFyLCBaciwgSnIsIHRvLCBJbywgVG8sIERvLCBQbywgT28sICRvLCBMbywgcW8sIE1vLCBVbywgRm8sIFZvLCBfbywgam8sIE5vLCBXbywgSG8sIHpvLCBHbywgWG8sIEtvLCBZbywgUW8sIFpvLCBKbywgdGwsIEF1U2xvdCBdO1xuXG5jb25zdCBpbCA9IExzO1xuXG5jb25zdCBzbCA9IFBzO1xuXG5jb25zdCBubCA9IERzO1xuXG5jb25zdCBybCA9IE1zO1xuXG5jb25zdCBvbCA9IEZzO1xuXG5jb25zdCBsbCA9ICRzO1xuXG5jb25zdCBobCA9IFVzO1xuXG5jb25zdCBhbCA9IHFzO1xuXG5jb25zdCBjbCA9IFRzO1xuXG5jb25zdCB1bCA9IE9zO1xuXG5jb25zdCBmbCA9IFdzO1xuXG5jb25zdCBkbCA9IEtzO1xuXG5jb25zdCBtbCA9IEhzO1xuXG5jb25zdCB2bCA9IHpzO1xuXG5jb25zdCBwbCA9IEdzO1xuXG5jb25zdCBnbCA9IFhzO1xuXG5jb25zdCB3bCA9IE5zO1xuXG5jb25zdCBibCA9IFlzO1xuXG5jb25zdCB4bCA9IFsgaGwsIG9sLCBpbCwgYWwsIHJsLCBjbCwgbmwsIHNsLCB1bCwgbGwsIGZsLCBkbCwgbWwsIHZsLCBwbCwgZ2wsIHdsLCBibCBdO1xuXG5jb25zdCB5bCA9IGtsKG8pO1xuXG5mdW5jdGlvbiBrbCh0KSB7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgb3B0aW9uc1Byb3ZpZGVyOiB0LFxuICAgICAgICByZWdpc3RlcihlKSB7XG4gICAgICAgICAgICBjb25zdCBpID0ge1xuICAgICAgICAgICAgICAgIGNvZXJjaW5nT3B0aW9uczoge1xuICAgICAgICAgICAgICAgICAgICBlbmFibGVDb2VyY2lvbjogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgIGNvZXJjZU51bGxpc2g6IGZhbHNlXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHQoaSk7XG4gICAgICAgICAgICByZXR1cm4gZS5yZWdpc3RlcihjLmluc3RhbmNlKEYsIGkuY29lcmNpbmdPcHRpb25zKSwgLi4uc28sIC4uLmVsLCAuLi5jbywgLi4uQm8sIC4uLnhsKTtcbiAgICAgICAgfSxcbiAgICAgICAgY3VzdG9taXplKGUpIHtcbiAgICAgICAgICAgIHJldHVybiBrbChudWxsICE9PSBlICYmIHZvaWQgMCAhPT0gZSA/IGUgOiB0KTtcbiAgICAgICAgfVxuICAgIH07XG59XG5cbmNvbnN0IENsID0gbC5jcmVhdGVJbnRlcmZhY2UoXCJJQXVyZWxpYVwiKTtcblxuY2xhc3MgQXVyZWxpYSB7XG4gICAgY29uc3RydWN0b3IodCA9IGwuY3JlYXRlQ29udGFpbmVyKCkpIHtcbiAgICAgICAgdGhpcy5jb250YWluZXIgPSB0O1xuICAgICAgICB0aGlzLmlyID0gZmFsc2U7XG4gICAgICAgIHRoaXMuWGkgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5LaSA9IGZhbHNlO1xuICAgICAgICB0aGlzLllpID0gdm9pZCAwO1xuICAgICAgICB0aGlzLm5leHQgPSB2b2lkIDA7XG4gICAgICAgIHRoaXMuUWkgPSB2b2lkIDA7XG4gICAgICAgIHRoaXMuWmkgPSB2b2lkIDA7XG4gICAgICAgIGlmICh0LmhhcyhDbCwgdHJ1ZSkpIHRocm93IG5ldyBFcnJvcihcIkFVUjA3NjhcIik7XG4gICAgICAgIHQucmVnaXN0ZXJSZXNvbHZlcihDbCwgbmV3IHgoXCJJQXVyZWxpYVwiLCB0aGlzKSk7XG4gICAgICAgIHQucmVnaXN0ZXJSZXNvbHZlcih0cywgdGhpcy5KaSA9IG5ldyB4KFwiSUFwcFJvb3RcIikpO1xuICAgIH1cbiAgICBnZXQgaXNSdW5uaW5nKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5pcjtcbiAgICB9XG4gICAgZ2V0IGlzU3RhcnRpbmcoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLlhpO1xuICAgIH1cbiAgICBnZXQgaXNTdG9wcGluZygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuS2k7XG4gICAgfVxuICAgIGdldCByb290KCkge1xuICAgICAgICBpZiAobnVsbCA9PSB0aGlzLllpKSB7XG4gICAgICAgICAgICBpZiAobnVsbCA9PSB0aGlzLm5leHQpIHRocm93IG5ldyBFcnJvcihcIkFVUjA3NjdcIik7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5uZXh0O1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLllpO1xuICAgIH1cbiAgICByZWdpc3RlciguLi50KSB7XG4gICAgICAgIHRoaXMuY29udGFpbmVyLnJlZ2lzdGVyKC4uLnQpO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgYXBwKHQpIHtcbiAgICAgICAgdGhpcy5uZXh0ID0gbmV3IEFwcFJvb3QodCwgdGhpcy50cyh0Lmhvc3QpLCB0aGlzLmNvbnRhaW5lciwgdGhpcy5KaSk7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICBlbmhhbmNlKHQsIGUpIHtcbiAgICAgICAgdmFyIGk7XG4gICAgICAgIGNvbnN0IHMgPSBudWxsICE9PSAoaSA9IHQuY29udGFpbmVyKSAmJiB2b2lkIDAgIT09IGkgPyBpIDogdGhpcy5jb250YWluZXIuY3JlYXRlQ2hpbGQoKTtcbiAgICAgICAgY29uc3QgbiA9IHQuaG9zdDtcbiAgICAgICAgY29uc3QgciA9IHRoaXMudHMobik7XG4gICAgICAgIGNvbnN0IG8gPSB0LmNvbXBvbmVudDtcbiAgICAgICAgbGV0IGw7XG4gICAgICAgIGlmIChDdChvKSkge1xuICAgICAgICAgICAgcy5yZWdpc3RlclJlc29sdmVyKHIuSFRNTEVsZW1lbnQsIHMucmVnaXN0ZXJSZXNvbHZlcihyLkVsZW1lbnQsIHMucmVnaXN0ZXJSZXNvbHZlcihucywgbmV3IHgoXCJFbGVtZW50UmVzb2x2ZXJcIiwgbikpKSk7XG4gICAgICAgICAgICBsID0gcy5pbnZva2Uobyk7XG4gICAgICAgIH0gZWxzZSBsID0gbztcbiAgICAgICAgcy5yZWdpc3RlclJlc29sdmVyKHJzLCBuZXcgeChcIklFdmVudFRhcmdldFwiLCBuKSk7XG4gICAgICAgIGUgPSBudWxsICE9PSBlICYmIHZvaWQgMCAhPT0gZSA/IGUgOiBudWxsO1xuICAgICAgICBjb25zdCBoID0gQ29udHJvbGxlci4kZWwocywgbCwgbiwgbnVsbCwgQ3VzdG9tRWxlbWVudERlZmluaXRpb24uY3JlYXRlKHtcbiAgICAgICAgICAgIG5hbWU6IHNpLmdlbmVyYXRlTmFtZSgpLFxuICAgICAgICAgICAgdGVtcGxhdGU6IG4sXG4gICAgICAgICAgICBlbmhhbmNlOiB0cnVlXG4gICAgICAgIH0pKTtcbiAgICAgICAgcmV0dXJuIEMoaC5hY3RpdmF0ZShoLCBlLCAyKSwgKCgpID0+IGgpKTtcbiAgICB9XG4gICAgYXN5bmMgd2FpdEZvcklkbGUoKSB7XG4gICAgICAgIGNvbnN0IHQgPSB0aGlzLnJvb3QucGxhdGZvcm07XG4gICAgICAgIGF3YWl0IHQuZG9tV3JpdGVRdWV1ZS55aWVsZCgpO1xuICAgICAgICBhd2FpdCB0LmRvbVJlYWRRdWV1ZS55aWVsZCgpO1xuICAgICAgICBhd2FpdCB0LnRhc2tRdWV1ZS55aWVsZCgpO1xuICAgIH1cbiAgICB0cyhlKSB7XG4gICAgICAgIGxldCBpO1xuICAgICAgICBpZiAoIXRoaXMuY29udGFpbmVyLmhhcyhLdCwgZmFsc2UpKSB7XG4gICAgICAgICAgICBpZiAobnVsbCA9PT0gZS5vd25lckRvY3VtZW50LmRlZmF1bHRWaWV3KSB0aHJvdyBuZXcgRXJyb3IoXCJBVVIwNzY5XCIpO1xuICAgICAgICAgICAgaSA9IG5ldyB0KGUub3duZXJEb2N1bWVudC5kZWZhdWx0Vmlldyk7XG4gICAgICAgICAgICB0aGlzLmNvbnRhaW5lci5yZWdpc3RlcihjLmluc3RhbmNlKEt0LCBpKSk7XG4gICAgICAgIH0gZWxzZSBpID0gdGhpcy5jb250YWluZXIuZ2V0KEt0KTtcbiAgICAgICAgcmV0dXJuIGk7XG4gICAgfVxuICAgIHN0YXJ0KHQgPSB0aGlzLm5leHQpIHtcbiAgICAgICAgaWYgKG51bGwgPT0gdCkgdGhyb3cgbmV3IEVycm9yKFwiQVVSMDc3MFwiKTtcbiAgICAgICAgaWYgKHRoaXMuUWkgaW5zdGFuY2VvZiBQcm9taXNlKSByZXR1cm4gdGhpcy5RaTtcbiAgICAgICAgcmV0dXJuIHRoaXMuUWkgPSBDKHRoaXMuc3RvcCgpLCAoKCkgPT4ge1xuICAgICAgICAgICAgUmVmbGVjdC5zZXQodC5ob3N0LCBcIiRhdXJlbGlhXCIsIHRoaXMpO1xuICAgICAgICAgICAgdGhpcy5KaS5wcmVwYXJlKHRoaXMuWWkgPSB0KTtcbiAgICAgICAgICAgIHRoaXMuWGkgPSB0cnVlO1xuICAgICAgICAgICAgcmV0dXJuIEModC5hY3RpdmF0ZSgpLCAoKCkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuaXIgPSB0cnVlO1xuICAgICAgICAgICAgICAgIHRoaXMuWGkgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICB0aGlzLlFpID0gdm9pZCAwO1xuICAgICAgICAgICAgICAgIHRoaXMuZXModCwgXCJhdS1zdGFydGVkXCIsIHQuaG9zdCk7XG4gICAgICAgICAgICB9KSk7XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgc3RvcCh0ID0gZmFsc2UpIHtcbiAgICAgICAgaWYgKHRoaXMuWmkgaW5zdGFuY2VvZiBQcm9taXNlKSByZXR1cm4gdGhpcy5aaTtcbiAgICAgICAgaWYgKHRydWUgPT09IHRoaXMuaXIpIHtcbiAgICAgICAgICAgIGNvbnN0IGUgPSB0aGlzLllpO1xuICAgICAgICAgICAgdGhpcy5pciA9IGZhbHNlO1xuICAgICAgICAgICAgdGhpcy5LaSA9IHRydWU7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5aaSA9IEMoZS5kZWFjdGl2YXRlKCksICgoKSA9PiB7XG4gICAgICAgICAgICAgICAgUmVmbGVjdC5kZWxldGVQcm9wZXJ0eShlLmhvc3QsIFwiJGF1cmVsaWFcIik7XG4gICAgICAgICAgICAgICAgaWYgKHQpIGUuZGlzcG9zZSgpO1xuICAgICAgICAgICAgICAgIHRoaXMuWWkgPSB2b2lkIDA7XG4gICAgICAgICAgICAgICAgdGhpcy5KaS5kaXNwb3NlKCk7XG4gICAgICAgICAgICAgICAgdGhpcy5LaSA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIHRoaXMuZXMoZSwgXCJhdS1zdG9wcGVkXCIsIGUuaG9zdCk7XG4gICAgICAgICAgICB9KSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZGlzcG9zZSgpIHtcbiAgICAgICAgaWYgKHRoaXMuaXIgfHwgdGhpcy5LaSkgdGhyb3cgbmV3IEVycm9yKFwiQVVSMDc3MVwiKTtcbiAgICAgICAgdGhpcy5jb250YWluZXIuZGlzcG9zZSgpO1xuICAgIH1cbiAgICBlcyh0LCBlLCBpKSB7XG4gICAgICAgIGNvbnN0IHMgPSBuZXcgdC5wbGF0Zm9ybS53aW5kb3cuQ3VzdG9tRXZlbnQoZSwge1xuICAgICAgICAgICAgZGV0YWlsOiB0aGlzLFxuICAgICAgICAgICAgYnViYmxlczogdHJ1ZSxcbiAgICAgICAgICAgIGNhbmNlbGFibGU6IHRydWVcbiAgICAgICAgfSk7XG4gICAgICAgIGkuZGlzcGF0Y2hFdmVudChzKTtcbiAgICB9XG59XG5cbnZhciBBbDtcblxuKGZ1bmN0aW9uKHQpIHtcbiAgICB0W3RbXCJFbGVtZW50XCJdID0gMV0gPSBcIkVsZW1lbnRcIjtcbiAgICB0W3RbXCJBdHRyaWJ1dGVcIl0gPSAyXSA9IFwiQXR0cmlidXRlXCI7XG59KShBbCB8fCAoQWwgPSB7fSkpO1xuXG5jb25zdCBTbCA9IGwuY3JlYXRlSW50ZXJmYWNlKFwiSURpYWxvZ1NlcnZpY2VcIik7XG5cbmNvbnN0IFJsID0gbC5jcmVhdGVJbnRlcmZhY2UoXCJJRGlhbG9nQ29udHJvbGxlclwiKTtcblxuY29uc3QgRWwgPSBsLmNyZWF0ZUludGVyZmFjZShcIklEaWFsb2dEb21SZW5kZXJlclwiKTtcblxuY29uc3QgQmwgPSBsLmNyZWF0ZUludGVyZmFjZShcIklEaWFsb2dEb21cIik7XG5cbmNvbnN0IElsID0gbC5jcmVhdGVJbnRlcmZhY2UoXCJJRGlhbG9nR2xvYmFsU2V0dGluZ3NcIik7XG5cbmNsYXNzIERpYWxvZ09wZW5SZXN1bHQge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUpIHtcbiAgICAgICAgdGhpcy53YXNDYW5jZWxsZWQgPSB0O1xuICAgICAgICB0aGlzLmRpYWxvZyA9IGU7XG4gICAgfVxuICAgIHN0YXRpYyBjcmVhdGUodCwgZSkge1xuICAgICAgICByZXR1cm4gbmV3IERpYWxvZ09wZW5SZXN1bHQodCwgZSk7XG4gICAgfVxufVxuXG5jbGFzcyBEaWFsb2dDbG9zZVJlc3VsdCB7XG4gICAgY29uc3RydWN0b3IodCwgZSkge1xuICAgICAgICB0aGlzLnN0YXR1cyA9IHQ7XG4gICAgICAgIHRoaXMudmFsdWUgPSBlO1xuICAgIH1cbiAgICBzdGF0aWMgY3JlYXRlKHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBEaWFsb2dDbG9zZVJlc3VsdCh0LCBlKTtcbiAgICB9XG59XG5cbnZhciBUbDtcblxuKGZ1bmN0aW9uKHQpIHtcbiAgICB0W1wiT2tcIl0gPSBcIm9rXCI7XG4gICAgdFtcIkVycm9yXCJdID0gXCJlcnJvclwiO1xuICAgIHRbXCJDYW5jZWxcIl0gPSBcImNhbmNlbFwiO1xuICAgIHRbXCJBYm9ydFwiXSA9IFwiYWJvcnRcIjtcbn0pKFRsIHx8IChUbCA9IHt9KSk7XG5cbmNsYXNzIERpYWxvZ0NvbnRyb2xsZXIge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUpIHtcbiAgICAgICAgdGhpcy5wID0gdDtcbiAgICAgICAgdGhpcy5jdG4gPSBlO1xuICAgICAgICB0aGlzLmNsb3NlZCA9IG5ldyBQcm9taXNlKCgodCwgZSkgPT4ge1xuICAgICAgICAgICAgdGhpcy4kdCA9IHQ7XG4gICAgICAgICAgICB0aGlzLkJ0ID0gZTtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICBzdGF0aWMgZ2V0IGluamVjdCgpIHtcbiAgICAgICAgcmV0dXJuIFsgS3QsIGcgXTtcbiAgICB9XG4gICAgYWN0aXZhdGUodCkge1xuICAgICAgICB2YXIgZTtcbiAgICAgICAgY29uc3QgaSA9IHRoaXMuY3RuLmNyZWF0ZUNoaWxkKCk7XG4gICAgICAgIGNvbnN0IHttb2RlbDogcywgdGVtcGxhdGU6IG4sIHJlamVjdE9uQ2FuY2VsOiByfSA9IHQ7XG4gICAgICAgIGNvbnN0IG8gPSBpLmdldChFbCk7XG4gICAgICAgIGNvbnN0IGwgPSBudWxsICE9PSAoZSA9IHQuaG9zdCkgJiYgdm9pZCAwICE9PSBlID8gZSA6IHRoaXMucC5kb2N1bWVudC5ib2R5O1xuICAgICAgICBjb25zdCBoID0gdGhpcy5kb20gPSBvLnJlbmRlcihsLCB0KTtcbiAgICAgICAgY29uc3QgYSA9IGkuaGFzKHJzLCB0cnVlKSA/IGkuZ2V0KHJzKSA6IG51bGw7XG4gICAgICAgIGNvbnN0IHUgPSBoLmNvbnRlbnRIb3N0O1xuICAgICAgICB0aGlzLnNldHRpbmdzID0gdDtcbiAgICAgICAgaWYgKG51bGwgPT0gYSB8fCAhYS5jb250YWlucyhsKSkgaS5yZWdpc3RlcihjLmluc3RhbmNlKHJzLCBsKSk7XG4gICAgICAgIGkucmVnaXN0ZXIoYy5pbnN0YW5jZShucywgdSksIGMuaW5zdGFuY2UoQmwsIGgpKTtcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChlID0+IHtcbiAgICAgICAgICAgIHZhciBuLCByO1xuICAgICAgICAgICAgY29uc3QgbyA9IE9iamVjdC5hc3NpZ24odGhpcy5jbXAgPSB0aGlzLmdldE9yQ3JlYXRlVm0oaSwgdCwgdSksIHtcbiAgICAgICAgICAgICAgICAkZGlhbG9nOiB0aGlzXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGUobnVsbCAhPT0gKHIgPSBudWxsID09PSAobiA9IG8uY2FuQWN0aXZhdGUpIHx8IHZvaWQgMCA9PT0gbiA/IHZvaWQgMCA6IG4uY2FsbChvLCBzKSkgJiYgdm9pZCAwICE9PSByID8gciA6IHRydWUpO1xuICAgICAgICB9KSkudGhlbigoZSA9PiB7XG4gICAgICAgICAgICB2YXIgbztcbiAgICAgICAgICAgIGlmICh0cnVlICE9PSBlKSB7XG4gICAgICAgICAgICAgICAgaC5kaXNwb3NlKCk7XG4gICAgICAgICAgICAgICAgaWYgKHIpIHRocm93IERsKG51bGwsIFwiRGlhbG9nIGFjdGl2YXRpb24gcmVqZWN0ZWRcIik7XG4gICAgICAgICAgICAgICAgcmV0dXJuIERpYWxvZ09wZW5SZXN1bHQuY3JlYXRlKHRydWUsIHRoaXMpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgbCA9IHRoaXMuY21wO1xuICAgICAgICAgICAgcmV0dXJuIEMobnVsbCA9PT0gKG8gPSBsLmFjdGl2YXRlKSB8fCB2b2lkIDAgPT09IG8gPyB2b2lkIDAgOiBvLmNhbGwobCwgcyksICgoKSA9PiB7XG4gICAgICAgICAgICAgICAgdmFyIGU7XG4gICAgICAgICAgICAgICAgY29uc3QgcyA9IHRoaXMuY29udHJvbGxlciA9IENvbnRyb2xsZXIuJGVsKGksIGwsIHUsIG51bGwsIEN1c3RvbUVsZW1lbnREZWZpbml0aW9uLmNyZWF0ZShudWxsICE9PSAoZSA9IHRoaXMuZ2V0RGVmaW5pdGlvbihsKSkgJiYgdm9pZCAwICE9PSBlID8gZSA6IHtcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogc2kuZ2VuZXJhdGVOYW1lKCksXG4gICAgICAgICAgICAgICAgICAgIHRlbXBsYXRlOiBuXG4gICAgICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgICAgIHJldHVybiBDKHMuYWN0aXZhdGUocywgbnVsbCwgMiksICgoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBlO1xuICAgICAgICAgICAgICAgICAgICBoLm92ZXJsYXkuYWRkRXZlbnRMaXN0ZW5lcihudWxsICE9PSAoZSA9IHQubW91c2VFdmVudCkgJiYgdm9pZCAwICE9PSBlID8gZSA6IFwiY2xpY2tcIiwgdGhpcyk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBEaWFsb2dPcGVuUmVzdWx0LmNyZWF0ZShmYWxzZSwgdGhpcyk7XG4gICAgICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgfSkpO1xuICAgICAgICB9KSwgKHQgPT4ge1xuICAgICAgICAgICAgaC5kaXNwb3NlKCk7XG4gICAgICAgICAgICB0aHJvdyB0O1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIGRlYWN0aXZhdGUodCwgZSkge1xuICAgICAgICBpZiAodGhpcy5zcykgcmV0dXJuIHRoaXMuc3M7XG4gICAgICAgIGxldCBpID0gdHJ1ZTtcbiAgICAgICAgY29uc3Qge2NvbnRyb2xsZXI6IHMsIGRvbTogbiwgY21wOiByLCBzZXR0aW5nczoge21vdXNlRXZlbnQ6IG8sIHJlamVjdE9uQ2FuY2VsOiBsfX0gPSB0aGlzO1xuICAgICAgICBjb25zdCBoID0gRGlhbG9nQ2xvc2VSZXN1bHQuY3JlYXRlKHQsIGUpO1xuICAgICAgICBjb25zdCBhID0gbmV3IFByb21pc2UoKGEgPT4ge1xuICAgICAgICAgICAgdmFyIGMsIHU7XG4gICAgICAgICAgICBhKEMobnVsbCAhPT0gKHUgPSBudWxsID09PSAoYyA9IHIuY2FuRGVhY3RpdmF0ZSkgfHwgdm9pZCAwID09PSBjID8gdm9pZCAwIDogYy5jYWxsKHIsIGgpKSAmJiB2b2lkIDAgIT09IHUgPyB1IDogdHJ1ZSwgKGEgPT4ge1xuICAgICAgICAgICAgICAgIHZhciBjO1xuICAgICAgICAgICAgICAgIGlmICh0cnVlICE9PSBhKSB7XG4gICAgICAgICAgICAgICAgICAgIGkgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zcyA9IHZvaWQgMDtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGwpIHRocm93IERsKG51bGwsIFwiRGlhbG9nIGNhbmNlbGxhdGlvbiByZWplY3RlZFwiKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIERpYWxvZ0Nsb3NlUmVzdWx0LmNyZWF0ZShcImFib3J0XCIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gQyhudWxsID09PSAoYyA9IHIuZGVhY3RpdmF0ZSkgfHwgdm9pZCAwID09PSBjID8gdm9pZCAwIDogYy5jYWxsKHIsIGgpLCAoKCkgPT4gQyhzLmRlYWN0aXZhdGUocywgbnVsbCwgNCksICgoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIG4uZGlzcG9zZSgpO1xuICAgICAgICAgICAgICAgICAgICBuLm92ZXJsYXkucmVtb3ZlRXZlbnRMaXN0ZW5lcihudWxsICE9PSBvICYmIHZvaWQgMCAhPT0gbyA/IG8gOiBcImNsaWNrXCIsIHRoaXMpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoIWwgJiYgXCJlcnJvclwiICE9PSB0KSB0aGlzLiR0KGgpOyBlbHNlIHRoaXMuQnQoRGwoZSwgXCJEaWFsb2cgY2FuY2VsbGVkIHdpdGggYSByZWplY3Rpb24gb24gY2FuY2VsXCIpKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGg7XG4gICAgICAgICAgICAgICAgfSkpKSk7XG4gICAgICAgICAgICB9KSkpO1xuICAgICAgICB9KSkuY2F0Y2goKHQgPT4ge1xuICAgICAgICAgICAgdGhpcy5zcyA9IHZvaWQgMDtcbiAgICAgICAgICAgIHRocm93IHQ7XG4gICAgICAgIH0pKTtcbiAgICAgICAgdGhpcy5zcyA9IGkgPyBhIDogdm9pZCAwO1xuICAgICAgICByZXR1cm4gYTtcbiAgICB9XG4gICAgb2sodCkge1xuICAgICAgICByZXR1cm4gdGhpcy5kZWFjdGl2YXRlKFwib2tcIiwgdCk7XG4gICAgfVxuICAgIGNhbmNlbCh0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLmRlYWN0aXZhdGUoXCJjYW5jZWxcIiwgdCk7XG4gICAgfVxuICAgIGVycm9yKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IFBsKHQpO1xuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoKHQgPT4ge1xuICAgICAgICAgICAgdmFyIGksIHM7XG4gICAgICAgICAgICByZXR1cm4gdChDKG51bGwgPT09IChzID0gKGkgPSB0aGlzLmNtcCkuZGVhY3RpdmF0ZSkgfHwgdm9pZCAwID09PSBzID8gdm9pZCAwIDogcy5jYWxsKGksIERpYWxvZ0Nsb3NlUmVzdWx0LmNyZWF0ZShcImVycm9yXCIsIGUpKSwgKCgpID0+IEModGhpcy5jb250cm9sbGVyLmRlYWN0aXZhdGUodGhpcy5jb250cm9sbGVyLCBudWxsLCA0KSwgKCgpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLmRvbS5kaXNwb3NlKCk7XG4gICAgICAgICAgICAgICAgdGhpcy5CdChlKTtcbiAgICAgICAgICAgIH0pKSkpKTtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICBoYW5kbGVFdmVudCh0KSB7XG4gICAgICAgIGlmICh0aGlzLnNldHRpbmdzLm92ZXJsYXlEaXNtaXNzICYmICF0aGlzLmRvbS5jb250ZW50SG9zdC5jb250YWlucyh0LnRhcmdldCkpIHRoaXMuY2FuY2VsKCk7XG4gICAgfVxuICAgIGdldE9yQ3JlYXRlVm0odCwgZSwgaSkge1xuICAgICAgICBjb25zdCBzID0gZS5jb21wb25lbnQ7XG4gICAgICAgIGlmIChudWxsID09IHMpIHJldHVybiBuZXcgRW1wdHlDb21wb25lbnQ7XG4gICAgICAgIGlmIChcIm9iamVjdFwiID09PSB0eXBlb2YgcykgcmV0dXJuIHM7XG4gICAgICAgIGNvbnN0IG4gPSB0aGlzLnA7XG4gICAgICAgIHQucmVnaXN0ZXJSZXNvbHZlcihuLkhUTUxFbGVtZW50LCB0LnJlZ2lzdGVyUmVzb2x2ZXIobi5FbGVtZW50LCB0LnJlZ2lzdGVyUmVzb2x2ZXIobnMsIG5ldyB4KFwiRWxlbWVudFJlc29sdmVyXCIsIGkpKSkpO1xuICAgICAgICByZXR1cm4gdC5pbnZva2Uocyk7XG4gICAgfVxuICAgIGdldERlZmluaXRpb24odCkge1xuICAgICAgICBjb25zdCBlID0gQ3QodCkgPyB0IDogbnVsbCA9PT0gdCB8fCB2b2lkIDAgPT09IHQgPyB2b2lkIDAgOiB0LmNvbnN0cnVjdG9yO1xuICAgICAgICByZXR1cm4gc2kuaXNUeXBlKGUpID8gc2kuZ2V0RGVmaW5pdGlvbihlKSA6IG51bGw7XG4gICAgfVxufVxuXG5jbGFzcyBFbXB0eUNvbXBvbmVudCB7fVxuXG5mdW5jdGlvbiBEbCh0LCBlKSB7XG4gICAgY29uc3QgaSA9IG5ldyBFcnJvcihlKTtcbiAgICBpLndhc0NhbmNlbGxlZCA9IHRydWU7XG4gICAgaS52YWx1ZSA9IHQ7XG4gICAgcmV0dXJuIGk7XG59XG5cbmZ1bmN0aW9uIFBsKHQpIHtcbiAgICBjb25zdCBlID0gbmV3IEVycm9yO1xuICAgIGUud2FzQ2FuY2VsbGVkID0gZmFsc2U7XG4gICAgZS52YWx1ZSA9IHQ7XG4gICAgcmV0dXJuIGU7XG59XG5cbmNsYXNzIERpYWxvZ1NlcnZpY2Uge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUsIGkpIHtcbiAgICAgICAgdGhpcy51dCA9IHQ7XG4gICAgICAgIHRoaXMucCA9IGU7XG4gICAgICAgIHRoaXMub3MgPSBpO1xuICAgICAgICB0aGlzLmRsZ3MgPSBbXTtcbiAgICB9XG4gICAgZ2V0IGNvbnRyb2xsZXJzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5kbGdzLnNsaWNlKDApO1xuICAgIH1cbiAgICBnZXQgdG9wKCkge1xuICAgICAgICBjb25zdCB0ID0gdGhpcy5kbGdzO1xuICAgICAgICByZXR1cm4gdC5sZW5ndGggPiAwID8gdFt0Lmxlbmd0aCAtIDFdIDogbnVsbDtcbiAgICB9XG4gICAgc3RhdGljIGdldCBpbmplY3QoKSB7XG4gICAgICAgIHJldHVybiBbIGcsIEt0LCBJbCBdO1xuICAgIH1cbiAgICBzdGF0aWMgcmVnaXN0ZXIodCkge1xuICAgICAgICB0LnJlZ2lzdGVyKGMuc2luZ2xldG9uKFNsLCB0aGlzKSwgeGUuYmVmb3JlRGVhY3RpdmF0ZShTbCwgKHQgPT4gQyh0LmNsb3NlQWxsKCksICh0ID0+IHtcbiAgICAgICAgICAgIGlmICh0Lmxlbmd0aCA+IDApIHRocm93IG5ldyBFcnJvcihgQVVSMDkwMToke3QubGVuZ3RofWApO1xuICAgICAgICB9KSkpKSk7XG4gICAgfVxuICAgIG9wZW4odCkge1xuICAgICAgICByZXR1cm4gJGwobmV3IFByb21pc2UoKGUgPT4ge1xuICAgICAgICAgICAgdmFyIGk7XG4gICAgICAgICAgICBjb25zdCBzID0gRGlhbG9nU2V0dGluZ3MuZnJvbSh0aGlzLm9zLCB0KTtcbiAgICAgICAgICAgIGNvbnN0IG4gPSBudWxsICE9PSAoaSA9IHMuY29udGFpbmVyKSAmJiB2b2lkIDAgIT09IGkgPyBpIDogdGhpcy51dC5jcmVhdGVDaGlsZCgpO1xuICAgICAgICAgICAgZShDKHMubG9hZCgpLCAodCA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgZSA9IG4uaW52b2tlKERpYWxvZ0NvbnRyb2xsZXIpO1xuICAgICAgICAgICAgICAgIG4ucmVnaXN0ZXIoYy5pbnN0YW5jZShSbCwgZSkpO1xuICAgICAgICAgICAgICAgIG4ucmVnaXN0ZXIoYy5jYWxsYmFjayhEaWFsb2dDb250cm9sbGVyLCAoKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJBVVIwOTAyXCIpO1xuICAgICAgICAgICAgICAgIH0pKSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIEMoZS5hY3RpdmF0ZSh0KSwgKHQgPT4ge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIXQud2FzQ2FuY2VsbGVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoMSA9PT0gdGhpcy5kbGdzLnB1c2goZSkpIHRoaXMucC53aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgdGhpcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0ID0gKCkgPT4gdGhpcy5yZW1vdmUoZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBlLmNsb3NlZC50aGVuKHQsIHQpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0O1xuICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgIH0pKSk7XG4gICAgICAgIH0pKSk7XG4gICAgfVxuICAgIGNsb3NlQWxsKCkge1xuICAgICAgICByZXR1cm4gUHJvbWlzZS5hbGwoQXJyYXkuZnJvbSh0aGlzLmRsZ3MpLm1hcCgodCA9PiB7XG4gICAgICAgICAgICBpZiAodC5zZXR0aW5ncy5yZWplY3RPbkNhbmNlbCkgcmV0dXJuIHQuY2FuY2VsKCkudGhlbigoKCkgPT4gbnVsbCkpO1xuICAgICAgICAgICAgcmV0dXJuIHQuY2FuY2VsKCkudGhlbigoZSA9PiBcImNhbmNlbFwiID09PSBlLnN0YXR1cyA/IG51bGwgOiB0KSk7XG4gICAgICAgIH0pKSkudGhlbigodCA9PiB0LmZpbHRlcigodCA9PiAhIXQpKSkpO1xuICAgIH1cbiAgICByZW1vdmUodCkge1xuICAgICAgICBjb25zdCBlID0gdGhpcy5kbGdzO1xuICAgICAgICBjb25zdCBpID0gZS5pbmRleE9mKHQpO1xuICAgICAgICBpZiAoaSA+IC0xKSB0aGlzLmRsZ3Muc3BsaWNlKGksIDEpO1xuICAgICAgICBpZiAoMCA9PT0gZS5sZW5ndGgpIHRoaXMucC53aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgdGhpcyk7XG4gICAgfVxuICAgIGhhbmRsZUV2ZW50KHQpIHtcbiAgICAgICAgY29uc3QgZSA9IHQ7XG4gICAgICAgIGNvbnN0IGkgPSBMbChlKTtcbiAgICAgICAgaWYgKG51bGwgPT0gaSkgcmV0dXJuO1xuICAgICAgICBjb25zdCBzID0gdGhpcy50b3A7XG4gICAgICAgIGlmIChudWxsID09PSBzIHx8IDAgPT09IHMuc2V0dGluZ3Mua2V5Ym9hcmQubGVuZ3RoKSByZXR1cm47XG4gICAgICAgIGNvbnN0IG4gPSBzLnNldHRpbmdzLmtleWJvYXJkO1xuICAgICAgICBpZiAoXCJFc2NhcGVcIiA9PT0gaSAmJiBuLmluY2x1ZGVzKGkpKSB2b2lkIHMuY2FuY2VsKCk7IGVsc2UgaWYgKFwiRW50ZXJcIiA9PT0gaSAmJiBuLmluY2x1ZGVzKGkpKSB2b2lkIHMub2soKTtcbiAgICB9XG59XG5cbmNsYXNzIERpYWxvZ1NldHRpbmdzIHtcbiAgICBzdGF0aWMgZnJvbSguLi50KSB7XG4gICAgICAgIHJldHVybiBPYmplY3QuYXNzaWduKG5ldyBEaWFsb2dTZXR0aW5ncywgLi4udCkuY3MoKS5scygpO1xuICAgIH1cbiAgICBsb2FkKCkge1xuICAgICAgICBjb25zdCB0ID0gdGhpcztcbiAgICAgICAgY29uc3QgZSA9IHRoaXMuY29tcG9uZW50O1xuICAgICAgICBjb25zdCBpID0gdGhpcy50ZW1wbGF0ZTtcbiAgICAgICAgY29uc3QgcyA9IEEobnVsbCA9PSBlID8gdm9pZCAwIDogQyhlKCksIChlID0+IHtcbiAgICAgICAgICAgIHQuY29tcG9uZW50ID0gZTtcbiAgICAgICAgfSkpLCBDdChpKSA/IEMoaSgpLCAoZSA9PiB7XG4gICAgICAgICAgICB0LnRlbXBsYXRlID0gZTtcbiAgICAgICAgfSkpIDogdm9pZCAwKTtcbiAgICAgICAgcmV0dXJuIHMgaW5zdGFuY2VvZiBQcm9taXNlID8gcy50aGVuKCgoKSA9PiB0KSkgOiB0O1xuICAgIH1cbiAgICBjcygpIHtcbiAgICAgICAgaWYgKG51bGwgPT0gdGhpcy5jb21wb25lbnQgJiYgbnVsbCA9PSB0aGlzLnRlbXBsYXRlKSB0aHJvdyBuZXcgRXJyb3IoXCJBVVIwOTAzXCIpO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgbHMoKSB7XG4gICAgICAgIGlmIChudWxsID09IHRoaXMua2V5Ym9hcmQpIHRoaXMua2V5Ym9hcmQgPSB0aGlzLmxvY2sgPyBbXSA6IFsgXCJFbnRlclwiLCBcIkVzY2FwZVwiIF07XG4gICAgICAgIGlmIChcImJvb2xlYW5cIiAhPT0gdHlwZW9mIHRoaXMub3ZlcmxheURpc21pc3MpIHRoaXMub3ZlcmxheURpc21pc3MgPSAhdGhpcy5sb2NrO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG59XG5cbmZ1bmN0aW9uIE9sKHQsIGUpIHtcbiAgICByZXR1cm4gdGhpcy50aGVuKChpID0+IGkuZGlhbG9nLmNsb3NlZC50aGVuKHQsIGUpKSwgZSk7XG59XG5cbmZ1bmN0aW9uICRsKHQpIHtcbiAgICB0LndoZW5DbG9zZWQgPSBPbDtcbiAgICByZXR1cm4gdDtcbn1cblxuZnVuY3Rpb24gTGwodCkge1xuICAgIGlmIChcIkVzY2FwZVwiID09PSAodC5jb2RlIHx8IHQua2V5KSB8fCAyNyA9PT0gdC5rZXlDb2RlKSByZXR1cm4gXCJFc2NhcGVcIjtcbiAgICBpZiAoXCJFbnRlclwiID09PSAodC5jb2RlIHx8IHQua2V5KSB8fCAxMyA9PT0gdC5rZXlDb2RlKSByZXR1cm4gXCJFbnRlclwiO1xuICAgIHJldHVybjtcbn1cblxuY2xhc3MgRGVmYXVsdERpYWxvZ0dsb2JhbFNldHRpbmdzIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgdGhpcy5sb2NrID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5zdGFydGluZ1pJbmRleCA9IDFlMztcbiAgICAgICAgdGhpcy5yZWplY3RPbkNhbmNlbCA9IGZhbHNlO1xuICAgIH1cbiAgICBzdGF0aWMgcmVnaXN0ZXIodCkge1xuICAgICAgICBjLnNpbmdsZXRvbihJbCwgdGhpcykucmVnaXN0ZXIodCk7XG4gICAgfVxufVxuXG5jb25zdCBxbCA9IFwicG9zaXRpb246YWJzb2x1dGU7d2lkdGg6MTAwJTtoZWlnaHQ6MTAwJTt0b3A6MDtsZWZ0OjA7XCI7XG5cbmNsYXNzIERlZmF1bHREaWFsb2dEb21SZW5kZXJlciB7XG4gICAgY29uc3RydWN0b3IodCkge1xuICAgICAgICB0aGlzLnAgPSB0O1xuICAgICAgICB0aGlzLndyYXBwZXJDc3MgPSBgJHtxbH0gZGlzcGxheTpmbGV4O2A7XG4gICAgICAgIHRoaXMub3ZlcmxheUNzcyA9IHFsO1xuICAgICAgICB0aGlzLmhvc3RDc3MgPSBcInBvc2l0aW9uOnJlbGF0aXZlO21hcmdpbjphdXRvO1wiO1xuICAgIH1cbiAgICBzdGF0aWMgcmVnaXN0ZXIodCkge1xuICAgICAgICBjLnNpbmdsZXRvbihFbCwgdGhpcykucmVnaXN0ZXIodCk7XG4gICAgfVxuICAgIHJlbmRlcih0KSB7XG4gICAgICAgIGNvbnN0IGUgPSB0aGlzLnAuZG9jdW1lbnQ7XG4gICAgICAgIGNvbnN0IGkgPSAodCwgaSkgPT4ge1xuICAgICAgICAgICAgY29uc3QgcyA9IGUuY3JlYXRlRWxlbWVudCh0KTtcbiAgICAgICAgICAgIHMuc3R5bGUuY3NzVGV4dCA9IGk7XG4gICAgICAgICAgICByZXR1cm4gcztcbiAgICAgICAgfTtcbiAgICAgICAgY29uc3QgcyA9IHQuYXBwZW5kQ2hpbGQoaShcImF1LWRpYWxvZy1jb250YWluZXJcIiwgdGhpcy53cmFwcGVyQ3NzKSk7XG4gICAgICAgIGNvbnN0IG4gPSBzLmFwcGVuZENoaWxkKGkoXCJhdS1kaWFsb2ctb3ZlcmxheVwiLCB0aGlzLm92ZXJsYXlDc3MpKTtcbiAgICAgICAgY29uc3QgciA9IHMuYXBwZW5kQ2hpbGQoaShcImRpdlwiLCB0aGlzLmhvc3RDc3MpKTtcbiAgICAgICAgcmV0dXJuIG5ldyBEZWZhdWx0RGlhbG9nRG9tKHMsIG4sIHIpO1xuICAgIH1cbn1cblxuRGVmYXVsdERpYWxvZ0RvbVJlbmRlcmVyLmluamVjdCA9IFsgS3QgXTtcblxuY2xhc3MgRGVmYXVsdERpYWxvZ0RvbSB7XG4gICAgY29uc3RydWN0b3IodCwgZSwgaSkge1xuICAgICAgICB0aGlzLndyYXBwZXIgPSB0O1xuICAgICAgICB0aGlzLm92ZXJsYXkgPSBlO1xuICAgICAgICB0aGlzLmNvbnRlbnRIb3N0ID0gaTtcbiAgICB9XG4gICAgZGlzcG9zZSgpIHtcbiAgICAgICAgdGhpcy53cmFwcGVyLnJlbW92ZSgpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gTWwodCwgZSkge1xuICAgIHJldHVybiB7XG4gICAgICAgIHNldHRpbmdzUHJvdmlkZXI6IHQsXG4gICAgICAgIHJlZ2lzdGVyOiBpID0+IGkucmVnaXN0ZXIoLi4uZSwgeGUuYmVmb3JlQ3JlYXRlKCgoKSA9PiB0KGkuZ2V0KElsKSkpKSksXG4gICAgICAgIGN1c3RvbWl6ZSh0LCBpKSB7XG4gICAgICAgICAgICByZXR1cm4gTWwodCwgbnVsbCAhPT0gaSAmJiB2b2lkIDAgIT09IGkgPyBpIDogZSk7XG4gICAgICAgIH1cbiAgICB9O1xufVxuXG5jb25zdCBVbCA9IE1sKCgoKSA9PiB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFwiQVVSMDkwNFwiKTtcbn0pLCBbIGNsYXNzIE5vb3BEaWFsb2dHbG9iYWxTZXR0aW5ncyB7XG4gICAgc3RhdGljIHJlZ2lzdGVyKHQpIHtcbiAgICAgICAgdC5yZWdpc3RlcihjLnNpbmdsZXRvbihJbCwgdGhpcykpO1xuICAgIH1cbn0gXSk7XG5cbmNvbnN0IEZsID0gTWwobywgWyBEaWFsb2dTZXJ2aWNlLCBEZWZhdWx0RGlhbG9nR2xvYmFsU2V0dGluZ3MsIERlZmF1bHREaWFsb2dEb21SZW5kZXJlciBdKTtcblxuY29uc3QgVmwgPSBsLmNyZWF0ZUludGVyZmFjZSgodCA9PiB0LnNpbmdsZXRvbihXY0N1c3RvbUVsZW1lbnRSZWdpc3RyeSkpKTtcblxuY2xhc3MgV2NDdXN0b21FbGVtZW50UmVnaXN0cnkge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUsIGkpIHtcbiAgICAgICAgdGhpcy5jdG4gPSB0O1xuICAgICAgICB0aGlzLnAgPSBlO1xuICAgICAgICB0aGlzLnIgPSBpO1xuICAgIH1cbiAgICBkZWZpbmUodCwgZSwgaSkge1xuICAgICAgICBpZiAoIXQuaW5jbHVkZXMoXCItXCIpKSB0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgd2ViLWNvbXBvbmVudHMgY3VzdG9tIGVsZW1lbnQgbmFtZS4gSXQgbXVzdCBpbmNsdWRlIGEgXCItXCInKTtcbiAgICAgICAgbGV0IHM7XG4gICAgICAgIGlmIChudWxsID09IGUpIHRocm93IG5ldyBFcnJvcihcIkludmFsaWQgY3VzdG9tIGVsZW1lbnQgZGVmaW5pdGlvblwiKTtcbiAgICAgICAgc3dpdGNoICh0eXBlb2YgZSkge1xuICAgICAgICAgIGNhc2UgXCJmdW5jdGlvblwiOlxuICAgICAgICAgICAgcyA9IHNpLmlzVHlwZShlKSA/IHNpLmdldERlZmluaXRpb24oZSkgOiBDdXN0b21FbGVtZW50RGVmaW5pdGlvbi5jcmVhdGUoc2kuZ2VuZXJhdGVOYW1lKCksIGUpO1xuICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgcyA9IEN1c3RvbUVsZW1lbnREZWZpbml0aW9uLmdldE9yQ3JlYXRlKGUpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHMuY29udGFpbmVybGVzcykgdGhyb3cgbmV3IEVycm9yKFwiQ29udGFpbmVybGVzcyBjdXN0b20gZWxlbWVudCBpcyBub3Qgc3VwcG9ydGVkLiBDb25zaWRlciB1c2luZyBidWl0bC1pbiBleHRlbmRzIGluc3RlYWRcIik7XG4gICAgICAgIGNvbnN0IG4gPSAhKG51bGwgPT09IGkgfHwgdm9pZCAwID09PSBpID8gdm9pZCAwIDogaS5leHRlbmRzKSA/IEhUTUxFbGVtZW50IDogdGhpcy5wLmRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoaS5leHRlbmRzKS5jb25zdHJ1Y3RvcjtcbiAgICAgICAgY29uc3QgciA9IHRoaXMuY3RuO1xuICAgICAgICBjb25zdCBvID0gdGhpcy5yO1xuICAgICAgICBjb25zdCBsID0gcy5iaW5kYWJsZXM7XG4gICAgICAgIGNvbnN0IGggPSB0aGlzLnA7XG4gICAgICAgIGNsYXNzIEN1c3RvbUVsZW1lbnRDbGFzcyBleHRlbmRzIG4ge1xuICAgICAgICAgICAgYXVJbml0KCkge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLmF1SW5pdGVkKSByZXR1cm47XG4gICAgICAgICAgICAgICAgdGhpcy5hdUluaXRlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgY29uc3QgdCA9IHIuY3JlYXRlQ2hpbGQoKTtcbiAgICAgICAgICAgICAgICB0LnJlZ2lzdGVyUmVzb2x2ZXIoaC5IVE1MRWxlbWVudCwgdC5yZWdpc3RlclJlc29sdmVyKGguRWxlbWVudCwgdC5yZWdpc3RlclJlc29sdmVyKG5zLCBuZXcgeChcIkVsZW1lbnRQcm92aWRlclwiLCB0aGlzKSkpKTtcbiAgICAgICAgICAgICAgICBjb25zdCBlID0gby5jb21waWxlKHMsIHQsIHtcbiAgICAgICAgICAgICAgICAgICAgcHJvamVjdGlvbnM6IG51bGxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBjb25zdCBpID0gdC5pbnZva2UoZS5UeXBlKTtcbiAgICAgICAgICAgICAgICBjb25zdCBuID0gdGhpcy5hdUN0cmwgPSBDb250cm9sbGVyLiRlbCh0LCBpLCB0aGlzLCBudWxsLCBlKTtcbiAgICAgICAgICAgICAgICBzcyh0aGlzLCBlLmtleSwgbik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25uZWN0ZWRDYWxsYmFjaygpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmF1SW5pdCgpO1xuICAgICAgICAgICAgICAgIHRoaXMuYXVDdHJsLmFjdGl2YXRlKHRoaXMuYXVDdHJsLCBudWxsLCAwKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGRpc2Nvbm5lY3RlZENhbGxiYWNrKCkge1xuICAgICAgICAgICAgICAgIHRoaXMuYXVDdHJsLmRlYWN0aXZhdGUodGhpcy5hdUN0cmwsIG51bGwsIDApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYWRvcHRlZENhbGxiYWNrKCkge1xuICAgICAgICAgICAgICAgIHRoaXMuYXVJbml0KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBhdHRyaWJ1dGVDaGFuZ2VkQ2FsbGJhY2sodCwgZSwgaSkge1xuICAgICAgICAgICAgICAgIHRoaXMuYXVJbml0KCk7XG4gICAgICAgICAgICAgICAgdGhpcy5hdUN0cmwudmlld01vZGVsW3RdID0gaTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBDdXN0b21FbGVtZW50Q2xhc3Mub2JzZXJ2ZWRBdHRyaWJ1dGVzID0gT2JqZWN0LmtleXMobCk7XG4gICAgICAgIGZvciAoY29uc3QgdCBpbiBsKSBPYmplY3QuZGVmaW5lUHJvcGVydHkoQ3VzdG9tRWxlbWVudENsYXNzLnByb3RvdHlwZSwgdCwge1xuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICAgICAgICBnZXQoKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXNbXCJhdUN0cmxcIl0udmlld01vZGVsW3RdO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHNldChlKSB7XG4gICAgICAgICAgICAgICAgaWYgKCF0aGlzW1wiYXVJbml0ZWRcIl0pIHRoaXNbXCJhdUluaXRcIl0oKTtcbiAgICAgICAgICAgICAgICB0aGlzW1wiYXVDdHJsXCJdLnZpZXdNb2RlbFt0XSA9IGU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLnAuY3VzdG9tRWxlbWVudHMuZGVmaW5lKHQsIEN1c3RvbUVsZW1lbnRDbGFzcywgaSk7XG4gICAgICAgIHJldHVybiBDdXN0b21FbGVtZW50Q2xhc3M7XG4gICAgfVxufVxuXG5XY0N1c3RvbUVsZW1lbnRSZWdpc3RyeS5pbmplY3QgPSBbIGcsIEt0LCBQaSBdO1xuXG5leHBvcnQgeyBBZG9wdGVkU3R5bGVTaGVldHNTdHlsZXMsIEFwcFJvb3QsIHhlIGFzIEFwcFRhc2ssIEd0IGFzIEF0UHJlZml4ZWRUcmlnZ2VyQXR0cmlidXRlUGF0dGVybiwgcm8gYXMgQXRQcmVmaXhlZFRyaWdnZXJBdHRyaWJ1dGVQYXR0ZXJuUmVnaXN0cmF0aW9uLCBBdHRyQmluZGluZ0JlaGF2aW9yLCBHbyBhcyBBdHRyQmluZGluZ0JlaGF2aW9yUmVnaXN0cmF0aW9uLCBTbiBhcyBBdHRyQmluZGluZ0NvbW1hbmQsIEFvIGFzIEF0dHJCaW5kaW5nQ29tbWFuZFJlZ2lzdHJhdGlvbiwgQXR0clN5bnRheCwgQXR0cmlidXRlQmluZGluZywgQXR0cmlidXRlQmluZGluZ0luc3RydWN0aW9uLCBkbCBhcyBBdHRyaWJ1dGVCaW5kaW5nUmVuZGVyZXJSZWdpc3RyYXRpb24sIEF0dHJpYnV0ZU5TQWNjZXNzb3IsIE50IGFzIEF0dHJpYnV0ZVBhdHRlcm4sIEF1Q29tcG9zZSwgQXVSZW5kZXIsIFlvIGFzIEF1UmVuZGVyUmVnaXN0cmF0aW9uLCBBdVNsb3QsIEF1U2xvdHNJbmZvLCBBdXJlbGlhLCBCdCBhcyBCaW5kYWJsZSwgQmluZGFibGVEZWZpbml0aW9uLCBCaW5kYWJsZU9ic2VydmVyLCBCaW5kYWJsZXNJbmZvLCBtbiBhcyBCaW5kaW5nQ29tbWFuZCwgQmluZGluZ0NvbW1hbmREZWZpbml0aW9uLCBCaW5kaW5nTW9kZUJlaGF2aW9yLCBDU1NNb2R1bGVzUHJvY2Vzc29yUmVnaXN0cnksIENhbGxCaW5kaW5nLCB4biBhcyBDYWxsQmluZGluZ0NvbW1hbmQsIGZvIGFzIENhbGxCaW5kaW5nQ29tbWFuZFJlZ2lzdHJhdGlvbiwgQ2FsbEJpbmRpbmdJbnN0cnVjdGlvbiwgaWwgYXMgQ2FsbEJpbmRpbmdSZW5kZXJlclJlZ2lzdHJhdGlvbiwgQW4gYXMgQ2FwdHVyZUJpbmRpbmdDb21tYW5kLCBDbyBhcyBDYXB0dXJlQmluZGluZ0NvbW1hbmRSZWdpc3RyYXRpb24sIEJyIGFzIENhc2UsIENoZWNrZWRPYnNlcnZlciwgU2UgYXMgQ2hpbGRyZW4sIENoaWxkcmVuRGVmaW5pdGlvbiwgQ2hpbGRyZW5PYnNlcnZlciwgQ2xhc3NBdHRyaWJ1dGVBY2Nlc3NvciwgRW4gYXMgQ2xhc3NCaW5kaW5nQ29tbWFuZCwgU28gYXMgQ2xhc3NCaW5kaW5nQ29tbWFuZFJlZ2lzdHJhdGlvbiwgenQgYXMgQ29sb25QcmVmaXhlZEJpbmRBdHRyaWJ1dGVQYXR0ZXJuLCBvbyBhcyBDb2xvblByZWZpeGVkQmluZEF0dHJpYnV0ZVBhdHRlcm5SZWdpc3RyYXRpb24sIGFuIGFzIENvbW1hbmRUeXBlLCBDb21wdXRlZFdhdGNoZXIsIENvbnRyb2xsZXIsIE1lIGFzIEN1c3RvbUF0dHJpYnV0ZSwgQ3VzdG9tQXR0cmlidXRlRGVmaW5pdGlvbiwgc2wgYXMgQ3VzdG9tQXR0cmlidXRlUmVuZGVyZXJSZWdpc3RyYXRpb24sIHNpIGFzIEN1c3RvbUVsZW1lbnQsIEN1c3RvbUVsZW1lbnREZWZpbml0aW9uLCBubCBhcyBDdXN0b21FbGVtZW50UmVuZGVyZXJSZWdpc3RyYXRpb24sIERhdGFBdHRyaWJ1dGVBY2Nlc3NvciwgRGVib3VuY2VCaW5kaW5nQmVoYXZpb3IsIFhyIGFzIERlYm91bmNlQmluZGluZ0JlaGF2aW9yUmVnaXN0cmF0aW9uLCBibiBhcyBEZWZhdWx0QmluZGluZ0NvbW1hbmQsIG1vIGFzIERlZmF1bHRCaW5kaW5nQ29tbWFuZFJlZ2lzdHJhdGlvbiwgQm8gYXMgRGVmYXVsdEJpbmRpbmdMYW5ndWFnZSwgY28gYXMgRGVmYXVsdEJpbmRpbmdTeW50YXgsIElyIGFzIERlZmF1bHRDYXNlLCBzbyBhcyBEZWZhdWx0Q29tcG9uZW50cywgRGVmYXVsdERpYWxvZ0RvbSwgRGVmYXVsdERpYWxvZ0RvbVJlbmRlcmVyLCBEZWZhdWx0RGlhbG9nR2xvYmFsU2V0dGluZ3MsIHhsIGFzIERlZmF1bHRSZW5kZXJlcnMsIGVsIGFzIERlZmF1bHRSZXNvdXJjZXMsIEFsIGFzIERlZmluaXRpb25UeXBlLCBDbiBhcyBEZWxlZ2F0ZUJpbmRpbmdDb21tYW5kLCBrbyBhcyBEZWxlZ2F0ZUJpbmRpbmdDb21tYW5kUmVnaXN0cmF0aW9uLCBEaWFsb2dDbG9zZVJlc3VsdCwgVWwgYXMgRGlhbG9nQ29uZmlndXJhdGlvbiwgRGlhbG9nQ29udHJvbGxlciwgVGwgYXMgRGlhbG9nRGVhY3RpdmF0aW9uU3RhdHVzZXMsIEZsIGFzIERpYWxvZ0RlZmF1bHRDb25maWd1cmF0aW9uLCBEaWFsb2dPcGVuUmVzdWx0LCBEaWFsb2dTZXJ2aWNlLCBXdCBhcyBEb3RTZXBhcmF0ZWRBdHRyaWJ1dGVQYXR0ZXJuLCBobyBhcyBEb3RTZXBhcmF0ZWRBdHRyaWJ1dGVQYXR0ZXJuUmVnaXN0cmF0aW9uLCBFbHNlLCAkbyBhcyBFbHNlUmVnaXN0cmF0aW9uLCBFdmVudERlbGVnYXRvciwgRXZlbnRTdWJzY3JpYmVyLCBFeHByZXNzaW9uV2F0Y2hlciwgRm9jdXMsIHluIGFzIEZvckJpbmRpbmdDb21tYW5kLCB2byBhcyBGb3JCaW5kaW5nQ29tbWFuZFJlZ2lzdHJhdGlvbiwgRnJhZ21lbnROb2RlU2VxdWVuY2UsIEZyZXF1ZW50TXV0YXRpb25zLCBGcm9tVmlld0JpbmRpbmdCZWhhdmlvciwgUXIgYXMgRnJvbVZpZXdCaW5kaW5nQmVoYXZpb3JSZWdpc3RyYXRpb24sIGduIGFzIEZyb21WaWV3QmluZGluZ0NvbW1hbmQsIHBvIGFzIEZyb21WaWV3QmluZGluZ0NvbW1hbmRSZWdpc3RyYXRpb24sIFByIGFzIEZ1bGZpbGxlZFRlbXBsYXRlQ29udHJvbGxlciwgSHlkcmF0ZUF0dHJpYnV0ZUluc3RydWN0aW9uLCBIeWRyYXRlRWxlbWVudEluc3RydWN0aW9uLCBIeWRyYXRlTGV0RWxlbWVudEluc3RydWN0aW9uLCBIeWRyYXRlVGVtcGxhdGVDb250cm9sbGVyLCB0cyBhcyBJQXBwUm9vdCwgYmUgYXMgSUFwcFRhc2ssIFp0IGFzIElBdHRyTWFwcGVyLCBVdCBhcyBJQXR0cmlidXRlUGFyc2VyLCBNdCBhcyBJQXR0cmlidXRlUGF0dGVybiwgeHMgYXMgSUF1U2xvdHNJbmZvLCBDbCBhcyBJQXVyZWxpYSwgWGkgYXMgSUNvbnRyb2xsZXIsIFJsIGFzIElEaWFsb2dDb250cm9sbGVyLCBCbCBhcyBJRGlhbG9nRG9tLCBFbCBhcyBJRGlhbG9nRG9tUmVuZGVyZXIsIElsIGFzIElEaWFsb2dHbG9iYWxTZXR0aW5ncywgU2wgYXMgSURpYWxvZ1NlcnZpY2UsIHdzIGFzIElFdmVudERlbGVnYXRvciwgcnMgYXMgSUV2ZW50VGFyZ2V0LCB2cyBhcyBJSGlzdG9yeSwgS2kgYXMgSUh5ZHJhdGlvbkNvbnRleHQsIGtzIGFzIElJbnN0cnVjdGlvbiwgYmkgYXMgSUxpZmVjeWNsZUhvb2tzLCBtcyBhcyBJTG9jYXRpb24sIG5zIGFzIElOb2RlLCBpbyBhcyBJTm9kZU9ic2VydmVyTG9jYXRvclJlZ2lzdHJhdGlvbiwgS3QgYXMgSVBsYXRmb3JtLCBicyBhcyBJUHJvamVjdGlvbnMsIG9zIGFzIElSZW5kZXJMb2NhdGlvbiwgU3MgYXMgSVJlbmRlcmVyLCBQaSBhcyBJUmVuZGVyaW5nLCBZdCBhcyBJU1ZHQW5hbHl6ZXIsIEhyIGFzIElTYW5pdGl6ZXIsIGRpIGFzIElTaGFkb3dET01HbG9iYWxTdHlsZXMsIHVpIGFzIElTaGFkb3dET01TdHlsZUZhY3RvcnksIGZpIGFzIElTaGFkb3dET01TdHlsZXMsICR0IGFzIElTeW50YXhJbnRlcnByZXRlciwgQXMgYXMgSVRlbXBsYXRlQ29tcGlsZXIsIHpuIGFzIElUZW1wbGF0ZUNvbXBpbGVySG9va3MsIGVvIGFzIElUZW1wbGF0ZUNvbXBpbGVyUmVnaXN0cmF0aW9uLCBUbiBhcyBJVGVtcGxhdGVFbGVtZW50RmFjdG9yeSwgQWkgYXMgSVZpZXdGYWN0b3J5LCBEaSBhcyBJVmlld0xvY2F0b3IsIFZsIGFzIElXY0VsZW1lbnRSZWdpc3RyeSwgZHMgYXMgSVdpbmRvdywgZXMgYXMgSVdvcmtUcmFja2VyLCBJZiwgT28gYXMgSWZSZWdpc3RyYXRpb24sIHlzIGFzIEluc3RydWN0aW9uVHlwZSwgSW50ZXJwb2xhdGlvbkJpbmRpbmcsIHJsIGFzIEludGVycG9sYXRpb25CaW5kaW5nUmVuZGVyZXJSZWdpc3RyYXRpb24sIEludGVycG9sYXRpb25JbnN0cnVjdGlvbiwgSW50ZXJwcmV0YXRpb24sIEl0ZXJhdG9yQmluZGluZ0luc3RydWN0aW9uLCBvbCBhcyBJdGVyYXRvckJpbmRpbmdSZW5kZXJlclJlZ2lzdHJhdGlvbiwgTGV0QmluZGluZywgTGV0QmluZGluZ0luc3RydWN0aW9uLCBsbCBhcyBMZXRFbGVtZW50UmVuZGVyZXJSZWdpc3RyYXRpb24sIGtpIGFzIExpZmVjeWNsZUhvb2tzLCBMaWZlY3ljbGVIb29rc0RlZmluaXRpb24sIExpZmVjeWNsZUhvb2tzRW50cnksIExpc3RlbmVyLCBMaXN0ZW5lckJpbmRpbmdJbnN0cnVjdGlvbiwgZmwgYXMgTGlzdGVuZXJCaW5kaW5nUmVuZGVyZXJSZWdpc3RyYXRpb24sIE5vZGVPYnNlcnZlckNvbmZpZywgTm9kZU9ic2VydmVyTG9jYXRvciwgbHMgYXMgTm9kZVR5cGUsIE5vb3BTVkdBbmFseXplciwgT2JzZXJ2ZVNoYWxsb3csIE9uZVRpbWVCaW5kaW5nQmVoYXZpb3IsIEtyIGFzIE9uZVRpbWVCaW5kaW5nQmVoYXZpb3JSZWdpc3RyYXRpb24sIHZuIGFzIE9uZVRpbWVCaW5kaW5nQ29tbWFuZCwgZ28gYXMgT25lVGltZUJpbmRpbmdDb21tYW5kUmVnaXN0cmF0aW9uLCBEciBhcyBQZW5kaW5nVGVtcGxhdGVDb250cm9sbGVyLCBQb3J0YWwsIFRyIGFzIFByb21pc2VUZW1wbGF0ZUNvbnRyb2xsZXIsIFByb3BlcnR5QmluZGluZywgUHJvcGVydHlCaW5kaW5nSW5zdHJ1Y3Rpb24sIGhsIGFzIFByb3BlcnR5QmluZGluZ1JlbmRlcmVyUmVnaXN0cmF0aW9uLCBIdCBhcyBSZWZBdHRyaWJ1dGVQYXR0ZXJuLCBsbyBhcyBSZWZBdHRyaWJ1dGVQYXR0ZXJuUmVnaXN0cmF0aW9uLCBSZWZCaW5kaW5nLCB4byBhcyBSZWZCaW5kaW5nQ29tbWFuZFJlZ2lzdHJhdGlvbiwgUmVmQmluZGluZ0luc3RydWN0aW9uLCBhbCBhcyBSZWZCaW5kaW5nUmVuZGVyZXJSZWdpc3RyYXRpb24sIE9yIGFzIFJlamVjdGVkVGVtcGxhdGVDb250cm9sbGVyLCBSZW5kZXJQbGFuLCBSZW5kZXJpbmcsIFJlcGVhdCwgTG8gYXMgUmVwZWF0UmVnaXN0cmF0aW9uLCBTVkdBbmFseXplciwgbm8gYXMgU1ZHQW5hbHl6ZXJSZWdpc3RyYXRpb24sIHpyIGFzIFNhbml0aXplVmFsdWVDb252ZXJ0ZXIsIElvIGFzIFNhbml0aXplVmFsdWVDb252ZXJ0ZXJSZWdpc3RyYXRpb24sIFNlbGVjdFZhbHVlT2JzZXJ2ZXIsIFNlbGZCaW5kaW5nQmVoYXZpb3IsIFhvIGFzIFNlbGZCaW5kaW5nQmVoYXZpb3JSZWdpc3RyYXRpb24sIFNldEF0dHJpYnV0ZUluc3RydWN0aW9uLCBtbCBhcyBTZXRBdHRyaWJ1dGVSZW5kZXJlclJlZ2lzdHJhdGlvbiwgU2V0Q2xhc3NBdHRyaWJ1dGVJbnN0cnVjdGlvbiwgdmwgYXMgU2V0Q2xhc3NBdHRyaWJ1dGVSZW5kZXJlclJlZ2lzdHJhdGlvbiwgU2V0UHJvcGVydHlJbnN0cnVjdGlvbiwgY2wgYXMgU2V0UHJvcGVydHlSZW5kZXJlclJlZ2lzdHJhdGlvbiwgU2V0U3R5bGVBdHRyaWJ1dGVJbnN0cnVjdGlvbiwgcGwgYXMgU2V0U3R5bGVBdHRyaWJ1dGVSZW5kZXJlclJlZ2lzdHJhdGlvbiwgU2hhZG93RE9NUmVnaXN0cnksIHVvIGFzIFNob3J0SGFuZEJpbmRpbmdTeW50YXgsIFNpZ25hbEJpbmRpbmdCZWhhdmlvciwgWnIgYXMgU2lnbmFsQmluZGluZ0JlaGF2aW9yUmVnaXN0cmF0aW9uLCB5bCBhcyBTdGFuZGFyZENvbmZpZ3VyYXRpb24sIFN0eWxlQXR0cmlidXRlQWNjZXNzb3IsIFJuIGFzIFN0eWxlQmluZGluZ0NvbW1hbmQsIFJvIGFzIFN0eWxlQmluZGluZ0NvbW1hbmRSZWdpc3RyYXRpb24sIG1pIGFzIFN0eWxlQ29uZmlndXJhdGlvbiwgU3R5bGVFbGVtZW50U3R5bGVzLCBTdHlsZVByb3BlcnR5QmluZGluZ0luc3RydWN0aW9uLCBnbCBhcyBTdHlsZVByb3BlcnR5QmluZGluZ1JlbmRlcmVyUmVnaXN0cmF0aW9uLCBFciBhcyBTd2l0Y2gsIFRlbXBsYXRlQ29tcGlsZXIsIEtuIGFzIFRlbXBsYXRlQ29tcGlsZXJIb29rcywgdWwgYXMgVGVtcGxhdGVDb250cm9sbGVyUmVuZGVyZXJSZWdpc3RyYXRpb24sIFRleHRCaW5kaW5nSW5zdHJ1Y3Rpb24sIHdsIGFzIFRleHRCaW5kaW5nUmVuZGVyZXJSZWdpc3RyYXRpb24sIFRocm90dGxlQmluZGluZ0JlaGF2aW9yLCBKciBhcyBUaHJvdHRsZUJpbmRpbmdCZWhhdmlvclJlZ2lzdHJhdGlvbiwgVG9WaWV3QmluZGluZ0JlaGF2aW9yLCBZciBhcyBUb1ZpZXdCaW5kaW5nQmVoYXZpb3JSZWdpc3RyYXRpb24sIHBuIGFzIFRvVmlld0JpbmRpbmdDb21tYW5kLCB3byBhcyBUb1ZpZXdCaW5kaW5nQ29tbWFuZFJlZ2lzdHJhdGlvbiwga24gYXMgVHJpZ2dlckJpbmRpbmdDb21tYW5kLCB5byBhcyBUcmlnZ2VyQmluZGluZ0NvbW1hbmRSZWdpc3RyYXRpb24sIFR3b1dheUJpbmRpbmdCZWhhdmlvciwgdG8gYXMgVHdvV2F5QmluZGluZ0JlaGF2aW9yUmVnaXN0cmF0aW9uLCB3biBhcyBUd29XYXlCaW5kaW5nQ29tbWFuZCwgYm8gYXMgVHdvV2F5QmluZGluZ0NvbW1hbmRSZWdpc3RyYXRpb24sIFVwZGF0ZVRyaWdnZXJCaW5kaW5nQmVoYXZpb3IsIEtvIGFzIFVwZGF0ZVRyaWdnZXJCaW5kaW5nQmVoYXZpb3JSZWdpc3RyYXRpb24sIFZhbHVlQXR0cmlidXRlT2JzZXJ2ZXIsIFZpZXdGYWN0b3J5LCBWaWV3TG9jYXRvciwgSGkgYXMgVmlld01vZGVsS2luZCwgR3IgYXMgVmlld1ZhbHVlQ29udmVydGVyLCBUbyBhcyBWaWV3VmFsdWVDb252ZXJ0ZXJSZWdpc3RyYXRpb24sIElpIGFzIFZpZXdzLCBfZSBhcyBXYXRjaCwgV2NDdXN0b21FbGVtZW50UmVnaXN0cnksIFdpdGgsIHFvIGFzIFdpdGhSZWdpc3RyYXRpb24sIFBuIGFzIGFsbFJlc291cmNlcywgRnQgYXMgYXR0cmlidXRlUGF0dGVybiwgU3QgYXMgYmluZGFibGUsIGNuIGFzIGJpbmRpbmdDb21tYW5kLCBrZSBhcyBjaGlsZHJlbiwgSXQgYXMgY29lcmNlciwgV2UgYXMgY29udGFpbmVybGVzcywgdXMgYXMgY29udmVydFRvUmVuZGVyTG9jYXRpb24sIFVyIGFzIGNyZWF0ZUVsZW1lbnQsIGFpIGFzIGNzc01vZHVsZXMsIFBlIGFzIGN1c3RvbUF0dHJpYnV0ZSwgamUgYXMgY3VzdG9tRWxlbWVudCwgYXMgYXMgZ2V0RWZmZWN0aXZlUGFyZW50Tm9kZSwgaXMgYXMgZ2V0UmVmLCBqaSBhcyBpc0N1c3RvbUVsZW1lbnRDb250cm9sbGVyLCBOaSBhcyBpc0N1c3RvbUVsZW1lbnRWaWV3TW9kZWwsIENzIGFzIGlzSW5zdHJ1Y3Rpb24sIGZzIGFzIGlzUmVuZGVyTG9jYXRpb24sIENpIGFzIGxpZmVjeWNsZUhvb2tzLCByaSBhcyBwcm9jZXNzQ29udGVudCwgUnMgYXMgcmVuZGVyZXIsIGNzIGFzIHNldEVmZmVjdGl2ZVBhcmVudE5vZGUsIHNzIGFzIHNldFJlZiwgY2kgYXMgc2hhZG93Q1NTLCBZbiBhcyB0ZW1wbGF0ZUNvbXBpbGVySG9va3MsIE9lIGFzIHRlbXBsYXRlQ29udHJvbGxlciwgTmUgYXMgdXNlU2hhZG93RE9NLCBUaSBhcyB2aWV3LCBVZSBhcyB3YXRjaCB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXguanMubWFwXG4iLCJpbXBvcnQgeyBNZXRhZGF0YSBhcyB0LCBQcm90b2NvbCBhcyBlLCBSZWdpc3RyYXRpb24gYXMgcywgREkgYXMgciwgZmlyc3REZWZpbmVkIGFzIGksIG1lcmdlQXJyYXlzIGFzIG4sIGZyb21Bbm5vdGF0aW9uT3JEZWZpbml0aW9uT3JUeXBlT3JEZWZhdWx0IGFzIG8sIGlzTnVtYmVyT3JCaWdJbnQgYXMgaCwgaXNTdHJpbmdPckRhdGUgYXMgYywgZW1wdHlBcnJheSBhcyB1LCBpc0FycmF5SW5kZXggYXMgYSwgSVBsYXRmb3JtIGFzIGwsIElMb2dnZXIgYXMgZiB9IGZyb20gXCJAYXVyZWxpYS9rZXJuZWxcIjtcblxuZXhwb3J0IHsgSVBsYXRmb3JtIH0gZnJvbSBcIkBhdXJlbGlhL2tlcm5lbFwiO1xuXG5leHBvcnQgeyBQbGF0Zm9ybSwgVGFzaywgVGFza0Fib3J0RXJyb3IsIFRhc2tRdWV1ZSwgVGFza1F1ZXVlUHJpb3JpdHksIFRhc2tTdGF0dXMgfSBmcm9tIFwiQGF1cmVsaWEvcGxhdGZvcm1cIjtcblxuY29uc3QgZCA9IE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHk7XG5cbmNvbnN0IHYgPSBSZWZsZWN0LmRlZmluZVByb3BlcnR5O1xuXG5jb25zdCBwID0gdCA9PiBcImZ1bmN0aW9uXCIgPT09IHR5cGVvZiB0O1xuXG5jb25zdCBnID0gdCA9PiBcInN0cmluZ1wiID09PSB0eXBlb2YgdDtcblxuZnVuY3Rpb24gdyh0LCBlLCBzKSB7XG4gICAgdih0LCBlLCB7XG4gICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICB2YWx1ZTogc1xuICAgIH0pO1xuICAgIHJldHVybiBzO1xufVxuXG5mdW5jdGlvbiBiKHQsIGUsIHMsIHIgPSBmYWxzZSkge1xuICAgIGlmIChyIHx8ICFkLmNhbGwodCwgZSkpIHcodCwgZSwgcyk7XG59XG5cbmNvbnN0IEUgPSAoKSA9PiBPYmplY3QuY3JlYXRlKG51bGwpO1xuXG5jb25zdCBBID0gdC5nZXRPd247XG5cbmNvbnN0IHkgPSB0Lmhhc093bjtcblxuY29uc3QgbSA9IHQuZGVmaW5lO1xuXG5jb25zdCBVID0gZS5hbm5vdGF0aW9uLmtleUZvcjtcblxuY29uc3QgeCA9IGUucmVzb3VyY2Uua2V5Rm9yO1xuXG5jb25zdCBTID0gZS5yZXNvdXJjZS5hcHBlbmRUbztcblxuZnVuY3Rpb24gTyguLi50KSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgY29uc3QgcyA9IFUoXCJhbGlhc2VzXCIpO1xuICAgICAgICBjb25zdCByID0gQShzLCBlKTtcbiAgICAgICAgaWYgKHZvaWQgMCA9PT0gcikgbShzLCB0LCBlKTsgZWxzZSByLnB1c2goLi4udCk7XG4gICAgfTtcbn1cblxuZnVuY3Rpb24gQyh0LCBlLCByLCBpKSB7XG4gICAgZm9yIChsZXQgbiA9IDAsIG8gPSB0Lmxlbmd0aDsgbiA8IG87ICsrbikgcy5hbGlhc1RvKHIsIGUua2V5RnJvbSh0W25dKSkucmVnaXN0ZXIoaSk7XG59XG5cbmNvbnN0IGsgPSBPYmplY3QuZnJlZXplKHt9KTtcblxuY2xhc3MgQmluZGluZ0NvbnRleHQge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUpIHtcbiAgICAgICAgaWYgKHZvaWQgMCAhPT0gdCkgaWYgKHZvaWQgMCAhPT0gZSkgdGhpc1t0XSA9IGU7IGVsc2UgZm9yIChjb25zdCBlIGluIHQpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwodCwgZSkpIHRoaXNbZV0gPSB0W2VdO1xuICAgIH1cbiAgICBzdGF0aWMgY3JlYXRlKHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBCaW5kaW5nQ29udGV4dCh0LCBlKTtcbiAgICB9XG4gICAgc3RhdGljIGdldCh0LCBlLCBzLCByKSB7XG4gICAgICAgIHZhciBpLCBuO1xuICAgICAgICBpZiAobnVsbCA9PSB0KSB0aHJvdyBuZXcgRXJyb3IoYEFVUjAyMDM6JHt0fWApO1xuICAgICAgICBsZXQgbyA9IHQub3ZlcnJpZGVDb250ZXh0O1xuICAgICAgICBsZXQgaCA9IHQ7XG4gICAgICAgIGlmIChzID4gMCkge1xuICAgICAgICAgICAgd2hpbGUgKHMgPiAwKSB7XG4gICAgICAgICAgICAgICAgcy0tO1xuICAgICAgICAgICAgICAgIGggPSBoLnBhcmVudFNjb3BlO1xuICAgICAgICAgICAgICAgIGlmIChudWxsID09IChudWxsID09PSBoIHx8IHZvaWQgMCA9PT0gaCA/IHZvaWQgMCA6IGgub3ZlcnJpZGVDb250ZXh0KSkgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbyA9IGgub3ZlcnJpZGVDb250ZXh0O1xuICAgICAgICAgICAgcmV0dXJuIGUgaW4gbyA/IG8gOiBvLmJpbmRpbmdDb250ZXh0O1xuICAgICAgICB9XG4gICAgICAgIHdoaWxlICghKG51bGwgPT09IGggfHwgdm9pZCAwID09PSBoID8gdm9pZCAwIDogaC5pc0JvdW5kYXJ5KSAmJiBudWxsICE9IG8gJiYgIShlIGluIG8pICYmICEoby5iaW5kaW5nQ29udGV4dCAmJiBlIGluIG8uYmluZGluZ0NvbnRleHQpKSB7XG4gICAgICAgICAgICBoID0gbnVsbCAhPT0gKGkgPSBoLnBhcmVudFNjb3BlKSAmJiB2b2lkIDAgIT09IGkgPyBpIDogbnVsbDtcbiAgICAgICAgICAgIG8gPSBudWxsICE9PSAobiA9IG51bGwgPT09IGggfHwgdm9pZCAwID09PSBoID8gdm9pZCAwIDogaC5vdmVycmlkZUNvbnRleHQpICYmIHZvaWQgMCAhPT0gbiA/IG4gOiBudWxsO1xuICAgICAgICB9XG4gICAgICAgIGlmIChvKSByZXR1cm4gZSBpbiBvID8gbyA6IG8uYmluZGluZ0NvbnRleHQ7XG4gICAgICAgIGlmICgxNiAmIHIpIHJldHVybiBrO1xuICAgICAgICByZXR1cm4gdC5iaW5kaW5nQ29udGV4dCB8fCB0Lm92ZXJyaWRlQ29udGV4dDtcbiAgICB9XG59XG5cbmNsYXNzIFNjb3BlIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlLCBzLCByKSB7XG4gICAgICAgIHRoaXMucGFyZW50U2NvcGUgPSB0O1xuICAgICAgICB0aGlzLmJpbmRpbmdDb250ZXh0ID0gZTtcbiAgICAgICAgdGhpcy5vdmVycmlkZUNvbnRleHQgPSBzO1xuICAgICAgICB0aGlzLmlzQm91bmRhcnkgPSByO1xuICAgIH1cbiAgICBzdGF0aWMgY3JlYXRlKHQsIGUsIHMpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBTY29wZShudWxsLCB0LCBudWxsID09IGUgPyBPdmVycmlkZUNvbnRleHQuY3JlYXRlKHQpIDogZSwgbnVsbCAhPT0gcyAmJiB2b2lkIDAgIT09IHMgPyBzIDogZmFsc2UpO1xuICAgIH1cbiAgICBzdGF0aWMgZnJvbU92ZXJyaWRlKHQpIHtcbiAgICAgICAgaWYgKG51bGwgPT0gdCkgdGhyb3cgbmV3IEVycm9yKGBBVVIwMjA0OiR7dH1gKTtcbiAgICAgICAgcmV0dXJuIG5ldyBTY29wZShudWxsLCB0LmJpbmRpbmdDb250ZXh0LCB0LCBmYWxzZSk7XG4gICAgfVxuICAgIHN0YXRpYyBmcm9tUGFyZW50KHQsIGUpIHtcbiAgICAgICAgaWYgKG51bGwgPT0gdCkgdGhyb3cgbmV3IEVycm9yKGBBVVIwMjA1OiR7dH1gKTtcbiAgICAgICAgcmV0dXJuIG5ldyBTY29wZSh0LCBlLCBPdmVycmlkZUNvbnRleHQuY3JlYXRlKGUpLCBmYWxzZSk7XG4gICAgfVxufVxuXG5jbGFzcyBPdmVycmlkZUNvbnRleHQge1xuICAgIGNvbnN0cnVjdG9yKHQpIHtcbiAgICAgICAgdGhpcy5iaW5kaW5nQ29udGV4dCA9IHQ7XG4gICAgfVxuICAgIHN0YXRpYyBjcmVhdGUodCkge1xuICAgICAgICByZXR1cm4gbmV3IE92ZXJyaWRlQ29udGV4dCh0KTtcbiAgICB9XG59XG5cbmNvbnN0IEIgPSByLmNyZWF0ZUludGVyZmFjZShcIklTaWduYWxlclwiLCAodCA9PiB0LnNpbmdsZXRvbihTaWduYWxlcikpKTtcblxuY2xhc3MgU2lnbmFsZXIge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICB0aGlzLnNpZ25hbHMgPSBFKCk7XG4gICAgfVxuICAgIGRpc3BhdGNoU2lnbmFsKHQsIGUpIHtcbiAgICAgICAgY29uc3QgcyA9IHRoaXMuc2lnbmFsc1t0XTtcbiAgICAgICAgaWYgKHZvaWQgMCA9PT0gcykgcmV0dXJuO1xuICAgICAgICBsZXQgcjtcbiAgICAgICAgZm9yIChyIG9mIHMua2V5cygpKSByLmhhbmRsZUNoYW5nZSh2b2lkIDAsIHZvaWQgMCwgZSk7XG4gICAgfVxuICAgIGFkZFNpZ25hbExpc3RlbmVyKHQsIGUpIHtcbiAgICAgICAgY29uc3QgcyA9IHRoaXMuc2lnbmFscztcbiAgICAgICAgY29uc3QgciA9IHNbdF07XG4gICAgICAgIGlmICh2b2lkIDAgPT09IHIpIHNbdF0gPSBuZXcgU2V0KFsgZSBdKTsgZWxzZSByLmFkZChlKTtcbiAgICB9XG4gICAgcmVtb3ZlU2lnbmFsTGlzdGVuZXIodCwgZSkge1xuICAgICAgICBjb25zdCBzID0gdGhpcy5zaWduYWxzW3RdO1xuICAgICAgICBpZiAocykgcy5kZWxldGUoZSk7XG4gICAgfVxufVxuXG52YXIgJDtcblxuKGZ1bmN0aW9uKHQpIHtcbiAgICB0W3RbXCJzaW5nbGV0b25cIl0gPSAxXSA9IFwic2luZ2xldG9uXCI7XG4gICAgdFt0W1wiaW50ZXJjZXB0b3JcIl0gPSAyXSA9IFwiaW50ZXJjZXB0b3JcIjtcbn0pKCQgfHwgKCQgPSB7fSkpO1xuXG5mdW5jdGlvbiBMKHQpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24oZSkge1xuICAgICAgICByZXR1cm4gVC5kZWZpbmUodCwgZSk7XG4gICAgfTtcbn1cblxuY2xhc3MgQmluZGluZ0JlaGF2aW9yRGVmaW5pdGlvbiB7XG4gICAgY29uc3RydWN0b3IodCwgZSwgcywgciwgaSkge1xuICAgICAgICB0aGlzLlR5cGUgPSB0O1xuICAgICAgICB0aGlzLm5hbWUgPSBlO1xuICAgICAgICB0aGlzLmFsaWFzZXMgPSBzO1xuICAgICAgICB0aGlzLmtleSA9IHI7XG4gICAgICAgIHRoaXMuc3RyYXRlZ3kgPSBpO1xuICAgIH1cbiAgICBzdGF0aWMgY3JlYXRlKHQsIGUpIHtcbiAgICAgICAgbGV0IHM7XG4gICAgICAgIGxldCByO1xuICAgICAgICBpZiAoZyh0KSkge1xuICAgICAgICAgICAgcyA9IHQ7XG4gICAgICAgICAgICByID0ge1xuICAgICAgICAgICAgICAgIG5hbWU6IHNcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBzID0gdC5uYW1lO1xuICAgICAgICAgICAgciA9IHQ7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgaCA9IE9iamVjdC5nZXRQcm90b3R5cGVPZihlKSA9PT0gQmluZGluZ0ludGVyY2VwdG9yO1xuICAgICAgICByZXR1cm4gbmV3IEJpbmRpbmdCZWhhdmlvckRlZmluaXRpb24oZSwgaShQKGUsIFwibmFtZVwiKSwgcyksIG4oUChlLCBcImFsaWFzZXNcIiksIHIuYWxpYXNlcywgZS5hbGlhc2VzKSwgVC5rZXlGcm9tKHMpLCBvKFwic3RyYXRlZ3lcIiwgciwgZSwgKCgpID0+IGggPyAyIDogMSkpKTtcbiAgICB9XG4gICAgcmVnaXN0ZXIodCkge1xuICAgICAgICBjb25zdCB7VHlwZTogZSwga2V5OiByLCBhbGlhc2VzOiBpLCBzdHJhdGVneTogbn0gPSB0aGlzO1xuICAgICAgICBzd2l0Y2ggKG4pIHtcbiAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICBzLnNpbmdsZXRvbihyLCBlKS5yZWdpc3Rlcih0KTtcbiAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgcy5pbnN0YW5jZShyLCBuZXcgQmluZGluZ0JlaGF2aW9yRmFjdG9yeSh0LCBlKSkucmVnaXN0ZXIodCk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICBzLmFsaWFzVG8ociwgZSkucmVnaXN0ZXIodCk7XG4gICAgICAgIEMoaSwgVCwgciwgdCk7XG4gICAgfVxufVxuXG5jbGFzcyBCaW5kaW5nQmVoYXZpb3JGYWN0b3J5IHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlKSB7XG4gICAgICAgIHRoaXMuY3RuID0gdDtcbiAgICAgICAgdGhpcy5UeXBlID0gZTtcbiAgICAgICAgdGhpcy5kZXBzID0gci5nZXREZXBlbmRlbmNpZXMoZSk7XG4gICAgfVxuICAgIGNvbnN0cnVjdCh0LCBlKSB7XG4gICAgICAgIGNvbnN0IHMgPSB0aGlzLmN0bjtcbiAgICAgICAgY29uc3QgciA9IHRoaXMuZGVwcztcbiAgICAgICAgc3dpdGNoIChyLmxlbmd0aCkge1xuICAgICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAgIHJldHVybiBuZXcgdGhpcy5UeXBlKHQsIGUpO1xuXG4gICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgcmV0dXJuIG5ldyB0aGlzLlR5cGUocy5nZXQoclswXSksIHQsIGUpO1xuXG4gICAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgcmV0dXJuIG5ldyB0aGlzLlR5cGUocy5nZXQoclswXSksIHMuZ2V0KHJbMV0pLCB0LCBlKTtcblxuICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICByZXR1cm4gbmV3IHRoaXMuVHlwZSguLi5yLm1hcCgodCA9PiBzLmdldCh0KSkpLCB0LCBlKTtcbiAgICAgICAgfVxuICAgIH1cbn1cblxuY2xhc3MgQmluZGluZ0ludGVyY2VwdG9yIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlKSB7XG4gICAgICAgIHRoaXMuYmluZGluZyA9IHQ7XG4gICAgICAgIHRoaXMuZXhwciA9IGU7XG4gICAgICAgIHRoaXMuaW50ZXJjZXB0b3IgPSB0aGlzO1xuICAgICAgICBsZXQgcztcbiAgICAgICAgd2hpbGUgKHQuaW50ZXJjZXB0b3IgIT09IHRoaXMpIHtcbiAgICAgICAgICAgIHMgPSB0LmludGVyY2VwdG9yO1xuICAgICAgICAgICAgdC5pbnRlcmNlcHRvciA9IHRoaXM7XG4gICAgICAgICAgICB0ID0gcztcbiAgICAgICAgfVxuICAgIH1cbiAgICBnZXQgb0woKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmJpbmRpbmcub0w7XG4gICAgfVxuICAgIGdldCBsb2NhdG9yKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5iaW5kaW5nLmxvY2F0b3I7XG4gICAgfVxuICAgIGdldCAkc2NvcGUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmJpbmRpbmcuJHNjb3BlO1xuICAgIH1cbiAgICBnZXQgaXNCb3VuZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuYmluZGluZy5pc0JvdW5kO1xuICAgIH1cbiAgICBnZXQgb2JzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5iaW5kaW5nLm9icztcbiAgICB9XG4gICAgZ2V0IHNvdXJjZUV4cHJlc3Npb24oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmJpbmRpbmcuc291cmNlRXhwcmVzc2lvbjtcbiAgICB9XG4gICAgdXBkYXRlVGFyZ2V0KHQsIGUpIHtcbiAgICAgICAgdGhpcy5iaW5kaW5nLnVwZGF0ZVRhcmdldCh0LCBlKTtcbiAgICB9XG4gICAgdXBkYXRlU291cmNlKHQsIGUpIHtcbiAgICAgICAgdGhpcy5iaW5kaW5nLnVwZGF0ZVNvdXJjZSh0LCBlKTtcbiAgICB9XG4gICAgY2FsbFNvdXJjZSh0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLmJpbmRpbmcuY2FsbFNvdXJjZSh0KTtcbiAgICB9XG4gICAgaGFuZGxlQ2hhbmdlKHQsIGUsIHMpIHtcbiAgICAgICAgdGhpcy5iaW5kaW5nLmhhbmRsZUNoYW5nZSh0LCBlLCBzKTtcbiAgICB9XG4gICAgaGFuZGxlQ29sbGVjdGlvbkNoYW5nZSh0LCBlKSB7XG4gICAgICAgIHRoaXMuYmluZGluZy5oYW5kbGVDb2xsZWN0aW9uQ2hhbmdlKHQsIGUpO1xuICAgIH1cbiAgICBvYnNlcnZlKHQsIGUpIHtcbiAgICAgICAgdGhpcy5iaW5kaW5nLm9ic2VydmUodCwgZSk7XG4gICAgfVxuICAgIG9ic2VydmVDb2xsZWN0aW9uKHQpIHtcbiAgICAgICAgdGhpcy5iaW5kaW5nLm9ic2VydmVDb2xsZWN0aW9uKHQpO1xuICAgIH1cbiAgICAkYmluZCh0LCBlKSB7XG4gICAgICAgIHRoaXMuYmluZGluZy4kYmluZCh0LCBlKTtcbiAgICB9XG4gICAgJHVuYmluZCh0KSB7XG4gICAgICAgIHRoaXMuYmluZGluZy4kdW5iaW5kKHQpO1xuICAgIH1cbn1cblxuY29uc3QgUiA9IHgoXCJiaW5kaW5nLWJlaGF2aW9yXCIpO1xuXG5jb25zdCBQID0gKHQsIGUpID0+IEEoVShlKSwgdCk7XG5cbmNvbnN0IFQgPSBPYmplY3QuZnJlZXplKHtcbiAgICBuYW1lOiBSLFxuICAgIGtleUZyb20odCkge1xuICAgICAgICByZXR1cm4gYCR7Un06JHt0fWA7XG4gICAgfSxcbiAgICBpc1R5cGUodCkge1xuICAgICAgICByZXR1cm4gcCh0KSAmJiB5KFIsIHQpO1xuICAgIH0sXG4gICAgZGVmaW5lKHQsIGUpIHtcbiAgICAgICAgY29uc3QgcyA9IEJpbmRpbmdCZWhhdmlvckRlZmluaXRpb24uY3JlYXRlKHQsIGUpO1xuICAgICAgICBtKFIsIHMsIHMuVHlwZSk7XG4gICAgICAgIG0oUiwgcywgcyk7XG4gICAgICAgIFMoZSwgUik7XG4gICAgICAgIHJldHVybiBzLlR5cGU7XG4gICAgfSxcbiAgICBnZXREZWZpbml0aW9uKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IEEoUiwgdCk7XG4gICAgICAgIGlmICh2b2lkIDAgPT09IGUpIHRocm93IG5ldyBFcnJvcihgQVVSMDE1MToke3QubmFtZX1gKTtcbiAgICAgICAgcmV0dXJuIGU7XG4gICAgfSxcbiAgICBhbm5vdGF0ZSh0LCBlLCBzKSB7XG4gICAgICAgIG0oVShlKSwgcywgdCk7XG4gICAgfSxcbiAgICBnZXRBbm5vdGF0aW9uOiBQXG59KTtcblxuZnVuY3Rpb24gaih0KSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgcmV0dXJuIEQuZGVmaW5lKHQsIGUpO1xuICAgIH07XG59XG5cbmNsYXNzIFZhbHVlQ29udmVydGVyRGVmaW5pdGlvbiB7XG4gICAgY29uc3RydWN0b3IodCwgZSwgcywgcikge1xuICAgICAgICB0aGlzLlR5cGUgPSB0O1xuICAgICAgICB0aGlzLm5hbWUgPSBlO1xuICAgICAgICB0aGlzLmFsaWFzZXMgPSBzO1xuICAgICAgICB0aGlzLmtleSA9IHI7XG4gICAgfVxuICAgIHN0YXRpYyBjcmVhdGUodCwgZSkge1xuICAgICAgICBsZXQgcztcbiAgICAgICAgbGV0IHI7XG4gICAgICAgIGlmIChnKHQpKSB7XG4gICAgICAgICAgICBzID0gdDtcbiAgICAgICAgICAgIHIgPSB7XG4gICAgICAgICAgICAgICAgbmFtZTogc1xuICAgICAgICAgICAgfTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHMgPSB0Lm5hbWU7XG4gICAgICAgICAgICByID0gdDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbmV3IFZhbHVlQ29udmVydGVyRGVmaW5pdGlvbihlLCBpKE0oZSwgXCJuYW1lXCIpLCBzKSwgbihNKGUsIFwiYWxpYXNlc1wiKSwgci5hbGlhc2VzLCBlLmFsaWFzZXMpLCBELmtleUZyb20ocykpO1xuICAgIH1cbiAgICByZWdpc3Rlcih0KSB7XG4gICAgICAgIGNvbnN0IHtUeXBlOiBlLCBrZXk6IHIsIGFsaWFzZXM6IGl9ID0gdGhpcztcbiAgICAgICAgcy5zaW5nbGV0b24ociwgZSkucmVnaXN0ZXIodCk7XG4gICAgICAgIHMuYWxpYXNUbyhyLCBlKS5yZWdpc3Rlcih0KTtcbiAgICAgICAgQyhpLCBELCByLCB0KTtcbiAgICB9XG59XG5cbmNvbnN0IEkgPSB4KFwidmFsdWUtY29udmVydGVyXCIpO1xuXG5jb25zdCBNID0gKHQsIGUpID0+IEEoVShlKSwgdCk7XG5cbmNvbnN0IEQgPSBPYmplY3QuZnJlZXplKHtcbiAgICBuYW1lOiBJLFxuICAgIGtleUZyb206IHQgPT4gYCR7SX06JHt0fWAsXG4gICAgaXNUeXBlKHQpIHtcbiAgICAgICAgcmV0dXJuIHAodCkgJiYgeShJLCB0KTtcbiAgICB9LFxuICAgIGRlZmluZSh0LCBlKSB7XG4gICAgICAgIGNvbnN0IHMgPSBWYWx1ZUNvbnZlcnRlckRlZmluaXRpb24uY3JlYXRlKHQsIGUpO1xuICAgICAgICBtKEksIHMsIHMuVHlwZSk7XG4gICAgICAgIG0oSSwgcywgcyk7XG4gICAgICAgIFMoZSwgSSk7XG4gICAgICAgIHJldHVybiBzLlR5cGU7XG4gICAgfSxcbiAgICBnZXREZWZpbml0aW9uKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IEEoSSwgdCk7XG4gICAgICAgIGlmICh2b2lkIDAgPT09IGUpIHRocm93IG5ldyBFcnJvcihgQVVSMDE1Mjoke3QubmFtZX1gKTtcbiAgICAgICAgcmV0dXJuIGU7XG4gICAgfSxcbiAgICBhbm5vdGF0ZSh0LCBlLCBzKSB7XG4gICAgICAgIG0oVShlKSwgcywgdCk7XG4gICAgfSxcbiAgICBnZXRBbm5vdGF0aW9uOiBNXG59KTtcblxudmFyIEY7XG5cbihmdW5jdGlvbih0KSB7XG4gICAgdFt0W1wiQ2FsbHNGdW5jdGlvblwiXSA9IDEyOF0gPSBcIkNhbGxzRnVuY3Rpb25cIjtcbiAgICB0W3RbXCJIYXNBbmNlc3RvclwiXSA9IDI1Nl0gPSBcIkhhc0FuY2VzdG9yXCI7XG4gICAgdFt0W1wiSXNQcmltYXJ5XCJdID0gNTEyXSA9IFwiSXNQcmltYXJ5XCI7XG4gICAgdFt0W1wiSXNMZWZ0SGFuZFNpZGVcIl0gPSAxMDI0XSA9IFwiSXNMZWZ0SGFuZFNpZGVcIjtcbiAgICB0W3RbXCJIYXNCaW5kXCJdID0gMjA0OF0gPSBcIkhhc0JpbmRcIjtcbiAgICB0W3RbXCJIYXNVbmJpbmRcIl0gPSA0MDk2XSA9IFwiSGFzVW5iaW5kXCI7XG4gICAgdFt0W1wiSXNBc3NpZ25hYmxlXCJdID0gODE5Ml0gPSBcIklzQXNzaWduYWJsZVwiO1xuICAgIHRbdFtcIklzTGl0ZXJhbFwiXSA9IDE2Mzg0XSA9IFwiSXNMaXRlcmFsXCI7XG4gICAgdFt0W1wiSXNSZXNvdXJjZVwiXSA9IDMyNzY4XSA9IFwiSXNSZXNvdXJjZVwiO1xuICAgIHRbdFtcIklzRm9yRGVjbGFyYXRpb25cIl0gPSA2NTUzNl0gPSBcIklzRm9yRGVjbGFyYXRpb25cIjtcbiAgICB0W3RbXCJUeXBlXCJdID0gMzFdID0gXCJUeXBlXCI7XG4gICAgdFt0W1wiQWNjZXNzVGhpc1wiXSA9IDE3OTNdID0gXCJBY2Nlc3NUaGlzXCI7XG4gICAgdFt0W1wiQWNjZXNzU2NvcGVcIl0gPSAxMDA4Ml0gPSBcIkFjY2Vzc1Njb3BlXCI7XG4gICAgdFt0W1wiQXJyYXlMaXRlcmFsXCJdID0gMTc5NTVdID0gXCJBcnJheUxpdGVyYWxcIjtcbiAgICB0W3RbXCJPYmplY3RMaXRlcmFsXCJdID0gMTc5NTZdID0gXCJPYmplY3RMaXRlcmFsXCI7XG4gICAgdFt0W1wiUHJpbWl0aXZlTGl0ZXJhbFwiXSA9IDE3OTI1XSA9IFwiUHJpbWl0aXZlTGl0ZXJhbFwiO1xuICAgIHRbdFtcIlRlbXBsYXRlXCJdID0gMTc5NThdID0gXCJUZW1wbGF0ZVwiO1xuICAgIHRbdFtcIlVuYXJ5XCJdID0gMzldID0gXCJVbmFyeVwiO1xuICAgIHRbdFtcIkNhbGxTY29wZVwiXSA9IDE0NDhdID0gXCJDYWxsU2NvcGVcIjtcbiAgICB0W3RbXCJDYWxsTWVtYmVyXCJdID0gMTE2MV0gPSBcIkNhbGxNZW1iZXJcIjtcbiAgICB0W3RbXCJDYWxsRnVuY3Rpb25cIl0gPSAxMTYyXSA9IFwiQ2FsbEZ1bmN0aW9uXCI7XG4gICAgdFt0W1wiQWNjZXNzTWVtYmVyXCJdID0gOTMyM10gPSBcIkFjY2Vzc01lbWJlclwiO1xuICAgIHRbdFtcIkFjY2Vzc0tleWVkXCJdID0gOTMyNF0gPSBcIkFjY2Vzc0tleWVkXCI7XG4gICAgdFt0W1wiVGFnZ2VkVGVtcGxhdGVcIl0gPSAxMTk3XSA9IFwiVGFnZ2VkVGVtcGxhdGVcIjtcbiAgICB0W3RbXCJCaW5hcnlcIl0gPSA0Nl0gPSBcIkJpbmFyeVwiO1xuICAgIHRbdFtcIkNvbmRpdGlvbmFsXCJdID0gNjNdID0gXCJDb25kaXRpb25hbFwiO1xuICAgIHRbdFtcIkFzc2lnblwiXSA9IDgyMDhdID0gXCJBc3NpZ25cIjtcbiAgICB0W3RbXCJWYWx1ZUNvbnZlcnRlclwiXSA9IDM2OTEzXSA9IFwiVmFsdWVDb252ZXJ0ZXJcIjtcbiAgICB0W3RbXCJCaW5kaW5nQmVoYXZpb3JcIl0gPSAzODk2Ml0gPSBcIkJpbmRpbmdCZWhhdmlvclwiO1xuICAgIHRbdFtcIkh0bWxMaXRlcmFsXCJdID0gNTFdID0gXCJIdG1sTGl0ZXJhbFwiO1xuICAgIHRbdFtcIkFycmF5QmluZGluZ1BhdHRlcm5cIl0gPSA2NTU1Nl0gPSBcIkFycmF5QmluZGluZ1BhdHRlcm5cIjtcbiAgICB0W3RbXCJPYmplY3RCaW5kaW5nUGF0dGVyblwiXSA9IDY1NTU3XSA9IFwiT2JqZWN0QmluZGluZ1BhdHRlcm5cIjtcbiAgICB0W3RbXCJCaW5kaW5nSWRlbnRpZmllclwiXSA9IDY1NTU4XSA9IFwiQmluZGluZ0lkZW50aWZpZXJcIjtcbiAgICB0W3RbXCJGb3JPZlN0YXRlbWVudFwiXSA9IDYxOTldID0gXCJGb3JPZlN0YXRlbWVudFwiO1xuICAgIHRbdFtcIkludGVycG9sYXRpb25cIl0gPSAyNF0gPSBcIkludGVycG9sYXRpb25cIjtcbiAgICB0W3RbXCJBcnJheURlc3RydWN0dXJpbmdcIl0gPSA5MDEzN10gPSBcIkFycmF5RGVzdHJ1Y3R1cmluZ1wiO1xuICAgIHRbdFtcIk9iamVjdERlc3RydWN0dXJpbmdcIl0gPSAxMDY1MjFdID0gXCJPYmplY3REZXN0cnVjdHVyaW5nXCI7XG4gICAgdFt0W1wiRGVzdHJ1Y3R1cmluZ0Fzc2lnbm1lbnRMZWFmXCJdID0gMTM5Mjg5XSA9IFwiRGVzdHJ1Y3R1cmluZ0Fzc2lnbm1lbnRMZWFmXCI7XG59KShGIHx8IChGID0ge30pKTtcblxuY2xhc3MgVW5wYXJzZXIge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICB0aGlzLnRleHQgPSBcIlwiO1xuICAgIH1cbiAgICBzdGF0aWMgdW5wYXJzZSh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSBuZXcgVW5wYXJzZXI7XG4gICAgICAgIHQuYWNjZXB0KGUpO1xuICAgICAgICByZXR1cm4gZS50ZXh0O1xuICAgIH1cbiAgICB2aXNpdEFjY2Vzc01lbWJlcih0KSB7XG4gICAgICAgIHQub2JqZWN0LmFjY2VwdCh0aGlzKTtcbiAgICAgICAgdGhpcy50ZXh0ICs9IGAuJHt0Lm5hbWV9YDtcbiAgICB9XG4gICAgdmlzaXRBY2Nlc3NLZXllZCh0KSB7XG4gICAgICAgIHQub2JqZWN0LmFjY2VwdCh0aGlzKTtcbiAgICAgICAgdGhpcy50ZXh0ICs9IFwiW1wiO1xuICAgICAgICB0LmtleS5hY2NlcHQodGhpcyk7XG4gICAgICAgIHRoaXMudGV4dCArPSBcIl1cIjtcbiAgICB9XG4gICAgdmlzaXRBY2Nlc3NUaGlzKHQpIHtcbiAgICAgICAgaWYgKDAgPT09IHQuYW5jZXN0b3IpIHtcbiAgICAgICAgICAgIHRoaXMudGV4dCArPSBcIiR0aGlzXCI7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy50ZXh0ICs9IFwiJHBhcmVudFwiO1xuICAgICAgICBsZXQgZSA9IHQuYW5jZXN0b3IgLSAxO1xuICAgICAgICB3aGlsZSAoZS0tKSB0aGlzLnRleHQgKz0gXCIuJHBhcmVudFwiO1xuICAgIH1cbiAgICB2aXNpdEFjY2Vzc1Njb3BlKHQpIHtcbiAgICAgICAgbGV0IGUgPSB0LmFuY2VzdG9yO1xuICAgICAgICB3aGlsZSAoZS0tKSB0aGlzLnRleHQgKz0gXCIkcGFyZW50LlwiO1xuICAgICAgICB0aGlzLnRleHQgKz0gdC5uYW1lO1xuICAgIH1cbiAgICB2aXNpdEFycmF5TGl0ZXJhbCh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSB0LmVsZW1lbnRzO1xuICAgICAgICB0aGlzLnRleHQgKz0gXCJbXCI7XG4gICAgICAgIGZvciAobGV0IHQgPSAwLCBzID0gZS5sZW5ndGg7IHQgPCBzOyArK3QpIHtcbiAgICAgICAgICAgIGlmICgwICE9PSB0KSB0aGlzLnRleHQgKz0gXCIsXCI7XG4gICAgICAgICAgICBlW3RdLmFjY2VwdCh0aGlzKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnRleHQgKz0gXCJdXCI7XG4gICAgfVxuICAgIHZpc2l0T2JqZWN0TGl0ZXJhbCh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSB0LmtleXM7XG4gICAgICAgIGNvbnN0IHMgPSB0LnZhbHVlcztcbiAgICAgICAgdGhpcy50ZXh0ICs9IFwie1wiO1xuICAgICAgICBmb3IgKGxldCB0ID0gMCwgciA9IGUubGVuZ3RoOyB0IDwgcjsgKyt0KSB7XG4gICAgICAgICAgICBpZiAoMCAhPT0gdCkgdGhpcy50ZXh0ICs9IFwiLFwiO1xuICAgICAgICAgICAgdGhpcy50ZXh0ICs9IGAnJHtlW3RdfSc6YDtcbiAgICAgICAgICAgIHNbdF0uYWNjZXB0KHRoaXMpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMudGV4dCArPSBcIn1cIjtcbiAgICB9XG4gICAgdmlzaXRQcmltaXRpdmVMaXRlcmFsKHQpIHtcbiAgICAgICAgdGhpcy50ZXh0ICs9IFwiKFwiO1xuICAgICAgICBpZiAoZyh0LnZhbHVlKSkge1xuICAgICAgICAgICAgY29uc3QgZSA9IHQudmFsdWUucmVwbGFjZSgvJy9nLCBcIlxcXFwnXCIpO1xuICAgICAgICAgICAgdGhpcy50ZXh0ICs9IGAnJHtlfSdgO1xuICAgICAgICB9IGVsc2UgdGhpcy50ZXh0ICs9IGAke3QudmFsdWV9YDtcbiAgICAgICAgdGhpcy50ZXh0ICs9IFwiKVwiO1xuICAgIH1cbiAgICB2aXNpdENhbGxGdW5jdGlvbih0KSB7XG4gICAgICAgIHRoaXMudGV4dCArPSBcIihcIjtcbiAgICAgICAgdC5mdW5jLmFjY2VwdCh0aGlzKTtcbiAgICAgICAgdGhpcy53cml0ZUFyZ3ModC5hcmdzKTtcbiAgICAgICAgdGhpcy50ZXh0ICs9IFwiKVwiO1xuICAgIH1cbiAgICB2aXNpdENhbGxNZW1iZXIodCkge1xuICAgICAgICB0aGlzLnRleHQgKz0gXCIoXCI7XG4gICAgICAgIHQub2JqZWN0LmFjY2VwdCh0aGlzKTtcbiAgICAgICAgdGhpcy50ZXh0ICs9IGAuJHt0Lm5hbWV9YDtcbiAgICAgICAgdGhpcy53cml0ZUFyZ3ModC5hcmdzKTtcbiAgICAgICAgdGhpcy50ZXh0ICs9IFwiKVwiO1xuICAgIH1cbiAgICB2aXNpdENhbGxTY29wZSh0KSB7XG4gICAgICAgIHRoaXMudGV4dCArPSBcIihcIjtcbiAgICAgICAgbGV0IGUgPSB0LmFuY2VzdG9yO1xuICAgICAgICB3aGlsZSAoZS0tKSB0aGlzLnRleHQgKz0gXCIkcGFyZW50LlwiO1xuICAgICAgICB0aGlzLnRleHQgKz0gdC5uYW1lO1xuICAgICAgICB0aGlzLndyaXRlQXJncyh0LmFyZ3MpO1xuICAgICAgICB0aGlzLnRleHQgKz0gXCIpXCI7XG4gICAgfVxuICAgIHZpc2l0VGVtcGxhdGUodCkge1xuICAgICAgICBjb25zdCB7Y29va2VkOiBlLCBleHByZXNzaW9uczogc30gPSB0O1xuICAgICAgICBjb25zdCByID0gcy5sZW5ndGg7XG4gICAgICAgIHRoaXMudGV4dCArPSBcImBcIjtcbiAgICAgICAgdGhpcy50ZXh0ICs9IGVbMF07XG4gICAgICAgIGZvciAobGV0IHQgPSAwOyB0IDwgcjsgdCsrKSB7XG4gICAgICAgICAgICBzW3RdLmFjY2VwdCh0aGlzKTtcbiAgICAgICAgICAgIHRoaXMudGV4dCArPSBlW3QgKyAxXTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnRleHQgKz0gXCJgXCI7XG4gICAgfVxuICAgIHZpc2l0VGFnZ2VkVGVtcGxhdGUodCkge1xuICAgICAgICBjb25zdCB7Y29va2VkOiBlLCBleHByZXNzaW9uczogc30gPSB0O1xuICAgICAgICBjb25zdCByID0gcy5sZW5ndGg7XG4gICAgICAgIHQuZnVuYy5hY2NlcHQodGhpcyk7XG4gICAgICAgIHRoaXMudGV4dCArPSBcImBcIjtcbiAgICAgICAgdGhpcy50ZXh0ICs9IGVbMF07XG4gICAgICAgIGZvciAobGV0IHQgPSAwOyB0IDwgcjsgdCsrKSB7XG4gICAgICAgICAgICBzW3RdLmFjY2VwdCh0aGlzKTtcbiAgICAgICAgICAgIHRoaXMudGV4dCArPSBlW3QgKyAxXTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnRleHQgKz0gXCJgXCI7XG4gICAgfVxuICAgIHZpc2l0VW5hcnkodCkge1xuICAgICAgICB0aGlzLnRleHQgKz0gYCgke3Qub3BlcmF0aW9ufWA7XG4gICAgICAgIGlmICh0Lm9wZXJhdGlvbi5jaGFyQ29kZUF0KDApID49IDk3KSB0aGlzLnRleHQgKz0gXCIgXCI7XG4gICAgICAgIHQuZXhwcmVzc2lvbi5hY2NlcHQodGhpcyk7XG4gICAgICAgIHRoaXMudGV4dCArPSBcIilcIjtcbiAgICB9XG4gICAgdmlzaXRCaW5hcnkodCkge1xuICAgICAgICB0aGlzLnRleHQgKz0gXCIoXCI7XG4gICAgICAgIHQubGVmdC5hY2NlcHQodGhpcyk7XG4gICAgICAgIGlmICgxMDUgPT09IHQub3BlcmF0aW9uLmNoYXJDb2RlQXQoMCkpIHRoaXMudGV4dCArPSBgICR7dC5vcGVyYXRpb259IGA7IGVsc2UgdGhpcy50ZXh0ICs9IHQub3BlcmF0aW9uO1xuICAgICAgICB0LnJpZ2h0LmFjY2VwdCh0aGlzKTtcbiAgICAgICAgdGhpcy50ZXh0ICs9IFwiKVwiO1xuICAgIH1cbiAgICB2aXNpdENvbmRpdGlvbmFsKHQpIHtcbiAgICAgICAgdGhpcy50ZXh0ICs9IFwiKFwiO1xuICAgICAgICB0LmNvbmRpdGlvbi5hY2NlcHQodGhpcyk7XG4gICAgICAgIHRoaXMudGV4dCArPSBcIj9cIjtcbiAgICAgICAgdC55ZXMuYWNjZXB0KHRoaXMpO1xuICAgICAgICB0aGlzLnRleHQgKz0gXCI6XCI7XG4gICAgICAgIHQubm8uYWNjZXB0KHRoaXMpO1xuICAgICAgICB0aGlzLnRleHQgKz0gXCIpXCI7XG4gICAgfVxuICAgIHZpc2l0QXNzaWduKHQpIHtcbiAgICAgICAgdGhpcy50ZXh0ICs9IFwiKFwiO1xuICAgICAgICB0LnRhcmdldC5hY2NlcHQodGhpcyk7XG4gICAgICAgIHRoaXMudGV4dCArPSBcIj1cIjtcbiAgICAgICAgdC52YWx1ZS5hY2NlcHQodGhpcyk7XG4gICAgICAgIHRoaXMudGV4dCArPSBcIilcIjtcbiAgICB9XG4gICAgdmlzaXRWYWx1ZUNvbnZlcnRlcih0KSB7XG4gICAgICAgIGNvbnN0IGUgPSB0LmFyZ3M7XG4gICAgICAgIHQuZXhwcmVzc2lvbi5hY2NlcHQodGhpcyk7XG4gICAgICAgIHRoaXMudGV4dCArPSBgfCR7dC5uYW1lfWA7XG4gICAgICAgIGZvciAobGV0IHQgPSAwLCBzID0gZS5sZW5ndGg7IHQgPCBzOyArK3QpIHtcbiAgICAgICAgICAgIHRoaXMudGV4dCArPSBcIjpcIjtcbiAgICAgICAgICAgIGVbdF0uYWNjZXB0KHRoaXMpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHZpc2l0QmluZGluZ0JlaGF2aW9yKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IHQuYXJncztcbiAgICAgICAgdC5leHByZXNzaW9uLmFjY2VwdCh0aGlzKTtcbiAgICAgICAgdGhpcy50ZXh0ICs9IGAmJHt0Lm5hbWV9YDtcbiAgICAgICAgZm9yIChsZXQgdCA9IDAsIHMgPSBlLmxlbmd0aDsgdCA8IHM7ICsrdCkge1xuICAgICAgICAgICAgdGhpcy50ZXh0ICs9IFwiOlwiO1xuICAgICAgICAgICAgZVt0XS5hY2NlcHQodGhpcyk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgdmlzaXRBcnJheUJpbmRpbmdQYXR0ZXJuKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IHQuZWxlbWVudHM7XG4gICAgICAgIHRoaXMudGV4dCArPSBcIltcIjtcbiAgICAgICAgZm9yIChsZXQgdCA9IDAsIHMgPSBlLmxlbmd0aDsgdCA8IHM7ICsrdCkge1xuICAgICAgICAgICAgaWYgKDAgIT09IHQpIHRoaXMudGV4dCArPSBcIixcIjtcbiAgICAgICAgICAgIGVbdF0uYWNjZXB0KHRoaXMpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMudGV4dCArPSBcIl1cIjtcbiAgICB9XG4gICAgdmlzaXRPYmplY3RCaW5kaW5nUGF0dGVybih0KSB7XG4gICAgICAgIGNvbnN0IGUgPSB0LmtleXM7XG4gICAgICAgIGNvbnN0IHMgPSB0LnZhbHVlcztcbiAgICAgICAgdGhpcy50ZXh0ICs9IFwie1wiO1xuICAgICAgICBmb3IgKGxldCB0ID0gMCwgciA9IGUubGVuZ3RoOyB0IDwgcjsgKyt0KSB7XG4gICAgICAgICAgICBpZiAoMCAhPT0gdCkgdGhpcy50ZXh0ICs9IFwiLFwiO1xuICAgICAgICAgICAgdGhpcy50ZXh0ICs9IGAnJHtlW3RdfSc6YDtcbiAgICAgICAgICAgIHNbdF0uYWNjZXB0KHRoaXMpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMudGV4dCArPSBcIn1cIjtcbiAgICB9XG4gICAgdmlzaXRCaW5kaW5nSWRlbnRpZmllcih0KSB7XG4gICAgICAgIHRoaXMudGV4dCArPSB0Lm5hbWU7XG4gICAgfVxuICAgIHZpc2l0SHRtbExpdGVyYWwodCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJ2aXNpdEh0bWxMaXRlcmFsXCIpO1xuICAgIH1cbiAgICB2aXNpdEZvck9mU3RhdGVtZW50KHQpIHtcbiAgICAgICAgdC5kZWNsYXJhdGlvbi5hY2NlcHQodGhpcyk7XG4gICAgICAgIHRoaXMudGV4dCArPSBcIiBvZiBcIjtcbiAgICAgICAgdC5pdGVyYWJsZS5hY2NlcHQodGhpcyk7XG4gICAgfVxuICAgIHZpc2l0SW50ZXJwb2xhdGlvbih0KSB7XG4gICAgICAgIGNvbnN0IHtwYXJ0czogZSwgZXhwcmVzc2lvbnM6IHN9ID0gdDtcbiAgICAgICAgY29uc3QgciA9IHMubGVuZ3RoO1xuICAgICAgICB0aGlzLnRleHQgKz0gXCIke1wiO1xuICAgICAgICB0aGlzLnRleHQgKz0gZVswXTtcbiAgICAgICAgZm9yIChsZXQgdCA9IDA7IHQgPCByOyB0KyspIHtcbiAgICAgICAgICAgIHNbdF0uYWNjZXB0KHRoaXMpO1xuICAgICAgICAgICAgdGhpcy50ZXh0ICs9IGVbdCArIDFdO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMudGV4dCArPSBcIn1cIjtcbiAgICB9XG4gICAgdmlzaXREZXN0cnVjdHVyaW5nQXNzaWdubWVudEV4cHJlc3Npb24odCkge1xuICAgICAgICBjb25zdCBlID0gdC4ka2luZDtcbiAgICAgICAgY29uc3QgcyA9IDEwNjUyMSA9PT0gZTtcbiAgICAgICAgdGhpcy50ZXh0ICs9IHMgPyBcIntcIiA6IFwiW1wiO1xuICAgICAgICBjb25zdCByID0gdC5saXN0O1xuICAgICAgICBjb25zdCBpID0gci5sZW5ndGg7XG4gICAgICAgIGxldCBuO1xuICAgICAgICBsZXQgbztcbiAgICAgICAgZm9yIChuID0gMDsgbiA8IGk7IG4rKykge1xuICAgICAgICAgICAgbyA9IHJbbl07XG4gICAgICAgICAgICBzd2l0Y2ggKG8uJGtpbmQpIHtcbiAgICAgICAgICAgICAgY2FzZSAxMzkyODk6XG4gICAgICAgICAgICAgICAgby5hY2NlcHQodGhpcyk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgICAgY2FzZSA5MDEzNzpcbiAgICAgICAgICAgICAgY2FzZSAxMDY1MjE6XG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCB0ID0gby5zb3VyY2U7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0LmFjY2VwdCh0aGlzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudGV4dCArPSBcIjpcIjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBvLmFjY2VwdCh0aGlzKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHRoaXMudGV4dCArPSBzID8gXCJ9XCIgOiBcIl1cIjtcbiAgICB9XG4gICAgdmlzaXREZXN0cnVjdHVyaW5nQXNzaWdubWVudFNpbmdsZUV4cHJlc3Npb24odCkge1xuICAgICAgICB0LnNvdXJjZS5hY2NlcHQodGhpcyk7XG4gICAgICAgIHRoaXMudGV4dCArPSBcIjpcIjtcbiAgICAgICAgdC50YXJnZXQuYWNjZXB0KHRoaXMpO1xuICAgICAgICBjb25zdCBlID0gdC5pbml0aWFsaXplcjtcbiAgICAgICAgaWYgKHZvaWQgMCAhPT0gZSkge1xuICAgICAgICAgICAgdGhpcy50ZXh0ICs9IFwiPVwiO1xuICAgICAgICAgICAgZS5hY2NlcHQodGhpcyk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgdmlzaXREZXN0cnVjdHVyaW5nQXNzaWdubWVudFJlc3RFeHByZXNzaW9uKHQpIHtcbiAgICAgICAgdGhpcy50ZXh0ICs9IFwiLi4uXCI7XG4gICAgICAgIHQuYWNjZXB0KHRoaXMpO1xuICAgIH1cbiAgICB3cml0ZUFyZ3ModCkge1xuICAgICAgICB0aGlzLnRleHQgKz0gXCIoXCI7XG4gICAgICAgIGZvciAobGV0IGUgPSAwLCBzID0gdC5sZW5ndGg7IGUgPCBzOyArK2UpIHtcbiAgICAgICAgICAgIGlmICgwICE9PSBlKSB0aGlzLnRleHQgKz0gXCIsXCI7XG4gICAgICAgICAgICB0W2VdLmFjY2VwdCh0aGlzKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnRleHQgKz0gXCIpXCI7XG4gICAgfVxufVxuXG5jbGFzcyBDdXN0b21FeHByZXNzaW9uIHtcbiAgICBjb25zdHJ1Y3Rvcih0KSB7XG4gICAgICAgIHRoaXMudmFsdWUgPSB0O1xuICAgIH1cbiAgICBldmFsdWF0ZSh0LCBlLCBzLCByKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnZhbHVlO1xuICAgIH1cbn1cblxuY2xhc3MgQmluZGluZ0JlaGF2aW9yRXhwcmVzc2lvbiB7XG4gICAgY29uc3RydWN0b3IodCwgZSwgcykge1xuICAgICAgICB0aGlzLmV4cHJlc3Npb24gPSB0O1xuICAgICAgICB0aGlzLm5hbWUgPSBlO1xuICAgICAgICB0aGlzLmFyZ3MgPSBzO1xuICAgICAgICB0aGlzLmJlaGF2aW9yS2V5ID0gVC5rZXlGcm9tKGUpO1xuICAgIH1cbiAgICBnZXQgJGtpbmQoKSB7XG4gICAgICAgIHJldHVybiAzODk2MjtcbiAgICB9XG4gICAgZ2V0IGhhc0JpbmQoKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICBnZXQgaGFzVW5iaW5kKCkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgZXZhbHVhdGUodCwgZSwgcywgcikge1xuICAgICAgICByZXR1cm4gdGhpcy5leHByZXNzaW9uLmV2YWx1YXRlKHQsIGUsIHMsIHIpO1xuICAgIH1cbiAgICBhc3NpZ24odCwgZSwgcywgcikge1xuICAgICAgICByZXR1cm4gdGhpcy5leHByZXNzaW9uLmFzc2lnbih0LCBlLCBzLCByKTtcbiAgICB9XG4gICAgYmluZCh0LCBlLCBzKSB7XG4gICAgICAgIGlmICh0aGlzLmV4cHJlc3Npb24uaGFzQmluZCkgdGhpcy5leHByZXNzaW9uLmJpbmQodCwgZSwgcyk7XG4gICAgICAgIGNvbnN0IHIgPSBzLmxvY2F0b3IuZ2V0KHRoaXMuYmVoYXZpb3JLZXkpO1xuICAgICAgICBpZiAobnVsbCA9PSByKSB0aHJvdyBuZXcgRXJyb3IoYEFVUjAxMDE6JHt0aGlzLm5hbWV9YCk7XG4gICAgICAgIGlmICghKHIgaW5zdGFuY2VvZiBCaW5kaW5nQmVoYXZpb3JGYWN0b3J5KSkgaWYgKHZvaWQgMCA9PT0gc1t0aGlzLmJlaGF2aW9yS2V5XSkge1xuICAgICAgICAgICAgc1t0aGlzLmJlaGF2aW9yS2V5XSA9IHI7XG4gICAgICAgICAgICByLmJpbmQuY2FsbChyLCB0LCBlLCBzLCAuLi50aGlzLmFyZ3MubWFwKChyID0+IHIuZXZhbHVhdGUodCwgZSwgcy5sb2NhdG9yLCBudWxsKSkpKTtcbiAgICAgICAgfSBlbHNlIHRocm93IG5ldyBFcnJvcihgQVVSMDEwMjoke3RoaXMubmFtZX1gKTtcbiAgICB9XG4gICAgdW5iaW5kKHQsIGUsIHMpIHtcbiAgICAgICAgY29uc3QgciA9IHRoaXMuYmVoYXZpb3JLZXk7XG4gICAgICAgIGNvbnN0IGkgPSBzO1xuICAgICAgICBpZiAodm9pZCAwICE9PSBpW3JdKSB7XG4gICAgICAgICAgICBpZiAocChpW3JdLnVuYmluZCkpIGlbcl0udW5iaW5kKHQsIGUsIHMpO1xuICAgICAgICAgICAgaVtyXSA9IHZvaWQgMDtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5leHByZXNzaW9uLmhhc1VuYmluZCkgdGhpcy5leHByZXNzaW9uLnVuYmluZCh0LCBlLCBzKTtcbiAgICB9XG4gICAgYWNjZXB0KHQpIHtcbiAgICAgICAgcmV0dXJuIHQudmlzaXRCaW5kaW5nQmVoYXZpb3IodGhpcyk7XG4gICAgfVxuICAgIHRvU3RyaW5nKCkge1xuICAgICAgICByZXR1cm4gVW5wYXJzZXIudW5wYXJzZSh0aGlzKTtcbiAgICB9XG59XG5cbmNsYXNzIFZhbHVlQ29udmVydGVyRXhwcmVzc2lvbiB7XG4gICAgY29uc3RydWN0b3IodCwgZSwgcykge1xuICAgICAgICB0aGlzLmV4cHJlc3Npb24gPSB0O1xuICAgICAgICB0aGlzLm5hbWUgPSBlO1xuICAgICAgICB0aGlzLmFyZ3MgPSBzO1xuICAgICAgICB0aGlzLmNvbnZlcnRlcktleSA9IEQua2V5RnJvbShlKTtcbiAgICB9XG4gICAgZ2V0ICRraW5kKCkge1xuICAgICAgICByZXR1cm4gMzY5MTM7XG4gICAgfVxuICAgIGdldCBoYXNCaW5kKCkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIGdldCBoYXNVbmJpbmQoKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICBldmFsdWF0ZSh0LCBlLCBzLCByKSB7XG4gICAgICAgIGNvbnN0IGkgPSBzLmdldCh0aGlzLmNvbnZlcnRlcktleSk7XG4gICAgICAgIGlmIChudWxsID09IGkpIHRocm93IG5ldyBFcnJvcihgQVVSMDEwMzoke3RoaXMubmFtZX1gKTtcbiAgICAgICAgaWYgKG51bGwgIT09IHIgJiYgXCJoYW5kbGVDaGFuZ2VcIiBpbiByKSB7XG4gICAgICAgICAgICBjb25zdCB0ID0gaS5zaWduYWxzO1xuICAgICAgICAgICAgaWYgKG51bGwgIT0gdCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGUgPSBzLmdldChCKTtcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBzID0gMCwgaSA9IHQubGVuZ3RoOyBzIDwgaTsgKytzKSBlLmFkZFNpZ25hbExpc3RlbmVyKHRbc10sIHIpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChcInRvVmlld1wiIGluIGkpIHJldHVybiBpLnRvVmlldyh0aGlzLmV4cHJlc3Npb24uZXZhbHVhdGUodCwgZSwgcywgciksIC4uLnRoaXMuYXJncy5tYXAoKGkgPT4gaS5ldmFsdWF0ZSh0LCBlLCBzLCByKSkpKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuZXhwcmVzc2lvbi5ldmFsdWF0ZSh0LCBlLCBzLCByKTtcbiAgICB9XG4gICAgYXNzaWduKHQsIGUsIHMsIHIpIHtcbiAgICAgICAgY29uc3QgaSA9IHMuZ2V0KHRoaXMuY29udmVydGVyS2V5KTtcbiAgICAgICAgaWYgKG51bGwgPT0gaSkgdGhyb3cgbmV3IEVycm9yKGBBVVIwMTA0OiR7dGhpcy5uYW1lfWApO1xuICAgICAgICBpZiAoXCJmcm9tVmlld1wiIGluIGkpIHIgPSBpLmZyb21WaWV3KHIsIC4uLnRoaXMuYXJncy5tYXAoKHIgPT4gci5ldmFsdWF0ZSh0LCBlLCBzLCBudWxsKSkpKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuZXhwcmVzc2lvbi5hc3NpZ24odCwgZSwgcywgcik7XG4gICAgfVxuICAgIHVuYmluZCh0LCBlLCBzKSB7XG4gICAgICAgIGNvbnN0IHIgPSBzLmxvY2F0b3IuZ2V0KHRoaXMuY29udmVydGVyS2V5KTtcbiAgICAgICAgaWYgKHZvaWQgMCA9PT0gci5zaWduYWxzKSByZXR1cm47XG4gICAgICAgIGNvbnN0IGkgPSBzLmxvY2F0b3IuZ2V0KEIpO1xuICAgICAgICBmb3IgKGxldCB0ID0gMDsgdCA8IHIuc2lnbmFscy5sZW5ndGg7ICsrdCkgaS5yZW1vdmVTaWduYWxMaXN0ZW5lcihyLnNpZ25hbHNbdF0sIHMpO1xuICAgIH1cbiAgICBhY2NlcHQodCkge1xuICAgICAgICByZXR1cm4gdC52aXNpdFZhbHVlQ29udmVydGVyKHRoaXMpO1xuICAgIH1cbiAgICB0b1N0cmluZygpIHtcbiAgICAgICAgcmV0dXJuIFVucGFyc2VyLnVucGFyc2UodGhpcyk7XG4gICAgfVxufVxuXG5jbGFzcyBBc3NpZ25FeHByZXNzaW9uIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlKSB7XG4gICAgICAgIHRoaXMudGFyZ2V0ID0gdDtcbiAgICAgICAgdGhpcy52YWx1ZSA9IGU7XG4gICAgfVxuICAgIGdldCAka2luZCgpIHtcbiAgICAgICAgcmV0dXJuIDgyMDg7XG4gICAgfVxuICAgIGdldCBoYXNCaW5kKCkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIGdldCBoYXNVbmJpbmQoKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgZXZhbHVhdGUodCwgZSwgcywgcikge1xuICAgICAgICByZXR1cm4gdGhpcy50YXJnZXQuYXNzaWduKHQsIGUsIHMsIHRoaXMudmFsdWUuZXZhbHVhdGUodCwgZSwgcywgcikpO1xuICAgIH1cbiAgICBhc3NpZ24odCwgZSwgcywgcikge1xuICAgICAgICB0aGlzLnZhbHVlLmFzc2lnbih0LCBlLCBzLCByKTtcbiAgICAgICAgcmV0dXJuIHRoaXMudGFyZ2V0LmFzc2lnbih0LCBlLCBzLCByKTtcbiAgICB9XG4gICAgYWNjZXB0KHQpIHtcbiAgICAgICAgcmV0dXJuIHQudmlzaXRBc3NpZ24odGhpcyk7XG4gICAgfVxuICAgIHRvU3RyaW5nKCkge1xuICAgICAgICByZXR1cm4gVW5wYXJzZXIudW5wYXJzZSh0aGlzKTtcbiAgICB9XG59XG5cbmNsYXNzIENvbmRpdGlvbmFsRXhwcmVzc2lvbiB7XG4gICAgY29uc3RydWN0b3IodCwgZSwgcykge1xuICAgICAgICB0aGlzLmNvbmRpdGlvbiA9IHQ7XG4gICAgICAgIHRoaXMueWVzID0gZTtcbiAgICAgICAgdGhpcy5ubyA9IHM7XG4gICAgfVxuICAgIGdldCAka2luZCgpIHtcbiAgICAgICAgcmV0dXJuIDYzO1xuICAgIH1cbiAgICBnZXQgaGFzQmluZCgpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBnZXQgaGFzVW5iaW5kKCkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIGV2YWx1YXRlKHQsIGUsIHMsIHIpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY29uZGl0aW9uLmV2YWx1YXRlKHQsIGUsIHMsIHIpID8gdGhpcy55ZXMuZXZhbHVhdGUodCwgZSwgcywgcikgOiB0aGlzLm5vLmV2YWx1YXRlKHQsIGUsIHMsIHIpO1xuICAgIH1cbiAgICBhc3NpZ24odCwgZSwgcywgcikge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIGFjY2VwdCh0KSB7XG4gICAgICAgIHJldHVybiB0LnZpc2l0Q29uZGl0aW9uYWwodGhpcyk7XG4gICAgfVxuICAgIHRvU3RyaW5nKCkge1xuICAgICAgICByZXR1cm4gVW5wYXJzZXIudW5wYXJzZSh0aGlzKTtcbiAgICB9XG59XG5cbmNsYXNzIEFjY2Vzc1RoaXNFeHByZXNzaW9uIHtcbiAgICBjb25zdHJ1Y3Rvcih0ID0gMCkge1xuICAgICAgICB0aGlzLmFuY2VzdG9yID0gdDtcbiAgICB9XG4gICAgZ2V0ICRraW5kKCkge1xuICAgICAgICByZXR1cm4gMTc5MztcbiAgICB9XG4gICAgZ2V0IGhhc0JpbmQoKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgZ2V0IGhhc1VuYmluZCgpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBldmFsdWF0ZSh0LCBlLCBzLCByKSB7XG4gICAgICAgIHZhciBpO1xuICAgICAgICBsZXQgbiA9IGUub3ZlcnJpZGVDb250ZXh0O1xuICAgICAgICBsZXQgbyA9IGU7XG4gICAgICAgIGxldCBoID0gdGhpcy5hbmNlc3RvcjtcbiAgICAgICAgd2hpbGUgKGgtLSAmJiBuKSB7XG4gICAgICAgICAgICBvID0gby5wYXJlbnRTY29wZTtcbiAgICAgICAgICAgIG4gPSBudWxsICE9PSAoaSA9IG51bGwgPT09IG8gfHwgdm9pZCAwID09PSBvID8gdm9pZCAwIDogby5vdmVycmlkZUNvbnRleHQpICYmIHZvaWQgMCAhPT0gaSA/IGkgOiBudWxsO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBoIDwgMSAmJiBuID8gbi5iaW5kaW5nQ29udGV4dCA6IHZvaWQgMDtcbiAgICB9XG4gICAgYXNzaWduKHQsIGUsIHMsIHIpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBhY2NlcHQodCkge1xuICAgICAgICByZXR1cm4gdC52aXNpdEFjY2Vzc1RoaXModGhpcyk7XG4gICAgfVxuICAgIHRvU3RyaW5nKCkge1xuICAgICAgICByZXR1cm4gVW5wYXJzZXIudW5wYXJzZSh0aGlzKTtcbiAgICB9XG59XG5cbkFjY2Vzc1RoaXNFeHByZXNzaW9uLiR0aGlzID0gbmV3IEFjY2Vzc1RoaXNFeHByZXNzaW9uKDApO1xuXG5BY2Nlc3NUaGlzRXhwcmVzc2lvbi4kcGFyZW50ID0gbmV3IEFjY2Vzc1RoaXNFeHByZXNzaW9uKDEpO1xuXG5jbGFzcyBBY2Nlc3NTY29wZUV4cHJlc3Npb24ge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUgPSAwKSB7XG4gICAgICAgIHRoaXMubmFtZSA9IHQ7XG4gICAgICAgIHRoaXMuYW5jZXN0b3IgPSBlO1xuICAgIH1cbiAgICBnZXQgJGtpbmQoKSB7XG4gICAgICAgIHJldHVybiAxMDA4MjtcbiAgICB9XG4gICAgZ2V0IGhhc0JpbmQoKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgZ2V0IGhhc1VuYmluZCgpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBldmFsdWF0ZSh0LCBlLCBzLCByKSB7XG4gICAgICAgIGNvbnN0IGkgPSBCaW5kaW5nQ29udGV4dC5nZXQoZSwgdGhpcy5uYW1lLCB0aGlzLmFuY2VzdG9yLCB0KTtcbiAgICAgICAgaWYgKG51bGwgIT09IHIpIHIub2JzZXJ2ZShpLCB0aGlzLm5hbWUpO1xuICAgICAgICBjb25zdCBuID0gaVt0aGlzLm5hbWVdO1xuICAgICAgICBpZiAobnVsbCA9PSBuICYmIFwiJGhvc3RcIiA9PT0gdGhpcy5uYW1lKSB0aHJvdyBuZXcgRXJyb3IoXCJBVVIwMTA1XCIpO1xuICAgICAgICBpZiAoMSAmIHQpIHJldHVybiBuO1xuICAgICAgICByZXR1cm4gbnVsbCA9PSBuID8gXCJcIiA6IG47XG4gICAgfVxuICAgIGFzc2lnbih0LCBlLCBzLCByKSB7XG4gICAgICAgIHZhciBpO1xuICAgICAgICBpZiAoXCIkaG9zdFwiID09PSB0aGlzLm5hbWUpIHRocm93IG5ldyBFcnJvcihcIkFVUjAxMDZcIik7XG4gICAgICAgIGNvbnN0IG4gPSBCaW5kaW5nQ29udGV4dC5nZXQoZSwgdGhpcy5uYW1lLCB0aGlzLmFuY2VzdG9yLCB0KTtcbiAgICAgICAgaWYgKG4gaW5zdGFuY2VvZiBPYmplY3QpIGlmICh2b2lkIDAgIT09IChudWxsID09PSAoaSA9IG4uJG9ic2VydmVycykgfHwgdm9pZCAwID09PSBpID8gdm9pZCAwIDogaVt0aGlzLm5hbWVdKSkge1xuICAgICAgICAgICAgbi4kb2JzZXJ2ZXJzW3RoaXMubmFtZV0uc2V0VmFsdWUociwgdCk7XG4gICAgICAgICAgICByZXR1cm4gcjtcbiAgICAgICAgfSBlbHNlIHJldHVybiBuW3RoaXMubmFtZV0gPSByO1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIGFjY2VwdCh0KSB7XG4gICAgICAgIHJldHVybiB0LnZpc2l0QWNjZXNzU2NvcGUodGhpcyk7XG4gICAgfVxuICAgIHRvU3RyaW5nKCkge1xuICAgICAgICByZXR1cm4gVW5wYXJzZXIudW5wYXJzZSh0aGlzKTtcbiAgICB9XG59XG5cbmNsYXNzIEFjY2Vzc01lbWJlckV4cHJlc3Npb24ge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUpIHtcbiAgICAgICAgdGhpcy5vYmplY3QgPSB0O1xuICAgICAgICB0aGlzLm5hbWUgPSBlO1xuICAgIH1cbiAgICBnZXQgJGtpbmQoKSB7XG4gICAgICAgIHJldHVybiA5MzIzO1xuICAgIH1cbiAgICBnZXQgaGFzQmluZCgpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBnZXQgaGFzVW5iaW5kKCkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIGV2YWx1YXRlKHQsIGUsIHMsIHIpIHtcbiAgICAgICAgY29uc3QgaSA9IHRoaXMub2JqZWN0LmV2YWx1YXRlKHQsIGUsIHMsICgxMjggJiB0KSA+IDAgPyBudWxsIDogcik7XG4gICAgICAgIGlmICgxICYgdCkge1xuICAgICAgICAgICAgaWYgKG51bGwgPT0gaSkgcmV0dXJuIGk7XG4gICAgICAgICAgICBpZiAobnVsbCAhPT0gcikgci5vYnNlcnZlKGksIHRoaXMubmFtZSk7XG4gICAgICAgICAgICByZXR1cm4gaVt0aGlzLm5hbWVdO1xuICAgICAgICB9XG4gICAgICAgIGlmIChudWxsICE9PSByICYmIGkgaW5zdGFuY2VvZiBPYmplY3QpIHIub2JzZXJ2ZShpLCB0aGlzLm5hbWUpO1xuICAgICAgICByZXR1cm4gaSA/IGlbdGhpcy5uYW1lXSA6IFwiXCI7XG4gICAgfVxuICAgIGFzc2lnbih0LCBlLCBzLCByKSB7XG4gICAgICAgIGNvbnN0IGkgPSB0aGlzLm9iamVjdC5ldmFsdWF0ZSh0LCBlLCBzLCBudWxsKTtcbiAgICAgICAgaWYgKGkgaW5zdGFuY2VvZiBPYmplY3QpIGlmICh2b2lkIDAgIT09IGkuJG9ic2VydmVycyAmJiB2b2lkIDAgIT09IGkuJG9ic2VydmVyc1t0aGlzLm5hbWVdKSBpLiRvYnNlcnZlcnNbdGhpcy5uYW1lXS5zZXRWYWx1ZShyLCB0KTsgZWxzZSBpW3RoaXMubmFtZV0gPSByOyBlbHNlIHRoaXMub2JqZWN0LmFzc2lnbih0LCBlLCBzLCB7XG4gICAgICAgICAgICBbdGhpcy5uYW1lXTogclxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIHI7XG4gICAgfVxuICAgIGFjY2VwdCh0KSB7XG4gICAgICAgIHJldHVybiB0LnZpc2l0QWNjZXNzTWVtYmVyKHRoaXMpO1xuICAgIH1cbiAgICB0b1N0cmluZygpIHtcbiAgICAgICAgcmV0dXJuIFVucGFyc2VyLnVucGFyc2UodGhpcyk7XG4gICAgfVxufVxuXG5jbGFzcyBBY2Nlc3NLZXllZEV4cHJlc3Npb24ge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUpIHtcbiAgICAgICAgdGhpcy5vYmplY3QgPSB0O1xuICAgICAgICB0aGlzLmtleSA9IGU7XG4gICAgfVxuICAgIGdldCAka2luZCgpIHtcbiAgICAgICAgcmV0dXJuIDkzMjQ7XG4gICAgfVxuICAgIGdldCBoYXNCaW5kKCkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIGdldCBoYXNVbmJpbmQoKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgZXZhbHVhdGUodCwgZSwgcywgcikge1xuICAgICAgICBjb25zdCBpID0gdGhpcy5vYmplY3QuZXZhbHVhdGUodCwgZSwgcywgKDEyOCAmIHQpID4gMCA/IG51bGwgOiByKTtcbiAgICAgICAgaWYgKGkgaW5zdGFuY2VvZiBPYmplY3QpIHtcbiAgICAgICAgICAgIGNvbnN0IG4gPSB0aGlzLmtleS5ldmFsdWF0ZSh0LCBlLCBzLCAoMTI4ICYgdCkgPiAwID8gbnVsbCA6IHIpO1xuICAgICAgICAgICAgaWYgKG51bGwgIT09IHIpIHIub2JzZXJ2ZShpLCBuKTtcbiAgICAgICAgICAgIHJldHVybiBpW25dO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgYXNzaWduKHQsIGUsIHMsIHIpIHtcbiAgICAgICAgY29uc3QgaSA9IHRoaXMub2JqZWN0LmV2YWx1YXRlKHQsIGUsIHMsIG51bGwpO1xuICAgICAgICBjb25zdCBuID0gdGhpcy5rZXkuZXZhbHVhdGUodCwgZSwgcywgbnVsbCk7XG4gICAgICAgIHJldHVybiBpW25dID0gcjtcbiAgICB9XG4gICAgYWNjZXB0KHQpIHtcbiAgICAgICAgcmV0dXJuIHQudmlzaXRBY2Nlc3NLZXllZCh0aGlzKTtcbiAgICB9XG4gICAgdG9TdHJpbmcoKSB7XG4gICAgICAgIHJldHVybiBVbnBhcnNlci51bnBhcnNlKHRoaXMpO1xuICAgIH1cbn1cblxuY2xhc3MgQ2FsbFNjb3BlRXhwcmVzc2lvbiB7XG4gICAgY29uc3RydWN0b3IodCwgZSwgcyA9IDApIHtcbiAgICAgICAgdGhpcy5uYW1lID0gdDtcbiAgICAgICAgdGhpcy5hcmdzID0gZTtcbiAgICAgICAgdGhpcy5hbmNlc3RvciA9IHM7XG4gICAgfVxuICAgIGdldCAka2luZCgpIHtcbiAgICAgICAgcmV0dXJuIDE0NDg7XG4gICAgfVxuICAgIGdldCBoYXNCaW5kKCkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIGdldCBoYXNVbmJpbmQoKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgZXZhbHVhdGUodCwgZSwgcywgcikge1xuICAgICAgICBjb25zdCBpID0gdGhpcy5hcmdzLm1hcCgoaSA9PiBpLmV2YWx1YXRlKHQsIGUsIHMsIHIpKSk7XG4gICAgICAgIGNvbnN0IG4gPSBCaW5kaW5nQ29udGV4dC5nZXQoZSwgdGhpcy5uYW1lLCB0aGlzLmFuY2VzdG9yLCB0KTtcbiAgICAgICAgY29uc3QgbyA9IE4odCwgbiwgdGhpcy5uYW1lKTtcbiAgICAgICAgaWYgKG8pIHJldHVybiBvLmFwcGx5KG4sIGkpO1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIGFzc2lnbih0LCBlLCBzLCByKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgYWNjZXB0KHQpIHtcbiAgICAgICAgcmV0dXJuIHQudmlzaXRDYWxsU2NvcGUodGhpcyk7XG4gICAgfVxuICAgIHRvU3RyaW5nKCkge1xuICAgICAgICByZXR1cm4gVW5wYXJzZXIudW5wYXJzZSh0aGlzKTtcbiAgICB9XG59XG5cbmNsYXNzIENhbGxNZW1iZXJFeHByZXNzaW9uIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlLCBzKSB7XG4gICAgICAgIHRoaXMub2JqZWN0ID0gdDtcbiAgICAgICAgdGhpcy5uYW1lID0gZTtcbiAgICAgICAgdGhpcy5hcmdzID0gcztcbiAgICB9XG4gICAgZ2V0ICRraW5kKCkge1xuICAgICAgICByZXR1cm4gMTE2MTtcbiAgICB9XG4gICAgZ2V0IGhhc0JpbmQoKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgZ2V0IGhhc1VuYmluZCgpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBldmFsdWF0ZSh0LCBlLCBzLCByKSB7XG4gICAgICAgIGNvbnN0IGkgPSB0aGlzLm9iamVjdC5ldmFsdWF0ZSh0LCBlLCBzLCAoMTI4ICYgdCkgPiAwID8gbnVsbCA6IHIpO1xuICAgICAgICBjb25zdCBuID0gdGhpcy5hcmdzLm1hcCgoaSA9PiBpLmV2YWx1YXRlKHQsIGUsIHMsIHIpKSk7XG4gICAgICAgIGNvbnN0IG8gPSBOKHQsIGksIHRoaXMubmFtZSk7XG4gICAgICAgIGlmIChvKSByZXR1cm4gby5hcHBseShpLCBuKTtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBhc3NpZ24odCwgZSwgcywgcikge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIGFjY2VwdCh0KSB7XG4gICAgICAgIHJldHVybiB0LnZpc2l0Q2FsbE1lbWJlcih0aGlzKTtcbiAgICB9XG4gICAgdG9TdHJpbmcoKSB7XG4gICAgICAgIHJldHVybiBVbnBhcnNlci51bnBhcnNlKHRoaXMpO1xuICAgIH1cbn1cblxuY2xhc3MgQ2FsbEZ1bmN0aW9uRXhwcmVzc2lvbiB7XG4gICAgY29uc3RydWN0b3IodCwgZSkge1xuICAgICAgICB0aGlzLmZ1bmMgPSB0O1xuICAgICAgICB0aGlzLmFyZ3MgPSBlO1xuICAgIH1cbiAgICBnZXQgJGtpbmQoKSB7XG4gICAgICAgIHJldHVybiAxMTYyO1xuICAgIH1cbiAgICBnZXQgaGFzQmluZCgpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBnZXQgaGFzVW5iaW5kKCkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIGV2YWx1YXRlKHQsIGUsIHMsIHIpIHtcbiAgICAgICAgY29uc3QgaSA9IHRoaXMuZnVuYy5ldmFsdWF0ZSh0LCBlLCBzLCByKTtcbiAgICAgICAgaWYgKHAoaSkpIHJldHVybiBpKC4uLnRoaXMuYXJncy5tYXAoKGkgPT4gaS5ldmFsdWF0ZSh0LCBlLCBzLCByKSkpKTtcbiAgICAgICAgaWYgKCEoOCAmIHQpICYmIG51bGwgPT0gaSkgcmV0dXJuO1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJBVVIwMTA3XCIpO1xuICAgIH1cbiAgICBhc3NpZ24odCwgZSwgcywgcikge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIGFjY2VwdCh0KSB7XG4gICAgICAgIHJldHVybiB0LnZpc2l0Q2FsbEZ1bmN0aW9uKHRoaXMpO1xuICAgIH1cbiAgICB0b1N0cmluZygpIHtcbiAgICAgICAgcmV0dXJuIFVucGFyc2VyLnVucGFyc2UodGhpcyk7XG4gICAgfVxufVxuXG5jbGFzcyBCaW5hcnlFeHByZXNzaW9uIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlLCBzKSB7XG4gICAgICAgIHRoaXMub3BlcmF0aW9uID0gdDtcbiAgICAgICAgdGhpcy5sZWZ0ID0gZTtcbiAgICAgICAgdGhpcy5yaWdodCA9IHM7XG4gICAgfVxuICAgIGdldCAka2luZCgpIHtcbiAgICAgICAgcmV0dXJuIDQ2O1xuICAgIH1cbiAgICBnZXQgaGFzQmluZCgpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBnZXQgaGFzVW5iaW5kKCkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIGV2YWx1YXRlKHQsIGUsIHMsIHIpIHtcbiAgICAgICAgc3dpdGNoICh0aGlzLm9wZXJhdGlvbikge1xuICAgICAgICAgIGNhc2UgXCImJlwiOlxuICAgICAgICAgICAgcmV0dXJuIHRoaXMubGVmdC5ldmFsdWF0ZSh0LCBlLCBzLCByKSAmJiB0aGlzLnJpZ2h0LmV2YWx1YXRlKHQsIGUsIHMsIHIpO1xuXG4gICAgICAgICAgY2FzZSBcInx8XCI6XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5sZWZ0LmV2YWx1YXRlKHQsIGUsIHMsIHIpIHx8IHRoaXMucmlnaHQuZXZhbHVhdGUodCwgZSwgcywgcik7XG5cbiAgICAgICAgICBjYXNlIFwiPT1cIjpcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmxlZnQuZXZhbHVhdGUodCwgZSwgcywgcikgPT0gdGhpcy5yaWdodC5ldmFsdWF0ZSh0LCBlLCBzLCByKTtcblxuICAgICAgICAgIGNhc2UgXCI9PT1cIjpcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmxlZnQuZXZhbHVhdGUodCwgZSwgcywgcikgPT09IHRoaXMucmlnaHQuZXZhbHVhdGUodCwgZSwgcywgcik7XG5cbiAgICAgICAgICBjYXNlIFwiIT1cIjpcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmxlZnQuZXZhbHVhdGUodCwgZSwgcywgcikgIT0gdGhpcy5yaWdodC5ldmFsdWF0ZSh0LCBlLCBzLCByKTtcblxuICAgICAgICAgIGNhc2UgXCIhPT1cIjpcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmxlZnQuZXZhbHVhdGUodCwgZSwgcywgcikgIT09IHRoaXMucmlnaHQuZXZhbHVhdGUodCwgZSwgcywgcik7XG5cbiAgICAgICAgICBjYXNlIFwiaW5zdGFuY2VvZlwiOlxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGNvbnN0IGkgPSB0aGlzLnJpZ2h0LmV2YWx1YXRlKHQsIGUsIHMsIHIpO1xuICAgICAgICAgICAgICAgIGlmIChwKGkpKSByZXR1cm4gdGhpcy5sZWZ0LmV2YWx1YXRlKHQsIGUsIHMsIHIpIGluc3RhbmNlb2YgaTtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICBjYXNlIFwiaW5cIjpcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBjb25zdCBpID0gdGhpcy5yaWdodC5ldmFsdWF0ZSh0LCBlLCBzLCByKTtcbiAgICAgICAgICAgICAgICBpZiAoaSBpbnN0YW5jZW9mIE9iamVjdCkgcmV0dXJuIHRoaXMubGVmdC5ldmFsdWF0ZSh0LCBlLCBzLCByKSBpbiBpO1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgIGNhc2UgXCIrXCI6XG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgY29uc3QgaSA9IHRoaXMubGVmdC5ldmFsdWF0ZSh0LCBlLCBzLCByKTtcbiAgICAgICAgICAgICAgICBjb25zdCBuID0gdGhpcy5yaWdodC5ldmFsdWF0ZSh0LCBlLCBzLCByKTtcbiAgICAgICAgICAgICAgICBpZiAoKDEgJiB0KSA+IDApIHJldHVybiBpICsgbjtcbiAgICAgICAgICAgICAgICBpZiAoIWkgfHwgIW4pIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGgoaSkgfHwgaChuKSkgcmV0dXJuIChpIHx8IDApICsgKG4gfHwgMCk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChjKGkpIHx8IGMobikpIHJldHVybiAoaSB8fCBcIlwiKSArIChuIHx8IFwiXCIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gaSArIG47XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICBjYXNlIFwiLVwiOlxuICAgICAgICAgICAgcmV0dXJuIHRoaXMubGVmdC5ldmFsdWF0ZSh0LCBlLCBzLCByKSAtIHRoaXMucmlnaHQuZXZhbHVhdGUodCwgZSwgcywgcik7XG5cbiAgICAgICAgICBjYXNlIFwiKlwiOlxuICAgICAgICAgICAgcmV0dXJuIHRoaXMubGVmdC5ldmFsdWF0ZSh0LCBlLCBzLCByKSAqIHRoaXMucmlnaHQuZXZhbHVhdGUodCwgZSwgcywgcik7XG5cbiAgICAgICAgICBjYXNlIFwiL1wiOlxuICAgICAgICAgICAgcmV0dXJuIHRoaXMubGVmdC5ldmFsdWF0ZSh0LCBlLCBzLCByKSAvIHRoaXMucmlnaHQuZXZhbHVhdGUodCwgZSwgcywgcik7XG5cbiAgICAgICAgICBjYXNlIFwiJVwiOlxuICAgICAgICAgICAgcmV0dXJuIHRoaXMubGVmdC5ldmFsdWF0ZSh0LCBlLCBzLCByKSAlIHRoaXMucmlnaHQuZXZhbHVhdGUodCwgZSwgcywgcik7XG5cbiAgICAgICAgICBjYXNlIFwiPFwiOlxuICAgICAgICAgICAgcmV0dXJuIHRoaXMubGVmdC5ldmFsdWF0ZSh0LCBlLCBzLCByKSA8IHRoaXMucmlnaHQuZXZhbHVhdGUodCwgZSwgcywgcik7XG5cbiAgICAgICAgICBjYXNlIFwiPlwiOlxuICAgICAgICAgICAgcmV0dXJuIHRoaXMubGVmdC5ldmFsdWF0ZSh0LCBlLCBzLCByKSA+IHRoaXMucmlnaHQuZXZhbHVhdGUodCwgZSwgcywgcik7XG5cbiAgICAgICAgICBjYXNlIFwiPD1cIjpcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmxlZnQuZXZhbHVhdGUodCwgZSwgcywgcikgPD0gdGhpcy5yaWdodC5ldmFsdWF0ZSh0LCBlLCBzLCByKTtcblxuICAgICAgICAgIGNhc2UgXCI+PVwiOlxuICAgICAgICAgICAgcmV0dXJuIHRoaXMubGVmdC5ldmFsdWF0ZSh0LCBlLCBzLCByKSA+PSB0aGlzLnJpZ2h0LmV2YWx1YXRlKHQsIGUsIHMsIHIpO1xuXG4gICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgQVVSMDEwODoke3RoaXMub3BlcmF0aW9ufWApO1xuICAgICAgICB9XG4gICAgfVxuICAgIGFzc2lnbih0LCBlLCBzLCByKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgYWNjZXB0KHQpIHtcbiAgICAgICAgcmV0dXJuIHQudmlzaXRCaW5hcnkodGhpcyk7XG4gICAgfVxuICAgIHRvU3RyaW5nKCkge1xuICAgICAgICByZXR1cm4gVW5wYXJzZXIudW5wYXJzZSh0aGlzKTtcbiAgICB9XG59XG5cbmNsYXNzIFVuYXJ5RXhwcmVzc2lvbiB7XG4gICAgY29uc3RydWN0b3IodCwgZSkge1xuICAgICAgICB0aGlzLm9wZXJhdGlvbiA9IHQ7XG4gICAgICAgIHRoaXMuZXhwcmVzc2lvbiA9IGU7XG4gICAgfVxuICAgIGdldCAka2luZCgpIHtcbiAgICAgICAgcmV0dXJuIDM5O1xuICAgIH1cbiAgICBnZXQgaGFzQmluZCgpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBnZXQgaGFzVW5iaW5kKCkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIGV2YWx1YXRlKHQsIGUsIHMsIHIpIHtcbiAgICAgICAgc3dpdGNoICh0aGlzLm9wZXJhdGlvbikge1xuICAgICAgICAgIGNhc2UgXCJ2b2lkXCI6XG4gICAgICAgICAgICByZXR1cm4gdm9pZCB0aGlzLmV4cHJlc3Npb24uZXZhbHVhdGUodCwgZSwgcywgcik7XG5cbiAgICAgICAgICBjYXNlIFwidHlwZW9mXCI6XG4gICAgICAgICAgICByZXR1cm4gdHlwZW9mIHRoaXMuZXhwcmVzc2lvbi5ldmFsdWF0ZSgxIHwgdCwgZSwgcywgcik7XG5cbiAgICAgICAgICBjYXNlIFwiIVwiOlxuICAgICAgICAgICAgcmV0dXJuICF0aGlzLmV4cHJlc3Npb24uZXZhbHVhdGUodCwgZSwgcywgcik7XG5cbiAgICAgICAgICBjYXNlIFwiLVwiOlxuICAgICAgICAgICAgcmV0dXJuIC10aGlzLmV4cHJlc3Npb24uZXZhbHVhdGUodCwgZSwgcywgcik7XG5cbiAgICAgICAgICBjYXNlIFwiK1wiOlxuICAgICAgICAgICAgcmV0dXJuICt0aGlzLmV4cHJlc3Npb24uZXZhbHVhdGUodCwgZSwgcywgcik7XG5cbiAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBBVVIwMTA5OiR7dGhpcy5vcGVyYXRpb259YCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgYXNzaWduKHQsIGUsIHMsIHIpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBhY2NlcHQodCkge1xuICAgICAgICByZXR1cm4gdC52aXNpdFVuYXJ5KHRoaXMpO1xuICAgIH1cbiAgICB0b1N0cmluZygpIHtcbiAgICAgICAgcmV0dXJuIFVucGFyc2VyLnVucGFyc2UodGhpcyk7XG4gICAgfVxufVxuXG5jbGFzcyBQcmltaXRpdmVMaXRlcmFsRXhwcmVzc2lvbiB7XG4gICAgY29uc3RydWN0b3IodCkge1xuICAgICAgICB0aGlzLnZhbHVlID0gdDtcbiAgICB9XG4gICAgZ2V0ICRraW5kKCkge1xuICAgICAgICByZXR1cm4gMTc5MjU7XG4gICAgfVxuICAgIGdldCBoYXNCaW5kKCkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIGdldCBoYXNVbmJpbmQoKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgZXZhbHVhdGUodCwgZSwgcywgcikge1xuICAgICAgICByZXR1cm4gdGhpcy52YWx1ZTtcbiAgICB9XG4gICAgYXNzaWduKHQsIGUsIHMsIHIpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBhY2NlcHQodCkge1xuICAgICAgICByZXR1cm4gdC52aXNpdFByaW1pdGl2ZUxpdGVyYWwodGhpcyk7XG4gICAgfVxuICAgIHRvU3RyaW5nKCkge1xuICAgICAgICByZXR1cm4gVW5wYXJzZXIudW5wYXJzZSh0aGlzKTtcbiAgICB9XG59XG5cblByaW1pdGl2ZUxpdGVyYWxFeHByZXNzaW9uLiR1bmRlZmluZWQgPSBuZXcgUHJpbWl0aXZlTGl0ZXJhbEV4cHJlc3Npb24odm9pZCAwKTtcblxuUHJpbWl0aXZlTGl0ZXJhbEV4cHJlc3Npb24uJG51bGwgPSBuZXcgUHJpbWl0aXZlTGl0ZXJhbEV4cHJlc3Npb24obnVsbCk7XG5cblByaW1pdGl2ZUxpdGVyYWxFeHByZXNzaW9uLiR0cnVlID0gbmV3IFByaW1pdGl2ZUxpdGVyYWxFeHByZXNzaW9uKHRydWUpO1xuXG5QcmltaXRpdmVMaXRlcmFsRXhwcmVzc2lvbi4kZmFsc2UgPSBuZXcgUHJpbWl0aXZlTGl0ZXJhbEV4cHJlc3Npb24oZmFsc2UpO1xuXG5QcmltaXRpdmVMaXRlcmFsRXhwcmVzc2lvbi4kZW1wdHkgPSBuZXcgUHJpbWl0aXZlTGl0ZXJhbEV4cHJlc3Npb24oXCJcIik7XG5cbmNsYXNzIEh0bWxMaXRlcmFsRXhwcmVzc2lvbiB7XG4gICAgY29uc3RydWN0b3IodCkge1xuICAgICAgICB0aGlzLnBhcnRzID0gdDtcbiAgICB9XG4gICAgZ2V0ICRraW5kKCkge1xuICAgICAgICByZXR1cm4gNTE7XG4gICAgfVxuICAgIGdldCBoYXNCaW5kKCkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIGdldCBoYXNVbmJpbmQoKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgZXZhbHVhdGUodCwgZSwgcywgcikge1xuICAgICAgICBsZXQgaSA9IFwiXCI7XG4gICAgICAgIGZvciAobGV0IG4gPSAwOyBuIDwgdGhpcy5wYXJ0cy5sZW5ndGg7ICsrbikge1xuICAgICAgICAgICAgY29uc3QgbyA9IHRoaXMucGFydHNbbl0uZXZhbHVhdGUodCwgZSwgcywgcik7XG4gICAgICAgICAgICBpZiAobnVsbCA9PSBvKSBjb250aW51ZTtcbiAgICAgICAgICAgIGkgKz0gbztcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gaTtcbiAgICB9XG4gICAgYXNzaWduKHQsIGUsIHMsIHIsIGkpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBhY2NlcHQodCkge1xuICAgICAgICByZXR1cm4gdC52aXNpdEh0bWxMaXRlcmFsKHRoaXMpO1xuICAgIH1cbiAgICB0b1N0cmluZygpIHtcbiAgICAgICAgcmV0dXJuIFVucGFyc2VyLnVucGFyc2UodGhpcyk7XG4gICAgfVxufVxuXG5jbGFzcyBBcnJheUxpdGVyYWxFeHByZXNzaW9uIHtcbiAgICBjb25zdHJ1Y3Rvcih0KSB7XG4gICAgICAgIHRoaXMuZWxlbWVudHMgPSB0O1xuICAgIH1cbiAgICBnZXQgJGtpbmQoKSB7XG4gICAgICAgIHJldHVybiAxNzk1NTtcbiAgICB9XG4gICAgZ2V0IGhhc0JpbmQoKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgZ2V0IGhhc1VuYmluZCgpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBldmFsdWF0ZSh0LCBlLCBzLCByKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmVsZW1lbnRzLm1hcCgoaSA9PiBpLmV2YWx1YXRlKHQsIGUsIHMsIHIpKSk7XG4gICAgfVxuICAgIGFzc2lnbih0LCBlLCBzLCByKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgYWNjZXB0KHQpIHtcbiAgICAgICAgcmV0dXJuIHQudmlzaXRBcnJheUxpdGVyYWwodGhpcyk7XG4gICAgfVxuICAgIHRvU3RyaW5nKCkge1xuICAgICAgICByZXR1cm4gVW5wYXJzZXIudW5wYXJzZSh0aGlzKTtcbiAgICB9XG59XG5cbkFycmF5TGl0ZXJhbEV4cHJlc3Npb24uJGVtcHR5ID0gbmV3IEFycmF5TGl0ZXJhbEV4cHJlc3Npb24odSk7XG5cbmNsYXNzIE9iamVjdExpdGVyYWxFeHByZXNzaW9uIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlKSB7XG4gICAgICAgIHRoaXMua2V5cyA9IHQ7XG4gICAgICAgIHRoaXMudmFsdWVzID0gZTtcbiAgICB9XG4gICAgZ2V0ICRraW5kKCkge1xuICAgICAgICByZXR1cm4gMTc5NTY7XG4gICAgfVxuICAgIGdldCBoYXNCaW5kKCkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIGdldCBoYXNVbmJpbmQoKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgZXZhbHVhdGUodCwgZSwgcywgcikge1xuICAgICAgICBjb25zdCBpID0ge307XG4gICAgICAgIGZvciAobGV0IG4gPSAwOyBuIDwgdGhpcy5rZXlzLmxlbmd0aDsgKytuKSBpW3RoaXMua2V5c1tuXV0gPSB0aGlzLnZhbHVlc1tuXS5ldmFsdWF0ZSh0LCBlLCBzLCByKTtcbiAgICAgICAgcmV0dXJuIGk7XG4gICAgfVxuICAgIGFzc2lnbih0LCBlLCBzLCByKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgYWNjZXB0KHQpIHtcbiAgICAgICAgcmV0dXJuIHQudmlzaXRPYmplY3RMaXRlcmFsKHRoaXMpO1xuICAgIH1cbiAgICB0b1N0cmluZygpIHtcbiAgICAgICAgcmV0dXJuIFVucGFyc2VyLnVucGFyc2UodGhpcyk7XG4gICAgfVxufVxuXG5PYmplY3RMaXRlcmFsRXhwcmVzc2lvbi4kZW1wdHkgPSBuZXcgT2JqZWN0TGl0ZXJhbEV4cHJlc3Npb24odSwgdSk7XG5cbmNsYXNzIFRlbXBsYXRlRXhwcmVzc2lvbiB7XG4gICAgY29uc3RydWN0b3IodCwgZSA9IHUpIHtcbiAgICAgICAgdGhpcy5jb29rZWQgPSB0O1xuICAgICAgICB0aGlzLmV4cHJlc3Npb25zID0gZTtcbiAgICB9XG4gICAgZ2V0ICRraW5kKCkge1xuICAgICAgICByZXR1cm4gMTc5NTg7XG4gICAgfVxuICAgIGdldCBoYXNCaW5kKCkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIGdldCBoYXNVbmJpbmQoKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgZXZhbHVhdGUodCwgZSwgcywgcikge1xuICAgICAgICBsZXQgaSA9IHRoaXMuY29va2VkWzBdO1xuICAgICAgICBmb3IgKGxldCBuID0gMDsgbiA8IHRoaXMuZXhwcmVzc2lvbnMubGVuZ3RoOyArK24pIHtcbiAgICAgICAgICAgIGkgKz0gU3RyaW5nKHRoaXMuZXhwcmVzc2lvbnNbbl0uZXZhbHVhdGUodCwgZSwgcywgcikpO1xuICAgICAgICAgICAgaSArPSB0aGlzLmNvb2tlZFtuICsgMV07XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGk7XG4gICAgfVxuICAgIGFzc2lnbih0LCBlLCBzLCByKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgYWNjZXB0KHQpIHtcbiAgICAgICAgcmV0dXJuIHQudmlzaXRUZW1wbGF0ZSh0aGlzKTtcbiAgICB9XG4gICAgdG9TdHJpbmcoKSB7XG4gICAgICAgIHJldHVybiBVbnBhcnNlci51bnBhcnNlKHRoaXMpO1xuICAgIH1cbn1cblxuVGVtcGxhdGVFeHByZXNzaW9uLiRlbXB0eSA9IG5ldyBUZW1wbGF0ZUV4cHJlc3Npb24oWyBcIlwiIF0pO1xuXG5jbGFzcyBUYWdnZWRUZW1wbGF0ZUV4cHJlc3Npb24ge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUsIHMsIHIgPSB1KSB7XG4gICAgICAgIHRoaXMuY29va2VkID0gdDtcbiAgICAgICAgdGhpcy5mdW5jID0gcztcbiAgICAgICAgdGhpcy5leHByZXNzaW9ucyA9IHI7XG4gICAgICAgIHQucmF3ID0gZTtcbiAgICB9XG4gICAgZ2V0ICRraW5kKCkge1xuICAgICAgICByZXR1cm4gMTE5NztcbiAgICB9XG4gICAgZ2V0IGhhc0JpbmQoKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgZ2V0IGhhc1VuYmluZCgpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBldmFsdWF0ZSh0LCBlLCBzLCByKSB7XG4gICAgICAgIGNvbnN0IGkgPSB0aGlzLmV4cHJlc3Npb25zLm1hcCgoaSA9PiBpLmV2YWx1YXRlKHQsIGUsIHMsIHIpKSk7XG4gICAgICAgIGNvbnN0IG4gPSB0aGlzLmZ1bmMuZXZhbHVhdGUodCwgZSwgcywgcik7XG4gICAgICAgIGlmICghcChuKSkgdGhyb3cgbmV3IEVycm9yKGBBVVIwMTEwYCk7XG4gICAgICAgIHJldHVybiBuKHRoaXMuY29va2VkLCAuLi5pKTtcbiAgICB9XG4gICAgYXNzaWduKHQsIGUsIHMsIHIpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBhY2NlcHQodCkge1xuICAgICAgICByZXR1cm4gdC52aXNpdFRhZ2dlZFRlbXBsYXRlKHRoaXMpO1xuICAgIH1cbiAgICB0b1N0cmluZygpIHtcbiAgICAgICAgcmV0dXJuIFVucGFyc2VyLnVucGFyc2UodGhpcyk7XG4gICAgfVxufVxuXG5jbGFzcyBBcnJheUJpbmRpbmdQYXR0ZXJuIHtcbiAgICBjb25zdHJ1Y3Rvcih0KSB7XG4gICAgICAgIHRoaXMuZWxlbWVudHMgPSB0O1xuICAgIH1cbiAgICBnZXQgJGtpbmQoKSB7XG4gICAgICAgIHJldHVybiA2NTU1NjtcbiAgICB9XG4gICAgZ2V0IGhhc0JpbmQoKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgZ2V0IGhhc1VuYmluZCgpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBldmFsdWF0ZSh0LCBlLCBzLCByKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgYXNzaWduKHQsIGUsIHMsIHIpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBhY2NlcHQodCkge1xuICAgICAgICByZXR1cm4gdC52aXNpdEFycmF5QmluZGluZ1BhdHRlcm4odGhpcyk7XG4gICAgfVxuICAgIHRvU3RyaW5nKCkge1xuICAgICAgICByZXR1cm4gVW5wYXJzZXIudW5wYXJzZSh0aGlzKTtcbiAgICB9XG59XG5cbmNsYXNzIE9iamVjdEJpbmRpbmdQYXR0ZXJuIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlKSB7XG4gICAgICAgIHRoaXMua2V5cyA9IHQ7XG4gICAgICAgIHRoaXMudmFsdWVzID0gZTtcbiAgICB9XG4gICAgZ2V0ICRraW5kKCkge1xuICAgICAgICByZXR1cm4gNjU1NTc7XG4gICAgfVxuICAgIGdldCBoYXNCaW5kKCkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIGdldCBoYXNVbmJpbmQoKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgZXZhbHVhdGUodCwgZSwgcywgcikge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIGFzc2lnbih0LCBlLCBzLCByKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgYWNjZXB0KHQpIHtcbiAgICAgICAgcmV0dXJuIHQudmlzaXRPYmplY3RCaW5kaW5nUGF0dGVybih0aGlzKTtcbiAgICB9XG4gICAgdG9TdHJpbmcoKSB7XG4gICAgICAgIHJldHVybiBVbnBhcnNlci51bnBhcnNlKHRoaXMpO1xuICAgIH1cbn1cblxuY2xhc3MgQmluZGluZ0lkZW50aWZpZXIge1xuICAgIGNvbnN0cnVjdG9yKHQpIHtcbiAgICAgICAgdGhpcy5uYW1lID0gdDtcbiAgICB9XG4gICAgZ2V0ICRraW5kKCkge1xuICAgICAgICByZXR1cm4gNjU1NTg7XG4gICAgfVxuICAgIGdldCBoYXNCaW5kKCkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIGdldCBoYXNVbmJpbmQoKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgZXZhbHVhdGUodCwgZSwgcywgcikge1xuICAgICAgICByZXR1cm4gdGhpcy5uYW1lO1xuICAgIH1cbiAgICBhY2NlcHQodCkge1xuICAgICAgICByZXR1cm4gdC52aXNpdEJpbmRpbmdJZGVudGlmaWVyKHRoaXMpO1xuICAgIH1cbiAgICB0b1N0cmluZygpIHtcbiAgICAgICAgcmV0dXJuIFVucGFyc2VyLnVucGFyc2UodGhpcyk7XG4gICAgfVxufVxuXG5jb25zdCBWID0gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZztcblxuY2xhc3MgRm9yT2ZTdGF0ZW1lbnQge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUpIHtcbiAgICAgICAgdGhpcy5kZWNsYXJhdGlvbiA9IHQ7XG4gICAgICAgIHRoaXMuaXRlcmFibGUgPSBlO1xuICAgIH1cbiAgICBnZXQgJGtpbmQoKSB7XG4gICAgICAgIHJldHVybiA2MTk5O1xuICAgIH1cbiAgICBnZXQgaGFzQmluZCgpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBnZXQgaGFzVW5iaW5kKCkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIGV2YWx1YXRlKHQsIGUsIHMsIHIpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuaXRlcmFibGUuZXZhbHVhdGUodCwgZSwgcywgcik7XG4gICAgfVxuICAgIGFzc2lnbih0LCBlLCBzLCByKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY291bnQodCwgZSkge1xuICAgICAgICBzd2l0Y2ggKFYuY2FsbChlKSkge1xuICAgICAgICAgIGNhc2UgXCJbb2JqZWN0IEFycmF5XVwiOlxuICAgICAgICAgICAgcmV0dXJuIGUubGVuZ3RoO1xuXG4gICAgICAgICAgY2FzZSBcIltvYmplY3QgTWFwXVwiOlxuICAgICAgICAgICAgcmV0dXJuIGUuc2l6ZTtcblxuICAgICAgICAgIGNhc2UgXCJbb2JqZWN0IFNldF1cIjpcbiAgICAgICAgICAgIHJldHVybiBlLnNpemU7XG5cbiAgICAgICAgICBjYXNlIFwiW29iamVjdCBOdW1iZXJdXCI6XG4gICAgICAgICAgICByZXR1cm4gZTtcblxuICAgICAgICAgIGNhc2UgXCJbb2JqZWN0IE51bGxdXCI6XG4gICAgICAgICAgICByZXR1cm4gMDtcblxuICAgICAgICAgIGNhc2UgXCJbb2JqZWN0IFVuZGVmaW5lZF1cIjpcbiAgICAgICAgICAgIHJldHVybiAwO1xuXG4gICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgQ2Fubm90IGNvdW50ICR7Vi5jYWxsKGUpfWApO1xuICAgICAgICB9XG4gICAgfVxuICAgIGl0ZXJhdGUodCwgZSwgcykge1xuICAgICAgICBzd2l0Y2ggKFYuY2FsbChlKSkge1xuICAgICAgICAgIGNhc2UgXCJbb2JqZWN0IEFycmF5XVwiOlxuICAgICAgICAgICAgcmV0dXJuIEsoZSwgcyk7XG5cbiAgICAgICAgICBjYXNlIFwiW29iamVjdCBNYXBdXCI6XG4gICAgICAgICAgICByZXR1cm4gcShlLCBzKTtcblxuICAgICAgICAgIGNhc2UgXCJbb2JqZWN0IFNldF1cIjpcbiAgICAgICAgICAgIHJldHVybiBIKGUsIHMpO1xuXG4gICAgICAgICAgY2FzZSBcIltvYmplY3QgTnVtYmVyXVwiOlxuICAgICAgICAgICAgcmV0dXJuIFEoZSwgcyk7XG5cbiAgICAgICAgICBjYXNlIFwiW29iamVjdCBOdWxsXVwiOlxuICAgICAgICAgICAgcmV0dXJuO1xuXG4gICAgICAgICAgY2FzZSBcIltvYmplY3QgVW5kZWZpbmVkXVwiOlxuICAgICAgICAgICAgcmV0dXJuO1xuXG4gICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgQ2Fubm90IGl0ZXJhdGUgb3ZlciAke1YuY2FsbChlKX1gKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBiaW5kKHQsIGUsIHMpIHtcbiAgICAgICAgaWYgKHRoaXMuaXRlcmFibGUuaGFzQmluZCkgdGhpcy5pdGVyYWJsZS5iaW5kKHQsIGUsIHMpO1xuICAgIH1cbiAgICB1bmJpbmQodCwgZSwgcykge1xuICAgICAgICBpZiAodGhpcy5pdGVyYWJsZS5oYXNVbmJpbmQpIHRoaXMuaXRlcmFibGUudW5iaW5kKHQsIGUsIHMpO1xuICAgIH1cbiAgICBhY2NlcHQodCkge1xuICAgICAgICByZXR1cm4gdC52aXNpdEZvck9mU3RhdGVtZW50KHRoaXMpO1xuICAgIH1cbiAgICB0b1N0cmluZygpIHtcbiAgICAgICAgcmV0dXJuIFVucGFyc2VyLnVucGFyc2UodGhpcyk7XG4gICAgfVxufVxuXG5jbGFzcyBJbnRlcnBvbGF0aW9uIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlID0gdSkge1xuICAgICAgICB0aGlzLnBhcnRzID0gdDtcbiAgICAgICAgdGhpcy5leHByZXNzaW9ucyA9IGU7XG4gICAgICAgIHRoaXMuaXNNdWx0aSA9IGUubGVuZ3RoID4gMTtcbiAgICAgICAgdGhpcy5maXJzdEV4cHJlc3Npb24gPSBlWzBdO1xuICAgIH1cbiAgICBnZXQgJGtpbmQoKSB7XG4gICAgICAgIHJldHVybiAyNDtcbiAgICB9XG4gICAgZ2V0IGhhc0JpbmQoKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgZ2V0IGhhc1VuYmluZCgpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBldmFsdWF0ZSh0LCBlLCBzLCByKSB7XG4gICAgICAgIGlmICh0aGlzLmlzTXVsdGkpIHtcbiAgICAgICAgICAgIGxldCBpID0gdGhpcy5wYXJ0c1swXTtcbiAgICAgICAgICAgIGZvciAobGV0IG4gPSAwOyBuIDwgdGhpcy5leHByZXNzaW9ucy5sZW5ndGg7ICsrbikge1xuICAgICAgICAgICAgICAgIGkgKz0gU3RyaW5nKHRoaXMuZXhwcmVzc2lvbnNbbl0uZXZhbHVhdGUodCwgZSwgcywgcikpO1xuICAgICAgICAgICAgICAgIGkgKz0gdGhpcy5wYXJ0c1tuICsgMV07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gaTtcbiAgICAgICAgfSBlbHNlIHJldHVybiBgJHt0aGlzLnBhcnRzWzBdfSR7dGhpcy5maXJzdEV4cHJlc3Npb24uZXZhbHVhdGUodCwgZSwgcywgcil9JHt0aGlzLnBhcnRzWzFdfWA7XG4gICAgfVxuICAgIGFzc2lnbih0LCBlLCBzLCByKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgYWNjZXB0KHQpIHtcbiAgICAgICAgcmV0dXJuIHQudmlzaXRJbnRlcnBvbGF0aW9uKHRoaXMpO1xuICAgIH1cbiAgICB0b1N0cmluZygpIHtcbiAgICAgICAgcmV0dXJuIFVucGFyc2VyLnVucGFyc2UodGhpcyk7XG4gICAgfVxufVxuXG5jbGFzcyBEZXN0cnVjdHVyaW5nQXNzaWdubWVudEV4cHJlc3Npb24ge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUsIHMsIHIpIHtcbiAgICAgICAgdGhpcy4ka2luZCA9IHQ7XG4gICAgICAgIHRoaXMubGlzdCA9IGU7XG4gICAgICAgIHRoaXMuc291cmNlID0gcztcbiAgICAgICAgdGhpcy5pbml0aWFsaXplciA9IHI7XG4gICAgfVxuICAgIGdldCBoYXNCaW5kKCkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIGdldCBoYXNVbmJpbmQoKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgZXZhbHVhdGUodCwgZSwgcywgcikge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIGFzc2lnbih0LCBlLCBzLCByKSB7XG4gICAgICAgIHZhciBpO1xuICAgICAgICBjb25zdCBuID0gdGhpcy5saXN0O1xuICAgICAgICBjb25zdCBvID0gbi5sZW5ndGg7XG4gICAgICAgIGxldCBoO1xuICAgICAgICBsZXQgYztcbiAgICAgICAgZm9yIChoID0gMDsgaCA8IG87IGgrKykge1xuICAgICAgICAgICAgYyA9IG5baF07XG4gICAgICAgICAgICBzd2l0Y2ggKGMuJGtpbmQpIHtcbiAgICAgICAgICAgICAgY2FzZSAxMzkyODk6XG4gICAgICAgICAgICAgICAgYy5hc3NpZ24odCwgZSwgcywgcik7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgICAgY2FzZSA5MDEzNzpcbiAgICAgICAgICAgICAgY2FzZSAxMDY1MjE6XG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBpZiAoXCJvYmplY3RcIiAhPT0gdHlwZW9mIHIgfHwgbnVsbCA9PT0gcikgdGhyb3cgbmV3IEVycm9yKFwiQVVSMDExMlwiKTtcbiAgICAgICAgICAgICAgICAgICAgbGV0IG4gPSBjLnNvdXJjZS5ldmFsdWF0ZSh0LCBTY29wZS5jcmVhdGUociksIHMsIG51bGwpO1xuICAgICAgICAgICAgICAgICAgICBpZiAodm9pZCAwID09PSBuKSBuID0gbnVsbCA9PT0gKGkgPSBjLmluaXRpYWxpemVyKSB8fCB2b2lkIDAgPT09IGkgPyB2b2lkIDAgOiBpLmV2YWx1YXRlKHQsIGUsIHMsIG51bGwpO1xuICAgICAgICAgICAgICAgICAgICBjLmFzc2lnbih0LCBlLCBzLCBuKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIGFjY2VwdCh0KSB7XG4gICAgICAgIHJldHVybiB0LnZpc2l0RGVzdHJ1Y3R1cmluZ0Fzc2lnbm1lbnRFeHByZXNzaW9uKHRoaXMpO1xuICAgIH1cbiAgICB0b1N0cmluZygpIHtcbiAgICAgICAgcmV0dXJuIFVucGFyc2VyLnVucGFyc2UodGhpcyk7XG4gICAgfVxufVxuXG5jbGFzcyBEZXN0cnVjdHVyaW5nQXNzaWdubWVudFNpbmdsZUV4cHJlc3Npb24ge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUsIHMpIHtcbiAgICAgICAgdGhpcy50YXJnZXQgPSB0O1xuICAgICAgICB0aGlzLnNvdXJjZSA9IGU7XG4gICAgICAgIHRoaXMuaW5pdGlhbGl6ZXIgPSBzO1xuICAgIH1cbiAgICBnZXQgJGtpbmQoKSB7XG4gICAgICAgIHJldHVybiAxMzkyODk7XG4gICAgfVxuICAgIGV2YWx1YXRlKHQsIGUsIHMsIHIpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBhc3NpZ24odCwgZSwgcywgcikge1xuICAgICAgICB2YXIgaTtcbiAgICAgICAgaWYgKG51bGwgPT0gcikgcmV0dXJuO1xuICAgICAgICBpZiAoXCJvYmplY3RcIiAhPT0gdHlwZW9mIHIpIHRocm93IG5ldyBFcnJvcihcIkFVUjAxMTJcIik7XG4gICAgICAgIGxldCBuID0gdGhpcy5zb3VyY2UuZXZhbHVhdGUodCwgU2NvcGUuY3JlYXRlKHIpLCBzLCBudWxsKTtcbiAgICAgICAgaWYgKHZvaWQgMCA9PT0gbikgbiA9IG51bGwgPT09IChpID0gdGhpcy5pbml0aWFsaXplcikgfHwgdm9pZCAwID09PSBpID8gdm9pZCAwIDogaS5ldmFsdWF0ZSh0LCBlLCBzLCBudWxsKTtcbiAgICAgICAgdGhpcy50YXJnZXQuYXNzaWduKHQsIGUsIHMsIG4pO1xuICAgIH1cbiAgICBhY2NlcHQodCkge1xuICAgICAgICByZXR1cm4gdC52aXNpdERlc3RydWN0dXJpbmdBc3NpZ25tZW50U2luZ2xlRXhwcmVzc2lvbih0aGlzKTtcbiAgICB9XG4gICAgdG9TdHJpbmcoKSB7XG4gICAgICAgIHJldHVybiBVbnBhcnNlci51bnBhcnNlKHRoaXMpO1xuICAgIH1cbn1cblxuY2xhc3MgRGVzdHJ1Y3R1cmluZ0Fzc2lnbm1lbnRSZXN0RXhwcmVzc2lvbiB7XG4gICAgY29uc3RydWN0b3IodCwgZSkge1xuICAgICAgICB0aGlzLnRhcmdldCA9IHQ7XG4gICAgICAgIHRoaXMuaW5kZXhPclByb3BlcnRpZXMgPSBlO1xuICAgIH1cbiAgICBnZXQgJGtpbmQoKSB7XG4gICAgICAgIHJldHVybiAxMzkyODk7XG4gICAgfVxuICAgIGV2YWx1YXRlKHQsIGUsIHMsIHIpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBhc3NpZ24odCwgZSwgcywgcikge1xuICAgICAgICBpZiAobnVsbCA9PSByKSByZXR1cm47XG4gICAgICAgIGlmIChcIm9iamVjdFwiICE9PSB0eXBlb2YgcikgdGhyb3cgbmV3IEVycm9yKFwiQVVSMDExMlwiKTtcbiAgICAgICAgY29uc3QgaSA9IHRoaXMuaW5kZXhPclByb3BlcnRpZXM7XG4gICAgICAgIGxldCBuO1xuICAgICAgICBpZiAoYShpKSkge1xuICAgICAgICAgICAgaWYgKCFBcnJheS5pc0FycmF5KHIpKSB0aHJvdyBuZXcgRXJyb3IoXCJBVVIwMTEyXCIpO1xuICAgICAgICAgICAgbiA9IHIuc2xpY2UoaSk7XG4gICAgICAgIH0gZWxzZSBuID0gT2JqZWN0LmVudHJpZXMocikucmVkdWNlKCgodCwgW2UsIHNdKSA9PiB7XG4gICAgICAgICAgICBpZiAoIWkuaW5jbHVkZXMoZSkpIHRbZV0gPSBzO1xuICAgICAgICAgICAgcmV0dXJuIHQ7XG4gICAgICAgIH0pLCB7fSk7XG4gICAgICAgIHRoaXMudGFyZ2V0LmFzc2lnbih0LCBlLCBzLCBuKTtcbiAgICB9XG4gICAgYWNjZXB0KHQpIHtcbiAgICAgICAgcmV0dXJuIHQudmlzaXREZXN0cnVjdHVyaW5nQXNzaWdubWVudFJlc3RFeHByZXNzaW9uKHRoaXMpO1xuICAgIH1cbiAgICB0b1N0cmluZygpIHtcbiAgICAgICAgcmV0dXJuIFVucGFyc2VyLnVucGFyc2UodGhpcyk7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBOKHQsIGUsIHMpIHtcbiAgICBjb25zdCByID0gbnVsbCA9PSBlID8gbnVsbCA6IGVbc107XG4gICAgaWYgKHAocikpIHJldHVybiByO1xuICAgIGlmICghKDggJiB0KSAmJiBudWxsID09IHIpIHJldHVybiBudWxsO1xuICAgIHRocm93IG5ldyBFcnJvcihgQVVSMDExMToke3N9YCk7XG59XG5cbmZ1bmN0aW9uIEsodCwgZSkge1xuICAgIGZvciAobGV0IHMgPSAwLCByID0gdC5sZW5ndGg7IHMgPCByOyArK3MpIGUodCwgcywgdFtzXSk7XG59XG5cbmZ1bmN0aW9uIHEodCwgZSkge1xuICAgIGNvbnN0IHMgPSBBcnJheSh0LnNpemUpO1xuICAgIGxldCByID0gLTE7XG4gICAgZm9yIChjb25zdCBlIG9mIHQuZW50cmllcygpKSBzWysrcl0gPSBlO1xuICAgIEsocywgZSk7XG59XG5cbmZ1bmN0aW9uIEgodCwgZSkge1xuICAgIGNvbnN0IHMgPSBBcnJheSh0LnNpemUpO1xuICAgIGxldCByID0gLTE7XG4gICAgZm9yIChjb25zdCBlIG9mIHQua2V5cygpKSBzWysrcl0gPSBlO1xuICAgIEsocywgZSk7XG59XG5cbmZ1bmN0aW9uIFEodCwgZSkge1xuICAgIGNvbnN0IHMgPSBBcnJheSh0KTtcbiAgICBmb3IgKGxldCBlID0gMDsgZSA8IHQ7ICsrZSkgc1tlXSA9IGU7XG4gICAgSyhzLCBlKTtcbn1cblxuY29uc3QgXyA9IHIuY3JlYXRlSW50ZXJmYWNlKFwiSUNvZXJjaW9uQ29uZmlndXJhdGlvblwiKTtcblxudmFyIHo7XG5cbihmdW5jdGlvbih0KSB7XG4gICAgdFt0W1wib25lVGltZVwiXSA9IDFdID0gXCJvbmVUaW1lXCI7XG4gICAgdFt0W1widG9WaWV3XCJdID0gMl0gPSBcInRvVmlld1wiO1xuICAgIHRbdFtcImZyb21WaWV3XCJdID0gNF0gPSBcImZyb21WaWV3XCI7XG4gICAgdFt0W1widHdvV2F5XCJdID0gNl0gPSBcInR3b1dheVwiO1xuICAgIHRbdFtcImRlZmF1bHRcIl0gPSA4XSA9IFwiZGVmYXVsdFwiO1xufSkoeiB8fCAoeiA9IHt9KSk7XG5cbnZhciBXO1xuXG4oZnVuY3Rpb24odCkge1xuICAgIHRbdFtcIm5vbmVcIl0gPSAwXSA9IFwibm9uZVwiO1xuICAgIHRbdFtcInBlcnNpc3RlbnRCaW5kaW5nRmxhZ3NcIl0gPSA5NjFdID0gXCJwZXJzaXN0ZW50QmluZGluZ0ZsYWdzXCI7XG4gICAgdFt0W1wiYWxsb3dQYXJlbnRTY29wZVRyYXZlcnNhbFwiXSA9IDY0XSA9IFwiYWxsb3dQYXJlbnRTY29wZVRyYXZlcnNhbFwiO1xuICAgIHRbdFtcIm9ic2VydmVMZWFmUHJvcGVydGllc09ubHlcIl0gPSAxMjhdID0gXCJvYnNlcnZlTGVhZlByb3BlcnRpZXNPbmx5XCI7XG4gICAgdFt0W1widGFyZ2V0T2JzZXJ2ZXJGbGFnc1wiXSA9IDc2OV0gPSBcInRhcmdldE9ic2VydmVyRmxhZ3NcIjtcbiAgICB0W3RbXCJub0ZsdXNoXCJdID0gMjU2XSA9IFwibm9GbHVzaFwiO1xuICAgIHRbdFtcInBlcnNpc3RlbnRUYXJnZXRPYnNlcnZlclF1ZXVlXCJdID0gNTEyXSA9IFwicGVyc2lzdGVudFRhcmdldE9ic2VydmVyUXVldWVcIjtcbiAgICB0W3RbXCJiaW5kaW5nU3RyYXRlZ3lcIl0gPSAxXSA9IFwiYmluZGluZ1N0cmF0ZWd5XCI7XG4gICAgdFt0W1wiaXNTdHJpY3RCaW5kaW5nU3RyYXRlZ3lcIl0gPSAxXSA9IFwiaXNTdHJpY3RCaW5kaW5nU3RyYXRlZ3lcIjtcbiAgICB0W3RbXCJmcm9tQmluZFwiXSA9IDJdID0gXCJmcm9tQmluZFwiO1xuICAgIHRbdFtcImZyb21VbmJpbmRcIl0gPSA0XSA9IFwiZnJvbVVuYmluZFwiO1xuICAgIHRbdFtcIm11c3RFdmFsdWF0ZVwiXSA9IDhdID0gXCJtdXN0RXZhbHVhdGVcIjtcbiAgICB0W3RbXCJpc1RyYXZlcnNpbmdQYXJlbnRTY29wZVwiXSA9IDE2XSA9IFwiaXNUcmF2ZXJzaW5nUGFyZW50U2NvcGVcIjtcbiAgICB0W3RbXCJkaXNwb3NlXCJdID0gMzJdID0gXCJkaXNwb3NlXCI7XG59KShXIHx8IChXID0ge30pKTtcblxudmFyIEc7XG5cbihmdW5jdGlvbih0KSB7XG4gICAgdFt0W1wiTm9uZVwiXSA9IDBdID0gXCJOb25lXCI7XG4gICAgdFt0W1wiU3Vic2NyaWJlcjBcIl0gPSAxXSA9IFwiU3Vic2NyaWJlcjBcIjtcbiAgICB0W3RbXCJTdWJzY3JpYmVyMVwiXSA9IDJdID0gXCJTdWJzY3JpYmVyMVwiO1xuICAgIHRbdFtcIlN1YnNjcmliZXIyXCJdID0gNF0gPSBcIlN1YnNjcmliZXIyXCI7XG4gICAgdFt0W1wiU3Vic2NyaWJlcnNSZXN0XCJdID0gOF0gPSBcIlN1YnNjcmliZXJzUmVzdFwiO1xuICAgIHRbdFtcIkFueVwiXSA9IDE1XSA9IFwiQW55XCI7XG59KShHIHx8IChHID0ge30pKTtcblxudmFyIFo7XG5cbihmdW5jdGlvbih0KSB7XG4gICAgdFt0W1wibm9uZVwiXSA9IDBdID0gXCJub25lXCI7XG4gICAgdFt0W1wiY2FwdHVyaW5nXCJdID0gMV0gPSBcImNhcHR1cmluZ1wiO1xuICAgIHRbdFtcImJ1YmJsaW5nXCJdID0gMl0gPSBcImJ1YmJsaW5nXCI7XG59KShaIHx8IChaID0ge30pKTtcblxudmFyIEo7XG5cbihmdW5jdGlvbih0KSB7XG4gICAgdFt0W1wiaW5kZXhlZFwiXSA9IDhdID0gXCJpbmRleGVkXCI7XG4gICAgdFt0W1wia2V5ZWRcIl0gPSA0XSA9IFwia2V5ZWRcIjtcbiAgICB0W3RbXCJhcnJheVwiXSA9IDldID0gXCJhcnJheVwiO1xuICAgIHRbdFtcIm1hcFwiXSA9IDZdID0gXCJtYXBcIjtcbiAgICB0W3RbXCJzZXRcIl0gPSA3XSA9IFwic2V0XCI7XG59KShKIHx8IChKID0ge30pKTtcblxudmFyIFg7XG5cbihmdW5jdGlvbih0KSB7XG4gICAgdFt0W1wiTm9uZVwiXSA9IDBdID0gXCJOb25lXCI7XG4gICAgdFt0W1wiT2JzZXJ2ZXJcIl0gPSAxXSA9IFwiT2JzZXJ2ZXJcIjtcbiAgICB0W3RbXCJOb2RlXCJdID0gMl0gPSBcIk5vZGVcIjtcbiAgICB0W3RbXCJMYXlvdXRcIl0gPSA0XSA9IFwiTGF5b3V0XCI7XG4gICAgdFt0W1wiUHJpbXRpdmVcIl0gPSA4XSA9IFwiUHJpbXRpdmVcIjtcbiAgICB0W3RbXCJBcnJheVwiXSA9IDE4XSA9IFwiQXJyYXlcIjtcbiAgICB0W3RbXCJTZXRcIl0gPSAzNF0gPSBcIlNldFwiO1xuICAgIHRbdFtcIk1hcFwiXSA9IDY2XSA9IFwiTWFwXCI7XG59KShYIHx8IChYID0ge30pKTtcblxuZnVuY3Rpb24gWSh0LCBlKSB7XG4gICAgY29uc3Qge2xlbmd0aDogc30gPSB0O1xuICAgIGNvbnN0IHIgPSBBcnJheShzKTtcbiAgICBsZXQgaSA9IDA7XG4gICAgd2hpbGUgKGkgPCBzKSB7XG4gICAgICAgIHJbaV0gPSB0W2ldO1xuICAgICAgICArK2k7XG4gICAgfVxuICAgIGlmICh2b2lkIDAgIT09IGUpIHIuZGVsZXRlZEl0ZW1zID0gZS5zbGljZSgwKTsgZWxzZSBpZiAodm9pZCAwICE9PSB0LmRlbGV0ZWRJdGVtcykgci5kZWxldGVkSXRlbXMgPSB0LmRlbGV0ZWRJdGVtcy5zbGljZSgwKTsgZWxzZSByLmRlbGV0ZWRJdGVtcyA9IFtdO1xuICAgIHIuaXNJbmRleE1hcCA9IHRydWU7XG4gICAgcmV0dXJuIHI7XG59XG5cbmZ1bmN0aW9uIHR0KHQgPSAwKSB7XG4gICAgY29uc3QgZSA9IEFycmF5KHQpO1xuICAgIGxldCBzID0gMDtcbiAgICB3aGlsZSAocyA8IHQpIGVbc10gPSBzKys7XG4gICAgZS5kZWxldGVkSXRlbXMgPSBbXTtcbiAgICBlLmlzSW5kZXhNYXAgPSB0cnVlO1xuICAgIHJldHVybiBlO1xufVxuXG5mdW5jdGlvbiBldCh0KSB7XG4gICAgY29uc3QgZSA9IHQuc2xpY2UoKTtcbiAgICBlLmRlbGV0ZWRJdGVtcyA9IHQuZGVsZXRlZEl0ZW1zLnNsaWNlKCk7XG4gICAgZS5pc0luZGV4TWFwID0gdHJ1ZTtcbiAgICByZXR1cm4gZTtcbn1cblxuZnVuY3Rpb24gc3QodCkge1xuICAgIHJldHVybiB0IGluc3RhbmNlb2YgQXJyYXkgJiYgdHJ1ZSA9PT0gdC5pc0luZGV4TWFwO1xufVxuXG5mdW5jdGlvbiBydCh0KSB7XG4gICAgcmV0dXJuIG51bGwgPT0gdCA/IGl0IDogaXQodCk7XG59XG5cbmZ1bmN0aW9uIGl0KHQpIHtcbiAgICBjb25zdCBlID0gdC5wcm90b3R5cGU7XG4gICAgdihlLCBcInN1YnNcIiwge1xuICAgICAgICBnZXQ6IG50XG4gICAgfSk7XG4gICAgYihlLCBcInN1YnNjcmliZVwiLCBvdCk7XG4gICAgYihlLCBcInVuc3Vic2NyaWJlXCIsIGh0KTtcbn1cblxuY2xhc3MgU3Vic2NyaWJlclJlY29yZCB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMuc2YgPSAwO1xuICAgICAgICB0aGlzLmNvdW50ID0gMDtcbiAgICB9XG4gICAgYWRkKHQpIHtcbiAgICAgICAgaWYgKHRoaXMuaGFzKHQpKSByZXR1cm4gZmFsc2U7XG4gICAgICAgIGNvbnN0IGUgPSB0aGlzLnNmO1xuICAgICAgICBpZiAoMCA9PT0gKDEgJiBlKSkge1xuICAgICAgICAgICAgdGhpcy5zMCA9IHQ7XG4gICAgICAgICAgICB0aGlzLnNmIHw9IDE7XG4gICAgICAgIH0gZWxzZSBpZiAoMCA9PT0gKDIgJiBlKSkge1xuICAgICAgICAgICAgdGhpcy5zMSA9IHQ7XG4gICAgICAgICAgICB0aGlzLnNmIHw9IDI7XG4gICAgICAgIH0gZWxzZSBpZiAoMCA9PT0gKDQgJiBlKSkge1xuICAgICAgICAgICAgdGhpcy5zMiA9IHQ7XG4gICAgICAgICAgICB0aGlzLnNmIHw9IDQ7XG4gICAgICAgIH0gZWxzZSBpZiAoMCA9PT0gKDggJiBlKSkge1xuICAgICAgICAgICAgdGhpcy5zciA9IFsgdCBdO1xuICAgICAgICAgICAgdGhpcy5zZiB8PSA4O1xuICAgICAgICB9IGVsc2UgdGhpcy5zci5wdXNoKHQpO1xuICAgICAgICArK3RoaXMuY291bnQ7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICBoYXModCkge1xuICAgICAgICBjb25zdCBlID0gdGhpcy5zZjtcbiAgICAgICAgaWYgKCgxICYgZSkgPiAwICYmIHRoaXMuczAgPT09IHQpIHJldHVybiB0cnVlO1xuICAgICAgICBpZiAoKDIgJiBlKSA+IDAgJiYgdGhpcy5zMSA9PT0gdCkgcmV0dXJuIHRydWU7XG4gICAgICAgIGlmICgoNCAmIGUpID4gMCAmJiB0aGlzLnMyID09PSB0KSByZXR1cm4gdHJ1ZTtcbiAgICAgICAgaWYgKCg4ICYgZSkgPiAwKSB7XG4gICAgICAgICAgICBjb25zdCBlID0gdGhpcy5zcjtcbiAgICAgICAgICAgIGNvbnN0IHMgPSBlLmxlbmd0aDtcbiAgICAgICAgICAgIGxldCByID0gMDtcbiAgICAgICAgICAgIGZvciAoO3IgPCBzOyArK3IpIGlmIChlW3JdID09PSB0KSByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIGFueSgpIHtcbiAgICAgICAgcmV0dXJuIDAgIT09IHRoaXMuc2Y7XG4gICAgfVxuICAgIHJlbW92ZSh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSB0aGlzLnNmO1xuICAgICAgICBpZiAoKDEgJiBlKSA+IDAgJiYgdGhpcy5zMCA9PT0gdCkge1xuICAgICAgICAgICAgdGhpcy5zMCA9IHZvaWQgMDtcbiAgICAgICAgICAgIHRoaXMuc2YgPSAxIF4gKDEgfCB0aGlzLnNmKTtcbiAgICAgICAgICAgIC0tdGhpcy5jb3VudDtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9IGVsc2UgaWYgKCgyICYgZSkgPiAwICYmIHRoaXMuczEgPT09IHQpIHtcbiAgICAgICAgICAgIHRoaXMuczEgPSB2b2lkIDA7XG4gICAgICAgICAgICB0aGlzLnNmID0gMiBeICgyIHwgdGhpcy5zZik7XG4gICAgICAgICAgICAtLXRoaXMuY291bnQ7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfSBlbHNlIGlmICgoNCAmIGUpID4gMCAmJiB0aGlzLnMyID09PSB0KSB7XG4gICAgICAgICAgICB0aGlzLnMyID0gdm9pZCAwO1xuICAgICAgICAgICAgdGhpcy5zZiA9IDQgXiAoNCB8IHRoaXMuc2YpO1xuICAgICAgICAgICAgLS10aGlzLmNvdW50O1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH0gZWxzZSBpZiAoKDggJiBlKSA+IDApIHtcbiAgICAgICAgICAgIGNvbnN0IGUgPSB0aGlzLnNyO1xuICAgICAgICAgICAgY29uc3QgcyA9IGUubGVuZ3RoO1xuICAgICAgICAgICAgbGV0IHIgPSAwO1xuICAgICAgICAgICAgZm9yICg7ciA8IHM7ICsrcikgaWYgKGVbcl0gPT09IHQpIHtcbiAgICAgICAgICAgICAgICBlLnNwbGljZShyLCAxKTtcbiAgICAgICAgICAgICAgICBpZiAoMSA9PT0gcykgdGhpcy5zZiA9IDggXiAoOCB8IHRoaXMuc2YpO1xuICAgICAgICAgICAgICAgIC0tdGhpcy5jb3VudDtcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIG5vdGlmeSh0LCBlLCBzKSB7XG4gICAgICAgIGNvbnN0IHIgPSB0aGlzLnMwO1xuICAgICAgICBjb25zdCBpID0gdGhpcy5zMTtcbiAgICAgICAgY29uc3QgbiA9IHRoaXMuczI7XG4gICAgICAgIGxldCBvID0gdGhpcy5zcjtcbiAgICAgICAgaWYgKHZvaWQgMCAhPT0gbykgbyA9IG8uc2xpY2UoKTtcbiAgICAgICAgaWYgKHZvaWQgMCAhPT0gcikgci5oYW5kbGVDaGFuZ2UodCwgZSwgcyk7XG4gICAgICAgIGlmICh2b2lkIDAgIT09IGkpIGkuaGFuZGxlQ2hhbmdlKHQsIGUsIHMpO1xuICAgICAgICBpZiAodm9pZCAwICE9PSBuKSBuLmhhbmRsZUNoYW5nZSh0LCBlLCBzKTtcbiAgICAgICAgaWYgKHZvaWQgMCAhPT0gbykge1xuICAgICAgICAgICAgY29uc3QgciA9IG8ubGVuZ3RoO1xuICAgICAgICAgICAgbGV0IGk7XG4gICAgICAgICAgICBsZXQgbiA9IDA7XG4gICAgICAgICAgICBmb3IgKDtuIDwgcjsgKytuKSB7XG4gICAgICAgICAgICAgICAgaSA9IG9bbl07XG4gICAgICAgICAgICAgICAgaWYgKHZvaWQgMCAhPT0gaSkgaS5oYW5kbGVDaGFuZ2UodCwgZSwgcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgbm90aWZ5Q29sbGVjdGlvbih0LCBlKSB7XG4gICAgICAgIGNvbnN0IHMgPSB0aGlzLnMwO1xuICAgICAgICBjb25zdCByID0gdGhpcy5zMTtcbiAgICAgICAgY29uc3QgaSA9IHRoaXMuczI7XG4gICAgICAgIGxldCBuID0gdGhpcy5zcjtcbiAgICAgICAgaWYgKHZvaWQgMCAhPT0gbikgbiA9IG4uc2xpY2UoKTtcbiAgICAgICAgaWYgKHZvaWQgMCAhPT0gcykgcy5oYW5kbGVDb2xsZWN0aW9uQ2hhbmdlKHQsIGUpO1xuICAgICAgICBpZiAodm9pZCAwICE9PSByKSByLmhhbmRsZUNvbGxlY3Rpb25DaGFuZ2UodCwgZSk7XG4gICAgICAgIGlmICh2b2lkIDAgIT09IGkpIGkuaGFuZGxlQ29sbGVjdGlvbkNoYW5nZSh0LCBlKTtcbiAgICAgICAgaWYgKHZvaWQgMCAhPT0gbikge1xuICAgICAgICAgICAgY29uc3QgcyA9IG4ubGVuZ3RoO1xuICAgICAgICAgICAgbGV0IHI7XG4gICAgICAgICAgICBsZXQgaSA9IDA7XG4gICAgICAgICAgICBmb3IgKDtpIDwgczsgKytpKSB7XG4gICAgICAgICAgICAgICAgciA9IG5baV07XG4gICAgICAgICAgICAgICAgaWYgKHZvaWQgMCAhPT0gcikgci5oYW5kbGVDb2xsZWN0aW9uQ2hhbmdlKHQsIGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxufVxuXG5mdW5jdGlvbiBudCgpIHtcbiAgICByZXR1cm4gdyh0aGlzLCBcInN1YnNcIiwgbmV3IFN1YnNjcmliZXJSZWNvcmQpO1xufVxuXG5mdW5jdGlvbiBvdCh0KSB7XG4gICAgcmV0dXJuIHRoaXMuc3Vicy5hZGQodCk7XG59XG5cbmZ1bmN0aW9uIGh0KHQpIHtcbiAgICByZXR1cm4gdGhpcy5zdWJzLnJlbW92ZSh0KTtcbn1cblxuZnVuY3Rpb24gY3QodCkge1xuICAgIHJldHVybiBudWxsID09IHQgPyB1dCA6IHV0KHQpO1xufVxuXG5mdW5jdGlvbiB1dCh0KSB7XG4gICAgY29uc3QgZSA9IHQucHJvdG90eXBlO1xuICAgIHYoZSwgXCJxdWV1ZVwiLCB7XG4gICAgICAgIGdldDogYXRcbiAgICB9KTtcbn1cblxuY2xhc3MgRmx1c2hRdWV1ZSB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMudCA9IGZhbHNlO1xuICAgICAgICB0aGlzLmkgPSBuZXcgU2V0O1xuICAgIH1cbiAgICBnZXQgY291bnQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmkuc2l6ZTtcbiAgICB9XG4gICAgYWRkKHQpIHtcbiAgICAgICAgdGhpcy5pLmFkZCh0KTtcbiAgICAgICAgaWYgKHRoaXMudCkgcmV0dXJuO1xuICAgICAgICB0aGlzLnQgPSB0cnVlO1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgdGhpcy5pLmZvckVhY2gobHQpO1xuICAgICAgICB9IGZpbmFsbHkge1xuICAgICAgICAgICAgdGhpcy50ID0gZmFsc2U7XG4gICAgICAgIH1cbiAgICB9XG4gICAgY2xlYXIoKSB7XG4gICAgICAgIHRoaXMuaS5jbGVhcigpO1xuICAgICAgICB0aGlzLnQgPSBmYWxzZTtcbiAgICB9XG59XG5cbkZsdXNoUXVldWUuaW5zdGFuY2UgPSBuZXcgRmx1c2hRdWV1ZTtcblxuZnVuY3Rpb24gYXQoKSB7XG4gICAgcmV0dXJuIEZsdXNoUXVldWUuaW5zdGFuY2U7XG59XG5cbmZ1bmN0aW9uIGx0KHQsIGUsIHMpIHtcbiAgICBzLmRlbGV0ZSh0KTtcbiAgICB0LmZsdXNoKCk7XG59XG5cbmNsYXNzIENvbGxlY3Rpb25MZW5ndGhPYnNlcnZlciB7XG4gICAgY29uc3RydWN0b3IodCkge1xuICAgICAgICB0aGlzLm93bmVyID0gdDtcbiAgICAgICAgdGhpcy50eXBlID0gMTg7XG4gICAgICAgIHRoaXMuZiA9IDA7XG4gICAgICAgIHRoaXMudiA9IHRoaXMuaCA9ICh0aGlzLm8gPSB0LmNvbGxlY3Rpb24pLmxlbmd0aDtcbiAgICB9XG4gICAgZ2V0VmFsdWUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm8ubGVuZ3RoO1xuICAgIH1cbiAgICBzZXRWYWx1ZSh0LCBlKSB7XG4gICAgICAgIGNvbnN0IHMgPSB0aGlzLnY7XG4gICAgICAgIGlmICh0ICE9PSBzICYmIGEodCkpIHtcbiAgICAgICAgICAgIGlmICgwID09PSAoMjU2ICYgZSkpIHRoaXMuby5sZW5ndGggPSB0O1xuICAgICAgICAgICAgdGhpcy52ID0gdDtcbiAgICAgICAgICAgIHRoaXMuaCA9IHM7XG4gICAgICAgICAgICB0aGlzLmYgPSBlO1xuICAgICAgICAgICAgdGhpcy5xdWV1ZS5hZGQodGhpcyk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgaGFuZGxlQ29sbGVjdGlvbkNoYW5nZSh0LCBlKSB7XG4gICAgICAgIGNvbnN0IHMgPSB0aGlzLnY7XG4gICAgICAgIGNvbnN0IHIgPSB0aGlzLm8ubGVuZ3RoO1xuICAgICAgICBpZiAoKHRoaXMudiA9IHIpICE9PSBzKSB7XG4gICAgICAgICAgICB0aGlzLmggPSBzO1xuICAgICAgICAgICAgdGhpcy5mID0gZTtcbiAgICAgICAgICAgIHRoaXMucXVldWUuYWRkKHRoaXMpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGZsdXNoKCkge1xuICAgICAgICBwdCA9IHRoaXMuaDtcbiAgICAgICAgdGhpcy5oID0gdGhpcy52O1xuICAgICAgICB0aGlzLnN1YnMubm90aWZ5KHRoaXMudiwgcHQsIHRoaXMuZik7XG4gICAgfVxufVxuXG5jbGFzcyBDb2xsZWN0aW9uU2l6ZU9ic2VydmVyIHtcbiAgICBjb25zdHJ1Y3Rvcih0KSB7XG4gICAgICAgIHRoaXMub3duZXIgPSB0O1xuICAgICAgICB0aGlzLmYgPSAwO1xuICAgICAgICB0aGlzLnYgPSB0aGlzLmggPSAodGhpcy5vID0gdC5jb2xsZWN0aW9uKS5zaXplO1xuICAgICAgICB0aGlzLnR5cGUgPSB0aGlzLm8gaW5zdGFuY2VvZiBNYXAgPyA2NiA6IDM0O1xuICAgIH1cbiAgICBnZXRWYWx1ZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuby5zaXplO1xuICAgIH1cbiAgICBzZXRWYWx1ZSgpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiQVVSMDJcIik7XG4gICAgfVxuICAgIGhhbmRsZUNvbGxlY3Rpb25DaGFuZ2UodCwgZSkge1xuICAgICAgICBjb25zdCBzID0gdGhpcy52O1xuICAgICAgICBjb25zdCByID0gdGhpcy5vLnNpemU7XG4gICAgICAgIGlmICgodGhpcy52ID0gcikgIT09IHMpIHtcbiAgICAgICAgICAgIHRoaXMuaCA9IHM7XG4gICAgICAgICAgICB0aGlzLmYgPSBlO1xuICAgICAgICAgICAgdGhpcy5xdWV1ZS5hZGQodGhpcyk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZmx1c2goKSB7XG4gICAgICAgIHB0ID0gdGhpcy5oO1xuICAgICAgICB0aGlzLmggPSB0aGlzLnY7XG4gICAgICAgIHRoaXMuc3Vicy5ub3RpZnkodGhpcy52LCBwdCwgdGhpcy5mKTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIGZ0KHQpIHtcbiAgICBjb25zdCBlID0gdC5wcm90b3R5cGU7XG4gICAgYihlLCBcInN1YnNjcmliZVwiLCBkdCwgdHJ1ZSk7XG4gICAgYihlLCBcInVuc3Vic2NyaWJlXCIsIHZ0LCB0cnVlKTtcbiAgICBjdCh0KTtcbiAgICBydCh0KTtcbn1cblxuZnVuY3Rpb24gZHQodCkge1xuICAgIGlmICh0aGlzLnN1YnMuYWRkKHQpICYmIDEgPT09IHRoaXMuc3Vicy5jb3VudCkgdGhpcy5vd25lci5zdWJzY3JpYmUodGhpcyk7XG59XG5cbmZ1bmN0aW9uIHZ0KHQpIHtcbiAgICBpZiAodGhpcy5zdWJzLnJlbW92ZSh0KSAmJiAwID09PSB0aGlzLnN1YnMuY291bnQpIHRoaXMub3duZXIuc3Vic2NyaWJlKHRoaXMpO1xufVxuXG5mdChDb2xsZWN0aW9uTGVuZ3RoT2JzZXJ2ZXIpO1xuXG5mdChDb2xsZWN0aW9uU2l6ZU9ic2VydmVyKTtcblxubGV0IHB0O1xuXG5jb25zdCBndCA9IG5ldyBXZWFrTWFwO1xuXG5mdW5jdGlvbiB3dCh0LCBlKSB7XG4gICAgaWYgKHQgPT09IGUpIHJldHVybiAwO1xuICAgIHQgPSBudWxsID09PSB0ID8gXCJudWxsXCIgOiB0LnRvU3RyaW5nKCk7XG4gICAgZSA9IG51bGwgPT09IGUgPyBcIm51bGxcIiA6IGUudG9TdHJpbmcoKTtcbiAgICByZXR1cm4gdCA8IGUgPyAtMSA6IDE7XG59XG5cbmZ1bmN0aW9uIGJ0KHQsIGUpIHtcbiAgICBpZiAodm9pZCAwID09PSB0KSBpZiAodm9pZCAwID09PSBlKSByZXR1cm4gMDsgZWxzZSByZXR1cm4gMTtcbiAgICBpZiAodm9pZCAwID09PSBlKSByZXR1cm4gLTE7XG4gICAgcmV0dXJuIDA7XG59XG5cbmZ1bmN0aW9uIEV0KHQsIGUsIHMsIHIsIGkpIHtcbiAgICBsZXQgbiwgbywgaCwgYywgdTtcbiAgICBsZXQgYSwgbDtcbiAgICBmb3IgKGEgPSBzICsgMTsgYSA8IHI7IGErKykge1xuICAgICAgICBuID0gdFthXTtcbiAgICAgICAgbyA9IGVbYV07XG4gICAgICAgIGZvciAobCA9IGEgLSAxOyBsID49IHM7IGwtLSkge1xuICAgICAgICAgICAgaCA9IHRbbF07XG4gICAgICAgICAgICBjID0gZVtsXTtcbiAgICAgICAgICAgIHUgPSBpKGgsIG4pO1xuICAgICAgICAgICAgaWYgKHUgPiAwKSB7XG4gICAgICAgICAgICAgICAgdFtsICsgMV0gPSBoO1xuICAgICAgICAgICAgICAgIGVbbCArIDFdID0gYztcbiAgICAgICAgICAgIH0gZWxzZSBicmVhaztcbiAgICAgICAgfVxuICAgICAgICB0W2wgKyAxXSA9IG47XG4gICAgICAgIGVbbCArIDFdID0gbztcbiAgICB9XG59XG5cbmZ1bmN0aW9uIEF0KHQsIGUsIHMsIHIsIGkpIHtcbiAgICBsZXQgbiA9IDAsIG8gPSAwO1xuICAgIGxldCBoLCBjLCB1O1xuICAgIGxldCBhLCBsLCBmO1xuICAgIGxldCBkLCB2LCBwO1xuICAgIGxldCBnLCB3O1xuICAgIGxldCBiLCBFLCBBLCB5O1xuICAgIGxldCBtLCBVLCB4LCBTO1xuICAgIHdoaWxlICh0cnVlKSB7XG4gICAgICAgIGlmIChyIC0gcyA8PSAxMCkge1xuICAgICAgICAgICAgRXQodCwgZSwgcywgciwgaSk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgbiA9IHMgKyAociAtIHMgPj4gMSk7XG4gICAgICAgIGggPSB0W3NdO1xuICAgICAgICBhID0gZVtzXTtcbiAgICAgICAgYyA9IHRbciAtIDFdO1xuICAgICAgICBsID0gZVtyIC0gMV07XG4gICAgICAgIHUgPSB0W25dO1xuICAgICAgICBmID0gZVtuXTtcbiAgICAgICAgZCA9IGkoaCwgYyk7XG4gICAgICAgIGlmIChkID4gMCkge1xuICAgICAgICAgICAgZyA9IGg7XG4gICAgICAgICAgICB3ID0gYTtcbiAgICAgICAgICAgIGggPSBjO1xuICAgICAgICAgICAgYSA9IGw7XG4gICAgICAgICAgICBjID0gZztcbiAgICAgICAgICAgIGwgPSB3O1xuICAgICAgICB9XG4gICAgICAgIHYgPSBpKGgsIHUpO1xuICAgICAgICBpZiAodiA+PSAwKSB7XG4gICAgICAgICAgICBnID0gaDtcbiAgICAgICAgICAgIHcgPSBhO1xuICAgICAgICAgICAgaCA9IHU7XG4gICAgICAgICAgICBhID0gZjtcbiAgICAgICAgICAgIHUgPSBjO1xuICAgICAgICAgICAgZiA9IGw7XG4gICAgICAgICAgICBjID0gZztcbiAgICAgICAgICAgIGwgPSB3O1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcCA9IGkoYywgdSk7XG4gICAgICAgICAgICBpZiAocCA+IDApIHtcbiAgICAgICAgICAgICAgICBnID0gYztcbiAgICAgICAgICAgICAgICB3ID0gbDtcbiAgICAgICAgICAgICAgICBjID0gdTtcbiAgICAgICAgICAgICAgICBsID0gZjtcbiAgICAgICAgICAgICAgICB1ID0gZztcbiAgICAgICAgICAgICAgICBmID0gdztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB0W3NdID0gaDtcbiAgICAgICAgZVtzXSA9IGE7XG4gICAgICAgIHRbciAtIDFdID0gdTtcbiAgICAgICAgZVtyIC0gMV0gPSBmO1xuICAgICAgICBiID0gYztcbiAgICAgICAgRSA9IGw7XG4gICAgICAgIEEgPSBzICsgMTtcbiAgICAgICAgeSA9IHIgLSAxO1xuICAgICAgICB0W25dID0gdFtBXTtcbiAgICAgICAgZVtuXSA9IGVbQV07XG4gICAgICAgIHRbQV0gPSBiO1xuICAgICAgICBlW0FdID0gRTtcbiAgICAgICAgdDogZm9yIChvID0gQSArIDE7IG8gPCB5OyBvKyspIHtcbiAgICAgICAgICAgIG0gPSB0W29dO1xuICAgICAgICAgICAgVSA9IGVbb107XG4gICAgICAgICAgICB4ID0gaShtLCBiKTtcbiAgICAgICAgICAgIGlmICh4IDwgMCkge1xuICAgICAgICAgICAgICAgIHRbb10gPSB0W0FdO1xuICAgICAgICAgICAgICAgIGVbb10gPSBlW0FdO1xuICAgICAgICAgICAgICAgIHRbQV0gPSBtO1xuICAgICAgICAgICAgICAgIGVbQV0gPSBVO1xuICAgICAgICAgICAgICAgIEErKztcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoeCA+IDApIHtcbiAgICAgICAgICAgICAgICBkbyB7XG4gICAgICAgICAgICAgICAgICAgIHktLTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHkgPT0gbykgYnJlYWsgdDtcbiAgICAgICAgICAgICAgICAgICAgUyA9IHRbeV07XG4gICAgICAgICAgICAgICAgICAgIHggPSBpKFMsIGIpO1xuICAgICAgICAgICAgICAgIH0gd2hpbGUgKHggPiAwKTtcbiAgICAgICAgICAgICAgICB0W29dID0gdFt5XTtcbiAgICAgICAgICAgICAgICBlW29dID0gZVt5XTtcbiAgICAgICAgICAgICAgICB0W3ldID0gbTtcbiAgICAgICAgICAgICAgICBlW3ldID0gVTtcbiAgICAgICAgICAgICAgICBpZiAoeCA8IDApIHtcbiAgICAgICAgICAgICAgICAgICAgbSA9IHRbb107XG4gICAgICAgICAgICAgICAgICAgIFUgPSBlW29dO1xuICAgICAgICAgICAgICAgICAgICB0W29dID0gdFtBXTtcbiAgICAgICAgICAgICAgICAgICAgZVtvXSA9IGVbQV07XG4gICAgICAgICAgICAgICAgICAgIHRbQV0gPSBtO1xuICAgICAgICAgICAgICAgICAgICBlW0FdID0gVTtcbiAgICAgICAgICAgICAgICAgICAgQSsrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAociAtIHkgPCBBIC0gcykge1xuICAgICAgICAgICAgQXQodCwgZSwgeSwgciwgaSk7XG4gICAgICAgICAgICByID0gQTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIEF0KHQsIGUsIHMsIEEsIGkpO1xuICAgICAgICAgICAgcyA9IHk7XG4gICAgICAgIH1cbiAgICB9XG59XG5cbmNvbnN0IHl0ID0gQXJyYXkucHJvdG90eXBlO1xuXG5jb25zdCBtdCA9IHl0LnB1c2g7XG5cbmNvbnN0IFV0ID0geXQudW5zaGlmdDtcblxuY29uc3QgeHQgPSB5dC5wb3A7XG5cbmNvbnN0IFN0ID0geXQuc2hpZnQ7XG5cbmNvbnN0IE90ID0geXQuc3BsaWNlO1xuXG5jb25zdCBDdCA9IHl0LnJldmVyc2U7XG5cbmNvbnN0IGt0ID0geXQuc29ydDtcblxuY29uc3QgQnQgPSB7XG4gICAgcHVzaDogbXQsXG4gICAgdW5zaGlmdDogVXQsXG4gICAgcG9wOiB4dCxcbiAgICBzaGlmdDogU3QsXG4gICAgc3BsaWNlOiBPdCxcbiAgICByZXZlcnNlOiBDdCxcbiAgICBzb3J0OiBrdFxufTtcblxuY29uc3QgJHQgPSBbIFwicHVzaFwiLCBcInVuc2hpZnRcIiwgXCJwb3BcIiwgXCJzaGlmdFwiLCBcInNwbGljZVwiLCBcInJldmVyc2VcIiwgXCJzb3J0XCIgXTtcblxuY29uc3QgTHQgPSB7XG4gICAgcHVzaDogZnVuY3Rpb24oLi4udCkge1xuICAgICAgICBjb25zdCBlID0gZ3QuZ2V0KHRoaXMpO1xuICAgICAgICBpZiAodm9pZCAwID09PSBlKSByZXR1cm4gbXQuYXBwbHkodGhpcywgdCk7XG4gICAgICAgIGNvbnN0IHMgPSB0aGlzLmxlbmd0aDtcbiAgICAgICAgY29uc3QgciA9IHQubGVuZ3RoO1xuICAgICAgICBpZiAoMCA9PT0gcikgcmV0dXJuIHM7XG4gICAgICAgIHRoaXMubGVuZ3RoID0gZS5pbmRleE1hcC5sZW5ndGggPSBzICsgcjtcbiAgICAgICAgbGV0IGkgPSBzO1xuICAgICAgICB3aGlsZSAoaSA8IHRoaXMubGVuZ3RoKSB7XG4gICAgICAgICAgICB0aGlzW2ldID0gdFtpIC0gc107XG4gICAgICAgICAgICBlLmluZGV4TWFwW2ldID0gLTI7XG4gICAgICAgICAgICBpKys7XG4gICAgICAgIH1cbiAgICAgICAgZS5ub3RpZnkoKTtcbiAgICAgICAgcmV0dXJuIHRoaXMubGVuZ3RoO1xuICAgIH0sXG4gICAgdW5zaGlmdDogZnVuY3Rpb24oLi4udCkge1xuICAgICAgICBjb25zdCBlID0gZ3QuZ2V0KHRoaXMpO1xuICAgICAgICBpZiAodm9pZCAwID09PSBlKSByZXR1cm4gVXQuYXBwbHkodGhpcywgdCk7XG4gICAgICAgIGNvbnN0IHMgPSB0Lmxlbmd0aDtcbiAgICAgICAgY29uc3QgciA9IG5ldyBBcnJheShzKTtcbiAgICAgICAgbGV0IGkgPSAwO1xuICAgICAgICB3aGlsZSAoaSA8IHMpIHJbaSsrXSA9IC0yO1xuICAgICAgICBVdC5hcHBseShlLmluZGV4TWFwLCByKTtcbiAgICAgICAgY29uc3QgbiA9IFV0LmFwcGx5KHRoaXMsIHQpO1xuICAgICAgICBlLm5vdGlmeSgpO1xuICAgICAgICByZXR1cm4gbjtcbiAgICB9LFxuICAgIHBvcDogZnVuY3Rpb24oKSB7XG4gICAgICAgIGNvbnN0IHQgPSBndC5nZXQodGhpcyk7XG4gICAgICAgIGlmICh2b2lkIDAgPT09IHQpIHJldHVybiB4dC5jYWxsKHRoaXMpO1xuICAgICAgICBjb25zdCBlID0gdC5pbmRleE1hcDtcbiAgICAgICAgY29uc3QgcyA9IHh0LmNhbGwodGhpcyk7XG4gICAgICAgIGNvbnN0IHIgPSBlLmxlbmd0aCAtIDE7XG4gICAgICAgIGlmIChlW3JdID4gLTEpIGUuZGVsZXRlZEl0ZW1zLnB1c2goZVtyXSk7XG4gICAgICAgIHh0LmNhbGwoZSk7XG4gICAgICAgIHQubm90aWZ5KCk7XG4gICAgICAgIHJldHVybiBzO1xuICAgIH0sXG4gICAgc2hpZnQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICBjb25zdCB0ID0gZ3QuZ2V0KHRoaXMpO1xuICAgICAgICBpZiAodm9pZCAwID09PSB0KSByZXR1cm4gU3QuY2FsbCh0aGlzKTtcbiAgICAgICAgY29uc3QgZSA9IHQuaW5kZXhNYXA7XG4gICAgICAgIGNvbnN0IHMgPSBTdC5jYWxsKHRoaXMpO1xuICAgICAgICBpZiAoZVswXSA+IC0xKSBlLmRlbGV0ZWRJdGVtcy5wdXNoKGVbMF0pO1xuICAgICAgICBTdC5jYWxsKGUpO1xuICAgICAgICB0Lm5vdGlmeSgpO1xuICAgICAgICByZXR1cm4gcztcbiAgICB9LFxuICAgIHNwbGljZTogZnVuY3Rpb24oLi4udCkge1xuICAgICAgICBjb25zdCBlID0gdFswXTtcbiAgICAgICAgY29uc3QgcyA9IHRbMV07XG4gICAgICAgIGNvbnN0IHIgPSBndC5nZXQodGhpcyk7XG4gICAgICAgIGlmICh2b2lkIDAgPT09IHIpIHJldHVybiBPdC5hcHBseSh0aGlzLCB0KTtcbiAgICAgICAgY29uc3QgaSA9IHRoaXMubGVuZ3RoO1xuICAgICAgICBjb25zdCBuID0gMCB8IGU7XG4gICAgICAgIGNvbnN0IG8gPSBuIDwgMCA/IE1hdGgubWF4KGkgKyBuLCAwKSA6IE1hdGgubWluKG4sIGkpO1xuICAgICAgICBjb25zdCBoID0gci5pbmRleE1hcDtcbiAgICAgICAgY29uc3QgYyA9IHQubGVuZ3RoO1xuICAgICAgICBjb25zdCB1ID0gMCA9PT0gYyA/IDAgOiAxID09PSBjID8gaSAtIG8gOiBzO1xuICAgICAgICBpZiAodSA+IDApIHtcbiAgICAgICAgICAgIGxldCB0ID0gbztcbiAgICAgICAgICAgIGNvbnN0IGUgPSB0ICsgdTtcbiAgICAgICAgICAgIHdoaWxlICh0IDwgZSkge1xuICAgICAgICAgICAgICAgIGlmIChoW3RdID4gLTEpIGguZGVsZXRlZEl0ZW1zLnB1c2goaFt0XSk7XG4gICAgICAgICAgICAgICAgdCsrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChjID4gMikge1xuICAgICAgICAgICAgY29uc3QgdCA9IGMgLSAyO1xuICAgICAgICAgICAgY29uc3QgciA9IG5ldyBBcnJheSh0KTtcbiAgICAgICAgICAgIGxldCBpID0gMDtcbiAgICAgICAgICAgIHdoaWxlIChpIDwgdCkgcltpKytdID0gLTI7XG4gICAgICAgICAgICBPdC5jYWxsKGgsIGUsIHMsIC4uLnIpO1xuICAgICAgICB9IGVsc2UgT3QuYXBwbHkoaCwgdCk7XG4gICAgICAgIGNvbnN0IGEgPSBPdC5hcHBseSh0aGlzLCB0KTtcbiAgICAgICAgci5ub3RpZnkoKTtcbiAgICAgICAgcmV0dXJuIGE7XG4gICAgfSxcbiAgICByZXZlcnNlOiBmdW5jdGlvbigpIHtcbiAgICAgICAgY29uc3QgdCA9IGd0LmdldCh0aGlzKTtcbiAgICAgICAgaWYgKHZvaWQgMCA9PT0gdCkge1xuICAgICAgICAgICAgQ3QuY2FsbCh0aGlzKTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGUgPSB0aGlzLmxlbmd0aDtcbiAgICAgICAgY29uc3QgcyA9IGUgLyAyIHwgMDtcbiAgICAgICAgbGV0IHIgPSAwO1xuICAgICAgICB3aGlsZSAociAhPT0gcykge1xuICAgICAgICAgICAgY29uc3QgcyA9IGUgLSByIC0gMTtcbiAgICAgICAgICAgIGNvbnN0IGkgPSB0aGlzW3JdO1xuICAgICAgICAgICAgY29uc3QgbiA9IHQuaW5kZXhNYXBbcl07XG4gICAgICAgICAgICBjb25zdCBvID0gdGhpc1tzXTtcbiAgICAgICAgICAgIGNvbnN0IGggPSB0LmluZGV4TWFwW3NdO1xuICAgICAgICAgICAgdGhpc1tyXSA9IG87XG4gICAgICAgICAgICB0LmluZGV4TWFwW3JdID0gaDtcbiAgICAgICAgICAgIHRoaXNbc10gPSBpO1xuICAgICAgICAgICAgdC5pbmRleE1hcFtzXSA9IG47XG4gICAgICAgICAgICByKys7XG4gICAgICAgIH1cbiAgICAgICAgdC5ub3RpZnkoKTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfSxcbiAgICBzb3J0OiBmdW5jdGlvbih0KSB7XG4gICAgICAgIGNvbnN0IGUgPSBndC5nZXQodGhpcyk7XG4gICAgICAgIGlmICh2b2lkIDAgPT09IGUpIHtcbiAgICAgICAgICAgIGt0LmNhbGwodGhpcywgdCk7XG4gICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBzID0gdGhpcy5sZW5ndGg7XG4gICAgICAgIGlmIChzIDwgMikgcmV0dXJuIHRoaXM7XG4gICAgICAgIEF0KHRoaXMsIGUuaW5kZXhNYXAsIDAsIHMsIGJ0KTtcbiAgICAgICAgbGV0IHIgPSAwO1xuICAgICAgICB3aGlsZSAociA8IHMpIHtcbiAgICAgICAgICAgIGlmICh2b2lkIDAgPT09IHRoaXNbcl0pIGJyZWFrO1xuICAgICAgICAgICAgcisrO1xuICAgICAgICB9XG4gICAgICAgIGlmICh2b2lkIDAgPT09IHQgfHwgIXAodCkpIHQgPSB3dDtcbiAgICAgICAgQXQodGhpcywgZS5pbmRleE1hcCwgMCwgciwgdCk7XG4gICAgICAgIGUubm90aWZ5KCk7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbn07XG5cbmZvciAoY29uc3QgdCBvZiAkdCkgdihMdFt0XSwgXCJvYnNlcnZpbmdcIiwge1xuICAgIHZhbHVlOiB0cnVlLFxuICAgIHdyaXRhYmxlOiBmYWxzZSxcbiAgICBjb25maWd1cmFibGU6IGZhbHNlLFxuICAgIGVudW1lcmFibGU6IGZhbHNlXG59KTtcblxubGV0IFJ0ID0gZmFsc2U7XG5cbmZ1bmN0aW9uIFB0KCkge1xuICAgIGZvciAoY29uc3QgdCBvZiAkdCkgaWYgKHRydWUgIT09IHl0W3RdLm9ic2VydmluZykgdyh5dCwgdCwgTHRbdF0pO1xufVxuXG5mdW5jdGlvbiBUdCgpIHtcbiAgICBmb3IgKGNvbnN0IHQgb2YgJHQpIGlmICh0cnVlID09PSB5dFt0XS5vYnNlcnZpbmcpIHcoeXQsIHQsIEJ0W3RdKTtcbn1cblxuY2xhc3MgQXJyYXlPYnNlcnZlciB7XG4gICAgY29uc3RydWN0b3IodCkge1xuICAgICAgICB0aGlzLnR5cGUgPSAxODtcbiAgICAgICAgaWYgKCFSdCkge1xuICAgICAgICAgICAgUnQgPSB0cnVlO1xuICAgICAgICAgICAgUHQoKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmluZGV4T2JzZXJ2ZXJzID0ge307XG4gICAgICAgIHRoaXMuY29sbGVjdGlvbiA9IHQ7XG4gICAgICAgIHRoaXMuaW5kZXhNYXAgPSB0dCh0Lmxlbmd0aCk7XG4gICAgICAgIHRoaXMubGVuT2JzID0gdm9pZCAwO1xuICAgICAgICBndC5zZXQodCwgdGhpcyk7XG4gICAgfVxuICAgIG5vdGlmeSgpIHtcbiAgICAgICAgY29uc3QgdCA9IHRoaXMuaW5kZXhNYXA7XG4gICAgICAgIGNvbnN0IGUgPSB0aGlzLmNvbGxlY3Rpb24ubGVuZ3RoO1xuICAgICAgICB0aGlzLmluZGV4TWFwID0gdHQoZSk7XG4gICAgICAgIHRoaXMuc3Vicy5ub3RpZnlDb2xsZWN0aW9uKHQsIDApO1xuICAgIH1cbiAgICBnZXRMZW5ndGhPYnNlcnZlcigpIHtcbiAgICAgICAgdmFyIHQ7XG4gICAgICAgIHJldHVybiBudWxsICE9PSAodCA9IHRoaXMubGVuT2JzKSAmJiB2b2lkIDAgIT09IHQgPyB0IDogdGhpcy5sZW5PYnMgPSBuZXcgQ29sbGVjdGlvbkxlbmd0aE9ic2VydmVyKHRoaXMpO1xuICAgIH1cbiAgICBnZXRJbmRleE9ic2VydmVyKHQpIHtcbiAgICAgICAgdmFyIGU7XG4gICAgICAgIHZhciBzO1xuICAgICAgICByZXR1cm4gbnVsbCAhPT0gKGUgPSAocyA9IHRoaXMuaW5kZXhPYnNlcnZlcnMpW3RdKSAmJiB2b2lkIDAgIT09IGUgPyBlIDogc1t0XSA9IG5ldyBBcnJheUluZGV4T2JzZXJ2ZXIodGhpcywgdCk7XG4gICAgfVxufVxuXG5jbGFzcyBBcnJheUluZGV4T2JzZXJ2ZXIge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUpIHtcbiAgICAgICAgdGhpcy5vd25lciA9IHQ7XG4gICAgICAgIHRoaXMuaW5kZXggPSBlO1xuICAgICAgICB0aGlzLmRvTm90Q2FjaGUgPSB0cnVlO1xuICAgICAgICB0aGlzLnZhbHVlID0gdGhpcy5nZXRWYWx1ZSgpO1xuICAgIH1cbiAgICBnZXRWYWx1ZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMub3duZXIuY29sbGVjdGlvblt0aGlzLmluZGV4XTtcbiAgICB9XG4gICAgc2V0VmFsdWUodCwgZSkge1xuICAgICAgICBpZiAodCA9PT0gdGhpcy5nZXRWYWx1ZSgpKSByZXR1cm47XG4gICAgICAgIGNvbnN0IHMgPSB0aGlzLm93bmVyO1xuICAgICAgICBjb25zdCByID0gdGhpcy5pbmRleDtcbiAgICAgICAgY29uc3QgaSA9IHMuaW5kZXhNYXA7XG4gICAgICAgIGlmIChpW3JdID4gLTEpIGkuZGVsZXRlZEl0ZW1zLnB1c2goaVtyXSk7XG4gICAgICAgIGlbcl0gPSAtMjtcbiAgICAgICAgcy5jb2xsZWN0aW9uW3JdID0gdDtcbiAgICAgICAgcy5ub3RpZnkoKTtcbiAgICB9XG4gICAgaGFuZGxlQ29sbGVjdGlvbkNoYW5nZSh0LCBlKSB7XG4gICAgICAgIGNvbnN0IHMgPSB0aGlzLmluZGV4O1xuICAgICAgICBjb25zdCByID0gdFtzXSA9PT0gcztcbiAgICAgICAgaWYgKHIpIHJldHVybjtcbiAgICAgICAgY29uc3QgaSA9IHRoaXMudmFsdWU7XG4gICAgICAgIGNvbnN0IG4gPSB0aGlzLnZhbHVlID0gdGhpcy5nZXRWYWx1ZSgpO1xuICAgICAgICBpZiAoaSAhPT0gbikgdGhpcy5zdWJzLm5vdGlmeShuLCBpLCBlKTtcbiAgICB9XG4gICAgc3Vic2NyaWJlKHQpIHtcbiAgICAgICAgaWYgKHRoaXMuc3Vicy5hZGQodCkgJiYgMSA9PT0gdGhpcy5zdWJzLmNvdW50KSB0aGlzLm93bmVyLnN1YnNjcmliZSh0aGlzKTtcbiAgICB9XG4gICAgdW5zdWJzY3JpYmUodCkge1xuICAgICAgICBpZiAodGhpcy5zdWJzLnJlbW92ZSh0KSAmJiAwID09PSB0aGlzLnN1YnMuY291bnQpIHRoaXMub3duZXIudW5zdWJzY3JpYmUodGhpcyk7XG4gICAgfVxufVxuXG5ydChBcnJheU9ic2VydmVyKTtcblxucnQoQXJyYXlJbmRleE9ic2VydmVyKTtcblxuZnVuY3Rpb24ganQodCkge1xuICAgIGxldCBlID0gZ3QuZ2V0KHQpO1xuICAgIGlmICh2b2lkIDAgPT09IGUpIGUgPSBuZXcgQXJyYXlPYnNlcnZlcih0KTtcbiAgICByZXR1cm4gZTtcbn1cblxuZnVuY3Rpb24gSXQodCkge1xuICAgIGxldCBlID0gMDtcbiAgICBsZXQgcyA9IDA7XG4gICAgY29uc3QgciA9IHQubGVuZ3RoO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcjsgKytpKSB7XG4gICAgICAgIHdoaWxlICh0LmRlbGV0ZWRJdGVtc1tzXSA8PSBpIC0gZSkge1xuICAgICAgICAgICAgKytzO1xuICAgICAgICAgICAgLS1lO1xuICAgICAgICB9XG4gICAgICAgIGlmICgtMiA9PT0gdFtpXSkgKytlOyBlbHNlIHRbaV0gKz0gZTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIE10KHQsIGUpIHtcbiAgICBjb25zdCBzID0gdC5zbGljZSgpO1xuICAgIGNvbnN0IHIgPSBlLmxlbmd0aDtcbiAgICBsZXQgaSA9IDA7XG4gICAgbGV0IG4gPSAwO1xuICAgIHdoaWxlIChpIDwgcikge1xuICAgICAgICBuID0gZVtpXTtcbiAgICAgICAgaWYgKC0yICE9PSBuKSB0W2ldID0gc1tuXTtcbiAgICAgICAgKytpO1xuICAgIH1cbn1cblxuY29uc3QgRHQgPSBuZXcgV2Vha01hcDtcblxuY29uc3QgRnQgPSBTZXQucHJvdG90eXBlO1xuXG5jb25zdCBWdCA9IEZ0LmFkZDtcblxuY29uc3QgTnQgPSBGdC5jbGVhcjtcblxuY29uc3QgS3QgPSBGdC5kZWxldGU7XG5cbmNvbnN0IHF0ID0ge1xuICAgIGFkZDogVnQsXG4gICAgY2xlYXI6IE50LFxuICAgIGRlbGV0ZTogS3Rcbn07XG5cbmNvbnN0IEh0ID0gWyBcImFkZFwiLCBcImNsZWFyXCIsIFwiZGVsZXRlXCIgXTtcblxuY29uc3QgUXQgPSB7XG4gICAgYWRkOiBmdW5jdGlvbih0KSB7XG4gICAgICAgIGNvbnN0IGUgPSBEdC5nZXQodGhpcyk7XG4gICAgICAgIGlmICh2b2lkIDAgPT09IGUpIHtcbiAgICAgICAgICAgIFZ0LmNhbGwodGhpcywgdCk7XG4gICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBzID0gdGhpcy5zaXplO1xuICAgICAgICBWdC5jYWxsKHRoaXMsIHQpO1xuICAgICAgICBjb25zdCByID0gdGhpcy5zaXplO1xuICAgICAgICBpZiAociA9PT0gcykgcmV0dXJuIHRoaXM7XG4gICAgICAgIGUuaW5kZXhNYXBbc10gPSAtMjtcbiAgICAgICAgZS5ub3RpZnkoKTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfSxcbiAgICBjbGVhcjogZnVuY3Rpb24oKSB7XG4gICAgICAgIGNvbnN0IHQgPSBEdC5nZXQodGhpcyk7XG4gICAgICAgIGlmICh2b2lkIDAgPT09IHQpIHJldHVybiBOdC5jYWxsKHRoaXMpO1xuICAgICAgICBjb25zdCBlID0gdGhpcy5zaXplO1xuICAgICAgICBpZiAoZSA+IDApIHtcbiAgICAgICAgICAgIGNvbnN0IGUgPSB0LmluZGV4TWFwO1xuICAgICAgICAgICAgbGV0IHMgPSAwO1xuICAgICAgICAgICAgZm9yIChjb25zdCB0IG9mIHRoaXMua2V5cygpKSB7XG4gICAgICAgICAgICAgICAgaWYgKGVbc10gPiAtMSkgZS5kZWxldGVkSXRlbXMucHVzaChlW3NdKTtcbiAgICAgICAgICAgICAgICBzKys7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBOdC5jYWxsKHRoaXMpO1xuICAgICAgICAgICAgZS5sZW5ndGggPSAwO1xuICAgICAgICAgICAgdC5ub3RpZnkoKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm47XG4gICAgfSxcbiAgICBkZWxldGU6IGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IER0LmdldCh0aGlzKTtcbiAgICAgICAgaWYgKHZvaWQgMCA9PT0gZSkgcmV0dXJuIEt0LmNhbGwodGhpcywgdCk7XG4gICAgICAgIGNvbnN0IHMgPSB0aGlzLnNpemU7XG4gICAgICAgIGlmICgwID09PSBzKSByZXR1cm4gZmFsc2U7XG4gICAgICAgIGxldCByID0gMDtcbiAgICAgICAgY29uc3QgaSA9IGUuaW5kZXhNYXA7XG4gICAgICAgIGZvciAoY29uc3QgcyBvZiB0aGlzLmtleXMoKSkge1xuICAgICAgICAgICAgaWYgKHMgPT09IHQpIHtcbiAgICAgICAgICAgICAgICBpZiAoaVtyXSA+IC0xKSBpLmRlbGV0ZWRJdGVtcy5wdXNoKGlbcl0pO1xuICAgICAgICAgICAgICAgIGkuc3BsaWNlKHIsIDEpO1xuICAgICAgICAgICAgICAgIGNvbnN0IHMgPSBLdC5jYWxsKHRoaXMsIHQpO1xuICAgICAgICAgICAgICAgIGlmICh0cnVlID09PSBzKSBlLm5vdGlmeSgpO1xuICAgICAgICAgICAgICAgIHJldHVybiBzO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcisrO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG59O1xuXG5jb25zdCBfdCA9IHtcbiAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICBjb25maWd1cmFibGU6IHRydWVcbn07XG5cbmZvciAoY29uc3QgdCBvZiBIdCkgdihRdFt0XSwgXCJvYnNlcnZpbmdcIiwge1xuICAgIHZhbHVlOiB0cnVlLFxuICAgIHdyaXRhYmxlOiBmYWxzZSxcbiAgICBjb25maWd1cmFibGU6IGZhbHNlLFxuICAgIGVudW1lcmFibGU6IGZhbHNlXG59KTtcblxubGV0IHp0ID0gZmFsc2U7XG5cbmZ1bmN0aW9uIFd0KCkge1xuICAgIGZvciAoY29uc3QgdCBvZiBIdCkgaWYgKHRydWUgIT09IEZ0W3RdLm9ic2VydmluZykgdihGdCwgdCwge1xuICAgICAgICAuLi5fdCxcbiAgICAgICAgdmFsdWU6IFF0W3RdXG4gICAgfSk7XG59XG5cbmZ1bmN0aW9uIEd0KCkge1xuICAgIGZvciAoY29uc3QgdCBvZiBIdCkgaWYgKHRydWUgPT09IEZ0W3RdLm9ic2VydmluZykgdihGdCwgdCwge1xuICAgICAgICAuLi5fdCxcbiAgICAgICAgdmFsdWU6IHF0W3RdXG4gICAgfSk7XG59XG5cbmNsYXNzIFNldE9ic2VydmVyIHtcbiAgICBjb25zdHJ1Y3Rvcih0KSB7XG4gICAgICAgIHRoaXMudHlwZSA9IDM0O1xuICAgICAgICBpZiAoIXp0KSB7XG4gICAgICAgICAgICB6dCA9IHRydWU7XG4gICAgICAgICAgICBXdCgpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuY29sbGVjdGlvbiA9IHQ7XG4gICAgICAgIHRoaXMuaW5kZXhNYXAgPSB0dCh0LnNpemUpO1xuICAgICAgICB0aGlzLmxlbk9icyA9IHZvaWQgMDtcbiAgICAgICAgRHQuc2V0KHQsIHRoaXMpO1xuICAgIH1cbiAgICBub3RpZnkoKSB7XG4gICAgICAgIGNvbnN0IHQgPSB0aGlzLmluZGV4TWFwO1xuICAgICAgICBjb25zdCBlID0gdGhpcy5jb2xsZWN0aW9uLnNpemU7XG4gICAgICAgIHRoaXMuaW5kZXhNYXAgPSB0dChlKTtcbiAgICAgICAgdGhpcy5zdWJzLm5vdGlmeUNvbGxlY3Rpb24odCwgMCk7XG4gICAgfVxuICAgIGdldExlbmd0aE9ic2VydmVyKCkge1xuICAgICAgICB2YXIgdDtcbiAgICAgICAgcmV0dXJuIG51bGwgIT09ICh0ID0gdGhpcy5sZW5PYnMpICYmIHZvaWQgMCAhPT0gdCA/IHQgOiB0aGlzLmxlbk9icyA9IG5ldyBDb2xsZWN0aW9uU2l6ZU9ic2VydmVyKHRoaXMpO1xuICAgIH1cbn1cblxucnQoU2V0T2JzZXJ2ZXIpO1xuXG5mdW5jdGlvbiBadCh0KSB7XG4gICAgbGV0IGUgPSBEdC5nZXQodCk7XG4gICAgaWYgKHZvaWQgMCA9PT0gZSkgZSA9IG5ldyBTZXRPYnNlcnZlcih0KTtcbiAgICByZXR1cm4gZTtcbn1cblxuY29uc3QgSnQgPSBuZXcgV2Vha01hcDtcblxuY29uc3QgWHQgPSBNYXAucHJvdG90eXBlO1xuXG5jb25zdCBZdCA9IFh0LnNldDtcblxuY29uc3QgdGUgPSBYdC5jbGVhcjtcblxuY29uc3QgZWUgPSBYdC5kZWxldGU7XG5cbmNvbnN0IHNlID0ge1xuICAgIHNldDogWXQsXG4gICAgY2xlYXI6IHRlLFxuICAgIGRlbGV0ZTogZWVcbn07XG5cbmNvbnN0IHJlID0gWyBcInNldFwiLCBcImNsZWFyXCIsIFwiZGVsZXRlXCIgXTtcblxuY29uc3QgaWUgPSB7XG4gICAgc2V0OiBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgIGNvbnN0IHMgPSBKdC5nZXQodGhpcyk7XG4gICAgICAgIGlmICh2b2lkIDAgPT09IHMpIHtcbiAgICAgICAgICAgIFl0LmNhbGwodGhpcywgdCwgZSk7XG4gICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgfVxuICAgICAgICBjb25zdCByID0gdGhpcy5nZXQodCk7XG4gICAgICAgIGNvbnN0IGkgPSB0aGlzLnNpemU7XG4gICAgICAgIFl0LmNhbGwodGhpcywgdCwgZSk7XG4gICAgICAgIGNvbnN0IG4gPSB0aGlzLnNpemU7XG4gICAgICAgIGlmIChuID09PSBpKSB7XG4gICAgICAgICAgICBsZXQgZSA9IDA7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IGkgb2YgdGhpcy5lbnRyaWVzKCkpIHtcbiAgICAgICAgICAgICAgICBpZiAoaVswXSA9PT0gdCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoaVsxXSAhPT0gcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgcy5pbmRleE1hcC5kZWxldGVkSXRlbXMucHVzaChzLmluZGV4TWFwW2VdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHMuaW5kZXhNYXBbZV0gPSAtMjtcbiAgICAgICAgICAgICAgICAgICAgICAgIHMubm90aWZ5KCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGUrKztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICB9XG4gICAgICAgIHMuaW5kZXhNYXBbaV0gPSAtMjtcbiAgICAgICAgcy5ub3RpZnkoKTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfSxcbiAgICBjbGVhcjogZnVuY3Rpb24oKSB7XG4gICAgICAgIGNvbnN0IHQgPSBKdC5nZXQodGhpcyk7XG4gICAgICAgIGlmICh2b2lkIDAgPT09IHQpIHJldHVybiB0ZS5jYWxsKHRoaXMpO1xuICAgICAgICBjb25zdCBlID0gdGhpcy5zaXplO1xuICAgICAgICBpZiAoZSA+IDApIHtcbiAgICAgICAgICAgIGNvbnN0IGUgPSB0LmluZGV4TWFwO1xuICAgICAgICAgICAgbGV0IHMgPSAwO1xuICAgICAgICAgICAgZm9yIChjb25zdCB0IG9mIHRoaXMua2V5cygpKSB7XG4gICAgICAgICAgICAgICAgaWYgKGVbc10gPiAtMSkgZS5kZWxldGVkSXRlbXMucHVzaChlW3NdKTtcbiAgICAgICAgICAgICAgICBzKys7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0ZS5jYWxsKHRoaXMpO1xuICAgICAgICAgICAgZS5sZW5ndGggPSAwO1xuICAgICAgICAgICAgdC5ub3RpZnkoKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm47XG4gICAgfSxcbiAgICBkZWxldGU6IGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IEp0LmdldCh0aGlzKTtcbiAgICAgICAgaWYgKHZvaWQgMCA9PT0gZSkgcmV0dXJuIGVlLmNhbGwodGhpcywgdCk7XG4gICAgICAgIGNvbnN0IHMgPSB0aGlzLnNpemU7XG4gICAgICAgIGlmICgwID09PSBzKSByZXR1cm4gZmFsc2U7XG4gICAgICAgIGxldCByID0gMDtcbiAgICAgICAgY29uc3QgaSA9IGUuaW5kZXhNYXA7XG4gICAgICAgIGZvciAoY29uc3QgcyBvZiB0aGlzLmtleXMoKSkge1xuICAgICAgICAgICAgaWYgKHMgPT09IHQpIHtcbiAgICAgICAgICAgICAgICBpZiAoaVtyXSA+IC0xKSBpLmRlbGV0ZWRJdGVtcy5wdXNoKGlbcl0pO1xuICAgICAgICAgICAgICAgIGkuc3BsaWNlKHIsIDEpO1xuICAgICAgICAgICAgICAgIGNvbnN0IHMgPSBlZS5jYWxsKHRoaXMsIHQpO1xuICAgICAgICAgICAgICAgIGlmICh0cnVlID09PSBzKSBlLm5vdGlmeSgpO1xuICAgICAgICAgICAgICAgIHJldHVybiBzO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgKytyO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG59O1xuXG5jb25zdCBuZSA9IHtcbiAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICBjb25maWd1cmFibGU6IHRydWVcbn07XG5cbmZvciAoY29uc3QgdCBvZiByZSkgdihpZVt0XSwgXCJvYnNlcnZpbmdcIiwge1xuICAgIHZhbHVlOiB0cnVlLFxuICAgIHdyaXRhYmxlOiBmYWxzZSxcbiAgICBjb25maWd1cmFibGU6IGZhbHNlLFxuICAgIGVudW1lcmFibGU6IGZhbHNlXG59KTtcblxubGV0IG9lID0gZmFsc2U7XG5cbmZ1bmN0aW9uIGhlKCkge1xuICAgIGZvciAoY29uc3QgdCBvZiByZSkgaWYgKHRydWUgIT09IFh0W3RdLm9ic2VydmluZykgdihYdCwgdCwge1xuICAgICAgICAuLi5uZSxcbiAgICAgICAgdmFsdWU6IGllW3RdXG4gICAgfSk7XG59XG5cbmZ1bmN0aW9uIGNlKCkge1xuICAgIGZvciAoY29uc3QgdCBvZiByZSkgaWYgKHRydWUgPT09IFh0W3RdLm9ic2VydmluZykgdihYdCwgdCwge1xuICAgICAgICAuLi5uZSxcbiAgICAgICAgdmFsdWU6IHNlW3RdXG4gICAgfSk7XG59XG5cbmNsYXNzIE1hcE9ic2VydmVyIHtcbiAgICBjb25zdHJ1Y3Rvcih0KSB7XG4gICAgICAgIHRoaXMudHlwZSA9IDY2O1xuICAgICAgICBpZiAoIW9lKSB7XG4gICAgICAgICAgICBvZSA9IHRydWU7XG4gICAgICAgICAgICBoZSgpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuY29sbGVjdGlvbiA9IHQ7XG4gICAgICAgIHRoaXMuaW5kZXhNYXAgPSB0dCh0LnNpemUpO1xuICAgICAgICB0aGlzLmxlbk9icyA9IHZvaWQgMDtcbiAgICAgICAgSnQuc2V0KHQsIHRoaXMpO1xuICAgIH1cbiAgICBub3RpZnkoKSB7XG4gICAgICAgIGNvbnN0IHQgPSB0aGlzLmluZGV4TWFwO1xuICAgICAgICBjb25zdCBlID0gdGhpcy5jb2xsZWN0aW9uLnNpemU7XG4gICAgICAgIHRoaXMuaW5kZXhNYXAgPSB0dChlKTtcbiAgICAgICAgdGhpcy5zdWJzLm5vdGlmeUNvbGxlY3Rpb24odCwgMCk7XG4gICAgfVxuICAgIGdldExlbmd0aE9ic2VydmVyKCkge1xuICAgICAgICB2YXIgdDtcbiAgICAgICAgcmV0dXJuIG51bGwgIT09ICh0ID0gdGhpcy5sZW5PYnMpICYmIHZvaWQgMCAhPT0gdCA/IHQgOiB0aGlzLmxlbk9icyA9IG5ldyBDb2xsZWN0aW9uU2l6ZU9ic2VydmVyKHRoaXMpO1xuICAgIH1cbn1cblxucnQoTWFwT2JzZXJ2ZXIpO1xuXG5mdW5jdGlvbiB1ZSh0KSB7XG4gICAgbGV0IGUgPSBKdC5nZXQodCk7XG4gICAgaWYgKHZvaWQgMCA9PT0gZSkgZSA9IG5ldyBNYXBPYnNlcnZlcih0KTtcbiAgICByZXR1cm4gZTtcbn1cblxuZnVuY3Rpb24gYWUodCwgZSkge1xuICAgIGNvbnN0IHMgPSB0aGlzLm9MLmdldE9ic2VydmVyKHQsIGUpO1xuICAgIHRoaXMub2JzLmFkZChzKTtcbn1cblxuZnVuY3Rpb24gbGUoKSB7XG4gICAgcmV0dXJuIHcodGhpcywgXCJvYnNcIiwgbmV3IEJpbmRpbmdPYnNlcnZlclJlY29yZCh0aGlzKSk7XG59XG5cbmZ1bmN0aW9uIGZlKHQpIHtcbiAgICBsZXQgZTtcbiAgICBpZiAodCBpbnN0YW5jZW9mIEFycmF5KSBlID0ganQodCk7IGVsc2UgaWYgKHQgaW5zdGFuY2VvZiBTZXQpIGUgPSBadCh0KTsgZWxzZSBpZiAodCBpbnN0YW5jZW9mIE1hcCkgZSA9IHVlKHQpOyBlbHNlIHRocm93IG5ldyBFcnJvcihcIkFVUjAyMTBcIik7XG4gICAgdGhpcy5vYnMuYWRkKGUpO1xufVxuXG5mdW5jdGlvbiBkZSh0KSB7XG4gICAgdGhpcy5vYnMuYWRkKHQpO1xufVxuXG5mdW5jdGlvbiB2ZSgpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoYEFVUjIwMTE6aGFuZGxlQ2hhbmdlYCk7XG59XG5cbmZ1bmN0aW9uIHBlKCkge1xuICAgIHRocm93IG5ldyBFcnJvcihcIkFVUjIwMTI6aGFuZGxlQ29sbGVjdGlvbkNoYW5nZVwiKTtcbn1cblxuY2xhc3MgQmluZGluZ09ic2VydmVyUmVjb3JkIHtcbiAgICBjb25zdHJ1Y3Rvcih0KSB7XG4gICAgICAgIHRoaXMudmVyc2lvbiA9IDA7XG4gICAgICAgIHRoaXMuY291bnQgPSAwO1xuICAgICAgICB0aGlzLm8gPSBuZXcgTWFwO1xuICAgICAgICB0aGlzLmIgPSB0O1xuICAgIH1cbiAgICBoYW5kbGVDaGFuZ2UodCwgZSwgcykge1xuICAgICAgICByZXR1cm4gdGhpcy5iLmludGVyY2VwdG9yLmhhbmRsZUNoYW5nZSh0LCBlLCBzKTtcbiAgICB9XG4gICAgaGFuZGxlQ29sbGVjdGlvbkNoYW5nZSh0LCBlKSB7XG4gICAgICAgIHRoaXMuYi5pbnRlcmNlcHRvci5oYW5kbGVDb2xsZWN0aW9uQ2hhbmdlKHQsIGUpO1xuICAgIH1cbiAgICBhZGQodCkge1xuICAgICAgICBpZiAoIXRoaXMuby5oYXModCkpIHtcbiAgICAgICAgICAgIHQuc3Vic2NyaWJlKHRoaXMpO1xuICAgICAgICAgICAgKyt0aGlzLmNvdW50O1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuby5zZXQodCwgdGhpcy52ZXJzaW9uKTtcbiAgICB9XG4gICAgY2xlYXIoKSB7XG4gICAgICAgIHRoaXMuby5mb3JFYWNoKHdlLCB0aGlzKTtcbiAgICAgICAgdGhpcy5jb3VudCA9IHRoaXMuby5zaXplO1xuICAgIH1cbiAgICBjbGVhckFsbCgpIHtcbiAgICAgICAgdGhpcy5vLmZvckVhY2goZ2UsIHRoaXMpO1xuICAgICAgICB0aGlzLm8uY2xlYXIoKTtcbiAgICAgICAgdGhpcy5jb3VudCA9IDA7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBnZSh0LCBlKSB7XG4gICAgZS51bnN1YnNjcmliZSh0aGlzKTtcbn1cblxuZnVuY3Rpb24gd2UodCwgZSkge1xuICAgIGlmICh0aGlzLnZlcnNpb24gIT09IHQpIHtcbiAgICAgICAgZS51bnN1YnNjcmliZSh0aGlzKTtcbiAgICAgICAgdGhpcy5vLmRlbGV0ZShlKTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIGJlKHQpIHtcbiAgICBjb25zdCBlID0gdC5wcm90b3R5cGU7XG4gICAgYihlLCBcIm9ic2VydmVcIiwgYWUsIHRydWUpO1xuICAgIGIoZSwgXCJvYnNlcnZlQ29sbGVjdGlvblwiLCBmZSwgdHJ1ZSk7XG4gICAgYihlLCBcInN1YnNjcmliZVRvXCIsIGRlLCB0cnVlKTtcbiAgICB2KGUsIFwib2JzXCIsIHtcbiAgICAgICAgZ2V0OiBsZVxuICAgIH0pO1xuICAgIGIoZSwgXCJoYW5kbGVDaGFuZ2VcIiwgdmUpO1xuICAgIGIoZSwgXCJoYW5kbGVDb2xsZWN0aW9uQ2hhbmdlXCIsIHBlKTtcbiAgICByZXR1cm4gdDtcbn1cblxuZnVuY3Rpb24gRWUodCkge1xuICAgIHJldHVybiBudWxsID09IHQgPyBiZSA6IGJlKHQpO1xufVxuXG5jbGFzcyBCaW5kaW5nTWVkaWF0b3Ige1xuICAgIGNvbnN0cnVjdG9yKHQsIGUsIHMsIHIpIHtcbiAgICAgICAgdGhpcy5rZXkgPSB0O1xuICAgICAgICB0aGlzLmJpbmRpbmcgPSBlO1xuICAgICAgICB0aGlzLm9MID0gcztcbiAgICAgICAgdGhpcy5sb2NhdG9yID0gcjtcbiAgICAgICAgdGhpcy5pbnRlcmNlcHRvciA9IHRoaXM7XG4gICAgfVxuICAgICRiaW5kKCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJBVVIwMjEzOiRiaW5kXCIpO1xuICAgIH1cbiAgICAkdW5iaW5kKCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJBVVIwMjE0OiR1bmJpbmRcIik7XG4gICAgfVxuICAgIGhhbmRsZUNoYW5nZSh0LCBlLCBzKSB7XG4gICAgICAgIHRoaXMuYmluZGluZ1t0aGlzLmtleV0odCwgZSwgcyk7XG4gICAgfVxufVxuXG5iZShCaW5kaW5nTWVkaWF0b3IpO1xuXG5jb25zdCBBZSA9IHIuY3JlYXRlSW50ZXJmYWNlKFwiSUV4cHJlc3Npb25QYXJzZXJcIiwgKHQgPT4gdC5zaW5nbGV0b24oRXhwcmVzc2lvblBhcnNlcikpKTtcblxuY2xhc3MgRXhwcmVzc2lvblBhcnNlciB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMudSA9IEUoKTtcbiAgICAgICAgdGhpcy5BID0gRSgpO1xuICAgICAgICB0aGlzLlUgPSBFKCk7XG4gICAgfVxuICAgIHBhcnNlKHQsIGUpIHtcbiAgICAgICAgbGV0IHM7XG4gICAgICAgIHN3aXRjaCAoZSkge1xuICAgICAgICAgIGNhc2UgMTY6XG4gICAgICAgICAgICByZXR1cm4gbmV3IEN1c3RvbUV4cHJlc3Npb24odCk7XG5cbiAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICBzID0gdGhpcy5VW3RdO1xuICAgICAgICAgICAgaWYgKHZvaWQgMCA9PT0gcykgcyA9IHRoaXMuVVt0XSA9IHRoaXMuJHBhcnNlKHQsIGUpO1xuICAgICAgICAgICAgcmV0dXJuIHM7XG5cbiAgICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgICBzID0gdGhpcy5BW3RdO1xuICAgICAgICAgICAgaWYgKHZvaWQgMCA9PT0gcykgcyA9IHRoaXMuQVt0XSA9IHRoaXMuJHBhcnNlKHQsIGUpO1xuICAgICAgICAgICAgcmV0dXJuIHM7XG5cbiAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgaWYgKDAgPT09IHQubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgaWYgKChlICYgKDQgfCA4KSkgPiAwKSByZXR1cm4gUHJpbWl0aXZlTGl0ZXJhbEV4cHJlc3Npb24uJGVtcHR5O1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkFVUjAxNjlcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBzID0gdGhpcy51W3RdO1xuICAgICAgICAgICAgaWYgKHZvaWQgMCA9PT0gcykgcyA9IHRoaXMudVt0XSA9IHRoaXMuJHBhcnNlKHQsIGUpO1xuICAgICAgICAgICAgcmV0dXJuIHM7XG4gICAgICAgIH1cbiAgICB9XG4gICAgJHBhcnNlKHQsIGUpIHtcbiAgICAgICAgUGUuaXAgPSB0O1xuICAgICAgICBQZS5sZW5ndGggPSB0Lmxlbmd0aDtcbiAgICAgICAgUGUuaW5kZXggPSAwO1xuICAgICAgICBQZS5PID0gdC5jaGFyQ29kZUF0KDApO1xuICAgICAgICByZXR1cm4gamUoUGUsIDAsIDYxLCB2b2lkIDAgPT09IGUgPyA4IDogZSk7XG4gICAgfVxufVxuXG52YXIgeWU7XG5cbihmdW5jdGlvbih0KSB7XG4gICAgdFt0W1wiTnVsbFwiXSA9IDBdID0gXCJOdWxsXCI7XG4gICAgdFt0W1wiQmFja3NwYWNlXCJdID0gOF0gPSBcIkJhY2tzcGFjZVwiO1xuICAgIHRbdFtcIlRhYlwiXSA9IDldID0gXCJUYWJcIjtcbiAgICB0W3RbXCJMaW5lRmVlZFwiXSA9IDEwXSA9IFwiTGluZUZlZWRcIjtcbiAgICB0W3RbXCJWZXJ0aWNhbFRhYlwiXSA9IDExXSA9IFwiVmVydGljYWxUYWJcIjtcbiAgICB0W3RbXCJGb3JtRmVlZFwiXSA9IDEyXSA9IFwiRm9ybUZlZWRcIjtcbiAgICB0W3RbXCJDYXJyaWFnZVJldHVyblwiXSA9IDEzXSA9IFwiQ2FycmlhZ2VSZXR1cm5cIjtcbiAgICB0W3RbXCJTcGFjZVwiXSA9IDMyXSA9IFwiU3BhY2VcIjtcbiAgICB0W3RbXCJFeGNsYW1hdGlvblwiXSA9IDMzXSA9IFwiRXhjbGFtYXRpb25cIjtcbiAgICB0W3RbXCJEb3VibGVRdW90ZVwiXSA9IDM0XSA9IFwiRG91YmxlUXVvdGVcIjtcbiAgICB0W3RbXCJEb2xsYXJcIl0gPSAzNl0gPSBcIkRvbGxhclwiO1xuICAgIHRbdFtcIlBlcmNlbnRcIl0gPSAzN10gPSBcIlBlcmNlbnRcIjtcbiAgICB0W3RbXCJBbXBlcnNhbmRcIl0gPSAzOF0gPSBcIkFtcGVyc2FuZFwiO1xuICAgIHRbdFtcIlNpbmdsZVF1b3RlXCJdID0gMzldID0gXCJTaW5nbGVRdW90ZVwiO1xuICAgIHRbdFtcIk9wZW5QYXJlblwiXSA9IDQwXSA9IFwiT3BlblBhcmVuXCI7XG4gICAgdFt0W1wiQ2xvc2VQYXJlblwiXSA9IDQxXSA9IFwiQ2xvc2VQYXJlblwiO1xuICAgIHRbdFtcIkFzdGVyaXNrXCJdID0gNDJdID0gXCJBc3Rlcmlza1wiO1xuICAgIHRbdFtcIlBsdXNcIl0gPSA0M10gPSBcIlBsdXNcIjtcbiAgICB0W3RbXCJDb21tYVwiXSA9IDQ0XSA9IFwiQ29tbWFcIjtcbiAgICB0W3RbXCJNaW51c1wiXSA9IDQ1XSA9IFwiTWludXNcIjtcbiAgICB0W3RbXCJEb3RcIl0gPSA0Nl0gPSBcIkRvdFwiO1xuICAgIHRbdFtcIlNsYXNoXCJdID0gNDddID0gXCJTbGFzaFwiO1xuICAgIHRbdFtcIlNlbWljb2xvblwiXSA9IDU5XSA9IFwiU2VtaWNvbG9uXCI7XG4gICAgdFt0W1wiQmFja3RpY2tcIl0gPSA5Nl0gPSBcIkJhY2t0aWNrXCI7XG4gICAgdFt0W1wiT3BlbkJyYWNrZXRcIl0gPSA5MV0gPSBcIk9wZW5CcmFja2V0XCI7XG4gICAgdFt0W1wiQmFja3NsYXNoXCJdID0gOTJdID0gXCJCYWNrc2xhc2hcIjtcbiAgICB0W3RbXCJDbG9zZUJyYWNrZXRcIl0gPSA5M10gPSBcIkNsb3NlQnJhY2tldFwiO1xuICAgIHRbdFtcIkNhcmV0XCJdID0gOTRdID0gXCJDYXJldFwiO1xuICAgIHRbdFtcIlVuZGVyc2NvcmVcIl0gPSA5NV0gPSBcIlVuZGVyc2NvcmVcIjtcbiAgICB0W3RbXCJPcGVuQnJhY2VcIl0gPSAxMjNdID0gXCJPcGVuQnJhY2VcIjtcbiAgICB0W3RbXCJCYXJcIl0gPSAxMjRdID0gXCJCYXJcIjtcbiAgICB0W3RbXCJDbG9zZUJyYWNlXCJdID0gMTI1XSA9IFwiQ2xvc2VCcmFjZVwiO1xuICAgIHRbdFtcIkNvbG9uXCJdID0gNThdID0gXCJDb2xvblwiO1xuICAgIHRbdFtcIkxlc3NUaGFuXCJdID0gNjBdID0gXCJMZXNzVGhhblwiO1xuICAgIHRbdFtcIkVxdWFsc1wiXSA9IDYxXSA9IFwiRXF1YWxzXCI7XG4gICAgdFt0W1wiR3JlYXRlclRoYW5cIl0gPSA2Ml0gPSBcIkdyZWF0ZXJUaGFuXCI7XG4gICAgdFt0W1wiUXVlc3Rpb25cIl0gPSA2M10gPSBcIlF1ZXN0aW9uXCI7XG4gICAgdFt0W1wiWmVyb1wiXSA9IDQ4XSA9IFwiWmVyb1wiO1xuICAgIHRbdFtcIk9uZVwiXSA9IDQ5XSA9IFwiT25lXCI7XG4gICAgdFt0W1wiVHdvXCJdID0gNTBdID0gXCJUd29cIjtcbiAgICB0W3RbXCJUaHJlZVwiXSA9IDUxXSA9IFwiVGhyZWVcIjtcbiAgICB0W3RbXCJGb3VyXCJdID0gNTJdID0gXCJGb3VyXCI7XG4gICAgdFt0W1wiRml2ZVwiXSA9IDUzXSA9IFwiRml2ZVwiO1xuICAgIHRbdFtcIlNpeFwiXSA9IDU0XSA9IFwiU2l4XCI7XG4gICAgdFt0W1wiU2V2ZW5cIl0gPSA1NV0gPSBcIlNldmVuXCI7XG4gICAgdFt0W1wiRWlnaHRcIl0gPSA1Nl0gPSBcIkVpZ2h0XCI7XG4gICAgdFt0W1wiTmluZVwiXSA9IDU3XSA9IFwiTmluZVwiO1xuICAgIHRbdFtcIlVwcGVyQVwiXSA9IDY1XSA9IFwiVXBwZXJBXCI7XG4gICAgdFt0W1wiVXBwZXJCXCJdID0gNjZdID0gXCJVcHBlckJcIjtcbiAgICB0W3RbXCJVcHBlckNcIl0gPSA2N10gPSBcIlVwcGVyQ1wiO1xuICAgIHRbdFtcIlVwcGVyRFwiXSA9IDY4XSA9IFwiVXBwZXJEXCI7XG4gICAgdFt0W1wiVXBwZXJFXCJdID0gNjldID0gXCJVcHBlckVcIjtcbiAgICB0W3RbXCJVcHBlckZcIl0gPSA3MF0gPSBcIlVwcGVyRlwiO1xuICAgIHRbdFtcIlVwcGVyR1wiXSA9IDcxXSA9IFwiVXBwZXJHXCI7XG4gICAgdFt0W1wiVXBwZXJIXCJdID0gNzJdID0gXCJVcHBlckhcIjtcbiAgICB0W3RbXCJVcHBlcklcIl0gPSA3M10gPSBcIlVwcGVySVwiO1xuICAgIHRbdFtcIlVwcGVySlwiXSA9IDc0XSA9IFwiVXBwZXJKXCI7XG4gICAgdFt0W1wiVXBwZXJLXCJdID0gNzVdID0gXCJVcHBlcktcIjtcbiAgICB0W3RbXCJVcHBlckxcIl0gPSA3Nl0gPSBcIlVwcGVyTFwiO1xuICAgIHRbdFtcIlVwcGVyTVwiXSA9IDc3XSA9IFwiVXBwZXJNXCI7XG4gICAgdFt0W1wiVXBwZXJOXCJdID0gNzhdID0gXCJVcHBlck5cIjtcbiAgICB0W3RbXCJVcHBlck9cIl0gPSA3OV0gPSBcIlVwcGVyT1wiO1xuICAgIHRbdFtcIlVwcGVyUFwiXSA9IDgwXSA9IFwiVXBwZXJQXCI7XG4gICAgdFt0W1wiVXBwZXJRXCJdID0gODFdID0gXCJVcHBlclFcIjtcbiAgICB0W3RbXCJVcHBlclJcIl0gPSA4Ml0gPSBcIlVwcGVyUlwiO1xuICAgIHRbdFtcIlVwcGVyU1wiXSA9IDgzXSA9IFwiVXBwZXJTXCI7XG4gICAgdFt0W1wiVXBwZXJUXCJdID0gODRdID0gXCJVcHBlclRcIjtcbiAgICB0W3RbXCJVcHBlclVcIl0gPSA4NV0gPSBcIlVwcGVyVVwiO1xuICAgIHRbdFtcIlVwcGVyVlwiXSA9IDg2XSA9IFwiVXBwZXJWXCI7XG4gICAgdFt0W1wiVXBwZXJXXCJdID0gODddID0gXCJVcHBlcldcIjtcbiAgICB0W3RbXCJVcHBlclhcIl0gPSA4OF0gPSBcIlVwcGVyWFwiO1xuICAgIHRbdFtcIlVwcGVyWVwiXSA9IDg5XSA9IFwiVXBwZXJZXCI7XG4gICAgdFt0W1wiVXBwZXJaXCJdID0gOTBdID0gXCJVcHBlclpcIjtcbiAgICB0W3RbXCJMb3dlckFcIl0gPSA5N10gPSBcIkxvd2VyQVwiO1xuICAgIHRbdFtcIkxvd2VyQlwiXSA9IDk4XSA9IFwiTG93ZXJCXCI7XG4gICAgdFt0W1wiTG93ZXJDXCJdID0gOTldID0gXCJMb3dlckNcIjtcbiAgICB0W3RbXCJMb3dlckRcIl0gPSAxMDBdID0gXCJMb3dlckRcIjtcbiAgICB0W3RbXCJMb3dlckVcIl0gPSAxMDFdID0gXCJMb3dlckVcIjtcbiAgICB0W3RbXCJMb3dlckZcIl0gPSAxMDJdID0gXCJMb3dlckZcIjtcbiAgICB0W3RbXCJMb3dlckdcIl0gPSAxMDNdID0gXCJMb3dlckdcIjtcbiAgICB0W3RbXCJMb3dlckhcIl0gPSAxMDRdID0gXCJMb3dlckhcIjtcbiAgICB0W3RbXCJMb3dlcklcIl0gPSAxMDVdID0gXCJMb3dlcklcIjtcbiAgICB0W3RbXCJMb3dlckpcIl0gPSAxMDZdID0gXCJMb3dlckpcIjtcbiAgICB0W3RbXCJMb3dlcktcIl0gPSAxMDddID0gXCJMb3dlcktcIjtcbiAgICB0W3RbXCJMb3dlckxcIl0gPSAxMDhdID0gXCJMb3dlckxcIjtcbiAgICB0W3RbXCJMb3dlck1cIl0gPSAxMDldID0gXCJMb3dlck1cIjtcbiAgICB0W3RbXCJMb3dlck5cIl0gPSAxMTBdID0gXCJMb3dlck5cIjtcbiAgICB0W3RbXCJMb3dlck9cIl0gPSAxMTFdID0gXCJMb3dlck9cIjtcbiAgICB0W3RbXCJMb3dlclBcIl0gPSAxMTJdID0gXCJMb3dlclBcIjtcbiAgICB0W3RbXCJMb3dlclFcIl0gPSAxMTNdID0gXCJMb3dlclFcIjtcbiAgICB0W3RbXCJMb3dlclJcIl0gPSAxMTRdID0gXCJMb3dlclJcIjtcbiAgICB0W3RbXCJMb3dlclNcIl0gPSAxMTVdID0gXCJMb3dlclNcIjtcbiAgICB0W3RbXCJMb3dlclRcIl0gPSAxMTZdID0gXCJMb3dlclRcIjtcbiAgICB0W3RbXCJMb3dlclVcIl0gPSAxMTddID0gXCJMb3dlclVcIjtcbiAgICB0W3RbXCJMb3dlclZcIl0gPSAxMThdID0gXCJMb3dlclZcIjtcbiAgICB0W3RbXCJMb3dlcldcIl0gPSAxMTldID0gXCJMb3dlcldcIjtcbiAgICB0W3RbXCJMb3dlclhcIl0gPSAxMjBdID0gXCJMb3dlclhcIjtcbiAgICB0W3RbXCJMb3dlcllcIl0gPSAxMjFdID0gXCJMb3dlcllcIjtcbiAgICB0W3RbXCJMb3dlclpcIl0gPSAxMjJdID0gXCJMb3dlclpcIjtcbn0pKHllIHx8ICh5ZSA9IHt9KSk7XG5cbmZ1bmN0aW9uIG1lKHQpIHtcbiAgICBzd2l0Y2ggKHQpIHtcbiAgICAgIGNhc2UgOTg6XG4gICAgICAgIHJldHVybiA4O1xuXG4gICAgICBjYXNlIDExNjpcbiAgICAgICAgcmV0dXJuIDk7XG5cbiAgICAgIGNhc2UgMTEwOlxuICAgICAgICByZXR1cm4gMTA7XG5cbiAgICAgIGNhc2UgMTE4OlxuICAgICAgICByZXR1cm4gMTE7XG5cbiAgICAgIGNhc2UgMTAyOlxuICAgICAgICByZXR1cm4gMTI7XG5cbiAgICAgIGNhc2UgMTE0OlxuICAgICAgICByZXR1cm4gMTM7XG5cbiAgICAgIGNhc2UgMzQ6XG4gICAgICAgIHJldHVybiAzNDtcblxuICAgICAgY2FzZSAzOTpcbiAgICAgICAgcmV0dXJuIDM5O1xuXG4gICAgICBjYXNlIDkyOlxuICAgICAgICByZXR1cm4gOTI7XG5cbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHJldHVybiB0O1xuICAgIH1cbn1cblxudmFyIFVlO1xuXG4oZnVuY3Rpb24odCkge1xuICAgIHRbdFtcIlJlc2V0XCJdID0gMF0gPSBcIlJlc2V0XCI7XG4gICAgdFt0W1wiQW5jZXN0b3JcIl0gPSA1MTFdID0gXCJBbmNlc3RvclwiO1xuICAgIHRbdFtcIlRoaXNcIl0gPSA1MTJdID0gXCJUaGlzXCI7XG4gICAgdFt0W1wiU2NvcGVcIl0gPSAxMDI0XSA9IFwiU2NvcGVcIjtcbiAgICB0W3RbXCJNZW1iZXJcIl0gPSAyMDQ4XSA9IFwiTWVtYmVyXCI7XG4gICAgdFt0W1wiS2V5ZWRcIl0gPSA0MDk2XSA9IFwiS2V5ZWRcIjtcbn0pKFVlIHx8IChVZSA9IHt9KSk7XG5cbnZhciB4ZTtcblxuKGZ1bmN0aW9uKHQpIHtcbiAgICB0W3RbXCJWYXJpYWRpY1wiXSA9IDYxXSA9IFwiVmFyaWFkaWNcIjtcbiAgICB0W3RbXCJBc3NpZ25cIl0gPSA2Ml0gPSBcIkFzc2lnblwiO1xuICAgIHRbdFtcIkNvbmRpdGlvbmFsXCJdID0gNjNdID0gXCJDb25kaXRpb25hbFwiO1xuICAgIHRbdFtcIkxvZ2ljYWxPUlwiXSA9IDY0XSA9IFwiTG9naWNhbE9SXCI7XG4gICAgdFt0W1wiTG9naWNhbEFORFwiXSA9IDEyOF0gPSBcIkxvZ2ljYWxBTkRcIjtcbiAgICB0W3RbXCJFcXVhbGl0eVwiXSA9IDE5Ml0gPSBcIkVxdWFsaXR5XCI7XG4gICAgdFt0W1wiUmVsYXRpb25hbFwiXSA9IDI1Nl0gPSBcIlJlbGF0aW9uYWxcIjtcbiAgICB0W3RbXCJBZGRpdGl2ZVwiXSA9IDMyMF0gPSBcIkFkZGl0aXZlXCI7XG4gICAgdFt0W1wiTXVsdGlwbGljYXRpdmVcIl0gPSAzODRdID0gXCJNdWx0aXBsaWNhdGl2ZVwiO1xuICAgIHRbdFtcIkJpbmFyeVwiXSA9IDQ0OF0gPSBcIkJpbmFyeVwiO1xuICAgIHRbdFtcIkxlZnRIYW5kU2lkZVwiXSA9IDQ0OV0gPSBcIkxlZnRIYW5kU2lkZVwiO1xuICAgIHRbdFtcIlByaW1hcnlcIl0gPSA0NTBdID0gXCJQcmltYXJ5XCI7XG4gICAgdFt0W1wiVW5hcnlcIl0gPSA0NTFdID0gXCJVbmFyeVwiO1xufSkoeGUgfHwgKHhlID0ge30pKTtcblxudmFyIFNlO1xuXG4oZnVuY3Rpb24odCkge1xuICAgIHRbdFtcIkVPRlwiXSA9IDE1NzI4NjRdID0gXCJFT0ZcIjtcbiAgICB0W3RbXCJFeHByZXNzaW9uVGVybWluYWxcIl0gPSAxMDQ4NTc2XSA9IFwiRXhwcmVzc2lvblRlcm1pbmFsXCI7XG4gICAgdFt0W1wiQWNjZXNzU2NvcGVUZXJtaW5hbFwiXSA9IDUyNDI4OF0gPSBcIkFjY2Vzc1Njb3BlVGVybWluYWxcIjtcbiAgICB0W3RbXCJDbG9zaW5nVG9rZW5cIl0gPSAyNjIxNDRdID0gXCJDbG9zaW5nVG9rZW5cIjtcbiAgICB0W3RbXCJPcGVuaW5nVG9rZW5cIl0gPSAxMzEwNzJdID0gXCJPcGVuaW5nVG9rZW5cIjtcbiAgICB0W3RbXCJCaW5hcnlPcFwiXSA9IDY1NTM2XSA9IFwiQmluYXJ5T3BcIjtcbiAgICB0W3RbXCJVbmFyeU9wXCJdID0gMzI3NjhdID0gXCJVbmFyeU9wXCI7XG4gICAgdFt0W1wiTGVmdEhhbmRTaWRlXCJdID0gMTYzODRdID0gXCJMZWZ0SGFuZFNpZGVcIjtcbiAgICB0W3RbXCJTdHJpbmdPck51bWVyaWNMaXRlcmFsXCJdID0gMTIyODhdID0gXCJTdHJpbmdPck51bWVyaWNMaXRlcmFsXCI7XG4gICAgdFt0W1wiTnVtZXJpY0xpdGVyYWxcIl0gPSA4MTkyXSA9IFwiTnVtZXJpY0xpdGVyYWxcIjtcbiAgICB0W3RbXCJTdHJpbmdMaXRlcmFsXCJdID0gNDA5Nl0gPSBcIlN0cmluZ0xpdGVyYWxcIjtcbiAgICB0W3RbXCJJZGVudGlmaWVyTmFtZVwiXSA9IDMwNzJdID0gXCJJZGVudGlmaWVyTmFtZVwiO1xuICAgIHRbdFtcIktleXdvcmRcIl0gPSAyMDQ4XSA9IFwiS2V5d29yZFwiO1xuICAgIHRbdFtcIklkZW50aWZpZXJcIl0gPSAxMDI0XSA9IFwiSWRlbnRpZmllclwiO1xuICAgIHRbdFtcIkNvbnRleHR1YWxcIl0gPSA1MTJdID0gXCJDb250ZXh0dWFsXCI7XG4gICAgdFt0W1wiUHJlY2VkZW5jZVwiXSA9IDQ0OF0gPSBcIlByZWNlZGVuY2VcIjtcbiAgICB0W3RbXCJUeXBlXCJdID0gNjNdID0gXCJUeXBlXCI7XG4gICAgdFt0W1wiRmFsc2VLZXl3b3JkXCJdID0gMjA0OF0gPSBcIkZhbHNlS2V5d29yZFwiO1xuICAgIHRbdFtcIlRydWVLZXl3b3JkXCJdID0gMjA0OV0gPSBcIlRydWVLZXl3b3JkXCI7XG4gICAgdFt0W1wiTnVsbEtleXdvcmRcIl0gPSAyMDUwXSA9IFwiTnVsbEtleXdvcmRcIjtcbiAgICB0W3RbXCJVbmRlZmluZWRLZXl3b3JkXCJdID0gMjA1MV0gPSBcIlVuZGVmaW5lZEtleXdvcmRcIjtcbiAgICB0W3RbXCJUaGlzU2NvcGVcIl0gPSAzMDc2XSA9IFwiVGhpc1Njb3BlXCI7XG4gICAgdFt0W1wiUGFyZW50U2NvcGVcIl0gPSAzMDc4XSA9IFwiUGFyZW50U2NvcGVcIjtcbiAgICB0W3RbXCJPcGVuUGFyZW5cIl0gPSA2NzE3NTFdID0gXCJPcGVuUGFyZW5cIjtcbiAgICB0W3RbXCJPcGVuQnJhY2VcIl0gPSAxMzEwODBdID0gXCJPcGVuQnJhY2VcIjtcbiAgICB0W3RbXCJEb3RcIl0gPSAxNjM5M10gPSBcIkRvdFwiO1xuICAgIHRbdFtcIkNsb3NlQnJhY2VcIl0gPSAxODM1MDE4XSA9IFwiQ2xvc2VCcmFjZVwiO1xuICAgIHRbdFtcIkNsb3NlUGFyZW5cIl0gPSAxODM1MDE5XSA9IFwiQ2xvc2VQYXJlblwiO1xuICAgIHRbdFtcIkNvbW1hXCJdID0gMTU3Mjg3Nl0gPSBcIkNvbW1hXCI7XG4gICAgdFt0W1wiT3BlbkJyYWNrZXRcIl0gPSA2NzE3NTddID0gXCJPcGVuQnJhY2tldFwiO1xuICAgIHRbdFtcIkNsb3NlQnJhY2tldFwiXSA9IDE4MzUwMjJdID0gXCJDbG9zZUJyYWNrZXRcIjtcbiAgICB0W3RbXCJDb2xvblwiXSA9IDE1NzI4NzldID0gXCJDb2xvblwiO1xuICAgIHRbdFtcIlF1ZXN0aW9uXCJdID0gMTU3Mjg4MF0gPSBcIlF1ZXN0aW9uXCI7XG4gICAgdFt0W1wiQW1wZXJzYW5kXCJdID0gMTU3Mjg4M10gPSBcIkFtcGVyc2FuZFwiO1xuICAgIHRbdFtcIkJhclwiXSA9IDE1NzI4ODRdID0gXCJCYXJcIjtcbiAgICB0W3RbXCJCYXJCYXJcIl0gPSAxNjM4NTQ5XSA9IFwiQmFyQmFyXCI7XG4gICAgdFt0W1wiQW1wZXJzYW5kQW1wZXJzYW5kXCJdID0gMTYzODYxNF0gPSBcIkFtcGVyc2FuZEFtcGVyc2FuZFwiO1xuICAgIHRbdFtcIkVxdWFsc0VxdWFsc1wiXSA9IDE2Mzg2NzldID0gXCJFcXVhbHNFcXVhbHNcIjtcbiAgICB0W3RbXCJFeGNsYW1hdGlvbkVxdWFsc1wiXSA9IDE2Mzg2ODBdID0gXCJFeGNsYW1hdGlvbkVxdWFsc1wiO1xuICAgIHRbdFtcIkVxdWFsc0VxdWFsc0VxdWFsc1wiXSA9IDE2Mzg2ODFdID0gXCJFcXVhbHNFcXVhbHNFcXVhbHNcIjtcbiAgICB0W3RbXCJFeGNsYW1hdGlvbkVxdWFsc0VxdWFsc1wiXSA9IDE2Mzg2ODJdID0gXCJFeGNsYW1hdGlvbkVxdWFsc0VxdWFsc1wiO1xuICAgIHRbdFtcIkxlc3NUaGFuXCJdID0gMTYzODc0N10gPSBcIkxlc3NUaGFuXCI7XG4gICAgdFt0W1wiR3JlYXRlclRoYW5cIl0gPSAxNjM4NzQ4XSA9IFwiR3JlYXRlclRoYW5cIjtcbiAgICB0W3RbXCJMZXNzVGhhbkVxdWFsc1wiXSA9IDE2Mzg3NDldID0gXCJMZXNzVGhhbkVxdWFsc1wiO1xuICAgIHRbdFtcIkdyZWF0ZXJUaGFuRXF1YWxzXCJdID0gMTYzODc1MF0gPSBcIkdyZWF0ZXJUaGFuRXF1YWxzXCI7XG4gICAgdFt0W1wiSW5LZXl3b3JkXCJdID0gMTY0MDc5OV0gPSBcIkluS2V5d29yZFwiO1xuICAgIHRbdFtcIkluc3RhbmNlT2ZLZXl3b3JkXCJdID0gMTY0MDgwMF0gPSBcIkluc3RhbmNlT2ZLZXl3b3JkXCI7XG4gICAgdFt0W1wiUGx1c1wiXSA9IDYyMzAwOV0gPSBcIlBsdXNcIjtcbiAgICB0W3RbXCJNaW51c1wiXSA9IDYyMzAxMF0gPSBcIk1pbnVzXCI7XG4gICAgdFt0W1wiVHlwZW9mS2V5d29yZFwiXSA9IDM0ODUxXSA9IFwiVHlwZW9mS2V5d29yZFwiO1xuICAgIHRbdFtcIlZvaWRLZXl3b3JkXCJdID0gMzQ4NTJdID0gXCJWb2lkS2V5d29yZFwiO1xuICAgIHRbdFtcIkFzdGVyaXNrXCJdID0gMTYzODg4NV0gPSBcIkFzdGVyaXNrXCI7XG4gICAgdFt0W1wiUGVyY2VudFwiXSA9IDE2Mzg4ODZdID0gXCJQZXJjZW50XCI7XG4gICAgdFt0W1wiU2xhc2hcIl0gPSAxNjM4ODg3XSA9IFwiU2xhc2hcIjtcbiAgICB0W3RbXCJFcXVhbHNcIl0gPSAxMDQ4NjE2XSA9IFwiRXF1YWxzXCI7XG4gICAgdFt0W1wiRXhjbGFtYXRpb25cIl0gPSAzMjgwOV0gPSBcIkV4Y2xhbWF0aW9uXCI7XG4gICAgdFt0W1wiVGVtcGxhdGVUYWlsXCJdID0gNTQwNzE0XSA9IFwiVGVtcGxhdGVUYWlsXCI7XG4gICAgdFt0W1wiVGVtcGxhdGVDb250aW51YXRpb25cIl0gPSA1NDA3MTVdID0gXCJUZW1wbGF0ZUNvbnRpbnVhdGlvblwiO1xuICAgIHRbdFtcIk9mS2V5d29yZFwiXSA9IDEwNTExODBdID0gXCJPZktleXdvcmRcIjtcbn0pKFNlIHx8IChTZSA9IHt9KSk7XG5cbmNvbnN0IE9lID0gUHJpbWl0aXZlTGl0ZXJhbEV4cHJlc3Npb24uJGZhbHNlO1xuXG5jb25zdCBDZSA9IFByaW1pdGl2ZUxpdGVyYWxFeHByZXNzaW9uLiR0cnVlO1xuXG5jb25zdCBrZSA9IFByaW1pdGl2ZUxpdGVyYWxFeHByZXNzaW9uLiRudWxsO1xuXG5jb25zdCBCZSA9IFByaW1pdGl2ZUxpdGVyYWxFeHByZXNzaW9uLiR1bmRlZmluZWQ7XG5cbmNvbnN0ICRlID0gQWNjZXNzVGhpc0V4cHJlc3Npb24uJHRoaXM7XG5cbmNvbnN0IExlID0gQWNjZXNzVGhpc0V4cHJlc3Npb24uJHBhcmVudDtcblxudmFyIFJlO1xuXG4oZnVuY3Rpb24odCkge1xuICAgIHRbdFtcIk5vbmVcIl0gPSAwXSA9IFwiTm9uZVwiO1xuICAgIHRbdFtcIkludGVycG9sYXRpb25cIl0gPSAxXSA9IFwiSW50ZXJwb2xhdGlvblwiO1xuICAgIHRbdFtcIklzSXRlcmF0b3JcIl0gPSAyXSA9IFwiSXNJdGVyYXRvclwiO1xuICAgIHRbdFtcIklzRnVuY3Rpb25cIl0gPSA0XSA9IFwiSXNGdW5jdGlvblwiO1xuICAgIHRbdFtcIklzUHJvcGVydHlcIl0gPSA4XSA9IFwiSXNQcm9wZXJ0eVwiO1xuICAgIHRbdFtcIklzQ3VzdG9tXCJdID0gMTZdID0gXCJJc0N1c3RvbVwiO1xufSkoUmUgfHwgKFJlID0ge30pKTtcblxuY2xhc3MgUGFyc2VyU3RhdGUge1xuICAgIGNvbnN0cnVjdG9yKHQpIHtcbiAgICAgICAgdGhpcy5pcCA9IHQ7XG4gICAgICAgIHRoaXMuaW5kZXggPSAwO1xuICAgICAgICB0aGlzLkMgPSAwO1xuICAgICAgICB0aGlzLkIgPSAwO1xuICAgICAgICB0aGlzLiQgPSAxNTcyODY0O1xuICAgICAgICB0aGlzLkwgPSBcIlwiO1xuICAgICAgICB0aGlzLlIgPSB0cnVlO1xuICAgICAgICB0aGlzLmxlbmd0aCA9IHQubGVuZ3RoO1xuICAgICAgICB0aGlzLk8gPSB0LmNoYXJDb2RlQXQoMCk7XG4gICAgfVxuICAgIGdldCBQKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5pcC5zbGljZSh0aGlzLkMsIHRoaXMuaW5kZXgpO1xuICAgIH1cbn1cblxuY29uc3QgUGUgPSBuZXcgUGFyc2VyU3RhdGUoXCJcIik7XG5cbmZ1bmN0aW9uIFRlKHQsIGUpIHtcbiAgICBQZS5pcCA9IHQ7XG4gICAgUGUubGVuZ3RoID0gdC5sZW5ndGg7XG4gICAgUGUuaW5kZXggPSAwO1xuICAgIFBlLk8gPSB0LmNoYXJDb2RlQXQoMCk7XG4gICAgcmV0dXJuIGplKFBlLCAwLCA2MSwgdm9pZCAwID09PSBlID8gOCA6IGUpO1xufVxuXG5mdW5jdGlvbiBqZSh0LCBlLCBzLCByKSB7XG4gICAgaWYgKDE2ID09PSByKSByZXR1cm4gbmV3IEN1c3RvbUV4cHJlc3Npb24odC5pcCk7XG4gICAgaWYgKDAgPT09IHQuaW5kZXgpIHtcbiAgICAgICAgaWYgKDEgJiByKSByZXR1cm4gVmUodCk7XG4gICAgICAgIEtlKHQpO1xuICAgICAgICBpZiAoMTA0ODU3NiAmIHQuJCkgdGhyb3cgbmV3IEVycm9yKGBBVVIwMTUxOiR7dC5pcH1gKTtcbiAgICB9XG4gICAgdC5SID0gNDQ4ID4gcztcbiAgICBsZXQgaTtcbiAgICBpZiAoMzI3NjggJiB0LiQpIHtcbiAgICAgICAgY29uc3QgcyA9IEplWzYzICYgdC4kXTtcbiAgICAgICAgS2UodCk7XG4gICAgICAgIGkgPSBuZXcgVW5hcnlFeHByZXNzaW9uKHMsIGplKHQsIGUsIDQ0OSwgcikpO1xuICAgICAgICB0LlIgPSBmYWxzZTtcbiAgICB9IGVsc2Uge1xuICAgICAgICB0OiBzd2l0Y2ggKHQuJCkge1xuICAgICAgICAgIGNhc2UgMzA3ODpcbiAgICAgICAgICAgIHQuUiA9IGZhbHNlO1xuICAgICAgICAgICAgZG8ge1xuICAgICAgICAgICAgICAgIEtlKHQpO1xuICAgICAgICAgICAgICAgIGUrKztcbiAgICAgICAgICAgICAgICBpZiAoR2UodCwgMTYzOTMpKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICgxNjM5MyA9PT0gdC4kKSB0aHJvdyBuZXcgRXJyb3IoYEFVUjAxNTI6JHt0LmlwfWApOyBlbHNlIGlmICgxNTcyODY0ID09PSB0LiQpIHRocm93IG5ldyBFcnJvcihgQVVSMDE1Mzoke3QuaXB9YCk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmICg1MjQyODggJiB0LiQpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgdCA9IDUxMSAmIGU7XG4gICAgICAgICAgICAgICAgICAgIGkgPSAwID09PSB0ID8gJGUgOiAxID09PSB0ID8gTGUgOiBuZXcgQWNjZXNzVGhpc0V4cHJlc3Npb24odCk7XG4gICAgICAgICAgICAgICAgICAgIGUgPSA1MTI7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrIHQ7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHRocm93IG5ldyBFcnJvcihgQVVSMDE1NDoke3QuaXB9YCk7XG4gICAgICAgICAgICB9IHdoaWxlICgzMDc4ID09PSB0LiQpO1xuXG4gICAgICAgICAgY2FzZSAxMDI0OlxuICAgICAgICAgICAgaWYgKDIgJiByKSBpID0gbmV3IEJpbmRpbmdJZGVudGlmaWVyKHQuTCk7IGVsc2Uge1xuICAgICAgICAgICAgICAgIGkgPSBuZXcgQWNjZXNzU2NvcGVFeHByZXNzaW9uKHQuTCwgNTExICYgZSk7XG4gICAgICAgICAgICAgICAgZSA9IDEwMjQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0LlIgPSB0cnVlO1xuICAgICAgICAgICAgS2UodCk7XG4gICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgIGNhc2UgMzA3NjpcbiAgICAgICAgICAgIHQuUiA9IGZhbHNlO1xuICAgICAgICAgICAgS2UodCk7XG4gICAgICAgICAgICBpID0gJGU7XG4gICAgICAgICAgICBlID0gNTEyO1xuICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICBjYXNlIDY3MTc1MTpcbiAgICAgICAgICAgIEtlKHQpO1xuICAgICAgICAgICAgaSA9IGplKHQsIDAsIDYyLCByKTtcbiAgICAgICAgICAgIFplKHQsIDE4MzUwMTkpO1xuICAgICAgICAgICAgZSA9IDA7XG4gICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgIGNhc2UgNjcxNzU3OlxuICAgICAgICAgICAgaSA9IHQuaXAuc2VhcmNoKC9cXHMrb2ZcXHMrLykgPiB0LmluZGV4ID8gSWUodCkgOiBNZSh0LCBlLCByKTtcbiAgICAgICAgICAgIGUgPSAwO1xuICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICBjYXNlIDEzMTA4MDpcbiAgICAgICAgICAgIGkgPSBGZSh0LCByKTtcbiAgICAgICAgICAgIGUgPSAwO1xuICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICBjYXNlIDU0MDcxNDpcbiAgICAgICAgICAgIGkgPSBuZXcgVGVtcGxhdGVFeHByZXNzaW9uKFsgdC5MIF0pO1xuICAgICAgICAgICAgdC5SID0gZmFsc2U7XG4gICAgICAgICAgICBLZSh0KTtcbiAgICAgICAgICAgIGUgPSAwO1xuICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICBjYXNlIDU0MDcxNTpcbiAgICAgICAgICAgIGkgPSBOZSh0LCBlLCByLCBpLCBmYWxzZSk7XG4gICAgICAgICAgICBlID0gMDtcbiAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgY2FzZSA0MDk2OlxuICAgICAgICAgIGNhc2UgODE5MjpcbiAgICAgICAgICAgIGkgPSBuZXcgUHJpbWl0aXZlTGl0ZXJhbEV4cHJlc3Npb24odC5MKTtcbiAgICAgICAgICAgIHQuUiA9IGZhbHNlO1xuICAgICAgICAgICAgS2UodCk7XG4gICAgICAgICAgICBlID0gMDtcbiAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgY2FzZSAyMDUwOlxuICAgICAgICAgIGNhc2UgMjA1MTpcbiAgICAgICAgICBjYXNlIDIwNDk6XG4gICAgICAgICAgY2FzZSAyMDQ4OlxuICAgICAgICAgICAgaSA9IEplWzYzICYgdC4kXTtcbiAgICAgICAgICAgIHQuUiA9IGZhbHNlO1xuICAgICAgICAgICAgS2UodCk7XG4gICAgICAgICAgICBlID0gMDtcbiAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIGlmICh0LmluZGV4ID49IHQubGVuZ3RoKSB0aHJvdyBuZXcgRXJyb3IoYEFVUjAxNTU6JHt0LmlwfWApOyBlbHNlIHRocm93IG5ldyBFcnJvcihgQVVSMDE1Njoke3QuaXB9YCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKDIgJiByKSByZXR1cm4gRGUodCwgaSk7XG4gICAgICAgIGlmICg0NDkgPCBzKSByZXR1cm4gaTtcbiAgICAgICAgbGV0IG4gPSB0Lkw7XG4gICAgICAgIHdoaWxlICgoMTYzODQgJiB0LiQpID4gMCkge1xuICAgICAgICAgICAgY29uc3QgcyA9IFtdO1xuICAgICAgICAgICAgbGV0IG87XG4gICAgICAgICAgICBzd2l0Y2ggKHQuJCkge1xuICAgICAgICAgICAgICBjYXNlIDE2MzkzOlxuICAgICAgICAgICAgICAgIHQuUiA9IHRydWU7XG4gICAgICAgICAgICAgICAgS2UodCk7XG4gICAgICAgICAgICAgICAgaWYgKDAgPT09ICgzMDcyICYgdC4kKSkgdGhyb3cgbmV3IEVycm9yKGBBVVIwMTUzOiR7dC5pcH1gKTtcbiAgICAgICAgICAgICAgICBuID0gdC5MO1xuICAgICAgICAgICAgICAgIEtlKHQpO1xuICAgICAgICAgICAgICAgIGUgPSAoZSAmICg1MTIgfCAxMDI0KSkgPDwgMSB8IDIwNDggJiBlIHwgKDQwOTYgJiBlKSA+PiAxO1xuICAgICAgICAgICAgICAgIGlmICg2NzE3NTEgPT09IHQuJCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoMCA9PT0gZSkgZSA9IDIwNDg7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoMTAyNCAmIGUpIGkgPSBuZXcgQWNjZXNzU2NvcGVFeHByZXNzaW9uKG4sIGkuYW5jZXN0b3IpOyBlbHNlIGkgPSBuZXcgQWNjZXNzTWVtYmVyRXhwcmVzc2lvbihpLCBuKTtcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcblxuICAgICAgICAgICAgICBjYXNlIDY3MTc1NzpcbiAgICAgICAgICAgICAgICB0LlIgPSB0cnVlO1xuICAgICAgICAgICAgICAgIEtlKHQpO1xuICAgICAgICAgICAgICAgIGUgPSA0MDk2O1xuICAgICAgICAgICAgICAgIGkgPSBuZXcgQWNjZXNzS2V5ZWRFeHByZXNzaW9uKGksIGplKHQsIDAsIDYyLCByKSk7XG4gICAgICAgICAgICAgICAgWmUodCwgMTgzNTAyMik7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgICAgY2FzZSA2NzE3NTE6XG4gICAgICAgICAgICAgICAgdC5SID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgS2UodCk7XG4gICAgICAgICAgICAgICAgd2hpbGUgKDE4MzUwMTkgIT09IHQuJCkge1xuICAgICAgICAgICAgICAgICAgICBzLnB1c2goamUodCwgMCwgNjIsIHIpKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFHZSh0LCAxNTcyODc2KSkgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIFplKHQsIDE4MzUwMTkpO1xuICAgICAgICAgICAgICAgIGlmICgxMDI0ICYgZSkgaSA9IG5ldyBDYWxsU2NvcGVFeHByZXNzaW9uKG4sIHMsIGkuYW5jZXN0b3IpOyBlbHNlIGlmICgyMDQ4ICYgZSkgaSA9IG5ldyBDYWxsTWVtYmVyRXhwcmVzc2lvbihpLCBuLCBzKTsgZWxzZSBpID0gbmV3IENhbGxGdW5jdGlvbkV4cHJlc3Npb24oaSwgcyk7XG4gICAgICAgICAgICAgICAgZSA9IDA7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgICAgY2FzZSA1NDA3MTQ6XG4gICAgICAgICAgICAgICAgdC5SID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgbyA9IFsgdC5MIF07XG4gICAgICAgICAgICAgICAgaSA9IG5ldyBUYWdnZWRUZW1wbGF0ZUV4cHJlc3Npb24obywgbywgaSk7XG4gICAgICAgICAgICAgICAgS2UodCk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgICAgY2FzZSA1NDA3MTU6XG4gICAgICAgICAgICAgICAgaSA9IE5lKHQsIGUsIHIsIGksIHRydWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIGlmICg0NDggPCBzKSByZXR1cm4gaTtcbiAgICB3aGlsZSAoKDY1NTM2ICYgdC4kKSA+IDApIHtcbiAgICAgICAgY29uc3QgbiA9IHQuJDtcbiAgICAgICAgaWYgKCg0NDggJiBuKSA8PSBzKSBicmVhaztcbiAgICAgICAgS2UodCk7XG4gICAgICAgIGkgPSBuZXcgQmluYXJ5RXhwcmVzc2lvbihKZVs2MyAmIG5dLCBpLCBqZSh0LCBlLCA0NDggJiBuLCByKSk7XG4gICAgICAgIHQuUiA9IGZhbHNlO1xuICAgIH1cbiAgICBpZiAoNjMgPCBzKSByZXR1cm4gaTtcbiAgICBpZiAoR2UodCwgMTU3Mjg4MCkpIHtcbiAgICAgICAgY29uc3QgcyA9IGplKHQsIGUsIDYyLCByKTtcbiAgICAgICAgWmUodCwgMTU3Mjg3OSk7XG4gICAgICAgIGkgPSBuZXcgQ29uZGl0aW9uYWxFeHByZXNzaW9uKGksIHMsIGplKHQsIGUsIDYyLCByKSk7XG4gICAgICAgIHQuUiA9IGZhbHNlO1xuICAgIH1cbiAgICBpZiAoNjIgPCBzKSByZXR1cm4gaTtcbiAgICBpZiAoR2UodCwgMTA0ODYxNikpIHtcbiAgICAgICAgaWYgKCF0LlIpIHRocm93IG5ldyBFcnJvcihgQVVSMDE1ODoke3QuaXB9YCk7XG4gICAgICAgIGkgPSBuZXcgQXNzaWduRXhwcmVzc2lvbihpLCBqZSh0LCBlLCA2MiwgcikpO1xuICAgIH1cbiAgICBpZiAoNjEgPCBzKSByZXR1cm4gaTtcbiAgICB3aGlsZSAoR2UodCwgMTU3Mjg4NCkpIHtcbiAgICAgICAgaWYgKDE1NzI4NjQgPT09IHQuJCkgdGhyb3cgbmV3IEVycm9yKGBBVVIwMTU5OiR7dC5pcH1gKTtcbiAgICAgICAgY29uc3QgcyA9IHQuTDtcbiAgICAgICAgS2UodCk7XG4gICAgICAgIGNvbnN0IG4gPSBuZXcgQXJyYXk7XG4gICAgICAgIHdoaWxlIChHZSh0LCAxNTcyODc5KSkgbi5wdXNoKGplKHQsIGUsIDYyLCByKSk7XG4gICAgICAgIGkgPSBuZXcgVmFsdWVDb252ZXJ0ZXJFeHByZXNzaW9uKGksIHMsIG4pO1xuICAgIH1cbiAgICB3aGlsZSAoR2UodCwgMTU3Mjg4MykpIHtcbiAgICAgICAgaWYgKDE1NzI4NjQgPT09IHQuJCkgdGhyb3cgbmV3IEVycm9yKGBBVVIwMTYwOiR7dC5pcH1gKTtcbiAgICAgICAgY29uc3QgcyA9IHQuTDtcbiAgICAgICAgS2UodCk7XG4gICAgICAgIGNvbnN0IG4gPSBuZXcgQXJyYXk7XG4gICAgICAgIHdoaWxlIChHZSh0LCAxNTcyODc5KSkgbi5wdXNoKGplKHQsIGUsIDYyLCByKSk7XG4gICAgICAgIGkgPSBuZXcgQmluZGluZ0JlaGF2aW9yRXhwcmVzc2lvbihpLCBzLCBuKTtcbiAgICB9XG4gICAgaWYgKDE1NzI4NjQgIT09IHQuJCkge1xuICAgICAgICBpZiAoMSAmIHIpIHJldHVybiBpO1xuICAgICAgICBpZiAoXCJvZlwiID09PSB0LlApIHRocm93IG5ldyBFcnJvcihgQVVSMDE2MToke3QuaXB9YCk7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgQVVSMDE2Mjoke3QuaXB9YCk7XG4gICAgfVxuICAgIHJldHVybiBpO1xufVxuXG5mdW5jdGlvbiBJZSh0KSB7XG4gICAgY29uc3QgZSA9IFtdO1xuICAgIGNvbnN0IHMgPSBuZXcgRGVzdHJ1Y3R1cmluZ0Fzc2lnbm1lbnRFeHByZXNzaW9uKDkwMTM3LCBlLCB2b2lkIDAsIHZvaWQgMCk7XG4gICAgbGV0IHIgPSBcIlwiO1xuICAgIGxldCBpID0gdHJ1ZTtcbiAgICBsZXQgbiA9IDA7XG4gICAgd2hpbGUgKGkpIHtcbiAgICAgICAgS2UodCk7XG4gICAgICAgIHN3aXRjaCAodC4kKSB7XG4gICAgICAgICAgY2FzZSAxODM1MDIyOlxuICAgICAgICAgICAgaSA9IGZhbHNlO1xuICAgICAgICAgICAgbygpO1xuICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICBjYXNlIDE1NzI4NzY6XG4gICAgICAgICAgICBvKCk7XG4gICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgIGNhc2UgMTAyNDpcbiAgICAgICAgICAgIHIgPSB0LlA7XG4gICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEFVUjAxNzA6JHt0LmlwfWApO1xuICAgICAgICB9XG4gICAgfVxuICAgIFplKHQsIDE4MzUwMjIpO1xuICAgIHJldHVybiBzO1xuICAgIGZ1bmN0aW9uIG8oKSB7XG4gICAgICAgIGlmIChcIlwiICE9PSByKSB7XG4gICAgICAgICAgICBlLnB1c2gobmV3IERlc3RydWN0dXJpbmdBc3NpZ25tZW50U2luZ2xlRXhwcmVzc2lvbihuZXcgQWNjZXNzTWVtYmVyRXhwcmVzc2lvbigkZSwgciksIG5ldyBBY2Nlc3NLZXllZEV4cHJlc3Npb24oJGUsIG5ldyBQcmltaXRpdmVMaXRlcmFsRXhwcmVzc2lvbihuKyspKSwgdm9pZCAwKSk7XG4gICAgICAgICAgICByID0gXCJcIjtcbiAgICAgICAgfSBlbHNlIG4rKztcbiAgICB9XG59XG5cbmZ1bmN0aW9uIE1lKHQsIGUsIHMpIHtcbiAgICBLZSh0KTtcbiAgICBjb25zdCByID0gbmV3IEFycmF5O1xuICAgIHdoaWxlICgxODM1MDIyICE9PSB0LiQpIGlmIChHZSh0LCAxNTcyODc2KSkge1xuICAgICAgICByLnB1c2goQmUpO1xuICAgICAgICBpZiAoMTgzNTAyMiA9PT0gdC4kKSBicmVhaztcbiAgICB9IGVsc2Uge1xuICAgICAgICByLnB1c2goamUodCwgZSwgNjIsIH4yICYgcykpO1xuICAgICAgICBpZiAoR2UodCwgMTU3Mjg3NikpIHtcbiAgICAgICAgICAgIGlmICgxODM1MDIyID09PSB0LiQpIGJyZWFrO1xuICAgICAgICB9IGVsc2UgYnJlYWs7XG4gICAgfVxuICAgIFplKHQsIDE4MzUwMjIpO1xuICAgIGlmICgyICYgcykgcmV0dXJuIG5ldyBBcnJheUJpbmRpbmdQYXR0ZXJuKHIpOyBlbHNlIHtcbiAgICAgICAgdC5SID0gZmFsc2U7XG4gICAgICAgIHJldHVybiBuZXcgQXJyYXlMaXRlcmFsRXhwcmVzc2lvbihyKTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIERlKHQsIGUpIHtcbiAgICBpZiAoMCA9PT0gKDY1NTM2ICYgZS4ka2luZCkpIHRocm93IG5ldyBFcnJvcihgQVVSMDE2Mzoke3QuaXB9YCk7XG4gICAgaWYgKDEwNTExODAgIT09IHQuJCkgdGhyb3cgbmV3IEVycm9yKGBBVVIwMTYzOiR7dC5pcH1gKTtcbiAgICBLZSh0KTtcbiAgICBjb25zdCBzID0gZTtcbiAgICBjb25zdCByID0gamUodCwgMCwgNjEsIDApO1xuICAgIHJldHVybiBuZXcgRm9yT2ZTdGF0ZW1lbnQocywgcik7XG59XG5cbmZ1bmN0aW9uIEZlKHQsIGUpIHtcbiAgICBjb25zdCBzID0gbmV3IEFycmF5O1xuICAgIGNvbnN0IHIgPSBuZXcgQXJyYXk7XG4gICAgS2UodCk7XG4gICAgd2hpbGUgKDE4MzUwMTggIT09IHQuJCkge1xuICAgICAgICBzLnB1c2godC5MKTtcbiAgICAgICAgaWYgKDEyMjg4ICYgdC4kKSB7XG4gICAgICAgICAgICBLZSh0KTtcbiAgICAgICAgICAgIFplKHQsIDE1NzI4NzkpO1xuICAgICAgICAgICAgci5wdXNoKGplKHQsIDAsIDYyLCB+MiAmIGUpKTtcbiAgICAgICAgfSBlbHNlIGlmICgzMDcyICYgdC4kKSB7XG4gICAgICAgICAgICBjb25zdCB7TzogcywgJDogaSwgaW5kZXg6IG59ID0gdDtcbiAgICAgICAgICAgIEtlKHQpO1xuICAgICAgICAgICAgaWYgKEdlKHQsIDE1NzI4NzkpKSByLnB1c2goamUodCwgMCwgNjIsIH4yICYgZSkpOyBlbHNlIHtcbiAgICAgICAgICAgICAgICB0Lk8gPSBzO1xuICAgICAgICAgICAgICAgIHQuJCA9IGk7XG4gICAgICAgICAgICAgICAgdC5pbmRleCA9IG47XG4gICAgICAgICAgICAgICAgci5wdXNoKGplKHQsIDAsIDQ1MCwgfjIgJiBlKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB0aHJvdyBuZXcgRXJyb3IoYEFVUjAxNjQ6JHt0LmlwfWApO1xuICAgICAgICBpZiAoMTgzNTAxOCAhPT0gdC4kKSBaZSh0LCAxNTcyODc2KTtcbiAgICB9XG4gICAgWmUodCwgMTgzNTAxOCk7XG4gICAgaWYgKDIgJiBlKSByZXR1cm4gbmV3IE9iamVjdEJpbmRpbmdQYXR0ZXJuKHMsIHIpOyBlbHNlIHtcbiAgICAgICAgdC5SID0gZmFsc2U7XG4gICAgICAgIHJldHVybiBuZXcgT2JqZWN0TGl0ZXJhbEV4cHJlc3Npb24ocywgcik7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBWZSh0KSB7XG4gICAgY29uc3QgZSA9IFtdO1xuICAgIGNvbnN0IHMgPSBbXTtcbiAgICBjb25zdCByID0gdC5sZW5ndGg7XG4gICAgbGV0IGkgPSBcIlwiO1xuICAgIHdoaWxlICh0LmluZGV4IDwgcikge1xuICAgICAgICBzd2l0Y2ggKHQuTykge1xuICAgICAgICAgIGNhc2UgMzY6XG4gICAgICAgICAgICBpZiAoMTIzID09PSB0LmlwLmNoYXJDb2RlQXQodC5pbmRleCArIDEpKSB7XG4gICAgICAgICAgICAgICAgZS5wdXNoKGkpO1xuICAgICAgICAgICAgICAgIGkgPSBcIlwiO1xuICAgICAgICAgICAgICAgIHQuaW5kZXggKz0gMjtcbiAgICAgICAgICAgICAgICB0Lk8gPSB0LmlwLmNoYXJDb2RlQXQodC5pbmRleCk7XG4gICAgICAgICAgICAgICAgS2UodCk7XG4gICAgICAgICAgICAgICAgY29uc3QgciA9IGplKHQsIDAsIDYxLCAxKTtcbiAgICAgICAgICAgICAgICBzLnB1c2gocik7XG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9IGVsc2UgaSArPSBcIiRcIjtcbiAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgY2FzZSA5MjpcbiAgICAgICAgICAgIGkgKz0gU3RyaW5nLmZyb21DaGFyQ29kZShtZShxZSh0KSkpO1xuICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgaSArPSBTdHJpbmcuZnJvbUNoYXJDb2RlKHQuTyk7XG4gICAgICAgIH1cbiAgICAgICAgcWUodCk7XG4gICAgfVxuICAgIGlmIChzLmxlbmd0aCkge1xuICAgICAgICBlLnB1c2goaSk7XG4gICAgICAgIHJldHVybiBuZXcgSW50ZXJwb2xhdGlvbihlLCBzKTtcbiAgICB9XG4gICAgcmV0dXJuIG51bGw7XG59XG5cbmZ1bmN0aW9uIE5lKHQsIGUsIHMsIHIsIGkpIHtcbiAgICBjb25zdCBuID0gWyB0LkwgXTtcbiAgICBaZSh0LCA1NDA3MTUpO1xuICAgIGNvbnN0IG8gPSBbIGplKHQsIGUsIDYyLCBzKSBdO1xuICAgIHdoaWxlICg1NDA3MTQgIT09ICh0LiQgPSBXZSh0KSkpIHtcbiAgICAgICAgbi5wdXNoKHQuTCk7XG4gICAgICAgIFplKHQsIDU0MDcxNSk7XG4gICAgICAgIG8ucHVzaChqZSh0LCBlLCA2MiwgcykpO1xuICAgIH1cbiAgICBuLnB1c2godC5MKTtcbiAgICB0LlIgPSBmYWxzZTtcbiAgICBpZiAoaSkge1xuICAgICAgICBLZSh0KTtcbiAgICAgICAgcmV0dXJuIG5ldyBUYWdnZWRUZW1wbGF0ZUV4cHJlc3Npb24obiwgbiwgciwgbyk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgS2UodCk7XG4gICAgICAgIHJldHVybiBuZXcgVGVtcGxhdGVFeHByZXNzaW9uKG4sIG8pO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gS2UodCkge1xuICAgIHdoaWxlICh0LmluZGV4IDwgdC5sZW5ndGgpIHtcbiAgICAgICAgdC5DID0gdC5pbmRleDtcbiAgICAgICAgaWYgKG51bGwgIT0gKHQuJCA9IG5zW3QuT10odCkpKSByZXR1cm47XG4gICAgfVxuICAgIHQuJCA9IDE1NzI4NjQ7XG59XG5cbmZ1bmN0aW9uIHFlKHQpIHtcbiAgICByZXR1cm4gdC5PID0gdC5pcC5jaGFyQ29kZUF0KCsrdC5pbmRleCk7XG59XG5cbmZ1bmN0aW9uIEhlKHQpIHtcbiAgICB3aGlsZSAoaXNbcWUodCldKSA7XG4gICAgY29uc3QgZSA9IFhlW3QuTCA9IHQuUF07XG4gICAgcmV0dXJuIHZvaWQgMCA9PT0gZSA/IDEwMjQgOiBlO1xufVxuXG5mdW5jdGlvbiBRZSh0LCBlKSB7XG4gICAgbGV0IHMgPSB0Lk87XG4gICAgaWYgKGZhbHNlID09PSBlKSB7XG4gICAgICAgIGRvIHtcbiAgICAgICAgICAgIHMgPSBxZSh0KTtcbiAgICAgICAgfSB3aGlsZSAocyA8PSA1NyAmJiBzID49IDQ4KTtcbiAgICAgICAgaWYgKDQ2ICE9PSBzKSB7XG4gICAgICAgICAgICB0LkwgPSBwYXJzZUludCh0LlAsIDEwKTtcbiAgICAgICAgICAgIHJldHVybiA4MTkyO1xuICAgICAgICB9XG4gICAgICAgIHMgPSBxZSh0KTtcbiAgICAgICAgaWYgKHQuaW5kZXggPj0gdC5sZW5ndGgpIHtcbiAgICAgICAgICAgIHQuTCA9IHBhcnNlSW50KHQuUC5zbGljZSgwLCAtMSksIDEwKTtcbiAgICAgICAgICAgIHJldHVybiA4MTkyO1xuICAgICAgICB9XG4gICAgfVxuICAgIGlmIChzIDw9IDU3ICYmIHMgPj0gNDgpIGRvIHtcbiAgICAgICAgcyA9IHFlKHQpO1xuICAgIH0gd2hpbGUgKHMgPD0gNTcgJiYgcyA+PSA0OCk7IGVsc2UgdC5PID0gdC5pcC5jaGFyQ29kZUF0KC0tdC5pbmRleCk7XG4gICAgdC5MID0gcGFyc2VGbG9hdCh0LlApO1xuICAgIHJldHVybiA4MTkyO1xufVxuXG5mdW5jdGlvbiBfZSh0KSB7XG4gICAgY29uc3QgZSA9IHQuTztcbiAgICBxZSh0KTtcbiAgICBsZXQgcyA9IDA7XG4gICAgY29uc3QgciA9IG5ldyBBcnJheTtcbiAgICBsZXQgaSA9IHQuaW5kZXg7XG4gICAgd2hpbGUgKHQuTyAhPT0gZSkgaWYgKDkyID09PSB0Lk8pIHtcbiAgICAgICAgci5wdXNoKHQuaXAuc2xpY2UoaSwgdC5pbmRleCkpO1xuICAgICAgICBxZSh0KTtcbiAgICAgICAgcyA9IG1lKHQuTyk7XG4gICAgICAgIHFlKHQpO1xuICAgICAgICByLnB1c2goU3RyaW5nLmZyb21DaGFyQ29kZShzKSk7XG4gICAgICAgIGkgPSB0LmluZGV4O1xuICAgIH0gZWxzZSBpZiAodC5pbmRleCA+PSB0Lmxlbmd0aCkgdGhyb3cgbmV3IEVycm9yKGBBVVIwMTY1OiR7dC5pcH1gKTsgZWxzZSBxZSh0KTtcbiAgICBjb25zdCBuID0gdC5pcC5zbGljZShpLCB0LmluZGV4KTtcbiAgICBxZSh0KTtcbiAgICByLnB1c2gobik7XG4gICAgY29uc3QgbyA9IHIuam9pbihcIlwiKTtcbiAgICB0LkwgPSBvO1xuICAgIHJldHVybiA0MDk2O1xufVxuXG5mdW5jdGlvbiB6ZSh0KSB7XG4gICAgbGV0IGUgPSB0cnVlO1xuICAgIGxldCBzID0gXCJcIjtcbiAgICB3aGlsZSAoOTYgIT09IHFlKHQpKSBpZiAoMzYgPT09IHQuTykgaWYgKHQuaW5kZXggKyAxIDwgdC5sZW5ndGggJiYgMTIzID09PSB0LmlwLmNoYXJDb2RlQXQodC5pbmRleCArIDEpKSB7XG4gICAgICAgIHQuaW5kZXgrKztcbiAgICAgICAgZSA9IGZhbHNlO1xuICAgICAgICBicmVhaztcbiAgICB9IGVsc2UgcyArPSBcIiRcIjsgZWxzZSBpZiAoOTIgPT09IHQuTykgcyArPSBTdHJpbmcuZnJvbUNoYXJDb2RlKG1lKHFlKHQpKSk7IGVsc2Uge1xuICAgICAgICBpZiAodC5pbmRleCA+PSB0Lmxlbmd0aCkgdGhyb3cgbmV3IEVycm9yKGBBVVIwMTY2OiR7dC5pcH1gKTtcbiAgICAgICAgcyArPSBTdHJpbmcuZnJvbUNoYXJDb2RlKHQuTyk7XG4gICAgfVxuICAgIHFlKHQpO1xuICAgIHQuTCA9IHM7XG4gICAgaWYgKGUpIHJldHVybiA1NDA3MTQ7XG4gICAgcmV0dXJuIDU0MDcxNTtcbn1cblxuZnVuY3Rpb24gV2UodCkge1xuICAgIGlmICh0LmluZGV4ID49IHQubGVuZ3RoKSB0aHJvdyBuZXcgRXJyb3IoYEFVUjAxNjY6JHt0LmlwfWApO1xuICAgIHQuaW5kZXgtLTtcbiAgICByZXR1cm4gemUodCk7XG59XG5cbmZ1bmN0aW9uIEdlKHQsIGUpIHtcbiAgICBpZiAodC4kID09PSBlKSB7XG4gICAgICAgIEtlKHQpO1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xufVxuXG5mdW5jdGlvbiBaZSh0LCBlKSB7XG4gICAgaWYgKHQuJCA9PT0gZSkgS2UodCk7IGVsc2UgdGhyb3cgbmV3IEVycm9yKGBBVVIwMTY3OiR7dC5pcH08JHtlfWApO1xufVxuXG5jb25zdCBKZSA9IFsgT2UsIENlLCBrZSwgQmUsIFwiJHRoaXNcIiwgbnVsbCwgXCIkcGFyZW50XCIsIFwiKFwiLCBcIntcIiwgXCIuXCIsIFwifVwiLCBcIilcIiwgXCIsXCIsIFwiW1wiLCBcIl1cIiwgXCI6XCIsIFwiP1wiLCBcIidcIiwgJ1wiJywgXCImXCIsIFwifFwiLCBcInx8XCIsIFwiJiZcIiwgXCI9PVwiLCBcIiE9XCIsIFwiPT09XCIsIFwiIT09XCIsIFwiPFwiLCBcIj5cIiwgXCI8PVwiLCBcIj49XCIsIFwiaW5cIiwgXCJpbnN0YW5jZW9mXCIsIFwiK1wiLCBcIi1cIiwgXCJ0eXBlb2ZcIiwgXCJ2b2lkXCIsIFwiKlwiLCBcIiVcIiwgXCIvXCIsIFwiPVwiLCBcIiFcIiwgNTQwNzE0LCA1NDA3MTUsIFwib2ZcIiBdO1xuXG5jb25zdCBYZSA9IEUoKTtcblxuWGUudHJ1ZSA9IDIwNDk7XG5cblhlLm51bGwgPSAyMDUwO1xuXG5YZS5mYWxzZSA9IDIwNDg7XG5cblhlLnVuZGVmaW5lZCA9IDIwNTE7XG5cblhlLiR0aGlzID0gMzA3NjtcblxuWGUuJHBhcmVudCA9IDMwNzg7XG5cblhlLmluID0gMTY0MDc5OTtcblxuWGUuaW5zdGFuY2VvZiA9IDE2NDA4MDA7XG5cblhlLnR5cGVvZiA9IDM0ODUxO1xuXG5YZS52b2lkID0gMzQ4NTI7XG5cblhlLm9mID0gMTA1MTE4MDtcblxuY29uc3QgWWUgPSB7XG4gICAgQXNjaWlJZFBhcnQ6IFsgMzYsIDAsIDQ4LCA1OCwgNjUsIDkxLCA5NSwgMCwgOTcsIDEyMyBdLFxuICAgIElkU3RhcnQ6IFsgMzYsIDAsIDY1LCA5MSwgOTUsIDAsIDk3LCAxMjMsIDE3MCwgMCwgMTg2LCAwLCAxOTIsIDIxNSwgMjE2LCAyNDcsIDI0OCwgNjk3LCA3MzYsIDc0MSwgNzQyNCwgNzQ2MiwgNzQ2OCwgNzUxNywgNzUyMiwgNzUyNiwgNzUzMSwgNzU0NCwgNzU0NSwgNzYxNSwgNzY4MCwgNzkzNiwgODMwNSwgMCwgODMxOSwgMCwgODMzNiwgODM0OSwgODQ5MCwgODQ5MiwgODQ5OCwgMCwgODUyNiwgMCwgODU0NCwgODU4NSwgMTEzNjAsIDExMzkyLCA0Mjc4NiwgNDI4ODgsIDQyODkxLCA0MjkyNywgNDI5MjgsIDQyOTM2LCA0Mjk5OSwgNDMwMDgsIDQzODI0LCA0Mzg2NywgNDM4NjgsIDQzODc3LCA2NDI1NiwgNjQyNjMsIDY1MzEzLCA2NTMzOSwgNjUzNDUsIDY1MzcxIF0sXG4gICAgRGlnaXQ6IFsgNDgsIDU4IF0sXG4gICAgU2tpcDogWyAwLCAzMywgMTI3LCAxNjEgXVxufTtcblxuZnVuY3Rpb24gdHModCwgZSwgcywgcikge1xuICAgIGNvbnN0IGkgPSBzLmxlbmd0aDtcbiAgICBmb3IgKGxldCBuID0gMDsgbiA8IGk7IG4gKz0gMikge1xuICAgICAgICBjb25zdCBpID0gc1tuXTtcbiAgICAgICAgbGV0IG8gPSBzW24gKyAxXTtcbiAgICAgICAgbyA9IG8gPiAwID8gbyA6IGkgKyAxO1xuICAgICAgICBpZiAodCkgdC5maWxsKHIsIGksIG8pO1xuICAgICAgICBpZiAoZSkgZm9yIChsZXQgdCA9IGk7IHQgPCBvOyB0KyspIGUuYWRkKHQpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gZXModCkge1xuICAgIHJldHVybiBlID0+IHtcbiAgICAgICAgcWUoZSk7XG4gICAgICAgIHJldHVybiB0O1xuICAgIH07XG59XG5cbmNvbnN0IHNzID0gdCA9PiB7XG4gICAgdGhyb3cgbmV3IEVycm9yKGBBVVIwMTY4OiR7dC5pcH1gKTtcbn07XG5cbnNzLm5vdE1hcHBlZCA9IHRydWU7XG5cbmNvbnN0IHJzID0gbmV3IFNldDtcblxudHMobnVsbCwgcnMsIFllLkFzY2lpSWRQYXJ0LCB0cnVlKTtcblxuY29uc3QgaXMgPSBuZXcgVWludDhBcnJheSg2NTUzNSk7XG5cbnRzKGlzLCBudWxsLCBZZS5JZFN0YXJ0LCAxKTtcblxudHMoaXMsIG51bGwsIFllLkRpZ2l0LCAxKTtcblxuY29uc3QgbnMgPSBuZXcgQXJyYXkoNjU1MzUpO1xuXG5ucy5maWxsKHNzLCAwLCA2NTUzNSk7XG5cbnRzKG5zLCBudWxsLCBZZS5Ta2lwLCAodCA9PiB7XG4gICAgcWUodCk7XG4gICAgcmV0dXJuIG51bGw7XG59KSk7XG5cbnRzKG5zLCBudWxsLCBZZS5JZFN0YXJ0LCBIZSk7XG5cbnRzKG5zLCBudWxsLCBZZS5EaWdpdCwgKHQgPT4gUWUodCwgZmFsc2UpKSk7XG5cbm5zWzM0XSA9IG5zWzM5XSA9IHQgPT4gX2UodCk7XG5cbm5zWzk2XSA9IHQgPT4gemUodCk7XG5cbm5zWzMzXSA9IHQgPT4ge1xuICAgIGlmICg2MSAhPT0gcWUodCkpIHJldHVybiAzMjgwOTtcbiAgICBpZiAoNjEgIT09IHFlKHQpKSByZXR1cm4gMTYzODY4MDtcbiAgICBxZSh0KTtcbiAgICByZXR1cm4gMTYzODY4Mjtcbn07XG5cbm5zWzYxXSA9IHQgPT4ge1xuICAgIGlmICg2MSAhPT0gcWUodCkpIHJldHVybiAxMDQ4NjE2O1xuICAgIGlmICg2MSAhPT0gcWUodCkpIHJldHVybiAxNjM4Njc5O1xuICAgIHFlKHQpO1xuICAgIHJldHVybiAxNjM4NjgxO1xufTtcblxubnNbMzhdID0gdCA9PiB7XG4gICAgaWYgKDM4ICE9PSBxZSh0KSkgcmV0dXJuIDE1NzI4ODM7XG4gICAgcWUodCk7XG4gICAgcmV0dXJuIDE2Mzg2MTQ7XG59O1xuXG5uc1sxMjRdID0gdCA9PiB7XG4gICAgaWYgKDEyNCAhPT0gcWUodCkpIHJldHVybiAxNTcyODg0O1xuICAgIHFlKHQpO1xuICAgIHJldHVybiAxNjM4NTQ5O1xufTtcblxubnNbNDZdID0gdCA9PiB7XG4gICAgaWYgKHFlKHQpIDw9IDU3ICYmIHQuTyA+PSA0OCkgcmV0dXJuIFFlKHQsIHRydWUpO1xuICAgIHJldHVybiAxNjM5Mztcbn07XG5cbm5zWzYwXSA9IHQgPT4ge1xuICAgIGlmICg2MSAhPT0gcWUodCkpIHJldHVybiAxNjM4NzQ3O1xuICAgIHFlKHQpO1xuICAgIHJldHVybiAxNjM4NzQ5O1xufTtcblxubnNbNjJdID0gdCA9PiB7XG4gICAgaWYgKDYxICE9PSBxZSh0KSkgcmV0dXJuIDE2Mzg3NDg7XG4gICAgcWUodCk7XG4gICAgcmV0dXJuIDE2Mzg3NTA7XG59O1xuXG5uc1szN10gPSBlcygxNjM4ODg2KTtcblxubnNbNDBdID0gZXMoNjcxNzUxKTtcblxubnNbNDFdID0gZXMoMTgzNTAxOSk7XG5cbm5zWzQyXSA9IGVzKDE2Mzg4ODUpO1xuXG5uc1s0M10gPSBlcyg2MjMwMDkpO1xuXG5uc1s0NF0gPSBlcygxNTcyODc2KTtcblxubnNbNDVdID0gZXMoNjIzMDEwKTtcblxubnNbNDddID0gZXMoMTYzODg4Nyk7XG5cbm5zWzU4XSA9IGVzKDE1NzI4NzkpO1xuXG5uc1s2M10gPSBlcygxNTcyODgwKTtcblxubnNbOTFdID0gZXMoNjcxNzU3KTtcblxubnNbOTNdID0gZXMoMTgzNTAyMik7XG5cbm5zWzEyM10gPSBlcygxMzEwODApO1xuXG5uc1sxMjVdID0gZXMoMTgzNTAxOCk7XG5cbmxldCBvcyA9IG51bGw7XG5cbmNvbnN0IGhzID0gW107XG5cbmxldCBjcyA9IGZhbHNlO1xuXG5mdW5jdGlvbiB1cygpIHtcbiAgICBjcyA9IGZhbHNlO1xufVxuXG5mdW5jdGlvbiBhcygpIHtcbiAgICBjcyA9IHRydWU7XG59XG5cbmZ1bmN0aW9uIGxzKCkge1xuICAgIHJldHVybiBvcztcbn1cblxuZnVuY3Rpb24gZnModCkge1xuICAgIGlmIChudWxsID09IHQpIHRocm93IG5ldyBFcnJvcihcIkFVUjAyMDZcIik7XG4gICAgaWYgKG51bGwgPT0gb3MpIHtcbiAgICAgICAgb3MgPSB0O1xuICAgICAgICBoc1swXSA9IG9zO1xuICAgICAgICBjcyA9IHRydWU7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaWYgKG9zID09PSB0KSB0aHJvdyBuZXcgRXJyb3IoXCJBVVIwMjA3XCIpO1xuICAgIGhzLnB1c2gob3MpO1xuICAgIG9zID0gdDtcbiAgICBjcyA9IHRydWU7XG59XG5cbmZ1bmN0aW9uIGRzKHQpIHtcbiAgICBpZiAobnVsbCA9PSB0KSB0aHJvdyBuZXcgRXJyb3IoXCJBVVIwMjA4XCIpO1xuICAgIGlmIChvcyAhPT0gdCkgdGhyb3cgbmV3IEVycm9yKFwiQVVSMDIwOVwiKTtcbiAgICBocy5wb3AoKTtcbiAgICBvcyA9IGhzLmxlbmd0aCA+IDAgPyBoc1tocy5sZW5ndGggLSAxXSA6IG51bGw7XG4gICAgY3MgPSBudWxsICE9IG9zO1xufVxuXG5jb25zdCB2cyA9IE9iamVjdC5mcmVlemUoe1xuICAgIGdldCBjdXJyZW50KCkge1xuICAgICAgICByZXR1cm4gb3M7XG4gICAgfSxcbiAgICBnZXQgY29ubmVjdGluZygpIHtcbiAgICAgICAgcmV0dXJuIGNzO1xuICAgIH0sXG4gICAgZW50ZXI6IGZzLFxuICAgIGV4aXQ6IGRzLFxuICAgIHBhdXNlOiB1cyxcbiAgICByZXN1bWU6IGFzXG59KTtcblxuY29uc3QgcHMgPSBSZWZsZWN0LmdldDtcblxuY29uc3QgZ3MgPSBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nO1xuXG5jb25zdCB3cyA9IG5ldyBXZWFrTWFwO1xuXG5mdW5jdGlvbiBicyh0KSB7XG4gICAgc3dpdGNoIChncy5jYWxsKHQpKSB7XG4gICAgICBjYXNlIFwiW29iamVjdCBPYmplY3RdXCI6XG4gICAgICBjYXNlIFwiW29iamVjdCBBcnJheV1cIjpcbiAgICAgIGNhc2UgXCJbb2JqZWN0IE1hcF1cIjpcbiAgICAgIGNhc2UgXCJbb2JqZWN0IFNldF1cIjpcbiAgICAgICAgcmV0dXJuIHRydWU7XG5cbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG59XG5cbmNvbnN0IEVzID0gXCJfX3Jhd19fXCI7XG5cbmZ1bmN0aW9uIEFzKHQpIHtcbiAgICByZXR1cm4gYnModCkgPyB5cyh0KSA6IHQ7XG59XG5cbmZ1bmN0aW9uIHlzKHQpIHtcbiAgICB2YXIgZTtcbiAgICByZXR1cm4gbnVsbCAhPT0gKGUgPSB3cy5nZXQodCkpICYmIHZvaWQgMCAhPT0gZSA/IGUgOiBTcyh0KTtcbn1cblxuZnVuY3Rpb24gbXModCkge1xuICAgIHZhciBlO1xuICAgIHJldHVybiBudWxsICE9PSAoZSA9IHRbRXNdKSAmJiB2b2lkIDAgIT09IGUgPyBlIDogdDtcbn1cblxuZnVuY3Rpb24gVXModCkge1xuICAgIHJldHVybiBicyh0KSAmJiB0W0VzXSB8fCB0O1xufVxuXG5mdW5jdGlvbiB4cyh0KSB7XG4gICAgcmV0dXJuIFwiY29uc3RydWN0b3JcIiA9PT0gdCB8fCBcIl9fcHJvdG9fX1wiID09PSB0IHx8IFwiJG9ic2VydmVyc1wiID09PSB0IHx8IHQgPT09IFN5bWJvbC50b1ByaW1pdGl2ZSB8fCB0ID09PSBTeW1ib2wudG9TdHJpbmdUYWc7XG59XG5cbmZ1bmN0aW9uIFNzKHQpIHtcbiAgICBjb25zdCBlID0gdCBpbnN0YW5jZW9mIEFycmF5ID8gQ3MgOiB0IGluc3RhbmNlb2YgTWFwIHx8IHQgaW5zdGFuY2VvZiBTZXQgPyBacyA6IE9zO1xuICAgIGNvbnN0IHMgPSBuZXcgUHJveHkodCwgZSk7XG4gICAgd3Muc2V0KHQsIHMpO1xuICAgIHJldHVybiBzO1xufVxuXG5jb25zdCBPcyA9IHtcbiAgICBnZXQodCwgZSwgcykge1xuICAgICAgICBpZiAoZSA9PT0gRXMpIHJldHVybiB0O1xuICAgICAgICBjb25zdCByID0gbHMoKTtcbiAgICAgICAgaWYgKCFjcyB8fCB4cyhlKSB8fCBudWxsID09IHIpIHJldHVybiBwcyh0LCBlLCBzKTtcbiAgICAgICAgci5vYnNlcnZlKHQsIGUpO1xuICAgICAgICByZXR1cm4gQXMocHModCwgZSwgcykpO1xuICAgIH1cbn07XG5cbmNvbnN0IENzID0ge1xuICAgIGdldCh0LCBlLCBzKSB7XG4gICAgICAgIGlmIChlID09PSBFcykgcmV0dXJuIHQ7XG4gICAgICAgIGNvbnN0IHIgPSBscygpO1xuICAgICAgICBpZiAoIWNzIHx8IHhzKGUpIHx8IG51bGwgPT0gcikgcmV0dXJuIHBzKHQsIGUsIHMpO1xuICAgICAgICBzd2l0Y2ggKGUpIHtcbiAgICAgICAgICBjYXNlIFwibGVuZ3RoXCI6XG4gICAgICAgICAgICByLm9ic2VydmUodCwgXCJsZW5ndGhcIik7XG4gICAgICAgICAgICByZXR1cm4gdC5sZW5ndGg7XG5cbiAgICAgICAgICBjYXNlIFwibWFwXCI6XG4gICAgICAgICAgICByZXR1cm4ga3M7XG5cbiAgICAgICAgICBjYXNlIFwiaW5jbHVkZXNcIjpcbiAgICAgICAgICAgIHJldHVybiBMcztcblxuICAgICAgICAgIGNhc2UgXCJpbmRleE9mXCI6XG4gICAgICAgICAgICByZXR1cm4gUnM7XG5cbiAgICAgICAgICBjYXNlIFwibGFzdEluZGV4T2ZcIjpcbiAgICAgICAgICAgIHJldHVybiBQcztcblxuICAgICAgICAgIGNhc2UgXCJldmVyeVwiOlxuICAgICAgICAgICAgcmV0dXJuIEJzO1xuXG4gICAgICAgICAgY2FzZSBcImZpbHRlclwiOlxuICAgICAgICAgICAgcmV0dXJuICRzO1xuXG4gICAgICAgICAgY2FzZSBcImZpbmRcIjpcbiAgICAgICAgICAgIHJldHVybiBqcztcblxuICAgICAgICAgIGNhc2UgXCJmaW5kSW5kZXhcIjpcbiAgICAgICAgICAgIHJldHVybiBUcztcblxuICAgICAgICAgIGNhc2UgXCJmbGF0XCI6XG4gICAgICAgICAgICByZXR1cm4gSXM7XG5cbiAgICAgICAgICBjYXNlIFwiZmxhdE1hcFwiOlxuICAgICAgICAgICAgcmV0dXJuIE1zO1xuXG4gICAgICAgICAgY2FzZSBcImpvaW5cIjpcbiAgICAgICAgICAgIHJldHVybiBEcztcblxuICAgICAgICAgIGNhc2UgXCJwdXNoXCI6XG4gICAgICAgICAgICByZXR1cm4gVnM7XG5cbiAgICAgICAgICBjYXNlIFwicG9wXCI6XG4gICAgICAgICAgICByZXR1cm4gRnM7XG5cbiAgICAgICAgICBjYXNlIFwicmVkdWNlXCI6XG4gICAgICAgICAgICByZXR1cm4gV3M7XG5cbiAgICAgICAgICBjYXNlIFwicmVkdWNlUmlnaHRcIjpcbiAgICAgICAgICAgIHJldHVybiBHcztcblxuICAgICAgICAgIGNhc2UgXCJyZXZlcnNlXCI6XG4gICAgICAgICAgICByZXR1cm4gSHM7XG5cbiAgICAgICAgICBjYXNlIFwic2hpZnRcIjpcbiAgICAgICAgICAgIHJldHVybiBOcztcblxuICAgICAgICAgIGNhc2UgXCJ1bnNoaWZ0XCI6XG4gICAgICAgICAgICByZXR1cm4gS3M7XG5cbiAgICAgICAgICBjYXNlIFwic2xpY2VcIjpcbiAgICAgICAgICAgIHJldHVybiB6cztcblxuICAgICAgICAgIGNhc2UgXCJzcGxpY2VcIjpcbiAgICAgICAgICAgIHJldHVybiBxcztcblxuICAgICAgICAgIGNhc2UgXCJzb21lXCI6XG4gICAgICAgICAgICByZXR1cm4gUXM7XG5cbiAgICAgICAgICBjYXNlIFwic29ydFwiOlxuICAgICAgICAgICAgcmV0dXJuIF9zO1xuXG4gICAgICAgICAgY2FzZSBcImtleXNcIjpcbiAgICAgICAgICAgIHJldHVybiBpcjtcblxuICAgICAgICAgIGNhc2UgXCJ2YWx1ZXNcIjpcbiAgICAgICAgICBjYXNlIFN5bWJvbC5pdGVyYXRvcjpcbiAgICAgICAgICAgIHJldHVybiBucjtcblxuICAgICAgICAgIGNhc2UgXCJlbnRyaWVzXCI6XG4gICAgICAgICAgICByZXR1cm4gb3I7XG4gICAgICAgIH1cbiAgICAgICAgci5vYnNlcnZlKHQsIGUpO1xuICAgICAgICByZXR1cm4gQXMocHModCwgZSwgcykpO1xuICAgIH0sXG4gICAgb3duS2V5cyh0KSB7XG4gICAgICAgIHZhciBlO1xuICAgICAgICBudWxsID09PSAoZSA9IGxzKCkpIHx8IHZvaWQgMCA9PT0gZSA/IHZvaWQgMCA6IGUub2JzZXJ2ZSh0LCBcImxlbmd0aFwiKTtcbiAgICAgICAgcmV0dXJuIFJlZmxlY3Qub3duS2V5cyh0KTtcbiAgICB9XG59O1xuXG5mdW5jdGlvbiBrcyh0LCBlKSB7XG4gICAgdmFyIHM7XG4gICAgY29uc3QgciA9IG1zKHRoaXMpO1xuICAgIGNvbnN0IGkgPSByLm1hcCgoKHMsIHIpID0+IFVzKHQuY2FsbChlLCBBcyhzKSwgciwgdGhpcykpKSk7XG4gICAgbnVsbCA9PT0gKHMgPSBscygpKSB8fCB2b2lkIDAgPT09IHMgPyB2b2lkIDAgOiBzLm9ic2VydmVDb2xsZWN0aW9uKHIpO1xuICAgIHJldHVybiBBcyhpKTtcbn1cblxuZnVuY3Rpb24gQnModCwgZSkge1xuICAgIHZhciBzO1xuICAgIGNvbnN0IHIgPSBtcyh0aGlzKTtcbiAgICBjb25zdCBpID0gci5ldmVyeSgoKHMsIHIpID0+IHQuY2FsbChlLCBBcyhzKSwgciwgdGhpcykpKTtcbiAgICBudWxsID09PSAocyA9IGxzKCkpIHx8IHZvaWQgMCA9PT0gcyA/IHZvaWQgMCA6IHMub2JzZXJ2ZUNvbGxlY3Rpb24ocik7XG4gICAgcmV0dXJuIGk7XG59XG5cbmZ1bmN0aW9uICRzKHQsIGUpIHtcbiAgICB2YXIgcztcbiAgICBjb25zdCByID0gbXModGhpcyk7XG4gICAgY29uc3QgaSA9IHIuZmlsdGVyKCgocywgcikgPT4gVXModC5jYWxsKGUsIEFzKHMpLCByLCB0aGlzKSkpKTtcbiAgICBudWxsID09PSAocyA9IGxzKCkpIHx8IHZvaWQgMCA9PT0gcyA/IHZvaWQgMCA6IHMub2JzZXJ2ZUNvbGxlY3Rpb24ocik7XG4gICAgcmV0dXJuIEFzKGkpO1xufVxuXG5mdW5jdGlvbiBMcyh0KSB7XG4gICAgdmFyIGU7XG4gICAgY29uc3QgcyA9IG1zKHRoaXMpO1xuICAgIGNvbnN0IHIgPSBzLmluY2x1ZGVzKFVzKHQpKTtcbiAgICBudWxsID09PSAoZSA9IGxzKCkpIHx8IHZvaWQgMCA9PT0gZSA/IHZvaWQgMCA6IGUub2JzZXJ2ZUNvbGxlY3Rpb24ocyk7XG4gICAgcmV0dXJuIHI7XG59XG5cbmZ1bmN0aW9uIFJzKHQpIHtcbiAgICB2YXIgZTtcbiAgICBjb25zdCBzID0gbXModGhpcyk7XG4gICAgY29uc3QgciA9IHMuaW5kZXhPZihVcyh0KSk7XG4gICAgbnVsbCA9PT0gKGUgPSBscygpKSB8fCB2b2lkIDAgPT09IGUgPyB2b2lkIDAgOiBlLm9ic2VydmVDb2xsZWN0aW9uKHMpO1xuICAgIHJldHVybiByO1xufVxuXG5mdW5jdGlvbiBQcyh0KSB7XG4gICAgdmFyIGU7XG4gICAgY29uc3QgcyA9IG1zKHRoaXMpO1xuICAgIGNvbnN0IHIgPSBzLmxhc3RJbmRleE9mKFVzKHQpKTtcbiAgICBudWxsID09PSAoZSA9IGxzKCkpIHx8IHZvaWQgMCA9PT0gZSA/IHZvaWQgMCA6IGUub2JzZXJ2ZUNvbGxlY3Rpb24ocyk7XG4gICAgcmV0dXJuIHI7XG59XG5cbmZ1bmN0aW9uIFRzKHQsIGUpIHtcbiAgICB2YXIgcztcbiAgICBjb25zdCByID0gbXModGhpcyk7XG4gICAgY29uc3QgaSA9IHIuZmluZEluZGV4KCgocywgcikgPT4gVXModC5jYWxsKGUsIEFzKHMpLCByLCB0aGlzKSkpKTtcbiAgICBudWxsID09PSAocyA9IGxzKCkpIHx8IHZvaWQgMCA9PT0gcyA/IHZvaWQgMCA6IHMub2JzZXJ2ZUNvbGxlY3Rpb24ocik7XG4gICAgcmV0dXJuIGk7XG59XG5cbmZ1bmN0aW9uIGpzKHQsIGUpIHtcbiAgICB2YXIgcztcbiAgICBjb25zdCByID0gbXModGhpcyk7XG4gICAgY29uc3QgaSA9IHIuZmluZCgoKGUsIHMpID0+IHQoQXMoZSksIHMsIHRoaXMpKSwgZSk7XG4gICAgbnVsbCA9PT0gKHMgPSBscygpKSB8fCB2b2lkIDAgPT09IHMgPyB2b2lkIDAgOiBzLm9ic2VydmVDb2xsZWN0aW9uKHIpO1xuICAgIHJldHVybiBBcyhpKTtcbn1cblxuZnVuY3Rpb24gSXMoKSB7XG4gICAgdmFyIHQ7XG4gICAgY29uc3QgZSA9IG1zKHRoaXMpO1xuICAgIG51bGwgPT09ICh0ID0gbHMoKSkgfHwgdm9pZCAwID09PSB0ID8gdm9pZCAwIDogdC5vYnNlcnZlQ29sbGVjdGlvbihlKTtcbiAgICByZXR1cm4gQXMoZS5mbGF0KCkpO1xufVxuXG5mdW5jdGlvbiBNcyh0LCBlKSB7XG4gICAgdmFyIHM7XG4gICAgY29uc3QgciA9IG1zKHRoaXMpO1xuICAgIG51bGwgPT09IChzID0gbHMoKSkgfHwgdm9pZCAwID09PSBzID8gdm9pZCAwIDogcy5vYnNlcnZlQ29sbGVjdGlvbihyKTtcbiAgICByZXR1cm4geXMoci5mbGF0TWFwKCgocywgcikgPT4gQXModC5jYWxsKGUsIEFzKHMpLCByLCB0aGlzKSkpKSk7XG59XG5cbmZ1bmN0aW9uIERzKHQpIHtcbiAgICB2YXIgZTtcbiAgICBjb25zdCBzID0gbXModGhpcyk7XG4gICAgbnVsbCA9PT0gKGUgPSBscygpKSB8fCB2b2lkIDAgPT09IGUgPyB2b2lkIDAgOiBlLm9ic2VydmVDb2xsZWN0aW9uKHMpO1xuICAgIHJldHVybiBzLmpvaW4odCk7XG59XG5cbmZ1bmN0aW9uIEZzKCkge1xuICAgIHJldHVybiBBcyhtcyh0aGlzKS5wb3AoKSk7XG59XG5cbmZ1bmN0aW9uIFZzKC4uLnQpIHtcbiAgICByZXR1cm4gbXModGhpcykucHVzaCguLi50KTtcbn1cblxuZnVuY3Rpb24gTnMoKSB7XG4gICAgcmV0dXJuIEFzKG1zKHRoaXMpLnNoaWZ0KCkpO1xufVxuXG5mdW5jdGlvbiBLcyguLi50KSB7XG4gICAgcmV0dXJuIG1zKHRoaXMpLnVuc2hpZnQoLi4udCk7XG59XG5cbmZ1bmN0aW9uIHFzKC4uLnQpIHtcbiAgICByZXR1cm4gQXMobXModGhpcykuc3BsaWNlKC4uLnQpKTtcbn1cblxuZnVuY3Rpb24gSHMoLi4udCkge1xuICAgIHZhciBlO1xuICAgIGNvbnN0IHMgPSBtcyh0aGlzKTtcbiAgICBjb25zdCByID0gcy5yZXZlcnNlKCk7XG4gICAgbnVsbCA9PT0gKGUgPSBscygpKSB8fCB2b2lkIDAgPT09IGUgPyB2b2lkIDAgOiBlLm9ic2VydmVDb2xsZWN0aW9uKHMpO1xuICAgIHJldHVybiBBcyhyKTtcbn1cblxuZnVuY3Rpb24gUXModCwgZSkge1xuICAgIHZhciBzO1xuICAgIGNvbnN0IHIgPSBtcyh0aGlzKTtcbiAgICBjb25zdCBpID0gci5zb21lKCgocywgcikgPT4gVXModC5jYWxsKGUsIEFzKHMpLCByLCB0aGlzKSkpKTtcbiAgICBudWxsID09PSAocyA9IGxzKCkpIHx8IHZvaWQgMCA9PT0gcyA/IHZvaWQgMCA6IHMub2JzZXJ2ZUNvbGxlY3Rpb24ocik7XG4gICAgcmV0dXJuIGk7XG59XG5cbmZ1bmN0aW9uIF9zKHQpIHtcbiAgICB2YXIgZTtcbiAgICBjb25zdCBzID0gbXModGhpcyk7XG4gICAgY29uc3QgciA9IHMuc29ydCh0KTtcbiAgICBudWxsID09PSAoZSA9IGxzKCkpIHx8IHZvaWQgMCA9PT0gZSA/IHZvaWQgMCA6IGUub2JzZXJ2ZUNvbGxlY3Rpb24ocyk7XG4gICAgcmV0dXJuIEFzKHIpO1xufVxuXG5mdW5jdGlvbiB6cyh0LCBlKSB7XG4gICAgdmFyIHM7XG4gICAgY29uc3QgciA9IG1zKHRoaXMpO1xuICAgIG51bGwgPT09IChzID0gbHMoKSkgfHwgdm9pZCAwID09PSBzID8gdm9pZCAwIDogcy5vYnNlcnZlQ29sbGVjdGlvbihyKTtcbiAgICByZXR1cm4geXMoci5zbGljZSh0LCBlKSk7XG59XG5cbmZ1bmN0aW9uIFdzKHQsIGUpIHtcbiAgICB2YXIgcztcbiAgICBjb25zdCByID0gbXModGhpcyk7XG4gICAgY29uc3QgaSA9IHIucmVkdWNlKCgoZSwgcywgcikgPT4gdChlLCBBcyhzKSwgciwgdGhpcykpLCBlKTtcbiAgICBudWxsID09PSAocyA9IGxzKCkpIHx8IHZvaWQgMCA9PT0gcyA/IHZvaWQgMCA6IHMub2JzZXJ2ZUNvbGxlY3Rpb24ocik7XG4gICAgcmV0dXJuIEFzKGkpO1xufVxuXG5mdW5jdGlvbiBHcyh0LCBlKSB7XG4gICAgdmFyIHM7XG4gICAgY29uc3QgciA9IG1zKHRoaXMpO1xuICAgIGNvbnN0IGkgPSByLnJlZHVjZVJpZ2h0KCgoZSwgcywgcikgPT4gdChlLCBBcyhzKSwgciwgdGhpcykpLCBlKTtcbiAgICBudWxsID09PSAocyA9IGxzKCkpIHx8IHZvaWQgMCA9PT0gcyA/IHZvaWQgMCA6IHMub2JzZXJ2ZUNvbGxlY3Rpb24ocik7XG4gICAgcmV0dXJuIEFzKGkpO1xufVxuXG5jb25zdCBacyA9IHtcbiAgICBnZXQodCwgZSwgcykge1xuICAgICAgICBpZiAoZSA9PT0gRXMpIHJldHVybiB0O1xuICAgICAgICBjb25zdCByID0gbHMoKTtcbiAgICAgICAgaWYgKCFjcyB8fCB4cyhlKSB8fCBudWxsID09IHIpIHJldHVybiBwcyh0LCBlLCBzKTtcbiAgICAgICAgc3dpdGNoIChlKSB7XG4gICAgICAgICAgY2FzZSBcInNpemVcIjpcbiAgICAgICAgICAgIHIub2JzZXJ2ZSh0LCBcInNpemVcIik7XG4gICAgICAgICAgICByZXR1cm4gdC5zaXplO1xuXG4gICAgICAgICAgY2FzZSBcImNsZWFyXCI6XG4gICAgICAgICAgICByZXR1cm4gc3I7XG5cbiAgICAgICAgICBjYXNlIFwiZGVsZXRlXCI6XG4gICAgICAgICAgICByZXR1cm4gcnI7XG5cbiAgICAgICAgICBjYXNlIFwiZm9yRWFjaFwiOlxuICAgICAgICAgICAgcmV0dXJuIEpzO1xuXG4gICAgICAgICAgY2FzZSBcImFkZFwiOlxuICAgICAgICAgICAgaWYgKHQgaW5zdGFuY2VvZiBTZXQpIHJldHVybiBlcjtcbiAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgY2FzZSBcImdldFwiOlxuICAgICAgICAgICAgaWYgKHQgaW5zdGFuY2VvZiBNYXApIHJldHVybiBZcztcbiAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgY2FzZSBcInNldFwiOlxuICAgICAgICAgICAgaWYgKHQgaW5zdGFuY2VvZiBNYXApIHJldHVybiB0cjtcbiAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgY2FzZSBcImhhc1wiOlxuICAgICAgICAgICAgcmV0dXJuIFhzO1xuXG4gICAgICAgICAgY2FzZSBcImtleXNcIjpcbiAgICAgICAgICAgIHJldHVybiBpcjtcblxuICAgICAgICAgIGNhc2UgXCJ2YWx1ZXNcIjpcbiAgICAgICAgICAgIHJldHVybiBucjtcblxuICAgICAgICAgIGNhc2UgXCJlbnRyaWVzXCI6XG4gICAgICAgICAgICByZXR1cm4gb3I7XG5cbiAgICAgICAgICBjYXNlIFN5bWJvbC5pdGVyYXRvcjpcbiAgICAgICAgICAgIHJldHVybiB0IGluc3RhbmNlb2YgTWFwID8gb3IgOiBucjtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gQXMocHModCwgZSwgcykpO1xuICAgIH1cbn07XG5cbmZ1bmN0aW9uIEpzKHQsIGUpIHtcbiAgICB2YXIgcztcbiAgICBjb25zdCByID0gbXModGhpcyk7XG4gICAgbnVsbCA9PT0gKHMgPSBscygpKSB8fCB2b2lkIDAgPT09IHMgPyB2b2lkIDAgOiBzLm9ic2VydmVDb2xsZWN0aW9uKHIpO1xuICAgIHJldHVybiByLmZvckVhY2goKChzLCByKSA9PiB7XG4gICAgICAgIHQuY2FsbChlLCBBcyhzKSwgQXMociksIHRoaXMpO1xuICAgIH0pKTtcbn1cblxuZnVuY3Rpb24gWHModCkge1xuICAgIHZhciBlO1xuICAgIGNvbnN0IHMgPSBtcyh0aGlzKTtcbiAgICBudWxsID09PSAoZSA9IGxzKCkpIHx8IHZvaWQgMCA9PT0gZSA/IHZvaWQgMCA6IGUub2JzZXJ2ZUNvbGxlY3Rpb24ocyk7XG4gICAgcmV0dXJuIHMuaGFzKFVzKHQpKTtcbn1cblxuZnVuY3Rpb24gWXModCkge1xuICAgIHZhciBlO1xuICAgIGNvbnN0IHMgPSBtcyh0aGlzKTtcbiAgICBudWxsID09PSAoZSA9IGxzKCkpIHx8IHZvaWQgMCA9PT0gZSA/IHZvaWQgMCA6IGUub2JzZXJ2ZUNvbGxlY3Rpb24ocyk7XG4gICAgcmV0dXJuIEFzKHMuZ2V0KFVzKHQpKSk7XG59XG5cbmZ1bmN0aW9uIHRyKHQsIGUpIHtcbiAgICByZXR1cm4gQXMobXModGhpcykuc2V0KFVzKHQpLCBVcyhlKSkpO1xufVxuXG5mdW5jdGlvbiBlcih0KSB7XG4gICAgcmV0dXJuIEFzKG1zKHRoaXMpLmFkZChVcyh0KSkpO1xufVxuXG5mdW5jdGlvbiBzcigpIHtcbiAgICByZXR1cm4gQXMobXModGhpcykuY2xlYXIoKSk7XG59XG5cbmZ1bmN0aW9uIHJyKHQpIHtcbiAgICByZXR1cm4gQXMobXModGhpcykuZGVsZXRlKFVzKHQpKSk7XG59XG5cbmZ1bmN0aW9uIGlyKCkge1xuICAgIHZhciB0O1xuICAgIGNvbnN0IGUgPSBtcyh0aGlzKTtcbiAgICBudWxsID09PSAodCA9IGxzKCkpIHx8IHZvaWQgMCA9PT0gdCA/IHZvaWQgMCA6IHQub2JzZXJ2ZUNvbGxlY3Rpb24oZSk7XG4gICAgY29uc3QgcyA9IGUua2V5cygpO1xuICAgIHJldHVybiB7XG4gICAgICAgIG5leHQoKSB7XG4gICAgICAgICAgICBjb25zdCB0ID0gcy5uZXh0KCk7XG4gICAgICAgICAgICBjb25zdCBlID0gdC52YWx1ZTtcbiAgICAgICAgICAgIGNvbnN0IHIgPSB0LmRvbmU7XG4gICAgICAgICAgICByZXR1cm4gciA/IHtcbiAgICAgICAgICAgICAgICB2YWx1ZTogdm9pZCAwLFxuICAgICAgICAgICAgICAgIGRvbmU6IHJcbiAgICAgICAgICAgIH0gOiB7XG4gICAgICAgICAgICAgICAgdmFsdWU6IEFzKGUpLFxuICAgICAgICAgICAgICAgIGRvbmU6IHJcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0sXG4gICAgICAgIFtTeW1ib2wuaXRlcmF0b3JdKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgIH1cbiAgICB9O1xufVxuXG5mdW5jdGlvbiBucigpIHtcbiAgICB2YXIgdDtcbiAgICBjb25zdCBlID0gbXModGhpcyk7XG4gICAgbnVsbCA9PT0gKHQgPSBscygpKSB8fCB2b2lkIDAgPT09IHQgPyB2b2lkIDAgOiB0Lm9ic2VydmVDb2xsZWN0aW9uKGUpO1xuICAgIGNvbnN0IHMgPSBlLnZhbHVlcygpO1xuICAgIHJldHVybiB7XG4gICAgICAgIG5leHQoKSB7XG4gICAgICAgICAgICBjb25zdCB0ID0gcy5uZXh0KCk7XG4gICAgICAgICAgICBjb25zdCBlID0gdC52YWx1ZTtcbiAgICAgICAgICAgIGNvbnN0IHIgPSB0LmRvbmU7XG4gICAgICAgICAgICByZXR1cm4gciA/IHtcbiAgICAgICAgICAgICAgICB2YWx1ZTogdm9pZCAwLFxuICAgICAgICAgICAgICAgIGRvbmU6IHJcbiAgICAgICAgICAgIH0gOiB7XG4gICAgICAgICAgICAgICAgdmFsdWU6IEFzKGUpLFxuICAgICAgICAgICAgICAgIGRvbmU6IHJcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0sXG4gICAgICAgIFtTeW1ib2wuaXRlcmF0b3JdKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgIH1cbiAgICB9O1xufVxuXG5mdW5jdGlvbiBvcigpIHtcbiAgICB2YXIgdDtcbiAgICBjb25zdCBlID0gbXModGhpcyk7XG4gICAgbnVsbCA9PT0gKHQgPSBscygpKSB8fCB2b2lkIDAgPT09IHQgPyB2b2lkIDAgOiB0Lm9ic2VydmVDb2xsZWN0aW9uKGUpO1xuICAgIGNvbnN0IHMgPSBlLmVudHJpZXMoKTtcbiAgICByZXR1cm4ge1xuICAgICAgICBuZXh0KCkge1xuICAgICAgICAgICAgY29uc3QgdCA9IHMubmV4dCgpO1xuICAgICAgICAgICAgY29uc3QgZSA9IHQudmFsdWU7XG4gICAgICAgICAgICBjb25zdCByID0gdC5kb25lO1xuICAgICAgICAgICAgcmV0dXJuIHIgPyB7XG4gICAgICAgICAgICAgICAgdmFsdWU6IHZvaWQgMCxcbiAgICAgICAgICAgICAgICBkb25lOiByXG4gICAgICAgICAgICB9IDoge1xuICAgICAgICAgICAgICAgIHZhbHVlOiBbIEFzKGVbMF0pLCBBcyhlWzFdKSBdLFxuICAgICAgICAgICAgICAgIGRvbmU6IHJcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0sXG4gICAgICAgIFtTeW1ib2wuaXRlcmF0b3JdKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgIH1cbiAgICB9O1xufVxuXG5jb25zdCBociA9IE9iamVjdC5mcmVlemUoe1xuICAgIGdldFByb3h5OiB5cyxcbiAgICBnZXRSYXc6IG1zLFxuICAgIHdyYXA6IEFzLFxuICAgIHVud3JhcDogVXMsXG4gICAgcmF3S2V5OiBFc1xufSk7XG5cbmNsYXNzIENvbXB1dGVkT2JzZXJ2ZXIge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUsIHMsIHIsIGkpIHtcbiAgICAgICAgdGhpcy5pbnRlcmNlcHRvciA9IHRoaXM7XG4gICAgICAgIHRoaXMudHlwZSA9IDE7XG4gICAgICAgIHRoaXMudiA9IHZvaWQgMDtcbiAgICAgICAgdGhpcy5vdiA9IHZvaWQgMDtcbiAgICAgICAgdGhpcy5pciA9IGZhbHNlO1xuICAgICAgICB0aGlzLkQgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5vID0gdDtcbiAgICAgICAgdGhpcy5nZXQgPSBlO1xuICAgICAgICB0aGlzLnNldCA9IHM7XG4gICAgICAgIHRoaXMudXAgPSByO1xuICAgICAgICB0aGlzLm9MID0gaTtcbiAgICB9XG4gICAgc3RhdGljIGNyZWF0ZSh0LCBlLCBzLCByLCBpKSB7XG4gICAgICAgIGNvbnN0IG4gPSBzLmdldDtcbiAgICAgICAgY29uc3QgbyA9IHMuc2V0O1xuICAgICAgICBjb25zdCBoID0gbmV3IENvbXB1dGVkT2JzZXJ2ZXIodCwgbiwgbywgaSwgcik7XG4gICAgICAgIGNvbnN0IGMgPSAoKSA9PiBoLmdldFZhbHVlKCk7XG4gICAgICAgIGMuZ2V0T2JzZXJ2ZXIgPSAoKSA9PiBoO1xuICAgICAgICB2KHQsIGUsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHMuZW51bWVyYWJsZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGdldDogYyxcbiAgICAgICAgICAgIHNldDogdCA9PiB7XG4gICAgICAgICAgICAgICAgaC5zZXRWYWx1ZSh0LCAwKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBoO1xuICAgIH1cbiAgICBnZXRWYWx1ZSgpIHtcbiAgICAgICAgaWYgKDAgPT09IHRoaXMuc3Vicy5jb3VudCkgcmV0dXJuIHRoaXMuZ2V0LmNhbGwodGhpcy5vLCB0aGlzKTtcbiAgICAgICAgaWYgKHRoaXMuRCkge1xuICAgICAgICAgICAgdGhpcy5jb21wdXRlKCk7XG4gICAgICAgICAgICB0aGlzLkQgPSBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy52O1xuICAgIH1cbiAgICBzZXRWYWx1ZSh0LCBlKSB7XG4gICAgICAgIGlmIChwKHRoaXMuc2V0KSkge1xuICAgICAgICAgICAgaWYgKHQgIT09IHRoaXMudikge1xuICAgICAgICAgICAgICAgIHRoaXMuaXIgPSB0cnVlO1xuICAgICAgICAgICAgICAgIHRoaXMuc2V0LmNhbGwodGhpcy5vLCB0KTtcbiAgICAgICAgICAgICAgICB0aGlzLmlyID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgdGhpcy5ydW4oKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHRocm93IG5ldyBFcnJvcihcIkFVUjAyMjFcIik7XG4gICAgfVxuICAgIGhhbmRsZUNoYW5nZSgpIHtcbiAgICAgICAgdGhpcy5EID0gdHJ1ZTtcbiAgICAgICAgaWYgKHRoaXMuc3Vicy5jb3VudCA+IDApIHRoaXMucnVuKCk7XG4gICAgfVxuICAgIGhhbmRsZUNvbGxlY3Rpb25DaGFuZ2UoKSB7XG4gICAgICAgIHRoaXMuRCA9IHRydWU7XG4gICAgICAgIGlmICh0aGlzLnN1YnMuY291bnQgPiAwKSB0aGlzLnJ1bigpO1xuICAgIH1cbiAgICBzdWJzY3JpYmUodCkge1xuICAgICAgICBpZiAodGhpcy5zdWJzLmFkZCh0KSAmJiAxID09PSB0aGlzLnN1YnMuY291bnQpIHtcbiAgICAgICAgICAgIHRoaXMuY29tcHV0ZSgpO1xuICAgICAgICAgICAgdGhpcy5EID0gZmFsc2U7XG4gICAgICAgIH1cbiAgICB9XG4gICAgdW5zdWJzY3JpYmUodCkge1xuICAgICAgICBpZiAodGhpcy5zdWJzLnJlbW92ZSh0KSAmJiAwID09PSB0aGlzLnN1YnMuY291bnQpIHtcbiAgICAgICAgICAgIHRoaXMuRCA9IHRydWU7XG4gICAgICAgICAgICB0aGlzLm9icy5jbGVhckFsbCgpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGZsdXNoKCkge1xuICAgICAgICBjciA9IHRoaXMub3Y7XG4gICAgICAgIHRoaXMub3YgPSB0aGlzLnY7XG4gICAgICAgIHRoaXMuc3Vicy5ub3RpZnkodGhpcy52LCBjciwgMCk7XG4gICAgfVxuICAgIHJ1bigpIHtcbiAgICAgICAgaWYgKHRoaXMuaXIpIHJldHVybjtcbiAgICAgICAgY29uc3QgdCA9IHRoaXMudjtcbiAgICAgICAgY29uc3QgZSA9IHRoaXMuY29tcHV0ZSgpO1xuICAgICAgICB0aGlzLkQgPSBmYWxzZTtcbiAgICAgICAgaWYgKCFPYmplY3QuaXMoZSwgdCkpIHtcbiAgICAgICAgICAgIHRoaXMub3YgPSB0O1xuICAgICAgICAgICAgdGhpcy5xdWV1ZS5hZGQodGhpcyk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgY29tcHV0ZSgpIHtcbiAgICAgICAgdGhpcy5pciA9IHRydWU7XG4gICAgICAgIHRoaXMub2JzLnZlcnNpb24rKztcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGZzKHRoaXMpO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMudiA9IFVzKHRoaXMuZ2V0LmNhbGwodGhpcy51cCA/IEFzKHRoaXMubykgOiB0aGlzLm8sIHRoaXMpKTtcbiAgICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgICAgIHRoaXMub2JzLmNsZWFyKCk7XG4gICAgICAgICAgICB0aGlzLmlyID0gZmFsc2U7XG4gICAgICAgICAgICBkcyh0aGlzKTtcbiAgICAgICAgfVxuICAgIH1cbn1cblxuRWUoQ29tcHV0ZWRPYnNlcnZlcik7XG5cbnJ0KENvbXB1dGVkT2JzZXJ2ZXIpO1xuXG5jdChDb21wdXRlZE9ic2VydmVyKTtcblxubGV0IGNyO1xuXG5jb25zdCB1ciA9IHIuY3JlYXRlSW50ZXJmYWNlKFwiSURpcnR5Q2hlY2tlclwiLCAodCA9PiB0LnNpbmdsZXRvbihEaXJ0eUNoZWNrZXIpKSk7XG5cbmNvbnN0IGFyID0ge1xuICAgIHRpbWVvdXRzUGVyQ2hlY2s6IDI1LFxuICAgIGRpc2FibGVkOiBmYWxzZSxcbiAgICB0aHJvdzogZmFsc2UsXG4gICAgcmVzZXRUb0RlZmF1bHQoKSB7XG4gICAgICAgIHRoaXMudGltZW91dHNQZXJDaGVjayA9IDY7XG4gICAgICAgIHRoaXMuZGlzYWJsZWQgPSBmYWxzZTtcbiAgICAgICAgdGhpcy50aHJvdyA9IGZhbHNlO1xuICAgIH1cbn07XG5cbmNvbnN0IGxyID0ge1xuICAgIHBlcnNpc3RlbnQ6IHRydWVcbn07XG5cbmNsYXNzIERpcnR5Q2hlY2tlciB7XG4gICAgY29uc3RydWN0b3IodCkge1xuICAgICAgICB0aGlzLnAgPSB0O1xuICAgICAgICB0aGlzLnRyYWNrZWQgPSBbXTtcbiAgICAgICAgdGhpcy5UID0gbnVsbDtcbiAgICAgICAgdGhpcy5qID0gMDtcbiAgICAgICAgdGhpcy5jaGVjayA9ICgpID0+IHtcbiAgICAgICAgICAgIGlmIChhci5kaXNhYmxlZCkgcmV0dXJuO1xuICAgICAgICAgICAgaWYgKCsrdGhpcy5qIDwgYXIudGltZW91dHNQZXJDaGVjaykgcmV0dXJuO1xuICAgICAgICAgICAgdGhpcy5qID0gMDtcbiAgICAgICAgICAgIGNvbnN0IHQgPSB0aGlzLnRyYWNrZWQ7XG4gICAgICAgICAgICBjb25zdCBlID0gdC5sZW5ndGg7XG4gICAgICAgICAgICBsZXQgcztcbiAgICAgICAgICAgIGxldCByID0gMDtcbiAgICAgICAgICAgIGZvciAoO3IgPCBlOyArK3IpIHtcbiAgICAgICAgICAgICAgICBzID0gdFtyXTtcbiAgICAgICAgICAgICAgICBpZiAocy5pc0RpcnR5KCkpIHRoaXMucXVldWUuYWRkKHMpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgIH1cbiAgICBjcmVhdGVQcm9wZXJ0eSh0LCBlKSB7XG4gICAgICAgIGlmIChhci50aHJvdykgdGhyb3cgbmV3IEVycm9yKGBBVVIwMjIyOiR7ZX1gKTtcbiAgICAgICAgcmV0dXJuIG5ldyBEaXJ0eUNoZWNrUHJvcGVydHkodGhpcywgdCwgZSk7XG4gICAgfVxuICAgIGFkZFByb3BlcnR5KHQpIHtcbiAgICAgICAgdGhpcy50cmFja2VkLnB1c2godCk7XG4gICAgICAgIGlmICgxID09PSB0aGlzLnRyYWNrZWQubGVuZ3RoKSB0aGlzLlQgPSB0aGlzLnAudGFza1F1ZXVlLnF1ZXVlVGFzayh0aGlzLmNoZWNrLCBscik7XG4gICAgfVxuICAgIHJlbW92ZVByb3BlcnR5KHQpIHtcbiAgICAgICAgdGhpcy50cmFja2VkLnNwbGljZSh0aGlzLnRyYWNrZWQuaW5kZXhPZih0KSwgMSk7XG4gICAgICAgIGlmICgwID09PSB0aGlzLnRyYWNrZWQubGVuZ3RoKSB7XG4gICAgICAgICAgICB0aGlzLlQuY2FuY2VsKCk7XG4gICAgICAgICAgICB0aGlzLlQgPSBudWxsO1xuICAgICAgICB9XG4gICAgfVxufVxuXG5EaXJ0eUNoZWNrZXIuaW5qZWN0ID0gWyBsIF07XG5cbmN0KERpcnR5Q2hlY2tlcik7XG5cbmNsYXNzIERpcnR5Q2hlY2tQcm9wZXJ0eSB7XG4gICAgY29uc3RydWN0b3IodCwgZSwgcykge1xuICAgICAgICB0aGlzLm9iaiA9IGU7XG4gICAgICAgIHRoaXMua2V5ID0gcztcbiAgICAgICAgdGhpcy50eXBlID0gMDtcbiAgICAgICAgdGhpcy5vdiA9IHZvaWQgMDtcbiAgICAgICAgdGhpcy5JID0gdDtcbiAgICB9XG4gICAgZ2V0VmFsdWUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm9ialt0aGlzLmtleV07XG4gICAgfVxuICAgIHNldFZhbHVlKHQsIGUpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBUcnlpbmcgdG8gc2V0IHZhbHVlIGZvciBwcm9wZXJ0eSAke3RoaXMua2V5fSBpbiBkaXJ0eSBjaGVja2VyYCk7XG4gICAgfVxuICAgIGlzRGlydHkoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm92ICE9PSB0aGlzLm9ialt0aGlzLmtleV07XG4gICAgfVxuICAgIGZsdXNoKCkge1xuICAgICAgICBjb25zdCB0ID0gdGhpcy5vdjtcbiAgICAgICAgY29uc3QgZSA9IHRoaXMuZ2V0VmFsdWUoKTtcbiAgICAgICAgdGhpcy5vdiA9IGU7XG4gICAgICAgIHRoaXMuc3Vicy5ub3RpZnkoZSwgdCwgMCk7XG4gICAgfVxuICAgIHN1YnNjcmliZSh0KSB7XG4gICAgICAgIGlmICh0aGlzLnN1YnMuYWRkKHQpICYmIDEgPT09IHRoaXMuc3Vicy5jb3VudCkge1xuICAgICAgICAgICAgdGhpcy5vdiA9IHRoaXMub2JqW3RoaXMua2V5XTtcbiAgICAgICAgICAgIHRoaXMuSS5hZGRQcm9wZXJ0eSh0aGlzKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICB1bnN1YnNjcmliZSh0KSB7XG4gICAgICAgIGlmICh0aGlzLnN1YnMucmVtb3ZlKHQpICYmIDAgPT09IHRoaXMuc3Vicy5jb3VudCkgdGhpcy5JLnJlbW92ZVByb3BlcnR5KHRoaXMpO1xuICAgIH1cbn1cblxucnQoRGlydHlDaGVja1Byb3BlcnR5KTtcblxuY2xhc3MgUHJpbWl0aXZlT2JzZXJ2ZXIge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUpIHtcbiAgICAgICAgdGhpcy50eXBlID0gMDtcbiAgICAgICAgdGhpcy5vID0gdDtcbiAgICAgICAgdGhpcy5rID0gZTtcbiAgICB9XG4gICAgZ2V0IGRvTm90Q2FjaGUoKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICBnZXRWYWx1ZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMub1t0aGlzLmtdO1xuICAgIH1cbiAgICBzZXRWYWx1ZSgpIHt9XG4gICAgc3Vic2NyaWJlKCkge31cbiAgICB1bnN1YnNjcmliZSgpIHt9XG59XG5cbmNsYXNzIFByb3BlcnR5QWNjZXNzb3Ige1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICB0aGlzLnR5cGUgPSAwO1xuICAgIH1cbiAgICBnZXRWYWx1ZSh0LCBlKSB7XG4gICAgICAgIHJldHVybiB0W2VdO1xuICAgIH1cbiAgICBzZXRWYWx1ZSh0LCBlLCBzLCByKSB7XG4gICAgICAgIHNbcl0gPSB0O1xuICAgIH1cbn1cblxubGV0IGZyO1xuXG5jbGFzcyBTZXR0ZXJPYnNlcnZlciB7XG4gICAgY29uc3RydWN0b3IodCwgZSkge1xuICAgICAgICB0aGlzLnR5cGUgPSAxO1xuICAgICAgICB0aGlzLnYgPSB2b2lkIDA7XG4gICAgICAgIHRoaXMub3YgPSB2b2lkIDA7XG4gICAgICAgIHRoaXMuaU8gPSBmYWxzZTtcbiAgICAgICAgdGhpcy5mID0gMDtcbiAgICAgICAgdGhpcy5vID0gdDtcbiAgICAgICAgdGhpcy5rID0gZTtcbiAgICB9XG4gICAgZ2V0VmFsdWUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnY7XG4gICAgfVxuICAgIHNldFZhbHVlKHQsIGUpIHtcbiAgICAgICAgaWYgKHRoaXMuaU8pIHtcbiAgICAgICAgICAgIGlmIChPYmplY3QuaXModCwgdGhpcy52KSkgcmV0dXJuO1xuICAgICAgICAgICAgdGhpcy5vdiA9IHRoaXMudjtcbiAgICAgICAgICAgIHRoaXMudiA9IHQ7XG4gICAgICAgICAgICB0aGlzLmYgPSBlO1xuICAgICAgICAgICAgdGhpcy5xdWV1ZS5hZGQodGhpcyk7XG4gICAgICAgIH0gZWxzZSB0aGlzLm9bdGhpcy5rXSA9IHQ7XG4gICAgfVxuICAgIHN1YnNjcmliZSh0KSB7XG4gICAgICAgIGlmIChmYWxzZSA9PT0gdGhpcy5pTykgdGhpcy5zdGFydCgpO1xuICAgICAgICB0aGlzLnN1YnMuYWRkKHQpO1xuICAgIH1cbiAgICBmbHVzaCgpIHtcbiAgICAgICAgZnIgPSB0aGlzLm92O1xuICAgICAgICB0aGlzLm92ID0gdGhpcy52O1xuICAgICAgICB0aGlzLnN1YnMubm90aWZ5KHRoaXMudiwgZnIsIHRoaXMuZik7XG4gICAgfVxuICAgIHN0YXJ0KCkge1xuICAgICAgICBpZiAoZmFsc2UgPT09IHRoaXMuaU8pIHtcbiAgICAgICAgICAgIHRoaXMuaU8gPSB0cnVlO1xuICAgICAgICAgICAgdGhpcy52ID0gdGhpcy5vW3RoaXMua107XG4gICAgICAgICAgICB2KHRoaXMubywgdGhpcy5rLCB7XG4gICAgICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICAgICAgZ2V0OiAoKSA9PiB0aGlzLmdldFZhbHVlKCksXG4gICAgICAgICAgICAgICAgc2V0OiB0ID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXRWYWx1ZSh0LCAwKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgc3RvcCgpIHtcbiAgICAgICAgaWYgKHRoaXMuaU8pIHtcbiAgICAgICAgICAgIHYodGhpcy5vLCB0aGlzLmssIHtcbiAgICAgICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICB2YWx1ZTogdGhpcy52XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHRoaXMuaU8gPSBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG59XG5cbmNsYXNzIFNldHRlck5vdGlmaWVyIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlLCBzLCByKSB7XG4gICAgICAgIHRoaXMudHlwZSA9IDE7XG4gICAgICAgIHRoaXMudiA9IHZvaWQgMDtcbiAgICAgICAgdGhpcy5vdiA9IHZvaWQgMDtcbiAgICAgICAgdGhpcy5mID0gMDtcbiAgICAgICAgdGhpcy5vID0gdDtcbiAgICAgICAgdGhpcy5TID0gcztcbiAgICAgICAgdGhpcy5ocyA9IHAocyk7XG4gICAgICAgIGNvbnN0IGkgPSB0W2VdO1xuICAgICAgICB0aGlzLmNiID0gcChpKSA/IGkgOiB2b2lkIDA7XG4gICAgICAgIHRoaXMudiA9IHI7XG4gICAgfVxuICAgIGdldFZhbHVlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy52O1xuICAgIH1cbiAgICBzZXRWYWx1ZSh0LCBlKSB7XG4gICAgICAgIHZhciBzO1xuICAgICAgICBpZiAodGhpcy5ocykgdCA9IHRoaXMuUyh0LCBudWxsKTtcbiAgICAgICAgaWYgKCFPYmplY3QuaXModCwgdGhpcy52KSkge1xuICAgICAgICAgICAgdGhpcy5vdiA9IHRoaXMudjtcbiAgICAgICAgICAgIHRoaXMudiA9IHQ7XG4gICAgICAgICAgICB0aGlzLmYgPSBlO1xuICAgICAgICAgICAgbnVsbCA9PT0gKHMgPSB0aGlzLmNiKSB8fCB2b2lkIDAgPT09IHMgPyB2b2lkIDAgOiBzLmNhbGwodGhpcy5vLCB0aGlzLnYsIHRoaXMub3YsIGUpO1xuICAgICAgICAgICAgdGhpcy5xdWV1ZS5hZGQodGhpcyk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZmx1c2goKSB7XG4gICAgICAgIGZyID0gdGhpcy5vdjtcbiAgICAgICAgdGhpcy5vdiA9IHRoaXMudjtcbiAgICAgICAgdGhpcy5zdWJzLm5vdGlmeSh0aGlzLnYsIGZyLCB0aGlzLmYpO1xuICAgIH1cbn1cblxucnQoU2V0dGVyT2JzZXJ2ZXIpO1xuXG5ydChTZXR0ZXJOb3RpZmllcik7XG5cbmN0KFNldHRlck9ic2VydmVyKTtcblxuY3QoU2V0dGVyTm90aWZpZXIpO1xuXG5jb25zdCBkciA9IG5ldyBQcm9wZXJ0eUFjY2Vzc29yO1xuXG5jb25zdCB2ciA9IHIuY3JlYXRlSW50ZXJmYWNlKFwiSU9ic2VydmVyTG9jYXRvclwiLCAodCA9PiB0LnNpbmdsZXRvbihPYnNlcnZlckxvY2F0b3IpKSk7XG5cbmNvbnN0IHByID0gci5jcmVhdGVJbnRlcmZhY2UoXCJJTm9kZU9ic2VydmVyTG9jYXRvclwiLCAodCA9PiB0LmNhY2hlZENhbGxiYWNrKCh0ID0+IHtcbiAgICB0LmdldEFsbChmKS5mb3JFYWNoKCh0ID0+IHtcbiAgICAgICAgdC5lcnJvcihcIlVzaW5nIGRlZmF1bHQgSU5vZGVPYnNlcnZlckxvY2F0b3IgaW1wbGVtZW50YXRpb24uIFdpbGwgbm90IGJlIGFibGUgdG8gb2JzZXJ2ZSBub2RlcyAoSFRNTCBldGMuLi4pLlwiKTtcbiAgICB9KSk7XG4gICAgcmV0dXJuIG5ldyBEZWZhdWx0Tm9kZU9ic2VydmVyTG9jYXRvcjtcbn0pKSkpO1xuXG5jbGFzcyBEZWZhdWx0Tm9kZU9ic2VydmVyTG9jYXRvciB7XG4gICAgaGFuZGxlcygpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBnZXRPYnNlcnZlcigpIHtcbiAgICAgICAgcmV0dXJuIGRyO1xuICAgIH1cbiAgICBnZXRBY2Nlc3NvcigpIHtcbiAgICAgICAgcmV0dXJuIGRyO1xuICAgIH1cbn1cblxuY2xhc3MgT2JzZXJ2ZXJMb2NhdG9yIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlKSB7XG4gICAgICAgIHRoaXMuSSA9IHQ7XG4gICAgICAgIHRoaXMuTSA9IGU7XG4gICAgICAgIHRoaXMuRiA9IFtdO1xuICAgIH1cbiAgICBhZGRBZGFwdGVyKHQpIHtcbiAgICAgICAgdGhpcy5GLnB1c2godCk7XG4gICAgfVxuICAgIGdldE9ic2VydmVyKHQsIGUpIHtcbiAgICAgICAgdmFyIHMsIHI7XG4gICAgICAgIHJldHVybiBudWxsICE9PSAociA9IG51bGwgPT09IChzID0gdC4kb2JzZXJ2ZXJzKSB8fCB2b2lkIDAgPT09IHMgPyB2b2lkIDAgOiBzW2VdKSAmJiB2b2lkIDAgIT09IHIgPyByIDogdGhpcy5WKHQsIGUsIHRoaXMuY3JlYXRlT2JzZXJ2ZXIodCwgZSkpO1xuICAgIH1cbiAgICBnZXRBY2Nlc3Nvcih0LCBlKSB7XG4gICAgICAgIHZhciBzO1xuICAgICAgICBjb25zdCByID0gbnVsbCA9PT0gKHMgPSB0LiRvYnNlcnZlcnMpIHx8IHZvaWQgMCA9PT0gcyA/IHZvaWQgMCA6IHNbZV07XG4gICAgICAgIGlmICh2b2lkIDAgIT09IHIpIHJldHVybiByO1xuICAgICAgICBpZiAodGhpcy5NLmhhbmRsZXModCwgZSwgdGhpcykpIHJldHVybiB0aGlzLk0uZ2V0QWNjZXNzb3IodCwgZSwgdGhpcyk7XG4gICAgICAgIHJldHVybiBkcjtcbiAgICB9XG4gICAgZ2V0QXJyYXlPYnNlcnZlcih0KSB7XG4gICAgICAgIHJldHVybiBqdCh0KTtcbiAgICB9XG4gICAgZ2V0TWFwT2JzZXJ2ZXIodCkge1xuICAgICAgICByZXR1cm4gdWUodCk7XG4gICAgfVxuICAgIGdldFNldE9ic2VydmVyKHQpIHtcbiAgICAgICAgcmV0dXJuIFp0KHQpO1xuICAgIH1cbiAgICBjcmVhdGVPYnNlcnZlcih0LCBlKSB7XG4gICAgICAgIHZhciBzLCByLCBpLCBuO1xuICAgICAgICBpZiAoISh0IGluc3RhbmNlb2YgT2JqZWN0KSkgcmV0dXJuIG5ldyBQcmltaXRpdmVPYnNlcnZlcih0LCBlKTtcbiAgICAgICAgaWYgKHRoaXMuTS5oYW5kbGVzKHQsIGUsIHRoaXMpKSByZXR1cm4gdGhpcy5NLmdldE9ic2VydmVyKHQsIGUsIHRoaXMpO1xuICAgICAgICBzd2l0Y2ggKGUpIHtcbiAgICAgICAgICBjYXNlIFwibGVuZ3RoXCI6XG4gICAgICAgICAgICBpZiAodCBpbnN0YW5jZW9mIEFycmF5KSByZXR1cm4ganQodCkuZ2V0TGVuZ3RoT2JzZXJ2ZXIoKTtcbiAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgY2FzZSBcInNpemVcIjpcbiAgICAgICAgICAgIGlmICh0IGluc3RhbmNlb2YgTWFwKSByZXR1cm4gdWUodCkuZ2V0TGVuZ3RoT2JzZXJ2ZXIoKTsgZWxzZSBpZiAodCBpbnN0YW5jZW9mIFNldCkgcmV0dXJuIFp0KHQpLmdldExlbmd0aE9ic2VydmVyKCk7XG4gICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICBpZiAodCBpbnN0YW5jZW9mIEFycmF5ICYmIGEoZSkpIHJldHVybiBqdCh0KS5nZXRJbmRleE9ic2VydmVyKE51bWJlcihlKSk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICBsZXQgbyA9IGJyKHQsIGUpO1xuICAgICAgICBpZiAodm9pZCAwID09PSBvKSB7XG4gICAgICAgICAgICBsZXQgcyA9IHdyKHQpO1xuICAgICAgICAgICAgd2hpbGUgKG51bGwgIT09IHMpIHtcbiAgICAgICAgICAgICAgICBvID0gYnIocywgZSk7XG4gICAgICAgICAgICAgICAgaWYgKHZvaWQgMCA9PT0gbykgcyA9IHdyKHMpOyBlbHNlIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmICh2b2lkIDAgIT09IG8gJiYgIWQuY2FsbChvLCBcInZhbHVlXCIpKSB7XG4gICAgICAgICAgICBsZXQgaCA9IHRoaXMuTih0LCBlLCBvKTtcbiAgICAgICAgICAgIGlmIChudWxsID09IGgpIGggPSBudWxsID09PSAobiA9IG51bGwgIT09IChyID0gbnVsbCA9PT0gKHMgPSBvLmdldCkgfHwgdm9pZCAwID09PSBzID8gdm9pZCAwIDogcy5nZXRPYnNlcnZlcikgJiYgdm9pZCAwICE9PSByID8gciA6IG51bGwgPT09IChpID0gby5zZXQpIHx8IHZvaWQgMCA9PT0gaSA/IHZvaWQgMCA6IGkuZ2V0T2JzZXJ2ZXIpIHx8IHZvaWQgMCA9PT0gbiA/IHZvaWQgMCA6IG4odCwgdGhpcyk7XG4gICAgICAgICAgICByZXR1cm4gbnVsbCA9PSBoID8gby5jb25maWd1cmFibGUgPyBDb21wdXRlZE9ic2VydmVyLmNyZWF0ZSh0LCBlLCBvLCB0aGlzLCB0cnVlKSA6IHRoaXMuSS5jcmVhdGVQcm9wZXJ0eSh0LCBlKSA6IGg7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5ldyBTZXR0ZXJPYnNlcnZlcih0LCBlKTtcbiAgICB9XG4gICAgTih0LCBlLCBzKSB7XG4gICAgICAgIGlmICh0aGlzLkYubGVuZ3RoID4gMCkgZm9yIChjb25zdCByIG9mIHRoaXMuRikge1xuICAgICAgICAgICAgY29uc3QgaSA9IHIuZ2V0T2JzZXJ2ZXIodCwgZSwgcywgdGhpcyk7XG4gICAgICAgICAgICBpZiAobnVsbCAhPSBpKSByZXR1cm4gaTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgVih0LCBlLCBzKSB7XG4gICAgICAgIGlmICh0cnVlID09PSBzLmRvTm90Q2FjaGUpIHJldHVybiBzO1xuICAgICAgICBpZiAodm9pZCAwID09PSB0LiRvYnNlcnZlcnMpIHtcbiAgICAgICAgICAgIHYodCwgXCIkb2JzZXJ2ZXJzXCIsIHtcbiAgICAgICAgICAgICAgICB2YWx1ZToge1xuICAgICAgICAgICAgICAgICAgICBbZV06IHNcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBzO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0LiRvYnNlcnZlcnNbZV0gPSBzO1xuICAgIH1cbn1cblxuT2JzZXJ2ZXJMb2NhdG9yLmluamVjdCA9IFsgdXIsIHByIF07XG5cbmZ1bmN0aW9uIGdyKHQpIHtcbiAgICBsZXQgZTtcbiAgICBpZiAodCBpbnN0YW5jZW9mIEFycmF5KSBlID0ganQodCk7IGVsc2UgaWYgKHQgaW5zdGFuY2VvZiBNYXApIGUgPSB1ZSh0KTsgZWxzZSBpZiAodCBpbnN0YW5jZW9mIFNldCkgZSA9IFp0KHQpO1xuICAgIHJldHVybiBlO1xufVxuXG5jb25zdCB3ciA9IE9iamVjdC5nZXRQcm90b3R5cGVPZjtcblxuY29uc3QgYnIgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yO1xuXG5jb25zdCBFciA9IHIuY3JlYXRlSW50ZXJmYWNlKFwiSU9ic2VydmF0aW9uXCIsICh0ID0+IHQuc2luZ2xldG9uKE9ic2VydmF0aW9uKSkpO1xuXG5jbGFzcyBPYnNlcnZhdGlvbiB7XG4gICAgY29uc3RydWN0b3IodCkge1xuICAgICAgICB0aGlzLm9MID0gdDtcbiAgICB9XG4gICAgc3RhdGljIGdldCBpbmplY3QoKSB7XG4gICAgICAgIHJldHVybiBbIHZyIF07XG4gICAgfVxuICAgIHJ1bih0KSB7XG4gICAgICAgIGNvbnN0IGUgPSBuZXcgRWZmZWN0KHRoaXMub0wsIHQpO1xuICAgICAgICBlLnJ1bigpO1xuICAgICAgICByZXR1cm4gZTtcbiAgICB9XG59XG5cbmNsYXNzIEVmZmVjdCB7XG4gICAgY29uc3RydWN0b3IodCwgZSkge1xuICAgICAgICB0aGlzLm9MID0gdDtcbiAgICAgICAgdGhpcy5mbiA9IGU7XG4gICAgICAgIHRoaXMuaW50ZXJjZXB0b3IgPSB0aGlzO1xuICAgICAgICB0aGlzLm1heFJ1bkNvdW50ID0gMTA7XG4gICAgICAgIHRoaXMucXVldWVkID0gZmFsc2U7XG4gICAgICAgIHRoaXMucnVubmluZyA9IGZhbHNlO1xuICAgICAgICB0aGlzLnJ1bkNvdW50ID0gMDtcbiAgICAgICAgdGhpcy5zdG9wcGVkID0gZmFsc2U7XG4gICAgfVxuICAgIGhhbmRsZUNoYW5nZSgpIHtcbiAgICAgICAgdGhpcy5xdWV1ZWQgPSB0cnVlO1xuICAgICAgICB0aGlzLnJ1bigpO1xuICAgIH1cbiAgICBoYW5kbGVDb2xsZWN0aW9uQ2hhbmdlKCkge1xuICAgICAgICB0aGlzLnF1ZXVlZCA9IHRydWU7XG4gICAgICAgIHRoaXMucnVuKCk7XG4gICAgfVxuICAgIHJ1bigpIHtcbiAgICAgICAgaWYgKHRoaXMuc3RvcHBlZCkgdGhyb3cgbmV3IEVycm9yKFwiQVVSMDIyNVwiKTtcbiAgICAgICAgaWYgKHRoaXMucnVubmluZykgcmV0dXJuO1xuICAgICAgICArK3RoaXMucnVuQ291bnQ7XG4gICAgICAgIHRoaXMucnVubmluZyA9IHRydWU7XG4gICAgICAgIHRoaXMucXVldWVkID0gZmFsc2U7XG4gICAgICAgICsrdGhpcy5vYnMudmVyc2lvbjtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGZzKHRoaXMpO1xuICAgICAgICAgICAgdGhpcy5mbih0aGlzKTtcbiAgICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgICAgIHRoaXMub2JzLmNsZWFyKCk7XG4gICAgICAgICAgICB0aGlzLnJ1bm5pbmcgPSBmYWxzZTtcbiAgICAgICAgICAgIGRzKHRoaXMpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLnF1ZXVlZCkge1xuICAgICAgICAgICAgaWYgKHRoaXMucnVuQ291bnQgPiB0aGlzLm1heFJ1bkNvdW50KSB7XG4gICAgICAgICAgICAgICAgdGhpcy5ydW5Db3VudCA9IDA7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBBVVIwMjI2YCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnJ1bigpO1xuICAgICAgICB9IGVsc2UgdGhpcy5ydW5Db3VudCA9IDA7XG4gICAgfVxuICAgIHN0b3AoKSB7XG4gICAgICAgIHRoaXMuc3RvcHBlZCA9IHRydWU7XG4gICAgICAgIHRoaXMub2JzLmNsZWFyQWxsKCk7XG4gICAgfVxufVxuXG5FZShFZmZlY3QpO1xuXG5mdW5jdGlvbiBBcih0KSB7XG4gICAgaWYgKHZvaWQgMCA9PT0gdC4kb2JzZXJ2ZXJzKSB2KHQsIFwiJG9ic2VydmVyc1wiLCB7XG4gICAgICAgIHZhbHVlOiB7fVxuICAgIH0pO1xuICAgIHJldHVybiB0LiRvYnNlcnZlcnM7XG59XG5cbmNvbnN0IHlyID0ge307XG5cbmZ1bmN0aW9uIG1yKHQsIGUsIHMpIHtcbiAgICBpZiAobnVsbCA9PSBlKSByZXR1cm4gKGUsIHMsIGkpID0+IHIoZSwgcywgaSwgdCk7XG4gICAgcmV0dXJuIHIodCwgZSwgcyk7XG4gICAgZnVuY3Rpb24gcih0LCBlLCBzLCByKSB7XG4gICAgICAgIHZhciBpO1xuICAgICAgICBjb25zdCBuID0gdm9pZCAwID09PSBlO1xuICAgICAgICByID0gXCJvYmplY3RcIiAhPT0gdHlwZW9mIHIgPyB7XG4gICAgICAgICAgICBuYW1lOiByXG4gICAgICAgIH0gOiByIHx8IHt9O1xuICAgICAgICBpZiAobikgZSA9IHIubmFtZTtcbiAgICAgICAgaWYgKG51bGwgPT0gZSB8fCBcIlwiID09PSBlKSB0aHJvdyBuZXcgRXJyb3IoXCJBVVIwMjI0XCIpO1xuICAgICAgICBjb25zdCBvID0gci5jYWxsYmFjayB8fCBgJHtTdHJpbmcoZSl9Q2hhbmdlZGA7XG4gICAgICAgIGxldCBoID0geXI7XG4gICAgICAgIGlmIChzKSB7XG4gICAgICAgICAgICBkZWxldGUgcy52YWx1ZTtcbiAgICAgICAgICAgIGRlbGV0ZSBzLndyaXRhYmxlO1xuICAgICAgICAgICAgaCA9IG51bGwgPT09IChpID0gcy5pbml0aWFsaXplcikgfHwgdm9pZCAwID09PSBpID8gdm9pZCAwIDogaS5jYWxsKHMpO1xuICAgICAgICAgICAgZGVsZXRlIHMuaW5pdGlhbGl6ZXI7XG4gICAgICAgIH0gZWxzZSBzID0ge1xuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgICAgIH07XG4gICAgICAgIGlmICghKFwiZW51bWVyYWJsZVwiIGluIHMpKSBzLmVudW1lcmFibGUgPSB0cnVlO1xuICAgICAgICBjb25zdCBjID0gci5zZXQ7XG4gICAgICAgIHMuZ2V0ID0gZnVuY3Rpb24gdCgpIHtcbiAgICAgICAgICAgIHZhciBzO1xuICAgICAgICAgICAgY29uc3QgciA9IFVyKHRoaXMsIGUsIG8sIGgsIGMpO1xuICAgICAgICAgICAgbnVsbCA9PT0gKHMgPSBscygpKSB8fCB2b2lkIDAgPT09IHMgPyB2b2lkIDAgOiBzLnN1YnNjcmliZVRvKHIpO1xuICAgICAgICAgICAgcmV0dXJuIHIuZ2V0VmFsdWUoKTtcbiAgICAgICAgfTtcbiAgICAgICAgcy5zZXQgPSBmdW5jdGlvbiB0KHMpIHtcbiAgICAgICAgICAgIFVyKHRoaXMsIGUsIG8sIGgsIGMpLnNldFZhbHVlKHMsIDApO1xuICAgICAgICB9O1xuICAgICAgICBzLmdldC5nZXRPYnNlcnZlciA9IGZ1bmN0aW9uIHQocykge1xuICAgICAgICAgICAgcmV0dXJuIFVyKHMsIGUsIG8sIGgsIGMpO1xuICAgICAgICB9O1xuICAgICAgICBpZiAobikgdih0LnByb3RvdHlwZSwgZSwgcyk7IGVsc2UgcmV0dXJuIHM7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBVcih0LCBlLCBzLCByLCBpKSB7XG4gICAgY29uc3QgbiA9IEFyKHQpO1xuICAgIGxldCBvID0gbltlXTtcbiAgICBpZiAobnVsbCA9PSBvKSB7XG4gICAgICAgIG8gPSBuZXcgU2V0dGVyTm90aWZpZXIodCwgcywgaSwgciA9PT0geXIgPyB2b2lkIDAgOiByKTtcbiAgICAgICAgbltlXSA9IG87XG4gICAgfVxuICAgIHJldHVybiBvO1xufVxuXG5leHBvcnQgeyBVZSBhcyBBY2Nlc3MsIEFjY2Vzc0tleWVkRXhwcmVzc2lvbiwgQWNjZXNzTWVtYmVyRXhwcmVzc2lvbiwgQWNjZXNzU2NvcGVFeHByZXNzaW9uLCBBY2Nlc3NUaGlzRXhwcmVzc2lvbiwgWCBhcyBBY2Nlc3NvclR5cGUsIEFycmF5QmluZGluZ1BhdHRlcm4sIEFycmF5SW5kZXhPYnNlcnZlciwgQXJyYXlMaXRlcmFsRXhwcmVzc2lvbiwgQXJyYXlPYnNlcnZlciwgQXNzaWduRXhwcmVzc2lvbiwgQmluYXJ5RXhwcmVzc2lvbiwgVCBhcyBCaW5kaW5nQmVoYXZpb3IsIEJpbmRpbmdCZWhhdmlvckRlZmluaXRpb24sIEJpbmRpbmdCZWhhdmlvckV4cHJlc3Npb24sIEJpbmRpbmdCZWhhdmlvckZhY3RvcnksICQgYXMgQmluZGluZ0JlaGF2aW9yU3RyYXRlZ3ksIEJpbmRpbmdDb250ZXh0LCBCaW5kaW5nSWRlbnRpZmllciwgQmluZGluZ0ludGVyY2VwdG9yLCBCaW5kaW5nTWVkaWF0b3IsIHogYXMgQmluZGluZ01vZGUsIEJpbmRpbmdPYnNlcnZlclJlY29yZCwgQ2FsbEZ1bmN0aW9uRXhwcmVzc2lvbiwgQ2FsbE1lbWJlckV4cHJlc3Npb24sIENhbGxTY29wZUV4cHJlc3Npb24sIHllIGFzIENoYXIsIEogYXMgQ29sbGVjdGlvbktpbmQsIENvbGxlY3Rpb25MZW5ndGhPYnNlcnZlciwgQ29sbGVjdGlvblNpemVPYnNlcnZlciwgQ29tcHV0ZWRPYnNlcnZlciwgQ29uZGl0aW9uYWxFeHByZXNzaW9uLCB2cyBhcyBDb25uZWN0YWJsZVN3aXRjaGVyLCBDdXN0b21FeHByZXNzaW9uLCBaIGFzIERlbGVnYXRpb25TdHJhdGVneSwgRGVzdHJ1Y3R1cmluZ0Fzc2lnbm1lbnRFeHByZXNzaW9uLCBEZXN0cnVjdHVyaW5nQXNzaWdubWVudFJlc3RFeHByZXNzaW9uLCBEZXN0cnVjdHVyaW5nQXNzaWdubWVudFNpbmdsZUV4cHJlc3Npb24sIERpcnR5Q2hlY2tQcm9wZXJ0eSwgYXIgYXMgRGlydHlDaGVja1NldHRpbmdzLCBGIGFzIEV4cHJlc3Npb25LaW5kLCBSZSBhcyBFeHByZXNzaW9uVHlwZSwgRmx1c2hRdWV1ZSwgRm9yT2ZTdGF0ZW1lbnQsIEh0bWxMaXRlcmFsRXhwcmVzc2lvbiwgXyBhcyBJQ29lcmNpb25Db25maWd1cmF0aW9uLCB1ciBhcyBJRGlydHlDaGVja2VyLCBBZSBhcyBJRXhwcmVzc2lvblBhcnNlciwgcHIgYXMgSU5vZGVPYnNlcnZlckxvY2F0b3IsIEVyIGFzIElPYnNlcnZhdGlvbiwgdnIgYXMgSU9ic2VydmVyTG9jYXRvciwgQiBhcyBJU2lnbmFsZXIsIEludGVycG9sYXRpb24sIFcgYXMgTGlmZWN5Y2xlRmxhZ3MsIE1hcE9ic2VydmVyLCBPYmplY3RCaW5kaW5nUGF0dGVybiwgT2JqZWN0TGl0ZXJhbEV4cHJlc3Npb24sIE9ic2VydmF0aW9uLCBPYnNlcnZlckxvY2F0b3IsIE92ZXJyaWRlQ29udGV4dCwgUGFyc2VyU3RhdGUsIHhlIGFzIFByZWNlZGVuY2UsIFByaW1pdGl2ZUxpdGVyYWxFeHByZXNzaW9uLCBQcmltaXRpdmVPYnNlcnZlciwgUHJvcGVydHlBY2Nlc3NvciwgaHIgYXMgUHJveHlPYnNlcnZhYmxlLCBTY29wZSwgU2V0T2JzZXJ2ZXIsIFNldHRlck9ic2VydmVyLCBTdWJzY3JpYmVyUmVjb3JkLCBUYWdnZWRUZW1wbGF0ZUV4cHJlc3Npb24sIFRlbXBsYXRlRXhwcmVzc2lvbiwgVW5hcnlFeHByZXNzaW9uLCBEIGFzIFZhbHVlQ29udmVydGVyLCBWYWx1ZUNvbnZlcnRlckRlZmluaXRpb24sIFZhbHVlQ29udmVydGVyRXhwcmVzc2lvbiwgTyBhcyBhbGlhcywgSXQgYXMgYXBwbHlNdXRhdGlvbnNUb0luZGljZXMsIEwgYXMgYmluZGluZ0JlaGF2aW9yLCBldCBhcyBjbG9uZUluZGV4TWFwLCBFZSBhcyBjb25uZWN0YWJsZSwgWSBhcyBjb3B5SW5kZXhNYXAsIHR0IGFzIGNyZWF0ZUluZGV4TWFwLCBUdCBhcyBkaXNhYmxlQXJyYXlPYnNlcnZhdGlvbiwgY2UgYXMgZGlzYWJsZU1hcE9ic2VydmF0aW9uLCBHdCBhcyBkaXNhYmxlU2V0T2JzZXJ2YXRpb24sIFB0IGFzIGVuYWJsZUFycmF5T2JzZXJ2YXRpb24sIGhlIGFzIGVuYWJsZU1hcE9ic2VydmF0aW9uLCBXdCBhcyBlbmFibGVTZXRPYnNlcnZhdGlvbiwgZ3IgYXMgZ2V0Q29sbGVjdGlvbk9ic2VydmVyLCBzdCBhcyBpc0luZGV4TWFwLCBtciBhcyBvYnNlcnZhYmxlLCBqZSBhcyBwYXJzZSwgVGUgYXMgcGFyc2VFeHByZXNzaW9uLCBDIGFzIHJlZ2lzdGVyQWxpYXNlcywgcnQgYXMgc3Vic2NyaWJlckNvbGxlY3Rpb24sIE10IGFzIHN5bmNocm9uaXplSW5kaWNlcywgaiBhcyB2YWx1ZUNvbnZlcnRlciwgY3QgYXMgd2l0aEZsdXNoUXVldWUgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluZGV4LmpzLm1hcFxuIiwiaW1wb3J0IHsgQ3VzdG9tRWxlbWVudCB9IGZyb20gXCJhdXJlbGlhXCI7XG5pbXBvcnQgeyBpc0ZpcmVmb3ggfSBmcm9tIFwiLi4vc2hhcmVkL2VudlwiO1xuZXhwb3J0IGZ1bmN0aW9uIGluc3RhbGxTY3JpcHQoZm4pIHtcbiAgICBjb25zdCBzb3VyY2UgPSAnOygnICsgZm4udG9TdHJpbmcoKSArICcpKHdpbmRvdywgKSc7XG4gICAgaWYgKGlzRmlyZWZveCkge1xuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tZXZhbFxuICAgICAgICB3aW5kb3cuZXZhbChzb3VyY2UpOyAvLyBpbiBGaXJlZm94LCB0aGlzIGV2YWx1YXRlcyBvbiB0aGUgY29udGVudCB3aW5kb3dcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIGNvbnN0IHNjcmlwdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NjcmlwdCcpO1xuICAgICAgICBzY3JpcHQudGV4dENvbnRlbnQgPSBzb3VyY2U7XG4gICAgICAgIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5hcHBlbmRDaGlsZChzY3JpcHQpO1xuICAgICAgICBzY3JpcHQucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChzY3JpcHQpO1xuICAgIH1cbn1cbmV4cG9ydCBmdW5jdGlvbiBnZXRBdXJlbGlhSW5zdGFuY2Uod2luKSB7XG4gICAgY29uc3QgYWxsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnKicpO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgYWxsLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGNvbnN0IGF1cmVsaWEgPSBhbGxbaV0uJGF1cmVsaWE7XG4gICAgICAgIGlmIChhdXJlbGlhKSB7XG4gICAgICAgICAgICByZXR1cm4gYXVyZWxpYTtcbiAgICAgICAgfVxuICAgIH1cbn1cbmV4cG9ydCBmdW5jdGlvbiBnZXRDdXN0b21FbGVtZW50SW5mbyhlbGVtZW50KSB7XG4gICAgcmV0dXJuIEN1c3RvbUVsZW1lbnQuZm9yKGVsZW1lbnQpO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGluc3RhbGwod2luKSB7XG4gICAgbGV0IG5leHREZWJ1Z0lkID0gMDtcbiAgICBsZXQgZGVidWdWYWx1ZUxvb2t1cCA9IHt9O1xuICAgIGNvbnN0IGhvb2tzID0ge1xuICAgICAgICBBdXJlbGlhOiB1bmRlZmluZWQsXG4gICAgICAgIGN1cnJlbnRFbGVtZW50OiB1bmRlZmluZWQsXG4gICAgICAgIGN1cnJlbnRBdHRyaWJ1dGVzOiBbXSxcbiAgICAgICAgZ2V0QWxsSW5mbzogKHJvb3QpID0+IHtcbiAgICAgICAgICAgIHJvb3QgPSByb290ID8/IGRvY3VtZW50LmJvZHk7XG4gICAgICAgICAgICByZXR1cm4gW2hvb2tzLmdldEN1c3RvbUVsZW1lbnRJbmZvKHJvb3QsIGZhbHNlKSwgLi4uQXJyYXkuZnJvbShyb290LmNoaWxkcmVuKS5mbGF0TWFwKHkgPT4gaG9va3MuZ2V0QWxsSW5mbyh5KSldLmZpbHRlcih4ID0+IHgpO1xuICAgICAgICB9LFxuICAgICAgICB1cGRhdGVWYWx1ZXM6IChpbmZvLCBwcm9wZXJ0eSkgPT4ge1xuICAgICAgICAgICAgaWYgKCFob29rcy5jdXJyZW50RWxlbWVudCAmJiAhaG9va3MuY3VycmVudEF0dHJpYnV0ZXMubGVuZ3RoKVxuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIGNvbnN0IGN1cnJlbnRJbmZvID0gaG9va3MuY3VycmVudEVsZW1lbnQ/LmRlZmluaXRpb24ua2V5ID09PSBpbmZvLmtleSA/IGhvb2tzLmN1cnJlbnRFbGVtZW50IDogaG9va3MuY3VycmVudEF0dHJpYnV0ZXMuZmluZCh5ID0+IHkuZGVmaW5pdGlvbi5rZXkgPT09IGluZm8ua2V5KTtcbiAgICAgICAgICAgIGluZm8uYmluZGFibGVzLmZvckVhY2goeCA9PiBjdXJyZW50SW5mby52aWV3TW9kZWxbeC5uYW1lXSA9IHgudmFsdWUpO1xuICAgICAgICAgICAgaW5mby5wcm9wZXJ0aWVzLmZvckVhY2goeCA9PiB7XG4gICAgICAgICAgICAgICAgLy8gSE1NOiBOb3Qgc3VyZSBpZiB3ZSBuZWVkIHRoZSAudmFsdWUgY2hlY2tcbiAgICAgICAgICAgICAgICBjb25zdCBpc09iamVjdCA9IHgudmFsdWUgPT09ICdPYmplY3QnICYmIHgudHlwZSA9PT0gJ29iamVjdCc7XG4gICAgICAgICAgICAgICAgaWYgKGlzT2JqZWN0KSB7XG4gICAgICAgICAgICAgICAgICAgIGxldCB0YXJnZXRQcm9wID0gY3VycmVudEluZm8udmlld01vZGVsW3gubmFtZV1bcHJvcGVydHkubmFtZV07XG4gICAgICAgICAgICAgICAgICAgIGlmICghdGFyZ2V0UHJvcClcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgY3VycmVudEluZm8udmlld01vZGVsW3gubmFtZV1bcHJvcGVydHkubmFtZV0gPSBwcm9wZXJ0eS52YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICA7XG4gICAgICAgICAgICAgICAgY3VycmVudEluZm8udmlld01vZGVsW3gubmFtZV0gPSB4LnZhbHVlO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgICAgICB9LFxuICAgICAgICBnZXRDdXN0b21FbGVtZW50SW5mbzogKGVsZW1lbnQsIHRyYXZlcnNlID0gdHJ1ZSkgPT4ge1xuICAgICAgICAgICAgbGV0IGN1c3RvbUVsZW1lbnQ7XG4gICAgICAgICAgICBsZXQgY3VzdG9tQXR0cmlidXRlcztcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgd2hpbGUgKCFjdXN0b21FbGVtZW50ICYmIGVsZW1lbnQgIT09IGRvY3VtZW50LmJvZHkpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgYXUgPSBlbGVtZW50WyckYXUnXTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGF1KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjdXN0b21FbGVtZW50ID0gZWxlbWVudFsnJGF1J11bJ2F1OnJlc291cmNlOmN1c3RvbS1lbGVtZW50J107XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBjdXN0b21BdHRyaWJ1dGVLZXlzID0gT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMoYXUpLmZpbHRlcih5ID0+IHkuaW5jbHVkZXMoJ2N1c3RvbS1hdHRyaWJ1dGUnKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjdXN0b21BdHRyaWJ1dGVzID0gY3VzdG9tQXR0cmlidXRlS2V5cy5tYXAoeCA9PiBhdVt4XSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxlbWVudCA9IGVsZW1lbnQucGFyZW50RWxlbWVudDtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCF0cmF2ZXJzZSlcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIWN1c3RvbUVsZW1lbnQgJiYgIWN1c3RvbUF0dHJpYnV0ZXMpXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgaG9va3MuY3VycmVudEVsZW1lbnQgPSBjdXN0b21FbGVtZW50O1xuICAgICAgICAgICAgaG9va3MuY3VycmVudEF0dHJpYnV0ZXMgPSBjdXN0b21BdHRyaWJ1dGVzO1xuICAgICAgICAgICAgY29uc3QgY3VzdG9tRWxlbWVudEluZm8gPSBleHRyYWN0Q29udHJvbGxlckluZm8oY3VzdG9tRWxlbWVudCk7XG4gICAgICAgICAgICBjb25zdCBjdXN0b21BdHRyaWJ1dGVzSW5mbyA9IGN1c3RvbUF0dHJpYnV0ZXMgJiYgY3VzdG9tQXR0cmlidXRlcy5tYXAoZXh0cmFjdENvbnRyb2xsZXJJbmZvKS5maWx0ZXIoeCA9PiB4KTtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgY3VzdG9tRWxlbWVudEluZm8sXG4gICAgICAgICAgICAgICAgY3VzdG9tQXR0cmlidXRlc0luZm9cbiAgICAgICAgICAgIH07XG4gICAgICAgIH0sXG4gICAgICAgIGdldEV4cGFuZGVkRGVidWdWYWx1ZUZvcklkKGlkKSB7XG4gICAgICAgICAgICBsZXQgdmFsdWUgPSBkZWJ1Z1ZhbHVlTG9va3VwW2lkXS5leHBhbmRhYmxlVmFsdWU7XG4gICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheSh2YWx1ZSkpIHtcbiAgICAgICAgICAgICAgICBsZXQgbmV3VmFsdWUgPSB7fTtcbiAgICAgICAgICAgICAgICB2YWx1ZS5mb3JFYWNoKCh2YWx1ZSwgaW5kZXgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgbmV3VmFsdWVbaW5kZXhdID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgdmFsdWUgPSBuZXdWYWx1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGlzTWFwKHZhbHVlKSkge1xuICAgICAgICAgICAgICAgIGxldCBtYXBUb0FyciA9IFtdO1xuICAgICAgICAgICAgICAgIHZhbHVlID0gdmFsdWUuZm9yRWFjaCgodmFsdWUsIGtleSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBtYXBUb0Fyci5wdXNoKFt2YWx1ZSwga2V5XSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgdmFsdWUgPSBtYXBUb0FycjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGlzU2V0KHZhbHVlKSkge1xuICAgICAgICAgICAgICAgIHZhbHVlID0gQXJyYXkuZnJvbSh2YWx1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gY29udmVydE9iamVjdFRvRGVidWdJbmZvKHZhbHVlKTtcbiAgICAgICAgICAgIC8vIGh0dHBzOi8vc3RhY2tvdmVyZmxvdy5jb20vcXVlc3Rpb25zLzI5OTI0OTMyL2hvdy10by1yZWxpYWJseS1jaGVjay1hbi1vYmplY3QtaXMtYW4tZWNtYXNjcmlwdC02LW1hcC1zZXRcbiAgICAgICAgICAgIGZ1bmN0aW9uIGlzTWFwKG8pIHtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICBNYXAucHJvdG90eXBlLmhhcy5jYWxsKG8pOyAvLyB0aHJvd3MgaWYgbyBpcyBub3QgYW4gb2JqZWN0IG9yIGhhcyBubyBbW01hcERhdGFdXVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGZ1bmN0aW9uIGlzU2V0KG8pIHtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICBTZXQucHJvdG90eXBlLmhhcy5jYWxsKG8pOyAvLyB0aHJvd3MgaWYgbyBpcyBub3QgYW4gb2JqZWN0IG9yIGhhcyBubyBbW1NldERhdGFdXVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2F1LXN0YXJ0ZWQnLCAoY3VzdG9tRXZlbnQpID0+IHtcbiAgICAgICAgaG9va3MuQXVyZWxpYSA9IGN1c3RvbUV2ZW50LmRldGFpbDtcbiAgICB9LCB7IG9uY2U6IHRydWUgfSk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHdpbiwgJ19fQVVSRUxJQV9ERVZUT09MU19HTE9CQUxfSE9PS19fJywge1xuICAgICAgICBnZXQoKSB7XG4gICAgICAgICAgICByZXR1cm4gaG9va3M7XG4gICAgICAgIH1cbiAgICB9KTtcbiAgICBmdW5jdGlvbiBleHRyYWN0Q29udHJvbGxlckluZm8oY3VzdG9tRWxlbWVudCkge1xuICAgICAgICBpZiAoIWN1c3RvbUVsZW1lbnQpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIGNvbnN0IGJpbmRhYmxlS2V5cyA9IE9iamVjdC5rZXlzKGN1c3RvbUVsZW1lbnQuZGVmaW5pdGlvbi5iaW5kYWJsZXMpO1xuICAgICAgICBjb25zdCByZXR1cm5WYWwgPSB7XG4gICAgICAgICAgICBiaW5kYWJsZXM6IGJpbmRhYmxlS2V5cy5tYXAoeSA9PiB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHNldFZhbHVlT25EZWJ1Z0luZm8oe1xuICAgICAgICAgICAgICAgICAgICBuYW1lOiB5XG4gICAgICAgICAgICAgICAgfSwgY3VzdG9tRWxlbWVudC52aWV3TW9kZWxbeV0sIGN1c3RvbUVsZW1lbnQudmlld01vZGVsKTtcbiAgICAgICAgICAgICAgICAvLyByZXR1cm4ge1xuICAgICAgICAgICAgICAgIC8vICAgYmluZGFibGU6IGN1c3RvbUVsZW1lbnQuZGVmaW5pdGlvbi5iaW5kYWJsZXNbeV0sXG4gICAgICAgICAgICAgICAgLy8gICB0eXBlOiB0eXBlb2YgKGN1c3RvbUVsZW1lbnQudmlld01vZGVsW3ldKSxcbiAgICAgICAgICAgICAgICAvLyAgIG5hbWU6IHksIHZhbHVlOiBjdXN0b21FbGVtZW50LnZpZXdNb2RlbFt5XVxuICAgICAgICAgICAgICAgIC8vIH1cbiAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgcHJvcGVydGllczogT2JqZWN0LmtleXMoY3VzdG9tRWxlbWVudC52aWV3TW9kZWwpLmZpbHRlcih4ID0+ICFiaW5kYWJsZUtleXMuc29tZSh5ID0+IHkgPT09IHgpKS5cbiAgICAgICAgICAgICAgICBmaWx0ZXIoeCA9PiAheC5zdGFydHNXaXRoKCckJykpLm1hcCh5ID0+IHtcbiAgICAgICAgICAgICAgICByZXR1cm4gc2V0VmFsdWVPbkRlYnVnSW5mbyh7XG4gICAgICAgICAgICAgICAgICAgIG5hbWU6IHlcbiAgICAgICAgICAgICAgICB9LCBjdXN0b21FbGVtZW50LnZpZXdNb2RlbFt5XSwgY3VzdG9tRWxlbWVudC52aWV3TW9kZWwpO1xuICAgICAgICAgICAgICAgIC8vIHJldHVybiB7XG4gICAgICAgICAgICAgICAgLy8gICB0eXBlOiB0eXBlb2YgKGN1c3RvbUVsZW1lbnQudmlld01vZGVsW3ldKSxcbiAgICAgICAgICAgICAgICAvLyAgIG5hbWU6IHksXG4gICAgICAgICAgICAgICAgLy8gICB2YWx1ZTogZ2V0VmFsdWVGb3IoY3VzdG9tRWxlbWVudC52aWV3TW9kZWxbeV0pXG4gICAgICAgICAgICAgICAgLy8gfVxuICAgICAgICAgICAgfSksXG4gICAgICAgICAgICBuYW1lOiBjdXN0b21FbGVtZW50LmRlZmluaXRpb24ubmFtZSxcbiAgICAgICAgICAgIGFsaWFzZXM6IGN1c3RvbUVsZW1lbnQuZGVmaW5pdGlvbi5hbGlhc2VzLFxuICAgICAgICAgICAga2V5OiBjdXN0b21FbGVtZW50LmRlZmluaXRpb24ua2V5XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiByZXR1cm5WYWw7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGdldFZhbHVlRm9yKHZhbHVlKSB7XG4gICAgICAgIGlmICh2YWx1ZSBpbnN0YW5jZW9mIE5vZGUpIHtcbiAgICAgICAgICAgIHJldHVybiB2YWx1ZS5jb25zdHJ1Y3Rvci5uYW1lO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKEFycmF5LmlzQXJyYXkodmFsdWUpKSB7XG4gICAgICAgICAgICByZXR1cm4gYEFycmF5WyR7dmFsdWUubGVuZ3RofV1gO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHR5cGVvZiAodmFsdWUpID09PSAnb2JqZWN0Jykge1xuICAgICAgICAgICAgaWYgKHZhbHVlLmNvbnN0cnVjdG9yKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHZhbHVlLmNvbnN0cnVjdG9yLm5hbWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gJ09iamVjdCc7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gdmFsdWU7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZnVuY3Rpb24gc2V0VmFsdWVPbkRlYnVnSW5mbyhkZWJ1Z0luZm8sIHZhbHVlLCBpbnN0YW5jZSkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgbGV0IGV4cGFuZGFibGVWYWx1ZTtcbiAgICAgICAgICAgIGlmICh2YWx1ZSBpbnN0YW5jZW9mIE5vZGUpIHtcbiAgICAgICAgICAgICAgICBkZWJ1Z0luZm8uY2FuRXhwYW5kID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICBkZWJ1Z0luZm8udHlwZSA9ICdub2RlJztcbiAgICAgICAgICAgICAgICBkZWJ1Z0luZm8udmFsdWUgPSB2YWx1ZS5jb25zdHJ1Y3Rvci5uYW1lO1xuICAgICAgICAgICAgICAgIGV4cGFuZGFibGVWYWx1ZSA9IHZhbHVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoQXJyYXkuaXNBcnJheSh2YWx1ZSkpIHtcbiAgICAgICAgICAgICAgICBkZWJ1Z0luZm8uY2FuRXhwYW5kID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICBkZWJ1Z0luZm8udHlwZSA9ICdhcnJheSc7XG4gICAgICAgICAgICAgICAgZGVidWdJbmZvLnZhbHVlID0gYEFycmF5WyR7dmFsdWUubGVuZ3RofV1gO1xuICAgICAgICAgICAgICAgIGV4cGFuZGFibGVWYWx1ZSA9IHZhbHVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgZGVidWdJbmZvLnR5cGUgPSB0eXBlb2YgdmFsdWU7XG4gICAgICAgICAgICAgICAgZGVidWdJbmZvLnZhbHVlID0gdmFsdWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodmFsdWUgPT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICBkZWJ1Z0luZm8udHlwZSA9ICdudWxsJztcbiAgICAgICAgICAgICAgICBkZWJ1Z0luZm8udmFsdWUgPSAnbnVsbCc7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmICh2YWx1ZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgZGVidWdJbmZvLnR5cGUgPSAndW5kZWZpbmVkJztcbiAgICAgICAgICAgICAgICBkZWJ1Z0luZm8udmFsdWUgPSAndW5kZWZpbmVkJztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGRlYnVnSW5mby50eXBlID09PSAnb2JqZWN0Jykge1xuICAgICAgICAgICAgICAgIGRlYnVnSW5mby5jYW5FeHBhbmQgPSB0cnVlO1xuICAgICAgICAgICAgICAgIGV4cGFuZGFibGVWYWx1ZSA9IHZhbHVlO1xuICAgICAgICAgICAgICAgIGlmICh2YWx1ZS5jb25zdHJ1Y3Rvcikge1xuICAgICAgICAgICAgICAgICAgICBkZWJ1Z0luZm8udmFsdWUgPSB2YWx1ZS5jb25zdHJ1Y3Rvci5uYW1lO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgZGVidWdJbmZvLnZhbHVlID0gJ09iamVjdCc7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGRlYnVnSW5mby50eXBlID09PSAnc3RyaW5nJyB8fCBkZWJ1Z0luZm8udHlwZSA9PT0gJ251bWJlcicgfHwgZGVidWdJbmZvLnR5cGUgPT09ICdib29sZWFuJykge1xuICAgICAgICAgICAgICAgIGRlYnVnSW5mby5jYW5FZGl0ID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGRlYnVnSW5mby5kZWJ1Z0lkID0gZGVidWdJbmZvLmRlYnVnSWQgfHwgZ2V0TmV4dERlYnVnSWQoKTtcbiAgICAgICAgICAgIGRlYnVnVmFsdWVMb29rdXBbZGVidWdJbmZvLmRlYnVnSWRdID0gT2JqZWN0LmFzc2lnbih7XG4gICAgICAgICAgICAgICAgaW5zdGFuY2U6IGluc3RhbmNlLFxuICAgICAgICAgICAgICAgIGV4cGFuZGFibGVWYWx1ZTogZXhwYW5kYWJsZVZhbHVlXG4gICAgICAgICAgICB9LCBkZWJ1Z0luZm8pO1xuICAgICAgICAgICAgcmV0dXJuIGRlYnVnSW5mbztcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgcmV0dXJuIGNyZWF0ZUVycm9yT2JqZWN0KGUpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGZ1bmN0aW9uIGNyZWF0ZUNvbnRyb2xsZXJEZWJ1Z0luZm8oY29udHJvbGxlcikge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgbGV0IGNvbnRyb2xsZXJEZWJ1Z0luZm8gPSB7XG4gICAgICAgICAgICAgICAgbmFtZTogY29udHJvbGxlci5iZWhhdmlvci5lbGVtZW50TmFtZSB8fCBjb250cm9sbGVyLmJlaGF2aW9yLmF0dHJpYnV0ZU5hbWVcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBsZXQgdmlld01vZGVsID0gY29udHJvbGxlci52aWV3TW9kZWw7XG4gICAgICAgICAgICBsZXQgYmluZGFibGVLZXlzID0ge307XG4gICAgICAgICAgICBjb250cm9sbGVyRGVidWdJbmZvLmJpbmRhYmxlcyA9IGNvbnRyb2xsZXIuYmVoYXZpb3IucHJvcGVydGllcy5tYXAoeCA9PiB7XG4gICAgICAgICAgICAgICAgYmluZGFibGVLZXlzW3gubmFtZV0gPSB0cnVlO1xuICAgICAgICAgICAgICAgIHJldHVybiBzZXRWYWx1ZU9uRGVidWdJbmZvKHtcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogeC5uYW1lLFxuICAgICAgICAgICAgICAgICAgICBhdHRyaWJ1dGU6IHguYXR0cmlidXRlLFxuICAgICAgICAgICAgICAgIH0sIHZpZXdNb2RlbFt4Lm5hbWVdLCB2aWV3TW9kZWwpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBjb250cm9sbGVyRGVidWdJbmZvLnByb3BlcnRpZXMgPSBnZXREZWJ1Z1Byb3BlcnR5S2V5cyh2aWV3TW9kZWwpXG4gICAgICAgICAgICAgICAgLmZpbHRlcih4ID0+ICEoeCBpbiBiaW5kYWJsZUtleXMpKVxuICAgICAgICAgICAgICAgIC5tYXAoeCA9PiB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHNldFZhbHVlT25EZWJ1Z0luZm8oe1xuICAgICAgICAgICAgICAgICAgICBuYW1lOiB4XG4gICAgICAgICAgICAgICAgfSwgdmlld01vZGVsW3hdLCB2aWV3TW9kZWwpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gY29udHJvbGxlckRlYnVnSW5mbztcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgcmV0dXJuIGNyZWF0ZUVycm9yT2JqZWN0KGUpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGZ1bmN0aW9uIGNvbnZlcnRPYmplY3RUb0RlYnVnSW5mbyhvYmosIGJsYWNrTGlzdCkge1xuICAgICAgICBibGFja0xpc3QgPSBibGFja0xpc3QgfHwge307XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBwcm9wZXJ0aWVzOiBnZXREZWJ1Z1Byb3BlcnR5S2V5cyhvYmopXG4gICAgICAgICAgICAgICAgLmZpbHRlcih4ID0+ICEoeCBpbiBibGFja0xpc3QpKVxuICAgICAgICAgICAgICAgIC5tYXAoeCA9PiB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHNldFZhbHVlT25EZWJ1Z0luZm8oe1xuICAgICAgICAgICAgICAgICAgICBuYW1lOiB4XG4gICAgICAgICAgICAgICAgfSwgb2JqW3hdLCBvYmopO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgfTtcbiAgICB9XG4gICAgZnVuY3Rpb24gZ2V0RGVidWdJbmZvRm9yTm9kZShzZWxlY3RlZE5vZGUpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHZhciBkZWJ1Z0luZm8gPSB7fTtcbiAgICAgICAgICAgIG5leHREZWJ1Z0lkID0gMDtcbiAgICAgICAgICAgIGlmIChzZWxlY3RlZE5vZGUuYXUpIHtcbiAgICAgICAgICAgICAgICB2YXIgYXUgPSBzZWxlY3RlZE5vZGUuYXU7XG4gICAgICAgICAgICAgICAgaWYgKGF1LmNvbnRyb2xsZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgZGVidWdJbmZvLmN1c3RvbUVsZW1lbnQgPSBjcmVhdGVDb250cm9sbGVyRGVidWdJbmZvKGF1LmNvbnRyb2xsZXIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB2YXIgdGFnTmFtZSA9IHNlbGVjdGVkTm9kZS50YWdOYW1lID8gc2VsZWN0ZWROb2RlLnRhZ05hbWUudG9Mb3dlckNhc2UoKSA6IG51bGw7XG4gICAgICAgICAgICAgICAgdmFyIGN1c3RvbUF0dHJpYnV0ZU5hbWVzID0gZ2V0RGVidWdQcm9wZXJ0eUtleXMoYXUpXG4gICAgICAgICAgICAgICAgICAgIC5maWx0ZXIoZnVuY3Rpb24gKGtleSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4ga2V5ICE9PSAnY29udHJvbGxlcicgJiYga2V5ICE9PSB0YWdOYW1lO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGlmIChjdXN0b21BdHRyaWJ1dGVOYW1lcy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgZGVidWdJbmZvLmN1c3RvbUF0dHJpYnV0ZXMgPSBjdXN0b21BdHRyaWJ1dGVOYW1lcy5tYXAoeCA9PiBjcmVhdGVDb250cm9sbGVyRGVidWdJbmZvKGF1W3hdKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbGV0IG93bmluZ1ZpZXcgPSBmaW5kT3duaW5nVmlld09mTm9kZShzZWxlY3RlZE5vZGUpO1xuICAgICAgICAgICAgaWYgKG93bmluZ1ZpZXcpIHtcbiAgICAgICAgICAgICAgICBpZiAob3duaW5nVmlldy5iaW5kaW5nQ29udGV4dCkge1xuICAgICAgICAgICAgICAgICAgICBkZWJ1Z0luZm8uYmluZGluZ0NvbnRleHQgPSBjb252ZXJ0T2JqZWN0VG9EZWJ1Z0luZm8ob3duaW5nVmlldy5iaW5kaW5nQ29udGV4dCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChvd25pbmdWaWV3Lm92ZXJyaWRlQ29udGV4dCkge1xuICAgICAgICAgICAgICAgICAgICBkZWJ1Z0luZm8ub3ZlcnJpZGVDb250ZXh0ID0gY29udmVydE9iamVjdFRvRGVidWdJbmZvKG93bmluZ1ZpZXcub3ZlcnJpZGVDb250ZXh0LCB7IGJpbmRpbmdDb250ZXh0OiB0cnVlLCBwYXJlbnRPdmVycmlkZUNvbnRleHQ6IHRydWUgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGRlYnVnSW5mbztcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgcmV0dXJuIGNyZWF0ZUVycm9yT2JqZWN0KGUpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGZ1bmN0aW9uIGZpbmRPd25pbmdWaWV3T2ZOb2RlKG5vZGUpIHtcbiAgICAgICAgZnVuY3Rpb24gbW92ZVVwKG4pIHtcbiAgICAgICAgICAgIGxldCBjdXJyZW50ID0gbi5wYXJlbnROb2RlO1xuICAgICAgICAgICAgaWYgKGN1cnJlbnQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmluZENvbXBvc2luZ1ZpZXcoY3VycmVudCkgfHwgZmluZFNpYmxpbmdSZXBlYXRlclZpZXcoY3VycmVudCkgfHwgZmluZEltbWVkaWF0ZUNvbnRyb2xsZXJPd25pbmdWaWV3KGN1cnJlbnQpIHx8IG1vdmVVcChjdXJyZW50KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBhdHRhY2hlZE93bmVyKG5vZGUpIHx8IGZpbmRTaWJsaW5nUmVwZWF0ZXJWaWV3KG5vZGUpIHx8IGZpbmRJbW1lZGlhdGVDb250cm9sbGVyT3duaW5nVmlldyhub2RlKSB8fCBtb3ZlVXAobm9kZSk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIHVwZGF0ZVZhbHVlRm9ySWQoaWQsIHZhbHVlKSB7XG4gICAgICAgIGxldCBkZWJ1Z0luZm8gPSBkZWJ1Z1ZhbHVlTG9va3VwW2lkXTtcbiAgICAgICAgZGVidWdJbmZvLmluc3RhbmNlW2RlYnVnSW5mby5uYW1lXSA9IHZhbHVlO1xuICAgICAgICBzZXRWYWx1ZU9uRGVidWdJbmZvKGRlYnVnSW5mbywgdmFsdWUsIGRlYnVnSW5mby5pbnN0YW5jZSk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGdldE5leHREZWJ1Z0lkKCkge1xuICAgICAgICByZXR1cm4gKytuZXh0RGVidWdJZDtcbiAgICB9XG4gICAgZnVuY3Rpb24gY3JlYXRlRXJyb3JPYmplY3QoZSkge1xuICAgICAgICByZXR1cm4gW3tcbiAgICAgICAgICAgICAgICAvLyBiaW5kaW5nQ29udGV4dDoge1xuICAgICAgICAgICAgICAgIC8vIHByb3BlcnRpZXM6IFtcbiAgICAgICAgICAgICAgICAvLyB7XG4gICAgICAgICAgICAgICAgbmFtZTogJ0RlYnVnZ2VyIEVycm9yJyxcbiAgICAgICAgICAgICAgICB2YWx1ZTogZS5tZXNzYWdlLFxuICAgICAgICAgICAgICAgIHR5cGU6ICdzdHJpbmcnLFxuICAgICAgICAgICAgICAgIGNhbkVkaXQ6IGZhbHNlXG4gICAgICAgICAgICAgICAgLy8gfVxuICAgICAgICAgICAgICAgIC8vIF1cbiAgICAgICAgICAgICAgICAvLyB9XG4gICAgICAgICAgICB9XTtcbiAgICB9XG4gICAgZnVuY3Rpb24gYXR0YWNoZWRPd25lcihub2RlKSB7XG4gICAgICAgIGxldCBvd25lclZpZXcgPSBub2RlLmF1T3duZXJWaWV3O1xuICAgICAgICBpZiAob3duZXJWaWV3ICYmIG93bmVyVmlldy52aWV3RmFjdG9yeSkge1xuICAgICAgICAgICAgcmV0dXJuIG93bmVyVmlldztcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgZnVuY3Rpb24gbm9kZUlzSW1tZWRpYXRlQ2hpbGRPZlZpZXcodmlldywgbm9kZSkge1xuICAgICAgICBsZXQgY3VycmVudENoaWxkID0gdmlldy5maXJzdENoaWxkO1xuICAgICAgICBsZXQgbGFzdENoaWxkID0gdmlldy5sYXN0Q2hpbGQ7XG4gICAgICAgIGxldCBuZXh0Q2hpbGQ7XG4gICAgICAgIHdoaWxlIChjdXJyZW50Q2hpbGQpIHtcbiAgICAgICAgICAgIG5leHRDaGlsZCA9IGN1cnJlbnRDaGlsZC5uZXh0U2libGluZztcbiAgICAgICAgICAgIGlmIChjdXJyZW50Q2hpbGQgPT09IG5vZGUpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChjdXJyZW50Q2hpbGQgPT09IGxhc3RDaGlsZCkge1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY3VycmVudENoaWxkID0gbmV4dENoaWxkO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgZnVuY3Rpb24gZmluZFNpYmxpbmdSZXBlYXRlclZpZXcobm9kZSkge1xuICAgICAgICBpZiAoIW5vZGUpIHtcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG4gICAgICAgIGxldCBjdXJyZW50ID0gbm9kZS5uZXh0U2libGluZztcbiAgICAgICAgd2hpbGUgKGN1cnJlbnQpIHtcbiAgICAgICAgICAgIGlmIChjdXJyZW50Lm5vZGVUeXBlID09PSA4ICYmIGN1cnJlbnQudmlld1Nsb3QgJiYgY3VycmVudC5kYXRhID09PSAnYW5jaG9yJykge1xuICAgICAgICAgICAgICAgIGxldCBjaGlsZHJlbiA9IGN1cnJlbnQudmlld1Nsb3QuY2hpbGRyZW47XG4gICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDAsIGlpID0gY2hpbGRyZW4ubGVuZ3RoOyBpIDwgaWk7ICsraSkge1xuICAgICAgICAgICAgICAgICAgICBsZXQgdmlldyA9IGNoaWxkcmVuW2ldO1xuICAgICAgICAgICAgICAgICAgICBpZiAobm9kZUlzSW1tZWRpYXRlQ2hpbGRPZlZpZXcodmlldywgbm9kZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB2aWV3O1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY3VycmVudCA9IGN1cnJlbnQubmV4dFNpYmxpbmc7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGZpbmRJbW1lZGlhdGVDb250cm9sbGVyT3duaW5nVmlldyhub2RlKSB7XG4gICAgICAgIGxldCBwYXJlbnQgPSBub2RlLnBhcmVudE5vZGU7XG4gICAgICAgIGlmIChwYXJlbnQgJiYgcGFyZW50LmF1ICYmIHBhcmVudC5hdS5jb250cm9sbGVyXG4gICAgICAgICAgICAmJiBwYXJlbnQuYXUuY29udHJvbGxlci52aWV3ICYmIG5vZGVJc0ltbWVkaWF0ZUNoaWxkT2ZWaWV3KHBhcmVudC5hdS5jb250cm9sbGVyLnZpZXcsIG5vZGUpKSB7XG4gICAgICAgICAgICByZXR1cm4gcGFyZW50LmF1LmNvbnRyb2xsZXIudmlldztcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgZnVuY3Rpb24gZmluZENvbXBvc2luZ1ZpZXcobm9kZSkge1xuICAgICAgICBpZiAoIW5vZGUpIHtcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG4gICAgICAgIGlmIChub2RlLmF1cmVsaWEpIHtcbiAgICAgICAgICAgIHJldHVybiBub2RlLmF1cmVsaWEucm9vdC52aWV3O1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGF0dGFjaGVkT3duZXIobm9kZSkpIHtcbiAgICAgICAgICAgIHJldHVybiBhdHRhY2hlZE93bmVyKG5vZGUpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKG5vZGUuYXUpIHtcbiAgICAgICAgICAgIHZhciBhdSA9IG5vZGUuYXU7XG4gICAgICAgICAgICBpZiAoYXUuY29udHJvbGxlcikgeyAvL2N1c3RvbSBlbGVtZW50XG4gICAgICAgICAgICAgICAgdmFyIGNvbnRyb2xsZXIgPSBhdS5jb250cm9sbGVyO1xuICAgICAgICAgICAgICAgIHZhciB0YWdOYW1lID0gbm9kZS50YWdOYW1lID8gbm9kZS50YWdOYW1lLnRvTG93ZXJDYXNlKCkgOiBudWxsO1xuICAgICAgICAgICAgICAgIGlmICh0YWdOYW1lID09PSAncm91dGVyLXZpZXcnKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBjb250cm9sbGVyLnZpZXdNb2RlbC52aWV3O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmICh0YWdOYW1lID09PSAnY29tcG9zZScpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNvbnRyb2xsZXIudmlld01vZGVsLmN1cnJlbnRDb250cm9sbGVyLnZpZXc7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKGNvbnRyb2xsZXJbJ3dpdGgnXSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gY29udHJvbGxlclsnd2l0aCddLnZpZXdNb2RlbC52aWV3O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgZnVuY3Rpb24gZ2V0RGVidWdQcm9wZXJ0eUtleXMob2JqKSB7XG4gICAgICAgIGxldCBwcm9wcyA9IFtdO1xuICAgICAgICBjb25zdCBrZXlzID0gWy4uLk9iamVjdC5rZXlzKG9iaiksIC4uLk9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKG9iaildO1xuICAgICAgICBjb25zdCB1bmlxdWVLZXlzID0ga2V5cy5maWx0ZXIoKHZhbHVlLCBpLCBhcnIpID0+IGFyci5pbmRleE9mKHZhbHVlKSA9PT0gaSk7XG4gICAgICAgIGZvciAoY29uc3Qga2V5IG9mIHVuaXF1ZUtleXMpIHtcbiAgICAgICAgICAgIGlmIChrZXkgJiYgIWtleS5zdGFydHNXaXRoKCdfJykgJiYgdHlwZW9mIG9ialtrZXldICE9PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICAgICAgcHJvcHMucHVzaChrZXkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBwcm9wcztcbiAgICB9XG59XG5PYmplY3QuZGVmaW5lUHJvcGVydHkod2luZG93LCAnX19BVVJFTElBX0RFVlRPT0xTX0hPT0tfXycsIHtcbiAgICBnZXQoKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBnZXRDdXN0b21FbGVtZW50SW5mbzogKGVsZW1lbnQpID0+IHtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICB9XG59KTtcbi8vIGluamVjdCB0aGUgaG9va1xuaWYgKGRvY3VtZW50IGluc3RhbmNlb2YgSFRNTERvY3VtZW50KSB7XG4gICAgaW5zdGFsbFNjcmlwdChpbnN0YWxsKTtcbn1cbiIsImV4cG9ydCBjb25zdCBpc0Jyb3dzZXIgPSB0eXBlb2YgbmF2aWdhdG9yICE9PSAndW5kZWZpbmVkJztcbmV4cG9ydCBjb25zdCB0YXJnZXQgPSBpc0Jyb3dzZXIgPyB3aW5kb3cgOiB0eXBlb2YgZ2xvYmFsICE9PSAndW5kZWZpbmVkJyA/IGdsb2JhbCA6IHt9O1xuZXhwb3J0IGNvbnN0IGlzQ2hyb21lID0gdHlwZW9mIGNocm9tZSAhPT0gJ3VuZGVmaW5lZCcgJiYgISFjaHJvbWUuZGV2dG9vbHM7XG5leHBvcnQgY29uc3QgaXNGaXJlZm94ID0gaXNCcm93c2VyICYmIG5hdmlnYXRvci51c2VyQWdlbnQuaW5jbHVkZXMoJ0ZpcmVmb3gnKTtcbmV4cG9ydCBjb25zdCBpc1dpbmRvd3MgPSBpc0Jyb3dzZXIgJiYgbmF2aWdhdG9yLnBsYXRmb3JtLnN0YXJ0c1dpdGgoJ1dpbicpO1xuZXhwb3J0IGNvbnN0IGlzTWFjID0gaXNCcm93c2VyICYmIG5hdmlnYXRvci5wbGF0Zm9ybSA9PT0gJ01hY0ludGVsJztcbmV4cG9ydCBjb25zdCBpc0xpbnV4ID0gaXNCcm93c2VyICYmIG5hdmlnYXRvci5wbGF0Zm9ybS5zdGFydHNXaXRoKCdMaW51eCcpO1xuIiwiLy8gVGhlIG1vZHVsZSBjYWNoZVxudmFyIF9fd2VicGFja19tb2R1bGVfY2FjaGVfXyA9IHt9O1xuXG4vLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcblx0aWYoX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXSkge1xuXHRcdHJldHVybiBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdLmV4cG9ydHM7XG5cdH1cblx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcblx0dmFyIG1vZHVsZSA9IF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF0gPSB7XG5cdFx0Ly8gbm8gbW9kdWxlLmlkIG5lZWRlZFxuXHRcdC8vIG5vIG1vZHVsZS5sb2FkZWQgbmVlZGVkXG5cdFx0ZXhwb3J0czoge31cblx0fTtcblxuXHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cblx0X193ZWJwYWNrX21vZHVsZXNfX1ttb2R1bGVJZF0obW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cblx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcblx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xufVxuXG4iLCIvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9ucyBmb3IgaGFybW9ueSBleHBvcnRzXG5fX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSAoZXhwb3J0cywgZGVmaW5pdGlvbikgPT4ge1xuXHRmb3IodmFyIGtleSBpbiBkZWZpbml0aW9uKSB7XG5cdFx0aWYoX193ZWJwYWNrX3JlcXVpcmVfXy5vKGRlZmluaXRpb24sIGtleSkgJiYgIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBrZXkpKSB7XG5cdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywga2V5LCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZGVmaW5pdGlvbltrZXldIH0pO1xuXHRcdH1cblx0fVxufTsiLCJfX3dlYnBhY2tfcmVxdWlyZV9fLmcgPSAoZnVuY3Rpb24oKSB7XG5cdGlmICh0eXBlb2YgZ2xvYmFsVGhpcyA9PT0gJ29iamVjdCcpIHJldHVybiBnbG9iYWxUaGlzO1xuXHR0cnkge1xuXHRcdHJldHVybiB0aGlzIHx8IG5ldyBGdW5jdGlvbigncmV0dXJuIHRoaXMnKSgpO1xuXHR9IGNhdGNoIChlKSB7XG5cdFx0aWYgKHR5cGVvZiB3aW5kb3cgPT09ICdvYmplY3QnKSByZXR1cm4gd2luZG93O1xuXHR9XG59KSgpOyIsIl9fd2VicGFja19yZXF1aXJlX18ubyA9IChvYmosIHByb3ApID0+IE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIHByb3ApIiwiLy8gZGVmaW5lIF9fZXNNb2R1bGUgb24gZXhwb3J0c1xuX193ZWJwYWNrX3JlcXVpcmVfXy5yID0gKGV4cG9ydHMpID0+IHtcblx0aWYodHlwZW9mIFN5bWJvbCAhPT0gJ3VuZGVmaW5lZCcgJiYgU3ltYm9sLnRvU3RyaW5nVGFnKSB7XG5cdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFN5bWJvbC50b1N0cmluZ1RhZywgeyB2YWx1ZTogJ01vZHVsZScgfSk7XG5cdH1cblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcbn07IiwiLy8gbW9kdWxlIGV4cG9ydHMgbXVzdCBiZSByZXR1cm5lZCBmcm9tIHJ1bnRpbWUgc28gZW50cnkgaW5saW5pbmcgaXMgZGlzYWJsZWRcbi8vIHN0YXJ0dXBcbi8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xucmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oXCIuL3NyYy9jb250ZW50c2NyaXB0L2NvbnRlbnRzY3JpcHQudHNcIik7XG4iXSwic291cmNlUm9vdCI6IiJ9