var entry;entry =
/******/ (() => { // webpackBootstrap
/******/ 	"use strict";
/******/ 	var __webpack_modules__ = ({

/***/ "./node_modules/@aurelia/fetch-client/dist/esm/index.js":
/*!**************************************************************!*\
  !*** ./node_modules/@aurelia/fetch-client/dist/esm/index.js ***!
  \**************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "HttpClient": () => /* binding */ HttpClient,
/* harmony export */   "HttpClientConfiguration": () => /* binding */ HttpClientConfiguration,
/* harmony export */   "IHttpClient": () => /* binding */ u,
/* harmony export */   "RetryInterceptor": () => /* binding */ RetryInterceptor,
/* harmony export */   "json": () => /* binding */ e,
/* harmony export */   "retryStrategy": () => /* binding */ r
/* harmony export */ });
/* harmony import */ var _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @aurelia/kernel */ "./node_modules/@aurelia/kernel/dist/esm/index.js");


function e(t, e) {
    return JSON.stringify(void 0 !== t ? t : {}, e);
}

const r = {
    fixed: 0,
    incremental: 1,
    exponential: 2,
    random: 3
};

const n = {
    maxRetries: 3,
    interval: 1e3,
    strategy: r.fixed
};

class RetryInterceptor {
    constructor(t) {
        this.retryConfig = {
            ...n,
            ...void 0 !== t ? t : {}
        };
        if (this.retryConfig.strategy === r.exponential && this.retryConfig.interval <= 1e3) throw new Error("An interval less than or equal to 1 second is not allowed when using the exponential retry strategy");
    }
    request(t) {
        if (!t.retryConfig) {
            t.retryConfig = {
                ...this.retryConfig
            };
            t.retryConfig.counter = 0;
        }
        t.retryConfig.requestClone = t.clone();
        return t;
    }
    response(t, e) {
        Reflect.deleteProperty(e, "retryConfig");
        return t;
    }
    responseError(t, e, r) {
        const {retryConfig: n} = e;
        const {requestClone: i} = n;
        return Promise.resolve().then((() => {
            if (n.counter < n.maxRetries) {
                const o = void 0 !== n.doRetry ? n.doRetry(t, e) : true;
                return Promise.resolve(o).then((o => {
                    if (o) {
                        n.counter++;
                        const t = s(n);
                        return new Promise((e => setTimeout(e, !isNaN(t) ? t : 0))).then((() => {
                            const t = i.clone();
                            if ("function" === typeof n.beforeRetry) return n.beforeRetry(t, r);
                            return t;
                        })).then((t => {
                            const e = {
                                ...t,
                                retryConfig: n
                            };
                            return r.fetch(e);
                        }));
                    }
                    Reflect.deleteProperty(e, "retryConfig");
                    throw t;
                }));
            }
            Reflect.deleteProperty(e, "retryConfig");
            throw t;
        }));
    }
}

function s(t) {
    const {interval: e, strategy: n, minRandomInterval: s, maxRandomInterval: o, counter: c} = t;
    if ("function" === typeof n) return t.strategy(c);
    switch (n) {
      case r.fixed:
        return i[r.fixed](e);

      case r.incremental:
        return i[r.incremental](c, e);

      case r.exponential:
        return i[r.exponential](c, e);

      case r.random:
        return i[r.random](c, e, s, o);

      default:
        throw new Error("Unrecognized retry strategy");
    }
}

const i = [ t => t, (t, e) => e * t, (t, e) => 1 === t ? e : e ** t / 1e3, (t, e, r = 0, n = 6e4) => Math.random() * (n - r) + r ];

class HttpClientConfiguration {
    constructor() {
        this.baseUrl = "";
        this.defaults = {};
        this.interceptors = [];
        this.dispatcher = null;
    }
    withBaseUrl(t) {
        this.baseUrl = t;
        return this;
    }
    withDefaults(t) {
        this.defaults = t;
        return this;
    }
    withInterceptor(t) {
        this.interceptors.push(t);
        return this;
    }
    useStandardConfiguration() {
        const t = {
            credentials: "same-origin"
        };
        Object.assign(this.defaults, t, this.defaults);
        return this.rejectErrorResponses();
    }
    rejectErrorResponses() {
        return this.withInterceptor({
            response: o
        });
    }
    withRetry(t) {
        const e = new RetryInterceptor(t);
        return this.withInterceptor(e);
    }
    withDispatcher(t) {
        this.dispatcher = t;
        return this;
    }
}

function o(t) {
    if (!t.ok) throw t;
    return t;
}

const c = /^([a-z][a-z0-9+\-.]*:)?\/\//i;

const u = _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__.DI.createInterface("IHttpClient", (t => t.singleton(HttpClient)));

class HttpClient {
    constructor() {
        this.dispatcher = null;
        this.activeRequestCount = 0;
        this.isRequesting = false;
        this.isConfigured = false;
        this.baseUrl = "";
        this.defaults = null;
        this.interceptors = [];
    }
    configure(t) {
        let e;
        if ("object" === typeof t) {
            const r = {
                defaults: t
            };
            e = r;
        } else if ("function" === typeof t) {
            e = new HttpClientConfiguration;
            e.baseUrl = this.baseUrl;
            e.defaults = {
                ...this.defaults
            };
            e.interceptors = this.interceptors;
            e.dispatcher = this.dispatcher;
            const r = t(e);
            if (Object.prototype.isPrototypeOf.call(HttpClientConfiguration.prototype, r)) e = r;
        } else throw new Error("invalid config");
        const r = e.defaults;
        if (void 0 !== r && Object.prototype.isPrototypeOf.call(Headers.prototype, r.headers)) throw new Error("Default headers must be a plain object.");
        const n = e.interceptors;
        if (void 0 !== n && n.length) {
            if (n.filter((t => Object.prototype.isPrototypeOf.call(RetryInterceptor.prototype, t))).length > 1) throw new Error("Only one RetryInterceptor is allowed.");
            const t = n.findIndex((t => Object.prototype.isPrototypeOf.call(RetryInterceptor.prototype, t)));
            if (t >= 0 && t !== n.length - 1) throw new Error("The retry interceptor must be the last interceptor defined.");
        }
        this.baseUrl = e.baseUrl;
        this.defaults = r;
        this.interceptors = void 0 !== e.interceptors ? e.interceptors : [];
        this.dispatcher = e.dispatcher;
        this.isConfigured = true;
        return this;
    }
    fetch(t, e) {
        this.trackRequestStart();
        let r = this.buildRequest(t, e);
        return this.processRequest(r, this.interceptors).then((t => {
            let e;
            if (Object.prototype.isPrototypeOf.call(Response.prototype, t)) e = Promise.resolve(t); else if (Object.prototype.isPrototypeOf.call(Request.prototype, t)) {
                r = t;
                e = fetch(r);
            } else throw new Error(`An invalid result was returned by the interceptor chain. Expected a Request or Response instance, but got [${t}]`);
            return this.processResponse(e, this.interceptors, r);
        })).then((t => {
            if (Object.prototype.isPrototypeOf.call(Request.prototype, t)) return this.fetch(t);
            return t;
        })).then((t => {
            this.trackRequestEnd();
            return t;
        }), (t => {
            this.trackRequestEnd();
            throw t;
        }));
    }
    buildRequest(t, e) {
        const r = null !== this.defaults ? this.defaults : {};
        let n;
        let s;
        let i;
        const o = h(r.headers);
        if (Object.prototype.isPrototypeOf.call(Request.prototype, t)) {
            n = t;
            i = new Headers(n.headers).get("Content-Type");
        } else {
            if (!e) e = {};
            s = e.body;
            const o = void 0 !== s ? {
                body: s
            } : null;
            const c = {
                ...r,
                headers: {},
                ...e,
                ...o
            };
            i = new Headers(c.headers).get("Content-Type");
            n = new Request(l(this.baseUrl, t), c);
        }
        if (!i) if (new Headers(o).has("content-type")) n.headers.set("Content-Type", new Headers(o).get("content-type")); else if (void 0 !== s && f(s)) n.headers.set("Content-Type", "application/json");
        a(n.headers, o);
        if (void 0 !== s && Object.prototype.isPrototypeOf.call(Blob.prototype, s) && s.type) n.headers.set("Content-Type", s.type);
        return n;
    }
    get(t, e) {
        return this.fetch(t, e);
    }
    post(t, e, r) {
        return this.callFetch(t, e, r, "POST");
    }
    put(t, e, r) {
        return this.callFetch(t, e, r, "PUT");
    }
    patch(t, e, r) {
        return this.callFetch(t, e, r, "PATCH");
    }
    delete(t, e, r) {
        return this.callFetch(t, e, r, "DELETE");
    }
    trackRequestStart() {
        this.isRequesting = !!++this.activeRequestCount;
        if (this.isRequesting && null !== this.dispatcher) {
            const t = new this.dispatcher.ownerDocument.defaultView.CustomEvent("aurelia-fetch-client-request-started", {
                bubbles: true,
                cancelable: true
            });
            setTimeout((() => {
                this.dispatcher.dispatchEvent(t);
            }), 1);
        }
    }
    trackRequestEnd() {
        this.isRequesting = !!--this.activeRequestCount;
        if (!this.isRequesting && null !== this.dispatcher) {
            const t = new this.dispatcher.ownerDocument.defaultView.CustomEvent("aurelia-fetch-client-requests-drained", {
                bubbles: true,
                cancelable: true
            });
            setTimeout((() => {
                this.dispatcher.dispatchEvent(t);
            }), 1);
        }
    }
    processRequest(t, e) {
        return this.applyInterceptors(t, e, "request", "requestError", this);
    }
    processResponse(t, e, r) {
        return this.applyInterceptors(t, e, "response", "responseError", r, this);
    }
    applyInterceptors(t, e, r, n, ...s) {
        return (void 0 !== e ? e : []).reduce(((t, e) => {
            const i = e[r];
            const o = e[n];
            return t.then(i ? t => i.call(e, t, ...s) : p, o ? t => o.call(e, t, ...s) : d);
        }), Promise.resolve(t));
    }
    callFetch(t, e, r, n) {
        if (!r) r = {};
        r.method = n;
        if (e) r.body = e;
        return this.fetch(t, r);
    }
}

function h(t) {
    const e = {};
    const r = void 0 !== t ? t : {};
    for (const t in r) if (Object.prototype.hasOwnProperty.call(r, t)) e[t] = "function" === typeof r[t] ? r[t]() : r[t];
    return e;
}

function l(t, e) {
    if (c.test(e)) return e;
    return (void 0 !== t ? t : "") + e;
}

function a(t, e) {
    const r = void 0 !== e ? e : {};
    for (const e in r) if (Object.prototype.hasOwnProperty.call(r, e) && !t.has(e)) t.set(e, r[e]);
}

function f(t) {
    try {
        JSON.parse(t);
    } catch (t) {
        return false;
    }
    return true;
}

function p(t) {
    return t;
}

function d(t) {
    throw t;
}


//# sourceMappingURL=index.js.map


/***/ }),

/***/ "./node_modules/@aurelia/kernel/dist/esm/index.js":
/*!********************************************************!*\
  !*** ./node_modules/@aurelia/kernel/dist/esm/index.js ***!
  \********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Metadata": () => /* reexport safe */ _aurelia_metadata__WEBPACK_IMPORTED_MODULE_0__.Metadata,
/* harmony export */   "applyMetadataPolyfill": () => /* reexport safe */ _aurelia_metadata__WEBPACK_IMPORTED_MODULE_0__.applyMetadataPolyfill,
/* harmony export */   "isNullOrUndefined": () => /* reexport safe */ _aurelia_metadata__WEBPACK_IMPORTED_MODULE_0__.isNullOrUndefined,
/* harmony export */   "isObject": () => /* reexport safe */ _aurelia_metadata__WEBPACK_IMPORTED_MODULE_0__.isObject,
/* harmony export */   "metadata": () => /* reexport safe */ _aurelia_metadata__WEBPACK_IMPORTED_MODULE_0__.metadata,
/* harmony export */   "Platform": () => /* reexport safe */ _aurelia_platform__WEBPACK_IMPORTED_MODULE_1__.Platform,
/* harmony export */   "Task": () => /* reexport safe */ _aurelia_platform__WEBPACK_IMPORTED_MODULE_1__.Task,
/* harmony export */   "TaskAbortError": () => /* reexport safe */ _aurelia_platform__WEBPACK_IMPORTED_MODULE_1__.TaskAbortError,
/* harmony export */   "TaskQueue": () => /* reexport safe */ _aurelia_platform__WEBPACK_IMPORTED_MODULE_1__.TaskQueue,
/* harmony export */   "TaskQueuePriority": () => /* reexport safe */ _aurelia_platform__WEBPACK_IMPORTED_MODULE_1__.TaskQueuePriority,
/* harmony export */   "TaskStatus": () => /* reexport safe */ _aurelia_platform__WEBPACK_IMPORTED_MODULE_1__.TaskStatus,
/* harmony export */   "AnalyzedModule": () => /* binding */ AnalyzedModule,
/* harmony export */   "ColorOptions": () => /* binding */ Lt,
/* harmony export */   "ConsoleSink": () => /* binding */ Ht,
/* harmony export */   "ContainerConfiguration": () => /* binding */ ContainerConfiguration,
/* harmony export */   "DI": () => /* binding */ G,
/* harmony export */   "DefaultLogEvent": () => /* binding */ DefaultLogEvent,
/* harmony export */   "DefaultLogEventFactory": () => /* binding */ _t,
/* harmony export */   "DefaultLogger": () => /* binding */ Vt,
/* harmony export */   "DefaultResolver": () => /* binding */ z,
/* harmony export */   "EventAggregator": () => /* binding */ EventAggregator,
/* harmony export */   "IContainer": () => /* binding */ H,
/* harmony export */   "IEventAggregator": () => /* binding */ Yt,
/* harmony export */   "ILogConfig": () => /* binding */ Pt,
/* harmony export */   "ILogEventFactory": () => /* binding */ St,
/* harmony export */   "ILogger": () => /* binding */ Nt,
/* harmony export */   "IModuleLoader": () => /* binding */ Jt,
/* harmony export */   "IPlatform": () => /* binding */ Mt,
/* harmony export */   "IServiceLocator": () => /* binding */ V,
/* harmony export */   "ISink": () => /* binding */ Dt,
/* harmony export */   "InstanceProvider": () => /* binding */ InstanceProvider,
/* harmony export */   "LogConfig": () => /* binding */ LogConfig,
/* harmony export */   "LogLevel": () => /* binding */ Ut,
/* harmony export */   "LoggerConfiguration": () => /* binding */ qt,
/* harmony export */   "ModuleItem": () => /* binding */ ModuleItem,
/* harmony export */   "Protocol": () => /* binding */ S,
/* harmony export */   "Registration": () => /* binding */ $t,
/* harmony export */   "all": () => /* binding */ nt,
/* harmony export */   "bound": () => /* binding */ m,
/* harmony export */   "camelCase": () => /* binding */ l,
/* harmony export */   "compareNumber": () => /* binding */ w,
/* harmony export */   "emptyArray": () => /* binding */ Ot,
/* harmony export */   "emptyObject": () => /* binding */ kt,
/* harmony export */   "factory": () => /* binding */ ot,
/* harmony export */   "firstDefined": () => /* binding */ R,
/* harmony export */   "format": () => /* binding */ xt,
/* harmony export */   "fromAnnotationOrDefinitionOrTypeOrDefault": () => /* binding */ W,
/* harmony export */   "fromAnnotationOrTypeOrDefault": () => /* binding */ B,
/* harmony export */   "fromDefinitionOrDefault": () => /* binding */ Q,
/* harmony export */   "getPrototypeChain": () => /* binding */ b,
/* harmony export */   "ignore": () => /* binding */ st,
/* harmony export */   "inject": () => /* binding */ J,
/* harmony export */   "isArrayIndex": () => /* binding */ i,
/* harmony export */   "isNativeFunction": () => /* binding */ $,
/* harmony export */   "isNumberOrBigInt": () => /* binding */ s,
/* harmony export */   "isStringOrDate": () => /* binding */ o,
/* harmony export */   "kebabCase": () => /* binding */ f,
/* harmony export */   "lazy": () => /* binding */ rt,
/* harmony export */   "mergeArrays": () => /* binding */ p,
/* harmony export */   "mergeDistinct": () => /* binding */ g,
/* harmony export */   "mergeObjects": () => /* binding */ y,
/* harmony export */   "newInstanceForScope": () => /* binding */ ut,
/* harmony export */   "newInstanceOf": () => /* binding */ lt,
/* harmony export */   "nextId": () => /* binding */ d,
/* harmony export */   "noop": () => /* binding */ It,
/* harmony export */   "onResolve": () => /* binding */ E,
/* harmony export */   "optional": () => /* binding */ it,
/* harmony export */   "pascalCase": () => /* binding */ c,
/* harmony export */   "resetId": () => /* binding */ v,
/* harmony export */   "resolveAll": () => /* binding */ A,
/* harmony export */   "singleton": () => /* binding */ tt,
/* harmony export */   "sink": () => /* binding */ Qt,
/* harmony export */   "toArray": () => /* binding */ a,
/* harmony export */   "transient": () => /* binding */ Y
/* harmony export */ });
/* harmony import */ var _aurelia_metadata__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @aurelia/metadata */ "./node_modules/@aurelia/metadata/dist/esm/index.js");
/* harmony import */ var _aurelia_platform__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @aurelia/platform */ "./node_modules/@aurelia/platform/dist/esm/index.js");






const r = {};

function i(t) {
    switch (typeof t) {
      case "number":
        return t >= 0 && (0 | t) === t;

      case "string":
        {
            const e = r[t];
            if (void 0 !== e) return e;
            const n = t.length;
            if (0 === n) return r[t] = false;
            let i = 0;
            let s = 0;
            for (;s < n; ++s) {
                i = t.charCodeAt(s);
                if (0 === s && 48 === i && n > 1 || i < 48 || i > 57) return r[t] = false;
            }
            return r[t] = true;
        }

      default:
        return false;
    }
}

function s(t) {
    switch (typeof t) {
      case "number":
      case "bigint":
        return true;

      default:
        return false;
    }
}

function o(t) {
    switch (typeof t) {
      case "string":
        return true;

      case "object":
        return t instanceof Date;

      default:
        return false;
    }
}

const u = function() {
    let t;
    (function(t) {
        t[t["none"] = 0] = "none";
        t[t["digit"] = 1] = "digit";
        t[t["upper"] = 2] = "upper";
        t[t["lower"] = 3] = "lower";
    })(t || (t = {}));
    const e = Object.assign(Object.create(null), {
        0: true,
        1: true,
        2: true,
        3: true,
        4: true,
        5: true,
        6: true,
        7: true,
        8: true,
        9: true
    });
    function n(t) {
        if ("" === t) return 0;
        if (t !== t.toUpperCase()) return 3;
        if (t !== t.toLowerCase()) return 2;
        if (true === e[t]) return 1;
        return 0;
    }
    return function(t, e) {
        const r = t.length;
        if (0 === r) return t;
        let i = false;
        let s = "";
        let o;
        let u = "";
        let l = 0;
        let c = t.charAt(0);
        let f = n(c);
        let a = 0;
        for (;a < r; ++a) {
            o = l;
            u = c;
            l = f;
            c = t.charAt(a + 1);
            f = n(c);
            if (0 === l) {
                if (s.length > 0) i = true;
            } else {
                if (!i && s.length > 0 && 2 === l) i = 3 === o || 3 === f;
                s += e(u, i);
                i = false;
            }
        }
        return s;
    };
}();

const l = function() {
    const t = Object.create(null);
    function e(t, e) {
        return e ? t.toUpperCase() : t.toLowerCase();
    }
    return function(n) {
        let r = t[n];
        if (void 0 === r) r = t[n] = u(n, e);
        return r;
    };
}();

const c = function() {
    const t = Object.create(null);
    return function(e) {
        let n = t[e];
        if (void 0 === n) {
            n = l(e);
            if (n.length > 0) n = n[0].toUpperCase() + n.slice(1);
            t[e] = n;
        }
        return n;
    };
}();

const f = function() {
    const t = Object.create(null);
    function e(t, e) {
        return e ? `-${t.toLowerCase()}` : t.toLowerCase();
    }
    return function(n) {
        let r = t[n];
        if (void 0 === r) r = t[n] = u(n, e);
        return r;
    };
}();

function a(t) {
    const {length: e} = t;
    const n = Array(e);
    let r = 0;
    for (;r < e; ++r) n[r] = t[r];
    return n;
}

const h = {};

function d(t) {
    if (void 0 === h[t]) h[t] = 0;
    return ++h[t];
}

function v(t) {
    h[t] = 0;
}

function w(t, e) {
    return t - e;
}

function g(t, e, n) {
    if (void 0 === t || null === t || t === Ot) if (void 0 === e || null === e || e === Ot) return Ot; else return n ? e.slice(0) : e; else if (void 0 === e || null === e || e === Ot) return n ? t.slice(0) : t;
    const r = {};
    const i = n ? t.slice(0) : t;
    let s = t.length;
    let o = e.length;
    while (s-- > 0) r[t[s]] = true;
    let u;
    while (o-- > 0) {
        u = e[o];
        if (void 0 === r[u]) {
            i.push(u);
            r[u] = true;
        }
    }
    return i;
}

function m(t, e, n) {
    return {
        configurable: true,
        enumerable: n.enumerable,
        get() {
            const t = n.value.bind(this);
            Reflect.defineProperty(this, e, {
                value: t,
                writable: true,
                configurable: true,
                enumerable: n.enumerable
            });
            return t;
        }
    };
}

function p(...t) {
    const e = [];
    let n = 0;
    const r = t.length;
    let i = 0;
    let s;
    let o = 0;
    for (;o < r; ++o) {
        s = t[o];
        if (void 0 !== s) {
            i = s.length;
            let t = 0;
            for (;t < i; ++t) e[n++] = s[t];
        }
    }
    return e;
}

function y(...t) {
    const e = {};
    const n = t.length;
    let r;
    let i;
    let s = 0;
    for (;n > s; ++s) {
        r = t[s];
        if (void 0 !== r) for (i in r) e[i] = r[i];
    }
    return e;
}

function R(...t) {
    const e = t.length;
    let n;
    let r = 0;
    for (;e > r; ++r) {
        n = t[r];
        if (void 0 !== n) return n;
    }
    throw new Error(`No default value found`);
}

const b = function() {
    const t = Function.prototype;
    const e = Object.getPrototypeOf;
    const n = new WeakMap;
    let r = t;
    let i = 0;
    let s;
    return function(o) {
        s = n.get(o);
        if (void 0 === s) {
            n.set(o, s = [ r = o ]);
            i = 0;
            while ((r = e(r)) !== t) s[++i] = r;
        }
        return s;
    };
}();

function C(...t) {
    return Object.assign(Object.create(null), ...t);
}

const $ = function() {
    const t = new WeakMap;
    let e = false;
    let n = "";
    let r = 0;
    return function(i) {
        e = t.get(i);
        if (void 0 === e) {
            n = i.toString();
            r = n.length;
            e = r >= 29 && r <= 100 && 125 === n.charCodeAt(r - 1) && n.charCodeAt(r - 2) <= 32 && 93 === n.charCodeAt(r - 3) && 101 === n.charCodeAt(r - 4) && 100 === n.charCodeAt(r - 5) && 111 === n.charCodeAt(r - 6) && 99 === n.charCodeAt(r - 7) && 32 === n.charCodeAt(r - 8) && 101 === n.charCodeAt(r - 9) && 118 === n.charCodeAt(r - 10) && 105 === n.charCodeAt(r - 11) && 116 === n.charCodeAt(r - 12) && 97 === n.charCodeAt(r - 13) && 110 === n.charCodeAt(r - 14) && 88 === n.charCodeAt(r - 15);
            t.set(i, e);
        }
        return e;
    };
}();

function E(t, e) {
    if (t instanceof Promise) return t.then(e);
    return e(t);
}

function A(...t) {
    let e;
    let n;
    let r;
    let i = 0;
    let s = t.length;
    for (;i < s; ++i) {
        e = t[i];
        if ((e = t[i]) instanceof Promise) if (void 0 === n) n = e; else if (void 0 === r) r = [ n, e ]; else r.push(e);
    }
    if (void 0 === r) return n;
    return Promise.all(r);
}

const j = _aurelia_metadata__WEBPACK_IMPORTED_MODULE_0__.Metadata.getOwn;

const O = _aurelia_metadata__WEBPACK_IMPORTED_MODULE_0__.Metadata.hasOwn;

const k = _aurelia_metadata__WEBPACK_IMPORTED_MODULE_0__.Metadata.define;

const I = t => "function" === typeof t;

const M = t => "string" === typeof t;

const T = "au:annotation";

const F = (t, e) => {
    if (void 0 === e) return `${T}:${t}`;
    return `${T}:${t}:${e}`;
};

const U = (t, e) => {
    const n = j(T, t);
    if (void 0 === n) k(T, [ e ], t); else n.push(e);
};

const L = Object.freeze({
    name: "au:annotation",
    appendTo: U,
    set(t, e, n) {
        k(F(e), n, t);
    },
    get: (t, e) => j(F(e), t),
    getKeys(t) {
        let e = j(T, t);
        if (void 0 === e) k(T, e = [], t);
        return e;
    },
    isKey: t => t.startsWith(T),
    keyFor: F
});

const P = "au:resource";

const D = Object.freeze({
    name: P,
    appendTo(t, e) {
        const n = j(P, t);
        if (void 0 === n) k(P, [ e ], t); else n.push(e);
    },
    has: t => O(P, t),
    getAll(t) {
        const e = j(P, t);
        if (void 0 === e) return Ot; else return e.map((e => j(e, t)));
    },
    getKeys(t) {
        let e = j(P, t);
        if (void 0 === e) k(P, e = [], t);
        return e;
    },
    isKey: t => t.startsWith(P),
    keyFor(t, e) {
        if (void 0 === e) return `${P}:${t}`;
        return `${P}:${t}:${e}`;
    }
});

const S = {
    annotation: L,
    resource: D
};

const N = Object.prototype.hasOwnProperty;

function W(t, e, n, r) {
    let i = j(F(t), n);
    if (void 0 === i) {
        i = e[t];
        if (void 0 === i) {
            i = n[t];
            if (void 0 === i || !N.call(n, t)) return r();
            return i;
        }
        return i;
    }
    return i;
}

function B(t, e, n) {
    let r = j(F(t), e);
    if (void 0 === r) {
        r = e[t];
        if (void 0 === r || !N.call(e, t)) return n();
        return r;
    }
    return r;
}

function Q(t, e, n) {
    const r = e[t];
    if (void 0 === r) return n();
    return r;
}

(0,_aurelia_metadata__WEBPACK_IMPORTED_MODULE_0__.applyMetadataPolyfill)(Reflect, false, false);

class ResolverBuilder {
    constructor(t, e) {
        this.container = t;
        this.key = e;
    }
    instance(t) {
        return this.registerResolver(0, t);
    }
    singleton(t) {
        return this.registerResolver(1, t);
    }
    transient(t) {
        return this.registerResolver(2, t);
    }
    callback(t) {
        return this.registerResolver(3, t);
    }
    cachedCallback(t) {
        return this.registerResolver(3, Ct(t));
    }
    aliasTo(t) {
        return this.registerResolver(5, t);
    }
    registerResolver(t, e) {
        const {container: n, key: r} = this;
        this.container = this.key = void 0;
        return n.registerResolver(r, new Resolver(r, t, e));
    }
}

function x(t) {
    const e = t.slice();
    const n = Object.keys(t);
    const r = n.length;
    let s;
    for (let o = 0; o < r; ++o) {
        s = n[o];
        if (!i(s)) e[s] = t[s];
    }
    return e;
}

const z = {
    none(t) {
        throw Error(`AUR0002:${t.toString()}`);
    },
    singleton(t) {
        return new Resolver(t, 1, t);
    },
    transient(t) {
        return new Resolver(t, 2, t);
    }
};

class ContainerConfiguration {
    constructor(t, e) {
        this.inheritParentResources = t;
        this.defaultResolver = e;
    }
    static from(t) {
        var e, n;
        if (void 0 === t || t === ContainerConfiguration.DEFAULT) return ContainerConfiguration.DEFAULT;
        return new ContainerConfiguration(null !== (e = t.inheritParentResources) && void 0 !== e ? e : false, null !== (n = t.defaultResolver) && void 0 !== n ? n : z.singleton);
    }
}

ContainerConfiguration.DEFAULT = ContainerConfiguration.from({});

const G = {
    createContainer(t) {
        return new Container(null, ContainerConfiguration.from(t));
    },
    getDesignParamtypes(t) {
        return j("design:paramtypes", t);
    },
    getAnnotationParamtypes(t) {
        const e = F("di:paramtypes");
        return j(e, t);
    },
    getOrCreateAnnotationParamTypes: _,
    getDependencies: K,
    createInterface(t, e) {
        const n = I(t) ? t : e;
        const r = M(t) ? t : void 0;
        const i = function(t, e, n) {
            if (null == t || void 0 !== new.target) throw new Error(`AUR0001:${i.friendlyName}`);
            const r = _(t);
            r[n] = i;
        };
        i.$isInterface = true;
        i.friendlyName = null == r ? "(anonymous)" : r;
        if (null != n) i.register = function(t, e) {
            return n(new ResolverBuilder(t, null !== e && void 0 !== e ? e : i));
        };
        i.toString = function t() {
            return `InterfaceSymbol<${i.friendlyName}>`;
        };
        return i;
    },
    inject(...t) {
        return function(e, n, r) {
            if ("number" === typeof r) {
                const n = _(e);
                const i = t[0];
                if (void 0 !== i) n[r] = i;
            } else if (n) {
                const r = _(e.constructor);
                const i = t[0];
                if (void 0 !== i) r[n] = i;
            } else if (r) {
                const e = r.value;
                const n = _(e);
                let i;
                for (let e = 0; e < t.length; ++e) {
                    i = t[e];
                    if (void 0 !== i) n[e] = i;
                }
            } else {
                const n = _(e);
                let r;
                for (let e = 0; e < t.length; ++e) {
                    r = t[e];
                    if (void 0 !== r) n[e] = r;
                }
            }
        };
    },
    transient(t) {
        t.register = function e(n) {
            const r = $t.transient(t, t);
            return r.register(n, t);
        };
        t.registerInRequestor = false;
        return t;
    },
    singleton(t, e = Z) {
        t.register = function e(n) {
            const r = $t.singleton(t, t);
            return r.register(n, t);
        };
        t.registerInRequestor = e.scoped;
        return t;
    }
};

function K(t) {
    const e = F("di:dependencies");
    let n = j(e, t);
    if (void 0 === n) {
        const r = t.inject;
        if (void 0 === r) {
            const e = G.getDesignParamtypes(t);
            const r = G.getAnnotationParamtypes(t);
            if (void 0 === e) if (void 0 === r) {
                const e = Object.getPrototypeOf(t);
                if (I(e) && e !== Function.prototype) n = x(K(e)); else n = [];
            } else n = x(r); else if (void 0 === r) n = x(e); else {
                n = x(e);
                let t = r.length;
                let s;
                let o = 0;
                for (;o < t; ++o) {
                    s = r[o];
                    if (void 0 !== s) n[o] = s;
                }
                const u = Object.keys(r);
                let l;
                o = 0;
                t = u.length;
                for (o = 0; o < t; ++o) {
                    l = u[o];
                    if (!i(l)) n[l] = r[l];
                }
            }
        } else n = x(r);
        k(e, n, t);
        U(t, e);
    }
    return n;
}

function _(t) {
    const e = F("di:paramtypes");
    let n = j(e, t);
    if (void 0 === n) {
        k(e, n = [], t);
        U(t, e);
    }
    return n;
}

const H = G.createInterface("IContainer");

const V = H;

function q(t) {
    return function(e) {
        const n = function(t, e, r) {
            G.inject(n)(t, e, r);
        };
        n.$isResolver = true;
        n.resolve = function(n, r) {
            return t(e, n, r);
        };
        return n;
    };
}

const J = G.inject;

function X(t) {
    return G.transient(t);
}

function Y(t) {
    return null == t ? X : X(t);
}

const Z = {
    scoped: false
};

function tt(t) {
    if (I(t)) return G.singleton(t);
    return function(e) {
        return G.singleton(e, t);
    };
}

function et(t) {
    return function(e, n) {
        n = !!n;
        const r = function(t, e, n) {
            G.inject(r)(t, e, n);
        };
        r.$isResolver = true;
        r.resolve = function(r, i) {
            return t(e, r, i, n);
        };
        return r;
    };
}

const nt = et(((t, e, n, r) => n.getAll(t, r)));

const rt = q(((t, e, n) => () => n.get(t)));

const it = q(((t, e, n) => {
    if (n.has(t, true)) return n.get(t); else return;
}));

function st(t, e, n) {
    G.inject(st)(t, e, n);
}

st.$isResolver = true;

st.resolve = () => {};

const ot = q(((t, e, n) => (...r) => e.getFactory(t).construct(n, r)));

const ut = q(((t, e, n) => {
    const r = ct(t, e, n);
    const i = new InstanceProvider(String(t), r);
    n.registerResolver(t, i, true);
    return r;
}));

const lt = q(((t, e, n) => ct(t, e, n)));

function ct(t, e, n) {
    return e.getFactory(t).construct(n);
}

var ft;

(function(t) {
    t[t["instance"] = 0] = "instance";
    t[t["singleton"] = 1] = "singleton";
    t[t["transient"] = 2] = "transient";
    t[t["callback"] = 3] = "callback";
    t[t["array"] = 4] = "array";
    t[t["alias"] = 5] = "alias";
})(ft || (ft = {}));

class Resolver {
    constructor(t, e, n) {
        this.key = t;
        this.strategy = e;
        this.state = n;
        this.resolving = false;
    }
    get $isResolver() {
        return true;
    }
    register(t, e) {
        return t.registerResolver(e || this.key, this);
    }
    resolve(t, e) {
        switch (this.strategy) {
          case 0:
            return this.state;

          case 1:
            if (this.resolving) throw new Error(`AUR0003:${this.state.name}`);
            this.resolving = true;
            this.state = t.getFactory(this.state).construct(e);
            this.strategy = 0;
            this.resolving = false;
            return this.state;

          case 2:
            {
                const n = t.getFactory(this.state);
                if (null === n) throw new Error(`AUR0004:${String(this.key)}`);
                return n.construct(e);
            }

          case 3:
            return this.state(t, e, this);

          case 4:
            return this.state[0].resolve(t, e);

          case 5:
            return e.get(this.state);

          default:
            throw new Error(`AUR0005:${this.strategy}`);
        }
    }
    getFactory(t) {
        var e, n, r;
        switch (this.strategy) {
          case 1:
          case 2:
            return t.getFactory(this.state);

          case 5:
            return null !== (r = null === (n = null === (e = t.getResolver(this.state)) || void 0 === e ? void 0 : e.getFactory) || void 0 === n ? void 0 : n.call(e, t)) && void 0 !== r ? r : null;

          default:
            return null;
        }
    }
}

function at(t) {
    return this.get(t);
}

function ht(t, e) {
    return e(t);
}

class Factory {
    constructor(t, e) {
        this.Type = t;
        this.dependencies = e;
        this.transformers = null;
    }
    construct(t, e) {
        let n;
        if (void 0 === e) n = new this.Type(...this.dependencies.map(at, t)); else n = new this.Type(...this.dependencies.map(at, t), ...e);
        if (null == this.transformers) return n;
        return this.transformers.reduce(ht, n);
    }
    registerTransformer(t) {
        var e;
        (null !== (e = this.transformers) && void 0 !== e ? e : this.transformers = []).push(t);
    }
}

const dt = {
    $isResolver: true,
    resolve(t, e) {
        return e;
    }
};

function vt(t) {
    return I(t.register);
}

function wt(t) {
    return vt(t) && "boolean" === typeof t.registerInRequestor;
}

function gt(t) {
    return wt(t) && t.registerInRequestor;
}

function mt(t) {
    return void 0 !== t.prototype;
}

function pt(t) {
    return M(t) && t.indexOf(":") > 0;
}

const yt = new Set([ "Array", "ArrayBuffer", "Boolean", "DataView", "Date", "Error", "EvalError", "Float32Array", "Float64Array", "Function", "Int8Array", "Int16Array", "Int32Array", "Map", "Number", "Object", "Promise", "RangeError", "ReferenceError", "RegExp", "Set", "SharedArrayBuffer", "String", "SyntaxError", "TypeError", "Uint8Array", "Uint8ClampedArray", "Uint16Array", "Uint32Array", "URIError", "WeakMap", "WeakSet" ]);

let Rt = 0;

class Container {
    constructor(t, e) {
        this.parent = t;
        this.config = e;
        this.id = ++Rt;
        this.t = 0;
        this.i = new Map;
        if (null === t) {
            this.root = this;
            this.u = new Map;
            this.h = new Map;
            this.res = Object.create(null);
        } else {
            this.root = t.root;
            this.u = new Map;
            this.h = t.h;
            if (e.inheritParentResources) this.res = Object.assign(Object.create(null), t.res, this.root.res); else this.res = Object.create(null);
        }
        this.u.set(H, dt);
    }
    get depth() {
        return null === this.parent ? 0 : this.parent.depth + 1;
    }
    register(...t) {
        if (100 === ++this.t) throw new Error(`AUR0006:${t.map(String)}`);
        let e;
        let r;
        let i;
        let s;
        let o;
        let u = 0;
        let l = t.length;
        for (;u < l; ++u) {
            e = t[u];
            if (!(0,_aurelia_metadata__WEBPACK_IMPORTED_MODULE_0__.isObject)(e)) continue;
            if (vt(e)) e.register(this); else if (S.resource.has(e)) {
                const t = S.resource.getAll(e);
                if (1 === t.length) t[0].register(this); else {
                    s = 0;
                    o = t.length;
                    while (o > s) {
                        t[s].register(this);
                        ++s;
                    }
                }
            } else if (mt(e)) $t.singleton(e, e).register(this); else {
                r = Object.keys(e);
                s = 0;
                o = r.length;
                for (;s < o; ++s) {
                    i = e[r[s]];
                    if (!(0,_aurelia_metadata__WEBPACK_IMPORTED_MODULE_0__.isObject)(i)) continue;
                    if (vt(i)) i.register(this); else this.register(i);
                }
            }
        }
        --this.t;
        return this;
    }
    registerResolver(t, e, n = false) {
        Et(t);
        const r = this.u;
        const i = r.get(t);
        if (null == i) {
            r.set(t, e);
            if (pt(t)) {
                if (void 0 !== this.res[t]) throw new Error(`AUR0007:${t}`);
                this.res[t] = e;
            }
        } else if (i instanceof Resolver && 4 === i.strategy) i.state.push(e); else r.set(t, new Resolver(t, 4, [ i, e ]));
        if (n) this.i.set(t, e);
        return e;
    }
    registerTransformer(t, e) {
        const n = this.getResolver(t);
        if (null == n) return false;
        if (n.getFactory) {
            const t = n.getFactory(this);
            if (null == t) return false;
            t.registerTransformer(e);
            return true;
        }
        return false;
    }
    getResolver(t, e = true) {
        Et(t);
        if (void 0 !== t.resolve) return t;
        let n = this;
        let r;
        while (null != n) {
            r = n.u.get(t);
            if (null == r) {
                if (null == n.parent) {
                    const r = gt(t) ? this : n;
                    return e ? this.R(t, r) : null;
                }
                n = n.parent;
            } else return r;
        }
        return null;
    }
    has(t, e = false) {
        return this.u.has(t) ? true : e && null != this.parent ? this.parent.has(t, true) : false;
    }
    get(t) {
        Et(t);
        if (t.$isResolver) return t.resolve(this, this);
        let e = this;
        let n;
        while (null != e) {
            n = e.u.get(t);
            if (null == n) {
                if (null == e.parent) {
                    const r = gt(t) ? this : e;
                    n = this.R(t, r);
                    return n.resolve(e, this);
                }
                e = e.parent;
            } else return n.resolve(e, this);
        }
        throw new Error(`AUR0008:${t}`);
    }
    getAll(t, e = false) {
        Et(t);
        const n = this;
        let r = n;
        let i;
        if (e) {
            let e = Ot;
            while (null != r) {
                i = r.u.get(t);
                if (null != i) e = e.concat(At(i, r, n));
                r = r.parent;
            }
            return e;
        } else while (null != r) {
            i = r.u.get(t);
            if (null == i) {
                r = r.parent;
                if (null == r) return Ot;
            } else return At(i, r, n);
        }
        return Ot;
    }
    invoke(t, e) {
        if ($(t)) throw jt(t);
        if (void 0 === e) return new t(...K(t).map(at, this)); else return new t(...K(t).map(at, this), ...e);
    }
    getFactory(t) {
        let e = this.h.get(t);
        if (void 0 === e) {
            if ($(t)) throw jt(t);
            this.h.set(t, e = new Factory(t, K(t)));
        }
        return e;
    }
    registerFactory(t, e) {
        this.h.set(t, e);
    }
    createChild(t) {
        if (void 0 === t && this.config.inheritParentResources) {
            if (this.config === ContainerConfiguration.DEFAULT) return new Container(this, this.config);
            return new Container(this, ContainerConfiguration.from({
                ...this.config,
                inheritParentResources: false
            }));
        }
        return new Container(this, ContainerConfiguration.from(null !== t && void 0 !== t ? t : this.config));
    }
    disposeResolvers() {
        const t = this.u;
        const e = this.i;
        let n;
        let r;
        for ([r, n] of e.entries()) {
            n.dispose();
            t.delete(r);
        }
        e.clear();
    }
    find(t, e) {
        const n = t.keyFrom(e);
        let r = this.res[n];
        if (void 0 === r) {
            r = this.root.res[n];
            if (void 0 === r) return null;
        }
        if (null === r) return null;
        if (I(r.getFactory)) {
            const e = r.getFactory(this);
            if (null === e || void 0 === e) return null;
            const n = j(t.name, e.Type);
            if (void 0 === n) return null;
            return n;
        }
        return null;
    }
    create(t, e) {
        var n, r;
        const i = t.keyFrom(e);
        let s = this.res[i];
        if (void 0 === s) {
            s = this.root.res[i];
            if (void 0 === s) return null;
            return null !== (n = s.resolve(this.root, this)) && void 0 !== n ? n : null;
        }
        return null !== (r = s.resolve(this, this)) && void 0 !== r ? r : null;
    }
    dispose() {
        if (this.i.size > 0) this.disposeResolvers();
        this.u.clear();
    }
    R(t, e) {
        if (!I(t)) throw new Error(`AUR0009:${t}`);
        if (yt.has(t.name)) throw new Error(`AUR0010:${t.name}`);
        if (vt(t)) {
            const n = t.register(e, t);
            if (!(n instanceof Object) || null == n.resolve) {
                const n = e.u.get(t);
                if (void 0 != n) return n;
                throw new Error(`AUR0011`);
            }
            return n;
        } else if (S.resource.has(t)) {
            const n = S.resource.getAll(t);
            if (1 === n.length) n[0].register(e); else {
                const t = n.length;
                for (let r = 0; r < t; ++r) n[r].register(e);
            }
            const r = e.u.get(t);
            if (void 0 != r) return r;
            throw new Error(`AUR0011`);
        } else if (t.$isInterface) throw new Error(`AUR0012:${t.friendlyName}`); else {
            const n = this.config.defaultResolver(t, e);
            e.u.set(t, n);
            return n;
        }
    }
}

class ParameterizedRegistry {
    constructor(t, e) {
        this.key = t;
        this.params = e;
    }
    register(t) {
        if (t.has(this.key, true)) {
            const e = t.get(this.key);
            e.register(t, ...this.params);
        } else t.register(...this.params.filter((t => "object" === typeof t)));
    }
}

const bt = new WeakMap;

function Ct(t) {
    return function(e, n, r) {
        let i = bt.get(e);
        if (void 0 === i) bt.set(e, i = new WeakMap);
        if (i.has(r)) return i.get(r);
        const s = t(e, n, r);
        i.set(r, s);
        return s;
    };
}

const $t = {
    instance(t, e) {
        return new Resolver(t, 0, e);
    },
    singleton(t, e) {
        return new Resolver(t, 1, e);
    },
    transient(t, e) {
        return new Resolver(t, 2, e);
    },
    callback(t, e) {
        return new Resolver(t, 3, e);
    },
    cachedCallback(t, e) {
        return new Resolver(t, 3, Ct(e));
    },
    aliasTo(t, e) {
        return new Resolver(e, 5, t);
    },
    defer(t, ...e) {
        return new ParameterizedRegistry(t, e);
    }
};

class InstanceProvider {
    constructor(t, e) {
        this.C = null;
        this.$ = t;
        if (void 0 !== e) this.C = e;
    }
    get friendlyName() {
        return this.$;
    }
    prepare(t) {
        this.C = t;
    }
    get $isResolver() {
        return true;
    }
    resolve() {
        if (null == this.C) throw new Error(`AUR0013:${this.$}`);
        return this.C;
    }
    dispose() {
        this.C = null;
    }
}

function Et(t) {
    if (null === t || void 0 === t) throw new Error(`AUR0014`);
}

function At(t, e, n) {
    if (t instanceof Resolver && 4 === t.strategy) {
        const r = t.state;
        let i = r.length;
        const s = new Array(i);
        while (i--) s[i] = r[i].resolve(e, n);
        return s;
    }
    return [ t.resolve(e, n) ];
}

function jt(t) {
    return new Error(`AUR0015:${t.name}`);
}

const Ot = Object.freeze([]);

const kt = Object.freeze({});

function It() {}

const Mt = G.createInterface("IPlatform");

/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */ function Tt(t, e, n, r) {
    var i = arguments.length, s = i < 3 ? e : null === r ? r = Object.getOwnPropertyDescriptor(e, n) : r, o;
    if ("object" === typeof Reflect && "function" === typeof Reflect.decorate) s = Reflect.decorate(t, e, n, r); else for (var u = t.length - 1; u >= 0; u--) if (o = t[u]) s = (i < 3 ? o(s) : i > 3 ? o(e, n, s) : o(e, n)) || s;
    return i > 3 && s && Object.defineProperty(e, n, s), s;
}

function Ft(t, e) {
    return function(n, r) {
        e(n, r, t);
    };
}

var Ut;

(function(t) {
    t[t["trace"] = 0] = "trace";
    t[t["debug"] = 1] = "debug";
    t[t["info"] = 2] = "info";
    t[t["warn"] = 3] = "warn";
    t[t["error"] = 4] = "error";
    t[t["fatal"] = 5] = "fatal";
    t[t["none"] = 6] = "none";
})(Ut || (Ut = {}));

var Lt;

(function(t) {
    t[t["noColors"] = 0] = "noColors";
    t[t["colors"] = 1] = "colors";
})(Lt || (Lt = {}));

const Pt = G.createInterface("ILogConfig", (t => t.instance(new LogConfig(0, 3))));

const Dt = G.createInterface("ISink");

const St = G.createInterface("ILogEventFactory", (t => t.singleton(_t)));

const Nt = G.createInterface("ILogger", (t => t.singleton(Vt)));

const Wt = G.createInterface("ILogScope");

const Bt = Object.freeze({
    key: F("logger-sink-handles"),
    define(t, e) {
        k(this.key, e.handles, t.prototype);
        return t;
    },
    getHandles(e) {
        return _aurelia_metadata__WEBPACK_IMPORTED_MODULE_0__.Metadata.get(this.key, e);
    }
});

function Qt(t) {
    return function(e) {
        return Bt.define(e, t);
    };
}

const xt = C({
    red(t) {
        return `[31m${t}[39m`;
    },
    green(t) {
        return `[32m${t}[39m`;
    },
    yellow(t) {
        return `[33m${t}[39m`;
    },
    blue(t) {
        return `[34m${t}[39m`;
    },
    magenta(t) {
        return `[35m${t}[39m`;
    },
    cyan(t) {
        return `[36m${t}[39m`;
    },
    white(t) {
        return `[37m${t}[39m`;
    },
    grey(t) {
        return `[90m${t}[39m`;
    }
});

class LogConfig {
    constructor(t, e) {
        this.colorOptions = t;
        this.level = e;
    }
}

const zt = function() {
    const t = [ C({
        TRC: "TRC",
        DBG: "DBG",
        INF: "INF",
        WRN: "WRN",
        ERR: "ERR",
        FTL: "FTL",
        QQQ: "???"
    }), C({
        TRC: xt.grey("TRC"),
        DBG: xt.grey("DBG"),
        INF: xt.white("INF"),
        WRN: xt.yellow("WRN"),
        ERR: xt.red("ERR"),
        FTL: xt.red("FTL"),
        QQQ: xt.grey("???")
    }) ];
    return function(e, n) {
        if (e <= 0) return t[n].TRC;
        if (e <= 1) return t[n].DBG;
        if (e <= 2) return t[n].INF;
        if (e <= 3) return t[n].WRN;
        if (e <= 4) return t[n].ERR;
        if (e <= 5) return t[n].FTL;
        return t[n].QQQ;
    };
}();

function Gt(t, e) {
    if (0 === e) return t.join(".");
    return t.map(xt.cyan).join(".");
}

function Kt(t, e) {
    if (0 === e) return new Date(t).toISOString();
    return xt.grey(new Date(t).toISOString());
}

class DefaultLogEvent {
    constructor(t, e, n, r, i, s) {
        this.severity = t;
        this.message = e;
        this.optionalParams = n;
        this.scope = r;
        this.colorOptions = i;
        this.timestamp = s;
    }
    toString() {
        const {severity: t, message: e, scope: n, colorOptions: r, timestamp: i} = this;
        if (0 === n.length) return `${Kt(i, r)} [${zt(t, r)}] ${e}`;
        return `${Kt(i, r)} [${zt(t, r)} ${Gt(n, r)}] ${e}`;
    }
}

let _t = class DefaultLogEventFactory {
    constructor(t) {
        this.config = t;
    }
    createLogEvent(t, e, n, r) {
        return new DefaultLogEvent(e, n, r, t.scope, this.config.colorOptions, Date.now());
    }
};

_t = Tt([ Ft(0, Pt) ], _t);

let Ht = class ConsoleSink {
    constructor(t) {
        const e = t.console;
        this.handleEvent = function t(n) {
            const r = n.optionalParams;
            if (void 0 === r || 0 === r.length) {
                const t = n.toString();
                switch (n.severity) {
                  case 0:
                  case 1:
                    return e.debug(t);

                  case 2:
                    return e.info(t);

                  case 3:
                    return e.warn(t);

                  case 4:
                  case 5:
                    return e.error(t);
                }
            } else {
                let t = n.toString();
                let i = 0;
                while (t.includes("%s")) t = t.replace("%s", String(r[i++]));
                switch (n.severity) {
                  case 0:
                  case 1:
                    return e.debug(t, ...r.slice(i));

                  case 2:
                    return e.info(t, ...r.slice(i));

                  case 3:
                    return e.warn(t, ...r.slice(i));

                  case 4:
                  case 5:
                    return e.error(t, ...r.slice(i));
                }
            }
        };
    }
    static register(t) {
        $t.singleton(Dt, ConsoleSink).register(t);
    }
};

Ht = Tt([ Ft(0, Mt) ], Ht);

let Vt = class DefaultLogger {
    constructor(t, e, n, r = [], i = null) {
        var s, o, u, l, c, f;
        this.config = t;
        this.factory = e;
        this.scope = r;
        this.scopedLoggers = Object.create(null);
        let a;
        let h;
        let d;
        let v;
        let w;
        let g;
        if (null === i) {
            this.root = this;
            this.parent = this;
            a = this.traceSinks = [];
            h = this.debugSinks = [];
            d = this.infoSinks = [];
            v = this.warnSinks = [];
            w = this.errorSinks = [];
            g = this.fatalSinks = [];
            for (const t of n) {
                const e = Bt.getHandles(t);
                if (null !== (s = null === e || void 0 === e ? void 0 : e.includes(0)) && void 0 !== s ? s : true) a.push(t);
                if (null !== (o = null === e || void 0 === e ? void 0 : e.includes(1)) && void 0 !== o ? o : true) h.push(t);
                if (null !== (u = null === e || void 0 === e ? void 0 : e.includes(2)) && void 0 !== u ? u : true) d.push(t);
                if (null !== (l = null === e || void 0 === e ? void 0 : e.includes(3)) && void 0 !== l ? l : true) v.push(t);
                if (null !== (c = null === e || void 0 === e ? void 0 : e.includes(4)) && void 0 !== c ? c : true) w.push(t);
                if (null !== (f = null === e || void 0 === e ? void 0 : e.includes(5)) && void 0 !== f ? f : true) g.push(t);
            }
        } else {
            this.root = i.root;
            this.parent = i;
            a = this.traceSinks = i.traceSinks;
            h = this.debugSinks = i.debugSinks;
            d = this.infoSinks = i.infoSinks;
            v = this.warnSinks = i.warnSinks;
            w = this.errorSinks = i.errorSinks;
            g = this.fatalSinks = i.fatalSinks;
        }
    }
    trace(t, ...e) {
        if (this.config.level <= 0) this.emit(this.traceSinks, 0, t, e);
    }
    debug(t, ...e) {
        if (this.config.level <= 1) this.emit(this.debugSinks, 1, t, e);
    }
    info(t, ...e) {
        if (this.config.level <= 2) this.emit(this.infoSinks, 2, t, e);
    }
    warn(t, ...e) {
        if (this.config.level <= 3) this.emit(this.warnSinks, 3, t, e);
    }
    error(t, ...e) {
        if (this.config.level <= 4) this.emit(this.errorSinks, 4, t, e);
    }
    fatal(t, ...e) {
        if (this.config.level <= 5) this.emit(this.fatalSinks, 5, t, e);
    }
    scopeTo(t) {
        const e = this.scopedLoggers;
        let n = e[t];
        if (void 0 === n) n = e[t] = new DefaultLogger(this.config, this.factory, void 0, this.scope.concat(t), this);
        return n;
    }
    emit(t, e, n, r) {
        const i = I(n) ? n() : n;
        const s = this.factory.createLogEvent(this, e, i, r);
        for (let e = 0, n = t.length; e < n; ++e) t[e].handleEvent(s);
    }
};

Tt([ m ], Vt.prototype, "trace", null);

Tt([ m ], Vt.prototype, "debug", null);

Tt([ m ], Vt.prototype, "info", null);

Tt([ m ], Vt.prototype, "warn", null);

Tt([ m ], Vt.prototype, "error", null);

Tt([ m ], Vt.prototype, "fatal", null);

Vt = Tt([ Ft(0, Pt), Ft(1, St), Ft(2, nt(Dt)), Ft(3, it(Wt)), Ft(4, st) ], Vt);

const qt = C({
    create({level: t = 3, colorOptions: e = 0, sinks: n = []} = {}) {
        return C({
            register(r) {
                r.register($t.instance(Pt, new LogConfig(e, t)));
                for (const t of n) if (I(t)) r.register($t.singleton(Dt, t)); else r.register(t);
                return r;
            }
        });
    }
});

const Jt = G.createInterface((t => t.singleton(ModuleLoader)));

function Xt(t) {
    return t;
}

class ModuleTransformer {
    constructor(t) {
        this.$transform = t;
        this.A = new Map;
        this.j = new Map;
    }
    transform(t) {
        if (t instanceof Promise) return this.O(t); else if ("object" === typeof t && null !== t) return this.I(t); else throw new Error(`Invalid input: ${String(t)}. Expected Promise or Object.`);
    }
    O(t) {
        if (this.A.has(t)) return this.A.get(t);
        const e = t.then((t => this.I(t)));
        this.A.set(t, e);
        void e.then((e => {
            this.A.set(t, e);
        }));
        return e;
    }
    I(t) {
        if (this.j.has(t)) return this.j.get(t);
        const e = this.$transform(this.M(t));
        this.j.set(t, e);
        if (e instanceof Promise) void e.then((e => {
            this.j.set(t, e);
        }));
        return e;
    }
    M(t) {
        let e;
        let n;
        let r;
        let i;
        const s = [];
        for (const o in t) {
            switch (typeof (e = t[o])) {
              case "object":
                if (null === e) continue;
                n = I(e.register);
                r = false;
                i = Ot;
                break;

              case "function":
                n = I(e.register);
                r = void 0 !== e.prototype;
                i = S.resource.getAll(e);
                break;

              default:
                continue;
            }
            s.push(new ModuleItem(o, e, n, r, i));
        }
        return new AnalyzedModule(t, s);
    }
}

class ModuleLoader {
    constructor() {
        this.transformers = new Map;
    }
    load(t, e = Xt) {
        const n = this.transformers;
        let r = n.get(e);
        if (void 0 === r) n.set(e, r = new ModuleTransformer(e));
        return r.transform(t);
    }
    dispose() {
        this.transformers.clear();
    }
}

class AnalyzedModule {
    constructor(t, e) {
        this.raw = t;
        this.items = e;
    }
}

class ModuleItem {
    constructor(t, e, n, r, i) {
        this.key = t;
        this.value = e;
        this.isRegistry = n;
        this.isConstructable = r;
        this.definitions = i;
    }
}

class Handler {
    constructor(t, e) {
        this.messageType = t;
        this.callback = e;
    }
    handle(t) {
        if (t instanceof this.messageType) this.callback.call(null, t);
    }
}

const Yt = G.createInterface("IEventAggregator", (t => t.singleton(EventAggregator)));

class EventAggregator {
    constructor() {
        this.eventLookup = {};
        this.messageHandlers = [];
    }
    publish(t, e) {
        if (!t) throw new Error(`Invalid channel name or instance: ${t}.`);
        if (M(t)) {
            let n = this.eventLookup[t];
            if (void 0 !== n) {
                n = n.slice();
                let r = n.length;
                while (r-- > 0) n[r](e, t);
            }
        } else {
            const e = this.messageHandlers.slice();
            let n = e.length;
            while (n-- > 0) e[n].handle(t);
        }
    }
    subscribe(t, e) {
        if (!t) throw new Error(`Invalid channel name or type: ${t}.`);
        let n;
        let r;
        if (M(t)) {
            if (void 0 === this.eventLookup[t]) this.eventLookup[t] = [];
            n = e;
            r = this.eventLookup[t];
        } else {
            n = new Handler(t, e);
            r = this.messageHandlers;
        }
        r.push(n);
        return {
            dispose() {
                const t = r.indexOf(n);
                if (-1 !== t) r.splice(t, 1);
            }
        };
    }
    subscribeOnce(t, e) {
        const n = this.subscribe(t, (function(t, r) {
            n.dispose();
            e(t, r);
        }));
        return n;
    }
}


//# sourceMappingURL=index.js.map


/***/ }),

/***/ "./node_modules/@aurelia/metadata/dist/esm/index.js":
/*!**********************************************************!*\
  !*** ./node_modules/@aurelia/metadata/dist/esm/index.js ***!
  \**********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Metadata": () => /* binding */ A,
/* harmony export */   "applyMetadataPolyfill": () => /* binding */ S,
/* harmony export */   "isNullOrUndefined": () => /* binding */ e,
/* harmony export */   "isObject": () => /* binding */ t,
/* harmony export */   "metadata": () => /* binding */ g
/* harmony export */ });
function t(t) {
    return "object" === typeof t && null !== t || "function" === typeof t;
}

function e(t) {
    return null === t || void 0 === t;
}

const n = new WeakMap;

function r(t, e, n, r, a) {
    return new TypeError(`${t}(${e.map(String).join(",")}) - Expected '${n}' to be of type ${a}, but got: ${Object.prototype.toString.call(r)} (${String(r)})`);
}

function a(t) {
    switch (typeof t) {
      case "undefined":
      case "string":
      case "symbol":
        return t;

      default:
        return `${t}`;
    }
}

function o(t) {
    switch (typeof t) {
      case "string":
      case "symbol":
        return t;

      default:
        return `${t}`;
    }
}

function i(t) {
    switch (typeof t) {
      case "undefined":
      case "string":
      case "symbol":
        return t;

      default:
        throw new TypeError(`Invalid metadata propertyKey: ${t}.`);
    }
}

function u(t, e, r) {
    let a = n.get(t);
    if (void 0 === a) {
        if (!r) return;
        a = new Map;
        n.set(t, a);
    }
    let o = a.get(e);
    if (void 0 === o) {
        if (!r) return;
        o = new Map;
        a.set(e, o);
    }
    return o;
}

function c(t, e, n) {
    const r = u(e, n, false);
    if (void 0 === r) return false;
    return r.has(t);
}

function f(t, e, n) {
    if (c(t, e, n)) return true;
    const r = Object.getPrototypeOf(e);
    if (null !== r) return f(t, r, n);
    return false;
}

function s(t, e, n) {
    const r = u(e, n, false);
    if (void 0 === r) return;
    return r.get(t);
}

function l(t, e, n) {
    if (c(t, e, n)) return s(t, e, n);
    const r = Object.getPrototypeOf(e);
    if (null !== r) return l(t, r, n);
    return;
}

function d(t, e, n, r) {
    const a = u(n, r, true);
    a.set(t, e);
}

function w(t, e) {
    const n = [];
    const r = u(t, e, false);
    if (void 0 === r) return n;
    const a = r.keys();
    let o = 0;
    for (const t of a) {
        n[o] = t;
        ++o;
    }
    return n;
}

function y(t, e) {
    const n = w(t, e);
    const r = Object.getPrototypeOf(t);
    if (null === r) return n;
    const a = y(r, e);
    const o = n.length;
    if (0 === o) return a;
    const i = a.length;
    if (0 === i) return n;
    const u = new Set;
    const c = [];
    let f = 0;
    let s;
    for (let t = 0; t < o; ++t) {
        s = n[t];
        if (!u.has(s)) {
            u.add(s);
            c[f] = s;
            ++f;
        }
    }
    for (let t = 0; t < i; ++t) {
        s = a[t];
        if (!u.has(s)) {
            u.add(s);
            c[f] = s;
            ++f;
        }
    }
    return c;
}

function h(t, e, n) {
    const r = u(t, n, false);
    if (void 0 === r) return false;
    return r.delete(e);
}

function g(e, n) {
    function a(a, o) {
        if (!t(a)) throw r("@metadata", [ e, n, a, o ], "target", a, "Object or Function");
        d(e, n, a, i(o));
    }
    return a;
}

function p(n, a, i, u) {
    if (void 0 !== i) {
        if (!Array.isArray(n)) throw r("Metadata.decorate", [ n, a, i, u ], "decorators", n, "Array");
        if (!t(a)) throw r("Metadata.decorate", [ n, a, i, u ], "target", a, "Object or Function");
        if (!t(u) && !e(u)) throw r("Metadata.decorate", [ n, a, i, u ], "attributes", u, "Object, Function, null, or undefined");
        if (null === u) u = void 0;
        i = o(i);
        return b(n, a, i, u);
    } else {
        if (!Array.isArray(n)) throw r("Metadata.decorate", [ n, a, i, u ], "decorators", n, "Array");
        if ("function" !== typeof a) throw r("Metadata.decorate", [ n, a, i, u ], "target", a, "Function");
        return M(n, a);
    }
}

function M(t, n) {
    for (let a = t.length - 1; a >= 0; --a) {
        const o = t[a];
        const i = o(n);
        if (!e(i)) {
            if ("function" !== typeof i) throw r("DecorateConstructor", [ t, n ], "decorated", i, "Function, null, or undefined");
            n = i;
        }
    }
    return n;
}

function b(n, a, o, i) {
    for (let u = n.length - 1; u >= 0; --u) {
        const c = n[u];
        const f = c(a, o, i);
        if (!e(f)) {
            if (!t(f)) throw r("DecorateProperty", [ n, a, o, i ], "decorated", f, "Object, Function, null, or undefined");
            i = f;
        }
    }
    return i;
}

function O(e, n, o, i) {
    if (!t(o)) throw r("Metadata.define", [ e, n, o, i ], "target", o, "Object or Function");
    return d(e, n, o, a(i));
}

function m(e, n, o) {
    if (!t(n)) throw r("Metadata.has", [ e, n, o ], "target", n, "Object or Function");
    return f(e, n, a(o));
}

function j(e, n, o) {
    if (!t(n)) throw r("Metadata.hasOwn", [ e, n, o ], "target", n, "Object or Function");
    return c(e, n, a(o));
}

function v(e, n, o) {
    if (!t(n)) throw r("Metadata.get", [ e, n, o ], "target", n, "Object or Function");
    return l(e, n, a(o));
}

function $(e, n, o) {
    if (!t(n)) throw r("Metadata.getOwn", [ e, n, o ], "target", n, "Object or Function");
    return s(e, n, a(o));
}

function F(e, n) {
    if (!t(e)) throw r("Metadata.getKeys", [ e, n ], "target", e, "Object or Function");
    return y(e, a(n));
}

function K(e, n) {
    if (!t(e)) throw r("Metadata.getOwnKeys", [ e, n ], "target", e, "Object or Function");
    return w(e, a(n));
}

function E(e, n, o) {
    if (!t(n)) throw r("Metadata.delete", [ e, n, o ], "target", n, "Object or Function");
    return h(n, e, a(o));
}

const A = {
    define: O,
    has: m,
    hasOwn: j,
    get: v,
    getOwn: $,
    getKeys: F,
    getOwnKeys: K,
    delete: E
};

function k(t, e, n, r, a) {
    if (!Reflect.defineProperty(t, e, {
        writable: r,
        enumerable: false,
        configurable: a,
        value: n
    })) throw new Error(`Unable to apply metadata polyfill: could not add property '${e}' to the global Reflect object`);
}

const R = "[[$au]]";

function C(t) {
    return R in t;
}

function I(t, e, r) {
    k(t, R, n, e, r);
    k(t, "metadata", g, e, r);
    k(t, "decorate", p, e, r);
    k(t, "defineMetadata", O, e, r);
    k(t, "hasMetadata", m, e, r);
    k(t, "hasOwnMetadata", j, e, r);
    k(t, "getMetadata", v, e, r);
    k(t, "getOwnMetadata", $, e, r);
    k(t, "getMetadataKeys", F, e, r);
    k(t, "getOwnMetadataKeys", K, e, r);
    k(t, "deleteMetadata", E, e, r);
}

function S(t, e = true, r = false, a = true, o = true) {
    if (C(t)) {
        if (t[R] === n) return;
        throw new Error(`Conflicting @aurelia/metadata module import detected. Please make sure you have the same version of all Aurelia packages in your dependency tree.`);
    }
    const i = [ "metadata", "decorate", "defineMetadata", "hasMetadata", "hasOwnMetadata", "getMetadata", "getOwnMetadata", "getMetadataKeys", "getOwnMetadataKeys", "deleteMetadata" ].filter((function(t) {
        return t in Reflect;
    }));
    if (i.length > 0) {
        if (e) {
            const t = i.map((function(t) {
                const e = `${Reflect[t].toString().slice(0, 100)}...`;
                return `${t}:\n${e}`;
            })).join("\n\n");
            throw new Error(`Conflicting reflect.metadata polyfill found. If you have 'reflect-metadata' or any other reflect polyfill imported, please remove it, if not (or if you must use a specific polyfill) please file an issue at https://github.com/aurelia/aurelia/issues so that we can look into compatibility options for this scenario. Implementation summary:\n\n${t}`);
        } else if (r) I(t, a, o);
    } else I(t, a, o);
}


//# sourceMappingURL=index.js.map


/***/ }),

/***/ "./node_modules/@aurelia/platform-browser/dist/esm/index.js":
/*!******************************************************************!*\
  !*** ./node_modules/@aurelia/platform-browser/dist/esm/index.js ***!
  \******************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "BrowserPlatform": () => /* binding */ BrowserPlatform
/* harmony export */ });
/* harmony import */ var _aurelia_platform__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @aurelia/platform */ "./node_modules/@aurelia/platform/dist/esm/index.js");


const s = new Map;

function e(t) {
    return function i() {
        throw new Error(`The PLATFORM did not receive a valid reference to the global function '${t}'.`);
    };
}

class BrowserPlatform extends _aurelia_platform__WEBPACK_IMPORTED_MODULE_0__.Platform {
    constructor(t, s = {}) {
        super(t, s);
        this.t = false;
        this.i = -1;
        this.h = false;
        this.u = -1;
        ("Node,Element,HTMLElement,CustomEvent,CSSStyleSheet,ShadowRoot,MutationObserver," + "window,document,location,history,navigator,customElements").split(",").forEach((i => {
            this[i] = i in s ? s[i] : t[i];
        }));
        "fetch,requestAnimationFrame,cancelAnimationFrame".split(",").forEach((i => {
            var h, r;
            this[i] = i in s ? s[i] : null !== (r = null === (h = t[i]) || void 0 === h ? void 0 : h.bind(t)) && void 0 !== r ? r : e(i);
        }));
        this.flushDomRead = this.flushDomRead.bind(this);
        this.flushDomWrite = this.flushDomWrite.bind(this);
        this.domReadQueue = new _aurelia_platform__WEBPACK_IMPORTED_MODULE_0__.TaskQueue(this, this.requestDomRead.bind(this), this.cancelDomRead.bind(this));
        this.domWriteQueue = new _aurelia_platform__WEBPACK_IMPORTED_MODULE_0__.TaskQueue(this, this.requestDomWrite.bind(this), this.cancelDomWrite.bind(this));
    }
    static getOrCreate(t, i = {}) {
        let e = s.get(t);
        if (void 0 === e) s.set(t, e = new BrowserPlatform(t, i));
        return e;
    }
    static set(t, i) {
        s.set(t, i);
    }
    requestDomRead() {
        this.t = true;
        if (-1 === this.u) this.u = this.requestAnimationFrame(this.flushDomWrite);
    }
    cancelDomRead() {
        this.t = false;
        if (this.i > -1) {
            this.clearTimeout(this.i);
            this.i = -1;
        }
        if (false === this.h && this.u > -1) {
            this.cancelAnimationFrame(this.u);
            this.u = -1;
        }
    }
    flushDomRead() {
        this.i = -1;
        if (true === this.t) {
            this.t = false;
            this.domReadQueue.flush();
        }
    }
    requestDomWrite() {
        this.h = true;
        if (-1 === this.u) this.u = this.requestAnimationFrame(this.flushDomWrite);
    }
    cancelDomWrite() {
        this.h = false;
        if (this.u > -1 && (false === this.t || this.i > -1)) {
            this.cancelAnimationFrame(this.u);
            this.u = -1;
        }
    }
    flushDomWrite() {
        this.u = -1;
        if (true === this.h) {
            this.h = false;
            this.domWriteQueue.flush();
        }
        if (true === this.t && -1 === this.i) this.i = this.setTimeout(this.flushDomRead, 0);
    }
}


//# sourceMappingURL=index.js.map


/***/ }),

/***/ "./node_modules/@aurelia/platform/dist/esm/index.js":
/*!**********************************************************!*\
  !*** ./node_modules/@aurelia/platform/dist/esm/index.js ***!
  \**********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Platform": () => /* binding */ Platform,
/* harmony export */   "Task": () => /* binding */ Task,
/* harmony export */   "TaskAbortError": () => /* binding */ TaskAbortError,
/* harmony export */   "TaskQueue": () => /* binding */ TaskQueue,
/* harmony export */   "TaskQueuePriority": () => /* binding */ n,
/* harmony export */   "TaskStatus": () => /* binding */ h
/* harmony export */ });
const t = new Map;

function s(t) {
    return function s() {
        throw new Error(`The PLATFORM did not receive a valid reference to the global function '${t}'.`);
    };
}

class Platform {
    constructor(t, i = {}) {
        var e, h, r, n, o, a, l, c, u, f, d, v, w;
        this.macroTaskRequested = false;
        this.macroTaskHandle = -1;
        this.globalThis = t;
        this.decodeURI = "decodeURI" in i ? i.decodeURI : t.decodeURI;
        this.decodeURIComponent = "decodeURIComponent" in i ? i.decodeURIComponent : t.decodeURIComponent;
        this.encodeURI = "encodeURI" in i ? i.encodeURI : t.encodeURI;
        this.encodeURIComponent = "encodeURIComponent" in i ? i.encodeURIComponent : t.encodeURIComponent;
        this.Date = "Date" in i ? i.Date : t.Date;
        this.Reflect = "Reflect" in i ? i.Reflect : t.Reflect;
        this.clearInterval = "clearInterval" in i ? i.clearInterval : null !== (h = null === (e = t.clearInterval) || void 0 === e ? void 0 : e.bind(t)) && void 0 !== h ? h : s("clearInterval");
        this.clearTimeout = "clearTimeout" in i ? i.clearTimeout : null !== (n = null === (r = t.clearTimeout) || void 0 === r ? void 0 : r.bind(t)) && void 0 !== n ? n : s("clearTimeout");
        this.queueMicrotask = "queueMicrotask" in i ? i.queueMicrotask : null !== (a = null === (o = t.queueMicrotask) || void 0 === o ? void 0 : o.bind(t)) && void 0 !== a ? a : s("queueMicrotask");
        this.setInterval = "setInterval" in i ? i.setInterval : null !== (c = null === (l = t.setInterval) || void 0 === l ? void 0 : l.bind(t)) && void 0 !== c ? c : s("setInterval");
        this.setTimeout = "setTimeout" in i ? i.setTimeout : null !== (f = null === (u = t.setTimeout) || void 0 === u ? void 0 : u.bind(t)) && void 0 !== f ? f : s("setTimeout");
        this.console = "console" in i ? i.console : t.console;
        this.performanceNow = "performanceNow" in i ? i.performanceNow : null !== (w = null === (v = null === (d = t.performance) || void 0 === d ? void 0 : d.now) || void 0 === v ? void 0 : v.bind(t.performance)) && void 0 !== w ? w : s("performance.now");
        this.flushMacroTask = this.flushMacroTask.bind(this);
        this.taskQueue = new TaskQueue(this, this.requestMacroTask.bind(this), this.cancelMacroTask.bind(this));
    }
    static getOrCreate(s, i = {}) {
        let e = t.get(s);
        if (void 0 === e) t.set(s, e = new Platform(s, i));
        return e;
    }
    static set(s, i) {
        t.set(s, i);
    }
    requestMacroTask() {
        this.macroTaskRequested = true;
        if (-1 === this.macroTaskHandle) this.macroTaskHandle = this.setTimeout(this.flushMacroTask, 0);
    }
    cancelMacroTask() {
        this.macroTaskRequested = false;
        if (this.macroTaskHandle > -1) {
            this.clearTimeout(this.macroTaskHandle);
            this.macroTaskHandle = -1;
        }
    }
    flushMacroTask() {
        this.macroTaskHandle = -1;
        if (true === this.macroTaskRequested) {
            this.macroTaskRequested = false;
            this.taskQueue.flush();
        }
    }
}

function i(t) {
    return t.persistent;
}

class TaskQueue {
    constructor(t, s, i) {
        this.platform = t;
        this.$request = s;
        this.$cancel = i;
        this.t = void 0;
        this.i = 0;
        this.processing = [];
        this.pending = [];
        this.delayed = [];
        this.flushRequested = false;
        this.h = void 0;
        this.taskPool = [];
        this.u = 0;
        this.T = 0;
        this.$ = 0;
        this.I = () => {
            if (!this.flushRequested) {
                this.flushRequested = true;
                this.T = this.platform.performanceNow();
                this.$request();
            }
        };
        this.M = new Tracer(t.console);
    }
    get isEmpty() {
        return 0 === this.i && 0 === this.processing.length && 0 === this.pending.length && 0 === this.delayed.length;
    }
    get P() {
        return 0 === this.i && this.processing.every(i) && this.pending.every(i) && this.delayed.every(i);
    }
    flush(t = this.platform.performanceNow()) {
        this.flushRequested = false;
        this.$ = t;
        if (void 0 === this.t) {
            if (this.pending.length > 0) {
                this.processing.push(...this.pending);
                this.pending.length = 0;
            }
            if (this.delayed.length > 0) {
                let s = -1;
                while (++s < this.delayed.length && this.delayed[s].queueTime <= t) ;
                this.processing.push(...this.delayed.splice(0, s));
            }
            let s;
            while (this.processing.length > 0) {
                (s = this.processing.shift()).run();
                if (1 === s.status) if (true === s.suspend) {
                    this.t = s;
                    this.I();
                    return;
                } else ++this.i;
            }
            if (this.pending.length > 0) {
                this.processing.push(...this.pending);
                this.pending.length = 0;
            }
            if (this.delayed.length > 0) {
                let s = -1;
                while (++s < this.delayed.length && this.delayed[s].queueTime <= t) ;
                this.processing.push(...this.delayed.splice(0, s));
            }
            if (this.processing.length > 0 || this.delayed.length > 0 || this.i > 0) this.I();
            if (void 0 !== this.h && this.P) {
                const t = this.h;
                this.h = void 0;
                t.resolve();
            }
        } else this.I();
    }
    cancel() {
        if (this.flushRequested) {
            this.$cancel();
            this.flushRequested = false;
        }
    }
    async yield() {
        if (this.isEmpty) ; else {
            if (void 0 === this.h) this.h = u();
            await this.h;
        }
    }
    queueTask(t, s) {
        const {delay: i, preempt: e, persistent: h, reusable: r, suspend: n} = {
            ...o,
            ...s
        };
        if (e) {
            if (i > 0) throw new Error(`Invalid arguments: preempt cannot be combined with a greater-than-zero delay`);
            if (h) throw new Error(`Invalid arguments: preempt cannot be combined with persistent`);
        }
        if (0 === this.processing.length) this.I();
        const a = this.platform.performanceNow();
        let l;
        if (r) {
            const s = this.taskPool;
            const o = this.u - 1;
            if (o >= 0) {
                l = s[o];
                s[o] = void 0;
                this.u = o;
                l.reuse(a, i, e, h, n, t);
            } else l = new Task(this.M, this, a, a + i, e, h, n, r, t);
        } else l = new Task(this.M, this, a, a + i, e, h, n, r, t);
        if (e) this.processing[this.processing.length] = l; else if (0 === i) this.pending[this.pending.length] = l; else this.delayed[this.delayed.length] = l;
        return l;
    }
    remove(t) {
        let s = this.processing.indexOf(t);
        if (s > -1) {
            this.processing.splice(s, 1);
            return;
        }
        s = this.pending.indexOf(t);
        if (s > -1) {
            this.pending.splice(s, 1);
            return;
        }
        s = this.delayed.indexOf(t);
        if (s > -1) {
            this.delayed.splice(s, 1);
            return;
        }
        throw new Error(`Task #${t.id} could not be found`);
    }
    returnToPool(t) {
        this.taskPool[this.u++] = t;
    }
    resetPersistentTask(t) {
        t.reset(this.platform.performanceNow());
        if (t.createdTime === t.queueTime) this.pending[this.pending.length] = t; else this.delayed[this.delayed.length] = t;
    }
    completeAsyncTask(t) {
        var s;
        if (true === t.suspend) {
            if (this.t !== t) throw new Error(`Async task completion mismatch: suspenderTask=${null === (s = this.t) || void 0 === s ? void 0 : s.id}, task=${t.id}`);
            this.t = void 0;
        } else --this.i;
        if (void 0 !== this.h && this.P) {
            const t = this.h;
            this.h = void 0;
            t.resolve();
        }
        if (this.isEmpty) this.cancel();
    }
}

class TaskAbortError extends Error {
    constructor(t) {
        super("Task was canceled.");
        this.task = t;
    }
}

let e = 0;

var h;

(function(t) {
    t[t["pending"] = 0] = "pending";
    t[t["running"] = 1] = "running";
    t[t["completed"] = 2] = "completed";
    t[t["canceled"] = 3] = "canceled";
})(h || (h = {}));

class Task {
    constructor(t, s, i, h, r, n, o, a, l) {
        this.taskQueue = s;
        this.createdTime = i;
        this.queueTime = h;
        this.preempt = r;
        this.persistent = n;
        this.suspend = o;
        this.reusable = a;
        this.callback = l;
        this.id = ++e;
        this.R = void 0;
        this.A = void 0;
        this.q = void 0;
        this.C = 0;
        this.M = t;
    }
    get result() {
        const t = this.q;
        if (void 0 === t) switch (this.C) {
          case 0:
            {
                const t = this.q = u();
                this.R = t.resolve;
                this.A = t.reject;
                return t;
            }

          case 1:
            throw new Error("Trying to await task from within task will cause a deadlock.");

          case 2:
            return this.q = Promise.resolve();

          case 3:
            return this.q = Promise.reject(new TaskAbortError(this));
        }
        return t;
    }
    get status() {
        return this.C;
    }
    run(t = this.taskQueue.platform.performanceNow()) {
        if (0 !== this.C) throw new Error(`Cannot run task in ${this.C} state`);
        const {persistent: s, reusable: i, taskQueue: e, callback: h, R: r, A: n, createdTime: o} = this;
        let a;
        this.C = 1;
        try {
            a = h(t - o);
            if (a instanceof Promise) a.then((t => {
                if (this.persistent) e["resetPersistentTask"](this); else {
                    if (s) this.C = 3; else this.C = 2;
                    this.dispose();
                }
                e["completeAsyncTask"](this);
                if (false) {}
                if (void 0 !== r) r(t);
                if (!this.persistent && i) e["returnToPool"](this);
            })).catch((t => {
                if (!this.persistent) this.dispose();
                e["completeAsyncTask"](this);
                if (false) {}
                if (void 0 !== n) n(t); else throw t;
            })); else {
                if (this.persistent) e["resetPersistentTask"](this); else {
                    if (s) this.C = 3; else this.C = 2;
                    this.dispose();
                }
                if (false) {}
                if (void 0 !== r) r(a);
                if (!this.persistent && i) e["returnToPool"](this);
            }
        } catch (t) {
            if (!this.persistent) this.dispose();
            if (void 0 !== n) n(t); else throw t;
        }
    }
    cancel() {
        if (0 === this.C) {
            const t = this.taskQueue;
            const s = this.reusable;
            const i = this.A;
            t.remove(this);
            if (t.isEmpty) t.cancel();
            this.C = 3;
            this.dispose();
            if (s) t["returnToPool"](this);
            if (void 0 !== i) i(new TaskAbortError(this));
            return true;
        } else if (1 === this.C && this.persistent) {
            this.persistent = false;
            return true;
        }
        return false;
    }
    reset(t) {
        const s = this.queueTime - this.createdTime;
        this.createdTime = t;
        this.queueTime = t + s;
        this.C = 0;
        this.R = void 0;
        this.A = void 0;
        this.q = void 0;
    }
    reuse(t, s, i, e, h, r) {
        this.createdTime = t;
        this.queueTime = t + s;
        this.preempt = i;
        this.persistent = e;
        this.suspend = h;
        this.callback = r;
        this.C = 0;
    }
    dispose() {
        this.callback = void 0;
        this.R = void 0;
        this.A = void 0;
        this.q = void 0;
    }
}

function r(t) {
    switch (t) {
      case 0:
        return "pending";

      case 1:
        return "running";

      case 3:
        return "canceled";

      case 2:
        return "completed";
    }
}

class Tracer {
    constructor(t) {
        this.console = t;
        this.enabled = false;
        this.depth = 0;
    }
    enter(t, s) {
        this.log(`${"  ".repeat(this.depth++)}> `, t, s);
    }
    leave(t, s) {
        this.log(`${"  ".repeat(--this.depth)}< `, t, s);
    }
    trace(t, s) {
        this.log(`${"  ".repeat(this.depth)}- `, t, s);
    }
    log(t, s, i) {
        if (s instanceof TaskQueue) {
            const e = s["processing"].length;
            const h = s["pending"].length;
            const r = s["delayed"].length;
            const n = s["flushRequested"];
            const o = !!s.t;
            const a = `processing=${e} pending=${h} delayed=${r} flushReq=${n} susTask=${o}`;
            this.console.log(`${t}[Q.${i}] ${a}`);
        } else {
            const e = s["id"];
            const h = Math.round(10 * s["createdTime"]) / 10;
            const n = Math.round(10 * s["queueTime"]) / 10;
            const o = s["preempt"];
            const a = s["reusable"];
            const l = s["persistent"];
            const c = s["suspend"];
            const u = r(s["C"]);
            const f = `id=${e} created=${h} queue=${n} preempt=${o} persistent=${l} reusable=${a} status=${u} suspend=${c}`;
            this.console.log(`${t}[T.${i}] ${f}`);
        }
    }
}

var n;

(function(t) {
    t[t["render"] = 0] = "render";
    t[t["macroTask"] = 1] = "macroTask";
    t[t["postRender"] = 2] = "postRender";
})(n || (n = {}));

const o = {
    delay: 0,
    preempt: false,
    persistent: false,
    reusable: true,
    suspend: false
};

let a;

let l;

function c(t, s) {
    a = t;
    l = s;
}

function u() {
    const t = new Promise(c);
    t.resolve = a;
    t.reject = l;
    return t;
}


//# sourceMappingURL=index.js.map


/***/ }),

/***/ "./node_modules/@aurelia/route-recognizer/dist/esm/index.js":
/*!******************************************************************!*\
  !*** ./node_modules/@aurelia/route-recognizer/dist/esm/index.js ***!
  \******************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "ConfigurableRoute": () => /* binding */ ConfigurableRoute,
/* harmony export */   "Endpoint": () => /* binding */ Endpoint,
/* harmony export */   "RecognizedRoute": () => /* binding */ RecognizedRoute,
/* harmony export */   "RouteRecognizer": () => /* binding */ RouteRecognizer
/* harmony export */ });
class ConfigurableRoute {
    constructor(t, s, n) {
        this.path = t;
        this.caseSensitive = s;
        this.handler = n;
    }
}

class Endpoint {
    constructor(t, s) {
        this.route = t;
        this.paramNames = s;
    }
}

class RecognizedRoute {
    constructor(t, s) {
        this.endpoint = t;
        this.params = s;
    }
}

class Candidate {
    constructor(t, s, n, e) {
        var i;
        this.chars = t;
        this.states = s;
        this.skippedStates = n;
        this.result = e;
        this.head = s[s.length - 1];
        this.endpoint = null === (i = this.head) || void 0 === i ? void 0 : i.endpoint;
    }
    advance(t) {
        const {chars: s, states: n, skippedStates: e, result: i} = this;
        let o = null;
        let r = 0;
        const l = n[n.length - 1];
        function u(c, h) {
            if (c.isMatch(t)) if (1 === ++r) o = c; else i.add(new Candidate(s.concat(t), n.concat(c), null === h ? e : e.concat(h), i));
            if (null === l.segment && c.isOptional && null !== c.nextStates) {
                if (c.nextStates.length > 1) throw new Error(`${c.nextStates.length} nextStates`);
                const t = c.nextStates[0];
                if (!t.isSeparator) throw new Error(`Not a separator`);
                if (null !== t.nextStates) for (const s of t.nextStates) u(s, c);
            }
        }
        if (l.isDynamic) u(l, null);
        if (null !== l.nextStates) for (const t of l.nextStates) u(t, null);
        if (null !== o) {
            n.push(this.head = o);
            s.push(t);
            if (null !== o.endpoint) this.endpoint = o.endpoint;
        }
        if (0 === r) i.remove(this);
    }
    finalize() {
        function t(s, n) {
            const e = n.nextStates;
            if (null !== e) if (1 === e.length && null === e[0].segment) t(s, e[0]); else for (const n of e) if (n.isOptional && null !== n.endpoint) {
                s.push(n);
                if (null !== n.nextStates) for (const e of n.nextStates) t(s, e);
                break;
            }
        }
        t(this.skippedStates, this.head);
    }
    getParams() {
        const {states: t, chars: s, endpoint: n} = this;
        const e = {};
        for (const t of n.paramNames) e[t] = void 0;
        for (let n = 0, i = t.length; n < i; ++n) {
            const i = t[n];
            if (i.isDynamic) {
                const t = i.segment.name;
                if (void 0 === e[t]) e[t] = s[n]; else e[t] += s[n];
            }
        }
        return e;
    }
    compareTo(t) {
        const s = this.states;
        const n = t.states;
        for (let t = 0, e = 0, i = Math.max(s.length, n.length); t < i; ++t) {
            let i = s[t];
            if (void 0 === i) return 1;
            let o = n[e];
            if (void 0 === o) return -1;
            let r = i.segment;
            let l = o.segment;
            if (null === r) {
                if (null === l) {
                    ++e;
                    continue;
                }
                if (void 0 === (i = s[++t])) return 1;
                r = i.segment;
            } else if (null === l) {
                if (void 0 === (o = n[++e])) return -1;
                l = o.segment;
            }
            if (r.kind < l.kind) return 1;
            if (r.kind > l.kind) return -1;
            ++e;
        }
        const e = this.skippedStates;
        const i = t.skippedStates;
        const o = e.length;
        const r = i.length;
        if (o < r) return 1;
        if (o > r) return -1;
        for (let t = 0; t < o; ++t) {
            const s = e[t];
            const n = i[t];
            if (s.length < n.length) return 1;
            if (s.length > n.length) return -1;
        }
        return 0;
    }
}

function t(t) {
    return null !== t.head.endpoint;
}

function s(t, s) {
    return t.compareTo(s);
}

class RecognizeResult {
    constructor(t) {
        this.candidates = [];
        this.candidates = [ new Candidate([ "" ], [ t ], [], this) ];
    }
    get isEmpty() {
        return 0 === this.candidates.length;
    }
    getSolution() {
        const n = this.candidates.filter(t);
        if (0 === n.length) return null;
        for (const t of n) t.finalize();
        n.sort(s);
        return n[0];
    }
    add(t) {
        this.candidates.push(t);
    }
    remove(t) {
        this.candidates.splice(this.candidates.indexOf(t), 1);
    }
    advance(t) {
        const s = this.candidates.slice();
        for (const n of s) n.advance(t);
    }
}

class RouteRecognizer {
    constructor() {
        this.rootState = new State(null, null, "");
        this.cache = new Map;
    }
    add(t) {
        if (t instanceof Array) for (const s of t) this.$add(s); else this.$add(t);
        this.cache.clear();
    }
    $add(t) {
        const s = t.path;
        const e = new ConfigurableRoute(t.path, true === t.caseSensitive, t.handler);
        const i = "" === s ? [ "" ] : s.split("/").filter(n);
        const o = [];
        let r = this.rootState;
        for (const t of i) {
            r = r.append(null, "/");
            switch (t.charAt(0)) {
              case ":":
                {
                    const s = t.endsWith("?");
                    const n = s ? t.slice(1, -1) : t.slice(1);
                    o.push(n);
                    r = new DynamicSegment(n, s).appendTo(r);
                    break;
                }

              case "*":
                {
                    const s = t.slice(1);
                    o.push(s);
                    r = new StarSegment(s).appendTo(r);
                    break;
                }

              default:
                r = new StaticSegment(t, e.caseSensitive).appendTo(r);
                break;
            }
        }
        const l = new Endpoint(e, o);
        r.setEndpoint(l);
    }
    recognize(t) {
        let s = this.cache.get(t);
        if (void 0 === s) this.cache.set(t, s = this.$recognize(t));
        return s;
    }
    $recognize(t) {
        t = decodeURI(t);
        if (!t.startsWith("/")) t = `/${t}`;
        if (t.length > 1 && t.endsWith("/")) t = t.slice(0, -1);
        const s = new RecognizeResult(this.rootState);
        for (let n = 0, e = t.length; n < e; ++n) {
            const e = t.charAt(n);
            s.advance(e);
            if (s.isEmpty) return null;
        }
        const n = s.getSolution();
        if (null === n) return null;
        const {endpoint: e} = n;
        const i = n.getParams();
        return new RecognizedRoute(e, i);
    }
}

class State {
    constructor(t, s, n) {
        this.prevState = t;
        this.segment = s;
        this.value = n;
        this.nextStates = null;
        this.endpoint = null;
        switch (null === s || void 0 === s ? void 0 : s.kind) {
          case 2:
            this.length = t.length + 1;
            this.isSeparator = false;
            this.isDynamic = true;
            this.isOptional = s.optional;
            break;

          case 1:
            this.length = t.length + 1;
            this.isSeparator = false;
            this.isDynamic = true;
            this.isOptional = false;
            break;

          case 3:
            this.length = t.length + 1;
            this.isSeparator = false;
            this.isDynamic = false;
            this.isOptional = false;
            break;

          case void 0:
            this.length = null === t ? 0 : t.length;
            this.isSeparator = true;
            this.isDynamic = false;
            this.isOptional = false;
            break;
        }
    }
    append(t, s) {
        let n;
        let e = this.nextStates;
        if (null === e) {
            n = void 0;
            e = this.nextStates = [];
        } else if (null === t) n = e.find((t => t.value === s)); else n = e.find((s => {
            var n;
            return null === (n = s.segment) || void 0 === n ? void 0 : n.equals(t);
        }));
        if (void 0 === n) e.push(n = new State(this, t, s));
        return n;
    }
    setEndpoint(t) {
        if (null !== this.endpoint) throw new Error(`Cannot add ambiguous route. The pattern '${t.route.path}' clashes with '${this.endpoint.route.path}'`);
        this.endpoint = t;
        if (this.isOptional) {
            this.prevState.setEndpoint(t);
            if (this.prevState.isSeparator && null !== this.prevState.prevState) this.prevState.prevState.setEndpoint(t);
        }
    }
    isMatch(t) {
        const s = this.segment;
        switch (null === s || void 0 === s ? void 0 : s.kind) {
          case 2:
            return !this.value.includes(t);

          case 1:
            return true;

          case 3:
          case void 0:
            return this.value.includes(t);
        }
    }
}

function n(t) {
    return t.length > 0;
}

var e;

(function(t) {
    t[t["star"] = 1] = "star";
    t[t["dynamic"] = 2] = "dynamic";
    t[t["static"] = 3] = "static";
})(e || (e = {}));

class StaticSegment {
    constructor(t, s) {
        this.value = t;
        this.caseSensitive = s;
    }
    get kind() {
        return 3;
    }
    appendTo(t) {
        const {value: s, value: {length: n}} = this;
        if (this.caseSensitive) for (let e = 0; e < n; ++e) t = t.append(this, s.charAt(e)); else for (let e = 0; e < n; ++e) {
            const n = s.charAt(e);
            t = t.append(this, n.toUpperCase() + n.toLowerCase());
        }
        return t;
    }
    equals(t) {
        return 3 === t.kind && t.caseSensitive === this.caseSensitive && t.value === this.value;
    }
}

class DynamicSegment {
    constructor(t, s) {
        this.name = t;
        this.optional = s;
    }
    get kind() {
        return 2;
    }
    appendTo(t) {
        t = t.append(this, "/");
        return t;
    }
    equals(t) {
        return 2 === t.kind && t.optional === this.optional && t.name === this.name;
    }
}

class StarSegment {
    constructor(t) {
        this.name = t;
    }
    get kind() {
        return 1;
    }
    appendTo(t) {
        t = t.append(this, "");
        return t;
    }
    equals(t) {
        return 1 === t.kind && t.name === this.name;
    }
}


//# sourceMappingURL=index.js.map


/***/ }),

/***/ "./node_modules/@aurelia/router/dist/esm/index.js":
/*!********************************************************!*\
  !*** ./node_modules/@aurelia/router/dist/esm/index.js ***!
  \********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "AST": () => /* binding */ $t,
/* harmony export */   "ActionExpression": () => /* binding */ ActionExpression,
/* harmony export */   "AuNavId": () => /* binding */ Vt,
/* harmony export */   "ChildRouteConfig": () => /* binding */ ChildRouteConfig,
/* harmony export */   "ComponentAgent": () => /* binding */ ComponentAgent,
/* harmony export */   "ComponentExpression": () => /* binding */ ComponentExpression,
/* harmony export */   "CompositeSegmentExpression": () => /* binding */ CompositeSegmentExpression,
/* harmony export */   "DefaultComponents": () => /* binding */ ie,
/* harmony export */   "DefaultResources": () => /* binding */ re,
/* harmony export */   "ExpressionKind": () => /* binding */ vt,
/* harmony export */   "HrefCustomAttribute": () => /* binding */ te,
/* harmony export */   "HrefCustomAttributeRegistration": () => /* binding */ oe,
/* harmony export */   "IBaseHrefProvider": () => /* binding */ it,
/* harmony export */   "ILocationManager": () => /* binding */ nt,
/* harmony export */   "IRouteContext": () => /* binding */ Gt,
/* harmony export */   "IRouter": () => /* binding */ Ut,
/* harmony export */   "IRouterEvents": () => /* binding */ tt,
/* harmony export */   "IStateManager": () => /* binding */ ue,
/* harmony export */   "IViewportInstruction": () => /* binding */ jt,
/* harmony export */   "LoadCustomAttribute": () => /* binding */ Xt,
/* harmony export */   "LoadCustomAttributeRegistration": () => /* binding */ ne,
/* harmony export */   "LocationChangeEvent": () => /* binding */ LocationChangeEvent,
/* harmony export */   "Navigation": () => /* binding */ Navigation,
/* harmony export */   "NavigationCancelEvent": () => /* binding */ NavigationCancelEvent,
/* harmony export */   "NavigationEndEvent": () => /* binding */ NavigationEndEvent,
/* harmony export */   "NavigationErrorEvent": () => /* binding */ NavigationErrorEvent,
/* harmony export */   "NavigationOptions": () => /* binding */ NavigationOptions,
/* harmony export */   "NavigationStartEvent": () => /* binding */ NavigationStartEvent,
/* harmony export */   "ParameterExpression": () => /* binding */ ParameterExpression,
/* harmony export */   "ParameterListExpression": () => /* binding */ ParameterListExpression,
/* harmony export */   "Route": () => /* binding */ Ft,
/* harmony export */   "RouteConfig": () => /* binding */ RouteConfig,
/* harmony export */   "RouteContext": () => /* binding */ RouteContext,
/* harmony export */   "RouteDefinition": () => /* binding */ RouteDefinition,
/* harmony export */   "RouteExpression": () => /* binding */ RouteExpression,
/* harmony export */   "RouteNode": () => /* binding */ RouteNode,
/* harmony export */   "RouteTree": () => /* binding */ RouteTree,
/* harmony export */   "Router": () => /* binding */ Ot,
/* harmony export */   "RouterConfiguration": () => /* binding */ he,
/* harmony export */   "RouterOptions": () => /* binding */ RouterOptions,
/* harmony export */   "RouterRegistration": () => /* binding */ ee,
/* harmony export */   "ScopedSegmentExpression": () => /* binding */ ScopedSegmentExpression,
/* harmony export */   "SegmentExpression": () => /* binding */ SegmentExpression,
/* harmony export */   "SegmentGroupExpression": () => /* binding */ SegmentGroupExpression,
/* harmony export */   "Transition": () => /* binding */ Transition,
/* harmony export */   "ViewportAgent": () => /* binding */ ViewportAgent,
/* harmony export */   "ViewportCustomElement": () => /* binding */ Qt,
/* harmony export */   "ViewportCustomElementRegistration": () => /* binding */ se,
/* harmony export */   "ViewportExpression": () => /* binding */ ViewportExpression,
/* harmony export */   "isManagedState": () => /* binding */ At,
/* harmony export */   "route": () => /* binding */ zt,
/* harmony export */   "toManagedState": () => /* binding */ Pt
/* harmony export */ });
/* harmony import */ var _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @aurelia/kernel */ "./node_modules/@aurelia/kernel/dist/esm/index.js");
/* harmony import */ var _aurelia_runtime_html__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @aurelia/runtime-html */ "./node_modules/@aurelia/runtime-html/dist/esm/index.js");
/* harmony import */ var _aurelia_runtime_html__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @aurelia/runtime-html */ "./node_modules/@aurelia/runtime/dist/esm/index.js");
/* harmony import */ var _aurelia_route_recognizer__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @aurelia/route-recognizer */ "./node_modules/@aurelia/route-recognizer/dist/esm/index.js");






class Batch {
    constructor(t, e, i) {
        this.stack = t;
        this.cb = e;
        this.done = false;
        this.next = null;
        this.head = null !== i && void 0 !== i ? i : this;
    }
    static start(t) {
        return new Batch(0, t, null);
    }
    push() {
        let t = this;
        do {
            ++t.stack;
            t = t.next;
        } while (null !== t);
    }
    pop() {
        let t = this;
        do {
            if (0 === --t.stack) t.invoke();
            t = t.next;
        } while (null !== t);
    }
    invoke() {
        const t = this.cb;
        if (null !== t) {
            this.cb = null;
            t(this);
            this.done = true;
        }
    }
    continueWith(t) {
        if (null === this.next) return this.next = new Batch(this.stack, t, this.head); else return this.next.continueWith(t);
    }
    start() {
        this.head.push();
        this.head.pop();
        return this;
    }
}

function B(t, e) {
    t = t.slice();
    e = e.slice();
    const i = [];
    while (t.length > 0) {
        const s = t.shift();
        if (i.every((t => t.context.vpa !== s.context.vpa))) {
            const t = e.findIndex((t => t.context.vpa === s.context.vpa));
            if (t >= 0) i.push(...e.splice(0, t + 1)); else i.push(s);
        }
    }
    i.push(...e);
    return i;
}

function D(t) {
    try {
        return JSON.stringify(t);
    } catch (e) {
        return Object.prototype.toString.call(t);
    }
}

function M(t) {
    return "string" === typeof t ? [ t ] : t;
}

function q(t) {
    return "string" === typeof t ? t : t[0];
}

function H(t) {
    return "object" === typeof t && null !== t && !(0,_aurelia_runtime_html__WEBPACK_IMPORTED_MODULE_2__.isCustomElementViewModel)(t);
}

function F(t) {
    return H(t) && true === Object.prototype.hasOwnProperty.call(t, "name");
}

function z(t) {
    return H(t) && true === Object.prototype.hasOwnProperty.call(t, "component");
}

function W(t) {
    return H(t) && true === Object.prototype.hasOwnProperty.call(t, "redirectTo");
}

function G(t) {
    return H(t) && true === Object.prototype.hasOwnProperty.call(t, "component");
}

function Y(t, e, i) {
    throw new Error(`Invalid route config property: "${e}". Expected ${t}, but got ${D(i)}.`);
}

function _(t, e) {
    if (null === t || void 0 === t) throw new Error(`Invalid route config: expected an object or string, but got: ${String(t)}.`);
    const i = Object.keys(t);
    for (const s of i) {
        const i = t[s];
        const n = [ e, s ].join(".");
        switch (s) {
          case "id":
          case "viewport":
          case "redirectTo":
            if ("string" !== typeof i) Y("string", n, i);
            break;

          case "caseSensitive":
            if ("boolean" !== typeof i) Y("boolean", n, i);
            break;

          case "data":
            if ("object" !== typeof i || null === i) Y("object", n, i);
            break;

          case "title":
            switch (typeof i) {
              case "string":
              case "function":
                break;

              default:
                Y("string or function", n, i);
            }
            break;

          case "path":
            if (i instanceof Array) {
                for (let t = 0; t < i.length; ++t) if ("string" !== typeof i[t]) Y("string", `${n}[${t}]`, i[t]);
            } else if ("string" !== typeof i) Y("string or Array of strings", n, i);
            break;

          case "component":
            Z(i, n);
            break;

          case "routes":
            if (!(i instanceof Array)) Y("Array", n, i);
            for (const t of i) {
                const e = `${n}[${i.indexOf(t)}]`;
                Z(t, e);
            }
            break;

          case "transitionPlan":
            switch (typeof i) {
              case "string":
                switch (i) {
                  case "none":
                  case "replace":
                  case "invoke-lifecycles":
                    break;

                  default:
                    Y("string('none'|'replace'|'invoke-lifecycles') or function", n, i);
                }
                break;

              case "function":
                break;

              default:
                Y("string('none'|'replace'|'invoke-lifecycles') or function", n, i);
            }
            break;

          default:
            throw new Error(`Unknown route config property: "${e}.${s}". Please specify known properties only.`);
        }
    }
}

function J(t, e) {
    if (null === t || void 0 === t) throw new Error(`Invalid route config: expected an object or string, but got: ${String(t)}.`);
    const i = Object.keys(t);
    for (const s of i) {
        const i = t[s];
        const n = [ e, s ].join(".");
        switch (s) {
          case "path":
          case "redirectTo":
            if ("string" !== typeof i) Y("string", n, i);
            break;

          default:
            throw new Error(`Unknown redirect config property: "${e}.${s}". Only 'path' and 'redirectTo' should be specified for redirects.`);
        }
    }
}

function Z(t, e) {
    switch (typeof t) {
      case "function":
        break;

      case "object":
        if (t instanceof Promise) break;
        if (W(t)) {
            J(t, e);
            break;
        }
        if (z(t)) {
            _(t, e);
            break;
        }
        if (!(0,_aurelia_runtime_html__WEBPACK_IMPORTED_MODULE_2__.isCustomElementViewModel)(t) && !F(t)) Y(`an object with at least a 'component' property (see Routeable)`, e, t);
        break;

      case "string":
        break;

      default:
        Y("function, object or string (see Routeable)", e, t);
    }
}

function Q(t, e) {
    if (t === e) return true;
    if (typeof t !== typeof e) return false;
    if (null === t || null === e) return false;
    if (Object.getPrototypeOf(t) !== Object.getPrototypeOf(e)) return false;
    const i = Object.keys(t);
    const s = Object.keys(e);
    if (i.length !== s.length) return false;
    for (let n = 0, o = i.length; n < o; ++n) {
        const o = i[n];
        if (o !== s[n]) return false;
        if (t[o] !== e[o]) return false;
    }
    return true;
}

/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */ function K(t, e, i, s) {
    var n = arguments.length, o = n < 3 ? e : null === s ? s = Object.getOwnPropertyDescriptor(e, i) : s, r;
    if ("object" === typeof Reflect && "function" === typeof Reflect.decorate) o = Reflect.decorate(t, e, i, s); else for (var a = t.length - 1; a >= 0; a--) if (r = t[a]) o = (n < 3 ? r(o) : n > 3 ? r(e, i, o) : r(e, i)) || o;
    return n > 3 && o && Object.defineProperty(e, i, o), o;
}

function X(t, e) {
    return function(i, s) {
        e(i, s, t);
    };
}

class Subscription {
    constructor(t, e, i) {
        this.events = t;
        this.serial = e;
        this.inner = i;
        this.disposed = false;
    }
    dispose() {
        if (!this.disposed) {
            this.disposed = true;
            this.inner.dispose();
            const t = this.events["subscriptions"];
            t.splice(t.indexOf(this), 1);
        }
    }
}

const tt = _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__.DI.createInterface("IRouterEvents", (t => t.singleton(et)));

let et = class RouterEvents {
    constructor(t, e) {
        this.ea = t;
        this.logger = e;
        this.subscriptionSerial = 0;
        this.subscriptions = [];
        this.logger = e.scopeTo("RouterEvents");
    }
    publish(t) {
        this.logger.trace(`publishing %s`, t);
        this.ea.publish(t.name, t);
    }
    subscribe(t, e) {
        const i = new Subscription(this, ++this.subscriptionSerial, this.ea.subscribe(t, (s => {
            this.logger.trace(`handling %s for subscription #${i.serial}`, t);
            e(s);
        })));
        this.subscriptions.push(i);
        return i;
    }
};

et = K([ X(0, _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__.IEventAggregator), X(1, _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__.ILogger) ], et);

class LocationChangeEvent {
    constructor(t, e, i, s) {
        this.id = t;
        this.url = e;
        this.trigger = i;
        this.state = s;
    }
    get name() {
        return "au:router:location-change";
    }
    toString() {
        return `LocationChangeEvent(id:${this.id},url:'${this.url}',trigger:'${this.trigger}')`;
    }
}

class NavigationStartEvent {
    constructor(t, e, i, s) {
        this.id = t;
        this.instructions = e;
        this.trigger = i;
        this.managedState = s;
    }
    get name() {
        return "au:router:navigation-start";
    }
    toString() {
        return `NavigationStartEvent(id:${this.id},instructions:'${this.instructions}',trigger:'${this.trigger}')`;
    }
}

class NavigationEndEvent {
    constructor(t, e, i) {
        this.id = t;
        this.instructions = e;
        this.finalInstructions = i;
    }
    get name() {
        return "au:router:navigation-end";
    }
    toString() {
        return `NavigationEndEvent(id:${this.id},instructions:'${this.instructions}',finalInstructions:'${this.finalInstructions}')`;
    }
}

class NavigationCancelEvent {
    constructor(t, e, i) {
        this.id = t;
        this.instructions = e;
        this.reason = i;
    }
    get name() {
        return "au:router:navigation-cancel";
    }
    toString() {
        return `NavigationCancelEvent(id:${this.id},instructions:'${this.instructions}',reason:${String(this.reason)})`;
    }
}

class NavigationErrorEvent {
    constructor(t, e, i) {
        this.id = t;
        this.instructions = e;
        this.error = i;
    }
    get name() {
        return "au:router:navigation-error";
    }
    toString() {
        return `NavigationErrorEvent(id:${this.id},instructions:'${this.instructions}',error:${String(this.error)})`;
    }
}

const it = _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__.DI.createInterface("IBaseHrefProvider", (t => t.singleton(st)));

class BaseHref {
    constructor(t, e) {
        this.path = t;
        this.rootedPath = e;
    }
}

let st = class BrowserBaseHrefProvider {
    constructor(t) {
        this.window = t;
    }
    getBaseHref() {
        var t;
        const e = this.window.document.head.querySelector("base");
        if (null === e) return null;
        const i = rt(e.href);
        const s = rt(null !== (t = e.getAttribute("href")) && void 0 !== t ? t : "");
        return new BaseHref(s, i);
    }
};

st = K([ X(0, _aurelia_runtime_html__WEBPACK_IMPORTED_MODULE_2__.IWindow) ], st);

const nt = _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__.DI.createInterface("ILocationManager", (t => t.singleton(ot)));

let ot = class BrowserLocationManager {
    constructor(t, e, i, s, n, o) {
        var r;
        this.logger = t;
        this.events = e;
        this.history = i;
        this.location = s;
        this.window = n;
        this.baseHrefProvider = o;
        this.eventId = 0;
        this.logger = t.root.scopeTo("LocationManager");
        const a = o.getBaseHref();
        if (null === a) {
            const t = null !== (r = s.origin) && void 0 !== r ? r : "";
            const e = this.baseHref = new BaseHref("", rt(t));
            this.logger.warn(`no baseHref provided, defaulting to origin '${e.rootedPath}' (normalized from '${t}')`);
        } else {
            this.baseHref = a;
            this.logger.debug(`baseHref set to path: '${a.path}', rootedPath: '${a.rootedPath}'`);
        }
    }
    startListening() {
        this.logger.trace(`startListening()`);
        this.window.addEventListener("popstate", this.onPopState, false);
        this.window.addEventListener("hashchange", this.onHashChange, false);
    }
    stopListening() {
        this.logger.trace(`stopListening()`);
        this.window.removeEventListener("popstate", this.onPopState, false);
        this.window.removeEventListener("hashchange", this.onHashChange, false);
    }
    onPopState(t) {
        this.logger.trace(`onPopState()`);
        this.events.publish(new LocationChangeEvent(++this.eventId, this.getPath(), "popstate", t.state));
    }
    onHashChange(t) {
        this.logger.trace(`onHashChange()`);
        this.events.publish(new LocationChangeEvent(++this.eventId, this.getPath(), "hashchange", null));
    }
    pushState(t, e, i) {
        i = this.addBaseHref(i);
        try {
            const s = JSON.stringify(t);
            this.logger.trace(`pushState(state:${s},title:'${e}',url:'${i}')`);
        } catch (t) {
            this.logger.warn(`pushState(state:NOT_SERIALIZABLE,title:'${e}',url:'${i}')`);
        }
        this.history.pushState(t, e, i);
    }
    replaceState(t, e, i) {
        i = this.addBaseHref(i);
        try {
            const s = JSON.stringify(t);
            this.logger.trace(`replaceState(state:${s},title:'${e}',url:'${i}')`);
        } catch (t) {
            this.logger.warn(`replaceState(state:NOT_SERIALIZABLE,title:'${e}',url:'${i}')`);
        }
        this.history.replaceState(t, e, i);
    }
    getPath() {
        const {pathname: t, search: e, hash: i} = this.location;
        const s = this.removeBaseHref(`${t}${at(e)}${i}`);
        this.logger.trace(`getPath() -> '${s}'`);
        return s;
    }
    currentPathEquals(t) {
        const e = this.getPath() === this.removeBaseHref(t);
        this.logger.trace(`currentPathEquals(path:'${t}') -> ${e}`);
        return e;
    }
    addBaseHref(t) {
        const e = t;
        let i;
        let s = this.baseHref.rootedPath;
        if (s.endsWith("/")) s = s.slice(0, -1);
        if (0 === s.length) i = t; else {
            if (t.startsWith("/")) t = t.slice(1);
            i = `${s}/${t}`;
        }
        this.logger.trace(`addBaseHref(path:'${e}') -> '${i}'`);
        return i;
    }
    removeBaseHref(t) {
        const e = t;
        if (t.startsWith(this.baseHref.path)) t = t.slice(this.baseHref.path.length);
        t = rt(t);
        this.logger.trace(`removeBaseHref(path:'${e}') -> '${t}'`);
        return t;
    }
};

K([ _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__.bound ], ot.prototype, "onPopState", null);

K([ _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__.bound ], ot.prototype, "onHashChange", null);

ot = K([ X(0, _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__.ILogger), X(1, tt), X(2, _aurelia_runtime_html__WEBPACK_IMPORTED_MODULE_2__.IHistory), X(3, _aurelia_runtime_html__WEBPACK_IMPORTED_MODULE_2__.ILocation), X(4, _aurelia_runtime_html__WEBPACK_IMPORTED_MODULE_2__.IWindow), X(5, it) ], ot);

function rt(t) {
    let e;
    let i;
    let s;
    if ((s = t.indexOf("?")) >= 0 || (s = t.indexOf("#")) >= 0) {
        e = t.slice(0, s);
        i = t.slice(s);
    } else {
        e = t;
        i = "";
    }
    if (e.endsWith("/")) e = e.slice(0, -1); else if (e.endsWith("/index.html")) e = e.slice(0, -11);
    return `${e}${i}`;
}

function at(t) {
    return t.length > 0 && !t.startsWith("?") ? `?${t}` : t;
}

class ViewportRequest {
    constructor(t, e, i, s) {
        this.viewportName = t;
        this.componentName = e;
        this.resolution = i;
        this.append = s;
    }
    static create(t) {
        return new ViewportRequest(t.viewportName, t.componentName, t.resolution, t.append);
    }
    toString() {
        return `VR(viewport:'${this.viewportName}',component:'${this.componentName}',resolution:'${this.resolution}',append:${this.append})`;
    }
}

const ht = new WeakMap;

class ViewportAgent {
    constructor(t, e, s) {
        this.viewport = t;
        this.hostController = e;
        this.ctx = s;
        this.isActive = false;
        this.curCA = null;
        this.nextCA = null;
        this.state = 8256;
        this.$resolution = "dynamic";
        this.$plan = "replace";
        this.currNode = null;
        this.nextNode = null;
        this.currTransition = null;
        this.prevTransition = null;
        this.logger = s.container.get(_aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__.ILogger).scopeTo(`ViewportAgent<${s.friendlyPath}>`);
        this.logger.trace(`constructor()`);
    }
    get $state() {
        return ft(this.state);
    }
    get currState() {
        return 16256 & this.state;
    }
    set currState(t) {
        this.state = 127 & this.state | t;
    }
    get nextState() {
        return 127 & this.state;
    }
    set nextState(t) {
        this.state = 16256 & this.state | t;
    }
    static for(t, e) {
        let i = ht.get(t);
        if (void 0 === i) {
            const s = _aurelia_runtime_html__WEBPACK_IMPORTED_MODULE_2__.Controller.getCachedOrThrow(t);
            ht.set(t, i = new ViewportAgent(t, s, e));
        }
        return i;
    }
    activateFromViewport(t, e, i) {
        const s = this.currTransition;
        if (null !== s) ut(s);
        this.isActive = true;
        switch (this.nextState) {
          case 64:
            switch (this.currState) {
              case 8192:
                this.logger.trace(`activateFromViewport() - nothing to activate at %s`, this);
                return;

              case 4096:
                this.logger.trace(`activateFromViewport() - activating existing componentAgent at %s`, this);
                return this.curCA.activate(t, e, i);

              default:
                this.unexpectedState("activateFromViewport 1");
            }

          case 2:
            {
                if (null === this.currTransition) throw new Error(`Unexpected viewport activation outside of a transition context at ${this}`);
                if ("static" !== this.$resolution) throw new Error(`Unexpected viewport activation at ${this}`);
                this.logger.trace(`activateFromViewport() - running ordinary activate at %s`, this);
                const e = Batch.start((e => {
                    this.activate(t, this.currTransition, e);
                }));
                const i = new Promise((t => {
                    e.continueWith((() => {
                        t();
                    }));
                }));
                return e.start().done ? void 0 : i;
            }

          default:
            this.unexpectedState("activateFromViewport 2");
        }
    }
    deactivateFromViewport(t, e, i) {
        const s = this.currTransition;
        if (null !== s) ut(s);
        this.isActive = false;
        switch (this.currState) {
          case 8192:
            this.logger.trace(`deactivateFromViewport() - nothing to deactivate at %s`, this);
            return;

          case 4096:
            this.logger.trace(`deactivateFromViewport() - deactivating existing componentAgent at %s`, this);
            return this.curCA.deactivate(t, e, i);

          case 128:
            this.logger.trace(`deactivateFromViewport() - already deactivating at %s`, this);
            return;

          default:
            {
                if (null === this.currTransition) throw new Error(`Unexpected viewport deactivation outside of a transition context at ${this}`);
                this.logger.trace(`deactivateFromViewport() - running ordinary deactivate at %s`, this);
                const e = Batch.start((e => {
                    this.deactivate(t, this.currTransition, e);
                }));
                const i = new Promise((t => {
                    e.continueWith((() => {
                        t();
                    }));
                }));
                return e.start().done ? void 0 : i;
            }
        }
    }
    handles(t) {
        if (!this.isAvailable(t.resolution)) return false;
        if (t.append && 4096 === this.currState) {
            this.logger.trace(`handles(req:%s) -> false (append mode, viewport already has content %s)`, t, this.curCA);
            return false;
        }
        if (t.viewportName.length > 0 && this.viewport.name !== t.viewportName) {
            this.logger.trace(`handles(req:%s) -> false (names don't match)`, t);
            return false;
        }
        if (this.viewport.usedBy.length > 0 && !this.viewport.usedBy.split(",").includes(t.componentName)) {
            this.logger.trace(`handles(req:%s) -> false (componentName not included in usedBy)`, t);
            return false;
        }
        this.logger.trace(`handles(req:%s) -> true`, t);
        return true;
    }
    isAvailable(t) {
        if ("dynamic" === t && !this.isActive) {
            this.logger.trace(`isAvailable(resolution:%s) -> false (viewport is not active and we're in dynamic resolution resolution)`, t);
            return false;
        }
        if (64 !== this.nextState) {
            this.logger.trace(`isAvailable(resolution:%s) -> false (update already scheduled for %s)`, t, this.nextNode);
            return false;
        }
        return true;
    }
    canUnload(t, e) {
        if (null === this.currTransition) this.currTransition = t;
        ut(t);
        if (true !== t.guardsResult) return;
        e.push();
        Batch.start((e => {
            this.logger.trace(`canUnload() - invoking on children at %s`, this);
            for (const i of this.currNode.children) i.context.vpa.canUnload(t, e);
        })).continueWith((e => {
            switch (this.currState) {
              case 4096:
                this.logger.trace(`canUnload() - invoking on existing component at %s`, this);
                switch (this.$plan) {
                  case "none":
                    this.currState = 1024;
                    return;

                  case "invoke-lifecycles":
                  case "replace":
                    this.currState = 2048;
                    e.push();
                    Batch.start((e => {
                        this.logger.trace(`canUnload() - finished invoking on children, now invoking on own component at %s`, this);
                        this.curCA.canUnload(t, this.nextNode, e);
                    })).continueWith((() => {
                        this.logger.trace(`canUnload() - finished at %s`, this);
                        this.currState = 1024;
                        e.pop();
                    })).start();
                    return;
                }

              case 8192:
                this.logger.trace(`canUnload() - nothing to unload at %s`, this);
                return;

              default:
                t.handleError(new Error(`Unexpected state at canUnload of ${this}`));
            }
        })).continueWith((() => {
            e.pop();
        })).start();
    }
    canLoad(t, e) {
        if (null === this.currTransition) this.currTransition = t;
        ut(t);
        if (true !== t.guardsResult) return;
        e.push();
        Batch.start((e => {
            switch (this.nextState) {
              case 32:
                this.logger.trace(`canLoad() - invoking on new component at %s`, this);
                this.nextState = 16;
                switch (this.$plan) {
                  case "none":
                    return;

                  case "invoke-lifecycles":
                    return this.curCA.canLoad(t, this.nextNode, e);

                  case "replace":
                    this.nextCA = this.nextNode.context.createComponentAgent(this.hostController, this.nextNode);
                    return this.nextCA.canLoad(t, this.nextNode, e);
                }

              case 64:
                this.logger.trace(`canLoad() - nothing to load at %s`, this);
                return;

              default:
                this.unexpectedState("canLoad");
            }
        })).continueWith((t => {
            const e = this.nextNode;
            switch (this.$plan) {
              case "none":
              case "invoke-lifecycles":
                this.logger.trace(`canLoad(next:%s) - plan set to '%s', compiling residue`, e, this.$plan);
                t.push();
                void (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__.onResolve)(bt(e), (() => {
                    t.pop();
                }));
                return;

              case "replace":
                switch (this.$resolution) {
                  case "dynamic":
                    this.logger.trace(`canLoad(next:%s) - (resolution: 'dynamic'), delaying residue compilation until activate`, e, this.$plan);
                    return;

                  case "static":
                    this.logger.trace(`canLoad(next:%s) - (resolution: '${this.$resolution}'), creating nextCA and compiling residue`, e, this.$plan);
                    t.push();
                    void (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__.onResolve)(bt(e), (() => {
                        t.pop();
                    }));
                    return;
                }
            }
        })).continueWith((e => {
            switch (this.nextState) {
              case 16:
                this.logger.trace(`canLoad() - finished own component, now invoking on children at %s`, this);
                this.nextState = 8;
                for (const i of this.nextNode.children) i.context.vpa.canLoad(t, e);
                return;

              case 64:
                return;

              default:
                this.unexpectedState("canLoad");
            }
        })).continueWith((() => {
            this.logger.trace(`canLoad() - finished at %s`, this);
            e.pop();
        })).start();
    }
    unload(t, e) {
        ut(t);
        ct(this, t);
        e.push();
        Batch.start((e => {
            this.logger.trace(`unload() - invoking on children at %s`, this);
            for (const i of this.currNode.children) i.context.vpa.unload(t, e);
        })).continueWith((i => {
            switch (this.currState) {
              case 1024:
                this.logger.trace(`unload() - invoking on existing component at %s`, this);
                switch (this.$plan) {
                  case "none":
                    this.currState = 256;
                    return;

                  case "invoke-lifecycles":
                  case "replace":
                    this.currState = 512;
                    i.push();
                    Batch.start((e => {
                        this.logger.trace(`unload() - finished invoking on children, now invoking on own component at %s`, this);
                        this.curCA.unload(t, this.nextNode, e);
                    })).continueWith((() => {
                        this.logger.trace(`unload() - finished at %s`, this);
                        this.currState = 256;
                        i.pop();
                    })).start();
                    return;
                }

              case 8192:
                this.logger.trace(`unload() - nothing to unload at %s`, this);
                for (const i of this.currNode.children) i.context.vpa.unload(t, e);
                return;

              default:
                this.unexpectedState("unload");
            }
        })).continueWith((() => {
            e.pop();
        })).start();
    }
    load(t, e) {
        ut(t);
        ct(this, t);
        e.push();
        Batch.start((e => {
            switch (this.nextState) {
              case 8:
                this.logger.trace(`load() - invoking on new component at %s`, this);
                this.nextState = 4;
                switch (this.$plan) {
                  case "none":
                    return;

                  case "invoke-lifecycles":
                    return this.curCA.load(t, this.nextNode, e);

                  case "replace":
                    return this.nextCA.load(t, this.nextNode, e);
                }

              case 64:
                this.logger.trace(`load() - nothing to load at %s`, this);
                return;

              default:
                this.unexpectedState("load");
            }
        })).continueWith((e => {
            switch (this.nextState) {
              case 4:
                this.logger.trace(`load() - finished own component, now invoking on children at %s`, this);
                this.nextState = 2;
                for (const i of this.nextNode.children) i.context.vpa.load(t, e);
                return;

              case 64:
                return;

              default:
                this.unexpectedState("load");
            }
        })).continueWith((() => {
            this.logger.trace(`load() - finished at %s`, this);
            e.pop();
        })).start();
    }
    deactivate(t, e, i) {
        ut(e);
        ct(this, e);
        i.push();
        switch (this.currState) {
          case 256:
            this.logger.trace(`deactivate() - invoking on existing component at %s`, this);
            this.currState = 128;
            switch (this.$plan) {
              case "none":
              case "invoke-lifecycles":
                i.pop();
                return;

              case "replace":
                {
                    const s = this.hostController;
                    const n = this.viewport.stateful ? 0 : 32;
                    e.run((() => this.curCA.deactivate(t, s, n)), (() => {
                        i.pop();
                    }));
                }
            }
            return;

          case 8192:
            this.logger.trace(`deactivate() - nothing to deactivate at %s`, this);
            i.pop();
            return;

          case 128:
            this.logger.trace(`deactivate() - already deactivating at %s`, this);
            i.pop();
            return;

          default:
            this.unexpectedState("deactivate");
        }
    }
    activate(t, e, i) {
        ut(e);
        ct(this, e);
        i.push();
        if (32 === this.nextState && "dynamic" === this.$resolution) {
            this.logger.trace(`activate() - invoking canLoad(), load() and activate() on new component due to resolution 'dynamic' at %s`, this);
            Batch.start((t => {
                this.canLoad(e, t);
            })).continueWith((t => {
                this.load(e, t);
            })).continueWith((i => {
                this.activate(t, e, i);
            })).continueWith((() => {
                i.pop();
            })).start();
            return;
        }
        switch (this.nextState) {
          case 2:
            this.logger.trace(`activate() - invoking on existing component at %s`, this);
            this.nextState = 1;
            Batch.start((i => {
                switch (this.$plan) {
                  case "none":
                  case "invoke-lifecycles":
                    return;

                  case "replace":
                    {
                        const s = this.hostController;
                        const n = 0;
                        e.run((() => {
                            i.push();
                            return this.nextCA.activate(t, s, n);
                        }), (() => {
                            i.pop();
                        }));
                    }
                }
            })).continueWith((t => {
                this.processDynamicChildren(e, t);
            })).continueWith((() => {
                i.pop();
            })).start();
            return;

          case 64:
            this.logger.trace(`activate() - nothing to activate at %s`, this);
            i.pop();
            return;

          default:
            this.unexpectedState("activate");
        }
    }
    swap(t, e) {
        if (8192 === this.currState) {
            this.logger.trace(`swap() - running activate on next instead, because there is nothing to deactivate at %s`, this);
            this.activate(null, t, e);
            return;
        }
        if (64 === this.nextState) {
            this.logger.trace(`swap() - running deactivate on current instead, because there is nothing to activate at %s`, this);
            this.deactivate(null, t, e);
            return;
        }
        ut(t);
        ct(this, t);
        if (!(256 === this.currState && 2 === this.nextState)) this.unexpectedState("swap");
        this.currState = 128;
        this.nextState = 1;
        switch (this.$plan) {
          case "none":
          case "invoke-lifecycles":
            {
                this.logger.trace(`swap() - skipping this level and swapping children instead at %s`, this);
                const i = B(this.nextNode.children, this.currNode.children);
                for (const s of i) s.context.vpa.swap(t, e);
                return;
            }

          case "replace":
            {
                this.logger.trace(`swap() - running normally at %s`, this);
                const i = this.hostController;
                const s = this.curCA;
                const n = this.nextCA;
                const o = this.viewport.stateful ? 0 : 32;
                const r = 0;
                e.push();
                switch (t.options.swapStrategy) {
                  case "sequential-add-first":
                    Batch.start((e => {
                        t.run((() => {
                            e.push();
                            return n.activate(null, i, r);
                        }), (() => {
                            e.pop();
                        }));
                    })).continueWith((e => {
                        this.processDynamicChildren(t, e);
                    })).continueWith((() => {
                        t.run((() => s.deactivate(null, i, o)), (() => {
                            e.pop();
                        }));
                    })).start();
                    return;

                  case "sequential-remove-first":
                    Batch.start((e => {
                        t.run((() => {
                            e.push();
                            return s.deactivate(null, i, o);
                        }), (() => {
                            e.pop();
                        }));
                    })).continueWith((e => {
                        t.run((() => {
                            e.push();
                            return n.activate(null, i, r);
                        }), (() => {
                            e.pop();
                        }));
                    })).continueWith((e => {
                        this.processDynamicChildren(t, e);
                    })).continueWith((() => {
                        e.pop();
                    })).start();
                    return;

                  case "parallel-remove-first":
                    t.run((() => {
                        e.push();
                        return s.deactivate(null, i, o);
                    }), (() => {
                        e.pop();
                    }));
                    Batch.start((e => {
                        t.run((() => {
                            e.push();
                            return n.activate(null, i, r);
                        }), (() => {
                            e.pop();
                        }));
                    })).continueWith((e => {
                        this.processDynamicChildren(t, e);
                    })).continueWith((() => {
                        e.pop();
                    })).start();
                    return;
                }
            }
        }
    }
    processDynamicChildren(t, e) {
        this.logger.trace(`processDynamicChildren() - %s`, this);
        const i = this.nextNode;
        t.run((() => {
            e.push();
            return St(i);
        }), (i => {
            Batch.start((e => {
                for (const s of i) t.run((() => {
                    e.push();
                    return s.context.vpa.canLoad(t, e);
                }), (() => {
                    e.pop();
                }));
            })).continueWith((e => {
                for (const s of i) t.run((() => {
                    e.push();
                    return s.context.vpa.load(t, e);
                }), (() => {
                    e.pop();
                }));
            })).continueWith((e => {
                for (const s of i) t.run((() => {
                    e.push();
                    return s.context.vpa.activate(null, t, e);
                }), (() => {
                    e.pop();
                }));
            })).continueWith((() => {
                e.pop();
            })).start();
        }));
    }
    scheduleUpdate(t, e) {
        var i, s;
        switch (this.nextState) {
          case 64:
            this.nextNode = e;
            this.nextState = 32;
            this.$resolution = t.resolutionMode;
            break;

          default:
            this.unexpectedState("scheduleUpdate 1");
        }
        switch (this.currState) {
          case 8192:
          case 4096:
          case 1024:
            break;

          default:
            this.unexpectedState("scheduleUpdate 2");
        }
        const n = null !== (s = null === (i = this.curCA) || void 0 === i ? void 0 : i.routeNode) && void 0 !== s ? s : null;
        if (null === n || n.component !== e.component) this.$plan = "replace"; else {
            const t = e.context.definition.config.transitionPlan;
            if ("function" === typeof t) this.$plan = t(n, e); else this.$plan = t;
        }
        this.logger.trace(`scheduleUpdate(next:%s) - plan set to '%s'`, e, this.$plan);
    }
    cancelUpdate() {
        if (null !== this.currNode) this.currNode.children.forEach((function(t) {
            t.context.vpa.cancelUpdate();
        }));
        if (null !== this.nextNode) this.nextNode.children.forEach((function(t) {
            t.context.vpa.cancelUpdate();
        }));
        this.logger.trace(`cancelUpdate(nextNode:%s)`, this.nextNode);
        switch (this.currState) {
          case 8192:
          case 4096:
            break;

          case 2048:
          case 1024:
            this.currState = 4096;
            break;
        }
        switch (this.nextState) {
          case 64:
          case 32:
          case 16:
          case 8:
            this.nextNode = null;
            this.nextState = 64;
            break;
        }
    }
    endTransition() {
        if (null !== this.currNode) this.currNode.children.forEach((function(t) {
            t.context.vpa.endTransition();
        }));
        if (null !== this.nextNode) this.nextNode.children.forEach((function(t) {
            t.context.vpa.endTransition();
        }));
        if (null !== this.currTransition) {
            ut(this.currTransition);
            switch (this.nextState) {
              case 64:
                switch (this.currState) {
                  case 128:
                    this.logger.trace(`endTransition() - setting currState to State.nextIsEmpty at %s`, this);
                    this.currState = 8192;
                    this.curCA = null;
                    break;

                  default:
                    this.unexpectedState("endTransition 1");
                }
                break;

              case 1:
                switch (this.currState) {
                  case 8192:
                  case 128:
                    switch (this.$plan) {
                      case "none":
                      case "invoke-lifecycles":
                        this.logger.trace(`endTransition() - setting currState to State.currIsActive at %s`, this);
                        this.currState = 4096;
                        break;

                      case "replace":
                        this.logger.trace(`endTransition() - setting currState to State.currIsActive and reassigning curCA at %s`, this);
                        this.currState = 4096;
                        this.curCA = this.nextCA;
                        break;
                    }
                    this.currNode = this.nextNode;
                    break;

                  default:
                    this.unexpectedState("endTransition 2");
                }
                break;

              default:
                this.unexpectedState("endTransition 3");
            }
            this.$plan = "replace";
            this.nextState = 64;
            this.nextNode = null;
            this.nextCA = null;
            this.prevTransition = this.currTransition;
            this.currTransition = null;
        }
    }
    toString() {
        return `VPA(state:${this.$state},plan:'${this.$plan}',resolution:'${this.$resolution}',n:${this.nextNode},c:${this.currNode},viewport:${this.viewport})`;
    }
    dispose() {
        var t;
        if (this.viewport.stateful) this.logger.trace(`dispose() - not disposing stateful viewport at %s`, this); else {
            this.logger.trace(`dispose() - disposing %s`, this);
            null === (t = this.curCA) || void 0 === t ? void 0 : t.dispose();
        }
    }
    unexpectedState(t) {
        throw new Error(`Unexpected state at ${t} of ${this}`);
    }
}

function ct(t, e) {
    if (true !== e.guardsResult) throw new Error(`Unexpected guardsResult ${e.guardsResult} at ${t}`);
}

function ut(t) {
    if (void 0 !== t.error) throw t.error;
}

var lt;

(function(t) {
    t[t["curr"] = 16256] = "curr";
    t[t["currIsEmpty"] = 8192] = "currIsEmpty";
    t[t["currIsActive"] = 4096] = "currIsActive";
    t[t["currCanUnload"] = 2048] = "currCanUnload";
    t[t["currCanUnloadDone"] = 1024] = "currCanUnloadDone";
    t[t["currUnload"] = 512] = "currUnload";
    t[t["currUnloadDone"] = 256] = "currUnloadDone";
    t[t["currDeactivate"] = 128] = "currDeactivate";
    t[t["next"] = 127] = "next";
    t[t["nextIsEmpty"] = 64] = "nextIsEmpty";
    t[t["nextIsScheduled"] = 32] = "nextIsScheduled";
    t[t["nextCanLoad"] = 16] = "nextCanLoad";
    t[t["nextCanLoadDone"] = 8] = "nextCanLoadDone";
    t[t["nextLoad"] = 4] = "nextLoad";
    t[t["nextLoadDone"] = 2] = "nextLoadDone";
    t[t["nextActivate"] = 1] = "nextActivate";
    t[t["bothAreEmpty"] = 8256] = "bothAreEmpty";
})(lt || (lt = {}));

const dt = new Map;

function ft(t) {
    let e = dt.get(t);
    if (void 0 === e) dt.set(t, e = pt(t));
    return e;
}

function pt(t) {
    const e = [];
    if (8192 === (8192 & t)) e.push("currIsEmpty");
    if (4096 === (4096 & t)) e.push("currIsActive");
    if (2048 === (2048 & t)) e.push("currCanUnload");
    if (1024 === (1024 & t)) e.push("currCanUnloadDone");
    if (512 === (512 & t)) e.push("currUnload");
    if (256 === (256 & t)) e.push("currUnloadDone");
    if (128 === (128 & t)) e.push("currDeactivate");
    if (64 === (64 & t)) e.push("nextIsEmpty");
    if (32 === (32 & t)) e.push("nextIsScheduled");
    if (16 === (16 & t)) e.push("nextCanLoad");
    if (8 === (8 & t)) e.push("nextCanLoadDone");
    if (4 === (4 & t)) e.push("nextLoad");
    if (2 === (2 & t)) e.push("nextLoadDone");
    if (1 === (1 & t)) e.push("nextActivate");
    return e.join("|");
}

const gt = [ "?", "#", "/", "+", "(", ")", ".", "@", "!", "=", ",", "&", "'", "~", ";" ];

class ParserState {
    constructor(t) {
        this.input = t;
        this.buffers = [];
        this.bufferIndex = 0;
        this.index = 0;
        this.rest = t;
    }
    get done() {
        return 0 === this.rest.length;
    }
    startsWith(...t) {
        const e = this.rest;
        return t.some((function(t) {
            return e.startsWith(t);
        }));
    }
    consumeOptional(t) {
        if (this.startsWith(t)) {
            this.rest = this.rest.slice(t.length);
            this.index += t.length;
            this.append(t);
            return true;
        }
        return false;
    }
    consume(t) {
        if (!this.consumeOptional(t)) this.expect(`'${t}'`);
    }
    expect(t) {
        throw new Error(`Expected ${t} at index ${this.index} of '${this.input}', but got: '${this.rest}' (rest='${this.rest}')`);
    }
    ensureDone() {
        if (!this.done) throw new Error(`Unexpected '${this.rest}' at index ${this.index} of '${this.input}'`);
    }
    advance() {
        const t = this.rest[0];
        this.rest = this.rest.slice(1);
        ++this.index;
        this.append(t);
    }
    record() {
        this.buffers[this.bufferIndex++] = "";
    }
    playback() {
        const t = --this.bufferIndex;
        const e = this.buffers;
        const i = e[t];
        e[t] = "";
        return i;
    }
    discard() {
        this.buffers[--this.bufferIndex] = "";
    }
    append(t) {
        const e = this.bufferIndex;
        const i = this.buffers;
        for (let s = 0; s < e; ++s) i[s] += t;
    }
}

var vt;

(function(t) {
    t[t["Route"] = 0] = "Route";
    t[t["CompositeSegment"] = 1] = "CompositeSegment";
    t[t["ScopedSegment"] = 2] = "ScopedSegment";
    t[t["SegmentGroup"] = 3] = "SegmentGroup";
    t[t["Segment"] = 4] = "Segment";
    t[t["Component"] = 5] = "Component";
    t[t["Action"] = 6] = "Action";
    t[t["Viewport"] = 7] = "Viewport";
    t[t["ParameterList"] = 8] = "ParameterList";
    t[t["Parameter"] = 9] = "Parameter";
})(vt || (vt = {}));

const wt = new Map;

const mt = new Map;

class RouteExpression {
    constructor(t, e, i, s, n, o) {
        this.raw = t;
        this.isAbsolute = e;
        this.root = i;
        this.queryParams = s;
        this.fragment = n;
        this.fragmentIsRoute = o;
    }
    get kind() {
        return 0;
    }
    static parse(t, e) {
        const i = e ? wt : mt;
        let s = i.get(t);
        if (void 0 === s) i.set(t, s = RouteExpression.$parse(t, e));
        return s;
    }
    static $parse(t, e) {
        let i;
        const s = t.indexOf("#");
        if (s >= 0) {
            const n = t.slice(s + 1);
            i = decodeURIComponent(n);
            if (e) t = i; else t = t.slice(0, s);
        } else {
            if (e) t = "";
            i = null;
        }
        let n = null;
        const o = t.indexOf("?");
        if (o >= 0) {
            const e = t.slice(o + 1);
            t = t.slice(0, o);
            n = new URLSearchParams(e);
        }
        if ("" === t) return new RouteExpression("", false, SegmentExpression.EMPTY, null != n ? Object.freeze(n) : Tt, i, e);
        const r = new ParserState(t);
        r.record();
        const a = r.consumeOptional("/");
        const h = CompositeSegmentExpression.parse(r);
        r.ensureDone();
        const c = r.playback();
        return new RouteExpression(c, a, h, null != n ? Object.freeze(n) : Tt, i, e);
    }
    toInstructionTree(t) {
        let e = this.queryParams;
        const i = t.queryParams;
        if (null != i) e = new URLSearchParams({
            ...Object.fromEntries(e.entries()),
            ...i
        });
        return new ViewportInstructionTree(t, this.isAbsolute, this.root.toInstructions(t.append, 0, 0), e, this.fragment);
    }
    toString() {
        return this.raw;
    }
}

class CompositeSegmentExpression {
    constructor(t, e, i) {
        this.raw = t;
        this.siblings = e;
        this.append = i;
    }
    get kind() {
        return 1;
    }
    static parse(t) {
        t.record();
        const e = t.consumeOptional("+");
        const i = [];
        do {
            i.push(ScopedSegmentExpression.parse(t));
        } while (t.consumeOptional("+"));
        if (!e && 1 === i.length) {
            t.discard();
            return i[0];
        }
        const s = t.playback();
        return new CompositeSegmentExpression(s, i, e);
    }
    toInstructions(t, e, i) {
        switch (this.siblings.length) {
          case 0:
            return [];

          case 1:
            return this.siblings[0].toInstructions(t, e, i);

          case 2:
            return [ ...this.siblings[0].toInstructions(t, e, 0), ...this.siblings[1].toInstructions(t, 0, i) ];

          default:
            return [ ...this.siblings[0].toInstructions(t, e, 0), ...this.siblings.slice(1, -1).flatMap((function(e) {
                return e.toInstructions(t, 0, 0);
            })), ...this.siblings[this.siblings.length - 1].toInstructions(t, 0, i) ];
        }
    }
    toString() {
        return this.raw;
    }
}

class ScopedSegmentExpression {
    constructor(t, e, i) {
        this.raw = t;
        this.left = e;
        this.right = i;
    }
    get kind() {
        return 2;
    }
    static parse(t) {
        t.record();
        const e = SegmentGroupExpression.parse(t);
        if (t.consumeOptional("/")) {
            const i = ScopedSegmentExpression.parse(t);
            const s = t.playback();
            return new ScopedSegmentExpression(s, e, i);
        }
        t.discard();
        return e;
    }
    toInstructions(t, e, i) {
        const s = this.left.toInstructions(t, e, 0);
        const n = this.right.toInstructions(false, 0, i);
        let o = s[s.length - 1];
        while (o.children.length > 0) o = o.children[o.children.length - 1];
        o.children.push(...n);
        return s;
    }
    toString() {
        return this.raw;
    }
}

class SegmentGroupExpression {
    constructor(t, e) {
        this.raw = t;
        this.expression = e;
    }
    get kind() {
        return 3;
    }
    static parse(t) {
        t.record();
        if (t.consumeOptional("(")) {
            const e = CompositeSegmentExpression.parse(t);
            t.consume(")");
            const i = t.playback();
            return new SegmentGroupExpression(i, e);
        }
        t.discard();
        return SegmentExpression.parse(t);
    }
    toInstructions(t, e, i) {
        return this.expression.toInstructions(t, e + 1, i + 1);
    }
    toString() {
        return this.raw;
    }
}

class SegmentExpression {
    constructor(t, e, i, s, n) {
        this.raw = t;
        this.component = e;
        this.action = i;
        this.viewport = s;
        this.scoped = n;
    }
    get kind() {
        return 4;
    }
    static get EMPTY() {
        return new SegmentExpression("", ComponentExpression.EMPTY, ActionExpression.EMPTY, ViewportExpression.EMPTY, true);
    }
    static parse(t) {
        t.record();
        const e = ComponentExpression.parse(t);
        const i = ActionExpression.parse(t);
        const s = ViewportExpression.parse(t);
        const n = !t.consumeOptional("!");
        const o = t.playback();
        return new SegmentExpression(o, e, i, s, n);
    }
    toInstructions(t, e, i) {
        return [ ViewportInstruction.create({
            component: this.component.name,
            params: this.component.parameterList.toObject(),
            viewport: this.viewport.name,
            append: t,
            open: e,
            close: i
        }) ];
    }
    toString() {
        return this.raw;
    }
}

class ComponentExpression {
    constructor(t, e, i) {
        this.raw = t;
        this.name = e;
        this.parameterList = i;
        switch (e.charAt(0)) {
          case ":":
            this.isParameter = true;
            this.isStar = false;
            this.isDynamic = true;
            this.parameterName = e.slice(1);
            break;

          case "*":
            this.isParameter = false;
            this.isStar = true;
            this.isDynamic = true;
            this.parameterName = e.slice(1);
            break;

          default:
            this.isParameter = false;
            this.isStar = false;
            this.isDynamic = false;
            this.parameterName = e;
            break;
        }
    }
    get kind() {
        return 5;
    }
    static get EMPTY() {
        return new ComponentExpression("", "", ParameterListExpression.EMPTY);
    }
    static parse(t) {
        t.record();
        t.record();
        if (!t.done) if (t.startsWith("./")) t.advance(); else if (t.startsWith("../")) {
            t.advance();
            t.advance();
        } else while (!t.done && !t.startsWith(...gt)) t.advance();
        const e = decodeURIComponent(t.playback());
        if (0 === e.length) t.expect("component name");
        const i = ParameterListExpression.parse(t);
        const s = t.playback();
        return new ComponentExpression(s, e, i);
    }
    toString() {
        return this.raw;
    }
}

class ActionExpression {
    constructor(t, e, i) {
        this.raw = t;
        this.name = e;
        this.parameterList = i;
    }
    get kind() {
        return 6;
    }
    static get EMPTY() {
        return new ActionExpression("", "", ParameterListExpression.EMPTY);
    }
    static parse(t) {
        t.record();
        let e = "";
        if (t.consumeOptional(".")) {
            t.record();
            while (!t.done && !t.startsWith(...gt)) t.advance();
            e = decodeURIComponent(t.playback());
            if (0 === e.length) t.expect("method name");
        }
        const i = ParameterListExpression.parse(t);
        const s = t.playback();
        return new ActionExpression(s, e, i);
    }
    toString() {
        return this.raw;
    }
}

class ViewportExpression {
    constructor(t, e) {
        this.raw = t;
        this.name = e;
    }
    get kind() {
        return 7;
    }
    static get EMPTY() {
        return new ViewportExpression("", "");
    }
    static parse(t) {
        t.record();
        let e = "";
        if (t.consumeOptional("@")) {
            t.record();
            while (!t.done && !t.startsWith(...gt)) t.advance();
            e = decodeURIComponent(t.playback());
            if (0 === e.length) t.expect("viewport name");
        }
        const i = t.playback();
        return new ViewportExpression(i, e);
    }
    toString() {
        return this.raw;
    }
}

class ParameterListExpression {
    constructor(t, e) {
        this.raw = t;
        this.expressions = e;
    }
    get kind() {
        return 8;
    }
    static get EMPTY() {
        return new ParameterListExpression("", []);
    }
    static parse(t) {
        t.record();
        const e = [];
        if (t.consumeOptional("(")) {
            do {
                e.push(ParameterExpression.parse(t, e.length));
                if (!t.consumeOptional(",")) break;
            } while (!t.done && !t.startsWith(")"));
            t.consume(")");
        }
        const i = t.playback();
        return new ParameterListExpression(i, e);
    }
    toObject() {
        const t = {};
        for (const e of this.expressions) t[e.key] = e.value;
        return t;
    }
    toString() {
        return this.raw;
    }
}

class ParameterExpression {
    constructor(t, e, i) {
        this.raw = t;
        this.key = e;
        this.value = i;
    }
    get kind() {
        return 9;
    }
    static get EMPTY() {
        return new ParameterExpression("", "", "");
    }
    static parse(t, e) {
        t.record();
        t.record();
        while (!t.done && !t.startsWith(...gt)) t.advance();
        let i = decodeURIComponent(t.playback());
        if (0 === i.length) t.expect("parameter key");
        let s;
        if (t.consumeOptional("=")) {
            t.record();
            while (!t.done && !t.startsWith(...gt)) t.advance();
            s = decodeURIComponent(t.playback());
            if (0 === s.length) t.expect("parameter value");
        } else {
            s = i;
            i = e.toString();
        }
        const n = t.playback();
        return new ParameterExpression(n, i, s);
    }
    toString() {
        return this.raw;
    }
}

const $t = Object.freeze({
    RouteExpression: RouteExpression,
    CompositeSegmentExpression: CompositeSegmentExpression,
    ScopedSegmentExpression: ScopedSegmentExpression,
    SegmentGroupExpression: SegmentGroupExpression,
    SegmentExpression: SegmentExpression,
    ComponentExpression: ComponentExpression,
    ActionExpression: ActionExpression,
    ViewportExpression: ViewportExpression,
    ParameterListExpression: ParameterListExpression,
    ParameterExpression: ParameterExpression
});

let xt = 0;

class RouteNode {
    constructor(t, e, i, s, n, o, r, a, h, c, u, l, d, f, p, g) {
        this.id = t;
        this.path = e;
        this.finalPath = i;
        this.context = s;
        this.originalInstruction = n;
        this.instruction = o;
        this.params = r;
        this.queryParams = a;
        this.fragment = h;
        this.data = c;
        this.viewport = u;
        this.title = l;
        this.component = d;
        this.append = f;
        this.children = p;
        this.residue = g;
        this.version = 1;
        this.originalInstruction = o;
    }
    get root() {
        return this.tree.root;
    }
    static create(t) {
        var e, i, s, n, o, r, a, h;
        return new RouteNode(++xt, t.path, t.finalPath, t.context, t.instruction, t.instruction, null !== (e = t.params) && void 0 !== e ? e : {}, null !== (i = t.queryParams) && void 0 !== i ? i : Tt, null !== (s = t.fragment) && void 0 !== s ? s : null, null !== (n = t.data) && void 0 !== n ? n : {}, null !== (o = t.viewport) && void 0 !== o ? o : null, null !== (r = t.title) && void 0 !== r ? r : null, t.component, t.append, null !== (a = t.children) && void 0 !== a ? a : [], null !== (h = t.residue) && void 0 !== h ? h : []);
    }
    contains(t) {
        var e, i;
        if (this.context === t.options.context) {
            const s = this.children;
            const n = t.children;
            for (let t = 0, o = s.length; t < o; ++t) for (let r = 0, a = n.length; r < a; ++r) if (t + r < o && (null !== (i = null === (e = s[t + r].instruction) || void 0 === e ? void 0 : e.contains(n[r])) && void 0 !== i ? i : false)) {
                if (r + 1 === a) return true;
            } else break;
        }
        return this.children.some((function(e) {
            return e.contains(t);
        }));
    }
    appendChild(t) {
        this.children.push(t);
        t.setTree(this.tree);
    }
    appendChildren(...t) {
        for (const e of t) this.appendChild(e);
    }
    clearChildren() {
        for (const t of this.children) {
            t.clearChildren();
            t.context.vpa.cancelUpdate();
        }
        this.children.length = 0;
    }
    getTitle(t) {
        const e = [ ...this.children.map((e => e.getTitle(t))), this.getTitlePart() ].filter((t => null !== t));
        if (0 === e.length) return null;
        return e.join(t);
    }
    getTitlePart() {
        if ("function" === typeof this.title) return this.title.call(void 0, this);
        return this.title;
    }
    computeAbsolutePath() {
        if (this.context.isRoot) return "";
        const t = this.context.parent.node.computeAbsolutePath();
        const e = this.instruction.toUrlComponent(false);
        if (t.length > 0) {
            if (e.length > 0) return [ t, e ].join("/");
            return t;
        }
        return e;
    }
    setTree(t) {
        this.tree = t;
        for (const e of this.children) e.setTree(t);
    }
    finalizeInstruction() {
        const t = this.children.map((t => t.finalizeInstruction()));
        const e = this.instruction.clone();
        e.children.splice(0, e.children.length, ...t);
        return this.instruction = e;
    }
    clone() {
        const t = new RouteNode(this.id, this.path, this.finalPath, this.context, this.originalInstruction, this.instruction, {
            ...this.params
        }, {
            ...this.queryParams
        }, this.fragment, {
            ...this.data
        }, this.viewport, this.title, this.component, this.append, this.children.map((t => t.clone())), [ ...this.residue ]);
        t.version = this.version + 1;
        if (t.context.node === this) t.context.node = t;
        return t;
    }
    toString() {
        var t, e, i, s, n;
        const o = [];
        const r = null !== (i = null === (e = null === (t = this.context) || void 0 === t ? void 0 : t.definition.component) || void 0 === e ? void 0 : e.name) && void 0 !== i ? i : "";
        if (r.length > 0) o.push(`c:'${r}'`);
        const a = null !== (n = null === (s = this.context) || void 0 === s ? void 0 : s.definition.config.path) && void 0 !== n ? n : "";
        if (a.length > 0) o.push(`path:'${a}'`);
        if (this.children.length > 0) o.push(`children:[${this.children.map(String).join(",")}]`);
        if (this.residue.length > 0) o.push(`residue:${this.residue.map((function(t) {
            if ("string" === typeof t) return `'${t}'`;
            return String(t);
        })).join(",")}`);
        return `RN(ctx:'${this.context.friendlyPath}',${o.join(",")})`;
    }
}

class RouteTree {
    constructor(t, e, i, s) {
        this.options = t;
        this.queryParams = e;
        this.fragment = i;
        this.root = s;
    }
    contains(t) {
        return this.root.contains(t);
    }
    clone() {
        const t = new RouteTree(this.options.clone(), {
            ...this.queryParams
        }, this.fragment, this.root.clone());
        t.root.setTree(this);
        return t;
    }
    finalizeInstructions() {
        return new ViewportInstructionTree(this.options, true, this.root.children.map((t => t.finalizeInstruction())), this.queryParams, this.fragment);
    }
    toString() {
        return this.root.toString();
    }
}

function yt(t, e, s) {
    const o = s.container.get(_aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__.ILogger).scopeTo("RouteTree");
    const r = s.root;
    t.options = e.options;
    t.queryParams = e.queryParams;
    t.fragment = e.fragment;
    if (e.isAbsolute) s = r;
    if (s === r) {
        t.root.setTree(t);
        r.node = t.root;
    }
    const a = s.resolved instanceof Promise ? " - awaiting promise" : "";
    o.trace(`updateRouteTree(rootCtx:%s,rt:%s,vit:%s)${a}`, r, t, e);
    return (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__.onResolve)(s.resolved, (() => Et(o, e, s, r.node)));
}

function Et(t, e, i, s) {
    t.trace(`updateNode(ctx:%s,node:%s)`, i, s);
    s.queryParams = e.queryParams;
    s.fragment = e.fragment;
    let r;
    if (!s.context.isRoot) r = s.context.vpa.scheduleUpdate(s.tree.options, s); else r = void 0;
    return (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__.onResolve)(r, (() => {
        if (s.context === i) {
            s.clearChildren();
            return (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__.onResolve)((0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__.resolveAll)(...e.children.map((e => Rt(t, s, e, s.tree.options.append || e.append)))), (() => (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__.resolveAll)(...i.getAvailableViewportAgents("dynamic").map((e => {
                const i = ViewportInstruction.create({
                    component: e.viewport.default,
                    viewport: e.viewport.name
                });
                return Rt(t, s, i, s.append);
            })))));
        }
        return (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__.resolveAll)(...s.children.map((s => Et(t, e, i, s))));
    }));
}

function bt(t) {
    const e = t.context;
    const s = e.container.get(_aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__.ILogger).scopeTo("RouteTree");
    const r = e.resolved instanceof Promise ? " - awaiting promise" : "";
    s.trace(`processResidue(node:%s)${r}`, t);
    return (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__.onResolve)(e.resolved, (() => (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__.resolveAll)(...t.residue.splice(0).map((e => Rt(s, t, e, t.append))), ...e.getAvailableViewportAgents("static").map((e => {
        const i = ViewportInstruction.create({
            component: e.viewport.default,
            viewport: e.viewport.name
        });
        return Rt(s, t, i, t.append);
    })))));
}

function St(t) {
    const e = t.context;
    const s = e.container.get(_aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__.ILogger).scopeTo("RouteTree");
    const r = e.resolved instanceof Promise ? " - awaiting promise" : "";
    s.trace(`getDynamicChildren(node:%s)${r}`, t);
    return (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__.onResolve)(e.resolved, (() => {
        const i = t.children.slice();
        return (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__.onResolve)((0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__.resolveAll)(...t.residue.splice(0).map((e => Rt(s, t, e, t.append))), ...e.getAvailableViewportAgents("dynamic").map((e => {
            const i = ViewportInstruction.create({
                component: e.viewport.default,
                viewport: e.viewport.name
            });
            return Rt(s, t, i, t.append);
        }))), (() => t.children.filter((t => !i.includes(t)))));
    }));
}

function Rt(t, e, i, s) {
    var n, r;
    t.trace(`createAndAppendNodes(node:%s,vi:%s,append:${s})`, e, i);
    switch (i.component.type) {
      case 0:
        switch (i.component.value) {
          case "..":
            e.clearChildren();
            e = null !== (r = null === (n = e.context.parent) || void 0 === n ? void 0 : n.node) && void 0 !== r ? r : e;

          case ".":
            return (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__.resolveAll)(...i.children.map((i => Rt(t, e, i, i.append))));

          default:
            {
                const n = Ct(t, e, i, s);
                if (null === n) return;
                return Nt(t, e, n);
            }
        }

      case 4:
      case 2:
        {
            const n = RouteDefinition.resolve(i.component.value);
            const o = It(t, e, i, s, n.component);
            return Nt(t, e, o);
        }
    }
}

function Ct(t, e, i, s) {
    const n = e.context;
    let o = 0;
    let r = i.component.value;
    let a = i;
    while (1 === a.children.length) {
        a = a.children[0];
        if (0 === a.component.type) {
            ++o;
            r = `${r}/${a.component.value}`;
        } else break;
    }
    const h = n.recognize(r);
    if (null === h) {
        const o = i.component.value;
        let r = n.container.find(_aurelia_runtime_html__WEBPACK_IMPORTED_MODULE_2__.CustomElement, o);
        switch (e.tree.options.routingMode) {
          case "configured-only":
            if (null === r) {
                if ("" === o) return null;
                throw new Error(`'${o}' did not match any configured route or registered component name at '${n.friendlyPath}' - did you forget to add '${o}' to the routes list of the route decorator of '${n.component.name}'?`);
            }
            throw new Error(`'${o}' did not match any configured route, but it does match a registered component name at '${n.friendlyPath}' - did you forget to add a @route({ path: '${o}' }) decorator to '${o}' or unintentionally set routingMode to 'configured-only'?`);

          case "configured-first":
            if (null === r) {
                if ("" === o) return null;
                const t = null === i.viewport || 0 === i.viewport.length ? "default" : i.viewport;
                const e = n.getFallbackViewportAgent("dynamic", t);
                if (null === e) throw new Error(`'${o}' did not match any configured route or registered component name at '${n.friendlyPath}' and no fallback was provided for viewport '${t}' - did you forget to add the component '${o}' to the dependencies of '${n.component.name}' or to register it as a global dependency?`);
                const s = e.viewport.fallback;
                r = n.container.find(_aurelia_runtime_html__WEBPACK_IMPORTED_MODULE_2__.CustomElement, s);
                if (null === r) throw new Error(`the requested component '${o}' and the fallback '${s}' at viewport '${t}' did not match any configured route or registered component name at '${n.friendlyPath}' - did you forget to add the component '${o}' to the dependencies of '${n.component.name}' or to register it as a global dependency?`);
            }
            return It(t, e, i, s, r);
        }
    }
    const c = null === h.residue ? r : r.slice(0, -(h.residue.length + 1));
    i.component.value = c;
    for (let t = 0; t < o; ++t) i.children = i.children[0].children;
    return kt(t, e, i, s, h);
}

function kt(t, e, i, s, o, r = o.route.endpoint.route) {
    const a = e.context;
    const h = e.tree;
    return (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__.onResolve)(r.handler, (n => {
        r.handler = n;
        if (null === n.redirectTo) {
            const c = n.viewport;
            const u = n.component;
            const l = a.resolveViewportAgent(ViewportRequest.create({
                viewportName: c,
                componentName: u.name,
                append: s,
                resolution: h.options.resolutionMode
            }));
            const d = a.container.get(Ut);
            const f = d.getRouteContext(l, u, l.hostController.container);
            f.node = RouteNode.create({
                path: o.route.endpoint.route.path,
                finalPath: r.path,
                context: f,
                instruction: i,
                params: {
                    ...e.params,
                    ...o.route.params
                },
                queryParams: h.queryParams,
                fragment: h.fragment,
                data: n.data,
                viewport: c,
                component: u,
                append: s,
                title: n.config.title,
                residue: null === o.residue ? [] : [ ViewportInstruction.create(o.residue) ]
            });
            f.node.setTree(e.tree);
            t.trace(`createConfiguredNode(vi:%s) -> %s`, i, f.node);
            return f.node;
        }
        const c = RouteExpression.parse(r.path, false);
        const u = RouteExpression.parse(n.redirectTo, false);
        let l;
        let d;
        const f = [];
        switch (c.root.kind) {
          case 2:
          case 4:
            l = c.root;
            break;

          default:
            throw new Error(`Unexpected expression kind ${c.root.kind}`);
        }
        switch (u.root.kind) {
          case 2:
          case 4:
            d = u.root;
            break;

          default:
            throw new Error(`Unexpected expression kind ${u.root.kind}`);
        }
        let p;
        let g;
        let v = false;
        let w = false;
        while (!(v && w)) {
            if (v) p = null; else if (4 === l.kind) {
                p = l;
                v = true;
            } else if (4 === l.left.kind) {
                p = l.left;
                switch (l.right.kind) {
                  case 2:
                  case 4:
                    l = l.right;
                    break;

                  default:
                    throw new Error(`Unexpected expression kind ${l.right.kind}`);
                }
            } else throw new Error(`Unexpected expression kind ${l.left.kind}`);
            if (w) g = null; else if (4 === d.kind) {
                g = d;
                w = true;
            } else if (4 === d.left.kind) {
                g = d.left;
                switch (d.right.kind) {
                  case 2:
                  case 4:
                    d = d.right;
                    break;

                  default:
                    throw new Error(`Unexpected expression kind ${d.right.kind}`);
                }
            } else throw new Error(`Unexpected expression kind ${d.left.kind}`);
            if (null !== g) if (g.component.isDynamic && (null === p || void 0 === p ? void 0 : p.component.isDynamic)) f.push(o.route.params[p.component.name]); else f.push(g.raw);
        }
        const m = f.filter(Boolean).join("/");
        const $ = a.recognize(m);
        if (null === $) {
            const n = m;
            const o = a.container.find(_aurelia_runtime_html__WEBPACK_IMPORTED_MODULE_2__.CustomElement, m);
            switch (h.options.routingMode) {
              case "configured-only":
                if (null === o) throw new Error(`'${n}' did not match any configured route or registered component name at '${a.friendlyPath}' - did you forget to add '${n}' to the routes list of the route decorator of '${a.component.name}'?`);
                throw new Error(`'${n}' did not match any configured route, but it does match a registered component name at '${a.friendlyPath}' - did you forget to add a @route({ path: '${n}' }) decorator to '${n}' or unintentionally set routingMode to 'configured-only'?`);

              case "configured-first":
                if (null === o) throw new Error(`'${n}' did not match any configured route or registered component name at '${a.friendlyPath}' - did you forget to add the component '${n}' to the dependencies of '${a.component.name}' or to register it as a global dependency?`);
                return It(t, e, i, s, o);
            }
        }
        return kt(t, e, i, s, o, $.route.endpoint.route);
    }));
}

function It(t, e, i, s, n) {
    var o;
    const r = e.context;
    const a = e.tree;
    const h = null !== (o = i.viewport) && void 0 !== o ? o : "default";
    const c = r.resolveViewportAgent(ViewportRequest.create({
        viewportName: h,
        componentName: n.name,
        append: s,
        resolution: a.options.resolutionMode
    }));
    const u = r.container.get(Ut);
    const l = u.getRouteContext(c, n, c.hostController.container);
    const d = RouteDefinition.resolve(n);
    l.node = RouteNode.create({
        path: n.name,
        finalPath: n.name,
        context: l,
        instruction: i,
        params: {
            ...r.node.params,
            ...i.params
        },
        queryParams: a.queryParams,
        fragment: a.fragment,
        data: d.data,
        viewport: h,
        component: n,
        append: s,
        title: d.config.title,
        residue: [ ...i.children ]
    });
    l.node.setTree(r.node.tree);
    t.trace(`createDirectNode(vi:%s) -> %s`, i, l.node);
    return l.node;
}

function Nt(t, e, i) {
    return (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__.onResolve)(i, (i => {
        t.trace(`appendNode($childNode:%s)`, i);
        e.appendChild(i);
        return i.context.vpa.scheduleUpdate(e.tree.options, i);
    }));
}

const Tt = Object.freeze(new URLSearchParams);

const Vt = "au-nav-id";

function At(t) {
    return (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__.isObject)(t) && true === Object.prototype.hasOwnProperty.call(t, Vt);
}

function Pt(t, e) {
    return {
        ...t,
        [Vt]: e
    };
}

function Lt(t, e) {
    if ("function" === typeof e) return e(t);
    return e;
}

class RouterOptions {
    constructor(t, e, i, s, n, o, r, a, h, c) {
        this.useUrlFragmentHash = t;
        this.useHref = e;
        this.statefulHistoryLength = i;
        this.routingMode = s;
        this.swapStrategy = n;
        this.resolutionMode = o;
        this.queryParamsStrategy = r;
        this.fragmentStrategy = a;
        this.historyStrategy = h;
        this.sameUrlStrategy = c;
    }
    static get DEFAULT() {
        return RouterOptions.create({});
    }
    static create(t) {
        var e, i, s, n, o, r, a, h, c, u;
        return new RouterOptions(null !== (e = t.useUrlFragmentHash) && void 0 !== e ? e : false, null !== (i = t.useHref) && void 0 !== i ? i : true, null !== (s = t.statefulHistoryLength) && void 0 !== s ? s : 0, null !== (n = t.routingMode) && void 0 !== n ? n : "configured-first", null !== (o = t.swapStrategy) && void 0 !== o ? o : "sequential-remove-first", null !== (r = t.resolutionMode) && void 0 !== r ? r : "dynamic", null !== (a = t.queryParamsStrategy) && void 0 !== a ? a : "overwrite", null !== (h = t.fragmentStrategy) && void 0 !== h ? h : "overwrite", null !== (c = t.historyStrategy) && void 0 !== c ? c : "push", null !== (u = t.sameUrlStrategy) && void 0 !== u ? u : "ignore");
    }
    getQueryParamsStrategy(t) {
        return Lt(t, this.queryParamsStrategy);
    }
    getFragmentStrategy(t) {
        return Lt(t, this.fragmentStrategy);
    }
    getHistoryStrategy(t) {
        return Lt(t, this.historyStrategy);
    }
    getSameUrlStrategy(t) {
        return Lt(t, this.sameUrlStrategy);
    }
    stringifyProperties() {
        return [ [ "routingMode", "mode" ], [ "swapStrategy", "swap" ], [ "resolutionMode", "resolution" ], [ "queryParamsStrategy", "queryParams" ], [ "fragmentStrategy", "fragment" ], [ "historyStrategy", "history" ], [ "sameUrlStrategy", "sameUrl" ] ].map((([t, e]) => {
            const i = this[t];
            return `${e}:${"function" === typeof i ? i : `'${i}'`}`;
        })).join(",");
    }
    clone() {
        return new RouterOptions(this.useUrlFragmentHash, this.useHref, this.statefulHistoryLength, this.routingMode, this.swapStrategy, this.resolutionMode, this.queryParamsStrategy, this.fragmentStrategy, this.historyStrategy, this.sameUrlStrategy);
    }
    toString() {
        return `RO(${this.stringifyProperties()})`;
    }
}

class NavigationOptions extends RouterOptions {
    constructor(t, e, i, s, n, o, r, a) {
        super(t.useUrlFragmentHash, t.useHref, t.statefulHistoryLength, t.routingMode, t.swapStrategy, t.resolutionMode, t.queryParamsStrategy, t.fragmentStrategy, t.historyStrategy, t.sameUrlStrategy);
        this.title = e;
        this.titleSeparator = i;
        this.append = s;
        this.context = n;
        this.queryParams = o;
        this.fragment = r;
        this.state = a;
    }
    static get DEFAULT() {
        return NavigationOptions.create({});
    }
    static create(t) {
        var e, i, s, n, o, r, a;
        return new NavigationOptions(RouterOptions.create(t), null !== (e = t.title) && void 0 !== e ? e : null, null !== (i = t.titleSeparator) && void 0 !== i ? i : " | ", null !== (s = t.append) && void 0 !== s ? s : false, null !== (n = t.context) && void 0 !== n ? n : null, null !== (o = t.queryParams) && void 0 !== o ? o : null, null !== (r = t.fragment) && void 0 !== r ? r : "", null !== (a = t.state) && void 0 !== a ? a : null);
    }
    clone() {
        return new NavigationOptions(super.clone(), this.title, this.titleSeparator, this.append, this.context, {
            ...this.queryParams
        }, this.fragment, null === this.state ? null : {
            ...this.state
        });
    }
    toString() {
        return `NO(${super.stringifyProperties()})`;
    }
}

class Navigation {
    constructor(t, e, i, s, n, o) {
        this.id = t;
        this.instructions = e;
        this.trigger = i;
        this.options = s;
        this.prevNavigation = n;
        this.finalInstructions = o;
    }
    static create(t) {
        return new Navigation(t.id, t.instructions, t.trigger, t.options, t.prevNavigation, t.finalInstructions);
    }
    toString() {
        return `N(id:${this.id},instructions:${this.instructions},trigger:'${this.trigger}')`;
    }
}

class Transition {
    constructor(t, e, i, s, n, o, r, a, h, c, u, l, d, f, p) {
        this.id = t;
        this.prevInstructions = e;
        this.instructions = i;
        this.finalInstructions = s;
        this.instructionsChanged = n;
        this.trigger = o;
        this.options = r;
        this.managedState = a;
        this.previousRouteTree = h;
        this.routeTree = c;
        this.promise = u;
        this.resolve = l;
        this.reject = d;
        this.guardsResult = f;
        this.error = p;
    }
    static create(t) {
        return new Transition(t.id, t.prevInstructions, t.instructions, t.finalInstructions, t.instructionsChanged, t.trigger, t.options, t.managedState, t.previousRouteTree, t.routeTree, t.promise, t.resolve, t.reject, t.guardsResult, void 0);
    }
    run(t, e) {
        if (true !== this.guardsResult) return;
        try {
            const i = t();
            if (i instanceof Promise) i.then(e).catch((t => {
                this.handleError(t);
            })); else e(i);
        } catch (t) {
            this.handleError(t);
        }
    }
    handleError(t) {
        this.reject(this.error = t);
    }
    toString() {
        return `T(id:${this.id},trigger:'${this.trigger}',instructions:${this.instructions},options:${this.options})`;
    }
}

const Ut = _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__.DI.createInterface("IRouter", (t => t.singleton(Ot)));

let Ot = class Router {
    constructor(t, e, i, s, n) {
        this.container = t;
        this.p = e;
        this.logger = i;
        this.events = s;
        this.locationMgr = n;
        this.t = null;
        this.i = null;
        this.o = null;
        this.options = RouterOptions.DEFAULT;
        this.navigated = false;
        this.navigationId = 0;
        this.lastSuccessfulNavigation = null;
        this.activeNavigation = null;
        this.instructions = ViewportInstructionTree.create("");
        this.nextTr = null;
        this.locationChangeSubscription = null;
        this.vpaLookup = new Map;
        this.logger = i.root.scopeTo("Router");
    }
    get ctx() {
        let t = this.t;
        if (null === t) {
            if (!this.container.has(Gt, true)) throw new Error(`Root RouteContext is not set. Did you forget to register RouteConfiguration, or try to navigate before calling Aurelia.start()?`);
            t = this.t = this.container.get(Gt);
        }
        return t;
    }
    get routeTree() {
        let t = this.i;
        if (null === t) {
            const e = this.ctx;
            t = this.i = new RouteTree(NavigationOptions.create({
                ...this.options
            }), Tt, null, RouteNode.create({
                path: "",
                finalPath: "",
                context: e,
                instruction: null,
                component: e.definition.component,
                append: false
            }));
        }
        return t;
    }
    get currentTr() {
        let t = this.o;
        if (null === t) t = this.o = Transition.create({
            id: 0,
            prevInstructions: this.instructions,
            instructions: this.instructions,
            finalInstructions: this.instructions,
            instructionsChanged: true,
            trigger: "api",
            options: NavigationOptions.DEFAULT,
            managedState: null,
            previousRouteTree: this.routeTree.clone(),
            routeTree: this.routeTree,
            resolve: null,
            reject: null,
            promise: null,
            guardsResult: true,
            error: void 0
        });
        return t;
    }
    set currentTr(t) {
        this.o = t;
    }
    resolveContext(t) {
        return RouteContext.resolve(this.ctx, t);
    }
    start(t, e) {
        this.options = RouterOptions.create(t);
        this.locationMgr.startListening();
        this.locationChangeSubscription = this.events.subscribe("au:router:location-change", (t => {
            this.p.taskQueue.queueTask((() => {
                const e = At(t.state) ? t.state : null;
                const i = NavigationOptions.create({
                    ...this.options,
                    historyStrategy: "replace"
                });
                const s = ViewportInstructionTree.create(t.url, i);
                this.enqueue(s, t.trigger, e, null);
            }));
        }));
        if (!this.navigated && e) return this.load(this.locationMgr.getPath(), {
            historyStrategy: "replace"
        });
    }
    stop() {
        var t;
        this.locationMgr.stopListening();
        null === (t = this.locationChangeSubscription) || void 0 === t ? void 0 : t.dispose();
    }
    load(t, e) {
        const i = this.createViewportInstructions(t, e);
        this.logger.trace("load(instructions:%s)", i);
        return this.enqueue(i, "api", null, null);
    }
    isActive(t, e) {
        const i = this.resolveContext(e);
        const s = this.createViewportInstructions(t, {
            context: i
        });
        this.logger.trace("isActive(instructions:%s,ctx:%s)", s, i);
        return this.routeTree.contains(s);
    }
    getRouteContext(t, e, s) {
        const n = s.get(_aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__.ILogger).scopeTo("RouteContext");
        const o = RouteDefinition.resolve(e.Type);
        let r = this.vpaLookup.get(t);
        if (void 0 === r) this.vpaLookup.set(t, r = new WeakMap);
        let a = r.get(o);
        if (void 0 === a) {
            n.trace(`creating new RouteContext for %s`, o);
            const i = s.has(Gt, true) ? s.get(Gt) : null;
            r.set(o, a = new RouteContext(t, i, e, o, s));
        } else {
            n.trace(`returning existing RouteContext for %s`, o);
            if (null !== t) a.vpa = t;
        }
        return a;
    }
    createViewportInstructions(t, e) {
        if ("string" === typeof t) t = this.locationMgr.removeBaseHref(t);
        return ViewportInstructionTree.create(t, this.getNavigationOptions(e));
    }
    enqueue(t, e, i, s) {
        const n = this.currentTr;
        if ("api" !== e && "api" === n.trigger && n.instructions.equals(t)) {
            this.logger.debug(`Ignoring navigation triggered by '%s' because it is the same URL as the previous navigation which was triggered by 'api'.`, e);
            return true;
        }
        let o;
        let r;
        let a;
        if (null === s) a = new Promise((function(t, e) {
            o = t;
            r = e;
        })); else {
            this.logger.debug(`Reusing promise/resolve/reject from the previously failed transition %s`, s);
            a = s.promise;
            o = s.resolve;
            r = s.reject;
        }
        const h = this.nextTr = Transition.create({
            id: ++this.navigationId,
            trigger: e,
            managedState: i,
            prevInstructions: n.finalInstructions,
            finalInstructions: t,
            instructionsChanged: !n.finalInstructions.equals(t),
            instructions: t,
            options: t.options,
            promise: a,
            resolve: o,
            reject: r,
            previousRouteTree: this.routeTree,
            routeTree: this.i = this.routeTree.clone(),
            guardsResult: true,
            error: void 0
        });
        this.logger.debug(`Scheduling transition: %s`, h);
        if (null === this.activeNavigation) try {
            this.run(h);
        } catch (t) {
            h.handleError(t);
        }
        return h.promise.then((t => {
            this.logger.debug(`Transition succeeded: %s`, h);
            return t;
        })).catch((t => {
            this.logger.error(`Navigation failed: %s`, h, t);
            throw t;
        }));
    }
    run(t) {
        this.currentTr = t;
        this.nextTr = null;
        const e = null === this.lastSuccessfulNavigation ? null : Navigation.create({
            ...this.lastSuccessfulNavigation,
            prevNavigation: null
        });
        this.activeNavigation = Navigation.create({
            id: t.id,
            instructions: t.instructions,
            trigger: t.trigger,
            options: t.options,
            prevNavigation: e,
            finalInstructions: t.finalInstructions
        });
        const i = this.resolveContext(t.options.context);
        const s = !this.navigated || t.instructions.children.length !== i.node.children.length || t.instructions.children.some(((t, e) => {
            var s, n;
            return !(null !== (n = null === (s = i.node.children[e]) || void 0 === s ? void 0 : s.originalInstruction.equals(t)) && void 0 !== n ? n : false);
        }));
        const n = s || "reload" === t.options.getSameUrlStrategy(this.instructions);
        if (!n) {
            this.logger.trace(`run(tr:%s) - NOT processing route`, t);
            this.navigated = true;
            this.activeNavigation = null;
            t.resolve(false);
            this.runNextTransition(t);
            return;
        }
        this.logger.trace(`run(tr:%s) - processing route`, t);
        this.events.publish(new NavigationStartEvent(t.id, t.instructions, t.trigger, t.managedState));
        if (null !== this.nextTr) {
            this.logger.debug(`run(tr:%s) - aborting because a new transition was queued in response to the NavigationStartEvent`, t);
            return this.run(this.nextTr);
        }
        this.activeNavigation = Navigation.create({
            ...this.activeNavigation,
            finalInstructions: t.finalInstructions
        });
        t.run((() => {
            this.logger.trace(`run() - compiling route tree: %s`, t.finalInstructions);
            return yt(t.routeTree, t.finalInstructions, i);
        }), (() => {
            const e = t.previousRouteTree.root.children;
            const i = t.routeTree.root.children;
            const s = B(e, i);
            Batch.start((i => {
                this.logger.trace(`run() - invoking canUnload on ${e.length} nodes`);
                for (const s of e) s.context.vpa.canUnload(t, i);
            })).continueWith((e => {
                if (true !== t.guardsResult) {
                    e.push();
                    this.cancelNavigation(t);
                }
            })).continueWith((e => {
                this.logger.trace(`run() - invoking canLoad on ${i.length} nodes`);
                for (const s of i) s.context.vpa.canLoad(t, e);
            })).continueWith((e => {
                if (true !== t.guardsResult) {
                    e.push();
                    this.cancelNavigation(t);
                }
            })).continueWith((i => {
                this.logger.trace(`run() - invoking unload on ${e.length} nodes`);
                for (const s of e) s.context.vpa.unload(t, i);
            })).continueWith((e => {
                this.logger.trace(`run() - invoking load on ${i.length} nodes`);
                for (const s of i) s.context.vpa.load(t, e);
            })).continueWith((e => {
                this.logger.trace(`run() - invoking swap on ${s.length} nodes`);
                for (const i of s) i.context.vpa.swap(t, e);
            })).continueWith((() => {
                this.logger.trace(`run() - finalizing transition`);
                s.forEach((function(t) {
                    t.context.vpa.endTransition();
                }));
                this.navigated = true;
                this.instructions = t.finalInstructions = t.routeTree.finalizeInstructions();
                this.events.publish(new NavigationEndEvent(t.id, t.instructions, this.instructions));
                this.lastSuccessfulNavigation = this.activeNavigation;
                this.activeNavigation = null;
                this.applyHistoryState(t);
                t.resolve(true);
                this.runNextTransition(t);
            })).start();
        }));
    }
    applyHistoryState(t) {
        const e = t.finalInstructions.toUrl(this.options.useUrlFragmentHash);
        switch (t.options.getHistoryStrategy(this.instructions)) {
          case "none":
            break;

          case "push":
            this.locationMgr.pushState(Pt(t.options.state, t.id), this.updateTitle(t), e);
            break;

          case "replace":
            this.locationMgr.replaceState(Pt(t.options.state, t.id), this.updateTitle(t), e);
            break;
        }
    }
    getTitle(t) {
        var e, i;
        switch (typeof t.options.title) {
          case "function":
            return null !== (e = t.options.title.call(void 0, t.routeTree.root)) && void 0 !== e ? e : "";

          case "string":
            return t.options.title;

          default:
            return null !== (i = t.routeTree.root.getTitle(t.options.titleSeparator)) && void 0 !== i ? i : "";
        }
    }
    updateTitle(t) {
        const e = this.getTitle(t);
        if (e.length > 0) this.p.document.title = e;
        return this.p.document.title;
    }
    cancelNavigation(t) {
        this.logger.trace(`cancelNavigation(tr:%s)`, t);
        const e = t.previousRouteTree.root.children;
        const i = t.routeTree.root.children;
        const s = B(e, i);
        s.forEach((function(t) {
            t.context.vpa.cancelUpdate();
        }));
        this.activeNavigation = null;
        this.instructions = t.prevInstructions;
        this.i = t.previousRouteTree;
        this.events.publish(new NavigationCancelEvent(t.id, t.instructions, `guardsResult is ${t.guardsResult}`));
        if (false === t.guardsResult) {
            t.resolve(false);
            this.runNextTransition(t);
        } else void (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__.onResolve)(this.enqueue(t.guardsResult, "api", t.managedState, t), (() => {
            this.logger.trace(`cancelNavigation(tr:%s) - finished redirect`, t);
        }));
    }
    runNextTransition(t) {
        if (null !== this.nextTr) {
            this.logger.trace(`runNextTransition(tr:%s) -> scheduling nextTransition: %s`, t, this.nextTr);
            this.p.taskQueue.queueTask((() => {
                const t = this.nextTr;
                if (null !== t) try {
                    this.run(t);
                } catch (e) {
                    t.handleError(e);
                }
            }));
        }
    }
    getNavigationOptions(t) {
        return NavigationOptions.create({
            ...this.options,
            ...t
        });
    }
};

Ot = K([ X(0, _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__.IContainer), X(1, _aurelia_runtime_html__WEBPACK_IMPORTED_MODULE_2__.IPlatform), X(2, _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__.ILogger), X(3, tt), X(4, nt) ], Ot);

const jt = _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__.DI.createInterface("IViewportInstruction");

class ViewportInstruction {
    constructor(t, e, i, s, n, o, r, a) {
        this.context = t;
        this.append = e;
        this.open = i;
        this.close = s;
        this.component = n;
        this.viewport = o;
        this.params = r;
        this.children = a;
    }
    static create(t, e) {
        var i, s, n, o, r, a, h, c, u;
        if (t instanceof ViewportInstruction) return t;
        if (G(t)) {
            const l = TypedNavigationInstruction.create(t.component);
            const d = null !== (s = null === (i = t.children) || void 0 === i ? void 0 : i.map(ViewportInstruction.create)) && void 0 !== s ? s : [];
            return new ViewportInstruction(null !== (o = null !== (n = t.context) && void 0 !== n ? n : e) && void 0 !== o ? o : null, null !== (r = t.append) && void 0 !== r ? r : false, null !== (a = t.open) && void 0 !== a ? a : 0, null !== (h = t.close) && void 0 !== h ? h : 0, l, null !== (c = t.viewport) && void 0 !== c ? c : null, null !== (u = t.params) && void 0 !== u ? u : null, d);
        }
        const l = TypedNavigationInstruction.create(t);
        return new ViewportInstruction(null !== e && void 0 !== e ? e : null, false, 0, 0, l, null, null, []);
    }
    contains(t) {
        const e = this.children;
        const i = t.children;
        if (e.length < i.length) return false;
        if (!this.component.equals(t.component)) return false;
        for (let t = 0, s = i.length; t < s; ++t) if (!e[t].contains(i[t])) return false;
        return true;
    }
    equals(t) {
        const e = this.children;
        const i = t.children;
        if (e.length !== i.length) return false;
        if (!this.component.equals(t.component) || this.viewport !== t.viewport || !Q(this.params, t.params)) return false;
        for (let t = 0, s = e.length; t < s; ++t) if (!e[t].equals(i[t])) return false;
        return true;
    }
    clone() {
        return new ViewportInstruction(this.context, this.append, this.open, this.close, this.component.clone(), this.viewport, null === this.params ? null : {
            ...this.params
        }, [ ...this.children ]);
    }
    toUrlComponent(t = true) {
        const e = this.component.toUrlComponent();
        const i = null === this.params || 0 === Object.keys(this.params).length ? "" : `(${Bt(this.params)})`;
        const s = 0 === e.length || null === this.viewport || 0 === this.viewport.length ? "" : `@${this.viewport}`;
        const n = `${"(".repeat(this.open)}${e}${i}${s}${")".repeat(this.close)}`;
        const o = t ? this.children.map((t => t.toUrlComponent())).join("+") : "";
        if (n.length > 0) {
            if (o.length > 0) return [ n, o ].join("/");
            return n;
        }
        return o;
    }
    toString() {
        const t = `c:${this.component}`;
        const e = null === this.viewport || 0 === this.viewport.length ? "" : `viewport:${this.viewport}`;
        const i = 0 === this.children.length ? "" : `children:[${this.children.map(String).join(",")}]`;
        const s = [ t, e, i ].filter(Boolean).join(",");
        return `VPI(${s})`;
    }
}

function Bt(t) {
    const e = Object.keys(t);
    const i = Array(e.length);
    const s = [];
    const n = [];
    for (const t of e) if ((0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__.isArrayIndex)(t)) s.push(Number(t)); else n.push(t);
    for (let o = 0; o < e.length; ++o) {
        const e = s.indexOf(o);
        if (e > -1) {
            i[o] = t[o];
            s.splice(e, 1);
        } else {
            const e = n.shift();
            i[o] = `${e}=${t[e]}`;
        }
    }
    return i.join(",");
}

const Dt = function() {
    let t = 0;
    const e = new Map;
    return function(i) {
        let s = e.get(i);
        if (void 0 === s) e.set(i, s = ++t);
        return s;
    };
}();

class ViewportInstructionTree {
    constructor(t, e, i, s, n) {
        this.options = t;
        this.isAbsolute = e;
        this.children = i;
        this.queryParams = s;
        this.fragment = n;
    }
    static create(t, e) {
        const i = NavigationOptions.create({
            ...e
        });
        if (t instanceof ViewportInstructionTree) return new ViewportInstructionTree(i, t.isAbsolute, t.children.map((t => ViewportInstruction.create(t, i.context))), t.queryParams, t.fragment);
        if (t instanceof Array) return new ViewportInstructionTree(i, false, t.map((t => ViewportInstruction.create(t, i.context))), Tt, null);
        if ("string" === typeof t) {
            const e = RouteExpression.parse(t, i.useUrlFragmentHash);
            return e.toInstructionTree(i);
        }
        return new ViewportInstructionTree(i, false, [ ViewportInstruction.create(t, i.context) ], Tt, null);
    }
    equals(t) {
        const e = this.children;
        const i = t.children;
        if (e.length !== i.length) return false;
        for (let t = 0, s = e.length; t < s; ++t) if (!e[t].equals(i[t])) return false;
        return true;
    }
    toUrl(t = false) {
        var e;
        let i;
        let s;
        if (t) {
            i = "";
            s = `#${this.toPath()}`;
        } else {
            i = this.toPath();
            s = null !== (e = this.fragment) && void 0 !== e ? e : "";
        }
        let n = this.queryParams.toString();
        n = "" === n ? "" : `?${n}`;
        const o = `${i}${s}${n}`;
        return o;
    }
    toPath() {
        const t = this.children.map((t => t.toUrlComponent())).join("+");
        return t;
    }
    toString() {
        return `[${this.children.map(String).join(",")}]`;
    }
}

var Mt;

(function(t) {
    t[t["string"] = 0] = "string";
    t[t["ViewportInstruction"] = 1] = "ViewportInstruction";
    t[t["CustomElementDefinition"] = 2] = "CustomElementDefinition";
    t[t["Promise"] = 3] = "Promise";
    t[t["IRouteViewModel"] = 4] = "IRouteViewModel";
})(Mt || (Mt = {}));

class TypedNavigationInstruction {
    constructor(t, e) {
        this.type = t;
        this.value = e;
    }
    static create(t) {
        if (t instanceof TypedNavigationInstruction) return t;
        if ("string" === typeof t) return new TypedNavigationInstruction(0, t); else if (!(0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__.isObject)(t)) Y("function/class or object", "", t); else if ("function" === typeof t) if (_aurelia_runtime_html__WEBPACK_IMPORTED_MODULE_2__.CustomElement.isType(t)) {
            const e = _aurelia_runtime_html__WEBPACK_IMPORTED_MODULE_2__.CustomElement.getDefinition(t);
            return new TypedNavigationInstruction(2, e);
        } else return TypedNavigationInstruction.create(t()); else if (t instanceof Promise) return new TypedNavigationInstruction(3, t); else if (G(t)) {
            const e = ViewportInstruction.create(t);
            return new TypedNavigationInstruction(1, e);
        } else if ((0,_aurelia_runtime_html__WEBPACK_IMPORTED_MODULE_2__.isCustomElementViewModel)(t)) return new TypedNavigationInstruction(4, t); else if (t instanceof _aurelia_runtime_html__WEBPACK_IMPORTED_MODULE_2__.CustomElementDefinition) return new TypedNavigationInstruction(2, t); else if (F(t)) {
            const e = _aurelia_runtime_html__WEBPACK_IMPORTED_MODULE_2__.CustomElement.define(t);
            const i = _aurelia_runtime_html__WEBPACK_IMPORTED_MODULE_2__.CustomElement.getDefinition(e);
            return new TypedNavigationInstruction(2, i);
        } else throw new Error(`Invalid component ${D(t)}: must be either a class, a custom element ViewModel, or a (partial) custom element definition`);
    }
    equals(t) {
        switch (this.type) {
          case 2:
          case 4:
          case 3:
          case 0:
            return this.type === t.type && this.value === t.value;

          case 1:
            return this.type === t.type && this.value.equals(t.value);
        }
    }
    clone() {
        return new TypedNavigationInstruction(this.type, this.value);
    }
    toUrlComponent() {
        switch (this.type) {
          case 2:
            return this.value.name;

          case 4:
          case 3:
            return `au$obj${Dt(this.value)}`;

          case 1:
            return this.value.toUrlComponent();

          case 0:
            return this.value;
        }
    }
    toString() {
        switch (this.type) {
          case 2:
            return `CEDef(name:'${this.value.name}')`;

          case 3:
            return `Promise`;

          case 4:
            return `VM(name:'${_aurelia_runtime_html__WEBPACK_IMPORTED_MODULE_2__.CustomElement.getDefinition(this.value.constructor).name}')`;

          case 1:
            return this.value.toString();

          case 0:
            return `'${this.value}'`;
        }
    }
}

const qt = _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__.emptyArray;

function Ht(t, e) {
    if (!Q(t.params, e.params)) return "invoke-lifecycles";
    return "none";
}

class RouteConfig {
    constructor(t, e, i, s, n, o, r, a, h) {
        this.id = t;
        this.path = e;
        this.title = i;
        this.redirectTo = s;
        this.caseSensitive = n;
        this.transitionPlan = o;
        this.viewport = r;
        this.data = a;
        this.routes = h;
    }
    static create(t, e) {
        var i, s, n, o, r, a, h, c, u, l, d, f, p, g, v, w, m, $, x, y, E, b, S, R;
        if ("string" === typeof t || t instanceof Array) {
            const u = t;
            const l = null !== (i = null === e || void 0 === e ? void 0 : e.redirectTo) && void 0 !== i ? i : null;
            const d = null !== (s = null === e || void 0 === e ? void 0 : e.caseSensitive) && void 0 !== s ? s : false;
            const f = null !== (n = null === e || void 0 === e ? void 0 : e.id) && void 0 !== n ? n : u instanceof Array ? u[0] : u;
            const p = null !== (o = null === e || void 0 === e ? void 0 : e.title) && void 0 !== o ? o : null;
            const g = null !== (r = null === e || void 0 === e ? void 0 : e.transitionPlan) && void 0 !== r ? r : Ht;
            const v = null !== (a = null === e || void 0 === e ? void 0 : e.viewport) && void 0 !== a ? a : null;
            const w = null !== (h = null === e || void 0 === e ? void 0 : e.data) && void 0 !== h ? h : {};
            const m = null !== (c = null === e || void 0 === e ? void 0 : e.routes) && void 0 !== c ? c : qt;
            return new RouteConfig(f, u, p, l, d, g, v, w, m);
        } else if ("object" === typeof t) {
            const i = t;
            _(i, "");
            const s = null !== (l = null !== (u = i.path) && void 0 !== u ? u : null === e || void 0 === e ? void 0 : e.path) && void 0 !== l ? l : null;
            const n = null !== (f = null !== (d = i.title) && void 0 !== d ? d : null === e || void 0 === e ? void 0 : e.title) && void 0 !== f ? f : null;
            const o = null !== (g = null !== (p = i.redirectTo) && void 0 !== p ? p : null === e || void 0 === e ? void 0 : e.redirectTo) && void 0 !== g ? g : null;
            const r = null !== (w = null !== (v = i.caseSensitive) && void 0 !== v ? v : null === e || void 0 === e ? void 0 : e.caseSensitive) && void 0 !== w ? w : false;
            const a = null !== ($ = null !== (m = i.id) && void 0 !== m ? m : null === e || void 0 === e ? void 0 : e.id) && void 0 !== $ ? $ : s instanceof Array ? s[0] : s;
            const h = null !== (y = null !== (x = i.transitionPlan) && void 0 !== x ? x : null === e || void 0 === e ? void 0 : e.transitionPlan) && void 0 !== y ? y : Ht;
            const c = null !== (b = null !== (E = i.viewport) && void 0 !== E ? E : null === e || void 0 === e ? void 0 : e.viewport) && void 0 !== b ? b : null;
            const C = {
                ...null === e || void 0 === e ? void 0 : e.data,
                ...i.data
            };
            const k = [ ...null !== (S = i.routes) && void 0 !== S ? S : qt, ...null !== (R = null === e || void 0 === e ? void 0 : e.routes) && void 0 !== R ? R : qt ];
            return new RouteConfig(a, s, n, o, r, h, c, C, k);
        } else Y("string, function/class or object", "", t);
    }
    static configure(t, e) {
        const i = RouteConfig.create(t, e);
        _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__.Metadata.define(Ft.name, i, e);
        return e;
    }
    static getConfig(t) {
        if (!_aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__.Metadata.hasOwn(Ft.name, t)) Ft.configure({}, t);
        return _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__.Metadata.getOwn(Ft.name, t);
    }
    saveTo(t) {
        _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__.Metadata.define(Ft.name, this, t);
    }
}

class ChildRouteConfig extends RouteConfig {
    constructor(t, e, i, s, n, o, r, a, h, c) {
        super(t, e, i, s, n, o, r, a, h);
        this.component = c;
    }
}

const Ft = {
    name: _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__.Protocol.resource.keyFor("route"),
    isConfigured(t) {
        return _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__.Metadata.hasOwn(Ft.name, t);
    },
    configure(t, e) {
        const i = RouteConfig.create(t, e);
        _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__.Metadata.define(Ft.name, i, e);
        return e;
    },
    getConfig(t) {
        if (!Ft.isConfigured(t)) Ft.configure({}, t);
        return _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__.Metadata.getOwn(Ft.name, t);
    }
};

function zt(t) {
    return function(e) {
        return Ft.configure(t, e);
    };
}

class RouteDefinition {
    constructor(t, e) {
        var i, s, n, o, r;
        this.config = t;
        this.component = e;
        this.hasExplicitPath = null !== t.path;
        this.caseSensitive = t.caseSensitive;
        this.path = M(null !== (i = t.path) && void 0 !== i ? i : e.name);
        this.redirectTo = null !== (s = t.redirectTo) && void 0 !== s ? s : null;
        this.viewport = null !== (n = t.viewport) && void 0 !== n ? n : "default";
        this.id = q(null !== (o = t.id) && void 0 !== o ? o : this.path);
        this.data = null !== (r = t.data) && void 0 !== r ? r : {};
    }
    static resolve(t, e) {
        if (W(t)) return new RouteDefinition(t, null);
        return (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__.onResolve)(this.resolveCustomElementDefinition(t, e), (e => {
            const i = z(t) ? {
                ...Ft.getConfig(e.Type),
                ...t
            } : Ft.getConfig(e.Type);
            if (!_aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__.Metadata.hasOwn(Ft.name, e)) {
                const t = new RouteDefinition(i, e);
                _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__.Metadata.define(Ft.name, t, e);
            } else {
                let t = _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__.Metadata.getOwn(Ft.name, e);
                if (t.config !== i) {
                    t = new RouteDefinition(i, e);
                    _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__.Metadata.define(Ft.name, t, e);
                }
            }
            return _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__.Metadata.getOwn(Ft.name, e);
        }));
    }
    static resolveCustomElementDefinition(t, e) {
        if (z(t)) return this.resolveCustomElementDefinition(t.component, e);
        const i = TypedNavigationInstruction.create(t);
        switch (i.type) {
          case 0:
            {
                if (void 0 === e) throw new Error(`When retrieving the RouteDefinition for a component name, a RouteContext (that can resolve it) must be provided`);
                const t = e.container.find(_aurelia_runtime_html__WEBPACK_IMPORTED_MODULE_2__.CustomElement, i.value);
                if (null === t) throw new Error(`Could not find a CustomElement named '${i.value}' in the current container scope of ${e}. This means the component is neither registered at Aurelia startup nor via the 'dependencies' decorator or static property.`);
                return t;
            }

          case 2:
            return i.value;

          case 4:
            return _aurelia_runtime_html__WEBPACK_IMPORTED_MODULE_2__.CustomElement.getDefinition(i.value.constructor);

          case 3:
            if (void 0 === e) throw new Error(`RouteContext must be provided when resolving an imported module`);
            return e.resolveLazy(i.value);
        }
    }
    register(t) {
        var e;
        null === (e = this.component) || void 0 === e ? void 0 : e.register(t);
    }
    toUrlComponent() {
        return "not-implemented";
    }
    toString() {
        const t = null === this.config.path ? "null" : `'${this.config.path}'`;
        if (null !== this.component) return `RD(config.path:${t},c.name:'${this.component.name}')`; else return `RD(config.path:${t},redirectTo:'${this.redirectTo}')`;
    }
}

const Wt = new WeakMap;

class ComponentAgent {
    constructor(t, e, s, n, o) {
        var r, a, h, c;
        this.instance = t;
        this.controller = e;
        this.definition = s;
        this.routeNode = n;
        this.ctx = o;
        this.h = o.container.get(_aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__.ILogger).scopeTo(`ComponentAgent<${o.friendlyPath}>`);
        this.h.trace(`constructor()`);
        const u = e.lifecycleHooks;
        this.canLoadHooks = (null !== (r = u.canLoad) && void 0 !== r ? r : []).map((t => t.instance));
        this.loadHooks = (null !== (a = u.load) && void 0 !== a ? a : []).map((t => t.instance));
        this.canUnloadHooks = (null !== (h = u.canUnload) && void 0 !== h ? h : []).map((t => t.instance));
        this.unloadHooks = (null !== (c = u.unload) && void 0 !== c ? c : []).map((t => t.instance));
        this.u = "canLoad" in t;
        this.l = "load" in t;
        this.g = "canUnload" in t;
        this.v = "unload" in t;
    }
    static for(t, e, i, s) {
        let n = Wt.get(t);
        if (void 0 === n) {
            const o = s.container;
            const r = RouteDefinition.resolve(t.constructor);
            const a = _aurelia_runtime_html__WEBPACK_IMPORTED_MODULE_2__.Controller.$el(o, t, e.host, null);
            Wt.set(t, n = new ComponentAgent(t, a, r, i, s));
        }
        return n;
    }
    activate(t, e, i) {
        if (null === t) {
            this.h.trace(`activate() - initial`);
            return this.controller.activate(this.controller, e, i);
        }
        this.h.trace(`activate()`);
        void this.controller.activate(t, e, i);
    }
    deactivate(t, e, i) {
        if (null === t) {
            this.h.trace(`deactivate() - initial`);
            return this.controller.deactivate(this.controller, e, i);
        }
        this.h.trace(`deactivate()`);
        void this.controller.deactivate(t, e, i);
    }
    dispose() {
        this.h.trace(`dispose()`);
        this.controller.dispose();
    }
    canUnload(t, e, i) {
        this.h.trace(`canUnload(next:%s) - invoking ${this.canUnloadHooks.length} hooks`, e);
        i.push();
        for (const s of this.canUnloadHooks) t.run((() => {
            i.push();
            return s.canUnload(this.instance, e, this.routeNode);
        }), (e => {
            if (true === t.guardsResult && true !== e) t.guardsResult = false;
            i.pop();
        }));
        if (this.g) t.run((() => {
            i.push();
            return this.instance.canUnload(e, this.routeNode);
        }), (e => {
            if (true === t.guardsResult && true !== e) t.guardsResult = false;
            i.pop();
        }));
        i.pop();
    }
    canLoad(t, e, i) {
        this.h.trace(`canLoad(next:%s) - invoking ${this.canLoadHooks.length} hooks`, e);
        i.push();
        for (const s of this.canLoadHooks) t.run((() => {
            i.push();
            return s.canLoad(this.instance, e.params, e, this.routeNode);
        }), (e => {
            if (true === t.guardsResult && true !== e) t.guardsResult = false === e ? false : ViewportInstructionTree.create(e);
            i.pop();
        }));
        if (this.u) t.run((() => {
            i.push();
            return this.instance.canLoad(e.params, e, this.routeNode);
        }), (e => {
            if (true === t.guardsResult && true !== e) t.guardsResult = false === e ? false : ViewportInstructionTree.create(e);
            i.pop();
        }));
        i.pop();
    }
    unload(t, e, i) {
        this.h.trace(`unload(next:%s) - invoking ${this.unloadHooks.length} hooks`, e);
        i.push();
        for (const s of this.unloadHooks) t.run((() => {
            i.push();
            return s.unload(this.instance, e, this.routeNode);
        }), (() => {
            i.pop();
        }));
        if (this.v) t.run((() => {
            i.push();
            return this.instance.unload(e, this.routeNode);
        }), (() => {
            i.pop();
        }));
        i.pop();
    }
    load(t, e, i) {
        this.h.trace(`load(next:%s) - invoking ${this.loadHooks.length} hooks`, e);
        i.push();
        for (const s of this.loadHooks) t.run((() => {
            i.push();
            return s.load(this.instance, e.params, e, this.routeNode);
        }), (() => {
            i.pop();
        }));
        if (this.l) t.run((() => {
            i.push();
            return this.instance.load(e.params, e, this.routeNode);
        }), (() => {
            i.pop();
        }));
        i.pop();
    }
    toString() {
        return `CA(ctx:'${this.ctx.friendlyPath}',c:'${this.definition.component.name}')`;
    }
}

const Gt = _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__.DI.createInterface("IRouteContext");

const Yt = "au$residue";

class RouteContext {
    constructor(t, e, s, n, o) {
        var r;
        this.parent = e;
        this.component = s;
        this.definition = n;
        this.parentContainer = o;
        this.childViewportAgents = [];
        this.childRoutes = [];
        this.m = null;
        this.$ = null;
        this.prevNode = null;
        this.S = null;
        this.R = null;
        this.R = t;
        if (null === e) {
            this.root = this;
            this.path = [ this ];
            this.friendlyPath = s.name;
        } else {
            this.root = e.root;
            this.path = [ ...e.path, this ];
            this.friendlyPath = `${e.friendlyPath}/${s.name}`;
        }
        this.logger = o.get(_aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__.ILogger).scopeTo(`RouteContext<${this.friendlyPath}>`);
        this.logger.trace("constructor()");
        this.moduleLoader = o.get(_aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__.IModuleLoader);
        const a = this.container = o.createChild();
        a.registerResolver(_aurelia_runtime_html__WEBPACK_IMPORTED_MODULE_2__.IController, this.hostControllerProvider = new _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__.InstanceProvider, true);
        a.registerResolver(Gt, new _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__.InstanceProvider("IRouteContext", this));
        a.register(n);
        a.register(...s.dependencies);
        this.recognizer = new _aurelia_route_recognizer__WEBPACK_IMPORTED_MODULE_1__.RouteRecognizer;
        const h = [];
        const c = [];
        for (const t of n.config.routes) if (t instanceof Promise) {
            const e = this.addRoute(t);
            h.push(e);
            c.push(e);
        } else {
            const e = RouteDefinition.resolve(t, this);
            if (e instanceof Promise) if (z(t) && null != t.path) {
                for (const i of M(t.path)) this.$addRoute(i, null !== (r = t.caseSensitive) && void 0 !== r ? r : false, e);
                const i = this.childRoutes.length;
                const s = e.then((t => this.childRoutes[i] = t));
                this.childRoutes.push(s);
                c.push(s.then(_aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__.noop));
            } else throw new Error(`Invalid route config. When the component property is a lazy import, the path must be specified. To use lazy loading without specifying the path (e.g. in direct routing), pass the import promise as a direct value to the routes array instead of providing it as the component property on an object literal.`); else {
                for (const t of e.path) this.$addRoute(t, e.caseSensitive, e);
                this.childRoutes.push(e);
            }
        }
        if (h.length > 0) this.m = Promise.all(h).then((() => {
            this.m = null;
        }));
        if (c.length > 0) this.$ = Promise.all(c).then((() => {
            this.$ = null;
        }));
    }
    get id() {
        return this.container.id;
    }
    get isRoot() {
        return null === this.parent;
    }
    get depth() {
        return this.path.length - 1;
    }
    get resolved() {
        return this.m;
    }
    get allResolved() {
        return this.$;
    }
    get node() {
        const t = this.S;
        if (null === t) throw new Error(`Invariant violation: RouteNode should be set immediately after the RouteContext is created. Context: ${this}`);
        return t;
    }
    set node(t) {
        const e = this.prevNode = this.S;
        if (e !== t) {
            this.S = t;
            this.logger.trace(`Node changed from %s to %s`, this.prevNode, t);
        }
    }
    get vpa() {
        const t = this.R;
        if (null === t) throw new Error(`RouteContext has no ViewportAgent: ${this}`);
        return t;
    }
    set vpa(t) {
        if (null === t || void 0 === t) throw new Error(`Cannot set ViewportAgent to ${t} for RouteContext: ${this}`);
        const e = this.R;
        if (e !== t) {
            this.R = t;
            this.logger.trace(`ViewportAgent changed from %s to %s`, e, t);
        }
    }
    static setRoot(t) {
        const e = t.get(_aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__.ILogger).scopeTo("RouteContext");
        if (!t.has(_aurelia_runtime_html__WEBPACK_IMPORTED_MODULE_2__.IAppRoot, true)) Jt(new Error(`The provided container has no registered IAppRoot. RouteContext.setRoot can only be used after Aurelia.app was called, on a container that is within that app's component tree.`), e);
        if (t.has(Gt, true)) Jt(new Error(`A root RouteContext is already registered. A possible cause is the RouterConfiguration being registered more than once in the same container tree. If you have a multi-rooted app, make sure you register RouterConfiguration only in the "forked" containers and not in the common root.`), e);
        const {controller: s} = t.get(_aurelia_runtime_html__WEBPACK_IMPORTED_MODULE_2__.IAppRoot);
        if (void 0 === s) Jt(new Error(`The provided IAppRoot does not (yet) have a controller. A possible cause is calling this API manually before Aurelia.start() is called`), e);
        const n = t.get(Ut);
        const o = n.getRouteContext(null, s.definition, s.container);
        t.register(_aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__.Registration.instance(Gt, o));
        o.node = n.routeTree.root;
    }
    static resolve(t, e) {
        const s = t.container;
        const n = s.get(_aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__.ILogger).scopeTo("RouteContext");
        if (null === e || void 0 === e) {
            n.trace(`resolve(context:%s) - returning root RouteContext`, e);
            return t;
        }
        if (_t(e)) {
            n.trace(`resolve(context:%s) - returning provided RouteContext`, e);
            return e;
        }
        if (e instanceof s.get(_aurelia_runtime_html__WEBPACK_IMPORTED_MODULE_2__.IPlatform).Node) try {
            const t = _aurelia_runtime_html__WEBPACK_IMPORTED_MODULE_2__.CustomElement.for(e, {
                searchParents: true
            });
            n.trace(`resolve(context:Node(nodeName:'${e.nodeName}'),controller:'${t.definition.name}') - resolving RouteContext from controller's RenderContext`);
            return t.container.get(Gt);
        } catch (t) {
            n.error(`Failed to resolve RouteContext from Node(nodeName:'${e.nodeName}')`, t);
            throw t;
        }
        if ((0,_aurelia_runtime_html__WEBPACK_IMPORTED_MODULE_2__.isCustomElementViewModel)(e)) {
            const t = e.$controller;
            n.trace(`resolve(context:CustomElementViewModel(name:'${t.definition.name}')) - resolving RouteContext from controller's RenderContext`);
            return t.container.get(Gt);
        }
        if ((0,_aurelia_runtime_html__WEBPACK_IMPORTED_MODULE_2__.isCustomElementController)(e)) {
            const t = e;
            n.trace(`resolve(context:CustomElementController(name:'${t.definition.name}')) - resolving RouteContext from controller's RenderContext`);
            return t.container.get(Gt);
        }
        Jt(new Error(`Invalid context type: ${Object.prototype.toString.call(e)}`), n);
    }
    dispose() {
        this.container.dispose();
    }
    resolveViewportAgent(t) {
        this.logger.trace(`resolveViewportAgent(req:%s)`, t);
        const e = this.childViewportAgents.find((e => e.handles(t)));
        if (void 0 === e) throw new Error(`Failed to resolve ${t} at:\n${this.printTree()}`);
        return e;
    }
    getAvailableViewportAgents(t) {
        return this.childViewportAgents.filter((e => e.isAvailable(t)));
    }
    getFallbackViewportAgent(t, e) {
        var i;
        return null !== (i = this.childViewportAgents.find((i => i.isAvailable(t) && i.viewport.name === e && i.viewport.fallback.length > 0))) && void 0 !== i ? i : null;
    }
    createComponentAgent(t, e) {
        this.logger.trace(`createComponentAgent(routeNode:%s)`, e);
        this.hostControllerProvider.prepare(t);
        const i = RouteDefinition.resolve(e.component);
        const s = this.container.get(i.component.key);
        const n = ComponentAgent.for(s, t, e, this);
        this.hostControllerProvider.dispose();
        return n;
    }
    registerViewport(t) {
        const e = ViewportAgent.for(t, this);
        if (this.childViewportAgents.includes(e)) this.logger.trace(`registerViewport(agent:%s) -> already registered, so skipping`, e); else {
            this.logger.trace(`registerViewport(agent:%s) -> adding`, e);
            this.childViewportAgents.push(e);
        }
        return e;
    }
    unregisterViewport(t) {
        const e = ViewportAgent.for(t, this);
        if (this.childViewportAgents.includes(e)) {
            this.logger.trace(`unregisterViewport(agent:%s) -> unregistering`, e);
            this.childViewportAgents.splice(this.childViewportAgents.indexOf(e), 1);
        } else this.logger.trace(`unregisterViewport(agent:%s) -> not registered, so skipping`, e);
    }
    recognize(t) {
        var e;
        this.logger.trace(`recognize(path:'${t}')`);
        const i = this.recognizer.recognize(t);
        if (null === i) return null;
        let s;
        if (Reflect.has(i.params, Yt)) {
            s = null !== (e = i.params[Yt]) && void 0 !== e ? e : null;
            Reflect.deleteProperty(i.params, Yt);
        } else s = null;
        return new $RecognizedRoute(i, s);
    }
    addRoute(t) {
        this.logger.trace(`addRoute(routeable:'${t}')`);
        return (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__.onResolve)(RouteDefinition.resolve(t, this), (t => {
            for (const e of t.path) this.$addRoute(e, t.caseSensitive, t);
            this.childRoutes.push(t);
        }));
    }
    $addRoute(t, e, i) {
        this.recognizer.add({
            path: t,
            caseSensitive: e,
            handler: i
        });
        this.recognizer.add({
            path: `${t}/*${Yt}`,
            caseSensitive: e,
            handler: i
        });
    }
    resolveLazy(t) {
        return this.moduleLoader.load(t, (e => {
            let i;
            let s;
            for (const t of e.items) if (t.isConstructable) {
                const e = t.definitions.find(Zt);
                if (void 0 !== e) if ("default" === t.key) i = e; else if (void 0 === s) s = e;
            }
            if (void 0 === i) {
                if (void 0 === s) throw new Error(`${t} does not appear to be a component or CustomElement recognizable by Aurelia`);
                return s;
            }
            return i;
        }));
    }
    toString() {
        const t = this.childViewportAgents;
        const e = t.map(String).join(",");
        return `RC(path:'${this.friendlyPath}',viewports:[${e}])`;
    }
    printTree() {
        const t = [];
        for (let e = 0; e < this.path.length; ++e) t.push(`${" ".repeat(e)}${this.path[e]}`);
        return t.join("\n");
    }
}

function _t(t) {
    return t instanceof RouteContext;
}

function Jt(t, e) {
    e.error(t);
    throw t;
}

function Zt(t) {
    return _aurelia_runtime_html__WEBPACK_IMPORTED_MODULE_2__.CustomElement.isType(t.Type);
}

class $RecognizedRoute {
    constructor(t, e) {
        this.route = t;
        this.residue = e;
    }
}

let Qt = class ViewportCustomElement {
    constructor(t, e) {
        this.logger = t;
        this.ctx = e;
        this.name = "default";
        this.usedBy = "";
        this.default = "";
        this.fallback = "";
        this.noScope = false;
        this.noLink = false;
        this.noHistory = false;
        this.stateful = false;
        this.agent = void 0;
        this.controller = void 0;
        this.logger = t.scopeTo(`au-viewport<${e.friendlyPath}>`);
        this.logger.trace("constructor()");
    }
    hydrated(t) {
        this.logger.trace("hydrated()");
        this.controller = t;
        this.agent = this.ctx.registerViewport(this);
    }
    attaching(t, e, i) {
        this.logger.trace("attaching()");
        return this.agent.activateFromViewport(t, this.controller, i);
    }
    detaching(t, e, i) {
        this.logger.trace("detaching()");
        return this.agent.deactivateFromViewport(t, this.controller, i);
    }
    dispose() {
        this.logger.trace("dispose()");
        this.ctx.unregisterViewport(this);
        this.agent.dispose();
        this.agent = void 0;
    }
    toString() {
        const t = [];
        for (const e of Kt) {
            const i = this[e];
            switch (typeof i) {
              case "string":
                if ("" !== i) t.push(`${e}:'${i}'`);
                break;

              case "boolean":
                if (i) t.push(`${e}:${i}`);
                break;

              default:
                t.push(`${e}:${String(i)}`);
            }
        }
        return `VP(ctx:'${this.ctx.friendlyPath}',${t.join(",")})`;
    }
};

K([ _aurelia_runtime_html__WEBPACK_IMPORTED_MODULE_2__.bindable ], Qt.prototype, "name", void 0);

K([ _aurelia_runtime_html__WEBPACK_IMPORTED_MODULE_2__.bindable ], Qt.prototype, "usedBy", void 0);

K([ _aurelia_runtime_html__WEBPACK_IMPORTED_MODULE_2__.bindable ], Qt.prototype, "default", void 0);

K([ _aurelia_runtime_html__WEBPACK_IMPORTED_MODULE_2__.bindable ], Qt.prototype, "fallback", void 0);

K([ _aurelia_runtime_html__WEBPACK_IMPORTED_MODULE_2__.bindable ], Qt.prototype, "noScope", void 0);

K([ _aurelia_runtime_html__WEBPACK_IMPORTED_MODULE_2__.bindable ], Qt.prototype, "noLink", void 0);

K([ _aurelia_runtime_html__WEBPACK_IMPORTED_MODULE_2__.bindable ], Qt.prototype, "noHistory", void 0);

K([ _aurelia_runtime_html__WEBPACK_IMPORTED_MODULE_2__.bindable ], Qt.prototype, "stateful", void 0);

Qt = K([ (0,_aurelia_runtime_html__WEBPACK_IMPORTED_MODULE_2__.customElement)({
    name: "au-viewport"
}), X(0, _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__.ILogger), X(1, Gt) ], Qt);

const Kt = [ "name", "usedBy", "default", "fallback", "noScope", "noLink", "noHistory", "stateful" ];

let Xt = class LoadCustomAttribute {
    constructor(t, e, i, s, n, o, r) {
        this.target = t;
        this.el = e;
        this.router = i;
        this.events = s;
        this.delegator = n;
        this.ctx = o;
        this.locationMgr = r;
        this.attribute = "href";
        this.active = false;
        this.href = null;
        this.instructions = null;
        this.eventListener = null;
        this.navigationEndListener = null;
        this.onClick = t => {
            if (null === this.instructions) return;
            if (t.altKey || t.ctrlKey || t.shiftKey || t.metaKey || 0 !== t.button) return;
            t.preventDefault();
            void this.router.load(this.instructions, {
                context: this.ctx
            });
        };
        this.isEnabled = !e.hasAttribute("external") && !e.hasAttribute("data-external");
    }
    binding() {
        if (this.isEnabled) this.eventListener = this.delegator.addEventListener(this.target, this.el, "click", this.onClick);
        this.valueChanged();
        this.navigationEndListener = this.events.subscribe("au:router:navigation-end", (t => {
            this.valueChanged();
            this.active = null !== this.instructions && this.router.isActive(this.instructions, this.ctx);
        }));
    }
    attaching() {
        if (null !== this.ctx.allResolved) return this.ctx.allResolved.then((() => {
            this.valueChanged();
        }));
    }
    unbinding() {
        if (this.isEnabled) this.eventListener.dispose();
        this.navigationEndListener.dispose();
    }
    valueChanged() {
        const t = this.router.options.useUrlFragmentHash;
        if (null !== this.route && void 0 !== this.route && null === this.ctx.allResolved) {
            const e = this.ctx.childRoutes.find((t => t.id === this.route));
            if (void 0 !== e) {
                const i = this.ctx.node.computeAbsolutePath();
                let s = e.path[0];
                if ("object" === typeof this.params && null !== this.params) {
                    const t = Object.keys(this.params);
                    for (const e of t) {
                        const t = this.params[e];
                        if (null != t && String(t).length > 0) s = s.replace(new RegExp(`[*:]${e}[?]?`), t);
                    }
                }
                s = s.replace(/\/[*:][^/]+[?]/g, "").replace(/[*:][^/]+[?]\//g, "");
                if (i) if (s) this.href = `${t ? "#" : ""}${[ i, s ].join("/")}`; else this.href = `${t ? "#" : ""}${i}`; else this.href = `${t ? "#" : ""}${s}`;
                this.instructions = this.router.createViewportInstructions(`${t ? "#" : ""}${s}`, {
                    context: this.ctx
                });
            } else {
                if ("object" === typeof this.params && null !== this.params) this.instructions = this.router.createViewportInstructions({
                    component: this.route,
                    params: this.params
                }, {
                    context: this.ctx
                }); else this.instructions = this.router.createViewportInstructions(this.route, {
                    context: this.ctx
                });
                this.href = this.instructions.toUrl(this.router.options.useUrlFragmentHash);
            }
        } else {
            this.instructions = null;
            this.href = null;
        }
        const e = _aurelia_runtime_html__WEBPACK_IMPORTED_MODULE_2__.CustomElement.for(this.el, {
            optional: true
        });
        if (null !== e) e.viewModel[this.attribute] = this.instructions; else if (null === this.href) this.el.removeAttribute(this.attribute); else {
            const e = t ? this.href : this.locationMgr.addBaseHref(this.href);
            this.el.setAttribute(this.attribute, e);
        }
    }
};

K([ (0,_aurelia_runtime_html__WEBPACK_IMPORTED_MODULE_2__.bindable)({
    mode: _aurelia_runtime_html__WEBPACK_IMPORTED_MODULE_3__.BindingMode.toView,
    primary: true,
    callback: "valueChanged"
}) ], Xt.prototype, "route", void 0);

K([ (0,_aurelia_runtime_html__WEBPACK_IMPORTED_MODULE_2__.bindable)({
    mode: _aurelia_runtime_html__WEBPACK_IMPORTED_MODULE_3__.BindingMode.toView,
    callback: "valueChanged"
}) ], Xt.prototype, "params", void 0);

K([ (0,_aurelia_runtime_html__WEBPACK_IMPORTED_MODULE_2__.bindable)({
    mode: _aurelia_runtime_html__WEBPACK_IMPORTED_MODULE_3__.BindingMode.toView
}) ], Xt.prototype, "attribute", void 0);

K([ (0,_aurelia_runtime_html__WEBPACK_IMPORTED_MODULE_2__.bindable)({
    mode: _aurelia_runtime_html__WEBPACK_IMPORTED_MODULE_3__.BindingMode.fromView
}) ], Xt.prototype, "active", void 0);

Xt = K([ (0,_aurelia_runtime_html__WEBPACK_IMPORTED_MODULE_2__.customAttribute)("load"), X(0, _aurelia_runtime_html__WEBPACK_IMPORTED_MODULE_2__.IEventTarget), X(1, _aurelia_runtime_html__WEBPACK_IMPORTED_MODULE_2__.INode), X(2, Ut), X(3, tt), X(4, _aurelia_runtime_html__WEBPACK_IMPORTED_MODULE_2__.IEventDelegator), X(5, Gt), X(6, nt) ], Xt);

let te = class HrefCustomAttribute {
    constructor(t, e, i, s, n, o) {
        this.target = t;
        this.el = e;
        this.router = i;
        this.delegator = s;
        this.ctx = n;
        this.isInitialized = false;
        if (i.options.useHref && "A" === e.nodeName) switch (e.getAttribute("target")) {
          case null:
          case o.name:
          case "_self":
            this.isEnabled = true;
            break;

          default:
            this.isEnabled = false;
            break;
        } else this.isEnabled = false;
    }
    get isExternal() {
        return this.el.hasAttribute("external") || this.el.hasAttribute("data-external");
    }
    binding() {
        if (!this.isInitialized) {
            this.isInitialized = true;
            this.isEnabled = this.isEnabled && null === (0,_aurelia_runtime_html__WEBPACK_IMPORTED_MODULE_2__.getRef)(this.el, _aurelia_runtime_html__WEBPACK_IMPORTED_MODULE_2__.CustomAttribute.getDefinition(Xt).key);
        }
        if (null == this.value) this.el.removeAttribute("href"); else this.el.setAttribute("href", this.value);
        this.eventListener = this.delegator.addEventListener(this.target, this.el, "click", this);
    }
    unbinding() {
        this.eventListener.dispose();
    }
    valueChanged(t) {
        if (null == t) this.el.removeAttribute("href"); else this.el.setAttribute("href", t);
    }
    handleEvent(t) {
        this.C(t);
    }
    C(t) {
        if (t.altKey || t.ctrlKey || t.shiftKey || t.metaKey || 0 !== t.button || this.isExternal || !this.isEnabled) return;
        const e = this.el.getAttribute("href");
        if (null !== e) {
            t.preventDefault();
            void this.router.load(e, {
                context: this.ctx
            });
        }
    }
};

K([ (0,_aurelia_runtime_html__WEBPACK_IMPORTED_MODULE_2__.bindable)({
    mode: _aurelia_runtime_html__WEBPACK_IMPORTED_MODULE_3__.BindingMode.toView
}) ], te.prototype, "value", void 0);

te = K([ (0,_aurelia_runtime_html__WEBPACK_IMPORTED_MODULE_2__.customAttribute)({
    name: "href",
    noMultiBindings: true
}), X(0, _aurelia_runtime_html__WEBPACK_IMPORTED_MODULE_2__.IEventTarget), X(1, _aurelia_runtime_html__WEBPACK_IMPORTED_MODULE_2__.INode), X(2, Ut), X(3, _aurelia_runtime_html__WEBPACK_IMPORTED_MODULE_2__.IEventDelegator), X(4, Gt), X(5, _aurelia_runtime_html__WEBPACK_IMPORTED_MODULE_2__.IWindow) ], te);

const ee = Ut;

const ie = [ ee ];

const se = Qt;

const ne = Xt;

const oe = te;

const re = [ Qt, Xt, te ];

function ae(t, e) {
    return t.register(_aurelia_runtime_html__WEBPACK_IMPORTED_MODULE_2__.AppTask.hydrated(_aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__.IContainer, RouteContext.setRoot), _aurelia_runtime_html__WEBPACK_IMPORTED_MODULE_2__.AppTask.afterActivate(Ut, (t => {
        if ((0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__.isObject)(e)) if ("function" === typeof e) return e(t); else return t.start(e, true);
        return t.start({}, true);
    })), _aurelia_runtime_html__WEBPACK_IMPORTED_MODULE_2__.AppTask.afterDeactivate(Ut, (t => {
        t.stop();
    })), ...ie, ...re);
}

const he = {
    register(t) {
        return ae(t);
    },
    customize(t) {
        return {
            register(e) {
                return ae(e, t);
            }
        };
    }
};

class ScrollState {
    constructor(t) {
        this.el = t;
        this.top = t.scrollTop;
        this.left = t.scrollLeft;
    }
    static has(t) {
        return t.scrollTop > 0 || t.scrollLeft > 0;
    }
    restore() {
        this.el.scrollTo(this.left, this.top);
        this.el = null;
    }
}

function ce(t) {
    t.restore();
}

class HostElementState {
    constructor(t) {
        this.scrollStates = [];
        this.save(t.children);
    }
    save(t) {
        let e;
        for (let i = 0, s = t.length; i < s; ++i) {
            e = t[i];
            if (ScrollState.has(e)) this.scrollStates.push(new ScrollState(e));
            this.save(e.children);
        }
    }
    restore() {
        this.scrollStates.forEach(ce);
        this.scrollStates = null;
    }
}

const ue = _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__.DI.createInterface("IStateManager", (t => t.singleton(ScrollStateManager)));

class ScrollStateManager {
    constructor() {
        this.cache = new WeakMap;
    }
    saveState(t) {
        this.cache.set(t.host, new HostElementState(t.host));
    }
    restoreState(t) {
        const e = this.cache.get(t.host);
        if (void 0 !== e) {
            e.restore();
            this.cache.delete(t.host);
        }
    }
}


//# sourceMappingURL=index.js.map


/***/ }),

/***/ "./node_modules/@aurelia/runtime-html/dist/esm/index.js":
/*!**************************************************************!*\
  !*** ./node_modules/@aurelia/runtime-html/dist/esm/index.js ***!
  \**************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Platform": () => /* reexport safe */ _aurelia_platform__WEBPACK_IMPORTED_MODULE_0__.Platform,
/* harmony export */   "Task": () => /* reexport safe */ _aurelia_platform__WEBPACK_IMPORTED_MODULE_0__.Task,
/* harmony export */   "TaskAbortError": () => /* reexport safe */ _aurelia_platform__WEBPACK_IMPORTED_MODULE_0__.TaskAbortError,
/* harmony export */   "TaskQueue": () => /* reexport safe */ _aurelia_platform__WEBPACK_IMPORTED_MODULE_0__.TaskQueue,
/* harmony export */   "TaskQueuePriority": () => /* reexport safe */ _aurelia_platform__WEBPACK_IMPORTED_MODULE_0__.TaskQueuePriority,
/* harmony export */   "TaskStatus": () => /* reexport safe */ _aurelia_platform__WEBPACK_IMPORTED_MODULE_0__.TaskStatus,
/* harmony export */   "BrowserPlatform": () => /* reexport safe */ _aurelia_platform_browser__WEBPACK_IMPORTED_MODULE_1__.BrowserPlatform,
/* harmony export */   "Access": () => /* reexport safe */ _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.Access,
/* harmony export */   "AccessKeyedExpression": () => /* reexport safe */ _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.AccessKeyedExpression,
/* harmony export */   "AccessMemberExpression": () => /* reexport safe */ _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.AccessMemberExpression,
/* harmony export */   "AccessScopeExpression": () => /* reexport safe */ _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.AccessScopeExpression,
/* harmony export */   "AccessThisExpression": () => /* reexport safe */ _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.AccessThisExpression,
/* harmony export */   "AccessorType": () => /* reexport safe */ _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.AccessorType,
/* harmony export */   "ArrayBindingPattern": () => /* reexport safe */ _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.ArrayBindingPattern,
/* harmony export */   "ArrayIndexObserver": () => /* reexport safe */ _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.ArrayIndexObserver,
/* harmony export */   "ArrayLiteralExpression": () => /* reexport safe */ _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.ArrayLiteralExpression,
/* harmony export */   "ArrayObserver": () => /* reexport safe */ _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.ArrayObserver,
/* harmony export */   "AssignExpression": () => /* reexport safe */ _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.AssignExpression,
/* harmony export */   "BinaryExpression": () => /* reexport safe */ _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.BinaryExpression,
/* harmony export */   "BindingBehavior": () => /* reexport safe */ _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.BindingBehavior,
/* harmony export */   "BindingBehaviorDefinition": () => /* reexport safe */ _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.BindingBehaviorDefinition,
/* harmony export */   "BindingBehaviorExpression": () => /* reexport safe */ _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.BindingBehaviorExpression,
/* harmony export */   "BindingBehaviorFactory": () => /* reexport safe */ _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.BindingBehaviorFactory,
/* harmony export */   "BindingBehaviorStrategy": () => /* reexport safe */ _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.BindingBehaviorStrategy,
/* harmony export */   "BindingContext": () => /* reexport safe */ _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.BindingContext,
/* harmony export */   "BindingIdentifier": () => /* reexport safe */ _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.BindingIdentifier,
/* harmony export */   "BindingInterceptor": () => /* reexport safe */ _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.BindingInterceptor,
/* harmony export */   "BindingMediator": () => /* reexport safe */ _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.BindingMediator,
/* harmony export */   "BindingMode": () => /* reexport safe */ _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.BindingMode,
/* harmony export */   "CallFunctionExpression": () => /* reexport safe */ _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.CallFunctionExpression,
/* harmony export */   "CallMemberExpression": () => /* reexport safe */ _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.CallMemberExpression,
/* harmony export */   "CallScopeExpression": () => /* reexport safe */ _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.CallScopeExpression,
/* harmony export */   "Char": () => /* reexport safe */ _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.Char,
/* harmony export */   "CollectionKind": () => /* reexport safe */ _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.CollectionKind,
/* harmony export */   "CollectionLengthObserver": () => /* reexport safe */ _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.CollectionLengthObserver,
/* harmony export */   "CollectionSizeObserver": () => /* reexport safe */ _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.CollectionSizeObserver,
/* harmony export */   "ComputedObserver": () => /* reexport safe */ _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.ComputedObserver,
/* harmony export */   "ConditionalExpression": () => /* reexport safe */ _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.ConditionalExpression,
/* harmony export */   "CustomExpression": () => /* reexport safe */ _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.CustomExpression,
/* harmony export */   "DelegationStrategy": () => /* reexport safe */ _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.DelegationStrategy,
/* harmony export */   "DirtyCheckProperty": () => /* reexport safe */ _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.DirtyCheckProperty,
/* harmony export */   "DirtyCheckSettings": () => /* reexport safe */ _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.DirtyCheckSettings,
/* harmony export */   "ExpressionKind": () => /* reexport safe */ _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.ExpressionKind,
/* harmony export */   "ExpressionType": () => /* reexport safe */ _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.ExpressionType,
/* harmony export */   "ForOfStatement": () => /* reexport safe */ _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.ForOfStatement,
/* harmony export */   "HtmlLiteralExpression": () => /* reexport safe */ _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.HtmlLiteralExpression,
/* harmony export */   "IDirtyChecker": () => /* reexport safe */ _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.IDirtyChecker,
/* harmony export */   "IExpressionParser": () => /* reexport safe */ _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.IExpressionParser,
/* harmony export */   "INodeObserverLocator": () => /* reexport safe */ _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.INodeObserverLocator,
/* harmony export */   "IObserverLocator": () => /* reexport safe */ _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.IObserverLocator,
/* harmony export */   "ISignaler": () => /* reexport safe */ _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.ISignaler,
/* harmony export */   "Interpolation": () => /* reexport safe */ _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.Interpolation,
/* harmony export */   "LifecycleFlags": () => /* reexport safe */ _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.LifecycleFlags,
/* harmony export */   "MapObserver": () => /* reexport safe */ _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.MapObserver,
/* harmony export */   "ObjectBindingPattern": () => /* reexport safe */ _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.ObjectBindingPattern,
/* harmony export */   "ObjectLiteralExpression": () => /* reexport safe */ _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.ObjectLiteralExpression,
/* harmony export */   "ObserverLocator": () => /* reexport safe */ _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.ObserverLocator,
/* harmony export */   "OverrideContext": () => /* reexport safe */ _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.OverrideContext,
/* harmony export */   "Precedence": () => /* reexport safe */ _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.Precedence,
/* harmony export */   "PrimitiveLiteralExpression": () => /* reexport safe */ _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.PrimitiveLiteralExpression,
/* harmony export */   "PrimitiveObserver": () => /* reexport safe */ _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.PrimitiveObserver,
/* harmony export */   "PropertyAccessor": () => /* reexport safe */ _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.PropertyAccessor,
/* harmony export */   "Scope": () => /* reexport safe */ _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.Scope,
/* harmony export */   "SetObserver": () => /* reexport safe */ _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.SetObserver,
/* harmony export */   "SetterObserver": () => /* reexport safe */ _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.SetterObserver,
/* harmony export */   "TaggedTemplateExpression": () => /* reexport safe */ _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.TaggedTemplateExpression,
/* harmony export */   "TemplateExpression": () => /* reexport safe */ _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.TemplateExpression,
/* harmony export */   "UnaryExpression": () => /* reexport safe */ _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.UnaryExpression,
/* harmony export */   "ValueConverter": () => /* reexport safe */ _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.ValueConverter,
/* harmony export */   "ValueConverterDefinition": () => /* reexport safe */ _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.ValueConverterDefinition,
/* harmony export */   "ValueConverterExpression": () => /* reexport safe */ _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.ValueConverterExpression,
/* harmony export */   "alias": () => /* reexport safe */ _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.alias,
/* harmony export */   "applyMutationsToIndices": () => /* reexport safe */ _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.applyMutationsToIndices,
/* harmony export */   "bindingBehavior": () => /* reexport safe */ _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.bindingBehavior,
/* harmony export */   "cloneIndexMap": () => /* reexport safe */ _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.cloneIndexMap,
/* harmony export */   "connectable": () => /* reexport safe */ _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.connectable,
/* harmony export */   "copyIndexMap": () => /* reexport safe */ _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.copyIndexMap,
/* harmony export */   "createIndexMap": () => /* reexport safe */ _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.createIndexMap,
/* harmony export */   "disableArrayObservation": () => /* reexport safe */ _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.disableArrayObservation,
/* harmony export */   "disableMapObservation": () => /* reexport safe */ _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.disableMapObservation,
/* harmony export */   "disableSetObservation": () => /* reexport safe */ _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.disableSetObservation,
/* harmony export */   "enableArrayObservation": () => /* reexport safe */ _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.enableArrayObservation,
/* harmony export */   "enableMapObservation": () => /* reexport safe */ _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.enableMapObservation,
/* harmony export */   "enableSetObservation": () => /* reexport safe */ _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.enableSetObservation,
/* harmony export */   "getCollectionObserver": () => /* reexport safe */ _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.getCollectionObserver,
/* harmony export */   "isIndexMap": () => /* reexport safe */ _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.isIndexMap,
/* harmony export */   "observable": () => /* reexport safe */ _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.observable,
/* harmony export */   "parseExpression": () => /* reexport safe */ _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.parseExpression,
/* harmony export */   "registerAliases": () => /* reexport safe */ _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.registerAliases,
/* harmony export */   "subscriberCollection": () => /* reexport safe */ _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.subscriberCollection,
/* harmony export */   "synchronizeIndices": () => /* reexport safe */ _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.synchronizeIndices,
/* harmony export */   "valueConverter": () => /* reexport safe */ _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.valueConverter,
/* harmony export */   "AdoptedStyleSheetsStyles": () => /* binding */ AdoptedStyleSheetsStyles,
/* harmony export */   "AppRoot": () => /* binding */ AppRoot,
/* harmony export */   "AppTask": () => /* binding */ xe,
/* harmony export */   "AtPrefixedTriggerAttributePattern": () => /* binding */ Gt,
/* harmony export */   "AtPrefixedTriggerAttributePatternRegistration": () => /* binding */ ro,
/* harmony export */   "AttrBindingBehavior": () => /* binding */ AttrBindingBehavior,
/* harmony export */   "AttrBindingBehaviorRegistration": () => /* binding */ Go,
/* harmony export */   "AttrBindingCommand": () => /* binding */ Sn,
/* harmony export */   "AttrBindingCommandRegistration": () => /* binding */ Ao,
/* harmony export */   "AttrSyntax": () => /* binding */ AttrSyntax,
/* harmony export */   "AttributeBinding": () => /* binding */ AttributeBinding,
/* harmony export */   "AttributeBindingInstruction": () => /* binding */ AttributeBindingInstruction,
/* harmony export */   "AttributeBindingRendererRegistration": () => /* binding */ dl,
/* harmony export */   "AttributeNSAccessor": () => /* binding */ AttributeNSAccessor,
/* harmony export */   "AttributePattern": () => /* binding */ Nt,
/* harmony export */   "AuCompose": () => /* binding */ AuCompose,
/* harmony export */   "AuRender": () => /* binding */ AuRender,
/* harmony export */   "AuRenderRegistration": () => /* binding */ Yo,
/* harmony export */   "AuSlot": () => /* binding */ AuSlot,
/* harmony export */   "AuSlotsInfo": () => /* binding */ AuSlotsInfo,
/* harmony export */   "Aurelia": () => /* binding */ Aurelia,
/* harmony export */   "Bindable": () => /* binding */ Bt,
/* harmony export */   "BindableDefinition": () => /* binding */ BindableDefinition,
/* harmony export */   "BindableObserver": () => /* binding */ BindableObserver,
/* harmony export */   "BindablesInfo": () => /* binding */ BindablesInfo,
/* harmony export */   "BindingCommand": () => /* binding */ mn,
/* harmony export */   "BindingCommandDefinition": () => /* binding */ BindingCommandDefinition,
/* harmony export */   "BindingModeBehavior": () => /* binding */ BindingModeBehavior,
/* harmony export */   "CSSModulesProcessorRegistry": () => /* binding */ CSSModulesProcessorRegistry,
/* harmony export */   "CallBinding": () => /* binding */ CallBinding,
/* harmony export */   "CallBindingCommand": () => /* binding */ xn,
/* harmony export */   "CallBindingCommandRegistration": () => /* binding */ fo,
/* harmony export */   "CallBindingInstruction": () => /* binding */ CallBindingInstruction,
/* harmony export */   "CallBindingRendererRegistration": () => /* binding */ il,
/* harmony export */   "CaptureBindingCommand": () => /* binding */ An,
/* harmony export */   "CaptureBindingCommandRegistration": () => /* binding */ Co,
/* harmony export */   "Case": () => /* binding */ Br,
/* harmony export */   "CheckedObserver": () => /* binding */ CheckedObserver,
/* harmony export */   "Children": () => /* binding */ Se,
/* harmony export */   "ChildrenDefinition": () => /* binding */ ChildrenDefinition,
/* harmony export */   "ChildrenObserver": () => /* binding */ ChildrenObserver,
/* harmony export */   "ClassAttributeAccessor": () => /* binding */ ClassAttributeAccessor,
/* harmony export */   "ClassBindingCommand": () => /* binding */ En,
/* harmony export */   "ClassBindingCommandRegistration": () => /* binding */ So,
/* harmony export */   "ColonPrefixedBindAttributePattern": () => /* binding */ zt,
/* harmony export */   "ColonPrefixedBindAttributePatternRegistration": () => /* binding */ oo,
/* harmony export */   "CommandType": () => /* binding */ an,
/* harmony export */   "ComputedWatcher": () => /* binding */ ComputedWatcher,
/* harmony export */   "Controller": () => /* binding */ Controller,
/* harmony export */   "CustomAttribute": () => /* binding */ Me,
/* harmony export */   "CustomAttributeDefinition": () => /* binding */ CustomAttributeDefinition,
/* harmony export */   "CustomAttributeRendererRegistration": () => /* binding */ sl,
/* harmony export */   "CustomElement": () => /* binding */ si,
/* harmony export */   "CustomElementDefinition": () => /* binding */ CustomElementDefinition,
/* harmony export */   "CustomElementRendererRegistration": () => /* binding */ nl,
/* harmony export */   "DataAttributeAccessor": () => /* binding */ DataAttributeAccessor,
/* harmony export */   "DebounceBindingBehavior": () => /* binding */ DebounceBindingBehavior,
/* harmony export */   "DebounceBindingBehaviorRegistration": () => /* binding */ Xr,
/* harmony export */   "DefaultBindingCommand": () => /* binding */ bn,
/* harmony export */   "DefaultBindingCommandRegistration": () => /* binding */ mo,
/* harmony export */   "DefaultBindingLanguage": () => /* binding */ Bo,
/* harmony export */   "DefaultBindingSyntax": () => /* binding */ co,
/* harmony export */   "DefaultCase": () => /* binding */ Ir,
/* harmony export */   "DefaultComponents": () => /* binding */ so,
/* harmony export */   "DefaultDialogDom": () => /* binding */ DefaultDialogDom,
/* harmony export */   "DefaultDialogDomRenderer": () => /* binding */ DefaultDialogDomRenderer,
/* harmony export */   "DefaultDialogGlobalSettings": () => /* binding */ DefaultDialogGlobalSettings,
/* harmony export */   "DefaultRenderers": () => /* binding */ xl,
/* harmony export */   "DefaultResources": () => /* binding */ el,
/* harmony export */   "DefinitionType": () => /* binding */ Al,
/* harmony export */   "DelegateBindingCommand": () => /* binding */ Cn,
/* harmony export */   "DelegateBindingCommandRegistration": () => /* binding */ ko,
/* harmony export */   "DialogCloseResult": () => /* binding */ DialogCloseResult,
/* harmony export */   "DialogConfiguration": () => /* binding */ Ul,
/* harmony export */   "DialogController": () => /* binding */ DialogController,
/* harmony export */   "DialogDeactivationStatuses": () => /* binding */ Tl,
/* harmony export */   "DialogDefaultConfiguration": () => /* binding */ Fl,
/* harmony export */   "DialogOpenResult": () => /* binding */ DialogOpenResult,
/* harmony export */   "DialogService": () => /* binding */ DialogService,
/* harmony export */   "DotSeparatedAttributePattern": () => /* binding */ Wt,
/* harmony export */   "DotSeparatedAttributePatternRegistration": () => /* binding */ ho,
/* harmony export */   "Else": () => /* binding */ Else,
/* harmony export */   "ElseRegistration": () => /* binding */ $o,
/* harmony export */   "EventDelegator": () => /* binding */ EventDelegator,
/* harmony export */   "EventSubscriber": () => /* binding */ EventSubscriber,
/* harmony export */   "ExpressionWatcher": () => /* binding */ ExpressionWatcher,
/* harmony export */   "Focus": () => /* binding */ Focus,
/* harmony export */   "ForBindingCommand": () => /* binding */ yn,
/* harmony export */   "ForBindingCommandRegistration": () => /* binding */ vo,
/* harmony export */   "FragmentNodeSequence": () => /* binding */ FragmentNodeSequence,
/* harmony export */   "FrequentMutations": () => /* binding */ FrequentMutations,
/* harmony export */   "FromViewBindingBehavior": () => /* binding */ FromViewBindingBehavior,
/* harmony export */   "FromViewBindingBehaviorRegistration": () => /* binding */ Qr,
/* harmony export */   "FromViewBindingCommand": () => /* binding */ gn,
/* harmony export */   "FromViewBindingCommandRegistration": () => /* binding */ po,
/* harmony export */   "FulfilledTemplateController": () => /* binding */ Pr,
/* harmony export */   "HydrateAttributeInstruction": () => /* binding */ HydrateAttributeInstruction,
/* harmony export */   "HydrateElementInstruction": () => /* binding */ HydrateElementInstruction,
/* harmony export */   "HydrateLetElementInstruction": () => /* binding */ HydrateLetElementInstruction,
/* harmony export */   "HydrateTemplateController": () => /* binding */ HydrateTemplateController,
/* harmony export */   "IAppRoot": () => /* binding */ ts,
/* harmony export */   "IAppTask": () => /* binding */ be,
/* harmony export */   "IAttrMapper": () => /* binding */ Zt,
/* harmony export */   "IAttributeParser": () => /* binding */ Ut,
/* harmony export */   "IAttributePattern": () => /* binding */ Mt,
/* harmony export */   "IAuSlotsInfo": () => /* binding */ xs,
/* harmony export */   "IAurelia": () => /* binding */ Cl,
/* harmony export */   "IController": () => /* binding */ Xi,
/* harmony export */   "IDialogController": () => /* binding */ Rl,
/* harmony export */   "IDialogDom": () => /* binding */ Bl,
/* harmony export */   "IDialogDomRenderer": () => /* binding */ El,
/* harmony export */   "IDialogGlobalSettings": () => /* binding */ Il,
/* harmony export */   "IDialogService": () => /* binding */ Sl,
/* harmony export */   "IEventDelegator": () => /* binding */ ws,
/* harmony export */   "IEventTarget": () => /* binding */ rs,
/* harmony export */   "IHistory": () => /* binding */ vs,
/* harmony export */   "IHydrationContext": () => /* binding */ Ki,
/* harmony export */   "IInstruction": () => /* binding */ ks,
/* harmony export */   "ILifecycleHooks": () => /* binding */ bi,
/* harmony export */   "ILocation": () => /* binding */ ms,
/* harmony export */   "INode": () => /* binding */ ns,
/* harmony export */   "INodeObserverLocatorRegistration": () => /* binding */ io,
/* harmony export */   "IPlatform": () => /* binding */ Kt,
/* harmony export */   "IProjections": () => /* binding */ bs,
/* harmony export */   "IRenderLocation": () => /* binding */ os,
/* harmony export */   "IRenderer": () => /* binding */ Ss,
/* harmony export */   "IRendering": () => /* binding */ Pi,
/* harmony export */   "ISVGAnalyzer": () => /* binding */ Yt,
/* harmony export */   "ISanitizer": () => /* binding */ Hr,
/* harmony export */   "IShadowDOMGlobalStyles": () => /* binding */ di,
/* harmony export */   "IShadowDOMStyleFactory": () => /* binding */ ui,
/* harmony export */   "IShadowDOMStyles": () => /* binding */ fi,
/* harmony export */   "ISyntaxInterpreter": () => /* binding */ $t,
/* harmony export */   "ITemplateCompiler": () => /* binding */ As,
/* harmony export */   "ITemplateCompilerHooks": () => /* binding */ zn,
/* harmony export */   "ITemplateCompilerRegistration": () => /* binding */ eo,
/* harmony export */   "ITemplateElementFactory": () => /* binding */ Tn,
/* harmony export */   "IViewFactory": () => /* binding */ Ai,
/* harmony export */   "IViewLocator": () => /* binding */ Di,
/* harmony export */   "IWcElementRegistry": () => /* binding */ Vl,
/* harmony export */   "IWindow": () => /* binding */ ds,
/* harmony export */   "IWorkTracker": () => /* binding */ es,
/* harmony export */   "If": () => /* binding */ If,
/* harmony export */   "IfRegistration": () => /* binding */ Oo,
/* harmony export */   "InstructionType": () => /* binding */ ys,
/* harmony export */   "InterpolationBinding": () => /* binding */ InterpolationBinding,
/* harmony export */   "InterpolationBindingRendererRegistration": () => /* binding */ rl,
/* harmony export */   "InterpolationInstruction": () => /* binding */ InterpolationInstruction,
/* harmony export */   "Interpretation": () => /* binding */ Interpretation,
/* harmony export */   "IteratorBindingInstruction": () => /* binding */ IteratorBindingInstruction,
/* harmony export */   "IteratorBindingRendererRegistration": () => /* binding */ ol,
/* harmony export */   "LetBinding": () => /* binding */ LetBinding,
/* harmony export */   "LetBindingInstruction": () => /* binding */ LetBindingInstruction,
/* harmony export */   "LetElementRendererRegistration": () => /* binding */ ll,
/* harmony export */   "LifecycleHooks": () => /* binding */ ki,
/* harmony export */   "LifecycleHooksDefinition": () => /* binding */ LifecycleHooksDefinition,
/* harmony export */   "LifecycleHooksEntry": () => /* binding */ LifecycleHooksEntry,
/* harmony export */   "Listener": () => /* binding */ Listener,
/* harmony export */   "ListenerBindingInstruction": () => /* binding */ ListenerBindingInstruction,
/* harmony export */   "ListenerBindingRendererRegistration": () => /* binding */ fl,
/* harmony export */   "NodeObserverConfig": () => /* binding */ NodeObserverConfig,
/* harmony export */   "NodeObserverLocator": () => /* binding */ NodeObserverLocator,
/* harmony export */   "NodeType": () => /* binding */ ls,
/* harmony export */   "NoopSVGAnalyzer": () => /* binding */ NoopSVGAnalyzer,
/* harmony export */   "ObserveShallow": () => /* binding */ ObserveShallow,
/* harmony export */   "OneTimeBindingBehavior": () => /* binding */ OneTimeBindingBehavior,
/* harmony export */   "OneTimeBindingBehaviorRegistration": () => /* binding */ Kr,
/* harmony export */   "OneTimeBindingCommand": () => /* binding */ vn,
/* harmony export */   "OneTimeBindingCommandRegistration": () => /* binding */ go,
/* harmony export */   "PendingTemplateController": () => /* binding */ Dr,
/* harmony export */   "Portal": () => /* binding */ Portal,
/* harmony export */   "PromiseTemplateController": () => /* binding */ Tr,
/* harmony export */   "PropertyBinding": () => /* binding */ PropertyBinding,
/* harmony export */   "PropertyBindingInstruction": () => /* binding */ PropertyBindingInstruction,
/* harmony export */   "PropertyBindingRendererRegistration": () => /* binding */ hl,
/* harmony export */   "RefAttributePattern": () => /* binding */ Ht,
/* harmony export */   "RefAttributePatternRegistration": () => /* binding */ lo,
/* harmony export */   "RefBinding": () => /* binding */ RefBinding,
/* harmony export */   "RefBindingCommandRegistration": () => /* binding */ xo,
/* harmony export */   "RefBindingInstruction": () => /* binding */ RefBindingInstruction,
/* harmony export */   "RefBindingRendererRegistration": () => /* binding */ al,
/* harmony export */   "RejectedTemplateController": () => /* binding */ Or,
/* harmony export */   "RenderPlan": () => /* binding */ RenderPlan,
/* harmony export */   "Rendering": () => /* binding */ Rendering,
/* harmony export */   "Repeat": () => /* binding */ Repeat,
/* harmony export */   "RepeatRegistration": () => /* binding */ Lo,
/* harmony export */   "SVGAnalyzer": () => /* binding */ SVGAnalyzer,
/* harmony export */   "SVGAnalyzerRegistration": () => /* binding */ no,
/* harmony export */   "SanitizeValueConverter": () => /* binding */ zr,
/* harmony export */   "SanitizeValueConverterRegistration": () => /* binding */ Io,
/* harmony export */   "SelectValueObserver": () => /* binding */ SelectValueObserver,
/* harmony export */   "SelfBindingBehavior": () => /* binding */ SelfBindingBehavior,
/* harmony export */   "SelfBindingBehaviorRegistration": () => /* binding */ Xo,
/* harmony export */   "SetAttributeInstruction": () => /* binding */ SetAttributeInstruction,
/* harmony export */   "SetAttributeRendererRegistration": () => /* binding */ ml,
/* harmony export */   "SetClassAttributeInstruction": () => /* binding */ SetClassAttributeInstruction,
/* harmony export */   "SetClassAttributeRendererRegistration": () => /* binding */ vl,
/* harmony export */   "SetPropertyInstruction": () => /* binding */ SetPropertyInstruction,
/* harmony export */   "SetPropertyRendererRegistration": () => /* binding */ cl,
/* harmony export */   "SetStyleAttributeInstruction": () => /* binding */ SetStyleAttributeInstruction,
/* harmony export */   "SetStyleAttributeRendererRegistration": () => /* binding */ pl,
/* harmony export */   "ShadowDOMRegistry": () => /* binding */ ShadowDOMRegistry,
/* harmony export */   "ShortHandBindingSyntax": () => /* binding */ uo,
/* harmony export */   "SignalBindingBehavior": () => /* binding */ SignalBindingBehavior,
/* harmony export */   "SignalBindingBehaviorRegistration": () => /* binding */ Zr,
/* harmony export */   "StandardConfiguration": () => /* binding */ yl,
/* harmony export */   "StyleAttributeAccessor": () => /* binding */ StyleAttributeAccessor,
/* harmony export */   "StyleBindingCommand": () => /* binding */ Rn,
/* harmony export */   "StyleBindingCommandRegistration": () => /* binding */ Ro,
/* harmony export */   "StyleConfiguration": () => /* binding */ mi,
/* harmony export */   "StyleElementStyles": () => /* binding */ StyleElementStyles,
/* harmony export */   "StylePropertyBindingInstruction": () => /* binding */ StylePropertyBindingInstruction,
/* harmony export */   "StylePropertyBindingRendererRegistration": () => /* binding */ gl,
/* harmony export */   "Switch": () => /* binding */ Er,
/* harmony export */   "TemplateCompiler": () => /* binding */ TemplateCompiler,
/* harmony export */   "TemplateCompilerHooks": () => /* binding */ Kn,
/* harmony export */   "TemplateControllerRendererRegistration": () => /* binding */ ul,
/* harmony export */   "TextBindingInstruction": () => /* binding */ TextBindingInstruction,
/* harmony export */   "TextBindingRendererRegistration": () => /* binding */ wl,
/* harmony export */   "ThrottleBindingBehavior": () => /* binding */ ThrottleBindingBehavior,
/* harmony export */   "ThrottleBindingBehaviorRegistration": () => /* binding */ Jr,
/* harmony export */   "ToViewBindingBehavior": () => /* binding */ ToViewBindingBehavior,
/* harmony export */   "ToViewBindingBehaviorRegistration": () => /* binding */ Yr,
/* harmony export */   "ToViewBindingCommand": () => /* binding */ pn,
/* harmony export */   "ToViewBindingCommandRegistration": () => /* binding */ wo,
/* harmony export */   "TriggerBindingCommand": () => /* binding */ kn,
/* harmony export */   "TriggerBindingCommandRegistration": () => /* binding */ yo,
/* harmony export */   "TwoWayBindingBehavior": () => /* binding */ TwoWayBindingBehavior,
/* harmony export */   "TwoWayBindingBehaviorRegistration": () => /* binding */ to,
/* harmony export */   "TwoWayBindingCommand": () => /* binding */ wn,
/* harmony export */   "TwoWayBindingCommandRegistration": () => /* binding */ bo,
/* harmony export */   "UpdateTriggerBindingBehavior": () => /* binding */ UpdateTriggerBindingBehavior,
/* harmony export */   "UpdateTriggerBindingBehaviorRegistration": () => /* binding */ Ko,
/* harmony export */   "ValueAttributeObserver": () => /* binding */ ValueAttributeObserver,
/* harmony export */   "ViewFactory": () => /* binding */ ViewFactory,
/* harmony export */   "ViewLocator": () => /* binding */ ViewLocator,
/* harmony export */   "ViewModelKind": () => /* binding */ Hi,
/* harmony export */   "ViewValueConverter": () => /* binding */ Gr,
/* harmony export */   "ViewValueConverterRegistration": () => /* binding */ To,
/* harmony export */   "Views": () => /* binding */ Ii,
/* harmony export */   "Watch": () => /* binding */ _e,
/* harmony export */   "WcCustomElementRegistry": () => /* binding */ WcCustomElementRegistry,
/* harmony export */   "With": () => /* binding */ With,
/* harmony export */   "WithRegistration": () => /* binding */ qo,
/* harmony export */   "allResources": () => /* binding */ Pn,
/* harmony export */   "attributePattern": () => /* binding */ Ft,
/* harmony export */   "bindable": () => /* binding */ St,
/* harmony export */   "bindingCommand": () => /* binding */ cn,
/* harmony export */   "children": () => /* binding */ ke,
/* harmony export */   "coercer": () => /* binding */ It,
/* harmony export */   "containerless": () => /* binding */ We,
/* harmony export */   "convertToRenderLocation": () => /* binding */ us,
/* harmony export */   "createElement": () => /* binding */ Ur,
/* harmony export */   "cssModules": () => /* binding */ ai,
/* harmony export */   "customAttribute": () => /* binding */ Pe,
/* harmony export */   "customElement": () => /* binding */ je,
/* harmony export */   "getEffectiveParentNode": () => /* binding */ as,
/* harmony export */   "getRef": () => /* binding */ is,
/* harmony export */   "isCustomElementController": () => /* binding */ ji,
/* harmony export */   "isCustomElementViewModel": () => /* binding */ Ni,
/* harmony export */   "isInstruction": () => /* binding */ Cs,
/* harmony export */   "isRenderLocation": () => /* binding */ fs,
/* harmony export */   "lifecycleHooks": () => /* binding */ Ci,
/* harmony export */   "processContent": () => /* binding */ ri,
/* harmony export */   "renderer": () => /* binding */ Rs,
/* harmony export */   "setEffectiveParentNode": () => /* binding */ cs,
/* harmony export */   "setRef": () => /* binding */ ss,
/* harmony export */   "shadowCSS": () => /* binding */ ci,
/* harmony export */   "templateCompilerHooks": () => /* binding */ Yn,
/* harmony export */   "templateController": () => /* binding */ Oe,
/* harmony export */   "useShadowDOM": () => /* binding */ Ne,
/* harmony export */   "view": () => /* binding */ Ti,
/* harmony export */   "watch": () => /* binding */ Ue
/* harmony export */ });
/* harmony import */ var _aurelia_platform__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @aurelia/platform */ "./node_modules/@aurelia/platform/dist/esm/index.js");
/* harmony import */ var _aurelia_platform_browser__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @aurelia/platform-browser */ "./node_modules/@aurelia/platform-browser/dist/esm/index.js");
/* harmony import */ var _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @aurelia/kernel */ "./node_modules/@aurelia/kernel/dist/esm/index.js");
/* harmony import */ var _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @aurelia/runtime */ "./node_modules/@aurelia/runtime/dist/esm/index.js");












/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */ function ot(t, e, i, s) {
    var n = arguments.length, r = n < 3 ? e : null === s ? s = Object.getOwnPropertyDescriptor(e, i) : s, o;
    if ("object" === typeof Reflect && "function" === typeof Reflect.decorate) r = Reflect.decorate(t, e, i, s); else for (var l = t.length - 1; l >= 0; l--) if (o = t[l]) r = (n < 3 ? o(r) : n > 3 ? o(e, i, r) : o(e, i)) || r;
    return n > 3 && r && Object.defineProperty(e, i, r), r;
}

function lt(t, e) {
    return function(i, s) {
        e(i, s, t);
    };
}

const ht = _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.Metadata.getOwn;

const at = _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.Metadata.hasOwn;

const ct = _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.Metadata.define;

const {annotation: ut, resource: ft} = _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.Protocol;

const dt = ut.keyFor;

const mt = ft.keyFor;

const vt = ft.appendTo;

const pt = ut.appendTo;

const gt = ut.getKeys;

const wt = () => Object.create(null);

const bt = Object.prototype.hasOwnProperty;

const xt = wt();

const yt = (t, e, i) => {
    if (true === xt[e]) return true;
    if (!At(e)) return false;
    const s = e.slice(0, 5);
    return xt[e] = "aria-" === s || "data-" === s || i.isStandardSvgAttribute(t, e);
};

const kt = t => t instanceof Promise;

const Ct = t => "function" === typeof t;

const At = t => "string" === typeof t;

function St(t, e) {
    let i;
    function s(t, e) {
        if (arguments.length > 1) i.property = e;
        ct(Et, BindableDefinition.create(e, t, i), t.constructor, e);
        pt(t.constructor, Bt.keyFrom(e));
    }
    if (arguments.length > 1) {
        i = {};
        s(t, e);
        return;
    } else if (At(t)) {
        i = {};
        return s;
    }
    i = void 0 === t ? {} : t;
    return s;
}

function Rt(t) {
    return t.startsWith(Et);
}

const Et = dt("bindable");

const Bt = Object.freeze({
    name: Et,
    keyFrom: t => `${Et}:${t}`,
    from(t, ...e) {
        const i = {};
        const s = Array.isArray;
        function n(e) {
            i[e] = BindableDefinition.create(e, t);
        }
        function r(e, s) {
            i[e] = s instanceof BindableDefinition ? s : BindableDefinition.create(e, t, s);
        }
        function o(t) {
            if (s(t)) t.forEach(n); else if (t instanceof BindableDefinition) i[t.property] = t; else if (void 0 !== t) Object.keys(t).forEach((e => r(e, t[e])));
        }
        e.forEach(o);
        return i;
    },
    for(t) {
        let e;
        const i = {
            add(s) {
                let n;
                let r;
                if (At(s)) {
                    n = s;
                    r = {
                        property: n
                    };
                } else {
                    n = s.property;
                    r = s;
                }
                e = BindableDefinition.create(n, t, r);
                if (!at(Et, t, n)) pt(t, Bt.keyFrom(n));
                ct(Et, e, t, n);
                return i;
            },
            mode(t) {
                e.mode = t;
                return i;
            },
            callback(t) {
                e.callback = t;
                return i;
            },
            attribute(t) {
                e.attribute = t;
                return i;
            },
            primary() {
                e.primary = true;
                return i;
            },
            set(t) {
                e.set = t;
                return i;
            }
        };
        return i;
    },
    getAll(t) {
        const e = Et.length + 1;
        const i = [];
        const n = (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.getPrototypeChain)(t);
        let r = n.length;
        let o = 0;
        let l;
        let h;
        let a;
        let c;
        while (--r >= 0) {
            a = n[r];
            l = gt(a).filter(Rt);
            h = l.length;
            for (c = 0; c < h; ++c) i[o++] = ht(Et, a, l[c].slice(e));
        }
        return i;
    }
});

class BindableDefinition {
    constructor(t, e, i, s, n, r) {
        this.attribute = t;
        this.callback = e;
        this.mode = i;
        this.primary = s;
        this.property = n;
        this.set = r;
    }
    static create(t, e, i = {}) {
        return new BindableDefinition((0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.firstDefined)(i.attribute, (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.kebabCase)(t)), (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.firstDefined)(i.callback, `${t}Changed`), (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.firstDefined)(i.mode, _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.BindingMode.toView), (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.firstDefined)(i.primary, false), (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.firstDefined)(i.property, t), (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.firstDefined)(i.set, Dt(t, e, i)));
    }
}

function It(t, e, i) {
    Tt.define(t, e);
}

const Tt = {
    key: dt("coercer"),
    define(t, e) {
        ct(Tt.key, t[e].bind(t), t);
    },
    for(t) {
        return ht(Tt.key, t);
    }
};

function Dt(t, e, i = {}) {
    var s, n, r;
    const l = null !== (n = null !== (s = i.type) && void 0 !== s ? s : Reflect.getMetadata("design:type", e, t)) && void 0 !== n ? n : null;
    if (null == l) return _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.noop;
    let h;
    switch (l) {
      case Number:
      case Boolean:
      case String:
      case BigInt:
        h = l;
        break;

      default:
        {
            const t = l.coerce;
            h = "function" === typeof t ? t.bind(l) : null !== (r = Tt.for(l)) && void 0 !== r ? r : _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.noop;
            break;
        }
    }
    return h === _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.noop ? h : Pt(h, i.nullable);
}

function Pt(t, e) {
    return function(i, s) {
        var n;
        if (!(null === s || void 0 === s ? void 0 : s.enableCoercion)) return i;
        return (null !== e && void 0 !== e ? e : (null !== (n = null === s || void 0 === s ? void 0 : s.coerceNullish) && void 0 !== n ? n : false) ? false : true) && null == i ? i : t(i, s);
    };
}

class BindableObserver {
    constructor(t, e, i, s, n, r) {
        this.set = s;
        this.$controller = n;
        this.t = r;
        this.v = void 0;
        this.ov = void 0;
        this.f = 0;
        const l = t[i];
        const h = t.propertyChanged;
        const a = this.i = Ct(l);
        const c = this.u = Ct(h);
        const u = this.hs = s !== _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.noop;
        let f;
        this.o = t;
        this.k = e;
        this.cb = a ? l : _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.noop;
        this.C = c ? h : _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.noop;
        if (void 0 === this.cb && !c && !u) this.iO = false; else {
            this.iO = true;
            f = t[e];
            this.v = u && void 0 !== f ? s(f, this.t) : f;
            this.A();
        }
    }
    get type() {
        return 1;
    }
    getValue() {
        return this.v;
    }
    setValue(t, e) {
        if (this.hs) t = this.set(t, this.t);
        const i = this.v;
        if (this.iO) {
            if (Object.is(t, i)) return;
            this.v = t;
            this.ov = i;
            this.f = e;
            if (null == this.$controller || this.$controller.isBound) {
                if (this.i) this.cb.call(this.o, t, i, e);
                if (this.u) this.C.call(this.o, this.k, t, i, e);
            }
            this.queue.add(this);
        } else this.o[this.k] = t;
    }
    subscribe(t) {
        if (false === !this.iO) {
            this.iO = true;
            this.v = this.hs ? this.set(this.o[this.k], this.t) : this.o[this.k];
            this.A();
        }
        this.subs.add(t);
    }
    flush() {
        Ot = this.ov;
        this.ov = this.v;
        this.subs.notify(this.v, Ot, this.f);
    }
    A() {
        Reflect.defineProperty(this.o, this.k, {
            enumerable: true,
            configurable: true,
            get: () => this.v,
            set: t => {
                this.setValue(t, 0);
            }
        });
    }
}

(0,_aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.subscriberCollection)(BindableObserver);

(0,_aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.withFlushQueue)(BindableObserver);

let Ot;

class CharSpec {
    constructor(t, e, i, s) {
        this.chars = t;
        this.repeat = e;
        this.isSymbol = i;
        this.isInverted = s;
        if (s) switch (t.length) {
          case 0:
            this.has = this.R;
            break;

          case 1:
            this.has = this.B;
            break;

          default:
            this.has = this.I;
        } else switch (t.length) {
          case 0:
            this.has = this.T;
            break;

          case 1:
            this.has = this.P;
            break;

          default:
            this.has = this.O;
        }
    }
    equals(t) {
        return this.chars === t.chars && this.repeat === t.repeat && this.isSymbol === t.isSymbol && this.isInverted === t.isInverted;
    }
    O(t) {
        return this.chars.includes(t);
    }
    P(t) {
        return this.chars === t;
    }
    T(t) {
        return false;
    }
    I(t) {
        return !this.chars.includes(t);
    }
    B(t) {
        return this.chars !== t;
    }
    R(t) {
        return true;
    }
}

class Interpretation {
    constructor() {
        this.parts = _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.emptyArray;
        this.$ = "";
        this.L = {};
        this.q = {};
    }
    get pattern() {
        const t = this.$;
        if ("" === t) return null; else return t;
    }
    set pattern(t) {
        if (null == t) {
            this.$ = "";
            this.parts = _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.emptyArray;
        } else {
            this.$ = t;
            this.parts = this.q[t];
        }
    }
    append(t, e) {
        const i = this.L;
        if (void 0 === i[t]) i[t] = e; else i[t] += e;
    }
    next(t) {
        const e = this.L;
        let i;
        if (void 0 !== e[t]) {
            i = this.q;
            if (void 0 === i[t]) i[t] = [ e[t] ]; else i[t].push(e[t]);
            e[t] = void 0;
        }
    }
}

class State$1 {
    constructor(t, ...e) {
        this.charSpec = t;
        this.nextStates = [];
        this.types = null;
        this.isEndpoint = false;
        this.patterns = e;
    }
    get pattern() {
        return this.isEndpoint ? this.patterns[0] : null;
    }
    findChild(t) {
        const e = this.nextStates;
        const i = e.length;
        let s = null;
        let n = 0;
        for (;n < i; ++n) {
            s = e[n];
            if (t.equals(s.charSpec)) return s;
        }
        return null;
    }
    append(t, e) {
        const i = this.patterns;
        if (!i.includes(e)) i.push(e);
        let s = this.findChild(t);
        if (null == s) {
            s = new State$1(t, e);
            this.nextStates.push(s);
            if (t.repeat) s.nextStates.push(s);
        }
        return s;
    }
    findMatches(t, e) {
        const i = [];
        const s = this.nextStates;
        const n = s.length;
        let r = 0;
        let o = null;
        let l = 0;
        let h = 0;
        for (;l < n; ++l) {
            o = s[l];
            if (o.charSpec.has(t)) {
                i.push(o);
                r = o.patterns.length;
                h = 0;
                if (o.charSpec.isSymbol) for (;h < r; ++h) e.next(o.patterns[h]); else for (;h < r; ++h) e.append(o.patterns[h], t);
            }
        }
        return i;
    }
}

class StaticSegment {
    constructor(t) {
        this.text = t;
        const e = this.len = t.length;
        const i = this.specs = [];
        let s = 0;
        for (;e > s; ++s) i.push(new CharSpec(t[s], false, false, false));
    }
    eachChar(t) {
        const e = this.len;
        const i = this.specs;
        let s = 0;
        for (;e > s; ++s) t(i[s]);
    }
}

class DynamicSegment {
    constructor(t) {
        this.text = "PART";
        this.spec = new CharSpec(t, true, false, true);
    }
    eachChar(t) {
        t(this.spec);
    }
}

class SymbolSegment {
    constructor(t) {
        this.text = t;
        this.spec = new CharSpec(t, false, true, false);
    }
    eachChar(t) {
        t(this.spec);
    }
}

class SegmentTypes {
    constructor() {
        this.statics = 0;
        this.dynamics = 0;
        this.symbols = 0;
    }
}

const $t = _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.DI.createInterface("ISyntaxInterpreter", (t => t.singleton(SyntaxInterpreter)));

class SyntaxInterpreter {
    constructor() {
        this.rootState = new State$1(null);
        this.initialStates = [ this.rootState ];
    }
    add(t) {
        t = t.slice(0).sort(((t, e) => t.pattern > e.pattern ? 1 : -1));
        const e = t.length;
        let i;
        let s;
        let n;
        let r;
        let o;
        let l;
        let h;
        let a = 0;
        let c;
        while (e > a) {
            i = this.rootState;
            s = t[a];
            n = s.pattern;
            r = new SegmentTypes;
            o = this.parse(s, r);
            l = o.length;
            h = t => {
                i = i.append(t, n);
            };
            for (c = 0; l > c; ++c) o[c].eachChar(h);
            i.types = r;
            i.isEndpoint = true;
            ++a;
        }
    }
    interpret(t) {
        const e = new Interpretation;
        const i = t.length;
        let s = this.initialStates;
        let n = 0;
        let r;
        for (;n < i; ++n) {
            s = this.getNextStates(s, t.charAt(n), e);
            if (0 === s.length) break;
        }
        s = s.filter(Lt);
        if (s.length > 0) {
            s.sort(qt);
            r = s[0];
            if (!r.charSpec.isSymbol) e.next(r.pattern);
            e.pattern = r.pattern;
        }
        return e;
    }
    getNextStates(t, e, i) {
        const s = [];
        let n = null;
        const r = t.length;
        let o = 0;
        for (;o < r; ++o) {
            n = t[o];
            s.push(...n.findMatches(e, i));
        }
        return s;
    }
    parse(t, e) {
        const i = [];
        const s = t.pattern;
        const n = s.length;
        const r = t.symbols;
        let o = 0;
        let l = 0;
        let h = "";
        while (o < n) {
            h = s.charAt(o);
            if (0 === r.length || !r.includes(h)) if (o === l) if ("P" === h && "PART" === s.slice(o, o + 4)) {
                l = o += 4;
                i.push(new DynamicSegment(r));
                ++e.dynamics;
            } else ++o; else ++o; else if (o !== l) {
                i.push(new StaticSegment(s.slice(l, o)));
                ++e.statics;
                l = o;
            } else {
                i.push(new SymbolSegment(s.slice(l, o + 1)));
                ++e.symbols;
                l = ++o;
            }
        }
        if (l !== o) {
            i.push(new StaticSegment(s.slice(l, o)));
            ++e.statics;
        }
        return i;
    }
}

function Lt(t) {
    return t.isEndpoint;
}

function qt(t, e) {
    const i = t.types;
    const s = e.types;
    if (i.statics !== s.statics) return s.statics - i.statics;
    if (i.dynamics !== s.dynamics) return s.dynamics - i.dynamics;
    if (i.symbols !== s.symbols) return s.symbols - i.symbols;
    return 0;
}

class AttrSyntax {
    constructor(t, e, i, s) {
        this.rawName = t;
        this.rawValue = e;
        this.target = i;
        this.command = s;
    }
}

const Mt = _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.DI.createInterface("IAttributePattern");

const Ut = _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.DI.createInterface("IAttributeParser", (t => t.singleton(AttributeParser)));

class AttributeParser {
    constructor(t, e) {
        this.M = {};
        this.U = t;
        const i = this.F = {};
        const s = e.reduce(((t, e) => {
            const s = jt(e.constructor);
            s.forEach((t => i[t.pattern] = e));
            return t.concat(s);
        }), _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.emptyArray);
        t.add(s);
    }
    parse(t, e) {
        let i = this.M[t];
        if (null == i) i = this.M[t] = this.U.interpret(t);
        const s = i.pattern;
        if (null == s) return new AttrSyntax(t, e, t, null); else return this.F[s][s](t, e, i.parts);
    }
}

AttributeParser.inject = [ $t, (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.all)(Mt) ];

function Ft(...t) {
    return function e(i) {
        return Nt.define(t, i);
    };
}

class AttributePatternResourceDefinition {
    constructor(t) {
        this.Type = t;
        this.name = void 0;
    }
    register(t) {
        _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.Registration.singleton(Mt, this.Type).register(t);
    }
}

const Vt = mt("attribute-pattern");

const _t = "attribute-pattern-definitions";

const jt = t => _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.Protocol.annotation.get(t, _t);

const Nt = Object.freeze({
    name: Vt,
    definitionAnnotationKey: _t,
    define(t, e) {
        const s = new AttributePatternResourceDefinition(e);
        ct(Vt, s, e);
        vt(e, Vt);
        _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.Protocol.annotation.set(e, _t, t);
        pt(e, _t);
        return e;
    },
    getPatternDefinitions: jt
});

let Wt = class DotSeparatedAttributePattern {
    "PART.PART"(t, e, i) {
        return new AttrSyntax(t, e, i[0], i[1]);
    }
    "PART.PART.PART"(t, e, i) {
        return new AttrSyntax(t, e, i[0], i[2]);
    }
};

Wt = ot([ Ft({
    pattern: "PART.PART",
    symbols: "."
}, {
    pattern: "PART.PART.PART",
    symbols: "."
}) ], Wt);

let Ht = class RefAttributePattern {
    ref(t, e, i) {
        return new AttrSyntax(t, e, "element", "ref");
    }
    "PART.ref"(t, e, i) {
        return new AttrSyntax(t, e, i[0], "ref");
    }
};

Ht = ot([ Ft({
    pattern: "ref",
    symbols: ""
}, {
    pattern: "PART.ref",
    symbols: "."
}) ], Ht);

let zt = class ColonPrefixedBindAttributePattern {
    ":PART"(t, e, i) {
        return new AttrSyntax(t, e, i[0], "bind");
    }
};

zt = ot([ Ft({
    pattern: ":PART",
    symbols: ":"
}) ], zt);

let Gt = class AtPrefixedTriggerAttributePattern {
    "@PART"(t, e, i) {
        return new AttrSyntax(t, e, i[0], "trigger");
    }
};

Gt = ot([ Ft({
    pattern: "@PART",
    symbols: "@"
}) ], Gt);

let Xt = class SpreadAttributePattern {
    "...$attrs"(t, e, i) {
        return new AttrSyntax(t, e, "", "...$attrs");
    }
};

Xt = ot([ Ft({
    pattern: "...$attrs",
    symbols: ""
}) ], Xt);

const Kt = _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.IPlatform;

const Yt = _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.DI.createInterface("ISVGAnalyzer", (t => t.singleton(NoopSVGAnalyzer)));

class NoopSVGAnalyzer {
    isStandardSvgAttribute(t, e) {
        return false;
    }
}

function Qt(t) {
    const e = wt();
    let i;
    for (i of t) e[i] = true;
    return e;
}

class SVGAnalyzer {
    constructor(t) {
        this.V = Object.assign(wt(), {
            a: Qt([ "class", "externalResourcesRequired", "id", "onactivate", "onclick", "onfocusin", "onfocusout", "onload", "onmousedown", "onmousemove", "onmouseout", "onmouseover", "onmouseup", "requiredExtensions", "requiredFeatures", "style", "systemLanguage", "target", "transform", "xlink:actuate", "xlink:arcrole", "xlink:href", "xlink:role", "xlink:show", "xlink:title", "xlink:type", "xml:base", "xml:lang", "xml:space" ]),
            altGlyph: Qt([ "class", "dx", "dy", "externalResourcesRequired", "format", "glyphRef", "id", "onactivate", "onclick", "onfocusin", "onfocusout", "onload", "onmousedown", "onmousemove", "onmouseout", "onmouseover", "onmouseup", "requiredExtensions", "requiredFeatures", "rotate", "style", "systemLanguage", "x", "xlink:actuate", "xlink:arcrole", "xlink:href", "xlink:role", "xlink:show", "xlink:title", "xlink:type", "xml:base", "xml:lang", "xml:space", "y" ]),
            altglyph: wt(),
            altGlyphDef: Qt([ "id", "xml:base", "xml:lang", "xml:space" ]),
            altglyphdef: wt(),
            altGlyphItem: Qt([ "id", "xml:base", "xml:lang", "xml:space" ]),
            altglyphitem: wt(),
            animate: Qt([ "accumulate", "additive", "attributeName", "attributeType", "begin", "by", "calcMode", "dur", "end", "externalResourcesRequired", "fill", "from", "id", "keySplines", "keyTimes", "max", "min", "onbegin", "onend", "onload", "onrepeat", "repeatCount", "repeatDur", "requiredExtensions", "requiredFeatures", "restart", "systemLanguage", "to", "values", "xlink:actuate", "xlink:arcrole", "xlink:href", "xlink:role", "xlink:show", "xlink:title", "xlink:type", "xml:base", "xml:lang", "xml:space" ]),
            animateColor: Qt([ "accumulate", "additive", "attributeName", "attributeType", "begin", "by", "calcMode", "dur", "end", "externalResourcesRequired", "fill", "from", "id", "keySplines", "keyTimes", "max", "min", "onbegin", "onend", "onload", "onrepeat", "repeatCount", "repeatDur", "requiredExtensions", "requiredFeatures", "restart", "systemLanguage", "to", "values", "xlink:actuate", "xlink:arcrole", "xlink:href", "xlink:role", "xlink:show", "xlink:title", "xlink:type", "xml:base", "xml:lang", "xml:space" ]),
            animateMotion: Qt([ "accumulate", "additive", "begin", "by", "calcMode", "dur", "end", "externalResourcesRequired", "fill", "from", "id", "keyPoints", "keySplines", "keyTimes", "max", "min", "onbegin", "onend", "onload", "onrepeat", "origin", "path", "repeatCount", "repeatDur", "requiredExtensions", "requiredFeatures", "restart", "rotate", "systemLanguage", "to", "values", "xlink:actuate", "xlink:arcrole", "xlink:href", "xlink:role", "xlink:show", "xlink:title", "xlink:type", "xml:base", "xml:lang", "xml:space" ]),
            animateTransform: Qt([ "accumulate", "additive", "attributeName", "attributeType", "begin", "by", "calcMode", "dur", "end", "externalResourcesRequired", "fill", "from", "id", "keySplines", "keyTimes", "max", "min", "onbegin", "onend", "onload", "onrepeat", "repeatCount", "repeatDur", "requiredExtensions", "requiredFeatures", "restart", "systemLanguage", "to", "type", "values", "xlink:actuate", "xlink:arcrole", "xlink:href", "xlink:role", "xlink:show", "xlink:title", "xlink:type", "xml:base", "xml:lang", "xml:space" ]),
            circle: Qt([ "class", "cx", "cy", "externalResourcesRequired", "id", "onactivate", "onclick", "onfocusin", "onfocusout", "onload", "onmousedown", "onmousemove", "onmouseout", "onmouseover", "onmouseup", "r", "requiredExtensions", "requiredFeatures", "style", "systemLanguage", "transform", "xml:base", "xml:lang", "xml:space" ]),
            clipPath: Qt([ "class", "clipPathUnits", "externalResourcesRequired", "id", "requiredExtensions", "requiredFeatures", "style", "systemLanguage", "transform", "xml:base", "xml:lang", "xml:space" ]),
            "color-profile": Qt([ "id", "local", "name", "rendering-intent", "xlink:actuate", "xlink:arcrole", "xlink:href", "xlink:role", "xlink:show", "xlink:title", "xlink:type", "xml:base", "xml:lang", "xml:space" ]),
            cursor: Qt([ "externalResourcesRequired", "id", "requiredExtensions", "requiredFeatures", "systemLanguage", "x", "xlink:actuate", "xlink:arcrole", "xlink:href", "xlink:role", "xlink:show", "xlink:title", "xlink:type", "xml:base", "xml:lang", "xml:space", "y" ]),
            defs: Qt([ "class", "externalResourcesRequired", "id", "onactivate", "onclick", "onfocusin", "onfocusout", "onload", "onmousedown", "onmousemove", "onmouseout", "onmouseover", "onmouseup", "requiredExtensions", "requiredFeatures", "style", "systemLanguage", "transform", "xml:base", "xml:lang", "xml:space" ]),
            desc: Qt([ "class", "id", "style", "xml:base", "xml:lang", "xml:space" ]),
            ellipse: Qt([ "class", "cx", "cy", "externalResourcesRequired", "id", "onactivate", "onclick", "onfocusin", "onfocusout", "onload", "onmousedown", "onmousemove", "onmouseout", "onmouseover", "onmouseup", "requiredExtensions", "requiredFeatures", "rx", "ry", "style", "systemLanguage", "transform", "xml:base", "xml:lang", "xml:space" ]),
            feBlend: Qt([ "class", "height", "id", "in", "in2", "mode", "result", "style", "width", "x", "xml:base", "xml:lang", "xml:space", "y" ]),
            feColorMatrix: Qt([ "class", "height", "id", "in", "result", "style", "type", "values", "width", "x", "xml:base", "xml:lang", "xml:space", "y" ]),
            feComponentTransfer: Qt([ "class", "height", "id", "in", "result", "style", "width", "x", "xml:base", "xml:lang", "xml:space", "y" ]),
            feComposite: Qt([ "class", "height", "id", "in", "in2", "k1", "k2", "k3", "k4", "operator", "result", "style", "width", "x", "xml:base", "xml:lang", "xml:space", "y" ]),
            feConvolveMatrix: Qt([ "bias", "class", "divisor", "edgeMode", "height", "id", "in", "kernelMatrix", "kernelUnitLength", "order", "preserveAlpha", "result", "style", "targetX", "targetY", "width", "x", "xml:base", "xml:lang", "xml:space", "y" ]),
            feDiffuseLighting: Qt([ "class", "diffuseConstant", "height", "id", "in", "kernelUnitLength", "result", "style", "surfaceScale", "width", "x", "xml:base", "xml:lang", "xml:space", "y" ]),
            feDisplacementMap: Qt([ "class", "height", "id", "in", "in2", "result", "scale", "style", "width", "x", "xChannelSelector", "xml:base", "xml:lang", "xml:space", "y", "yChannelSelector" ]),
            feDistantLight: Qt([ "azimuth", "elevation", "id", "xml:base", "xml:lang", "xml:space" ]),
            feFlood: Qt([ "class", "height", "id", "result", "style", "width", "x", "xml:base", "xml:lang", "xml:space", "y" ]),
            feFuncA: Qt([ "amplitude", "exponent", "id", "intercept", "offset", "slope", "tableValues", "type", "xml:base", "xml:lang", "xml:space" ]),
            feFuncB: Qt([ "amplitude", "exponent", "id", "intercept", "offset", "slope", "tableValues", "type", "xml:base", "xml:lang", "xml:space" ]),
            feFuncG: Qt([ "amplitude", "exponent", "id", "intercept", "offset", "slope", "tableValues", "type", "xml:base", "xml:lang", "xml:space" ]),
            feFuncR: Qt([ "amplitude", "exponent", "id", "intercept", "offset", "slope", "tableValues", "type", "xml:base", "xml:lang", "xml:space" ]),
            feGaussianBlur: Qt([ "class", "height", "id", "in", "result", "stdDeviation", "style", "width", "x", "xml:base", "xml:lang", "xml:space", "y" ]),
            feImage: Qt([ "class", "externalResourcesRequired", "height", "id", "preserveAspectRatio", "result", "style", "width", "x", "xlink:actuate", "xlink:arcrole", "xlink:href", "xlink:role", "xlink:show", "xlink:title", "xlink:type", "xml:base", "xml:lang", "xml:space", "y" ]),
            feMerge: Qt([ "class", "height", "id", "result", "style", "width", "x", "xml:base", "xml:lang", "xml:space", "y" ]),
            feMergeNode: Qt([ "id", "xml:base", "xml:lang", "xml:space" ]),
            feMorphology: Qt([ "class", "height", "id", "in", "operator", "radius", "result", "style", "width", "x", "xml:base", "xml:lang", "xml:space", "y" ]),
            feOffset: Qt([ "class", "dx", "dy", "height", "id", "in", "result", "style", "width", "x", "xml:base", "xml:lang", "xml:space", "y" ]),
            fePointLight: Qt([ "id", "x", "xml:base", "xml:lang", "xml:space", "y", "z" ]),
            feSpecularLighting: Qt([ "class", "height", "id", "in", "kernelUnitLength", "result", "specularConstant", "specularExponent", "style", "surfaceScale", "width", "x", "xml:base", "xml:lang", "xml:space", "y" ]),
            feSpotLight: Qt([ "id", "limitingConeAngle", "pointsAtX", "pointsAtY", "pointsAtZ", "specularExponent", "x", "xml:base", "xml:lang", "xml:space", "y", "z" ]),
            feTile: Qt([ "class", "height", "id", "in", "result", "style", "width", "x", "xml:base", "xml:lang", "xml:space", "y" ]),
            feTurbulence: Qt([ "baseFrequency", "class", "height", "id", "numOctaves", "result", "seed", "stitchTiles", "style", "type", "width", "x", "xml:base", "xml:lang", "xml:space", "y" ]),
            filter: Qt([ "class", "externalResourcesRequired", "filterRes", "filterUnits", "height", "id", "primitiveUnits", "style", "width", "x", "xlink:actuate", "xlink:arcrole", "xlink:href", "xlink:role", "xlink:show", "xlink:title", "xlink:type", "xml:base", "xml:lang", "xml:space", "y" ]),
            font: Qt([ "class", "externalResourcesRequired", "horiz-adv-x", "horiz-origin-x", "horiz-origin-y", "id", "style", "vert-adv-y", "vert-origin-x", "vert-origin-y", "xml:base", "xml:lang", "xml:space" ]),
            "font-face": Qt([ "accent-height", "alphabetic", "ascent", "bbox", "cap-height", "descent", "font-family", "font-size", "font-stretch", "font-style", "font-variant", "font-weight", "hanging", "id", "ideographic", "mathematical", "overline-position", "overline-thickness", "panose-1", "slope", "stemh", "stemv", "strikethrough-position", "strikethrough-thickness", "underline-position", "underline-thickness", "unicode-range", "units-per-em", "v-alphabetic", "v-hanging", "v-ideographic", "v-mathematical", "widths", "x-height", "xml:base", "xml:lang", "xml:space" ]),
            "font-face-format": Qt([ "id", "string", "xml:base", "xml:lang", "xml:space" ]),
            "font-face-name": Qt([ "id", "name", "xml:base", "xml:lang", "xml:space" ]),
            "font-face-src": Qt([ "id", "xml:base", "xml:lang", "xml:space" ]),
            "font-face-uri": Qt([ "id", "xlink:actuate", "xlink:arcrole", "xlink:href", "xlink:role", "xlink:show", "xlink:title", "xlink:type", "xml:base", "xml:lang", "xml:space" ]),
            foreignObject: Qt([ "class", "externalResourcesRequired", "height", "id", "onactivate", "onclick", "onfocusin", "onfocusout", "onload", "onmousedown", "onmousemove", "onmouseout", "onmouseover", "onmouseup", "requiredExtensions", "requiredFeatures", "style", "systemLanguage", "transform", "width", "x", "xml:base", "xml:lang", "xml:space", "y" ]),
            g: Qt([ "class", "externalResourcesRequired", "id", "onactivate", "onclick", "onfocusin", "onfocusout", "onload", "onmousedown", "onmousemove", "onmouseout", "onmouseover", "onmouseup", "requiredExtensions", "requiredFeatures", "style", "systemLanguage", "transform", "xml:base", "xml:lang", "xml:space" ]),
            glyph: Qt([ "arabic-form", "class", "d", "glyph-name", "horiz-adv-x", "id", "lang", "orientation", "style", "unicode", "vert-adv-y", "vert-origin-x", "vert-origin-y", "xml:base", "xml:lang", "xml:space" ]),
            glyphRef: Qt([ "class", "dx", "dy", "format", "glyphRef", "id", "style", "x", "xlink:actuate", "xlink:arcrole", "xlink:href", "xlink:role", "xlink:show", "xlink:title", "xlink:type", "xml:base", "xml:lang", "xml:space", "y" ]),
            glyphref: wt(),
            hkern: Qt([ "g1", "g2", "id", "k", "u1", "u2", "xml:base", "xml:lang", "xml:space" ]),
            image: Qt([ "class", "externalResourcesRequired", "height", "id", "onactivate", "onclick", "onfocusin", "onfocusout", "onload", "onmousedown", "onmousemove", "onmouseout", "onmouseover", "onmouseup", "preserveAspectRatio", "requiredExtensions", "requiredFeatures", "style", "systemLanguage", "transform", "width", "x", "xlink:actuate", "xlink:arcrole", "xlink:href", "xlink:role", "xlink:show", "xlink:title", "xlink:type", "xml:base", "xml:lang", "xml:space", "y" ]),
            line: Qt([ "class", "externalResourcesRequired", "id", "onactivate", "onclick", "onfocusin", "onfocusout", "onload", "onmousedown", "onmousemove", "onmouseout", "onmouseover", "onmouseup", "requiredExtensions", "requiredFeatures", "style", "systemLanguage", "transform", "x1", "x2", "xml:base", "xml:lang", "xml:space", "y1", "y2" ]),
            linearGradient: Qt([ "class", "externalResourcesRequired", "gradientTransform", "gradientUnits", "id", "spreadMethod", "style", "x1", "x2", "xlink:arcrole", "xlink:href", "xlink:role", "xlink:title", "xlink:type", "xml:base", "xml:lang", "xml:space", "y1", "y2" ]),
            marker: Qt([ "class", "externalResourcesRequired", "id", "markerHeight", "markerUnits", "markerWidth", "orient", "preserveAspectRatio", "refX", "refY", "style", "viewBox", "xml:base", "xml:lang", "xml:space" ]),
            mask: Qt([ "class", "externalResourcesRequired", "height", "id", "maskContentUnits", "maskUnits", "requiredExtensions", "requiredFeatures", "style", "systemLanguage", "width", "x", "xml:base", "xml:lang", "xml:space", "y" ]),
            metadata: Qt([ "id", "xml:base", "xml:lang", "xml:space" ]),
            "missing-glyph": Qt([ "class", "d", "horiz-adv-x", "id", "style", "vert-adv-y", "vert-origin-x", "vert-origin-y", "xml:base", "xml:lang", "xml:space" ]),
            mpath: Qt([ "externalResourcesRequired", "id", "xlink:actuate", "xlink:arcrole", "xlink:href", "xlink:role", "xlink:show", "xlink:title", "xlink:type", "xml:base", "xml:lang", "xml:space" ]),
            path: Qt([ "class", "d", "externalResourcesRequired", "id", "onactivate", "onclick", "onfocusin", "onfocusout", "onload", "onmousedown", "onmousemove", "onmouseout", "onmouseover", "onmouseup", "pathLength", "requiredExtensions", "requiredFeatures", "style", "systemLanguage", "transform", "xml:base", "xml:lang", "xml:space" ]),
            pattern: Qt([ "class", "externalResourcesRequired", "height", "id", "patternContentUnits", "patternTransform", "patternUnits", "preserveAspectRatio", "requiredExtensions", "requiredFeatures", "style", "systemLanguage", "viewBox", "width", "x", "xlink:actuate", "xlink:arcrole", "xlink:href", "xlink:role", "xlink:show", "xlink:title", "xlink:type", "xml:base", "xml:lang", "xml:space", "y" ]),
            polygon: Qt([ "class", "externalResourcesRequired", "id", "onactivate", "onclick", "onfocusin", "onfocusout", "onload", "onmousedown", "onmousemove", "onmouseout", "onmouseover", "onmouseup", "points", "requiredExtensions", "requiredFeatures", "style", "systemLanguage", "transform", "xml:base", "xml:lang", "xml:space" ]),
            polyline: Qt([ "class", "externalResourcesRequired", "id", "onactivate", "onclick", "onfocusin", "onfocusout", "onload", "onmousedown", "onmousemove", "onmouseout", "onmouseover", "onmouseup", "points", "requiredExtensions", "requiredFeatures", "style", "systemLanguage", "transform", "xml:base", "xml:lang", "xml:space" ]),
            radialGradient: Qt([ "class", "cx", "cy", "externalResourcesRequired", "fx", "fy", "gradientTransform", "gradientUnits", "id", "r", "spreadMethod", "style", "xlink:arcrole", "xlink:href", "xlink:role", "xlink:title", "xlink:type", "xml:base", "xml:lang", "xml:space" ]),
            rect: Qt([ "class", "externalResourcesRequired", "height", "id", "onactivate", "onclick", "onfocusin", "onfocusout", "onload", "onmousedown", "onmousemove", "onmouseout", "onmouseover", "onmouseup", "requiredExtensions", "requiredFeatures", "rx", "ry", "style", "systemLanguage", "transform", "width", "x", "xml:base", "xml:lang", "xml:space", "y" ]),
            script: Qt([ "externalResourcesRequired", "id", "type", "xlink:actuate", "xlink:arcrole", "xlink:href", "xlink:role", "xlink:show", "xlink:title", "xlink:type", "xml:base", "xml:lang", "xml:space" ]),
            set: Qt([ "attributeName", "attributeType", "begin", "dur", "end", "externalResourcesRequired", "fill", "id", "max", "min", "onbegin", "onend", "onload", "onrepeat", "repeatCount", "repeatDur", "requiredExtensions", "requiredFeatures", "restart", "systemLanguage", "to", "xlink:actuate", "xlink:arcrole", "xlink:href", "xlink:role", "xlink:show", "xlink:title", "xlink:type", "xml:base", "xml:lang", "xml:space" ]),
            stop: Qt([ "class", "id", "offset", "style", "xml:base", "xml:lang", "xml:space" ]),
            style: Qt([ "id", "media", "title", "type", "xml:base", "xml:lang", "xml:space" ]),
            svg: Qt([ "baseProfile", "class", "contentScriptType", "contentStyleType", "externalResourcesRequired", "height", "id", "onabort", "onactivate", "onclick", "onerror", "onfocusin", "onfocusout", "onload", "onmousedown", "onmousemove", "onmouseout", "onmouseover", "onmouseup", "onresize", "onscroll", "onunload", "onzoom", "preserveAspectRatio", "requiredExtensions", "requiredFeatures", "style", "systemLanguage", "version", "viewBox", "width", "x", "xml:base", "xml:lang", "xml:space", "y", "zoomAndPan" ]),
            switch: Qt([ "class", "externalResourcesRequired", "id", "onactivate", "onclick", "onfocusin", "onfocusout", "onload", "onmousedown", "onmousemove", "onmouseout", "onmouseover", "onmouseup", "requiredExtensions", "requiredFeatures", "style", "systemLanguage", "transform", "xml:base", "xml:lang", "xml:space" ]),
            symbol: Qt([ "class", "externalResourcesRequired", "id", "onactivate", "onclick", "onfocusin", "onfocusout", "onload", "onmousedown", "onmousemove", "onmouseout", "onmouseover", "onmouseup", "preserveAspectRatio", "style", "viewBox", "xml:base", "xml:lang", "xml:space" ]),
            text: Qt([ "class", "dx", "dy", "externalResourcesRequired", "id", "lengthAdjust", "onactivate", "onclick", "onfocusin", "onfocusout", "onload", "onmousedown", "onmousemove", "onmouseout", "onmouseover", "onmouseup", "requiredExtensions", "requiredFeatures", "rotate", "style", "systemLanguage", "textLength", "transform", "x", "xml:base", "xml:lang", "xml:space", "y" ]),
            textPath: Qt([ "class", "externalResourcesRequired", "id", "lengthAdjust", "method", "onactivate", "onclick", "onfocusin", "onfocusout", "onload", "onmousedown", "onmousemove", "onmouseout", "onmouseover", "onmouseup", "requiredExtensions", "requiredFeatures", "spacing", "startOffset", "style", "systemLanguage", "textLength", "xlink:arcrole", "xlink:href", "xlink:role", "xlink:title", "xlink:type", "xml:base", "xml:lang", "xml:space" ]),
            title: Qt([ "class", "id", "style", "xml:base", "xml:lang", "xml:space" ]),
            tref: Qt([ "class", "dx", "dy", "externalResourcesRequired", "id", "lengthAdjust", "onactivate", "onclick", "onfocusin", "onfocusout", "onload", "onmousedown", "onmousemove", "onmouseout", "onmouseover", "onmouseup", "requiredExtensions", "requiredFeatures", "rotate", "style", "systemLanguage", "textLength", "x", "xlink:arcrole", "xlink:href", "xlink:role", "xlink:title", "xlink:type", "xml:base", "xml:lang", "xml:space", "y" ]),
            tspan: Qt([ "class", "dx", "dy", "externalResourcesRequired", "id", "lengthAdjust", "onactivate", "onclick", "onfocusin", "onfocusout", "onload", "onmousedown", "onmousemove", "onmouseout", "onmouseover", "onmouseup", "requiredExtensions", "requiredFeatures", "rotate", "style", "systemLanguage", "textLength", "x", "xml:base", "xml:lang", "xml:space", "y" ]),
            use: Qt([ "class", "externalResourcesRequired", "height", "id", "onactivate", "onclick", "onfocusin", "onfocusout", "onload", "onmousedown", "onmousemove", "onmouseout", "onmouseover", "onmouseup", "requiredExtensions", "requiredFeatures", "style", "systemLanguage", "transform", "width", "x", "xlink:actuate", "xlink:arcrole", "xlink:href", "xlink:role", "xlink:show", "xlink:title", "xlink:type", "xml:base", "xml:lang", "xml:space", "y" ]),
            view: Qt([ "externalResourcesRequired", "id", "preserveAspectRatio", "viewBox", "viewTarget", "xml:base", "xml:lang", "xml:space", "zoomAndPan" ]),
            vkern: Qt([ "g1", "g2", "id", "k", "u1", "u2", "xml:base", "xml:lang", "xml:space" ])
        });
        this._ = Qt([ "a", "altGlyph", "animate", "animateColor", "circle", "clipPath", "defs", "ellipse", "feBlend", "feColorMatrix", "feComponentTransfer", "feComposite", "feConvolveMatrix", "feDiffuseLighting", "feDisplacementMap", "feFlood", "feGaussianBlur", "feImage", "feMerge", "feMorphology", "feOffset", "feSpecularLighting", "feTile", "feTurbulence", "filter", "font", "foreignObject", "g", "glyph", "glyphRef", "image", "line", "linearGradient", "marker", "mask", "missing-glyph", "path", "pattern", "polygon", "polyline", "radialGradient", "rect", "stop", "svg", "switch", "symbol", "text", "textPath", "tref", "tspan", "use" ]);
        this.j = Qt([ "alignment-baseline", "baseline-shift", "clip-path", "clip-rule", "clip", "color-interpolation-filters", "color-interpolation", "color-profile", "color-rendering", "color", "cursor", "direction", "display", "dominant-baseline", "enable-background", "fill-opacity", "fill-rule", "fill", "filter", "flood-color", "flood-opacity", "font-family", "font-size-adjust", "font-size", "font-stretch", "font-style", "font-variant", "font-weight", "glyph-orientation-horizontal", "glyph-orientation-vertical", "image-rendering", "kerning", "letter-spacing", "lighting-color", "marker-end", "marker-mid", "marker-start", "mask", "opacity", "overflow", "pointer-events", "shape-rendering", "stop-color", "stop-opacity", "stroke-dasharray", "stroke-dashoffset", "stroke-linecap", "stroke-linejoin", "stroke-miterlimit", "stroke-opacity", "stroke-width", "stroke", "text-anchor", "text-decoration", "text-rendering", "unicode-bidi", "visibility", "word-spacing", "writing-mode" ]);
        this.SVGElement = t.globalThis.SVGElement;
        const e = t.document.createElement("div");
        e.innerHTML = "<svg><altGlyph /></svg>";
        if ("altglyph" === e.firstElementChild.nodeName) {
            const t = this.V;
            let e = t.altGlyph;
            t.altGlyph = t.altglyph;
            t.altglyph = e;
            e = t.altGlyphDef;
            t.altGlyphDef = t.altglyphdef;
            t.altglyphdef = e;
            e = t.altGlyphItem;
            t.altGlyphItem = t.altglyphitem;
            t.altglyphitem = e;
            e = t.glyphRef;
            t.glyphRef = t.glyphref;
            t.glyphref = e;
        }
    }
    static register(t) {
        return _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.Registration.singleton(Yt, this).register(t);
    }
    isStandardSvgAttribute(t, e) {
        var i;
        if (!(t instanceof this.SVGElement)) return false;
        return true === this._[t.nodeName] && true === this.j[e] || true === (null === (i = this.V[t.nodeName]) || void 0 === i ? void 0 : i[e]);
    }
}

SVGAnalyzer.inject = [ Kt ];

const Zt = _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.DI.createInterface("IAttrMapper", (t => t.singleton(AttrMapper)));

class AttrMapper {
    constructor(t) {
        this.svg = t;
        this.fns = [];
        this.N = wt();
        this.W = wt();
        this.useMapping({
            LABEL: {
                for: "htmlFor"
            },
            IMG: {
                usemap: "useMap"
            },
            INPUT: {
                maxlength: "maxLength",
                minlength: "minLength",
                formaction: "formAction",
                formenctype: "formEncType",
                formmethod: "formMethod",
                formnovalidate: "formNoValidate",
                formtarget: "formTarget",
                inputmode: "inputMode"
            },
            TEXTAREA: {
                maxlength: "maxLength"
            },
            TD: {
                rowspan: "rowSpan",
                colspan: "colSpan"
            },
            TH: {
                rowspan: "rowSpan",
                colspan: "colSpan"
            }
        });
        this.useGlobalMapping({
            accesskey: "accessKey",
            contenteditable: "contentEditable",
            tabindex: "tabIndex",
            textcontent: "textContent",
            innerhtml: "innerHTML",
            scrolltop: "scrollTop",
            scrollleft: "scrollLeft",
            readonly: "readOnly"
        });
    }
    static get inject() {
        return [ Yt ];
    }
    useMapping(t) {
        var e;
        var i;
        let s;
        let n;
        let r;
        let o;
        for (r in t) {
            s = t[r];
            n = null !== (e = (i = this.N)[r]) && void 0 !== e ? e : i[r] = wt();
            for (o in s) {
                if (void 0 !== n[o]) throw te(o, r);
                n[o] = s[o];
            }
        }
    }
    useGlobalMapping(t) {
        const e = this.W;
        for (const i in t) {
            if (void 0 !== e[i]) throw te(i, "*");
            e[i] = t[i];
        }
    }
    useTwoWay(t) {
        this.fns.push(t);
    }
    isTwoWay(t, e) {
        return Jt(t, e) || this.fns.length > 0 && this.fns.some((i => i(t, e)));
    }
    map(t, e) {
        var i, s, n;
        return null !== (n = null !== (s = null === (i = this.N[t.nodeName]) || void 0 === i ? void 0 : i[e]) && void 0 !== s ? s : this.W[e]) && void 0 !== n ? n : yt(t, e, this.svg) ? e : null;
    }
}

function Jt(t, e) {
    switch (t.nodeName) {
      case "INPUT":
        switch (t.type) {
          case "checkbox":
          case "radio":
            return "checked" === e;

          default:
            return "value" === e || "files" === e || "value-as-number" === e || "value-as-date" === e;
        }

      case "TEXTAREA":
      case "SELECT":
        return "value" === e;

      default:
        switch (e) {
          case "textcontent":
          case "innerhtml":
            return t.hasAttribute("contenteditable");

          case "scrolltop":
          case "scrollleft":
            return true;

          default:
            return false;
        }
    }
}

function te(t, e) {
    return new Error(`Attribute ${t} has been already registered for ${"*" === e ? "all elements" : `<${e}/>`}`);
}

class CallBinding {
    constructor(t, e, i, s, n) {
        this.sourceExpression = t;
        this.target = e;
        this.targetProperty = i;
        this.locator = n;
        this.interceptor = this;
        this.isBound = false;
        this.targetObserver = s.getAccessor(e, i);
    }
    callSource(t) {
        const e = this.$scope.overrideContext;
        e.$event = t;
        const i = this.sourceExpression.evaluate(8, this.$scope, this.locator, null);
        Reflect.deleteProperty(e, "$event");
        return i;
    }
    $bind(t, e) {
        if (this.isBound) {
            if (this.$scope === e) return;
            this.interceptor.$unbind(2 | t);
        }
        this.$scope = e;
        if (this.sourceExpression.hasBind) this.sourceExpression.bind(t, e, this.interceptor);
        this.targetObserver.setValue((t => this.interceptor.callSource(t)), t, this.target, this.targetProperty);
        this.isBound = true;
    }
    $unbind(t) {
        if (!this.isBound) return;
        if (this.sourceExpression.hasUnbind) this.sourceExpression.unbind(t, this.$scope, this.interceptor);
        this.$scope = void 0;
        this.targetObserver.setValue(null, t, this.target, this.targetProperty);
        this.isBound = false;
    }
    observe(t, e) {
        return;
    }
    handleChange(t, e, i) {
        return;
    }
}

class AttributeObserver {
    constructor(t, e, i) {
        this.type = 2 | 1 | 4;
        this.v = null;
        this.ov = null;
        this.H = false;
        this.f = 0;
        this.o = t;
        this.G = e;
        this.X = i;
    }
    getValue() {
        return this.v;
    }
    setValue(t, e) {
        this.v = t;
        this.H = t !== this.ov;
        if (0 === (256 & e)) this.K();
    }
    K() {
        if (this.H) {
            this.H = false;
            this.ov = this.v;
            switch (this.X) {
              case "class":
                this.o.classList.toggle(this.G, !!this.v);
                break;

              case "style":
                {
                    let t = "";
                    let e = this.v;
                    if (At(e) && e.includes("!important")) {
                        t = "important";
                        e = e.replace("!important", "");
                    }
                    this.o.style.setProperty(this.G, e, t);
                    break;
                }

              default:
                if (null == this.v) this.o.removeAttribute(this.X); else this.o.setAttribute(this.X, String(this.v));
            }
        }
    }
    handleMutation(t) {
        let e = false;
        for (let i = 0, s = t.length; s > i; ++i) {
            const s = t[i];
            if ("attributes" === s.type && s.attributeName === this.G) {
                e = true;
                break;
            }
        }
        if (e) {
            let t;
            switch (this.X) {
              case "class":
                t = this.o.classList.contains(this.G);
                break;

              case "style":
                t = this.o.style.getPropertyValue(this.G);
                break;

              default:
                throw new Error(`AUR0651:${this.X}`);
            }
            if (t !== this.v) {
                this.ov = this.v;
                this.v = t;
                this.H = false;
                this.f = 0;
                this.queue.add(this);
            }
        }
    }
    subscribe(t) {
        if (this.subs.add(t) && 1 === this.subs.count) {
            this.v = this.ov = this.o.getAttribute(this.G);
            ee(this.o.ownerDocument.defaultView.MutationObserver, this.o, this);
        }
    }
    unsubscribe(t) {
        if (this.subs.remove(t) && 0 === this.subs.count) ie(this.o, this);
    }
    flush() {
        re = this.ov;
        this.ov = this.v;
        this.subs.notify(this.v, re, this.f);
    }
}

(0,_aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.subscriberCollection)(AttributeObserver);

(0,_aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.withFlushQueue)(AttributeObserver);

const ee = (t, e, i) => {
    if (void 0 === e.$eMObs) e.$eMObs = new Set;
    if (void 0 === e.$mObs) (e.$mObs = new t(se)).observe(e, {
        attributes: true
    });
    e.$eMObs.add(i);
};

const ie = (t, e) => {
    const i = t.$eMObs;
    if (i && i.delete(e)) {
        if (0 === i.size) {
            t.$mObs.disconnect();
            t.$mObs = void 0;
        }
        return true;
    }
    return false;
};

const se = t => {
    t[0].target.$eMObs.forEach(ne, t);
};

function ne(t) {
    t.handleMutation(this);
}

let re;

class BindingTargetSubscriber {
    constructor(t) {
        this.b = t;
    }
    handleChange(t, e, i) {
        const s = this.b;
        if (t !== s.sourceExpression.evaluate(i, s.$scope, s.locator, null)) s.updateSource(t, i);
    }
}

const {oneTime: oe, toView: le, fromView: he} = _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.BindingMode;

const ae = le | oe;

const ce = {
    reusable: false,
    preempt: true
};

class AttributeBinding {
    constructor(t, e, i, s, n, r, o) {
        this.sourceExpression = t;
        this.targetAttribute = i;
        this.targetProperty = s;
        this.mode = n;
        this.locator = o;
        this.interceptor = this;
        this.isBound = false;
        this.$scope = null;
        this.task = null;
        this.targetSubscriber = null;
        this.persistentFlags = 0;
        this.value = void 0;
        this.target = e;
        this.p = o.get(Kt);
        this.oL = r;
    }
    updateTarget(t, e) {
        e |= this.persistentFlags;
        this.targetObserver.setValue(t, e, this.target, this.targetProperty);
    }
    updateSource(t, e) {
        e |= this.persistentFlags;
        this.sourceExpression.assign(e, this.$scope, this.locator, t);
    }
    handleChange(t, e, i) {
        if (!this.isBound) return;
        i |= this.persistentFlags;
        const s = this.mode;
        const n = this.interceptor;
        const r = this.sourceExpression;
        const o = this.$scope;
        const l = this.locator;
        const h = this.targetObserver;
        const a = 0 === (2 & i) && (4 & h.type) > 0;
        let c = false;
        let u;
        if (10082 !== r.$kind || this.obs.count > 1) {
            c = 0 === (s & oe);
            if (c) this.obs.version++;
            t = r.evaluate(i, o, l, n);
            if (c) this.obs.clear();
        }
        if (t !== this.value) {
            this.value = t;
            if (a) {
                u = this.task;
                this.task = this.p.domWriteQueue.queueTask((() => {
                    this.task = null;
                    n.updateTarget(t, i);
                }), ce);
                null === u || void 0 === u ? void 0 : u.cancel();
            } else n.updateTarget(t, i);
        }
    }
    $bind(t, e) {
        var i;
        if (this.isBound) {
            if (this.$scope === e) return;
            this.interceptor.$unbind(2 | t);
        }
        this.persistentFlags = 961 & t;
        this.$scope = e;
        let s = this.sourceExpression;
        if (s.hasBind) s.bind(t, e, this.interceptor);
        let n = this.targetObserver;
        if (!n) n = this.targetObserver = new AttributeObserver(this.target, this.targetProperty, this.targetAttribute);
        s = this.sourceExpression;
        const r = this.mode;
        const o = this.interceptor;
        let l = false;
        if (r & ae) {
            l = (r & le) > 0;
            o.updateTarget(this.value = s.evaluate(t, e, this.locator, l ? o : null), t);
        }
        if (r & he) n.subscribe(null !== (i = this.targetSubscriber) && void 0 !== i ? i : this.targetSubscriber = new BindingTargetSubscriber(o));
        this.isBound = true;
    }
    $unbind(t) {
        var e;
        if (!this.isBound) return;
        this.persistentFlags = 0;
        if (this.sourceExpression.hasUnbind) this.sourceExpression.unbind(t, this.$scope, this.interceptor);
        this.$scope = null;
        this.value = void 0;
        if (this.targetSubscriber) this.targetObserver.unsubscribe(this.targetSubscriber);
        null === (e = this.task) || void 0 === e ? void 0 : e.cancel();
        this.task = null;
        this.obs.clearAll();
        this.isBound = false;
    }
}

(0,_aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.connectable)(AttributeBinding);

const {toView: ue} = _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.BindingMode;

const fe = {
    reusable: false,
    preempt: true
};

class InterpolationBinding {
    constructor(t, e, i, s, n, r, o) {
        this.interpolation = e;
        this.target = i;
        this.targetProperty = s;
        this.mode = n;
        this.locator = r;
        this.taskQueue = o;
        this.interceptor = this;
        this.isBound = false;
        this.$scope = void 0;
        this.task = null;
        this.oL = t;
        this.targetObserver = t.getAccessor(i, s);
        const l = e.expressions;
        const h = this.partBindings = Array(l.length);
        const a = l.length;
        let c = 0;
        for (;a > c; ++c) h[c] = new InterpolationPartBinding(l[c], i, s, r, t, this);
    }
    updateTarget(t, e) {
        const i = this.partBindings;
        const s = this.interpolation.parts;
        const n = i.length;
        let r = "";
        let o = 0;
        if (1 === n) r = s[0] + i[0].value + s[1]; else {
            r = s[0];
            for (;n > o; ++o) r += i[o].value + s[o + 1];
        }
        const l = this.targetObserver;
        const h = 0 === (2 & e) && (4 & l.type) > 0;
        let a;
        if (h) {
            a = this.task;
            this.task = this.taskQueue.queueTask((() => {
                this.task = null;
                l.setValue(r, e, this.target, this.targetProperty);
            }), fe);
            null === a || void 0 === a ? void 0 : a.cancel();
            a = null;
        } else l.setValue(r, e, this.target, this.targetProperty);
    }
    $bind(t, e) {
        if (this.isBound) {
            if (this.$scope === e) return;
            this.interceptor.$unbind(t);
        }
        this.isBound = true;
        this.$scope = e;
        const i = this.partBindings;
        const s = i.length;
        let n = 0;
        for (;s > n; ++n) i[n].$bind(t, e);
        this.updateTarget(void 0, t);
    }
    $unbind(t) {
        var e;
        if (!this.isBound) return;
        this.isBound = false;
        this.$scope = void 0;
        const i = this.partBindings;
        const s = i.length;
        let n = 0;
        for (;s > n; ++n) i[n].interceptor.$unbind(t);
        null === (e = this.task) || void 0 === e ? void 0 : e.cancel();
        this.task = null;
    }
}

class InterpolationPartBinding {
    constructor(t, e, i, s, n, r) {
        this.sourceExpression = t;
        this.target = e;
        this.targetProperty = i;
        this.locator = s;
        this.owner = r;
        this.interceptor = this;
        this.mode = _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.BindingMode.toView;
        this.value = "";
        this.task = null;
        this.isBound = false;
        this.oL = n;
    }
    handleChange(t, e, i) {
        if (!this.isBound) return;
        const s = this.sourceExpression;
        const n = this.obs;
        const r = 10082 === s.$kind && 1 === n.count;
        let o = false;
        if (!r) {
            o = (this.mode & ue) > 0;
            if (o) n.version++;
            t = s.evaluate(i, this.$scope, this.locator, o ? this.interceptor : null);
            if (o) n.clear();
        }
        if (t != this.value) {
            this.value = t;
            if (t instanceof Array) this.observeCollection(t);
            this.owner.updateTarget(t, i);
        }
    }
    handleCollectionChange(t, e) {
        this.owner.updateTarget(void 0, e);
    }
    $bind(t, e) {
        if (this.isBound) {
            if (this.$scope === e) return;
            this.interceptor.$unbind(t);
        }
        this.isBound = true;
        this.$scope = e;
        if (this.sourceExpression.hasBind) this.sourceExpression.bind(t, e, this.interceptor);
        this.value = this.sourceExpression.evaluate(t, e, this.locator, (this.mode & ue) > 0 ? this.interceptor : null);
        if (this.value instanceof Array) this.observeCollection(this.value);
    }
    $unbind(t) {
        if (!this.isBound) return;
        this.isBound = false;
        if (this.sourceExpression.hasUnbind) this.sourceExpression.unbind(t, this.$scope, this.interceptor);
        this.$scope = void 0;
        this.obs.clearAll();
    }
}

(0,_aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.connectable)(InterpolationPartBinding);

class ContentBinding {
    constructor(t, e, i, s, n, r) {
        this.sourceExpression = t;
        this.target = e;
        this.locator = i;
        this.p = n;
        this.strict = r;
        this.interceptor = this;
        this.mode = _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.BindingMode.toView;
        this.value = "";
        this.task = null;
        this.isBound = false;
        this.oL = s;
    }
    updateTarget(t, e) {
        var i, s;
        const n = this.target;
        const r = this.p.Node;
        const o = this.value;
        this.value = t;
        if (o instanceof r) null === (i = o.parentNode) || void 0 === i ? void 0 : i.removeChild(o);
        if (t instanceof r) {
            n.textContent = "";
            null === (s = n.parentNode) || void 0 === s ? void 0 : s.insertBefore(t, n);
        } else n.textContent = String(t);
    }
    handleChange(t, e, i) {
        var s;
        if (!this.isBound) return;
        const n = this.sourceExpression;
        const r = this.obs;
        const o = 10082 === n.$kind && 1 === r.count;
        let l = false;
        if (!o) {
            l = (this.mode & ue) > 0;
            if (l) r.version++;
            i |= this.strict ? 1 : 0;
            t = n.evaluate(i, this.$scope, this.locator, l ? this.interceptor : null);
            if (l) r.clear();
        }
        if (t === this.value) {
            null === (s = this.task) || void 0 === s ? void 0 : s.cancel();
            this.task = null;
            return;
        }
        const h = 0 === (2 & i);
        if (h) this.queueUpdate(t, i); else this.updateTarget(t, i);
    }
    handleCollectionChange() {
        this.queueUpdate(this.value, 0);
    }
    $bind(t, e) {
        if (this.isBound) {
            if (this.$scope === e) return;
            this.interceptor.$unbind(t);
        }
        this.isBound = true;
        this.$scope = e;
        if (this.sourceExpression.hasBind) this.sourceExpression.bind(t, e, this.interceptor);
        t |= this.strict ? 1 : 0;
        const i = this.value = this.sourceExpression.evaluate(t, e, this.locator, (this.mode & ue) > 0 ? this.interceptor : null);
        if (i instanceof Array) this.observeCollection(i);
        this.updateTarget(i, t);
    }
    $unbind(t) {
        var e;
        if (!this.isBound) return;
        this.isBound = false;
        if (this.sourceExpression.hasUnbind) this.sourceExpression.unbind(t, this.$scope, this.interceptor);
        this.$scope = void 0;
        this.obs.clearAll();
        null === (e = this.task) || void 0 === e ? void 0 : e.cancel();
        this.task = null;
    }
    queueUpdate(t, e) {
        const i = this.task;
        this.task = this.p.domWriteQueue.queueTask((() => {
            this.task = null;
            this.updateTarget(t, e);
        }), fe);
        null === i || void 0 === i ? void 0 : i.cancel();
    }
}

(0,_aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.connectable)(ContentBinding);

class LetBinding {
    constructor(t, e, i, s, n = false) {
        this.sourceExpression = t;
        this.targetProperty = e;
        this.locator = s;
        this.interceptor = this;
        this.isBound = false;
        this.$scope = void 0;
        this.task = null;
        this.target = null;
        this.oL = i;
        this.Y = n;
    }
    handleChange(t, e, i) {
        if (!this.isBound) return;
        const s = this.target;
        const n = this.targetProperty;
        const r = s[n];
        this.obs.version++;
        t = this.sourceExpression.evaluate(i, this.$scope, this.locator, this.interceptor);
        this.obs.clear();
        if (t !== r) s[n] = t;
    }
    $bind(t, e) {
        if (this.isBound) {
            if (this.$scope === e) return;
            this.interceptor.$unbind(2 | t);
        }
        this.$scope = e;
        this.target = this.Y ? e.bindingContext : e.overrideContext;
        const i = this.sourceExpression;
        if (i.hasBind) i.bind(t, e, this.interceptor);
        this.target[this.targetProperty] = this.sourceExpression.evaluate(2 | t, e, this.locator, this.interceptor);
        this.isBound = true;
    }
    $unbind(t) {
        if (!this.isBound) return;
        const e = this.sourceExpression;
        if (e.hasUnbind) e.unbind(t, this.$scope, this.interceptor);
        this.$scope = void 0;
        this.obs.clearAll();
        this.isBound = false;
    }
}

(0,_aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.connectable)(LetBinding);

const {oneTime: de, toView: me, fromView: ve} = _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.BindingMode;

const pe = me | de;

const ge = {
    reusable: false,
    preempt: true
};

class PropertyBinding {
    constructor(t, e, i, s, n, r, o) {
        this.sourceExpression = t;
        this.target = e;
        this.targetProperty = i;
        this.mode = s;
        this.locator = r;
        this.taskQueue = o;
        this.interceptor = this;
        this.isBound = false;
        this.$scope = void 0;
        this.targetObserver = void 0;
        this.persistentFlags = 0;
        this.task = null;
        this.targetSubscriber = null;
        this.oL = n;
    }
    updateTarget(t, e) {
        e |= this.persistentFlags;
        this.targetObserver.setValue(t, e, this.target, this.targetProperty);
    }
    updateSource(t, e) {
        e |= this.persistentFlags;
        this.sourceExpression.assign(e, this.$scope, this.locator, t);
    }
    handleChange(t, e, i) {
        if (!this.isBound) return;
        i |= this.persistentFlags;
        const s = 0 === (2 & i) && (4 & this.targetObserver.type) > 0;
        const n = this.obs;
        let r = false;
        if (10082 !== this.sourceExpression.$kind || n.count > 1) {
            r = this.mode > de;
            if (r) n.version++;
            t = this.sourceExpression.evaluate(i, this.$scope, this.locator, this.interceptor);
            if (r) n.clear();
        }
        if (s) {
            we = this.task;
            this.task = this.taskQueue.queueTask((() => {
                this.interceptor.updateTarget(t, i);
                this.task = null;
            }), ge);
            null === we || void 0 === we ? void 0 : we.cancel();
            we = null;
        } else this.interceptor.updateTarget(t, i);
    }
    $bind(t, e) {
        var i;
        if (this.isBound) {
            if (this.$scope === e) return;
            this.interceptor.$unbind(2 | t);
        }
        t |= 1;
        this.persistentFlags = 961 & t;
        this.$scope = e;
        let s = this.sourceExpression;
        if (s.hasBind) s.bind(t, e, this.interceptor);
        const n = this.oL;
        const r = this.mode;
        let o = this.targetObserver;
        if (!o) {
            if (r & ve) o = n.getObserver(this.target, this.targetProperty); else o = n.getAccessor(this.target, this.targetProperty);
            this.targetObserver = o;
        }
        s = this.sourceExpression;
        const l = this.interceptor;
        const h = (r & me) > 0;
        if (r & pe) l.updateTarget(s.evaluate(t, e, this.locator, h ? l : null), t);
        if (r & ve) {
            o.subscribe(null !== (i = this.targetSubscriber) && void 0 !== i ? i : this.targetSubscriber = new BindingTargetSubscriber(l));
            if (!h) l.updateSource(o.getValue(this.target, this.targetProperty), t);
        }
        this.isBound = true;
    }
    $unbind(t) {
        if (!this.isBound) return;
        this.persistentFlags = 0;
        if (this.sourceExpression.hasUnbind) this.sourceExpression.unbind(t, this.$scope, this.interceptor);
        this.$scope = void 0;
        we = this.task;
        if (this.targetSubscriber) this.targetObserver.unsubscribe(this.targetSubscriber);
        if (null != we) {
            we.cancel();
            we = this.task = null;
        }
        this.obs.clearAll();
        this.isBound = false;
    }
}

(0,_aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.connectable)(PropertyBinding);

let we = null;

class RefBinding {
    constructor(t, e, i) {
        this.sourceExpression = t;
        this.target = e;
        this.locator = i;
        this.interceptor = this;
        this.isBound = false;
        this.$scope = void 0;
    }
    $bind(t, e) {
        if (this.isBound) {
            if (this.$scope === e) return;
            this.interceptor.$unbind(2 | t);
        }
        this.$scope = e;
        if (this.sourceExpression.hasBind) this.sourceExpression.bind(t, e, this);
        this.sourceExpression.assign(t, this.$scope, this.locator, this.target);
        this.isBound = true;
    }
    $unbind(t) {
        if (!this.isBound) return;
        let e = this.sourceExpression;
        if (e.evaluate(t, this.$scope, this.locator, null) === this.target) e.assign(t, this.$scope, this.locator, null);
        e = this.sourceExpression;
        if (e.hasUnbind) e.unbind(t, this.$scope, this.interceptor);
        this.$scope = void 0;
        this.isBound = false;
    }
    observe(t, e) {
        return;
    }
    handleChange(t, e, i) {
        return;
    }
}

const be = _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.DI.createInterface("IAppTask");

class $AppTask {
    constructor(t, e, i) {
        this.c = void 0;
        this.slot = t;
        this.k = e;
        this.cb = i;
    }
    register(t) {
        return this.c = t.register(_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.Registration.instance(be, this));
    }
    run() {
        const t = this.k;
        const e = this.cb;
        return null === t ? e() : e(this.c.get(t));
    }
}

const xe = Object.freeze({
    beforeCreate: ye("beforeCreate"),
    hydrating: ye("hydrating"),
    hydrated: ye("hydrated"),
    beforeActivate: ye("beforeActivate"),
    afterActivate: ye("afterActivate"),
    beforeDeactivate: ye("beforeDeactivate"),
    afterDeactivate: ye("afterDeactivate")
});

function ye(t) {
    function e(e, i) {
        if (Ct(i)) return new $AppTask(t, e, i);
        return new $AppTask(t, null, e);
    }
    return e;
}

function ke(t, e) {
    let i;
    function s(t, e) {
        if (arguments.length > 1) i.property = e;
        ct(Ae, ChildrenDefinition.create(e, i), t.constructor, e);
        pt(t.constructor, Se.keyFrom(e));
    }
    if (arguments.length > 1) {
        i = {};
        s(t, e);
        return;
    } else if (At(t)) {
        i = {};
        return s;
    }
    i = void 0 === t ? {} : t;
    return s;
}

function Ce(t) {
    return t.startsWith(Ae);
}

const Ae = dt("children-observer");

const Se = Object.freeze({
    name: Ae,
    keyFrom: t => `${Ae}:${t}`,
    from(...t) {
        const e = {};
        const i = Array.isArray;
        function s(t) {
            e[t] = ChildrenDefinition.create(t);
        }
        function n(t, i) {
            e[t] = ChildrenDefinition.create(t, i);
        }
        function r(t) {
            if (i(t)) t.forEach(s); else if (t instanceof ChildrenDefinition) e[t.property] = t; else if (void 0 !== t) Object.keys(t).forEach((e => n(e, t)));
        }
        t.forEach(r);
        return e;
    },
    getAll(t) {
        const e = Ae.length + 1;
        const i = [];
        const n = (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.getPrototypeChain)(t);
        let r = n.length;
        let o = 0;
        let l;
        let h;
        let a;
        while (--r >= 0) {
            a = n[r];
            l = gt(a).filter(Ce);
            h = l.length;
            for (let t = 0; t < h; ++t) i[o++] = ht(Ae, a, l[t].slice(e));
        }
        return i;
    }
});

const Re = {
    childList: true
};

class ChildrenDefinition {
    constructor(t, e, i, s, n, r) {
        this.callback = t;
        this.property = e;
        this.options = i;
        this.query = s;
        this.filter = n;
        this.map = r;
    }
    static create(t, e = {}) {
        var i;
        return new ChildrenDefinition((0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.firstDefined)(e.callback, `${t}Changed`), (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.firstDefined)(e.property, t), null !== (i = e.options) && void 0 !== i ? i : Re, e.query, e.filter, e.map);
    }
}

class ChildrenObserver {
    constructor(t, e, i, s, n = Ee, r = Be, o = Ie, l) {
        this.controller = t;
        this.obj = e;
        this.propertyKey = i;
        this.query = n;
        this.filter = r;
        this.map = o;
        this.options = l;
        this.observing = false;
        this.children = void 0;
        this.observer = void 0;
        this.callback = e[s];
        Reflect.defineProperty(this.obj, this.propertyKey, {
            enumerable: true,
            configurable: true,
            get: () => this.getValue(),
            set: () => {}
        });
    }
    getValue() {
        return this.observing ? this.children : this.get();
    }
    setValue(t) {}
    start() {
        var t;
        if (!this.observing) {
            this.observing = true;
            this.children = this.get();
            (null !== (t = this.observer) && void 0 !== t ? t : this.observer = new this.controller.host.ownerDocument.defaultView.MutationObserver((() => {
                this.Z();
            }))).observe(this.controller.host, this.options);
        }
    }
    stop() {
        if (this.observing) {
            this.observing = false;
            this.observer.disconnect();
            this.children = _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.emptyArray;
        }
    }
    Z() {
        this.children = this.get();
        if (void 0 !== this.callback) this.callback.call(this.obj);
        this.subs.notify(this.children, void 0, 0);
    }
    get() {
        return De(this.controller, this.query, this.filter, this.map);
    }
}

(0,_aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.subscriberCollection)()(ChildrenObserver);

function Ee(t) {
    return t.host.childNodes;
}

function Be(t, e, i) {
    return !!i;
}

function Ie(t, e, i) {
    return i;
}

const Te = {
    optional: true
};

function De(t, e, i, s) {
    var n;
    const r = e(t);
    const o = r.length;
    const l = [];
    let h;
    let a;
    let c;
    let u = 0;
    for (;u < o; ++u) {
        h = r[u];
        a = si.for(h, Te);
        c = null !== (n = null === a || void 0 === a ? void 0 : a.viewModel) && void 0 !== n ? n : null;
        if (i(h, a, c)) l.push(s(h, a, c));
    }
    return l;
}

function Pe(t) {
    return function(e) {
        return Me.define(t, e);
    };
}

function Oe(t) {
    return function(e) {
        return Me.define(At(t) ? {
            isTemplateController: true,
            name: t
        } : {
            isTemplateController: true,
            ...t
        }, e);
    };
}

class CustomAttributeDefinition {
    constructor(t, e, i, s, n, r, o, l, h) {
        this.Type = t;
        this.name = e;
        this.aliases = i;
        this.key = s;
        this.defaultBindingMode = n;
        this.isTemplateController = r;
        this.bindables = o;
        this.noMultiBindings = l;
        this.watches = h;
    }
    get type() {
        return 2;
    }
    static create(t, e) {
        let i;
        let s;
        if (At(t)) {
            i = t;
            s = {
                name: i
            };
        } else {
            i = t.name;
            s = t;
        }
        return new CustomAttributeDefinition(e, (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.firstDefined)(qe(e, "name"), i), (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.mergeArrays)(qe(e, "aliases"), s.aliases, e.aliases), Me.keyFrom(i), (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.firstDefined)(qe(e, "defaultBindingMode"), s.defaultBindingMode, e.defaultBindingMode, _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.BindingMode.toView), (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.firstDefined)(qe(e, "isTemplateController"), s.isTemplateController, e.isTemplateController, false), Bt.from(e, ...Bt.getAll(e), qe(e, "bindables"), e.bindables, s.bindables), (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.firstDefined)(qe(e, "noMultiBindings"), s.noMultiBindings, e.noMultiBindings, false), (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.mergeArrays)(_e.getAnnotation(e), e.watches));
    }
    register(t) {
        const {Type: e, key: i, aliases: s} = this;
        _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.Registration.transient(i, e).register(t);
        _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.Registration.aliasTo(i, e).register(t);
        (0,_aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.registerAliases)(s, Me, i, t);
    }
}

const $e = mt("custom-attribute");

const Le = t => `${$e}:${t}`;

const qe = (t, e) => ht(dt(e), t);

const Me = Object.freeze({
    name: $e,
    keyFrom: Le,
    isType(t) {
        return Ct(t) && at($e, t);
    },
    for(t, e) {
        var i;
        return null !== (i = is(t, Le(e))) && void 0 !== i ? i : void 0;
    },
    define(t, e) {
        const i = CustomAttributeDefinition.create(t, e);
        ct($e, i, i.Type);
        ct($e, i, i);
        vt(e, $e);
        return i.Type;
    },
    getDefinition(t) {
        const e = ht($e, t);
        if (void 0 === e) throw new Error(`AUR0759:${t.name}`);
        return e;
    },
    annotate(t, e, i) {
        ct(dt(e), i, t);
    },
    getAnnotation: qe
});

function Ue(t, e) {
    if (!t) throw new Error("AUR0772");
    return function i(s, n, r) {
        const o = null == n;
        const l = o ? s : s.constructor;
        const h = new WatchDefinition(t, o ? e : r.value);
        if (o) {
            if (!Ct(e) && (null == e || !(e in l.prototype))) throw new Error(`AUR0773:${String(e)}@${l.name}}`);
        } else if (!Ct(null === r || void 0 === r ? void 0 : r.value)) throw new Error(`AUR0774:${String(n)}`);
        _e.add(l, h);
        if (Me.isType(l)) Me.getDefinition(l).watches.push(h);
        if (si.isType(l)) si.getDefinition(l).watches.push(h);
    };
}

class WatchDefinition {
    constructor(t, e) {
        this.expression = t;
        this.callback = e;
    }
}

const Fe = _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.emptyArray;

const Ve = dt("watch");

const _e = Object.freeze({
    name: Ve,
    add(t, e) {
        let i = ht(Ve, t);
        if (null == i) ct(Ve, i = [], t);
        i.push(e);
    },
    getAnnotation(t) {
        var e;
        return null !== (e = ht(Ve, t)) && void 0 !== e ? e : Fe;
    }
});

function je(t) {
    return function(e) {
        return si.define(t, e);
    };
}

function Ne(t) {
    if (void 0 === t) return function(t) {
        ei(t, "shadowOptions", {
            mode: "open"
        });
    };
    if (!Ct(t)) return function(e) {
        ei(e, "shadowOptions", t);
    };
    ei(t, "shadowOptions", {
        mode: "open"
    });
}

function We(t) {
    if (void 0 === t) return function(t) {
        ei(t, "containerless", true);
    };
    ei(t, "containerless", true);
}

const He = new WeakMap;

class CustomElementDefinition {
    constructor(t, e, i, s, n, r, o, l, h, a, c, u, f, d, m, v, p, g, w, b, x) {
        this.Type = t;
        this.name = e;
        this.aliases = i;
        this.key = s;
        this.cache = n;
        this.capture = r;
        this.template = o;
        this.instructions = l;
        this.dependencies = h;
        this.injectable = a;
        this.needsCompile = c;
        this.surrogates = u;
        this.bindables = f;
        this.childrenObservers = d;
        this.containerless = m;
        this.isStrictBinding = v;
        this.shadowOptions = p;
        this.hasSlots = g;
        this.enhance = w;
        this.watches = b;
        this.processContent = x;
    }
    get type() {
        return 1;
    }
    static create(t, e = null) {
        if (null === e) {
            const i = t;
            if (At(i)) throw new Error(`AUR0761:${t}`);
            const s = (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.fromDefinitionOrDefault)("name", i, ti);
            if (Ct(i.Type)) e = i.Type; else e = si.generateType((0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.pascalCase)(s));
            return new CustomElementDefinition(e, s, (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.mergeArrays)(i.aliases), (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.fromDefinitionOrDefault)("key", i, (() => si.keyFrom(s))), (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.fromDefinitionOrDefault)("cache", i, Ge), (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.fromDefinitionOrDefault)("capture", i, Ke), (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.fromDefinitionOrDefault)("template", i, Xe), (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.mergeArrays)(i.instructions), (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.mergeArrays)(i.dependencies), (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.fromDefinitionOrDefault)("injectable", i, Xe), (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.fromDefinitionOrDefault)("needsCompile", i, Ye), (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.mergeArrays)(i.surrogates), Bt.from(e, i.bindables), Se.from(i.childrenObservers), (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.fromDefinitionOrDefault)("containerless", i, Ke), (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.fromDefinitionOrDefault)("isStrictBinding", i, Ke), (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.fromDefinitionOrDefault)("shadowOptions", i, Xe), (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.fromDefinitionOrDefault)("hasSlots", i, Ke), (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.fromDefinitionOrDefault)("enhance", i, Ke), (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.fromDefinitionOrDefault)("watches", i, Qe), (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.fromAnnotationOrTypeOrDefault)("processContent", e, Xe));
        }
        if (At(t)) return new CustomElementDefinition(e, t, (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.mergeArrays)(ii(e, "aliases"), e.aliases), si.keyFrom(t), (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.fromAnnotationOrTypeOrDefault)("cache", e, Ge), (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.fromAnnotationOrTypeOrDefault)("capture", e, Ke), (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.fromAnnotationOrTypeOrDefault)("template", e, Xe), (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.mergeArrays)(ii(e, "instructions"), e.instructions), (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.mergeArrays)(ii(e, "dependencies"), e.dependencies), (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.fromAnnotationOrTypeOrDefault)("injectable", e, Xe), (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.fromAnnotationOrTypeOrDefault)("needsCompile", e, Ye), (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.mergeArrays)(ii(e, "surrogates"), e.surrogates), Bt.from(e, ...Bt.getAll(e), ii(e, "bindables"), e.bindables), Se.from(...Se.getAll(e), ii(e, "childrenObservers"), e.childrenObservers), (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.fromAnnotationOrTypeOrDefault)("containerless", e, Ke), (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.fromAnnotationOrTypeOrDefault)("isStrictBinding", e, Ke), (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.fromAnnotationOrTypeOrDefault)("shadowOptions", e, Xe), (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.fromAnnotationOrTypeOrDefault)("hasSlots", e, Ke), (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.fromAnnotationOrTypeOrDefault)("enhance", e, Ke), (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.mergeArrays)(_e.getAnnotation(e), e.watches), (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.fromAnnotationOrTypeOrDefault)("processContent", e, Xe));
        const i = (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.fromDefinitionOrDefault)("name", t, ti);
        return new CustomElementDefinition(e, i, (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.mergeArrays)(ii(e, "aliases"), t.aliases, e.aliases), si.keyFrom(i), (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.fromAnnotationOrDefinitionOrTypeOrDefault)("cache", t, e, Ge), (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.fromAnnotationOrDefinitionOrTypeOrDefault)("capture", t, e, Ke), (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.fromAnnotationOrDefinitionOrTypeOrDefault)("template", t, e, Xe), (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.mergeArrays)(ii(e, "instructions"), t.instructions, e.instructions), (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.mergeArrays)(ii(e, "dependencies"), t.dependencies, e.dependencies), (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.fromAnnotationOrDefinitionOrTypeOrDefault)("injectable", t, e, Xe), (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.fromAnnotationOrDefinitionOrTypeOrDefault)("needsCompile", t, e, Ye), (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.mergeArrays)(ii(e, "surrogates"), t.surrogates, e.surrogates), Bt.from(e, ...Bt.getAll(e), ii(e, "bindables"), e.bindables, t.bindables), Se.from(...Se.getAll(e), ii(e, "childrenObservers"), e.childrenObservers, t.childrenObservers), (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.fromAnnotationOrDefinitionOrTypeOrDefault)("containerless", t, e, Ke), (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.fromAnnotationOrDefinitionOrTypeOrDefault)("isStrictBinding", t, e, Ke), (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.fromAnnotationOrDefinitionOrTypeOrDefault)("shadowOptions", t, e, Xe), (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.fromAnnotationOrDefinitionOrTypeOrDefault)("hasSlots", t, e, Ke), (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.fromAnnotationOrDefinitionOrTypeOrDefault)("enhance", t, e, Ke), (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.mergeArrays)(t.watches, _e.getAnnotation(e), e.watches), (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.fromAnnotationOrDefinitionOrTypeOrDefault)("processContent", t, e, Xe));
    }
    static getOrCreate(t) {
        if (t instanceof CustomElementDefinition) return t;
        if (He.has(t)) return He.get(t);
        const e = CustomElementDefinition.create(t);
        He.set(t, e);
        ct(Ze, e, e.Type);
        return e;
    }
    register(t) {
        const {Type: e, key: i, aliases: s} = this;
        if (!t.has(i, false)) {
            _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.Registration.transient(i, e).register(t);
            _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.Registration.aliasTo(i, e).register(t);
            (0,_aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.registerAliases)(s, si, i, t);
        }
    }
}

const ze = {
    name: void 0,
    searchParents: false,
    optional: false
};

const Ge = () => 0;

const Xe = () => null;

const Ke = () => false;

const Ye = () => true;

const Qe = () => _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.emptyArray;

const Ze = mt("custom-element");

const Je = t => `${Ze}:${t}`;

const ti = (() => {
    let t = 0;
    return () => `unnamed-${++t}`;
})();

const ei = (t, e, i) => {
    ct(dt(e), i, t);
};

const ii = (t, e) => ht(dt(e), t);

const si = Object.freeze({
    name: Ze,
    keyFrom: Je,
    isType(t) {
        return Ct(t) && at(Ze, t);
    },
    for(t, e = ze) {
        if (void 0 === e.name && true !== e.searchParents) {
            const i = is(t, Ze);
            if (null === i) {
                if (true === e.optional) return null;
                throw new Error("AUR0762");
            }
            return i;
        }
        if (void 0 !== e.name) {
            if (true !== e.searchParents) {
                const i = is(t, Ze);
                if (null === i) throw new Error("AUR0763");
                if (i.is(e.name)) return i;
                return;
            }
            let i = t;
            let s = false;
            while (null !== i) {
                const t = is(i, Ze);
                if (null !== t) {
                    s = true;
                    if (t.is(e.name)) return t;
                }
                i = as(i);
            }
            if (s) return;
            throw new Error("AUR0764");
        }
        let i = t;
        while (null !== i) {
            const t = is(i, Ze);
            if (null !== t) return t;
            i = as(i);
        }
        throw new Error("AUR0765");
    },
    define(t, e) {
        const i = CustomElementDefinition.create(t, e);
        ct(Ze, i, i.Type);
        ct(Ze, i, i);
        vt(i.Type, Ze);
        return i.Type;
    },
    getDefinition(t) {
        const e = ht(Ze, t);
        if (void 0 === e) throw new Error(`AUR0760:${t.name}`);
        return e;
    },
    annotate: ei,
    getAnnotation: ii,
    generateName: ti,
    createInjectable() {
        const t = function(e, i, s) {
            const n = _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.DI.getOrCreateAnnotationParamTypes(e);
            n[s] = t;
            return e;
        };
        t.register = function(e) {
            return {
                resolve(e, i) {
                    if (i.has(t, true)) return i.get(t); else return null;
                }
            };
        };
        return t;
    },
    generateType: function() {
        const t = {
            value: "",
            writable: false,
            enumerable: false,
            configurable: true
        };
        const e = {};
        return function(i, s = e) {
            const n = class {};
            t.value = i;
            Reflect.defineProperty(n, "name", t);
            if (s !== e) Object.assign(n.prototype, s);
            return n;
        };
    }()
});

const ni = dt("processContent");

function ri(t) {
    return void 0 === t ? function(t, e, i) {
        ct(ni, oi(t, e), t);
    } : function(e) {
        t = oi(e, t);
        const i = ht(Ze, e);
        if (void 0 !== i) i.processContent = t; else ct(ni, t, e);
        return e;
    };
}

function oi(t, e) {
    if (At(e)) e = t[e];
    if (!Ct(e)) throw new Error(`AUR0766:${typeof e}`);
    return e;
}

class ClassAttributeAccessor {
    constructor(t) {
        this.obj = t;
        this.type = 2 | 4;
        this.value = "";
        this.ov = "";
        this.J = {};
        this.tt = 0;
        this.H = false;
    }
    get doNotCache() {
        return true;
    }
    getValue() {
        return this.value;
    }
    setValue(t, e) {
        this.value = t;
        this.H = t !== this.ov;
        if (0 === (256 & e)) this.K();
    }
    K() {
        if (this.H) {
            this.H = false;
            const t = this.value;
            const e = this.J;
            const i = li(t);
            let s = this.tt;
            this.ov = t;
            if (i.length > 0) this.et(i);
            this.tt += 1;
            if (0 === s) return;
            s -= 1;
            for (const t in e) {
                if (!Object.prototype.hasOwnProperty.call(e, t) || e[t] !== s) continue;
                this.obj.classList.remove(t);
            }
        }
    }
    et(t) {
        const e = this.obj;
        const i = t.length;
        let s = 0;
        let n;
        for (;s < i; s++) {
            n = t[s];
            if (0 === n.length) continue;
            this.J[n] = this.tt;
            e.classList.add(n);
        }
    }
}

function li(t) {
    if (At(t)) return hi(t);
    if ("object" !== typeof t) return _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.emptyArray;
    if (t instanceof Array) {
        const e = t.length;
        if (e > 0) {
            const i = [];
            let s = 0;
            for (;e > s; ++s) i.push(...li(t[s]));
            return i;
        } else return _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.emptyArray;
    }
    const e = [];
    let i;
    for (i in t) if (Boolean(t[i])) if (i.includes(" ")) e.push(...hi(i)); else e.push(i);
    return e;
}

function hi(t) {
    const e = t.match(/\S+/g);
    if (null === e) return _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.emptyArray;
    return e;
}

function ai(...t) {
    return new CSSModulesProcessorRegistry(t);
}

class CSSModulesProcessorRegistry {
    constructor(t) {
        this.modules = t;
    }
    register(t) {
        var e;
        const i = Object.assign({}, ...this.modules);
        const s = Me.define({
            name: "class",
            bindables: [ "value" ]
        }, (e = class CustomAttributeClass {
            constructor(t) {
                this.element = t;
            }
            binding() {
                this.valueChanged();
            }
            valueChanged() {
                if (!this.value) {
                    this.element.className = "";
                    return;
                }
                this.element.className = li(this.value).map((t => i[t] || t)).join(" ");
            }
        }, e.inject = [ ns ], e));
        t.register(s);
    }
}

function ci(...t) {
    return new ShadowDOMRegistry(t);
}

const ui = _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.DI.createInterface("IShadowDOMStyleFactory", (t => t.cachedCallback((t => {
    if (AdoptedStyleSheetsStyles.supported(t.get(Kt))) return t.get(AdoptedStyleSheetsStylesFactory);
    return t.get(StyleElementStylesFactory);
}))));

class ShadowDOMRegistry {
    constructor(t) {
        this.css = t;
    }
    register(t) {
        const e = t.get(di);
        const i = t.get(ui);
        t.register(_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.Registration.instance(fi, i.createStyles(this.css, e)));
    }
}

class AdoptedStyleSheetsStylesFactory {
    constructor(t) {
        this.p = t;
        this.cache = new Map;
    }
    createStyles(t, e) {
        return new AdoptedStyleSheetsStyles(this.p, t, this.cache, e);
    }
}

AdoptedStyleSheetsStylesFactory.inject = [ Kt ];

class StyleElementStylesFactory {
    constructor(t) {
        this.p = t;
    }
    createStyles(t, e) {
        return new StyleElementStyles(this.p, t, e);
    }
}

StyleElementStylesFactory.inject = [ Kt ];

const fi = _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.DI.createInterface("IShadowDOMStyles");

const di = _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.DI.createInterface("IShadowDOMGlobalStyles", (t => t.instance({
    applyTo: _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.noop
})));

class AdoptedStyleSheetsStyles {
    constructor(t, e, i, s = null) {
        this.sharedStyles = s;
        this.styleSheets = e.map((e => {
            let s;
            if (e instanceof t.CSSStyleSheet) s = e; else {
                s = i.get(e);
                if (void 0 === s) {
                    s = new t.CSSStyleSheet;
                    s.replaceSync(e);
                    i.set(e, s);
                }
            }
            return s;
        }));
    }
    static supported(t) {
        return "adoptedStyleSheets" in t.ShadowRoot.prototype;
    }
    applyTo(t) {
        if (null !== this.sharedStyles) this.sharedStyles.applyTo(t);
        t.adoptedStyleSheets = [ ...t.adoptedStyleSheets, ...this.styleSheets ];
    }
}

class StyleElementStyles {
    constructor(t, e, i = null) {
        this.p = t;
        this.localStyles = e;
        this.sharedStyles = i;
    }
    applyTo(t) {
        const e = this.localStyles;
        const i = this.p;
        for (let s = e.length - 1; s > -1; --s) {
            const n = i.document.createElement("style");
            n.innerHTML = e[s];
            t.prepend(n);
        }
        if (null !== this.sharedStyles) this.sharedStyles.applyTo(t);
    }
}

const mi = {
    shadowDOM(t) {
        return xe.beforeCreate(_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.IContainer, (e => {
            if (null != t.sharedStyles) {
                const i = e.get(ui);
                e.register(_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.Registration.instance(di, i.createStyles(t.sharedStyles, null)));
            }
        }));
    }
};

const {enter: vi, exit: pi} = _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.ConnectableSwitcher;

const {wrap: gi, unwrap: wi} = _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.ProxyObservable;

class ComputedWatcher {
    constructor(t, e, i, s, n) {
        this.obj = t;
        this.get = i;
        this.cb = s;
        this.useProxy = n;
        this.interceptor = this;
        this.value = void 0;
        this.isBound = false;
        this.running = false;
        this.oL = e;
    }
    handleChange() {
        this.run();
    }
    handleCollectionChange() {
        this.run();
    }
    $bind() {
        if (this.isBound) return;
        this.isBound = true;
        this.compute();
    }
    $unbind() {
        if (!this.isBound) return;
        this.isBound = false;
        this.obs.clearAll();
    }
    run() {
        if (!this.isBound || this.running) return;
        const t = this.obj;
        const e = this.value;
        const i = this.compute();
        if (!Object.is(i, e)) this.cb.call(t, i, e, t);
    }
    compute() {
        this.running = true;
        this.obs.version++;
        try {
            vi(this);
            return this.value = wi(this.get.call(void 0, this.useProxy ? gi(this.obj) : this.obj, this));
        } finally {
            this.obs.clear();
            this.running = false;
            pi(this);
        }
    }
}

class ExpressionWatcher {
    constructor(t, e, i, s, n) {
        this.scope = t;
        this.locator = e;
        this.oL = i;
        this.expression = s;
        this.callback = n;
        this.interceptor = this;
        this.isBound = false;
        this.obj = t.bindingContext;
    }
    handleChange(t) {
        const e = this.expression;
        const i = this.obj;
        const s = this.value;
        const n = 10082 === e.$kind && 1 === this.obs.count;
        if (!n) {
            this.obs.version++;
            t = e.evaluate(0, this.scope, this.locator, this);
            this.obs.clear();
        }
        if (!Object.is(t, s)) {
            this.value = t;
            this.callback.call(i, t, s, i);
        }
    }
    $bind() {
        if (this.isBound) return;
        this.isBound = true;
        this.obs.version++;
        this.value = this.expression.evaluate(0, this.scope, this.locator, this);
        this.obs.clear();
    }
    $unbind() {
        if (!this.isBound) return;
        this.isBound = false;
        this.obs.clearAll();
        this.value = void 0;
    }
}

(0,_aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.connectable)(ComputedWatcher);

(0,_aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.connectable)(ExpressionWatcher);

const bi = _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.DI.createInterface("ILifecycleHooks");

class LifecycleHooksEntry {
    constructor(t, e) {
        this.definition = t;
        this.instance = e;
    }
}

class LifecycleHooksDefinition {
    constructor(t, e) {
        this.Type = t;
        this.propertyNames = e;
    }
    static create(t, e) {
        const i = new Set;
        let s = e.prototype;
        while (s !== Object.prototype) {
            for (const t of Object.getOwnPropertyNames(s)) if ("constructor" !== t) i.add(t);
            s = Object.getPrototypeOf(s);
        }
        return new LifecycleHooksDefinition(e, i);
    }
    register(t) {
        _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.Registration.singleton(bi, this.Type).register(t);
    }
}

const xi = new WeakMap;

const yi = dt("lifecycle-hooks");

const ki = Object.freeze({
    name: yi,
    define(t, e) {
        const i = LifecycleHooksDefinition.create(t, e);
        ct(yi, i, e);
        vt(e, yi);
        return i.Type;
    },
    resolve(t) {
        let e = xi.get(t);
        if (void 0 === e) {
            e = new LifecycleHooksLookupImpl;
            const i = t.root;
            const s = i.id === t.id ? t.getAll(bi) : t.has(bi, false) ? [ ...i.getAll(bi), ...t.getAll(bi) ] : i.getAll(bi);
            let n;
            let r;
            let o;
            let l;
            let h;
            for (n of s) {
                r = ht(yi, n.constructor);
                o = new LifecycleHooksEntry(r, n);
                for (l of r.propertyNames) {
                    h = e[l];
                    if (void 0 === h) e[l] = [ o ]; else h.push(o);
                }
            }
        }
        return e;
    }
});

class LifecycleHooksLookupImpl {}

function Ci() {
    return function t(e) {
        return ki.define({}, e);
    };
}

const Ai = _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.DI.createInterface("IViewFactory");

class ViewFactory {
    constructor(t, e) {
        this.isCaching = false;
        this.cache = null;
        this.cacheSize = -1;
        this.name = e.name;
        this.container = t;
        this.def = e;
    }
    setCacheSize(t, e) {
        if (t) {
            if ("*" === t) t = ViewFactory.maxCacheSize; else if (At(t)) t = parseInt(t, 10);
            if (-1 === this.cacheSize || !e) this.cacheSize = t;
        }
        if (this.cacheSize > 0) this.cache = []; else this.cache = null;
        this.isCaching = this.cacheSize > 0;
    }
    canReturnToCache(t) {
        return null != this.cache && this.cache.length < this.cacheSize;
    }
    tryReturnToCache(t) {
        if (this.canReturnToCache(t)) {
            this.cache.push(t);
            return true;
        }
        return false;
    }
    create(t) {
        const e = this.cache;
        let i;
        if (null != e && e.length > 0) {
            i = e.pop();
            return i;
        }
        i = Controller.$view(this, t);
        return i;
    }
}

ViewFactory.maxCacheSize = 65535;

const Si = new WeakSet;

function Ri(t) {
    return !Si.has(t);
}

function Ei(t) {
    Si.add(t);
    return CustomElementDefinition.create(t);
}

const Bi = mt("views");

const Ii = Object.freeze({
    name: Bi,
    has(t) {
        return Ct(t) && (at(Bi, t) || "$views" in t);
    },
    get(t) {
        if (Ct(t) && "$views" in t) {
            const e = t.$views;
            const i = e.filter(Ri).map(Ei);
            for (const e of i) Ii.add(t, e);
        }
        let e = ht(Bi, t);
        if (void 0 === e) ct(Bi, e = [], t);
        return e;
    },
    add(t, e) {
        const i = CustomElementDefinition.create(e);
        let s = ht(Bi, t);
        if (void 0 === s) ct(Bi, s = [ i ], t); else s.push(i);
        return s;
    }
});

function Ti(t) {
    return function(e) {
        Ii.add(e, t);
    };
}

const Di = _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.DI.createInterface("IViewLocator", (t => t.singleton(ViewLocator)));

class ViewLocator {
    constructor() {
        this.it = new WeakMap;
        this.st = new Map;
    }
    getViewComponentForObject(t, e) {
        if (t) {
            const i = Ii.has(t.constructor) ? Ii.get(t.constructor) : [];
            const s = Ct(e) ? e(t, i) : this.nt(i, e);
            return this.rt(t, i, s);
        }
        return null;
    }
    rt(t, e, i) {
        let s = this.it.get(t);
        let n;
        if (void 0 === s) {
            s = {};
            this.it.set(t, s);
        } else n = s[i];
        if (void 0 === n) {
            const r = this.ot(t, e, i);
            n = si.define(si.getDefinition(r), class extends r {
                constructor() {
                    super(t);
                }
            });
            s[i] = n;
        }
        return n;
    }
    ot(t, e, i) {
        let s = this.st.get(t.constructor);
        let n;
        if (void 0 === s) {
            s = {};
            this.st.set(t.constructor, s);
        } else n = s[i];
        if (void 0 === n) {
            n = si.define(this.lt(e, i), class {
                constructor(t) {
                    this.viewModel = t;
                }
                define(t, e, i) {
                    const s = this.viewModel;
                    t.scope = _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.Scope.fromParent(t.scope, s);
                    if (void 0 !== s.define) return s.define(t, e, i);
                }
            });
            const r = n.prototype;
            if ("hydrating" in t) r.hydrating = function t(e) {
                this.viewModel.hydrating(e);
            };
            if ("hydrated" in t) r.hydrated = function t(e) {
                this.viewModel.hydrated(e);
            };
            if ("created" in t) r.created = function t(e) {
                this.viewModel.created(e);
            };
            if ("binding" in t) r.binding = function t(e, i, s) {
                return this.viewModel.binding(e, i, s);
            };
            if ("bound" in t) r.bound = function t(e, i, s) {
                return this.viewModel.bound(e, i, s);
            };
            if ("attaching" in t) r.attaching = function t(e, i, s) {
                return this.viewModel.attaching(e, i, s);
            };
            if ("attached" in t) r.attached = function t(e, i) {
                return this.viewModel.attached(e, i);
            };
            if ("detaching" in t) r.detaching = function t(e, i, s) {
                return this.viewModel.detaching(e, i, s);
            };
            if ("unbinding" in t) r.unbinding = function t(e, i, s) {
                return this.viewModel.unbinding(e, i, s);
            };
            if ("dispose" in t) r.dispose = function t() {
                this.viewModel.dispose();
            };
            s[i] = n;
        }
        return n;
    }
    nt(t, e) {
        if (e) return e;
        if (1 === t.length) return t[0].name;
        return "default-view";
    }
    lt(t, e) {
        const i = t.find((t => t.name === e));
        if (void 0 === i) throw new Error(`Could not find view: ${e}`);
        return i;
    }
}

const Pi = _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.DI.createInterface("IRendering", (t => t.singleton(Rendering)));

class Rendering {
    constructor(t) {
        this.ht = new WeakMap;
        this.at = new WeakMap;
        this.ct = (this.ut = t.root).get(Kt);
        this.ft = new FragmentNodeSequence(this.ct, this.ct.document.createDocumentFragment());
    }
    get renderers() {
        return null == this.rs ? this.rs = this.ut.getAll(Ss, false).reduce(((t, e) => {
            t[e.instructionType] = e;
            return t;
        }), wt()) : this.rs;
    }
    compile(t, e, i) {
        if (false !== t.needsCompile) {
            const s = this.ht;
            const n = e.get(As);
            let r = s.get(t);
            if (null == r) s.set(t, r = n.compile(t, e, i)); else e.register(...r.dependencies);
            return r;
        }
        return t;
    }
    getViewFactory(t, e) {
        return new ViewFactory(e, CustomElementDefinition.getOrCreate(t));
    }
    createNodes(t) {
        if (true === t.enhance) return new FragmentNodeSequence(this.ct, t.template);
        let e;
        const i = this.at;
        if (i.has(t)) e = i.get(t); else {
            const s = this.ct;
            const n = s.document;
            const r = t.template;
            let o;
            if (null === r) e = null; else if (r instanceof s.Node) if ("TEMPLATE" === r.nodeName) e = n.adoptNode(r.content); else (e = n.adoptNode(n.createDocumentFragment())).appendChild(r.cloneNode(true)); else {
                o = n.createElement("template");
                if (At(r)) o.innerHTML = r;
                n.adoptNode(e = o.content);
            }
            i.set(t, e);
        }
        return null == e ? this.ft : new FragmentNodeSequence(this.ct, e.cloneNode(true));
    }
    render(t, e, i, s) {
        const n = i.instructions;
        const r = this.renderers;
        const o = e.length;
        if (e.length !== n.length) throw new Error(`AUR0757:${o}<>${n.length}`);
        let l = 0;
        let h = 0;
        let a = 0;
        let c;
        let u;
        let f;
        if (o > 0) while (o > l) {
            c = n[l];
            f = e[l];
            h = 0;
            a = c.length;
            while (a > h) {
                u = c[h];
                r[u.type].render(t, f, u);
                ++h;
            }
            ++l;
        }
        if (void 0 !== s && null !== s) {
            c = i.surrogates;
            if ((a = c.length) > 0) {
                h = 0;
                while (a > h) {
                    u = c[h];
                    r[u.type].render(t, s, u);
                    ++h;
                }
            }
        }
    }
}

Rendering.inject = [ _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.IContainer ];

var Oi;

(function(t) {
    t[t["none"] = 0] = "none";
    t[t["host"] = 1] = "host";
    t[t["shadowRoot"] = 2] = "shadowRoot";
    t[t["location"] = 3] = "location";
})(Oi || (Oi = {}));

const $i = {
    optional: true
};

const Li = new WeakMap;

class Controller {
    constructor(t, e, i, s, n, r) {
        this.container = t;
        this.vmKind = e;
        this.definition = i;
        this.viewFactory = s;
        this.viewModel = n;
        this.host = r;
        this.id = (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.nextId)("au$component");
        this.head = null;
        this.tail = null;
        this.next = null;
        this.parent = null;
        this.bindings = null;
        this.children = null;
        this.hasLockedScope = false;
        this.isStrictBinding = false;
        this.scope = null;
        this.isBound = false;
        this.hostController = null;
        this.mountTarget = 0;
        this.shadowRoot = null;
        this.nodes = null;
        this.location = null;
        this.lifecycleHooks = null;
        this.state = 0;
        this.dt = false;
        this.vt = _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.emptyArray;
        this.flags = 0;
        this.$initiator = null;
        this.$flags = 0;
        this.$resolve = void 0;
        this.$reject = void 0;
        this.$promise = void 0;
        this.gt = 0;
        this.wt = 0;
        this.bt = 0;
        this.r = t.root.get(Pi);
        switch (e) {
          case 1:
          case 0:
            this.hooks = new HooksDefinition(n);
            break;

          case 2:
            this.hooks = HooksDefinition.none;
            break;
        }
    }
    get isActive() {
        return (this.state & (1 | 2)) > 0 && 0 === (4 & this.state);
    }
    get name() {
        var t;
        if (null === this.parent) switch (this.vmKind) {
          case 1:
            return `[${this.definition.name}]`;

          case 0:
            return this.definition.name;

          case 2:
            return this.viewFactory.name;
        }
        switch (this.vmKind) {
          case 1:
            return `${this.parent.name}>[${this.definition.name}]`;

          case 0:
            return `${this.parent.name}>${this.definition.name}`;

          case 2:
            return this.viewFactory.name === (null === (t = this.parent.definition) || void 0 === t ? void 0 : t.name) ? `${this.parent.name}[view]` : `${this.parent.name}[view:${this.viewFactory.name}]`;
        }
    }
    static getCached(t) {
        return Li.get(t);
    }
    static getCachedOrThrow(t) {
        const e = Controller.getCached(t);
        if (void 0 === e) throw new Error(`AUR0500:${t}`);
        return e;
    }
    static $el(t, e, i, s, n = void 0) {
        if (Li.has(e)) return Li.get(e);
        n = null !== n && void 0 !== n ? n : si.getDefinition(e.constructor);
        const r = new Controller(t, 0, n, null, e, i);
        const o = t.get((0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.optional)(Ki));
        if (n.dependencies.length > 0) t.register(...n.dependencies);
        t.registerResolver(Ki, new _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.InstanceProvider("IHydrationContext", new HydrationContext(r, s, o)));
        Li.set(e, r);
        if (null == s || false !== s.hydrate) r.xt(s, o);
        return r;
    }
    static $attr(t, e, i, s) {
        if (Li.has(e)) return Li.get(e);
        s = null !== s && void 0 !== s ? s : Me.getDefinition(e.constructor);
        const n = new Controller(t, 1, s, null, e, i);
        Li.set(e, n);
        n.yt();
        return n;
    }
    static $view(t, e = void 0) {
        const i = new Controller(t.container, 2, null, t, null, null);
        i.parent = null !== e && void 0 !== e ? e : null;
        i.kt();
        return i;
    }
    xt(t, e) {
        const i = this.container;
        const s = this.flags;
        const n = this.viewModel;
        let r = this.definition;
        this.scope = _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.Scope.create(n, null, true);
        if (r.watches.length > 0) _i(this, i, r, n);
        Mi(this, r, s, n);
        this.vt = Ui(this, r, n);
        if (this.hooks.hasDefine) {
            const t = n.define(this, e, r);
            if (void 0 !== t && t !== r) r = CustomElementDefinition.getOrCreate(t);
        }
        this.lifecycleHooks = ki.resolve(i);
        r.register(i);
        if (null !== r.injectable) i.registerResolver(r.injectable, new _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.InstanceProvider("definition.injectable", n));
        if (null == t || false !== t.hydrate) {
            this.Ct(t);
            this.At();
        }
    }
    Ct(t) {
        if (this.hooks.hasHydrating) this.viewModel.hydrating(this);
        const e = this.St = this.r.compile(this.definition, this.container, t);
        const {shadowOptions: i, isStrictBinding: s, hasSlots: n, containerless: r} = e;
        this.isStrictBinding = s;
        if (null !== (this.hostController = si.for(this.host, $i))) this.host = this.container.root.get(Kt).document.createElement(this.definition.name);
        ss(this.host, si.name, this);
        ss(this.host, this.definition.key, this);
        if (null !== i || n) {
            if (r) throw new Error("AUR0501");
            ss(this.shadowRoot = this.host.attachShadow(null !== i && void 0 !== i ? i : Wi), si.name, this);
            ss(this.shadowRoot, this.definition.key, this);
            this.mountTarget = 2;
        } else if (r) {
            ss(this.location = us(this.host), si.name, this);
            ss(this.location, this.definition.key, this);
            this.mountTarget = 3;
        } else this.mountTarget = 1;
        this.viewModel.$controller = this;
        this.nodes = this.r.createNodes(e);
        if (this.hooks.hasHydrated) this.viewModel.hydrated(this);
    }
    At() {
        this.r.render(this, this.nodes.findTargets(), this.St, this.host);
        if (this.hooks.hasCreated) this.viewModel.created(this);
    }
    yt() {
        const t = this.definition;
        const e = this.viewModel;
        if (t.watches.length > 0) _i(this, this.container, t, e);
        Mi(this, t, this.flags, e);
        e.$controller = this;
        this.lifecycleHooks = ki.resolve(this.container);
        if (this.hooks.hasCreated) this.viewModel.created(this);
    }
    kt() {
        this.St = this.r.compile(this.viewFactory.def, this.container, null);
        this.isStrictBinding = this.St.isStrictBinding;
        this.r.render(this, (this.nodes = this.r.createNodes(this.St)).findTargets(), this.St, void 0);
    }
    activate(t, e, i, s) {
        switch (this.state) {
          case 0:
          case 8:
            if (!(null === e || e.isActive)) return;
            this.state = 1;
            break;

          case 2:
            return;

          case 32:
            throw new Error(`AUR0502:${this.name}`);

          default:
            throw new Error(`AUR0503:${this.name} ${Gi(this.state)}`);
        }
        this.parent = e;
        i |= 2;
        switch (this.vmKind) {
          case 0:
            this.scope.parentScope = null !== s && void 0 !== s ? s : null;
            break;

          case 1:
            this.scope = null !== s && void 0 !== s ? s : null;
            break;

          case 2:
            if (void 0 === s || null === s) throw new Error("AUR0504");
            if (!this.hasLockedScope) this.scope = s;
            break;
        }
        if (this.isStrictBinding) i |= 1;
        this.$initiator = t;
        this.$flags = i;
        this.Rt();
        if (this.hooks.hasBinding) {
            const t = this.viewModel.binding(this.$initiator, this.parent, this.$flags);
            if (t instanceof Promise) {
                this.Et();
                t.then((() => {
                    this.bind();
                })).catch((t => {
                    this.Bt(t);
                }));
                return this.$promise;
            }
        }
        this.bind();
        return this.$promise;
    }
    bind() {
        let t = 0;
        let e = this.vt.length;
        let i;
        if (e > 0) while (e > t) {
            this.vt[t].start();
            ++t;
        }
        if (null !== this.bindings) {
            t = 0;
            e = this.bindings.length;
            while (e > t) {
                this.bindings[t].$bind(this.$flags, this.scope);
                ++t;
            }
        }
        if (this.hooks.hasBound) {
            i = this.viewModel.bound(this.$initiator, this.parent, this.$flags);
            if (i instanceof Promise) {
                this.Et();
                i.then((() => {
                    this.isBound = true;
                    this.It();
                })).catch((t => {
                    this.Bt(t);
                }));
                return;
            }
        }
        this.isBound = true;
        this.It();
    }
    Tt(...t) {
        switch (this.mountTarget) {
          case 1:
            this.host.append(...t);
            break;

          case 2:
            this.shadowRoot.append(...t);
            break;

          case 3:
            {
                let e = 0;
                for (;e < t.length; ++e) this.location.parentNode.insertBefore(t[e], this.location);
                break;
            }
        }
    }
    It() {
        if (null !== this.hostController) switch (this.mountTarget) {
          case 1:
          case 2:
            this.hostController.Tt(this.host);
            break;

          case 3:
            this.hostController.Tt(this.location.$start, this.location);
            break;
        }
        switch (this.mountTarget) {
          case 1:
            this.nodes.appendTo(this.host, null != this.definition && this.definition.enhance);
            break;

          case 2:
            {
                const t = this.container;
                const e = t.has(fi, false) ? t.get(fi) : t.get(di);
                e.applyTo(this.shadowRoot);
                this.nodes.appendTo(this.shadowRoot);
                break;
            }

          case 3:
            this.nodes.insertBefore(this.location);
            break;
        }
        if (this.hooks.hasAttaching) {
            const t = this.viewModel.attaching(this.$initiator, this.parent, this.$flags);
            if (t instanceof Promise) {
                this.Et();
                this.Rt();
                t.then((() => {
                    this.Dt();
                })).catch((t => {
                    this.Bt(t);
                }));
            }
        }
        if (null !== this.children) {
            let t = 0;
            for (;t < this.children.length; ++t) void this.children[t].activate(this.$initiator, this, this.$flags, this.scope);
        }
        this.Dt();
    }
    deactivate(t, e, i) {
        switch (~16 & this.state) {
          case 2:
            this.state = 4;
            break;

          case 0:
          case 8:
          case 32:
          case 8 | 32:
            return;

          default:
            throw new Error(`AUR0505:${this.name} ${Gi(this.state)}`);
        }
        this.$initiator = t;
        this.$flags = i;
        if (t === this) this.Pt();
        let s = 0;
        if (this.vt.length) for (;s < this.vt.length; ++s) this.vt[s].stop();
        if (null !== this.children) for (s = 0; s < this.children.length; ++s) void this.children[s].deactivate(t, this, i);
        if (this.hooks.hasDetaching) {
            const e = this.viewModel.detaching(this.$initiator, this.parent, this.$flags);
            if (e instanceof Promise) {
                this.Et();
                t.Pt();
                e.then((() => {
                    t.Ot();
                })).catch((e => {
                    t.Bt(e);
                }));
            }
        }
        if (null === t.head) t.head = this; else t.tail.next = this;
        t.tail = this;
        if (t !== this) return;
        this.Ot();
        return this.$promise;
    }
    removeNodes() {
        switch (this.vmKind) {
          case 0:
          case 2:
            this.nodes.remove();
            this.nodes.unlink();
        }
        if (null !== this.hostController) switch (this.mountTarget) {
          case 1:
          case 2:
            this.host.remove();
            break;

          case 3:
            this.location.$start.remove();
            this.location.remove();
            break;
        }
    }
    unbind() {
        const t = 4 | this.$flags;
        let e = 0;
        if (null !== this.bindings) for (;e < this.bindings.length; ++e) this.bindings[e].$unbind(t);
        this.parent = null;
        switch (this.vmKind) {
          case 1:
            this.scope = null;
            break;

          case 2:
            if (!this.hasLockedScope) this.scope = null;
            if (16 === (16 & this.state) && !this.viewFactory.tryReturnToCache(this) && this.$initiator === this) this.dispose();
            break;

          case 0:
            this.scope.parentScope = null;
            break;
        }
        if (32 === (32 & t) && this.$initiator === this) this.dispose();
        this.state = 32 & this.state | 8;
        this.$initiator = null;
        this.$t();
    }
    Et() {
        if (void 0 === this.$promise) {
            this.$promise = new Promise(((t, e) => {
                this.$resolve = t;
                this.$reject = e;
            }));
            if (this.$initiator !== this) this.parent.Et();
        }
    }
    $t() {
        if (void 0 !== this.$promise) {
            Qi = this.$resolve;
            this.$resolve = this.$reject = this.$promise = void 0;
            Qi();
            Qi = void 0;
        }
    }
    Bt(t) {
        if (void 0 !== this.$promise) {
            Zi = this.$reject;
            this.$resolve = this.$reject = this.$promise = void 0;
            Zi(t);
            Zi = void 0;
        }
        if (this.$initiator !== this) this.parent.Bt(t);
    }
    Rt() {
        ++this.gt;
        if (this.$initiator !== this) this.parent.Rt();
    }
    Dt() {
        if (0 === --this.gt) {
            if (this.hooks.hasAttached) {
                Ji = this.viewModel.attached(this.$initiator, this.$flags);
                if (Ji instanceof Promise) {
                    this.Et();
                    Ji.then((() => {
                        this.state = 2;
                        this.$t();
                        if (this.$initiator !== this) this.parent.Dt();
                    })).catch((t => {
                        this.Bt(t);
                    }));
                    Ji = void 0;
                    return;
                }
                Ji = void 0;
            }
            this.state = 2;
            this.$t();
        }
        if (this.$initiator !== this) this.parent.Dt();
    }
    Pt() {
        ++this.wt;
    }
    Ot() {
        if (0 === --this.wt) {
            this.Lt();
            this.removeNodes();
            let t = this.$initiator.head;
            while (null !== t) {
                if (t !== this) {
                    if (t.debug) t.logger.trace(`detach()`);
                    t.removeNodes();
                }
                if (t.hooks.hasUnbinding) {
                    if (t.debug) t.logger.trace("unbinding()");
                    Ji = t.viewModel.unbinding(t.$initiator, t.parent, t.$flags);
                    if (Ji instanceof Promise) {
                        this.Et();
                        this.Lt();
                        Ji.then((() => {
                            this.qt();
                        })).catch((t => {
                            this.Bt(t);
                        }));
                    }
                    Ji = void 0;
                }
                t = t.next;
            }
            this.qt();
        }
    }
    Lt() {
        ++this.bt;
    }
    qt() {
        if (0 === --this.bt) {
            let t = this.$initiator.head;
            let e = null;
            while (null !== t) {
                if (t !== this) {
                    t.isBound = false;
                    t.unbind();
                }
                e = t.next;
                t.next = null;
                t = e;
            }
            this.head = this.tail = null;
            this.isBound = false;
            this.unbind();
        }
    }
    addBinding(t) {
        if (null === this.bindings) this.bindings = [ t ]; else this.bindings[this.bindings.length] = t;
    }
    addChild(t) {
        if (null === this.children) this.children = [ t ]; else this.children[this.children.length] = t;
    }
    is(t) {
        switch (this.vmKind) {
          case 1:
            return Me.getDefinition(this.viewModel.constructor).name === t;

          case 0:
            return si.getDefinition(this.viewModel.constructor).name === t;

          case 2:
            return this.viewFactory.name === t;
        }
    }
    lockScope(t) {
        this.scope = t;
        this.hasLockedScope = true;
    }
    setHost(t) {
        if (0 === this.vmKind) {
            ss(t, si.name, this);
            ss(t, this.definition.key, this);
        }
        this.host = t;
        this.mountTarget = 1;
        return this;
    }
    setShadowRoot(t) {
        if (0 === this.vmKind) {
            ss(t, si.name, this);
            ss(t, this.definition.key, this);
        }
        this.shadowRoot = t;
        this.mountTarget = 2;
        return this;
    }
    setLocation(t) {
        if (0 === this.vmKind) {
            ss(t, si.name, this);
            ss(t, this.definition.key, this);
        }
        this.location = t;
        this.mountTarget = 3;
        return this;
    }
    release() {
        this.state |= 16;
    }
    dispose() {
        if (32 === (32 & this.state)) return;
        this.state |= 32;
        if (this.hooks.hasDispose) this.viewModel.dispose();
        if (null !== this.children) {
            this.children.forEach(Yi);
            this.children = null;
        }
        this.hostController = null;
        this.scope = null;
        this.nodes = null;
        this.location = null;
        this.viewFactory = null;
        if (null !== this.viewModel) {
            Li.delete(this.viewModel);
            this.viewModel = null;
        }
        this.viewModel = null;
        this.host = null;
        this.shadowRoot = null;
        this.container.disposeResolvers();
    }
    accept(t) {
        if (true === t(this)) return true;
        if (this.hooks.hasAccept && true === this.viewModel.accept(t)) return true;
        if (null !== this.children) {
            const {children: e} = this;
            for (let i = 0, s = e.length; i < s; ++i) if (true === e[i].accept(t)) return true;
        }
    }
}

function qi(t) {
    let e = t.$observers;
    if (void 0 === e) Reflect.defineProperty(t, "$observers", {
        enumerable: false,
        value: e = {}
    });
    return e;
}

function Mi(t, e, i, s) {
    const n = e.bindables;
    const r = Object.getOwnPropertyNames(n);
    const o = r.length;
    if (o > 0) {
        let e;
        let i;
        let l = 0;
        const h = qi(s);
        const a = t.container;
        const c = a.has(_aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.ICoercionConfiguration, true) ? a.get(_aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.ICoercionConfiguration) : null;
        for (;l < o; ++l) {
            e = r[l];
            if (void 0 === h[e]) {
                i = n[e];
                h[e] = new BindableObserver(s, e, i.callback, i.set, t, c);
            }
        }
    }
}

function Ui(t, e, i) {
    const s = e.childrenObservers;
    const n = Object.getOwnPropertyNames(s);
    const r = n.length;
    if (r > 0) {
        const e = qi(i);
        const o = [];
        let l;
        let h = 0;
        let a;
        for (;h < r; ++h) {
            l = n[h];
            if (void 0 == e[l]) {
                a = s[l];
                o[o.length] = e[l] = new ChildrenObserver(t, i, l, a.callback, a.query, a.filter, a.map, a.options);
            }
        }
        return o;
    }
    return _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.emptyArray;
}

const Fi = new Map;

const Vi = t => {
    let e = Fi.get(t);
    if (null == e) {
        e = new _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.AccessScopeExpression(t, 0);
        Fi.set(t, e);
    }
    return e;
};

function _i(t, e, i, s) {
    const n = e.get(_aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.IObserverLocator);
    const r = e.get(_aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.IExpressionParser);
    const o = i.watches;
    const l = 0 === t.vmKind ? t.scope : _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.Scope.create(s, null, true);
    const h = o.length;
    let a;
    let c;
    let u;
    let f = 0;
    for (;h > f; ++f) {
        ({expression: a, callback: c} = o[f]);
        c = Ct(c) ? c : Reflect.get(s, c);
        if (!Ct(c)) throw new Error(`AUR0506:${String(c)}`);
        if (Ct(a)) t.addBinding(new ComputedWatcher(s, n, a, c, true)); else {
            u = At(a) ? r.parse(a, 8) : Vi(a);
            t.addBinding(new ExpressionWatcher(l, e, n, u, c));
        }
    }
}

function ji(t) {
    return t instanceof Controller && 0 === t.vmKind;
}

function Ni(t) {
    return (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.isObject)(t) && si.isType(t.constructor);
}

class HooksDefinition {
    constructor(t) {
        this.hasDefine = "define" in t;
        this.hasHydrating = "hydrating" in t;
        this.hasHydrated = "hydrated" in t;
        this.hasCreated = "created" in t;
        this.hasBinding = "binding" in t;
        this.hasBound = "bound" in t;
        this.hasAttaching = "attaching" in t;
        this.hasAttached = "attached" in t;
        this.hasDetaching = "detaching" in t;
        this.hasUnbinding = "unbinding" in t;
        this.hasDispose = "dispose" in t;
        this.hasAccept = "accept" in t;
    }
}

HooksDefinition.none = new HooksDefinition({});

const Wi = {
    mode: "open"
};

var Hi;

(function(t) {
    t[t["customElement"] = 0] = "customElement";
    t[t["customAttribute"] = 1] = "customAttribute";
    t[t["synthetic"] = 2] = "synthetic";
})(Hi || (Hi = {}));

var zi;

(function(t) {
    t[t["none"] = 0] = "none";
    t[t["activating"] = 1] = "activating";
    t[t["activated"] = 2] = "activated";
    t[t["deactivating"] = 4] = "deactivating";
    t[t["deactivated"] = 8] = "deactivated";
    t[t["released"] = 16] = "released";
    t[t["disposed"] = 32] = "disposed";
})(zi || (zi = {}));

function Gi(t) {
    const e = [];
    if (1 === (1 & t)) e.push("activating");
    if (2 === (2 & t)) e.push("activated");
    if (4 === (4 & t)) e.push("deactivating");
    if (8 === (8 & t)) e.push("deactivated");
    if (16 === (16 & t)) e.push("released");
    if (32 === (32 & t)) e.push("disposed");
    return 0 === e.length ? "none" : e.join("|");
}

const Xi = _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.DI.createInterface("IController");

const Ki = _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.DI.createInterface("IHydrationContext");

class HydrationContext {
    constructor(t, e, i) {
        this.instruction = e;
        this.parent = i;
        this.controller = t;
    }
}

function Yi(t) {
    t.dispose();
}

let Qi;

let Zi;

let Ji;

const ts = _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.DI.createInterface("IAppRoot");

const es = _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.DI.createInterface("IWorkTracker", (t => t.singleton(WorkTracker)));

class WorkTracker {
    constructor(t) {
        this.Mt = 0;
        this.Ut = null;
        this.$t = null;
        this.Ft = t.scopeTo("WorkTracker");
    }
    start() {
        this.Ft.trace(`start(stack:${this.Mt})`);
        ++this.Mt;
    }
    finish() {
        this.Ft.trace(`finish(stack:${this.Mt})`);
        if (0 === --this.Mt) {
            const t = this.$t;
            if (null !== t) {
                this.$t = this.Ut = null;
                t();
            }
        }
    }
    wait() {
        this.Ft.trace(`wait(stack:${this.Mt})`);
        if (null === this.Ut) {
            if (0 === this.Mt) return Promise.resolve();
            this.Ut = new Promise((t => {
                this.$t = t;
            }));
        }
        return this.Ut;
    }
}

WorkTracker.inject = [ _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.ILogger ];

class AppRoot {
    constructor(t, e, i, s) {
        this.config = t;
        this.platform = e;
        this.container = i;
        this.controller = void 0;
        this.Vt = void 0;
        this.host = t.host;
        this.work = i.get(es);
        s.prepare(this);
        i.registerResolver(e.HTMLElement, i.registerResolver(e.Element, i.registerResolver(ns, new _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.InstanceProvider("ElementResolver", t.host))));
        this.Vt = (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.onResolve)(this._t("beforeCreate"), (() => {
            const e = t.component;
            const s = i.createChild();
            let n;
            if (si.isType(e)) n = this.container.get(e); else n = t.component;
            const r = {
                hydrate: false,
                projections: null
            };
            const o = this.controller = Controller.$el(s, n, this.host, r);
            o.xt(r, null);
            return (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.onResolve)(this._t("hydrating"), (() => {
                o.Ct(null);
                return (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.onResolve)(this._t("hydrated"), (() => {
                    o.At();
                    this.Vt = void 0;
                }));
            }));
        }));
    }
    activate() {
        return (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.onResolve)(this.Vt, (() => (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.onResolve)(this._t("beforeActivate"), (() => (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.onResolve)(this.controller.activate(this.controller, null, 2, void 0), (() => this._t("afterActivate")))))));
    }
    deactivate() {
        return (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.onResolve)(this._t("beforeDeactivate"), (() => (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.onResolve)(this.controller.deactivate(this.controller, null, 0), (() => this._t("afterDeactivate")))));
    }
    _t(t) {
        return (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.resolveAll)(...this.container.getAll(be).reduce(((e, i) => {
            if (i.slot === t) e.push(i.run());
            return e;
        }), []));
    }
    dispose() {
        var t;
        null === (t = this.controller) || void 0 === t ? void 0 : t.dispose();
    }
}

class Refs {}

function is(t, e) {
    var i, s;
    return null !== (s = null === (i = t.$au) || void 0 === i ? void 0 : i[e]) && void 0 !== s ? s : null;
}

function ss(t, e, i) {
    var s;
    var n;
    (null !== (s = (n = t).$au) && void 0 !== s ? s : n.$au = new Refs)[e] = i;
}

const ns = _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.DI.createInterface("INode");

const rs = _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.DI.createInterface("IEventTarget", (t => t.cachedCallback((t => {
    if (t.has(ts, true)) return t.get(ts).host;
    return t.get(Kt).document;
}))));

const os = _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.DI.createInterface("IRenderLocation");

var ls;

(function(t) {
    t[t["Element"] = 1] = "Element";
    t[t["Attr"] = 2] = "Attr";
    t[t["Text"] = 3] = "Text";
    t[t["CDATASection"] = 4] = "CDATASection";
    t[t["EntityReference"] = 5] = "EntityReference";
    t[t["Entity"] = 6] = "Entity";
    t[t["ProcessingInstruction"] = 7] = "ProcessingInstruction";
    t[t["Comment"] = 8] = "Comment";
    t[t["Document"] = 9] = "Document";
    t[t["DocumentType"] = 10] = "DocumentType";
    t[t["DocumentFragment"] = 11] = "DocumentFragment";
    t[t["Notation"] = 12] = "Notation";
})(ls || (ls = {}));

const hs = new WeakMap;

function as(t) {
    if (hs.has(t)) return hs.get(t);
    let e = 0;
    let i = t.nextSibling;
    while (null !== i) {
        if (8 === i.nodeType) switch (i.textContent) {
          case "au-start":
            ++e;
            break;

          case "au-end":
            if (0 === e--) return i;
        }
        i = i.nextSibling;
    }
    if (null === t.parentNode && 11 === t.nodeType) {
        const e = si.for(t);
        if (void 0 === e) return null;
        if (2 === e.mountTarget) return as(e.host);
    }
    return t.parentNode;
}

function cs(t, e) {
    if (void 0 !== t.platform && !(t instanceof t.platform.Node)) {
        const i = t.childNodes;
        for (let t = 0, s = i.length; t < s; ++t) hs.set(i[t], e);
    } else hs.set(t, e);
}

function us(t) {
    if (fs(t)) return t;
    const e = t.ownerDocument.createComment("au-end");
    const i = t.ownerDocument.createComment("au-start");
    if (null !== t.parentNode) {
        t.parentNode.replaceChild(e, t);
        e.parentNode.insertBefore(i, e);
    }
    e.$start = i;
    return e;
}

function fs(t) {
    return "au-end" === t.textContent;
}

class FragmentNodeSequence {
    constructor(t, e) {
        this.platform = t;
        this.fragment = e;
        this.isMounted = false;
        this.isLinked = false;
        this.next = void 0;
        this.refNode = void 0;
        const i = e.querySelectorAll(".au");
        let s = 0;
        let n = i.length;
        let r;
        let o = this.targets = Array(n);
        while (n > s) {
            r = i[s];
            if ("AU-M" === r.nodeName) o[s] = us(r); else o[s] = r;
            ++s;
        }
        const l = e.childNodes;
        const h = this.childNodes = Array(n = l.length);
        s = 0;
        while (n > s) {
            h[s] = l[s];
            ++s;
        }
        this.firstChild = e.firstChild;
        this.lastChild = e.lastChild;
    }
    findTargets() {
        return this.targets;
    }
    insertBefore(t) {
        if (this.isLinked && !!this.refNode) this.addToLinked(); else {
            const e = t.parentNode;
            if (this.isMounted) {
                let i = this.firstChild;
                let s;
                const n = this.lastChild;
                while (null != i) {
                    s = i.nextSibling;
                    e.insertBefore(i, t);
                    if (i === n) break;
                    i = s;
                }
            } else {
                this.isMounted = true;
                t.parentNode.insertBefore(this.fragment, t);
            }
        }
    }
    appendTo(t, e = false) {
        if (this.isMounted) {
            let e = this.firstChild;
            let i;
            const s = this.lastChild;
            while (null != e) {
                i = e.nextSibling;
                t.appendChild(e);
                if (e === s) break;
                e = i;
            }
        } else {
            this.isMounted = true;
            if (!e) t.appendChild(this.fragment);
        }
    }
    remove() {
        if (this.isMounted) {
            this.isMounted = false;
            const t = this.fragment;
            const e = this.lastChild;
            let i;
            let s = this.firstChild;
            while (null !== s) {
                i = s.nextSibling;
                t.appendChild(s);
                if (s === e) break;
                s = i;
            }
        }
    }
    addToLinked() {
        const t = this.refNode;
        const e = t.parentNode;
        if (this.isMounted) {
            let i = this.firstChild;
            let s;
            const n = this.lastChild;
            while (null != i) {
                s = i.nextSibling;
                e.insertBefore(i, t);
                if (i === n) break;
                i = s;
            }
        } else {
            this.isMounted = true;
            e.insertBefore(this.fragment, t);
        }
    }
    unlink() {
        this.isLinked = false;
        this.next = void 0;
        this.refNode = void 0;
    }
    link(t) {
        this.isLinked = true;
        if (fs(t)) this.refNode = t; else {
            this.next = t;
            this.obtainRefNode();
        }
    }
    obtainRefNode() {
        if (void 0 !== this.next) this.refNode = this.next.firstChild; else this.refNode = void 0;
    }
}

const ds = _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.DI.createInterface("IWindow", (t => t.callback((t => t.get(Kt).window))));

const ms = _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.DI.createInterface("ILocation", (t => t.callback((t => t.get(ds).location))));

const vs = _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.DI.createInterface("IHistory", (t => t.callback((t => t.get(ds).history))));

const ps = {
    [_aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.DelegationStrategy.capturing]: {
        capture: true
    },
    [_aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.DelegationStrategy.bubbling]: {
        capture: false
    }
};

class Listener {
    constructor(t, e, i, s, n, r, o, l) {
        this.platform = t;
        this.targetEvent = e;
        this.delegationStrategy = i;
        this.sourceExpression = s;
        this.target = n;
        this.preventDefault = r;
        this.eventDelegator = o;
        this.locator = l;
        this.interceptor = this;
        this.isBound = false;
        this.handler = null;
    }
    callSource(t) {
        const e = this.$scope.overrideContext;
        e.$event = t;
        const i = this.sourceExpression.evaluate(8, this.$scope, this.locator, null);
        Reflect.deleteProperty(e, "$event");
        if (true !== i && this.preventDefault) t.preventDefault();
        return i;
    }
    handleEvent(t) {
        this.interceptor.callSource(t);
    }
    $bind(t, e) {
        if (this.isBound) {
            if (this.$scope === e) return;
            this.interceptor.$unbind(2 | t);
        }
        this.$scope = e;
        const i = this.sourceExpression;
        if (i.hasBind) i.bind(t, e, this.interceptor);
        if (this.delegationStrategy === _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.DelegationStrategy.none) this.target.addEventListener(this.targetEvent, this); else this.handler = this.eventDelegator.addEventListener(this.locator.get(rs), this.target, this.targetEvent, this, ps[this.delegationStrategy]);
        this.isBound = true;
    }
    $unbind(t) {
        if (!this.isBound) return;
        const e = this.sourceExpression;
        if (e.hasUnbind) e.unbind(t, this.$scope, this.interceptor);
        this.$scope = null;
        if (this.delegationStrategy === _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.DelegationStrategy.none) this.target.removeEventListener(this.targetEvent, this); else {
            this.handler.dispose();
            this.handler = null;
        }
        this.isBound = false;
    }
    observe(t, e) {
        return;
    }
    handleChange(t, e, i) {
        return;
    }
}

const gs = {
    capture: false
};

class ListenerTracker {
    constructor(t, e, i = gs) {
        this.jt = t;
        this.Nt = e;
        this.Wt = i;
        this.Ht = 0;
        this.zt = new Map;
        this.Gt = new Map;
    }
    Xt() {
        if (1 === ++this.Ht) this.jt.addEventListener(this.Nt, this, this.Wt);
    }
    Kt() {
        if (0 === --this.Ht) this.jt.removeEventListener(this.Nt, this, this.Wt);
    }
    dispose() {
        if (this.Ht > 0) {
            this.Ht = 0;
            this.jt.removeEventListener(this.Nt, this, this.Wt);
        }
        this.zt.clear();
        this.Gt.clear();
    }
    Yt(t) {
        const e = true === this.Wt.capture ? this.zt : this.Gt;
        let i = e.get(t);
        if (void 0 === i) e.set(t, i = wt());
        return i;
    }
    handleEvent(t) {
        const e = true === this.Wt.capture ? this.zt : this.Gt;
        const i = t.composedPath();
        if (true === this.Wt.capture) i.reverse();
        for (const s of i) {
            const i = e.get(s);
            if (void 0 === i) continue;
            const n = i[this.Nt];
            if (void 0 === n) continue;
            if (Ct(n)) n(t); else n.handleEvent(t);
            if (true === t.cancelBubble) return;
        }
    }
}

class DelegateSubscription {
    constructor(t, e, i, s) {
        this.Qt = t;
        this.Zt = e;
        this.Nt = i;
        t.Xt();
        e[i] = s;
    }
    dispose() {
        this.Qt.Kt();
        this.Zt[this.Nt] = void 0;
    }
}

class EventSubscriber {
    constructor(t) {
        this.config = t;
        this.target = null;
        this.handler = null;
    }
    subscribe(t, e) {
        this.target = t;
        this.handler = e;
        let i;
        for (i of this.config.events) t.addEventListener(i, e);
    }
    dispose() {
        const {target: t, handler: e} = this;
        let i;
        if (null !== t && null !== e) for (i of this.config.events) t.removeEventListener(i, e);
        this.target = this.handler = null;
    }
}

const ws = _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.DI.createInterface("IEventDelegator", (t => t.singleton(EventDelegator)));

class EventDelegator {
    constructor() {
        this.Jt = wt();
    }
    addEventListener(t, e, i, s, n) {
        var r;
        var o;
        const l = null !== (r = (o = this.Jt)[i]) && void 0 !== r ? r : o[i] = new Map;
        let h = l.get(t);
        if (void 0 === h) l.set(t, h = new ListenerTracker(t, i, n));
        return new DelegateSubscription(h, h.Yt(e), i, s);
    }
    dispose() {
        for (const t in this.Jt) {
            const e = this.Jt[t];
            for (const t of e.values()) t.dispose();
            e.clear();
        }
    }
}

const bs = _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.DI.createInterface("IProjections");

const xs = _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.DI.createInterface("IAuSlotsInfo");

class AuSlotsInfo {
    constructor(t) {
        this.projectedSlots = t;
    }
}

var ys;

(function(t) {
    t["hydrateElement"] = "ra";
    t["hydrateAttribute"] = "rb";
    t["hydrateTemplateController"] = "rc";
    t["hydrateLetElement"] = "rd";
    t["setProperty"] = "re";
    t["interpolation"] = "rf";
    t["propertyBinding"] = "rg";
    t["callBinding"] = "rh";
    t["letBinding"] = "ri";
    t["refBinding"] = "rj";
    t["iteratorBinding"] = "rk";
    t["textBinding"] = "ha";
    t["listenerBinding"] = "hb";
    t["attributeBinding"] = "hc";
    t["stylePropertyBinding"] = "hd";
    t["setAttribute"] = "he";
    t["setClassAttribute"] = "hf";
    t["setStyleAttribute"] = "hg";
    t["spreadBinding"] = "hs";
    t["spreadElementProp"] = "hp";
})(ys || (ys = {}));

const ks = _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.DI.createInterface("Instruction");

function Cs(t) {
    const e = t.type;
    return At(e) && 2 === e.length;
}

class InterpolationInstruction {
    constructor(t, e) {
        this.from = t;
        this.to = e;
    }
    get type() {
        return "rf";
    }
}

class PropertyBindingInstruction {
    constructor(t, e, i) {
        this.from = t;
        this.to = e;
        this.mode = i;
    }
    get type() {
        return "rg";
    }
}

class IteratorBindingInstruction {
    constructor(t, e) {
        this.from = t;
        this.to = e;
    }
    get type() {
        return "rk";
    }
}

class CallBindingInstruction {
    constructor(t, e) {
        this.from = t;
        this.to = e;
    }
    get type() {
        return "rh";
    }
}

class RefBindingInstruction {
    constructor(t, e) {
        this.from = t;
        this.to = e;
    }
    get type() {
        return "rj";
    }
}

class SetPropertyInstruction {
    constructor(t, e) {
        this.value = t;
        this.to = e;
    }
    get type() {
        return "re";
    }
}

class HydrateElementInstruction {
    constructor(t, e, i, s, n, r) {
        this.res = t;
        this.alias = e;
        this.props = i;
        this.projections = s;
        this.containerless = n;
        this.captures = r;
        this.auSlot = null;
    }
    get type() {
        return "ra";
    }
}

class HydrateAttributeInstruction {
    constructor(t, e, i) {
        this.res = t;
        this.alias = e;
        this.props = i;
    }
    get type() {
        return "rb";
    }
}

class HydrateTemplateController {
    constructor(t, e, i, s) {
        this.def = t;
        this.res = e;
        this.alias = i;
        this.props = s;
    }
    get type() {
        return "rc";
    }
}

class HydrateLetElementInstruction {
    constructor(t, e) {
        this.instructions = t;
        this.toBindingContext = e;
    }
    get type() {
        return "rd";
    }
}

class LetBindingInstruction {
    constructor(t, e) {
        this.from = t;
        this.to = e;
    }
    get type() {
        return "ri";
    }
}

class TextBindingInstruction {
    constructor(t, e) {
        this.from = t;
        this.strict = e;
    }
    get type() {
        return "ha";
    }
}

class ListenerBindingInstruction {
    constructor(t, e, i, s) {
        this.from = t;
        this.to = e;
        this.preventDefault = i;
        this.strategy = s;
    }
    get type() {
        return "hb";
    }
}

class StylePropertyBindingInstruction {
    constructor(t, e) {
        this.from = t;
        this.to = e;
    }
    get type() {
        return "hd";
    }
}

class SetAttributeInstruction {
    constructor(t, e) {
        this.value = t;
        this.to = e;
    }
    get type() {
        return "he";
    }
}

class SetClassAttributeInstruction {
    constructor(t) {
        this.value = t;
        this.type = "hf";
    }
}

class SetStyleAttributeInstruction {
    constructor(t) {
        this.value = t;
        this.type = "hg";
    }
}

class AttributeBindingInstruction {
    constructor(t, e, i) {
        this.attr = t;
        this.from = e;
        this.to = i;
    }
    get type() {
        return "hc";
    }
}

class SpreadBindingInstruction {
    get type() {
        return "hs";
    }
}

class SpreadElementPropBindingInstruction {
    constructor(t) {
        this.instructions = t;
    }
    get type() {
        return "hp";
    }
}

const As = _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.DI.createInterface("ITemplateCompiler");

const Ss = _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.DI.createInterface("IRenderer");

function Rs(t) {
    return function i(s) {
        const n = function(...e) {
            const i = new s(...e);
            i.instructionType = t;
            return i;
        };
        n.register = function t(e) {
            _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.Registration.singleton(Ss, n).register(e);
        };
        const r = _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.Metadata.getOwnKeys(s);
        for (const t of r) ct(t, ht(t, s), n);
        const o = Object.getOwnPropertyDescriptors(s);
        Object.keys(o).filter((t => "prototype" !== t)).forEach((t => {
            Reflect.defineProperty(n, t, o[t]);
        }));
        return n;
    };
}

function Es(t, e, i) {
    if (At(e)) return t.parse(e, i);
    return e;
}

function Bs(t) {
    if (null != t.viewModel) return t.viewModel;
    return t;
}

function Is(t, e) {
    if ("element" === e) return t;
    switch (e) {
      case "controller":
        return si.for(t);

      case "view":
        throw new Error("AUR0750");

      case "view-model":
        return si.for(t).viewModel;

      default:
        {
            const i = Me.for(t, e);
            if (void 0 !== i) return i.viewModel;
            const s = si.for(t, {
                name: e
            });
            if (void 0 === s) throw new Error(`AUR0751:${e}`);
            return s.viewModel;
        }
    }
}

let Ts = class SetPropertyRenderer {
    render(t, e, i) {
        const s = Bs(e);
        if (void 0 !== s.$observers && void 0 !== s.$observers[i.to]) s.$observers[i.to].setValue(i.value, 2); else s[i.to] = i.value;
    }
};

Ts = ot([ Rs("re") ], Ts);

let Ds = class CustomElementRenderer {
    constructor(t, e) {
        this.r = t;
        this.p = e;
    }
    static get inject() {
        return [ Pi, Kt ];
    }
    render(t, e, i) {
        let s;
        let n;
        let r;
        let o;
        const l = i.res;
        const h = i.projections;
        const a = t.container;
        const c = nn(this.p, t, e, i, e, null == h ? void 0 : new AuSlotsInfo(Object.keys(h)));
        switch (typeof l) {
          case "string":
            s = a.find(si, l);
            if (null == s) throw new Error(`AUR0752:${l}@${t["name"]}`);
            break;

          default:
            s = l;
        }
        n = s.Type;
        r = c.invoke(n);
        c.registerResolver(n, new _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.InstanceProvider(s.key, r));
        o = Controller.$el(c, r, e, i, s);
        ss(e, s.key, o);
        const u = this.r.renderers;
        const f = i.props;
        const d = f.length;
        let m = 0;
        let v;
        while (d > m) {
            v = f[m];
            u[v.type].render(t, o, v);
            ++m;
        }
        t.addChild(o);
    }
};

Ds = ot([ Rs("ra") ], Ds);

let Ps = class CustomAttributeRenderer {
    constructor(t, e) {
        this.r = t;
        this.p = e;
    }
    static get inject() {
        return [ Pi, Kt ];
    }
    render(t, e, i) {
        let s = t.container;
        let n;
        switch (typeof i.res) {
          case "string":
            n = s.find(Me, i.res);
            if (null == n) throw new Error(`AUR0753:${i.res}@${t["name"]}`);
            break;

          default:
            n = i.res;
        }
        const r = rn(this.p, n, t, e, i, void 0, void 0);
        const o = Controller.$attr(t.container, r, e, n);
        ss(e, n.key, o);
        const l = this.r.renderers;
        const h = i.props;
        const a = h.length;
        let c = 0;
        let u;
        while (a > c) {
            u = h[c];
            l[u.type].render(t, o, u);
            ++c;
        }
        t.addChild(o);
    }
};

Ps = ot([ Rs("rb") ], Ps);

let Os = class TemplateControllerRenderer {
    constructor(t, e) {
        this.r = t;
        this.p = e;
    }
    static get inject() {
        return [ Pi, Kt ];
    }
    render(t, e, i) {
        var s;
        let n = t.container;
        let r;
        switch (typeof i.res) {
          case "string":
            r = n.find(Me, i.res);
            if (null == r) throw new Error(`AUR0754:${i.res}@${t["name"]}`);
            break;

          default:
            r = i.res;
        }
        const o = this.r.getViewFactory(i.def, n);
        const l = us(e);
        const h = rn(this.p, r, t, e, i, o, l);
        const a = Controller.$attr(t.container, h, e, r);
        ss(l, r.key, a);
        null === (s = h.link) || void 0 === s ? void 0 : s.call(h, t, a, e, i);
        const c = this.r.renderers;
        const u = i.props;
        const f = u.length;
        let d = 0;
        let m;
        while (f > d) {
            m = u[d];
            c[m.type].render(t, a, m);
            ++d;
        }
        t.addChild(a);
    }
};

Os = ot([ Rs("rc") ], Os);

let $s = class LetElementRenderer {
    constructor(t, e) {
        this.ep = t;
        this.oL = e;
    }
    render(t, e, i) {
        e.remove();
        const s = i.instructions;
        const n = i.toBindingContext;
        const r = t.container;
        const o = s.length;
        let l;
        let h;
        let a;
        let c = 0;
        while (o > c) {
            l = s[c];
            h = Es(this.ep, l.from, 8);
            a = new LetBinding(h, l.to, this.oL, r, n);
            t.addBinding(38962 === h.$kind ? js(a, h, r) : a);
            ++c;
        }
    }
};

$s.inject = [ _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.IExpressionParser, _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.IObserverLocator ];

$s = ot([ Rs("rd") ], $s);

let Ls = class CallBindingRenderer {
    constructor(t, e) {
        this.ep = t;
        this.oL = e;
    }
    render(t, e, i) {
        const s = Es(this.ep, i.from, 8 | 4);
        const n = new CallBinding(s, Bs(e), i.to, this.oL, t.container);
        t.addBinding(38962 === s.$kind ? js(n, s, t.container) : n);
    }
};

Ls.inject = [ _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.IExpressionParser, _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.IObserverLocator ];

Ls = ot([ Rs("rh") ], Ls);

let qs = class RefBindingRenderer {
    constructor(t) {
        this.ep = t;
    }
    render(t, e, i) {
        const s = Es(this.ep, i.from, 8);
        const n = new RefBinding(s, Is(e, i.to), t.container);
        t.addBinding(38962 === s.$kind ? js(n, s, t.container) : n);
    }
};

qs.inject = [ _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.IExpressionParser ];

qs = ot([ Rs("rj") ], qs);

let Ms = class InterpolationBindingRenderer {
    constructor(t, e, i) {
        this.ep = t;
        this.oL = e;
        this.p = i;
    }
    render(t, e, i) {
        const s = t.container;
        const n = Es(this.ep, i.from, 1);
        const r = new InterpolationBinding(this.oL, n, Bs(e), i.to, _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.BindingMode.toView, s, this.p.domWriteQueue);
        const o = r.partBindings;
        const l = o.length;
        let h = 0;
        let a;
        for (;l > h; ++h) {
            a = o[h];
            if (38962 === a.sourceExpression.$kind) o[h] = js(a, a.sourceExpression, s);
        }
        t.addBinding(r);
    }
};

Ms.inject = [ _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.IExpressionParser, _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.IObserverLocator, Kt ];

Ms = ot([ Rs("rf") ], Ms);

let Us = class PropertyBindingRenderer {
    constructor(t, e, i) {
        this.ep = t;
        this.oL = e;
        this.p = i;
    }
    render(t, e, i) {
        const s = Es(this.ep, i.from, 8);
        const n = new PropertyBinding(s, Bs(e), i.to, i.mode, this.oL, t.container, this.p.domWriteQueue);
        t.addBinding(38962 === s.$kind ? js(n, s, t.container) : n);
    }
};

Us.inject = [ _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.IExpressionParser, _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.IObserverLocator, Kt ];

Us = ot([ Rs("rg") ], Us);

let Fs = class IteratorBindingRenderer {
    constructor(t, e, i) {
        this.ep = t;
        this.oL = e;
        this.p = i;
    }
    render(t, e, i) {
        const s = Es(this.ep, i.from, 2);
        const n = new PropertyBinding(s, Bs(e), i.to, _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.BindingMode.toView, this.oL, t.container, this.p.domWriteQueue);
        t.addBinding(38962 === s.iterable.$kind ? js(n, s.iterable, t.container) : n);
    }
};

Fs.inject = [ _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.IExpressionParser, _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.IObserverLocator, Kt ];

Fs = ot([ Rs("rk") ], Fs);

let Vs = 0;

const _s = [];

function js(t, e, i) {
    while (e instanceof _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.BindingBehaviorExpression) {
        _s[Vs++] = e;
        e = e.expression;
    }
    while (Vs > 0) {
        const e = _s[--Vs];
        const s = i.get(e.behaviorKey);
        if (s instanceof _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.BindingBehaviorFactory) t = s.construct(t, e);
    }
    _s.length = 0;
    return t;
}

let Ns = class TextBindingRenderer {
    constructor(t, e, i) {
        this.ep = t;
        this.oL = e;
        this.p = i;
    }
    render(t, e, i) {
        const s = t.container;
        const n = e.nextSibling;
        const r = e.parentNode;
        const o = this.p.document;
        const l = Es(this.ep, i.from, 1);
        const h = l.parts;
        const a = l.expressions;
        const c = a.length;
        let u = 0;
        let f = h[0];
        let d;
        let m;
        if ("" !== f) r.insertBefore(o.createTextNode(f), n);
        for (;c > u; ++u) {
            m = a[u];
            d = new ContentBinding(m, r.insertBefore(o.createTextNode(""), n), s, this.oL, this.p, i.strict);
            t.addBinding(38962 === m.$kind ? js(d, m, s) : d);
            f = h[u + 1];
            if ("" !== f) r.insertBefore(o.createTextNode(f), n);
        }
        if ("AU-M" === e.nodeName) e.remove();
    }
};

Ns.inject = [ _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.IExpressionParser, _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.IObserverLocator, Kt ];

Ns = ot([ Rs("ha") ], Ns);

let Ws = class ListenerBindingRenderer {
    constructor(t, e, i) {
        this.ep = t;
        this.te = e;
        this.p = i;
    }
    render(t, e, i) {
        const s = Es(this.ep, i.from, 4);
        const n = new Listener(this.p, i.to, i.strategy, s, e, i.preventDefault, this.te, t.container);
        t.addBinding(38962 === s.$kind ? js(n, s, t.container) : n);
    }
};

Ws.inject = [ _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.IExpressionParser, ws, Kt ];

Ws = ot([ Rs("hb") ], Ws);

let Hs = class SetAttributeRenderer {
    render(t, e, i) {
        e.setAttribute(i.to, i.value);
    }
};

Hs = ot([ Rs("he") ], Hs);

let zs = class SetClassAttributeRenderer {
    render(t, e, i) {
        Qs(e.classList, i.value);
    }
};

zs = ot([ Rs("hf") ], zs);

let Gs = class SetStyleAttributeRenderer {
    render(t, e, i) {
        e.style.cssText += i.value;
    }
};

Gs = ot([ Rs("hg") ], Gs);

let Xs = class StylePropertyBindingRenderer {
    constructor(t, e, i) {
        this.ep = t;
        this.oL = e;
        this.p = i;
    }
    render(t, e, i) {
        const s = Es(this.ep, i.from, 8);
        const n = new PropertyBinding(s, e.style, i.to, _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.BindingMode.toView, this.oL, t.container, this.p.domWriteQueue);
        t.addBinding(38962 === s.$kind ? js(n, s, t.container) : n);
    }
};

Xs.inject = [ _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.IExpressionParser, _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.IObserverLocator, Kt ];

Xs = ot([ Rs("hd") ], Xs);

let Ks = class AttributeBindingRenderer {
    constructor(t, e) {
        this.ep = t;
        this.oL = e;
    }
    render(t, e, i) {
        const s = Es(this.ep, i.from, 8);
        const n = new AttributeBinding(s, e, i.attr, i.to, _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.BindingMode.toView, this.oL, t.container);
        t.addBinding(38962 === s.$kind ? js(n, s, t.container) : n);
    }
};

Ks.inject = [ _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.IExpressionParser, _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.IObserverLocator ];

Ks = ot([ Rs("hc") ], Ks);

let Ys = class SpreadRenderer {
    constructor(t, e) {
        this.ee = t;
        this.r = e;
    }
    static get inject() {
        return [ As, Pi ];
    }
    render(t, e, i) {
        const s = t.container;
        const n = s.get(Ki);
        const r = this.r.renderers;
        const o = t => {
            let e = t;
            let i = n;
            while (null != i && e > 0) {
                i = i.parent;
                --e;
            }
            if (null == i) throw new Error("No scope context for spread binding.");
            return i;
        };
        const l = i => {
            var s, n;
            const a = o(i);
            const c = Zs(a);
            const u = this.ee.compileSpread(a.controller.definition, null !== (n = null === (s = a.instruction) || void 0 === s ? void 0 : s.captures) && void 0 !== n ? n : _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.emptyArray, a.controller.container, e);
            let f;
            for (f of u) switch (f.type) {
              case "hs":
                l(i + 1);
                break;

              case "hp":
                r[f.instructions.type].render(c, si.for(e), f.instructions);
                break;

              default:
                r[f.type].render(c, e, f);
            }
            t.addBinding(c);
        };
        l(0);
    }
};

Ys = ot([ Rs("hs") ], Ys);

class SpreadBinding {
    constructor(t, e) {
        this.ie = t;
        this.se = e;
        this.interceptor = this;
        this.isBound = false;
        this.ctrl = e.controller;
        this.locator = this.ctrl.container;
    }
    get container() {
        return this.locator;
    }
    get definition() {
        return this.ctrl.definition;
    }
    get isStrictBinding() {
        return this.ctrl.isStrictBinding;
    }
    $bind(t, e) {
        var i;
        if (this.isBound) return;
        this.isBound = true;
        const s = this.$scope = null !== (i = this.se.controller.scope.parentScope) && void 0 !== i ? i : void 0;
        if (null == s) throw new Error("Invalid spreading. Context scope is null/undefined");
        this.ie.forEach((e => e.$bind(t, s)));
    }
    $unbind(t) {
        this.ie.forEach((e => e.$unbind(t)));
        this.isBound = false;
    }
    addBinding(t) {
        this.ie.push(t);
    }
    addChild(t) {
        if (1 !== t.vmKind) throw new Error("Spread binding does not support spreading custom attributes/template controllers");
        this.ctrl.addChild(t);
    }
}

function Qs(t, e) {
    const i = e.length;
    let s = 0;
    for (let n = 0; n < i; ++n) if (32 === e.charCodeAt(n)) {
        if (n !== s) t.add(e.slice(s, n));
        s = n + 1;
    } else if (n + 1 === i) t.add(e.slice(s));
}

const Zs = t => new SpreadBinding([], t);

const Js = "IController";

const tn = "IInstruction";

const en = "IRenderLocation";

const sn = "IAuSlotsInfo";

function nn(t, e, i, s, n, r) {
    const o = e.container.createChild();
    o.registerResolver(t.HTMLElement, o.registerResolver(t.Element, o.registerResolver(ns, new _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.InstanceProvider("ElementResolver", i))));
    o.registerResolver(Xi, new _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.InstanceProvider(Js, e));
    o.registerResolver(ks, new _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.InstanceProvider(tn, s));
    o.registerResolver(os, null == n ? on : new _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.InstanceProvider(en, n));
    o.registerResolver(Ai, ln);
    o.registerResolver(xs, null == r ? hn : new _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.InstanceProvider(sn, r));
    return o;
}

class ViewFactoryProvider {
    constructor(t) {
        this.f = t;
    }
    get $isResolver() {
        return true;
    }
    resolve() {
        const t = this.f;
        if (null === t) throw new Error("AUR7055");
        if (!At(t.name) || 0 === t.name.length) throw new Error("AUR0756");
        return t;
    }
}

function rn(t, e, i, s, n, r, o, l) {
    const h = i.container.createChild();
    h.registerResolver(t.HTMLElement, h.registerResolver(t.Element, h.registerResolver(ns, new _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.InstanceProvider("ElementResolver", s))));
    i = i instanceof Controller ? i : i.ctrl;
    h.registerResolver(Xi, new _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.InstanceProvider(Js, i));
    h.registerResolver(ks, new _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.InstanceProvider(tn, n));
    h.registerResolver(os, null == o ? on : new _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.InstanceProvider(en, o));
    h.registerResolver(Ai, null == r ? ln : new ViewFactoryProvider(r));
    h.registerResolver(xs, null == l ? hn : new _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.InstanceProvider(sn, l));
    return h.invoke(e.Type);
}

const on = new _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.InstanceProvider(en);

const ln = new ViewFactoryProvider(null);

const hn = new _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.InstanceProvider(sn, new AuSlotsInfo(_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.emptyArray));

var an;

(function(t) {
    t[t["None"] = 0] = "None";
    t[t["IgnoreAttr"] = 1] = "IgnoreAttr";
})(an || (an = {}));

function cn(t) {
    return function(e) {
        return mn.define(t, e);
    };
}

class BindingCommandDefinition {
    constructor(t, e, i, s, n) {
        this.Type = t;
        this.name = e;
        this.aliases = i;
        this.key = s;
        this.type = n;
    }
    static create(t, e) {
        let i;
        let s;
        if (At(t)) {
            i = t;
            s = {
                name: i
            };
        } else {
            i = t.name;
            s = t;
        }
        return new BindingCommandDefinition(e, (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.firstDefined)(dn(e, "name"), i), (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.mergeArrays)(dn(e, "aliases"), s.aliases, e.aliases), fn(i), (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.firstDefined)(dn(e, "type"), s.type, e.type, null));
    }
    register(t) {
        const {Type: e, key: i, aliases: s} = this;
        _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.Registration.singleton(i, e).register(t);
        _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.Registration.aliasTo(i, e).register(t);
        (0,_aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.registerAliases)(s, mn, i, t);
    }
}

const un = mt("binding-command");

const fn = t => `${un}:${t}`;

const dn = (t, e) => ht(dt(e), t);

const mn = Object.freeze({
    name: un,
    keyFrom: fn,
    define(t, e) {
        const i = BindingCommandDefinition.create(t, e);
        ct(un, i, i.Type);
        ct(un, i, i);
        vt(e, un);
        return i.Type;
    },
    getAnnotation: dn
});

let vn = class OneTimeBindingCommand {
    constructor(t, e) {
        this.type = 0;
        this.m = t;
        this.ep = e;
    }
    get name() {
        return "one-time";
    }
    build(t) {
        var e;
        const i = t.attr;
        let s = i.target;
        let n = t.attr.rawValue;
        if (null == t.bindable) s = null !== (e = this.m.map(t.node, s)) && void 0 !== e ? e : (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.camelCase)(s); else {
            if ("" === n && 1 === t.def.type) n = (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.camelCase)(s);
            s = t.bindable.property;
        }
        return new PropertyBindingInstruction(this.ep.parse(n, 8), s, _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.BindingMode.oneTime);
    }
};

vn.inject = [ Zt, _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.IExpressionParser ];

vn = ot([ cn("one-time") ], vn);

let pn = class ToViewBindingCommand {
    constructor(t, e) {
        this.type = 0;
        this.m = t;
        this.ep = e;
    }
    get name() {
        return "to-view";
    }
    build(t) {
        var e;
        const i = t.attr;
        let s = i.target;
        let n = t.attr.rawValue;
        if (null == t.bindable) s = null !== (e = this.m.map(t.node, s)) && void 0 !== e ? e : (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.camelCase)(s); else {
            if ("" === n && 1 === t.def.type) n = (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.camelCase)(s);
            s = t.bindable.property;
        }
        return new PropertyBindingInstruction(this.ep.parse(n, 8), s, _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.BindingMode.toView);
    }
};

pn.inject = [ Zt, _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.IExpressionParser ];

pn = ot([ cn("to-view") ], pn);

let gn = class FromViewBindingCommand {
    constructor(t, e) {
        this.type = 0;
        this.m = t;
        this.ep = e;
    }
    get name() {
        return "from-view";
    }
    build(t) {
        var e;
        const i = t.attr;
        let s = i.target;
        let n = i.rawValue;
        if (null == t.bindable) s = null !== (e = this.m.map(t.node, s)) && void 0 !== e ? e : (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.camelCase)(s); else {
            if ("" === n && 1 === t.def.type) n = (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.camelCase)(s);
            s = t.bindable.property;
        }
        return new PropertyBindingInstruction(this.ep.parse(n, 8), s, _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.BindingMode.fromView);
    }
};

gn.inject = [ Zt, _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.IExpressionParser ];

gn = ot([ cn("from-view") ], gn);

let wn = class TwoWayBindingCommand {
    constructor(t, e) {
        this.type = 0;
        this.m = t;
        this.ep = e;
    }
    get name() {
        return "two-way";
    }
    build(t) {
        var e;
        const i = t.attr;
        let s = i.target;
        let n = i.rawValue;
        if (null == t.bindable) s = null !== (e = this.m.map(t.node, s)) && void 0 !== e ? e : (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.camelCase)(s); else {
            if ("" === n && 1 === t.def.type) n = (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.camelCase)(s);
            s = t.bindable.property;
        }
        return new PropertyBindingInstruction(this.ep.parse(n, 8), s, _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.BindingMode.twoWay);
    }
};

wn.inject = [ Zt, _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.IExpressionParser ];

wn = ot([ cn("two-way") ], wn);

let bn = class DefaultBindingCommand {
    constructor(t, e) {
        this.type = 0;
        this.m = t;
        this.ep = e;
    }
    get name() {
        return "bind";
    }
    build(t) {
        var e;
        const i = t.attr;
        const s = t.bindable;
        let n;
        let r;
        let o = i.target;
        let l = i.rawValue;
        if (null == s) {
            r = this.m.isTwoWay(t.node, o) ? _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.BindingMode.twoWay : _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.BindingMode.toView;
            o = null !== (e = this.m.map(t.node, o)) && void 0 !== e ? e : (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.camelCase)(o);
        } else {
            if ("" === l && 1 === t.def.type) l = (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.camelCase)(o);
            n = t.def.defaultBindingMode;
            r = s.mode === _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.BindingMode.default || null == s.mode ? null == n || n === _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.BindingMode.default ? _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.BindingMode.toView : n : s.mode;
            o = s.property;
        }
        return new PropertyBindingInstruction(this.ep.parse(l, 8), o, r);
    }
};

bn.inject = [ Zt, _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.IExpressionParser ];

bn = ot([ cn("bind") ], bn);

let xn = class CallBindingCommand {
    constructor(t) {
        this.type = 0;
        this.ep = t;
    }
    get name() {
        return "call";
    }
    build(t) {
        const e = null === t.bindable ? (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.camelCase)(t.attr.target) : t.bindable.property;
        return new CallBindingInstruction(this.ep.parse(t.attr.rawValue, 8 | 4), e);
    }
};

xn.inject = [ _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.IExpressionParser ];

xn = ot([ cn("call") ], xn);

let yn = class ForBindingCommand {
    constructor(t) {
        this.type = 0;
        this.ep = t;
    }
    get name() {
        return "for";
    }
    build(t) {
        const e = null === t.bindable ? (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.camelCase)(t.attr.target) : t.bindable.property;
        return new IteratorBindingInstruction(this.ep.parse(t.attr.rawValue, 2), e);
    }
};

yn.inject = [ _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.IExpressionParser ];

yn = ot([ cn("for") ], yn);

let kn = class TriggerBindingCommand {
    constructor(t) {
        this.type = 1;
        this.ep = t;
    }
    get name() {
        return "trigger";
    }
    build(t) {
        return new ListenerBindingInstruction(this.ep.parse(t.attr.rawValue, 4), t.attr.target, true, _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.DelegationStrategy.none);
    }
};

kn.inject = [ _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.IExpressionParser ];

kn = ot([ cn("trigger") ], kn);

let Cn = class DelegateBindingCommand {
    constructor(t) {
        this.type = 1;
        this.ep = t;
    }
    get name() {
        return "delegate";
    }
    build(t) {
        return new ListenerBindingInstruction(this.ep.parse(t.attr.rawValue, 4), t.attr.target, false, _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.DelegationStrategy.bubbling);
    }
};

Cn.inject = [ _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.IExpressionParser ];

Cn = ot([ cn("delegate") ], Cn);

let An = class CaptureBindingCommand {
    constructor(t) {
        this.type = 1;
        this.ep = t;
    }
    get name() {
        return "capture";
    }
    build(t) {
        return new ListenerBindingInstruction(this.ep.parse(t.attr.rawValue, 4), t.attr.target, false, _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.DelegationStrategy.capturing);
    }
};

An.inject = [ _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.IExpressionParser ];

An = ot([ cn("capture") ], An);

let Sn = class AttrBindingCommand {
    constructor(t) {
        this.type = 1;
        this.ep = t;
    }
    get name() {
        return "attr";
    }
    build(t) {
        return new AttributeBindingInstruction(t.attr.target, this.ep.parse(t.attr.rawValue, 8), t.attr.target);
    }
};

Sn.inject = [ _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.IExpressionParser ];

Sn = ot([ cn("attr") ], Sn);

let Rn = class StyleBindingCommand {
    constructor(t) {
        this.type = 1;
        this.ep = t;
    }
    get name() {
        return "style";
    }
    build(t) {
        return new AttributeBindingInstruction("style", this.ep.parse(t.attr.rawValue, 8), t.attr.target);
    }
};

Rn.inject = [ _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.IExpressionParser ];

Rn = ot([ cn("style") ], Rn);

let En = class ClassBindingCommand {
    constructor(t) {
        this.type = 1;
        this.ep = t;
    }
    get name() {
        return "class";
    }
    build(t) {
        return new AttributeBindingInstruction("class", this.ep.parse(t.attr.rawValue, 8), t.attr.target);
    }
};

En.inject = [ _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.IExpressionParser ];

En = ot([ cn("class") ], En);

let Bn = class RefBindingCommand {
    constructor(t) {
        this.type = 1;
        this.ep = t;
    }
    get name() {
        return "ref";
    }
    build(t) {
        return new RefBindingInstruction(this.ep.parse(t.attr.rawValue, 8), t.attr.target);
    }
};

Bn.inject = [ _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.IExpressionParser ];

Bn = ot([ cn("ref") ], Bn);

let In = class SpreadBindingCommand {
    constructor() {
        this.type = 1;
    }
    get name() {
        return "...$attrs";
    }
    build(t) {
        return new SpreadBindingInstruction;
    }
};

In = ot([ cn("...$attrs") ], In);

const Tn = _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.DI.createInterface("ITemplateElementFactory", (t => t.singleton(TemplateElementFactory)));

const Dn = {};

class TemplateElementFactory {
    constructor(t) {
        this.p = t;
        this.ne = t.document.createElement("template");
    }
    createTemplate(t) {
        var e;
        if (At(t)) {
            let e = Dn[t];
            if (void 0 === e) {
                const i = this.ne;
                i.innerHTML = t;
                const s = i.content.firstElementChild;
                if (null == s || "TEMPLATE" !== s.nodeName || null != s.nextElementSibling) {
                    this.ne = this.p.document.createElement("template");
                    e = i;
                } else {
                    i.content.removeChild(s);
                    e = s;
                }
                Dn[t] = e;
            }
            return e.cloneNode(true);
        }
        if ("TEMPLATE" !== t.nodeName) {
            const e = this.p.document.createElement("template");
            e.content.appendChild(t);
            return e;
        }
        null === (e = t.parentNode) || void 0 === e ? void 0 : e.removeChild(t);
        return t.cloneNode(true);
    }
}

TemplateElementFactory.inject = [ Kt ];

const Pn = function(t) {
    function e(t, i, s) {
        _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.DI.inject(e)(t, i, s);
    }
    e.$isResolver = true;
    e.resolve = function(e, i) {
        if (i.root === i) return i.getAll(t, false);
        return i.has(t, false) ? i.getAll(t, false).concat(i.root.getAll(t, false)) : i.root.getAll(t, false);
    };
    return e;
};

class TemplateCompiler {
    constructor() {
        this.debug = false;
        this.resolveResources = true;
    }
    static register(t) {
        return _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.Registration.singleton(As, this).register(t);
    }
    compile(t, e, i) {
        var s, n, r, o;
        const l = CustomElementDefinition.getOrCreate(t);
        if (null === l.template || void 0 === l.template) return l;
        if (false === l.needsCompile) return l;
        null !== i && void 0 !== i ? i : i = Ln;
        const a = new CompilationContext(t, e, i, null, null, void 0);
        const c = At(l.template) || !t.enhance ? a.re.createTemplate(l.template) : l.template;
        const u = "TEMPLATE" === c.nodeName && null != c.content;
        const f = u ? c.content : c;
        const d = e.get(Pn(zn));
        const m = d.length;
        let v = 0;
        if (m > 0) while (m > v) {
            null === (n = (s = d[v]).compiling) || void 0 === n ? void 0 : n.call(s, c);
            ++v;
        }
        if (c.hasAttribute(Nn)) throw new Error("AUR0701");
        this.oe(f, a);
        this.le(f, a);
        return CustomElementDefinition.create({
            ...t,
            name: t.name || Qn(),
            dependencies: (null !== (r = t.dependencies) && void 0 !== r ? r : _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.emptyArray).concat(null !== (o = a.deps) && void 0 !== o ? o : _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.emptyArray),
            instructions: a.rows,
            surrogates: u ? this.he(c, a) : _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.emptyArray,
            template: c,
            hasSlots: a.hasSlot,
            needsCompile: false
        });
    }
    compileSpread(t, e, i, s) {
        var n;
        const r = new CompilationContext(t, i, Ln, null, null, void 0);
        const o = [];
        const l = r.ae(s.nodeName.toLowerCase());
        const h = r.ep;
        const a = e.length;
        let c = 0;
        let u;
        let f = null;
        let d;
        let m;
        let v;
        let p;
        let g;
        let w = null;
        let b;
        let x;
        let y;
        let k;
        for (;a > c; ++c) {
            u = e[c];
            y = u.target;
            k = u.rawValue;
            w = r.ce(u);
            if (null !== w && (1 & w.type) > 0) {
                Mn.node = s;
                Mn.attr = u;
                Mn.bindable = null;
                Mn.def = null;
                o.push(w.build(Mn));
                continue;
            }
            f = r.ue(y);
            if (null !== f) {
                if (f.isTemplateController) throw new Error(`AUR0703:${y}`);
                v = BindablesInfo.from(f, true);
                x = false === f.noMultiBindings && null === w && On(k);
                if (x) m = this.fe(s, k, f, r); else {
                    g = v.primary;
                    if (null === w) {
                        b = h.parse(k, 1);
                        m = [ null === b ? new SetPropertyInstruction(k, g.property) : new InterpolationInstruction(b, g.property) ];
                    } else {
                        Mn.node = s;
                        Mn.attr = u;
                        Mn.bindable = g;
                        Mn.def = f;
                        m = [ w.build(Mn) ];
                    }
                }
                (null !== d && void 0 !== d ? d : d = []).push(new HydrateAttributeInstruction(this.resolveResources ? f : f.name, null != f.aliases && f.aliases.includes(y) ? y : void 0, m));
                continue;
            }
            if (null === w) {
                b = h.parse(k, 1);
                if (null !== l) {
                    v = BindablesInfo.from(l, false);
                    p = v.attrs[y];
                    if (void 0 !== p) {
                        b = h.parse(k, 1);
                        o.push(new SpreadElementPropBindingInstruction(null == b ? new SetPropertyInstruction(k, p.property) : new InterpolationInstruction(b, p.property)));
                        continue;
                    }
                }
                if (null != b) o.push(new InterpolationInstruction(b, null !== (n = r.m.map(s, y)) && void 0 !== n ? n : (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.camelCase)(y))); else switch (y) {
                  case "class":
                    o.push(new SetClassAttributeInstruction(k));
                    break;

                  case "style":
                    o.push(new SetStyleAttributeInstruction(k));
                    break;

                  default:
                    o.push(new SetAttributeInstruction(k, y));
                }
            } else {
                if (null !== l) {
                    v = BindablesInfo.from(l, false);
                    p = v.attrs[y];
                    if (void 0 !== p) {
                        Mn.node = s;
                        Mn.attr = u;
                        Mn.bindable = p;
                        Mn.def = l;
                        o.push(new SpreadElementPropBindingInstruction(w.build(Mn)));
                        continue;
                    }
                }
                Mn.node = s;
                Mn.attr = u;
                Mn.bindable = null;
                Mn.def = null;
                o.push(w.build(Mn));
            }
        }
        $n();
        if (null != d) return d.concat(o);
        return o;
    }
    he(t, e) {
        var i;
        const s = [];
        const n = t.attributes;
        const r = e.ep;
        let o = n.length;
        let l = 0;
        let h;
        let a;
        let c;
        let u;
        let f = null;
        let d;
        let m;
        let v;
        let p;
        let g = null;
        let w;
        let b;
        let x;
        let y;
        for (;o > l; ++l) {
            h = n[l];
            a = h.name;
            c = h.value;
            u = e.de.parse(a, c);
            x = u.target;
            y = u.rawValue;
            if (Un[x]) throw new Error(`AUR0702:${a}`);
            g = e.ce(u);
            if (null !== g && (1 & g.type) > 0) {
                Mn.node = t;
                Mn.attr = u;
                Mn.bindable = null;
                Mn.def = null;
                s.push(g.build(Mn));
                continue;
            }
            f = e.ue(x);
            if (null !== f) {
                if (f.isTemplateController) throw new Error(`AUR0703:${x}`);
                v = BindablesInfo.from(f, true);
                b = false === f.noMultiBindings && null === g && On(y);
                if (b) m = this.fe(t, y, f, e); else {
                    p = v.primary;
                    if (null === g) {
                        w = r.parse(y, 1);
                        m = [ null === w ? new SetPropertyInstruction(y, p.property) : new InterpolationInstruction(w, p.property) ];
                    } else {
                        Mn.node = t;
                        Mn.attr = u;
                        Mn.bindable = p;
                        Mn.def = f;
                        m = [ g.build(Mn) ];
                    }
                }
                t.removeAttribute(a);
                --l;
                --o;
                (null !== d && void 0 !== d ? d : d = []).push(new HydrateAttributeInstruction(this.resolveResources ? f : f.name, null != f.aliases && f.aliases.includes(x) ? x : void 0, m));
                continue;
            }
            if (null === g) {
                w = r.parse(y, 1);
                if (null != w) {
                    t.removeAttribute(a);
                    --l;
                    --o;
                    s.push(new InterpolationInstruction(w, null !== (i = e.m.map(t, x)) && void 0 !== i ? i : (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.camelCase)(x)));
                } else switch (a) {
                  case "class":
                    s.push(new SetClassAttributeInstruction(y));
                    break;

                  case "style":
                    s.push(new SetStyleAttributeInstruction(y));
                    break;

                  default:
                    s.push(new SetAttributeInstruction(y, a));
                }
            } else {
                Mn.node = t;
                Mn.attr = u;
                Mn.bindable = null;
                Mn.def = null;
                s.push(g.build(Mn));
            }
        }
        $n();
        if (null != d) return d.concat(s);
        return s;
    }
    le(t, e) {
        switch (t.nodeType) {
          case 1:
            switch (t.nodeName) {
              case "LET":
                return this.me(t, e);

              default:
                return this.ve(t, e);
            }

          case 3:
            return this.pe(t, e);

          case 11:
            {
                let i = t.firstChild;
                while (null !== i) i = this.le(i, e);
                break;
            }
        }
        return t.nextSibling;
    }
    me(t, e) {
        const i = t.attributes;
        const s = i.length;
        const n = [];
        const r = e.ep;
        let o = false;
        let l = 0;
        let h;
        let a;
        let c;
        let u;
        let f;
        let d;
        let m;
        let v;
        for (;s > l; ++l) {
            h = i[l];
            c = h.name;
            u = h.value;
            if ("to-binding-context" === c) {
                o = true;
                continue;
            }
            a = e.de.parse(c, u);
            d = a.target;
            m = a.rawValue;
            f = e.ce(a);
            if (null !== f) switch (f.name) {
              case "to-view":
              case "bind":
                n.push(new LetBindingInstruction(r.parse(m, 8), (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.camelCase)(d)));
                continue;

              default:
                throw new Error(`AUR0704:${a.command}`);
            }
            v = r.parse(m, 1);
            n.push(new LetBindingInstruction(null === v ? new _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.PrimitiveLiteralExpression(m) : v, (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.camelCase)(d)));
        }
        e.rows.push([ new HydrateLetElementInstruction(n, o) ]);
        return this.ge(t).nextSibling;
    }
    ve(t, e) {
        var i, s, n, r, l, a;
        var c, u;
        const f = t.nextSibling;
        const d = (null !== (i = t.getAttribute("as-element")) && void 0 !== i ? i : t.nodeName).toLowerCase();
        const m = e.ae(d);
        const v = !!(null === m || void 0 === m ? void 0 : m.capture);
        const p = v ? [] : _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.emptyArray;
        const g = e.ep;
        const w = this.debug ? _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.noop : () => {
            t.removeAttribute(A);
            --k;
            --y;
        };
        let b = t.attributes;
        let x;
        let y = b.length;
        let k = 0;
        let C;
        let A;
        let R;
        let E;
        let B;
        let I;
        let T = null;
        let D = false;
        let P;
        let O;
        let $;
        let L;
        let q;
        let M;
        let U;
        let F = null;
        let V;
        let _;
        let j;
        let N;
        let W = true;
        let H = false;
        if ("slot" === d) e.root.hasSlot = true;
        if (null !== m) {
            W = null === (s = m.processContent) || void 0 === s ? void 0 : s.call(m.Type, t, e.p);
            b = t.attributes;
            y = b.length;
        }
        if (e.root.def.enhance && t.classList.contains("au")) throw new Error(`AUR0705`);
        for (;y > k; ++k) {
            C = b[k];
            A = C.name;
            R = C.value;
            switch (A) {
              case "as-element":
              case "containerless":
                w();
                if (!H) H = "containerless" === A;
                continue;
            }
            E = e.de.parse(A, R);
            F = e.ce(E);
            j = E.target;
            N = E.rawValue;
            if (v) {
                if (null != F && 1 & F.type) {
                    w();
                    p.push(E);
                    continue;
                }
                if ("au-slot" !== j) {
                    V = BindablesInfo.from(m, false);
                    if (null == V.attrs[j] && !(null === (n = e.ue(j)) || void 0 === n ? void 0 : n.isTemplateController)) {
                        w();
                        p.push(E);
                        continue;
                    }
                }
            }
            if (null !== F && 1 & F.type) {
                Mn.node = t;
                Mn.attr = E;
                Mn.bindable = null;
                Mn.def = null;
                (null !== B && void 0 !== B ? B : B = []).push(F.build(Mn));
                w();
                continue;
            }
            T = e.ue(j);
            if (null !== T) {
                V = BindablesInfo.from(T, true);
                D = false === T.noMultiBindings && null === F && On(R);
                if (D) $ = this.fe(t, R, T, e); else {
                    _ = V.primary;
                    if (null === F) {
                        M = g.parse(R, 1);
                        $ = [ null === M ? new SetPropertyInstruction(R, _.property) : new InterpolationInstruction(M, _.property) ];
                    } else {
                        Mn.node = t;
                        Mn.attr = E;
                        Mn.bindable = _;
                        Mn.def = T;
                        $ = [ F.build(Mn) ];
                    }
                }
                w();
                if (T.isTemplateController) (null !== L && void 0 !== L ? L : L = []).push(new HydrateTemplateController(qn, this.resolveResources ? T : T.name, void 0, $)); else (null !== O && void 0 !== O ? O : O = []).push(new HydrateAttributeInstruction(this.resolveResources ? T : T.name, null != T.aliases && T.aliases.includes(j) ? j : void 0, $));
                continue;
            }
            if (null === F) {
                if (null !== m) {
                    V = BindablesInfo.from(m, false);
                    P = V.attrs[j];
                    if (void 0 !== P) {
                        M = g.parse(N, 1);
                        (null !== I && void 0 !== I ? I : I = []).push(null == M ? new SetPropertyInstruction(N, P.property) : new InterpolationInstruction(M, P.property));
                        w();
                        continue;
                    }
                }
                M = g.parse(N, 1);
                if (null != M) {
                    w();
                    (null !== B && void 0 !== B ? B : B = []).push(new InterpolationInstruction(M, null !== (r = e.m.map(t, j)) && void 0 !== r ? r : (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.camelCase)(j)));
                }
                continue;
            }
            w();
            if (null !== m) {
                V = BindablesInfo.from(m, false);
                P = V.attrs[j];
                if (void 0 !== P) {
                    Mn.node = t;
                    Mn.attr = E;
                    Mn.bindable = P;
                    Mn.def = m;
                    (null !== I && void 0 !== I ? I : I = []).push(F.build(Mn));
                    continue;
                }
            }
            Mn.node = t;
            Mn.attr = E;
            Mn.bindable = null;
            Mn.def = null;
            (null !== B && void 0 !== B ? B : B = []).push(F.build(Mn));
        }
        $n();
        if (this.we(t) && null != B && B.length > 1) this.be(t, B);
        if (null !== m) {
            U = new HydrateElementInstruction(this.resolveResources ? m : m.name, void 0, null !== I && void 0 !== I ? I : _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.emptyArray, null, H, p);
            if ("au-slot" === d) {
                const i = t.getAttribute("name") || "default";
                const s = e.h("template");
                const n = e.xe();
                let r = t.firstChild;
                while (null !== r) {
                    if (1 === r.nodeType && r.hasAttribute("au-slot")) t.removeChild(r); else s.content.appendChild(r);
                    r = t.firstChild;
                }
                this.le(s.content, n);
                U.auSlot = {
                    name: i,
                    fallback: CustomElementDefinition.create({
                        name: Qn(),
                        template: s,
                        instructions: n.rows,
                        needsCompile: false
                    })
                };
                t = this.ye(t, e);
            }
        }
        if (null != B || null != U || null != O) {
            x = _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.emptyArray.concat(null !== U && void 0 !== U ? U : _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.emptyArray, null !== O && void 0 !== O ? O : _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.emptyArray, null !== B && void 0 !== B ? B : _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.emptyArray);
            this.ge(t);
        }
        let z;
        if (null != L) {
            y = L.length - 1;
            k = y;
            q = L[k];
            let i;
            this.ye(t, e);
            if ("TEMPLATE" === t.nodeName) i = t; else {
                i = e.h("template");
                i.content.appendChild(t);
            }
            const s = i;
            const n = e.xe(null == x ? [] : [ x ]);
            let r;
            let o;
            let h;
            let a;
            let u;
            let f;
            let v;
            let p;
            let g = 0, w = 0;
            let b = t.firstChild;
            if (false !== W) while (null !== b) if (1 === b.nodeType) {
                r = b;
                b = b.nextSibling;
                o = r.getAttribute("au-slot");
                if (null !== o) {
                    if (null === m) throw new Error(`AUR0706:${d}[${o}]`);
                    if ("" === o) o = "default";
                    r.removeAttribute("au-slot");
                    t.removeChild(r);
                    (null !== (l = (c = null !== a && void 0 !== a ? a : a = {})[o]) && void 0 !== l ? l : c[o] = []).push(r);
                }
            } else b = b.nextSibling;
            if (null != a) {
                h = {};
                for (o in a) {
                    i = e.h("template");
                    u = a[o];
                    for (g = 0, w = u.length; w > g; ++g) {
                        f = u[g];
                        if ("TEMPLATE" === f.nodeName) if (f.attributes.length > 0) i.content.appendChild(f); else i.content.appendChild(f.content); else i.content.appendChild(f);
                    }
                    p = e.xe();
                    this.le(i.content, p);
                    h[o] = CustomElementDefinition.create({
                        name: Qn(),
                        template: i,
                        instructions: p.rows,
                        needsCompile: false,
                        isStrictBinding: e.root.def.isStrictBinding
                    });
                }
                U.projections = h;
            }
            if (null !== m && m.containerless) this.ye(t, e);
            z = null === m || !m.containerless && !H && false !== W;
            if (z) if ("TEMPLATE" === t.nodeName) this.le(t.content, n); else {
                b = t.firstChild;
                while (null !== b) b = this.le(b, n);
            }
            q.def = CustomElementDefinition.create({
                name: Qn(),
                template: s,
                instructions: n.rows,
                needsCompile: false,
                isStrictBinding: e.root.def.isStrictBinding
            });
            while (k-- > 0) {
                q = L[k];
                i = e.h("template");
                v = e.h("au-m");
                v.classList.add("au");
                i.content.appendChild(v);
                q.def = CustomElementDefinition.create({
                    name: Qn(),
                    template: i,
                    needsCompile: false,
                    instructions: [ [ L[k + 1] ] ],
                    isStrictBinding: e.root.def.isStrictBinding
                });
            }
            e.rows.push([ q ]);
        } else {
            if (null != x) e.rows.push(x);
            let i = t.firstChild;
            let s;
            let n;
            let r = null;
            let o;
            let l;
            let h;
            let c;
            let f;
            let d = 0, v = 0;
            if (false !== W) while (null !== i) if (1 === i.nodeType) {
                s = i;
                i = i.nextSibling;
                n = s.getAttribute("au-slot");
                if (null !== n) {
                    if (null === m) throw new Error(`AUR0706:${t.nodeName}[${n}]`);
                    if ("" === n) n = "default";
                    t.removeChild(s);
                    s.removeAttribute("au-slot");
                    (null !== (a = (u = null !== o && void 0 !== o ? o : o = {})[n]) && void 0 !== a ? a : u[n] = []).push(s);
                }
            } else i = i.nextSibling;
            if (null != o) {
                r = {};
                for (n in o) {
                    c = e.h("template");
                    l = o[n];
                    for (d = 0, v = l.length; v > d; ++d) {
                        h = l[d];
                        if ("TEMPLATE" === h.nodeName) if (h.attributes.length > 0) c.content.appendChild(h); else c.content.appendChild(h.content); else c.content.appendChild(h);
                    }
                    f = e.xe();
                    this.le(c.content, f);
                    r[n] = CustomElementDefinition.create({
                        name: Qn(),
                        template: c,
                        instructions: f.rows,
                        needsCompile: false,
                        isStrictBinding: e.root.def.isStrictBinding
                    });
                }
                U.projections = r;
            }
            if (null !== m && m.containerless) this.ye(t, e);
            z = null === m || !m.containerless && !H && false !== W;
            if (z && t.childNodes.length > 0) {
                i = t.firstChild;
                while (null !== i) i = this.le(i, e);
            }
        }
        return f;
    }
    pe(t, e) {
        let i = "";
        let s = t;
        while (null !== s && 3 === s.nodeType) {
            i += s.textContent;
            s = s.nextSibling;
        }
        const n = e.ep.parse(i, 1);
        if (null === n) return s;
        const r = t.parentNode;
        r.insertBefore(this.ge(e.h("au-m")), t);
        e.rows.push([ new TextBindingInstruction(n, !!e.def.isStrictBinding) ]);
        t.textContent = "";
        s = t.nextSibling;
        while (null !== s && 3 === s.nodeType) {
            r.removeChild(s);
            s = t.nextSibling;
        }
        return t.nextSibling;
    }
    fe(t, e, i, s) {
        const n = BindablesInfo.from(i, true);
        const r = e.length;
        const o = [];
        let l;
        let h;
        let a = 0;
        let c = 0;
        let u;
        let f;
        let d;
        let m;
        for (let v = 0; v < r; ++v) {
            c = e.charCodeAt(v);
            if (92 === c) ++v; else if (58 === c) {
                l = e.slice(a, v);
                while (e.charCodeAt(++v) <= 32) ;
                a = v;
                for (;v < r; ++v) {
                    c = e.charCodeAt(v);
                    if (92 === c) ++v; else if (59 === c) {
                        h = e.slice(a, v);
                        break;
                    }
                }
                if (void 0 === h) h = e.slice(a);
                f = s.de.parse(l, h);
                d = s.ce(f);
                m = n.attrs[f.target];
                if (null == m) throw new Error(`AUR0707:${i.name}.${f.target}`);
                if (null === d) {
                    u = s.ep.parse(h, 1);
                    o.push(null === u ? new SetPropertyInstruction(h, m.property) : new InterpolationInstruction(u, m.property));
                } else {
                    Mn.node = t;
                    Mn.attr = f;
                    Mn.bindable = m;
                    Mn.def = i;
                    o.push(d.build(Mn));
                }
                while (v < r && e.charCodeAt(++v) <= 32) ;
                a = v;
                l = void 0;
                h = void 0;
            }
        }
        $n();
        return o;
    }
    oe(t, e) {
        const i = t;
        const s = (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.toArray)(i.querySelectorAll("template[as-custom-element]"));
        const n = s.length;
        if (0 === n) return;
        if (n === i.childElementCount) throw new Error("AUR0708");
        const r = new Set;
        for (const t of s) {
            if (t.parentNode !== i) throw new Error("AUR0709");
            const s = Wn(t, r);
            const n = class LocalTemplate {};
            const o = t.content;
            const l = (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.toArray)(o.querySelectorAll("bindable"));
            const h = Bt.for(n);
            const a = new Set;
            const c = new Set;
            for (const t of l) {
                if (t.parentNode !== o) throw new Error("AUR0710");
                const e = t.getAttribute("property");
                if (null === e) throw new Error("AUR0711");
                const i = t.getAttribute("attribute");
                if (null !== i && c.has(i) || a.has(e)) throw new Error(`AUR0712:${e}+${i}`); else {
                    if (null !== i) c.add(i);
                    a.add(e);
                }
                h.add({
                    property: e,
                    attribute: null !== i && void 0 !== i ? i : void 0,
                    mode: Hn(t)
                });
                const s = t.getAttributeNames().filter((t => !jn.includes(t)));
                if (s.length > 0) ;
                o.removeChild(t);
            }
            e.ke(si.define({
                name: s,
                template: t
            }, n));
            i.removeChild(t);
        }
    }
    we(t) {
        return "INPUT" === t.nodeName && 1 === Fn[t.type];
    }
    be(t, e) {
        switch (t.nodeName) {
          case "INPUT":
            {
                const t = e;
                let i;
                let s;
                let n = 0;
                let r;
                for (let e = 0; e < t.length && n < 3; e++) {
                    r = t[e];
                    switch (r.to) {
                      case "model":
                      case "value":
                      case "matcher":
                        i = e;
                        n++;
                        break;

                      case "checked":
                        s = e;
                        n++;
                        break;
                    }
                }
                if (void 0 !== s && void 0 !== i && s < i) [t[i], t[s]] = [ t[s], t[i] ];
            }
        }
    }
    ge(t) {
        t.classList.add("au");
        return t;
    }
    ye(t, e) {
        const i = t.parentNode;
        const s = e.h("au-m");
        this.ge(i.insertBefore(s, t));
        i.removeChild(t);
        return s;
    }
}

class CompilationContext {
    constructor(t, e, i, s, n, r) {
        this.hasSlot = false;
        this.Ce = wt();
        const o = null !== s;
        this.c = e;
        this.root = null === n ? this : n;
        this.def = t;
        this.ci = i;
        this.parent = s;
        this.re = o ? s.re : e.get(Tn);
        this.de = o ? s.de : e.get(Ut);
        this.ep = o ? s.ep : e.get(_aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.IExpressionParser);
        this.m = o ? s.m : e.get(Zt);
        this.Ft = o ? s.Ft : e.get(_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.ILogger);
        this.p = o ? s.p : e.get(Kt);
        this.localEls = o ? s.localEls : new Set;
        this.rows = null !== r && void 0 !== r ? r : [];
    }
    ke(t) {
        var e;
        var i;
        (null !== (e = (i = this.root).deps) && void 0 !== e ? e : i.deps = []).push(t);
        this.root.c.register(t);
    }
    h(t) {
        const e = this.p.document.createElement(t);
        if ("template" === t) this.p.document.adoptNode(e.content);
        return e;
    }
    ae(t) {
        return this.c.find(si, t);
    }
    ue(t) {
        return this.c.find(Me, t);
    }
    xe(t) {
        return new CompilationContext(this.def, this.c, this.ci, this, this.root, t);
    }
    ce(t) {
        if (this.root !== this) return this.root.ce(t);
        const e = t.command;
        if (null === e) return null;
        let i = this.Ce[e];
        if (void 0 === i) {
            i = this.c.create(mn, e);
            if (null === i) throw new Error(`AUR0713:${e}`);
            this.Ce[e] = i;
        }
        return i;
    }
}

function On(t) {
    const e = t.length;
    let i = 0;
    let s = 0;
    while (e > s) {
        i = t.charCodeAt(s);
        if (92 === i) ++s; else if (58 === i) return true; else if (36 === i && 123 === t.charCodeAt(s + 1)) return false;
        ++s;
    }
    return false;
}

function $n() {
    Mn.node = Mn.attr = Mn.bindable = Mn.def = null;
}

const Ln = {
    projections: null
};

const qn = {
    name: "unnamed"
};

const Mn = {
    node: null,
    attr: null,
    bindable: null,
    def: null
};

const Un = Object.assign(wt(), {
    id: true,
    name: true,
    "au-slot": true,
    "as-element": true
});

const Fn = {
    checkbox: 1,
    radio: 1
};

const Vn = new WeakMap;

class BindablesInfo {
    constructor(t, e, i) {
        this.attrs = t;
        this.bindables = e;
        this.primary = i;
    }
    static from(t, e) {
        let i = Vn.get(t);
        if (null == i) {
            const s = t.bindables;
            const n = wt();
            const r = e ? void 0 === t.defaultBindingMode ? _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.BindingMode.default : t.defaultBindingMode : _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.BindingMode.default;
            let o;
            let l;
            let h = false;
            let a;
            let c;
            for (l in s) {
                o = s[l];
                c = o.attribute;
                if (true === o.primary) {
                    if (h) throw new Error(`AUR0714:${t.name}`);
                    h = true;
                    a = o;
                } else if (!h && null == a) a = o;
                n[c] = BindableDefinition.create(l, t.Type, o);
            }
            if (null == o && e) a = n.value = BindableDefinition.create("value", t.Type, {
                mode: r
            });
            Vn.set(t, i = new BindablesInfo(n, s, a));
        }
        return i;
    }
}

var _n;

(function(t) {
    t["property"] = "property";
    t["attribute"] = "attribute";
    t["mode"] = "mode";
})(_n || (_n = {}));

const jn = Object.freeze([ "property", "attribute", "mode" ]);

const Nn = "as-custom-element";

function Wn(t, e) {
    const i = t.getAttribute(Nn);
    if (null === i || "" === i) throw new Error("AUR0715");
    if (e.has(i)) throw new Error(`AUR0716:${i}`); else {
        e.add(i);
        t.removeAttribute(Nn);
    }
    return i;
}

function Hn(t) {
    switch (t.getAttribute("mode")) {
      case "oneTime":
        return _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.BindingMode.oneTime;

      case "toView":
        return _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.BindingMode.toView;

      case "fromView":
        return _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.BindingMode.fromView;

      case "twoWay":
        return _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.BindingMode.twoWay;

      case "default":
      default:
        return _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.BindingMode.default;
    }
}

const zn = _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.DI.createInterface("ITemplateCompilerHooks");

const Gn = new WeakMap;

const Xn = mt("compiler-hooks");

const Kn = Object.freeze({
    name: Xn,
    define(t) {
        let e = Gn.get(t);
        if (void 0 === e) {
            Gn.set(t, e = new TemplateCompilerHooksDefinition(t));
            ct(Xn, e, t);
            vt(t, Xn);
        }
        return t;
    }
});

class TemplateCompilerHooksDefinition {
    constructor(t) {
        this.Type = t;
    }
    get name() {
        return "";
    }
    register(t) {
        t.register(_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.Registration.singleton(zn, this.Type));
    }
}

const Yn = t => {
    return void 0 === t ? e : e(t);
    function e(t) {
        return Kn.define(t);
    }
};

const Qn = si.generateName;

class BindingModeBehavior {
    constructor(t) {
        this.mode = t;
        this.Ae = new Map;
    }
    bind(t, e, i) {
        this.Ae.set(i, i.mode);
        i.mode = this.mode;
    }
    unbind(t, e, i) {
        i.mode = this.Ae.get(i);
        this.Ae.delete(i);
    }
}

class OneTimeBindingBehavior extends BindingModeBehavior {
    constructor() {
        super(_aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.BindingMode.oneTime);
    }
}

class ToViewBindingBehavior extends BindingModeBehavior {
    constructor() {
        super(_aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.BindingMode.toView);
    }
}

class FromViewBindingBehavior extends BindingModeBehavior {
    constructor() {
        super(_aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.BindingMode.fromView);
    }
}

class TwoWayBindingBehavior extends BindingModeBehavior {
    constructor() {
        super(_aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.BindingMode.twoWay);
    }
}

(0,_aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.bindingBehavior)("oneTime")(OneTimeBindingBehavior);

(0,_aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.bindingBehavior)("toView")(ToViewBindingBehavior);

(0,_aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.bindingBehavior)("fromView")(FromViewBindingBehavior);

(0,_aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.bindingBehavior)("twoWay")(TwoWayBindingBehavior);

const Zn = 200;

class DebounceBindingBehavior extends _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.BindingInterceptor {
    constructor(t, e) {
        super(t, e);
        this.opts = {
            delay: Zn
        };
        this.firstArg = null;
        this.task = null;
        this.taskQueue = t.locator.get(_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.IPlatform).taskQueue;
        if (e.args.length > 0) this.firstArg = e.args[0];
    }
    callSource(t) {
        this.queueTask((() => this.binding.callSource(t)));
        return;
    }
    handleChange(t, e, i) {
        if (null !== this.task) {
            this.task.cancel();
            this.task = null;
        }
        this.binding.handleChange(t, e, i);
    }
    updateSource(t, e) {
        this.queueTask((() => this.binding.updateSource(t, e)));
    }
    queueTask(t) {
        const e = this.task;
        this.task = this.taskQueue.queueTask((() => {
            this.task = null;
            return t();
        }), this.opts);
        null === e || void 0 === e ? void 0 : e.cancel();
    }
    $bind(t, e) {
        if (null !== this.firstArg) {
            const i = Number(this.firstArg.evaluate(t, e, this.locator, null));
            this.opts.delay = isNaN(i) ? Zn : i;
        }
        this.binding.$bind(t, e);
    }
    $unbind(t) {
        var e;
        null === (e = this.task) || void 0 === e ? void 0 : e.cancel();
        this.task = null;
        this.binding.$unbind(t);
    }
}

(0,_aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.bindingBehavior)("debounce")(DebounceBindingBehavior);

class SignalBindingBehavior {
    constructor(t) {
        this.Zt = new Map;
        this.Se = t;
    }
    bind(t, e, i, ...s) {
        if (!("handleChange" in i)) throw new Error("AUR0817");
        if (0 === s.length) throw new Error("AUR0818");
        this.Zt.set(i, s);
        let n;
        for (n of s) this.Se.addSignalListener(n, i);
    }
    unbind(t, e, i) {
        const s = this.Zt.get(i);
        this.Zt.delete(i);
        let n;
        for (n of s) this.Se.removeSignalListener(n, i);
    }
}

SignalBindingBehavior.inject = [ _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.ISignaler ];

(0,_aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.bindingBehavior)("signal")(SignalBindingBehavior);

const Jn = 200;

class ThrottleBindingBehavior extends _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.BindingInterceptor {
    constructor(t, e) {
        super(t, e);
        this.opts = {
            delay: Jn
        };
        this.firstArg = null;
        this.task = null;
        this.lastCall = 0;
        this.delay = 0;
        this.p = t.locator.get(_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.IPlatform);
        this.Re = this.p.taskQueue;
        if (e.args.length > 0) this.firstArg = e.args[0];
    }
    callSource(t) {
        this.Ee((() => this.binding.callSource(t)));
        return;
    }
    handleChange(t, e, i) {
        if (null !== this.task) {
            this.task.cancel();
            this.task = null;
            this.lastCall = this.p.performanceNow();
        }
        this.binding.handleChange(t, e, i);
    }
    updateSource(t, e) {
        this.Ee((() => this.binding.updateSource(t, e)));
    }
    Ee(t) {
        const e = this.opts;
        const i = this.p;
        const s = this.lastCall + e.delay - i.performanceNow();
        if (s > 0) {
            const n = this.task;
            e.delay = s;
            this.task = this.Re.queueTask((() => {
                this.lastCall = i.performanceNow();
                this.task = null;
                e.delay = this.delay;
                t();
            }), e);
            null === n || void 0 === n ? void 0 : n.cancel();
        } else {
            this.lastCall = i.performanceNow();
            t();
        }
    }
    $bind(t, e) {
        if (null !== this.firstArg) {
            const i = Number(this.firstArg.evaluate(t, e, this.locator, null));
            this.opts.delay = this.delay = isNaN(i) ? Jn : i;
        }
        this.binding.$bind(t, e);
    }
    $unbind(t) {
        var e;
        null === (e = this.task) || void 0 === e ? void 0 : e.cancel();
        this.task = null;
        super.$unbind(t);
    }
}

(0,_aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.bindingBehavior)("throttle")(ThrottleBindingBehavior);

class DataAttributeAccessor {
    constructor() {
        this.type = 2 | 4;
    }
    getValue(t, e) {
        return t.getAttribute(e);
    }
    setValue(t, e, i, s) {
        if (void 0 == t) i.removeAttribute(s); else i.setAttribute(s, t);
    }
}

const tr = new DataAttributeAccessor;

class AttrBindingBehavior {
    bind(t, e, i) {
        i.targetObserver = tr;
    }
    unbind(t, e, i) {
        return;
    }
}

(0,_aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.bindingBehavior)("attr")(AttrBindingBehavior);

function er(t) {
    const e = t.composedPath()[0];
    if (this.target !== e) return;
    return this.selfEventCallSource(t);
}

class SelfBindingBehavior {
    bind(t, e, i) {
        if (!i.callSource || !i.targetEvent) throw new Error("AUR0801");
        i.selfEventCallSource = i.callSource;
        i.callSource = er;
    }
    unbind(t, e, i) {
        i.callSource = i.selfEventCallSource;
        i.selfEventCallSource = null;
    }
}

(0,_aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.bindingBehavior)("self")(SelfBindingBehavior);

const ir = wt();

class AttributeNSAccessor {
    constructor(t) {
        this.ns = t;
        this.type = 2 | 4;
    }
    static forNs(t) {
        var e;
        return null !== (e = ir[t]) && void 0 !== e ? e : ir[t] = new AttributeNSAccessor(t);
    }
    getValue(t, e) {
        return t.getAttributeNS(this.ns, e);
    }
    setValue(t, e, i, s) {
        if (void 0 == t) i.removeAttributeNS(this.ns, s); else i.setAttributeNS(this.ns, s, t);
    }
}

function sr(t, e) {
    return t === e;
}

class CheckedObserver {
    constructor(t, e, i, s) {
        this.handler = i;
        this.type = 2 | 1 | 4;
        this.v = void 0;
        this.ov = void 0;
        this.Be = void 0;
        this.Ie = void 0;
        this.f = 0;
        this.o = t;
        this.oL = s;
    }
    getValue() {
        return this.v;
    }
    setValue(t, e) {
        const i = this.v;
        if (t === i) return;
        this.v = t;
        this.ov = i;
        this.f = e;
        this.Te();
        this.De();
        this.queue.add(this);
    }
    handleCollectionChange(t, e) {
        this.De();
    }
    handleChange(t, e, i) {
        this.De();
    }
    De() {
        const t = this.v;
        const e = this.o;
        const i = bt.call(e, "model") ? e.model : e.value;
        const s = "radio" === e.type;
        const n = void 0 !== e.matcher ? e.matcher : sr;
        if (s) e.checked = !!n(t, i); else if (true === t) e.checked = true; else {
            let s = false;
            if (t instanceof Array) s = -1 !== t.findIndex((t => !!n(t, i))); else if (t instanceof Set) {
                for (const e of t) if (n(e, i)) {
                    s = true;
                    break;
                }
            } else if (t instanceof Map) for (const e of t) {
                const t = e[0];
                const r = e[1];
                if (n(t, i) && true === r) {
                    s = true;
                    break;
                }
            }
            e.checked = s;
        }
    }
    handleEvent() {
        let t = this.ov = this.v;
        const e = this.o;
        const i = bt.call(e, "model") ? e.model : e.value;
        const s = e.checked;
        const n = void 0 !== e.matcher ? e.matcher : sr;
        if ("checkbox" === e.type) {
            if (t instanceof Array) {
                const e = t.findIndex((t => !!n(t, i)));
                if (s && -1 === e) t.push(i); else if (!s && -1 !== e) t.splice(e, 1);
                return;
            } else if (t instanceof Set) {
                const e = {};
                let r = e;
                for (const e of t) if (true === n(e, i)) {
                    r = e;
                    break;
                }
                if (s && r === e) t.add(i); else if (!s && r !== e) t.delete(r);
                return;
            } else if (t instanceof Map) {
                let e;
                for (const s of t) {
                    const t = s[0];
                    if (true === n(t, i)) {
                        e = t;
                        break;
                    }
                }
                t.set(e, s);
                return;
            }
            t = s;
        } else if (s) t = i; else return;
        this.v = t;
        this.queue.add(this);
    }
    start() {
        this.handler.subscribe(this.o, this);
        this.Te();
    }
    stop() {
        var t, e;
        this.handler.dispose();
        null === (t = this.Be) || void 0 === t ? void 0 : t.unsubscribe(this);
        this.Be = void 0;
        null === (e = this.Ie) || void 0 === e ? void 0 : e.unsubscribe(this);
    }
    subscribe(t) {
        if (this.subs.add(t) && 1 === this.subs.count) this.start();
    }
    unsubscribe(t) {
        if (this.subs.remove(t) && 0 === this.subs.count) this.stop();
    }
    flush() {
        nr = this.ov;
        this.ov = this.v;
        this.subs.notify(this.v, nr, this.f);
    }
    Te() {
        var t, e, i, s, n, r, o;
        const l = this.o;
        null === (n = null !== (t = this.Ie) && void 0 !== t ? t : this.Ie = null !== (i = null === (e = l.$observers) || void 0 === e ? void 0 : e.model) && void 0 !== i ? i : null === (s = l.$observers) || void 0 === s ? void 0 : s.value) || void 0 === n ? void 0 : n.subscribe(this);
        null === (r = this.Be) || void 0 === r ? void 0 : r.unsubscribe(this);
        this.Be = void 0;
        if ("checkbox" === l.type) null === (o = this.Be = gr(this.v, this.oL)) || void 0 === o ? void 0 : o.subscribe(this);
    }
}

(0,_aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.subscriberCollection)(CheckedObserver);

(0,_aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.withFlushQueue)(CheckedObserver);

let nr;

const rr = Object.prototype.hasOwnProperty;

const or = {
    childList: true,
    subtree: true,
    characterData: true
};

function lr(t, e) {
    return t === e;
}

class SelectValueObserver {
    constructor(t, e, i, s) {
        this.type = 2 | 1 | 4;
        this.v = void 0;
        this.ov = void 0;
        this.H = false;
        this.Pe = void 0;
        this.Oe = void 0;
        this.iO = false;
        this.o = t;
        this.oL = s;
        this.handler = i;
    }
    getValue() {
        return this.iO ? this.v : this.o.multiple ? hr(this.o.options) : this.o.value;
    }
    setValue(t, e) {
        this.ov = this.v;
        this.v = t;
        this.H = t !== this.ov;
        this.$e(t instanceof Array ? t : null);
        if (0 === (256 & e)) this.K();
    }
    K() {
        if (this.H) {
            this.H = false;
            this.syncOptions();
        }
    }
    handleCollectionChange() {
        this.syncOptions();
    }
    syncOptions() {
        var t;
        const e = this.v;
        const i = this.o;
        const s = Array.isArray(e);
        const n = null !== (t = i.matcher) && void 0 !== t ? t : lr;
        const r = i.options;
        let o = r.length;
        while (o-- > 0) {
            const t = r[o];
            const i = rr.call(t, "model") ? t.model : t.value;
            if (s) {
                t.selected = -1 !== e.findIndex((t => !!n(i, t)));
                continue;
            }
            t.selected = !!n(i, e);
        }
    }
    syncValue() {
        const t = this.o;
        const e = t.options;
        const i = e.length;
        const s = this.v;
        let n = 0;
        if (t.multiple) {
            if (!(s instanceof Array)) return true;
            let r;
            const o = t.matcher || lr;
            const l = [];
            while (n < i) {
                r = e[n];
                if (r.selected) l.push(rr.call(r, "model") ? r.model : r.value);
                ++n;
            }
            let h;
            n = 0;
            while (n < s.length) {
                h = s[n];
                if (-1 === l.findIndex((t => !!o(h, t)))) s.splice(n, 1); else ++n;
            }
            n = 0;
            while (n < l.length) {
                h = l[n];
                if (-1 === s.findIndex((t => !!o(h, t)))) s.push(h);
                ++n;
            }
            return false;
        }
        let r = null;
        let o;
        while (n < i) {
            o = e[n];
            if (o.selected) {
                r = rr.call(o, "model") ? o.model : o.value;
                break;
            }
            ++n;
        }
        this.ov = this.v;
        this.v = r;
        return true;
    }
    Le() {
        (this.Oe = new this.o.ownerDocument.defaultView.MutationObserver(this.qe.bind(this))).observe(this.o, or);
        this.$e(this.v instanceof Array ? this.v : null);
        this.iO = true;
    }
    Me() {
        var t;
        this.Oe.disconnect();
        null === (t = this.Pe) || void 0 === t ? void 0 : t.unsubscribe(this);
        this.Oe = this.Pe = void 0;
        this.iO = false;
    }
    $e(t) {
        var e;
        null === (e = this.Pe) || void 0 === e ? void 0 : e.unsubscribe(this);
        this.Pe = void 0;
        if (null != t) {
            if (!this.o.multiple) throw new Error("AUR0654");
            (this.Pe = this.oL.getArrayObserver(t)).subscribe(this);
        }
    }
    handleEvent() {
        const t = this.syncValue();
        if (t) this.queue.add(this);
    }
    qe(t) {
        this.syncOptions();
        const e = this.syncValue();
        if (e) this.queue.add(this);
    }
    subscribe(t) {
        if (this.subs.add(t) && 1 === this.subs.count) {
            this.handler.subscribe(this.o, this);
            this.Le();
        }
    }
    unsubscribe(t) {
        if (this.subs.remove(t) && 0 === this.subs.count) {
            this.handler.dispose();
            this.Me();
        }
    }
    flush() {
        ar = this.ov;
        this.ov = this.v;
        this.subs.notify(this.v, ar, 0);
    }
}

(0,_aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.subscriberCollection)(SelectValueObserver);

(0,_aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.withFlushQueue)(SelectValueObserver);

function hr(t) {
    const e = [];
    if (0 === t.length) return e;
    const i = t.length;
    let s = 0;
    let n;
    while (i > s) {
        n = t[s];
        if (n.selected) e[e.length] = rr.call(n, "model") ? n.model : n.value;
        ++s;
    }
    return e;
}

let ar;

const cr = "--";

class StyleAttributeAccessor {
    constructor(t) {
        this.obj = t;
        this.type = 2 | 4;
        this.value = "";
        this.ov = "";
        this.styles = {};
        this.version = 0;
        this.H = false;
    }
    getValue() {
        return this.obj.style.cssText;
    }
    setValue(t, e) {
        this.value = t;
        this.H = t !== this.ov;
        if (0 === (256 & e)) this.K();
    }
    Ue(t) {
        const e = [];
        const i = /url\([^)]+$/;
        let s = 0;
        let n = "";
        let r;
        let o;
        let l;
        let h;
        while (s < t.length) {
            r = t.indexOf(";", s);
            if (-1 === r) r = t.length;
            n += t.substring(s, r);
            s = r + 1;
            if (i.test(n)) {
                n += ";";
                continue;
            }
            o = n.indexOf(":");
            l = n.substring(0, o).trim();
            h = n.substring(o + 1).trim();
            e.push([ l, h ]);
            n = "";
        }
        return e;
    }
    Fe(t) {
        let e;
        let i;
        const s = [];
        for (i in t) {
            e = t[i];
            if (null == e) continue;
            if (At(e)) {
                if (i.startsWith(cr)) {
                    s.push([ i, e ]);
                    continue;
                }
                s.push([ (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.kebabCase)(i), e ]);
                continue;
            }
            s.push(...this.Ve(e));
        }
        return s;
    }
    _e(t) {
        const e = t.length;
        if (e > 0) {
            const i = [];
            let s = 0;
            for (;e > s; ++s) i.push(...this.Ve(t[s]));
            return i;
        }
        return _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.emptyArray;
    }
    Ve(t) {
        if (At(t)) return this.Ue(t);
        if (t instanceof Array) return this._e(t);
        if (t instanceof Object) return this.Fe(t);
        return _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.emptyArray;
    }
    K() {
        if (this.H) {
            this.H = false;
            const t = this.value;
            const e = this.styles;
            const i = this.Ve(t);
            let s;
            let n = this.version;
            this.ov = t;
            let r;
            let o;
            let l;
            let h = 0;
            const a = i.length;
            for (;h < a; ++h) {
                r = i[h];
                o = r[0];
                l = r[1];
                this.setProperty(o, l);
                e[o] = n;
            }
            this.styles = e;
            this.version += 1;
            if (0 === n) return;
            n -= 1;
            for (s in e) {
                if (!Object.prototype.hasOwnProperty.call(e, s) || e[s] !== n) continue;
                this.obj.style.removeProperty(s);
            }
        }
    }
    setProperty(t, e) {
        let i = "";
        if (null != e && Ct(e.indexOf) && e.includes("!important")) {
            i = "important";
            e = e.replace("!important", "");
        }
        this.obj.style.setProperty(t, e, i);
    }
    bind(t) {
        this.value = this.ov = this.obj.style.cssText;
    }
}

class ValueAttributeObserver {
    constructor(t, e, i) {
        this.handler = i;
        this.type = 2 | 1 | 4;
        this.v = "";
        this.ov = "";
        this.H = false;
        this.o = t;
        this.k = e;
    }
    getValue() {
        return this.v;
    }
    setValue(t, e) {
        if (Object.is(t, this.v)) return;
        this.ov = this.v;
        this.v = t;
        this.H = true;
        if (!this.handler.config.readonly && 0 === (256 & e)) this.K(e);
    }
    K(t) {
        var e;
        if (this.H) {
            this.H = false;
            this.o[this.k] = null !== (e = this.v) && void 0 !== e ? e : this.handler.config.default;
            if (0 === (2 & t)) this.queue.add(this);
        }
    }
    handleEvent() {
        this.ov = this.v;
        this.v = this.o[this.k];
        if (this.ov !== this.v) {
            this.H = false;
            this.queue.add(this);
        }
    }
    subscribe(t) {
        if (this.subs.add(t) && 1 === this.subs.count) {
            this.handler.subscribe(this.o, this);
            this.v = this.ov = this.o[this.k];
        }
    }
    unsubscribe(t) {
        if (this.subs.remove(t) && 0 === this.subs.count) this.handler.dispose();
    }
    flush() {
        ur = this.ov;
        this.ov = this.v;
        this.subs.notify(this.v, ur, 0);
    }
}

(0,_aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.subscriberCollection)(ValueAttributeObserver);

(0,_aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.withFlushQueue)(ValueAttributeObserver);

let ur;

const fr = "http://www.w3.org/1999/xlink";

const dr = "http://www.w3.org/XML/1998/namespace";

const mr = "http://www.w3.org/2000/xmlns/";

const vr = Object.assign(wt(), {
    "xlink:actuate": [ "actuate", fr ],
    "xlink:arcrole": [ "arcrole", fr ],
    "xlink:href": [ "href", fr ],
    "xlink:role": [ "role", fr ],
    "xlink:show": [ "show", fr ],
    "xlink:title": [ "title", fr ],
    "xlink:type": [ "type", fr ],
    "xml:lang": [ "lang", dr ],
    "xml:space": [ "space", dr ],
    xmlns: [ "xmlns", mr ],
    "xmlns:xlink": [ "xlink", mr ]
});

const pr = new _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.PropertyAccessor;

pr.type = 2 | 4;

class NodeObserverConfig {
    constructor(t) {
        var e;
        this.type = null !== (e = t.type) && void 0 !== e ? e : ValueAttributeObserver;
        this.events = t.events;
        this.readonly = t.readonly;
        this.default = t.default;
    }
}

class NodeObserverLocator {
    constructor(t, e, i, s) {
        this.locator = t;
        this.platform = e;
        this.dirtyChecker = i;
        this.svgAnalyzer = s;
        this.allowDirtyCheck = true;
        this.je = wt();
        this.Ne = wt();
        this.We = wt();
        this.He = wt();
        const n = [ "change", "input" ];
        const r = {
            events: n,
            default: ""
        };
        this.useConfig({
            INPUT: {
                value: r,
                valueAsNumber: {
                    events: n,
                    default: 0
                },
                checked: {
                    type: CheckedObserver,
                    events: n
                },
                files: {
                    events: n,
                    readonly: true
                }
            },
            SELECT: {
                value: {
                    type: SelectValueObserver,
                    events: [ "change" ],
                    default: ""
                }
            },
            TEXTAREA: {
                value: r
            }
        });
        const o = {
            events: [ "change", "input", "blur", "keyup", "paste" ],
            default: ""
        };
        const l = {
            events: [ "scroll" ],
            default: 0
        };
        this.useConfigGlobal({
            scrollTop: l,
            scrollLeft: l,
            textContent: o,
            innerHTML: o
        });
        this.overrideAccessorGlobal("css", "style", "class");
        this.overrideAccessor({
            INPUT: [ "value", "checked", "model" ],
            SELECT: [ "value" ],
            TEXTAREA: [ "value" ]
        });
    }
    static register(t) {
        _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.Registration.aliasTo(_aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.INodeObserverLocator, NodeObserverLocator).register(t);
        _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.Registration.singleton(_aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.INodeObserverLocator, NodeObserverLocator).register(t);
    }
    handles(t, e) {
        return t instanceof this.platform.Node;
    }
    useConfig(t, e, i) {
        var s, n;
        const r = this.je;
        let o;
        if (At(t)) {
            o = null !== (s = r[t]) && void 0 !== s ? s : r[t] = wt();
            if (null == o[e]) o[e] = new NodeObserverConfig(i); else wr(t, e);
        } else for (const i in t) {
            o = null !== (n = r[i]) && void 0 !== n ? n : r[i] = wt();
            const s = t[i];
            for (e in s) if (null == o[e]) o[e] = new NodeObserverConfig(s[e]); else wr(i, e);
        }
    }
    useConfigGlobal(t, e) {
        const i = this.Ne;
        if ("object" === typeof t) for (const e in t) if (null == i[e]) i[e] = new NodeObserverConfig(t[e]); else wr("*", e); else if (null == i[t]) i[t] = new NodeObserverConfig(e); else wr("*", t);
    }
    getAccessor(t, e, i) {
        var s;
        if (e in this.He || e in (null !== (s = this.We[t.tagName]) && void 0 !== s ? s : _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.emptyObject)) return this.getObserver(t, e, i);
        switch (e) {
          case "src":
          case "href":
          case "role":
            return tr;

          default:
            {
                const i = vr[e];
                if (void 0 !== i) return AttributeNSAccessor.forNs(i[1]);
                if (yt(t, e, this.svgAnalyzer)) return tr;
                return pr;
            }
        }
    }
    overrideAccessor(t, e) {
        var i, s;
        var n, r;
        let o;
        if (At(t)) {
            o = null !== (i = (n = this.We)[t]) && void 0 !== i ? i : n[t] = wt();
            o[e] = true;
        } else for (const e in t) for (const i of t[e]) {
            o = null !== (s = (r = this.We)[e]) && void 0 !== s ? s : r[e] = wt();
            o[i] = true;
        }
    }
    overrideAccessorGlobal(...t) {
        for (const e of t) this.He[e] = true;
    }
    getObserver(t, e, i) {
        var s, n;
        switch (e) {
          case "role":
            return tr;

          case "class":
            return new ClassAttributeAccessor(t);

          case "css":
          case "style":
            return new StyleAttributeAccessor(t);
        }
        const r = null !== (n = null === (s = this.je[t.tagName]) || void 0 === s ? void 0 : s[e]) && void 0 !== n ? n : this.Ne[e];
        if (null != r) return new r.type(t, e, new EventSubscriber(r), i, this.locator);
        const o = vr[e];
        if (void 0 !== o) return AttributeNSAccessor.forNs(o[1]);
        if (yt(t, e, this.svgAnalyzer)) return tr;
        if (e in t.constructor.prototype) {
            if (this.allowDirtyCheck) return this.dirtyChecker.createProperty(t, e);
            throw new Error(`AUR0652:${String(e)}`);
        } else return new _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.SetterObserver(t, e);
    }
}

NodeObserverLocator.inject = [ _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.IServiceLocator, Kt, _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.IDirtyChecker, Yt ];

function gr(t, e) {
    if (t instanceof Array) return e.getArrayObserver(t);
    if (t instanceof Map) return e.getMapObserver(t);
    if (t instanceof Set) return e.getSetObserver(t);
}

function wr(t, e) {
    throw new Error(`AUR0653:${String(e)}@${t}`);
}

class UpdateTriggerBindingBehavior {
    constructor(t) {
        this.oL = t;
    }
    bind(t, e, i, ...s) {
        if (0 === s.length) throw new Error(`AUR0802`);
        if (i.mode !== _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.BindingMode.twoWay && i.mode !== _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.BindingMode.fromView) throw new Error("AUR0803");
        const n = this.oL.getObserver(i.target, i.targetProperty);
        if (!n.handler) throw new Error("AUR0804");
        i.targetObserver = n;
        const r = n.handler;
        n.originalHandler = r;
        n.handler = new EventSubscriber(new NodeObserverConfig({
            default: r.config.default,
            events: s,
            readonly: r.config.readonly
        }));
    }
    unbind(t, e, i) {
        i.targetObserver.handler.dispose();
        i.targetObserver.handler = i.targetObserver.originalHandler;
        i.targetObserver.originalHandler = null;
    }
}

UpdateTriggerBindingBehavior.inject = [ _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.IObserverLocator ];

(0,_aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.bindingBehavior)("updateTrigger")(UpdateTriggerBindingBehavior);

class Focus {
    constructor(t, e) {
        this.ze = t;
        this.p = e;
        this.Ge = false;
    }
    binding() {
        this.valueChanged();
    }
    valueChanged() {
        if (this.$controller.isActive) this.Xe(); else this.Ge = true;
    }
    attached() {
        if (this.Ge) {
            this.Ge = false;
            this.Xe();
        }
        this.ze.addEventListener("focus", this);
        this.ze.addEventListener("blur", this);
    }
    afterDetachChildren() {
        const t = this.ze;
        t.removeEventListener("focus", this);
        t.removeEventListener("blur", this);
    }
    handleEvent(t) {
        if ("focus" === t.type) this.value = true; else if (!this.Ke) this.value = false;
    }
    Xe() {
        const t = this.ze;
        const e = this.Ke;
        const i = this.value;
        if (i && !e) t.focus(); else if (!i && e) t.blur();
    }
    get Ke() {
        return this.ze === this.p.document.activeElement;
    }
}

Focus.inject = [ ns, Kt ];

ot([ St({
    mode: _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.BindingMode.twoWay
}) ], Focus.prototype, "value", void 0);

Pe("focus")(Focus);

let br = class Show {
    constructor(t, e, i) {
        this.el = t;
        this.p = e;
        this.Ye = false;
        this.Qe = null;
        this.$val = "";
        this.$prio = "";
        this.update = () => {
            this.Qe = null;
            if (Boolean(this.value) !== this.Ze) if (this.Ze === this.Je) {
                this.Ze = !this.Je;
                this.$val = this.el.style.getPropertyValue("display");
                this.$prio = this.el.style.getPropertyPriority("display");
                this.el.style.setProperty("display", "none", "important");
            } else {
                this.Ze = this.Je;
                this.el.style.setProperty("display", this.$val, this.$prio);
                if ("" === this.el.getAttribute("style")) this.el.removeAttribute("style");
            }
        };
        this.Ze = this.Je = "hide" !== i.alias;
    }
    binding() {
        this.Ye = true;
        this.update();
    }
    detaching() {
        var t;
        this.Ye = false;
        null === (t = this.Qe) || void 0 === t ? void 0 : t.cancel();
        this.Qe = null;
    }
    valueChanged() {
        if (this.Ye && null === this.Qe) this.Qe = this.p.domWriteQueue.queueTask(this.update);
    }
};

ot([ St ], br.prototype, "value", void 0);

br = ot([ lt(0, ns), lt(1, Kt), lt(2, ks) ], br);

(0,_aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.alias)("hide")(br);

Pe("show")(br);

class Portal {
    constructor(t, e, i) {
        this.id = (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.nextId)("au$component");
        this.strict = false;
        this.p = i;
        this.ti = i.document.createElement("div");
        this.view = t.create();
        cs(this.view.nodes, e);
    }
    attaching(t, e, i) {
        if (null == this.callbackContext) this.callbackContext = this.$controller.scope.bindingContext;
        const s = this.ti = this.ei();
        this.view.setHost(s);
        return this.ii(t, s, i);
    }
    detaching(t, e, i) {
        return this.si(t, this.ti, i);
    }
    targetChanged() {
        const {$controller: t} = this;
        if (!t.isActive) return;
        const e = this.ti;
        const i = this.ti = this.ei();
        if (e === i) return;
        this.view.setHost(i);
        const s = (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.onResolve)(this.si(null, i, t.flags), (() => this.ii(null, i, t.flags)));
        if (s instanceof Promise) s.catch((t => {
            throw t;
        }));
    }
    ii(t, e, i) {
        const {activating: s, callbackContext: n, view: r} = this;
        r.setHost(e);
        return (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.onResolve)(null === s || void 0 === s ? void 0 : s.call(n, e, r), (() => this.ni(t, e, i)));
    }
    ni(t, e, i) {
        const {$controller: s, view: n} = this;
        if (null === t) n.nodes.appendTo(e); else return (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.onResolve)(n.activate(null !== t && void 0 !== t ? t : n, s, i, s.scope), (() => this.ri(e)));
        return this.ri(e);
    }
    ri(t) {
        const {activated: e, callbackContext: i, view: s} = this;
        return null === e || void 0 === e ? void 0 : e.call(i, t, s);
    }
    si(t, e, i) {
        const {deactivating: s, callbackContext: n, view: r} = this;
        return (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.onResolve)(null === s || void 0 === s ? void 0 : s.call(n, e, r), (() => this.oi(t, e, i)));
    }
    oi(t, e, i) {
        const {$controller: s, view: n} = this;
        if (null === t) n.nodes.remove(); else return (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.onResolve)(n.deactivate(t, s, i), (() => this.li(e)));
        return this.li(e);
    }
    li(t) {
        const {deactivated: e, callbackContext: i, view: s} = this;
        return null === e || void 0 === e ? void 0 : e.call(i, t, s);
    }
    ei() {
        const t = this.p;
        const e = t.document;
        let i = this.target;
        let s = this.renderContext;
        if ("" === i) {
            if (this.strict) throw new Error("AUR0811");
            return e.body;
        }
        if (At(i)) {
            let n = e;
            if (At(s)) s = e.querySelector(s);
            if (s instanceof t.Node) n = s;
            i = n.querySelector(i);
        }
        if (i instanceof t.Node) return i;
        if (null == i) {
            if (this.strict) throw new Error("AUR0812");
            return e.body;
        }
        return i;
    }
    dispose() {
        this.view.dispose();
        this.view = void 0;
        this.callbackContext = null;
    }
    accept(t) {
        var e;
        if (true === (null === (e = this.view) || void 0 === e ? void 0 : e.accept(t))) return true;
    }
}

Portal.inject = [ Ai, os, Kt ];

ot([ St({
    primary: true
}) ], Portal.prototype, "target", void 0);

ot([ St({
    callback: "targetChanged"
}) ], Portal.prototype, "renderContext", void 0);

ot([ St() ], Portal.prototype, "strict", void 0);

ot([ St() ], Portal.prototype, "deactivating", void 0);

ot([ St() ], Portal.prototype, "activating", void 0);

ot([ St() ], Portal.prototype, "deactivated", void 0);

ot([ St() ], Portal.prototype, "activated", void 0);

ot([ St() ], Portal.prototype, "callbackContext", void 0);

Oe("portal")(Portal);

class FlagsTemplateController {
    constructor(t, e, i) {
        this.fs = i;
        this.id = (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.nextId)("au$component");
        this.view = t.create().setLocation(e);
    }
    attaching(t, e, i) {
        const {$controller: s} = this;
        return this.view.activate(t, s, i | this.fs, s.scope);
    }
    detaching(t, e, i) {
        return this.view.deactivate(t, this.$controller, i);
    }
    dispose() {
        this.view.dispose();
        this.view = void 0;
    }
    accept(t) {
        var e;
        if (true === (null === (e = this.view) || void 0 === e ? void 0 : e.accept(t))) return true;
    }
}

class FrequentMutations extends FlagsTemplateController {
    constructor(t, e) {
        super(t, e, 512);
    }
}

FrequentMutations.inject = [ Ai, os ];

class ObserveShallow extends FlagsTemplateController {
    constructor(t, e) {
        super(t, e, 128);
    }
}

ObserveShallow.inject = [ Ai, os ];

Oe("frequent-mutations")(FrequentMutations);

Oe("observe-shallow")(ObserveShallow);

class If {
    constructor(t, e, i) {
        this.ifFactory = t;
        this.location = e;
        this.work = i;
        this.id = (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.nextId)("au$component");
        this.elseFactory = void 0;
        this.elseView = void 0;
        this.ifView = void 0;
        this.view = void 0;
        this.value = false;
        this.cache = true;
        this.pending = void 0;
        this.hi = false;
        this.ai = 0;
    }
    attaching(t, e, i) {
        let s;
        const n = this.$controller;
        const r = this.ai++;
        const o = () => !this.hi && this.ai === r + 1;
        return (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.onResolve)(this.pending, (() => {
            var e;
            if (!o()) return;
            this.pending = void 0;
            if (this.value) s = this.view = this.ifView = this.cache && null != this.ifView ? this.ifView : this.ifFactory.create(); else s = this.view = this.elseView = this.cache && null != this.elseView ? this.elseView : null === (e = this.elseFactory) || void 0 === e ? void 0 : e.create();
            if (null == s) return;
            s.setLocation(this.location);
            this.pending = (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.onResolve)(s.activate(t, n, i, n.scope), (() => {
                if (o()) this.pending = void 0;
            }));
        }));
    }
    detaching(t, e, i) {
        this.hi = true;
        return (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.onResolve)(this.pending, (() => {
            var e;
            this.hi = false;
            this.pending = void 0;
            void (null === (e = this.view) || void 0 === e ? void 0 : e.deactivate(t, this.$controller, i));
        }));
    }
    valueChanged(t, e, i) {
        if (!this.$controller.isActive) return;
        t = !!t;
        e = !!e;
        if (t === e) return;
        this.work.start();
        const s = this.view;
        const n = this.$controller;
        const r = this.ai++;
        const o = () => !this.hi && this.ai === r + 1;
        let l;
        return (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.onResolve)((0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.onResolve)(this.pending, (() => this.pending = (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.onResolve)(null === s || void 0 === s ? void 0 : s.deactivate(s, n, i), (() => {
            var e;
            if (!o()) return;
            if (t) l = this.view = this.ifView = this.cache && null != this.ifView ? this.ifView : this.ifFactory.create(); else l = this.view = this.elseView = this.cache && null != this.elseView ? this.elseView : null === (e = this.elseFactory) || void 0 === e ? void 0 : e.create();
            if (null == l) return;
            l.setLocation(this.location);
            return (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.onResolve)(l.activate(l, n, i, n.scope), (() => {
                if (o()) this.pending = void 0;
            }));
        })))), (() => this.work.finish()));
    }
    dispose() {
        var t, e;
        null === (t = this.ifView) || void 0 === t ? void 0 : t.dispose();
        null === (e = this.elseView) || void 0 === e ? void 0 : e.dispose();
        this.ifView = this.elseView = this.view = void 0;
    }
    accept(t) {
        var e;
        if (true === (null === (e = this.view) || void 0 === e ? void 0 : e.accept(t))) return true;
    }
}

If.inject = [ Ai, os, es ];

ot([ St ], If.prototype, "value", void 0);

ot([ St({
    set: t => "" === t || !!t && "false" !== t
}) ], If.prototype, "cache", void 0);

Oe("if")(If);

class Else {
    constructor(t) {
        this.factory = t;
        this.id = (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.nextId)("au$component");
    }
    link(t, e, i, s) {
        const n = t.children;
        const r = n[n.length - 1];
        if (r instanceof If) r.elseFactory = this.factory; else if (r.viewModel instanceof If) r.viewModel.elseFactory = this.factory; else throw new Error("AUR0810");
    }
}

Else.inject = [ Ai ];

Oe({
    name: "else"
})(Else);

function xr(t) {
    t.dispose();
}

const yr = [ 38962, 36913 ];

class Repeat {
    constructor(t, e, i) {
        this.l = t;
        this.ui = e;
        this.f = i;
        this.id = (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.nextId)("au$component");
        this.views = [];
        this.key = void 0;
        this.fi = void 0;
        this.di = false;
        this.mi = false;
        this.vi = null;
        this.pi = void 0;
        this.gi = false;
    }
    binding(t, e, i) {
        const s = this.ui.bindings;
        const n = s.length;
        let r;
        let o;
        let l = 0;
        for (;n > l; ++l) {
            r = s[l];
            if (r.target === this && "items" === r.targetProperty) {
                o = this.forOf = r.sourceExpression;
                this.wi = r;
                let t = o.iterable;
                while (null != t && yr.includes(t.$kind)) {
                    t = t.expression;
                    this.di = true;
                }
                this.vi = t;
                break;
            }
        }
        this.bi(i);
        const h = o.declaration;
        if (!(this.gi = 90137 === h.$kind || 106521 === h.$kind)) this.local = h.evaluate(i, this.$controller.scope, r.locator, null);
    }
    attaching(t, e, i) {
        this.xi(i);
        return this.yi(t, i);
    }
    detaching(t, e, i) {
        this.bi(i);
        return this.ki(t, i);
    }
    itemsChanged(t) {
        const {$controller: e} = this;
        if (!e.isActive) return;
        t |= e.flags;
        this.bi(t);
        this.xi(t);
        const i = (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.onResolve)(this.ki(null, t), (() => this.yi(null, t)));
        if (i instanceof Promise) i.catch((t => {
            throw t;
        }));
    }
    handleCollectionChange(t, e) {
        const {$controller: i} = this;
        if (!i.isActive) return;
        if (this.di) {
            if (this.mi) return;
            this.mi = true;
            this.items = this.forOf.iterable.evaluate(e, i.scope, this.wi.locator, null);
            this.mi = false;
            return;
        }
        e |= i.flags;
        this.xi(e);
        if (void 0 === t) {
            const t = (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.onResolve)(this.ki(null, e), (() => this.yi(null, e)));
            if (t instanceof Promise) t.catch((t => {
                throw t;
            }));
        } else {
            const i = this.views.length;
            (0,_aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.applyMutationsToIndices)(t);
            if (t.deletedItems.length > 0) {
                t.deletedItems.sort(_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.compareNumber);
                const s = (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.onResolve)(this.Ci(t, e), (() => this.Ai(i, t, e)));
                if (s instanceof Promise) s.catch((t => {
                    throw t;
                }));
            } else this.Ai(i, t, e);
        }
    }
    bi(t) {
        var e;
        const i = this.$controller.scope;
        let s = this.Si;
        let n = this.di;
        if (n) {
            s = this.Si = null !== (e = this.vi.evaluate(t, i, this.wi.locator, null)) && void 0 !== e ? e : null;
            n = this.di = !Object.is(this.items, s);
        }
        const r = this.fi;
        if (4 & t) {
            if (void 0 !== r) r.unsubscribe(this);
        } else if (this.$controller.isActive) {
            const t = this.fi = (0,_aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.getCollectionObserver)(n ? s : this.items);
            if (r !== t && r) r.unsubscribe(this);
            if (t) t.subscribe(this);
        }
    }
    xi(t) {
        const e = this.items;
        if (e instanceof Array) {
            this.pi = e;
            return;
        }
        const i = this.forOf;
        if (void 0 === i) return;
        const s = [];
        this.forOf.iterate(t, e, ((t, e, i) => {
            s[e] = i;
        }));
        this.pi = s;
    }
    yi(t, e) {
        let i;
        let s;
        let n;
        let r;
        const {$controller: o, f: l, local: h, l: a, items: c} = this;
        const u = o.scope;
        const f = this.forOf;
        const d = f.count(e, c);
        const m = this.views = Array(d);
        f.iterate(e, c, ((c, v, p) => {
            n = m[v] = l.create().setLocation(a);
            n.nodes.unlink();
            if (this.gi) f.declaration.assign(e, r = _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.Scope.fromParent(u, _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.BindingContext.create()), this.wi.locator, p); else r = _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.Scope.fromParent(u, _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.BindingContext.create(h, p));
            Rr(r.overrideContext, v, d);
            s = n.activate(null !== t && void 0 !== t ? t : n, o, e, r);
            if (s instanceof Promise) (null !== i && void 0 !== i ? i : i = []).push(s);
        }));
        if (void 0 !== i) return 1 === i.length ? i[0] : Promise.all(i);
    }
    ki(t, e) {
        let i;
        let s;
        let n;
        let r = 0;
        const {views: o, $controller: l} = this;
        const h = o.length;
        for (;h > r; ++r) {
            n = o[r];
            n.release();
            s = n.deactivate(null !== t && void 0 !== t ? t : n, l, e);
            if (s instanceof Promise) (null !== i && void 0 !== i ? i : i = []).push(s);
        }
        if (void 0 !== i) return 1 === i.length ? i[0] : Promise.all(i);
    }
    Ci(t, e) {
        let i;
        let s;
        let n;
        const {$controller: r, views: o} = this;
        const l = t.deletedItems;
        const h = l.length;
        let a = 0;
        for (;h > a; ++a) {
            n = o[l[a]];
            n.release();
            s = n.deactivate(n, r, e);
            if (s instanceof Promise) (null !== i && void 0 !== i ? i : i = []).push(s);
        }
        a = 0;
        let c = 0;
        for (;h > a; ++a) {
            c = l[a] - a;
            o.splice(c, 1);
        }
        if (void 0 !== i) return 1 === i.length ? i[0] : Promise.all(i);
    }
    Ai(t, e, i) {
        var s;
        let n;
        let r;
        let o;
        let l;
        let h = 0;
        const {$controller: a, f: c, local: u, pi: f, l: d, views: m} = this;
        const v = e.length;
        for (;v > h; ++h) if (-2 === e[h]) {
            o = c.create();
            m.splice(h, 0, o);
        }
        if (m.length !== v) throw new Error(`AUR0814:${m.length}!=${v}`);
        const p = a.scope;
        const g = e.length;
        (0,_aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.synchronizeIndices)(m, e);
        const w = Sr(e);
        const b = w.length;
        let x;
        let y = b - 1;
        h = g - 1;
        for (;h >= 0; --h) {
            o = m[h];
            x = m[h + 1];
            o.nodes.link(null !== (s = null === x || void 0 === x ? void 0 : x.nodes) && void 0 !== s ? s : d);
            if (-2 === e[h]) {
                if (this.gi) this.forOf.declaration.assign(i, l = _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.Scope.fromParent(p, _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.BindingContext.create()), this.wi.locator, f[h]); else l = _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.Scope.fromParent(p, _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.BindingContext.create(u, f[h]));
                Rr(l.overrideContext, h, g);
                o.setLocation(d);
                r = o.activate(o, a, i, l);
                if (r instanceof Promise) (null !== n && void 0 !== n ? n : n = []).push(r);
            } else if (y < 0 || 1 === b || h !== w[y]) {
                Rr(o.scope.overrideContext, h, g);
                o.nodes.insertBefore(o.location);
            } else {
                if (t !== g) Rr(o.scope.overrideContext, h, g);
                --y;
            }
        }
        if (void 0 !== n) return 1 === n.length ? n[0] : Promise.all(n);
    }
    dispose() {
        this.views.forEach(xr);
        this.views = void 0;
    }
    accept(t) {
        const {views: e} = this;
        if (void 0 !== e) for (let i = 0, s = e.length; i < s; ++i) if (true === e[i].accept(t)) return true;
    }
}

Repeat.inject = [ os, Xi, Ai ];

ot([ St ], Repeat.prototype, "items", void 0);

Oe("repeat")(Repeat);

let kr = 16;

let Cr = new Int32Array(kr);

let Ar = new Int32Array(kr);

function Sr(t) {
    const e = t.length;
    if (e > kr) {
        kr = e;
        Cr = new Int32Array(e);
        Ar = new Int32Array(e);
    }
    let i = 0;
    let s = 0;
    let n = 0;
    let r = 0;
    let o = 0;
    let l = 0;
    let h = 0;
    let a = 0;
    for (;r < e; r++) {
        s = t[r];
        if (-2 !== s) {
            o = Cr[i];
            n = t[o];
            if (-2 !== n && n < s) {
                Ar[r] = o;
                Cr[++i] = r;
                continue;
            }
            l = 0;
            h = i;
            while (l < h) {
                a = l + h >> 1;
                n = t[Cr[a]];
                if (-2 !== n && n < s) l = a + 1; else h = a;
            }
            n = t[Cr[l]];
            if (s < n || -2 === n) {
                if (l > 0) Ar[r] = Cr[l - 1];
                Cr[l] = r;
            }
        }
    }
    r = ++i;
    const c = new Int32Array(r);
    s = Cr[i - 1];
    while (i-- > 0) {
        c[i] = s;
        s = Ar[s];
    }
    while (r-- > 0) Cr[r] = 0;
    return c;
}

function Rr(t, e, i) {
    const s = 0 === e;
    const n = e === i - 1;
    const r = e % 2 === 0;
    t.$index = e;
    t.$first = s;
    t.$last = n;
    t.$middle = !s && !n;
    t.$even = r;
    t.$odd = !r;
    t.$length = i;
}

class With {
    constructor(t, e) {
        this.id = (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.nextId)("au$component");
        this.id = (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.nextId)("au$component");
        this.view = t.create().setLocation(e);
    }
    valueChanged(t, e, i) {
        const s = this.$controller;
        const n = this.view.bindings;
        let r;
        let o = 0, l = 0;
        if (s.isActive && null != n) {
            r = _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.Scope.fromParent(s.scope, void 0 === t ? {} : t);
            for (l = n.length; l > o; ++o) n[o].$bind(2, r);
        }
    }
    attaching(t, e, i) {
        const {$controller: s, value: n} = this;
        const r = _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.Scope.fromParent(s.scope, void 0 === n ? {} : n);
        return this.view.activate(t, s, i, r);
    }
    detaching(t, e, i) {
        return this.view.deactivate(t, this.$controller, i);
    }
    dispose() {
        this.view.dispose();
        this.view = void 0;
    }
    accept(t) {
        var e;
        if (true === (null === (e = this.view) || void 0 === e ? void 0 : e.accept(t))) return true;
    }
}

With.inject = [ Ai, os ];

ot([ St ], With.prototype, "value", void 0);

Oe("with")(With);

let Er = class Switch {
    constructor(t, e) {
        this.f = t;
        this.l = e;
        this.id = (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.nextId)("au$component");
        this.cases = [];
        this.activeCases = [];
        this.promise = void 0;
    }
    link(t, e, i, s) {
        this.view = this.f.create(this.$controller).setLocation(this.l);
    }
    attaching(t, e, i) {
        const s = this.view;
        const n = this.$controller;
        this.queue((() => s.activate(t, n, i, n.scope)));
        this.queue((() => this.swap(t, i, this.value)));
        return this.promise;
    }
    detaching(t, e, i) {
        this.queue((() => {
            const e = this.view;
            return e.deactivate(t, this.$controller, i);
        }));
        return this.promise;
    }
    dispose() {
        var t;
        null === (t = this.view) || void 0 === t ? void 0 : t.dispose();
        this.view = void 0;
    }
    valueChanged(t, e, i) {
        if (!this.$controller.isActive) return;
        this.queue((() => this.swap(null, i, this.value)));
    }
    caseChanged(t, e) {
        this.queue((() => this.Ri(t, e)));
    }
    Ri(t, e) {
        const i = t.isMatch(this.value, e);
        const s = this.activeCases;
        const n = s.length;
        if (!i) {
            if (n > 0 && s[0].id === t.id) return this.Ei(null, e);
            return;
        }
        if (n > 0 && s[0].id < t.id) return;
        const r = [];
        let o = t.fallThrough;
        if (!o) r.push(t); else {
            const e = this.cases;
            const i = e.indexOf(t);
            for (let t = i, s = e.length; t < s && o; t++) {
                const i = e[t];
                r.push(i);
                o = i.fallThrough;
            }
        }
        return (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.onResolve)(this.Ei(null, e, r), (() => {
            this.activeCases = r;
            return this.Bi(null, e);
        }));
    }
    swap(t, e, i) {
        const s = [];
        let n = false;
        for (const t of this.cases) {
            if (n || t.isMatch(i, e)) {
                s.push(t);
                n = t.fallThrough;
            }
            if (s.length > 0 && !n) break;
        }
        const r = this.defaultCase;
        if (0 === s.length && void 0 !== r) s.push(r);
        return (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.onResolve)(this.activeCases.length > 0 ? this.Ei(t, e, s) : void 0, (() => {
            this.activeCases = s;
            if (0 === s.length) return;
            return this.Bi(t, e);
        }));
    }
    Bi(t, e) {
        const i = this.$controller;
        if (!i.isActive) return;
        const s = this.activeCases;
        const n = s.length;
        if (0 === n) return;
        const r = i.scope;
        if (1 === n) return s[0].activate(t, e, r);
        return (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.resolveAll)(...s.map((i => i.activate(t, e, r))));
    }
    Ei(t, e, i = []) {
        const s = this.activeCases;
        const n = s.length;
        if (0 === n) return;
        if (1 === n) {
            const n = s[0];
            if (!i.includes(n)) {
                s.length = 0;
                return n.deactivate(t, e);
            }
            return;
        }
        return (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.onResolve)((0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.resolveAll)(...s.reduce(((s, n) => {
            if (!i.includes(n)) s.push(n.deactivate(t, e));
            return s;
        }), [])), (() => {
            s.length = 0;
        }));
    }
    queue(t) {
        const e = this.promise;
        let i;
        i = this.promise = (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.onResolve)((0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.onResolve)(e, t), (() => {
            if (this.promise === i) this.promise = void 0;
        }));
    }
    accept(t) {
        if (true === this.$controller.accept(t)) return true;
        if (this.activeCases.some((e => e.accept(t)))) return true;
    }
};

ot([ St ], Er.prototype, "value", void 0);

Er = ot([ Oe("switch"), lt(0, Ai), lt(1, os) ], Er);

let Br = class Case {
    constructor(t, e, i, s) {
        this.Ii = e;
        this.id = (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.nextId)("au$component");
        this.fallThrough = false;
        this.Ti = s.config.level <= 1;
        this.Ft = s.scopeTo(`${this.constructor.name}-#${this.id}`);
        this.view = t.create().setLocation(i);
    }
    link(t, e, i, s) {
        const n = t.parent;
        const r = null === n || void 0 === n ? void 0 : n.viewModel;
        if (r instanceof Er) {
            this.$switch = r;
            this.linkToSwitch(r);
        } else throw new Error("AUR0815");
    }
    detaching(t, e, i) {
        return this.deactivate(t, i);
    }
    isMatch(t, e) {
        this.Ft.debug("isMatch()");
        const i = this.value;
        if (Array.isArray(i)) {
            if (void 0 === this.fi) this.fi = this.Di(e, i);
            return i.includes(t);
        }
        return i === t;
    }
    valueChanged(t, e, i) {
        var s;
        if (Array.isArray(t)) {
            null === (s = this.fi) || void 0 === s ? void 0 : s.unsubscribe(this);
            this.fi = this.Di(i, t);
        } else if (void 0 !== this.fi) this.fi.unsubscribe(this);
        this.$switch.caseChanged(this, i);
    }
    handleCollectionChange(t, e) {
        this.$switch.caseChanged(this, e);
    }
    activate(t, e, i) {
        const s = this.view;
        if (s.isActive) return;
        return s.activate(null !== t && void 0 !== t ? t : s, this.$controller, e, i);
    }
    deactivate(t, e) {
        const i = this.view;
        if (!i.isActive) return;
        return i.deactivate(null !== t && void 0 !== t ? t : i, this.$controller, e);
    }
    dispose() {
        var t, e;
        null === (t = this.fi) || void 0 === t ? void 0 : t.unsubscribe(this);
        null === (e = this.view) || void 0 === e ? void 0 : e.dispose();
        this.view = void 0;
    }
    linkToSwitch(t) {
        t.cases.push(this);
    }
    Di(t, e) {
        const i = this.Ii.getArrayObserver(e);
        i.subscribe(this);
        return i;
    }
    accept(t) {
        var e;
        if (true === this.$controller.accept(t)) return true;
        return null === (e = this.view) || void 0 === e ? void 0 : e.accept(t);
    }
};

Br.inject = [ Ai, _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.IObserverLocator, os, _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.ILogger ];

ot([ St ], Br.prototype, "value", void 0);

ot([ St({
    set: t => {
        switch (t) {
          case "true":
            return true;

          case "false":
            return false;

          default:
            return !!t;
        }
    },
    mode: _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.BindingMode.oneTime
}) ], Br.prototype, "fallThrough", void 0);

Br = ot([ Oe("case") ], Br);

let Ir = class DefaultCase extends Br {
    linkToSwitch(t) {
        if (void 0 !== t.defaultCase) throw new Error("AUR0816");
        t.defaultCase = this;
    }
};

Ir = ot([ Oe("default-case") ], Ir);

let Tr = class PromiseTemplateController {
    constructor(t, e, i, s) {
        this.f = t;
        this.l = e;
        this.p = i;
        this.id = (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.nextId)("au$component");
        this.preSettledTask = null;
        this.postSettledTask = null;
        this.logger = s.scopeTo("promise.resolve");
    }
    link(t, e, i, s) {
        this.view = this.f.create(this.$controller).setLocation(this.l);
    }
    attaching(t, e, i) {
        const s = this.view;
        const n = this.$controller;
        return (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.onResolve)(s.activate(t, n, i, this.viewScope = _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.Scope.fromParent(n.scope, {})), (() => this.swap(t, i)));
    }
    valueChanged(t, e, i) {
        if (!this.$controller.isActive) return;
        this.swap(null, i);
    }
    swap(t, e) {
        var i, s;
        const n = this.value;
        if (!(n instanceof Promise)) {
            this.logger.warn(`The value '${String(n)}' is not a promise. No change will be done.`);
            return;
        }
        const r = this.p.domWriteQueue;
        const o = this.fulfilled;
        const l = this.rejected;
        const h = this.pending;
        const a = this.viewScope;
        let c;
        const u = {
            reusable: false
        };
        const f = () => {
            void (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.resolveAll)(c = (this.preSettledTask = r.queueTask((() => (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.resolveAll)(null === o || void 0 === o ? void 0 : o.deactivate(t, e), null === l || void 0 === l ? void 0 : l.deactivate(t, e), null === h || void 0 === h ? void 0 : h.activate(t, e, a))), u)).result, n.then((i => {
                if (this.value !== n) return;
                const s = () => {
                    this.postSettlePromise = (this.postSettledTask = r.queueTask((() => (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.resolveAll)(null === h || void 0 === h ? void 0 : h.deactivate(t, e), null === l || void 0 === l ? void 0 : l.deactivate(t, e), null === o || void 0 === o ? void 0 : o.activate(t, e, a, i))), u)).result;
                };
                if (1 === this.preSettledTask.status) void c.then(s); else {
                    this.preSettledTask.cancel();
                    s();
                }
            }), (i => {
                if (this.value !== n) return;
                const s = () => {
                    this.postSettlePromise = (this.postSettledTask = r.queueTask((() => (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.resolveAll)(null === h || void 0 === h ? void 0 : h.deactivate(t, e), null === o || void 0 === o ? void 0 : o.deactivate(t, e), null === l || void 0 === l ? void 0 : l.activate(t, e, a, i))), u)).result;
                };
                if (1 === this.preSettledTask.status) void c.then(s); else {
                    this.preSettledTask.cancel();
                    s();
                }
            })));
        };
        if (1 === (null === (i = this.postSettledTask) || void 0 === i ? void 0 : i.status)) void this.postSettlePromise.then(f); else {
            null === (s = this.postSettledTask) || void 0 === s ? void 0 : s.cancel();
            f();
        }
    }
    detaching(t, e, i) {
        var s, n;
        null === (s = this.preSettledTask) || void 0 === s ? void 0 : s.cancel();
        null === (n = this.postSettledTask) || void 0 === n ? void 0 : n.cancel();
        this.preSettledTask = this.postSettledTask = null;
        return this.view.deactivate(t, this.$controller, i);
    }
    dispose() {
        var t;
        null === (t = this.view) || void 0 === t ? void 0 : t.dispose();
        this.view = void 0;
    }
};

ot([ St ], Tr.prototype, "value", void 0);

Tr = ot([ Oe("promise"), lt(0, Ai), lt(1, os), lt(2, Kt), lt(3, _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.ILogger) ], Tr);

let Dr = class PendingTemplateController {
    constructor(t, e) {
        this.factory = t;
        this.id = (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.nextId)("au$component");
        this.view = this.factory.create().setLocation(e);
    }
    link(t, e, i, s) {
        $r(t).pending = this;
    }
    activate(t, e, i) {
        const s = this.view;
        if (s.isActive) return;
        return s.activate(s, this.$controller, e, i);
    }
    deactivate(t, e) {
        const i = this.view;
        if (!i.isActive) return;
        return i.deactivate(i, this.$controller, e);
    }
    detaching(t, e, i) {
        return this.deactivate(t, i);
    }
    dispose() {
        var t;
        null === (t = this.view) || void 0 === t ? void 0 : t.dispose();
        this.view = void 0;
    }
};

ot([ St({
    mode: _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.BindingMode.toView
}) ], Dr.prototype, "value", void 0);

Dr = ot([ Oe("pending"), lt(0, Ai), lt(1, os) ], Dr);

let Pr = class FulfilledTemplateController {
    constructor(t, e) {
        this.factory = t;
        this.id = (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.nextId)("au$component");
        this.view = this.factory.create().setLocation(e);
    }
    link(t, e, i, s) {
        $r(t).fulfilled = this;
    }
    activate(t, e, i, s) {
        this.value = s;
        const n = this.view;
        if (n.isActive) return;
        return n.activate(n, this.$controller, e, i);
    }
    deactivate(t, e) {
        const i = this.view;
        if (!i.isActive) return;
        return i.deactivate(i, this.$controller, e);
    }
    detaching(t, e, i) {
        return this.deactivate(t, i);
    }
    dispose() {
        var t;
        null === (t = this.view) || void 0 === t ? void 0 : t.dispose();
        this.view = void 0;
    }
};

ot([ St({
    mode: _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.BindingMode.fromView
}) ], Pr.prototype, "value", void 0);

Pr = ot([ Oe("then"), lt(0, Ai), lt(1, os) ], Pr);

let Or = class RejectedTemplateController {
    constructor(t, e) {
        this.factory = t;
        this.id = (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.nextId)("au$component");
        this.view = this.factory.create().setLocation(e);
    }
    link(t, e, i, s) {
        $r(t).rejected = this;
    }
    activate(t, e, i, s) {
        this.value = s;
        const n = this.view;
        if (n.isActive) return;
        return n.activate(n, this.$controller, e, i);
    }
    deactivate(t, e) {
        const i = this.view;
        if (!i.isActive) return;
        return i.deactivate(i, this.$controller, e);
    }
    detaching(t, e, i) {
        return this.deactivate(t, i);
    }
    dispose() {
        var t;
        null === (t = this.view) || void 0 === t ? void 0 : t.dispose();
        this.view = void 0;
    }
};

ot([ St({
    mode: _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.BindingMode.fromView
}) ], Or.prototype, "value", void 0);

Or = ot([ Oe("catch"), lt(0, Ai), lt(1, os) ], Or);

function $r(t) {
    const e = t.parent;
    const i = null === e || void 0 === e ? void 0 : e.viewModel;
    if (i instanceof Tr) return i;
    throw new Error("AUR0813");
}

let Lr = class PromiseAttributePattern {
    "promise.resolve"(t, e, i) {
        return new AttrSyntax(t, e, "promise", "bind");
    }
};

Lr = ot([ Ft({
    pattern: "promise.resolve",
    symbols: ""
}) ], Lr);

let qr = class FulfilledAttributePattern {
    then(t, e, i) {
        return new AttrSyntax(t, e, "then", "from-view");
    }
};

qr = ot([ Ft({
    pattern: "then",
    symbols: ""
}) ], qr);

let Mr = class RejectedAttributePattern {
    catch(t, e, i) {
        return new AttrSyntax(t, e, "catch", "from-view");
    }
};

Mr = ot([ Ft({
    pattern: "catch",
    symbols: ""
}) ], Mr);

function Ur(t, e, i, s) {
    if (At(e)) return Fr(t, e, i, s);
    if (si.isType(e)) return Vr(t, e, i, s);
    throw new Error(`Invalid Tag or Type.`);
}

class RenderPlan {
    constructor(t, e, i) {
        this.node = t;
        this.instructions = e;
        this.Pi = i;
        this.Oi = void 0;
    }
    get definition() {
        if (void 0 === this.Oi) this.Oi = CustomElementDefinition.create({
            name: si.generateName(),
            template: this.node,
            needsCompile: At(this.node),
            instructions: this.instructions,
            dependencies: this.Pi
        });
        return this.Oi;
    }
    createView(t) {
        return this.getViewFactory(t).create();
    }
    getViewFactory(t) {
        return t.root.get(Pi).getViewFactory(this.definition, t.createChild().register(...this.Pi));
    }
    mergeInto(t, e, i) {
        t.appendChild(this.node);
        e.push(...this.instructions);
        i.push(...this.Pi);
    }
}

function Fr(t, e, i, s) {
    const n = [];
    const r = [];
    const o = [];
    const l = t.document.createElement(e);
    let h = false;
    if (i) Object.keys(i).forEach((t => {
        const e = i[t];
        if (Cs(e)) {
            h = true;
            n.push(e);
        } else l.setAttribute(t, e);
    }));
    if (h) {
        l.className = "au";
        r.push(n);
    }
    if (s) _r(t, l, s, r, o);
    return new RenderPlan(l, r, o);
}

function Vr(t, e, i, s) {
    const n = si.getDefinition(e);
    const r = [];
    const o = [ r ];
    const l = [];
    const h = [];
    const a = n.bindables;
    const c = t.document.createElement(n.name);
    c.className = "au";
    if (!l.includes(e)) l.push(e);
    r.push(new HydrateElementInstruction(n, void 0, h, null, false, void 0));
    if (i) Object.keys(i).forEach((t => {
        const e = i[t];
        if (Cs(e)) h.push(e); else if (void 0 === a[t]) h.push(new SetAttributeInstruction(e, t)); else h.push(new SetPropertyInstruction(e, t));
    }));
    if (s) _r(t, c, s, o, l);
    return new RenderPlan(c, o, l);
}

function _r(t, e, i, s, n) {
    for (let r = 0, o = i.length; r < o; ++r) {
        const o = i[r];
        switch (typeof o) {
          case "string":
            e.appendChild(t.document.createTextNode(o));
            break;

          case "object":
            if (o instanceof t.Node) e.appendChild(o); else if ("mergeInto" in o) o.mergeInto(e, s, n);
        }
    }
}

function jr(t, e) {
    const i = e.to;
    if (void 0 !== i && "subject" !== i && "composing" !== i) t[i] = e;
    return t;
}

class AuRender {
    constructor(t, e, i, s) {
        this.p = t;
        this.$i = e;
        this.Li = i;
        this.r = s;
        this.id = (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.nextId)("au$component");
        this.component = void 0;
        this.composing = false;
        this.view = void 0;
        this.qi = void 0;
        this.Mi = e.props.reduce(jr, {});
    }
    attaching(t, e, i) {
        const {component: s, view: n} = this;
        if (void 0 === n || this.qi !== s) {
            this.qi = s;
            this.composing = true;
            return this.compose(void 0, s, t, i);
        }
        return this.compose(n, s, t, i);
    }
    detaching(t, e, i) {
        return this.oi(this.view, t, i);
    }
    componentChanged(t, e, i) {
        const {$controller: s} = this;
        if (!s.isActive) return;
        if (this.qi === t) return;
        this.qi = t;
        this.composing = true;
        i |= s.flags;
        const n = (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.onResolve)(this.oi(this.view, null, i), (() => this.compose(void 0, t, null, i)));
        if (n instanceof Promise) n.catch((t => {
            throw t;
        }));
    }
    compose(t, e, i, s) {
        return (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.onResolve)(void 0 === t ? (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.onResolve)(e, (t => this.Ui(t, s))) : t, (t => this.ni(this.view = t, i, s)));
    }
    oi(t, e, i) {
        return null === t || void 0 === t ? void 0 : t.deactivate(null !== e && void 0 !== e ? e : t, this.$controller, i);
    }
    ni(t, e, i) {
        const {$controller: s} = this;
        return (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.onResolve)(null === t || void 0 === t ? void 0 : t.activate(null !== e && void 0 !== e ? e : t, s, i, s.scope), (() => {
            this.composing = false;
        }));
    }
    Ui(t, e) {
        const i = this.Fi(t, e);
        if (i) {
            i.setLocation(this.$controller.location);
            i.lockScope(this.$controller.scope);
            return i;
        }
        return;
    }
    Fi(t, e) {
        if (!t) return;
        const i = this.Li.controller.container;
        if ("object" === typeof t) {
            if (Nr(t)) return t;
            if ("createView" in t) return t.createView(i);
            if ("create" in t) return t.create();
            if ("template" in t) return this.r.getViewFactory(CustomElementDefinition.getOrCreate(t), i).create();
        }
        if (At(t)) {
            const e = i.find(si, t);
            if (null == e) throw new Error(`AUR0809:${t}`);
            t = e.Type;
        }
        return Ur(this.p, t, this.Mi, this.$controller.host.childNodes).createView(i);
    }
    dispose() {
        var t;
        null === (t = this.view) || void 0 === t ? void 0 : t.dispose();
        this.view = void 0;
    }
    accept(t) {
        var e;
        if (true === (null === (e = this.view) || void 0 === e ? void 0 : e.accept(t))) return true;
    }
}

AuRender.inject = [ Kt, ks, Ki, Pi ];

ot([ St ], AuRender.prototype, "component", void 0);

ot([ St({
    mode: _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.BindingMode.fromView
}) ], AuRender.prototype, "composing", void 0);

je({
    name: "au-render",
    template: null,
    containerless: true,
    capture: true
})(AuRender);

function Nr(t) {
    return "lockScope" in t;
}

class AuCompose {
    constructor(t, e, i, s, n, r) {
        this.c = t;
        this.parent = e;
        this.host = i;
        this.p = s;
        this.scopeBehavior = "auto";
        this.Vi = void 0;
        this.l = n.containerless ? us(this.host) : void 0;
        this.r = t.get(Pi);
        this.$i = n;
        this._i = r;
    }
    static get inject() {
        return [ _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.IContainer, Xi, ns, Kt, ks, (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.transient)(CompositionContextFactory) ];
    }
    get pending() {
        return this.ji;
    }
    get composition() {
        return this.Vi;
    }
    attaching(t, e, i) {
        return this.ji = (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.onResolve)(this.queue(new ChangeInfo(this.view, this.viewModel, this.model, void 0), t), (t => {
            if (this._i.isCurrent(t)) this.ji = void 0;
        }));
    }
    detaching(t) {
        const e = this.Vi;
        const i = this.ji;
        this._i.invalidate();
        this.Vi = this.ji = void 0;
        return (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.onResolve)(i, (() => null === e || void 0 === e ? void 0 : e.deactivate(t)));
    }
    propertyChanged(t) {
        if ("model" === t && null != this.Vi) {
            this.Vi.update(this.model);
            return;
        }
        this.ji = (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.onResolve)(this.ji, (() => (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.onResolve)(this.queue(new ChangeInfo(this.view, this.viewModel, this.model, t), void 0), (t => {
            if (this._i.isCurrent(t)) this.ji = void 0;
        }))));
    }
    queue(t, e) {
        const i = this._i;
        const s = this.Vi;
        return (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.onResolve)(i.create(t), (t => {
            if (i.isCurrent(t)) return (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.onResolve)(this.compose(t), (n => {
                if (i.isCurrent(t)) return (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.onResolve)(n.activate(e), (() => {
                    if (i.isCurrent(t)) {
                        this.Vi = n;
                        return (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.onResolve)(null === s || void 0 === s ? void 0 : s.deactivate(e), (() => t));
                    } else return (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.onResolve)(n.controller.deactivate(n.controller, this.$controller, 4), (() => {
                        n.controller.dispose();
                        return t;
                    }));
                }));
                n.controller.dispose();
                return t;
            }));
            return t;
        }));
    }
    compose(t) {
        let e;
        let i;
        let s;
        const {view: n, viewModel: r, model: o} = t.change;
        const {c: l, host: h, $controller: a, l: c} = this;
        const u = this.getDef(r);
        const f = l.createChild();
        const d = null == c ? h.parentNode : c.parentNode;
        if (null !== u) {
            if (u.containerless) throw new Error("AUR0806");
            if (null == c) {
                i = h;
                s = () => {};
            } else {
                i = d.insertBefore(this.p.document.createElement(u.name), c);
                s = () => {
                    i.remove();
                };
            }
            e = this.getVm(f, r, i);
        } else {
            i = null == c ? h : c;
            e = this.getVm(f, r, i);
        }
        const m = () => {
            if (null !== u) {
                const n = Controller.$el(f, e, i, {
                    projections: this.$i.projections
                }, u);
                return new CompositionController(n, (t => n.activate(null !== t && void 0 !== t ? t : n, a, 2, a.scope.parentScope)), (t => (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.onResolve)(n.deactivate(null !== t && void 0 !== t ? t : n, a, 4), s)), (t => {
                    var i;
                    return null === (i = e.activate) || void 0 === i ? void 0 : i.call(e, t);
                }), t);
            } else {
                const s = CustomElementDefinition.create({
                    name: si.generateName(),
                    template: n
                });
                const r = this.r.getViewFactory(s, f);
                const o = Controller.$view(r, a);
                const l = "auto" === this.scopeBehavior ? _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.Scope.fromParent(this.parent.scope, e) : _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.Scope.create(e);
                if (fs(i)) o.setLocation(i); else o.setHost(i);
                return new CompositionController(o, (t => o.activate(null !== t && void 0 !== t ? t : o, a, 2, l)), (t => o.deactivate(null !== t && void 0 !== t ? t : o, a, 4)), (t => {
                    var i;
                    return null === (i = e.activate) || void 0 === i ? void 0 : i.call(e, t);
                }), t);
            }
        };
        if ("activate" in e) return (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.onResolve)(e.activate(o), (() => m())); else return m();
    }
    getVm(t, e, i) {
        if (null == e) return new EmptyComponent$1;
        if ("object" === typeof e) return e;
        const s = this.p;
        const n = fs(i);
        t.registerResolver(s.Element, t.registerResolver(ns, new _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.InstanceProvider("ElementResolver", n ? null : i)));
        t.registerResolver(os, new _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.InstanceProvider("IRenderLocation", n ? i : null));
        const r = t.invoke(e);
        t.registerResolver(e, new _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.InstanceProvider("au-compose.viewModel", r));
        return r;
    }
    getDef(t) {
        const e = Ct(t) ? t : null === t || void 0 === t ? void 0 : t.constructor;
        return si.isType(e) ? si.getDefinition(e) : null;
    }
}

ot([ St ], AuCompose.prototype, "view", void 0);

ot([ St ], AuCompose.prototype, "viewModel", void 0);

ot([ St ], AuCompose.prototype, "model", void 0);

ot([ St({
    set: t => {
        if ("scoped" === t || "auto" === t) return t;
        throw new Error("AUR0805");
    }
}) ], AuCompose.prototype, "scopeBehavior", void 0);

je("au-compose")(AuCompose);

class EmptyComponent$1 {}

class CompositionContextFactory {
    constructor() {
        this.id = 0;
    }
    isCurrent(t) {
        return t.id === this.id;
    }
    create(t) {
        return (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.onResolve)(t.load(), (t => new CompositionContext(++this.id, t)));
    }
    invalidate() {
        this.id++;
    }
}

class ChangeInfo {
    constructor(t, e, i, s) {
        this.view = t;
        this.viewModel = e;
        this.model = i;
        this.src = s;
    }
    load() {
        if (kt(this.view) || kt(this.viewModel)) return Promise.all([ this.view, this.viewModel ]).then((([t, e]) => new LoadedChangeInfo(t, e, this.model, this.src))); else return new LoadedChangeInfo(this.view, this.viewModel, this.model, this.src);
    }
}

class LoadedChangeInfo {
    constructor(t, e, i, s) {
        this.view = t;
        this.viewModel = e;
        this.model = i;
        this.src = s;
    }
}

class CompositionContext {
    constructor(t, e) {
        this.id = t;
        this.change = e;
    }
}

class CompositionController {
    constructor(t, e, i, s, n) {
        this.controller = t;
        this.start = e;
        this.stop = i;
        this.update = s;
        this.context = n;
        this.state = 0;
    }
    activate(t) {
        if (0 !== this.state) throw new Error(`AUR0807:${this.controller.name}`);
        this.state = 1;
        return this.start(t);
    }
    deactivate(t) {
        switch (this.state) {
          case 1:
            this.state = -1;
            return this.stop(t);

          case -1:
            throw new Error("AUR0808");

          default:
            this.state = -1;
        }
    }
}

class AuSlot {
    constructor(t, e, i, s) {
        var n, r;
        this.Ni = null;
        this.Wi = null;
        let o;
        const l = e.auSlot;
        const h = null === (r = null === (n = i.instruction) || void 0 === n ? void 0 : n.projections) || void 0 === r ? void 0 : r[l.name];
        if (null == h) {
            o = s.getViewFactory(l.fallback, i.controller.container);
            this.Hi = false;
        } else {
            o = s.getViewFactory(h, i.parent.controller.container);
            this.Hi = true;
        }
        this.Li = i;
        this.view = o.create().setLocation(t);
    }
    static get inject() {
        return [ os, ks, Ki, Pi ];
    }
    binding(t, e, i) {
        var s;
        this.Ni = this.$controller.scope.parentScope;
        let n;
        if (this.Hi) {
            n = this.Li.controller.scope.parentScope;
            (this.Wi = _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.Scope.fromParent(n, n.bindingContext)).overrideContext.$host = null !== (s = this.expose) && void 0 !== s ? s : this.Ni.bindingContext;
        }
    }
    attaching(t, e, i) {
        return this.view.activate(t, this.$controller, i, this.Hi ? this.Wi : this.Ni);
    }
    detaching(t, e, i) {
        return this.view.deactivate(t, this.$controller, i);
    }
    exposeChanged(t) {
        if (this.Hi && null != this.Wi) this.Wi.overrideContext.$host = t;
    }
    dispose() {
        this.view.dispose();
        this.view = void 0;
    }
    accept(t) {
        var e;
        if (true === (null === (e = this.view) || void 0 === e ? void 0 : e.accept(t))) return true;
    }
}

ot([ St ], AuSlot.prototype, "expose", void 0);

je({
    name: "au-slot",
    template: null,
    containerless: true
})(AuSlot);

const Wr = /<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi;

const Hr = _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.DI.createInterface("ISanitizer", (t => t.singleton(class {
    sanitize(t) {
        return t.replace(Wr, "");
    }
})));

let zr = class SanitizeValueConverter {
    constructor(t) {
        this.zi = t;
    }
    toView(t) {
        if (null == t) return null;
        return this.zi.sanitize(t);
    }
};

zr = ot([ lt(0, Hr) ], zr);

(0,_aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.valueConverter)("sanitize")(zr);

let Gr = class ViewValueConverter {
    constructor(t) {
        this.Gi = t;
    }
    toView(t, e) {
        return this.Gi.getViewComponentForObject(t, e);
    }
};

Gr = ot([ lt(0, Di) ], Gr);

(0,_aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.valueConverter)("view")(Gr);

const Xr = DebounceBindingBehavior;

const Kr = OneTimeBindingBehavior;

const Yr = ToViewBindingBehavior;

const Qr = FromViewBindingBehavior;

const Zr = SignalBindingBehavior;

const Jr = ThrottleBindingBehavior;

const to = TwoWayBindingBehavior;

const eo = TemplateCompiler;

const io = NodeObserverLocator;

const so = [ eo, io ];

const no = SVGAnalyzer;

const ro = Gt;

const oo = zt;

const lo = Ht;

const ho = Wt;

const ao = Xt;

const co = [ lo, ho, ao ];

const uo = [ ro, oo ];

const fo = xn;

const mo = bn;

const vo = yn;

const po = gn;

const go = vn;

const wo = pn;

const bo = wn;

const xo = Bn;

const yo = kn;

const ko = Cn;

const Co = An;

const Ao = Sn;

const So = En;

const Ro = Rn;

const Eo = In;

const Bo = [ mo, go, po, wo, bo, fo, vo, xo, yo, ko, Co, So, Ro, Ao, Eo ];

const Io = zr;

const To = Gr;

const Do = FrequentMutations;

const Po = ObserveShallow;

const Oo = If;

const $o = Else;

const Lo = Repeat;

const qo = With;

const Mo = Er;

const Uo = Br;

const Fo = Ir;

const Vo = Tr;

const _o = Dr;

const jo = Pr;

const No = Or;

const Wo = Lr;

const Ho = qr;

const zo = Mr;

const Go = AttrBindingBehavior;

const Xo = SelfBindingBehavior;

const Ko = UpdateTriggerBindingBehavior;

const Yo = AuRender;

const Qo = AuCompose;

const Zo = Portal;

const Jo = Focus;

const tl = br;

const el = [ Xr, Kr, Yr, Qr, Zr, Jr, to, Io, To, Do, Po, Oo, $o, Lo, qo, Mo, Uo, Fo, Vo, _o, jo, No, Wo, Ho, zo, Go, Xo, Ko, Yo, Qo, Zo, Jo, tl, AuSlot ];

const il = Ls;

const sl = Ps;

const nl = Ds;

const rl = Ms;

const ol = Fs;

const ll = $s;

const hl = Us;

const al = qs;

const cl = Ts;

const ul = Os;

const fl = Ws;

const dl = Ks;

const ml = Hs;

const vl = zs;

const pl = Gs;

const gl = Xs;

const wl = Ns;

const bl = Ys;

const xl = [ hl, ol, il, al, rl, cl, nl, sl, ul, ll, fl, dl, ml, vl, pl, gl, wl, bl ];

const yl = kl(_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.noop);

function kl(t) {
    return {
        optionsProvider: t,
        register(e) {
            const i = {
                coercingOptions: {
                    enableCoercion: false,
                    coerceNullish: false
                }
            };
            t(i);
            return e.register(_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.Registration.instance(_aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.ICoercionConfiguration, i.coercingOptions), ...so, ...el, ...co, ...Bo, ...xl);
        },
        customize(e) {
            return kl(null !== e && void 0 !== e ? e : t);
        }
    };
}

const Cl = _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.DI.createInterface("IAurelia");

class Aurelia {
    constructor(t = _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.DI.createContainer()) {
        this.container = t;
        this.ir = false;
        this.Xi = false;
        this.Ki = false;
        this.Yi = void 0;
        this.next = void 0;
        this.Qi = void 0;
        this.Zi = void 0;
        if (t.has(Cl, true)) throw new Error("AUR0768");
        t.registerResolver(Cl, new _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.InstanceProvider("IAurelia", this));
        t.registerResolver(ts, this.Ji = new _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.InstanceProvider("IAppRoot"));
    }
    get isRunning() {
        return this.ir;
    }
    get isStarting() {
        return this.Xi;
    }
    get isStopping() {
        return this.Ki;
    }
    get root() {
        if (null == this.Yi) {
            if (null == this.next) throw new Error("AUR0767");
            return this.next;
        }
        return this.Yi;
    }
    register(...t) {
        this.container.register(...t);
        return this;
    }
    app(t) {
        this.next = new AppRoot(t, this.ts(t.host), this.container, this.Ji);
        return this;
    }
    enhance(t, e) {
        var i;
        const s = null !== (i = t.container) && void 0 !== i ? i : this.container.createChild();
        const n = t.host;
        const r = this.ts(n);
        const o = t.component;
        let l;
        if (Ct(o)) {
            s.registerResolver(r.HTMLElement, s.registerResolver(r.Element, s.registerResolver(ns, new _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.InstanceProvider("ElementResolver", n))));
            l = s.invoke(o);
        } else l = o;
        s.registerResolver(rs, new _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.InstanceProvider("IEventTarget", n));
        e = null !== e && void 0 !== e ? e : null;
        const h = Controller.$el(s, l, n, null, CustomElementDefinition.create({
            name: si.generateName(),
            template: n,
            enhance: true
        }));
        return (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.onResolve)(h.activate(h, e, 2), (() => h));
    }
    async waitForIdle() {
        const t = this.root.platform;
        await t.domWriteQueue.yield();
        await t.domReadQueue.yield();
        await t.taskQueue.yield();
    }
    ts(e) {
        let i;
        if (!this.container.has(Kt, false)) {
            if (null === e.ownerDocument.defaultView) throw new Error("AUR0769");
            i = new _aurelia_platform_browser__WEBPACK_IMPORTED_MODULE_1__.BrowserPlatform(e.ownerDocument.defaultView);
            this.container.register(_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.Registration.instance(Kt, i));
        } else i = this.container.get(Kt);
        return i;
    }
    start(t = this.next) {
        if (null == t) throw new Error("AUR0770");
        if (this.Qi instanceof Promise) return this.Qi;
        return this.Qi = (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.onResolve)(this.stop(), (() => {
            Reflect.set(t.host, "$aurelia", this);
            this.Ji.prepare(this.Yi = t);
            this.Xi = true;
            return (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.onResolve)(t.activate(), (() => {
                this.ir = true;
                this.Xi = false;
                this.Qi = void 0;
                this.es(t, "au-started", t.host);
            }));
        }));
    }
    stop(t = false) {
        if (this.Zi instanceof Promise) return this.Zi;
        if (true === this.ir) {
            const e = this.Yi;
            this.ir = false;
            this.Ki = true;
            return this.Zi = (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.onResolve)(e.deactivate(), (() => {
                Reflect.deleteProperty(e.host, "$aurelia");
                if (t) e.dispose();
                this.Yi = void 0;
                this.Ji.dispose();
                this.Ki = false;
                this.es(e, "au-stopped", e.host);
            }));
        }
    }
    dispose() {
        if (this.ir || this.Ki) throw new Error("AUR0771");
        this.container.dispose();
    }
    es(t, e, i) {
        const s = new t.platform.window.CustomEvent(e, {
            detail: this,
            bubbles: true,
            cancelable: true
        });
        i.dispatchEvent(s);
    }
}

var Al;

(function(t) {
    t[t["Element"] = 1] = "Element";
    t[t["Attribute"] = 2] = "Attribute";
})(Al || (Al = {}));

const Sl = _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.DI.createInterface("IDialogService");

const Rl = _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.DI.createInterface("IDialogController");

const El = _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.DI.createInterface("IDialogDomRenderer");

const Bl = _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.DI.createInterface("IDialogDom");

const Il = _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.DI.createInterface("IDialogGlobalSettings");

class DialogOpenResult {
    constructor(t, e) {
        this.wasCancelled = t;
        this.dialog = e;
    }
    static create(t, e) {
        return new DialogOpenResult(t, e);
    }
}

class DialogCloseResult {
    constructor(t, e) {
        this.status = t;
        this.value = e;
    }
    static create(t, e) {
        return new DialogCloseResult(t, e);
    }
}

var Tl;

(function(t) {
    t["Ok"] = "ok";
    t["Error"] = "error";
    t["Cancel"] = "cancel";
    t["Abort"] = "abort";
})(Tl || (Tl = {}));

class DialogController {
    constructor(t, e) {
        this.p = t;
        this.ctn = e;
        this.closed = new Promise(((t, e) => {
            this.$t = t;
            this.Bt = e;
        }));
    }
    static get inject() {
        return [ Kt, _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.IContainer ];
    }
    activate(t) {
        var e;
        const i = this.ctn.createChild();
        const {model: s, template: n, rejectOnCancel: r} = t;
        const o = i.get(El);
        const l = null !== (e = t.host) && void 0 !== e ? e : this.p.document.body;
        const h = this.dom = o.render(l, t);
        const a = i.has(rs, true) ? i.get(rs) : null;
        const u = h.contentHost;
        this.settings = t;
        if (null == a || !a.contains(l)) i.register(_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.Registration.instance(rs, l));
        i.register(_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.Registration.instance(ns, u), _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.Registration.instance(Bl, h));
        return new Promise((e => {
            var n, r;
            const o = Object.assign(this.cmp = this.getOrCreateVm(i, t, u), {
                $dialog: this
            });
            e(null !== (r = null === (n = o.canActivate) || void 0 === n ? void 0 : n.call(o, s)) && void 0 !== r ? r : true);
        })).then((e => {
            var o;
            if (true !== e) {
                h.dispose();
                if (r) throw Dl(null, "Dialog activation rejected");
                return DialogOpenResult.create(true, this);
            }
            const l = this.cmp;
            return (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.onResolve)(null === (o = l.activate) || void 0 === o ? void 0 : o.call(l, s), (() => {
                var e;
                const s = this.controller = Controller.$el(i, l, u, null, CustomElementDefinition.create(null !== (e = this.getDefinition(l)) && void 0 !== e ? e : {
                    name: si.generateName(),
                    template: n
                }));
                return (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.onResolve)(s.activate(s, null, 2), (() => {
                    var e;
                    h.overlay.addEventListener(null !== (e = t.mouseEvent) && void 0 !== e ? e : "click", this);
                    return DialogOpenResult.create(false, this);
                }));
            }));
        }), (t => {
            h.dispose();
            throw t;
        }));
    }
    deactivate(t, e) {
        if (this.ss) return this.ss;
        let i = true;
        const {controller: s, dom: n, cmp: r, settings: {mouseEvent: o, rejectOnCancel: l}} = this;
        const h = DialogCloseResult.create(t, e);
        const a = new Promise((a => {
            var c, u;
            a((0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.onResolve)(null !== (u = null === (c = r.canDeactivate) || void 0 === c ? void 0 : c.call(r, h)) && void 0 !== u ? u : true, (a => {
                var c;
                if (true !== a) {
                    i = false;
                    this.ss = void 0;
                    if (l) throw Dl(null, "Dialog cancellation rejected");
                    return DialogCloseResult.create("abort");
                }
                return (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.onResolve)(null === (c = r.deactivate) || void 0 === c ? void 0 : c.call(r, h), (() => (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.onResolve)(s.deactivate(s, null, 4), (() => {
                    n.dispose();
                    n.overlay.removeEventListener(null !== o && void 0 !== o ? o : "click", this);
                    if (!l && "error" !== t) this.$t(h); else this.Bt(Dl(e, "Dialog cancelled with a rejection on cancel"));
                    return h;
                }))));
            })));
        })).catch((t => {
            this.ss = void 0;
            throw t;
        }));
        this.ss = i ? a : void 0;
        return a;
    }
    ok(t) {
        return this.deactivate("ok", t);
    }
    cancel(t) {
        return this.deactivate("cancel", t);
    }
    error(t) {
        const e = Pl(t);
        return new Promise((t => {
            var i, s;
            return t((0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.onResolve)(null === (s = (i = this.cmp).deactivate) || void 0 === s ? void 0 : s.call(i, DialogCloseResult.create("error", e)), (() => (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.onResolve)(this.controller.deactivate(this.controller, null, 4), (() => {
                this.dom.dispose();
                this.Bt(e);
            })))));
        }));
    }
    handleEvent(t) {
        if (this.settings.overlayDismiss && !this.dom.contentHost.contains(t.target)) this.cancel();
    }
    getOrCreateVm(t, e, i) {
        const s = e.component;
        if (null == s) return new EmptyComponent;
        if ("object" === typeof s) return s;
        const n = this.p;
        t.registerResolver(n.HTMLElement, t.registerResolver(n.Element, t.registerResolver(ns, new _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.InstanceProvider("ElementResolver", i))));
        return t.invoke(s);
    }
    getDefinition(t) {
        const e = Ct(t) ? t : null === t || void 0 === t ? void 0 : t.constructor;
        return si.isType(e) ? si.getDefinition(e) : null;
    }
}

class EmptyComponent {}

function Dl(t, e) {
    const i = new Error(e);
    i.wasCancelled = true;
    i.value = t;
    return i;
}

function Pl(t) {
    const e = new Error;
    e.wasCancelled = false;
    e.value = t;
    return e;
}

class DialogService {
    constructor(t, e, i) {
        this.ut = t;
        this.p = e;
        this.os = i;
        this.dlgs = [];
    }
    get controllers() {
        return this.dlgs.slice(0);
    }
    get top() {
        const t = this.dlgs;
        return t.length > 0 ? t[t.length - 1] : null;
    }
    static get inject() {
        return [ _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.IContainer, Kt, Il ];
    }
    static register(t) {
        t.register(_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.Registration.singleton(Sl, this), xe.beforeDeactivate(Sl, (t => (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.onResolve)(t.closeAll(), (t => {
            if (t.length > 0) throw new Error(`AUR0901:${t.length}`);
        })))));
    }
    open(t) {
        return $l(new Promise((e => {
            var i;
            const s = DialogSettings.from(this.os, t);
            const n = null !== (i = s.container) && void 0 !== i ? i : this.ut.createChild();
            e((0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.onResolve)(s.load(), (t => {
                const e = n.invoke(DialogController);
                n.register(_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.Registration.instance(Rl, e));
                n.register(_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.Registration.callback(DialogController, (() => {
                    throw new Error("AUR0902");
                })));
                return (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.onResolve)(e.activate(t), (t => {
                    if (!t.wasCancelled) {
                        if (1 === this.dlgs.push(e)) this.p.window.addEventListener("keydown", this);
                        const t = () => this.remove(e);
                        e.closed.then(t, t);
                    }
                    return t;
                }));
            })));
        })));
    }
    closeAll() {
        return Promise.all(Array.from(this.dlgs).map((t => {
            if (t.settings.rejectOnCancel) return t.cancel().then((() => null));
            return t.cancel().then((e => "cancel" === e.status ? null : t));
        }))).then((t => t.filter((t => !!t))));
    }
    remove(t) {
        const e = this.dlgs;
        const i = e.indexOf(t);
        if (i > -1) this.dlgs.splice(i, 1);
        if (0 === e.length) this.p.window.removeEventListener("keydown", this);
    }
    handleEvent(t) {
        const e = t;
        const i = Ll(e);
        if (null == i) return;
        const s = this.top;
        if (null === s || 0 === s.settings.keyboard.length) return;
        const n = s.settings.keyboard;
        if ("Escape" === i && n.includes(i)) void s.cancel(); else if ("Enter" === i && n.includes(i)) void s.ok();
    }
}

class DialogSettings {
    static from(...t) {
        return Object.assign(new DialogSettings, ...t).cs().ls();
    }
    load() {
        const t = this;
        const e = this.component;
        const i = this.template;
        const s = (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.resolveAll)(null == e ? void 0 : (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.onResolve)(e(), (e => {
            t.component = e;
        })), Ct(i) ? (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.onResolve)(i(), (e => {
            t.template = e;
        })) : void 0);
        return s instanceof Promise ? s.then((() => t)) : t;
    }
    cs() {
        if (null == this.component && null == this.template) throw new Error("AUR0903");
        return this;
    }
    ls() {
        if (null == this.keyboard) this.keyboard = this.lock ? [] : [ "Enter", "Escape" ];
        if ("boolean" !== typeof this.overlayDismiss) this.overlayDismiss = !this.lock;
        return this;
    }
}

function Ol(t, e) {
    return this.then((i => i.dialog.closed.then(t, e)), e);
}

function $l(t) {
    t.whenClosed = Ol;
    return t;
}

function Ll(t) {
    if ("Escape" === (t.code || t.key) || 27 === t.keyCode) return "Escape";
    if ("Enter" === (t.code || t.key) || 13 === t.keyCode) return "Enter";
    return;
}

class DefaultDialogGlobalSettings {
    constructor() {
        this.lock = true;
        this.startingZIndex = 1e3;
        this.rejectOnCancel = false;
    }
    static register(t) {
        _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.Registration.singleton(Il, this).register(t);
    }
}

const ql = "position:absolute;width:100%;height:100%;top:0;left:0;";

class DefaultDialogDomRenderer {
    constructor(t) {
        this.p = t;
        this.wrapperCss = `${ql} display:flex;`;
        this.overlayCss = ql;
        this.hostCss = "position:relative;margin:auto;";
    }
    static register(t) {
        _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.Registration.singleton(El, this).register(t);
    }
    render(t) {
        const e = this.p.document;
        const i = (t, i) => {
            const s = e.createElement(t);
            s.style.cssText = i;
            return s;
        };
        const s = t.appendChild(i("au-dialog-container", this.wrapperCss));
        const n = s.appendChild(i("au-dialog-overlay", this.overlayCss));
        const r = s.appendChild(i("div", this.hostCss));
        return new DefaultDialogDom(s, n, r);
    }
}

DefaultDialogDomRenderer.inject = [ Kt ];

class DefaultDialogDom {
    constructor(t, e, i) {
        this.wrapper = t;
        this.overlay = e;
        this.contentHost = i;
    }
    dispose() {
        this.wrapper.remove();
    }
}

function Ml(t, e) {
    return {
        settingsProvider: t,
        register: i => i.register(...e, xe.beforeCreate((() => t(i.get(Il))))),
        customize(t, i) {
            return Ml(t, null !== i && void 0 !== i ? i : e);
        }
    };
}

const Ul = Ml((() => {
    throw new Error("AUR0904");
}), [ class NoopDialogGlobalSettings {
    static register(t) {
        t.register(_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.Registration.singleton(Il, this));
    }
} ]);

const Fl = Ml(_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.noop, [ DialogService, DefaultDialogGlobalSettings, DefaultDialogDomRenderer ]);

const Vl = _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.DI.createInterface((t => t.singleton(WcCustomElementRegistry)));

class WcCustomElementRegistry {
    constructor(t, e, i) {
        this.ctn = t;
        this.p = e;
        this.r = i;
    }
    define(t, e, i) {
        if (!t.includes("-")) throw new Error('Invalid web-components custom element name. It must include a "-"');
        let s;
        if (null == e) throw new Error("Invalid custom element definition");
        switch (typeof e) {
          case "function":
            s = si.isType(e) ? si.getDefinition(e) : CustomElementDefinition.create(si.generateName(), e);
            break;

          default:
            s = CustomElementDefinition.getOrCreate(e);
            break;
        }
        if (s.containerless) throw new Error("Containerless custom element is not supported. Consider using buitl-in extends instead");
        const n = !(null === i || void 0 === i ? void 0 : i.extends) ? HTMLElement : this.p.document.createElement(i.extends).constructor;
        const r = this.ctn;
        const o = this.r;
        const l = s.bindables;
        const h = this.p;
        class CustomElementClass extends n {
            auInit() {
                if (this.auInited) return;
                this.auInited = true;
                const t = r.createChild();
                t.registerResolver(h.HTMLElement, t.registerResolver(h.Element, t.registerResolver(ns, new _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.InstanceProvider("ElementProvider", this))));
                const e = o.compile(s, t, {
                    projections: null
                });
                const i = t.invoke(e.Type);
                const n = this.auCtrl = Controller.$el(t, i, this, null, e);
                ss(this, e.key, n);
            }
            connectedCallback() {
                this.auInit();
                this.auCtrl.activate(this.auCtrl, null, 0);
            }
            disconnectedCallback() {
                this.auCtrl.deactivate(this.auCtrl, null, 0);
            }
            adoptedCallback() {
                this.auInit();
            }
            attributeChangedCallback(t, e, i) {
                this.auInit();
                this.auCtrl.viewModel[t] = i;
            }
        }
        CustomElementClass.observedAttributes = Object.keys(l);
        for (const t in l) Object.defineProperty(CustomElementClass.prototype, t, {
            configurable: true,
            enumerable: false,
            get() {
                return this["auCtrl"].viewModel[t];
            },
            set(e) {
                if (!this["auInited"]) this["auInit"]();
                this["auCtrl"].viewModel[t] = e;
            }
        });
        this.p.customElements.define(t, CustomElementClass, i);
        return CustomElementClass;
    }
}

WcCustomElementRegistry.inject = [ _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.IContainer, Kt, Pi ];


//# sourceMappingURL=index.js.map


/***/ }),

/***/ "./node_modules/@aurelia/runtime/dist/esm/index.js":
/*!*********************************************************!*\
  !*** ./node_modules/@aurelia/runtime/dist/esm/index.js ***!
  \*********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "IPlatform": () => /* reexport safe */ _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__.IPlatform,
/* harmony export */   "Platform": () => /* reexport safe */ _aurelia_platform__WEBPACK_IMPORTED_MODULE_1__.Platform,
/* harmony export */   "Task": () => /* reexport safe */ _aurelia_platform__WEBPACK_IMPORTED_MODULE_1__.Task,
/* harmony export */   "TaskAbortError": () => /* reexport safe */ _aurelia_platform__WEBPACK_IMPORTED_MODULE_1__.TaskAbortError,
/* harmony export */   "TaskQueue": () => /* reexport safe */ _aurelia_platform__WEBPACK_IMPORTED_MODULE_1__.TaskQueue,
/* harmony export */   "TaskQueuePriority": () => /* reexport safe */ _aurelia_platform__WEBPACK_IMPORTED_MODULE_1__.TaskQueuePriority,
/* harmony export */   "TaskStatus": () => /* reexport safe */ _aurelia_platform__WEBPACK_IMPORTED_MODULE_1__.TaskStatus,
/* harmony export */   "Access": () => /* binding */ Ue,
/* harmony export */   "AccessKeyedExpression": () => /* binding */ AccessKeyedExpression,
/* harmony export */   "AccessMemberExpression": () => /* binding */ AccessMemberExpression,
/* harmony export */   "AccessScopeExpression": () => /* binding */ AccessScopeExpression,
/* harmony export */   "AccessThisExpression": () => /* binding */ AccessThisExpression,
/* harmony export */   "AccessorType": () => /* binding */ X,
/* harmony export */   "ArrayBindingPattern": () => /* binding */ ArrayBindingPattern,
/* harmony export */   "ArrayIndexObserver": () => /* binding */ ArrayIndexObserver,
/* harmony export */   "ArrayLiteralExpression": () => /* binding */ ArrayLiteralExpression,
/* harmony export */   "ArrayObserver": () => /* binding */ ArrayObserver,
/* harmony export */   "AssignExpression": () => /* binding */ AssignExpression,
/* harmony export */   "BinaryExpression": () => /* binding */ BinaryExpression,
/* harmony export */   "BindingBehavior": () => /* binding */ T,
/* harmony export */   "BindingBehaviorDefinition": () => /* binding */ BindingBehaviorDefinition,
/* harmony export */   "BindingBehaviorExpression": () => /* binding */ BindingBehaviorExpression,
/* harmony export */   "BindingBehaviorFactory": () => /* binding */ BindingBehaviorFactory,
/* harmony export */   "BindingBehaviorStrategy": () => /* binding */ $,
/* harmony export */   "BindingContext": () => /* binding */ BindingContext,
/* harmony export */   "BindingIdentifier": () => /* binding */ BindingIdentifier,
/* harmony export */   "BindingInterceptor": () => /* binding */ BindingInterceptor,
/* harmony export */   "BindingMediator": () => /* binding */ BindingMediator,
/* harmony export */   "BindingMode": () => /* binding */ z,
/* harmony export */   "BindingObserverRecord": () => /* binding */ BindingObserverRecord,
/* harmony export */   "CallFunctionExpression": () => /* binding */ CallFunctionExpression,
/* harmony export */   "CallMemberExpression": () => /* binding */ CallMemberExpression,
/* harmony export */   "CallScopeExpression": () => /* binding */ CallScopeExpression,
/* harmony export */   "Char": () => /* binding */ ye,
/* harmony export */   "CollectionKind": () => /* binding */ J,
/* harmony export */   "CollectionLengthObserver": () => /* binding */ CollectionLengthObserver,
/* harmony export */   "CollectionSizeObserver": () => /* binding */ CollectionSizeObserver,
/* harmony export */   "ComputedObserver": () => /* binding */ ComputedObserver,
/* harmony export */   "ConditionalExpression": () => /* binding */ ConditionalExpression,
/* harmony export */   "ConnectableSwitcher": () => /* binding */ vs,
/* harmony export */   "CustomExpression": () => /* binding */ CustomExpression,
/* harmony export */   "DelegationStrategy": () => /* binding */ Z,
/* harmony export */   "DestructuringAssignmentExpression": () => /* binding */ DestructuringAssignmentExpression,
/* harmony export */   "DestructuringAssignmentRestExpression": () => /* binding */ DestructuringAssignmentRestExpression,
/* harmony export */   "DestructuringAssignmentSingleExpression": () => /* binding */ DestructuringAssignmentSingleExpression,
/* harmony export */   "DirtyCheckProperty": () => /* binding */ DirtyCheckProperty,
/* harmony export */   "DirtyCheckSettings": () => /* binding */ ar,
/* harmony export */   "ExpressionKind": () => /* binding */ F,
/* harmony export */   "ExpressionType": () => /* binding */ Re,
/* harmony export */   "FlushQueue": () => /* binding */ FlushQueue,
/* harmony export */   "ForOfStatement": () => /* binding */ ForOfStatement,
/* harmony export */   "HtmlLiteralExpression": () => /* binding */ HtmlLiteralExpression,
/* harmony export */   "ICoercionConfiguration": () => /* binding */ _,
/* harmony export */   "IDirtyChecker": () => /* binding */ ur,
/* harmony export */   "IExpressionParser": () => /* binding */ Ae,
/* harmony export */   "INodeObserverLocator": () => /* binding */ pr,
/* harmony export */   "IObservation": () => /* binding */ Er,
/* harmony export */   "IObserverLocator": () => /* binding */ vr,
/* harmony export */   "ISignaler": () => /* binding */ B,
/* harmony export */   "Interpolation": () => /* binding */ Interpolation,
/* harmony export */   "LifecycleFlags": () => /* binding */ W,
/* harmony export */   "MapObserver": () => /* binding */ MapObserver,
/* harmony export */   "ObjectBindingPattern": () => /* binding */ ObjectBindingPattern,
/* harmony export */   "ObjectLiteralExpression": () => /* binding */ ObjectLiteralExpression,
/* harmony export */   "Observation": () => /* binding */ Observation,
/* harmony export */   "ObserverLocator": () => /* binding */ ObserverLocator,
/* harmony export */   "OverrideContext": () => /* binding */ OverrideContext,
/* harmony export */   "ParserState": () => /* binding */ ParserState,
/* harmony export */   "Precedence": () => /* binding */ xe,
/* harmony export */   "PrimitiveLiteralExpression": () => /* binding */ PrimitiveLiteralExpression,
/* harmony export */   "PrimitiveObserver": () => /* binding */ PrimitiveObserver,
/* harmony export */   "PropertyAccessor": () => /* binding */ PropertyAccessor,
/* harmony export */   "ProxyObservable": () => /* binding */ hr,
/* harmony export */   "Scope": () => /* binding */ Scope,
/* harmony export */   "SetObserver": () => /* binding */ SetObserver,
/* harmony export */   "SetterObserver": () => /* binding */ SetterObserver,
/* harmony export */   "SubscriberRecord": () => /* binding */ SubscriberRecord,
/* harmony export */   "TaggedTemplateExpression": () => /* binding */ TaggedTemplateExpression,
/* harmony export */   "TemplateExpression": () => /* binding */ TemplateExpression,
/* harmony export */   "UnaryExpression": () => /* binding */ UnaryExpression,
/* harmony export */   "ValueConverter": () => /* binding */ D,
/* harmony export */   "ValueConverterDefinition": () => /* binding */ ValueConverterDefinition,
/* harmony export */   "ValueConverterExpression": () => /* binding */ ValueConverterExpression,
/* harmony export */   "alias": () => /* binding */ O,
/* harmony export */   "applyMutationsToIndices": () => /* binding */ It,
/* harmony export */   "bindingBehavior": () => /* binding */ L,
/* harmony export */   "cloneIndexMap": () => /* binding */ et,
/* harmony export */   "connectable": () => /* binding */ Ee,
/* harmony export */   "copyIndexMap": () => /* binding */ Y,
/* harmony export */   "createIndexMap": () => /* binding */ tt,
/* harmony export */   "disableArrayObservation": () => /* binding */ Tt,
/* harmony export */   "disableMapObservation": () => /* binding */ ce,
/* harmony export */   "disableSetObservation": () => /* binding */ Gt,
/* harmony export */   "enableArrayObservation": () => /* binding */ Pt,
/* harmony export */   "enableMapObservation": () => /* binding */ he,
/* harmony export */   "enableSetObservation": () => /* binding */ Wt,
/* harmony export */   "getCollectionObserver": () => /* binding */ gr,
/* harmony export */   "isIndexMap": () => /* binding */ st,
/* harmony export */   "observable": () => /* binding */ mr,
/* harmony export */   "parse": () => /* binding */ je,
/* harmony export */   "parseExpression": () => /* binding */ Te,
/* harmony export */   "registerAliases": () => /* binding */ C,
/* harmony export */   "subscriberCollection": () => /* binding */ rt,
/* harmony export */   "synchronizeIndices": () => /* binding */ Mt,
/* harmony export */   "valueConverter": () => /* binding */ j,
/* harmony export */   "withFlushQueue": () => /* binding */ ct
/* harmony export */ });
/* harmony import */ var _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @aurelia/kernel */ "./node_modules/@aurelia/kernel/dist/esm/index.js");
/* harmony import */ var _aurelia_platform__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @aurelia/platform */ "./node_modules/@aurelia/platform/dist/esm/index.js");






const d = Object.prototype.hasOwnProperty;

const v = Reflect.defineProperty;

const p = t => "function" === typeof t;

const g = t => "string" === typeof t;

function w(t, e, s) {
    v(t, e, {
        enumerable: false,
        configurable: true,
        writable: true,
        value: s
    });
    return s;
}

function b(t, e, s, r = false) {
    if (r || !d.call(t, e)) w(t, e, s);
}

const E = () => Object.create(null);

const A = _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__.Metadata.getOwn;

const y = _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__.Metadata.hasOwn;

const m = _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__.Metadata.define;

const U = _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__.Protocol.annotation.keyFor;

const x = _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__.Protocol.resource.keyFor;

const S = _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__.Protocol.resource.appendTo;

function O(...t) {
    return function(e) {
        const s = U("aliases");
        const r = A(s, e);
        if (void 0 === r) m(s, t, e); else r.push(...t);
    };
}

function C(t, e, r, i) {
    for (let n = 0, o = t.length; n < o; ++n) _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__.Registration.aliasTo(r, e.keyFrom(t[n])).register(i);
}

const k = Object.freeze({});

class BindingContext {
    constructor(t, e) {
        if (void 0 !== t) if (void 0 !== e) this[t] = e; else for (const e in t) if (Object.prototype.hasOwnProperty.call(t, e)) this[e] = t[e];
    }
    static create(t, e) {
        return new BindingContext(t, e);
    }
    static get(t, e, s, r) {
        var i, n;
        if (null == t) throw new Error(`AUR0203:${t}`);
        let o = t.overrideContext;
        let h = t;
        if (s > 0) {
            while (s > 0) {
                s--;
                h = h.parentScope;
                if (null == (null === h || void 0 === h ? void 0 : h.overrideContext)) return;
            }
            o = h.overrideContext;
            return e in o ? o : o.bindingContext;
        }
        while (!(null === h || void 0 === h ? void 0 : h.isBoundary) && null != o && !(e in o) && !(o.bindingContext && e in o.bindingContext)) {
            h = null !== (i = h.parentScope) && void 0 !== i ? i : null;
            o = null !== (n = null === h || void 0 === h ? void 0 : h.overrideContext) && void 0 !== n ? n : null;
        }
        if (o) return e in o ? o : o.bindingContext;
        if (16 & r) return k;
        return t.bindingContext || t.overrideContext;
    }
}

class Scope {
    constructor(t, e, s, r) {
        this.parentScope = t;
        this.bindingContext = e;
        this.overrideContext = s;
        this.isBoundary = r;
    }
    static create(t, e, s) {
        return new Scope(null, t, null == e ? OverrideContext.create(t) : e, null !== s && void 0 !== s ? s : false);
    }
    static fromOverride(t) {
        if (null == t) throw new Error(`AUR0204:${t}`);
        return new Scope(null, t.bindingContext, t, false);
    }
    static fromParent(t, e) {
        if (null == t) throw new Error(`AUR0205:${t}`);
        return new Scope(t, e, OverrideContext.create(e), false);
    }
}

class OverrideContext {
    constructor(t) {
        this.bindingContext = t;
    }
    static create(t) {
        return new OverrideContext(t);
    }
}

const B = _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__.DI.createInterface("ISignaler", (t => t.singleton(Signaler)));

class Signaler {
    constructor() {
        this.signals = E();
    }
    dispatchSignal(t, e) {
        const s = this.signals[t];
        if (void 0 === s) return;
        let r;
        for (r of s.keys()) r.handleChange(void 0, void 0, e);
    }
    addSignalListener(t, e) {
        const s = this.signals;
        const r = s[t];
        if (void 0 === r) s[t] = new Set([ e ]); else r.add(e);
    }
    removeSignalListener(t, e) {
        const s = this.signals[t];
        if (s) s.delete(e);
    }
}

var $;

(function(t) {
    t[t["singleton"] = 1] = "singleton";
    t[t["interceptor"] = 2] = "interceptor";
})($ || ($ = {}));

function L(t) {
    return function(e) {
        return T.define(t, e);
    };
}

class BindingBehaviorDefinition {
    constructor(t, e, s, r, i) {
        this.Type = t;
        this.name = e;
        this.aliases = s;
        this.key = r;
        this.strategy = i;
    }
    static create(t, e) {
        let s;
        let r;
        if (g(t)) {
            s = t;
            r = {
                name: s
            };
        } else {
            s = t.name;
            r = t;
        }
        const h = Object.getPrototypeOf(e) === BindingInterceptor;
        return new BindingBehaviorDefinition(e, (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__.firstDefined)(P(e, "name"), s), (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__.mergeArrays)(P(e, "aliases"), r.aliases, e.aliases), T.keyFrom(s), (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__.fromAnnotationOrDefinitionOrTypeOrDefault)("strategy", r, e, (() => h ? 2 : 1)));
    }
    register(t) {
        const {Type: e, key: r, aliases: i, strategy: n} = this;
        switch (n) {
          case 1:
            _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__.Registration.singleton(r, e).register(t);
            break;

          case 2:
            _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__.Registration.instance(r, new BindingBehaviorFactory(t, e)).register(t);
            break;
        }
        _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__.Registration.aliasTo(r, e).register(t);
        C(i, T, r, t);
    }
}

class BindingBehaviorFactory {
    constructor(t, e) {
        this.ctn = t;
        this.Type = e;
        this.deps = _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__.DI.getDependencies(e);
    }
    construct(t, e) {
        const s = this.ctn;
        const r = this.deps;
        switch (r.length) {
          case 0:
            return new this.Type(t, e);

          case 1:
            return new this.Type(s.get(r[0]), t, e);

          case 2:
            return new this.Type(s.get(r[0]), s.get(r[1]), t, e);

          default:
            return new this.Type(...r.map((t => s.get(t))), t, e);
        }
    }
}

class BindingInterceptor {
    constructor(t, e) {
        this.binding = t;
        this.expr = e;
        this.interceptor = this;
        let s;
        while (t.interceptor !== this) {
            s = t.interceptor;
            t.interceptor = this;
            t = s;
        }
    }
    get oL() {
        return this.binding.oL;
    }
    get locator() {
        return this.binding.locator;
    }
    get $scope() {
        return this.binding.$scope;
    }
    get isBound() {
        return this.binding.isBound;
    }
    get obs() {
        return this.binding.obs;
    }
    get sourceExpression() {
        return this.binding.sourceExpression;
    }
    updateTarget(t, e) {
        this.binding.updateTarget(t, e);
    }
    updateSource(t, e) {
        this.binding.updateSource(t, e);
    }
    callSource(t) {
        return this.binding.callSource(t);
    }
    handleChange(t, e, s) {
        this.binding.handleChange(t, e, s);
    }
    handleCollectionChange(t, e) {
        this.binding.handleCollectionChange(t, e);
    }
    observe(t, e) {
        this.binding.observe(t, e);
    }
    observeCollection(t) {
        this.binding.observeCollection(t);
    }
    $bind(t, e) {
        this.binding.$bind(t, e);
    }
    $unbind(t) {
        this.binding.$unbind(t);
    }
}

const R = x("binding-behavior");

const P = (t, e) => A(U(e), t);

const T = Object.freeze({
    name: R,
    keyFrom(t) {
        return `${R}:${t}`;
    },
    isType(t) {
        return p(t) && y(R, t);
    },
    define(t, e) {
        const s = BindingBehaviorDefinition.create(t, e);
        m(R, s, s.Type);
        m(R, s, s);
        S(e, R);
        return s.Type;
    },
    getDefinition(t) {
        const e = A(R, t);
        if (void 0 === e) throw new Error(`AUR0151:${t.name}`);
        return e;
    },
    annotate(t, e, s) {
        m(U(e), s, t);
    },
    getAnnotation: P
});

function j(t) {
    return function(e) {
        return D.define(t, e);
    };
}

class ValueConverterDefinition {
    constructor(t, e, s, r) {
        this.Type = t;
        this.name = e;
        this.aliases = s;
        this.key = r;
    }
    static create(t, e) {
        let s;
        let r;
        if (g(t)) {
            s = t;
            r = {
                name: s
            };
        } else {
            s = t.name;
            r = t;
        }
        return new ValueConverterDefinition(e, (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__.firstDefined)(M(e, "name"), s), (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__.mergeArrays)(M(e, "aliases"), r.aliases, e.aliases), D.keyFrom(s));
    }
    register(t) {
        const {Type: e, key: r, aliases: i} = this;
        _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__.Registration.singleton(r, e).register(t);
        _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__.Registration.aliasTo(r, e).register(t);
        C(i, D, r, t);
    }
}

const I = x("value-converter");

const M = (t, e) => A(U(e), t);

const D = Object.freeze({
    name: I,
    keyFrom: t => `${I}:${t}`,
    isType(t) {
        return p(t) && y(I, t);
    },
    define(t, e) {
        const s = ValueConverterDefinition.create(t, e);
        m(I, s, s.Type);
        m(I, s, s);
        S(e, I);
        return s.Type;
    },
    getDefinition(t) {
        const e = A(I, t);
        if (void 0 === e) throw new Error(`AUR0152:${t.name}`);
        return e;
    },
    annotate(t, e, s) {
        m(U(e), s, t);
    },
    getAnnotation: M
});

var F;

(function(t) {
    t[t["CallsFunction"] = 128] = "CallsFunction";
    t[t["HasAncestor"] = 256] = "HasAncestor";
    t[t["IsPrimary"] = 512] = "IsPrimary";
    t[t["IsLeftHandSide"] = 1024] = "IsLeftHandSide";
    t[t["HasBind"] = 2048] = "HasBind";
    t[t["HasUnbind"] = 4096] = "HasUnbind";
    t[t["IsAssignable"] = 8192] = "IsAssignable";
    t[t["IsLiteral"] = 16384] = "IsLiteral";
    t[t["IsResource"] = 32768] = "IsResource";
    t[t["IsForDeclaration"] = 65536] = "IsForDeclaration";
    t[t["Type"] = 31] = "Type";
    t[t["AccessThis"] = 1793] = "AccessThis";
    t[t["AccessScope"] = 10082] = "AccessScope";
    t[t["ArrayLiteral"] = 17955] = "ArrayLiteral";
    t[t["ObjectLiteral"] = 17956] = "ObjectLiteral";
    t[t["PrimitiveLiteral"] = 17925] = "PrimitiveLiteral";
    t[t["Template"] = 17958] = "Template";
    t[t["Unary"] = 39] = "Unary";
    t[t["CallScope"] = 1448] = "CallScope";
    t[t["CallMember"] = 1161] = "CallMember";
    t[t["CallFunction"] = 1162] = "CallFunction";
    t[t["AccessMember"] = 9323] = "AccessMember";
    t[t["AccessKeyed"] = 9324] = "AccessKeyed";
    t[t["TaggedTemplate"] = 1197] = "TaggedTemplate";
    t[t["Binary"] = 46] = "Binary";
    t[t["Conditional"] = 63] = "Conditional";
    t[t["Assign"] = 8208] = "Assign";
    t[t["ValueConverter"] = 36913] = "ValueConverter";
    t[t["BindingBehavior"] = 38962] = "BindingBehavior";
    t[t["HtmlLiteral"] = 51] = "HtmlLiteral";
    t[t["ArrayBindingPattern"] = 65556] = "ArrayBindingPattern";
    t[t["ObjectBindingPattern"] = 65557] = "ObjectBindingPattern";
    t[t["BindingIdentifier"] = 65558] = "BindingIdentifier";
    t[t["ForOfStatement"] = 6199] = "ForOfStatement";
    t[t["Interpolation"] = 24] = "Interpolation";
    t[t["ArrayDestructuring"] = 90137] = "ArrayDestructuring";
    t[t["ObjectDestructuring"] = 106521] = "ObjectDestructuring";
    t[t["DestructuringAssignmentLeaf"] = 139289] = "DestructuringAssignmentLeaf";
})(F || (F = {}));

class Unparser {
    constructor() {
        this.text = "";
    }
    static unparse(t) {
        const e = new Unparser;
        t.accept(e);
        return e.text;
    }
    visitAccessMember(t) {
        t.object.accept(this);
        this.text += `.${t.name}`;
    }
    visitAccessKeyed(t) {
        t.object.accept(this);
        this.text += "[";
        t.key.accept(this);
        this.text += "]";
    }
    visitAccessThis(t) {
        if (0 === t.ancestor) {
            this.text += "$this";
            return;
        }
        this.text += "$parent";
        let e = t.ancestor - 1;
        while (e--) this.text += ".$parent";
    }
    visitAccessScope(t) {
        let e = t.ancestor;
        while (e--) this.text += "$parent.";
        this.text += t.name;
    }
    visitArrayLiteral(t) {
        const e = t.elements;
        this.text += "[";
        for (let t = 0, s = e.length; t < s; ++t) {
            if (0 !== t) this.text += ",";
            e[t].accept(this);
        }
        this.text += "]";
    }
    visitObjectLiteral(t) {
        const e = t.keys;
        const s = t.values;
        this.text += "{";
        for (let t = 0, r = e.length; t < r; ++t) {
            if (0 !== t) this.text += ",";
            this.text += `'${e[t]}':`;
            s[t].accept(this);
        }
        this.text += "}";
    }
    visitPrimitiveLiteral(t) {
        this.text += "(";
        if (g(t.value)) {
            const e = t.value.replace(/'/g, "\\'");
            this.text += `'${e}'`;
        } else this.text += `${t.value}`;
        this.text += ")";
    }
    visitCallFunction(t) {
        this.text += "(";
        t.func.accept(this);
        this.writeArgs(t.args);
        this.text += ")";
    }
    visitCallMember(t) {
        this.text += "(";
        t.object.accept(this);
        this.text += `.${t.name}`;
        this.writeArgs(t.args);
        this.text += ")";
    }
    visitCallScope(t) {
        this.text += "(";
        let e = t.ancestor;
        while (e--) this.text += "$parent.";
        this.text += t.name;
        this.writeArgs(t.args);
        this.text += ")";
    }
    visitTemplate(t) {
        const {cooked: e, expressions: s} = t;
        const r = s.length;
        this.text += "`";
        this.text += e[0];
        for (let t = 0; t < r; t++) {
            s[t].accept(this);
            this.text += e[t + 1];
        }
        this.text += "`";
    }
    visitTaggedTemplate(t) {
        const {cooked: e, expressions: s} = t;
        const r = s.length;
        t.func.accept(this);
        this.text += "`";
        this.text += e[0];
        for (let t = 0; t < r; t++) {
            s[t].accept(this);
            this.text += e[t + 1];
        }
        this.text += "`";
    }
    visitUnary(t) {
        this.text += `(${t.operation}`;
        if (t.operation.charCodeAt(0) >= 97) this.text += " ";
        t.expression.accept(this);
        this.text += ")";
    }
    visitBinary(t) {
        this.text += "(";
        t.left.accept(this);
        if (105 === t.operation.charCodeAt(0)) this.text += ` ${t.operation} `; else this.text += t.operation;
        t.right.accept(this);
        this.text += ")";
    }
    visitConditional(t) {
        this.text += "(";
        t.condition.accept(this);
        this.text += "?";
        t.yes.accept(this);
        this.text += ":";
        t.no.accept(this);
        this.text += ")";
    }
    visitAssign(t) {
        this.text += "(";
        t.target.accept(this);
        this.text += "=";
        t.value.accept(this);
        this.text += ")";
    }
    visitValueConverter(t) {
        const e = t.args;
        t.expression.accept(this);
        this.text += `|${t.name}`;
        for (let t = 0, s = e.length; t < s; ++t) {
            this.text += ":";
            e[t].accept(this);
        }
    }
    visitBindingBehavior(t) {
        const e = t.args;
        t.expression.accept(this);
        this.text += `&${t.name}`;
        for (let t = 0, s = e.length; t < s; ++t) {
            this.text += ":";
            e[t].accept(this);
        }
    }
    visitArrayBindingPattern(t) {
        const e = t.elements;
        this.text += "[";
        for (let t = 0, s = e.length; t < s; ++t) {
            if (0 !== t) this.text += ",";
            e[t].accept(this);
        }
        this.text += "]";
    }
    visitObjectBindingPattern(t) {
        const e = t.keys;
        const s = t.values;
        this.text += "{";
        for (let t = 0, r = e.length; t < r; ++t) {
            if (0 !== t) this.text += ",";
            this.text += `'${e[t]}':`;
            s[t].accept(this);
        }
        this.text += "}";
    }
    visitBindingIdentifier(t) {
        this.text += t.name;
    }
    visitHtmlLiteral(t) {
        throw new Error("visitHtmlLiteral");
    }
    visitForOfStatement(t) {
        t.declaration.accept(this);
        this.text += " of ";
        t.iterable.accept(this);
    }
    visitInterpolation(t) {
        const {parts: e, expressions: s} = t;
        const r = s.length;
        this.text += "${";
        this.text += e[0];
        for (let t = 0; t < r; t++) {
            s[t].accept(this);
            this.text += e[t + 1];
        }
        this.text += "}";
    }
    visitDestructuringAssignmentExpression(t) {
        const e = t.$kind;
        const s = 106521 === e;
        this.text += s ? "{" : "[";
        const r = t.list;
        const i = r.length;
        let n;
        let o;
        for (n = 0; n < i; n++) {
            o = r[n];
            switch (o.$kind) {
              case 139289:
                o.accept(this);
                break;

              case 90137:
              case 106521:
                {
                    const t = o.source;
                    if (t) {
                        t.accept(this);
                        this.text += ":";
                    }
                    o.accept(this);
                    break;
                }
            }
        }
        this.text += s ? "}" : "]";
    }
    visitDestructuringAssignmentSingleExpression(t) {
        t.source.accept(this);
        this.text += ":";
        t.target.accept(this);
        const e = t.initializer;
        if (void 0 !== e) {
            this.text += "=";
            e.accept(this);
        }
    }
    visitDestructuringAssignmentRestExpression(t) {
        this.text += "...";
        t.accept(this);
    }
    writeArgs(t) {
        this.text += "(";
        for (let e = 0, s = t.length; e < s; ++e) {
            if (0 !== e) this.text += ",";
            t[e].accept(this);
        }
        this.text += ")";
    }
}

class CustomExpression {
    constructor(t) {
        this.value = t;
    }
    evaluate(t, e, s, r) {
        return this.value;
    }
}

class BindingBehaviorExpression {
    constructor(t, e, s) {
        this.expression = t;
        this.name = e;
        this.args = s;
        this.behaviorKey = T.keyFrom(e);
    }
    get $kind() {
        return 38962;
    }
    get hasBind() {
        return true;
    }
    get hasUnbind() {
        return true;
    }
    evaluate(t, e, s, r) {
        return this.expression.evaluate(t, e, s, r);
    }
    assign(t, e, s, r) {
        return this.expression.assign(t, e, s, r);
    }
    bind(t, e, s) {
        if (this.expression.hasBind) this.expression.bind(t, e, s);
        const r = s.locator.get(this.behaviorKey);
        if (null == r) throw new Error(`AUR0101:${this.name}`);
        if (!(r instanceof BindingBehaviorFactory)) if (void 0 === s[this.behaviorKey]) {
            s[this.behaviorKey] = r;
            r.bind.call(r, t, e, s, ...this.args.map((r => r.evaluate(t, e, s.locator, null))));
        } else throw new Error(`AUR0102:${this.name}`);
    }
    unbind(t, e, s) {
        const r = this.behaviorKey;
        const i = s;
        if (void 0 !== i[r]) {
            if (p(i[r].unbind)) i[r].unbind(t, e, s);
            i[r] = void 0;
        }
        if (this.expression.hasUnbind) this.expression.unbind(t, e, s);
    }
    accept(t) {
        return t.visitBindingBehavior(this);
    }
    toString() {
        return Unparser.unparse(this);
    }
}

class ValueConverterExpression {
    constructor(t, e, s) {
        this.expression = t;
        this.name = e;
        this.args = s;
        this.converterKey = D.keyFrom(e);
    }
    get $kind() {
        return 36913;
    }
    get hasBind() {
        return false;
    }
    get hasUnbind() {
        return true;
    }
    evaluate(t, e, s, r) {
        const i = s.get(this.converterKey);
        if (null == i) throw new Error(`AUR0103:${this.name}`);
        if (null !== r && "handleChange" in r) {
            const t = i.signals;
            if (null != t) {
                const e = s.get(B);
                for (let s = 0, i = t.length; s < i; ++s) e.addSignalListener(t[s], r);
            }
        }
        if ("toView" in i) return i.toView(this.expression.evaluate(t, e, s, r), ...this.args.map((i => i.evaluate(t, e, s, r))));
        return this.expression.evaluate(t, e, s, r);
    }
    assign(t, e, s, r) {
        const i = s.get(this.converterKey);
        if (null == i) throw new Error(`AUR0104:${this.name}`);
        if ("fromView" in i) r = i.fromView(r, ...this.args.map((r => r.evaluate(t, e, s, null))));
        return this.expression.assign(t, e, s, r);
    }
    unbind(t, e, s) {
        const r = s.locator.get(this.converterKey);
        if (void 0 === r.signals) return;
        const i = s.locator.get(B);
        for (let t = 0; t < r.signals.length; ++t) i.removeSignalListener(r.signals[t], s);
    }
    accept(t) {
        return t.visitValueConverter(this);
    }
    toString() {
        return Unparser.unparse(this);
    }
}

class AssignExpression {
    constructor(t, e) {
        this.target = t;
        this.value = e;
    }
    get $kind() {
        return 8208;
    }
    get hasBind() {
        return false;
    }
    get hasUnbind() {
        return false;
    }
    evaluate(t, e, s, r) {
        return this.target.assign(t, e, s, this.value.evaluate(t, e, s, r));
    }
    assign(t, e, s, r) {
        this.value.assign(t, e, s, r);
        return this.target.assign(t, e, s, r);
    }
    accept(t) {
        return t.visitAssign(this);
    }
    toString() {
        return Unparser.unparse(this);
    }
}

class ConditionalExpression {
    constructor(t, e, s) {
        this.condition = t;
        this.yes = e;
        this.no = s;
    }
    get $kind() {
        return 63;
    }
    get hasBind() {
        return false;
    }
    get hasUnbind() {
        return false;
    }
    evaluate(t, e, s, r) {
        return this.condition.evaluate(t, e, s, r) ? this.yes.evaluate(t, e, s, r) : this.no.evaluate(t, e, s, r);
    }
    assign(t, e, s, r) {
        return;
    }
    accept(t) {
        return t.visitConditional(this);
    }
    toString() {
        return Unparser.unparse(this);
    }
}

class AccessThisExpression {
    constructor(t = 0) {
        this.ancestor = t;
    }
    get $kind() {
        return 1793;
    }
    get hasBind() {
        return false;
    }
    get hasUnbind() {
        return false;
    }
    evaluate(t, e, s, r) {
        var i;
        let n = e.overrideContext;
        let o = e;
        let h = this.ancestor;
        while (h-- && n) {
            o = o.parentScope;
            n = null !== (i = null === o || void 0 === o ? void 0 : o.overrideContext) && void 0 !== i ? i : null;
        }
        return h < 1 && n ? n.bindingContext : void 0;
    }
    assign(t, e, s, r) {
        return;
    }
    accept(t) {
        return t.visitAccessThis(this);
    }
    toString() {
        return Unparser.unparse(this);
    }
}

AccessThisExpression.$this = new AccessThisExpression(0);

AccessThisExpression.$parent = new AccessThisExpression(1);

class AccessScopeExpression {
    constructor(t, e = 0) {
        this.name = t;
        this.ancestor = e;
    }
    get $kind() {
        return 10082;
    }
    get hasBind() {
        return false;
    }
    get hasUnbind() {
        return false;
    }
    evaluate(t, e, s, r) {
        const i = BindingContext.get(e, this.name, this.ancestor, t);
        if (null !== r) r.observe(i, this.name);
        const n = i[this.name];
        if (null == n && "$host" === this.name) throw new Error("AUR0105");
        if (1 & t) return n;
        return null == n ? "" : n;
    }
    assign(t, e, s, r) {
        var i;
        if ("$host" === this.name) throw new Error("AUR0106");
        const n = BindingContext.get(e, this.name, this.ancestor, t);
        if (n instanceof Object) if (void 0 !== (null === (i = n.$observers) || void 0 === i ? void 0 : i[this.name])) {
            n.$observers[this.name].setValue(r, t);
            return r;
        } else return n[this.name] = r;
        return;
    }
    accept(t) {
        return t.visitAccessScope(this);
    }
    toString() {
        return Unparser.unparse(this);
    }
}

class AccessMemberExpression {
    constructor(t, e) {
        this.object = t;
        this.name = e;
    }
    get $kind() {
        return 9323;
    }
    get hasBind() {
        return false;
    }
    get hasUnbind() {
        return false;
    }
    evaluate(t, e, s, r) {
        const i = this.object.evaluate(t, e, s, (128 & t) > 0 ? null : r);
        if (1 & t) {
            if (null == i) return i;
            if (null !== r) r.observe(i, this.name);
            return i[this.name];
        }
        if (null !== r && i instanceof Object) r.observe(i, this.name);
        return i ? i[this.name] : "";
    }
    assign(t, e, s, r) {
        const i = this.object.evaluate(t, e, s, null);
        if (i instanceof Object) if (void 0 !== i.$observers && void 0 !== i.$observers[this.name]) i.$observers[this.name].setValue(r, t); else i[this.name] = r; else this.object.assign(t, e, s, {
            [this.name]: r
        });
        return r;
    }
    accept(t) {
        return t.visitAccessMember(this);
    }
    toString() {
        return Unparser.unparse(this);
    }
}

class AccessKeyedExpression {
    constructor(t, e) {
        this.object = t;
        this.key = e;
    }
    get $kind() {
        return 9324;
    }
    get hasBind() {
        return false;
    }
    get hasUnbind() {
        return false;
    }
    evaluate(t, e, s, r) {
        const i = this.object.evaluate(t, e, s, (128 & t) > 0 ? null : r);
        if (i instanceof Object) {
            const n = this.key.evaluate(t, e, s, (128 & t) > 0 ? null : r);
            if (null !== r) r.observe(i, n);
            return i[n];
        }
        return;
    }
    assign(t, e, s, r) {
        const i = this.object.evaluate(t, e, s, null);
        const n = this.key.evaluate(t, e, s, null);
        return i[n] = r;
    }
    accept(t) {
        return t.visitAccessKeyed(this);
    }
    toString() {
        return Unparser.unparse(this);
    }
}

class CallScopeExpression {
    constructor(t, e, s = 0) {
        this.name = t;
        this.args = e;
        this.ancestor = s;
    }
    get $kind() {
        return 1448;
    }
    get hasBind() {
        return false;
    }
    get hasUnbind() {
        return false;
    }
    evaluate(t, e, s, r) {
        const i = this.args.map((i => i.evaluate(t, e, s, r)));
        const n = BindingContext.get(e, this.name, this.ancestor, t);
        const o = N(t, n, this.name);
        if (o) return o.apply(n, i);
        return;
    }
    assign(t, e, s, r) {
        return;
    }
    accept(t) {
        return t.visitCallScope(this);
    }
    toString() {
        return Unparser.unparse(this);
    }
}

class CallMemberExpression {
    constructor(t, e, s) {
        this.object = t;
        this.name = e;
        this.args = s;
    }
    get $kind() {
        return 1161;
    }
    get hasBind() {
        return false;
    }
    get hasUnbind() {
        return false;
    }
    evaluate(t, e, s, r) {
        const i = this.object.evaluate(t, e, s, (128 & t) > 0 ? null : r);
        const n = this.args.map((i => i.evaluate(t, e, s, r)));
        const o = N(t, i, this.name);
        if (o) return o.apply(i, n);
        return;
    }
    assign(t, e, s, r) {
        return;
    }
    accept(t) {
        return t.visitCallMember(this);
    }
    toString() {
        return Unparser.unparse(this);
    }
}

class CallFunctionExpression {
    constructor(t, e) {
        this.func = t;
        this.args = e;
    }
    get $kind() {
        return 1162;
    }
    get hasBind() {
        return false;
    }
    get hasUnbind() {
        return false;
    }
    evaluate(t, e, s, r) {
        const i = this.func.evaluate(t, e, s, r);
        if (p(i)) return i(...this.args.map((i => i.evaluate(t, e, s, r))));
        if (!(8 & t) && null == i) return;
        throw new Error("AUR0107");
    }
    assign(t, e, s, r) {
        return;
    }
    accept(t) {
        return t.visitCallFunction(this);
    }
    toString() {
        return Unparser.unparse(this);
    }
}

class BinaryExpression {
    constructor(t, e, s) {
        this.operation = t;
        this.left = e;
        this.right = s;
    }
    get $kind() {
        return 46;
    }
    get hasBind() {
        return false;
    }
    get hasUnbind() {
        return false;
    }
    evaluate(t, e, s, r) {
        switch (this.operation) {
          case "&&":
            return this.left.evaluate(t, e, s, r) && this.right.evaluate(t, e, s, r);

          case "||":
            return this.left.evaluate(t, e, s, r) || this.right.evaluate(t, e, s, r);

          case "==":
            return this.left.evaluate(t, e, s, r) == this.right.evaluate(t, e, s, r);

          case "===":
            return this.left.evaluate(t, e, s, r) === this.right.evaluate(t, e, s, r);

          case "!=":
            return this.left.evaluate(t, e, s, r) != this.right.evaluate(t, e, s, r);

          case "!==":
            return this.left.evaluate(t, e, s, r) !== this.right.evaluate(t, e, s, r);

          case "instanceof":
            {
                const i = this.right.evaluate(t, e, s, r);
                if (p(i)) return this.left.evaluate(t, e, s, r) instanceof i;
                return false;
            }

          case "in":
            {
                const i = this.right.evaluate(t, e, s, r);
                if (i instanceof Object) return this.left.evaluate(t, e, s, r) in i;
                return false;
            }

          case "+":
            {
                const i = this.left.evaluate(t, e, s, r);
                const n = this.right.evaluate(t, e, s, r);
                if ((1 & t) > 0) return i + n;
                if (!i || !n) {
                    if ((0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__.isNumberOrBigInt)(i) || (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__.isNumberOrBigInt)(n)) return (i || 0) + (n || 0);
                    if ((0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__.isStringOrDate)(i) || (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__.isStringOrDate)(n)) return (i || "") + (n || "");
                }
                return i + n;
            }

          case "-":
            return this.left.evaluate(t, e, s, r) - this.right.evaluate(t, e, s, r);

          case "*":
            return this.left.evaluate(t, e, s, r) * this.right.evaluate(t, e, s, r);

          case "/":
            return this.left.evaluate(t, e, s, r) / this.right.evaluate(t, e, s, r);

          case "%":
            return this.left.evaluate(t, e, s, r) % this.right.evaluate(t, e, s, r);

          case "<":
            return this.left.evaluate(t, e, s, r) < this.right.evaluate(t, e, s, r);

          case ">":
            return this.left.evaluate(t, e, s, r) > this.right.evaluate(t, e, s, r);

          case "<=":
            return this.left.evaluate(t, e, s, r) <= this.right.evaluate(t, e, s, r);

          case ">=":
            return this.left.evaluate(t, e, s, r) >= this.right.evaluate(t, e, s, r);

          default:
            throw new Error(`AUR0108:${this.operation}`);
        }
    }
    assign(t, e, s, r) {
        return;
    }
    accept(t) {
        return t.visitBinary(this);
    }
    toString() {
        return Unparser.unparse(this);
    }
}

class UnaryExpression {
    constructor(t, e) {
        this.operation = t;
        this.expression = e;
    }
    get $kind() {
        return 39;
    }
    get hasBind() {
        return false;
    }
    get hasUnbind() {
        return false;
    }
    evaluate(t, e, s, r) {
        switch (this.operation) {
          case "void":
            return void this.expression.evaluate(t, e, s, r);

          case "typeof":
            return typeof this.expression.evaluate(1 | t, e, s, r);

          case "!":
            return !this.expression.evaluate(t, e, s, r);

          case "-":
            return -this.expression.evaluate(t, e, s, r);

          case "+":
            return +this.expression.evaluate(t, e, s, r);

          default:
            throw new Error(`AUR0109:${this.operation}`);
        }
    }
    assign(t, e, s, r) {
        return;
    }
    accept(t) {
        return t.visitUnary(this);
    }
    toString() {
        return Unparser.unparse(this);
    }
}

class PrimitiveLiteralExpression {
    constructor(t) {
        this.value = t;
    }
    get $kind() {
        return 17925;
    }
    get hasBind() {
        return false;
    }
    get hasUnbind() {
        return false;
    }
    evaluate(t, e, s, r) {
        return this.value;
    }
    assign(t, e, s, r) {
        return;
    }
    accept(t) {
        return t.visitPrimitiveLiteral(this);
    }
    toString() {
        return Unparser.unparse(this);
    }
}

PrimitiveLiteralExpression.$undefined = new PrimitiveLiteralExpression(void 0);

PrimitiveLiteralExpression.$null = new PrimitiveLiteralExpression(null);

PrimitiveLiteralExpression.$true = new PrimitiveLiteralExpression(true);

PrimitiveLiteralExpression.$false = new PrimitiveLiteralExpression(false);

PrimitiveLiteralExpression.$empty = new PrimitiveLiteralExpression("");

class HtmlLiteralExpression {
    constructor(t) {
        this.parts = t;
    }
    get $kind() {
        return 51;
    }
    get hasBind() {
        return false;
    }
    get hasUnbind() {
        return false;
    }
    evaluate(t, e, s, r) {
        let i = "";
        for (let n = 0; n < this.parts.length; ++n) {
            const o = this.parts[n].evaluate(t, e, s, r);
            if (null == o) continue;
            i += o;
        }
        return i;
    }
    assign(t, e, s, r, i) {
        return;
    }
    accept(t) {
        return t.visitHtmlLiteral(this);
    }
    toString() {
        return Unparser.unparse(this);
    }
}

class ArrayLiteralExpression {
    constructor(t) {
        this.elements = t;
    }
    get $kind() {
        return 17955;
    }
    get hasBind() {
        return false;
    }
    get hasUnbind() {
        return false;
    }
    evaluate(t, e, s, r) {
        return this.elements.map((i => i.evaluate(t, e, s, r)));
    }
    assign(t, e, s, r) {
        return;
    }
    accept(t) {
        return t.visitArrayLiteral(this);
    }
    toString() {
        return Unparser.unparse(this);
    }
}

ArrayLiteralExpression.$empty = new ArrayLiteralExpression(_aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__.emptyArray);

class ObjectLiteralExpression {
    constructor(t, e) {
        this.keys = t;
        this.values = e;
    }
    get $kind() {
        return 17956;
    }
    get hasBind() {
        return false;
    }
    get hasUnbind() {
        return false;
    }
    evaluate(t, e, s, r) {
        const i = {};
        for (let n = 0; n < this.keys.length; ++n) i[this.keys[n]] = this.values[n].evaluate(t, e, s, r);
        return i;
    }
    assign(t, e, s, r) {
        return;
    }
    accept(t) {
        return t.visitObjectLiteral(this);
    }
    toString() {
        return Unparser.unparse(this);
    }
}

ObjectLiteralExpression.$empty = new ObjectLiteralExpression(_aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__.emptyArray, _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__.emptyArray);

class TemplateExpression {
    constructor(t, e = _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__.emptyArray) {
        this.cooked = t;
        this.expressions = e;
    }
    get $kind() {
        return 17958;
    }
    get hasBind() {
        return false;
    }
    get hasUnbind() {
        return false;
    }
    evaluate(t, e, s, r) {
        let i = this.cooked[0];
        for (let n = 0; n < this.expressions.length; ++n) {
            i += String(this.expressions[n].evaluate(t, e, s, r));
            i += this.cooked[n + 1];
        }
        return i;
    }
    assign(t, e, s, r) {
        return;
    }
    accept(t) {
        return t.visitTemplate(this);
    }
    toString() {
        return Unparser.unparse(this);
    }
}

TemplateExpression.$empty = new TemplateExpression([ "" ]);

class TaggedTemplateExpression {
    constructor(t, e, s, r = _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__.emptyArray) {
        this.cooked = t;
        this.func = s;
        this.expressions = r;
        t.raw = e;
    }
    get $kind() {
        return 1197;
    }
    get hasBind() {
        return false;
    }
    get hasUnbind() {
        return false;
    }
    evaluate(t, e, s, r) {
        const i = this.expressions.map((i => i.evaluate(t, e, s, r)));
        const n = this.func.evaluate(t, e, s, r);
        if (!p(n)) throw new Error(`AUR0110`);
        return n(this.cooked, ...i);
    }
    assign(t, e, s, r) {
        return;
    }
    accept(t) {
        return t.visitTaggedTemplate(this);
    }
    toString() {
        return Unparser.unparse(this);
    }
}

class ArrayBindingPattern {
    constructor(t) {
        this.elements = t;
    }
    get $kind() {
        return 65556;
    }
    get hasBind() {
        return false;
    }
    get hasUnbind() {
        return false;
    }
    evaluate(t, e, s, r) {
        return;
    }
    assign(t, e, s, r) {
        return;
    }
    accept(t) {
        return t.visitArrayBindingPattern(this);
    }
    toString() {
        return Unparser.unparse(this);
    }
}

class ObjectBindingPattern {
    constructor(t, e) {
        this.keys = t;
        this.values = e;
    }
    get $kind() {
        return 65557;
    }
    get hasBind() {
        return false;
    }
    get hasUnbind() {
        return false;
    }
    evaluate(t, e, s, r) {
        return;
    }
    assign(t, e, s, r) {
        return;
    }
    accept(t) {
        return t.visitObjectBindingPattern(this);
    }
    toString() {
        return Unparser.unparse(this);
    }
}

class BindingIdentifier {
    constructor(t) {
        this.name = t;
    }
    get $kind() {
        return 65558;
    }
    get hasBind() {
        return false;
    }
    get hasUnbind() {
        return false;
    }
    evaluate(t, e, s, r) {
        return this.name;
    }
    accept(t) {
        return t.visitBindingIdentifier(this);
    }
    toString() {
        return Unparser.unparse(this);
    }
}

const V = Object.prototype.toString;

class ForOfStatement {
    constructor(t, e) {
        this.declaration = t;
        this.iterable = e;
    }
    get $kind() {
        return 6199;
    }
    get hasBind() {
        return false;
    }
    get hasUnbind() {
        return false;
    }
    evaluate(t, e, s, r) {
        return this.iterable.evaluate(t, e, s, r);
    }
    assign(t, e, s, r) {
        return;
    }
    count(t, e) {
        switch (V.call(e)) {
          case "[object Array]":
            return e.length;

          case "[object Map]":
            return e.size;

          case "[object Set]":
            return e.size;

          case "[object Number]":
            return e;

          case "[object Null]":
            return 0;

          case "[object Undefined]":
            return 0;

          default:
            throw new Error(`Cannot count ${V.call(e)}`);
        }
    }
    iterate(t, e, s) {
        switch (V.call(e)) {
          case "[object Array]":
            return K(e, s);

          case "[object Map]":
            return q(e, s);

          case "[object Set]":
            return H(e, s);

          case "[object Number]":
            return Q(e, s);

          case "[object Null]":
            return;

          case "[object Undefined]":
            return;

          default:
            throw new Error(`Cannot iterate over ${V.call(e)}`);
        }
    }
    bind(t, e, s) {
        if (this.iterable.hasBind) this.iterable.bind(t, e, s);
    }
    unbind(t, e, s) {
        if (this.iterable.hasUnbind) this.iterable.unbind(t, e, s);
    }
    accept(t) {
        return t.visitForOfStatement(this);
    }
    toString() {
        return Unparser.unparse(this);
    }
}

class Interpolation {
    constructor(t, e = _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__.emptyArray) {
        this.parts = t;
        this.expressions = e;
        this.isMulti = e.length > 1;
        this.firstExpression = e[0];
    }
    get $kind() {
        return 24;
    }
    get hasBind() {
        return false;
    }
    get hasUnbind() {
        return false;
    }
    evaluate(t, e, s, r) {
        if (this.isMulti) {
            let i = this.parts[0];
            for (let n = 0; n < this.expressions.length; ++n) {
                i += String(this.expressions[n].evaluate(t, e, s, r));
                i += this.parts[n + 1];
            }
            return i;
        } else return `${this.parts[0]}${this.firstExpression.evaluate(t, e, s, r)}${this.parts[1]}`;
    }
    assign(t, e, s, r) {
        return;
    }
    accept(t) {
        return t.visitInterpolation(this);
    }
    toString() {
        return Unparser.unparse(this);
    }
}

class DestructuringAssignmentExpression {
    constructor(t, e, s, r) {
        this.$kind = t;
        this.list = e;
        this.source = s;
        this.initializer = r;
    }
    get hasBind() {
        return false;
    }
    get hasUnbind() {
        return false;
    }
    evaluate(t, e, s, r) {
        return;
    }
    assign(t, e, s, r) {
        var i;
        const n = this.list;
        const o = n.length;
        let h;
        let c;
        for (h = 0; h < o; h++) {
            c = n[h];
            switch (c.$kind) {
              case 139289:
                c.assign(t, e, s, r);
                break;

              case 90137:
              case 106521:
                {
                    if ("object" !== typeof r || null === r) throw new Error("AUR0112");
                    let n = c.source.evaluate(t, Scope.create(r), s, null);
                    if (void 0 === n) n = null === (i = c.initializer) || void 0 === i ? void 0 : i.evaluate(t, e, s, null);
                    c.assign(t, e, s, n);
                    break;
                }
            }
        }
    }
    accept(t) {
        return t.visitDestructuringAssignmentExpression(this);
    }
    toString() {
        return Unparser.unparse(this);
    }
}

class DestructuringAssignmentSingleExpression {
    constructor(t, e, s) {
        this.target = t;
        this.source = e;
        this.initializer = s;
    }
    get $kind() {
        return 139289;
    }
    evaluate(t, e, s, r) {
        return;
    }
    assign(t, e, s, r) {
        var i;
        if (null == r) return;
        if ("object" !== typeof r) throw new Error("AUR0112");
        let n = this.source.evaluate(t, Scope.create(r), s, null);
        if (void 0 === n) n = null === (i = this.initializer) || void 0 === i ? void 0 : i.evaluate(t, e, s, null);
        this.target.assign(t, e, s, n);
    }
    accept(t) {
        return t.visitDestructuringAssignmentSingleExpression(this);
    }
    toString() {
        return Unparser.unparse(this);
    }
}

class DestructuringAssignmentRestExpression {
    constructor(t, e) {
        this.target = t;
        this.indexOrProperties = e;
    }
    get $kind() {
        return 139289;
    }
    evaluate(t, e, s, r) {
        return;
    }
    assign(t, e, s, r) {
        if (null == r) return;
        if ("object" !== typeof r) throw new Error("AUR0112");
        const i = this.indexOrProperties;
        let n;
        if ((0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__.isArrayIndex)(i)) {
            if (!Array.isArray(r)) throw new Error("AUR0112");
            n = r.slice(i);
        } else n = Object.entries(r).reduce(((t, [e, s]) => {
            if (!i.includes(e)) t[e] = s;
            return t;
        }), {});
        this.target.assign(t, e, s, n);
    }
    accept(t) {
        return t.visitDestructuringAssignmentRestExpression(this);
    }
    toString() {
        return Unparser.unparse(this);
    }
}

function N(t, e, s) {
    const r = null == e ? null : e[s];
    if (p(r)) return r;
    if (!(8 & t) && null == r) return null;
    throw new Error(`AUR0111:${s}`);
}

function K(t, e) {
    for (let s = 0, r = t.length; s < r; ++s) e(t, s, t[s]);
}

function q(t, e) {
    const s = Array(t.size);
    let r = -1;
    for (const e of t.entries()) s[++r] = e;
    K(s, e);
}

function H(t, e) {
    const s = Array(t.size);
    let r = -1;
    for (const e of t.keys()) s[++r] = e;
    K(s, e);
}

function Q(t, e) {
    const s = Array(t);
    for (let e = 0; e < t; ++e) s[e] = e;
    K(s, e);
}

const _ = _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__.DI.createInterface("ICoercionConfiguration");

var z;

(function(t) {
    t[t["oneTime"] = 1] = "oneTime";
    t[t["toView"] = 2] = "toView";
    t[t["fromView"] = 4] = "fromView";
    t[t["twoWay"] = 6] = "twoWay";
    t[t["default"] = 8] = "default";
})(z || (z = {}));

var W;

(function(t) {
    t[t["none"] = 0] = "none";
    t[t["persistentBindingFlags"] = 961] = "persistentBindingFlags";
    t[t["allowParentScopeTraversal"] = 64] = "allowParentScopeTraversal";
    t[t["observeLeafPropertiesOnly"] = 128] = "observeLeafPropertiesOnly";
    t[t["targetObserverFlags"] = 769] = "targetObserverFlags";
    t[t["noFlush"] = 256] = "noFlush";
    t[t["persistentTargetObserverQueue"] = 512] = "persistentTargetObserverQueue";
    t[t["bindingStrategy"] = 1] = "bindingStrategy";
    t[t["isStrictBindingStrategy"] = 1] = "isStrictBindingStrategy";
    t[t["fromBind"] = 2] = "fromBind";
    t[t["fromUnbind"] = 4] = "fromUnbind";
    t[t["mustEvaluate"] = 8] = "mustEvaluate";
    t[t["isTraversingParentScope"] = 16] = "isTraversingParentScope";
    t[t["dispose"] = 32] = "dispose";
})(W || (W = {}));

var G;

(function(t) {
    t[t["None"] = 0] = "None";
    t[t["Subscriber0"] = 1] = "Subscriber0";
    t[t["Subscriber1"] = 2] = "Subscriber1";
    t[t["Subscriber2"] = 4] = "Subscriber2";
    t[t["SubscribersRest"] = 8] = "SubscribersRest";
    t[t["Any"] = 15] = "Any";
})(G || (G = {}));

var Z;

(function(t) {
    t[t["none"] = 0] = "none";
    t[t["capturing"] = 1] = "capturing";
    t[t["bubbling"] = 2] = "bubbling";
})(Z || (Z = {}));

var J;

(function(t) {
    t[t["indexed"] = 8] = "indexed";
    t[t["keyed"] = 4] = "keyed";
    t[t["array"] = 9] = "array";
    t[t["map"] = 6] = "map";
    t[t["set"] = 7] = "set";
})(J || (J = {}));

var X;

(function(t) {
    t[t["None"] = 0] = "None";
    t[t["Observer"] = 1] = "Observer";
    t[t["Node"] = 2] = "Node";
    t[t["Layout"] = 4] = "Layout";
    t[t["Primtive"] = 8] = "Primtive";
    t[t["Array"] = 18] = "Array";
    t[t["Set"] = 34] = "Set";
    t[t["Map"] = 66] = "Map";
})(X || (X = {}));

function Y(t, e) {
    const {length: s} = t;
    const r = Array(s);
    let i = 0;
    while (i < s) {
        r[i] = t[i];
        ++i;
    }
    if (void 0 !== e) r.deletedItems = e.slice(0); else if (void 0 !== t.deletedItems) r.deletedItems = t.deletedItems.slice(0); else r.deletedItems = [];
    r.isIndexMap = true;
    return r;
}

function tt(t = 0) {
    const e = Array(t);
    let s = 0;
    while (s < t) e[s] = s++;
    e.deletedItems = [];
    e.isIndexMap = true;
    return e;
}

function et(t) {
    const e = t.slice();
    e.deletedItems = t.deletedItems.slice();
    e.isIndexMap = true;
    return e;
}

function st(t) {
    return t instanceof Array && true === t.isIndexMap;
}

function rt(t) {
    return null == t ? it : it(t);
}

function it(t) {
    const e = t.prototype;
    v(e, "subs", {
        get: nt
    });
    b(e, "subscribe", ot);
    b(e, "unsubscribe", ht);
}

class SubscriberRecord {
    constructor() {
        this.sf = 0;
        this.count = 0;
    }
    add(t) {
        if (this.has(t)) return false;
        const e = this.sf;
        if (0 === (1 & e)) {
            this.s0 = t;
            this.sf |= 1;
        } else if (0 === (2 & e)) {
            this.s1 = t;
            this.sf |= 2;
        } else if (0 === (4 & e)) {
            this.s2 = t;
            this.sf |= 4;
        } else if (0 === (8 & e)) {
            this.sr = [ t ];
            this.sf |= 8;
        } else this.sr.push(t);
        ++this.count;
        return true;
    }
    has(t) {
        const e = this.sf;
        if ((1 & e) > 0 && this.s0 === t) return true;
        if ((2 & e) > 0 && this.s1 === t) return true;
        if ((4 & e) > 0 && this.s2 === t) return true;
        if ((8 & e) > 0) {
            const e = this.sr;
            const s = e.length;
            let r = 0;
            for (;r < s; ++r) if (e[r] === t) return true;
        }
        return false;
    }
    any() {
        return 0 !== this.sf;
    }
    remove(t) {
        const e = this.sf;
        if ((1 & e) > 0 && this.s0 === t) {
            this.s0 = void 0;
            this.sf = 1 ^ (1 | this.sf);
            --this.count;
            return true;
        } else if ((2 & e) > 0 && this.s1 === t) {
            this.s1 = void 0;
            this.sf = 2 ^ (2 | this.sf);
            --this.count;
            return true;
        } else if ((4 & e) > 0 && this.s2 === t) {
            this.s2 = void 0;
            this.sf = 4 ^ (4 | this.sf);
            --this.count;
            return true;
        } else if ((8 & e) > 0) {
            const e = this.sr;
            const s = e.length;
            let r = 0;
            for (;r < s; ++r) if (e[r] === t) {
                e.splice(r, 1);
                if (1 === s) this.sf = 8 ^ (8 | this.sf);
                --this.count;
                return true;
            }
        }
        return false;
    }
    notify(t, e, s) {
        const r = this.s0;
        const i = this.s1;
        const n = this.s2;
        let o = this.sr;
        if (void 0 !== o) o = o.slice();
        if (void 0 !== r) r.handleChange(t, e, s);
        if (void 0 !== i) i.handleChange(t, e, s);
        if (void 0 !== n) n.handleChange(t, e, s);
        if (void 0 !== o) {
            const r = o.length;
            let i;
            let n = 0;
            for (;n < r; ++n) {
                i = o[n];
                if (void 0 !== i) i.handleChange(t, e, s);
            }
        }
    }
    notifyCollection(t, e) {
        const s = this.s0;
        const r = this.s1;
        const i = this.s2;
        let n = this.sr;
        if (void 0 !== n) n = n.slice();
        if (void 0 !== s) s.handleCollectionChange(t, e);
        if (void 0 !== r) r.handleCollectionChange(t, e);
        if (void 0 !== i) i.handleCollectionChange(t, e);
        if (void 0 !== n) {
            const s = n.length;
            let r;
            let i = 0;
            for (;i < s; ++i) {
                r = n[i];
                if (void 0 !== r) r.handleCollectionChange(t, e);
            }
        }
    }
}

function nt() {
    return w(this, "subs", new SubscriberRecord);
}

function ot(t) {
    return this.subs.add(t);
}

function ht(t) {
    return this.subs.remove(t);
}

function ct(t) {
    return null == t ? ut : ut(t);
}

function ut(t) {
    const e = t.prototype;
    v(e, "queue", {
        get: at
    });
}

class FlushQueue {
    constructor() {
        this.t = false;
        this.i = new Set;
    }
    get count() {
        return this.i.size;
    }
    add(t) {
        this.i.add(t);
        if (this.t) return;
        this.t = true;
        try {
            this.i.forEach(lt);
        } finally {
            this.t = false;
        }
    }
    clear() {
        this.i.clear();
        this.t = false;
    }
}

FlushQueue.instance = new FlushQueue;

function at() {
    return FlushQueue.instance;
}

function lt(t, e, s) {
    s.delete(t);
    t.flush();
}

class CollectionLengthObserver {
    constructor(t) {
        this.owner = t;
        this.type = 18;
        this.f = 0;
        this.v = this.h = (this.o = t.collection).length;
    }
    getValue() {
        return this.o.length;
    }
    setValue(t, e) {
        const s = this.v;
        if (t !== s && (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__.isArrayIndex)(t)) {
            if (0 === (256 & e)) this.o.length = t;
            this.v = t;
            this.h = s;
            this.f = e;
            this.queue.add(this);
        }
    }
    handleCollectionChange(t, e) {
        const s = this.v;
        const r = this.o.length;
        if ((this.v = r) !== s) {
            this.h = s;
            this.f = e;
            this.queue.add(this);
        }
    }
    flush() {
        pt = this.h;
        this.h = this.v;
        this.subs.notify(this.v, pt, this.f);
    }
}

class CollectionSizeObserver {
    constructor(t) {
        this.owner = t;
        this.f = 0;
        this.v = this.h = (this.o = t.collection).size;
        this.type = this.o instanceof Map ? 66 : 34;
    }
    getValue() {
        return this.o.size;
    }
    setValue() {
        throw new Error("AUR02");
    }
    handleCollectionChange(t, e) {
        const s = this.v;
        const r = this.o.size;
        if ((this.v = r) !== s) {
            this.h = s;
            this.f = e;
            this.queue.add(this);
        }
    }
    flush() {
        pt = this.h;
        this.h = this.v;
        this.subs.notify(this.v, pt, this.f);
    }
}

function ft(t) {
    const e = t.prototype;
    b(e, "subscribe", dt, true);
    b(e, "unsubscribe", vt, true);
    ct(t);
    rt(t);
}

function dt(t) {
    if (this.subs.add(t) && 1 === this.subs.count) this.owner.subscribe(this);
}

function vt(t) {
    if (this.subs.remove(t) && 0 === this.subs.count) this.owner.subscribe(this);
}

ft(CollectionLengthObserver);

ft(CollectionSizeObserver);

let pt;

const gt = new WeakMap;

function wt(t, e) {
    if (t === e) return 0;
    t = null === t ? "null" : t.toString();
    e = null === e ? "null" : e.toString();
    return t < e ? -1 : 1;
}

function bt(t, e) {
    if (void 0 === t) if (void 0 === e) return 0; else return 1;
    if (void 0 === e) return -1;
    return 0;
}

function Et(t, e, s, r, i) {
    let n, o, h, c, u;
    let a, l;
    for (a = s + 1; a < r; a++) {
        n = t[a];
        o = e[a];
        for (l = a - 1; l >= s; l--) {
            h = t[l];
            c = e[l];
            u = i(h, n);
            if (u > 0) {
                t[l + 1] = h;
                e[l + 1] = c;
            } else break;
        }
        t[l + 1] = n;
        e[l + 1] = o;
    }
}

function At(t, e, s, r, i) {
    let n = 0, o = 0;
    let h, c, u;
    let a, l, f;
    let d, v, p;
    let g, w;
    let b, E, A, y;
    let m, U, x, S;
    while (true) {
        if (r - s <= 10) {
            Et(t, e, s, r, i);
            return;
        }
        n = s + (r - s >> 1);
        h = t[s];
        a = e[s];
        c = t[r - 1];
        l = e[r - 1];
        u = t[n];
        f = e[n];
        d = i(h, c);
        if (d > 0) {
            g = h;
            w = a;
            h = c;
            a = l;
            c = g;
            l = w;
        }
        v = i(h, u);
        if (v >= 0) {
            g = h;
            w = a;
            h = u;
            a = f;
            u = c;
            f = l;
            c = g;
            l = w;
        } else {
            p = i(c, u);
            if (p > 0) {
                g = c;
                w = l;
                c = u;
                l = f;
                u = g;
                f = w;
            }
        }
        t[s] = h;
        e[s] = a;
        t[r - 1] = u;
        e[r - 1] = f;
        b = c;
        E = l;
        A = s + 1;
        y = r - 1;
        t[n] = t[A];
        e[n] = e[A];
        t[A] = b;
        e[A] = E;
        t: for (o = A + 1; o < y; o++) {
            m = t[o];
            U = e[o];
            x = i(m, b);
            if (x < 0) {
                t[o] = t[A];
                e[o] = e[A];
                t[A] = m;
                e[A] = U;
                A++;
            } else if (x > 0) {
                do {
                    y--;
                    if (y == o) break t;
                    S = t[y];
                    x = i(S, b);
                } while (x > 0);
                t[o] = t[y];
                e[o] = e[y];
                t[y] = m;
                e[y] = U;
                if (x < 0) {
                    m = t[o];
                    U = e[o];
                    t[o] = t[A];
                    e[o] = e[A];
                    t[A] = m;
                    e[A] = U;
                    A++;
                }
            }
        }
        if (r - y < A - s) {
            At(t, e, y, r, i);
            r = A;
        } else {
            At(t, e, s, A, i);
            s = y;
        }
    }
}

const yt = Array.prototype;

const mt = yt.push;

const Ut = yt.unshift;

const xt = yt.pop;

const St = yt.shift;

const Ot = yt.splice;

const Ct = yt.reverse;

const kt = yt.sort;

const Bt = {
    push: mt,
    unshift: Ut,
    pop: xt,
    shift: St,
    splice: Ot,
    reverse: Ct,
    sort: kt
};

const $t = [ "push", "unshift", "pop", "shift", "splice", "reverse", "sort" ];

const Lt = {
    push: function(...t) {
        const e = gt.get(this);
        if (void 0 === e) return mt.apply(this, t);
        const s = this.length;
        const r = t.length;
        if (0 === r) return s;
        this.length = e.indexMap.length = s + r;
        let i = s;
        while (i < this.length) {
            this[i] = t[i - s];
            e.indexMap[i] = -2;
            i++;
        }
        e.notify();
        return this.length;
    },
    unshift: function(...t) {
        const e = gt.get(this);
        if (void 0 === e) return Ut.apply(this, t);
        const s = t.length;
        const r = new Array(s);
        let i = 0;
        while (i < s) r[i++] = -2;
        Ut.apply(e.indexMap, r);
        const n = Ut.apply(this, t);
        e.notify();
        return n;
    },
    pop: function() {
        const t = gt.get(this);
        if (void 0 === t) return xt.call(this);
        const e = t.indexMap;
        const s = xt.call(this);
        const r = e.length - 1;
        if (e[r] > -1) e.deletedItems.push(e[r]);
        xt.call(e);
        t.notify();
        return s;
    },
    shift: function() {
        const t = gt.get(this);
        if (void 0 === t) return St.call(this);
        const e = t.indexMap;
        const s = St.call(this);
        if (e[0] > -1) e.deletedItems.push(e[0]);
        St.call(e);
        t.notify();
        return s;
    },
    splice: function(...t) {
        const e = t[0];
        const s = t[1];
        const r = gt.get(this);
        if (void 0 === r) return Ot.apply(this, t);
        const i = this.length;
        const n = 0 | e;
        const o = n < 0 ? Math.max(i + n, 0) : Math.min(n, i);
        const h = r.indexMap;
        const c = t.length;
        const u = 0 === c ? 0 : 1 === c ? i - o : s;
        if (u > 0) {
            let t = o;
            const e = t + u;
            while (t < e) {
                if (h[t] > -1) h.deletedItems.push(h[t]);
                t++;
            }
        }
        if (c > 2) {
            const t = c - 2;
            const r = new Array(t);
            let i = 0;
            while (i < t) r[i++] = -2;
            Ot.call(h, e, s, ...r);
        } else Ot.apply(h, t);
        const a = Ot.apply(this, t);
        r.notify();
        return a;
    },
    reverse: function() {
        const t = gt.get(this);
        if (void 0 === t) {
            Ct.call(this);
            return this;
        }
        const e = this.length;
        const s = e / 2 | 0;
        let r = 0;
        while (r !== s) {
            const s = e - r - 1;
            const i = this[r];
            const n = t.indexMap[r];
            const o = this[s];
            const h = t.indexMap[s];
            this[r] = o;
            t.indexMap[r] = h;
            this[s] = i;
            t.indexMap[s] = n;
            r++;
        }
        t.notify();
        return this;
    },
    sort: function(t) {
        const e = gt.get(this);
        if (void 0 === e) {
            kt.call(this, t);
            return this;
        }
        const s = this.length;
        if (s < 2) return this;
        At(this, e.indexMap, 0, s, bt);
        let r = 0;
        while (r < s) {
            if (void 0 === this[r]) break;
            r++;
        }
        if (void 0 === t || !p(t)) t = wt;
        At(this, e.indexMap, 0, r, t);
        e.notify();
        return this;
    }
};

for (const t of $t) v(Lt[t], "observing", {
    value: true,
    writable: false,
    configurable: false,
    enumerable: false
});

let Rt = false;

function Pt() {
    for (const t of $t) if (true !== yt[t].observing) w(yt, t, Lt[t]);
}

function Tt() {
    for (const t of $t) if (true === yt[t].observing) w(yt, t, Bt[t]);
}

class ArrayObserver {
    constructor(t) {
        this.type = 18;
        if (!Rt) {
            Rt = true;
            Pt();
        }
        this.indexObservers = {};
        this.collection = t;
        this.indexMap = tt(t.length);
        this.lenObs = void 0;
        gt.set(t, this);
    }
    notify() {
        const t = this.indexMap;
        const e = this.collection.length;
        this.indexMap = tt(e);
        this.subs.notifyCollection(t, 0);
    }
    getLengthObserver() {
        var t;
        return null !== (t = this.lenObs) && void 0 !== t ? t : this.lenObs = new CollectionLengthObserver(this);
    }
    getIndexObserver(t) {
        var e;
        var s;
        return null !== (e = (s = this.indexObservers)[t]) && void 0 !== e ? e : s[t] = new ArrayIndexObserver(this, t);
    }
}

class ArrayIndexObserver {
    constructor(t, e) {
        this.owner = t;
        this.index = e;
        this.doNotCache = true;
        this.value = this.getValue();
    }
    getValue() {
        return this.owner.collection[this.index];
    }
    setValue(t, e) {
        if (t === this.getValue()) return;
        const s = this.owner;
        const r = this.index;
        const i = s.indexMap;
        if (i[r] > -1) i.deletedItems.push(i[r]);
        i[r] = -2;
        s.collection[r] = t;
        s.notify();
    }
    handleCollectionChange(t, e) {
        const s = this.index;
        const r = t[s] === s;
        if (r) return;
        const i = this.value;
        const n = this.value = this.getValue();
        if (i !== n) this.subs.notify(n, i, e);
    }
    subscribe(t) {
        if (this.subs.add(t) && 1 === this.subs.count) this.owner.subscribe(this);
    }
    unsubscribe(t) {
        if (this.subs.remove(t) && 0 === this.subs.count) this.owner.unsubscribe(this);
    }
}

rt(ArrayObserver);

rt(ArrayIndexObserver);

function jt(t) {
    let e = gt.get(t);
    if (void 0 === e) e = new ArrayObserver(t);
    return e;
}

function It(t) {
    let e = 0;
    let s = 0;
    const r = t.length;
    for (let i = 0; i < r; ++i) {
        while (t.deletedItems[s] <= i - e) {
            ++s;
            --e;
        }
        if (-2 === t[i]) ++e; else t[i] += e;
    }
}

function Mt(t, e) {
    const s = t.slice();
    const r = e.length;
    let i = 0;
    let n = 0;
    while (i < r) {
        n = e[i];
        if (-2 !== n) t[i] = s[n];
        ++i;
    }
}

const Dt = new WeakMap;

const Ft = Set.prototype;

const Vt = Ft.add;

const Nt = Ft.clear;

const Kt = Ft.delete;

const qt = {
    add: Vt,
    clear: Nt,
    delete: Kt
};

const Ht = [ "add", "clear", "delete" ];

const Qt = {
    add: function(t) {
        const e = Dt.get(this);
        if (void 0 === e) {
            Vt.call(this, t);
            return this;
        }
        const s = this.size;
        Vt.call(this, t);
        const r = this.size;
        if (r === s) return this;
        e.indexMap[s] = -2;
        e.notify();
        return this;
    },
    clear: function() {
        const t = Dt.get(this);
        if (void 0 === t) return Nt.call(this);
        const e = this.size;
        if (e > 0) {
            const e = t.indexMap;
            let s = 0;
            for (const t of this.keys()) {
                if (e[s] > -1) e.deletedItems.push(e[s]);
                s++;
            }
            Nt.call(this);
            e.length = 0;
            t.notify();
        }
        return;
    },
    delete: function(t) {
        const e = Dt.get(this);
        if (void 0 === e) return Kt.call(this, t);
        const s = this.size;
        if (0 === s) return false;
        let r = 0;
        const i = e.indexMap;
        for (const s of this.keys()) {
            if (s === t) {
                if (i[r] > -1) i.deletedItems.push(i[r]);
                i.splice(r, 1);
                const s = Kt.call(this, t);
                if (true === s) e.notify();
                return s;
            }
            r++;
        }
        return false;
    }
};

const _t = {
    writable: true,
    enumerable: false,
    configurable: true
};

for (const t of Ht) v(Qt[t], "observing", {
    value: true,
    writable: false,
    configurable: false,
    enumerable: false
});

let zt = false;

function Wt() {
    for (const t of Ht) if (true !== Ft[t].observing) v(Ft, t, {
        ..._t,
        value: Qt[t]
    });
}

function Gt() {
    for (const t of Ht) if (true === Ft[t].observing) v(Ft, t, {
        ..._t,
        value: qt[t]
    });
}

class SetObserver {
    constructor(t) {
        this.type = 34;
        if (!zt) {
            zt = true;
            Wt();
        }
        this.collection = t;
        this.indexMap = tt(t.size);
        this.lenObs = void 0;
        Dt.set(t, this);
    }
    notify() {
        const t = this.indexMap;
        const e = this.collection.size;
        this.indexMap = tt(e);
        this.subs.notifyCollection(t, 0);
    }
    getLengthObserver() {
        var t;
        return null !== (t = this.lenObs) && void 0 !== t ? t : this.lenObs = new CollectionSizeObserver(this);
    }
}

rt(SetObserver);

function Zt(t) {
    let e = Dt.get(t);
    if (void 0 === e) e = new SetObserver(t);
    return e;
}

const Jt = new WeakMap;

const Xt = Map.prototype;

const Yt = Xt.set;

const te = Xt.clear;

const ee = Xt.delete;

const se = {
    set: Yt,
    clear: te,
    delete: ee
};

const re = [ "set", "clear", "delete" ];

const ie = {
    set: function(t, e) {
        const s = Jt.get(this);
        if (void 0 === s) {
            Yt.call(this, t, e);
            return this;
        }
        const r = this.get(t);
        const i = this.size;
        Yt.call(this, t, e);
        const n = this.size;
        if (n === i) {
            let e = 0;
            for (const i of this.entries()) {
                if (i[0] === t) {
                    if (i[1] !== r) {
                        s.indexMap.deletedItems.push(s.indexMap[e]);
                        s.indexMap[e] = -2;
                        s.notify();
                    }
                    return this;
                }
                e++;
            }
            return this;
        }
        s.indexMap[i] = -2;
        s.notify();
        return this;
    },
    clear: function() {
        const t = Jt.get(this);
        if (void 0 === t) return te.call(this);
        const e = this.size;
        if (e > 0) {
            const e = t.indexMap;
            let s = 0;
            for (const t of this.keys()) {
                if (e[s] > -1) e.deletedItems.push(e[s]);
                s++;
            }
            te.call(this);
            e.length = 0;
            t.notify();
        }
        return;
    },
    delete: function(t) {
        const e = Jt.get(this);
        if (void 0 === e) return ee.call(this, t);
        const s = this.size;
        if (0 === s) return false;
        let r = 0;
        const i = e.indexMap;
        for (const s of this.keys()) {
            if (s === t) {
                if (i[r] > -1) i.deletedItems.push(i[r]);
                i.splice(r, 1);
                const s = ee.call(this, t);
                if (true === s) e.notify();
                return s;
            }
            ++r;
        }
        return false;
    }
};

const ne = {
    writable: true,
    enumerable: false,
    configurable: true
};

for (const t of re) v(ie[t], "observing", {
    value: true,
    writable: false,
    configurable: false,
    enumerable: false
});

let oe = false;

function he() {
    for (const t of re) if (true !== Xt[t].observing) v(Xt, t, {
        ...ne,
        value: ie[t]
    });
}

function ce() {
    for (const t of re) if (true === Xt[t].observing) v(Xt, t, {
        ...ne,
        value: se[t]
    });
}

class MapObserver {
    constructor(t) {
        this.type = 66;
        if (!oe) {
            oe = true;
            he();
        }
        this.collection = t;
        this.indexMap = tt(t.size);
        this.lenObs = void 0;
        Jt.set(t, this);
    }
    notify() {
        const t = this.indexMap;
        const e = this.collection.size;
        this.indexMap = tt(e);
        this.subs.notifyCollection(t, 0);
    }
    getLengthObserver() {
        var t;
        return null !== (t = this.lenObs) && void 0 !== t ? t : this.lenObs = new CollectionSizeObserver(this);
    }
}

rt(MapObserver);

function ue(t) {
    let e = Jt.get(t);
    if (void 0 === e) e = new MapObserver(t);
    return e;
}

function ae(t, e) {
    const s = this.oL.getObserver(t, e);
    this.obs.add(s);
}

function le() {
    return w(this, "obs", new BindingObserverRecord(this));
}

function fe(t) {
    let e;
    if (t instanceof Array) e = jt(t); else if (t instanceof Set) e = Zt(t); else if (t instanceof Map) e = ue(t); else throw new Error("AUR0210");
    this.obs.add(e);
}

function de(t) {
    this.obs.add(t);
}

function ve() {
    throw new Error(`AUR2011:handleChange`);
}

function pe() {
    throw new Error("AUR2012:handleCollectionChange");
}

class BindingObserverRecord {
    constructor(t) {
        this.version = 0;
        this.count = 0;
        this.o = new Map;
        this.b = t;
    }
    handleChange(t, e, s) {
        return this.b.interceptor.handleChange(t, e, s);
    }
    handleCollectionChange(t, e) {
        this.b.interceptor.handleCollectionChange(t, e);
    }
    add(t) {
        if (!this.o.has(t)) {
            t.subscribe(this);
            ++this.count;
        }
        this.o.set(t, this.version);
    }
    clear() {
        this.o.forEach(we, this);
        this.count = this.o.size;
    }
    clearAll() {
        this.o.forEach(ge, this);
        this.o.clear();
        this.count = 0;
    }
}

function ge(t, e) {
    e.unsubscribe(this);
}

function we(t, e) {
    if (this.version !== t) {
        e.unsubscribe(this);
        this.o.delete(e);
    }
}

function be(t) {
    const e = t.prototype;
    b(e, "observe", ae, true);
    b(e, "observeCollection", fe, true);
    b(e, "subscribeTo", de, true);
    v(e, "obs", {
        get: le
    });
    b(e, "handleChange", ve);
    b(e, "handleCollectionChange", pe);
    return t;
}

function Ee(t) {
    return null == t ? be : be(t);
}

class BindingMediator {
    constructor(t, e, s, r) {
        this.key = t;
        this.binding = e;
        this.oL = s;
        this.locator = r;
        this.interceptor = this;
    }
    $bind() {
        throw new Error("AUR0213:$bind");
    }
    $unbind() {
        throw new Error("AUR0214:$unbind");
    }
    handleChange(t, e, s) {
        this.binding[this.key](t, e, s);
    }
}

be(BindingMediator);

const Ae = _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__.DI.createInterface("IExpressionParser", (t => t.singleton(ExpressionParser)));

class ExpressionParser {
    constructor() {
        this.u = E();
        this.A = E();
        this.U = E();
    }
    parse(t, e) {
        let s;
        switch (e) {
          case 16:
            return new CustomExpression(t);

          case 1:
            s = this.U[t];
            if (void 0 === s) s = this.U[t] = this.$parse(t, e);
            return s;

          case 2:
            s = this.A[t];
            if (void 0 === s) s = this.A[t] = this.$parse(t, e);
            return s;

          default:
            if (0 === t.length) {
                if ((e & (4 | 8)) > 0) return PrimitiveLiteralExpression.$empty;
                throw new Error("AUR0169");
            }
            s = this.u[t];
            if (void 0 === s) s = this.u[t] = this.$parse(t, e);
            return s;
        }
    }
    $parse(t, e) {
        Pe.ip = t;
        Pe.length = t.length;
        Pe.index = 0;
        Pe.O = t.charCodeAt(0);
        return je(Pe, 0, 61, void 0 === e ? 8 : e);
    }
}

var ye;

(function(t) {
    t[t["Null"] = 0] = "Null";
    t[t["Backspace"] = 8] = "Backspace";
    t[t["Tab"] = 9] = "Tab";
    t[t["LineFeed"] = 10] = "LineFeed";
    t[t["VerticalTab"] = 11] = "VerticalTab";
    t[t["FormFeed"] = 12] = "FormFeed";
    t[t["CarriageReturn"] = 13] = "CarriageReturn";
    t[t["Space"] = 32] = "Space";
    t[t["Exclamation"] = 33] = "Exclamation";
    t[t["DoubleQuote"] = 34] = "DoubleQuote";
    t[t["Dollar"] = 36] = "Dollar";
    t[t["Percent"] = 37] = "Percent";
    t[t["Ampersand"] = 38] = "Ampersand";
    t[t["SingleQuote"] = 39] = "SingleQuote";
    t[t["OpenParen"] = 40] = "OpenParen";
    t[t["CloseParen"] = 41] = "CloseParen";
    t[t["Asterisk"] = 42] = "Asterisk";
    t[t["Plus"] = 43] = "Plus";
    t[t["Comma"] = 44] = "Comma";
    t[t["Minus"] = 45] = "Minus";
    t[t["Dot"] = 46] = "Dot";
    t[t["Slash"] = 47] = "Slash";
    t[t["Semicolon"] = 59] = "Semicolon";
    t[t["Backtick"] = 96] = "Backtick";
    t[t["OpenBracket"] = 91] = "OpenBracket";
    t[t["Backslash"] = 92] = "Backslash";
    t[t["CloseBracket"] = 93] = "CloseBracket";
    t[t["Caret"] = 94] = "Caret";
    t[t["Underscore"] = 95] = "Underscore";
    t[t["OpenBrace"] = 123] = "OpenBrace";
    t[t["Bar"] = 124] = "Bar";
    t[t["CloseBrace"] = 125] = "CloseBrace";
    t[t["Colon"] = 58] = "Colon";
    t[t["LessThan"] = 60] = "LessThan";
    t[t["Equals"] = 61] = "Equals";
    t[t["GreaterThan"] = 62] = "GreaterThan";
    t[t["Question"] = 63] = "Question";
    t[t["Zero"] = 48] = "Zero";
    t[t["One"] = 49] = "One";
    t[t["Two"] = 50] = "Two";
    t[t["Three"] = 51] = "Three";
    t[t["Four"] = 52] = "Four";
    t[t["Five"] = 53] = "Five";
    t[t["Six"] = 54] = "Six";
    t[t["Seven"] = 55] = "Seven";
    t[t["Eight"] = 56] = "Eight";
    t[t["Nine"] = 57] = "Nine";
    t[t["UpperA"] = 65] = "UpperA";
    t[t["UpperB"] = 66] = "UpperB";
    t[t["UpperC"] = 67] = "UpperC";
    t[t["UpperD"] = 68] = "UpperD";
    t[t["UpperE"] = 69] = "UpperE";
    t[t["UpperF"] = 70] = "UpperF";
    t[t["UpperG"] = 71] = "UpperG";
    t[t["UpperH"] = 72] = "UpperH";
    t[t["UpperI"] = 73] = "UpperI";
    t[t["UpperJ"] = 74] = "UpperJ";
    t[t["UpperK"] = 75] = "UpperK";
    t[t["UpperL"] = 76] = "UpperL";
    t[t["UpperM"] = 77] = "UpperM";
    t[t["UpperN"] = 78] = "UpperN";
    t[t["UpperO"] = 79] = "UpperO";
    t[t["UpperP"] = 80] = "UpperP";
    t[t["UpperQ"] = 81] = "UpperQ";
    t[t["UpperR"] = 82] = "UpperR";
    t[t["UpperS"] = 83] = "UpperS";
    t[t["UpperT"] = 84] = "UpperT";
    t[t["UpperU"] = 85] = "UpperU";
    t[t["UpperV"] = 86] = "UpperV";
    t[t["UpperW"] = 87] = "UpperW";
    t[t["UpperX"] = 88] = "UpperX";
    t[t["UpperY"] = 89] = "UpperY";
    t[t["UpperZ"] = 90] = "UpperZ";
    t[t["LowerA"] = 97] = "LowerA";
    t[t["LowerB"] = 98] = "LowerB";
    t[t["LowerC"] = 99] = "LowerC";
    t[t["LowerD"] = 100] = "LowerD";
    t[t["LowerE"] = 101] = "LowerE";
    t[t["LowerF"] = 102] = "LowerF";
    t[t["LowerG"] = 103] = "LowerG";
    t[t["LowerH"] = 104] = "LowerH";
    t[t["LowerI"] = 105] = "LowerI";
    t[t["LowerJ"] = 106] = "LowerJ";
    t[t["LowerK"] = 107] = "LowerK";
    t[t["LowerL"] = 108] = "LowerL";
    t[t["LowerM"] = 109] = "LowerM";
    t[t["LowerN"] = 110] = "LowerN";
    t[t["LowerO"] = 111] = "LowerO";
    t[t["LowerP"] = 112] = "LowerP";
    t[t["LowerQ"] = 113] = "LowerQ";
    t[t["LowerR"] = 114] = "LowerR";
    t[t["LowerS"] = 115] = "LowerS";
    t[t["LowerT"] = 116] = "LowerT";
    t[t["LowerU"] = 117] = "LowerU";
    t[t["LowerV"] = 118] = "LowerV";
    t[t["LowerW"] = 119] = "LowerW";
    t[t["LowerX"] = 120] = "LowerX";
    t[t["LowerY"] = 121] = "LowerY";
    t[t["LowerZ"] = 122] = "LowerZ";
})(ye || (ye = {}));

function me(t) {
    switch (t) {
      case 98:
        return 8;

      case 116:
        return 9;

      case 110:
        return 10;

      case 118:
        return 11;

      case 102:
        return 12;

      case 114:
        return 13;

      case 34:
        return 34;

      case 39:
        return 39;

      case 92:
        return 92;

      default:
        return t;
    }
}

var Ue;

(function(t) {
    t[t["Reset"] = 0] = "Reset";
    t[t["Ancestor"] = 511] = "Ancestor";
    t[t["This"] = 512] = "This";
    t[t["Scope"] = 1024] = "Scope";
    t[t["Member"] = 2048] = "Member";
    t[t["Keyed"] = 4096] = "Keyed";
})(Ue || (Ue = {}));

var xe;

(function(t) {
    t[t["Variadic"] = 61] = "Variadic";
    t[t["Assign"] = 62] = "Assign";
    t[t["Conditional"] = 63] = "Conditional";
    t[t["LogicalOR"] = 64] = "LogicalOR";
    t[t["LogicalAND"] = 128] = "LogicalAND";
    t[t["Equality"] = 192] = "Equality";
    t[t["Relational"] = 256] = "Relational";
    t[t["Additive"] = 320] = "Additive";
    t[t["Multiplicative"] = 384] = "Multiplicative";
    t[t["Binary"] = 448] = "Binary";
    t[t["LeftHandSide"] = 449] = "LeftHandSide";
    t[t["Primary"] = 450] = "Primary";
    t[t["Unary"] = 451] = "Unary";
})(xe || (xe = {}));

var Se;

(function(t) {
    t[t["EOF"] = 1572864] = "EOF";
    t[t["ExpressionTerminal"] = 1048576] = "ExpressionTerminal";
    t[t["AccessScopeTerminal"] = 524288] = "AccessScopeTerminal";
    t[t["ClosingToken"] = 262144] = "ClosingToken";
    t[t["OpeningToken"] = 131072] = "OpeningToken";
    t[t["BinaryOp"] = 65536] = "BinaryOp";
    t[t["UnaryOp"] = 32768] = "UnaryOp";
    t[t["LeftHandSide"] = 16384] = "LeftHandSide";
    t[t["StringOrNumericLiteral"] = 12288] = "StringOrNumericLiteral";
    t[t["NumericLiteral"] = 8192] = "NumericLiteral";
    t[t["StringLiteral"] = 4096] = "StringLiteral";
    t[t["IdentifierName"] = 3072] = "IdentifierName";
    t[t["Keyword"] = 2048] = "Keyword";
    t[t["Identifier"] = 1024] = "Identifier";
    t[t["Contextual"] = 512] = "Contextual";
    t[t["Precedence"] = 448] = "Precedence";
    t[t["Type"] = 63] = "Type";
    t[t["FalseKeyword"] = 2048] = "FalseKeyword";
    t[t["TrueKeyword"] = 2049] = "TrueKeyword";
    t[t["NullKeyword"] = 2050] = "NullKeyword";
    t[t["UndefinedKeyword"] = 2051] = "UndefinedKeyword";
    t[t["ThisScope"] = 3076] = "ThisScope";
    t[t["ParentScope"] = 3078] = "ParentScope";
    t[t["OpenParen"] = 671751] = "OpenParen";
    t[t["OpenBrace"] = 131080] = "OpenBrace";
    t[t["Dot"] = 16393] = "Dot";
    t[t["CloseBrace"] = 1835018] = "CloseBrace";
    t[t["CloseParen"] = 1835019] = "CloseParen";
    t[t["Comma"] = 1572876] = "Comma";
    t[t["OpenBracket"] = 671757] = "OpenBracket";
    t[t["CloseBracket"] = 1835022] = "CloseBracket";
    t[t["Colon"] = 1572879] = "Colon";
    t[t["Question"] = 1572880] = "Question";
    t[t["Ampersand"] = 1572883] = "Ampersand";
    t[t["Bar"] = 1572884] = "Bar";
    t[t["BarBar"] = 1638549] = "BarBar";
    t[t["AmpersandAmpersand"] = 1638614] = "AmpersandAmpersand";
    t[t["EqualsEquals"] = 1638679] = "EqualsEquals";
    t[t["ExclamationEquals"] = 1638680] = "ExclamationEquals";
    t[t["EqualsEqualsEquals"] = 1638681] = "EqualsEqualsEquals";
    t[t["ExclamationEqualsEquals"] = 1638682] = "ExclamationEqualsEquals";
    t[t["LessThan"] = 1638747] = "LessThan";
    t[t["GreaterThan"] = 1638748] = "GreaterThan";
    t[t["LessThanEquals"] = 1638749] = "LessThanEquals";
    t[t["GreaterThanEquals"] = 1638750] = "GreaterThanEquals";
    t[t["InKeyword"] = 1640799] = "InKeyword";
    t[t["InstanceOfKeyword"] = 1640800] = "InstanceOfKeyword";
    t[t["Plus"] = 623009] = "Plus";
    t[t["Minus"] = 623010] = "Minus";
    t[t["TypeofKeyword"] = 34851] = "TypeofKeyword";
    t[t["VoidKeyword"] = 34852] = "VoidKeyword";
    t[t["Asterisk"] = 1638885] = "Asterisk";
    t[t["Percent"] = 1638886] = "Percent";
    t[t["Slash"] = 1638887] = "Slash";
    t[t["Equals"] = 1048616] = "Equals";
    t[t["Exclamation"] = 32809] = "Exclamation";
    t[t["TemplateTail"] = 540714] = "TemplateTail";
    t[t["TemplateContinuation"] = 540715] = "TemplateContinuation";
    t[t["OfKeyword"] = 1051180] = "OfKeyword";
})(Se || (Se = {}));

const Oe = PrimitiveLiteralExpression.$false;

const Ce = PrimitiveLiteralExpression.$true;

const ke = PrimitiveLiteralExpression.$null;

const Be = PrimitiveLiteralExpression.$undefined;

const $e = AccessThisExpression.$this;

const Le = AccessThisExpression.$parent;

var Re;

(function(t) {
    t[t["None"] = 0] = "None";
    t[t["Interpolation"] = 1] = "Interpolation";
    t[t["IsIterator"] = 2] = "IsIterator";
    t[t["IsFunction"] = 4] = "IsFunction";
    t[t["IsProperty"] = 8] = "IsProperty";
    t[t["IsCustom"] = 16] = "IsCustom";
})(Re || (Re = {}));

class ParserState {
    constructor(t) {
        this.ip = t;
        this.index = 0;
        this.C = 0;
        this.B = 0;
        this.$ = 1572864;
        this.L = "";
        this.R = true;
        this.length = t.length;
        this.O = t.charCodeAt(0);
    }
    get P() {
        return this.ip.slice(this.C, this.index);
    }
}

const Pe = new ParserState("");

function Te(t, e) {
    Pe.ip = t;
    Pe.length = t.length;
    Pe.index = 0;
    Pe.O = t.charCodeAt(0);
    return je(Pe, 0, 61, void 0 === e ? 8 : e);
}

function je(t, e, s, r) {
    if (16 === r) return new CustomExpression(t.ip);
    if (0 === t.index) {
        if (1 & r) return Ve(t);
        Ke(t);
        if (1048576 & t.$) throw new Error(`AUR0151:${t.ip}`);
    }
    t.R = 448 > s;
    let i;
    if (32768 & t.$) {
        const s = Je[63 & t.$];
        Ke(t);
        i = new UnaryExpression(s, je(t, e, 449, r));
        t.R = false;
    } else {
        t: switch (t.$) {
          case 3078:
            t.R = false;
            do {
                Ke(t);
                e++;
                if (Ge(t, 16393)) {
                    if (16393 === t.$) throw new Error(`AUR0152:${t.ip}`); else if (1572864 === t.$) throw new Error(`AUR0153:${t.ip}`);
                } else if (524288 & t.$) {
                    const t = 511 & e;
                    i = 0 === t ? $e : 1 === t ? Le : new AccessThisExpression(t);
                    e = 512;
                    break t;
                } else throw new Error(`AUR0154:${t.ip}`);
            } while (3078 === t.$);

          case 1024:
            if (2 & r) i = new BindingIdentifier(t.L); else {
                i = new AccessScopeExpression(t.L, 511 & e);
                e = 1024;
            }
            t.R = true;
            Ke(t);
            break;

          case 3076:
            t.R = false;
            Ke(t);
            i = $e;
            e = 512;
            break;

          case 671751:
            Ke(t);
            i = je(t, 0, 62, r);
            Ze(t, 1835019);
            e = 0;
            break;

          case 671757:
            i = t.ip.search(/\s+of\s+/) > t.index ? Ie(t) : Me(t, e, r);
            e = 0;
            break;

          case 131080:
            i = Fe(t, r);
            e = 0;
            break;

          case 540714:
            i = new TemplateExpression([ t.L ]);
            t.R = false;
            Ke(t);
            e = 0;
            break;

          case 540715:
            i = Ne(t, e, r, i, false);
            e = 0;
            break;

          case 4096:
          case 8192:
            i = new PrimitiveLiteralExpression(t.L);
            t.R = false;
            Ke(t);
            e = 0;
            break;

          case 2050:
          case 2051:
          case 2049:
          case 2048:
            i = Je[63 & t.$];
            t.R = false;
            Ke(t);
            e = 0;
            break;

          default:
            if (t.index >= t.length) throw new Error(`AUR0155:${t.ip}`); else throw new Error(`AUR0156:${t.ip}`);
        }
        if (2 & r) return De(t, i);
        if (449 < s) return i;
        let n = t.L;
        while ((16384 & t.$) > 0) {
            const s = [];
            let o;
            switch (t.$) {
              case 16393:
                t.R = true;
                Ke(t);
                if (0 === (3072 & t.$)) throw new Error(`AUR0153:${t.ip}`);
                n = t.L;
                Ke(t);
                e = (e & (512 | 1024)) << 1 | 2048 & e | (4096 & e) >> 1;
                if (671751 === t.$) {
                    if (0 === e) e = 2048;
                    continue;
                }
                if (1024 & e) i = new AccessScopeExpression(n, i.ancestor); else i = new AccessMemberExpression(i, n);
                continue;

              case 671757:
                t.R = true;
                Ke(t);
                e = 4096;
                i = new AccessKeyedExpression(i, je(t, 0, 62, r));
                Ze(t, 1835022);
                break;

              case 671751:
                t.R = false;
                Ke(t);
                while (1835019 !== t.$) {
                    s.push(je(t, 0, 62, r));
                    if (!Ge(t, 1572876)) break;
                }
                Ze(t, 1835019);
                if (1024 & e) i = new CallScopeExpression(n, s, i.ancestor); else if (2048 & e) i = new CallMemberExpression(i, n, s); else i = new CallFunctionExpression(i, s);
                e = 0;
                break;

              case 540714:
                t.R = false;
                o = [ t.L ];
                i = new TaggedTemplateExpression(o, o, i);
                Ke(t);
                break;

              case 540715:
                i = Ne(t, e, r, i, true);
            }
        }
    }
    if (448 < s) return i;
    while ((65536 & t.$) > 0) {
        const n = t.$;
        if ((448 & n) <= s) break;
        Ke(t);
        i = new BinaryExpression(Je[63 & n], i, je(t, e, 448 & n, r));
        t.R = false;
    }
    if (63 < s) return i;
    if (Ge(t, 1572880)) {
        const s = je(t, e, 62, r);
        Ze(t, 1572879);
        i = new ConditionalExpression(i, s, je(t, e, 62, r));
        t.R = false;
    }
    if (62 < s) return i;
    if (Ge(t, 1048616)) {
        if (!t.R) throw new Error(`AUR0158:${t.ip}`);
        i = new AssignExpression(i, je(t, e, 62, r));
    }
    if (61 < s) return i;
    while (Ge(t, 1572884)) {
        if (1572864 === t.$) throw new Error(`AUR0159:${t.ip}`);
        const s = t.L;
        Ke(t);
        const n = new Array;
        while (Ge(t, 1572879)) n.push(je(t, e, 62, r));
        i = new ValueConverterExpression(i, s, n);
    }
    while (Ge(t, 1572883)) {
        if (1572864 === t.$) throw new Error(`AUR0160:${t.ip}`);
        const s = t.L;
        Ke(t);
        const n = new Array;
        while (Ge(t, 1572879)) n.push(je(t, e, 62, r));
        i = new BindingBehaviorExpression(i, s, n);
    }
    if (1572864 !== t.$) {
        if (1 & r) return i;
        if ("of" === t.P) throw new Error(`AUR0161:${t.ip}`);
        throw new Error(`AUR0162:${t.ip}`);
    }
    return i;
}

function Ie(t) {
    const e = [];
    const s = new DestructuringAssignmentExpression(90137, e, void 0, void 0);
    let r = "";
    let i = true;
    let n = 0;
    while (i) {
        Ke(t);
        switch (t.$) {
          case 1835022:
            i = false;
            o();
            break;

          case 1572876:
            o();
            break;

          case 1024:
            r = t.P;
            break;

          default:
            throw new Error(`AUR0170:${t.ip}`);
        }
    }
    Ze(t, 1835022);
    return s;
    function o() {
        if ("" !== r) {
            e.push(new DestructuringAssignmentSingleExpression(new AccessMemberExpression($e, r), new AccessKeyedExpression($e, new PrimitiveLiteralExpression(n++)), void 0));
            r = "";
        } else n++;
    }
}

function Me(t, e, s) {
    Ke(t);
    const r = new Array;
    while (1835022 !== t.$) if (Ge(t, 1572876)) {
        r.push(Be);
        if (1835022 === t.$) break;
    } else {
        r.push(je(t, e, 62, ~2 & s));
        if (Ge(t, 1572876)) {
            if (1835022 === t.$) break;
        } else break;
    }
    Ze(t, 1835022);
    if (2 & s) return new ArrayBindingPattern(r); else {
        t.R = false;
        return new ArrayLiteralExpression(r);
    }
}

function De(t, e) {
    if (0 === (65536 & e.$kind)) throw new Error(`AUR0163:${t.ip}`);
    if (1051180 !== t.$) throw new Error(`AUR0163:${t.ip}`);
    Ke(t);
    const s = e;
    const r = je(t, 0, 61, 0);
    return new ForOfStatement(s, r);
}

function Fe(t, e) {
    const s = new Array;
    const r = new Array;
    Ke(t);
    while (1835018 !== t.$) {
        s.push(t.L);
        if (12288 & t.$) {
            Ke(t);
            Ze(t, 1572879);
            r.push(je(t, 0, 62, ~2 & e));
        } else if (3072 & t.$) {
            const {O: s, $: i, index: n} = t;
            Ke(t);
            if (Ge(t, 1572879)) r.push(je(t, 0, 62, ~2 & e)); else {
                t.O = s;
                t.$ = i;
                t.index = n;
                r.push(je(t, 0, 450, ~2 & e));
            }
        } else throw new Error(`AUR0164:${t.ip}`);
        if (1835018 !== t.$) Ze(t, 1572876);
    }
    Ze(t, 1835018);
    if (2 & e) return new ObjectBindingPattern(s, r); else {
        t.R = false;
        return new ObjectLiteralExpression(s, r);
    }
}

function Ve(t) {
    const e = [];
    const s = [];
    const r = t.length;
    let i = "";
    while (t.index < r) {
        switch (t.O) {
          case 36:
            if (123 === t.ip.charCodeAt(t.index + 1)) {
                e.push(i);
                i = "";
                t.index += 2;
                t.O = t.ip.charCodeAt(t.index);
                Ke(t);
                const r = je(t, 0, 61, 1);
                s.push(r);
                continue;
            } else i += "$";
            break;

          case 92:
            i += String.fromCharCode(me(qe(t)));
            break;

          default:
            i += String.fromCharCode(t.O);
        }
        qe(t);
    }
    if (s.length) {
        e.push(i);
        return new Interpolation(e, s);
    }
    return null;
}

function Ne(t, e, s, r, i) {
    const n = [ t.L ];
    Ze(t, 540715);
    const o = [ je(t, e, 62, s) ];
    while (540714 !== (t.$ = We(t))) {
        n.push(t.L);
        Ze(t, 540715);
        o.push(je(t, e, 62, s));
    }
    n.push(t.L);
    t.R = false;
    if (i) {
        Ke(t);
        return new TaggedTemplateExpression(n, n, r, o);
    } else {
        Ke(t);
        return new TemplateExpression(n, o);
    }
}

function Ke(t) {
    while (t.index < t.length) {
        t.C = t.index;
        if (null != (t.$ = ns[t.O](t))) return;
    }
    t.$ = 1572864;
}

function qe(t) {
    return t.O = t.ip.charCodeAt(++t.index);
}

function He(t) {
    while (is[qe(t)]) ;
    const e = Xe[t.L = t.P];
    return void 0 === e ? 1024 : e;
}

function Qe(t, e) {
    let s = t.O;
    if (false === e) {
        do {
            s = qe(t);
        } while (s <= 57 && s >= 48);
        if (46 !== s) {
            t.L = parseInt(t.P, 10);
            return 8192;
        }
        s = qe(t);
        if (t.index >= t.length) {
            t.L = parseInt(t.P.slice(0, -1), 10);
            return 8192;
        }
    }
    if (s <= 57 && s >= 48) do {
        s = qe(t);
    } while (s <= 57 && s >= 48); else t.O = t.ip.charCodeAt(--t.index);
    t.L = parseFloat(t.P);
    return 8192;
}

function _e(t) {
    const e = t.O;
    qe(t);
    let s = 0;
    const r = new Array;
    let i = t.index;
    while (t.O !== e) if (92 === t.O) {
        r.push(t.ip.slice(i, t.index));
        qe(t);
        s = me(t.O);
        qe(t);
        r.push(String.fromCharCode(s));
        i = t.index;
    } else if (t.index >= t.length) throw new Error(`AUR0165:${t.ip}`); else qe(t);
    const n = t.ip.slice(i, t.index);
    qe(t);
    r.push(n);
    const o = r.join("");
    t.L = o;
    return 4096;
}

function ze(t) {
    let e = true;
    let s = "";
    while (96 !== qe(t)) if (36 === t.O) if (t.index + 1 < t.length && 123 === t.ip.charCodeAt(t.index + 1)) {
        t.index++;
        e = false;
        break;
    } else s += "$"; else if (92 === t.O) s += String.fromCharCode(me(qe(t))); else {
        if (t.index >= t.length) throw new Error(`AUR0166:${t.ip}`);
        s += String.fromCharCode(t.O);
    }
    qe(t);
    t.L = s;
    if (e) return 540714;
    return 540715;
}

function We(t) {
    if (t.index >= t.length) throw new Error(`AUR0166:${t.ip}`);
    t.index--;
    return ze(t);
}

function Ge(t, e) {
    if (t.$ === e) {
        Ke(t);
        return true;
    }
    return false;
}

function Ze(t, e) {
    if (t.$ === e) Ke(t); else throw new Error(`AUR0167:${t.ip}<${e}`);
}

const Je = [ Oe, Ce, ke, Be, "$this", null, "$parent", "(", "{", ".", "}", ")", ",", "[", "]", ":", "?", "'", '"', "&", "|", "||", "&&", "==", "!=", "===", "!==", "<", ">", "<=", ">=", "in", "instanceof", "+", "-", "typeof", "void", "*", "%", "/", "=", "!", 540714, 540715, "of" ];

const Xe = E();

Xe.true = 2049;

Xe.null = 2050;

Xe.false = 2048;

Xe.undefined = 2051;

Xe.$this = 3076;

Xe.$parent = 3078;

Xe.in = 1640799;

Xe.instanceof = 1640800;

Xe.typeof = 34851;

Xe.void = 34852;

Xe.of = 1051180;

const Ye = {
    AsciiIdPart: [ 36, 0, 48, 58, 65, 91, 95, 0, 97, 123 ],
    IdStart: [ 36, 0, 65, 91, 95, 0, 97, 123, 170, 0, 186, 0, 192, 215, 216, 247, 248, 697, 736, 741, 7424, 7462, 7468, 7517, 7522, 7526, 7531, 7544, 7545, 7615, 7680, 7936, 8305, 0, 8319, 0, 8336, 8349, 8490, 8492, 8498, 0, 8526, 0, 8544, 8585, 11360, 11392, 42786, 42888, 42891, 42927, 42928, 42936, 42999, 43008, 43824, 43867, 43868, 43877, 64256, 64263, 65313, 65339, 65345, 65371 ],
    Digit: [ 48, 58 ],
    Skip: [ 0, 33, 127, 161 ]
};

function ts(t, e, s, r) {
    const i = s.length;
    for (let n = 0; n < i; n += 2) {
        const i = s[n];
        let o = s[n + 1];
        o = o > 0 ? o : i + 1;
        if (t) t.fill(r, i, o);
        if (e) for (let t = i; t < o; t++) e.add(t);
    }
}

function es(t) {
    return e => {
        qe(e);
        return t;
    };
}

const ss = t => {
    throw new Error(`AUR0168:${t.ip}`);
};

ss.notMapped = true;

const rs = new Set;

ts(null, rs, Ye.AsciiIdPart, true);

const is = new Uint8Array(65535);

ts(is, null, Ye.IdStart, 1);

ts(is, null, Ye.Digit, 1);

const ns = new Array(65535);

ns.fill(ss, 0, 65535);

ts(ns, null, Ye.Skip, (t => {
    qe(t);
    return null;
}));

ts(ns, null, Ye.IdStart, He);

ts(ns, null, Ye.Digit, (t => Qe(t, false)));

ns[34] = ns[39] = t => _e(t);

ns[96] = t => ze(t);

ns[33] = t => {
    if (61 !== qe(t)) return 32809;
    if (61 !== qe(t)) return 1638680;
    qe(t);
    return 1638682;
};

ns[61] = t => {
    if (61 !== qe(t)) return 1048616;
    if (61 !== qe(t)) return 1638679;
    qe(t);
    return 1638681;
};

ns[38] = t => {
    if (38 !== qe(t)) return 1572883;
    qe(t);
    return 1638614;
};

ns[124] = t => {
    if (124 !== qe(t)) return 1572884;
    qe(t);
    return 1638549;
};

ns[46] = t => {
    if (qe(t) <= 57 && t.O >= 48) return Qe(t, true);
    return 16393;
};

ns[60] = t => {
    if (61 !== qe(t)) return 1638747;
    qe(t);
    return 1638749;
};

ns[62] = t => {
    if (61 !== qe(t)) return 1638748;
    qe(t);
    return 1638750;
};

ns[37] = es(1638886);

ns[40] = es(671751);

ns[41] = es(1835019);

ns[42] = es(1638885);

ns[43] = es(623009);

ns[44] = es(1572876);

ns[45] = es(623010);

ns[47] = es(1638887);

ns[58] = es(1572879);

ns[63] = es(1572880);

ns[91] = es(671757);

ns[93] = es(1835022);

ns[123] = es(131080);

ns[125] = es(1835018);

let os = null;

const hs = [];

let cs = false;

function us() {
    cs = false;
}

function as() {
    cs = true;
}

function ls() {
    return os;
}

function fs(t) {
    if (null == t) throw new Error("AUR0206");
    if (null == os) {
        os = t;
        hs[0] = os;
        cs = true;
        return;
    }
    if (os === t) throw new Error("AUR0207");
    hs.push(os);
    os = t;
    cs = true;
}

function ds(t) {
    if (null == t) throw new Error("AUR0208");
    if (os !== t) throw new Error("AUR0209");
    hs.pop();
    os = hs.length > 0 ? hs[hs.length - 1] : null;
    cs = null != os;
}

const vs = Object.freeze({
    get current() {
        return os;
    },
    get connecting() {
        return cs;
    },
    enter: fs,
    exit: ds,
    pause: us,
    resume: as
});

const ps = Reflect.get;

const gs = Object.prototype.toString;

const ws = new WeakMap;

function bs(t) {
    switch (gs.call(t)) {
      case "[object Object]":
      case "[object Array]":
      case "[object Map]":
      case "[object Set]":
        return true;

      default:
        return false;
    }
}

const Es = "__raw__";

function As(t) {
    return bs(t) ? ys(t) : t;
}

function ys(t) {
    var e;
    return null !== (e = ws.get(t)) && void 0 !== e ? e : Ss(t);
}

function ms(t) {
    var e;
    return null !== (e = t[Es]) && void 0 !== e ? e : t;
}

function Us(t) {
    return bs(t) && t[Es] || t;
}

function xs(t) {
    return "constructor" === t || "__proto__" === t || "$observers" === t || t === Symbol.toPrimitive || t === Symbol.toStringTag;
}

function Ss(t) {
    const e = t instanceof Array ? Cs : t instanceof Map || t instanceof Set ? Zs : Os;
    const s = new Proxy(t, e);
    ws.set(t, s);
    return s;
}

const Os = {
    get(t, e, s) {
        if (e === Es) return t;
        const r = ls();
        if (!cs || xs(e) || null == r) return ps(t, e, s);
        r.observe(t, e);
        return As(ps(t, e, s));
    }
};

const Cs = {
    get(t, e, s) {
        if (e === Es) return t;
        const r = ls();
        if (!cs || xs(e) || null == r) return ps(t, e, s);
        switch (e) {
          case "length":
            r.observe(t, "length");
            return t.length;

          case "map":
            return ks;

          case "includes":
            return Ls;

          case "indexOf":
            return Rs;

          case "lastIndexOf":
            return Ps;

          case "every":
            return Bs;

          case "filter":
            return $s;

          case "find":
            return js;

          case "findIndex":
            return Ts;

          case "flat":
            return Is;

          case "flatMap":
            return Ms;

          case "join":
            return Ds;

          case "push":
            return Vs;

          case "pop":
            return Fs;

          case "reduce":
            return Ws;

          case "reduceRight":
            return Gs;

          case "reverse":
            return Hs;

          case "shift":
            return Ns;

          case "unshift":
            return Ks;

          case "slice":
            return zs;

          case "splice":
            return qs;

          case "some":
            return Qs;

          case "sort":
            return _s;

          case "keys":
            return ir;

          case "values":
          case Symbol.iterator:
            return nr;

          case "entries":
            return or;
        }
        r.observe(t, e);
        return As(ps(t, e, s));
    },
    ownKeys(t) {
        var e;
        null === (e = ls()) || void 0 === e ? void 0 : e.observe(t, "length");
        return Reflect.ownKeys(t);
    }
};

function ks(t, e) {
    var s;
    const r = ms(this);
    const i = r.map(((s, r) => Us(t.call(e, As(s), r, this))));
    null === (s = ls()) || void 0 === s ? void 0 : s.observeCollection(r);
    return As(i);
}

function Bs(t, e) {
    var s;
    const r = ms(this);
    const i = r.every(((s, r) => t.call(e, As(s), r, this)));
    null === (s = ls()) || void 0 === s ? void 0 : s.observeCollection(r);
    return i;
}

function $s(t, e) {
    var s;
    const r = ms(this);
    const i = r.filter(((s, r) => Us(t.call(e, As(s), r, this))));
    null === (s = ls()) || void 0 === s ? void 0 : s.observeCollection(r);
    return As(i);
}

function Ls(t) {
    var e;
    const s = ms(this);
    const r = s.includes(Us(t));
    null === (e = ls()) || void 0 === e ? void 0 : e.observeCollection(s);
    return r;
}

function Rs(t) {
    var e;
    const s = ms(this);
    const r = s.indexOf(Us(t));
    null === (e = ls()) || void 0 === e ? void 0 : e.observeCollection(s);
    return r;
}

function Ps(t) {
    var e;
    const s = ms(this);
    const r = s.lastIndexOf(Us(t));
    null === (e = ls()) || void 0 === e ? void 0 : e.observeCollection(s);
    return r;
}

function Ts(t, e) {
    var s;
    const r = ms(this);
    const i = r.findIndex(((s, r) => Us(t.call(e, As(s), r, this))));
    null === (s = ls()) || void 0 === s ? void 0 : s.observeCollection(r);
    return i;
}

function js(t, e) {
    var s;
    const r = ms(this);
    const i = r.find(((e, s) => t(As(e), s, this)), e);
    null === (s = ls()) || void 0 === s ? void 0 : s.observeCollection(r);
    return As(i);
}

function Is() {
    var t;
    const e = ms(this);
    null === (t = ls()) || void 0 === t ? void 0 : t.observeCollection(e);
    return As(e.flat());
}

function Ms(t, e) {
    var s;
    const r = ms(this);
    null === (s = ls()) || void 0 === s ? void 0 : s.observeCollection(r);
    return ys(r.flatMap(((s, r) => As(t.call(e, As(s), r, this)))));
}

function Ds(t) {
    var e;
    const s = ms(this);
    null === (e = ls()) || void 0 === e ? void 0 : e.observeCollection(s);
    return s.join(t);
}

function Fs() {
    return As(ms(this).pop());
}

function Vs(...t) {
    return ms(this).push(...t);
}

function Ns() {
    return As(ms(this).shift());
}

function Ks(...t) {
    return ms(this).unshift(...t);
}

function qs(...t) {
    return As(ms(this).splice(...t));
}

function Hs(...t) {
    var e;
    const s = ms(this);
    const r = s.reverse();
    null === (e = ls()) || void 0 === e ? void 0 : e.observeCollection(s);
    return As(r);
}

function Qs(t, e) {
    var s;
    const r = ms(this);
    const i = r.some(((s, r) => Us(t.call(e, As(s), r, this))));
    null === (s = ls()) || void 0 === s ? void 0 : s.observeCollection(r);
    return i;
}

function _s(t) {
    var e;
    const s = ms(this);
    const r = s.sort(t);
    null === (e = ls()) || void 0 === e ? void 0 : e.observeCollection(s);
    return As(r);
}

function zs(t, e) {
    var s;
    const r = ms(this);
    null === (s = ls()) || void 0 === s ? void 0 : s.observeCollection(r);
    return ys(r.slice(t, e));
}

function Ws(t, e) {
    var s;
    const r = ms(this);
    const i = r.reduce(((e, s, r) => t(e, As(s), r, this)), e);
    null === (s = ls()) || void 0 === s ? void 0 : s.observeCollection(r);
    return As(i);
}

function Gs(t, e) {
    var s;
    const r = ms(this);
    const i = r.reduceRight(((e, s, r) => t(e, As(s), r, this)), e);
    null === (s = ls()) || void 0 === s ? void 0 : s.observeCollection(r);
    return As(i);
}

const Zs = {
    get(t, e, s) {
        if (e === Es) return t;
        const r = ls();
        if (!cs || xs(e) || null == r) return ps(t, e, s);
        switch (e) {
          case "size":
            r.observe(t, "size");
            return t.size;

          case "clear":
            return sr;

          case "delete":
            return rr;

          case "forEach":
            return Js;

          case "add":
            if (t instanceof Set) return er;
            break;

          case "get":
            if (t instanceof Map) return Ys;
            break;

          case "set":
            if (t instanceof Map) return tr;
            break;

          case "has":
            return Xs;

          case "keys":
            return ir;

          case "values":
            return nr;

          case "entries":
            return or;

          case Symbol.iterator:
            return t instanceof Map ? or : nr;
        }
        return As(ps(t, e, s));
    }
};

function Js(t, e) {
    var s;
    const r = ms(this);
    null === (s = ls()) || void 0 === s ? void 0 : s.observeCollection(r);
    return r.forEach(((s, r) => {
        t.call(e, As(s), As(r), this);
    }));
}

function Xs(t) {
    var e;
    const s = ms(this);
    null === (e = ls()) || void 0 === e ? void 0 : e.observeCollection(s);
    return s.has(Us(t));
}

function Ys(t) {
    var e;
    const s = ms(this);
    null === (e = ls()) || void 0 === e ? void 0 : e.observeCollection(s);
    return As(s.get(Us(t)));
}

function tr(t, e) {
    return As(ms(this).set(Us(t), Us(e)));
}

function er(t) {
    return As(ms(this).add(Us(t)));
}

function sr() {
    return As(ms(this).clear());
}

function rr(t) {
    return As(ms(this).delete(Us(t)));
}

function ir() {
    var t;
    const e = ms(this);
    null === (t = ls()) || void 0 === t ? void 0 : t.observeCollection(e);
    const s = e.keys();
    return {
        next() {
            const t = s.next();
            const e = t.value;
            const r = t.done;
            return r ? {
                value: void 0,
                done: r
            } : {
                value: As(e),
                done: r
            };
        },
        [Symbol.iterator]() {
            return this;
        }
    };
}

function nr() {
    var t;
    const e = ms(this);
    null === (t = ls()) || void 0 === t ? void 0 : t.observeCollection(e);
    const s = e.values();
    return {
        next() {
            const t = s.next();
            const e = t.value;
            const r = t.done;
            return r ? {
                value: void 0,
                done: r
            } : {
                value: As(e),
                done: r
            };
        },
        [Symbol.iterator]() {
            return this;
        }
    };
}

function or() {
    var t;
    const e = ms(this);
    null === (t = ls()) || void 0 === t ? void 0 : t.observeCollection(e);
    const s = e.entries();
    return {
        next() {
            const t = s.next();
            const e = t.value;
            const r = t.done;
            return r ? {
                value: void 0,
                done: r
            } : {
                value: [ As(e[0]), As(e[1]) ],
                done: r
            };
        },
        [Symbol.iterator]() {
            return this;
        }
    };
}

const hr = Object.freeze({
    getProxy: ys,
    getRaw: ms,
    wrap: As,
    unwrap: Us,
    rawKey: Es
});

class ComputedObserver {
    constructor(t, e, s, r, i) {
        this.interceptor = this;
        this.type = 1;
        this.v = void 0;
        this.ov = void 0;
        this.ir = false;
        this.D = false;
        this.o = t;
        this.get = e;
        this.set = s;
        this.up = r;
        this.oL = i;
    }
    static create(t, e, s, r, i) {
        const n = s.get;
        const o = s.set;
        const h = new ComputedObserver(t, n, o, i, r);
        const c = () => h.getValue();
        c.getObserver = () => h;
        v(t, e, {
            enumerable: s.enumerable,
            configurable: true,
            get: c,
            set: t => {
                h.setValue(t, 0);
            }
        });
        return h;
    }
    getValue() {
        if (0 === this.subs.count) return this.get.call(this.o, this);
        if (this.D) {
            this.compute();
            this.D = false;
        }
        return this.v;
    }
    setValue(t, e) {
        if (p(this.set)) {
            if (t !== this.v) {
                this.ir = true;
                this.set.call(this.o, t);
                this.ir = false;
                this.run();
            }
        } else throw new Error("AUR0221");
    }
    handleChange() {
        this.D = true;
        if (this.subs.count > 0) this.run();
    }
    handleCollectionChange() {
        this.D = true;
        if (this.subs.count > 0) this.run();
    }
    subscribe(t) {
        if (this.subs.add(t) && 1 === this.subs.count) {
            this.compute();
            this.D = false;
        }
    }
    unsubscribe(t) {
        if (this.subs.remove(t) && 0 === this.subs.count) {
            this.D = true;
            this.obs.clearAll();
        }
    }
    flush() {
        cr = this.ov;
        this.ov = this.v;
        this.subs.notify(this.v, cr, 0);
    }
    run() {
        if (this.ir) return;
        const t = this.v;
        const e = this.compute();
        this.D = false;
        if (!Object.is(e, t)) {
            this.ov = t;
            this.queue.add(this);
        }
    }
    compute() {
        this.ir = true;
        this.obs.version++;
        try {
            fs(this);
            return this.v = Us(this.get.call(this.up ? As(this.o) : this.o, this));
        } finally {
            this.obs.clear();
            this.ir = false;
            ds(this);
        }
    }
}

Ee(ComputedObserver);

rt(ComputedObserver);

ct(ComputedObserver);

let cr;

const ur = _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__.DI.createInterface("IDirtyChecker", (t => t.singleton(DirtyChecker)));

const ar = {
    timeoutsPerCheck: 25,
    disabled: false,
    throw: false,
    resetToDefault() {
        this.timeoutsPerCheck = 6;
        this.disabled = false;
        this.throw = false;
    }
};

const lr = {
    persistent: true
};

class DirtyChecker {
    constructor(t) {
        this.p = t;
        this.tracked = [];
        this.T = null;
        this.j = 0;
        this.check = () => {
            if (ar.disabled) return;
            if (++this.j < ar.timeoutsPerCheck) return;
            this.j = 0;
            const t = this.tracked;
            const e = t.length;
            let s;
            let r = 0;
            for (;r < e; ++r) {
                s = t[r];
                if (s.isDirty()) this.queue.add(s);
            }
        };
    }
    createProperty(t, e) {
        if (ar.throw) throw new Error(`AUR0222:${e}`);
        return new DirtyCheckProperty(this, t, e);
    }
    addProperty(t) {
        this.tracked.push(t);
        if (1 === this.tracked.length) this.T = this.p.taskQueue.queueTask(this.check, lr);
    }
    removeProperty(t) {
        this.tracked.splice(this.tracked.indexOf(t), 1);
        if (0 === this.tracked.length) {
            this.T.cancel();
            this.T = null;
        }
    }
}

DirtyChecker.inject = [ _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__.IPlatform ];

ct(DirtyChecker);

class DirtyCheckProperty {
    constructor(t, e, s) {
        this.obj = e;
        this.key = s;
        this.type = 0;
        this.ov = void 0;
        this.I = t;
    }
    getValue() {
        return this.obj[this.key];
    }
    setValue(t, e) {
        throw new Error(`Trying to set value for property ${this.key} in dirty checker`);
    }
    isDirty() {
        return this.ov !== this.obj[this.key];
    }
    flush() {
        const t = this.ov;
        const e = this.getValue();
        this.ov = e;
        this.subs.notify(e, t, 0);
    }
    subscribe(t) {
        if (this.subs.add(t) && 1 === this.subs.count) {
            this.ov = this.obj[this.key];
            this.I.addProperty(this);
        }
    }
    unsubscribe(t) {
        if (this.subs.remove(t) && 0 === this.subs.count) this.I.removeProperty(this);
    }
}

rt(DirtyCheckProperty);

class PrimitiveObserver {
    constructor(t, e) {
        this.type = 0;
        this.o = t;
        this.k = e;
    }
    get doNotCache() {
        return true;
    }
    getValue() {
        return this.o[this.k];
    }
    setValue() {}
    subscribe() {}
    unsubscribe() {}
}

class PropertyAccessor {
    constructor() {
        this.type = 0;
    }
    getValue(t, e) {
        return t[e];
    }
    setValue(t, e, s, r) {
        s[r] = t;
    }
}

let fr;

class SetterObserver {
    constructor(t, e) {
        this.type = 1;
        this.v = void 0;
        this.ov = void 0;
        this.iO = false;
        this.f = 0;
        this.o = t;
        this.k = e;
    }
    getValue() {
        return this.v;
    }
    setValue(t, e) {
        if (this.iO) {
            if (Object.is(t, this.v)) return;
            this.ov = this.v;
            this.v = t;
            this.f = e;
            this.queue.add(this);
        } else this.o[this.k] = t;
    }
    subscribe(t) {
        if (false === this.iO) this.start();
        this.subs.add(t);
    }
    flush() {
        fr = this.ov;
        this.ov = this.v;
        this.subs.notify(this.v, fr, this.f);
    }
    start() {
        if (false === this.iO) {
            this.iO = true;
            this.v = this.o[this.k];
            v(this.o, this.k, {
                enumerable: true,
                configurable: true,
                get: () => this.getValue(),
                set: t => {
                    this.setValue(t, 0);
                }
            });
        }
        return this;
    }
    stop() {
        if (this.iO) {
            v(this.o, this.k, {
                enumerable: true,
                configurable: true,
                writable: true,
                value: this.v
            });
            this.iO = false;
        }
        return this;
    }
}

class SetterNotifier {
    constructor(t, e, s, r) {
        this.type = 1;
        this.v = void 0;
        this.ov = void 0;
        this.f = 0;
        this.o = t;
        this.S = s;
        this.hs = p(s);
        const i = t[e];
        this.cb = p(i) ? i : void 0;
        this.v = r;
    }
    getValue() {
        return this.v;
    }
    setValue(t, e) {
        var s;
        if (this.hs) t = this.S(t, null);
        if (!Object.is(t, this.v)) {
            this.ov = this.v;
            this.v = t;
            this.f = e;
            null === (s = this.cb) || void 0 === s ? void 0 : s.call(this.o, this.v, this.ov, e);
            this.queue.add(this);
        }
    }
    flush() {
        fr = this.ov;
        this.ov = this.v;
        this.subs.notify(this.v, fr, this.f);
    }
}

rt(SetterObserver);

rt(SetterNotifier);

ct(SetterObserver);

ct(SetterNotifier);

const dr = new PropertyAccessor;

const vr = _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__.DI.createInterface("IObserverLocator", (t => t.singleton(ObserverLocator)));

const pr = _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__.DI.createInterface("INodeObserverLocator", (t => t.cachedCallback((t => {
    t.getAll(_aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__.ILogger).forEach((t => {
        t.error("Using default INodeObserverLocator implementation. Will not be able to observe nodes (HTML etc...).");
    }));
    return new DefaultNodeObserverLocator;
}))));

class DefaultNodeObserverLocator {
    handles() {
        return false;
    }
    getObserver() {
        return dr;
    }
    getAccessor() {
        return dr;
    }
}

class ObserverLocator {
    constructor(t, e) {
        this.I = t;
        this.M = e;
        this.F = [];
    }
    addAdapter(t) {
        this.F.push(t);
    }
    getObserver(t, e) {
        var s, r;
        return null !== (r = null === (s = t.$observers) || void 0 === s ? void 0 : s[e]) && void 0 !== r ? r : this.V(t, e, this.createObserver(t, e));
    }
    getAccessor(t, e) {
        var s;
        const r = null === (s = t.$observers) || void 0 === s ? void 0 : s[e];
        if (void 0 !== r) return r;
        if (this.M.handles(t, e, this)) return this.M.getAccessor(t, e, this);
        return dr;
    }
    getArrayObserver(t) {
        return jt(t);
    }
    getMapObserver(t) {
        return ue(t);
    }
    getSetObserver(t) {
        return Zt(t);
    }
    createObserver(t, e) {
        var s, r, i, n;
        if (!(t instanceof Object)) return new PrimitiveObserver(t, e);
        if (this.M.handles(t, e, this)) return this.M.getObserver(t, e, this);
        switch (e) {
          case "length":
            if (t instanceof Array) return jt(t).getLengthObserver();
            break;

          case "size":
            if (t instanceof Map) return ue(t).getLengthObserver(); else if (t instanceof Set) return Zt(t).getLengthObserver();
            break;

          default:
            if (t instanceof Array && (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__.isArrayIndex)(e)) return jt(t).getIndexObserver(Number(e));
            break;
        }
        let o = br(t, e);
        if (void 0 === o) {
            let s = wr(t);
            while (null !== s) {
                o = br(s, e);
                if (void 0 === o) s = wr(s); else break;
            }
        }
        if (void 0 !== o && !d.call(o, "value")) {
            let h = this.N(t, e, o);
            if (null == h) h = null === (n = null !== (r = null === (s = o.get) || void 0 === s ? void 0 : s.getObserver) && void 0 !== r ? r : null === (i = o.set) || void 0 === i ? void 0 : i.getObserver) || void 0 === n ? void 0 : n(t, this);
            return null == h ? o.configurable ? ComputedObserver.create(t, e, o, this, true) : this.I.createProperty(t, e) : h;
        }
        return new SetterObserver(t, e);
    }
    N(t, e, s) {
        if (this.F.length > 0) for (const r of this.F) {
            const i = r.getObserver(t, e, s, this);
            if (null != i) return i;
        }
        return null;
    }
    V(t, e, s) {
        if (true === s.doNotCache) return s;
        if (void 0 === t.$observers) {
            v(t, "$observers", {
                value: {
                    [e]: s
                }
            });
            return s;
        }
        return t.$observers[e] = s;
    }
}

ObserverLocator.inject = [ ur, pr ];

function gr(t) {
    let e;
    if (t instanceof Array) e = jt(t); else if (t instanceof Map) e = ue(t); else if (t instanceof Set) e = Zt(t);
    return e;
}

const wr = Object.getPrototypeOf;

const br = Object.getOwnPropertyDescriptor;

const Er = _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__.DI.createInterface("IObservation", (t => t.singleton(Observation)));

class Observation {
    constructor(t) {
        this.oL = t;
    }
    static get inject() {
        return [ vr ];
    }
    run(t) {
        const e = new Effect(this.oL, t);
        e.run();
        return e;
    }
}

class Effect {
    constructor(t, e) {
        this.oL = t;
        this.fn = e;
        this.interceptor = this;
        this.maxRunCount = 10;
        this.queued = false;
        this.running = false;
        this.runCount = 0;
        this.stopped = false;
    }
    handleChange() {
        this.queued = true;
        this.run();
    }
    handleCollectionChange() {
        this.queued = true;
        this.run();
    }
    run() {
        if (this.stopped) throw new Error("AUR0225");
        if (this.running) return;
        ++this.runCount;
        this.running = true;
        this.queued = false;
        ++this.obs.version;
        try {
            fs(this);
            this.fn(this);
        } finally {
            this.obs.clear();
            this.running = false;
            ds(this);
        }
        if (this.queued) {
            if (this.runCount > this.maxRunCount) {
                this.runCount = 0;
                throw new Error(`AUR0226`);
            }
            this.run();
        } else this.runCount = 0;
    }
    stop() {
        this.stopped = true;
        this.obs.clearAll();
    }
}

Ee(Effect);

function Ar(t) {
    if (void 0 === t.$observers) v(t, "$observers", {
        value: {}
    });
    return t.$observers;
}

const yr = {};

function mr(t, e, s) {
    if (null == e) return (e, s, i) => r(e, s, i, t);
    return r(t, e, s);
    function r(t, e, s, r) {
        var i;
        const n = void 0 === e;
        r = "object" !== typeof r ? {
            name: r
        } : r || {};
        if (n) e = r.name;
        if (null == e || "" === e) throw new Error("AUR0224");
        const o = r.callback || `${String(e)}Changed`;
        let h = yr;
        if (s) {
            delete s.value;
            delete s.writable;
            h = null === (i = s.initializer) || void 0 === i ? void 0 : i.call(s);
            delete s.initializer;
        } else s = {
            configurable: true
        };
        if (!("enumerable" in s)) s.enumerable = true;
        const c = r.set;
        s.get = function t() {
            var s;
            const r = Ur(this, e, o, h, c);
            null === (s = ls()) || void 0 === s ? void 0 : s.subscribeTo(r);
            return r.getValue();
        };
        s.set = function t(s) {
            Ur(this, e, o, h, c).setValue(s, 0);
        };
        s.get.getObserver = function t(s) {
            return Ur(s, e, o, h, c);
        };
        if (n) v(t.prototype, e, s); else return s;
    }
}

function Ur(t, e, s, r, i) {
    const n = Ar(t);
    let o = n[e];
    if (null == o) {
        o = new SetterNotifier(t, s, i, r === yr ? void 0 : r);
        n[e] = o;
    }
    return o;
}


//# sourceMappingURL=index.js.map


/***/ }),

/***/ "./src/app.html":
/*!**********************!*\
  !*** ./src/app.html ***!
  \**********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "name": () => /* binding */ name,
/* harmony export */   "template": () => /* binding */ template,
/* harmony export */   "default": () => __WEBPACK_DEFAULT_EXPORT__,
/* harmony export */   "dependencies": () => /* binding */ dependencies,
/* harmony export */   "register": () => /* binding */ register
/* harmony export */ });
/* harmony import */ var _aurelia_runtime_html__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @aurelia/runtime-html */ "./node_modules/@aurelia/runtime-html/dist/esm/index.js");
/* harmony import */ var _reset_css__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./reset.css */ "./src/reset.css");
/* harmony import */ var _app_css__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./app.css */ "./src/app.css");



const name = "app";
const template = "<template>\n  \n  \n\n  <div id=\"au-dev-root\" class=\"${isDarkTheme ? 'dark' : ''}\">\n    <h1 class=\"app-header\">\n      <aurelia-logo></aurelia-logo>\n      <span class=\"logo-badge\">INSPECTOR</span>\n    </h1>\n\n    <main>\n      <p class=\"not-found\" style=\"margin-bottom: 10px\">\n        Select a node through the inspect window to scope into that node. Click\n        on the value will allow one to edit the value and bind to the view.\n      </p>\n      <!-- <debug-group heading=\"Binding Context\" show.bind=\"true\">\n        <template if.bind=\"debugInfo.bindingContext\">\n          <ul>\n            <li repeat.for=\"property of debugInfo.bindingContext.properties\">\n              <property-view property.bind=\"property\"></property-view>\n            </li>\n          </ul>\n        </template>\n        <template if.bind=\"!debugInfo.bindingContext\">\n          <span class=\"not-found\"\n            >No binding context found for the selected node.</span\n          >\n        </template>\n      </debug-group>\n\n      <debug-group heading=\"Override Context\">\n        <template\n          if.bind=\"debugInfo.overrideContext && debugInfo.overrideContext.properties.length\"\n        >\n          <ul>\n            <li repeat.for=\"property of debugInfo.overrideContext.properties\">\n              <property-view property.bind=\"property\"></property-view>\n            </li>\n          </ul>\n        </template>\n        <template\n          if.bind=\"!debugInfo.overrideContext || !debugInfo.overrideContext.properties.length\"\n        >\n          <span class=\"not-found\"\n            >No override context found for the selected node.</span\n          >\n        </template>\n      </debug-group> -->\n\n      <debug-group heading=\"Custom Element\">\n        <template au-slot>\n          <span if.bind=\"!selectedElement\" class=\"not-found\"\n            >The selected node is not a custom element.</span\n          >\n          <controller-view\n            else\n            controller.bind=\"selectedElement\"\n          ></controller-view>\n        </template>\n      </debug-group>\n\n      <debug-group heading=\"Custom Attributes\">\n        <template au-slot>\n          <span if.bind=\"!selectedElementAttributes\" class=\"not-found\"\n            >No custom attributes found on the selected node.</span\n          >\n          <ul else>\n            <li\n              repeat.for=\"customAttribute of selectedElementAttributes\"\n              class=\"custom-attribute\"\n            >\n              <h3 class=\"attribute-name\">${customAttribute.name}</h3>\n              &nbsp;<span class=\"block-token\">{</span>\n              <controller-view\n                controller.bind=\"customAttribute\"\n              ></controller-view>\n              <span class=\"block-token\">}</span>\n            </li>\n          </ul>\n        </template>\n      </debug-group>\n    </main>\n\n    <!-- <main>\n      <custom-element if.bind=\"selectedElement\">\n        ${JSON.stringify(selectedElement)}\n        <div>Name = ${selectedElement.name}</div>\n        <div>Key = ${selectedElement.key}</div>\n        <div>Aliases = ${selectedElement.aliases.join(', ')}</div>\n        <h3>Bindables</h3>\n        <div repeat.for=\"value of selectedElement.bindables\">\n          ${value.name} =\n          <input\n            value.bind=\"value.value\"\n            keyup.delegate=\"valueChanged(selectedElement)\"\n          />\n        </div>\n        <hr />\n      </custom-element>\n    </main> -->\n  </div>\n</template>\n";
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (template);
const dependencies = [  ];
let _e;
function register(container) {
  if (!_e) {
    _e = _aurelia_runtime_html__WEBPACK_IMPORTED_MODULE_2__.CustomElement.define({ name, template, dependencies });
  }
  container.register(_e);
}


/***/ }),

/***/ "./src/resources/elements/aurelia-logo.html":
/*!**************************************************!*\
  !*** ./src/resources/elements/aurelia-logo.html ***!
  \**************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "name": () => /* binding */ name,
/* harmony export */   "template": () => /* binding */ template,
/* harmony export */   "default": () => __WEBPACK_DEFAULT_EXPORT__,
/* harmony export */   "dependencies": () => /* binding */ dependencies,
/* harmony export */   "register": () => /* binding */ register
/* harmony export */ });
/* harmony import */ var _aurelia_runtime_html__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @aurelia/runtime-html */ "./node_modules/@aurelia/runtime-html/dist/esm/index.js");

const name = "aurelia-logo";
const template = "<template>\n  <svg height=\"28px\" viewBox=\"315 19 140 41\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\">\n    <defs>\n      <linearGradient x1=\"-388.147851%\" y1=\"-144.177425%\" x2=\"237.683809%\" y2=\"430.405754%\" id=\"linearGradient-1\">\n        <stop stop-color=\"#C06FBB\" offset=\"0%\"></stop>\n        <stop stop-color=\"#6E4D9B\" offset=\"100%\"></stop>\n      </linearGradient>\n      <linearGradient x1=\"72.9454854%\" y1=\"84.4240777%\" x2=\"-97.0517904%\" y2=\"-147.696591%\" id=\"linearGradient-2\">\n        <stop stop-color=\"#6E4D9B\" offset=\"0%\"></stop>\n        <stop stop-color=\"#77327A\" offset=\"14%\"></stop>\n        <stop stop-color=\"#B31777\" offset=\"29%\"></stop>\n        <stop stop-color=\"#CD0F7E\" offset=\"84%\"></stop>\n        <stop stop-color=\"#ED2C89\" offset=\"100%\"></stop>\n      </linearGradient>\n      <linearGradient x1=\"-283.884079%\" y1=\"-693.599872%\" x2=\"287.537417%\" y2=\"101.70976%\" id=\"linearGradient-3\">\n        <stop stop-color=\"#C06FBB\" offset=\"0%\"></stop>\n        <stop stop-color=\"#6E4D9B\" offset=\"100%\"></stop>\n      </linearGradient>\n      <linearGradient x1=\"-821.186214%\" y1=\"-469.047862%\" x2=\"101.985142%\" y2=\"288.23598%\" id=\"linearGradient-4\">\n        <stop stop-color=\"#C06FBB\" offset=\"0%\"></stop>\n        <stop stop-color=\"#6E4D9B\" offset=\"100%\"></stop>\n      </linearGradient>\n      <linearGradient x1=\"-140.359373%\" y1=\"-230.925718%\" x2=\"419.012316%\" y2=\"261.976742%\" id=\"linearGradient-5\">\n        <stop stop-color=\"#C06FBB\" offset=\"0%\"></stop>\n        <stop stop-color=\"#6E4D9B\" offset=\"100%\"></stop>\n      </linearGradient>\n      <linearGradient x1=\"191.083716%\" y1=\"253.952517%\" x2=\"20.3577022%\" y2=\"20.4029283%\" id=\"linearGradient-6\">\n        <stop stop-color=\"#6E4D9B\" offset=\"0%\"></stop>\n        <stop stop-color=\"#77327A\" offset=\"14%\"></stop>\n        <stop stop-color=\"#B31777\" offset=\"29%\"></stop>\n        <stop stop-color=\"#CD0F7E\" offset=\"84%\"></stop>\n        <stop stop-color=\"#ED2C89\" offset=\"100%\"></stop>\n      </linearGradient>\n      <linearGradient x1=\"-388.094004%\" y1=\"-173.850055%\" x2=\"237.674802%\" y2=\"518.990225%\" id=\"linearGradient-7\">\n        <stop stop-color=\"#C06FBB\" offset=\"0%\"></stop>\n        <stop stop-color=\"#6E4D9B\" offset=\"100%\"></stop>\n      </linearGradient>\n      <linearGradient x1=\"11.1884561%\" y1=\"89.6525993%\" x2=\"90.145125%\" y2=\"11.5773982%\" id=\"linearGradient-8\">\n        <stop stop-color=\"#6E4D9B\" offset=\"0%\"></stop>\n        <stop stop-color=\"#77327A\" offset=\"14%\"></stop>\n        <stop stop-color=\"#B31777\" offset=\"53%\"></stop>\n        <stop stop-color=\"#CD0F7E\" offset=\"79%\"></stop>\n        <stop stop-color=\"#ED2C89\" offset=\"100%\"></stop>\n      </linearGradient>\n      <rect id=\"path-9\" x=\"0.627498256\" y=\"0\" width=\"34\" height=\"16\" rx=\"2\"></rect>\n      <filter x=\"-50%\" y=\"-50%\" width=\"200%\" height=\"200%\" filterUnits=\"objectBoundingBox\" id=\"filter-10\">\n        <feOffset dx=\"0\" dy=\"1\" in=\"SourceAlpha\" result=\"shadowOffsetOuter1\"></feOffset>\n        <feColorMatrix values=\"0 0 0 0 0   0 0 0 0 0   0 0 0 0 0  0 0 0 0.15 0\" type=\"matrix\" in=\"shadowOffsetOuter1\"></feColorMatrix>\n      </filter>\n    </defs>\n    <g id=\"Group-3\" stroke=\"none\" stroke-width=\"1\" fill=\"none\" fill-rule=\"evenodd\" transform=\"translate(317.000000, 21.000000)\">\n      <g id=\"Icon\" transform=\"translate(18.821436, 18.821436) rotate(11.283864) translate(-18.821436, -18.821436) translate(2.821436, 2.821436)\">\n        <g id=\"Group\" transform=\"translate(16.062217, 4.314649) rotate(-11.283864) translate(-16.062217, -4.314649) translate(12.909354, 0.852682)\"\n          fill=\"url(#linearGradient-1)\">\n          <polygon id=\"Shape\" points=\"6.24514134 4.78196568 3.21344731 6.8053618 0.0902584276 2.12490594 3.12195246 0.101509821\"></polygon>\n        </g>\n        <g id=\"Group\" transform=\"translate(24.576671, 23.606062) rotate(-11.283864) translate(-24.576671, -23.606062) translate(18.394587, 16.929411)\"\n          fill=\"url(#linearGradient-2)\">\n          <polygon id=\"Shape\" points=\"7.16404632 1.47319064 12.3440146 9.23541541 6.17342916 13.3533016 0.993460912 5.5909532 0.0897638609 4.23695315 6.26047291 0.119066939\"></polygon>\n        </g>\n        <g id=\"Group\" transform=\"translate(16.064001, 27.069671) rotate(-11.283864) translate(-16.064001, -27.069671) translate(12.602034, 23.854988)\"\n          fill=\"url(#linearGradient-3)\">\n          <polygon id=\"Shape\" points=\"5.69777962 1.46663763 6.83825049 3.17561295 2.14147393 6.30992958 0.0973060035 3.24683056 1.12340832 2.56210293 4.79420621 0.11251393\"></polygon>\n        </g>\n        <g id=\"Group\" transform=\"translate(27.417287, 15.726712) rotate(-11.283864) translate(-27.417287, -15.726712) translate(24.820812, 13.130236)\"\n          fill=\"url(#linearGradient-4)\">\n          <path d=\"M1.81703815,0.894671208 L3.13444027,0.0155788519 L5.17848455,3.07867787 L2.14641959,5.10207399 L1.00594872,3.39309867 L2.72061156,2.24879491 L1.81703815,0.894671208 L1.81703815,0.894671208 Z M1.00594872,3.39309867 L0.102375312,2.03897497 L1.81703815,0.894671208 L2.72061156,2.24879491 L1.00594872,3.39309867 L1.00594872,3.39309867 Z\"\n            id=\"Shape\"></path>\n        </g>\n        <g id=\"Group\" transform=\"translate(4.721041, 15.716385) rotate(-11.283864) translate(-4.721041, -15.716385) translate(0.764507, 11.759851)\"\n          fill=\"url(#linearGradient-5)\">\n          <polygon id=\"Shape\" points=\"4.17241219 7.1450055 3.14643351 7.82973313 0.0229973528 3.14927727 4.71977391 0.0149606435 6.90909717 3.29579267 3.23842293 5.74538166 6.90909717 3.29579267 7.84321007 4.69554014\"></polygon>\n        </g>\n        <g id=\"Group\" transform=\"translate(8.822560, 7.837609) rotate(-11.283864) translate(-8.822560, -7.837609) translate(2.640476, 1.160958)\"\n          fill=\"url(#linearGradient-6)\">\n          <polygon id=\"Shape\" points=\"11.3428879 7.75332257 12.2768771 9.15307005 6.10616809 13.2709563 5.17217883 11.8712088 0.0406781133 4.18168531 6.21138716 0.0637991077\"></polygon>\n        </g>\n        <g id=\"Group\" transform=\"translate(16.122857, 4.300703) rotate(-11.283864) translate(-16.122857, -4.300703) translate(12.969994, 0.900557)\"\n          fill=\"url(#linearGradient-7)\">\n          <polygon id=\"Shape\" points=\"4.86604202 5.6013391 3.15137918 6.74551923 2.21726628 5.34589539 0.0279430201 2.06506337 3.06000798 0.0416672467 6.18344414 4.72212311\"></polygon>\n        </g>\n        <g id=\"Group\" transform=\"translate(15.822071, 25.857155) rotate(-11.283864) translate(-15.822071, -25.857155) translate(13.472879, 23.878888)\"\n          fill=\"#714896\">\n          <polygon id=\"Shape\" points=\"0.914330236 3.91622662 0.0106331846 2.56210293 3.68143107 0.11251393 4.58500448 1.46663763\"></polygon>\n        </g>\n        <g id=\"Group\" transform=\"translate(26.180721, 15.532164) rotate(-11.283864) translate(-26.180721, -15.532164) translate(24.758842, 14.233926)\"\n          fill=\"#6F4795\">\n          <polygon id=\"Shape\" points=\"1.00594872 2.5276069 0.102375312 1.1734832 1.81703815 0.0291794369 2.72061156 1.38330313\"></polygon>\n        </g>\n        <g id=\"Group\" transform=\"translate(6.539242, 16.614393) rotate(-11.283864) translate(-6.539242, -16.614393) translate(4.190050, 14.636126)\"\n          fill=\"#88519F\">\n          <polygon id=\"Shape\" points=\"0.957728466 3.93032178 0.0237392029 2.53069794 3.69441345 0.0811089432 4.62852635 1.48085642\"></polygon>\n        </g>\n        <g id=\"Group\" transform=\"translate(16.885795, 6.228777) rotate(-11.283864) translate(-16.885795, -6.228777) translate(15.463916, 4.868718)\"\n          fill=\"#85509E\">\n          <polygon id=\"Shape\" points=\"1.04947059 2.66534373 0.115357689 1.26571989 1.83014417 0.121416131 2.76413343 1.52116361\"></polygon>\n        </g>\n        <g id=\"Group\" transform=\"translate(21.280404, 20.355313) rotate(-11.283864) translate(-21.280404, -20.355313) translate(17.694795, 17.511554)\"\n          fill=\"#8D166A\">\n          <polygon id=\"Shape\" points=\"7.16404632 1.47319064 0.993460912 5.5909532 0.0897638609 4.23695315 6.26047291 0.119066939\"></polygon>\n        </g>\n        <g id=\"Group\" transform=\"translate(12.058201, 11.100454) rotate(-11.283864) translate(-12.058201, -11.100454) translate(8.410771, 8.256696)\"\n          fill=\"#A70D6F\">\n          <polygon id=\"Shape\" points=\"6.27357893 0.0875383106 7.20756819 1.48728579 1.03685914 5.605172 0.102869879 4.20542452\"></polygon>\n        </g>\n        <g id=\"Group\" transform=\"translate(1.853411, 10.678267) rotate(45.000000) translate(-1.853411, -10.678267) translate(0.797906, 9.622762)\"\n          fill=\"#9E61AD\">\n          <rect id=\"Rectangle-path\" x=\"1.66662571e-15\" y=\"0\" width=\"2.0982715\" height=\"2.0982715\"></rect>\n        </g>\n        <g id=\"Group\" transform=\"translate(12.115669, 29.966366) rotate(45.000000) translate(-12.115669, -29.966366) translate(11.060163, 28.910860)\"\n          fill=\"#8053A3\">\n          <rect id=\"Rectangle-path\" x=\"1.66662571e-15\" y=\"0\" width=\"2.0982715\" height=\"2.0982715\"></rect>\n        </g>\n        <g id=\"Group\" transform=\"translate(16.641954, 16.427437) rotate(0.000000) translate(-16.641954, -16.427437) translate(1.422442, 1.207924)\"\n          fill=\"url(#linearGradient-8)\">\n          <polygon id=\"Shape\" points=\"6.53446157 29.8878978 0.012982374 23.3175801 23.2186668 0.0630572451 29.9596099 6.46398583\"></polygon>\n        </g>\n      </g>\n      <g id=\"Aurelia-+-Type-something\" transform=\"translate(38.131960, 3.021427)\">\n        <g id=\"Aurelia\" transform=\"translate(0.929505, 0.290297)\">\n          <g id=\"A\" transform=\"translate(0.076673, 8.413465)\" fill=\"#ED2C88\">\n            <path d=\"M8.79524752,16.5403564 C8.91089109,16.5398812 9.02811881,16.5376634 9.14376238,16.5325941 C9.38930693,16.5216634 9.63326733,16.4993267 9.87722772,16.4652673 C10.5853465,16.3659406 11.2792079,16.167604 11.9334653,15.8765941 C12.7429703,15.5166733 13.4891089,15.0162376 14.1306931,14.4050693 C14.7358416,13.8271683 15.2475248,13.1512079 15.6388119,12.4104554 C15.969901,11.7821782 16.2138614,11.1084356 16.3611881,10.4133069 C16.540198,9.56356436 16.5750495,8.68324752 16.4657426,7.82178218 C16.3643564,7.03271287 16.1425743,6.26043564 15.8051485,5.53964356 C15.4186139,4.70954455 14.8815842,3.95025743 14.230495,3.30645545 C13.5445545,2.62922772 12.7334653,2.08110891 11.8479208,1.70011881 C11.3679208,1.49354455 10.8657426,1.33607921 10.3540594,1.23136634 C9.87405941,1.13314851 9.38455446,1.0810297 8.8950495,1.07485149 C8.41821782,1.06883168 7.94138614,1.10590099 7.47247525,1.18669307 C6.94019802,1.27841584 6.41742574,1.42653465 5.91524752,1.62788119 C5.03445545,1.98130693 4.22178218,2.49916832 3.52633663,3.14582178 C2.84514851,3.78011881 2.27960396,4.53687129 1.86455446,5.37061386 C1.51287129,6.08079208 1.27049505,6.8449901 1.15009901,7.6289901 C1.0170297,8.50407921 1.03287129,9.40229703 1.20079208,10.2718416 C1.3370297,10.9859802 1.57623762,11.6801584 1.90732673,12.3274455 C2.28910891,13.0731089 2.79287129,13.7552475 3.39326733,14.3405941 C4.01425743,14.9482772 4.73821782,15.450297 5.52712871,15.8181386 C6.15920792,16.1134257 6.83247525,16.321901 7.52,16.4359604 C7.76079208,16.4758812 8.00475248,16.504396 8.24871287,16.5213465 C8.38019802,16.5305347 8.51168317,16.5359208 8.64475248,16.5389307 C8.69544554,16.5397228 8.74455446,16.540198 8.79524752,16.5403564 L8.79524752,16.5403564 Z M16.8538614,12.199604 C16.769901,12.3988911 16.6780198,12.5950099 16.579802,12.7874851 C16.1330693,13.6613069 15.5374257,14.4579802 14.8261386,15.1353663 C14.1275248,15.8018218 13.3180198,16.3518416 12.440396,16.7550099 C11.7053465,17.0924356 10.9243564,17.3265743 10.1259406,17.4487129 C9.85188119,17.4905347 9.57623762,17.5193663 9.2990099,17.5350495 C9.16910891,17.542495 9.03762376,17.5466139 8.90772277,17.5486733 C8.86970297,17.5491485 8.83168317,17.5493069 8.79524752,17.5494653 C8.66376238,17.5489901 8.53227723,17.5466139 8.40079208,17.5407525 C8.12356436,17.528396 7.84792079,17.5030495 7.57227723,17.4647129 C6.77069307,17.352396 5.9849505,17.1277624 5.24514851,16.7987327 C4.34693069,16.3988911 3.51683168,15.8460198 2.80079208,15.1714851 C2.07366337,14.4861782 1.46534653,13.6768317 1.00910891,12.7874851 C0.641584158,12.0712871 0.375445545,11.3045545 0.218613861,10.5151683 C0.0316831683,9.57037624 0.00316831683,8.59453465 0.12990099,7.63992079 C0.247128713,6.76625743 0.495841584,5.91128713 0.86970297,5.11271287 C1.31485149,4.15857426 1.93425743,3.28760396 2.68831683,2.55192079 C3.46613861,1.79073267 4.38811881,1.17671287 5.39089109,0.752316832 C5.92,0.528633663 6.47128713,0.35770297 7.03366337,0.242693069 C7.59445545,0.128 8.16633663,0.0687524752 8.73821782,0.0652673267 C9.31168317,0.0616237624 9.88514851,0.113584158 10.4491089,0.221465347 C11.0130693,0.329663366 11.5675248,0.493940594 12.099802,0.711287129 C13.1089109,1.12364356 14.0372277,1.72689109 14.8261386,2.4790495 C15.5754455,3.1930297 16.1964356,4.03960396 16.6510891,4.96918812 C16.7223762,5.11588119 16.790495,5.26447525 16.8538614,5.4149703 L16.8538614,0.0944158416 L17.8439604,0.0944158416 L17.8439604,17.5201584 L16.8538614,17.5201584 L16.8538614,12.199604 L16.8538614,12.199604 Z\"\n              id=\"Shape\"></path>\n          </g>\n          <g id=\"U\" transform=\"translate(20.353901, 8.413465)\" fill=\"#CD0F7E\">\n            <path d=\"M16.5370297,12.8188515 C16.1710891,13.5234851 15.7116832,14.1790099 15.1714851,14.761505 C14.710495,15.2605149 14.1893069,15.7056634 13.6253465,16.0845941 C13.0106931,16.4967921 12.3421782,16.8299406 11.6435644,17.0724752 C11.0637624,17.2736634 10.4617822,17.4122772 9.85188119,17.4859406 C9.64910891,17.510495 9.44792079,17.5277624 9.24356436,17.5380594 C9.13108911,17.5437624 9.02019802,17.5469307 8.90772277,17.5486733 C8.86970297,17.5491485 8.83168317,17.5493069 8.79524752,17.5494653 C8.68118812,17.5491485 8.57029703,17.5472475 8.45623762,17.5429703 C8.21544554,17.5339406 7.97465347,17.5149307 7.73544554,17.486099 C7.03366337,17.401505 6.3429703,17.2318416 5.68079208,16.981703 C4.68910891,16.6065743 3.76712871,16.0505347 2.97188119,15.3492277 C2.40792079,14.8505347 1.90574257,14.2788119 1.48752475,13.6519604 C1.03445545,12.9745743 0.678019802,12.2330297 0.435643564,11.4553663 C0.256633663,10.8830099 0.139405941,10.291802 0.0855445545,9.69473267 C0.0586138614,9.39865347 0.0491089109,9.10162376 0.0522772277,8.80443564 L0.0522772277,0.0944158416 L1.06138614,0.0944158416 L1.06138614,8.81013861 L1.06138614,8.91453465 L1.06138614,9.0140198 C1.0629703,9.1130297 1.06455446,9.21188119 1.07089109,9.31073267 C1.0819802,9.53805941 1.10415842,9.76491089 1.13584158,9.99033663 C1.22772277,10.6333465 1.40356436,11.264 1.66019802,11.8613861 C2.01980198,12.7047921 2.53623762,13.4792871 3.16990099,14.1414653 C3.79564356,14.7939802 4.53544554,15.3357624 5.3449505,15.7362376 C6.05940594,16.0890297 6.82772277,16.3310891 7.6150495,16.4511683 C8.42613861,16.5747327 9.25782178,16.5704554 10.0673267,16.4359604 C10.7057426,16.3296634 11.3314851,16.1416238 11.9239604,15.8769109 C12.7714851,15.4979802 13.5477228,14.9631683 14.2067327,14.3089109 C14.8340594,13.6853861 15.3536634,12.9552475 15.740198,12.1587327 C16.0586139,11.5003564 16.2835644,10.7976238 16.4087129,10.0771485 C16.4578218,9.80308911 16.4910891,9.52665347 16.510099,9.24926733 C16.5180198,9.11651485 16.5243564,8.98376238 16.5275248,8.85069307 L16.5275248,8.80316832 L16.5370297,0.0944158416 L17.5271287,0.0944158416 L17.5271287,17.5201584 L16.5370297,17.5201584 L16.5370297,12.8188515 L16.5370297,12.8188515 Z\"\n              id=\"Shape\"></path>\n          </g>\n          <g id=\"R\" transform=\"translate(40.314297, 8.413465)\" fill=\"#B31776\">\n            <path d=\"M1.06455446,8.41552475 L1.04237624,17.5201584 L0.0522772277,17.5201584 L0.0522772277,0.0944158416 L1.04237624,0.0944158416 L1.04237624,4.55524752 C1.16594059,4.32966337 1.30059406,4.10978218 1.44316832,3.89639604 C1.83287129,3.31691089 2.29544554,2.78637624 2.81346535,2.31889109 C3.57069307,1.63611881 4.44831683,1.08910891 5.39405941,0.706693069 C6.08950495,0.425188119 6.82138614,0.232871287 7.56594059,0.133386139 C7.82257426,0.0993267327 8.07920792,0.076039604 8.33742574,0.0635247525 C8.48633663,0.0563960396 8.63524752,0.0532277228 8.78415842,0.0527524752 L8.78732673,1.08641584 C8.75247525,1.08657426 8.71920792,1.08673267 8.68594059,1.0870495 C8.65267327,1.08752475 8.61940594,1.08815842 8.58613861,1.0889505 C8.47049505,1.0919604 8.35485149,1.09687129 8.23920792,1.10463366 C7.99524752,1.12079208 7.75287129,1.14788119 7.51207921,1.18590099 C6.87366337,1.28681188 6.24792079,1.46550495 5.65227723,1.71849505 C4.82693069,2.0700198 4.06178218,2.56506931 3.40594059,3.17813861 C2.94653465,3.60712871 2.5409901,4.09346535 2.20356436,4.62320792 C1.85663366,5.16673267 1.5809901,5.75619802 1.38930693,6.37180198 C1.25306931,6.80966337 1.15960396,7.26035644 1.10891089,7.71611881 C1.0819802,7.94851485 1.06930693,8.18186139 1.06455446,8.41552475 L1.06455446,8.41552475 Z\"\n              id=\"Shape\"></path>\n          </g>\n          <g id=\"E\" transform=\"translate(48.393505, 8.413465)\" fill=\"#9B2073\">\n            <path d=\"M9.3750495,17.5510495 L8.81584158,17.5493069 C8.77940594,17.5488317 8.74138614,17.5483564 8.70336634,17.5478812 C8.59089109,17.5453465 8.48,17.5413861 8.36752475,17.5350495 C8.12831683,17.5214257 7.88910891,17.4979802 7.65148515,17.4647129 C6.98930693,17.3720396 6.33980198,17.2033267 5.71722772,16.9623762 C4.68277228,16.5620594 3.72910891,15.9626139 2.9180198,15.2072871 C2.12118812,14.4663762 1.46534653,13.5773465 0.993267327,12.5975446 C0.643168317,11.8707327 0.394455446,11.0954455 0.258217822,10.3003564 C0.0934653465,9.35081188 0.0887128713,8.37386139 0.239207921,7.42241584 C0.400792079,6.41489109 0.73980198,5.43778218 1.23722772,4.54732673 C1.78376238,3.56879208 2.52039604,2.69845545 3.39326733,1.99524752 C3.85742574,1.62075248 4.36118812,1.29394059 4.89188119,1.02178218 C5.3829703,0.770217822 5.89782178,0.565544554 6.42851485,0.411564356 C7.18574257,0.191524752 7.97148515,0.0757227723 8.76039604,0.0657425743 C9.64118812,0.0546534653 10.5235644,0.175366337 11.369505,0.426772277 C12.3184158,0.709386139 13.2182178,1.15564356 14.019802,1.73972277 C14.8673267,2.35849505 15.6023762,3.12966337 16.1805941,4.00665347 C16.5592079,4.58233663 16.869703,5.2030099 17.1025743,5.85172277 C17.3417822,6.51675248 17.4986139,7.21093069 17.569901,7.91413861 C17.5920792,8.13607921 17.6063366,8.35881188 17.6126733,8.58186139 C17.6126733,8.63825743 17.6142574,8.69449505 17.6142574,8.75073267 C17.6158416,8.78732673 17.6158416,8.82582178 17.6126733,8.86209901 C17.609505,8.8809505 17.6063366,8.89964356 17.6031683,8.91817822 C17.590495,8.97346535 17.5683168,9.02669307 17.5382178,9.07469307 C17.4780198,9.17132673 17.3845545,9.24562376 17.2768317,9.28332673 C17.2419802,9.29584158 17.2039604,9.30439604 17.1675248,9.30867327 C17.1485149,9.31073267 17.129505,9.31073267 17.110495,9.31184158 L9.0819802,9.31184158 L9.0819802,8.30273267 L16.5893069,8.30273267 C16.5718812,8.02867327 16.540198,7.75588119 16.4926733,7.48530693 C16.4023762,6.95271287 16.2534653,6.42962376 16.0522772,5.92807921 C15.7623762,5.20538614 15.3615842,4.528 14.8689109,3.92443564 C14.3112871,3.24007921 13.6364356,2.65188119 12.8823762,2.19342574 C12.2645545,1.81845545 11.5960396,1.53077228 10.8974257,1.34194059 C10.0625743,1.11588119 9.18970297,1.03287129 8.32633663,1.09322772 C7.90653465,1.12253465 7.48831683,1.18590099 7.07960396,1.28316832 C6.63287129,1.38914851 6.19722772,1.53520792 5.77584158,1.7189703 C4.89346535,2.10487129 4.08554455,2.65790099 3.40435644,3.33908911 C3.08752475,3.65655446 2.79762376,4.00158416 2.53940594,4.3689505 C2.21623762,4.82835644 1.94376238,5.32261386 1.72831683,5.84079208 C1.50336634,6.38384158 1.34019802,6.95287129 1.24356436,7.53314851 C1.16594059,8.00332673 1.13267327,8.48063366 1.14059406,8.95730693 C1.15168317,9.49449505 1.21663366,10.0305743 1.3370297,10.5541386 C1.47643564,11.1535842 1.68712871,11.7362376 1.96435644,12.2856238 C2.26534653,12.8817426 2.6439604,13.4382574 3.08594059,13.9375842 C3.49782178,14.4007921 3.96356436,14.8145743 4.47207921,15.1673663 C4.88237624,15.4514059 5.31960396,15.6958416 5.77584158,15.895604 C6.25584158,16.1050297 6.75485149,16.2653465 7.26653465,16.3733861 C7.59920792,16.4437228 7.93821782,16.4918812 8.27722772,16.517703 C8.45940594,16.5314851 8.64,16.5384554 8.82217822,16.540198 L9.37821782,16.5419406 C9.37821782,16.8782574 9.37663366,17.2145743 9.3750495,17.5510495 L9.3750495,17.5510495 Z\"\n              id=\"Shape\"></path>\n          </g>\n          <g id=\"L\" transform=\"translate(68.512317, 0.017426)\" fill=\"#8F2475\">\n            <path d=\"M5.15009901,25.945505 C4.98851485,25.9450297 4.82693069,25.9401188 4.66534653,25.9291881 C4.32475248,25.9062178 3.98415842,25.8577426 3.65148515,25.7802772 C3.31881188,25.7026535 2.99089109,25.5957228 2.67881188,25.4566337 C2.29227723,25.2849109 1.92633663,25.0642376 1.60158416,24.7947723 C1.43049505,24.6548911 1.27207921,24.5020198 1.12633663,24.3375842 C0.942574257,24.1314851 0.780990099,23.9074851 0.641584158,23.6692277 C0.467326733,23.3699802 0.331089109,23.0491881 0.234455446,22.7168317 C0.163168317,22.4693861 0.112475248,22.2157624 0.083960396,21.9597624 C0.0601980198,21.7470099 0.0491089109,21.5329901 0.0522772277,21.3189703 L0.0522772277,0.140673267 L1.06138614,0.140673267 L1.06138614,21.3253069 L1.06138614,21.430495 C1.0629703,21.5691089 1.07089109,21.7077228 1.08673267,21.8455446 C1.11207921,22.0673267 1.15643564,22.2870495 1.2229703,22.5001188 C1.30217822,22.7510495 1.40990099,22.9927921 1.54772277,23.2172673 C1.65227723,23.3893069 1.77425743,23.5510495 1.91049505,23.699802 C2.01821782,23.8186139 2.13544554,23.9291881 2.26059406,24.0305743 C2.36514851,24.1161188 2.4760396,24.1953267 2.59009901,24.2680396 C2.68831683,24.3306139 2.78970297,24.3884356 2.89267327,24.441505 C3.38534653,24.6930693 3.92712871,24.8370693 4.47524752,24.8991683 C4.70019802,24.9246733 4.92673267,24.9357624 5.15168317,24.936396 C5.15168317,25.2727129 5.15009901,25.6090297 5.15009901,25.945505 L5.15009901,25.945505 Z\"\n              id=\"Shape\"></path>\n          </g>\n          <g id=\"I\" transform=\"translate(75.957861, 0.017426)\" fill=\"#78327A\">\n            <path d=\"M0.148910891,25.916198 L0.148910891,8.49045545 L1.1390099,8.49045545 L1.1390099,25.916198 L0.148910891,25.916198 L0.148910891,25.916198 Z M0.153663366,2.47065347 L0.153663366,0.140673267 L1.13584158,0.140673267 L1.13584158,2.47065347 L0.153663366,2.47065347 L0.153663366,2.47065347 Z\"\n              id=\"Shape\"></path>\n          </g>\n          <g id=\"A1\" transform=\"translate(79.601426, 8.413465)\" fill=\"#6E4D9B\">\n            <path d=\"M8.79524752,16.5403564 C8.91089109,16.5398812 9.02811881,16.5376634 9.14376238,16.5325941 C9.38930693,16.5216634 9.63326733,16.4993267 9.87722772,16.4652673 C10.5853465,16.3659406 11.2792079,16.167604 11.9334653,15.8765941 C12.6716832,15.5480396 13.3576238,15.1027327 13.959604,14.5626931 C14.6281188,13.9616634 15.1920792,13.2446733 15.6166337,12.451802 C15.9588119,11.811802 16.2106931,11.1236436 16.3611881,10.4133069 C16.5433663,9.54756436 16.5766337,8.65029703 16.4594059,7.77330693 C16.3548515,6.98550495 16.1267327,6.21528713 15.7861386,5.49718812 C15.3932673,4.66946535 14.8514851,3.91382178 14.1972277,3.27382178 C13.5065347,2.60055446 12.6922772,2.0570297 11.8051485,1.68174257 C11.3378218,1.48419802 10.849901,1.33291089 10.3540594,1.23136634 C9.85663366,1.12982178 9.35128713,1.07754455 8.84435644,1.07437624 C8.33742574,1.07120792 7.82891089,1.1169901 7.32990099,1.21251485 C6.83089109,1.30819802 6.34138614,1.45346535 5.87247525,1.64546535 C4.9790099,2.01029703 4.15683168,2.54415842 3.45980198,3.20950495 C2.7960396,3.84126733 2.24633663,4.59041584 1.8439604,5.41275248 C1.49544554,6.12546535 1.25782178,6.89188119 1.14376238,7.6769901 C1.01861386,8.53671287 1.0360396,9.41813861 1.20079208,10.2716832 C1.34336634,11.0167129 1.59683168,11.7395644 1.95009901,12.4104554 C2.34138614,13.1512079 2.85306931,13.8271683 3.45980198,14.4050693 C4.07762376,14.9945347 4.79366337,15.4813465 5.56990099,15.8379406 C6.21940594,16.1362376 6.91009901,16.3432871 7.61663366,16.4511683 C7.8590099,16.4882376 8.1029703,16.5135842 8.34693069,16.5275248 C8.46257426,16.5341782 8.57821782,16.5378218 8.69386139,16.5397228 C8.72871287,16.5400396 8.76039604,16.540198 8.79524752,16.5403564 L8.79524752,16.5403564 Z M16.8538614,12.199604 C16.769901,12.3988911 16.6780198,12.5950099 16.579802,12.7874851 C16.1251485,13.6768317 15.5152475,14.4861782 14.7881188,15.1714851 C14.0720792,15.8460198 13.2435644,16.3988911 12.3437624,16.7987327 C11.6039604,17.1277624 10.8182178,17.352396 10.0166337,17.4647129 C9.74257426,17.5030495 9.46534653,17.528396 9.18811881,17.5407525 C9.05663366,17.5466139 8.92514851,17.5489901 8.79524752,17.5494653 C8.66376238,17.5489901 8.53227723,17.5466139 8.40079208,17.5407525 C8.12356436,17.528396 7.84792079,17.5030495 7.57227723,17.4647129 C6.77069307,17.352396 5.9849505,17.1277624 5.24514851,16.7987327 C4.33108911,16.3917624 3.48673267,15.8262178 2.76277228,15.1353663 C2.05306931,14.4579802 1.45742574,13.6613069 1.00910891,12.7874851 C0.633663366,12.0551287 0.364356436,11.269703 0.209108911,10.4616238 C0.0316831683,9.53362376 0.00475247525,8.57631683 0.12990099,7.63976238 C0.248712871,6.74867327 0.506930693,5.87706931 0.891881188,5.06471287 C1.34336634,4.11342574 1.96752475,3.24641584 2.72475248,2.51548515 C3.50891089,1.75873267 4.43405941,1.15009901 5.44,0.731722772 C5.98811881,0.504237624 6.55841584,0.332990099 7.13980198,0.221465347 C7.68475248,0.117069307 8.23920792,0.0651089109 8.79524752,0.0651089109 C9.34970297,0.0651089109 9.90415842,0.117069307 10.4491089,0.221465347 C11.030495,0.332990099 11.6007921,0.504237624 12.1489109,0.731722772 C13.1548515,1.15009901 14.08,1.75873267 14.8641584,2.51532673 C15.6087129,3.23390099 16.2249505,4.08443564 16.6748515,5.01687129 C16.7382178,5.1480396 16.7968317,5.28079208 16.8538614,5.4149703 L16.8538614,0.0944158416 L17.8439604,0.0944158416 L17.8439604,17.5201584 C17.8423762,17.5393267 16.8538614,17.5201584 16.8538614,17.5201584 L16.8538614,12.199604 L16.8538614,12.199604 Z\"\n              id=\"Shape\"></path>\n          </g>\n        </g>\n      </g>\n    </g>\n  </svg>\n</template>\n";
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (template);
const dependencies = [  ];
let _e;
function register(container) {
  if (!_e) {
    _e = _aurelia_runtime_html__WEBPACK_IMPORTED_MODULE_0__.CustomElement.define({ name, template, dependencies });
  }
  container.register(_e);
}


/***/ }),

/***/ "./src/resources/elements/controller-view.html":
/*!*****************************************************!*\
  !*** ./src/resources/elements/controller-view.html ***!
  \*****************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "name": () => /* binding */ name,
/* harmony export */   "template": () => /* binding */ template,
/* harmony export */   "default": () => __WEBPACK_DEFAULT_EXPORT__,
/* harmony export */   "dependencies": () => /* binding */ dependencies,
/* harmony export */   "bindables": () => /* binding */ bindables,
/* harmony export */   "register": () => /* binding */ register
/* harmony export */ });
/* harmony import */ var _aurelia_runtime_html__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @aurelia/runtime-html */ "./node_modules/@aurelia/runtime-html/dist/esm/index.js");
/* harmony import */ var _controller_view_css__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./controller-view.css */ "./src/resources/elements/controller-view.css");


const name = "controller-view";
const template = "<template >\n  \n\n  <div class=\"category\" if.bind=\"controller.bindables.length\">\n    <h4 class=\"category-name\">Bindables</h4>\n    <ul class=\"properties\">\n      <li repeat.for=\"bindable of controller.bindables\">\n        <property-view\n          controller.bind=\"controller\"\n          property.bind=\"bindable\"\n        ></property-view>\n      </li>\n    </ul>\n  </div>\n\n  <div class=\"category\" if.bind=\"controller.properties.length\">\n    <h4 class=\"category-name\">Properties</h4>\n    <ul class=\"properties\">\n      <li repeat.for=\"property of controller.properties\">\n        <property-view\n          controller.bind=\"controller\"\n          property.bind=\"property\"\n        ></property-view>\n      </li>\n    </ul>\n  </div>\n</template>\n";
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (template);
const dependencies = [  ];
const bindables = {"controller":{}};
let _e;
function register(container) {
  if (!_e) {
    _e = _aurelia_runtime_html__WEBPACK_IMPORTED_MODULE_1__.CustomElement.define({ name, template, dependencies, bindables });
  }
  container.register(_e);
}


/***/ }),

/***/ "./src/resources/elements/debug-group.html":
/*!*************************************************!*\
  !*** ./src/resources/elements/debug-group.html ***!
  \*************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "name": () => /* binding */ name,
/* harmony export */   "template": () => /* binding */ template,
/* harmony export */   "default": () => __WEBPACK_DEFAULT_EXPORT__,
/* harmony export */   "dependencies": () => /* binding */ dependencies,
/* harmony export */   "register": () => /* binding */ register
/* harmony export */ });
/* harmony import */ var _aurelia_runtime_html__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @aurelia/runtime-html */ "./node_modules/@aurelia/runtime-html/dist/esm/index.js");
/* harmony import */ var _debug_group_css__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./debug-group.css */ "./src/resources/elements/debug-group.css");


const name = "debug-group";
const template = "\n<section>\n  <h2 class=\"header\">${heading}</h2>\n  <div class=\"content\">\n    <au-slot></au-slot>\n  </div>\n</section>\n";
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (template);
const dependencies = [  ];
let _e;
function register(container) {
  if (!_e) {
    _e = _aurelia_runtime_html__WEBPACK_IMPORTED_MODULE_1__.CustomElement.define({ name, template, dependencies });
  }
  container.register(_e);
}


/***/ }),

/***/ "./src/resources/elements/property-view.html":
/*!***************************************************!*\
  !*** ./src/resources/elements/property-view.html ***!
  \***************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "name": () => /* binding */ name,
/* harmony export */   "template": () => /* binding */ template,
/* harmony export */   "default": () => __WEBPACK_DEFAULT_EXPORT__,
/* harmony export */   "dependencies": () => /* binding */ dependencies,
/* harmony export */   "register": () => /* binding */ register
/* harmony export */ });
/* harmony import */ var _aurelia_runtime_html__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @aurelia/runtime-html */ "./node_modules/@aurelia/runtime-html/dist/esm/index.js");
/* harmony import */ var _property_view_css__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./property-view.css */ "./src/resources/elements/property-view.css");


const name = "property-view";
const template = "\n\n<span class=\"property-line\">\n  <span\n    css=\"opacity: ${property.canExpand ? 1 : 0}\"\n    class=\"arrow\"\n    click.trigger=\"debugHost.toggleDebugValueExpansion(property)\"\n  >\n    <span if.bind=\"property.isExpanded\" class=\"down\">▼</span>\n    <span if.bind=\"!property.isExpanded\" class=\"right\">▶</span>\n  </span>\n  <span class=\"property-name\">${property.name}</span\n  ><span class=\"token-colon\">:</span>&nbsp;\n\n  <span class=\"value-container\">\n    <span\n      if.bind=\"property.type === 'string' && !property.isEditing\"\n      class=\"property-value string\"\n      >\"</span\n    ><span\n      if.bind=\"!property.isEditing\"\n      class=\"property-value ${property.type}\"\n      click.trigger=\"beginEditing()\"\n      >${property.value}</span\n    ><span\n      if.bind=\"property.type === 'string' && !property.isEditing\"\n      class=\"property-value string\"\n      >\"</span\n    >\n\n    <!-- <select\n      if.bind=\"property.isEditing &&  property.type === 'boolean'\"\n      class=\"property-editor\"\n      value.bind=\"false\"\n    >\n      <option model.bind=\"true\">True</option>\n      <option model.bind=\"false\">False</option>\n    </select> -->\n\n    <input\n      if.bind=\"property.isEditing\"\n      class=\"property-editor\"\n      ref=\"editor\"\n      type=\"text\"\n      value.bind=\"property.value\"\n      keyup.trigger=\"keyup($event)\"\n      blur.trigger=\"endEditing()\"\n    />\n  </span>\n</span>\n\n<ul if.bind=\"property.isExpanded && property.expandedValue\" class=\"properties\">\n  <div\n    if.bind=\"!property.expandedValue.properties.length\"\n    class=\"no-properties\"\n  >\n    Object has no properties.\n  </div>\n  <li repeat.for=\"p of property.expandedValue.properties\">\n    <property-view\n      controller.bind=\"controller\"\n      property.bind=\"p\"\n    ></property-view>\n  </li>\n</ul>\n";
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (template);
const dependencies = [  ];
let _e;
function register(container) {
  if (!_e) {
    _e = _aurelia_runtime_html__WEBPACK_IMPORTED_MODULE_1__.CustomElement.define({ name, template, dependencies });
  }
  container.register(_e);
}


/***/ }),

/***/ "./node_modules/aurelia/dist/esm/index.js":
/*!************************************************!*\
  !*** ./node_modules/aurelia/dist/esm/index.js ***!
  \************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "ColorOptions": () => /* reexport safe */ _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__.ColorOptions,
/* harmony export */   "ConsoleSink": () => /* reexport safe */ _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__.ConsoleSink,
/* harmony export */   "DI": () => /* reexport safe */ _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__.DI,
/* harmony export */   "EventAggregator": () => /* reexport safe */ _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__.EventAggregator,
/* harmony export */   "IContainer": () => /* reexport safe */ _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__.IContainer,
/* harmony export */   "IEventAggregator": () => /* reexport safe */ _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__.IEventAggregator,
/* harmony export */   "ILogger": () => /* reexport safe */ _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__.ILogger,
/* harmony export */   "IServiceLocator": () => /* reexport safe */ _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__.IServiceLocator,
/* harmony export */   "InstanceProvider": () => /* reexport safe */ _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__.InstanceProvider,
/* harmony export */   "LogLevel": () => /* reexport safe */ _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__.LogLevel,
/* harmony export */   "LoggerConfiguration": () => /* reexport safe */ _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__.LoggerConfiguration,
/* harmony export */   "Metadata": () => /* reexport safe */ _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__.Metadata,
/* harmony export */   "Registration": () => /* reexport safe */ _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__.Registration,
/* harmony export */   "all": () => /* reexport safe */ _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__.all,
/* harmony export */   "bound": () => /* reexport safe */ _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__.bound,
/* harmony export */   "camelCase": () => /* reexport safe */ _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__.camelCase,
/* harmony export */   "emptyArray": () => /* reexport safe */ _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__.emptyArray,
/* harmony export */   "emptyObject": () => /* reexport safe */ _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__.emptyObject,
/* harmony export */   "inject": () => /* reexport safe */ _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__.inject,
/* harmony export */   "isArrayIndex": () => /* reexport safe */ _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__.isArrayIndex,
/* harmony export */   "kebabCase": () => /* reexport safe */ _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__.kebabCase,
/* harmony export */   "lazy": () => /* reexport safe */ _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__.lazy,
/* harmony export */   "noop": () => /* reexport safe */ _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__.noop,
/* harmony export */   "optional": () => /* reexport safe */ _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__.optional,
/* harmony export */   "pascalCase": () => /* reexport safe */ _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__.pascalCase,
/* harmony export */   "singleton": () => /* reexport safe */ _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__.singleton,
/* harmony export */   "toArray": () => /* reexport safe */ _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__.toArray,
/* harmony export */   "transient": () => /* reexport safe */ _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__.transient,
/* harmony export */   "AppTask": () => /* reexport safe */ _aurelia_runtime_html__WEBPACK_IMPORTED_MODULE_1__.AppTask,
/* harmony export */   "AuSlotsInfo": () => /* reexport safe */ _aurelia_runtime_html__WEBPACK_IMPORTED_MODULE_1__.AuSlotsInfo,
/* harmony export */   "Bindable": () => /* reexport safe */ _aurelia_runtime_html__WEBPACK_IMPORTED_MODULE_1__.Bindable,
/* harmony export */   "BindingBehavior": () => /* reexport safe */ _aurelia_runtime_html__WEBPACK_IMPORTED_MODULE_2__.BindingBehavior,
/* harmony export */   "BindingMode": () => /* reexport safe */ _aurelia_runtime_html__WEBPACK_IMPORTED_MODULE_2__.BindingMode,
/* harmony export */   "ComputedObserver": () => /* reexport safe */ _aurelia_runtime_html__WEBPACK_IMPORTED_MODULE_2__.ComputedObserver,
/* harmony export */   "ComputedWatcher": () => /* reexport safe */ _aurelia_runtime_html__WEBPACK_IMPORTED_MODULE_1__.ComputedWatcher,
/* harmony export */   "Controller": () => /* reexport safe */ _aurelia_runtime_html__WEBPACK_IMPORTED_MODULE_1__.Controller,
/* harmony export */   "CustomAttribute": () => /* reexport safe */ _aurelia_runtime_html__WEBPACK_IMPORTED_MODULE_1__.CustomAttribute,
/* harmony export */   "CustomElement": () => /* reexport safe */ _aurelia_runtime_html__WEBPACK_IMPORTED_MODULE_1__.CustomElement,
/* harmony export */   "DefaultDialogDom": () => /* reexport safe */ _aurelia_runtime_html__WEBPACK_IMPORTED_MODULE_1__.DefaultDialogDom,
/* harmony export */   "DefaultDialogDomRenderer": () => /* reexport safe */ _aurelia_runtime_html__WEBPACK_IMPORTED_MODULE_1__.DefaultDialogDomRenderer,
/* harmony export */   "DefaultDialogGlobalSettings": () => /* reexport safe */ _aurelia_runtime_html__WEBPACK_IMPORTED_MODULE_1__.DefaultDialogGlobalSettings,
/* harmony export */   "DialogCloseResult": () => /* reexport safe */ _aurelia_runtime_html__WEBPACK_IMPORTED_MODULE_1__.DialogCloseResult,
/* harmony export */   "DialogConfiguration": () => /* reexport safe */ _aurelia_runtime_html__WEBPACK_IMPORTED_MODULE_1__.DialogConfiguration,
/* harmony export */   "DialogController": () => /* reexport safe */ _aurelia_runtime_html__WEBPACK_IMPORTED_MODULE_1__.DialogController,
/* harmony export */   "DialogDeactivationStatuses": () => /* reexport safe */ _aurelia_runtime_html__WEBPACK_IMPORTED_MODULE_1__.DialogDeactivationStatuses,
/* harmony export */   "DialogDefaultConfiguration": () => /* reexport safe */ _aurelia_runtime_html__WEBPACK_IMPORTED_MODULE_1__.DialogDefaultConfiguration,
/* harmony export */   "DialogOpenResult": () => /* reexport safe */ _aurelia_runtime_html__WEBPACK_IMPORTED_MODULE_1__.DialogOpenResult,
/* harmony export */   "DialogService": () => /* reexport safe */ _aurelia_runtime_html__WEBPACK_IMPORTED_MODULE_1__.DialogService,
/* harmony export */   "ExpressionWatcher": () => /* reexport safe */ _aurelia_runtime_html__WEBPACK_IMPORTED_MODULE_1__.ExpressionWatcher,
/* harmony export */   "IAppRoot": () => /* reexport safe */ _aurelia_runtime_html__WEBPACK_IMPORTED_MODULE_1__.IAppRoot,
/* harmony export */   "IAttrMapper": () => /* reexport safe */ _aurelia_runtime_html__WEBPACK_IMPORTED_MODULE_1__.IAttrMapper,
/* harmony export */   "IAttributePattern": () => /* reexport safe */ _aurelia_runtime_html__WEBPACK_IMPORTED_MODULE_1__.IAttributePattern,
/* harmony export */   "IAuSlotsInfo": () => /* reexport safe */ _aurelia_runtime_html__WEBPACK_IMPORTED_MODULE_1__.IAuSlotsInfo,
/* harmony export */   "IAurelia": () => /* reexport safe */ _aurelia_runtime_html__WEBPACK_IMPORTED_MODULE_1__.IAurelia,
/* harmony export */   "IDialogController": () => /* reexport safe */ _aurelia_runtime_html__WEBPACK_IMPORTED_MODULE_1__.IDialogController,
/* harmony export */   "IDialogDom": () => /* reexport safe */ _aurelia_runtime_html__WEBPACK_IMPORTED_MODULE_1__.IDialogDom,
/* harmony export */   "IDialogDomRenderer": () => /* reexport safe */ _aurelia_runtime_html__WEBPACK_IMPORTED_MODULE_1__.IDialogDomRenderer,
/* harmony export */   "IDialogGlobalSettings": () => /* reexport safe */ _aurelia_runtime_html__WEBPACK_IMPORTED_MODULE_1__.IDialogGlobalSettings,
/* harmony export */   "IDialogService": () => /* reexport safe */ _aurelia_runtime_html__WEBPACK_IMPORTED_MODULE_1__.IDialogService,
/* harmony export */   "IEventTarget": () => /* reexport safe */ _aurelia_runtime_html__WEBPACK_IMPORTED_MODULE_1__.IEventTarget,
/* harmony export */   "ILifecycleHooks": () => /* reexport safe */ _aurelia_runtime_html__WEBPACK_IMPORTED_MODULE_1__.ILifecycleHooks,
/* harmony export */   "INode": () => /* reexport safe */ _aurelia_runtime_html__WEBPACK_IMPORTED_MODULE_1__.INode,
/* harmony export */   "IObserverLocator": () => /* reexport safe */ _aurelia_runtime_html__WEBPACK_IMPORTED_MODULE_2__.IObserverLocator,
/* harmony export */   "IPlatform": () => /* reexport safe */ _aurelia_runtime_html__WEBPACK_IMPORTED_MODULE_1__.IPlatform,
/* harmony export */   "IRenderLocation": () => /* reexport safe */ _aurelia_runtime_html__WEBPACK_IMPORTED_MODULE_1__.IRenderLocation,
/* harmony export */   "ISignaler": () => /* reexport safe */ _aurelia_runtime_html__WEBPACK_IMPORTED_MODULE_2__.ISignaler,
/* harmony export */   "ITemplateCompiler": () => /* reexport safe */ _aurelia_runtime_html__WEBPACK_IMPORTED_MODULE_1__.ITemplateCompiler,
/* harmony export */   "ITemplateCompilerHooks": () => /* reexport safe */ _aurelia_runtime_html__WEBPACK_IMPORTED_MODULE_1__.ITemplateCompilerHooks,
/* harmony export */   "IWcElementRegistry": () => /* reexport safe */ _aurelia_runtime_html__WEBPACK_IMPORTED_MODULE_1__.IWcElementRegistry,
/* harmony export */   "IWorkTracker": () => /* reexport safe */ _aurelia_runtime_html__WEBPACK_IMPORTED_MODULE_1__.IWorkTracker,
/* harmony export */   "LifecycleFlags": () => /* reexport safe */ _aurelia_runtime_html__WEBPACK_IMPORTED_MODULE_2__.LifecycleFlags,
/* harmony export */   "LifecycleHooks": () => /* reexport safe */ _aurelia_runtime_html__WEBPACK_IMPORTED_MODULE_1__.LifecycleHooks,
/* harmony export */   "NodeObserverLocator": () => /* reexport safe */ _aurelia_runtime_html__WEBPACK_IMPORTED_MODULE_1__.NodeObserverLocator,
/* harmony export */   "ShortHandBindingSyntax": () => /* reexport safe */ _aurelia_runtime_html__WEBPACK_IMPORTED_MODULE_1__.ShortHandBindingSyntax,
/* harmony export */   "StyleConfiguration": () => /* reexport safe */ _aurelia_runtime_html__WEBPACK_IMPORTED_MODULE_1__.StyleConfiguration,
/* harmony export */   "TaskQueuePriority": () => /* reexport safe */ _aurelia_runtime_html__WEBPACK_IMPORTED_MODULE_3__.TaskQueuePriority,
/* harmony export */   "TemplateCompilerHooks": () => /* reexport safe */ _aurelia_runtime_html__WEBPACK_IMPORTED_MODULE_1__.TemplateCompilerHooks,
/* harmony export */   "ValueConverter": () => /* reexport safe */ _aurelia_runtime_html__WEBPACK_IMPORTED_MODULE_2__.ValueConverter,
/* harmony export */   "ViewFactory": () => /* reexport safe */ _aurelia_runtime_html__WEBPACK_IMPORTED_MODULE_1__.ViewFactory,
/* harmony export */   "Watch": () => /* reexport safe */ _aurelia_runtime_html__WEBPACK_IMPORTED_MODULE_1__.Watch,
/* harmony export */   "WcCustomElementRegistry": () => /* reexport safe */ _aurelia_runtime_html__WEBPACK_IMPORTED_MODULE_1__.WcCustomElementRegistry,
/* harmony export */   "alias": () => /* reexport safe */ _aurelia_runtime_html__WEBPACK_IMPORTED_MODULE_2__.alias,
/* harmony export */   "attributePattern": () => /* reexport safe */ _aurelia_runtime_html__WEBPACK_IMPORTED_MODULE_1__.attributePattern,
/* harmony export */   "bindable": () => /* reexport safe */ _aurelia_runtime_html__WEBPACK_IMPORTED_MODULE_1__.bindable,
/* harmony export */   "bindingBehavior": () => /* reexport safe */ _aurelia_runtime_html__WEBPACK_IMPORTED_MODULE_2__.bindingBehavior,
/* harmony export */   "bindingCommand": () => /* reexport safe */ _aurelia_runtime_html__WEBPACK_IMPORTED_MODULE_1__.bindingCommand,
/* harmony export */   "children": () => /* reexport safe */ _aurelia_runtime_html__WEBPACK_IMPORTED_MODULE_1__.children,
/* harmony export */   "coercer": () => /* reexport safe */ _aurelia_runtime_html__WEBPACK_IMPORTED_MODULE_1__.coercer,
/* harmony export */   "containerless": () => /* reexport safe */ _aurelia_runtime_html__WEBPACK_IMPORTED_MODULE_1__.containerless,
/* harmony export */   "createElement": () => /* reexport safe */ _aurelia_runtime_html__WEBPACK_IMPORTED_MODULE_1__.createElement,
/* harmony export */   "cssModules": () => /* reexport safe */ _aurelia_runtime_html__WEBPACK_IMPORTED_MODULE_1__.cssModules,
/* harmony export */   "customAttribute": () => /* reexport safe */ _aurelia_runtime_html__WEBPACK_IMPORTED_MODULE_1__.customAttribute,
/* harmony export */   "customElement": () => /* reexport safe */ _aurelia_runtime_html__WEBPACK_IMPORTED_MODULE_1__.customElement,
/* harmony export */   "lifecycleHooks": () => /* reexport safe */ _aurelia_runtime_html__WEBPACK_IMPORTED_MODULE_1__.lifecycleHooks,
/* harmony export */   "registerAliases": () => /* reexport safe */ _aurelia_runtime_html__WEBPACK_IMPORTED_MODULE_2__.registerAliases,
/* harmony export */   "renderer": () => /* reexport safe */ _aurelia_runtime_html__WEBPACK_IMPORTED_MODULE_1__.renderer,
/* harmony export */   "shadowCSS": () => /* reexport safe */ _aurelia_runtime_html__WEBPACK_IMPORTED_MODULE_1__.shadowCSS,
/* harmony export */   "subscriberCollection": () => /* reexport safe */ _aurelia_runtime_html__WEBPACK_IMPORTED_MODULE_2__.subscriberCollection,
/* harmony export */   "templateCompilerHooks": () => /* reexport safe */ _aurelia_runtime_html__WEBPACK_IMPORTED_MODULE_1__.templateCompilerHooks,
/* harmony export */   "templateController": () => /* reexport safe */ _aurelia_runtime_html__WEBPACK_IMPORTED_MODULE_1__.templateController,
/* harmony export */   "useShadowDOM": () => /* reexport safe */ _aurelia_runtime_html__WEBPACK_IMPORTED_MODULE_1__.useShadowDOM,
/* harmony export */   "valueConverter": () => /* reexport safe */ _aurelia_runtime_html__WEBPACK_IMPORTED_MODULE_2__.valueConverter,
/* harmony export */   "watch": () => /* reexport safe */ _aurelia_runtime_html__WEBPACK_IMPORTED_MODULE_1__.watch,
/* harmony export */   "HttpClient": () => /* reexport safe */ _aurelia_fetch_client__WEBPACK_IMPORTED_MODULE_5__.HttpClient,
/* harmony export */   "HttpClientConfiguration": () => /* reexport safe */ _aurelia_fetch_client__WEBPACK_IMPORTED_MODULE_5__.HttpClientConfiguration,
/* harmony export */   "IHttpClient": () => /* reexport safe */ _aurelia_fetch_client__WEBPACK_IMPORTED_MODULE_5__.IHttpClient,
/* harmony export */   "json": () => /* reexport safe */ _aurelia_fetch_client__WEBPACK_IMPORTED_MODULE_5__.json,
/* harmony export */   "IRouteContext": () => /* reexport safe */ _aurelia_router__WEBPACK_IMPORTED_MODULE_6__.IRouteContext,
/* harmony export */   "IRouter": () => /* reexport safe */ _aurelia_router__WEBPACK_IMPORTED_MODULE_6__.IRouter,
/* harmony export */   "IRouterEvents": () => /* reexport safe */ _aurelia_router__WEBPACK_IMPORTED_MODULE_6__.IRouterEvents,
/* harmony export */   "Route": () => /* reexport safe */ _aurelia_router__WEBPACK_IMPORTED_MODULE_6__.Route,
/* harmony export */   "RouteConfig": () => /* reexport safe */ _aurelia_router__WEBPACK_IMPORTED_MODULE_6__.RouteConfig,
/* harmony export */   "RouteNode": () => /* reexport safe */ _aurelia_router__WEBPACK_IMPORTED_MODULE_6__.RouteNode,
/* harmony export */   "Router": () => /* reexport safe */ _aurelia_router__WEBPACK_IMPORTED_MODULE_6__.Router,
/* harmony export */   "RouterConfiguration": () => /* reexport safe */ _aurelia_router__WEBPACK_IMPORTED_MODULE_6__.RouterConfiguration,
/* harmony export */   "RouterOptions": () => /* reexport safe */ _aurelia_router__WEBPACK_IMPORTED_MODULE_6__.RouterOptions,
/* harmony export */   "RouterRegistration": () => /* reexport safe */ _aurelia_router__WEBPACK_IMPORTED_MODULE_6__.RouterRegistration,
/* harmony export */   "route": () => /* reexport safe */ _aurelia_router__WEBPACK_IMPORTED_MODULE_6__.route,
/* harmony export */   "Aurelia": () => /* binding */ Aurelia,
/* harmony export */   "PLATFORM": () => /* binding */ l,
/* harmony export */   "default": () => /* binding */ Aurelia
/* harmony export */ });
/* harmony import */ var _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @aurelia/kernel */ "./node_modules/@aurelia/kernel/dist/esm/index.js");
/* harmony import */ var _aurelia_runtime_html__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @aurelia/runtime-html */ "./node_modules/@aurelia/runtime-html/dist/esm/index.js");
/* harmony import */ var _aurelia_runtime_html__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @aurelia/runtime-html */ "./node_modules/@aurelia/runtime/dist/esm/index.js");
/* harmony import */ var _aurelia_runtime_html__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @aurelia/runtime-html */ "./node_modules/@aurelia/platform/dist/esm/index.js");
/* harmony import */ var _aurelia_platform_browser__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @aurelia/platform-browser */ "./node_modules/@aurelia/platform-browser/dist/esm/index.js");
/* harmony import */ var _aurelia_fetch_client__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @aurelia/fetch-client */ "./node_modules/@aurelia/fetch-client/dist/esm/index.js");
/* harmony import */ var _aurelia_router__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @aurelia/router */ "./node_modules/@aurelia/router/dist/esm/index.js");














const l = _aurelia_platform_browser__WEBPACK_IMPORTED_MODULE_4__.BrowserPlatform.getOrCreate(globalThis);

function u() {
    return _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__.DI.createContainer().register(_aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__.Registration.instance(_aurelia_runtime_html__WEBPACK_IMPORTED_MODULE_1__.IPlatform, l), _aurelia_runtime_html__WEBPACK_IMPORTED_MODULE_1__.StandardConfiguration);
}

class Aurelia extends _aurelia_runtime_html__WEBPACK_IMPORTED_MODULE_1__.Aurelia {
    constructor(e = u()) {
        super(e);
    }
    static start(e) {
        return (new Aurelia).start(e);
    }
    static app(e) {
        return (new Aurelia).app(e);
    }
    static enhance(e, t) {
        return (new Aurelia).enhance(e, t);
    }
    static register(...e) {
        return (new Aurelia).register(...e);
    }
    app(e) {
        if (_aurelia_runtime_html__WEBPACK_IMPORTED_MODULE_1__.CustomElement.isType(e)) {
            const t = _aurelia_runtime_html__WEBPACK_IMPORTED_MODULE_1__.CustomElement.getDefinition(e);
            let o = document.querySelector(t.name);
            if (null === o) o = document.body;
            return super.app({
                host: o,
                component: e
            });
        }
        return super.app(e);
    }
}


//# sourceMappingURL=index.js.map


/***/ }),

/***/ "./node_modules/css-loader/dist/cjs.js!./src/app.css":
/*!***********************************************************!*\
  !*** ./node_modules/css-loader/dist/cjs.js!./src/app.css ***!
  \***********************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => __WEBPACK_DEFAULT_EXPORT__
/* harmony export */ });
/* harmony import */ var _node_modules_css_loader_dist_runtime_cssWithMappingToString_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../node_modules/css-loader/dist/runtime/cssWithMappingToString.js */ "./node_modules/css-loader/dist/runtime/cssWithMappingToString.js");
/* harmony import */ var _node_modules_css_loader_dist_runtime_cssWithMappingToString_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_node_modules_css_loader_dist_runtime_cssWithMappingToString_js__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../node_modules/css-loader/dist/runtime/api.js */ "./node_modules/css-loader/dist/runtime/api.js");
/* harmony import */ var _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1__);
// Imports


var ___CSS_LOADER_EXPORT___ = _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1___default()((_node_modules_css_loader_dist_runtime_cssWithMappingToString_js__WEBPACK_IMPORTED_MODULE_0___default()));
// Module
___CSS_LOADER_EXPORT___.push([module.id, ".app-header {\n  background: #f4f4f4;\n  padding: 0;\n  padding: 5px 0 0 0;\n  text-align: center;\n}\n\n.dark .app-header {\n  background: #202124;\n}\n\n.logo-badge {\n  position: relative;\n  top: -7px;\n  font-weight: 100;\n  font-size: 16px;\n  color: #BB79A8;\n}\n\n.not-found {\n  font-style: italic;\n  font-size: 10px;\n}\n\n.dark .not-found {\n  color: #989898;\n}\n\n.custom-attribute {\n  margin-bottom: 4px;\n}\n\n.custom-attribute .attribute-name {\n  color: saddlebrown;\n}\n.dark .custom-attribute .attribute-name {\n  color: #ef9565;\n}\n\n.custom-attribute .block-token {\n  color: gray;\n}\n\n.custom-attribute .attribute-name, .custom-attribute .block-token {\n  font-size: 12px;\n  display: inline;\n  font-family: monospace;\n}\n\n.custom-attribute controller-view {\n  margin-left: 8px;\n  display: block;\n}\n\ncustom-element {\n  margin-top: 2px;\n  display: block;\n}\n\ncustom-element .arrow {\n  font-size: 10px;\n  color: dimgray;\n  cursor: default;\n}\n\ncustom-element .arrow .right {\n  margin-right: 1px;\n}\n\ncustom-element .property-line {\n  white-space: nowrap;\n}\n\ncustom-element .property-name {\n  font-size: 12px;\n  color: purple;\n  font-family: monospace;\n  margin-left: 1px;\n}\n\n.dark custom-element .property-name {\n  color: #34c7bb;\n}\ncustom-element .value-container {\n  position: relative;\n}\n\ncustom-element .property-editor {\n  font-family: monospace;\n  font-size: 12px;\n  margin: 0;\n  height: 12px;\n  outline: none;\n  border: 1px solid darkgray;\n  box-shadow: 0 0 5px rgba(0,0,0,.5);\n  position: absolute;\n  top: 4px;\n  left: 2px;\n  padding: 0 0 0 2px;\n}\n\ncustom-element .property-value, custom-element .token-colon {\n  font-size: 12px;\n  color: dimgray;\n  font-family: monospace;\n}\n\ncustom-element .property-value.null, custom-element .property-value.undefined {\n  color: dimgray;\n}\n\ncustom-element .property-value.boolean {\n  color: deeppink;\n}\n\ncustom-element .property-value.string {\n  color: red;\n  white-space: nowrap;\n}\n.dark custom-element .property-value.string {\n  color:#cbcbcb;\n}\n\ncustom-element .property-value.number {\n  color: blue;\n}\n\n.dark custom-element .property-value.number {\n  color: #59a6ca;\n}\n\ncustom-element .property-value.array {\n  color: black;\n}\n\n.dark custom-element .property-value.array {\n  color: #cbcbcb;\n}\n\ncustom-element .property-value.object, custom-element .property-value.node {\n  color: black;\n}\n\n.dark custom-element .property-value.object, custom-element .property-value.node {\n  color: #cbcbcb;\n}\n\ncustom-element ul.properties {\n  margin-left: 16px;\n}\n\ncustom-element .no-properties {\n  margin-top: 4px;\n  font-size: 10px;\n}\n\n.dark custom-element .no-properties {\n  color: #989898;\n}\n", "",{"version":3,"sources":["webpack://./src/app.css"],"names":[],"mappings":"AAAA;EACE,mBAAmB;EACnB,UAAU;EACV,kBAAkB;EAClB,kBAAkB;AACpB;;AAEA;EACE,mBAAmB;AACrB;;AAEA;EACE,kBAAkB;EAClB,SAAS;EACT,gBAAgB;EAChB,eAAe;EACf,cAAc;AAChB;;AAEA;EACE,kBAAkB;EAClB,eAAe;AACjB;;AAEA;EACE,cAAc;AAChB;;AAEA;EACE,kBAAkB;AACpB;;AAEA;EACE,kBAAkB;AACpB;AACA;EACE,cAAc;AAChB;;AAEA;EACE,WAAW;AACb;;AAEA;EACE,eAAe;EACf,eAAe;EACf,sBAAsB;AACxB;;AAEA;EACE,gBAAgB;EAChB,cAAc;AAChB;;AAEA;EACE,eAAe;EACf,cAAc;AAChB;;AAEA;EACE,eAAe;EACf,cAAc;EACd,eAAe;AACjB;;AAEA;EACE,iBAAiB;AACnB;;AAEA;EACE,mBAAmB;AACrB;;AAEA;EACE,eAAe;EACf,aAAa;EACb,sBAAsB;EACtB,gBAAgB;AAClB;;AAEA;EACE,cAAc;AAChB;AACA;EACE,kBAAkB;AACpB;;AAEA;EACE,sBAAsB;EACtB,eAAe;EACf,SAAS;EACT,YAAY;EACZ,aAAa;EACb,0BAA0B;EAC1B,kCAAkC;EAClC,kBAAkB;EAClB,QAAQ;EACR,SAAS;EACT,kBAAkB;AACpB;;AAEA;EACE,eAAe;EACf,cAAc;EACd,sBAAsB;AACxB;;AAEA;EACE,cAAc;AAChB;;AAEA;EACE,eAAe;AACjB;;AAEA;EACE,UAAU;EACV,mBAAmB;AACrB;AACA;EACE,aAAa;AACf;;AAEA;EACE,WAAW;AACb;;AAEA;EACE,cAAc;AAChB;;AAEA;EACE,YAAY;AACd;;AAEA;EACE,cAAc;AAChB;;AAEA;EACE,YAAY;AACd;;AAEA;EACE,cAAc;AAChB;;AAEA;EACE,iBAAiB;AACnB;;AAEA;EACE,eAAe;EACf,eAAe;AACjB;;AAEA;EACE,cAAc;AAChB","sourcesContent":[".app-header {\n  background: #f4f4f4;\n  padding: 0;\n  padding: 5px 0 0 0;\n  text-align: center;\n}\n\n.dark .app-header {\n  background: #202124;\n}\n\n.logo-badge {\n  position: relative;\n  top: -7px;\n  font-weight: 100;\n  font-size: 16px;\n  color: #BB79A8;\n}\n\n.not-found {\n  font-style: italic;\n  font-size: 10px;\n}\n\n.dark .not-found {\n  color: #989898;\n}\n\n.custom-attribute {\n  margin-bottom: 4px;\n}\n\n.custom-attribute .attribute-name {\n  color: saddlebrown;\n}\n.dark .custom-attribute .attribute-name {\n  color: #ef9565;\n}\n\n.custom-attribute .block-token {\n  color: gray;\n}\n\n.custom-attribute .attribute-name, .custom-attribute .block-token {\n  font-size: 12px;\n  display: inline;\n  font-family: monospace;\n}\n\n.custom-attribute controller-view {\n  margin-left: 8px;\n  display: block;\n}\n\ncustom-element {\n  margin-top: 2px;\n  display: block;\n}\n\ncustom-element .arrow {\n  font-size: 10px;\n  color: dimgray;\n  cursor: default;\n}\n\ncustom-element .arrow .right {\n  margin-right: 1px;\n}\n\ncustom-element .property-line {\n  white-space: nowrap;\n}\n\ncustom-element .property-name {\n  font-size: 12px;\n  color: purple;\n  font-family: monospace;\n  margin-left: 1px;\n}\n\n.dark custom-element .property-name {\n  color: #34c7bb;\n}\ncustom-element .value-container {\n  position: relative;\n}\n\ncustom-element .property-editor {\n  font-family: monospace;\n  font-size: 12px;\n  margin: 0;\n  height: 12px;\n  outline: none;\n  border: 1px solid darkgray;\n  box-shadow: 0 0 5px rgba(0,0,0,.5);\n  position: absolute;\n  top: 4px;\n  left: 2px;\n  padding: 0 0 0 2px;\n}\n\ncustom-element .property-value, custom-element .token-colon {\n  font-size: 12px;\n  color: dimgray;\n  font-family: monospace;\n}\n\ncustom-element .property-value.null, custom-element .property-value.undefined {\n  color: dimgray;\n}\n\ncustom-element .property-value.boolean {\n  color: deeppink;\n}\n\ncustom-element .property-value.string {\n  color: red;\n  white-space: nowrap;\n}\n.dark custom-element .property-value.string {\n  color:#cbcbcb;\n}\n\ncustom-element .property-value.number {\n  color: blue;\n}\n\n.dark custom-element .property-value.number {\n  color: #59a6ca;\n}\n\ncustom-element .property-value.array {\n  color: black;\n}\n\n.dark custom-element .property-value.array {\n  color: #cbcbcb;\n}\n\ncustom-element .property-value.object, custom-element .property-value.node {\n  color: black;\n}\n\n.dark custom-element .property-value.object, custom-element .property-value.node {\n  color: #cbcbcb;\n}\n\ncustom-element ul.properties {\n  margin-left: 16px;\n}\n\ncustom-element .no-properties {\n  margin-top: 4px;\n  font-size: 10px;\n}\n\n.dark custom-element .no-properties {\n  color: #989898;\n}\n"],"sourceRoot":""}]);
// Exports
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (___CSS_LOADER_EXPORT___);


/***/ }),

/***/ "./node_modules/css-loader/dist/cjs.js!./src/reset.css":
/*!*************************************************************!*\
  !*** ./node_modules/css-loader/dist/cjs.js!./src/reset.css ***!
  \*************************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => __WEBPACK_DEFAULT_EXPORT__
/* harmony export */ });
/* harmony import */ var _node_modules_css_loader_dist_runtime_cssWithMappingToString_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../node_modules/css-loader/dist/runtime/cssWithMappingToString.js */ "./node_modules/css-loader/dist/runtime/cssWithMappingToString.js");
/* harmony import */ var _node_modules_css_loader_dist_runtime_cssWithMappingToString_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_node_modules_css_loader_dist_runtime_cssWithMappingToString_js__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../node_modules/css-loader/dist/runtime/api.js */ "./node_modules/css-loader/dist/runtime/api.js");
/* harmony import */ var _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1__);
// Imports


var ___CSS_LOADER_EXPORT___ = _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1___default()((_node_modules_css_loader_dist_runtime_cssWithMappingToString_js__WEBPACK_IMPORTED_MODULE_0___default()));
// Module
___CSS_LOADER_EXPORT___.push([module.id, "/* http://meyerweb.com/eric/tools/css/reset/\n   v2.0 | 20110126\n   License: none (public domain)\n*/\n\nhtml, body, div, span, applet, object, iframe,\nh1, h2, h3, h4, h5, h6, p, blockquote, pre,\na, abbr, acronym, address, big, cite, code,\ndel, dfn, em, img, ins, kbd, q, s, samp,\nsmall, strike, strong, sub, sup, tt, var,\nb, u, i, center,\ndl, dt, dd, ol, ul, li,\nfieldset, form, label, legend,\ntable, caption, tbody, tfoot, thead, tr, th, td,\narticle, aside, canvas, details, embed,\nfigure, figcaption, footer, header, hgroup,\nmenu, nav, output, ruby, section, summary,\ntime, mark, audio, video {\n\tmargin: 0;\n\tpadding: 0;\n\tborder: 0;\n\tfont-size: 100%;\n\tfont: inherit;\n\tvertical-align: baseline;\n}\n/* HTML5 display-role reset for older browsers */\narticle, aside, details, figcaption, figure,\nfooter, header, hgroup, menu, nav, section {\n\tdisplay: block;\n}\nbody {\n\tline-height: 1;\n}\nol, ul {\n\tlist-style: none;\n}\nblockquote, q {\n\tquotes: none;\n}\nblockquote:before, blockquote:after,\nq:before, q:after {\n\tcontent: '';\n\tcontent: none;\n}\ntable {\n\tborder-collapse: collapse;\n\tborder-spacing: 0;\n}\n\n/*! normalize.css v5.0.0 | MIT License | github.com/necolas/normalize.css */\n\n/* Document\n   ========================================================================== */\n\n/**\n * 1. Change the default font family in all browsers (opinionated).\n * 2. Correct the line height in all browsers.\n * 3. Prevent adjustments of font size after orientation changes in\n *    IE on Windows Phone and in iOS.\n */\n\nhtml {\n  font-family: sans-serif; /* 1 */\n  line-height: 1.15; /* 2 */\n  -ms-text-size-adjust: 100%; /* 3 */\n  -webkit-text-size-adjust: 100%; /* 3 */\n}\n\n/* Forms\n   ========================================================================== */\n\n/**\n * 1. Change the font styles in all browsers (opinionated).\n * 2. Remove the margin in Firefox and Safari.\n */\n\nbutton,\ninput,\noptgroup,\nselect,\ntextarea {\n  font-family: sans-serif; /* 1 */\n  font-size: 100%; /* 1 */\n  line-height: 1.15; /* 1 */\n  margin: 0; /* 2 */\n}\n\n/**\n * Show the overflow in IE.\n * 1. Show the overflow in Edge.\n */\n\nbutton,\ninput { /* 1 */\n  overflow: visible;\n}\n\n/**\n * Remove the inheritance of text transform in Edge, Firefox, and IE.\n * 1. Remove the inheritance of text transform in Firefox.\n */\n\nbutton,\nselect { /* 1 */\n  text-transform: none;\n}\n\n/**\n * 1. Prevent a WebKit bug where (2) destroys native `audio` and `video`\n *    controls in Android 4.\n * 2. Correct the inability to style clickable types in iOS and Safari.\n */\n\nbutton,\nhtml [type=\"button\"], /* 1 */\n[type=\"reset\"],\n[type=\"submit\"] {\n  -webkit-appearance: button; /* 2 */\n}\n\n/**\n * Remove the inner border and padding in Firefox.\n */\n\nbutton::-moz-focus-inner,\n[type=\"button\"]::-moz-focus-inner,\n[type=\"reset\"]::-moz-focus-inner,\n[type=\"submit\"]::-moz-focus-inner {\n  border-style: none;\n  padding: 0;\n}\n\n/**\n * Restore the focus styles unset by the previous rule.\n */\n\nbutton:-moz-focusring,\n[type=\"button\"]:-moz-focusring,\n[type=\"reset\"]:-moz-focusring,\n[type=\"submit\"]:-moz-focusring {\n  outline: 1px dotted ButtonText;\n}\n\n/**\n * Change the border, margin, and padding in all browsers (opinionated).\n */\n\nfieldset {\n  border: 1px solid #c0c0c0;\n  margin: 0 2px;\n  padding: 0.35em 0.625em 0.75em;\n}\n\n/**\n * 1. Correct the text wrapping in Edge and IE.\n * 2. Correct the color inheritance from `fieldset` elements in IE.\n * 3. Remove the padding so developers are not caught out when they zero out\n *    `fieldset` elements in all browsers.\n */\n\nlegend {\n  box-sizing: border-box; /* 1 */\n  color: inherit; /* 2 */\n  display: table; /* 1 */\n  max-width: 100%; /* 1 */\n  padding: 0; /* 3 */\n  white-space: normal; /* 1 */\n}\n\n/**\n * 1. Add the correct display in IE 9-.\n * 2. Add the correct vertical alignment in Chrome, Firefox, and Opera.\n */\n\nprogress {\n  display: inline-block; /* 1 */\n  vertical-align: baseline; /* 2 */\n}\n\n/**\n * Remove the default vertical scrollbar in IE.\n */\n\ntextarea {\n  overflow: auto;\n}\n\n/**\n * 1. Add the correct box sizing in IE 10-.\n * 2. Remove the padding in IE 10-.\n */\n\n[type=\"checkbox\"],\n[type=\"radio\"] {\n  box-sizing: border-box; /* 1 */\n  padding: 0; /* 2 */\n}\n\n/**\n * Correct the cursor style of increment and decrement buttons in Chrome.\n */\n\n[type=\"number\"]::-webkit-inner-spin-button,\n[type=\"number\"]::-webkit-outer-spin-button {\n  height: auto;\n}\n\n/**\n * 1. Correct the odd appearance in Chrome and Safari.\n * 2. Correct the outline style in Safari.\n */\n\n[type=\"search\"] {\n  -webkit-appearance: textfield; /* 1 */\n  outline-offset: -2px; /* 2 */\n}\n\n/**\n * Remove the inner padding and cancel buttons in Chrome and Safari on macOS.\n */\n\n[type=\"search\"]::-webkit-search-cancel-button,\n[type=\"search\"]::-webkit-search-decoration {\n  -webkit-appearance: none;\n}\n\n/**\n * 1. Correct the inability to style clickable types in iOS and Safari.\n * 2. Change font properties to `inherit` in Safari.\n */\n\n::-webkit-file-upload-button {\n  -webkit-appearance: button; /* 1 */\n  font: inherit; /* 2 */\n}\n", "",{"version":3,"sources":["webpack://./src/reset.css"],"names":[],"mappings":"AAAA;;;CAGC;;AAED;;;;;;;;;;;;;CAaC,SAAS;CACT,UAAU;CACV,SAAS;CACT,eAAe;CACf,aAAa;CACb,wBAAwB;AACzB;AACA,gDAAgD;AAChD;;CAEC,cAAc;AACf;AACA;CACC,cAAc;AACf;AACA;CACC,gBAAgB;AACjB;AACA;CACC,YAAY;AACb;AACA;;CAEC,WAAW;CACX,aAAa;AACd;AACA;CACC,yBAAyB;CACzB,iBAAiB;AAClB;;AAEA,2EAA2E;;AAE3E;+EAC+E;;AAE/E;;;;;EAKE;;AAEF;EACE,uBAAuB,EAAE,MAAM;EAC/B,iBAAiB,EAAE,MAAM;EACzB,0BAA0B,EAAE,MAAM;EAClC,8BAA8B,EAAE,MAAM;AACxC;;AAEA;+EAC+E;;AAE/E;;;EAGE;;AAEF;;;;;EAKE,uBAAuB,EAAE,MAAM;EAC/B,eAAe,EAAE,MAAM;EACvB,iBAAiB,EAAE,MAAM;EACzB,SAAS,EAAE,MAAM;AACnB;;AAEA;;;EAGE;;AAEF;QACQ,MAAM;EACZ,iBAAiB;AACnB;;AAEA;;;EAGE;;AAEF;SACS,MAAM;EACb,oBAAoB;AACtB;;AAEA;;;;EAIE;;AAEF;;;;EAIE,0BAA0B,EAAE,MAAM;AACpC;;AAEA;;EAEE;;AAEF;;;;EAIE,kBAAkB;EAClB,UAAU;AACZ;;AAEA;;EAEE;;AAEF;;;;EAIE,8BAA8B;AAChC;;AAEA;;EAEE;;AAEF;EACE,yBAAyB;EACzB,aAAa;EACb,8BAA8B;AAChC;;AAEA;;;;;EAKE;;AAEF;EACE,sBAAsB,EAAE,MAAM;EAC9B,cAAc,EAAE,MAAM;EACtB,cAAc,EAAE,MAAM;EACtB,eAAe,EAAE,MAAM;EACvB,UAAU,EAAE,MAAM;EAClB,mBAAmB,EAAE,MAAM;AAC7B;;AAEA;;;EAGE;;AAEF;EACE,qBAAqB,EAAE,MAAM;EAC7B,wBAAwB,EAAE,MAAM;AAClC;;AAEA;;EAEE;;AAEF;EACE,cAAc;AAChB;;AAEA;;;EAGE;;AAEF;;EAEE,sBAAsB,EAAE,MAAM;EAC9B,UAAU,EAAE,MAAM;AACpB;;AAEA;;EAEE;;AAEF;;EAEE,YAAY;AACd;;AAEA;;;EAGE;;AAEF;EACE,6BAA6B,EAAE,MAAM;EACrC,oBAAoB,EAAE,MAAM;AAC9B;;AAEA;;EAEE;;AAEF;;EAEE,wBAAwB;AAC1B;;AAEA;;;EAGE;;AAEF;EACE,0BAA0B,EAAE,MAAM;EAClC,aAAa,EAAE,MAAM;AACvB","sourcesContent":["/* http://meyerweb.com/eric/tools/css/reset/\n   v2.0 | 20110126\n   License: none (public domain)\n*/\n\nhtml, body, div, span, applet, object, iframe,\nh1, h2, h3, h4, h5, h6, p, blockquote, pre,\na, abbr, acronym, address, big, cite, code,\ndel, dfn, em, img, ins, kbd, q, s, samp,\nsmall, strike, strong, sub, sup, tt, var,\nb, u, i, center,\ndl, dt, dd, ol, ul, li,\nfieldset, form, label, legend,\ntable, caption, tbody, tfoot, thead, tr, th, td,\narticle, aside, canvas, details, embed,\nfigure, figcaption, footer, header, hgroup,\nmenu, nav, output, ruby, section, summary,\ntime, mark, audio, video {\n\tmargin: 0;\n\tpadding: 0;\n\tborder: 0;\n\tfont-size: 100%;\n\tfont: inherit;\n\tvertical-align: baseline;\n}\n/* HTML5 display-role reset for older browsers */\narticle, aside, details, figcaption, figure,\nfooter, header, hgroup, menu, nav, section {\n\tdisplay: block;\n}\nbody {\n\tline-height: 1;\n}\nol, ul {\n\tlist-style: none;\n}\nblockquote, q {\n\tquotes: none;\n}\nblockquote:before, blockquote:after,\nq:before, q:after {\n\tcontent: '';\n\tcontent: none;\n}\ntable {\n\tborder-collapse: collapse;\n\tborder-spacing: 0;\n}\n\n/*! normalize.css v5.0.0 | MIT License | github.com/necolas/normalize.css */\n\n/* Document\n   ========================================================================== */\n\n/**\n * 1. Change the default font family in all browsers (opinionated).\n * 2. Correct the line height in all browsers.\n * 3. Prevent adjustments of font size after orientation changes in\n *    IE on Windows Phone and in iOS.\n */\n\nhtml {\n  font-family: sans-serif; /* 1 */\n  line-height: 1.15; /* 2 */\n  -ms-text-size-adjust: 100%; /* 3 */\n  -webkit-text-size-adjust: 100%; /* 3 */\n}\n\n/* Forms\n   ========================================================================== */\n\n/**\n * 1. Change the font styles in all browsers (opinionated).\n * 2. Remove the margin in Firefox and Safari.\n */\n\nbutton,\ninput,\noptgroup,\nselect,\ntextarea {\n  font-family: sans-serif; /* 1 */\n  font-size: 100%; /* 1 */\n  line-height: 1.15; /* 1 */\n  margin: 0; /* 2 */\n}\n\n/**\n * Show the overflow in IE.\n * 1. Show the overflow in Edge.\n */\n\nbutton,\ninput { /* 1 */\n  overflow: visible;\n}\n\n/**\n * Remove the inheritance of text transform in Edge, Firefox, and IE.\n * 1. Remove the inheritance of text transform in Firefox.\n */\n\nbutton,\nselect { /* 1 */\n  text-transform: none;\n}\n\n/**\n * 1. Prevent a WebKit bug where (2) destroys native `audio` and `video`\n *    controls in Android 4.\n * 2. Correct the inability to style clickable types in iOS and Safari.\n */\n\nbutton,\nhtml [type=\"button\"], /* 1 */\n[type=\"reset\"],\n[type=\"submit\"] {\n  -webkit-appearance: button; /* 2 */\n}\n\n/**\n * Remove the inner border and padding in Firefox.\n */\n\nbutton::-moz-focus-inner,\n[type=\"button\"]::-moz-focus-inner,\n[type=\"reset\"]::-moz-focus-inner,\n[type=\"submit\"]::-moz-focus-inner {\n  border-style: none;\n  padding: 0;\n}\n\n/**\n * Restore the focus styles unset by the previous rule.\n */\n\nbutton:-moz-focusring,\n[type=\"button\"]:-moz-focusring,\n[type=\"reset\"]:-moz-focusring,\n[type=\"submit\"]:-moz-focusring {\n  outline: 1px dotted ButtonText;\n}\n\n/**\n * Change the border, margin, and padding in all browsers (opinionated).\n */\n\nfieldset {\n  border: 1px solid #c0c0c0;\n  margin: 0 2px;\n  padding: 0.35em 0.625em 0.75em;\n}\n\n/**\n * 1. Correct the text wrapping in Edge and IE.\n * 2. Correct the color inheritance from `fieldset` elements in IE.\n * 3. Remove the padding so developers are not caught out when they zero out\n *    `fieldset` elements in all browsers.\n */\n\nlegend {\n  box-sizing: border-box; /* 1 */\n  color: inherit; /* 2 */\n  display: table; /* 1 */\n  max-width: 100%; /* 1 */\n  padding: 0; /* 3 */\n  white-space: normal; /* 1 */\n}\n\n/**\n * 1. Add the correct display in IE 9-.\n * 2. Add the correct vertical alignment in Chrome, Firefox, and Opera.\n */\n\nprogress {\n  display: inline-block; /* 1 */\n  vertical-align: baseline; /* 2 */\n}\n\n/**\n * Remove the default vertical scrollbar in IE.\n */\n\ntextarea {\n  overflow: auto;\n}\n\n/**\n * 1. Add the correct box sizing in IE 10-.\n * 2. Remove the padding in IE 10-.\n */\n\n[type=\"checkbox\"],\n[type=\"radio\"] {\n  box-sizing: border-box; /* 1 */\n  padding: 0; /* 2 */\n}\n\n/**\n * Correct the cursor style of increment and decrement buttons in Chrome.\n */\n\n[type=\"number\"]::-webkit-inner-spin-button,\n[type=\"number\"]::-webkit-outer-spin-button {\n  height: auto;\n}\n\n/**\n * 1. Correct the odd appearance in Chrome and Safari.\n * 2. Correct the outline style in Safari.\n */\n\n[type=\"search\"] {\n  -webkit-appearance: textfield; /* 1 */\n  outline-offset: -2px; /* 2 */\n}\n\n/**\n * Remove the inner padding and cancel buttons in Chrome and Safari on macOS.\n */\n\n[type=\"search\"]::-webkit-search-cancel-button,\n[type=\"search\"]::-webkit-search-decoration {\n  -webkit-appearance: none;\n}\n\n/**\n * 1. Correct the inability to style clickable types in iOS and Safari.\n * 2. Change font properties to `inherit` in Safari.\n */\n\n::-webkit-file-upload-button {\n  -webkit-appearance: button; /* 1 */\n  font: inherit; /* 2 */\n}\n"],"sourceRoot":""}]);
// Exports
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (___CSS_LOADER_EXPORT___);


/***/ }),

/***/ "./node_modules/css-loader/dist/cjs.js!./src/resources/elements/controller-view.css":
/*!******************************************************************************************!*\
  !*** ./node_modules/css-loader/dist/cjs.js!./src/resources/elements/controller-view.css ***!
  \******************************************************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => __WEBPACK_DEFAULT_EXPORT__
/* harmony export */ });
/* harmony import */ var _node_modules_css_loader_dist_runtime_cssWithMappingToString_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../node_modules/css-loader/dist/runtime/cssWithMappingToString.js */ "./node_modules/css-loader/dist/runtime/cssWithMappingToString.js");
/* harmony import */ var _node_modules_css_loader_dist_runtime_cssWithMappingToString_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_node_modules_css_loader_dist_runtime_cssWithMappingToString_js__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../node_modules/css-loader/dist/runtime/api.js */ "./node_modules/css-loader/dist/runtime/api.js");
/* harmony import */ var _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1__);
// Imports


var ___CSS_LOADER_EXPORT___ = _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1___default()((_node_modules_css_loader_dist_runtime_cssWithMappingToString_js__WEBPACK_IMPORTED_MODULE_0___default()));
// Module
___CSS_LOADER_EXPORT___.push([module.id, "controller-view .category-name {\n  font-size: 10px;\n  margin-bottom: 2px;\n  margin-top: 2px;\n  color: black;\n}\n\n.dark controller-view .category-name {\n  font-size: 10px;\n  margin-bottom: 2px;\n  margin-top: 2px;\n  color: white;\n}\n", "",{"version":3,"sources":["webpack://./src/resources/elements/controller-view.css"],"names":[],"mappings":"AAAA;EACE,eAAe;EACf,kBAAkB;EAClB,eAAe;EACf,YAAY;AACd;;AAEA;EACE,eAAe;EACf,kBAAkB;EAClB,eAAe;EACf,YAAY;AACd","sourcesContent":["controller-view .category-name {\n  font-size: 10px;\n  margin-bottom: 2px;\n  margin-top: 2px;\n  color: black;\n}\n\n.dark controller-view .category-name {\n  font-size: 10px;\n  margin-bottom: 2px;\n  margin-top: 2px;\n  color: white;\n}\n"],"sourceRoot":""}]);
// Exports
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (___CSS_LOADER_EXPORT___);


/***/ }),

/***/ "./node_modules/css-loader/dist/cjs.js!./src/resources/elements/debug-group.css":
/*!**************************************************************************************!*\
  !*** ./node_modules/css-loader/dist/cjs.js!./src/resources/elements/debug-group.css ***!
  \**************************************************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => __WEBPACK_DEFAULT_EXPORT__
/* harmony export */ });
/* harmony import */ var _node_modules_css_loader_dist_runtime_cssWithMappingToString_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../node_modules/css-loader/dist/runtime/cssWithMappingToString.js */ "./node_modules/css-loader/dist/runtime/cssWithMappingToString.js");
/* harmony import */ var _node_modules_css_loader_dist_runtime_cssWithMappingToString_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_node_modules_css_loader_dist_runtime_cssWithMappingToString_js__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../node_modules/css-loader/dist/runtime/api.js */ "./node_modules/css-loader/dist/runtime/api.js");
/* harmony import */ var _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1__);
// Imports


var ___CSS_LOADER_EXPORT___ = _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1___default()((_node_modules_css_loader_dist_runtime_cssWithMappingToString_js__WEBPACK_IMPORTED_MODULE_0___default()));
// Module
___CSS_LOADER_EXPORT___.push([module.id, "debug-group .header {\n  font-weight: normal;\n  font-size: 12px;\n  margin: 0;\n  padding: 4px;\n  background: #f4f4f4;\n  border-bottom: 1px solid rgba(0, 0, 0, 0.25);\n  border-top: 1px solid rgba(0, 0, 0, 0.25);\n}\n\n.dark debug-group .header {\n  color: #989898;\n  background: #2a2a2a;\n  border-bottom: 1px solid #5c5c5c;\n  border-top: 1px solid #3d3d3d;\n}\n\ndebug-group .content {\n  margin: 4px;\n}\n\n.dark debug-group .content {\n  background: #202124;\n}\n", "",{"version":3,"sources":["webpack://./src/resources/elements/debug-group.css"],"names":[],"mappings":"AAAA;EACE,mBAAmB;EACnB,eAAe;EACf,SAAS;EACT,YAAY;EACZ,mBAAmB;EACnB,4CAA4C;EAC5C,yCAAyC;AAC3C;;AAEA;EACE,cAAc;EACd,mBAAmB;EACnB,gCAAgC;EAChC,6BAA6B;AAC/B;;AAEA;EACE,WAAW;AACb;;AAEA;EACE,mBAAmB;AACrB","sourcesContent":["debug-group .header {\n  font-weight: normal;\n  font-size: 12px;\n  margin: 0;\n  padding: 4px;\n  background: #f4f4f4;\n  border-bottom: 1px solid rgba(0, 0, 0, 0.25);\n  border-top: 1px solid rgba(0, 0, 0, 0.25);\n}\n\n.dark debug-group .header {\n  color: #989898;\n  background: #2a2a2a;\n  border-bottom: 1px solid #5c5c5c;\n  border-top: 1px solid #3d3d3d;\n}\n\ndebug-group .content {\n  margin: 4px;\n}\n\n.dark debug-group .content {\n  background: #202124;\n}\n"],"sourceRoot":""}]);
// Exports
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (___CSS_LOADER_EXPORT___);


/***/ }),

/***/ "./node_modules/css-loader/dist/cjs.js!./src/resources/elements/property-view.css":
/*!****************************************************************************************!*\
  !*** ./node_modules/css-loader/dist/cjs.js!./src/resources/elements/property-view.css ***!
  \****************************************************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => __WEBPACK_DEFAULT_EXPORT__
/* harmony export */ });
/* harmony import */ var _node_modules_css_loader_dist_runtime_cssWithMappingToString_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../node_modules/css-loader/dist/runtime/cssWithMappingToString.js */ "./node_modules/css-loader/dist/runtime/cssWithMappingToString.js");
/* harmony import */ var _node_modules_css_loader_dist_runtime_cssWithMappingToString_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_node_modules_css_loader_dist_runtime_cssWithMappingToString_js__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../node_modules/css-loader/dist/runtime/api.js */ "./node_modules/css-loader/dist/runtime/api.js");
/* harmony import */ var _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1__);
// Imports


var ___CSS_LOADER_EXPORT___ = _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1___default()((_node_modules_css_loader_dist_runtime_cssWithMappingToString_js__WEBPACK_IMPORTED_MODULE_0___default()));
// Module
___CSS_LOADER_EXPORT___.push([module.id, "property-view {\n  padding-top: 2px;\n  padding-bottom: 2px;\n  display: block;\n}\n\nproperty-view .arrow {\n  font-size: 10px;\n  color: dimgray;\n  cursor: default;\n}\n\nproperty-view .arrow .right {\n  margin-right: 1px;\n}\n\nproperty-view .property-line {\n  white-space: nowrap;\n}\n\nproperty-view .property-name {\n  font-size: 12px;\n  color: purple;\n  font-family: monospace;\n  margin-left: 1px;\n}\n\n.dark property-view .property-name {\n  color: #34c7bb;\n}\nproperty-view .value-container {\n  position: relative;\n}\n\nproperty-view .property-editor {\n  font-family: monospace;\n  font-size: 12px;\n  margin: 0;\n  height: 12px;\n  outline: none;\n  border: 1px solid darkgray;\n  box-shadow: 0 0 5px rgba(0, 0, 0, 0.5);\n  position: absolute;\n  top: 0;\n  left: 2px;\n  padding: 0 0 0 2px;\n}\n\nproperty-view .property-value,\nproperty-view .token-colon {\n  font-size: 12px;\n  color: dimgray;\n  font-family: monospace;\n}\n\nproperty-view .property-value.null,\nproperty-view .property-value.undefined {\n  color: dimgray;\n}\n\nproperty-view .property-value.boolean {\n  color: deeppink;\n}\n\nproperty-view .property-value.string {\n  color: red;\n  white-space: nowrap;\n}\n.dark property-view .property-value.string {\n  color: #cbcbcb;\n}\n\nproperty-view .property-value.number {\n  color: blue;\n}\n\n.dark property-view .property-value.number {\n  color: #59a6ca;\n}\n\nproperty-view .property-value.array {\n  color: black;\n}\n\n.dark property-view .property-value.array {\n  color: #cbcbcb;\n}\n\nproperty-view .property-value.object,\nproperty-view .property-value.node {\n  color: black;\n}\n\n.dark property-view .property-value.object,\nproperty-view .property-value.node {\n  color: #cbcbcb;\n}\n\nproperty-view ul.properties {\n  margin-left: 16px;\n}\n\nproperty-view .no-properties {\n  margin-top: 4px;\n  font-size: 10px;\n}\n\n.dark property-view .no-properties {\n  color: #989898;\n}\n", "",{"version":3,"sources":["webpack://./src/resources/elements/property-view.css"],"names":[],"mappings":"AAAA;EACE,gBAAgB;EAChB,mBAAmB;EACnB,cAAc;AAChB;;AAEA;EACE,eAAe;EACf,cAAc;EACd,eAAe;AACjB;;AAEA;EACE,iBAAiB;AACnB;;AAEA;EACE,mBAAmB;AACrB;;AAEA;EACE,eAAe;EACf,aAAa;EACb,sBAAsB;EACtB,gBAAgB;AAClB;;AAEA;EACE,cAAc;AAChB;AACA;EACE,kBAAkB;AACpB;;AAEA;EACE,sBAAsB;EACtB,eAAe;EACf,SAAS;EACT,YAAY;EACZ,aAAa;EACb,0BAA0B;EAC1B,sCAAsC;EACtC,kBAAkB;EAClB,MAAM;EACN,SAAS;EACT,kBAAkB;AACpB;;AAEA;;EAEE,eAAe;EACf,cAAc;EACd,sBAAsB;AACxB;;AAEA;;EAEE,cAAc;AAChB;;AAEA;EACE,eAAe;AACjB;;AAEA;EACE,UAAU;EACV,mBAAmB;AACrB;AACA;EACE,cAAc;AAChB;;AAEA;EACE,WAAW;AACb;;AAEA;EACE,cAAc;AAChB;;AAEA;EACE,YAAY;AACd;;AAEA;EACE,cAAc;AAChB;;AAEA;;EAEE,YAAY;AACd;;AAEA;;EAEE,cAAc;AAChB;;AAEA;EACE,iBAAiB;AACnB;;AAEA;EACE,eAAe;EACf,eAAe;AACjB;;AAEA;EACE,cAAc;AAChB","sourcesContent":["property-view {\n  padding-top: 2px;\n  padding-bottom: 2px;\n  display: block;\n}\n\nproperty-view .arrow {\n  font-size: 10px;\n  color: dimgray;\n  cursor: default;\n}\n\nproperty-view .arrow .right {\n  margin-right: 1px;\n}\n\nproperty-view .property-line {\n  white-space: nowrap;\n}\n\nproperty-view .property-name {\n  font-size: 12px;\n  color: purple;\n  font-family: monospace;\n  margin-left: 1px;\n}\n\n.dark property-view .property-name {\n  color: #34c7bb;\n}\nproperty-view .value-container {\n  position: relative;\n}\n\nproperty-view .property-editor {\n  font-family: monospace;\n  font-size: 12px;\n  margin: 0;\n  height: 12px;\n  outline: none;\n  border: 1px solid darkgray;\n  box-shadow: 0 0 5px rgba(0, 0, 0, 0.5);\n  position: absolute;\n  top: 0;\n  left: 2px;\n  padding: 0 0 0 2px;\n}\n\nproperty-view .property-value,\nproperty-view .token-colon {\n  font-size: 12px;\n  color: dimgray;\n  font-family: monospace;\n}\n\nproperty-view .property-value.null,\nproperty-view .property-value.undefined {\n  color: dimgray;\n}\n\nproperty-view .property-value.boolean {\n  color: deeppink;\n}\n\nproperty-view .property-value.string {\n  color: red;\n  white-space: nowrap;\n}\n.dark property-view .property-value.string {\n  color: #cbcbcb;\n}\n\nproperty-view .property-value.number {\n  color: blue;\n}\n\n.dark property-view .property-value.number {\n  color: #59a6ca;\n}\n\nproperty-view .property-value.array {\n  color: black;\n}\n\n.dark property-view .property-value.array {\n  color: #cbcbcb;\n}\n\nproperty-view .property-value.object,\nproperty-view .property-value.node {\n  color: black;\n}\n\n.dark property-view .property-value.object,\nproperty-view .property-value.node {\n  color: #cbcbcb;\n}\n\nproperty-view ul.properties {\n  margin-left: 16px;\n}\n\nproperty-view .no-properties {\n  margin-top: 4px;\n  font-size: 10px;\n}\n\n.dark property-view .no-properties {\n  color: #989898;\n}\n"],"sourceRoot":""}]);
// Exports
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (___CSS_LOADER_EXPORT___);


/***/ }),

/***/ "./node_modules/css-loader/dist/runtime/api.js":
/*!*****************************************************!*\
  !*** ./node_modules/css-loader/dist/runtime/api.js ***!
  \*****************************************************/
/***/ ((module) => {



/*
  MIT License http://www.opensource.org/licenses/mit-license.php
  Author Tobias Koppers @sokra
*/
// css base code, injected by the css-loader
// eslint-disable-next-line func-names
module.exports = function (cssWithMappingToString) {
  var list = []; // return the list of modules as css string

  list.toString = function toString() {
    return this.map(function (item) {
      var content = cssWithMappingToString(item);

      if (item[2]) {
        return "@media ".concat(item[2], " {").concat(content, "}");
      }

      return content;
    }).join('');
  }; // import a list of modules into the list
  // eslint-disable-next-line func-names


  list.i = function (modules, mediaQuery, dedupe) {
    if (typeof modules === 'string') {
      // eslint-disable-next-line no-param-reassign
      modules = [[null, modules, '']];
    }

    var alreadyImportedModules = {};

    if (dedupe) {
      for (var i = 0; i < this.length; i++) {
        // eslint-disable-next-line prefer-destructuring
        var id = this[i][0];

        if (id != null) {
          alreadyImportedModules[id] = true;
        }
      }
    }

    for (var _i = 0; _i < modules.length; _i++) {
      var item = [].concat(modules[_i]);

      if (dedupe && alreadyImportedModules[item[0]]) {
        // eslint-disable-next-line no-continue
        continue;
      }

      if (mediaQuery) {
        if (!item[2]) {
          item[2] = mediaQuery;
        } else {
          item[2] = "".concat(mediaQuery, " and ").concat(item[2]);
        }
      }

      list.push(item);
    }
  };

  return list;
};

/***/ }),

/***/ "./node_modules/css-loader/dist/runtime/cssWithMappingToString.js":
/*!************************************************************************!*\
  !*** ./node_modules/css-loader/dist/runtime/cssWithMappingToString.js ***!
  \************************************************************************/
/***/ ((module) => {



function _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }

function _nonIterableRest() { throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); }

function _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === "string") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === "Object" && o.constructor) n = o.constructor.name; if (n === "Map" || n === "Set") return Array.from(o); if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }

function _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }

function _iterableToArrayLimit(arr, i) { if (typeof Symbol === "undefined" || !(Symbol.iterator in Object(arr))) return; var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i["return"] != null) _i["return"](); } finally { if (_d) throw _e; } } return _arr; }

function _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }

module.exports = function cssWithMappingToString(item) {
  var _item = _slicedToArray(item, 4),
      content = _item[1],
      cssMapping = _item[3];

  if (typeof btoa === 'function') {
    // eslint-disable-next-line no-undef
    var base64 = btoa(unescape(encodeURIComponent(JSON.stringify(cssMapping))));
    var data = "sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(base64);
    var sourceMapping = "/*# ".concat(data, " */");
    var sourceURLs = cssMapping.sources.map(function (source) {
      return "/*# sourceURL=".concat(cssMapping.sourceRoot || '').concat(source, " */");
    });
    return [content].concat(sourceURLs).concat([sourceMapping]).join('\n');
  }

  return [content].join('\n');
};

/***/ }),

/***/ "./src/app.css":
/*!*********************!*\
  !*** ./src/app.css ***!
  \*********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => __WEBPACK_DEFAULT_EXPORT__
/* harmony export */ });
/* harmony import */ var _node_modules_style_loader_dist_runtime_injectStylesIntoStyleTag_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! !../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js */ "./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js");
/* harmony import */ var _node_modules_style_loader_dist_runtime_injectStylesIntoStyleTag_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_node_modules_style_loader_dist_runtime_injectStylesIntoStyleTag_js__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _node_modules_css_loader_dist_cjs_js_app_css__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! !!../node_modules/css-loader/dist/cjs.js!./app.css */ "./node_modules/css-loader/dist/cjs.js!./src/app.css");

            

var options = {};

options.insert = "head";
options.singleton = false;

var update = _node_modules_style_loader_dist_runtime_injectStylesIntoStyleTag_js__WEBPACK_IMPORTED_MODULE_0___default()(_node_modules_css_loader_dist_cjs_js_app_css__WEBPACK_IMPORTED_MODULE_1__.default, options);



/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (_node_modules_css_loader_dist_cjs_js_app_css__WEBPACK_IMPORTED_MODULE_1__.default.locals || {});

/***/ }),

/***/ "./src/reset.css":
/*!***********************!*\
  !*** ./src/reset.css ***!
  \***********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => __WEBPACK_DEFAULT_EXPORT__
/* harmony export */ });
/* harmony import */ var _node_modules_style_loader_dist_runtime_injectStylesIntoStyleTag_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! !../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js */ "./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js");
/* harmony import */ var _node_modules_style_loader_dist_runtime_injectStylesIntoStyleTag_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_node_modules_style_loader_dist_runtime_injectStylesIntoStyleTag_js__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _node_modules_css_loader_dist_cjs_js_reset_css__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! !!../node_modules/css-loader/dist/cjs.js!./reset.css */ "./node_modules/css-loader/dist/cjs.js!./src/reset.css");

            

var options = {};

options.insert = "head";
options.singleton = false;

var update = _node_modules_style_loader_dist_runtime_injectStylesIntoStyleTag_js__WEBPACK_IMPORTED_MODULE_0___default()(_node_modules_css_loader_dist_cjs_js_reset_css__WEBPACK_IMPORTED_MODULE_1__.default, options);



/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (_node_modules_css_loader_dist_cjs_js_reset_css__WEBPACK_IMPORTED_MODULE_1__.default.locals || {});

/***/ }),

/***/ "./src/resources/elements/controller-view.css":
/*!****************************************************!*\
  !*** ./src/resources/elements/controller-view.css ***!
  \****************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => __WEBPACK_DEFAULT_EXPORT__
/* harmony export */ });
/* harmony import */ var _node_modules_style_loader_dist_runtime_injectStylesIntoStyleTag_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! !../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js */ "./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js");
/* harmony import */ var _node_modules_style_loader_dist_runtime_injectStylesIntoStyleTag_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_node_modules_style_loader_dist_runtime_injectStylesIntoStyleTag_js__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _node_modules_css_loader_dist_cjs_js_controller_view_css__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! !!../../../node_modules/css-loader/dist/cjs.js!./controller-view.css */ "./node_modules/css-loader/dist/cjs.js!./src/resources/elements/controller-view.css");

            

var options = {};

options.insert = "head";
options.singleton = false;

var update = _node_modules_style_loader_dist_runtime_injectStylesIntoStyleTag_js__WEBPACK_IMPORTED_MODULE_0___default()(_node_modules_css_loader_dist_cjs_js_controller_view_css__WEBPACK_IMPORTED_MODULE_1__.default, options);



/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (_node_modules_css_loader_dist_cjs_js_controller_view_css__WEBPACK_IMPORTED_MODULE_1__.default.locals || {});

/***/ }),

/***/ "./src/resources/elements/debug-group.css":
/*!************************************************!*\
  !*** ./src/resources/elements/debug-group.css ***!
  \************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => __WEBPACK_DEFAULT_EXPORT__
/* harmony export */ });
/* harmony import */ var _node_modules_style_loader_dist_runtime_injectStylesIntoStyleTag_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! !../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js */ "./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js");
/* harmony import */ var _node_modules_style_loader_dist_runtime_injectStylesIntoStyleTag_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_node_modules_style_loader_dist_runtime_injectStylesIntoStyleTag_js__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _node_modules_css_loader_dist_cjs_js_debug_group_css__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! !!../../../node_modules/css-loader/dist/cjs.js!./debug-group.css */ "./node_modules/css-loader/dist/cjs.js!./src/resources/elements/debug-group.css");

            

var options = {};

options.insert = "head";
options.singleton = false;

var update = _node_modules_style_loader_dist_runtime_injectStylesIntoStyleTag_js__WEBPACK_IMPORTED_MODULE_0___default()(_node_modules_css_loader_dist_cjs_js_debug_group_css__WEBPACK_IMPORTED_MODULE_1__.default, options);



/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (_node_modules_css_loader_dist_cjs_js_debug_group_css__WEBPACK_IMPORTED_MODULE_1__.default.locals || {});

/***/ }),

/***/ "./src/resources/elements/property-view.css":
/*!**************************************************!*\
  !*** ./src/resources/elements/property-view.css ***!
  \**************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => __WEBPACK_DEFAULT_EXPORT__
/* harmony export */ });
/* harmony import */ var _node_modules_style_loader_dist_runtime_injectStylesIntoStyleTag_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! !../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js */ "./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js");
/* harmony import */ var _node_modules_style_loader_dist_runtime_injectStylesIntoStyleTag_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_node_modules_style_loader_dist_runtime_injectStylesIntoStyleTag_js__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _node_modules_css_loader_dist_cjs_js_property_view_css__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! !!../../../node_modules/css-loader/dist/cjs.js!./property-view.css */ "./node_modules/css-loader/dist/cjs.js!./src/resources/elements/property-view.css");

            

var options = {};

options.insert = "head";
options.singleton = false;

var update = _node_modules_style_loader_dist_runtime_injectStylesIntoStyleTag_js__WEBPACK_IMPORTED_MODULE_0___default()(_node_modules_css_loader_dist_cjs_js_property_view_css__WEBPACK_IMPORTED_MODULE_1__.default, options);



/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (_node_modules_css_loader_dist_cjs_js_property_view_css__WEBPACK_IMPORTED_MODULE_1__.default.locals || {});

/***/ }),

/***/ "./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js":
/*!****************************************************************************!*\
  !*** ./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js ***!
  \****************************************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {



var isOldIE = function isOldIE() {
  var memo;
  return function memorize() {
    if (typeof memo === 'undefined') {
      // Test for IE <= 9 as proposed by Browserhacks
      // @see http://browserhacks.com/#hack-e71d8692f65334173fee715c222cb805
      // Tests for existence of standard globals is to allow style-loader
      // to operate correctly into non-standard environments
      // @see https://github.com/webpack-contrib/style-loader/issues/177
      memo = Boolean(window && document && document.all && !window.atob);
    }

    return memo;
  };
}();

var getTarget = function getTarget() {
  var memo = {};
  return function memorize(target) {
    if (typeof memo[target] === 'undefined') {
      var styleTarget = document.querySelector(target); // Special case to return head of iframe instead of iframe itself

      if (window.HTMLIFrameElement && styleTarget instanceof window.HTMLIFrameElement) {
        try {
          // This will throw an exception if access to iframe is blocked
          // due to cross-origin restrictions
          styleTarget = styleTarget.contentDocument.head;
        } catch (e) {
          // istanbul ignore next
          styleTarget = null;
        }
      }

      memo[target] = styleTarget;
    }

    return memo[target];
  };
}();

var stylesInDom = [];

function getIndexByIdentifier(identifier) {
  var result = -1;

  for (var i = 0; i < stylesInDom.length; i++) {
    if (stylesInDom[i].identifier === identifier) {
      result = i;
      break;
    }
  }

  return result;
}

function modulesToDom(list, options) {
  var idCountMap = {};
  var identifiers = [];

  for (var i = 0; i < list.length; i++) {
    var item = list[i];
    var id = options.base ? item[0] + options.base : item[0];
    var count = idCountMap[id] || 0;
    var identifier = "".concat(id, " ").concat(count);
    idCountMap[id] = count + 1;
    var index = getIndexByIdentifier(identifier);
    var obj = {
      css: item[1],
      media: item[2],
      sourceMap: item[3]
    };

    if (index !== -1) {
      stylesInDom[index].references++;
      stylesInDom[index].updater(obj);
    } else {
      stylesInDom.push({
        identifier: identifier,
        updater: addStyle(obj, options),
        references: 1
      });
    }

    identifiers.push(identifier);
  }

  return identifiers;
}

function insertStyleElement(options) {
  var style = document.createElement('style');
  var attributes = options.attributes || {};

  if (typeof attributes.nonce === 'undefined') {
    var nonce =  true ? __webpack_require__.nc : 0;

    if (nonce) {
      attributes.nonce = nonce;
    }
  }

  Object.keys(attributes).forEach(function (key) {
    style.setAttribute(key, attributes[key]);
  });

  if (typeof options.insert === 'function') {
    options.insert(style);
  } else {
    var target = getTarget(options.insert || 'head');

    if (!target) {
      throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");
    }

    target.appendChild(style);
  }

  return style;
}

function removeStyleElement(style) {
  // istanbul ignore if
  if (style.parentNode === null) {
    return false;
  }

  style.parentNode.removeChild(style);
}
/* istanbul ignore next  */


var replaceText = function replaceText() {
  var textStore = [];
  return function replace(index, replacement) {
    textStore[index] = replacement;
    return textStore.filter(Boolean).join('\n');
  };
}();

function applyToSingletonTag(style, index, remove, obj) {
  var css = remove ? '' : obj.media ? "@media ".concat(obj.media, " {").concat(obj.css, "}") : obj.css; // For old IE

  /* istanbul ignore if  */

  if (style.styleSheet) {
    style.styleSheet.cssText = replaceText(index, css);
  } else {
    var cssNode = document.createTextNode(css);
    var childNodes = style.childNodes;

    if (childNodes[index]) {
      style.removeChild(childNodes[index]);
    }

    if (childNodes.length) {
      style.insertBefore(cssNode, childNodes[index]);
    } else {
      style.appendChild(cssNode);
    }
  }
}

function applyToTag(style, options, obj) {
  var css = obj.css;
  var media = obj.media;
  var sourceMap = obj.sourceMap;

  if (media) {
    style.setAttribute('media', media);
  } else {
    style.removeAttribute('media');
  }

  if (sourceMap && typeof btoa !== 'undefined') {
    css += "\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))), " */");
  } // For old IE

  /* istanbul ignore if  */


  if (style.styleSheet) {
    style.styleSheet.cssText = css;
  } else {
    while (style.firstChild) {
      style.removeChild(style.firstChild);
    }

    style.appendChild(document.createTextNode(css));
  }
}

var singleton = null;
var singletonCounter = 0;

function addStyle(obj, options) {
  var style;
  var update;
  var remove;

  if (options.singleton) {
    var styleIndex = singletonCounter++;
    style = singleton || (singleton = insertStyleElement(options));
    update = applyToSingletonTag.bind(null, style, styleIndex, false);
    remove = applyToSingletonTag.bind(null, style, styleIndex, true);
  } else {
    style = insertStyleElement(options);
    update = applyToTag.bind(null, style, options);

    remove = function remove() {
      removeStyleElement(style);
    };
  }

  update(obj);
  return function updateStyle(newObj) {
    if (newObj) {
      if (newObj.css === obj.css && newObj.media === obj.media && newObj.sourceMap === obj.sourceMap) {
        return;
      }

      update(obj = newObj);
    } else {
      remove();
    }
  };
}

module.exports = function (list, options) {
  options = options || {}; // Force single-tag solution on IE6-9, which has a hard limit on the # of <style>
  // tags it will allow on a page

  if (!options.singleton && typeof options.singleton !== 'boolean') {
    options.singleton = isOldIE();
  }

  list = list || [];
  var lastIdentifiers = modulesToDom(list, options);
  return function update(newList) {
    newList = newList || [];

    if (Object.prototype.toString.call(newList) !== '[object Array]') {
      return;
    }

    for (var i = 0; i < lastIdentifiers.length; i++) {
      var identifier = lastIdentifiers[i];
      var index = getIndexByIdentifier(identifier);
      stylesInDom[index].references--;
    }

    var newLastIdentifiers = modulesToDom(newList, options);

    for (var _i = 0; _i < lastIdentifiers.length; _i++) {
      var _identifier = lastIdentifiers[_i];

      var _index = getIndexByIdentifier(_identifier);

      if (stylesInDom[_index].references === 0) {
        stylesInDom[_index].updater();

        stylesInDom.splice(_index, 1);
      }
    }

    lastIdentifiers = newLastIdentifiers;
  };
};

/***/ }),

/***/ "./src/app.ts":
/*!********************!*\
  !*** ./src/app.ts ***!
  \********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "StringifyValueConverter": () => /* binding */ StringifyValueConverter,
/* harmony export */   "App": () => /* binding */ App
/* harmony export */ });
/* harmony import */ var _app_html__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./app.html */ "./src/app.html");
/* harmony import */ var _aurelia_runtime_html__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @aurelia/runtime-html */ "./node_modules/@aurelia/runtime/dist/esm/index.js");
/* harmony import */ var _aurelia_runtime_html__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! aurelia */ "./node_modules/@aurelia/runtime-html/dist/esm/index.js");
/* harmony import */ var _backend_debug_host__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./backend/debug-host */ "./src/backend/debug-host.ts");
/* harmony import */ var aurelia__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! aurelia */ "./node_modules/@aurelia/kernel/dist/esm/index.js");
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param = (undefined && undefined.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};




let StringifyValueConverter = class StringifyValueConverter {
    toView(value) {
        return JSON.stringify(value);
    }
};
StringifyValueConverter = __decorate([
    (0,_aurelia_runtime_html__WEBPACK_IMPORTED_MODULE_2__.valueConverter)('stringify')
], StringifyValueConverter);

let App = class App {
    constructor(debugHost, plat) {
        this.debugHost = debugHost;
        this.plat = plat;
        this.isDarkTheme = false;
        this.JSON = JSON;
        this.selectedElement = undefined;
        this.selectedElementAttributes = undefined;
        this.allAureliaObjects = undefined;
    }
    attaching() {
        this.debugHost.attach(this);
        this.isDarkTheme = chrome?.devtools?.panels?.themeName === "dark";
        [].join();
        if (this.isDarkTheme) {
            document.querySelector('html').style.background = '#202124';
        }
    }
    get currentController() {
        return this.selectedElement;
    }
    valueChanged(element) {
        this.plat.queueMicrotask(() => this.debugHost.updateValues(element));
    }
};
App = __decorate([
    (0,_aurelia_runtime_html__WEBPACK_IMPORTED_MODULE_3__.customElement)({ ..._app_html__WEBPACK_IMPORTED_MODULE_0__, dependencies: [..._app_html__WEBPACK_IMPORTED_MODULE_0__.dependencies, StringifyValueConverter] }),
    (0,aurelia__WEBPACK_IMPORTED_MODULE_4__.inject)(),
    __param(1, _aurelia_runtime_html__WEBPACK_IMPORTED_MODULE_3__.IPlatform),
    __metadata("design:paramtypes", [_backend_debug_host__WEBPACK_IMPORTED_MODULE_1__.DebugHost, Object])
], App);



/***/ }),

/***/ "./src/backend/debug-host.ts":
/*!***********************************!*\
  !*** ./src/backend/debug-host.ts ***!
  \***********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "SelectionChanged": () => /* binding */ SelectionChanged,
/* harmony export */   "DebugHost": () => /* binding */ DebugHost
/* harmony export */ });
/* harmony import */ var aurelia__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! aurelia */ "./node_modules/@aurelia/kernel/dist/esm/index.js");
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};

class SelectionChanged {
    constructor(debugInfo) {
        this.debugInfo = debugInfo;
    }
}
let DebugHost = class DebugHost {
    attach(consumer) {
        this.consumer = consumer;
        if (chrome && chrome.devtools) {
            chrome.devtools.network.onNavigated.addListener(() => {
                chrome.devtools.inspectedWindow.eval(`window.__AURELIA_DEVTOOLS_GLOBAL_HOOK__.getAllInfo()`, (debugObject) => {
                    this.consumer.allAureliaObjects = debugObject;
                });
            });
            chrome.devtools.panels.elements.onSelectionChanged.addListener(() => {
                chrome.devtools.inspectedWindow.eval(`window.__AURELIA_DEVTOOLS_GLOBAL_HOOK__.getCustomElementInfo($0)`, (debugObject) => {
                    this.consumer.selectedElement = debugObject?.customElementInfo;
                    this.consumer.selectedElementAttributes = debugObject?.customAttributesInfo;
                });
            });
            chrome.devtools.inspectedWindow.eval(`window.__AURELIA_DEVTOOLS_GLOBAL_HOOK__.getAllInfo()`, (debugObject) => {
                this.consumer.allAureliaObjects = debugObject;
            });
        }
    }
    updateValues(value, property) {
        chrome.devtools.inspectedWindow.eval(`window.__AURELIA_DEVTOOLS_GLOBAL_HOOK__.updateValues(${JSON.stringify(value)}, ${JSON.stringify(property)})`, (debugObject) => {
            // this.consumer.selectedElement = debugObject;
        });
    }
    updateDebugValue(debugInfo) {
        let value = debugInfo.value;
        if (debugInfo.type === "string") {
            value = "'" + value + "'";
        }
        let code = `aureliaDebugger.updateValueForId(${debugInfo.debugId}, ${value})`;
        chrome.devtools.inspectedWindow.eval(code);
    }
    toggleDebugValueExpansion(debugInfo) {
        if (debugInfo.canExpand) {
            debugInfo.isExpanded = !debugInfo.isExpanded;
            if (debugInfo.isExpanded && !debugInfo.expandedValue) {
                let code = `window.__AURELIA_DEVTOOLS_GLOBAL_HOOK__.getExpandedDebugValueForId(${debugInfo.debugId});`;
                chrome.devtools.inspectedWindow.eval(code, (expandedValue) => {
                    debugInfo.expandedValue = expandedValue;
                    debugInfo.isExpanded = true;
                });
            }
        }
    }
};
DebugHost = __decorate([
    (0,aurelia__WEBPACK_IMPORTED_MODULE_0__.inject)()
], DebugHost);



/***/ }),

/***/ "./src/main.ts":
/*!*********************!*\
  !*** ./src/main.ts ***!
  \*********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony import */ var aurelia__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! aurelia */ "./node_modules/aurelia/dist/esm/index.js");
/* harmony import */ var aurelia__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! aurelia */ "./node_modules/@aurelia/kernel/dist/esm/index.js");
/* harmony import */ var aurelia__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @aurelia/runtime-html */ "./node_modules/@aurelia/runtime-html/dist/esm/index.js");
/* harmony import */ var _app__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./app */ "./src/app.ts");
/* harmony import */ var _resources_index__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./resources/index */ "./src/resources/index.ts");




const aurelia = new aurelia__WEBPACK_IMPORTED_MODULE_2__.default(aurelia__WEBPACK_IMPORTED_MODULE_3__.DI.createContainer()
    .register(aurelia__WEBPACK_IMPORTED_MODULE_3__.Registration.instance(aurelia__WEBPACK_IMPORTED_MODULE_4__.IPlatform, aurelia__WEBPACK_IMPORTED_MODULE_2__.PLATFORM), aurelia__WEBPACK_IMPORTED_MODULE_4__.StandardConfiguration, _resources_index__WEBPACK_IMPORTED_MODULE_1__)).app(_app__WEBPACK_IMPORTED_MODULE_0__.App);
aurelia.start();


/***/ }),

/***/ "./src/resources/elements/debug-group.ts":
/*!***********************************************!*\
  !*** ./src/resources/elements/debug-group.ts ***!
  \***********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "DebugGroup": () => /* binding */ DebugGroup
/* harmony export */ });
/* harmony import */ var _debug_group_html__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./debug-group.html */ "./src/resources/elements/debug-group.html");
/* harmony import */ var aurelia__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! aurelia */ "./node_modules/@aurelia/runtime-html/dist/esm/index.js");
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};



let DebugGroup = class DebugGroup {
};
__decorate([
    aurelia__WEBPACK_IMPORTED_MODULE_1__.bindable,
    __metadata("design:type", String)
], DebugGroup.prototype, "heading", void 0);
DebugGroup = __decorate([
    (0,aurelia__WEBPACK_IMPORTED_MODULE_1__.customElement)(_debug_group_html__WEBPACK_IMPORTED_MODULE_0__)
], DebugGroup);



/***/ }),

/***/ "./src/resources/elements/property-view.ts":
/*!*************************************************!*\
  !*** ./src/resources/elements/property-view.ts ***!
  \*************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "PropertyView": () => /* binding */ PropertyView
/* harmony export */ });
/* harmony import */ var _property_view_html__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./property-view.html */ "./src/resources/elements/property-view.html");
/* harmony import */ var aurelia__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! aurelia */ "./node_modules/@aurelia/runtime-html/dist/esm/index.js");
/* harmony import */ var aurelia__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! aurelia */ "./node_modules/@aurelia/kernel/dist/esm/index.js");
/* harmony import */ var _backend_debug_host__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../backend/debug-host */ "./src/backend/debug-host.ts");
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param = (undefined && undefined.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};




const editableTypes = ['string', 'number', 'boolean', 'bigint'];
let PropertyView = class PropertyView {
    constructor(debugHost, platform) {
        this.debugHost = debugHost;
        this.platform = platform;
    }
    beginEditing() {
        if (editableTypes.some(x => x === this.property?.type || this.property.value == null)) {
            this.property.isEditing = true;
            this.platform.queueMicrotask(() => {
                this.editor.focus();
                this.editor.select();
            });
        }
    }
    keyup(e) {
        if (e.code === 'Enter') {
            this.endEditing();
        }
        if (this.property.type === 'undefined') {
            this.property.type = 'string';
        }
        this.platform.queueMicrotask(() => this.debugHost.updateValues(this.controller, this.property));
        return true;
    }
    endEditing() {
        this.property.isEditing = false;
    }
};
__decorate([
    aurelia__WEBPACK_IMPORTED_MODULE_2__.bindable,
    __metadata("design:type", Object)
], PropertyView.prototype, "property", void 0);
__decorate([
    aurelia__WEBPACK_IMPORTED_MODULE_2__.bindable,
    __metadata("design:type", Object)
], PropertyView.prototype, "controller", void 0);
PropertyView = __decorate([
    (0,aurelia__WEBPACK_IMPORTED_MODULE_2__.customElement)(_property_view_html__WEBPACK_IMPORTED_MODULE_0__),
    (0,aurelia__WEBPACK_IMPORTED_MODULE_3__.inject)(),
    __param(1, aurelia__WEBPACK_IMPORTED_MODULE_2__.IPlatform),
    __metadata("design:paramtypes", [_backend_debug_host__WEBPACK_IMPORTED_MODULE_1__.DebugHost, Object])
], PropertyView);



/***/ }),

/***/ "./src/resources/index.ts":
/*!********************************!*\
  !*** ./src/resources/index.ts ***!
  \********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "DebugGroup": () => /* reexport safe */ _elements_debug_group__WEBPACK_IMPORTED_MODULE_0__.DebugGroup,
/* harmony export */   "PropertyView": () => /* reexport safe */ _elements_property_view__WEBPACK_IMPORTED_MODULE_1__.PropertyView,
/* harmony export */   "t": () => /* reexport module object */ _elements_aurelia_logo_html__WEBPACK_IMPORTED_MODULE_2__,
/* harmony export */   "t2": () => /* reexport module object */ _elements_controller_view_html__WEBPACK_IMPORTED_MODULE_3__
/* harmony export */ });
/* harmony import */ var _elements_debug_group__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./elements/debug-group */ "./src/resources/elements/debug-group.ts");
/* harmony import */ var _elements_property_view__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./elements/property-view */ "./src/resources/elements/property-view.ts");
/* harmony import */ var _elements_aurelia_logo_html__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./elements/aurelia-logo.html */ "./src/resources/elements/aurelia-logo.html");
/* harmony import */ var _elements_controller_view_html__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./elements/controller-view.html */ "./src/resources/elements/controller-view.html");






/***/ })

/******/ 	});
/************************************************************************/
/******/ 	// The module cache
/******/ 	var __webpack_module_cache__ = {};
/******/ 	
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/ 		// Check if module is in cache
/******/ 		if(__webpack_module_cache__[moduleId]) {
/******/ 			return __webpack_module_cache__[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = __webpack_module_cache__[moduleId] = {
/******/ 			id: moduleId,
/******/ 			// no module.loaded needed
/******/ 			exports: {}
/******/ 		};
/******/ 	
/******/ 		// Execute the module function
/******/ 		__webpack_modules__[moduleId](module, module.exports, __webpack_require__);
/******/ 	
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/ 	
/************************************************************************/
/******/ 	/* webpack/runtime/compat get default export */
/******/ 	(() => {
/******/ 		// getDefaultExport function for compatibility with non-harmony modules
/******/ 		__webpack_require__.n = (module) => {
/******/ 			var getter = module && module.__esModule ?
/******/ 				() => module['default'] :
/******/ 				() => module;
/******/ 			__webpack_require__.d(getter, { a: getter });
/******/ 			return getter;
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/define property getters */
/******/ 	(() => {
/******/ 		// define getter functions for harmony exports
/******/ 		__webpack_require__.d = (exports, definition) => {
/******/ 			for(var key in definition) {
/******/ 				if(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {
/******/ 					Object.defineProperty(exports, key, { enumerable: true, get: definition[key] });
/******/ 				}
/******/ 			}
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/hasOwnProperty shorthand */
/******/ 	(() => {
/******/ 		__webpack_require__.o = (obj, prop) => Object.prototype.hasOwnProperty.call(obj, prop)
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/make namespace object */
/******/ 	(() => {
/******/ 		// define __esModule on exports
/******/ 		__webpack_require__.r = (exports) => {
/******/ 			if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 				Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 			}
/******/ 			Object.defineProperty(exports, '__esModule', { value: true });
/******/ 		};
/******/ 	})();
/******/ 	
/************************************************************************/
/******/ 	// module exports must be returned from runtime so entry inlining is disabled
/******/ 	// startup
/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__("./src/main.ts");
/******/ })()
;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9bbmFtZV0vLi9ub2RlX21vZHVsZXMvQGF1cmVsaWEvZmV0Y2gtY2xpZW50L2Rpc3QvZXNtL2luZGV4LmpzIiwid2VicGFjazovL1tuYW1lXS8uL25vZGVfbW9kdWxlcy9AYXVyZWxpYS9rZXJuZWwvZGlzdC9lc20vaW5kZXguanMiLCJ3ZWJwYWNrOi8vW25hbWVdLy4vbm9kZV9tb2R1bGVzL0BhdXJlbGlhL21ldGFkYXRhL2Rpc3QvZXNtL2luZGV4LmpzIiwid2VicGFjazovL1tuYW1lXS8uL25vZGVfbW9kdWxlcy9AYXVyZWxpYS9wbGF0Zm9ybS1icm93c2VyL2Rpc3QvZXNtL2luZGV4LmpzIiwid2VicGFjazovL1tuYW1lXS8uL25vZGVfbW9kdWxlcy9AYXVyZWxpYS9wbGF0Zm9ybS9kaXN0L2VzbS9pbmRleC5qcyIsIndlYnBhY2s6Ly9bbmFtZV0vLi9ub2RlX21vZHVsZXMvQGF1cmVsaWEvcm91dGUtcmVjb2duaXplci9kaXN0L2VzbS9pbmRleC5qcyIsIndlYnBhY2s6Ly9bbmFtZV0vLi9ub2RlX21vZHVsZXMvQGF1cmVsaWEvcm91dGVyL2Rpc3QvZXNtL2luZGV4LmpzIiwid2VicGFjazovL1tuYW1lXS8uL25vZGVfbW9kdWxlcy9AYXVyZWxpYS9ydW50aW1lLWh0bWwvZGlzdC9lc20vaW5kZXguanMiLCJ3ZWJwYWNrOi8vW25hbWVdLy4vbm9kZV9tb2R1bGVzL0BhdXJlbGlhL3J1bnRpbWUvZGlzdC9lc20vaW5kZXguanMiLCJ3ZWJwYWNrOi8vW25hbWVdLy4vc3JjL2FwcC5odG1sIiwid2VicGFjazovL1tuYW1lXS8uL3NyYy9yZXNvdXJjZXMvZWxlbWVudHMvYXVyZWxpYS1sb2dvLmh0bWwiLCJ3ZWJwYWNrOi8vW25hbWVdLy4vc3JjL3Jlc291cmNlcy9lbGVtZW50cy9jb250cm9sbGVyLXZpZXcuaHRtbCIsIndlYnBhY2s6Ly9bbmFtZV0vLi9zcmMvcmVzb3VyY2VzL2VsZW1lbnRzL2RlYnVnLWdyb3VwLmh0bWwiLCJ3ZWJwYWNrOi8vW25hbWVdLy4vc3JjL3Jlc291cmNlcy9lbGVtZW50cy9wcm9wZXJ0eS12aWV3Lmh0bWwiLCJ3ZWJwYWNrOi8vW25hbWVdLy4vbm9kZV9tb2R1bGVzL2F1cmVsaWEvZGlzdC9lc20vaW5kZXguanMiLCJ3ZWJwYWNrOi8vW25hbWVdLy4vc3JjL2FwcC5jc3MiLCJ3ZWJwYWNrOi8vW25hbWVdLy4vc3JjL3Jlc2V0LmNzcyIsIndlYnBhY2s6Ly9bbmFtZV0vLi9zcmMvcmVzb3VyY2VzL2VsZW1lbnRzL2NvbnRyb2xsZXItdmlldy5jc3MiLCJ3ZWJwYWNrOi8vW25hbWVdLy4vc3JjL3Jlc291cmNlcy9lbGVtZW50cy9kZWJ1Zy1ncm91cC5jc3MiLCJ3ZWJwYWNrOi8vW25hbWVdLy4vc3JjL3Jlc291cmNlcy9lbGVtZW50cy9wcm9wZXJ0eS12aWV3LmNzcyIsIndlYnBhY2s6Ly9bbmFtZV0vLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9kaXN0L3J1bnRpbWUvYXBpLmpzIiwid2VicGFjazovL1tuYW1lXS8uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2Rpc3QvcnVudGltZS9jc3NXaXRoTWFwcGluZ1RvU3RyaW5nLmpzIiwid2VicGFjazovL1tuYW1lXS8uL3NyYy9hcHAuY3NzP2E2NzIiLCJ3ZWJwYWNrOi8vW25hbWVdLy4vc3JjL3Jlc2V0LmNzcz9lZGUwIiwid2VicGFjazovL1tuYW1lXS8uL3NyYy9yZXNvdXJjZXMvZWxlbWVudHMvY29udHJvbGxlci12aWV3LmNzcz9jM2E2Iiwid2VicGFjazovL1tuYW1lXS8uL3NyYy9yZXNvdXJjZXMvZWxlbWVudHMvZGVidWctZ3JvdXAuY3NzPzIzZDIiLCJ3ZWJwYWNrOi8vW25hbWVdLy4vc3JjL3Jlc291cmNlcy9lbGVtZW50cy9wcm9wZXJ0eS12aWV3LmNzcz9iZDU4Iiwid2VicGFjazovL1tuYW1lXS8uL25vZGVfbW9kdWxlcy9zdHlsZS1sb2FkZXIvZGlzdC9ydW50aW1lL2luamVjdFN0eWxlc0ludG9TdHlsZVRhZy5qcyIsIndlYnBhY2s6Ly9bbmFtZV0vLi9zcmMvYXBwLnRzIiwid2VicGFjazovL1tuYW1lXS8uL3NyYy9iYWNrZW5kL2RlYnVnLWhvc3QudHMiLCJ3ZWJwYWNrOi8vW25hbWVdLy4vc3JjL21haW4udHMiLCJ3ZWJwYWNrOi8vW25hbWVdLy4vc3JjL3Jlc291cmNlcy9lbGVtZW50cy9kZWJ1Zy1ncm91cC50cyIsIndlYnBhY2s6Ly9bbmFtZV0vLi9zcmMvcmVzb3VyY2VzL2VsZW1lbnRzL3Byb3BlcnR5LXZpZXcudHMiLCJ3ZWJwYWNrOi8vW25hbWVdLy4vc3JjL3Jlc291cmNlcy9pbmRleC50cyIsIndlYnBhY2s6Ly9bbmFtZV0vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vW25hbWVdL3dlYnBhY2svcnVudGltZS9jb21wYXQgZ2V0IGRlZmF1bHQgZXhwb3J0Iiwid2VicGFjazovL1tuYW1lXS93ZWJwYWNrL3J1bnRpbWUvZGVmaW5lIHByb3BlcnR5IGdldHRlcnMiLCJ3ZWJwYWNrOi8vW25hbWVdL3dlYnBhY2svcnVudGltZS9oYXNPd25Qcm9wZXJ0eSBzaG9ydGhhbmQiLCJ3ZWJwYWNrOi8vW25hbWVdL3dlYnBhY2svcnVudGltZS9tYWtlIG5hbWVzcGFjZSBvYmplY3QiLCJ3ZWJwYWNrOi8vW25hbWVdL3dlYnBhY2svc3RhcnR1cCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBMEM7O0FBRTFDO0FBQ0EsK0NBQStDO0FBQy9DOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlLGVBQWU7QUFDOUIsZUFBZSxnQkFBZ0I7QUFDL0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlCQUF5QjtBQUN6QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUJBQXlCO0FBQ3pCO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTs7QUFFQTtBQUNBLFdBQVcsaUZBQWlGO0FBQzVGO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUEsVUFBVSwrREFBaUI7O0FBRTNCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtR0FBbUc7QUFDbkc7QUFDQTtBQUNBLGFBQWEsb0lBQW9JLEVBQUU7QUFDbko7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBLDJCQUEyQjtBQUMzQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwSEFBMEg7QUFDMUg7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRWtIO0FBQ2xIOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUM5VTZGOztBQUVjOztBQUVFOztBQUU3Rzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCLE1BQU07QUFDeEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLLGNBQWM7QUFDbkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFjLE1BQU07QUFDcEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDOztBQUVEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQzs7QUFFRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQzs7QUFFRDtBQUNBO0FBQ0E7QUFDQSx1QkFBdUIsZ0JBQWdCO0FBQ3ZDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7O0FBRUQ7QUFDQSxXQUFXLFVBQVU7QUFDckI7QUFDQTtBQUNBLFVBQVUsTUFBTTtBQUNoQjtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxzR0FBc0csZ0NBQWdDO0FBQ3RJO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7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QUMxRDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQ0FBcUMsT0FBTztBQUM1QztBQUNBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBO0FBQ0EsWUFBWSxpREFBaUQsS0FBSztBQUNsRTtBQUNBO0FBQ0E7QUFDQSw2RUFBNkU7QUFDN0U7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBLENBQUM7O0FBRUQ7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbURBQW1ELGdFQUFnRSx3Q0FBd0MsVUFBVTtBQUNySztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFFQUFxRSxFQUFFO0FBQ3ZFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlFQUFpRSxFQUFFO0FBQ25FO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBOztBQUVtcUM7QUFDbnFDOzs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDam1EQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0EsNEJBQTRCLEVBQUUsR0FBRyx3QkFBd0IsZ0JBQWdCLEVBQUUsa0JBQWtCLEVBQUUsYUFBYSxrQ0FBa0MsSUFBSSxVQUFVO0FBQzVKOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLGtCQUFrQixFQUFFO0FBQ3BCO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLGtCQUFrQixFQUFFO0FBQ3BCO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsNkRBQTZELEVBQUU7QUFDL0Q7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUJBQW1CLE9BQU87QUFDMUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQkFBbUIsT0FBTztBQUMxQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSw4QkFBOEIsUUFBUTtBQUN0QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSw4QkFBOEIsUUFBUTtBQUN0QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSyxpRkFBaUYsRUFBRTtBQUN4Rjs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsNkJBQTZCLG9DQUFvQztBQUNqRSwwQkFBMEIsRUFBRSxLQUFLLEVBQUU7QUFDbkMsYUFBYTtBQUNiLG9YQUFvWCxFQUFFO0FBQ3RYLFNBQVM7QUFDVCxLQUFLO0FBQ0w7O0FBRTJHO0FBQzNHOzs7Ozs7Ozs7Ozs7Ozs7O0FDdFNrRTs7QUFFbEU7O0FBRUE7QUFDQTtBQUNBLGtHQUFrRyxFQUFFO0FBQ3BHO0FBQ0E7O0FBRUEsOEJBQThCLHVEQUFDO0FBQy9CLHlCQUF5QjtBQUN6QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLGdDQUFnQyx3REFBQztBQUNqQyxpQ0FBaUMsd0RBQUM7QUFDbEM7QUFDQSxnQ0FBZ0M7QUFDaEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRTJCO0FBQzNCOzs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQ2pGQTs7QUFFQTtBQUNBO0FBQ0Esa0dBQWtHLEVBQUU7QUFDcEc7QUFDQTs7QUFFQTtBQUNBLHlCQUF5QjtBQUN6QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0NBQWdDO0FBQ2hDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMkJBQTJCO0FBQzNCO0FBQ0E7QUFDQTtBQUNB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O0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUJBQXFCO0FBQ3JCO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQjtBQUNyQjtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUJBQXFCO0FBQ3JCO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQSxhQUFhO0FBQ2I7QUFDQSxhQUFhO0FBQ2I7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlCQUF5QjtBQUN6QjtBQUNBLHlCQUF5QjtBQUN6QjtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0EsYUFBYTtBQUNiO0FBQ0EsYUFBYTtBQUNiOztBQUVB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QUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5REFBeUQ7QUFDekQ7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7O0FBRUQ7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtB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Q0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQSxhQUFhO0FBQ2IsU0FBUztBQUNUO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLG9EQUFDO0FBQ3pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUyxHQUFHO0FBQ1o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7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Q0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBOztBQUVBLHNFQUFDOztBQUVELGdFQUFDOztBQUVEOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EscUJBQXFCLHVEQUFDO0FBQ3RCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtDQUFrQztBQUNsQztBQUNBO0FBQ0E7QUFDQTtBQUNBLHlCQUF5Qix1REFBQztBQUMxQixTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0NBQXNDO0FBQ3RDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlEQUFpRDtBQUNqRDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWMsTUFBTTtBQUNwQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FB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QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlLG1FQUFXO0FBQzFCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBLFdBQVcsK0RBQWlCOztBQUU1QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0Esa0NBQWtDLEVBQUUsbUNBQW1DLGlDQUFpQyxFQUFFLElBQUk7QUFDOUc7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLG1FQUFtRTtBQUNuRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUNBQXFDLE9BQU87QUFDNUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLDJDQUEyQyxPQUFPO0FBQ2xEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLHNFQUFDOztBQUVELGdFQUFDOztBQUVEO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxPQUFPLHNDQUFzQyxHQUFHLHlEQUFDOztBQUVqRDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLDZEQUFDOztBQUVELE9BQU8sV0FBVyxHQUFHLHlEQUFDOztBQUV0QjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFjLE1BQU07QUFDcEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrREFBa0Q7QUFDbEQ7QUFDQSxrQkFBa0IsTUFBTTtBQUN4QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYyxNQUFNO0FBQ3BCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYyxNQUFNO0FBQ3BCO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQkFBb0IsZ0VBQVE7QUFDNUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLDZEQUFDOztBQUVEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQkFBb0IsZ0VBQVE7QUFDNUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNDQUFzQztBQUN0QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTs7QUFFQSw2REFBQzs7QUFFRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLDZEQUFDOztBQUVELE9BQU8sc0NBQXNDLEdBQUcseURBQUM7O0FBRWpEOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0EsU0FBUztB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O0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0NBQWtDLFFBQVE7QUFDMUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLCtCQUErQix1REFBQztBQUNoQztBQUNBO0FBQ0EsMkJBQTJCLGtFQUFVO0FBQ3JDO0FBQ0EsU0FBUztBQUNUO0FBQ0E7O0FBRUEsT0FBTyxvQkFBb0IsR0FBRyxpRUFBQzs7QUFFL0IsT0FBTyxxQkFBcUIsR0FBRyw2REFBQzs7QUFFaEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsNkRBQUM7O0FBRUQsNkRBQUM7O0FBRUQsV0FBVywrREFBaUI7O0FBRTVCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNB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QUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0EsdUNBQXVDLFVBQVU7O0FBRWpEO0FBQ0EsdUNBQXVDLFVBQVUsR0FBRyxlQUFlO0FBQ25FO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxzQkFBc0IsYUFBYTtBQUNuQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7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QUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0NBQXdDLHFFQUFNLHVEQUF1RDtBQUNyRztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdDQUF3QyxxRUFBTSwwREFBMEQ7QUFDeEc7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNEJBQTRCO0FBQzVCO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZSxzQkFBc0I7QUFDckM7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxXQUFXLCtEQUFpQjs7QUFFNUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxXQUFXLCtEQUFpQjs7QUFFNUIsV0FBVywrREFBaUI7O0FBRTVCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQyxnQkFBZ0I7O0FBRWpCLFdBQVcsK0RBQWlCOztBQUU1QjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsV0FBVywrREFBaUI7O0FBRTVCLFdBQVcsK0RBQWlCOztBQUU1QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWSxtRUFBVztBQUN2QjtBQUNBLGtCQUFrQixnRUFBWTtBQUM5QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiLHlEQUF5RCxFQUFFO0FBQzNEO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLDhHQUE4RztBQUM5RztBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzREFBc0QsRUFBRSxHQUFHLFVBQVU7QUFDckU7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtDQUFrQyw2REFBQztBQUNuQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNEQUFzRCxNQUFNLEdBQUcsVUFBVTtBQUN6RTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzREFBc0QsTUFBTSxHQUFHLFVBQVU7QUFDekU7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLGNBQWMsK0RBQUMsRUFBRSw4REFBQzs7QUFFbEI7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxjQUFjLCtEQUFDLEVBQUUsOERBQUM7O0FBRWxCOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLGNBQWMsK0RBQUM7O0FBRWY7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0VBQW9FLGdFQUFRO0FBQzVFO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYyxNQUFNO0FBQ3BCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxjQUFjLCtEQUFDLEVBQUUsOERBQUM7O0FBRWxCOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxjQUFjLCtEQUFDLEVBQUUsOERBQUM7O0FBRWxCOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzREFBc0QsZ0VBQVE7QUFDOUQ7QUFDQTtBQUNBOztBQUVBLGNBQWMsK0RBQUMsRUFBRSw4REFBQzs7QUFFbEI7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQSx3QkFBd0IsdUVBQUM7QUFDekI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUJBQXlCLG9FQUFDO0FBQzFCO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFjLE1BQU07QUFDcEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLGNBQWMsK0RBQUMsRUFBRSw4REFBQzs7QUFFbEI7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLGNBQWMsK0RBQUM7O0FBRWY7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdEQUF3RCxnRUFBUTtBQUNoRTtBQUNBO0FBQ0E7O0FBRUEsY0FBYywrREFBQyxFQUFFLDhEQUFDOztBQUVsQjs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJEQUEyRCxnRUFBUTtBQUNuRTtBQUNBO0FBQ0E7O0FBRUEsY0FBYywrREFBQyxFQUFFLDhEQUFDOztBQUVsQjs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNktBQTZLLHVEQUFDO0FBQzlLO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxtQkFBbUIsT0FBTztBQUMxQjtBQUNBO0FBQ0EsS0FBSztBQUNMOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBO0FBQ0E7QUFDQSwrRkFBK0YsNkRBQUM7QUFDaEcsK0JBQStCLDZEQUFDO0FBQ2hDLCtCQUErQiw2REFBQztBQUNoQyxnREFBZ0QsNkRBQUM7QUFDakQ7QUFDQSxnREFBZ0QsNkRBQUM7QUFDakQ7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSwrRkFBK0YsNkRBQUM7QUFDaEc7QUFDQSwrQkFBK0IsNkRBQUM7QUFDaEMsK0JBQStCLDZEQUFDO0FBQ2hDLGdEQUFnRCw2REFBQztBQUNqRDtBQUNBLGdEQUFnRCw2REFBQztBQUNqRDtBQUNBOztBQUVBLGVBQWUsNkRBQUM7O0FBRWhCOztBQUVBLGVBQWUsNkRBQUMscUJBQXFCLHVEQUFDOztBQUV0Qzs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxDQUFDLGdCQUFnQjs7QUFFakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQSwrQ0FBK0MsNkRBQUMsb0JBQW9CLDREQUFDLGlEQUFpRCw2REFBQztBQUN2SDtBQUNBO0FBQ0EsZUFBZSw0QkFBNEI7QUFDM0MsUUFBUSxtRUFBVztBQUNuQixRQUFRLGlFQUFTO0FBQ2pCLFFBQVEsaUVBQUM7QUFDVDtBQUNBOztBQUVBOztBQUVBLG1CQUFtQixHQUFHLEdBQUcsRUFBRTs7QUFFM0I7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0EsQ0FBQzs7QUFFRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsK0ZBQStGLDBEQUFDLElBQUk7QUFDcEcsa0RBQWtELDBEQUFDO0FBQ25EO0FBQ0E7QUFDQSxzRUFBc0UsaUVBQVM7QUFDL0U7QUFDQTs7QUFFQSxrQkFBa0IsK0RBQUM7O0FBRW5COztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwrRkFBK0YsMERBQUMsSUFBSTtBQUNwRyxrREFBa0QsMERBQUM7QUFDbkQ7QUFDQTtBQUNBLHNFQUFzRSxnRUFBUTtBQUM5RTtBQUNBOztBQUVBLGtCQUFrQiwrREFBQzs7QUFFbkI7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLCtGQUErRiwwREFBQyxJQUFJO0FBQ3BHLGtEQUFrRCwwREFBQztBQUNuRDtBQUNBO0FBQ0Esc0VBQXNFLGtFQUFVO0FBQ2hGO0FBQ0E7O0FBRUEsa0JBQWtCLCtEQUFDOztBQUVuQjs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsK0ZBQStGLDBEQUFDLElBQUk7QUFDcEcsa0RBQWtELDBEQUFDO0FBQ25EO0FBQ0E7QUFDQSxzRUFBc0UsZ0VBQVE7QUFDOUU7QUFDQTs7QUFFQSxrQkFBa0IsK0RBQUM7O0FBRW5COztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZDQUE2QyxnRUFBUSxHQUFHLGdFQUFRO0FBQ2hFLDJFQUEyRSwwREFBQztBQUM1RSxTQUFTO0FBQ1Qsa0RBQWtELDBEQUFDO0FBQ25EO0FBQ0EsMkJBQTJCLGlFQUFTLHdDQUF3QyxpRUFBUyxHQUFHLGdFQUFRO0FBQ2hHO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsa0JBQWtCLCtEQUFDOztBQUVuQjs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3Q0FBd0MsMERBQUM7QUFDekM7QUFDQTtBQUNBOztBQUVBLGNBQWMsK0RBQUM7O0FBRWY7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0NBQXdDLDBEQUFDO0FBQ3pDO0FBQ0E7QUFDQTs7QUFFQSxjQUFjLCtEQUFDOztBQUVmOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNHQUFzRyxxRUFBTTtBQUM1RztBQUNBOztBQUVBLGNBQWMsK0RBQUM7O0FBRWY7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUdBQXVHLHlFQUFVO0FBQ2pIO0FBQ0E7O0FBRUEsY0FBYywrREFBQzs7QUFFZjs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1R0FBdUcsMEVBQVc7QUFDbEg7QUFDQTs7QUFFQSxjQUFjLCtEQUFDOztBQUVmOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxjQUFjLCtEQUFDOztBQUVmOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxjQUFjLCtEQUFDOztBQUVmOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxjQUFjLCtEQUFDOztBQUVmOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxjQUFjLCtEQUFDOztBQUVmOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUEsV0FBVywrREFBaUI7O0FBRTVCOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQSxRQUFRLHNEQUFRO0FBQ2hCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZSxtRUFBVztBQUMxQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwrRUFBK0UsdURBQUMscURBQXFELHVEQUFDO0FBQ3RJO0FBQ0EsNENBQTRDLHVEQUFDO0FBQzdDO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFjLE1BQU07QUFDcEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVFQUF1RSxFQUFFO0FBQ3pFO0FBQ0E7QUFDQSwrQ0FBK0M7QUFDL0M7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUI7QUFDckI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUhBQXlILDBEQUFDLE1BQU07QUFDaEk7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWMsTUFBTTtBQUNwQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrREFBa0QsRUFBRTtBQUNwRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUVBQXVFLEVBQUU7QUFDekU7QUFDQTtBQUNBLCtDQUErQztBQUMvQztBQUNBO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQjtBQUNyQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDhHQUE4RywwREFBQztBQUMvRyxpQkFBaUI7QUFDakI7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFjLE1BQU07QUFDcEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdFQUFnRSwwREFBQztBQUNqRTs7QUFFQTtBQUNBLDJDQUEyQyxVQUFVO0FBQ3JEO0FBQ0E7QUFDQSw4REFBOEQsd0VBQUMsU0FBUywwREFBQztBQUN6RTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMkJBQTJCLHVEQUFDO0FBQzVCO0FBQ0EsK0JBQStCLGlEQUFDO0FBQ2hDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYyxNQUFNO0FBQ3BCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLCtDQUErQztBQUMvQztBQUNBO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQjtBQUNyQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNktBQTZLO0FBQzdLO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0pBQXNKLDBEQUFDO0FBQ3ZKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMkhBQTJILHVEQUFDO0FBQzVIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdGQUF3RjtBQUN4RjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQjtBQUNyQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCLDhEQUFRLGtDQUFrQyx1REFBQyxtQ0FBbUMsdURBQUMsbUNBQW1DLHVEQUFDO0FBQ25JO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlEQUFpRDtBQUNqRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsK0RBQStELEVBQUUsR0FBRyxFQUFFO0FBQ3RFO0FBQ0E7QUFDQTtBQUNBLCtFQUErRTtBQUMvRTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkNBQTZDLE9BQU87QUFDcEQ7QUFDQSw2R0FBNkcsdUNBQXVDO0FBQ3BKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQjtBQUNyQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0VBQXdFO0FBQ3hFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLCtEQUErRCxXQUFXLEdBQUcsRUFBRTtBQUMvRTtBQUNBO0FBQ0E7QUFDQSwrRUFBK0U7QUFDL0U7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZDQUE2QyxPQUFPO0FBQ3BEO0FBQ0EsNkdBQTZHLHVDQUF1QztBQUNwSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUI7QUFDckI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVCQUF1QixPQUFPO0FBQzlCO0FBQ0EsOEJBQThCO0FBQzlCO0FBQ0E7QUFDQTtBQUNBLHNCQUFzQixNQUFNO0FBQzVCO0FBQ0Esc0NBQXNDO0FBQ3RDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwREFBMEQsT0FBTyxHQUFHLFNBQVM7QUFDN0U7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQkFBa0Isd0RBQUM7QUFDbkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0JBQXNCLHdEQUFDO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtRkFBbUYsRUFBRSxHQUFHLEVBQUUsR0FBRztBQUM3RjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwrQkFBK0IsdUJBQXVCO0FBQ3REO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUNBQW1DLCtEQUFDO0FBQ3BDO0FBQ0EsbUNBQW1DLG9EQUFDO0FBQ3BDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdURBQXVELEVBQUU7QUFDekQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwQkFBMEIsZ0NBQWdDO0FBQzFEO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQzs7QUFFRDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNERBQTRELGlFQUFTLDBCQUEwQixpRUFBUztBQUN4RztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzREFBc0QsT0FBTztBQUM3RDtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDLGdCQUFnQjs7QUFFakI7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsNkNBQTZDLEVBQUUsR0FBRztBQUNsRDtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLGVBQWUsaUVBQVM7O0FBRXhCO0FBQ0EsZUFBZSxnRUFBUTs7QUFFdkI7QUFDQSxlQUFlLGtFQUFVOztBQUV6QjtBQUNBLGVBQWUsZ0VBQVE7O0FBRXZCO0FBQ0E7QUFDQSxlQUFlLGlFQUFTO0FBQ3hCO0FBQ0E7O0FBRUEsV0FBVywrREFBaUI7O0FBRTVCOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDOztBQUVEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQkFBbUIsbUVBQVc7QUFDOUI7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsY0FBYyxpRUFBUztBQUN2QjtBQUNBOztBQUVBO0FBQ0E7QUFDQSxjQUFjLGdFQUFRO0FBQ3RCO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGNBQWMsa0VBQVU7QUFDeEI7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsY0FBYyxnRUFBUTtBQUN0QjtBQUNBOztBQUVBLGlFQUFDOztBQUVELGlFQUFDOztBQUVELGlFQUFDOztBQUVELGlFQUFDOztBQUVEOztBQUVBLHNDQUFzQyxnRUFBQztBQUN2QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVDQUF1QyxzREFBQztBQUN4QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsaUVBQUM7O0FBRUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsaUNBQWlDLHVEQUFDOztBQUVsQyxpRUFBQzs7QUFFRDs7QUFFQSxzQ0FBc0MsZ0VBQUM7QUFDdkM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsK0JBQStCLHNEQUFDO0FBQ2hDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsaUVBQUM7O0FBRUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDhDQUE4QztBQUM5QztBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsaUVBQUM7O0FBRUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLGlFQUFDOztBQUVEOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseURBQXlEO0FBQ3pEO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUNBQXFDLHVDQUF1QztBQUM1RTtBQUNBLDZFQUE2RTtBQUM3RTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZDQUE2QztBQUM3QztBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwyQ0FBMkM7QUFDM0M7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUyxtQkFBbUI7QUFDNUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsc0VBQUM7O0FBRUQsZ0VBQUM7O0FBRUQ7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5RUFBeUU7QUFDekU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxzRUFBQzs7QUFFRCxnRUFBQzs7QUFFRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRCQUE0QjtBQUM1QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVCQUF1QjtBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlCQUF5QiwwREFBQztBQUMxQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCLE1BQU07QUFDeEI7QUFDQTtBQUNBLGVBQWUsdURBQUM7QUFDaEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWUsdURBQUM7QUFDaEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCLE1BQU07QUFDeEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLHNFQUFDOztBQUVELGdFQUFDOztBQUVEOztBQUVBOztBQUVBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7O0FBRUQsZUFBZSw4REFBQzs7QUFFaEI7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLFFBQVEsaUVBQVMsQ0FBQyxrRUFBQztBQUNuQixRQUFRLG1FQUFXLENBQUMsa0VBQUM7QUFDckI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwrREFBK0Q7QUFDL0QsU0FBUztBQUNUO0FBQ0E7QUFDQSwrRUFBK0U7QUFDL0U7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0R0FBNEcsaUJBQWlCLHlEQUF5RDtBQUN0TDtBQUNBO0FBQ0E7QUFDQSwwRkFBMEYsd0RBQUM7QUFDM0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUNBQXVDLFVBQVU7QUFDakQsU0FBUyxpQkFBaUIsNERBQUM7QUFDM0I7QUFDQTs7QUFFQSwrQkFBK0IsNERBQUMsTUFBTSwyREFBQzs7QUFFdkM7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLCtCQUErQixVQUFVLEdBQUcsRUFBRTtBQUM5Qzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1QkFBdUIsZ0VBQVEsZUFBZSxrRUFBVTtBQUN4RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsd0NBQXdDLDhEQUFDOztBQUV6QyxpRUFBQzs7QUFFRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlEQUFpRDtBQUNqRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrREFBa0Q7QUFDbEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLCtCQUErQjtBQUMvQjtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0EsVUFBVSxnRUFBUTtBQUNsQixDQUFDOztBQUVEOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUEsdURBQUU7O0FBRUY7O0FBRUE7QUFDQTtBQUNBLGtCQUFrQix1REFBQztBQUNuQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWUsZUFBZTtBQUM5QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCLDBEQUFDO0FBQ25CO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLGVBQWUsMkNBQTJDO0FBQzFEO0FBQ0EsZUFBZSwwREFBQztBQUNoQjtBQUNBO0FBQ0EsZUFBZSx3QkFBd0I7QUFDdkMsNENBQTRDLGFBQWEsMERBQUM7QUFDMUQ7QUFDQTtBQUNBO0FBQ0EsZUFBZSwwQ0FBMEM7QUFDekQ7QUFDQTtBQUNBO0FBQ0EsZUFBZSw2Q0FBNkM7QUFDNUQsZUFBZSwwREFBQztBQUNoQjtBQUNBO0FBQ0EsZUFBZSx3QkFBd0I7QUFDdkMseUNBQXlDLGFBQWEsMERBQUM7QUFDdkQ7QUFDQTtBQUNBO0FBQ0EsZUFBZSw0Q0FBNEM7QUFDM0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBLENBQUM7O0FBRUQ7QUFDQTtBQUNBLENBQUM7O0FBRUQ7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCLHVEQUFDO0FBQ25CO0FBQ0E7QUFDQTtBQUNBLGVBQWUsZUFBZTtBQUM5QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCLHVEQUFDO0FBQ25CO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWUsMERBQUM7QUFDaEI7QUFDQTtBQUNBO0FBQ0Esb0lBQW9JO0FBQ3BJO0FBQ0E7QUFDQSwyQkFBMkIsMERBQUM7QUFDNUI7QUFDQSxhQUFhO0FBQ2IsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBLGVBQWUsMERBQUM7QUFDaEI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZSwwREFBQyxDQUFDLDBEQUFDLHFDQUFxQywwREFBQztBQUN4RDtBQUNBO0FBQ0EsMkhBQTJIO0FBQzNIO0FBQ0E7QUFDQSxtQkFBbUIsMERBQUM7QUFDcEI7QUFDQSxhQUFhO0FBQ2IsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0EsQ0FBQzs7QUFFRDs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxrQkFBa0IsdURBQUM7QUFDbkI7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwREFBMEQsNEVBQTRFO0FBQ3RJO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBLENBQUM7O0FBRUQ7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQkFBa0IsdURBQUM7QUFDbkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYyxNQUFNO0FBQ3BCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlLGVBQWU7QUFDOUI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQkFBa0IsMERBQUM7QUFDbkI7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsZUFBZSxlQUFlO0FBQzlCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzQkFBc0IsMERBQUM7QUFDdkI7QUFDQTtBQUNBLGFBQWE7QUFDYixTQUFTO0FBQ1Q7QUFDQSxZQUFZLHlFQUFFO0FBQ2Q7QUFDQSxvQ0FBb0MsMERBQUM7QUFDckMsMEJBQTBCLDBEQUFDO0FBQzNCO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakIsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1QsZ0NBQWdDLHVFQUFFO0FBQ2xDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWUsK0NBQStDO0FBQzlEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscURBQXFELDhEQUFZLElBQUksbUVBQVMseUJBQXlCLFVBQVUsOERBQVksSUFBSSxtRUFBUztBQUMxSTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlLHlCQUF5QjtBQUN4QztBQUNBLGNBQWMsTUFBTTtBQUNwQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZSx5QkFBeUI7QUFDeEM7QUFDQTtBQUNBO0FBQ0EsY0FBYyxNQUFNO0FBQ3BCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYyxNQUFNO0FBQ3BCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWUsc0RBQXNEO0FBQ3JFO0FBQ0EsY0FBYyxNQUFNO0FBQ3BCO0FBQ0E7QUFDQTtBQUNBLHVEQUF1RCxTQUFTLElBQUksRUFBRTtBQUN0RTtBQUNBO0FBQ0EsUUFBUSxvRUFBRTtBQUNWO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFjLE9BQU87QUFDckI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrRUFBa0UsOERBQVksSUFBSSxtRUFBUyw0QkFBNEIsVUFBVSw4REFBWSxJQUFJLG1FQUFTO0FBQzFKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWUsU0FBUztBQUN4Qix1REFBdUQsT0FBTztBQUM5RDtBQUNBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVUsTUFBTTtBQUNoQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaURBQWlEO0FBQ2pEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGtCQUFrQix1REFBQztBQUNuQixrQkFBa0IsdURBQUM7QUFDbkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdCQUFnQiw4REFBWSwyQkFBMkI7QUFDdkQsOEJBQThCLE9BQU87QUFDckM7QUFDQTtBQUNBO0FBQ0EsZUFBZSx5QkFBeUI7QUFDeEMsa0JBQWtCLDhEQUFZLDJCQUEyQjtBQUN6RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCLHVEQUFDO0FBQ25CO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBCQUEwQjtBQUMxQjtBQUNBO0FBQ0EseUNBQXlDLFlBQVk7QUFDckQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWUsMERBQUM7QUFDaEI7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWUsMERBQUM7QUFDaEI7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWUsMkRBQUM7QUFDaEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlLDBEQUFDLENBQUMsMkRBQUM7QUFDbEI7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJCQUEyQiwwREFBQyxDQUFDLDBEQUFDO0FBQzlCO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxrQkFBa0IsdURBQUM7QUFDbkI7QUFDQTtBQUNBLCtCQUErQixzQkFBc0IsSUFBSSxRQUFRO0FBQ2pFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsa0JBQWtCLDhEQUFDLE1BQU0sb0RBQUM7O0FBRTFCOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsVUFBVSxpRUFBUztBQUNuQixDQUFDOztBQUVEOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCLHVEQUFDO0FBQ25CO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZSwwREFBQyxzQ0FBc0MsOERBQVksWUFBWTtBQUM5RTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwyQ0FBMkMsVUFBVTtBQUNyRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUIsMkRBQUMsK0NBQStDLDJEQUFDO0FBQ2xFO0FBQ0E7QUFDQSx3RkFBd0YsMkRBQUM7QUFDekY7QUFDQSxxRUFBcUU7QUFDckU7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQSx3RkFBd0YsMkRBQUM7QUFDekY7QUFDQSxxRUFBcUU7QUFDckU7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0EsaUlBQWlJO0FBQ2pJO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUEsZ0VBQWdFLG9EQUFDOztBQUVqRTtBQUNBO0FBQ0E7QUFDQSxrQkFBa0IsdURBQUM7QUFDbkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsVUFBVSxnRUFBUTtBQUNsQixDQUFDOztBQUVEOztBQUVBO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQix1REFBQztBQUNuQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLFVBQVUsa0VBQVU7QUFDcEIsQ0FBQzs7QUFFRDs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxrQkFBa0IsdURBQUM7QUFDbkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxVQUFVLGtFQUFVO0FBQ3BCLENBQUM7O0FBRUQ7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsQ0FBQzs7QUFFRDtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLENBQUM7O0FBRUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxDQUFDOztBQUVEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVB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QUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtEQUFrRCxVQUFVO0FBQzVEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUJBQXVCLHNCQUFzQjtBQUM3QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwySUFBMkksdUJBQXVCO0FBQ2xLO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLGlFQUFDLE9BQU8saUVBQUM7QUFDakMsd0JBQXdCLCtEQUFDLE9BQU8sK0RBQUM7QUFDakM7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBLHVDQUF1QyxlQUFlO0FBQ3REO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBLHVDQUF1QyxlQUFlO0FBQ3REO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVCQUF1Qix1QkFBdUI7QUFDOUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSwyREFBMkQsdURBQUM7O0FBRTVEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUJBQXVCLHNCQUFzQjtBQUM3QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsNkRBQTZELHVEQUFDLEVBQUUsdURBQUM7O0FBRWpFO0FBQ0EsdUJBQXVCLHVEQUFDO0FBQ3hCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1QkFBdUIsNkJBQTZCO0FBQ3BEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBLDZCQUE2Qix1REFBQztBQUM5QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0EsNENBQTRDLFVBQVU7QUFDdEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBLG1EQUFtRCxVQUFVO0FBQzdEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLHVCQUF1Qix1REFBQztBQUN4QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMkJBQTJCLDZCQUE2QjtBQUN4RDtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVMsZ0JBQWdCLGNBQWMsRUFBRSwwQ0FBMEMsRUFBRSxjQUFjO0FBQ25HO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQkFBbUIsT0FBTztBQUMxQjtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVksNkRBQUM7QUFDYjtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxTQUFTLEtBQUs7QUFDZDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSwrQkFBK0IsRUFBRTtBQUNqQzs7QUFFQTtBQUNBLGlDQUFpQyxPQUFPO0FBQ3hDOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLG1CQUFtQixPQUFPO0FBQzFCO0FBQ0E7O0FBRUEsVUFBVSwrREFBaUI7O0FBRTNCOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUMsY0FBYzs7QUFFZjs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDLGNBQWM7O0FBRWY7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDLGNBQWM7O0FBRWY7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDLGNBQWM7O0FBRWY7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQyxjQUFjOztBQUVmOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUMsY0FBYzs7QUFFZjtBQUNBLFdBQVcsVUFBVTtBQUNyQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrREFBa0QsOEVBQThFO0FBQ2hJO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQixNQUFNO0FBQ3hCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQixNQUFNO0FBQ3hCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQixNQUFNO0FBQ3hCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQixNQUFNO0FBQ3hCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1QkFBdUIsNkRBQUM7QUFDeEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxpREFBaUQ7QUFDakQ7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLG1CQUFtQixPQUFPO0FBQzFCO0FBQ0E7QUFDQSx1QkFBdUIsUUFBUTtBQUMvQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwQkFBMEIsT0FBTztBQUNqQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQzs7QUFFRDs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUJBQW1CLE9BQU87QUFDMUI7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2QkFBNkI7QUFDN0I7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7O0FBRUQ7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7O0FBRUQ7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0Esc0NBQXNDLHNDQUFzQyxzQ0FBc0M7QUFDbEg7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBLFdBQVcsK0RBQWlCOztBQUU1QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUMsZ0JBQWdCOztBQUVqQjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDLGdCQUFnQjs7QUFFakI7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUMsZ0JBQWdCOztBQUVqQjs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDLGdCQUFnQjs7QUFFakI7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDLGdCQUFnQjs7QUFFakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FB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Q0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLLDRCQUE0QjtBQUNqQztBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLLDBEQUEwRCxLQUFLLEdBQUc7QUFDdkU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLLGVBQWUsMERBQTBEO0FBQzlFLDREQUE0RCxLQUFLO0FBQ2pFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0Esd0RBQXdELEtBQUs7QUFDN0Q7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EseUJBQXlCLGlDQUFpQyxLQUFLLEdBQUcsRUFBRTtBQUNwRTs7QUFFQSw4REFBOEQsVUFBVTs7QUFFeEU7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxtQkFBbUIsT0FBTztBQUMxQjtBQUNBO0FBQ0E7QUFDQTtBQUNBLDhCQUE4QixPQUFPO0FBQ3JDO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsK0JBQStCLEtBQUs7QUFDcEM7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsQ0FBQzs7QUFFRDs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDOztBQUVEOztBQUVBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDOztBQUVEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQSxXQUFXLCtEQUFpQjs7QUFFNUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQkFBa0IsTUFBTTtBQUN4QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpREFBaUQsRUFBRTtBQUNuRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLHdCQUF3QixzREFBQzs7QUFFekI7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNERBQTRELFNBQVM7QUFDckU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBLFdBQVcsK0RBQWlCOztBQUU1QixXQUFXLCtEQUFpQjtBQUM1QixhQUFhLG9EQUFDO0FBQ2Q7QUFDQSxLQUFLO0FBQ0w7QUFDQSxDQUFDOztBQUVEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxtRUFBbUU7QUFDbkU7O0FBRUE7QUFDQSxzQ0FBc0MsNkRBQUM7QUFDdkM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0Q0FBNEM7QUFDNUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQSxzQ0FBc0Msc0NBQXNDO0FBQzVFO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUEsV0FBVywrREFBaUI7O0FBRTVCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLG1DQUFtQyxVQUFVO0FBQzdDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9DQUFvQztBQUNwQztBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFc25FO0FBQ3RuRTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQzMxSkE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUNBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUNBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUNBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7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Q0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJLDZDQUFRO0FBQ1o7QUFDQTtBQUNBO0FBQ0EsSUFBSSw2Q0FBUTtBQUNaO0FBQ0E7QUFDQTtBQUNBLElBQUksc0RBQWEsQ0FBQyxnREFBWTtBQUM5QixJQUFJLCtDQUFNO0FBQ1YsZUFBZSw4Q0FBUztBQUN4QixxQ0FBcUMsMERBQVM7QUFDOUM7QUFDd0I7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUMzRGU7QUFDRTtBQUNTO0FBQ0k7Ozs7Ozs7VUNIdEQ7VUFDQTs7VUFFQTtVQUNBO1VBQ0E7VUFDQTtVQUNBO1VBQ0E7VUFDQTtVQUNBO1VBQ0E7VUFDQTtVQUNBO1VBQ0E7O1VBRUE7VUFDQTs7VUFFQTtVQUNBO1VBQ0E7Ozs7O1dDckJBO1dBQ0E7V0FDQTtXQUNBO1dBQ0E7V0FDQSxnQ0FBZ0MsWUFBWTtXQUM1QztXQUNBLEU7Ozs7O1dDUEE7V0FDQTtXQUNBO1dBQ0E7V0FDQSx3Q0FBd0MseUNBQXlDO1dBQ2pGO1dBQ0E7V0FDQSxFOzs7OztXQ1BBLHNGOzs7OztXQ0FBO1dBQ0E7V0FDQTtXQUNBLHNEQUFzRCxrQkFBa0I7V0FDeEU7V0FDQSwrQ0FBK0MsY0FBYztXQUM3RCxFOzs7O1VDTkE7VUFDQTtVQUNBO1VBQ0EiLCJmaWxlIjoiYnVpbGQvZW50cnkuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBESSBhcyB0IH0gZnJvbSBcIkBhdXJlbGlhL2tlcm5lbFwiO1xuXG5mdW5jdGlvbiBlKHQsIGUpIHtcbiAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkodm9pZCAwICE9PSB0ID8gdCA6IHt9LCBlKTtcbn1cblxuY29uc3QgciA9IHtcbiAgICBmaXhlZDogMCxcbiAgICBpbmNyZW1lbnRhbDogMSxcbiAgICBleHBvbmVudGlhbDogMixcbiAgICByYW5kb206IDNcbn07XG5cbmNvbnN0IG4gPSB7XG4gICAgbWF4UmV0cmllczogMyxcbiAgICBpbnRlcnZhbDogMWUzLFxuICAgIHN0cmF0ZWd5OiByLmZpeGVkXG59O1xuXG5jbGFzcyBSZXRyeUludGVyY2VwdG9yIHtcbiAgICBjb25zdHJ1Y3Rvcih0KSB7XG4gICAgICAgIHRoaXMucmV0cnlDb25maWcgPSB7XG4gICAgICAgICAgICAuLi5uLFxuICAgICAgICAgICAgLi4udm9pZCAwICE9PSB0ID8gdCA6IHt9XG4gICAgICAgIH07XG4gICAgICAgIGlmICh0aGlzLnJldHJ5Q29uZmlnLnN0cmF0ZWd5ID09PSByLmV4cG9uZW50aWFsICYmIHRoaXMucmV0cnlDb25maWcuaW50ZXJ2YWwgPD0gMWUzKSB0aHJvdyBuZXcgRXJyb3IoXCJBbiBpbnRlcnZhbCBsZXNzIHRoYW4gb3IgZXF1YWwgdG8gMSBzZWNvbmQgaXMgbm90IGFsbG93ZWQgd2hlbiB1c2luZyB0aGUgZXhwb25lbnRpYWwgcmV0cnkgc3RyYXRlZ3lcIik7XG4gICAgfVxuICAgIHJlcXVlc3QodCkge1xuICAgICAgICBpZiAoIXQucmV0cnlDb25maWcpIHtcbiAgICAgICAgICAgIHQucmV0cnlDb25maWcgPSB7XG4gICAgICAgICAgICAgICAgLi4udGhpcy5yZXRyeUNvbmZpZ1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHQucmV0cnlDb25maWcuY291bnRlciA9IDA7XG4gICAgICAgIH1cbiAgICAgICAgdC5yZXRyeUNvbmZpZy5yZXF1ZXN0Q2xvbmUgPSB0LmNsb25lKCk7XG4gICAgICAgIHJldHVybiB0O1xuICAgIH1cbiAgICByZXNwb25zZSh0LCBlKSB7XG4gICAgICAgIFJlZmxlY3QuZGVsZXRlUHJvcGVydHkoZSwgXCJyZXRyeUNvbmZpZ1wiKTtcbiAgICAgICAgcmV0dXJuIHQ7XG4gICAgfVxuICAgIHJlc3BvbnNlRXJyb3IodCwgZSwgcikge1xuICAgICAgICBjb25zdCB7cmV0cnlDb25maWc6IG59ID0gZTtcbiAgICAgICAgY29uc3Qge3JlcXVlc3RDbG9uZTogaX0gPSBuO1xuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCkudGhlbigoKCkgPT4ge1xuICAgICAgICAgICAgaWYgKG4uY291bnRlciA8IG4ubWF4UmV0cmllcykge1xuICAgICAgICAgICAgICAgIGNvbnN0IG8gPSB2b2lkIDAgIT09IG4uZG9SZXRyeSA/IG4uZG9SZXRyeSh0LCBlKSA6IHRydWU7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShvKS50aGVuKChvID0+IHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG8pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG4uY291bnRlcisrO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdCA9IHMobik7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoKGUgPT4gc2V0VGltZW91dChlLCAhaXNOYU4odCkgPyB0IDogMCkpKS50aGVuKCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdCA9IGkuY2xvbmUoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoXCJmdW5jdGlvblwiID09PSB0eXBlb2Ygbi5iZWZvcmVSZXRyeSkgcmV0dXJuIG4uYmVmb3JlUmV0cnkodCwgcik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHQ7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KSkudGhlbigodCA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZSA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4udCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0cnlDb25maWc6IG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByLmZldGNoKGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIFJlZmxlY3QuZGVsZXRlUHJvcGVydHkoZSwgXCJyZXRyeUNvbmZpZ1wiKTtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgdDtcbiAgICAgICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBSZWZsZWN0LmRlbGV0ZVByb3BlcnR5KGUsIFwicmV0cnlDb25maWdcIik7XG4gICAgICAgICAgICB0aHJvdyB0O1xuICAgICAgICB9KSk7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBzKHQpIHtcbiAgICBjb25zdCB7aW50ZXJ2YWw6IGUsIHN0cmF0ZWd5OiBuLCBtaW5SYW5kb21JbnRlcnZhbDogcywgbWF4UmFuZG9tSW50ZXJ2YWw6IG8sIGNvdW50ZXI6IGN9ID0gdDtcbiAgICBpZiAoXCJmdW5jdGlvblwiID09PSB0eXBlb2YgbikgcmV0dXJuIHQuc3RyYXRlZ3koYyk7XG4gICAgc3dpdGNoIChuKSB7XG4gICAgICBjYXNlIHIuZml4ZWQ6XG4gICAgICAgIHJldHVybiBpW3IuZml4ZWRdKGUpO1xuXG4gICAgICBjYXNlIHIuaW5jcmVtZW50YWw6XG4gICAgICAgIHJldHVybiBpW3IuaW5jcmVtZW50YWxdKGMsIGUpO1xuXG4gICAgICBjYXNlIHIuZXhwb25lbnRpYWw6XG4gICAgICAgIHJldHVybiBpW3IuZXhwb25lbnRpYWxdKGMsIGUpO1xuXG4gICAgICBjYXNlIHIucmFuZG9tOlxuICAgICAgICByZXR1cm4gaVtyLnJhbmRvbV0oYywgZSwgcywgbyk7XG5cbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIlVucmVjb2duaXplZCByZXRyeSBzdHJhdGVneVwiKTtcbiAgICB9XG59XG5cbmNvbnN0IGkgPSBbIHQgPT4gdCwgKHQsIGUpID0+IGUgKiB0LCAodCwgZSkgPT4gMSA9PT0gdCA/IGUgOiBlICoqIHQgLyAxZTMsICh0LCBlLCByID0gMCwgbiA9IDZlNCkgPT4gTWF0aC5yYW5kb20oKSAqIChuIC0gcikgKyByIF07XG5cbmNsYXNzIEh0dHBDbGllbnRDb25maWd1cmF0aW9uIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgdGhpcy5iYXNlVXJsID0gXCJcIjtcbiAgICAgICAgdGhpcy5kZWZhdWx0cyA9IHt9O1xuICAgICAgICB0aGlzLmludGVyY2VwdG9ycyA9IFtdO1xuICAgICAgICB0aGlzLmRpc3BhdGNoZXIgPSBudWxsO1xuICAgIH1cbiAgICB3aXRoQmFzZVVybCh0KSB7XG4gICAgICAgIHRoaXMuYmFzZVVybCA9IHQ7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICB3aXRoRGVmYXVsdHModCkge1xuICAgICAgICB0aGlzLmRlZmF1bHRzID0gdDtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIHdpdGhJbnRlcmNlcHRvcih0KSB7XG4gICAgICAgIHRoaXMuaW50ZXJjZXB0b3JzLnB1c2godCk7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICB1c2VTdGFuZGFyZENvbmZpZ3VyYXRpb24oKSB7XG4gICAgICAgIGNvbnN0IHQgPSB7XG4gICAgICAgICAgICBjcmVkZW50aWFsczogXCJzYW1lLW9yaWdpblwiXG4gICAgICAgIH07XG4gICAgICAgIE9iamVjdC5hc3NpZ24odGhpcy5kZWZhdWx0cywgdCwgdGhpcy5kZWZhdWx0cyk7XG4gICAgICAgIHJldHVybiB0aGlzLnJlamVjdEVycm9yUmVzcG9uc2VzKCk7XG4gICAgfVxuICAgIHJlamVjdEVycm9yUmVzcG9uc2VzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy53aXRoSW50ZXJjZXB0b3Ioe1xuICAgICAgICAgICAgcmVzcG9uc2U6IG9cbiAgICAgICAgfSk7XG4gICAgfVxuICAgIHdpdGhSZXRyeSh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSBuZXcgUmV0cnlJbnRlcmNlcHRvcih0KTtcbiAgICAgICAgcmV0dXJuIHRoaXMud2l0aEludGVyY2VwdG9yKGUpO1xuICAgIH1cbiAgICB3aXRoRGlzcGF0Y2hlcih0KSB7XG4gICAgICAgIHRoaXMuZGlzcGF0Y2hlciA9IHQ7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gbyh0KSB7XG4gICAgaWYgKCF0Lm9rKSB0aHJvdyB0O1xuICAgIHJldHVybiB0O1xufVxuXG5jb25zdCBjID0gL14oW2Etel1bYS16MC05K1xcLS5dKjopP1xcL1xcLy9pO1xuXG5jb25zdCB1ID0gdC5jcmVhdGVJbnRlcmZhY2UoXCJJSHR0cENsaWVudFwiLCAodCA9PiB0LnNpbmdsZXRvbihIdHRwQ2xpZW50KSkpO1xuXG5jbGFzcyBIdHRwQ2xpZW50IHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgdGhpcy5kaXNwYXRjaGVyID0gbnVsbDtcbiAgICAgICAgdGhpcy5hY3RpdmVSZXF1ZXN0Q291bnQgPSAwO1xuICAgICAgICB0aGlzLmlzUmVxdWVzdGluZyA9IGZhbHNlO1xuICAgICAgICB0aGlzLmlzQ29uZmlndXJlZCA9IGZhbHNlO1xuICAgICAgICB0aGlzLmJhc2VVcmwgPSBcIlwiO1xuICAgICAgICB0aGlzLmRlZmF1bHRzID0gbnVsbDtcbiAgICAgICAgdGhpcy5pbnRlcmNlcHRvcnMgPSBbXTtcbiAgICB9XG4gICAgY29uZmlndXJlKHQpIHtcbiAgICAgICAgbGV0IGU7XG4gICAgICAgIGlmIChcIm9iamVjdFwiID09PSB0eXBlb2YgdCkge1xuICAgICAgICAgICAgY29uc3QgciA9IHtcbiAgICAgICAgICAgICAgICBkZWZhdWx0czogdFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGUgPSByO1xuICAgICAgICB9IGVsc2UgaWYgKFwiZnVuY3Rpb25cIiA9PT0gdHlwZW9mIHQpIHtcbiAgICAgICAgICAgIGUgPSBuZXcgSHR0cENsaWVudENvbmZpZ3VyYXRpb247XG4gICAgICAgICAgICBlLmJhc2VVcmwgPSB0aGlzLmJhc2VVcmw7XG4gICAgICAgICAgICBlLmRlZmF1bHRzID0ge1xuICAgICAgICAgICAgICAgIC4uLnRoaXMuZGVmYXVsdHNcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBlLmludGVyY2VwdG9ycyA9IHRoaXMuaW50ZXJjZXB0b3JzO1xuICAgICAgICAgICAgZS5kaXNwYXRjaGVyID0gdGhpcy5kaXNwYXRjaGVyO1xuICAgICAgICAgICAgY29uc3QgciA9IHQoZSk7XG4gICAgICAgICAgICBpZiAoT2JqZWN0LnByb3RvdHlwZS5pc1Byb3RvdHlwZU9mLmNhbGwoSHR0cENsaWVudENvbmZpZ3VyYXRpb24ucHJvdG90eXBlLCByKSkgZSA9IHI7XG4gICAgICAgIH0gZWxzZSB0aHJvdyBuZXcgRXJyb3IoXCJpbnZhbGlkIGNvbmZpZ1wiKTtcbiAgICAgICAgY29uc3QgciA9IGUuZGVmYXVsdHM7XG4gICAgICAgIGlmICh2b2lkIDAgIT09IHIgJiYgT2JqZWN0LnByb3RvdHlwZS5pc1Byb3RvdHlwZU9mLmNhbGwoSGVhZGVycy5wcm90b3R5cGUsIHIuaGVhZGVycykpIHRocm93IG5ldyBFcnJvcihcIkRlZmF1bHQgaGVhZGVycyBtdXN0IGJlIGEgcGxhaW4gb2JqZWN0LlwiKTtcbiAgICAgICAgY29uc3QgbiA9IGUuaW50ZXJjZXB0b3JzO1xuICAgICAgICBpZiAodm9pZCAwICE9PSBuICYmIG4ubGVuZ3RoKSB7XG4gICAgICAgICAgICBpZiAobi5maWx0ZXIoKHQgPT4gT2JqZWN0LnByb3RvdHlwZS5pc1Byb3RvdHlwZU9mLmNhbGwoUmV0cnlJbnRlcmNlcHRvci5wcm90b3R5cGUsIHQpKSkubGVuZ3RoID4gMSkgdGhyb3cgbmV3IEVycm9yKFwiT25seSBvbmUgUmV0cnlJbnRlcmNlcHRvciBpcyBhbGxvd2VkLlwiKTtcbiAgICAgICAgICAgIGNvbnN0IHQgPSBuLmZpbmRJbmRleCgodCA9PiBPYmplY3QucHJvdG90eXBlLmlzUHJvdG90eXBlT2YuY2FsbChSZXRyeUludGVyY2VwdG9yLnByb3RvdHlwZSwgdCkpKTtcbiAgICAgICAgICAgIGlmICh0ID49IDAgJiYgdCAhPT0gbi5sZW5ndGggLSAxKSB0aHJvdyBuZXcgRXJyb3IoXCJUaGUgcmV0cnkgaW50ZXJjZXB0b3IgbXVzdCBiZSB0aGUgbGFzdCBpbnRlcmNlcHRvciBkZWZpbmVkLlwiKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmJhc2VVcmwgPSBlLmJhc2VVcmw7XG4gICAgICAgIHRoaXMuZGVmYXVsdHMgPSByO1xuICAgICAgICB0aGlzLmludGVyY2VwdG9ycyA9IHZvaWQgMCAhPT0gZS5pbnRlcmNlcHRvcnMgPyBlLmludGVyY2VwdG9ycyA6IFtdO1xuICAgICAgICB0aGlzLmRpc3BhdGNoZXIgPSBlLmRpc3BhdGNoZXI7XG4gICAgICAgIHRoaXMuaXNDb25maWd1cmVkID0gdHJ1ZTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIGZldGNoKHQsIGUpIHtcbiAgICAgICAgdGhpcy50cmFja1JlcXVlc3RTdGFydCgpO1xuICAgICAgICBsZXQgciA9IHRoaXMuYnVpbGRSZXF1ZXN0KHQsIGUpO1xuICAgICAgICByZXR1cm4gdGhpcy5wcm9jZXNzUmVxdWVzdChyLCB0aGlzLmludGVyY2VwdG9ycykudGhlbigodCA9PiB7XG4gICAgICAgICAgICBsZXQgZTtcbiAgICAgICAgICAgIGlmIChPYmplY3QucHJvdG90eXBlLmlzUHJvdG90eXBlT2YuY2FsbChSZXNwb25zZS5wcm90b3R5cGUsIHQpKSBlID0gUHJvbWlzZS5yZXNvbHZlKHQpOyBlbHNlIGlmIChPYmplY3QucHJvdG90eXBlLmlzUHJvdG90eXBlT2YuY2FsbChSZXF1ZXN0LnByb3RvdHlwZSwgdCkpIHtcbiAgICAgICAgICAgICAgICByID0gdDtcbiAgICAgICAgICAgICAgICBlID0gZmV0Y2gocik7XG4gICAgICAgICAgICB9IGVsc2UgdGhyb3cgbmV3IEVycm9yKGBBbiBpbnZhbGlkIHJlc3VsdCB3YXMgcmV0dXJuZWQgYnkgdGhlIGludGVyY2VwdG9yIGNoYWluLiBFeHBlY3RlZCBhIFJlcXVlc3Qgb3IgUmVzcG9uc2UgaW5zdGFuY2UsIGJ1dCBnb3QgWyR7dH1dYCk7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5wcm9jZXNzUmVzcG9uc2UoZSwgdGhpcy5pbnRlcmNlcHRvcnMsIHIpO1xuICAgICAgICB9KSkudGhlbigodCA9PiB7XG4gICAgICAgICAgICBpZiAoT2JqZWN0LnByb3RvdHlwZS5pc1Byb3RvdHlwZU9mLmNhbGwoUmVxdWVzdC5wcm90b3R5cGUsIHQpKSByZXR1cm4gdGhpcy5mZXRjaCh0KTtcbiAgICAgICAgICAgIHJldHVybiB0O1xuICAgICAgICB9KSkudGhlbigodCA9PiB7XG4gICAgICAgICAgICB0aGlzLnRyYWNrUmVxdWVzdEVuZCgpO1xuICAgICAgICAgICAgcmV0dXJuIHQ7XG4gICAgICAgIH0pLCAodCA9PiB7XG4gICAgICAgICAgICB0aGlzLnRyYWNrUmVxdWVzdEVuZCgpO1xuICAgICAgICAgICAgdGhyb3cgdDtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICBidWlsZFJlcXVlc3QodCwgZSkge1xuICAgICAgICBjb25zdCByID0gbnVsbCAhPT0gdGhpcy5kZWZhdWx0cyA/IHRoaXMuZGVmYXVsdHMgOiB7fTtcbiAgICAgICAgbGV0IG47XG4gICAgICAgIGxldCBzO1xuICAgICAgICBsZXQgaTtcbiAgICAgICAgY29uc3QgbyA9IGgoci5oZWFkZXJzKTtcbiAgICAgICAgaWYgKE9iamVjdC5wcm90b3R5cGUuaXNQcm90b3R5cGVPZi5jYWxsKFJlcXVlc3QucHJvdG90eXBlLCB0KSkge1xuICAgICAgICAgICAgbiA9IHQ7XG4gICAgICAgICAgICBpID0gbmV3IEhlYWRlcnMobi5oZWFkZXJzKS5nZXQoXCJDb250ZW50LVR5cGVcIik7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBpZiAoIWUpIGUgPSB7fTtcbiAgICAgICAgICAgIHMgPSBlLmJvZHk7XG4gICAgICAgICAgICBjb25zdCBvID0gdm9pZCAwICE9PSBzID8ge1xuICAgICAgICAgICAgICAgIGJvZHk6IHNcbiAgICAgICAgICAgIH0gOiBudWxsO1xuICAgICAgICAgICAgY29uc3QgYyA9IHtcbiAgICAgICAgICAgICAgICAuLi5yLFxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IHt9LFxuICAgICAgICAgICAgICAgIC4uLmUsXG4gICAgICAgICAgICAgICAgLi4ub1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGkgPSBuZXcgSGVhZGVycyhjLmhlYWRlcnMpLmdldChcIkNvbnRlbnQtVHlwZVwiKTtcbiAgICAgICAgICAgIG4gPSBuZXcgUmVxdWVzdChsKHRoaXMuYmFzZVVybCwgdCksIGMpO1xuICAgICAgICB9XG4gICAgICAgIGlmICghaSkgaWYgKG5ldyBIZWFkZXJzKG8pLmhhcyhcImNvbnRlbnQtdHlwZVwiKSkgbi5oZWFkZXJzLnNldChcIkNvbnRlbnQtVHlwZVwiLCBuZXcgSGVhZGVycyhvKS5nZXQoXCJjb250ZW50LXR5cGVcIikpOyBlbHNlIGlmICh2b2lkIDAgIT09IHMgJiYgZihzKSkgbi5oZWFkZXJzLnNldChcIkNvbnRlbnQtVHlwZVwiLCBcImFwcGxpY2F0aW9uL2pzb25cIik7XG4gICAgICAgIGEobi5oZWFkZXJzLCBvKTtcbiAgICAgICAgaWYgKHZvaWQgMCAhPT0gcyAmJiBPYmplY3QucHJvdG90eXBlLmlzUHJvdG90eXBlT2YuY2FsbChCbG9iLnByb3RvdHlwZSwgcykgJiYgcy50eXBlKSBuLmhlYWRlcnMuc2V0KFwiQ29udGVudC1UeXBlXCIsIHMudHlwZSk7XG4gICAgICAgIHJldHVybiBuO1xuICAgIH1cbiAgICBnZXQodCwgZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5mZXRjaCh0LCBlKTtcbiAgICB9XG4gICAgcG9zdCh0LCBlLCByKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmNhbGxGZXRjaCh0LCBlLCByLCBcIlBPU1RcIik7XG4gICAgfVxuICAgIHB1dCh0LCBlLCByKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmNhbGxGZXRjaCh0LCBlLCByLCBcIlBVVFwiKTtcbiAgICB9XG4gICAgcGF0Y2godCwgZSwgcikge1xuICAgICAgICByZXR1cm4gdGhpcy5jYWxsRmV0Y2godCwgZSwgciwgXCJQQVRDSFwiKTtcbiAgICB9XG4gICAgZGVsZXRlKHQsIGUsIHIpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY2FsbEZldGNoKHQsIGUsIHIsIFwiREVMRVRFXCIpO1xuICAgIH1cbiAgICB0cmFja1JlcXVlc3RTdGFydCgpIHtcbiAgICAgICAgdGhpcy5pc1JlcXVlc3RpbmcgPSAhISsrdGhpcy5hY3RpdmVSZXF1ZXN0Q291bnQ7XG4gICAgICAgIGlmICh0aGlzLmlzUmVxdWVzdGluZyAmJiBudWxsICE9PSB0aGlzLmRpc3BhdGNoZXIpIHtcbiAgICAgICAgICAgIGNvbnN0IHQgPSBuZXcgdGhpcy5kaXNwYXRjaGVyLm93bmVyRG9jdW1lbnQuZGVmYXVsdFZpZXcuQ3VzdG9tRXZlbnQoXCJhdXJlbGlhLWZldGNoLWNsaWVudC1yZXF1ZXN0LXN0YXJ0ZWRcIiwge1xuICAgICAgICAgICAgICAgIGJ1YmJsZXM6IHRydWUsXG4gICAgICAgICAgICAgICAgY2FuY2VsYWJsZTogdHJ1ZVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBzZXRUaW1lb3V0KCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5kaXNwYXRjaGVyLmRpc3BhdGNoRXZlbnQodCk7XG4gICAgICAgICAgICB9KSwgMSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgdHJhY2tSZXF1ZXN0RW5kKCkge1xuICAgICAgICB0aGlzLmlzUmVxdWVzdGluZyA9ICEhLS10aGlzLmFjdGl2ZVJlcXVlc3RDb3VudDtcbiAgICAgICAgaWYgKCF0aGlzLmlzUmVxdWVzdGluZyAmJiBudWxsICE9PSB0aGlzLmRpc3BhdGNoZXIpIHtcbiAgICAgICAgICAgIGNvbnN0IHQgPSBuZXcgdGhpcy5kaXNwYXRjaGVyLm93bmVyRG9jdW1lbnQuZGVmYXVsdFZpZXcuQ3VzdG9tRXZlbnQoXCJhdXJlbGlhLWZldGNoLWNsaWVudC1yZXF1ZXN0cy1kcmFpbmVkXCIsIHtcbiAgICAgICAgICAgICAgICBidWJibGVzOiB0cnVlLFxuICAgICAgICAgICAgICAgIGNhbmNlbGFibGU6IHRydWVcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgc2V0VGltZW91dCgoKCkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuZGlzcGF0Y2hlci5kaXNwYXRjaEV2ZW50KHQpO1xuICAgICAgICAgICAgfSksIDEpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHByb2Nlc3NSZXF1ZXN0KHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuYXBwbHlJbnRlcmNlcHRvcnModCwgZSwgXCJyZXF1ZXN0XCIsIFwicmVxdWVzdEVycm9yXCIsIHRoaXMpO1xuICAgIH1cbiAgICBwcm9jZXNzUmVzcG9uc2UodCwgZSwgcikge1xuICAgICAgICByZXR1cm4gdGhpcy5hcHBseUludGVyY2VwdG9ycyh0LCBlLCBcInJlc3BvbnNlXCIsIFwicmVzcG9uc2VFcnJvclwiLCByLCB0aGlzKTtcbiAgICB9XG4gICAgYXBwbHlJbnRlcmNlcHRvcnModCwgZSwgciwgbiwgLi4ucykge1xuICAgICAgICByZXR1cm4gKHZvaWQgMCAhPT0gZSA/IGUgOiBbXSkucmVkdWNlKCgodCwgZSkgPT4ge1xuICAgICAgICAgICAgY29uc3QgaSA9IGVbcl07XG4gICAgICAgICAgICBjb25zdCBvID0gZVtuXTtcbiAgICAgICAgICAgIHJldHVybiB0LnRoZW4oaSA/IHQgPT4gaS5jYWxsKGUsIHQsIC4uLnMpIDogcCwgbyA/IHQgPT4gby5jYWxsKGUsIHQsIC4uLnMpIDogZCk7XG4gICAgICAgIH0pLCBQcm9taXNlLnJlc29sdmUodCkpO1xuICAgIH1cbiAgICBjYWxsRmV0Y2godCwgZSwgciwgbikge1xuICAgICAgICBpZiAoIXIpIHIgPSB7fTtcbiAgICAgICAgci5tZXRob2QgPSBuO1xuICAgICAgICBpZiAoZSkgci5ib2R5ID0gZTtcbiAgICAgICAgcmV0dXJuIHRoaXMuZmV0Y2godCwgcik7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBoKHQpIHtcbiAgICBjb25zdCBlID0ge307XG4gICAgY29uc3QgciA9IHZvaWQgMCAhPT0gdCA/IHQgOiB7fTtcbiAgICBmb3IgKGNvbnN0IHQgaW4gcikgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChyLCB0KSkgZVt0XSA9IFwiZnVuY3Rpb25cIiA9PT0gdHlwZW9mIHJbdF0gPyByW3RdKCkgOiByW3RdO1xuICAgIHJldHVybiBlO1xufVxuXG5mdW5jdGlvbiBsKHQsIGUpIHtcbiAgICBpZiAoYy50ZXN0KGUpKSByZXR1cm4gZTtcbiAgICByZXR1cm4gKHZvaWQgMCAhPT0gdCA/IHQgOiBcIlwiKSArIGU7XG59XG5cbmZ1bmN0aW9uIGEodCwgZSkge1xuICAgIGNvbnN0IHIgPSB2b2lkIDAgIT09IGUgPyBlIDoge307XG4gICAgZm9yIChjb25zdCBlIGluIHIpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwociwgZSkgJiYgIXQuaGFzKGUpKSB0LnNldChlLCByW2VdKTtcbn1cblxuZnVuY3Rpb24gZih0KSB7XG4gICAgdHJ5IHtcbiAgICAgICAgSlNPTi5wYXJzZSh0KTtcbiAgICB9IGNhdGNoICh0KSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgcmV0dXJuIHRydWU7XG59XG5cbmZ1bmN0aW9uIHAodCkge1xuICAgIHJldHVybiB0O1xufVxuXG5mdW5jdGlvbiBkKHQpIHtcbiAgICB0aHJvdyB0O1xufVxuXG5leHBvcnQgeyBIdHRwQ2xpZW50LCBIdHRwQ2xpZW50Q29uZmlndXJhdGlvbiwgdSBhcyBJSHR0cENsaWVudCwgUmV0cnlJbnRlcmNlcHRvciwgZSBhcyBqc29uLCByIGFzIHJldHJ5U3RyYXRlZ3kgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluZGV4LmpzLm1hcFxuIiwiaW1wb3J0IHsgTWV0YWRhdGEgYXMgdCwgYXBwbHlNZXRhZGF0YVBvbHlmaWxsIGFzIGUsIGlzT2JqZWN0IGFzIG4gfSBmcm9tIFwiQGF1cmVsaWEvbWV0YWRhdGFcIjtcblxuZXhwb3J0IHsgTWV0YWRhdGEsIGFwcGx5TWV0YWRhdGFQb2x5ZmlsbCwgaXNOdWxsT3JVbmRlZmluZWQsIGlzT2JqZWN0LCBtZXRhZGF0YSB9IGZyb20gXCJAYXVyZWxpYS9tZXRhZGF0YVwiO1xuXG5leHBvcnQgeyBQbGF0Zm9ybSwgVGFzaywgVGFza0Fib3J0RXJyb3IsIFRhc2tRdWV1ZSwgVGFza1F1ZXVlUHJpb3JpdHksIFRhc2tTdGF0dXMgfSBmcm9tIFwiQGF1cmVsaWEvcGxhdGZvcm1cIjtcblxuY29uc3QgciA9IHt9O1xuXG5mdW5jdGlvbiBpKHQpIHtcbiAgICBzd2l0Y2ggKHR5cGVvZiB0KSB7XG4gICAgICBjYXNlIFwibnVtYmVyXCI6XG4gICAgICAgIHJldHVybiB0ID49IDAgJiYgKDAgfCB0KSA9PT0gdDtcblxuICAgICAgY2FzZSBcInN0cmluZ1wiOlxuICAgICAgICB7XG4gICAgICAgICAgICBjb25zdCBlID0gclt0XTtcbiAgICAgICAgICAgIGlmICh2b2lkIDAgIT09IGUpIHJldHVybiBlO1xuICAgICAgICAgICAgY29uc3QgbiA9IHQubGVuZ3RoO1xuICAgICAgICAgICAgaWYgKDAgPT09IG4pIHJldHVybiByW3RdID0gZmFsc2U7XG4gICAgICAgICAgICBsZXQgaSA9IDA7XG4gICAgICAgICAgICBsZXQgcyA9IDA7XG4gICAgICAgICAgICBmb3IgKDtzIDwgbjsgKytzKSB7XG4gICAgICAgICAgICAgICAgaSA9IHQuY2hhckNvZGVBdChzKTtcbiAgICAgICAgICAgICAgICBpZiAoMCA9PT0gcyAmJiA0OCA9PT0gaSAmJiBuID4gMSB8fCBpIDwgNDggfHwgaSA+IDU3KSByZXR1cm4gclt0XSA9IGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHJbdF0gPSB0cnVlO1xuICAgICAgICB9XG5cbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIHModCkge1xuICAgIHN3aXRjaCAodHlwZW9mIHQpIHtcbiAgICAgIGNhc2UgXCJudW1iZXJcIjpcbiAgICAgIGNhc2UgXCJiaWdpbnRcIjpcbiAgICAgICAgcmV0dXJuIHRydWU7XG5cbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIG8odCkge1xuICAgIHN3aXRjaCAodHlwZW9mIHQpIHtcbiAgICAgIGNhc2UgXCJzdHJpbmdcIjpcbiAgICAgICAgcmV0dXJuIHRydWU7XG5cbiAgICAgIGNhc2UgXCJvYmplY3RcIjpcbiAgICAgICAgcmV0dXJuIHQgaW5zdGFuY2VvZiBEYXRlO1xuXG4gICAgICBkZWZhdWx0OlxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxufVxuXG5jb25zdCB1ID0gZnVuY3Rpb24oKSB7XG4gICAgbGV0IHQ7XG4gICAgKGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgdFt0W1wibm9uZVwiXSA9IDBdID0gXCJub25lXCI7XG4gICAgICAgIHRbdFtcImRpZ2l0XCJdID0gMV0gPSBcImRpZ2l0XCI7XG4gICAgICAgIHRbdFtcInVwcGVyXCJdID0gMl0gPSBcInVwcGVyXCI7XG4gICAgICAgIHRbdFtcImxvd2VyXCJdID0gM10gPSBcImxvd2VyXCI7XG4gICAgfSkodCB8fCAodCA9IHt9KSk7XG4gICAgY29uc3QgZSA9IE9iamVjdC5hc3NpZ24oT2JqZWN0LmNyZWF0ZShudWxsKSwge1xuICAgICAgICAwOiB0cnVlLFxuICAgICAgICAxOiB0cnVlLFxuICAgICAgICAyOiB0cnVlLFxuICAgICAgICAzOiB0cnVlLFxuICAgICAgICA0OiB0cnVlLFxuICAgICAgICA1OiB0cnVlLFxuICAgICAgICA2OiB0cnVlLFxuICAgICAgICA3OiB0cnVlLFxuICAgICAgICA4OiB0cnVlLFxuICAgICAgICA5OiB0cnVlXG4gICAgfSk7XG4gICAgZnVuY3Rpb24gbih0KSB7XG4gICAgICAgIGlmIChcIlwiID09PSB0KSByZXR1cm4gMDtcbiAgICAgICAgaWYgKHQgIT09IHQudG9VcHBlckNhc2UoKSkgcmV0dXJuIDM7XG4gICAgICAgIGlmICh0ICE9PSB0LnRvTG93ZXJDYXNlKCkpIHJldHVybiAyO1xuICAgICAgICBpZiAodHJ1ZSA9PT0gZVt0XSkgcmV0dXJuIDE7XG4gICAgICAgIHJldHVybiAwO1xuICAgIH1cbiAgICByZXR1cm4gZnVuY3Rpb24odCwgZSkge1xuICAgICAgICBjb25zdCByID0gdC5sZW5ndGg7XG4gICAgICAgIGlmICgwID09PSByKSByZXR1cm4gdDtcbiAgICAgICAgbGV0IGkgPSBmYWxzZTtcbiAgICAgICAgbGV0IHMgPSBcIlwiO1xuICAgICAgICBsZXQgbztcbiAgICAgICAgbGV0IHUgPSBcIlwiO1xuICAgICAgICBsZXQgbCA9IDA7XG4gICAgICAgIGxldCBjID0gdC5jaGFyQXQoMCk7XG4gICAgICAgIGxldCBmID0gbihjKTtcbiAgICAgICAgbGV0IGEgPSAwO1xuICAgICAgICBmb3IgKDthIDwgcjsgKythKSB7XG4gICAgICAgICAgICBvID0gbDtcbiAgICAgICAgICAgIHUgPSBjO1xuICAgICAgICAgICAgbCA9IGY7XG4gICAgICAgICAgICBjID0gdC5jaGFyQXQoYSArIDEpO1xuICAgICAgICAgICAgZiA9IG4oYyk7XG4gICAgICAgICAgICBpZiAoMCA9PT0gbCkge1xuICAgICAgICAgICAgICAgIGlmIChzLmxlbmd0aCA+IDApIGkgPSB0cnVlO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBpZiAoIWkgJiYgcy5sZW5ndGggPiAwICYmIDIgPT09IGwpIGkgPSAzID09PSBvIHx8IDMgPT09IGY7XG4gICAgICAgICAgICAgICAgcyArPSBlKHUsIGkpO1xuICAgICAgICAgICAgICAgIGkgPSBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcztcbiAgICB9O1xufSgpO1xuXG5jb25zdCBsID0gZnVuY3Rpb24oKSB7XG4gICAgY29uc3QgdCA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gICAgZnVuY3Rpb24gZSh0LCBlKSB7XG4gICAgICAgIHJldHVybiBlID8gdC50b1VwcGVyQ2FzZSgpIDogdC50b0xvd2VyQ2FzZSgpO1xuICAgIH1cbiAgICByZXR1cm4gZnVuY3Rpb24obikge1xuICAgICAgICBsZXQgciA9IHRbbl07XG4gICAgICAgIGlmICh2b2lkIDAgPT09IHIpIHIgPSB0W25dID0gdShuLCBlKTtcbiAgICAgICAgcmV0dXJuIHI7XG4gICAgfTtcbn0oKTtcblxuY29uc3QgYyA9IGZ1bmN0aW9uKCkge1xuICAgIGNvbnN0IHQgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuICAgIHJldHVybiBmdW5jdGlvbihlKSB7XG4gICAgICAgIGxldCBuID0gdFtlXTtcbiAgICAgICAgaWYgKHZvaWQgMCA9PT0gbikge1xuICAgICAgICAgICAgbiA9IGwoZSk7XG4gICAgICAgICAgICBpZiAobi5sZW5ndGggPiAwKSBuID0gblswXS50b1VwcGVyQ2FzZSgpICsgbi5zbGljZSgxKTtcbiAgICAgICAgICAgIHRbZV0gPSBuO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBuO1xuICAgIH07XG59KCk7XG5cbmNvbnN0IGYgPSBmdW5jdGlvbigpIHtcbiAgICBjb25zdCB0ID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiAgICBmdW5jdGlvbiBlKHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIGUgPyBgLSR7dC50b0xvd2VyQ2FzZSgpfWAgOiB0LnRvTG93ZXJDYXNlKCk7XG4gICAgfVxuICAgIHJldHVybiBmdW5jdGlvbihuKSB7XG4gICAgICAgIGxldCByID0gdFtuXTtcbiAgICAgICAgaWYgKHZvaWQgMCA9PT0gcikgciA9IHRbbl0gPSB1KG4sIGUpO1xuICAgICAgICByZXR1cm4gcjtcbiAgICB9O1xufSgpO1xuXG5mdW5jdGlvbiBhKHQpIHtcbiAgICBjb25zdCB7bGVuZ3RoOiBlfSA9IHQ7XG4gICAgY29uc3QgbiA9IEFycmF5KGUpO1xuICAgIGxldCByID0gMDtcbiAgICBmb3IgKDtyIDwgZTsgKytyKSBuW3JdID0gdFtyXTtcbiAgICByZXR1cm4gbjtcbn1cblxuY29uc3QgaCA9IHt9O1xuXG5mdW5jdGlvbiBkKHQpIHtcbiAgICBpZiAodm9pZCAwID09PSBoW3RdKSBoW3RdID0gMDtcbiAgICByZXR1cm4gKytoW3RdO1xufVxuXG5mdW5jdGlvbiB2KHQpIHtcbiAgICBoW3RdID0gMDtcbn1cblxuZnVuY3Rpb24gdyh0LCBlKSB7XG4gICAgcmV0dXJuIHQgLSBlO1xufVxuXG5mdW5jdGlvbiBnKHQsIGUsIG4pIHtcbiAgICBpZiAodm9pZCAwID09PSB0IHx8IG51bGwgPT09IHQgfHwgdCA9PT0gT3QpIGlmICh2b2lkIDAgPT09IGUgfHwgbnVsbCA9PT0gZSB8fCBlID09PSBPdCkgcmV0dXJuIE90OyBlbHNlIHJldHVybiBuID8gZS5zbGljZSgwKSA6IGU7IGVsc2UgaWYgKHZvaWQgMCA9PT0gZSB8fCBudWxsID09PSBlIHx8IGUgPT09IE90KSByZXR1cm4gbiA/IHQuc2xpY2UoMCkgOiB0O1xuICAgIGNvbnN0IHIgPSB7fTtcbiAgICBjb25zdCBpID0gbiA/IHQuc2xpY2UoMCkgOiB0O1xuICAgIGxldCBzID0gdC5sZW5ndGg7XG4gICAgbGV0IG8gPSBlLmxlbmd0aDtcbiAgICB3aGlsZSAocy0tID4gMCkgclt0W3NdXSA9IHRydWU7XG4gICAgbGV0IHU7XG4gICAgd2hpbGUgKG8tLSA+IDApIHtcbiAgICAgICAgdSA9IGVbb107XG4gICAgICAgIGlmICh2b2lkIDAgPT09IHJbdV0pIHtcbiAgICAgICAgICAgIGkucHVzaCh1KTtcbiAgICAgICAgICAgIHJbdV0gPSB0cnVlO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBpO1xufVxuXG5mdW5jdGlvbiBtKHQsIGUsIG4pIHtcbiAgICByZXR1cm4ge1xuICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgIGVudW1lcmFibGU6IG4uZW51bWVyYWJsZSxcbiAgICAgICAgZ2V0KCkge1xuICAgICAgICAgICAgY29uc3QgdCA9IG4udmFsdWUuYmluZCh0aGlzKTtcbiAgICAgICAgICAgIFJlZmxlY3QuZGVmaW5lUHJvcGVydHkodGhpcywgZSwge1xuICAgICAgICAgICAgICAgIHZhbHVlOiB0LFxuICAgICAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICBlbnVtZXJhYmxlOiBuLmVudW1lcmFibGVcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIHQ7XG4gICAgICAgIH1cbiAgICB9O1xufVxuXG5mdW5jdGlvbiBwKC4uLnQpIHtcbiAgICBjb25zdCBlID0gW107XG4gICAgbGV0IG4gPSAwO1xuICAgIGNvbnN0IHIgPSB0Lmxlbmd0aDtcbiAgICBsZXQgaSA9IDA7XG4gICAgbGV0IHM7XG4gICAgbGV0IG8gPSAwO1xuICAgIGZvciAoO28gPCByOyArK28pIHtcbiAgICAgICAgcyA9IHRbb107XG4gICAgICAgIGlmICh2b2lkIDAgIT09IHMpIHtcbiAgICAgICAgICAgIGkgPSBzLmxlbmd0aDtcbiAgICAgICAgICAgIGxldCB0ID0gMDtcbiAgICAgICAgICAgIGZvciAoO3QgPCBpOyArK3QpIGVbbisrXSA9IHNbdF07XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGU7XG59XG5cbmZ1bmN0aW9uIHkoLi4udCkge1xuICAgIGNvbnN0IGUgPSB7fTtcbiAgICBjb25zdCBuID0gdC5sZW5ndGg7XG4gICAgbGV0IHI7XG4gICAgbGV0IGk7XG4gICAgbGV0IHMgPSAwO1xuICAgIGZvciAoO24gPiBzOyArK3MpIHtcbiAgICAgICAgciA9IHRbc107XG4gICAgICAgIGlmICh2b2lkIDAgIT09IHIpIGZvciAoaSBpbiByKSBlW2ldID0gcltpXTtcbiAgICB9XG4gICAgcmV0dXJuIGU7XG59XG5cbmZ1bmN0aW9uIFIoLi4udCkge1xuICAgIGNvbnN0IGUgPSB0Lmxlbmd0aDtcbiAgICBsZXQgbjtcbiAgICBsZXQgciA9IDA7XG4gICAgZm9yICg7ZSA+IHI7ICsrcikge1xuICAgICAgICBuID0gdFtyXTtcbiAgICAgICAgaWYgKHZvaWQgMCAhPT0gbikgcmV0dXJuIG47XG4gICAgfVxuICAgIHRocm93IG5ldyBFcnJvcihgTm8gZGVmYXVsdCB2YWx1ZSBmb3VuZGApO1xufVxuXG5jb25zdCBiID0gZnVuY3Rpb24oKSB7XG4gICAgY29uc3QgdCA9IEZ1bmN0aW9uLnByb3RvdHlwZTtcbiAgICBjb25zdCBlID0gT2JqZWN0LmdldFByb3RvdHlwZU9mO1xuICAgIGNvbnN0IG4gPSBuZXcgV2Vha01hcDtcbiAgICBsZXQgciA9IHQ7XG4gICAgbGV0IGkgPSAwO1xuICAgIGxldCBzO1xuICAgIHJldHVybiBmdW5jdGlvbihvKSB7XG4gICAgICAgIHMgPSBuLmdldChvKTtcbiAgICAgICAgaWYgKHZvaWQgMCA9PT0gcykge1xuICAgICAgICAgICAgbi5zZXQobywgcyA9IFsgciA9IG8gXSk7XG4gICAgICAgICAgICBpID0gMDtcbiAgICAgICAgICAgIHdoaWxlICgociA9IGUocikpICE9PSB0KSBzWysraV0gPSByO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBzO1xuICAgIH07XG59KCk7XG5cbmZ1bmN0aW9uIEMoLi4udCkge1xuICAgIHJldHVybiBPYmplY3QuYXNzaWduKE9iamVjdC5jcmVhdGUobnVsbCksIC4uLnQpO1xufVxuXG5jb25zdCAkID0gZnVuY3Rpb24oKSB7XG4gICAgY29uc3QgdCA9IG5ldyBXZWFrTWFwO1xuICAgIGxldCBlID0gZmFsc2U7XG4gICAgbGV0IG4gPSBcIlwiO1xuICAgIGxldCByID0gMDtcbiAgICByZXR1cm4gZnVuY3Rpb24oaSkge1xuICAgICAgICBlID0gdC5nZXQoaSk7XG4gICAgICAgIGlmICh2b2lkIDAgPT09IGUpIHtcbiAgICAgICAgICAgIG4gPSBpLnRvU3RyaW5nKCk7XG4gICAgICAgICAgICByID0gbi5sZW5ndGg7XG4gICAgICAgICAgICBlID0gciA+PSAyOSAmJiByIDw9IDEwMCAmJiAxMjUgPT09IG4uY2hhckNvZGVBdChyIC0gMSkgJiYgbi5jaGFyQ29kZUF0KHIgLSAyKSA8PSAzMiAmJiA5MyA9PT0gbi5jaGFyQ29kZUF0KHIgLSAzKSAmJiAxMDEgPT09IG4uY2hhckNvZGVBdChyIC0gNCkgJiYgMTAwID09PSBuLmNoYXJDb2RlQXQociAtIDUpICYmIDExMSA9PT0gbi5jaGFyQ29kZUF0KHIgLSA2KSAmJiA5OSA9PT0gbi5jaGFyQ29kZUF0KHIgLSA3KSAmJiAzMiA9PT0gbi5jaGFyQ29kZUF0KHIgLSA4KSAmJiAxMDEgPT09IG4uY2hhckNvZGVBdChyIC0gOSkgJiYgMTE4ID09PSBuLmNoYXJDb2RlQXQociAtIDEwKSAmJiAxMDUgPT09IG4uY2hhckNvZGVBdChyIC0gMTEpICYmIDExNiA9PT0gbi5jaGFyQ29kZUF0KHIgLSAxMikgJiYgOTcgPT09IG4uY2hhckNvZGVBdChyIC0gMTMpICYmIDExMCA9PT0gbi5jaGFyQ29kZUF0KHIgLSAxNCkgJiYgODggPT09IG4uY2hhckNvZGVBdChyIC0gMTUpO1xuICAgICAgICAgICAgdC5zZXQoaSwgZSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGU7XG4gICAgfTtcbn0oKTtcblxuZnVuY3Rpb24gRSh0LCBlKSB7XG4gICAgaWYgKHQgaW5zdGFuY2VvZiBQcm9taXNlKSByZXR1cm4gdC50aGVuKGUpO1xuICAgIHJldHVybiBlKHQpO1xufVxuXG5mdW5jdGlvbiBBKC4uLnQpIHtcbiAgICBsZXQgZTtcbiAgICBsZXQgbjtcbiAgICBsZXQgcjtcbiAgICBsZXQgaSA9IDA7XG4gICAgbGV0IHMgPSB0Lmxlbmd0aDtcbiAgICBmb3IgKDtpIDwgczsgKytpKSB7XG4gICAgICAgIGUgPSB0W2ldO1xuICAgICAgICBpZiAoKGUgPSB0W2ldKSBpbnN0YW5jZW9mIFByb21pc2UpIGlmICh2b2lkIDAgPT09IG4pIG4gPSBlOyBlbHNlIGlmICh2b2lkIDAgPT09IHIpIHIgPSBbIG4sIGUgXTsgZWxzZSByLnB1c2goZSk7XG4gICAgfVxuICAgIGlmICh2b2lkIDAgPT09IHIpIHJldHVybiBuO1xuICAgIHJldHVybiBQcm9taXNlLmFsbChyKTtcbn1cblxuY29uc3QgaiA9IHQuZ2V0T3duO1xuXG5jb25zdCBPID0gdC5oYXNPd247XG5cbmNvbnN0IGsgPSB0LmRlZmluZTtcblxuY29uc3QgSSA9IHQgPT4gXCJmdW5jdGlvblwiID09PSB0eXBlb2YgdDtcblxuY29uc3QgTSA9IHQgPT4gXCJzdHJpbmdcIiA9PT0gdHlwZW9mIHQ7XG5cbmNvbnN0IFQgPSBcImF1OmFubm90YXRpb25cIjtcblxuY29uc3QgRiA9ICh0LCBlKSA9PiB7XG4gICAgaWYgKHZvaWQgMCA9PT0gZSkgcmV0dXJuIGAke1R9OiR7dH1gO1xuICAgIHJldHVybiBgJHtUfToke3R9OiR7ZX1gO1xufTtcblxuY29uc3QgVSA9ICh0LCBlKSA9PiB7XG4gICAgY29uc3QgbiA9IGooVCwgdCk7XG4gICAgaWYgKHZvaWQgMCA9PT0gbikgayhULCBbIGUgXSwgdCk7IGVsc2Ugbi5wdXNoKGUpO1xufTtcblxuY29uc3QgTCA9IE9iamVjdC5mcmVlemUoe1xuICAgIG5hbWU6IFwiYXU6YW5ub3RhdGlvblwiLFxuICAgIGFwcGVuZFRvOiBVLFxuICAgIHNldCh0LCBlLCBuKSB7XG4gICAgICAgIGsoRihlKSwgbiwgdCk7XG4gICAgfSxcbiAgICBnZXQ6ICh0LCBlKSA9PiBqKEYoZSksIHQpLFxuICAgIGdldEtleXModCkge1xuICAgICAgICBsZXQgZSA9IGooVCwgdCk7XG4gICAgICAgIGlmICh2b2lkIDAgPT09IGUpIGsoVCwgZSA9IFtdLCB0KTtcbiAgICAgICAgcmV0dXJuIGU7XG4gICAgfSxcbiAgICBpc0tleTogdCA9PiB0LnN0YXJ0c1dpdGgoVCksXG4gICAga2V5Rm9yOiBGXG59KTtcblxuY29uc3QgUCA9IFwiYXU6cmVzb3VyY2VcIjtcblxuY29uc3QgRCA9IE9iamVjdC5mcmVlemUoe1xuICAgIG5hbWU6IFAsXG4gICAgYXBwZW5kVG8odCwgZSkge1xuICAgICAgICBjb25zdCBuID0gaihQLCB0KTtcbiAgICAgICAgaWYgKHZvaWQgMCA9PT0gbikgayhQLCBbIGUgXSwgdCk7IGVsc2Ugbi5wdXNoKGUpO1xuICAgIH0sXG4gICAgaGFzOiB0ID0+IE8oUCwgdCksXG4gICAgZ2V0QWxsKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IGooUCwgdCk7XG4gICAgICAgIGlmICh2b2lkIDAgPT09IGUpIHJldHVybiBPdDsgZWxzZSByZXR1cm4gZS5tYXAoKGUgPT4gaihlLCB0KSkpO1xuICAgIH0sXG4gICAgZ2V0S2V5cyh0KSB7XG4gICAgICAgIGxldCBlID0gaihQLCB0KTtcbiAgICAgICAgaWYgKHZvaWQgMCA9PT0gZSkgayhQLCBlID0gW10sIHQpO1xuICAgICAgICByZXR1cm4gZTtcbiAgICB9LFxuICAgIGlzS2V5OiB0ID0+IHQuc3RhcnRzV2l0aChQKSxcbiAgICBrZXlGb3IodCwgZSkge1xuICAgICAgICBpZiAodm9pZCAwID09PSBlKSByZXR1cm4gYCR7UH06JHt0fWA7XG4gICAgICAgIHJldHVybiBgJHtQfToke3R9OiR7ZX1gO1xuICAgIH1cbn0pO1xuXG5jb25zdCBTID0ge1xuICAgIGFubm90YXRpb246IEwsXG4gICAgcmVzb3VyY2U6IERcbn07XG5cbmNvbnN0IE4gPSBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5O1xuXG5mdW5jdGlvbiBXKHQsIGUsIG4sIHIpIHtcbiAgICBsZXQgaSA9IGooRih0KSwgbik7XG4gICAgaWYgKHZvaWQgMCA9PT0gaSkge1xuICAgICAgICBpID0gZVt0XTtcbiAgICAgICAgaWYgKHZvaWQgMCA9PT0gaSkge1xuICAgICAgICAgICAgaSA9IG5bdF07XG4gICAgICAgICAgICBpZiAodm9pZCAwID09PSBpIHx8ICFOLmNhbGwobiwgdCkpIHJldHVybiByKCk7XG4gICAgICAgICAgICByZXR1cm4gaTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gaTtcbiAgICB9XG4gICAgcmV0dXJuIGk7XG59XG5cbmZ1bmN0aW9uIEIodCwgZSwgbikge1xuICAgIGxldCByID0gaihGKHQpLCBlKTtcbiAgICBpZiAodm9pZCAwID09PSByKSB7XG4gICAgICAgIHIgPSBlW3RdO1xuICAgICAgICBpZiAodm9pZCAwID09PSByIHx8ICFOLmNhbGwoZSwgdCkpIHJldHVybiBuKCk7XG4gICAgICAgIHJldHVybiByO1xuICAgIH1cbiAgICByZXR1cm4gcjtcbn1cblxuZnVuY3Rpb24gUSh0LCBlLCBuKSB7XG4gICAgY29uc3QgciA9IGVbdF07XG4gICAgaWYgKHZvaWQgMCA9PT0gcikgcmV0dXJuIG4oKTtcbiAgICByZXR1cm4gcjtcbn1cblxuZShSZWZsZWN0LCBmYWxzZSwgZmFsc2UpO1xuXG5jbGFzcyBSZXNvbHZlckJ1aWxkZXIge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUpIHtcbiAgICAgICAgdGhpcy5jb250YWluZXIgPSB0O1xuICAgICAgICB0aGlzLmtleSA9IGU7XG4gICAgfVxuICAgIGluc3RhbmNlKHQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucmVnaXN0ZXJSZXNvbHZlcigwLCB0KTtcbiAgICB9XG4gICAgc2luZ2xldG9uKHQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucmVnaXN0ZXJSZXNvbHZlcigxLCB0KTtcbiAgICB9XG4gICAgdHJhbnNpZW50KHQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucmVnaXN0ZXJSZXNvbHZlcigyLCB0KTtcbiAgICB9XG4gICAgY2FsbGJhY2sodCkge1xuICAgICAgICByZXR1cm4gdGhpcy5yZWdpc3RlclJlc29sdmVyKDMsIHQpO1xuICAgIH1cbiAgICBjYWNoZWRDYWxsYmFjayh0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJlZ2lzdGVyUmVzb2x2ZXIoMywgQ3QodCkpO1xuICAgIH1cbiAgICBhbGlhc1RvKHQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucmVnaXN0ZXJSZXNvbHZlcig1LCB0KTtcbiAgICB9XG4gICAgcmVnaXN0ZXJSZXNvbHZlcih0LCBlKSB7XG4gICAgICAgIGNvbnN0IHtjb250YWluZXI6IG4sIGtleTogcn0gPSB0aGlzO1xuICAgICAgICB0aGlzLmNvbnRhaW5lciA9IHRoaXMua2V5ID0gdm9pZCAwO1xuICAgICAgICByZXR1cm4gbi5yZWdpc3RlclJlc29sdmVyKHIsIG5ldyBSZXNvbHZlcihyLCB0LCBlKSk7XG4gICAgfVxufVxuXG5mdW5jdGlvbiB4KHQpIHtcbiAgICBjb25zdCBlID0gdC5zbGljZSgpO1xuICAgIGNvbnN0IG4gPSBPYmplY3Qua2V5cyh0KTtcbiAgICBjb25zdCByID0gbi5sZW5ndGg7XG4gICAgbGV0IHM7XG4gICAgZm9yIChsZXQgbyA9IDA7IG8gPCByOyArK28pIHtcbiAgICAgICAgcyA9IG5bb107XG4gICAgICAgIGlmICghaShzKSkgZVtzXSA9IHRbc107XG4gICAgfVxuICAgIHJldHVybiBlO1xufVxuXG5jb25zdCB6ID0ge1xuICAgIG5vbmUodCkge1xuICAgICAgICB0aHJvdyBFcnJvcihgQVVSMDAwMjoke3QudG9TdHJpbmcoKX1gKTtcbiAgICB9LFxuICAgIHNpbmdsZXRvbih0KSB7XG4gICAgICAgIHJldHVybiBuZXcgUmVzb2x2ZXIodCwgMSwgdCk7XG4gICAgfSxcbiAgICB0cmFuc2llbnQodCkge1xuICAgICAgICByZXR1cm4gbmV3IFJlc29sdmVyKHQsIDIsIHQpO1xuICAgIH1cbn07XG5cbmNsYXNzIENvbnRhaW5lckNvbmZpZ3VyYXRpb24ge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUpIHtcbiAgICAgICAgdGhpcy5pbmhlcml0UGFyZW50UmVzb3VyY2VzID0gdDtcbiAgICAgICAgdGhpcy5kZWZhdWx0UmVzb2x2ZXIgPSBlO1xuICAgIH1cbiAgICBzdGF0aWMgZnJvbSh0KSB7XG4gICAgICAgIHZhciBlLCBuO1xuICAgICAgICBpZiAodm9pZCAwID09PSB0IHx8IHQgPT09IENvbnRhaW5lckNvbmZpZ3VyYXRpb24uREVGQVVMVCkgcmV0dXJuIENvbnRhaW5lckNvbmZpZ3VyYXRpb24uREVGQVVMVDtcbiAgICAgICAgcmV0dXJuIG5ldyBDb250YWluZXJDb25maWd1cmF0aW9uKG51bGwgIT09IChlID0gdC5pbmhlcml0UGFyZW50UmVzb3VyY2VzKSAmJiB2b2lkIDAgIT09IGUgPyBlIDogZmFsc2UsIG51bGwgIT09IChuID0gdC5kZWZhdWx0UmVzb2x2ZXIpICYmIHZvaWQgMCAhPT0gbiA/IG4gOiB6LnNpbmdsZXRvbik7XG4gICAgfVxufVxuXG5Db250YWluZXJDb25maWd1cmF0aW9uLkRFRkFVTFQgPSBDb250YWluZXJDb25maWd1cmF0aW9uLmZyb20oe30pO1xuXG5jb25zdCBHID0ge1xuICAgIGNyZWF0ZUNvbnRhaW5lcih0KSB7XG4gICAgICAgIHJldHVybiBuZXcgQ29udGFpbmVyKG51bGwsIENvbnRhaW5lckNvbmZpZ3VyYXRpb24uZnJvbSh0KSk7XG4gICAgfSxcbiAgICBnZXREZXNpZ25QYXJhbXR5cGVzKHQpIHtcbiAgICAgICAgcmV0dXJuIGooXCJkZXNpZ246cGFyYW10eXBlc1wiLCB0KTtcbiAgICB9LFxuICAgIGdldEFubm90YXRpb25QYXJhbXR5cGVzKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IEYoXCJkaTpwYXJhbXR5cGVzXCIpO1xuICAgICAgICByZXR1cm4gaihlLCB0KTtcbiAgICB9LFxuICAgIGdldE9yQ3JlYXRlQW5ub3RhdGlvblBhcmFtVHlwZXM6IF8sXG4gICAgZ2V0RGVwZW5kZW5jaWVzOiBLLFxuICAgIGNyZWF0ZUludGVyZmFjZSh0LCBlKSB7XG4gICAgICAgIGNvbnN0IG4gPSBJKHQpID8gdCA6IGU7XG4gICAgICAgIGNvbnN0IHIgPSBNKHQpID8gdCA6IHZvaWQgMDtcbiAgICAgICAgY29uc3QgaSA9IGZ1bmN0aW9uKHQsIGUsIG4pIHtcbiAgICAgICAgICAgIGlmIChudWxsID09IHQgfHwgdm9pZCAwICE9PSBuZXcudGFyZ2V0KSB0aHJvdyBuZXcgRXJyb3IoYEFVUjAwMDE6JHtpLmZyaWVuZGx5TmFtZX1gKTtcbiAgICAgICAgICAgIGNvbnN0IHIgPSBfKHQpO1xuICAgICAgICAgICAgcltuXSA9IGk7XG4gICAgICAgIH07XG4gICAgICAgIGkuJGlzSW50ZXJmYWNlID0gdHJ1ZTtcbiAgICAgICAgaS5mcmllbmRseU5hbWUgPSBudWxsID09IHIgPyBcIihhbm9ueW1vdXMpXCIgOiByO1xuICAgICAgICBpZiAobnVsbCAhPSBuKSBpLnJlZ2lzdGVyID0gZnVuY3Rpb24odCwgZSkge1xuICAgICAgICAgICAgcmV0dXJuIG4obmV3IFJlc29sdmVyQnVpbGRlcih0LCBudWxsICE9PSBlICYmIHZvaWQgMCAhPT0gZSA/IGUgOiBpKSk7XG4gICAgICAgIH07XG4gICAgICAgIGkudG9TdHJpbmcgPSBmdW5jdGlvbiB0KCkge1xuICAgICAgICAgICAgcmV0dXJuIGBJbnRlcmZhY2VTeW1ib2w8JHtpLmZyaWVuZGx5TmFtZX0+YDtcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIGk7XG4gICAgfSxcbiAgICBpbmplY3QoLi4udCkge1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24oZSwgbiwgcikge1xuICAgICAgICAgICAgaWYgKFwibnVtYmVyXCIgPT09IHR5cGVvZiByKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgbiA9IF8oZSk7XG4gICAgICAgICAgICAgICAgY29uc3QgaSA9IHRbMF07XG4gICAgICAgICAgICAgICAgaWYgKHZvaWQgMCAhPT0gaSkgbltyXSA9IGk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKG4pIHtcbiAgICAgICAgICAgICAgICBjb25zdCByID0gXyhlLmNvbnN0cnVjdG9yKTtcbiAgICAgICAgICAgICAgICBjb25zdCBpID0gdFswXTtcbiAgICAgICAgICAgICAgICBpZiAodm9pZCAwICE9PSBpKSByW25dID0gaTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAocikge1xuICAgICAgICAgICAgICAgIGNvbnN0IGUgPSByLnZhbHVlO1xuICAgICAgICAgICAgICAgIGNvbnN0IG4gPSBfKGUpO1xuICAgICAgICAgICAgICAgIGxldCBpO1xuICAgICAgICAgICAgICAgIGZvciAobGV0IGUgPSAwOyBlIDwgdC5sZW5ndGg7ICsrZSkge1xuICAgICAgICAgICAgICAgICAgICBpID0gdFtlXTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHZvaWQgMCAhPT0gaSkgbltlXSA9IGk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBjb25zdCBuID0gXyhlKTtcbiAgICAgICAgICAgICAgICBsZXQgcjtcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBlID0gMDsgZSA8IHQubGVuZ3RoOyArK2UpIHtcbiAgICAgICAgICAgICAgICAgICAgciA9IHRbZV07XG4gICAgICAgICAgICAgICAgICAgIGlmICh2b2lkIDAgIT09IHIpIG5bZV0gPSByO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICB9LFxuICAgIHRyYW5zaWVudCh0KSB7XG4gICAgICAgIHQucmVnaXN0ZXIgPSBmdW5jdGlvbiBlKG4pIHtcbiAgICAgICAgICAgIGNvbnN0IHIgPSAkdC50cmFuc2llbnQodCwgdCk7XG4gICAgICAgICAgICByZXR1cm4gci5yZWdpc3RlcihuLCB0KTtcbiAgICAgICAgfTtcbiAgICAgICAgdC5yZWdpc3RlckluUmVxdWVzdG9yID0gZmFsc2U7XG4gICAgICAgIHJldHVybiB0O1xuICAgIH0sXG4gICAgc2luZ2xldG9uKHQsIGUgPSBaKSB7XG4gICAgICAgIHQucmVnaXN0ZXIgPSBmdW5jdGlvbiBlKG4pIHtcbiAgICAgICAgICAgIGNvbnN0IHIgPSAkdC5zaW5nbGV0b24odCwgdCk7XG4gICAgICAgICAgICByZXR1cm4gci5yZWdpc3RlcihuLCB0KTtcbiAgICAgICAgfTtcbiAgICAgICAgdC5yZWdpc3RlckluUmVxdWVzdG9yID0gZS5zY29wZWQ7XG4gICAgICAgIHJldHVybiB0O1xuICAgIH1cbn07XG5cbmZ1bmN0aW9uIEsodCkge1xuICAgIGNvbnN0IGUgPSBGKFwiZGk6ZGVwZW5kZW5jaWVzXCIpO1xuICAgIGxldCBuID0gaihlLCB0KTtcbiAgICBpZiAodm9pZCAwID09PSBuKSB7XG4gICAgICAgIGNvbnN0IHIgPSB0LmluamVjdDtcbiAgICAgICAgaWYgKHZvaWQgMCA9PT0gcikge1xuICAgICAgICAgICAgY29uc3QgZSA9IEcuZ2V0RGVzaWduUGFyYW10eXBlcyh0KTtcbiAgICAgICAgICAgIGNvbnN0IHIgPSBHLmdldEFubm90YXRpb25QYXJhbXR5cGVzKHQpO1xuICAgICAgICAgICAgaWYgKHZvaWQgMCA9PT0gZSkgaWYgKHZvaWQgMCA9PT0gcikge1xuICAgICAgICAgICAgICAgIGNvbnN0IGUgPSBPYmplY3QuZ2V0UHJvdG90eXBlT2YodCk7XG4gICAgICAgICAgICAgICAgaWYgKEkoZSkgJiYgZSAhPT0gRnVuY3Rpb24ucHJvdG90eXBlKSBuID0geChLKGUpKTsgZWxzZSBuID0gW107XG4gICAgICAgICAgICB9IGVsc2UgbiA9IHgocik7IGVsc2UgaWYgKHZvaWQgMCA9PT0gcikgbiA9IHgoZSk7IGVsc2Uge1xuICAgICAgICAgICAgICAgIG4gPSB4KGUpO1xuICAgICAgICAgICAgICAgIGxldCB0ID0gci5sZW5ndGg7XG4gICAgICAgICAgICAgICAgbGV0IHM7XG4gICAgICAgICAgICAgICAgbGV0IG8gPSAwO1xuICAgICAgICAgICAgICAgIGZvciAoO28gPCB0OyArK28pIHtcbiAgICAgICAgICAgICAgICAgICAgcyA9IHJbb107XG4gICAgICAgICAgICAgICAgICAgIGlmICh2b2lkIDAgIT09IHMpIG5bb10gPSBzO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjb25zdCB1ID0gT2JqZWN0LmtleXMocik7XG4gICAgICAgICAgICAgICAgbGV0IGw7XG4gICAgICAgICAgICAgICAgbyA9IDA7XG4gICAgICAgICAgICAgICAgdCA9IHUubGVuZ3RoO1xuICAgICAgICAgICAgICAgIGZvciAobyA9IDA7IG8gPCB0OyArK28pIHtcbiAgICAgICAgICAgICAgICAgICAgbCA9IHVbb107XG4gICAgICAgICAgICAgICAgICAgIGlmICghaShsKSkgbltsXSA9IHJbbF07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2UgbiA9IHgocik7XG4gICAgICAgIGsoZSwgbiwgdCk7XG4gICAgICAgIFUodCwgZSk7XG4gICAgfVxuICAgIHJldHVybiBuO1xufVxuXG5mdW5jdGlvbiBfKHQpIHtcbiAgICBjb25zdCBlID0gRihcImRpOnBhcmFtdHlwZXNcIik7XG4gICAgbGV0IG4gPSBqKGUsIHQpO1xuICAgIGlmICh2b2lkIDAgPT09IG4pIHtcbiAgICAgICAgayhlLCBuID0gW10sIHQpO1xuICAgICAgICBVKHQsIGUpO1xuICAgIH1cbiAgICByZXR1cm4gbjtcbn1cblxuY29uc3QgSCA9IEcuY3JlYXRlSW50ZXJmYWNlKFwiSUNvbnRhaW5lclwiKTtcblxuY29uc3QgViA9IEg7XG5cbmZ1bmN0aW9uIHEodCkge1xuICAgIHJldHVybiBmdW5jdGlvbihlKSB7XG4gICAgICAgIGNvbnN0IG4gPSBmdW5jdGlvbih0LCBlLCByKSB7XG4gICAgICAgICAgICBHLmluamVjdChuKSh0LCBlLCByKTtcbiAgICAgICAgfTtcbiAgICAgICAgbi4kaXNSZXNvbHZlciA9IHRydWU7XG4gICAgICAgIG4ucmVzb2x2ZSA9IGZ1bmN0aW9uKG4sIHIpIHtcbiAgICAgICAgICAgIHJldHVybiB0KGUsIG4sIHIpO1xuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gbjtcbiAgICB9O1xufVxuXG5jb25zdCBKID0gRy5pbmplY3Q7XG5cbmZ1bmN0aW9uIFgodCkge1xuICAgIHJldHVybiBHLnRyYW5zaWVudCh0KTtcbn1cblxuZnVuY3Rpb24gWSh0KSB7XG4gICAgcmV0dXJuIG51bGwgPT0gdCA/IFggOiBYKHQpO1xufVxuXG5jb25zdCBaID0ge1xuICAgIHNjb3BlZDogZmFsc2Vcbn07XG5cbmZ1bmN0aW9uIHR0KHQpIHtcbiAgICBpZiAoSSh0KSkgcmV0dXJuIEcuc2luZ2xldG9uKHQpO1xuICAgIHJldHVybiBmdW5jdGlvbihlKSB7XG4gICAgICAgIHJldHVybiBHLnNpbmdsZXRvbihlLCB0KTtcbiAgICB9O1xufVxuXG5mdW5jdGlvbiBldCh0KSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKGUsIG4pIHtcbiAgICAgICAgbiA9ICEhbjtcbiAgICAgICAgY29uc3QgciA9IGZ1bmN0aW9uKHQsIGUsIG4pIHtcbiAgICAgICAgICAgIEcuaW5qZWN0KHIpKHQsIGUsIG4pO1xuICAgICAgICB9O1xuICAgICAgICByLiRpc1Jlc29sdmVyID0gdHJ1ZTtcbiAgICAgICAgci5yZXNvbHZlID0gZnVuY3Rpb24ociwgaSkge1xuICAgICAgICAgICAgcmV0dXJuIHQoZSwgciwgaSwgbik7XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiByO1xuICAgIH07XG59XG5cbmNvbnN0IG50ID0gZXQoKCh0LCBlLCBuLCByKSA9PiBuLmdldEFsbCh0LCByKSkpO1xuXG5jb25zdCBydCA9IHEoKCh0LCBlLCBuKSA9PiAoKSA9PiBuLmdldCh0KSkpO1xuXG5jb25zdCBpdCA9IHEoKCh0LCBlLCBuKSA9PiB7XG4gICAgaWYgKG4uaGFzKHQsIHRydWUpKSByZXR1cm4gbi5nZXQodCk7IGVsc2UgcmV0dXJuO1xufSkpO1xuXG5mdW5jdGlvbiBzdCh0LCBlLCBuKSB7XG4gICAgRy5pbmplY3Qoc3QpKHQsIGUsIG4pO1xufVxuXG5zdC4kaXNSZXNvbHZlciA9IHRydWU7XG5cbnN0LnJlc29sdmUgPSAoKSA9PiB7fTtcblxuY29uc3Qgb3QgPSBxKCgodCwgZSwgbikgPT4gKC4uLnIpID0+IGUuZ2V0RmFjdG9yeSh0KS5jb25zdHJ1Y3QobiwgcikpKTtcblxuY29uc3QgdXQgPSBxKCgodCwgZSwgbikgPT4ge1xuICAgIGNvbnN0IHIgPSBjdCh0LCBlLCBuKTtcbiAgICBjb25zdCBpID0gbmV3IEluc3RhbmNlUHJvdmlkZXIoU3RyaW5nKHQpLCByKTtcbiAgICBuLnJlZ2lzdGVyUmVzb2x2ZXIodCwgaSwgdHJ1ZSk7XG4gICAgcmV0dXJuIHI7XG59KSk7XG5cbmNvbnN0IGx0ID0gcSgoKHQsIGUsIG4pID0+IGN0KHQsIGUsIG4pKSk7XG5cbmZ1bmN0aW9uIGN0KHQsIGUsIG4pIHtcbiAgICByZXR1cm4gZS5nZXRGYWN0b3J5KHQpLmNvbnN0cnVjdChuKTtcbn1cblxudmFyIGZ0O1xuXG4oZnVuY3Rpb24odCkge1xuICAgIHRbdFtcImluc3RhbmNlXCJdID0gMF0gPSBcImluc3RhbmNlXCI7XG4gICAgdFt0W1wic2luZ2xldG9uXCJdID0gMV0gPSBcInNpbmdsZXRvblwiO1xuICAgIHRbdFtcInRyYW5zaWVudFwiXSA9IDJdID0gXCJ0cmFuc2llbnRcIjtcbiAgICB0W3RbXCJjYWxsYmFja1wiXSA9IDNdID0gXCJjYWxsYmFja1wiO1xuICAgIHRbdFtcImFycmF5XCJdID0gNF0gPSBcImFycmF5XCI7XG4gICAgdFt0W1wiYWxpYXNcIl0gPSA1XSA9IFwiYWxpYXNcIjtcbn0pKGZ0IHx8IChmdCA9IHt9KSk7XG5cbmNsYXNzIFJlc29sdmVyIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlLCBuKSB7XG4gICAgICAgIHRoaXMua2V5ID0gdDtcbiAgICAgICAgdGhpcy5zdHJhdGVneSA9IGU7XG4gICAgICAgIHRoaXMuc3RhdGUgPSBuO1xuICAgICAgICB0aGlzLnJlc29sdmluZyA9IGZhbHNlO1xuICAgIH1cbiAgICBnZXQgJGlzUmVzb2x2ZXIoKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICByZWdpc3Rlcih0LCBlKSB7XG4gICAgICAgIHJldHVybiB0LnJlZ2lzdGVyUmVzb2x2ZXIoZSB8fCB0aGlzLmtleSwgdGhpcyk7XG4gICAgfVxuICAgIHJlc29sdmUodCwgZSkge1xuICAgICAgICBzd2l0Y2ggKHRoaXMuc3RyYXRlZ3kpIHtcbiAgICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5zdGF0ZTtcblxuICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgIGlmICh0aGlzLnJlc29sdmluZykgdGhyb3cgbmV3IEVycm9yKGBBVVIwMDAzOiR7dGhpcy5zdGF0ZS5uYW1lfWApO1xuICAgICAgICAgICAgdGhpcy5yZXNvbHZpbmcgPSB0cnVlO1xuICAgICAgICAgICAgdGhpcy5zdGF0ZSA9IHQuZ2V0RmFjdG9yeSh0aGlzLnN0YXRlKS5jb25zdHJ1Y3QoZSk7XG4gICAgICAgICAgICB0aGlzLnN0cmF0ZWd5ID0gMDtcbiAgICAgICAgICAgIHRoaXMucmVzb2x2aW5nID0gZmFsc2U7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5zdGF0ZTtcblxuICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBjb25zdCBuID0gdC5nZXRGYWN0b3J5KHRoaXMuc3RhdGUpO1xuICAgICAgICAgICAgICAgIGlmIChudWxsID09PSBuKSB0aHJvdyBuZXcgRXJyb3IoYEFVUjAwMDQ6JHtTdHJpbmcodGhpcy5rZXkpfWApO1xuICAgICAgICAgICAgICAgIHJldHVybiBuLmNvbnN0cnVjdChlKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgIGNhc2UgMzpcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnN0YXRlKHQsIGUsIHRoaXMpO1xuXG4gICAgICAgICAgY2FzZSA0OlxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuc3RhdGVbMF0ucmVzb2x2ZSh0LCBlKTtcblxuICAgICAgICAgIGNhc2UgNTpcbiAgICAgICAgICAgIHJldHVybiBlLmdldCh0aGlzLnN0YXRlKTtcblxuICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEFVUjAwMDU6JHt0aGlzLnN0cmF0ZWd5fWApO1xuICAgICAgICB9XG4gICAgfVxuICAgIGdldEZhY3RvcnkodCkge1xuICAgICAgICB2YXIgZSwgbiwgcjtcbiAgICAgICAgc3dpdGNoICh0aGlzLnN0cmF0ZWd5KSB7XG4gICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgIHJldHVybiB0LmdldEZhY3RvcnkodGhpcy5zdGF0ZSk7XG5cbiAgICAgICAgICBjYXNlIDU6XG4gICAgICAgICAgICByZXR1cm4gbnVsbCAhPT0gKHIgPSBudWxsID09PSAobiA9IG51bGwgPT09IChlID0gdC5nZXRSZXNvbHZlcih0aGlzLnN0YXRlKSkgfHwgdm9pZCAwID09PSBlID8gdm9pZCAwIDogZS5nZXRGYWN0b3J5KSB8fCB2b2lkIDAgPT09IG4gPyB2b2lkIDAgOiBuLmNhbGwoZSwgdCkpICYmIHZvaWQgMCAhPT0gciA/IHIgOiBudWxsO1xuXG4gICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG4gICAgfVxufVxuXG5mdW5jdGlvbiBhdCh0KSB7XG4gICAgcmV0dXJuIHRoaXMuZ2V0KHQpO1xufVxuXG5mdW5jdGlvbiBodCh0LCBlKSB7XG4gICAgcmV0dXJuIGUodCk7XG59XG5cbmNsYXNzIEZhY3Rvcnkge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUpIHtcbiAgICAgICAgdGhpcy5UeXBlID0gdDtcbiAgICAgICAgdGhpcy5kZXBlbmRlbmNpZXMgPSBlO1xuICAgICAgICB0aGlzLnRyYW5zZm9ybWVycyA9IG51bGw7XG4gICAgfVxuICAgIGNvbnN0cnVjdCh0LCBlKSB7XG4gICAgICAgIGxldCBuO1xuICAgICAgICBpZiAodm9pZCAwID09PSBlKSBuID0gbmV3IHRoaXMuVHlwZSguLi50aGlzLmRlcGVuZGVuY2llcy5tYXAoYXQsIHQpKTsgZWxzZSBuID0gbmV3IHRoaXMuVHlwZSguLi50aGlzLmRlcGVuZGVuY2llcy5tYXAoYXQsIHQpLCAuLi5lKTtcbiAgICAgICAgaWYgKG51bGwgPT0gdGhpcy50cmFuc2Zvcm1lcnMpIHJldHVybiBuO1xuICAgICAgICByZXR1cm4gdGhpcy50cmFuc2Zvcm1lcnMucmVkdWNlKGh0LCBuKTtcbiAgICB9XG4gICAgcmVnaXN0ZXJUcmFuc2Zvcm1lcih0KSB7XG4gICAgICAgIHZhciBlO1xuICAgICAgICAobnVsbCAhPT0gKGUgPSB0aGlzLnRyYW5zZm9ybWVycykgJiYgdm9pZCAwICE9PSBlID8gZSA6IHRoaXMudHJhbnNmb3JtZXJzID0gW10pLnB1c2godCk7XG4gICAgfVxufVxuXG5jb25zdCBkdCA9IHtcbiAgICAkaXNSZXNvbHZlcjogdHJ1ZSxcbiAgICByZXNvbHZlKHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIGU7XG4gICAgfVxufTtcblxuZnVuY3Rpb24gdnQodCkge1xuICAgIHJldHVybiBJKHQucmVnaXN0ZXIpO1xufVxuXG5mdW5jdGlvbiB3dCh0KSB7XG4gICAgcmV0dXJuIHZ0KHQpICYmIFwiYm9vbGVhblwiID09PSB0eXBlb2YgdC5yZWdpc3RlckluUmVxdWVzdG9yO1xufVxuXG5mdW5jdGlvbiBndCh0KSB7XG4gICAgcmV0dXJuIHd0KHQpICYmIHQucmVnaXN0ZXJJblJlcXVlc3Rvcjtcbn1cblxuZnVuY3Rpb24gbXQodCkge1xuICAgIHJldHVybiB2b2lkIDAgIT09IHQucHJvdG90eXBlO1xufVxuXG5mdW5jdGlvbiBwdCh0KSB7XG4gICAgcmV0dXJuIE0odCkgJiYgdC5pbmRleE9mKFwiOlwiKSA+IDA7XG59XG5cbmNvbnN0IHl0ID0gbmV3IFNldChbIFwiQXJyYXlcIiwgXCJBcnJheUJ1ZmZlclwiLCBcIkJvb2xlYW5cIiwgXCJEYXRhVmlld1wiLCBcIkRhdGVcIiwgXCJFcnJvclwiLCBcIkV2YWxFcnJvclwiLCBcIkZsb2F0MzJBcnJheVwiLCBcIkZsb2F0NjRBcnJheVwiLCBcIkZ1bmN0aW9uXCIsIFwiSW50OEFycmF5XCIsIFwiSW50MTZBcnJheVwiLCBcIkludDMyQXJyYXlcIiwgXCJNYXBcIiwgXCJOdW1iZXJcIiwgXCJPYmplY3RcIiwgXCJQcm9taXNlXCIsIFwiUmFuZ2VFcnJvclwiLCBcIlJlZmVyZW5jZUVycm9yXCIsIFwiUmVnRXhwXCIsIFwiU2V0XCIsIFwiU2hhcmVkQXJyYXlCdWZmZXJcIiwgXCJTdHJpbmdcIiwgXCJTeW50YXhFcnJvclwiLCBcIlR5cGVFcnJvclwiLCBcIlVpbnQ4QXJyYXlcIiwgXCJVaW50OENsYW1wZWRBcnJheVwiLCBcIlVpbnQxNkFycmF5XCIsIFwiVWludDMyQXJyYXlcIiwgXCJVUklFcnJvclwiLCBcIldlYWtNYXBcIiwgXCJXZWFrU2V0XCIgXSk7XG5cbmxldCBSdCA9IDA7XG5cbmNsYXNzIENvbnRhaW5lciB7XG4gICAgY29uc3RydWN0b3IodCwgZSkge1xuICAgICAgICB0aGlzLnBhcmVudCA9IHQ7XG4gICAgICAgIHRoaXMuY29uZmlnID0gZTtcbiAgICAgICAgdGhpcy5pZCA9ICsrUnQ7XG4gICAgICAgIHRoaXMudCA9IDA7XG4gICAgICAgIHRoaXMuaSA9IG5ldyBNYXA7XG4gICAgICAgIGlmIChudWxsID09PSB0KSB7XG4gICAgICAgICAgICB0aGlzLnJvb3QgPSB0aGlzO1xuICAgICAgICAgICAgdGhpcy51ID0gbmV3IE1hcDtcbiAgICAgICAgICAgIHRoaXMuaCA9IG5ldyBNYXA7XG4gICAgICAgICAgICB0aGlzLnJlcyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLnJvb3QgPSB0LnJvb3Q7XG4gICAgICAgICAgICB0aGlzLnUgPSBuZXcgTWFwO1xuICAgICAgICAgICAgdGhpcy5oID0gdC5oO1xuICAgICAgICAgICAgaWYgKGUuaW5oZXJpdFBhcmVudFJlc291cmNlcykgdGhpcy5yZXMgPSBPYmplY3QuYXNzaWduKE9iamVjdC5jcmVhdGUobnVsbCksIHQucmVzLCB0aGlzLnJvb3QucmVzKTsgZWxzZSB0aGlzLnJlcyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy51LnNldChILCBkdCk7XG4gICAgfVxuICAgIGdldCBkZXB0aCgpIHtcbiAgICAgICAgcmV0dXJuIG51bGwgPT09IHRoaXMucGFyZW50ID8gMCA6IHRoaXMucGFyZW50LmRlcHRoICsgMTtcbiAgICB9XG4gICAgcmVnaXN0ZXIoLi4udCkge1xuICAgICAgICBpZiAoMTAwID09PSArK3RoaXMudCkgdGhyb3cgbmV3IEVycm9yKGBBVVIwMDA2OiR7dC5tYXAoU3RyaW5nKX1gKTtcbiAgICAgICAgbGV0IGU7XG4gICAgICAgIGxldCByO1xuICAgICAgICBsZXQgaTtcbiAgICAgICAgbGV0IHM7XG4gICAgICAgIGxldCBvO1xuICAgICAgICBsZXQgdSA9IDA7XG4gICAgICAgIGxldCBsID0gdC5sZW5ndGg7XG4gICAgICAgIGZvciAoO3UgPCBsOyArK3UpIHtcbiAgICAgICAgICAgIGUgPSB0W3VdO1xuICAgICAgICAgICAgaWYgKCFuKGUpKSBjb250aW51ZTtcbiAgICAgICAgICAgIGlmICh2dChlKSkgZS5yZWdpc3Rlcih0aGlzKTsgZWxzZSBpZiAoUy5yZXNvdXJjZS5oYXMoZSkpIHtcbiAgICAgICAgICAgICAgICBjb25zdCB0ID0gUy5yZXNvdXJjZS5nZXRBbGwoZSk7XG4gICAgICAgICAgICAgICAgaWYgKDEgPT09IHQubGVuZ3RoKSB0WzBdLnJlZ2lzdGVyKHRoaXMpOyBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgcyA9IDA7XG4gICAgICAgICAgICAgICAgICAgIG8gPSB0Lmxlbmd0aDtcbiAgICAgICAgICAgICAgICAgICAgd2hpbGUgKG8gPiBzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0W3NdLnJlZ2lzdGVyKHRoaXMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgKytzO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIGlmIChtdChlKSkgJHQuc2luZ2xldG9uKGUsIGUpLnJlZ2lzdGVyKHRoaXMpOyBlbHNlIHtcbiAgICAgICAgICAgICAgICByID0gT2JqZWN0LmtleXMoZSk7XG4gICAgICAgICAgICAgICAgcyA9IDA7XG4gICAgICAgICAgICAgICAgbyA9IHIubGVuZ3RoO1xuICAgICAgICAgICAgICAgIGZvciAoO3MgPCBvOyArK3MpIHtcbiAgICAgICAgICAgICAgICAgICAgaSA9IGVbcltzXV07XG4gICAgICAgICAgICAgICAgICAgIGlmICghbihpKSkgY29udGludWU7XG4gICAgICAgICAgICAgICAgICAgIGlmICh2dChpKSkgaS5yZWdpc3Rlcih0aGlzKTsgZWxzZSB0aGlzLnJlZ2lzdGVyKGkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICAtLXRoaXMudDtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIHJlZ2lzdGVyUmVzb2x2ZXIodCwgZSwgbiA9IGZhbHNlKSB7XG4gICAgICAgIEV0KHQpO1xuICAgICAgICBjb25zdCByID0gdGhpcy51O1xuICAgICAgICBjb25zdCBpID0gci5nZXQodCk7XG4gICAgICAgIGlmIChudWxsID09IGkpIHtcbiAgICAgICAgICAgIHIuc2V0KHQsIGUpO1xuICAgICAgICAgICAgaWYgKHB0KHQpKSB7XG4gICAgICAgICAgICAgICAgaWYgKHZvaWQgMCAhPT0gdGhpcy5yZXNbdF0pIHRocm93IG5ldyBFcnJvcihgQVVSMDAwNzoke3R9YCk7XG4gICAgICAgICAgICAgICAgdGhpcy5yZXNbdF0gPSBlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2UgaWYgKGkgaW5zdGFuY2VvZiBSZXNvbHZlciAmJiA0ID09PSBpLnN0cmF0ZWd5KSBpLnN0YXRlLnB1c2goZSk7IGVsc2Ugci5zZXQodCwgbmV3IFJlc29sdmVyKHQsIDQsIFsgaSwgZSBdKSk7XG4gICAgICAgIGlmIChuKSB0aGlzLmkuc2V0KHQsIGUpO1xuICAgICAgICByZXR1cm4gZTtcbiAgICB9XG4gICAgcmVnaXN0ZXJUcmFuc2Zvcm1lcih0LCBlKSB7XG4gICAgICAgIGNvbnN0IG4gPSB0aGlzLmdldFJlc29sdmVyKHQpO1xuICAgICAgICBpZiAobnVsbCA9PSBuKSByZXR1cm4gZmFsc2U7XG4gICAgICAgIGlmIChuLmdldEZhY3RvcnkpIHtcbiAgICAgICAgICAgIGNvbnN0IHQgPSBuLmdldEZhY3RvcnkodGhpcyk7XG4gICAgICAgICAgICBpZiAobnVsbCA9PSB0KSByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB0LnJlZ2lzdGVyVHJhbnNmb3JtZXIoZSk7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIGdldFJlc29sdmVyKHQsIGUgPSB0cnVlKSB7XG4gICAgICAgIEV0KHQpO1xuICAgICAgICBpZiAodm9pZCAwICE9PSB0LnJlc29sdmUpIHJldHVybiB0O1xuICAgICAgICBsZXQgbiA9IHRoaXM7XG4gICAgICAgIGxldCByO1xuICAgICAgICB3aGlsZSAobnVsbCAhPSBuKSB7XG4gICAgICAgICAgICByID0gbi51LmdldCh0KTtcbiAgICAgICAgICAgIGlmIChudWxsID09IHIpIHtcbiAgICAgICAgICAgICAgICBpZiAobnVsbCA9PSBuLnBhcmVudCkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCByID0gZ3QodCkgPyB0aGlzIDogbjtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGUgPyB0aGlzLlIodCwgcikgOiBudWxsO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBuID0gbi5wYXJlbnQ7XG4gICAgICAgICAgICB9IGVsc2UgcmV0dXJuIHI7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIGhhcyh0LCBlID0gZmFsc2UpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudS5oYXModCkgPyB0cnVlIDogZSAmJiBudWxsICE9IHRoaXMucGFyZW50ID8gdGhpcy5wYXJlbnQuaGFzKHQsIHRydWUpIDogZmFsc2U7XG4gICAgfVxuICAgIGdldCh0KSB7XG4gICAgICAgIEV0KHQpO1xuICAgICAgICBpZiAodC4kaXNSZXNvbHZlcikgcmV0dXJuIHQucmVzb2x2ZSh0aGlzLCB0aGlzKTtcbiAgICAgICAgbGV0IGUgPSB0aGlzO1xuICAgICAgICBsZXQgbjtcbiAgICAgICAgd2hpbGUgKG51bGwgIT0gZSkge1xuICAgICAgICAgICAgbiA9IGUudS5nZXQodCk7XG4gICAgICAgICAgICBpZiAobnVsbCA9PSBuKSB7XG4gICAgICAgICAgICAgICAgaWYgKG51bGwgPT0gZS5wYXJlbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgciA9IGd0KHQpID8gdGhpcyA6IGU7XG4gICAgICAgICAgICAgICAgICAgIG4gPSB0aGlzLlIodCwgcik7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBuLnJlc29sdmUoZSwgdGhpcyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGUgPSBlLnBhcmVudDtcbiAgICAgICAgICAgIH0gZWxzZSByZXR1cm4gbi5yZXNvbHZlKGUsIHRoaXMpO1xuICAgICAgICB9XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgQVVSMDAwODoke3R9YCk7XG4gICAgfVxuICAgIGdldEFsbCh0LCBlID0gZmFsc2UpIHtcbiAgICAgICAgRXQodCk7XG4gICAgICAgIGNvbnN0IG4gPSB0aGlzO1xuICAgICAgICBsZXQgciA9IG47XG4gICAgICAgIGxldCBpO1xuICAgICAgICBpZiAoZSkge1xuICAgICAgICAgICAgbGV0IGUgPSBPdDtcbiAgICAgICAgICAgIHdoaWxlIChudWxsICE9IHIpIHtcbiAgICAgICAgICAgICAgICBpID0gci51LmdldCh0KTtcbiAgICAgICAgICAgICAgICBpZiAobnVsbCAhPSBpKSBlID0gZS5jb25jYXQoQXQoaSwgciwgbikpO1xuICAgICAgICAgICAgICAgIHIgPSByLnBhcmVudDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBlO1xuICAgICAgICB9IGVsc2Ugd2hpbGUgKG51bGwgIT0gcikge1xuICAgICAgICAgICAgaSA9IHIudS5nZXQodCk7XG4gICAgICAgICAgICBpZiAobnVsbCA9PSBpKSB7XG4gICAgICAgICAgICAgICAgciA9IHIucGFyZW50O1xuICAgICAgICAgICAgICAgIGlmIChudWxsID09IHIpIHJldHVybiBPdDtcbiAgICAgICAgICAgIH0gZWxzZSByZXR1cm4gQXQoaSwgciwgbik7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIE90O1xuICAgIH1cbiAgICBpbnZva2UodCwgZSkge1xuICAgICAgICBpZiAoJCh0KSkgdGhyb3cganQodCk7XG4gICAgICAgIGlmICh2b2lkIDAgPT09IGUpIHJldHVybiBuZXcgdCguLi5LKHQpLm1hcChhdCwgdGhpcykpOyBlbHNlIHJldHVybiBuZXcgdCguLi5LKHQpLm1hcChhdCwgdGhpcyksIC4uLmUpO1xuICAgIH1cbiAgICBnZXRGYWN0b3J5KHQpIHtcbiAgICAgICAgbGV0IGUgPSB0aGlzLmguZ2V0KHQpO1xuICAgICAgICBpZiAodm9pZCAwID09PSBlKSB7XG4gICAgICAgICAgICBpZiAoJCh0KSkgdGhyb3cganQodCk7XG4gICAgICAgICAgICB0aGlzLmguc2V0KHQsIGUgPSBuZXcgRmFjdG9yeSh0LCBLKHQpKSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGU7XG4gICAgfVxuICAgIHJlZ2lzdGVyRmFjdG9yeSh0LCBlKSB7XG4gICAgICAgIHRoaXMuaC5zZXQodCwgZSk7XG4gICAgfVxuICAgIGNyZWF0ZUNoaWxkKHQpIHtcbiAgICAgICAgaWYgKHZvaWQgMCA9PT0gdCAmJiB0aGlzLmNvbmZpZy5pbmhlcml0UGFyZW50UmVzb3VyY2VzKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5jb25maWcgPT09IENvbnRhaW5lckNvbmZpZ3VyYXRpb24uREVGQVVMVCkgcmV0dXJuIG5ldyBDb250YWluZXIodGhpcywgdGhpcy5jb25maWcpO1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBDb250YWluZXIodGhpcywgQ29udGFpbmVyQ29uZmlndXJhdGlvbi5mcm9tKHtcbiAgICAgICAgICAgICAgICAuLi50aGlzLmNvbmZpZyxcbiAgICAgICAgICAgICAgICBpbmhlcml0UGFyZW50UmVzb3VyY2VzOiBmYWxzZVxuICAgICAgICAgICAgfSkpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBuZXcgQ29udGFpbmVyKHRoaXMsIENvbnRhaW5lckNvbmZpZ3VyYXRpb24uZnJvbShudWxsICE9PSB0ICYmIHZvaWQgMCAhPT0gdCA/IHQgOiB0aGlzLmNvbmZpZykpO1xuICAgIH1cbiAgICBkaXNwb3NlUmVzb2x2ZXJzKCkge1xuICAgICAgICBjb25zdCB0ID0gdGhpcy51O1xuICAgICAgICBjb25zdCBlID0gdGhpcy5pO1xuICAgICAgICBsZXQgbjtcbiAgICAgICAgbGV0IHI7XG4gICAgICAgIGZvciAoW3IsIG5dIG9mIGUuZW50cmllcygpKSB7XG4gICAgICAgICAgICBuLmRpc3Bvc2UoKTtcbiAgICAgICAgICAgIHQuZGVsZXRlKHIpO1xuICAgICAgICB9XG4gICAgICAgIGUuY2xlYXIoKTtcbiAgICB9XG4gICAgZmluZCh0LCBlKSB7XG4gICAgICAgIGNvbnN0IG4gPSB0LmtleUZyb20oZSk7XG4gICAgICAgIGxldCByID0gdGhpcy5yZXNbbl07XG4gICAgICAgIGlmICh2b2lkIDAgPT09IHIpIHtcbiAgICAgICAgICAgIHIgPSB0aGlzLnJvb3QucmVzW25dO1xuICAgICAgICAgICAgaWYgKHZvaWQgMCA9PT0gcikgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG51bGwgPT09IHIpIHJldHVybiBudWxsO1xuICAgICAgICBpZiAoSShyLmdldEZhY3RvcnkpKSB7XG4gICAgICAgICAgICBjb25zdCBlID0gci5nZXRGYWN0b3J5KHRoaXMpO1xuICAgICAgICAgICAgaWYgKG51bGwgPT09IGUgfHwgdm9pZCAwID09PSBlKSByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgIGNvbnN0IG4gPSBqKHQubmFtZSwgZS5UeXBlKTtcbiAgICAgICAgICAgIGlmICh2b2lkIDAgPT09IG4pIHJldHVybiBudWxsO1xuICAgICAgICAgICAgcmV0dXJuIG47XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIGNyZWF0ZSh0LCBlKSB7XG4gICAgICAgIHZhciBuLCByO1xuICAgICAgICBjb25zdCBpID0gdC5rZXlGcm9tKGUpO1xuICAgICAgICBsZXQgcyA9IHRoaXMucmVzW2ldO1xuICAgICAgICBpZiAodm9pZCAwID09PSBzKSB7XG4gICAgICAgICAgICBzID0gdGhpcy5yb290LnJlc1tpXTtcbiAgICAgICAgICAgIGlmICh2b2lkIDAgPT09IHMpIHJldHVybiBudWxsO1xuICAgICAgICAgICAgcmV0dXJuIG51bGwgIT09IChuID0gcy5yZXNvbHZlKHRoaXMucm9vdCwgdGhpcykpICYmIHZvaWQgMCAhPT0gbiA/IG4gOiBudWxsO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBudWxsICE9PSAociA9IHMucmVzb2x2ZSh0aGlzLCB0aGlzKSkgJiYgdm9pZCAwICE9PSByID8gciA6IG51bGw7XG4gICAgfVxuICAgIGRpc3Bvc2UoKSB7XG4gICAgICAgIGlmICh0aGlzLmkuc2l6ZSA+IDApIHRoaXMuZGlzcG9zZVJlc29sdmVycygpO1xuICAgICAgICB0aGlzLnUuY2xlYXIoKTtcbiAgICB9XG4gICAgUih0LCBlKSB7XG4gICAgICAgIGlmICghSSh0KSkgdGhyb3cgbmV3IEVycm9yKGBBVVIwMDA5OiR7dH1gKTtcbiAgICAgICAgaWYgKHl0Lmhhcyh0Lm5hbWUpKSB0aHJvdyBuZXcgRXJyb3IoYEFVUjAwMTA6JHt0Lm5hbWV9YCk7XG4gICAgICAgIGlmICh2dCh0KSkge1xuICAgICAgICAgICAgY29uc3QgbiA9IHQucmVnaXN0ZXIoZSwgdCk7XG4gICAgICAgICAgICBpZiAoIShuIGluc3RhbmNlb2YgT2JqZWN0KSB8fCBudWxsID09IG4ucmVzb2x2ZSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IG4gPSBlLnUuZ2V0KHQpO1xuICAgICAgICAgICAgICAgIGlmICh2b2lkIDAgIT0gbikgcmV0dXJuIG47XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBBVVIwMDExYCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gbjtcbiAgICAgICAgfSBlbHNlIGlmIChTLnJlc291cmNlLmhhcyh0KSkge1xuICAgICAgICAgICAgY29uc3QgbiA9IFMucmVzb3VyY2UuZ2V0QWxsKHQpO1xuICAgICAgICAgICAgaWYgKDEgPT09IG4ubGVuZ3RoKSBuWzBdLnJlZ2lzdGVyKGUpOyBlbHNlIHtcbiAgICAgICAgICAgICAgICBjb25zdCB0ID0gbi5sZW5ndGg7XG4gICAgICAgICAgICAgICAgZm9yIChsZXQgciA9IDA7IHIgPCB0OyArK3IpIG5bcl0ucmVnaXN0ZXIoZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCByID0gZS51LmdldCh0KTtcbiAgICAgICAgICAgIGlmICh2b2lkIDAgIT0gcikgcmV0dXJuIHI7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEFVUjAwMTFgKTtcbiAgICAgICAgfSBlbHNlIGlmICh0LiRpc0ludGVyZmFjZSkgdGhyb3cgbmV3IEVycm9yKGBBVVIwMDEyOiR7dC5mcmllbmRseU5hbWV9YCk7IGVsc2Uge1xuICAgICAgICAgICAgY29uc3QgbiA9IHRoaXMuY29uZmlnLmRlZmF1bHRSZXNvbHZlcih0LCBlKTtcbiAgICAgICAgICAgIGUudS5zZXQodCwgbik7XG4gICAgICAgICAgICByZXR1cm4gbjtcbiAgICAgICAgfVxuICAgIH1cbn1cblxuY2xhc3MgUGFyYW1ldGVyaXplZFJlZ2lzdHJ5IHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlKSB7XG4gICAgICAgIHRoaXMua2V5ID0gdDtcbiAgICAgICAgdGhpcy5wYXJhbXMgPSBlO1xuICAgIH1cbiAgICByZWdpc3Rlcih0KSB7XG4gICAgICAgIGlmICh0Lmhhcyh0aGlzLmtleSwgdHJ1ZSkpIHtcbiAgICAgICAgICAgIGNvbnN0IGUgPSB0LmdldCh0aGlzLmtleSk7XG4gICAgICAgICAgICBlLnJlZ2lzdGVyKHQsIC4uLnRoaXMucGFyYW1zKTtcbiAgICAgICAgfSBlbHNlIHQucmVnaXN0ZXIoLi4udGhpcy5wYXJhbXMuZmlsdGVyKCh0ID0+IFwib2JqZWN0XCIgPT09IHR5cGVvZiB0KSkpO1xuICAgIH1cbn1cblxuY29uc3QgYnQgPSBuZXcgV2Vha01hcDtcblxuZnVuY3Rpb24gQ3QodCkge1xuICAgIHJldHVybiBmdW5jdGlvbihlLCBuLCByKSB7XG4gICAgICAgIGxldCBpID0gYnQuZ2V0KGUpO1xuICAgICAgICBpZiAodm9pZCAwID09PSBpKSBidC5zZXQoZSwgaSA9IG5ldyBXZWFrTWFwKTtcbiAgICAgICAgaWYgKGkuaGFzKHIpKSByZXR1cm4gaS5nZXQocik7XG4gICAgICAgIGNvbnN0IHMgPSB0KGUsIG4sIHIpO1xuICAgICAgICBpLnNldChyLCBzKTtcbiAgICAgICAgcmV0dXJuIHM7XG4gICAgfTtcbn1cblxuY29uc3QgJHQgPSB7XG4gICAgaW5zdGFuY2UodCwgZSkge1xuICAgICAgICByZXR1cm4gbmV3IFJlc29sdmVyKHQsIDAsIGUpO1xuICAgIH0sXG4gICAgc2luZ2xldG9uKHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBSZXNvbHZlcih0LCAxLCBlKTtcbiAgICB9LFxuICAgIHRyYW5zaWVudCh0LCBlKSB7XG4gICAgICAgIHJldHVybiBuZXcgUmVzb2x2ZXIodCwgMiwgZSk7XG4gICAgfSxcbiAgICBjYWxsYmFjayh0LCBlKSB7XG4gICAgICAgIHJldHVybiBuZXcgUmVzb2x2ZXIodCwgMywgZSk7XG4gICAgfSxcbiAgICBjYWNoZWRDYWxsYmFjayh0LCBlKSB7XG4gICAgICAgIHJldHVybiBuZXcgUmVzb2x2ZXIodCwgMywgQ3QoZSkpO1xuICAgIH0sXG4gICAgYWxpYXNUbyh0LCBlKSB7XG4gICAgICAgIHJldHVybiBuZXcgUmVzb2x2ZXIoZSwgNSwgdCk7XG4gICAgfSxcbiAgICBkZWZlcih0LCAuLi5lKSB7XG4gICAgICAgIHJldHVybiBuZXcgUGFyYW1ldGVyaXplZFJlZ2lzdHJ5KHQsIGUpO1xuICAgIH1cbn07XG5cbmNsYXNzIEluc3RhbmNlUHJvdmlkZXIge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUpIHtcbiAgICAgICAgdGhpcy5DID0gbnVsbDtcbiAgICAgICAgdGhpcy4kID0gdDtcbiAgICAgICAgaWYgKHZvaWQgMCAhPT0gZSkgdGhpcy5DID0gZTtcbiAgICB9XG4gICAgZ2V0IGZyaWVuZGx5TmFtZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuJDtcbiAgICB9XG4gICAgcHJlcGFyZSh0KSB7XG4gICAgICAgIHRoaXMuQyA9IHQ7XG4gICAgfVxuICAgIGdldCAkaXNSZXNvbHZlcigpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIHJlc29sdmUoKSB7XG4gICAgICAgIGlmIChudWxsID09IHRoaXMuQykgdGhyb3cgbmV3IEVycm9yKGBBVVIwMDEzOiR7dGhpcy4kfWApO1xuICAgICAgICByZXR1cm4gdGhpcy5DO1xuICAgIH1cbiAgICBkaXNwb3NlKCkge1xuICAgICAgICB0aGlzLkMgPSBudWxsO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gRXQodCkge1xuICAgIGlmIChudWxsID09PSB0IHx8IHZvaWQgMCA9PT0gdCkgdGhyb3cgbmV3IEVycm9yKGBBVVIwMDE0YCk7XG59XG5cbmZ1bmN0aW9uIEF0KHQsIGUsIG4pIHtcbiAgICBpZiAodCBpbnN0YW5jZW9mIFJlc29sdmVyICYmIDQgPT09IHQuc3RyYXRlZ3kpIHtcbiAgICAgICAgY29uc3QgciA9IHQuc3RhdGU7XG4gICAgICAgIGxldCBpID0gci5sZW5ndGg7XG4gICAgICAgIGNvbnN0IHMgPSBuZXcgQXJyYXkoaSk7XG4gICAgICAgIHdoaWxlIChpLS0pIHNbaV0gPSByW2ldLnJlc29sdmUoZSwgbik7XG4gICAgICAgIHJldHVybiBzO1xuICAgIH1cbiAgICByZXR1cm4gWyB0LnJlc29sdmUoZSwgbikgXTtcbn1cblxuZnVuY3Rpb24ganQodCkge1xuICAgIHJldHVybiBuZXcgRXJyb3IoYEFVUjAwMTU6JHt0Lm5hbWV9YCk7XG59XG5cbmNvbnN0IE90ID0gT2JqZWN0LmZyZWV6ZShbXSk7XG5cbmNvbnN0IGt0ID0gT2JqZWN0LmZyZWV6ZSh7fSk7XG5cbmZ1bmN0aW9uIEl0KCkge31cblxuY29uc3QgTXQgPSBHLmNyZWF0ZUludGVyZmFjZShcIklQbGF0Zm9ybVwiKTtcblxuLyohICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqXG5Db3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi5cblxuUGVybWlzc2lvbiB0byB1c2UsIGNvcHksIG1vZGlmeSwgYW5kL29yIGRpc3RyaWJ1dGUgdGhpcyBzb2Z0d2FyZSBmb3IgYW55XG5wdXJwb3NlIHdpdGggb3Igd2l0aG91dCBmZWUgaXMgaGVyZWJ5IGdyYW50ZWQuXG5cblRIRSBTT0ZUV0FSRSBJUyBQUk9WSURFRCBcIkFTIElTXCIgQU5EIFRIRSBBVVRIT1IgRElTQ0xBSU1TIEFMTCBXQVJSQU5USUVTIFdJVEhcblJFR0FSRCBUTyBUSElTIFNPRlRXQVJFIElOQ0xVRElORyBBTEwgSU1QTElFRCBXQVJSQU5USUVTIE9GIE1FUkNIQU5UQUJJTElUWVxuQU5EIEZJVE5FU1MuIElOIE5PIEVWRU5UIFNIQUxMIFRIRSBBVVRIT1IgQkUgTElBQkxFIEZPUiBBTlkgU1BFQ0lBTCwgRElSRUNULFxuSU5ESVJFQ1QsIE9SIENPTlNFUVVFTlRJQUwgREFNQUdFUyBPUiBBTlkgREFNQUdFUyBXSEFUU09FVkVSIFJFU1VMVElORyBGUk9NXG5MT1NTIE9GIFVTRSwgREFUQSBPUiBQUk9GSVRTLCBXSEVUSEVSIElOIEFOIEFDVElPTiBPRiBDT05UUkFDVCwgTkVHTElHRU5DRSBPUlxuT1RIRVIgVE9SVElPVVMgQUNUSU9OLCBBUklTSU5HIE9VVCBPRiBPUiBJTiBDT05ORUNUSU9OIFdJVEggVEhFIFVTRSBPUlxuUEVSRk9STUFOQ0UgT0YgVEhJUyBTT0ZUV0FSRS5cbioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqICovIGZ1bmN0aW9uIFR0KHQsIGUsIG4sIHIpIHtcbiAgICB2YXIgaSA9IGFyZ3VtZW50cy5sZW5ndGgsIHMgPSBpIDwgMyA/IGUgOiBudWxsID09PSByID8gciA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoZSwgbikgOiByLCBvO1xuICAgIGlmIChcIm9iamVjdFwiID09PSB0eXBlb2YgUmVmbGVjdCAmJiBcImZ1bmN0aW9uXCIgPT09IHR5cGVvZiBSZWZsZWN0LmRlY29yYXRlKSBzID0gUmVmbGVjdC5kZWNvcmF0ZSh0LCBlLCBuLCByKTsgZWxzZSBmb3IgKHZhciB1ID0gdC5sZW5ndGggLSAxOyB1ID49IDA7IHUtLSkgaWYgKG8gPSB0W3VdKSBzID0gKGkgPCAzID8gbyhzKSA6IGkgPiAzID8gbyhlLCBuLCBzKSA6IG8oZSwgbikpIHx8IHM7XG4gICAgcmV0dXJuIGkgPiAzICYmIHMgJiYgT2JqZWN0LmRlZmluZVByb3BlcnR5KGUsIG4sIHMpLCBzO1xufVxuXG5mdW5jdGlvbiBGdCh0LCBlKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKG4sIHIpIHtcbiAgICAgICAgZShuLCByLCB0KTtcbiAgICB9O1xufVxuXG52YXIgVXQ7XG5cbihmdW5jdGlvbih0KSB7XG4gICAgdFt0W1widHJhY2VcIl0gPSAwXSA9IFwidHJhY2VcIjtcbiAgICB0W3RbXCJkZWJ1Z1wiXSA9IDFdID0gXCJkZWJ1Z1wiO1xuICAgIHRbdFtcImluZm9cIl0gPSAyXSA9IFwiaW5mb1wiO1xuICAgIHRbdFtcIndhcm5cIl0gPSAzXSA9IFwid2FyblwiO1xuICAgIHRbdFtcImVycm9yXCJdID0gNF0gPSBcImVycm9yXCI7XG4gICAgdFt0W1wiZmF0YWxcIl0gPSA1XSA9IFwiZmF0YWxcIjtcbiAgICB0W3RbXCJub25lXCJdID0gNl0gPSBcIm5vbmVcIjtcbn0pKFV0IHx8IChVdCA9IHt9KSk7XG5cbnZhciBMdDtcblxuKGZ1bmN0aW9uKHQpIHtcbiAgICB0W3RbXCJub0NvbG9yc1wiXSA9IDBdID0gXCJub0NvbG9yc1wiO1xuICAgIHRbdFtcImNvbG9yc1wiXSA9IDFdID0gXCJjb2xvcnNcIjtcbn0pKEx0IHx8IChMdCA9IHt9KSk7XG5cbmNvbnN0IFB0ID0gRy5jcmVhdGVJbnRlcmZhY2UoXCJJTG9nQ29uZmlnXCIsICh0ID0+IHQuaW5zdGFuY2UobmV3IExvZ0NvbmZpZygwLCAzKSkpKTtcblxuY29uc3QgRHQgPSBHLmNyZWF0ZUludGVyZmFjZShcIklTaW5rXCIpO1xuXG5jb25zdCBTdCA9IEcuY3JlYXRlSW50ZXJmYWNlKFwiSUxvZ0V2ZW50RmFjdG9yeVwiLCAodCA9PiB0LnNpbmdsZXRvbihfdCkpKTtcblxuY29uc3QgTnQgPSBHLmNyZWF0ZUludGVyZmFjZShcIklMb2dnZXJcIiwgKHQgPT4gdC5zaW5nbGV0b24oVnQpKSk7XG5cbmNvbnN0IFd0ID0gRy5jcmVhdGVJbnRlcmZhY2UoXCJJTG9nU2NvcGVcIik7XG5cbmNvbnN0IEJ0ID0gT2JqZWN0LmZyZWV6ZSh7XG4gICAga2V5OiBGKFwibG9nZ2VyLXNpbmstaGFuZGxlc1wiKSxcbiAgICBkZWZpbmUodCwgZSkge1xuICAgICAgICBrKHRoaXMua2V5LCBlLmhhbmRsZXMsIHQucHJvdG90eXBlKTtcbiAgICAgICAgcmV0dXJuIHQ7XG4gICAgfSxcbiAgICBnZXRIYW5kbGVzKGUpIHtcbiAgICAgICAgcmV0dXJuIHQuZ2V0KHRoaXMua2V5LCBlKTtcbiAgICB9XG59KTtcblxuZnVuY3Rpb24gUXQodCkge1xuICAgIHJldHVybiBmdW5jdGlvbihlKSB7XG4gICAgICAgIHJldHVybiBCdC5kZWZpbmUoZSwgdCk7XG4gICAgfTtcbn1cblxuY29uc3QgeHQgPSBDKHtcbiAgICByZWQodCkge1xuICAgICAgICByZXR1cm4gYFx1MDAxYlszMW0ke3R9XHUwMDFiWzM5bWA7XG4gICAgfSxcbiAgICBncmVlbih0KSB7XG4gICAgICAgIHJldHVybiBgXHUwMDFiWzMybSR7dH1cdTAwMWJbMzltYDtcbiAgICB9LFxuICAgIHllbGxvdyh0KSB7XG4gICAgICAgIHJldHVybiBgXHUwMDFiWzMzbSR7dH1cdTAwMWJbMzltYDtcbiAgICB9LFxuICAgIGJsdWUodCkge1xuICAgICAgICByZXR1cm4gYFx1MDAxYlszNG0ke3R9XHUwMDFiWzM5bWA7XG4gICAgfSxcbiAgICBtYWdlbnRhKHQpIHtcbiAgICAgICAgcmV0dXJuIGBcdTAwMWJbMzVtJHt0fVx1MDAxYlszOW1gO1xuICAgIH0sXG4gICAgY3lhbih0KSB7XG4gICAgICAgIHJldHVybiBgXHUwMDFiWzM2bSR7dH1cdTAwMWJbMzltYDtcbiAgICB9LFxuICAgIHdoaXRlKHQpIHtcbiAgICAgICAgcmV0dXJuIGBcdTAwMWJbMzdtJHt0fVx1MDAxYlszOW1gO1xuICAgIH0sXG4gICAgZ3JleSh0KSB7XG4gICAgICAgIHJldHVybiBgXHUwMDFiWzkwbSR7dH1cdTAwMWJbMzltYDtcbiAgICB9XG59KTtcblxuY2xhc3MgTG9nQ29uZmlnIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlKSB7XG4gICAgICAgIHRoaXMuY29sb3JPcHRpb25zID0gdDtcbiAgICAgICAgdGhpcy5sZXZlbCA9IGU7XG4gICAgfVxufVxuXG5jb25zdCB6dCA9IGZ1bmN0aW9uKCkge1xuICAgIGNvbnN0IHQgPSBbIEMoe1xuICAgICAgICBUUkM6IFwiVFJDXCIsXG4gICAgICAgIERCRzogXCJEQkdcIixcbiAgICAgICAgSU5GOiBcIklORlwiLFxuICAgICAgICBXUk46IFwiV1JOXCIsXG4gICAgICAgIEVSUjogXCJFUlJcIixcbiAgICAgICAgRlRMOiBcIkZUTFwiLFxuICAgICAgICBRUVE6IFwiPz8/XCJcbiAgICB9KSwgQyh7XG4gICAgICAgIFRSQzogeHQuZ3JleShcIlRSQ1wiKSxcbiAgICAgICAgREJHOiB4dC5ncmV5KFwiREJHXCIpLFxuICAgICAgICBJTkY6IHh0LndoaXRlKFwiSU5GXCIpLFxuICAgICAgICBXUk46IHh0LnllbGxvdyhcIldSTlwiKSxcbiAgICAgICAgRVJSOiB4dC5yZWQoXCJFUlJcIiksXG4gICAgICAgIEZUTDogeHQucmVkKFwiRlRMXCIpLFxuICAgICAgICBRUVE6IHh0LmdyZXkoXCI/Pz9cIilcbiAgICB9KSBdO1xuICAgIHJldHVybiBmdW5jdGlvbihlLCBuKSB7XG4gICAgICAgIGlmIChlIDw9IDApIHJldHVybiB0W25dLlRSQztcbiAgICAgICAgaWYgKGUgPD0gMSkgcmV0dXJuIHRbbl0uREJHO1xuICAgICAgICBpZiAoZSA8PSAyKSByZXR1cm4gdFtuXS5JTkY7XG4gICAgICAgIGlmIChlIDw9IDMpIHJldHVybiB0W25dLldSTjtcbiAgICAgICAgaWYgKGUgPD0gNCkgcmV0dXJuIHRbbl0uRVJSO1xuICAgICAgICBpZiAoZSA8PSA1KSByZXR1cm4gdFtuXS5GVEw7XG4gICAgICAgIHJldHVybiB0W25dLlFRUTtcbiAgICB9O1xufSgpO1xuXG5mdW5jdGlvbiBHdCh0LCBlKSB7XG4gICAgaWYgKDAgPT09IGUpIHJldHVybiB0LmpvaW4oXCIuXCIpO1xuICAgIHJldHVybiB0Lm1hcCh4dC5jeWFuKS5qb2luKFwiLlwiKTtcbn1cblxuZnVuY3Rpb24gS3QodCwgZSkge1xuICAgIGlmICgwID09PSBlKSByZXR1cm4gbmV3IERhdGUodCkudG9JU09TdHJpbmcoKTtcbiAgICByZXR1cm4geHQuZ3JleShuZXcgRGF0ZSh0KS50b0lTT1N0cmluZygpKTtcbn1cblxuY2xhc3MgRGVmYXVsdExvZ0V2ZW50IHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlLCBuLCByLCBpLCBzKSB7XG4gICAgICAgIHRoaXMuc2V2ZXJpdHkgPSB0O1xuICAgICAgICB0aGlzLm1lc3NhZ2UgPSBlO1xuICAgICAgICB0aGlzLm9wdGlvbmFsUGFyYW1zID0gbjtcbiAgICAgICAgdGhpcy5zY29wZSA9IHI7XG4gICAgICAgIHRoaXMuY29sb3JPcHRpb25zID0gaTtcbiAgICAgICAgdGhpcy50aW1lc3RhbXAgPSBzO1xuICAgIH1cbiAgICB0b1N0cmluZygpIHtcbiAgICAgICAgY29uc3Qge3NldmVyaXR5OiB0LCBtZXNzYWdlOiBlLCBzY29wZTogbiwgY29sb3JPcHRpb25zOiByLCB0aW1lc3RhbXA6IGl9ID0gdGhpcztcbiAgICAgICAgaWYgKDAgPT09IG4ubGVuZ3RoKSByZXR1cm4gYCR7S3QoaSwgcil9IFske3p0KHQsIHIpfV0gJHtlfWA7XG4gICAgICAgIHJldHVybiBgJHtLdChpLCByKX0gWyR7enQodCwgcil9ICR7R3Qobiwgcil9XSAke2V9YDtcbiAgICB9XG59XG5cbmxldCBfdCA9IGNsYXNzIERlZmF1bHRMb2dFdmVudEZhY3Rvcnkge1xuICAgIGNvbnN0cnVjdG9yKHQpIHtcbiAgICAgICAgdGhpcy5jb25maWcgPSB0O1xuICAgIH1cbiAgICBjcmVhdGVMb2dFdmVudCh0LCBlLCBuLCByKSB7XG4gICAgICAgIHJldHVybiBuZXcgRGVmYXVsdExvZ0V2ZW50KGUsIG4sIHIsIHQuc2NvcGUsIHRoaXMuY29uZmlnLmNvbG9yT3B0aW9ucywgRGF0ZS5ub3coKSk7XG4gICAgfVxufTtcblxuX3QgPSBUdChbIEZ0KDAsIFB0KSBdLCBfdCk7XG5cbmxldCBIdCA9IGNsYXNzIENvbnNvbGVTaW5rIHtcbiAgICBjb25zdHJ1Y3Rvcih0KSB7XG4gICAgICAgIGNvbnN0IGUgPSB0LmNvbnNvbGU7XG4gICAgICAgIHRoaXMuaGFuZGxlRXZlbnQgPSBmdW5jdGlvbiB0KG4pIHtcbiAgICAgICAgICAgIGNvbnN0IHIgPSBuLm9wdGlvbmFsUGFyYW1zO1xuICAgICAgICAgICAgaWYgKHZvaWQgMCA9PT0gciB8fCAwID09PSByLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHQgPSBuLnRvU3RyaW5nKCk7XG4gICAgICAgICAgICAgICAgc3dpdGNoIChuLnNldmVyaXR5KSB7XG4gICAgICAgICAgICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBlLmRlYnVnKHQpO1xuXG4gICAgICAgICAgICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBlLmluZm8odCk7XG5cbiAgICAgICAgICAgICAgICAgIGNhc2UgMzpcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGUud2Fybih0KTtcblxuICAgICAgICAgICAgICAgICAgY2FzZSA0OlxuICAgICAgICAgICAgICAgICAgY2FzZSA1OlxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZS5lcnJvcih0KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGxldCB0ID0gbi50b1N0cmluZygpO1xuICAgICAgICAgICAgICAgIGxldCBpID0gMDtcbiAgICAgICAgICAgICAgICB3aGlsZSAodC5pbmNsdWRlcyhcIiVzXCIpKSB0ID0gdC5yZXBsYWNlKFwiJXNcIiwgU3RyaW5nKHJbaSsrXSkpO1xuICAgICAgICAgICAgICAgIHN3aXRjaCAobi5zZXZlcml0eSkge1xuICAgICAgICAgICAgICAgICAgY2FzZSAwOlxuICAgICAgICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZS5kZWJ1Zyh0LCAuLi5yLnNsaWNlKGkpKTtcblxuICAgICAgICAgICAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZS5pbmZvKHQsIC4uLnIuc2xpY2UoaSkpO1xuXG4gICAgICAgICAgICAgICAgICBjYXNlIDM6XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBlLndhcm4odCwgLi4uci5zbGljZShpKSk7XG5cbiAgICAgICAgICAgICAgICAgIGNhc2UgNDpcbiAgICAgICAgICAgICAgICAgIGNhc2UgNTpcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGUuZXJyb3IodCwgLi4uci5zbGljZShpKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgIH1cbiAgICBzdGF0aWMgcmVnaXN0ZXIodCkge1xuICAgICAgICAkdC5zaW5nbGV0b24oRHQsIENvbnNvbGVTaW5rKS5yZWdpc3Rlcih0KTtcbiAgICB9XG59O1xuXG5IdCA9IFR0KFsgRnQoMCwgTXQpIF0sIEh0KTtcblxubGV0IFZ0ID0gY2xhc3MgRGVmYXVsdExvZ2dlciB7XG4gICAgY29uc3RydWN0b3IodCwgZSwgbiwgciA9IFtdLCBpID0gbnVsbCkge1xuICAgICAgICB2YXIgcywgbywgdSwgbCwgYywgZjtcbiAgICAgICAgdGhpcy5jb25maWcgPSB0O1xuICAgICAgICB0aGlzLmZhY3RvcnkgPSBlO1xuICAgICAgICB0aGlzLnNjb3BlID0gcjtcbiAgICAgICAgdGhpcy5zY29wZWRMb2dnZXJzID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiAgICAgICAgbGV0IGE7XG4gICAgICAgIGxldCBoO1xuICAgICAgICBsZXQgZDtcbiAgICAgICAgbGV0IHY7XG4gICAgICAgIGxldCB3O1xuICAgICAgICBsZXQgZztcbiAgICAgICAgaWYgKG51bGwgPT09IGkpIHtcbiAgICAgICAgICAgIHRoaXMucm9vdCA9IHRoaXM7XG4gICAgICAgICAgICB0aGlzLnBhcmVudCA9IHRoaXM7XG4gICAgICAgICAgICBhID0gdGhpcy50cmFjZVNpbmtzID0gW107XG4gICAgICAgICAgICBoID0gdGhpcy5kZWJ1Z1NpbmtzID0gW107XG4gICAgICAgICAgICBkID0gdGhpcy5pbmZvU2lua3MgPSBbXTtcbiAgICAgICAgICAgIHYgPSB0aGlzLndhcm5TaW5rcyA9IFtdO1xuICAgICAgICAgICAgdyA9IHRoaXMuZXJyb3JTaW5rcyA9IFtdO1xuICAgICAgICAgICAgZyA9IHRoaXMuZmF0YWxTaW5rcyA9IFtdO1xuICAgICAgICAgICAgZm9yIChjb25zdCB0IG9mIG4pIHtcbiAgICAgICAgICAgICAgICBjb25zdCBlID0gQnQuZ2V0SGFuZGxlcyh0KTtcbiAgICAgICAgICAgICAgICBpZiAobnVsbCAhPT0gKHMgPSBudWxsID09PSBlIHx8IHZvaWQgMCA9PT0gZSA/IHZvaWQgMCA6IGUuaW5jbHVkZXMoMCkpICYmIHZvaWQgMCAhPT0gcyA/IHMgOiB0cnVlKSBhLnB1c2godCk7XG4gICAgICAgICAgICAgICAgaWYgKG51bGwgIT09IChvID0gbnVsbCA9PT0gZSB8fCB2b2lkIDAgPT09IGUgPyB2b2lkIDAgOiBlLmluY2x1ZGVzKDEpKSAmJiB2b2lkIDAgIT09IG8gPyBvIDogdHJ1ZSkgaC5wdXNoKHQpO1xuICAgICAgICAgICAgICAgIGlmIChudWxsICE9PSAodSA9IG51bGwgPT09IGUgfHwgdm9pZCAwID09PSBlID8gdm9pZCAwIDogZS5pbmNsdWRlcygyKSkgJiYgdm9pZCAwICE9PSB1ID8gdSA6IHRydWUpIGQucHVzaCh0KTtcbiAgICAgICAgICAgICAgICBpZiAobnVsbCAhPT0gKGwgPSBudWxsID09PSBlIHx8IHZvaWQgMCA9PT0gZSA/IHZvaWQgMCA6IGUuaW5jbHVkZXMoMykpICYmIHZvaWQgMCAhPT0gbCA/IGwgOiB0cnVlKSB2LnB1c2godCk7XG4gICAgICAgICAgICAgICAgaWYgKG51bGwgIT09IChjID0gbnVsbCA9PT0gZSB8fCB2b2lkIDAgPT09IGUgPyB2b2lkIDAgOiBlLmluY2x1ZGVzKDQpKSAmJiB2b2lkIDAgIT09IGMgPyBjIDogdHJ1ZSkgdy5wdXNoKHQpO1xuICAgICAgICAgICAgICAgIGlmIChudWxsICE9PSAoZiA9IG51bGwgPT09IGUgfHwgdm9pZCAwID09PSBlID8gdm9pZCAwIDogZS5pbmNsdWRlcyg1KSkgJiYgdm9pZCAwICE9PSBmID8gZiA6IHRydWUpIGcucHVzaCh0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMucm9vdCA9IGkucm9vdDtcbiAgICAgICAgICAgIHRoaXMucGFyZW50ID0gaTtcbiAgICAgICAgICAgIGEgPSB0aGlzLnRyYWNlU2lua3MgPSBpLnRyYWNlU2lua3M7XG4gICAgICAgICAgICBoID0gdGhpcy5kZWJ1Z1NpbmtzID0gaS5kZWJ1Z1NpbmtzO1xuICAgICAgICAgICAgZCA9IHRoaXMuaW5mb1NpbmtzID0gaS5pbmZvU2lua3M7XG4gICAgICAgICAgICB2ID0gdGhpcy53YXJuU2lua3MgPSBpLndhcm5TaW5rcztcbiAgICAgICAgICAgIHcgPSB0aGlzLmVycm9yU2lua3MgPSBpLmVycm9yU2lua3M7XG4gICAgICAgICAgICBnID0gdGhpcy5mYXRhbFNpbmtzID0gaS5mYXRhbFNpbmtzO1xuICAgICAgICB9XG4gICAgfVxuICAgIHRyYWNlKHQsIC4uLmUpIHtcbiAgICAgICAgaWYgKHRoaXMuY29uZmlnLmxldmVsIDw9IDApIHRoaXMuZW1pdCh0aGlzLnRyYWNlU2lua3MsIDAsIHQsIGUpO1xuICAgIH1cbiAgICBkZWJ1Zyh0LCAuLi5lKSB7XG4gICAgICAgIGlmICh0aGlzLmNvbmZpZy5sZXZlbCA8PSAxKSB0aGlzLmVtaXQodGhpcy5kZWJ1Z1NpbmtzLCAxLCB0LCBlKTtcbiAgICB9XG4gICAgaW5mbyh0LCAuLi5lKSB7XG4gICAgICAgIGlmICh0aGlzLmNvbmZpZy5sZXZlbCA8PSAyKSB0aGlzLmVtaXQodGhpcy5pbmZvU2lua3MsIDIsIHQsIGUpO1xuICAgIH1cbiAgICB3YXJuKHQsIC4uLmUpIHtcbiAgICAgICAgaWYgKHRoaXMuY29uZmlnLmxldmVsIDw9IDMpIHRoaXMuZW1pdCh0aGlzLndhcm5TaW5rcywgMywgdCwgZSk7XG4gICAgfVxuICAgIGVycm9yKHQsIC4uLmUpIHtcbiAgICAgICAgaWYgKHRoaXMuY29uZmlnLmxldmVsIDw9IDQpIHRoaXMuZW1pdCh0aGlzLmVycm9yU2lua3MsIDQsIHQsIGUpO1xuICAgIH1cbiAgICBmYXRhbCh0LCAuLi5lKSB7XG4gICAgICAgIGlmICh0aGlzLmNvbmZpZy5sZXZlbCA8PSA1KSB0aGlzLmVtaXQodGhpcy5mYXRhbFNpbmtzLCA1LCB0LCBlKTtcbiAgICB9XG4gICAgc2NvcGVUbyh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSB0aGlzLnNjb3BlZExvZ2dlcnM7XG4gICAgICAgIGxldCBuID0gZVt0XTtcbiAgICAgICAgaWYgKHZvaWQgMCA9PT0gbikgbiA9IGVbdF0gPSBuZXcgRGVmYXVsdExvZ2dlcih0aGlzLmNvbmZpZywgdGhpcy5mYWN0b3J5LCB2b2lkIDAsIHRoaXMuc2NvcGUuY29uY2F0KHQpLCB0aGlzKTtcbiAgICAgICAgcmV0dXJuIG47XG4gICAgfVxuICAgIGVtaXQodCwgZSwgbiwgcikge1xuICAgICAgICBjb25zdCBpID0gSShuKSA/IG4oKSA6IG47XG4gICAgICAgIGNvbnN0IHMgPSB0aGlzLmZhY3RvcnkuY3JlYXRlTG9nRXZlbnQodGhpcywgZSwgaSwgcik7XG4gICAgICAgIGZvciAobGV0IGUgPSAwLCBuID0gdC5sZW5ndGg7IGUgPCBuOyArK2UpIHRbZV0uaGFuZGxlRXZlbnQocyk7XG4gICAgfVxufTtcblxuVHQoWyBtIF0sIFZ0LnByb3RvdHlwZSwgXCJ0cmFjZVwiLCBudWxsKTtcblxuVHQoWyBtIF0sIFZ0LnByb3RvdHlwZSwgXCJkZWJ1Z1wiLCBudWxsKTtcblxuVHQoWyBtIF0sIFZ0LnByb3RvdHlwZSwgXCJpbmZvXCIsIG51bGwpO1xuXG5UdChbIG0gXSwgVnQucHJvdG90eXBlLCBcIndhcm5cIiwgbnVsbCk7XG5cblR0KFsgbSBdLCBWdC5wcm90b3R5cGUsIFwiZXJyb3JcIiwgbnVsbCk7XG5cblR0KFsgbSBdLCBWdC5wcm90b3R5cGUsIFwiZmF0YWxcIiwgbnVsbCk7XG5cblZ0ID0gVHQoWyBGdCgwLCBQdCksIEZ0KDEsIFN0KSwgRnQoMiwgbnQoRHQpKSwgRnQoMywgaXQoV3QpKSwgRnQoNCwgc3QpIF0sIFZ0KTtcblxuY29uc3QgcXQgPSBDKHtcbiAgICBjcmVhdGUoe2xldmVsOiB0ID0gMywgY29sb3JPcHRpb25zOiBlID0gMCwgc2lua3M6IG4gPSBbXX0gPSB7fSkge1xuICAgICAgICByZXR1cm4gQyh7XG4gICAgICAgICAgICByZWdpc3RlcihyKSB7XG4gICAgICAgICAgICAgICAgci5yZWdpc3RlcigkdC5pbnN0YW5jZShQdCwgbmV3IExvZ0NvbmZpZyhlLCB0KSkpO1xuICAgICAgICAgICAgICAgIGZvciAoY29uc3QgdCBvZiBuKSBpZiAoSSh0KSkgci5yZWdpc3RlcigkdC5zaW5nbGV0b24oRHQsIHQpKTsgZWxzZSByLnJlZ2lzdGVyKHQpO1xuICAgICAgICAgICAgICAgIHJldHVybiByO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG59KTtcblxuY29uc3QgSnQgPSBHLmNyZWF0ZUludGVyZmFjZSgodCA9PiB0LnNpbmdsZXRvbihNb2R1bGVMb2FkZXIpKSk7XG5cbmZ1bmN0aW9uIFh0KHQpIHtcbiAgICByZXR1cm4gdDtcbn1cblxuY2xhc3MgTW9kdWxlVHJhbnNmb3JtZXIge1xuICAgIGNvbnN0cnVjdG9yKHQpIHtcbiAgICAgICAgdGhpcy4kdHJhbnNmb3JtID0gdDtcbiAgICAgICAgdGhpcy5BID0gbmV3IE1hcDtcbiAgICAgICAgdGhpcy5qID0gbmV3IE1hcDtcbiAgICB9XG4gICAgdHJhbnNmb3JtKHQpIHtcbiAgICAgICAgaWYgKHQgaW5zdGFuY2VvZiBQcm9taXNlKSByZXR1cm4gdGhpcy5PKHQpOyBlbHNlIGlmIChcIm9iamVjdFwiID09PSB0eXBlb2YgdCAmJiBudWxsICE9PSB0KSByZXR1cm4gdGhpcy5JKHQpOyBlbHNlIHRocm93IG5ldyBFcnJvcihgSW52YWxpZCBpbnB1dDogJHtTdHJpbmcodCl9LiBFeHBlY3RlZCBQcm9taXNlIG9yIE9iamVjdC5gKTtcbiAgICB9XG4gICAgTyh0KSB7XG4gICAgICAgIGlmICh0aGlzLkEuaGFzKHQpKSByZXR1cm4gdGhpcy5BLmdldCh0KTtcbiAgICAgICAgY29uc3QgZSA9IHQudGhlbigodCA9PiB0aGlzLkkodCkpKTtcbiAgICAgICAgdGhpcy5BLnNldCh0LCBlKTtcbiAgICAgICAgdm9pZCBlLnRoZW4oKGUgPT4ge1xuICAgICAgICAgICAgdGhpcy5BLnNldCh0LCBlKTtcbiAgICAgICAgfSkpO1xuICAgICAgICByZXR1cm4gZTtcbiAgICB9XG4gICAgSSh0KSB7XG4gICAgICAgIGlmICh0aGlzLmouaGFzKHQpKSByZXR1cm4gdGhpcy5qLmdldCh0KTtcbiAgICAgICAgY29uc3QgZSA9IHRoaXMuJHRyYW5zZm9ybSh0aGlzLk0odCkpO1xuICAgICAgICB0aGlzLmouc2V0KHQsIGUpO1xuICAgICAgICBpZiAoZSBpbnN0YW5jZW9mIFByb21pc2UpIHZvaWQgZS50aGVuKChlID0+IHtcbiAgICAgICAgICAgIHRoaXMuai5zZXQodCwgZSk7XG4gICAgICAgIH0pKTtcbiAgICAgICAgcmV0dXJuIGU7XG4gICAgfVxuICAgIE0odCkge1xuICAgICAgICBsZXQgZTtcbiAgICAgICAgbGV0IG47XG4gICAgICAgIGxldCByO1xuICAgICAgICBsZXQgaTtcbiAgICAgICAgY29uc3QgcyA9IFtdO1xuICAgICAgICBmb3IgKGNvbnN0IG8gaW4gdCkge1xuICAgICAgICAgICAgc3dpdGNoICh0eXBlb2YgKGUgPSB0W29dKSkge1xuICAgICAgICAgICAgICBjYXNlIFwib2JqZWN0XCI6XG4gICAgICAgICAgICAgICAgaWYgKG51bGwgPT09IGUpIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIG4gPSBJKGUucmVnaXN0ZXIpO1xuICAgICAgICAgICAgICAgIHIgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICBpID0gT3Q7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgICAgY2FzZSBcImZ1bmN0aW9uXCI6XG4gICAgICAgICAgICAgICAgbiA9IEkoZS5yZWdpc3Rlcik7XG4gICAgICAgICAgICAgICAgciA9IHZvaWQgMCAhPT0gZS5wcm90b3R5cGU7XG4gICAgICAgICAgICAgICAgaSA9IFMucmVzb3VyY2UuZ2V0QWxsKGUpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBzLnB1c2gobmV3IE1vZHVsZUl0ZW0obywgZSwgbiwgciwgaSkpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBuZXcgQW5hbHl6ZWRNb2R1bGUodCwgcyk7XG4gICAgfVxufVxuXG5jbGFzcyBNb2R1bGVMb2FkZXIge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICB0aGlzLnRyYW5zZm9ybWVycyA9IG5ldyBNYXA7XG4gICAgfVxuICAgIGxvYWQodCwgZSA9IFh0KSB7XG4gICAgICAgIGNvbnN0IG4gPSB0aGlzLnRyYW5zZm9ybWVycztcbiAgICAgICAgbGV0IHIgPSBuLmdldChlKTtcbiAgICAgICAgaWYgKHZvaWQgMCA9PT0gcikgbi5zZXQoZSwgciA9IG5ldyBNb2R1bGVUcmFuc2Zvcm1lcihlKSk7XG4gICAgICAgIHJldHVybiByLnRyYW5zZm9ybSh0KTtcbiAgICB9XG4gICAgZGlzcG9zZSgpIHtcbiAgICAgICAgdGhpcy50cmFuc2Zvcm1lcnMuY2xlYXIoKTtcbiAgICB9XG59XG5cbmNsYXNzIEFuYWx5emVkTW9kdWxlIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlKSB7XG4gICAgICAgIHRoaXMucmF3ID0gdDtcbiAgICAgICAgdGhpcy5pdGVtcyA9IGU7XG4gICAgfVxufVxuXG5jbGFzcyBNb2R1bGVJdGVtIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlLCBuLCByLCBpKSB7XG4gICAgICAgIHRoaXMua2V5ID0gdDtcbiAgICAgICAgdGhpcy52YWx1ZSA9IGU7XG4gICAgICAgIHRoaXMuaXNSZWdpc3RyeSA9IG47XG4gICAgICAgIHRoaXMuaXNDb25zdHJ1Y3RhYmxlID0gcjtcbiAgICAgICAgdGhpcy5kZWZpbml0aW9ucyA9IGk7XG4gICAgfVxufVxuXG5jbGFzcyBIYW5kbGVyIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlKSB7XG4gICAgICAgIHRoaXMubWVzc2FnZVR5cGUgPSB0O1xuICAgICAgICB0aGlzLmNhbGxiYWNrID0gZTtcbiAgICB9XG4gICAgaGFuZGxlKHQpIHtcbiAgICAgICAgaWYgKHQgaW5zdGFuY2VvZiB0aGlzLm1lc3NhZ2VUeXBlKSB0aGlzLmNhbGxiYWNrLmNhbGwobnVsbCwgdCk7XG4gICAgfVxufVxuXG5jb25zdCBZdCA9IEcuY3JlYXRlSW50ZXJmYWNlKFwiSUV2ZW50QWdncmVnYXRvclwiLCAodCA9PiB0LnNpbmdsZXRvbihFdmVudEFnZ3JlZ2F0b3IpKSk7XG5cbmNsYXNzIEV2ZW50QWdncmVnYXRvciB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMuZXZlbnRMb29rdXAgPSB7fTtcbiAgICAgICAgdGhpcy5tZXNzYWdlSGFuZGxlcnMgPSBbXTtcbiAgICB9XG4gICAgcHVibGlzaCh0LCBlKSB7XG4gICAgICAgIGlmICghdCkgdGhyb3cgbmV3IEVycm9yKGBJbnZhbGlkIGNoYW5uZWwgbmFtZSBvciBpbnN0YW5jZTogJHt0fS5gKTtcbiAgICAgICAgaWYgKE0odCkpIHtcbiAgICAgICAgICAgIGxldCBuID0gdGhpcy5ldmVudExvb2t1cFt0XTtcbiAgICAgICAgICAgIGlmICh2b2lkIDAgIT09IG4pIHtcbiAgICAgICAgICAgICAgICBuID0gbi5zbGljZSgpO1xuICAgICAgICAgICAgICAgIGxldCByID0gbi5sZW5ndGg7XG4gICAgICAgICAgICAgICAgd2hpbGUgKHItLSA+IDApIG5bcl0oZSwgdCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjb25zdCBlID0gdGhpcy5tZXNzYWdlSGFuZGxlcnMuc2xpY2UoKTtcbiAgICAgICAgICAgIGxldCBuID0gZS5sZW5ndGg7XG4gICAgICAgICAgICB3aGlsZSAobi0tID4gMCkgZVtuXS5oYW5kbGUodCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgc3Vic2NyaWJlKHQsIGUpIHtcbiAgICAgICAgaWYgKCF0KSB0aHJvdyBuZXcgRXJyb3IoYEludmFsaWQgY2hhbm5lbCBuYW1lIG9yIHR5cGU6ICR7dH0uYCk7XG4gICAgICAgIGxldCBuO1xuICAgICAgICBsZXQgcjtcbiAgICAgICAgaWYgKE0odCkpIHtcbiAgICAgICAgICAgIGlmICh2b2lkIDAgPT09IHRoaXMuZXZlbnRMb29rdXBbdF0pIHRoaXMuZXZlbnRMb29rdXBbdF0gPSBbXTtcbiAgICAgICAgICAgIG4gPSBlO1xuICAgICAgICAgICAgciA9IHRoaXMuZXZlbnRMb29rdXBbdF07XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBuID0gbmV3IEhhbmRsZXIodCwgZSk7XG4gICAgICAgICAgICByID0gdGhpcy5tZXNzYWdlSGFuZGxlcnM7XG4gICAgICAgIH1cbiAgICAgICAgci5wdXNoKG4pO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgZGlzcG9zZSgpIHtcbiAgICAgICAgICAgICAgICBjb25zdCB0ID0gci5pbmRleE9mKG4pO1xuICAgICAgICAgICAgICAgIGlmICgtMSAhPT0gdCkgci5zcGxpY2UodCwgMSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgfVxuICAgIHN1YnNjcmliZU9uY2UodCwgZSkge1xuICAgICAgICBjb25zdCBuID0gdGhpcy5zdWJzY3JpYmUodCwgKGZ1bmN0aW9uKHQsIHIpIHtcbiAgICAgICAgICAgIG4uZGlzcG9zZSgpO1xuICAgICAgICAgICAgZSh0LCByKTtcbiAgICAgICAgfSkpO1xuICAgICAgICByZXR1cm4gbjtcbiAgICB9XG59XG5cbmV4cG9ydCB7IEFuYWx5emVkTW9kdWxlLCBMdCBhcyBDb2xvck9wdGlvbnMsIEh0IGFzIENvbnNvbGVTaW5rLCBDb250YWluZXJDb25maWd1cmF0aW9uLCBHIGFzIERJLCBEZWZhdWx0TG9nRXZlbnQsIF90IGFzIERlZmF1bHRMb2dFdmVudEZhY3RvcnksIFZ0IGFzIERlZmF1bHRMb2dnZXIsIHogYXMgRGVmYXVsdFJlc29sdmVyLCBFdmVudEFnZ3JlZ2F0b3IsIEggYXMgSUNvbnRhaW5lciwgWXQgYXMgSUV2ZW50QWdncmVnYXRvciwgUHQgYXMgSUxvZ0NvbmZpZywgU3QgYXMgSUxvZ0V2ZW50RmFjdG9yeSwgTnQgYXMgSUxvZ2dlciwgSnQgYXMgSU1vZHVsZUxvYWRlciwgTXQgYXMgSVBsYXRmb3JtLCBWIGFzIElTZXJ2aWNlTG9jYXRvciwgRHQgYXMgSVNpbmssIEluc3RhbmNlUHJvdmlkZXIsIExvZ0NvbmZpZywgVXQgYXMgTG9nTGV2ZWwsIHF0IGFzIExvZ2dlckNvbmZpZ3VyYXRpb24sIE1vZHVsZUl0ZW0sIFMgYXMgUHJvdG9jb2wsICR0IGFzIFJlZ2lzdHJhdGlvbiwgbnQgYXMgYWxsLCBtIGFzIGJvdW5kLCBsIGFzIGNhbWVsQ2FzZSwgdyBhcyBjb21wYXJlTnVtYmVyLCBPdCBhcyBlbXB0eUFycmF5LCBrdCBhcyBlbXB0eU9iamVjdCwgb3QgYXMgZmFjdG9yeSwgUiBhcyBmaXJzdERlZmluZWQsIHh0IGFzIGZvcm1hdCwgVyBhcyBmcm9tQW5ub3RhdGlvbk9yRGVmaW5pdGlvbk9yVHlwZU9yRGVmYXVsdCwgQiBhcyBmcm9tQW5ub3RhdGlvbk9yVHlwZU9yRGVmYXVsdCwgUSBhcyBmcm9tRGVmaW5pdGlvbk9yRGVmYXVsdCwgYiBhcyBnZXRQcm90b3R5cGVDaGFpbiwgc3QgYXMgaWdub3JlLCBKIGFzIGluamVjdCwgaSBhcyBpc0FycmF5SW5kZXgsICQgYXMgaXNOYXRpdmVGdW5jdGlvbiwgcyBhcyBpc051bWJlck9yQmlnSW50LCBvIGFzIGlzU3RyaW5nT3JEYXRlLCBmIGFzIGtlYmFiQ2FzZSwgcnQgYXMgbGF6eSwgcCBhcyBtZXJnZUFycmF5cywgZyBhcyBtZXJnZURpc3RpbmN0LCB5IGFzIG1lcmdlT2JqZWN0cywgdXQgYXMgbmV3SW5zdGFuY2VGb3JTY29wZSwgbHQgYXMgbmV3SW5zdGFuY2VPZiwgZCBhcyBuZXh0SWQsIEl0IGFzIG5vb3AsIEUgYXMgb25SZXNvbHZlLCBpdCBhcyBvcHRpb25hbCwgYyBhcyBwYXNjYWxDYXNlLCB2IGFzIHJlc2V0SWQsIEEgYXMgcmVzb2x2ZUFsbCwgdHQgYXMgc2luZ2xldG9uLCBRdCBhcyBzaW5rLCBhIGFzIHRvQXJyYXksIFkgYXMgdHJhbnNpZW50IH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC5qcy5tYXBcbiIsImZ1bmN0aW9uIHQodCkge1xuICAgIHJldHVybiBcIm9iamVjdFwiID09PSB0eXBlb2YgdCAmJiBudWxsICE9PSB0IHx8IFwiZnVuY3Rpb25cIiA9PT0gdHlwZW9mIHQ7XG59XG5cbmZ1bmN0aW9uIGUodCkge1xuICAgIHJldHVybiBudWxsID09PSB0IHx8IHZvaWQgMCA9PT0gdDtcbn1cblxuY29uc3QgbiA9IG5ldyBXZWFrTWFwO1xuXG5mdW5jdGlvbiByKHQsIGUsIG4sIHIsIGEpIHtcbiAgICByZXR1cm4gbmV3IFR5cGVFcnJvcihgJHt0fSgke2UubWFwKFN0cmluZykuam9pbihcIixcIil9KSAtIEV4cGVjdGVkICcke259JyB0byBiZSBvZiB0eXBlICR7YX0sIGJ1dCBnb3Q6ICR7T2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHIpfSAoJHtTdHJpbmcocil9KWApO1xufVxuXG5mdW5jdGlvbiBhKHQpIHtcbiAgICBzd2l0Y2ggKHR5cGVvZiB0KSB7XG4gICAgICBjYXNlIFwidW5kZWZpbmVkXCI6XG4gICAgICBjYXNlIFwic3RyaW5nXCI6XG4gICAgICBjYXNlIFwic3ltYm9sXCI6XG4gICAgICAgIHJldHVybiB0O1xuXG4gICAgICBkZWZhdWx0OlxuICAgICAgICByZXR1cm4gYCR7dH1gO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gbyh0KSB7XG4gICAgc3dpdGNoICh0eXBlb2YgdCkge1xuICAgICAgY2FzZSBcInN0cmluZ1wiOlxuICAgICAgY2FzZSBcInN5bWJvbFwiOlxuICAgICAgICByZXR1cm4gdDtcblxuICAgICAgZGVmYXVsdDpcbiAgICAgICAgcmV0dXJuIGAke3R9YDtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIGkodCkge1xuICAgIHN3aXRjaCAodHlwZW9mIHQpIHtcbiAgICAgIGNhc2UgXCJ1bmRlZmluZWRcIjpcbiAgICAgIGNhc2UgXCJzdHJpbmdcIjpcbiAgICAgIGNhc2UgXCJzeW1ib2xcIjpcbiAgICAgICAgcmV0dXJuIHQ7XG5cbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoYEludmFsaWQgbWV0YWRhdGEgcHJvcGVydHlLZXk6ICR7dH0uYCk7XG4gICAgfVxufVxuXG5mdW5jdGlvbiB1KHQsIGUsIHIpIHtcbiAgICBsZXQgYSA9IG4uZ2V0KHQpO1xuICAgIGlmICh2b2lkIDAgPT09IGEpIHtcbiAgICAgICAgaWYgKCFyKSByZXR1cm47XG4gICAgICAgIGEgPSBuZXcgTWFwO1xuICAgICAgICBuLnNldCh0LCBhKTtcbiAgICB9XG4gICAgbGV0IG8gPSBhLmdldChlKTtcbiAgICBpZiAodm9pZCAwID09PSBvKSB7XG4gICAgICAgIGlmICghcikgcmV0dXJuO1xuICAgICAgICBvID0gbmV3IE1hcDtcbiAgICAgICAgYS5zZXQoZSwgbyk7XG4gICAgfVxuICAgIHJldHVybiBvO1xufVxuXG5mdW5jdGlvbiBjKHQsIGUsIG4pIHtcbiAgICBjb25zdCByID0gdShlLCBuLCBmYWxzZSk7XG4gICAgaWYgKHZvaWQgMCA9PT0gcikgcmV0dXJuIGZhbHNlO1xuICAgIHJldHVybiByLmhhcyh0KTtcbn1cblxuZnVuY3Rpb24gZih0LCBlLCBuKSB7XG4gICAgaWYgKGModCwgZSwgbikpIHJldHVybiB0cnVlO1xuICAgIGNvbnN0IHIgPSBPYmplY3QuZ2V0UHJvdG90eXBlT2YoZSk7XG4gICAgaWYgKG51bGwgIT09IHIpIHJldHVybiBmKHQsIHIsIG4pO1xuICAgIHJldHVybiBmYWxzZTtcbn1cblxuZnVuY3Rpb24gcyh0LCBlLCBuKSB7XG4gICAgY29uc3QgciA9IHUoZSwgbiwgZmFsc2UpO1xuICAgIGlmICh2b2lkIDAgPT09IHIpIHJldHVybjtcbiAgICByZXR1cm4gci5nZXQodCk7XG59XG5cbmZ1bmN0aW9uIGwodCwgZSwgbikge1xuICAgIGlmIChjKHQsIGUsIG4pKSByZXR1cm4gcyh0LCBlLCBuKTtcbiAgICBjb25zdCByID0gT2JqZWN0LmdldFByb3RvdHlwZU9mKGUpO1xuICAgIGlmIChudWxsICE9PSByKSByZXR1cm4gbCh0LCByLCBuKTtcbiAgICByZXR1cm47XG59XG5cbmZ1bmN0aW9uIGQodCwgZSwgbiwgcikge1xuICAgIGNvbnN0IGEgPSB1KG4sIHIsIHRydWUpO1xuICAgIGEuc2V0KHQsIGUpO1xufVxuXG5mdW5jdGlvbiB3KHQsIGUpIHtcbiAgICBjb25zdCBuID0gW107XG4gICAgY29uc3QgciA9IHUodCwgZSwgZmFsc2UpO1xuICAgIGlmICh2b2lkIDAgPT09IHIpIHJldHVybiBuO1xuICAgIGNvbnN0IGEgPSByLmtleXMoKTtcbiAgICBsZXQgbyA9IDA7XG4gICAgZm9yIChjb25zdCB0IG9mIGEpIHtcbiAgICAgICAgbltvXSA9IHQ7XG4gICAgICAgICsrbztcbiAgICB9XG4gICAgcmV0dXJuIG47XG59XG5cbmZ1bmN0aW9uIHkodCwgZSkge1xuICAgIGNvbnN0IG4gPSB3KHQsIGUpO1xuICAgIGNvbnN0IHIgPSBPYmplY3QuZ2V0UHJvdG90eXBlT2YodCk7XG4gICAgaWYgKG51bGwgPT09IHIpIHJldHVybiBuO1xuICAgIGNvbnN0IGEgPSB5KHIsIGUpO1xuICAgIGNvbnN0IG8gPSBuLmxlbmd0aDtcbiAgICBpZiAoMCA9PT0gbykgcmV0dXJuIGE7XG4gICAgY29uc3QgaSA9IGEubGVuZ3RoO1xuICAgIGlmICgwID09PSBpKSByZXR1cm4gbjtcbiAgICBjb25zdCB1ID0gbmV3IFNldDtcbiAgICBjb25zdCBjID0gW107XG4gICAgbGV0IGYgPSAwO1xuICAgIGxldCBzO1xuICAgIGZvciAobGV0IHQgPSAwOyB0IDwgbzsgKyt0KSB7XG4gICAgICAgIHMgPSBuW3RdO1xuICAgICAgICBpZiAoIXUuaGFzKHMpKSB7XG4gICAgICAgICAgICB1LmFkZChzKTtcbiAgICAgICAgICAgIGNbZl0gPSBzO1xuICAgICAgICAgICAgKytmO1xuICAgICAgICB9XG4gICAgfVxuICAgIGZvciAobGV0IHQgPSAwOyB0IDwgaTsgKyt0KSB7XG4gICAgICAgIHMgPSBhW3RdO1xuICAgICAgICBpZiAoIXUuaGFzKHMpKSB7XG4gICAgICAgICAgICB1LmFkZChzKTtcbiAgICAgICAgICAgIGNbZl0gPSBzO1xuICAgICAgICAgICAgKytmO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBjO1xufVxuXG5mdW5jdGlvbiBoKHQsIGUsIG4pIHtcbiAgICBjb25zdCByID0gdSh0LCBuLCBmYWxzZSk7XG4gICAgaWYgKHZvaWQgMCA9PT0gcikgcmV0dXJuIGZhbHNlO1xuICAgIHJldHVybiByLmRlbGV0ZShlKTtcbn1cblxuZnVuY3Rpb24gZyhlLCBuKSB7XG4gICAgZnVuY3Rpb24gYShhLCBvKSB7XG4gICAgICAgIGlmICghdChhKSkgdGhyb3cgcihcIkBtZXRhZGF0YVwiLCBbIGUsIG4sIGEsIG8gXSwgXCJ0YXJnZXRcIiwgYSwgXCJPYmplY3Qgb3IgRnVuY3Rpb25cIik7XG4gICAgICAgIGQoZSwgbiwgYSwgaShvKSk7XG4gICAgfVxuICAgIHJldHVybiBhO1xufVxuXG5mdW5jdGlvbiBwKG4sIGEsIGksIHUpIHtcbiAgICBpZiAodm9pZCAwICE9PSBpKSB7XG4gICAgICAgIGlmICghQXJyYXkuaXNBcnJheShuKSkgdGhyb3cgcihcIk1ldGFkYXRhLmRlY29yYXRlXCIsIFsgbiwgYSwgaSwgdSBdLCBcImRlY29yYXRvcnNcIiwgbiwgXCJBcnJheVwiKTtcbiAgICAgICAgaWYgKCF0KGEpKSB0aHJvdyByKFwiTWV0YWRhdGEuZGVjb3JhdGVcIiwgWyBuLCBhLCBpLCB1IF0sIFwidGFyZ2V0XCIsIGEsIFwiT2JqZWN0IG9yIEZ1bmN0aW9uXCIpO1xuICAgICAgICBpZiAoIXQodSkgJiYgIWUodSkpIHRocm93IHIoXCJNZXRhZGF0YS5kZWNvcmF0ZVwiLCBbIG4sIGEsIGksIHUgXSwgXCJhdHRyaWJ1dGVzXCIsIHUsIFwiT2JqZWN0LCBGdW5jdGlvbiwgbnVsbCwgb3IgdW5kZWZpbmVkXCIpO1xuICAgICAgICBpZiAobnVsbCA9PT0gdSkgdSA9IHZvaWQgMDtcbiAgICAgICAgaSA9IG8oaSk7XG4gICAgICAgIHJldHVybiBiKG4sIGEsIGksIHUpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIGlmICghQXJyYXkuaXNBcnJheShuKSkgdGhyb3cgcihcIk1ldGFkYXRhLmRlY29yYXRlXCIsIFsgbiwgYSwgaSwgdSBdLCBcImRlY29yYXRvcnNcIiwgbiwgXCJBcnJheVwiKTtcbiAgICAgICAgaWYgKFwiZnVuY3Rpb25cIiAhPT0gdHlwZW9mIGEpIHRocm93IHIoXCJNZXRhZGF0YS5kZWNvcmF0ZVwiLCBbIG4sIGEsIGksIHUgXSwgXCJ0YXJnZXRcIiwgYSwgXCJGdW5jdGlvblwiKTtcbiAgICAgICAgcmV0dXJuIE0obiwgYSk7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBNKHQsIG4pIHtcbiAgICBmb3IgKGxldCBhID0gdC5sZW5ndGggLSAxOyBhID49IDA7IC0tYSkge1xuICAgICAgICBjb25zdCBvID0gdFthXTtcbiAgICAgICAgY29uc3QgaSA9IG8obik7XG4gICAgICAgIGlmICghZShpKSkge1xuICAgICAgICAgICAgaWYgKFwiZnVuY3Rpb25cIiAhPT0gdHlwZW9mIGkpIHRocm93IHIoXCJEZWNvcmF0ZUNvbnN0cnVjdG9yXCIsIFsgdCwgbiBdLCBcImRlY29yYXRlZFwiLCBpLCBcIkZ1bmN0aW9uLCBudWxsLCBvciB1bmRlZmluZWRcIik7XG4gICAgICAgICAgICBuID0gaTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gbjtcbn1cblxuZnVuY3Rpb24gYihuLCBhLCBvLCBpKSB7XG4gICAgZm9yIChsZXQgdSA9IG4ubGVuZ3RoIC0gMTsgdSA+PSAwOyAtLXUpIHtcbiAgICAgICAgY29uc3QgYyA9IG5bdV07XG4gICAgICAgIGNvbnN0IGYgPSBjKGEsIG8sIGkpO1xuICAgICAgICBpZiAoIWUoZikpIHtcbiAgICAgICAgICAgIGlmICghdChmKSkgdGhyb3cgcihcIkRlY29yYXRlUHJvcGVydHlcIiwgWyBuLCBhLCBvLCBpIF0sIFwiZGVjb3JhdGVkXCIsIGYsIFwiT2JqZWN0LCBGdW5jdGlvbiwgbnVsbCwgb3IgdW5kZWZpbmVkXCIpO1xuICAgICAgICAgICAgaSA9IGY7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGk7XG59XG5cbmZ1bmN0aW9uIE8oZSwgbiwgbywgaSkge1xuICAgIGlmICghdChvKSkgdGhyb3cgcihcIk1ldGFkYXRhLmRlZmluZVwiLCBbIGUsIG4sIG8sIGkgXSwgXCJ0YXJnZXRcIiwgbywgXCJPYmplY3Qgb3IgRnVuY3Rpb25cIik7XG4gICAgcmV0dXJuIGQoZSwgbiwgbywgYShpKSk7XG59XG5cbmZ1bmN0aW9uIG0oZSwgbiwgbykge1xuICAgIGlmICghdChuKSkgdGhyb3cgcihcIk1ldGFkYXRhLmhhc1wiLCBbIGUsIG4sIG8gXSwgXCJ0YXJnZXRcIiwgbiwgXCJPYmplY3Qgb3IgRnVuY3Rpb25cIik7XG4gICAgcmV0dXJuIGYoZSwgbiwgYShvKSk7XG59XG5cbmZ1bmN0aW9uIGooZSwgbiwgbykge1xuICAgIGlmICghdChuKSkgdGhyb3cgcihcIk1ldGFkYXRhLmhhc093blwiLCBbIGUsIG4sIG8gXSwgXCJ0YXJnZXRcIiwgbiwgXCJPYmplY3Qgb3IgRnVuY3Rpb25cIik7XG4gICAgcmV0dXJuIGMoZSwgbiwgYShvKSk7XG59XG5cbmZ1bmN0aW9uIHYoZSwgbiwgbykge1xuICAgIGlmICghdChuKSkgdGhyb3cgcihcIk1ldGFkYXRhLmdldFwiLCBbIGUsIG4sIG8gXSwgXCJ0YXJnZXRcIiwgbiwgXCJPYmplY3Qgb3IgRnVuY3Rpb25cIik7XG4gICAgcmV0dXJuIGwoZSwgbiwgYShvKSk7XG59XG5cbmZ1bmN0aW9uICQoZSwgbiwgbykge1xuICAgIGlmICghdChuKSkgdGhyb3cgcihcIk1ldGFkYXRhLmdldE93blwiLCBbIGUsIG4sIG8gXSwgXCJ0YXJnZXRcIiwgbiwgXCJPYmplY3Qgb3IgRnVuY3Rpb25cIik7XG4gICAgcmV0dXJuIHMoZSwgbiwgYShvKSk7XG59XG5cbmZ1bmN0aW9uIEYoZSwgbikge1xuICAgIGlmICghdChlKSkgdGhyb3cgcihcIk1ldGFkYXRhLmdldEtleXNcIiwgWyBlLCBuIF0sIFwidGFyZ2V0XCIsIGUsIFwiT2JqZWN0IG9yIEZ1bmN0aW9uXCIpO1xuICAgIHJldHVybiB5KGUsIGEobikpO1xufVxuXG5mdW5jdGlvbiBLKGUsIG4pIHtcbiAgICBpZiAoIXQoZSkpIHRocm93IHIoXCJNZXRhZGF0YS5nZXRPd25LZXlzXCIsIFsgZSwgbiBdLCBcInRhcmdldFwiLCBlLCBcIk9iamVjdCBvciBGdW5jdGlvblwiKTtcbiAgICByZXR1cm4gdyhlLCBhKG4pKTtcbn1cblxuZnVuY3Rpb24gRShlLCBuLCBvKSB7XG4gICAgaWYgKCF0KG4pKSB0aHJvdyByKFwiTWV0YWRhdGEuZGVsZXRlXCIsIFsgZSwgbiwgbyBdLCBcInRhcmdldFwiLCBuLCBcIk9iamVjdCBvciBGdW5jdGlvblwiKTtcbiAgICByZXR1cm4gaChuLCBlLCBhKG8pKTtcbn1cblxuY29uc3QgQSA9IHtcbiAgICBkZWZpbmU6IE8sXG4gICAgaGFzOiBtLFxuICAgIGhhc093bjogaixcbiAgICBnZXQ6IHYsXG4gICAgZ2V0T3duOiAkLFxuICAgIGdldEtleXM6IEYsXG4gICAgZ2V0T3duS2V5czogSyxcbiAgICBkZWxldGU6IEVcbn07XG5cbmZ1bmN0aW9uIGsodCwgZSwgbiwgciwgYSkge1xuICAgIGlmICghUmVmbGVjdC5kZWZpbmVQcm9wZXJ0eSh0LCBlLCB7XG4gICAgICAgIHdyaXRhYmxlOiByLFxuICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiBhLFxuICAgICAgICB2YWx1ZTogblxuICAgIH0pKSB0aHJvdyBuZXcgRXJyb3IoYFVuYWJsZSB0byBhcHBseSBtZXRhZGF0YSBwb2x5ZmlsbDogY291bGQgbm90IGFkZCBwcm9wZXJ0eSAnJHtlfScgdG8gdGhlIGdsb2JhbCBSZWZsZWN0IG9iamVjdGApO1xufVxuXG5jb25zdCBSID0gXCJbWyRhdV1dXCI7XG5cbmZ1bmN0aW9uIEModCkge1xuICAgIHJldHVybiBSIGluIHQ7XG59XG5cbmZ1bmN0aW9uIEkodCwgZSwgcikge1xuICAgIGsodCwgUiwgbiwgZSwgcik7XG4gICAgayh0LCBcIm1ldGFkYXRhXCIsIGcsIGUsIHIpO1xuICAgIGsodCwgXCJkZWNvcmF0ZVwiLCBwLCBlLCByKTtcbiAgICBrKHQsIFwiZGVmaW5lTWV0YWRhdGFcIiwgTywgZSwgcik7XG4gICAgayh0LCBcImhhc01ldGFkYXRhXCIsIG0sIGUsIHIpO1xuICAgIGsodCwgXCJoYXNPd25NZXRhZGF0YVwiLCBqLCBlLCByKTtcbiAgICBrKHQsIFwiZ2V0TWV0YWRhdGFcIiwgdiwgZSwgcik7XG4gICAgayh0LCBcImdldE93bk1ldGFkYXRhXCIsICQsIGUsIHIpO1xuICAgIGsodCwgXCJnZXRNZXRhZGF0YUtleXNcIiwgRiwgZSwgcik7XG4gICAgayh0LCBcImdldE93bk1ldGFkYXRhS2V5c1wiLCBLLCBlLCByKTtcbiAgICBrKHQsIFwiZGVsZXRlTWV0YWRhdGFcIiwgRSwgZSwgcik7XG59XG5cbmZ1bmN0aW9uIFModCwgZSA9IHRydWUsIHIgPSBmYWxzZSwgYSA9IHRydWUsIG8gPSB0cnVlKSB7XG4gICAgaWYgKEModCkpIHtcbiAgICAgICAgaWYgKHRbUl0gPT09IG4pIHJldHVybjtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBDb25mbGljdGluZyBAYXVyZWxpYS9tZXRhZGF0YSBtb2R1bGUgaW1wb3J0IGRldGVjdGVkLiBQbGVhc2UgbWFrZSBzdXJlIHlvdSBoYXZlIHRoZSBzYW1lIHZlcnNpb24gb2YgYWxsIEF1cmVsaWEgcGFja2FnZXMgaW4geW91ciBkZXBlbmRlbmN5IHRyZWUuYCk7XG4gICAgfVxuICAgIGNvbnN0IGkgPSBbIFwibWV0YWRhdGFcIiwgXCJkZWNvcmF0ZVwiLCBcImRlZmluZU1ldGFkYXRhXCIsIFwiaGFzTWV0YWRhdGFcIiwgXCJoYXNPd25NZXRhZGF0YVwiLCBcImdldE1ldGFkYXRhXCIsIFwiZ2V0T3duTWV0YWRhdGFcIiwgXCJnZXRNZXRhZGF0YUtleXNcIiwgXCJnZXRPd25NZXRhZGF0YUtleXNcIiwgXCJkZWxldGVNZXRhZGF0YVwiIF0uZmlsdGVyKChmdW5jdGlvbih0KSB7XG4gICAgICAgIHJldHVybiB0IGluIFJlZmxlY3Q7XG4gICAgfSkpO1xuICAgIGlmIChpLmxlbmd0aCA+IDApIHtcbiAgICAgICAgaWYgKGUpIHtcbiAgICAgICAgICAgIGNvbnN0IHQgPSBpLm1hcCgoZnVuY3Rpb24odCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGUgPSBgJHtSZWZsZWN0W3RdLnRvU3RyaW5nKCkuc2xpY2UoMCwgMTAwKX0uLi5gO1xuICAgICAgICAgICAgICAgIHJldHVybiBgJHt0fTpcXG4ke2V9YDtcbiAgICAgICAgICAgIH0pKS5qb2luKFwiXFxuXFxuXCIpO1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBDb25mbGljdGluZyByZWZsZWN0Lm1ldGFkYXRhIHBvbHlmaWxsIGZvdW5kLiBJZiB5b3UgaGF2ZSAncmVmbGVjdC1tZXRhZGF0YScgb3IgYW55IG90aGVyIHJlZmxlY3QgcG9seWZpbGwgaW1wb3J0ZWQsIHBsZWFzZSByZW1vdmUgaXQsIGlmIG5vdCAob3IgaWYgeW91IG11c3QgdXNlIGEgc3BlY2lmaWMgcG9seWZpbGwpIHBsZWFzZSBmaWxlIGFuIGlzc3VlIGF0IGh0dHBzOi8vZ2l0aHViLmNvbS9hdXJlbGlhL2F1cmVsaWEvaXNzdWVzIHNvIHRoYXQgd2UgY2FuIGxvb2sgaW50byBjb21wYXRpYmlsaXR5IG9wdGlvbnMgZm9yIHRoaXMgc2NlbmFyaW8uIEltcGxlbWVudGF0aW9uIHN1bW1hcnk6XFxuXFxuJHt0fWApO1xuICAgICAgICB9IGVsc2UgaWYgKHIpIEkodCwgYSwgbyk7XG4gICAgfSBlbHNlIEkodCwgYSwgbyk7XG59XG5cbmV4cG9ydCB7IEEgYXMgTWV0YWRhdGEsIFMgYXMgYXBwbHlNZXRhZGF0YVBvbHlmaWxsLCBlIGFzIGlzTnVsbE9yVW5kZWZpbmVkLCB0IGFzIGlzT2JqZWN0LCBnIGFzIG1ldGFkYXRhIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC5qcy5tYXBcbiIsImltcG9ydCB7IFBsYXRmb3JtIGFzIHQsIFRhc2tRdWV1ZSBhcyBpIH0gZnJvbSBcIkBhdXJlbGlhL3BsYXRmb3JtXCI7XG5cbmNvbnN0IHMgPSBuZXcgTWFwO1xuXG5mdW5jdGlvbiBlKHQpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gaSgpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBUaGUgUExBVEZPUk0gZGlkIG5vdCByZWNlaXZlIGEgdmFsaWQgcmVmZXJlbmNlIHRvIHRoZSBnbG9iYWwgZnVuY3Rpb24gJyR7dH0nLmApO1xuICAgIH07XG59XG5cbmNsYXNzIEJyb3dzZXJQbGF0Zm9ybSBleHRlbmRzIHQge1xuICAgIGNvbnN0cnVjdG9yKHQsIHMgPSB7fSkge1xuICAgICAgICBzdXBlcih0LCBzKTtcbiAgICAgICAgdGhpcy50ID0gZmFsc2U7XG4gICAgICAgIHRoaXMuaSA9IC0xO1xuICAgICAgICB0aGlzLmggPSBmYWxzZTtcbiAgICAgICAgdGhpcy51ID0gLTE7XG4gICAgICAgIChcIk5vZGUsRWxlbWVudCxIVE1MRWxlbWVudCxDdXN0b21FdmVudCxDU1NTdHlsZVNoZWV0LFNoYWRvd1Jvb3QsTXV0YXRpb25PYnNlcnZlcixcIiArIFwid2luZG93LGRvY3VtZW50LGxvY2F0aW9uLGhpc3RvcnksbmF2aWdhdG9yLGN1c3RvbUVsZW1lbnRzXCIpLnNwbGl0KFwiLFwiKS5mb3JFYWNoKChpID0+IHtcbiAgICAgICAgICAgIHRoaXNbaV0gPSBpIGluIHMgPyBzW2ldIDogdFtpXTtcbiAgICAgICAgfSkpO1xuICAgICAgICBcImZldGNoLHJlcXVlc3RBbmltYXRpb25GcmFtZSxjYW5jZWxBbmltYXRpb25GcmFtZVwiLnNwbGl0KFwiLFwiKS5mb3JFYWNoKChpID0+IHtcbiAgICAgICAgICAgIHZhciBoLCByO1xuICAgICAgICAgICAgdGhpc1tpXSA9IGkgaW4gcyA/IHNbaV0gOiBudWxsICE9PSAociA9IG51bGwgPT09IChoID0gdFtpXSkgfHwgdm9pZCAwID09PSBoID8gdm9pZCAwIDogaC5iaW5kKHQpKSAmJiB2b2lkIDAgIT09IHIgPyByIDogZShpKTtcbiAgICAgICAgfSkpO1xuICAgICAgICB0aGlzLmZsdXNoRG9tUmVhZCA9IHRoaXMuZmx1c2hEb21SZWFkLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMuZmx1c2hEb21Xcml0ZSA9IHRoaXMuZmx1c2hEb21Xcml0ZS5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLmRvbVJlYWRRdWV1ZSA9IG5ldyBpKHRoaXMsIHRoaXMucmVxdWVzdERvbVJlYWQuYmluZCh0aGlzKSwgdGhpcy5jYW5jZWxEb21SZWFkLmJpbmQodGhpcykpO1xuICAgICAgICB0aGlzLmRvbVdyaXRlUXVldWUgPSBuZXcgaSh0aGlzLCB0aGlzLnJlcXVlc3REb21Xcml0ZS5iaW5kKHRoaXMpLCB0aGlzLmNhbmNlbERvbVdyaXRlLmJpbmQodGhpcykpO1xuICAgIH1cbiAgICBzdGF0aWMgZ2V0T3JDcmVhdGUodCwgaSA9IHt9KSB7XG4gICAgICAgIGxldCBlID0gcy5nZXQodCk7XG4gICAgICAgIGlmICh2b2lkIDAgPT09IGUpIHMuc2V0KHQsIGUgPSBuZXcgQnJvd3NlclBsYXRmb3JtKHQsIGkpKTtcbiAgICAgICAgcmV0dXJuIGU7XG4gICAgfVxuICAgIHN0YXRpYyBzZXQodCwgaSkge1xuICAgICAgICBzLnNldCh0LCBpKTtcbiAgICB9XG4gICAgcmVxdWVzdERvbVJlYWQoKSB7XG4gICAgICAgIHRoaXMudCA9IHRydWU7XG4gICAgICAgIGlmICgtMSA9PT0gdGhpcy51KSB0aGlzLnUgPSB0aGlzLnJlcXVlc3RBbmltYXRpb25GcmFtZSh0aGlzLmZsdXNoRG9tV3JpdGUpO1xuICAgIH1cbiAgICBjYW5jZWxEb21SZWFkKCkge1xuICAgICAgICB0aGlzLnQgPSBmYWxzZTtcbiAgICAgICAgaWYgKHRoaXMuaSA+IC0xKSB7XG4gICAgICAgICAgICB0aGlzLmNsZWFyVGltZW91dCh0aGlzLmkpO1xuICAgICAgICAgICAgdGhpcy5pID0gLTE7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGZhbHNlID09PSB0aGlzLmggJiYgdGhpcy51ID4gLTEpIHtcbiAgICAgICAgICAgIHRoaXMuY2FuY2VsQW5pbWF0aW9uRnJhbWUodGhpcy51KTtcbiAgICAgICAgICAgIHRoaXMudSA9IC0xO1xuICAgICAgICB9XG4gICAgfVxuICAgIGZsdXNoRG9tUmVhZCgpIHtcbiAgICAgICAgdGhpcy5pID0gLTE7XG4gICAgICAgIGlmICh0cnVlID09PSB0aGlzLnQpIHtcbiAgICAgICAgICAgIHRoaXMudCA9IGZhbHNlO1xuICAgICAgICAgICAgdGhpcy5kb21SZWFkUXVldWUuZmx1c2goKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXF1ZXN0RG9tV3JpdGUoKSB7XG4gICAgICAgIHRoaXMuaCA9IHRydWU7XG4gICAgICAgIGlmICgtMSA9PT0gdGhpcy51KSB0aGlzLnUgPSB0aGlzLnJlcXVlc3RBbmltYXRpb25GcmFtZSh0aGlzLmZsdXNoRG9tV3JpdGUpO1xuICAgIH1cbiAgICBjYW5jZWxEb21Xcml0ZSgpIHtcbiAgICAgICAgdGhpcy5oID0gZmFsc2U7XG4gICAgICAgIGlmICh0aGlzLnUgPiAtMSAmJiAoZmFsc2UgPT09IHRoaXMudCB8fCB0aGlzLmkgPiAtMSkpIHtcbiAgICAgICAgICAgIHRoaXMuY2FuY2VsQW5pbWF0aW9uRnJhbWUodGhpcy51KTtcbiAgICAgICAgICAgIHRoaXMudSA9IC0xO1xuICAgICAgICB9XG4gICAgfVxuICAgIGZsdXNoRG9tV3JpdGUoKSB7XG4gICAgICAgIHRoaXMudSA9IC0xO1xuICAgICAgICBpZiAodHJ1ZSA9PT0gdGhpcy5oKSB7XG4gICAgICAgICAgICB0aGlzLmggPSBmYWxzZTtcbiAgICAgICAgICAgIHRoaXMuZG9tV3JpdGVRdWV1ZS5mbHVzaCgpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0cnVlID09PSB0aGlzLnQgJiYgLTEgPT09IHRoaXMuaSkgdGhpcy5pID0gdGhpcy5zZXRUaW1lb3V0KHRoaXMuZmx1c2hEb21SZWFkLCAwKTtcbiAgICB9XG59XG5cbmV4cG9ydCB7IEJyb3dzZXJQbGF0Zm9ybSB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXguanMubWFwXG4iLCJjb25zdCB0ID0gbmV3IE1hcDtcblxuZnVuY3Rpb24gcyh0KSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIHMoKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgVGhlIFBMQVRGT1JNIGRpZCBub3QgcmVjZWl2ZSBhIHZhbGlkIHJlZmVyZW5jZSB0byB0aGUgZ2xvYmFsIGZ1bmN0aW9uICcke3R9Jy5gKTtcbiAgICB9O1xufVxuXG5jbGFzcyBQbGF0Zm9ybSB7XG4gICAgY29uc3RydWN0b3IodCwgaSA9IHt9KSB7XG4gICAgICAgIHZhciBlLCBoLCByLCBuLCBvLCBhLCBsLCBjLCB1LCBmLCBkLCB2LCB3O1xuICAgICAgICB0aGlzLm1hY3JvVGFza1JlcXVlc3RlZCA9IGZhbHNlO1xuICAgICAgICB0aGlzLm1hY3JvVGFza0hhbmRsZSA9IC0xO1xuICAgICAgICB0aGlzLmdsb2JhbFRoaXMgPSB0O1xuICAgICAgICB0aGlzLmRlY29kZVVSSSA9IFwiZGVjb2RlVVJJXCIgaW4gaSA/IGkuZGVjb2RlVVJJIDogdC5kZWNvZGVVUkk7XG4gICAgICAgIHRoaXMuZGVjb2RlVVJJQ29tcG9uZW50ID0gXCJkZWNvZGVVUklDb21wb25lbnRcIiBpbiBpID8gaS5kZWNvZGVVUklDb21wb25lbnQgOiB0LmRlY29kZVVSSUNvbXBvbmVudDtcbiAgICAgICAgdGhpcy5lbmNvZGVVUkkgPSBcImVuY29kZVVSSVwiIGluIGkgPyBpLmVuY29kZVVSSSA6IHQuZW5jb2RlVVJJO1xuICAgICAgICB0aGlzLmVuY29kZVVSSUNvbXBvbmVudCA9IFwiZW5jb2RlVVJJQ29tcG9uZW50XCIgaW4gaSA/IGkuZW5jb2RlVVJJQ29tcG9uZW50IDogdC5lbmNvZGVVUklDb21wb25lbnQ7XG4gICAgICAgIHRoaXMuRGF0ZSA9IFwiRGF0ZVwiIGluIGkgPyBpLkRhdGUgOiB0LkRhdGU7XG4gICAgICAgIHRoaXMuUmVmbGVjdCA9IFwiUmVmbGVjdFwiIGluIGkgPyBpLlJlZmxlY3QgOiB0LlJlZmxlY3Q7XG4gICAgICAgIHRoaXMuY2xlYXJJbnRlcnZhbCA9IFwiY2xlYXJJbnRlcnZhbFwiIGluIGkgPyBpLmNsZWFySW50ZXJ2YWwgOiBudWxsICE9PSAoaCA9IG51bGwgPT09IChlID0gdC5jbGVhckludGVydmFsKSB8fCB2b2lkIDAgPT09IGUgPyB2b2lkIDAgOiBlLmJpbmQodCkpICYmIHZvaWQgMCAhPT0gaCA/IGggOiBzKFwiY2xlYXJJbnRlcnZhbFwiKTtcbiAgICAgICAgdGhpcy5jbGVhclRpbWVvdXQgPSBcImNsZWFyVGltZW91dFwiIGluIGkgPyBpLmNsZWFyVGltZW91dCA6IG51bGwgIT09IChuID0gbnVsbCA9PT0gKHIgPSB0LmNsZWFyVGltZW91dCkgfHwgdm9pZCAwID09PSByID8gdm9pZCAwIDogci5iaW5kKHQpKSAmJiB2b2lkIDAgIT09IG4gPyBuIDogcyhcImNsZWFyVGltZW91dFwiKTtcbiAgICAgICAgdGhpcy5xdWV1ZU1pY3JvdGFzayA9IFwicXVldWVNaWNyb3Rhc2tcIiBpbiBpID8gaS5xdWV1ZU1pY3JvdGFzayA6IG51bGwgIT09IChhID0gbnVsbCA9PT0gKG8gPSB0LnF1ZXVlTWljcm90YXNrKSB8fCB2b2lkIDAgPT09IG8gPyB2b2lkIDAgOiBvLmJpbmQodCkpICYmIHZvaWQgMCAhPT0gYSA/IGEgOiBzKFwicXVldWVNaWNyb3Rhc2tcIik7XG4gICAgICAgIHRoaXMuc2V0SW50ZXJ2YWwgPSBcInNldEludGVydmFsXCIgaW4gaSA/IGkuc2V0SW50ZXJ2YWwgOiBudWxsICE9PSAoYyA9IG51bGwgPT09IChsID0gdC5zZXRJbnRlcnZhbCkgfHwgdm9pZCAwID09PSBsID8gdm9pZCAwIDogbC5iaW5kKHQpKSAmJiB2b2lkIDAgIT09IGMgPyBjIDogcyhcInNldEludGVydmFsXCIpO1xuICAgICAgICB0aGlzLnNldFRpbWVvdXQgPSBcInNldFRpbWVvdXRcIiBpbiBpID8gaS5zZXRUaW1lb3V0IDogbnVsbCAhPT0gKGYgPSBudWxsID09PSAodSA9IHQuc2V0VGltZW91dCkgfHwgdm9pZCAwID09PSB1ID8gdm9pZCAwIDogdS5iaW5kKHQpKSAmJiB2b2lkIDAgIT09IGYgPyBmIDogcyhcInNldFRpbWVvdXRcIik7XG4gICAgICAgIHRoaXMuY29uc29sZSA9IFwiY29uc29sZVwiIGluIGkgPyBpLmNvbnNvbGUgOiB0LmNvbnNvbGU7XG4gICAgICAgIHRoaXMucGVyZm9ybWFuY2VOb3cgPSBcInBlcmZvcm1hbmNlTm93XCIgaW4gaSA/IGkucGVyZm9ybWFuY2VOb3cgOiBudWxsICE9PSAodyA9IG51bGwgPT09ICh2ID0gbnVsbCA9PT0gKGQgPSB0LnBlcmZvcm1hbmNlKSB8fCB2b2lkIDAgPT09IGQgPyB2b2lkIDAgOiBkLm5vdykgfHwgdm9pZCAwID09PSB2ID8gdm9pZCAwIDogdi5iaW5kKHQucGVyZm9ybWFuY2UpKSAmJiB2b2lkIDAgIT09IHcgPyB3IDogcyhcInBlcmZvcm1hbmNlLm5vd1wiKTtcbiAgICAgICAgdGhpcy5mbHVzaE1hY3JvVGFzayA9IHRoaXMuZmx1c2hNYWNyb1Rhc2suYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy50YXNrUXVldWUgPSBuZXcgVGFza1F1ZXVlKHRoaXMsIHRoaXMucmVxdWVzdE1hY3JvVGFzay5iaW5kKHRoaXMpLCB0aGlzLmNhbmNlbE1hY3JvVGFzay5iaW5kKHRoaXMpKTtcbiAgICB9XG4gICAgc3RhdGljIGdldE9yQ3JlYXRlKHMsIGkgPSB7fSkge1xuICAgICAgICBsZXQgZSA9IHQuZ2V0KHMpO1xuICAgICAgICBpZiAodm9pZCAwID09PSBlKSB0LnNldChzLCBlID0gbmV3IFBsYXRmb3JtKHMsIGkpKTtcbiAgICAgICAgcmV0dXJuIGU7XG4gICAgfVxuICAgIHN0YXRpYyBzZXQocywgaSkge1xuICAgICAgICB0LnNldChzLCBpKTtcbiAgICB9XG4gICAgcmVxdWVzdE1hY3JvVGFzaygpIHtcbiAgICAgICAgdGhpcy5tYWNyb1Rhc2tSZXF1ZXN0ZWQgPSB0cnVlO1xuICAgICAgICBpZiAoLTEgPT09IHRoaXMubWFjcm9UYXNrSGFuZGxlKSB0aGlzLm1hY3JvVGFza0hhbmRsZSA9IHRoaXMuc2V0VGltZW91dCh0aGlzLmZsdXNoTWFjcm9UYXNrLCAwKTtcbiAgICB9XG4gICAgY2FuY2VsTWFjcm9UYXNrKCkge1xuICAgICAgICB0aGlzLm1hY3JvVGFza1JlcXVlc3RlZCA9IGZhbHNlO1xuICAgICAgICBpZiAodGhpcy5tYWNyb1Rhc2tIYW5kbGUgPiAtMSkge1xuICAgICAgICAgICAgdGhpcy5jbGVhclRpbWVvdXQodGhpcy5tYWNyb1Rhc2tIYW5kbGUpO1xuICAgICAgICAgICAgdGhpcy5tYWNyb1Rhc2tIYW5kbGUgPSAtMTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBmbHVzaE1hY3JvVGFzaygpIHtcbiAgICAgICAgdGhpcy5tYWNyb1Rhc2tIYW5kbGUgPSAtMTtcbiAgICAgICAgaWYgKHRydWUgPT09IHRoaXMubWFjcm9UYXNrUmVxdWVzdGVkKSB7XG4gICAgICAgICAgICB0aGlzLm1hY3JvVGFza1JlcXVlc3RlZCA9IGZhbHNlO1xuICAgICAgICAgICAgdGhpcy50YXNrUXVldWUuZmx1c2goKTtcbiAgICAgICAgfVxuICAgIH1cbn1cblxuZnVuY3Rpb24gaSh0KSB7XG4gICAgcmV0dXJuIHQucGVyc2lzdGVudDtcbn1cblxuY2xhc3MgVGFza1F1ZXVlIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBzLCBpKSB7XG4gICAgICAgIHRoaXMucGxhdGZvcm0gPSB0O1xuICAgICAgICB0aGlzLiRyZXF1ZXN0ID0gcztcbiAgICAgICAgdGhpcy4kY2FuY2VsID0gaTtcbiAgICAgICAgdGhpcy50ID0gdm9pZCAwO1xuICAgICAgICB0aGlzLmkgPSAwO1xuICAgICAgICB0aGlzLnByb2Nlc3NpbmcgPSBbXTtcbiAgICAgICAgdGhpcy5wZW5kaW5nID0gW107XG4gICAgICAgIHRoaXMuZGVsYXllZCA9IFtdO1xuICAgICAgICB0aGlzLmZsdXNoUmVxdWVzdGVkID0gZmFsc2U7XG4gICAgICAgIHRoaXMuaCA9IHZvaWQgMDtcbiAgICAgICAgdGhpcy50YXNrUG9vbCA9IFtdO1xuICAgICAgICB0aGlzLnUgPSAwO1xuICAgICAgICB0aGlzLlQgPSAwO1xuICAgICAgICB0aGlzLiQgPSAwO1xuICAgICAgICB0aGlzLkkgPSAoKSA9PiB7XG4gICAgICAgICAgICBpZiAoIXRoaXMuZmx1c2hSZXF1ZXN0ZWQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmZsdXNoUmVxdWVzdGVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB0aGlzLlQgPSB0aGlzLnBsYXRmb3JtLnBlcmZvcm1hbmNlTm93KCk7XG4gICAgICAgICAgICAgICAgdGhpcy4kcmVxdWVzdCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICB0aGlzLk0gPSBuZXcgVHJhY2VyKHQuY29uc29sZSk7XG4gICAgfVxuICAgIGdldCBpc0VtcHR5KCkge1xuICAgICAgICByZXR1cm4gMCA9PT0gdGhpcy5pICYmIDAgPT09IHRoaXMucHJvY2Vzc2luZy5sZW5ndGggJiYgMCA9PT0gdGhpcy5wZW5kaW5nLmxlbmd0aCAmJiAwID09PSB0aGlzLmRlbGF5ZWQubGVuZ3RoO1xuICAgIH1cbiAgICBnZXQgUCgpIHtcbiAgICAgICAgcmV0dXJuIDAgPT09IHRoaXMuaSAmJiB0aGlzLnByb2Nlc3NpbmcuZXZlcnkoaSkgJiYgdGhpcy5wZW5kaW5nLmV2ZXJ5KGkpICYmIHRoaXMuZGVsYXllZC5ldmVyeShpKTtcbiAgICB9XG4gICAgZmx1c2godCA9IHRoaXMucGxhdGZvcm0ucGVyZm9ybWFuY2VOb3coKSkge1xuICAgICAgICB0aGlzLmZsdXNoUmVxdWVzdGVkID0gZmFsc2U7XG4gICAgICAgIHRoaXMuJCA9IHQ7XG4gICAgICAgIGlmICh2b2lkIDAgPT09IHRoaXMudCkge1xuICAgICAgICAgICAgaWYgKHRoaXMucGVuZGluZy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wcm9jZXNzaW5nLnB1c2goLi4udGhpcy5wZW5kaW5nKTtcbiAgICAgICAgICAgICAgICB0aGlzLnBlbmRpbmcubGVuZ3RoID0gMDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLmRlbGF5ZWQubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgIGxldCBzID0gLTE7XG4gICAgICAgICAgICAgICAgd2hpbGUgKCsrcyA8IHRoaXMuZGVsYXllZC5sZW5ndGggJiYgdGhpcy5kZWxheWVkW3NdLnF1ZXVlVGltZSA8PSB0KSA7XG4gICAgICAgICAgICAgICAgdGhpcy5wcm9jZXNzaW5nLnB1c2goLi4udGhpcy5kZWxheWVkLnNwbGljZSgwLCBzKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBsZXQgcztcbiAgICAgICAgICAgIHdoaWxlICh0aGlzLnByb2Nlc3NpbmcubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgIChzID0gdGhpcy5wcm9jZXNzaW5nLnNoaWZ0KCkpLnJ1bigpO1xuICAgICAgICAgICAgICAgIGlmICgxID09PSBzLnN0YXR1cykgaWYgKHRydWUgPT09IHMuc3VzcGVuZCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnQgPSBzO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLkkoKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH0gZWxzZSArK3RoaXMuaTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLnBlbmRpbmcubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgIHRoaXMucHJvY2Vzc2luZy5wdXNoKC4uLnRoaXMucGVuZGluZyk7XG4gICAgICAgICAgICAgICAgdGhpcy5wZW5kaW5nLmxlbmd0aCA9IDA7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5kZWxheWVkLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICBsZXQgcyA9IC0xO1xuICAgICAgICAgICAgICAgIHdoaWxlICgrK3MgPCB0aGlzLmRlbGF5ZWQubGVuZ3RoICYmIHRoaXMuZGVsYXllZFtzXS5xdWV1ZVRpbWUgPD0gdCkgO1xuICAgICAgICAgICAgICAgIHRoaXMucHJvY2Vzc2luZy5wdXNoKC4uLnRoaXMuZGVsYXllZC5zcGxpY2UoMCwgcykpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMucHJvY2Vzc2luZy5sZW5ndGggPiAwIHx8IHRoaXMuZGVsYXllZC5sZW5ndGggPiAwIHx8IHRoaXMuaSA+IDApIHRoaXMuSSgpO1xuICAgICAgICAgICAgaWYgKHZvaWQgMCAhPT0gdGhpcy5oICYmIHRoaXMuUCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHQgPSB0aGlzLmg7XG4gICAgICAgICAgICAgICAgdGhpcy5oID0gdm9pZCAwO1xuICAgICAgICAgICAgICAgIHQucmVzb2x2ZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2UgdGhpcy5JKCk7XG4gICAgfVxuICAgIGNhbmNlbCgpIHtcbiAgICAgICAgaWYgKHRoaXMuZmx1c2hSZXF1ZXN0ZWQpIHtcbiAgICAgICAgICAgIHRoaXMuJGNhbmNlbCgpO1xuICAgICAgICAgICAgdGhpcy5mbHVzaFJlcXVlc3RlZCA9IGZhbHNlO1xuICAgICAgICB9XG4gICAgfVxuICAgIGFzeW5jIHlpZWxkKCkge1xuICAgICAgICBpZiAodGhpcy5pc0VtcHR5KSA7IGVsc2Uge1xuICAgICAgICAgICAgaWYgKHZvaWQgMCA9PT0gdGhpcy5oKSB0aGlzLmggPSB1KCk7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLmg7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcXVldWVUYXNrKHQsIHMpIHtcbiAgICAgICAgY29uc3Qge2RlbGF5OiBpLCBwcmVlbXB0OiBlLCBwZXJzaXN0ZW50OiBoLCByZXVzYWJsZTogciwgc3VzcGVuZDogbn0gPSB7XG4gICAgICAgICAgICAuLi5vLFxuICAgICAgICAgICAgLi4uc1xuICAgICAgICB9O1xuICAgICAgICBpZiAoZSkge1xuICAgICAgICAgICAgaWYgKGkgPiAwKSB0aHJvdyBuZXcgRXJyb3IoYEludmFsaWQgYXJndW1lbnRzOiBwcmVlbXB0IGNhbm5vdCBiZSBjb21iaW5lZCB3aXRoIGEgZ3JlYXRlci10aGFuLXplcm8gZGVsYXlgKTtcbiAgICAgICAgICAgIGlmIChoKSB0aHJvdyBuZXcgRXJyb3IoYEludmFsaWQgYXJndW1lbnRzOiBwcmVlbXB0IGNhbm5vdCBiZSBjb21iaW5lZCB3aXRoIHBlcnNpc3RlbnRgKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoMCA9PT0gdGhpcy5wcm9jZXNzaW5nLmxlbmd0aCkgdGhpcy5JKCk7XG4gICAgICAgIGNvbnN0IGEgPSB0aGlzLnBsYXRmb3JtLnBlcmZvcm1hbmNlTm93KCk7XG4gICAgICAgIGxldCBsO1xuICAgICAgICBpZiAocikge1xuICAgICAgICAgICAgY29uc3QgcyA9IHRoaXMudGFza1Bvb2w7XG4gICAgICAgICAgICBjb25zdCBvID0gdGhpcy51IC0gMTtcbiAgICAgICAgICAgIGlmIChvID49IDApIHtcbiAgICAgICAgICAgICAgICBsID0gc1tvXTtcbiAgICAgICAgICAgICAgICBzW29dID0gdm9pZCAwO1xuICAgICAgICAgICAgICAgIHRoaXMudSA9IG87XG4gICAgICAgICAgICAgICAgbC5yZXVzZShhLCBpLCBlLCBoLCBuLCB0KTtcbiAgICAgICAgICAgIH0gZWxzZSBsID0gbmV3IFRhc2sodGhpcy5NLCB0aGlzLCBhLCBhICsgaSwgZSwgaCwgbiwgciwgdCk7XG4gICAgICAgIH0gZWxzZSBsID0gbmV3IFRhc2sodGhpcy5NLCB0aGlzLCBhLCBhICsgaSwgZSwgaCwgbiwgciwgdCk7XG4gICAgICAgIGlmIChlKSB0aGlzLnByb2Nlc3NpbmdbdGhpcy5wcm9jZXNzaW5nLmxlbmd0aF0gPSBsOyBlbHNlIGlmICgwID09PSBpKSB0aGlzLnBlbmRpbmdbdGhpcy5wZW5kaW5nLmxlbmd0aF0gPSBsOyBlbHNlIHRoaXMuZGVsYXllZFt0aGlzLmRlbGF5ZWQubGVuZ3RoXSA9IGw7XG4gICAgICAgIHJldHVybiBsO1xuICAgIH1cbiAgICByZW1vdmUodCkge1xuICAgICAgICBsZXQgcyA9IHRoaXMucHJvY2Vzc2luZy5pbmRleE9mKHQpO1xuICAgICAgICBpZiAocyA+IC0xKSB7XG4gICAgICAgICAgICB0aGlzLnByb2Nlc3Npbmcuc3BsaWNlKHMsIDEpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHMgPSB0aGlzLnBlbmRpbmcuaW5kZXhPZih0KTtcbiAgICAgICAgaWYgKHMgPiAtMSkge1xuICAgICAgICAgICAgdGhpcy5wZW5kaW5nLnNwbGljZShzLCAxKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBzID0gdGhpcy5kZWxheWVkLmluZGV4T2YodCk7XG4gICAgICAgIGlmIChzID4gLTEpIHtcbiAgICAgICAgICAgIHRoaXMuZGVsYXllZC5zcGxpY2UocywgMSk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBUYXNrICMke3QuaWR9IGNvdWxkIG5vdCBiZSBmb3VuZGApO1xuICAgIH1cbiAgICByZXR1cm5Ub1Bvb2wodCkge1xuICAgICAgICB0aGlzLnRhc2tQb29sW3RoaXMudSsrXSA9IHQ7XG4gICAgfVxuICAgIHJlc2V0UGVyc2lzdGVudFRhc2sodCkge1xuICAgICAgICB0LnJlc2V0KHRoaXMucGxhdGZvcm0ucGVyZm9ybWFuY2VOb3coKSk7XG4gICAgICAgIGlmICh0LmNyZWF0ZWRUaW1lID09PSB0LnF1ZXVlVGltZSkgdGhpcy5wZW5kaW5nW3RoaXMucGVuZGluZy5sZW5ndGhdID0gdDsgZWxzZSB0aGlzLmRlbGF5ZWRbdGhpcy5kZWxheWVkLmxlbmd0aF0gPSB0O1xuICAgIH1cbiAgICBjb21wbGV0ZUFzeW5jVGFzayh0KSB7XG4gICAgICAgIHZhciBzO1xuICAgICAgICBpZiAodHJ1ZSA9PT0gdC5zdXNwZW5kKSB7XG4gICAgICAgICAgICBpZiAodGhpcy50ICE9PSB0KSB0aHJvdyBuZXcgRXJyb3IoYEFzeW5jIHRhc2sgY29tcGxldGlvbiBtaXNtYXRjaDogc3VzcGVuZGVyVGFzaz0ke251bGwgPT09IChzID0gdGhpcy50KSB8fCB2b2lkIDAgPT09IHMgPyB2b2lkIDAgOiBzLmlkfSwgdGFzaz0ke3QuaWR9YCk7XG4gICAgICAgICAgICB0aGlzLnQgPSB2b2lkIDA7XG4gICAgICAgIH0gZWxzZSAtLXRoaXMuaTtcbiAgICAgICAgaWYgKHZvaWQgMCAhPT0gdGhpcy5oICYmIHRoaXMuUCkge1xuICAgICAgICAgICAgY29uc3QgdCA9IHRoaXMuaDtcbiAgICAgICAgICAgIHRoaXMuaCA9IHZvaWQgMDtcbiAgICAgICAgICAgIHQucmVzb2x2ZSgpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLmlzRW1wdHkpIHRoaXMuY2FuY2VsKCk7XG4gICAgfVxufVxuXG5jbGFzcyBUYXNrQWJvcnRFcnJvciBleHRlbmRzIEVycm9yIHtcbiAgICBjb25zdHJ1Y3Rvcih0KSB7XG4gICAgICAgIHN1cGVyKFwiVGFzayB3YXMgY2FuY2VsZWQuXCIpO1xuICAgICAgICB0aGlzLnRhc2sgPSB0O1xuICAgIH1cbn1cblxubGV0IGUgPSAwO1xuXG52YXIgaDtcblxuKGZ1bmN0aW9uKHQpIHtcbiAgICB0W3RbXCJwZW5kaW5nXCJdID0gMF0gPSBcInBlbmRpbmdcIjtcbiAgICB0W3RbXCJydW5uaW5nXCJdID0gMV0gPSBcInJ1bm5pbmdcIjtcbiAgICB0W3RbXCJjb21wbGV0ZWRcIl0gPSAyXSA9IFwiY29tcGxldGVkXCI7XG4gICAgdFt0W1wiY2FuY2VsZWRcIl0gPSAzXSA9IFwiY2FuY2VsZWRcIjtcbn0pKGggfHwgKGggPSB7fSkpO1xuXG5jbGFzcyBUYXNrIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBzLCBpLCBoLCByLCBuLCBvLCBhLCBsKSB7XG4gICAgICAgIHRoaXMudGFza1F1ZXVlID0gcztcbiAgICAgICAgdGhpcy5jcmVhdGVkVGltZSA9IGk7XG4gICAgICAgIHRoaXMucXVldWVUaW1lID0gaDtcbiAgICAgICAgdGhpcy5wcmVlbXB0ID0gcjtcbiAgICAgICAgdGhpcy5wZXJzaXN0ZW50ID0gbjtcbiAgICAgICAgdGhpcy5zdXNwZW5kID0gbztcbiAgICAgICAgdGhpcy5yZXVzYWJsZSA9IGE7XG4gICAgICAgIHRoaXMuY2FsbGJhY2sgPSBsO1xuICAgICAgICB0aGlzLmlkID0gKytlO1xuICAgICAgICB0aGlzLlIgPSB2b2lkIDA7XG4gICAgICAgIHRoaXMuQSA9IHZvaWQgMDtcbiAgICAgICAgdGhpcy5xID0gdm9pZCAwO1xuICAgICAgICB0aGlzLkMgPSAwO1xuICAgICAgICB0aGlzLk0gPSB0O1xuICAgIH1cbiAgICBnZXQgcmVzdWx0KCkge1xuICAgICAgICBjb25zdCB0ID0gdGhpcy5xO1xuICAgICAgICBpZiAodm9pZCAwID09PSB0KSBzd2l0Y2ggKHRoaXMuQykge1xuICAgICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBjb25zdCB0ID0gdGhpcy5xID0gdSgpO1xuICAgICAgICAgICAgICAgIHRoaXMuUiA9IHQucmVzb2x2ZTtcbiAgICAgICAgICAgICAgICB0aGlzLkEgPSB0LnJlamVjdDtcbiAgICAgICAgICAgICAgICByZXR1cm4gdDtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIlRyeWluZyB0byBhd2FpdCB0YXNrIGZyb20gd2l0aGluIHRhc2sgd2lsbCBjYXVzZSBhIGRlYWRsb2NrLlwiKTtcblxuICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnEgPSBQcm9taXNlLnJlc29sdmUoKTtcblxuICAgICAgICAgIGNhc2UgMzpcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnEgPSBQcm9taXNlLnJlamVjdChuZXcgVGFza0Fib3J0RXJyb3IodGhpcykpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0O1xuICAgIH1cbiAgICBnZXQgc3RhdHVzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5DO1xuICAgIH1cbiAgICBydW4odCA9IHRoaXMudGFza1F1ZXVlLnBsYXRmb3JtLnBlcmZvcm1hbmNlTm93KCkpIHtcbiAgICAgICAgaWYgKDAgIT09IHRoaXMuQykgdGhyb3cgbmV3IEVycm9yKGBDYW5ub3QgcnVuIHRhc2sgaW4gJHt0aGlzLkN9IHN0YXRlYCk7XG4gICAgICAgIGNvbnN0IHtwZXJzaXN0ZW50OiBzLCByZXVzYWJsZTogaSwgdGFza1F1ZXVlOiBlLCBjYWxsYmFjazogaCwgUjogciwgQTogbiwgY3JlYXRlZFRpbWU6IG99ID0gdGhpcztcbiAgICAgICAgbGV0IGE7XG4gICAgICAgIHRoaXMuQyA9IDE7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBhID0gaCh0IC0gbyk7XG4gICAgICAgICAgICBpZiAoYSBpbnN0YW5jZW9mIFByb21pc2UpIGEudGhlbigodCA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMucGVyc2lzdGVudCkgZVtcInJlc2V0UGVyc2lzdGVudFRhc2tcIl0odGhpcyk7IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBpZiAocykgdGhpcy5DID0gMzsgZWxzZSB0aGlzLkMgPSAyO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmRpc3Bvc2UoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZVtcImNvbXBsZXRlQXN5bmNUYXNrXCJdKHRoaXMpO1xuICAgICAgICAgICAgICAgIGlmIChmYWxzZSAmJiB0aGlzLk0uZW5hYmxlZCkgO1xuICAgICAgICAgICAgICAgIGlmICh2b2lkIDAgIT09IHIpIHIodCk7XG4gICAgICAgICAgICAgICAgaWYgKCF0aGlzLnBlcnNpc3RlbnQgJiYgaSkgZVtcInJldHVyblRvUG9vbFwiXSh0aGlzKTtcbiAgICAgICAgICAgIH0pKS5jYXRjaCgodCA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKCF0aGlzLnBlcnNpc3RlbnQpIHRoaXMuZGlzcG9zZSgpO1xuICAgICAgICAgICAgICAgIGVbXCJjb21wbGV0ZUFzeW5jVGFza1wiXSh0aGlzKTtcbiAgICAgICAgICAgICAgICBpZiAoZmFsc2UgJiYgdGhpcy5NLmVuYWJsZWQpIDtcbiAgICAgICAgICAgICAgICBpZiAodm9pZCAwICE9PSBuKSBuKHQpOyBlbHNlIHRocm93IHQ7XG4gICAgICAgICAgICB9KSk7IGVsc2Uge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLnBlcnNpc3RlbnQpIGVbXCJyZXNldFBlcnNpc3RlbnRUYXNrXCJdKHRoaXMpOyBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHMpIHRoaXMuQyA9IDM7IGVsc2UgdGhpcy5DID0gMjtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5kaXNwb3NlKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChmYWxzZSAmJiB0aGlzLk0uZW5hYmxlZCkgO1xuICAgICAgICAgICAgICAgIGlmICh2b2lkIDAgIT09IHIpIHIoYSk7XG4gICAgICAgICAgICAgICAgaWYgKCF0aGlzLnBlcnNpc3RlbnQgJiYgaSkgZVtcInJldHVyblRvUG9vbFwiXSh0aGlzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBjYXRjaCAodCkge1xuICAgICAgICAgICAgaWYgKCF0aGlzLnBlcnNpc3RlbnQpIHRoaXMuZGlzcG9zZSgpO1xuICAgICAgICAgICAgaWYgKHZvaWQgMCAhPT0gbikgbih0KTsgZWxzZSB0aHJvdyB0O1xuICAgICAgICB9XG4gICAgfVxuICAgIGNhbmNlbCgpIHtcbiAgICAgICAgaWYgKDAgPT09IHRoaXMuQykge1xuICAgICAgICAgICAgY29uc3QgdCA9IHRoaXMudGFza1F1ZXVlO1xuICAgICAgICAgICAgY29uc3QgcyA9IHRoaXMucmV1c2FibGU7XG4gICAgICAgICAgICBjb25zdCBpID0gdGhpcy5BO1xuICAgICAgICAgICAgdC5yZW1vdmUodGhpcyk7XG4gICAgICAgICAgICBpZiAodC5pc0VtcHR5KSB0LmNhbmNlbCgpO1xuICAgICAgICAgICAgdGhpcy5DID0gMztcbiAgICAgICAgICAgIHRoaXMuZGlzcG9zZSgpO1xuICAgICAgICAgICAgaWYgKHMpIHRbXCJyZXR1cm5Ub1Bvb2xcIl0odGhpcyk7XG4gICAgICAgICAgICBpZiAodm9pZCAwICE9PSBpKSBpKG5ldyBUYXNrQWJvcnRFcnJvcih0aGlzKSk7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfSBlbHNlIGlmICgxID09PSB0aGlzLkMgJiYgdGhpcy5wZXJzaXN0ZW50KSB7XG4gICAgICAgICAgICB0aGlzLnBlcnNpc3RlbnQgPSBmYWxzZTtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgcmVzZXQodCkge1xuICAgICAgICBjb25zdCBzID0gdGhpcy5xdWV1ZVRpbWUgLSB0aGlzLmNyZWF0ZWRUaW1lO1xuICAgICAgICB0aGlzLmNyZWF0ZWRUaW1lID0gdDtcbiAgICAgICAgdGhpcy5xdWV1ZVRpbWUgPSB0ICsgcztcbiAgICAgICAgdGhpcy5DID0gMDtcbiAgICAgICAgdGhpcy5SID0gdm9pZCAwO1xuICAgICAgICB0aGlzLkEgPSB2b2lkIDA7XG4gICAgICAgIHRoaXMucSA9IHZvaWQgMDtcbiAgICB9XG4gICAgcmV1c2UodCwgcywgaSwgZSwgaCwgcikge1xuICAgICAgICB0aGlzLmNyZWF0ZWRUaW1lID0gdDtcbiAgICAgICAgdGhpcy5xdWV1ZVRpbWUgPSB0ICsgcztcbiAgICAgICAgdGhpcy5wcmVlbXB0ID0gaTtcbiAgICAgICAgdGhpcy5wZXJzaXN0ZW50ID0gZTtcbiAgICAgICAgdGhpcy5zdXNwZW5kID0gaDtcbiAgICAgICAgdGhpcy5jYWxsYmFjayA9IHI7XG4gICAgICAgIHRoaXMuQyA9IDA7XG4gICAgfVxuICAgIGRpc3Bvc2UoKSB7XG4gICAgICAgIHRoaXMuY2FsbGJhY2sgPSB2b2lkIDA7XG4gICAgICAgIHRoaXMuUiA9IHZvaWQgMDtcbiAgICAgICAgdGhpcy5BID0gdm9pZCAwO1xuICAgICAgICB0aGlzLnEgPSB2b2lkIDA7XG4gICAgfVxufVxuXG5mdW5jdGlvbiByKHQpIHtcbiAgICBzd2l0Y2ggKHQpIHtcbiAgICAgIGNhc2UgMDpcbiAgICAgICAgcmV0dXJuIFwicGVuZGluZ1wiO1xuXG4gICAgICBjYXNlIDE6XG4gICAgICAgIHJldHVybiBcInJ1bm5pbmdcIjtcblxuICAgICAgY2FzZSAzOlxuICAgICAgICByZXR1cm4gXCJjYW5jZWxlZFwiO1xuXG4gICAgICBjYXNlIDI6XG4gICAgICAgIHJldHVybiBcImNvbXBsZXRlZFwiO1xuICAgIH1cbn1cblxuY2xhc3MgVHJhY2VyIHtcbiAgICBjb25zdHJ1Y3Rvcih0KSB7XG4gICAgICAgIHRoaXMuY29uc29sZSA9IHQ7XG4gICAgICAgIHRoaXMuZW5hYmxlZCA9IGZhbHNlO1xuICAgICAgICB0aGlzLmRlcHRoID0gMDtcbiAgICB9XG4gICAgZW50ZXIodCwgcykge1xuICAgICAgICB0aGlzLmxvZyhgJHtcIiAgXCIucmVwZWF0KHRoaXMuZGVwdGgrKyl9PiBgLCB0LCBzKTtcbiAgICB9XG4gICAgbGVhdmUodCwgcykge1xuICAgICAgICB0aGlzLmxvZyhgJHtcIiAgXCIucmVwZWF0KC0tdGhpcy5kZXB0aCl9PCBgLCB0LCBzKTtcbiAgICB9XG4gICAgdHJhY2UodCwgcykge1xuICAgICAgICB0aGlzLmxvZyhgJHtcIiAgXCIucmVwZWF0KHRoaXMuZGVwdGgpfS0gYCwgdCwgcyk7XG4gICAgfVxuICAgIGxvZyh0LCBzLCBpKSB7XG4gICAgICAgIGlmIChzIGluc3RhbmNlb2YgVGFza1F1ZXVlKSB7XG4gICAgICAgICAgICBjb25zdCBlID0gc1tcInByb2Nlc3NpbmdcIl0ubGVuZ3RoO1xuICAgICAgICAgICAgY29uc3QgaCA9IHNbXCJwZW5kaW5nXCJdLmxlbmd0aDtcbiAgICAgICAgICAgIGNvbnN0IHIgPSBzW1wiZGVsYXllZFwiXS5sZW5ndGg7XG4gICAgICAgICAgICBjb25zdCBuID0gc1tcImZsdXNoUmVxdWVzdGVkXCJdO1xuICAgICAgICAgICAgY29uc3QgbyA9ICEhcy50O1xuICAgICAgICAgICAgY29uc3QgYSA9IGBwcm9jZXNzaW5nPSR7ZX0gcGVuZGluZz0ke2h9IGRlbGF5ZWQ9JHtyfSBmbHVzaFJlcT0ke259IHN1c1Rhc2s9JHtvfWA7XG4gICAgICAgICAgICB0aGlzLmNvbnNvbGUubG9nKGAke3R9W1EuJHtpfV0gJHthfWApO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY29uc3QgZSA9IHNbXCJpZFwiXTtcbiAgICAgICAgICAgIGNvbnN0IGggPSBNYXRoLnJvdW5kKDEwICogc1tcImNyZWF0ZWRUaW1lXCJdKSAvIDEwO1xuICAgICAgICAgICAgY29uc3QgbiA9IE1hdGgucm91bmQoMTAgKiBzW1wicXVldWVUaW1lXCJdKSAvIDEwO1xuICAgICAgICAgICAgY29uc3QgbyA9IHNbXCJwcmVlbXB0XCJdO1xuICAgICAgICAgICAgY29uc3QgYSA9IHNbXCJyZXVzYWJsZVwiXTtcbiAgICAgICAgICAgIGNvbnN0IGwgPSBzW1wicGVyc2lzdGVudFwiXTtcbiAgICAgICAgICAgIGNvbnN0IGMgPSBzW1wic3VzcGVuZFwiXTtcbiAgICAgICAgICAgIGNvbnN0IHUgPSByKHNbXCJDXCJdKTtcbiAgICAgICAgICAgIGNvbnN0IGYgPSBgaWQ9JHtlfSBjcmVhdGVkPSR7aH0gcXVldWU9JHtufSBwcmVlbXB0PSR7b30gcGVyc2lzdGVudD0ke2x9IHJldXNhYmxlPSR7YX0gc3RhdHVzPSR7dX0gc3VzcGVuZD0ke2N9YDtcbiAgICAgICAgICAgIHRoaXMuY29uc29sZS5sb2coYCR7dH1bVC4ke2l9XSAke2Z9YCk7XG4gICAgICAgIH1cbiAgICB9XG59XG5cbnZhciBuO1xuXG4oZnVuY3Rpb24odCkge1xuICAgIHRbdFtcInJlbmRlclwiXSA9IDBdID0gXCJyZW5kZXJcIjtcbiAgICB0W3RbXCJtYWNyb1Rhc2tcIl0gPSAxXSA9IFwibWFjcm9UYXNrXCI7XG4gICAgdFt0W1wicG9zdFJlbmRlclwiXSA9IDJdID0gXCJwb3N0UmVuZGVyXCI7XG59KShuIHx8IChuID0ge30pKTtcblxuY29uc3QgbyA9IHtcbiAgICBkZWxheTogMCxcbiAgICBwcmVlbXB0OiBmYWxzZSxcbiAgICBwZXJzaXN0ZW50OiBmYWxzZSxcbiAgICByZXVzYWJsZTogdHJ1ZSxcbiAgICBzdXNwZW5kOiBmYWxzZVxufTtcblxubGV0IGE7XG5cbmxldCBsO1xuXG5mdW5jdGlvbiBjKHQsIHMpIHtcbiAgICBhID0gdDtcbiAgICBsID0gcztcbn1cblxuZnVuY3Rpb24gdSgpIHtcbiAgICBjb25zdCB0ID0gbmV3IFByb21pc2UoYyk7XG4gICAgdC5yZXNvbHZlID0gYTtcbiAgICB0LnJlamVjdCA9IGw7XG4gICAgcmV0dXJuIHQ7XG59XG5cbmV4cG9ydCB7IFBsYXRmb3JtLCBUYXNrLCBUYXNrQWJvcnRFcnJvciwgVGFza1F1ZXVlLCBuIGFzIFRhc2tRdWV1ZVByaW9yaXR5LCBoIGFzIFRhc2tTdGF0dXMgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluZGV4LmpzLm1hcFxuIiwiY2xhc3MgQ29uZmlndXJhYmxlUm91dGUge1xuICAgIGNvbnN0cnVjdG9yKHQsIHMsIG4pIHtcbiAgICAgICAgdGhpcy5wYXRoID0gdDtcbiAgICAgICAgdGhpcy5jYXNlU2Vuc2l0aXZlID0gcztcbiAgICAgICAgdGhpcy5oYW5kbGVyID0gbjtcbiAgICB9XG59XG5cbmNsYXNzIEVuZHBvaW50IHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBzKSB7XG4gICAgICAgIHRoaXMucm91dGUgPSB0O1xuICAgICAgICB0aGlzLnBhcmFtTmFtZXMgPSBzO1xuICAgIH1cbn1cblxuY2xhc3MgUmVjb2duaXplZFJvdXRlIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBzKSB7XG4gICAgICAgIHRoaXMuZW5kcG9pbnQgPSB0O1xuICAgICAgICB0aGlzLnBhcmFtcyA9IHM7XG4gICAgfVxufVxuXG5jbGFzcyBDYW5kaWRhdGUge1xuICAgIGNvbnN0cnVjdG9yKHQsIHMsIG4sIGUpIHtcbiAgICAgICAgdmFyIGk7XG4gICAgICAgIHRoaXMuY2hhcnMgPSB0O1xuICAgICAgICB0aGlzLnN0YXRlcyA9IHM7XG4gICAgICAgIHRoaXMuc2tpcHBlZFN0YXRlcyA9IG47XG4gICAgICAgIHRoaXMucmVzdWx0ID0gZTtcbiAgICAgICAgdGhpcy5oZWFkID0gc1tzLmxlbmd0aCAtIDFdO1xuICAgICAgICB0aGlzLmVuZHBvaW50ID0gbnVsbCA9PT0gKGkgPSB0aGlzLmhlYWQpIHx8IHZvaWQgMCA9PT0gaSA/IHZvaWQgMCA6IGkuZW5kcG9pbnQ7XG4gICAgfVxuICAgIGFkdmFuY2UodCkge1xuICAgICAgICBjb25zdCB7Y2hhcnM6IHMsIHN0YXRlczogbiwgc2tpcHBlZFN0YXRlczogZSwgcmVzdWx0OiBpfSA9IHRoaXM7XG4gICAgICAgIGxldCBvID0gbnVsbDtcbiAgICAgICAgbGV0IHIgPSAwO1xuICAgICAgICBjb25zdCBsID0gbltuLmxlbmd0aCAtIDFdO1xuICAgICAgICBmdW5jdGlvbiB1KGMsIGgpIHtcbiAgICAgICAgICAgIGlmIChjLmlzTWF0Y2godCkpIGlmICgxID09PSArK3IpIG8gPSBjOyBlbHNlIGkuYWRkKG5ldyBDYW5kaWRhdGUocy5jb25jYXQodCksIG4uY29uY2F0KGMpLCBudWxsID09PSBoID8gZSA6IGUuY29uY2F0KGgpLCBpKSk7XG4gICAgICAgICAgICBpZiAobnVsbCA9PT0gbC5zZWdtZW50ICYmIGMuaXNPcHRpb25hbCAmJiBudWxsICE9PSBjLm5leHRTdGF0ZXMpIHtcbiAgICAgICAgICAgICAgICBpZiAoYy5uZXh0U3RhdGVzLmxlbmd0aCA+IDEpIHRocm93IG5ldyBFcnJvcihgJHtjLm5leHRTdGF0ZXMubGVuZ3RofSBuZXh0U3RhdGVzYCk7XG4gICAgICAgICAgICAgICAgY29uc3QgdCA9IGMubmV4dFN0YXRlc1swXTtcbiAgICAgICAgICAgICAgICBpZiAoIXQuaXNTZXBhcmF0b3IpIHRocm93IG5ldyBFcnJvcihgTm90IGEgc2VwYXJhdG9yYCk7XG4gICAgICAgICAgICAgICAgaWYgKG51bGwgIT09IHQubmV4dFN0YXRlcykgZm9yIChjb25zdCBzIG9mIHQubmV4dFN0YXRlcykgdShzLCBjKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAobC5pc0R5bmFtaWMpIHUobCwgbnVsbCk7XG4gICAgICAgIGlmIChudWxsICE9PSBsLm5leHRTdGF0ZXMpIGZvciAoY29uc3QgdCBvZiBsLm5leHRTdGF0ZXMpIHUodCwgbnVsbCk7XG4gICAgICAgIGlmIChudWxsICE9PSBvKSB7XG4gICAgICAgICAgICBuLnB1c2godGhpcy5oZWFkID0gbyk7XG4gICAgICAgICAgICBzLnB1c2godCk7XG4gICAgICAgICAgICBpZiAobnVsbCAhPT0gby5lbmRwb2ludCkgdGhpcy5lbmRwb2ludCA9IG8uZW5kcG9pbnQ7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKDAgPT09IHIpIGkucmVtb3ZlKHRoaXMpO1xuICAgIH1cbiAgICBmaW5hbGl6ZSgpIHtcbiAgICAgICAgZnVuY3Rpb24gdChzLCBuKSB7XG4gICAgICAgICAgICBjb25zdCBlID0gbi5uZXh0U3RhdGVzO1xuICAgICAgICAgICAgaWYgKG51bGwgIT09IGUpIGlmICgxID09PSBlLmxlbmd0aCAmJiBudWxsID09PSBlWzBdLnNlZ21lbnQpIHQocywgZVswXSk7IGVsc2UgZm9yIChjb25zdCBuIG9mIGUpIGlmIChuLmlzT3B0aW9uYWwgJiYgbnVsbCAhPT0gbi5lbmRwb2ludCkge1xuICAgICAgICAgICAgICAgIHMucHVzaChuKTtcbiAgICAgICAgICAgICAgICBpZiAobnVsbCAhPT0gbi5uZXh0U3RhdGVzKSBmb3IgKGNvbnN0IGUgb2Ygbi5uZXh0U3RhdGVzKSB0KHMsIGUpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHQodGhpcy5za2lwcGVkU3RhdGVzLCB0aGlzLmhlYWQpO1xuICAgIH1cbiAgICBnZXRQYXJhbXMoKSB7XG4gICAgICAgIGNvbnN0IHtzdGF0ZXM6IHQsIGNoYXJzOiBzLCBlbmRwb2ludDogbn0gPSB0aGlzO1xuICAgICAgICBjb25zdCBlID0ge307XG4gICAgICAgIGZvciAoY29uc3QgdCBvZiBuLnBhcmFtTmFtZXMpIGVbdF0gPSB2b2lkIDA7XG4gICAgICAgIGZvciAobGV0IG4gPSAwLCBpID0gdC5sZW5ndGg7IG4gPCBpOyArK24pIHtcbiAgICAgICAgICAgIGNvbnN0IGkgPSB0W25dO1xuICAgICAgICAgICAgaWYgKGkuaXNEeW5hbWljKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgdCA9IGkuc2VnbWVudC5uYW1lO1xuICAgICAgICAgICAgICAgIGlmICh2b2lkIDAgPT09IGVbdF0pIGVbdF0gPSBzW25dOyBlbHNlIGVbdF0gKz0gc1tuXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZTtcbiAgICB9XG4gICAgY29tcGFyZVRvKHQpIHtcbiAgICAgICAgY29uc3QgcyA9IHRoaXMuc3RhdGVzO1xuICAgICAgICBjb25zdCBuID0gdC5zdGF0ZXM7XG4gICAgICAgIGZvciAobGV0IHQgPSAwLCBlID0gMCwgaSA9IE1hdGgubWF4KHMubGVuZ3RoLCBuLmxlbmd0aCk7IHQgPCBpOyArK3QpIHtcbiAgICAgICAgICAgIGxldCBpID0gc1t0XTtcbiAgICAgICAgICAgIGlmICh2b2lkIDAgPT09IGkpIHJldHVybiAxO1xuICAgICAgICAgICAgbGV0IG8gPSBuW2VdO1xuICAgICAgICAgICAgaWYgKHZvaWQgMCA9PT0gbykgcmV0dXJuIC0xO1xuICAgICAgICAgICAgbGV0IHIgPSBpLnNlZ21lbnQ7XG4gICAgICAgICAgICBsZXQgbCA9IG8uc2VnbWVudDtcbiAgICAgICAgICAgIGlmIChudWxsID09PSByKSB7XG4gICAgICAgICAgICAgICAgaWYgKG51bGwgPT09IGwpIHtcbiAgICAgICAgICAgICAgICAgICAgKytlO1xuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHZvaWQgMCA9PT0gKGkgPSBzWysrdF0pKSByZXR1cm4gMTtcbiAgICAgICAgICAgICAgICByID0gaS5zZWdtZW50O1xuICAgICAgICAgICAgfSBlbHNlIGlmIChudWxsID09PSBsKSB7XG4gICAgICAgICAgICAgICAgaWYgKHZvaWQgMCA9PT0gKG8gPSBuWysrZV0pKSByZXR1cm4gLTE7XG4gICAgICAgICAgICAgICAgbCA9IG8uc2VnbWVudDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChyLmtpbmQgPCBsLmtpbmQpIHJldHVybiAxO1xuICAgICAgICAgICAgaWYgKHIua2luZCA+IGwua2luZCkgcmV0dXJuIC0xO1xuICAgICAgICAgICAgKytlO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGUgPSB0aGlzLnNraXBwZWRTdGF0ZXM7XG4gICAgICAgIGNvbnN0IGkgPSB0LnNraXBwZWRTdGF0ZXM7XG4gICAgICAgIGNvbnN0IG8gPSBlLmxlbmd0aDtcbiAgICAgICAgY29uc3QgciA9IGkubGVuZ3RoO1xuICAgICAgICBpZiAobyA8IHIpIHJldHVybiAxO1xuICAgICAgICBpZiAobyA+IHIpIHJldHVybiAtMTtcbiAgICAgICAgZm9yIChsZXQgdCA9IDA7IHQgPCBvOyArK3QpIHtcbiAgICAgICAgICAgIGNvbnN0IHMgPSBlW3RdO1xuICAgICAgICAgICAgY29uc3QgbiA9IGlbdF07XG4gICAgICAgICAgICBpZiAocy5sZW5ndGggPCBuLmxlbmd0aCkgcmV0dXJuIDE7XG4gICAgICAgICAgICBpZiAocy5sZW5ndGggPiBuLmxlbmd0aCkgcmV0dXJuIC0xO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiAwO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gdCh0KSB7XG4gICAgcmV0dXJuIG51bGwgIT09IHQuaGVhZC5lbmRwb2ludDtcbn1cblxuZnVuY3Rpb24gcyh0LCBzKSB7XG4gICAgcmV0dXJuIHQuY29tcGFyZVRvKHMpO1xufVxuXG5jbGFzcyBSZWNvZ25pemVSZXN1bHQge1xuICAgIGNvbnN0cnVjdG9yKHQpIHtcbiAgICAgICAgdGhpcy5jYW5kaWRhdGVzID0gW107XG4gICAgICAgIHRoaXMuY2FuZGlkYXRlcyA9IFsgbmV3IENhbmRpZGF0ZShbIFwiXCIgXSwgWyB0IF0sIFtdLCB0aGlzKSBdO1xuICAgIH1cbiAgICBnZXQgaXNFbXB0eSgpIHtcbiAgICAgICAgcmV0dXJuIDAgPT09IHRoaXMuY2FuZGlkYXRlcy5sZW5ndGg7XG4gICAgfVxuICAgIGdldFNvbHV0aW9uKCkge1xuICAgICAgICBjb25zdCBuID0gdGhpcy5jYW5kaWRhdGVzLmZpbHRlcih0KTtcbiAgICAgICAgaWYgKDAgPT09IG4ubGVuZ3RoKSByZXR1cm4gbnVsbDtcbiAgICAgICAgZm9yIChjb25zdCB0IG9mIG4pIHQuZmluYWxpemUoKTtcbiAgICAgICAgbi5zb3J0KHMpO1xuICAgICAgICByZXR1cm4gblswXTtcbiAgICB9XG4gICAgYWRkKHQpIHtcbiAgICAgICAgdGhpcy5jYW5kaWRhdGVzLnB1c2godCk7XG4gICAgfVxuICAgIHJlbW92ZSh0KSB7XG4gICAgICAgIHRoaXMuY2FuZGlkYXRlcy5zcGxpY2UodGhpcy5jYW5kaWRhdGVzLmluZGV4T2YodCksIDEpO1xuICAgIH1cbiAgICBhZHZhbmNlKHQpIHtcbiAgICAgICAgY29uc3QgcyA9IHRoaXMuY2FuZGlkYXRlcy5zbGljZSgpO1xuICAgICAgICBmb3IgKGNvbnN0IG4gb2Ygcykgbi5hZHZhbmNlKHQpO1xuICAgIH1cbn1cblxuY2xhc3MgUm91dGVSZWNvZ25pemVyIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgdGhpcy5yb290U3RhdGUgPSBuZXcgU3RhdGUobnVsbCwgbnVsbCwgXCJcIik7XG4gICAgICAgIHRoaXMuY2FjaGUgPSBuZXcgTWFwO1xuICAgIH1cbiAgICBhZGQodCkge1xuICAgICAgICBpZiAodCBpbnN0YW5jZW9mIEFycmF5KSBmb3IgKGNvbnN0IHMgb2YgdCkgdGhpcy4kYWRkKHMpOyBlbHNlIHRoaXMuJGFkZCh0KTtcbiAgICAgICAgdGhpcy5jYWNoZS5jbGVhcigpO1xuICAgIH1cbiAgICAkYWRkKHQpIHtcbiAgICAgICAgY29uc3QgcyA9IHQucGF0aDtcbiAgICAgICAgY29uc3QgZSA9IG5ldyBDb25maWd1cmFibGVSb3V0ZSh0LnBhdGgsIHRydWUgPT09IHQuY2FzZVNlbnNpdGl2ZSwgdC5oYW5kbGVyKTtcbiAgICAgICAgY29uc3QgaSA9IFwiXCIgPT09IHMgPyBbIFwiXCIgXSA6IHMuc3BsaXQoXCIvXCIpLmZpbHRlcihuKTtcbiAgICAgICAgY29uc3QgbyA9IFtdO1xuICAgICAgICBsZXQgciA9IHRoaXMucm9vdFN0YXRlO1xuICAgICAgICBmb3IgKGNvbnN0IHQgb2YgaSkge1xuICAgICAgICAgICAgciA9IHIuYXBwZW5kKG51bGwsIFwiL1wiKTtcbiAgICAgICAgICAgIHN3aXRjaCAodC5jaGFyQXQoMCkpIHtcbiAgICAgICAgICAgICAgY2FzZSBcIjpcIjpcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHMgPSB0LmVuZHNXaXRoKFwiP1wiKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbiA9IHMgPyB0LnNsaWNlKDEsIC0xKSA6IHQuc2xpY2UoMSk7XG4gICAgICAgICAgICAgICAgICAgIG8ucHVzaChuKTtcbiAgICAgICAgICAgICAgICAgICAgciA9IG5ldyBEeW5hbWljU2VnbWVudChuLCBzKS5hcHBlbmRUbyhyKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgIGNhc2UgXCIqXCI6XG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBzID0gdC5zbGljZSgxKTtcbiAgICAgICAgICAgICAgICAgICAgby5wdXNoKHMpO1xuICAgICAgICAgICAgICAgICAgICByID0gbmV3IFN0YXJTZWdtZW50KHMpLmFwcGVuZFRvKHIpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICByID0gbmV3IFN0YXRpY1NlZ21lbnQodCwgZS5jYXNlU2Vuc2l0aXZlKS5hcHBlbmRUbyhyKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBjb25zdCBsID0gbmV3IEVuZHBvaW50KGUsIG8pO1xuICAgICAgICByLnNldEVuZHBvaW50KGwpO1xuICAgIH1cbiAgICByZWNvZ25pemUodCkge1xuICAgICAgICBsZXQgcyA9IHRoaXMuY2FjaGUuZ2V0KHQpO1xuICAgICAgICBpZiAodm9pZCAwID09PSBzKSB0aGlzLmNhY2hlLnNldCh0LCBzID0gdGhpcy4kcmVjb2duaXplKHQpKTtcbiAgICAgICAgcmV0dXJuIHM7XG4gICAgfVxuICAgICRyZWNvZ25pemUodCkge1xuICAgICAgICB0ID0gZGVjb2RlVVJJKHQpO1xuICAgICAgICBpZiAoIXQuc3RhcnRzV2l0aChcIi9cIikpIHQgPSBgLyR7dH1gO1xuICAgICAgICBpZiAodC5sZW5ndGggPiAxICYmIHQuZW5kc1dpdGgoXCIvXCIpKSB0ID0gdC5zbGljZSgwLCAtMSk7XG4gICAgICAgIGNvbnN0IHMgPSBuZXcgUmVjb2duaXplUmVzdWx0KHRoaXMucm9vdFN0YXRlKTtcbiAgICAgICAgZm9yIChsZXQgbiA9IDAsIGUgPSB0Lmxlbmd0aDsgbiA8IGU7ICsrbikge1xuICAgICAgICAgICAgY29uc3QgZSA9IHQuY2hhckF0KG4pO1xuICAgICAgICAgICAgcy5hZHZhbmNlKGUpO1xuICAgICAgICAgICAgaWYgKHMuaXNFbXB0eSkgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgbiA9IHMuZ2V0U29sdXRpb24oKTtcbiAgICAgICAgaWYgKG51bGwgPT09IG4pIHJldHVybiBudWxsO1xuICAgICAgICBjb25zdCB7ZW5kcG9pbnQ6IGV9ID0gbjtcbiAgICAgICAgY29uc3QgaSA9IG4uZ2V0UGFyYW1zKCk7XG4gICAgICAgIHJldHVybiBuZXcgUmVjb2duaXplZFJvdXRlKGUsIGkpO1xuICAgIH1cbn1cblxuY2xhc3MgU3RhdGUge1xuICAgIGNvbnN0cnVjdG9yKHQsIHMsIG4pIHtcbiAgICAgICAgdGhpcy5wcmV2U3RhdGUgPSB0O1xuICAgICAgICB0aGlzLnNlZ21lbnQgPSBzO1xuICAgICAgICB0aGlzLnZhbHVlID0gbjtcbiAgICAgICAgdGhpcy5uZXh0U3RhdGVzID0gbnVsbDtcbiAgICAgICAgdGhpcy5lbmRwb2ludCA9IG51bGw7XG4gICAgICAgIHN3aXRjaCAobnVsbCA9PT0gcyB8fCB2b2lkIDAgPT09IHMgPyB2b2lkIDAgOiBzLmtpbmQpIHtcbiAgICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgICB0aGlzLmxlbmd0aCA9IHQubGVuZ3RoICsgMTtcbiAgICAgICAgICAgIHRoaXMuaXNTZXBhcmF0b3IgPSBmYWxzZTtcbiAgICAgICAgICAgIHRoaXMuaXNEeW5hbWljID0gdHJ1ZTtcbiAgICAgICAgICAgIHRoaXMuaXNPcHRpb25hbCA9IHMub3B0aW9uYWw7XG4gICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgIHRoaXMubGVuZ3RoID0gdC5sZW5ndGggKyAxO1xuICAgICAgICAgICAgdGhpcy5pc1NlcGFyYXRvciA9IGZhbHNlO1xuICAgICAgICAgICAgdGhpcy5pc0R5bmFtaWMgPSB0cnVlO1xuICAgICAgICAgICAgdGhpcy5pc09wdGlvbmFsID0gZmFsc2U7XG4gICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgIGNhc2UgMzpcbiAgICAgICAgICAgIHRoaXMubGVuZ3RoID0gdC5sZW5ndGggKyAxO1xuICAgICAgICAgICAgdGhpcy5pc1NlcGFyYXRvciA9IGZhbHNlO1xuICAgICAgICAgICAgdGhpcy5pc0R5bmFtaWMgPSBmYWxzZTtcbiAgICAgICAgICAgIHRoaXMuaXNPcHRpb25hbCA9IGZhbHNlO1xuICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICBjYXNlIHZvaWQgMDpcbiAgICAgICAgICAgIHRoaXMubGVuZ3RoID0gbnVsbCA9PT0gdCA/IDAgOiB0Lmxlbmd0aDtcbiAgICAgICAgICAgIHRoaXMuaXNTZXBhcmF0b3IgPSB0cnVlO1xuICAgICAgICAgICAgdGhpcy5pc0R5bmFtaWMgPSBmYWxzZTtcbiAgICAgICAgICAgIHRoaXMuaXNPcHRpb25hbCA9IGZhbHNlO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICB9XG4gICAgYXBwZW5kKHQsIHMpIHtcbiAgICAgICAgbGV0IG47XG4gICAgICAgIGxldCBlID0gdGhpcy5uZXh0U3RhdGVzO1xuICAgICAgICBpZiAobnVsbCA9PT0gZSkge1xuICAgICAgICAgICAgbiA9IHZvaWQgMDtcbiAgICAgICAgICAgIGUgPSB0aGlzLm5leHRTdGF0ZXMgPSBbXTtcbiAgICAgICAgfSBlbHNlIGlmIChudWxsID09PSB0KSBuID0gZS5maW5kKCh0ID0+IHQudmFsdWUgPT09IHMpKTsgZWxzZSBuID0gZS5maW5kKChzID0+IHtcbiAgICAgICAgICAgIHZhciBuO1xuICAgICAgICAgICAgcmV0dXJuIG51bGwgPT09IChuID0gcy5zZWdtZW50KSB8fCB2b2lkIDAgPT09IG4gPyB2b2lkIDAgOiBuLmVxdWFscyh0KTtcbiAgICAgICAgfSkpO1xuICAgICAgICBpZiAodm9pZCAwID09PSBuKSBlLnB1c2gobiA9IG5ldyBTdGF0ZSh0aGlzLCB0LCBzKSk7XG4gICAgICAgIHJldHVybiBuO1xuICAgIH1cbiAgICBzZXRFbmRwb2ludCh0KSB7XG4gICAgICAgIGlmIChudWxsICE9PSB0aGlzLmVuZHBvaW50KSB0aHJvdyBuZXcgRXJyb3IoYENhbm5vdCBhZGQgYW1iaWd1b3VzIHJvdXRlLiBUaGUgcGF0dGVybiAnJHt0LnJvdXRlLnBhdGh9JyBjbGFzaGVzIHdpdGggJyR7dGhpcy5lbmRwb2ludC5yb3V0ZS5wYXRofSdgKTtcbiAgICAgICAgdGhpcy5lbmRwb2ludCA9IHQ7XG4gICAgICAgIGlmICh0aGlzLmlzT3B0aW9uYWwpIHtcbiAgICAgICAgICAgIHRoaXMucHJldlN0YXRlLnNldEVuZHBvaW50KHQpO1xuICAgICAgICAgICAgaWYgKHRoaXMucHJldlN0YXRlLmlzU2VwYXJhdG9yICYmIG51bGwgIT09IHRoaXMucHJldlN0YXRlLnByZXZTdGF0ZSkgdGhpcy5wcmV2U3RhdGUucHJldlN0YXRlLnNldEVuZHBvaW50KHQpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGlzTWF0Y2godCkge1xuICAgICAgICBjb25zdCBzID0gdGhpcy5zZWdtZW50O1xuICAgICAgICBzd2l0Y2ggKG51bGwgPT09IHMgfHwgdm9pZCAwID09PSBzID8gdm9pZCAwIDogcy5raW5kKSB7XG4gICAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgcmV0dXJuICF0aGlzLnZhbHVlLmluY2x1ZGVzKHQpO1xuXG4gICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG5cbiAgICAgICAgICBjYXNlIDM6XG4gICAgICAgICAgY2FzZSB2b2lkIDA6XG4gICAgICAgICAgICByZXR1cm4gdGhpcy52YWx1ZS5pbmNsdWRlcyh0KTtcbiAgICAgICAgfVxuICAgIH1cbn1cblxuZnVuY3Rpb24gbih0KSB7XG4gICAgcmV0dXJuIHQubGVuZ3RoID4gMDtcbn1cblxudmFyIGU7XG5cbihmdW5jdGlvbih0KSB7XG4gICAgdFt0W1wic3RhclwiXSA9IDFdID0gXCJzdGFyXCI7XG4gICAgdFt0W1wiZHluYW1pY1wiXSA9IDJdID0gXCJkeW5hbWljXCI7XG4gICAgdFt0W1wic3RhdGljXCJdID0gM10gPSBcInN0YXRpY1wiO1xufSkoZSB8fCAoZSA9IHt9KSk7XG5cbmNsYXNzIFN0YXRpY1NlZ21lbnQge1xuICAgIGNvbnN0cnVjdG9yKHQsIHMpIHtcbiAgICAgICAgdGhpcy52YWx1ZSA9IHQ7XG4gICAgICAgIHRoaXMuY2FzZVNlbnNpdGl2ZSA9IHM7XG4gICAgfVxuICAgIGdldCBraW5kKCkge1xuICAgICAgICByZXR1cm4gMztcbiAgICB9XG4gICAgYXBwZW5kVG8odCkge1xuICAgICAgICBjb25zdCB7dmFsdWU6IHMsIHZhbHVlOiB7bGVuZ3RoOiBufX0gPSB0aGlzO1xuICAgICAgICBpZiAodGhpcy5jYXNlU2Vuc2l0aXZlKSBmb3IgKGxldCBlID0gMDsgZSA8IG47ICsrZSkgdCA9IHQuYXBwZW5kKHRoaXMsIHMuY2hhckF0KGUpKTsgZWxzZSBmb3IgKGxldCBlID0gMDsgZSA8IG47ICsrZSkge1xuICAgICAgICAgICAgY29uc3QgbiA9IHMuY2hhckF0KGUpO1xuICAgICAgICAgICAgdCA9IHQuYXBwZW5kKHRoaXMsIG4udG9VcHBlckNhc2UoKSArIG4udG9Mb3dlckNhc2UoKSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHQ7XG4gICAgfVxuICAgIGVxdWFscyh0KSB7XG4gICAgICAgIHJldHVybiAzID09PSB0LmtpbmQgJiYgdC5jYXNlU2Vuc2l0aXZlID09PSB0aGlzLmNhc2VTZW5zaXRpdmUgJiYgdC52YWx1ZSA9PT0gdGhpcy52YWx1ZTtcbiAgICB9XG59XG5cbmNsYXNzIER5bmFtaWNTZWdtZW50IHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBzKSB7XG4gICAgICAgIHRoaXMubmFtZSA9IHQ7XG4gICAgICAgIHRoaXMub3B0aW9uYWwgPSBzO1xuICAgIH1cbiAgICBnZXQga2luZCgpIHtcbiAgICAgICAgcmV0dXJuIDI7XG4gICAgfVxuICAgIGFwcGVuZFRvKHQpIHtcbiAgICAgICAgdCA9IHQuYXBwZW5kKHRoaXMsIFwiL1wiKTtcbiAgICAgICAgcmV0dXJuIHQ7XG4gICAgfVxuICAgIGVxdWFscyh0KSB7XG4gICAgICAgIHJldHVybiAyID09PSB0LmtpbmQgJiYgdC5vcHRpb25hbCA9PT0gdGhpcy5vcHRpb25hbCAmJiB0Lm5hbWUgPT09IHRoaXMubmFtZTtcbiAgICB9XG59XG5cbmNsYXNzIFN0YXJTZWdtZW50IHtcbiAgICBjb25zdHJ1Y3Rvcih0KSB7XG4gICAgICAgIHRoaXMubmFtZSA9IHQ7XG4gICAgfVxuICAgIGdldCBraW5kKCkge1xuICAgICAgICByZXR1cm4gMTtcbiAgICB9XG4gICAgYXBwZW5kVG8odCkge1xuICAgICAgICB0ID0gdC5hcHBlbmQodGhpcywgXCJcIik7XG4gICAgICAgIHJldHVybiB0O1xuICAgIH1cbiAgICBlcXVhbHModCkge1xuICAgICAgICByZXR1cm4gMSA9PT0gdC5raW5kICYmIHQubmFtZSA9PT0gdGhpcy5uYW1lO1xuICAgIH1cbn1cblxuZXhwb3J0IHsgQ29uZmlndXJhYmxlUm91dGUsIEVuZHBvaW50LCBSZWNvZ25pemVkUm91dGUsIFJvdXRlUmVjb2duaXplciB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXguanMubWFwXG4iLCJpbXBvcnQgeyBESSBhcyB0LCBJRXZlbnRBZ2dyZWdhdG9yIGFzIGUsIElMb2dnZXIgYXMgaSwgYm91bmQgYXMgcywgb25SZXNvbHZlIGFzIG4sIHJlc29sdmVBbGwgYXMgbywgaXNPYmplY3QgYXMgciwgSUNvbnRhaW5lciBhcyBhLCBpc0FycmF5SW5kZXggYXMgaCwgUHJvdG9jb2wgYXMgYywgTWV0YWRhdGEgYXMgdSwgZW1wdHlBcnJheSBhcyBsLCBJTW9kdWxlTG9hZGVyIGFzIGQsIEluc3RhbmNlUHJvdmlkZXIgYXMgZiwgbm9vcCBhcyBwLCBSZWdpc3RyYXRpb24gYXMgZyB9IGZyb20gXCJAYXVyZWxpYS9rZXJuZWxcIjtcblxuaW1wb3J0IHsgaXNDdXN0b21FbGVtZW50Vmlld01vZGVsIGFzIHYsIElIaXN0b3J5IGFzIHcsIElMb2NhdGlvbiBhcyBtLCBJV2luZG93IGFzICQsIENvbnRyb2xsZXIgYXMgeCwgQ3VzdG9tRWxlbWVudCBhcyB5LCBJUGxhdGZvcm0gYXMgRSwgQ3VzdG9tRWxlbWVudERlZmluaXRpb24gYXMgYiwgSUNvbnRyb2xsZXIgYXMgUywgSUFwcFJvb3QgYXMgUiwgaXNDdXN0b21FbGVtZW50Q29udHJvbGxlciBhcyBDLCBiaW5kYWJsZSBhcyBrLCBjdXN0b21FbGVtZW50IGFzIEksIEJpbmRpbmdNb2RlIGFzIE4sIGN1c3RvbUF0dHJpYnV0ZSBhcyBULCBJRXZlbnRUYXJnZXQgYXMgViwgSU5vZGUgYXMgQSwgSUV2ZW50RGVsZWdhdG9yIGFzIFAsIGdldFJlZiBhcyBMLCBDdXN0b21BdHRyaWJ1dGUgYXMgVSwgQXBwVGFzayBhcyBPIH0gZnJvbSBcIkBhdXJlbGlhL3J1bnRpbWUtaHRtbFwiO1xuXG5pbXBvcnQgeyBSb3V0ZVJlY29nbml6ZXIgYXMgaiB9IGZyb20gXCJAYXVyZWxpYS9yb3V0ZS1yZWNvZ25pemVyXCI7XG5cbmNsYXNzIEJhdGNoIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlLCBpKSB7XG4gICAgICAgIHRoaXMuc3RhY2sgPSB0O1xuICAgICAgICB0aGlzLmNiID0gZTtcbiAgICAgICAgdGhpcy5kb25lID0gZmFsc2U7XG4gICAgICAgIHRoaXMubmV4dCA9IG51bGw7XG4gICAgICAgIHRoaXMuaGVhZCA9IG51bGwgIT09IGkgJiYgdm9pZCAwICE9PSBpID8gaSA6IHRoaXM7XG4gICAgfVxuICAgIHN0YXRpYyBzdGFydCh0KSB7XG4gICAgICAgIHJldHVybiBuZXcgQmF0Y2goMCwgdCwgbnVsbCk7XG4gICAgfVxuICAgIHB1c2goKSB7XG4gICAgICAgIGxldCB0ID0gdGhpcztcbiAgICAgICAgZG8ge1xuICAgICAgICAgICAgKyt0LnN0YWNrO1xuICAgICAgICAgICAgdCA9IHQubmV4dDtcbiAgICAgICAgfSB3aGlsZSAobnVsbCAhPT0gdCk7XG4gICAgfVxuICAgIHBvcCgpIHtcbiAgICAgICAgbGV0IHQgPSB0aGlzO1xuICAgICAgICBkbyB7XG4gICAgICAgICAgICBpZiAoMCA9PT0gLS10LnN0YWNrKSB0Lmludm9rZSgpO1xuICAgICAgICAgICAgdCA9IHQubmV4dDtcbiAgICAgICAgfSB3aGlsZSAobnVsbCAhPT0gdCk7XG4gICAgfVxuICAgIGludm9rZSgpIHtcbiAgICAgICAgY29uc3QgdCA9IHRoaXMuY2I7XG4gICAgICAgIGlmIChudWxsICE9PSB0KSB7XG4gICAgICAgICAgICB0aGlzLmNiID0gbnVsbDtcbiAgICAgICAgICAgIHQodGhpcyk7XG4gICAgICAgICAgICB0aGlzLmRvbmUgPSB0cnVlO1xuICAgICAgICB9XG4gICAgfVxuICAgIGNvbnRpbnVlV2l0aCh0KSB7XG4gICAgICAgIGlmIChudWxsID09PSB0aGlzLm5leHQpIHJldHVybiB0aGlzLm5leHQgPSBuZXcgQmF0Y2godGhpcy5zdGFjaywgdCwgdGhpcy5oZWFkKTsgZWxzZSByZXR1cm4gdGhpcy5uZXh0LmNvbnRpbnVlV2l0aCh0KTtcbiAgICB9XG4gICAgc3RhcnQoKSB7XG4gICAgICAgIHRoaXMuaGVhZC5wdXNoKCk7XG4gICAgICAgIHRoaXMuaGVhZC5wb3AoKTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBCKHQsIGUpIHtcbiAgICB0ID0gdC5zbGljZSgpO1xuICAgIGUgPSBlLnNsaWNlKCk7XG4gICAgY29uc3QgaSA9IFtdO1xuICAgIHdoaWxlICh0Lmxlbmd0aCA+IDApIHtcbiAgICAgICAgY29uc3QgcyA9IHQuc2hpZnQoKTtcbiAgICAgICAgaWYgKGkuZXZlcnkoKHQgPT4gdC5jb250ZXh0LnZwYSAhPT0gcy5jb250ZXh0LnZwYSkpKSB7XG4gICAgICAgICAgICBjb25zdCB0ID0gZS5maW5kSW5kZXgoKHQgPT4gdC5jb250ZXh0LnZwYSA9PT0gcy5jb250ZXh0LnZwYSkpO1xuICAgICAgICAgICAgaWYgKHQgPj0gMCkgaS5wdXNoKC4uLmUuc3BsaWNlKDAsIHQgKyAxKSk7IGVsc2UgaS5wdXNoKHMpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGkucHVzaCguLi5lKTtcbiAgICByZXR1cm4gaTtcbn1cblxuZnVuY3Rpb24gRCh0KSB7XG4gICAgdHJ5IHtcbiAgICAgICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KHQpO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbCh0KTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIE0odCkge1xuICAgIHJldHVybiBcInN0cmluZ1wiID09PSB0eXBlb2YgdCA/IFsgdCBdIDogdDtcbn1cblxuZnVuY3Rpb24gcSh0KSB7XG4gICAgcmV0dXJuIFwic3RyaW5nXCIgPT09IHR5cGVvZiB0ID8gdCA6IHRbMF07XG59XG5cbmZ1bmN0aW9uIEgodCkge1xuICAgIHJldHVybiBcIm9iamVjdFwiID09PSB0eXBlb2YgdCAmJiBudWxsICE9PSB0ICYmICF2KHQpO1xufVxuXG5mdW5jdGlvbiBGKHQpIHtcbiAgICByZXR1cm4gSCh0KSAmJiB0cnVlID09PSBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwodCwgXCJuYW1lXCIpO1xufVxuXG5mdW5jdGlvbiB6KHQpIHtcbiAgICByZXR1cm4gSCh0KSAmJiB0cnVlID09PSBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwodCwgXCJjb21wb25lbnRcIik7XG59XG5cbmZ1bmN0aW9uIFcodCkge1xuICAgIHJldHVybiBIKHQpICYmIHRydWUgPT09IE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbCh0LCBcInJlZGlyZWN0VG9cIik7XG59XG5cbmZ1bmN0aW9uIEcodCkge1xuICAgIHJldHVybiBIKHQpICYmIHRydWUgPT09IE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbCh0LCBcImNvbXBvbmVudFwiKTtcbn1cblxuZnVuY3Rpb24gWSh0LCBlLCBpKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKGBJbnZhbGlkIHJvdXRlIGNvbmZpZyBwcm9wZXJ0eTogXCIke2V9XCIuIEV4cGVjdGVkICR7dH0sIGJ1dCBnb3QgJHtEKGkpfS5gKTtcbn1cblxuZnVuY3Rpb24gXyh0LCBlKSB7XG4gICAgaWYgKG51bGwgPT09IHQgfHwgdm9pZCAwID09PSB0KSB0aHJvdyBuZXcgRXJyb3IoYEludmFsaWQgcm91dGUgY29uZmlnOiBleHBlY3RlZCBhbiBvYmplY3Qgb3Igc3RyaW5nLCBidXQgZ290OiAke1N0cmluZyh0KX0uYCk7XG4gICAgY29uc3QgaSA9IE9iamVjdC5rZXlzKHQpO1xuICAgIGZvciAoY29uc3QgcyBvZiBpKSB7XG4gICAgICAgIGNvbnN0IGkgPSB0W3NdO1xuICAgICAgICBjb25zdCBuID0gWyBlLCBzIF0uam9pbihcIi5cIik7XG4gICAgICAgIHN3aXRjaCAocykge1xuICAgICAgICAgIGNhc2UgXCJpZFwiOlxuICAgICAgICAgIGNhc2UgXCJ2aWV3cG9ydFwiOlxuICAgICAgICAgIGNhc2UgXCJyZWRpcmVjdFRvXCI6XG4gICAgICAgICAgICBpZiAoXCJzdHJpbmdcIiAhPT0gdHlwZW9mIGkpIFkoXCJzdHJpbmdcIiwgbiwgaSk7XG4gICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgIGNhc2UgXCJjYXNlU2Vuc2l0aXZlXCI6XG4gICAgICAgICAgICBpZiAoXCJib29sZWFuXCIgIT09IHR5cGVvZiBpKSBZKFwiYm9vbGVhblwiLCBuLCBpKTtcbiAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgY2FzZSBcImRhdGFcIjpcbiAgICAgICAgICAgIGlmIChcIm9iamVjdFwiICE9PSB0eXBlb2YgaSB8fCBudWxsID09PSBpKSBZKFwib2JqZWN0XCIsIG4sIGkpO1xuICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICBjYXNlIFwidGl0bGVcIjpcbiAgICAgICAgICAgIHN3aXRjaCAodHlwZW9mIGkpIHtcbiAgICAgICAgICAgICAgY2FzZSBcInN0cmluZ1wiOlxuICAgICAgICAgICAgICBjYXNlIFwiZnVuY3Rpb25cIjpcbiAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIFkoXCJzdHJpbmcgb3IgZnVuY3Rpb25cIiwgbiwgaSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgIGNhc2UgXCJwYXRoXCI6XG4gICAgICAgICAgICBpZiAoaSBpbnN0YW5jZW9mIEFycmF5KSB7XG4gICAgICAgICAgICAgICAgZm9yIChsZXQgdCA9IDA7IHQgPCBpLmxlbmd0aDsgKyt0KSBpZiAoXCJzdHJpbmdcIiAhPT0gdHlwZW9mIGlbdF0pIFkoXCJzdHJpbmdcIiwgYCR7bn1bJHt0fV1gLCBpW3RdKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoXCJzdHJpbmdcIiAhPT0gdHlwZW9mIGkpIFkoXCJzdHJpbmcgb3IgQXJyYXkgb2Ygc3RyaW5nc1wiLCBuLCBpKTtcbiAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgY2FzZSBcImNvbXBvbmVudFwiOlxuICAgICAgICAgICAgWihpLCBuKTtcbiAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgY2FzZSBcInJvdXRlc1wiOlxuICAgICAgICAgICAgaWYgKCEoaSBpbnN0YW5jZW9mIEFycmF5KSkgWShcIkFycmF5XCIsIG4sIGkpO1xuICAgICAgICAgICAgZm9yIChjb25zdCB0IG9mIGkpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBlID0gYCR7bn1bJHtpLmluZGV4T2YodCl9XWA7XG4gICAgICAgICAgICAgICAgWih0LCBlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgY2FzZSBcInRyYW5zaXRpb25QbGFuXCI6XG4gICAgICAgICAgICBzd2l0Y2ggKHR5cGVvZiBpKSB7XG4gICAgICAgICAgICAgIGNhc2UgXCJzdHJpbmdcIjpcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKGkpIHtcbiAgICAgICAgICAgICAgICAgIGNhc2UgXCJub25lXCI6XG4gICAgICAgICAgICAgICAgICBjYXNlIFwicmVwbGFjZVwiOlxuICAgICAgICAgICAgICAgICAgY2FzZSBcImludm9rZS1saWZlY3ljbGVzXCI6XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICBZKFwic3RyaW5nKCdub25lJ3wncmVwbGFjZSd8J2ludm9rZS1saWZlY3ljbGVzJykgb3IgZnVuY3Rpb25cIiwgbiwgaSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICAgIGNhc2UgXCJmdW5jdGlvblwiOlxuICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgWShcInN0cmluZygnbm9uZSd8J3JlcGxhY2UnfCdpbnZva2UtbGlmZWN5Y2xlcycpIG9yIGZ1bmN0aW9uXCIsIG4sIGkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBVbmtub3duIHJvdXRlIGNvbmZpZyBwcm9wZXJ0eTogXCIke2V9LiR7c31cIi4gUGxlYXNlIHNwZWNpZnkga25vd24gcHJvcGVydGllcyBvbmx5LmApO1xuICAgICAgICB9XG4gICAgfVxufVxuXG5mdW5jdGlvbiBKKHQsIGUpIHtcbiAgICBpZiAobnVsbCA9PT0gdCB8fCB2b2lkIDAgPT09IHQpIHRocm93IG5ldyBFcnJvcihgSW52YWxpZCByb3V0ZSBjb25maWc6IGV4cGVjdGVkIGFuIG9iamVjdCBvciBzdHJpbmcsIGJ1dCBnb3Q6ICR7U3RyaW5nKHQpfS5gKTtcbiAgICBjb25zdCBpID0gT2JqZWN0LmtleXModCk7XG4gICAgZm9yIChjb25zdCBzIG9mIGkpIHtcbiAgICAgICAgY29uc3QgaSA9IHRbc107XG4gICAgICAgIGNvbnN0IG4gPSBbIGUsIHMgXS5qb2luKFwiLlwiKTtcbiAgICAgICAgc3dpdGNoIChzKSB7XG4gICAgICAgICAgY2FzZSBcInBhdGhcIjpcbiAgICAgICAgICBjYXNlIFwicmVkaXJlY3RUb1wiOlxuICAgICAgICAgICAgaWYgKFwic3RyaW5nXCIgIT09IHR5cGVvZiBpKSBZKFwic3RyaW5nXCIsIG4sIGkpO1xuICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBVbmtub3duIHJlZGlyZWN0IGNvbmZpZyBwcm9wZXJ0eTogXCIke2V9LiR7c31cIi4gT25seSAncGF0aCcgYW5kICdyZWRpcmVjdFRvJyBzaG91bGQgYmUgc3BlY2lmaWVkIGZvciByZWRpcmVjdHMuYCk7XG4gICAgICAgIH1cbiAgICB9XG59XG5cbmZ1bmN0aW9uIFoodCwgZSkge1xuICAgIHN3aXRjaCAodHlwZW9mIHQpIHtcbiAgICAgIGNhc2UgXCJmdW5jdGlvblwiOlxuICAgICAgICBicmVhaztcblxuICAgICAgY2FzZSBcIm9iamVjdFwiOlxuICAgICAgICBpZiAodCBpbnN0YW5jZW9mIFByb21pc2UpIGJyZWFrO1xuICAgICAgICBpZiAoVyh0KSkge1xuICAgICAgICAgICAgSih0LCBlKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIGlmICh6KHQpKSB7XG4gICAgICAgICAgICBfKHQsIGUpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCF2KHQpICYmICFGKHQpKSBZKGBhbiBvYmplY3Qgd2l0aCBhdCBsZWFzdCBhICdjb21wb25lbnQnIHByb3BlcnR5IChzZWUgUm91dGVhYmxlKWAsIGUsIHQpO1xuICAgICAgICBicmVhaztcblxuICAgICAgY2FzZSBcInN0cmluZ1wiOlxuICAgICAgICBicmVhaztcblxuICAgICAgZGVmYXVsdDpcbiAgICAgICAgWShcImZ1bmN0aW9uLCBvYmplY3Qgb3Igc3RyaW5nIChzZWUgUm91dGVhYmxlKVwiLCBlLCB0KTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIFEodCwgZSkge1xuICAgIGlmICh0ID09PSBlKSByZXR1cm4gdHJ1ZTtcbiAgICBpZiAodHlwZW9mIHQgIT09IHR5cGVvZiBlKSByZXR1cm4gZmFsc2U7XG4gICAgaWYgKG51bGwgPT09IHQgfHwgbnVsbCA9PT0gZSkgcmV0dXJuIGZhbHNlO1xuICAgIGlmIChPYmplY3QuZ2V0UHJvdG90eXBlT2YodCkgIT09IE9iamVjdC5nZXRQcm90b3R5cGVPZihlKSkgcmV0dXJuIGZhbHNlO1xuICAgIGNvbnN0IGkgPSBPYmplY3Qua2V5cyh0KTtcbiAgICBjb25zdCBzID0gT2JqZWN0LmtleXMoZSk7XG4gICAgaWYgKGkubGVuZ3RoICE9PSBzLmxlbmd0aCkgcmV0dXJuIGZhbHNlO1xuICAgIGZvciAobGV0IG4gPSAwLCBvID0gaS5sZW5ndGg7IG4gPCBvOyArK24pIHtcbiAgICAgICAgY29uc3QgbyA9IGlbbl07XG4gICAgICAgIGlmIChvICE9PSBzW25dKSByZXR1cm4gZmFsc2U7XG4gICAgICAgIGlmICh0W29dICE9PSBlW29dKSByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIHJldHVybiB0cnVlO1xufVxuXG4vKiEgKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKipcbkNvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLlxuXG5QZXJtaXNzaW9uIHRvIHVzZSwgY29weSwgbW9kaWZ5LCBhbmQvb3IgZGlzdHJpYnV0ZSB0aGlzIHNvZnR3YXJlIGZvciBhbnlcbnB1cnBvc2Ugd2l0aCBvciB3aXRob3V0IGZlZSBpcyBoZXJlYnkgZ3JhbnRlZC5cblxuVEhFIFNPRlRXQVJFIElTIFBST1ZJREVEIFwiQVMgSVNcIiBBTkQgVEhFIEFVVEhPUiBESVNDTEFJTVMgQUxMIFdBUlJBTlRJRVMgV0lUSFxuUkVHQVJEIFRPIFRISVMgU09GVFdBUkUgSU5DTFVESU5HIEFMTCBJTVBMSUVEIFdBUlJBTlRJRVMgT0YgTUVSQ0hBTlRBQklMSVRZXG5BTkQgRklUTkVTUy4gSU4gTk8gRVZFTlQgU0hBTEwgVEhFIEFVVEhPUiBCRSBMSUFCTEUgRk9SIEFOWSBTUEVDSUFMLCBESVJFQ1QsXG5JTkRJUkVDVCwgT1IgQ09OU0VRVUVOVElBTCBEQU1BR0VTIE9SIEFOWSBEQU1BR0VTIFdIQVRTT0VWRVIgUkVTVUxUSU5HIEZST01cbkxPU1MgT0YgVVNFLCBEQVRBIE9SIFBST0ZJVFMsIFdIRVRIRVIgSU4gQU4gQUNUSU9OIE9GIENPTlRSQUNULCBORUdMSUdFTkNFIE9SXG5PVEhFUiBUT1JUSU9VUyBBQ1RJT04sIEFSSVNJTkcgT1VUIE9GIE9SIElOIENPTk5FQ1RJT04gV0lUSCBUSEUgVVNFIE9SXG5QRVJGT1JNQU5DRSBPRiBUSElTIFNPRlRXQVJFLlxuKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiogKi8gZnVuY3Rpb24gSyh0LCBlLCBpLCBzKSB7XG4gICAgdmFyIG4gPSBhcmd1bWVudHMubGVuZ3RoLCBvID0gbiA8IDMgPyBlIDogbnVsbCA9PT0gcyA/IHMgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKGUsIGkpIDogcywgcjtcbiAgICBpZiAoXCJvYmplY3RcIiA9PT0gdHlwZW9mIFJlZmxlY3QgJiYgXCJmdW5jdGlvblwiID09PSB0eXBlb2YgUmVmbGVjdC5kZWNvcmF0ZSkgbyA9IFJlZmxlY3QuZGVjb3JhdGUodCwgZSwgaSwgcyk7IGVsc2UgZm9yICh2YXIgYSA9IHQubGVuZ3RoIC0gMTsgYSA+PSAwOyBhLS0pIGlmIChyID0gdFthXSkgbyA9IChuIDwgMyA/IHIobykgOiBuID4gMyA/IHIoZSwgaSwgbykgOiByKGUsIGkpKSB8fCBvO1xuICAgIHJldHVybiBuID4gMyAmJiBvICYmIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLCBpLCBvKSwgbztcbn1cblxuZnVuY3Rpb24gWCh0LCBlKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKGksIHMpIHtcbiAgICAgICAgZShpLCBzLCB0KTtcbiAgICB9O1xufVxuXG5jbGFzcyBTdWJzY3JpcHRpb24ge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUsIGkpIHtcbiAgICAgICAgdGhpcy5ldmVudHMgPSB0O1xuICAgICAgICB0aGlzLnNlcmlhbCA9IGU7XG4gICAgICAgIHRoaXMuaW5uZXIgPSBpO1xuICAgICAgICB0aGlzLmRpc3Bvc2VkID0gZmFsc2U7XG4gICAgfVxuICAgIGRpc3Bvc2UoKSB7XG4gICAgICAgIGlmICghdGhpcy5kaXNwb3NlZCkge1xuICAgICAgICAgICAgdGhpcy5kaXNwb3NlZCA9IHRydWU7XG4gICAgICAgICAgICB0aGlzLmlubmVyLmRpc3Bvc2UoKTtcbiAgICAgICAgICAgIGNvbnN0IHQgPSB0aGlzLmV2ZW50c1tcInN1YnNjcmlwdGlvbnNcIl07XG4gICAgICAgICAgICB0LnNwbGljZSh0LmluZGV4T2YodGhpcyksIDEpO1xuICAgICAgICB9XG4gICAgfVxufVxuXG5jb25zdCB0dCA9IHQuY3JlYXRlSW50ZXJmYWNlKFwiSVJvdXRlckV2ZW50c1wiLCAodCA9PiB0LnNpbmdsZXRvbihldCkpKTtcblxubGV0IGV0ID0gY2xhc3MgUm91dGVyRXZlbnRzIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlKSB7XG4gICAgICAgIHRoaXMuZWEgPSB0O1xuICAgICAgICB0aGlzLmxvZ2dlciA9IGU7XG4gICAgICAgIHRoaXMuc3Vic2NyaXB0aW9uU2VyaWFsID0gMDtcbiAgICAgICAgdGhpcy5zdWJzY3JpcHRpb25zID0gW107XG4gICAgICAgIHRoaXMubG9nZ2VyID0gZS5zY29wZVRvKFwiUm91dGVyRXZlbnRzXCIpO1xuICAgIH1cbiAgICBwdWJsaXNoKHQpIHtcbiAgICAgICAgdGhpcy5sb2dnZXIudHJhY2UoYHB1Ymxpc2hpbmcgJXNgLCB0KTtcbiAgICAgICAgdGhpcy5lYS5wdWJsaXNoKHQubmFtZSwgdCk7XG4gICAgfVxuICAgIHN1YnNjcmliZSh0LCBlKSB7XG4gICAgICAgIGNvbnN0IGkgPSBuZXcgU3Vic2NyaXB0aW9uKHRoaXMsICsrdGhpcy5zdWJzY3JpcHRpb25TZXJpYWwsIHRoaXMuZWEuc3Vic2NyaWJlKHQsIChzID0+IHtcbiAgICAgICAgICAgIHRoaXMubG9nZ2VyLnRyYWNlKGBoYW5kbGluZyAlcyBmb3Igc3Vic2NyaXB0aW9uICMke2kuc2VyaWFsfWAsIHQpO1xuICAgICAgICAgICAgZShzKTtcbiAgICAgICAgfSkpKTtcbiAgICAgICAgdGhpcy5zdWJzY3JpcHRpb25zLnB1c2goaSk7XG4gICAgICAgIHJldHVybiBpO1xuICAgIH1cbn07XG5cbmV0ID0gSyhbIFgoMCwgZSksIFgoMSwgaSkgXSwgZXQpO1xuXG5jbGFzcyBMb2NhdGlvbkNoYW5nZUV2ZW50IHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlLCBpLCBzKSB7XG4gICAgICAgIHRoaXMuaWQgPSB0O1xuICAgICAgICB0aGlzLnVybCA9IGU7XG4gICAgICAgIHRoaXMudHJpZ2dlciA9IGk7XG4gICAgICAgIHRoaXMuc3RhdGUgPSBzO1xuICAgIH1cbiAgICBnZXQgbmFtZSgpIHtcbiAgICAgICAgcmV0dXJuIFwiYXU6cm91dGVyOmxvY2F0aW9uLWNoYW5nZVwiO1xuICAgIH1cbiAgICB0b1N0cmluZygpIHtcbiAgICAgICAgcmV0dXJuIGBMb2NhdGlvbkNoYW5nZUV2ZW50KGlkOiR7dGhpcy5pZH0sdXJsOicke3RoaXMudXJsfScsdHJpZ2dlcjonJHt0aGlzLnRyaWdnZXJ9JylgO1xuICAgIH1cbn1cblxuY2xhc3MgTmF2aWdhdGlvblN0YXJ0RXZlbnQge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUsIGksIHMpIHtcbiAgICAgICAgdGhpcy5pZCA9IHQ7XG4gICAgICAgIHRoaXMuaW5zdHJ1Y3Rpb25zID0gZTtcbiAgICAgICAgdGhpcy50cmlnZ2VyID0gaTtcbiAgICAgICAgdGhpcy5tYW5hZ2VkU3RhdGUgPSBzO1xuICAgIH1cbiAgICBnZXQgbmFtZSgpIHtcbiAgICAgICAgcmV0dXJuIFwiYXU6cm91dGVyOm5hdmlnYXRpb24tc3RhcnRcIjtcbiAgICB9XG4gICAgdG9TdHJpbmcoKSB7XG4gICAgICAgIHJldHVybiBgTmF2aWdhdGlvblN0YXJ0RXZlbnQoaWQ6JHt0aGlzLmlkfSxpbnN0cnVjdGlvbnM6JyR7dGhpcy5pbnN0cnVjdGlvbnN9Jyx0cmlnZ2VyOicke3RoaXMudHJpZ2dlcn0nKWA7XG4gICAgfVxufVxuXG5jbGFzcyBOYXZpZ2F0aW9uRW5kRXZlbnQge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUsIGkpIHtcbiAgICAgICAgdGhpcy5pZCA9IHQ7XG4gICAgICAgIHRoaXMuaW5zdHJ1Y3Rpb25zID0gZTtcbiAgICAgICAgdGhpcy5maW5hbEluc3RydWN0aW9ucyA9IGk7XG4gICAgfVxuICAgIGdldCBuYW1lKCkge1xuICAgICAgICByZXR1cm4gXCJhdTpyb3V0ZXI6bmF2aWdhdGlvbi1lbmRcIjtcbiAgICB9XG4gICAgdG9TdHJpbmcoKSB7XG4gICAgICAgIHJldHVybiBgTmF2aWdhdGlvbkVuZEV2ZW50KGlkOiR7dGhpcy5pZH0saW5zdHJ1Y3Rpb25zOicke3RoaXMuaW5zdHJ1Y3Rpb25zfScsZmluYWxJbnN0cnVjdGlvbnM6JyR7dGhpcy5maW5hbEluc3RydWN0aW9uc30nKWA7XG4gICAgfVxufVxuXG5jbGFzcyBOYXZpZ2F0aW9uQ2FuY2VsRXZlbnQge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUsIGkpIHtcbiAgICAgICAgdGhpcy5pZCA9IHQ7XG4gICAgICAgIHRoaXMuaW5zdHJ1Y3Rpb25zID0gZTtcbiAgICAgICAgdGhpcy5yZWFzb24gPSBpO1xuICAgIH1cbiAgICBnZXQgbmFtZSgpIHtcbiAgICAgICAgcmV0dXJuIFwiYXU6cm91dGVyOm5hdmlnYXRpb24tY2FuY2VsXCI7XG4gICAgfVxuICAgIHRvU3RyaW5nKCkge1xuICAgICAgICByZXR1cm4gYE5hdmlnYXRpb25DYW5jZWxFdmVudChpZDoke3RoaXMuaWR9LGluc3RydWN0aW9uczonJHt0aGlzLmluc3RydWN0aW9uc30nLHJlYXNvbjoke1N0cmluZyh0aGlzLnJlYXNvbil9KWA7XG4gICAgfVxufVxuXG5jbGFzcyBOYXZpZ2F0aW9uRXJyb3JFdmVudCB7XG4gICAgY29uc3RydWN0b3IodCwgZSwgaSkge1xuICAgICAgICB0aGlzLmlkID0gdDtcbiAgICAgICAgdGhpcy5pbnN0cnVjdGlvbnMgPSBlO1xuICAgICAgICB0aGlzLmVycm9yID0gaTtcbiAgICB9XG4gICAgZ2V0IG5hbWUoKSB7XG4gICAgICAgIHJldHVybiBcImF1OnJvdXRlcjpuYXZpZ2F0aW9uLWVycm9yXCI7XG4gICAgfVxuICAgIHRvU3RyaW5nKCkge1xuICAgICAgICByZXR1cm4gYE5hdmlnYXRpb25FcnJvckV2ZW50KGlkOiR7dGhpcy5pZH0saW5zdHJ1Y3Rpb25zOicke3RoaXMuaW5zdHJ1Y3Rpb25zfScsZXJyb3I6JHtTdHJpbmcodGhpcy5lcnJvcil9KWA7XG4gICAgfVxufVxuXG5jb25zdCBpdCA9IHQuY3JlYXRlSW50ZXJmYWNlKFwiSUJhc2VIcmVmUHJvdmlkZXJcIiwgKHQgPT4gdC5zaW5nbGV0b24oc3QpKSk7XG5cbmNsYXNzIEJhc2VIcmVmIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlKSB7XG4gICAgICAgIHRoaXMucGF0aCA9IHQ7XG4gICAgICAgIHRoaXMucm9vdGVkUGF0aCA9IGU7XG4gICAgfVxufVxuXG5sZXQgc3QgPSBjbGFzcyBCcm93c2VyQmFzZUhyZWZQcm92aWRlciB7XG4gICAgY29uc3RydWN0b3IodCkge1xuICAgICAgICB0aGlzLndpbmRvdyA9IHQ7XG4gICAgfVxuICAgIGdldEJhc2VIcmVmKCkge1xuICAgICAgICB2YXIgdDtcbiAgICAgICAgY29uc3QgZSA9IHRoaXMud2luZG93LmRvY3VtZW50LmhlYWQucXVlcnlTZWxlY3RvcihcImJhc2VcIik7XG4gICAgICAgIGlmIChudWxsID09PSBlKSByZXR1cm4gbnVsbDtcbiAgICAgICAgY29uc3QgaSA9IHJ0KGUuaHJlZik7XG4gICAgICAgIGNvbnN0IHMgPSBydChudWxsICE9PSAodCA9IGUuZ2V0QXR0cmlidXRlKFwiaHJlZlwiKSkgJiYgdm9pZCAwICE9PSB0ID8gdCA6IFwiXCIpO1xuICAgICAgICByZXR1cm4gbmV3IEJhc2VIcmVmKHMsIGkpO1xuICAgIH1cbn07XG5cbnN0ID0gSyhbIFgoMCwgJCkgXSwgc3QpO1xuXG5jb25zdCBudCA9IHQuY3JlYXRlSW50ZXJmYWNlKFwiSUxvY2F0aW9uTWFuYWdlclwiLCAodCA9PiB0LnNpbmdsZXRvbihvdCkpKTtcblxubGV0IG90ID0gY2xhc3MgQnJvd3NlckxvY2F0aW9uTWFuYWdlciB7XG4gICAgY29uc3RydWN0b3IodCwgZSwgaSwgcywgbiwgbykge1xuICAgICAgICB2YXIgcjtcbiAgICAgICAgdGhpcy5sb2dnZXIgPSB0O1xuICAgICAgICB0aGlzLmV2ZW50cyA9IGU7XG4gICAgICAgIHRoaXMuaGlzdG9yeSA9IGk7XG4gICAgICAgIHRoaXMubG9jYXRpb24gPSBzO1xuICAgICAgICB0aGlzLndpbmRvdyA9IG47XG4gICAgICAgIHRoaXMuYmFzZUhyZWZQcm92aWRlciA9IG87XG4gICAgICAgIHRoaXMuZXZlbnRJZCA9IDA7XG4gICAgICAgIHRoaXMubG9nZ2VyID0gdC5yb290LnNjb3BlVG8oXCJMb2NhdGlvbk1hbmFnZXJcIik7XG4gICAgICAgIGNvbnN0IGEgPSBvLmdldEJhc2VIcmVmKCk7XG4gICAgICAgIGlmIChudWxsID09PSBhKSB7XG4gICAgICAgICAgICBjb25zdCB0ID0gbnVsbCAhPT0gKHIgPSBzLm9yaWdpbikgJiYgdm9pZCAwICE9PSByID8gciA6IFwiXCI7XG4gICAgICAgICAgICBjb25zdCBlID0gdGhpcy5iYXNlSHJlZiA9IG5ldyBCYXNlSHJlZihcIlwiLCBydCh0KSk7XG4gICAgICAgICAgICB0aGlzLmxvZ2dlci53YXJuKGBubyBiYXNlSHJlZiBwcm92aWRlZCwgZGVmYXVsdGluZyB0byBvcmlnaW4gJyR7ZS5yb290ZWRQYXRofScgKG5vcm1hbGl6ZWQgZnJvbSAnJHt0fScpYCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmJhc2VIcmVmID0gYTtcbiAgICAgICAgICAgIHRoaXMubG9nZ2VyLmRlYnVnKGBiYXNlSHJlZiBzZXQgdG8gcGF0aDogJyR7YS5wYXRofScsIHJvb3RlZFBhdGg6ICcke2Eucm9vdGVkUGF0aH0nYCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgc3RhcnRMaXN0ZW5pbmcoKSB7XG4gICAgICAgIHRoaXMubG9nZ2VyLnRyYWNlKGBzdGFydExpc3RlbmluZygpYCk7XG4gICAgICAgIHRoaXMud2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJwb3BzdGF0ZVwiLCB0aGlzLm9uUG9wU3RhdGUsIGZhbHNlKTtcbiAgICAgICAgdGhpcy53aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcImhhc2hjaGFuZ2VcIiwgdGhpcy5vbkhhc2hDaGFuZ2UsIGZhbHNlKTtcbiAgICB9XG4gICAgc3RvcExpc3RlbmluZygpIHtcbiAgICAgICAgdGhpcy5sb2dnZXIudHJhY2UoYHN0b3BMaXN0ZW5pbmcoKWApO1xuICAgICAgICB0aGlzLndpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKFwicG9wc3RhdGVcIiwgdGhpcy5vblBvcFN0YXRlLCBmYWxzZSk7XG4gICAgICAgIHRoaXMud2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJoYXNoY2hhbmdlXCIsIHRoaXMub25IYXNoQ2hhbmdlLCBmYWxzZSk7XG4gICAgfVxuICAgIG9uUG9wU3RhdGUodCkge1xuICAgICAgICB0aGlzLmxvZ2dlci50cmFjZShgb25Qb3BTdGF0ZSgpYCk7XG4gICAgICAgIHRoaXMuZXZlbnRzLnB1Ymxpc2gobmV3IExvY2F0aW9uQ2hhbmdlRXZlbnQoKyt0aGlzLmV2ZW50SWQsIHRoaXMuZ2V0UGF0aCgpLCBcInBvcHN0YXRlXCIsIHQuc3RhdGUpKTtcbiAgICB9XG4gICAgb25IYXNoQ2hhbmdlKHQpIHtcbiAgICAgICAgdGhpcy5sb2dnZXIudHJhY2UoYG9uSGFzaENoYW5nZSgpYCk7XG4gICAgICAgIHRoaXMuZXZlbnRzLnB1Ymxpc2gobmV3IExvY2F0aW9uQ2hhbmdlRXZlbnQoKyt0aGlzLmV2ZW50SWQsIHRoaXMuZ2V0UGF0aCgpLCBcImhhc2hjaGFuZ2VcIiwgbnVsbCkpO1xuICAgIH1cbiAgICBwdXNoU3RhdGUodCwgZSwgaSkge1xuICAgICAgICBpID0gdGhpcy5hZGRCYXNlSHJlZihpKTtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IHMgPSBKU09OLnN0cmluZ2lmeSh0KTtcbiAgICAgICAgICAgIHRoaXMubG9nZ2VyLnRyYWNlKGBwdXNoU3RhdGUoc3RhdGU6JHtzfSx0aXRsZTonJHtlfScsdXJsOicke2l9JylgKTtcbiAgICAgICAgfSBjYXRjaCAodCkge1xuICAgICAgICAgICAgdGhpcy5sb2dnZXIud2FybihgcHVzaFN0YXRlKHN0YXRlOk5PVF9TRVJJQUxJWkFCTEUsdGl0bGU6JyR7ZX0nLHVybDonJHtpfScpYCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5oaXN0b3J5LnB1c2hTdGF0ZSh0LCBlLCBpKTtcbiAgICB9XG4gICAgcmVwbGFjZVN0YXRlKHQsIGUsIGkpIHtcbiAgICAgICAgaSA9IHRoaXMuYWRkQmFzZUhyZWYoaSk7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCBzID0gSlNPTi5zdHJpbmdpZnkodCk7XG4gICAgICAgICAgICB0aGlzLmxvZ2dlci50cmFjZShgcmVwbGFjZVN0YXRlKHN0YXRlOiR7c30sdGl0bGU6JyR7ZX0nLHVybDonJHtpfScpYCk7XG4gICAgICAgIH0gY2F0Y2ggKHQpIHtcbiAgICAgICAgICAgIHRoaXMubG9nZ2VyLndhcm4oYHJlcGxhY2VTdGF0ZShzdGF0ZTpOT1RfU0VSSUFMSVpBQkxFLHRpdGxlOicke2V9Jyx1cmw6JyR7aX0nKWApO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuaGlzdG9yeS5yZXBsYWNlU3RhdGUodCwgZSwgaSk7XG4gICAgfVxuICAgIGdldFBhdGgoKSB7XG4gICAgICAgIGNvbnN0IHtwYXRobmFtZTogdCwgc2VhcmNoOiBlLCBoYXNoOiBpfSA9IHRoaXMubG9jYXRpb247XG4gICAgICAgIGNvbnN0IHMgPSB0aGlzLnJlbW92ZUJhc2VIcmVmKGAke3R9JHthdChlKX0ke2l9YCk7XG4gICAgICAgIHRoaXMubG9nZ2VyLnRyYWNlKGBnZXRQYXRoKCkgLT4gJyR7c30nYCk7XG4gICAgICAgIHJldHVybiBzO1xuICAgIH1cbiAgICBjdXJyZW50UGF0aEVxdWFscyh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSB0aGlzLmdldFBhdGgoKSA9PT0gdGhpcy5yZW1vdmVCYXNlSHJlZih0KTtcbiAgICAgICAgdGhpcy5sb2dnZXIudHJhY2UoYGN1cnJlbnRQYXRoRXF1YWxzKHBhdGg6JyR7dH0nKSAtPiAke2V9YCk7XG4gICAgICAgIHJldHVybiBlO1xuICAgIH1cbiAgICBhZGRCYXNlSHJlZih0KSB7XG4gICAgICAgIGNvbnN0IGUgPSB0O1xuICAgICAgICBsZXQgaTtcbiAgICAgICAgbGV0IHMgPSB0aGlzLmJhc2VIcmVmLnJvb3RlZFBhdGg7XG4gICAgICAgIGlmIChzLmVuZHNXaXRoKFwiL1wiKSkgcyA9IHMuc2xpY2UoMCwgLTEpO1xuICAgICAgICBpZiAoMCA9PT0gcy5sZW5ndGgpIGkgPSB0OyBlbHNlIHtcbiAgICAgICAgICAgIGlmICh0LnN0YXJ0c1dpdGgoXCIvXCIpKSB0ID0gdC5zbGljZSgxKTtcbiAgICAgICAgICAgIGkgPSBgJHtzfS8ke3R9YDtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmxvZ2dlci50cmFjZShgYWRkQmFzZUhyZWYocGF0aDonJHtlfScpIC0+ICcke2l9J2ApO1xuICAgICAgICByZXR1cm4gaTtcbiAgICB9XG4gICAgcmVtb3ZlQmFzZUhyZWYodCkge1xuICAgICAgICBjb25zdCBlID0gdDtcbiAgICAgICAgaWYgKHQuc3RhcnRzV2l0aCh0aGlzLmJhc2VIcmVmLnBhdGgpKSB0ID0gdC5zbGljZSh0aGlzLmJhc2VIcmVmLnBhdGgubGVuZ3RoKTtcbiAgICAgICAgdCA9IHJ0KHQpO1xuICAgICAgICB0aGlzLmxvZ2dlci50cmFjZShgcmVtb3ZlQmFzZUhyZWYocGF0aDonJHtlfScpIC0+ICcke3R9J2ApO1xuICAgICAgICByZXR1cm4gdDtcbiAgICB9XG59O1xuXG5LKFsgcyBdLCBvdC5wcm90b3R5cGUsIFwib25Qb3BTdGF0ZVwiLCBudWxsKTtcblxuSyhbIHMgXSwgb3QucHJvdG90eXBlLCBcIm9uSGFzaENoYW5nZVwiLCBudWxsKTtcblxub3QgPSBLKFsgWCgwLCBpKSwgWCgxLCB0dCksIFgoMiwgdyksIFgoMywgbSksIFgoNCwgJCksIFgoNSwgaXQpIF0sIG90KTtcblxuZnVuY3Rpb24gcnQodCkge1xuICAgIGxldCBlO1xuICAgIGxldCBpO1xuICAgIGxldCBzO1xuICAgIGlmICgocyA9IHQuaW5kZXhPZihcIj9cIikpID49IDAgfHwgKHMgPSB0LmluZGV4T2YoXCIjXCIpKSA+PSAwKSB7XG4gICAgICAgIGUgPSB0LnNsaWNlKDAsIHMpO1xuICAgICAgICBpID0gdC5zbGljZShzKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICBlID0gdDtcbiAgICAgICAgaSA9IFwiXCI7XG4gICAgfVxuICAgIGlmIChlLmVuZHNXaXRoKFwiL1wiKSkgZSA9IGUuc2xpY2UoMCwgLTEpOyBlbHNlIGlmIChlLmVuZHNXaXRoKFwiL2luZGV4Lmh0bWxcIikpIGUgPSBlLnNsaWNlKDAsIC0xMSk7XG4gICAgcmV0dXJuIGAke2V9JHtpfWA7XG59XG5cbmZ1bmN0aW9uIGF0KHQpIHtcbiAgICByZXR1cm4gdC5sZW5ndGggPiAwICYmICF0LnN0YXJ0c1dpdGgoXCI/XCIpID8gYD8ke3R9YCA6IHQ7XG59XG5cbmNsYXNzIFZpZXdwb3J0UmVxdWVzdCB7XG4gICAgY29uc3RydWN0b3IodCwgZSwgaSwgcykge1xuICAgICAgICB0aGlzLnZpZXdwb3J0TmFtZSA9IHQ7XG4gICAgICAgIHRoaXMuY29tcG9uZW50TmFtZSA9IGU7XG4gICAgICAgIHRoaXMucmVzb2x1dGlvbiA9IGk7XG4gICAgICAgIHRoaXMuYXBwZW5kID0gcztcbiAgICB9XG4gICAgc3RhdGljIGNyZWF0ZSh0KSB7XG4gICAgICAgIHJldHVybiBuZXcgVmlld3BvcnRSZXF1ZXN0KHQudmlld3BvcnROYW1lLCB0LmNvbXBvbmVudE5hbWUsIHQucmVzb2x1dGlvbiwgdC5hcHBlbmQpO1xuICAgIH1cbiAgICB0b1N0cmluZygpIHtcbiAgICAgICAgcmV0dXJuIGBWUih2aWV3cG9ydDonJHt0aGlzLnZpZXdwb3J0TmFtZX0nLGNvbXBvbmVudDonJHt0aGlzLmNvbXBvbmVudE5hbWV9JyxyZXNvbHV0aW9uOicke3RoaXMucmVzb2x1dGlvbn0nLGFwcGVuZDoke3RoaXMuYXBwZW5kfSlgO1xuICAgIH1cbn1cblxuY29uc3QgaHQgPSBuZXcgV2Vha01hcDtcblxuY2xhc3MgVmlld3BvcnRBZ2VudCB7XG4gICAgY29uc3RydWN0b3IodCwgZSwgcykge1xuICAgICAgICB0aGlzLnZpZXdwb3J0ID0gdDtcbiAgICAgICAgdGhpcy5ob3N0Q29udHJvbGxlciA9IGU7XG4gICAgICAgIHRoaXMuY3R4ID0gcztcbiAgICAgICAgdGhpcy5pc0FjdGl2ZSA9IGZhbHNlO1xuICAgICAgICB0aGlzLmN1ckNBID0gbnVsbDtcbiAgICAgICAgdGhpcy5uZXh0Q0EgPSBudWxsO1xuICAgICAgICB0aGlzLnN0YXRlID0gODI1NjtcbiAgICAgICAgdGhpcy4kcmVzb2x1dGlvbiA9IFwiZHluYW1pY1wiO1xuICAgICAgICB0aGlzLiRwbGFuID0gXCJyZXBsYWNlXCI7XG4gICAgICAgIHRoaXMuY3Vyck5vZGUgPSBudWxsO1xuICAgICAgICB0aGlzLm5leHROb2RlID0gbnVsbDtcbiAgICAgICAgdGhpcy5jdXJyVHJhbnNpdGlvbiA9IG51bGw7XG4gICAgICAgIHRoaXMucHJldlRyYW5zaXRpb24gPSBudWxsO1xuICAgICAgICB0aGlzLmxvZ2dlciA9IHMuY29udGFpbmVyLmdldChpKS5zY29wZVRvKGBWaWV3cG9ydEFnZW50PCR7cy5mcmllbmRseVBhdGh9PmApO1xuICAgICAgICB0aGlzLmxvZ2dlci50cmFjZShgY29uc3RydWN0b3IoKWApO1xuICAgIH1cbiAgICBnZXQgJHN0YXRlKCkge1xuICAgICAgICByZXR1cm4gZnQodGhpcy5zdGF0ZSk7XG4gICAgfVxuICAgIGdldCBjdXJyU3RhdGUoKSB7XG4gICAgICAgIHJldHVybiAxNjI1NiAmIHRoaXMuc3RhdGU7XG4gICAgfVxuICAgIHNldCBjdXJyU3RhdGUodCkge1xuICAgICAgICB0aGlzLnN0YXRlID0gMTI3ICYgdGhpcy5zdGF0ZSB8IHQ7XG4gICAgfVxuICAgIGdldCBuZXh0U3RhdGUoKSB7XG4gICAgICAgIHJldHVybiAxMjcgJiB0aGlzLnN0YXRlO1xuICAgIH1cbiAgICBzZXQgbmV4dFN0YXRlKHQpIHtcbiAgICAgICAgdGhpcy5zdGF0ZSA9IDE2MjU2ICYgdGhpcy5zdGF0ZSB8IHQ7XG4gICAgfVxuICAgIHN0YXRpYyBmb3IodCwgZSkge1xuICAgICAgICBsZXQgaSA9IGh0LmdldCh0KTtcbiAgICAgICAgaWYgKHZvaWQgMCA9PT0gaSkge1xuICAgICAgICAgICAgY29uc3QgcyA9IHguZ2V0Q2FjaGVkT3JUaHJvdyh0KTtcbiAgICAgICAgICAgIGh0LnNldCh0LCBpID0gbmV3IFZpZXdwb3J0QWdlbnQodCwgcywgZSkpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBpO1xuICAgIH1cbiAgICBhY3RpdmF0ZUZyb21WaWV3cG9ydCh0LCBlLCBpKSB7XG4gICAgICAgIGNvbnN0IHMgPSB0aGlzLmN1cnJUcmFuc2l0aW9uO1xuICAgICAgICBpZiAobnVsbCAhPT0gcykgdXQocyk7XG4gICAgICAgIHRoaXMuaXNBY3RpdmUgPSB0cnVlO1xuICAgICAgICBzd2l0Y2ggKHRoaXMubmV4dFN0YXRlKSB7XG4gICAgICAgICAgY2FzZSA2NDpcbiAgICAgICAgICAgIHN3aXRjaCAodGhpcy5jdXJyU3RhdGUpIHtcbiAgICAgICAgICAgICAgY2FzZSA4MTkyOlxuICAgICAgICAgICAgICAgIHRoaXMubG9nZ2VyLnRyYWNlKGBhY3RpdmF0ZUZyb21WaWV3cG9ydCgpIC0gbm90aGluZyB0byBhY3RpdmF0ZSBhdCAlc2AsIHRoaXMpO1xuICAgICAgICAgICAgICAgIHJldHVybjtcblxuICAgICAgICAgICAgICBjYXNlIDQwOTY6XG4gICAgICAgICAgICAgICAgdGhpcy5sb2dnZXIudHJhY2UoYGFjdGl2YXRlRnJvbVZpZXdwb3J0KCkgLSBhY3RpdmF0aW5nIGV4aXN0aW5nIGNvbXBvbmVudEFnZW50IGF0ICVzYCwgdGhpcyk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuY3VyQ0EuYWN0aXZhdGUodCwgZSwgaSk7XG5cbiAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICB0aGlzLnVuZXhwZWN0ZWRTdGF0ZShcImFjdGl2YXRlRnJvbVZpZXdwb3J0IDFcIik7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgaWYgKG51bGwgPT09IHRoaXMuY3VyclRyYW5zaXRpb24pIHRocm93IG5ldyBFcnJvcihgVW5leHBlY3RlZCB2aWV3cG9ydCBhY3RpdmF0aW9uIG91dHNpZGUgb2YgYSB0cmFuc2l0aW9uIGNvbnRleHQgYXQgJHt0aGlzfWApO1xuICAgICAgICAgICAgICAgIGlmIChcInN0YXRpY1wiICE9PSB0aGlzLiRyZXNvbHV0aW9uKSB0aHJvdyBuZXcgRXJyb3IoYFVuZXhwZWN0ZWQgdmlld3BvcnQgYWN0aXZhdGlvbiBhdCAke3RoaXN9YCk7XG4gICAgICAgICAgICAgICAgdGhpcy5sb2dnZXIudHJhY2UoYGFjdGl2YXRlRnJvbVZpZXdwb3J0KCkgLSBydW5uaW5nIG9yZGluYXJ5IGFjdGl2YXRlIGF0ICVzYCwgdGhpcyk7XG4gICAgICAgICAgICAgICAgY29uc3QgZSA9IEJhdGNoLnN0YXJ0KChlID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5hY3RpdmF0ZSh0LCB0aGlzLmN1cnJUcmFuc2l0aW9uLCBlKTtcbiAgICAgICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICAgICAgY29uc3QgaSA9IG5ldyBQcm9taXNlKCh0ID0+IHtcbiAgICAgICAgICAgICAgICAgICAgZS5jb250aW51ZVdpdGgoKCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHQoKTtcbiAgICAgICAgICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gZS5zdGFydCgpLmRvbmUgPyB2b2lkIDAgOiBpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIHRoaXMudW5leHBlY3RlZFN0YXRlKFwiYWN0aXZhdGVGcm9tVmlld3BvcnQgMlwiKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBkZWFjdGl2YXRlRnJvbVZpZXdwb3J0KHQsIGUsIGkpIHtcbiAgICAgICAgY29uc3QgcyA9IHRoaXMuY3VyclRyYW5zaXRpb247XG4gICAgICAgIGlmIChudWxsICE9PSBzKSB1dChzKTtcbiAgICAgICAgdGhpcy5pc0FjdGl2ZSA9IGZhbHNlO1xuICAgICAgICBzd2l0Y2ggKHRoaXMuY3VyclN0YXRlKSB7XG4gICAgICAgICAgY2FzZSA4MTkyOlxuICAgICAgICAgICAgdGhpcy5sb2dnZXIudHJhY2UoYGRlYWN0aXZhdGVGcm9tVmlld3BvcnQoKSAtIG5vdGhpbmcgdG8gZGVhY3RpdmF0ZSBhdCAlc2AsIHRoaXMpO1xuICAgICAgICAgICAgcmV0dXJuO1xuXG4gICAgICAgICAgY2FzZSA0MDk2OlxuICAgICAgICAgICAgdGhpcy5sb2dnZXIudHJhY2UoYGRlYWN0aXZhdGVGcm9tVmlld3BvcnQoKSAtIGRlYWN0aXZhdGluZyBleGlzdGluZyBjb21wb25lbnRBZ2VudCBhdCAlc2AsIHRoaXMpO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuY3VyQ0EuZGVhY3RpdmF0ZSh0LCBlLCBpKTtcblxuICAgICAgICAgIGNhc2UgMTI4OlxuICAgICAgICAgICAgdGhpcy5sb2dnZXIudHJhY2UoYGRlYWN0aXZhdGVGcm9tVmlld3BvcnQoKSAtIGFscmVhZHkgZGVhY3RpdmF0aW5nIGF0ICVzYCwgdGhpcyk7XG4gICAgICAgICAgICByZXR1cm47XG5cbiAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGlmIChudWxsID09PSB0aGlzLmN1cnJUcmFuc2l0aW9uKSB0aHJvdyBuZXcgRXJyb3IoYFVuZXhwZWN0ZWQgdmlld3BvcnQgZGVhY3RpdmF0aW9uIG91dHNpZGUgb2YgYSB0cmFuc2l0aW9uIGNvbnRleHQgYXQgJHt0aGlzfWApO1xuICAgICAgICAgICAgICAgIHRoaXMubG9nZ2VyLnRyYWNlKGBkZWFjdGl2YXRlRnJvbVZpZXdwb3J0KCkgLSBydW5uaW5nIG9yZGluYXJ5IGRlYWN0aXZhdGUgYXQgJXNgLCB0aGlzKTtcbiAgICAgICAgICAgICAgICBjb25zdCBlID0gQmF0Y2guc3RhcnQoKGUgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmRlYWN0aXZhdGUodCwgdGhpcy5jdXJyVHJhbnNpdGlvbiwgZSk7XG4gICAgICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgICAgIGNvbnN0IGkgPSBuZXcgUHJvbWlzZSgodCA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGUuY29udGludWVXaXRoKCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0KCk7XG4gICAgICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGUuc3RhcnQoKS5kb25lID8gdm9pZCAwIDogaTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBoYW5kbGVzKHQpIHtcbiAgICAgICAgaWYgKCF0aGlzLmlzQXZhaWxhYmxlKHQucmVzb2x1dGlvbikpIHJldHVybiBmYWxzZTtcbiAgICAgICAgaWYgKHQuYXBwZW5kICYmIDQwOTYgPT09IHRoaXMuY3VyclN0YXRlKSB7XG4gICAgICAgICAgICB0aGlzLmxvZ2dlci50cmFjZShgaGFuZGxlcyhyZXE6JXMpIC0+IGZhbHNlIChhcHBlbmQgbW9kZSwgdmlld3BvcnQgYWxyZWFkeSBoYXMgY29udGVudCAlcylgLCB0LCB0aGlzLmN1ckNBKTtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodC52aWV3cG9ydE5hbWUubGVuZ3RoID4gMCAmJiB0aGlzLnZpZXdwb3J0Lm5hbWUgIT09IHQudmlld3BvcnROYW1lKSB7XG4gICAgICAgICAgICB0aGlzLmxvZ2dlci50cmFjZShgaGFuZGxlcyhyZXE6JXMpIC0+IGZhbHNlIChuYW1lcyBkb24ndCBtYXRjaClgLCB0KTtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy52aWV3cG9ydC51c2VkQnkubGVuZ3RoID4gMCAmJiAhdGhpcy52aWV3cG9ydC51c2VkQnkuc3BsaXQoXCIsXCIpLmluY2x1ZGVzKHQuY29tcG9uZW50TmFtZSkpIHtcbiAgICAgICAgICAgIHRoaXMubG9nZ2VyLnRyYWNlKGBoYW5kbGVzKHJlcTolcykgLT4gZmFsc2UgKGNvbXBvbmVudE5hbWUgbm90IGluY2x1ZGVkIGluIHVzZWRCeSlgLCB0KTtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmxvZ2dlci50cmFjZShgaGFuZGxlcyhyZXE6JXMpIC0+IHRydWVgLCB0KTtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIGlzQXZhaWxhYmxlKHQpIHtcbiAgICAgICAgaWYgKFwiZHluYW1pY1wiID09PSB0ICYmICF0aGlzLmlzQWN0aXZlKSB7XG4gICAgICAgICAgICB0aGlzLmxvZ2dlci50cmFjZShgaXNBdmFpbGFibGUocmVzb2x1dGlvbjolcykgLT4gZmFsc2UgKHZpZXdwb3J0IGlzIG5vdCBhY3RpdmUgYW5kIHdlJ3JlIGluIGR5bmFtaWMgcmVzb2x1dGlvbiByZXNvbHV0aW9uKWAsIHQpO1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIGlmICg2NCAhPT0gdGhpcy5uZXh0U3RhdGUpIHtcbiAgICAgICAgICAgIHRoaXMubG9nZ2VyLnRyYWNlKGBpc0F2YWlsYWJsZShyZXNvbHV0aW9uOiVzKSAtPiBmYWxzZSAodXBkYXRlIGFscmVhZHkgc2NoZWR1bGVkIGZvciAlcylgLCB0LCB0aGlzLm5leHROb2RlKTtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgY2FuVW5sb2FkKHQsIGUpIHtcbiAgICAgICAgaWYgKG51bGwgPT09IHRoaXMuY3VyclRyYW5zaXRpb24pIHRoaXMuY3VyclRyYW5zaXRpb24gPSB0O1xuICAgICAgICB1dCh0KTtcbiAgICAgICAgaWYgKHRydWUgIT09IHQuZ3VhcmRzUmVzdWx0KSByZXR1cm47XG4gICAgICAgIGUucHVzaCgpO1xuICAgICAgICBCYXRjaC5zdGFydCgoZSA9PiB7XG4gICAgICAgICAgICB0aGlzLmxvZ2dlci50cmFjZShgY2FuVW5sb2FkKCkgLSBpbnZva2luZyBvbiBjaGlsZHJlbiBhdCAlc2AsIHRoaXMpO1xuICAgICAgICAgICAgZm9yIChjb25zdCBpIG9mIHRoaXMuY3Vyck5vZGUuY2hpbGRyZW4pIGkuY29udGV4dC52cGEuY2FuVW5sb2FkKHQsIGUpO1xuICAgICAgICB9KSkuY29udGludWVXaXRoKChlID0+IHtcbiAgICAgICAgICAgIHN3aXRjaCAodGhpcy5jdXJyU3RhdGUpIHtcbiAgICAgICAgICAgICAgY2FzZSA0MDk2OlxuICAgICAgICAgICAgICAgIHRoaXMubG9nZ2VyLnRyYWNlKGBjYW5VbmxvYWQoKSAtIGludm9raW5nIG9uIGV4aXN0aW5nIGNvbXBvbmVudCBhdCAlc2AsIHRoaXMpO1xuICAgICAgICAgICAgICAgIHN3aXRjaCAodGhpcy4kcGxhbikge1xuICAgICAgICAgICAgICAgICAgY2FzZSBcIm5vbmVcIjpcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jdXJyU3RhdGUgPSAxMDI0O1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG5cbiAgICAgICAgICAgICAgICAgIGNhc2UgXCJpbnZva2UtbGlmZWN5Y2xlc1wiOlxuICAgICAgICAgICAgICAgICAgY2FzZSBcInJlcGxhY2VcIjpcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jdXJyU3RhdGUgPSAyMDQ4O1xuICAgICAgICAgICAgICAgICAgICBlLnB1c2goKTtcbiAgICAgICAgICAgICAgICAgICAgQmF0Y2guc3RhcnQoKGUgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5sb2dnZXIudHJhY2UoYGNhblVubG9hZCgpIC0gZmluaXNoZWQgaW52b2tpbmcgb24gY2hpbGRyZW4sIG5vdyBpbnZva2luZyBvbiBvd24gY29tcG9uZW50IGF0ICVzYCwgdGhpcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmN1ckNBLmNhblVubG9hZCh0LCB0aGlzLm5leHROb2RlLCBlKTtcbiAgICAgICAgICAgICAgICAgICAgfSkpLmNvbnRpbnVlV2l0aCgoKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5sb2dnZXIudHJhY2UoYGNhblVubG9hZCgpIC0gZmluaXNoZWQgYXQgJXNgLCB0aGlzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY3VyclN0YXRlID0gMTAyNDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGUucG9wKCk7XG4gICAgICAgICAgICAgICAgICAgIH0pKS5zdGFydCgpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgIGNhc2UgODE5MjpcbiAgICAgICAgICAgICAgICB0aGlzLmxvZ2dlci50cmFjZShgY2FuVW5sb2FkKCkgLSBub3RoaW5nIHRvIHVubG9hZCBhdCAlc2AsIHRoaXMpO1xuICAgICAgICAgICAgICAgIHJldHVybjtcblxuICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIHQuaGFuZGxlRXJyb3IobmV3IEVycm9yKGBVbmV4cGVjdGVkIHN0YXRlIGF0IGNhblVubG9hZCBvZiAke3RoaXN9YCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KSkuY29udGludWVXaXRoKCgoKSA9PiB7XG4gICAgICAgICAgICBlLnBvcCgpO1xuICAgICAgICB9KSkuc3RhcnQoKTtcbiAgICB9XG4gICAgY2FuTG9hZCh0LCBlKSB7XG4gICAgICAgIGlmIChudWxsID09PSB0aGlzLmN1cnJUcmFuc2l0aW9uKSB0aGlzLmN1cnJUcmFuc2l0aW9uID0gdDtcbiAgICAgICAgdXQodCk7XG4gICAgICAgIGlmICh0cnVlICE9PSB0Lmd1YXJkc1Jlc3VsdCkgcmV0dXJuO1xuICAgICAgICBlLnB1c2goKTtcbiAgICAgICAgQmF0Y2guc3RhcnQoKGUgPT4ge1xuICAgICAgICAgICAgc3dpdGNoICh0aGlzLm5leHRTdGF0ZSkge1xuICAgICAgICAgICAgICBjYXNlIDMyOlxuICAgICAgICAgICAgICAgIHRoaXMubG9nZ2VyLnRyYWNlKGBjYW5Mb2FkKCkgLSBpbnZva2luZyBvbiBuZXcgY29tcG9uZW50IGF0ICVzYCwgdGhpcyk7XG4gICAgICAgICAgICAgICAgdGhpcy5uZXh0U3RhdGUgPSAxNjtcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKHRoaXMuJHBsYW4pIHtcbiAgICAgICAgICAgICAgICAgIGNhc2UgXCJub25lXCI6XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcblxuICAgICAgICAgICAgICAgICAgY2FzZSBcImludm9rZS1saWZlY3ljbGVzXCI6XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmN1ckNBLmNhbkxvYWQodCwgdGhpcy5uZXh0Tm9kZSwgZSk7XG5cbiAgICAgICAgICAgICAgICAgIGNhc2UgXCJyZXBsYWNlXCI6XG4gICAgICAgICAgICAgICAgICAgIHRoaXMubmV4dENBID0gdGhpcy5uZXh0Tm9kZS5jb250ZXh0LmNyZWF0ZUNvbXBvbmVudEFnZW50KHRoaXMuaG9zdENvbnRyb2xsZXIsIHRoaXMubmV4dE5vZGUpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5uZXh0Q0EuY2FuTG9hZCh0LCB0aGlzLm5leHROb2RlLCBlKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgY2FzZSA2NDpcbiAgICAgICAgICAgICAgICB0aGlzLmxvZ2dlci50cmFjZShgY2FuTG9hZCgpIC0gbm90aGluZyB0byBsb2FkIGF0ICVzYCwgdGhpcyk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuXG4gICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgdGhpcy51bmV4cGVjdGVkU3RhdGUoXCJjYW5Mb2FkXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KSkuY29udGludWVXaXRoKCh0ID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGUgPSB0aGlzLm5leHROb2RlO1xuICAgICAgICAgICAgc3dpdGNoICh0aGlzLiRwbGFuKSB7XG4gICAgICAgICAgICAgIGNhc2UgXCJub25lXCI6XG4gICAgICAgICAgICAgIGNhc2UgXCJpbnZva2UtbGlmZWN5Y2xlc1wiOlxuICAgICAgICAgICAgICAgIHRoaXMubG9nZ2VyLnRyYWNlKGBjYW5Mb2FkKG5leHQ6JXMpIC0gcGxhbiBzZXQgdG8gJyVzJywgY29tcGlsaW5nIHJlc2lkdWVgLCBlLCB0aGlzLiRwbGFuKTtcbiAgICAgICAgICAgICAgICB0LnB1c2goKTtcbiAgICAgICAgICAgICAgICB2b2lkIG4oYnQoZSksICgoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHQucG9wKCk7XG4gICAgICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgICAgIHJldHVybjtcblxuICAgICAgICAgICAgICBjYXNlIFwicmVwbGFjZVwiOlxuICAgICAgICAgICAgICAgIHN3aXRjaCAodGhpcy4kcmVzb2x1dGlvbikge1xuICAgICAgICAgICAgICAgICAgY2FzZSBcImR5bmFtaWNcIjpcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5sb2dnZXIudHJhY2UoYGNhbkxvYWQobmV4dDolcykgLSAocmVzb2x1dGlvbjogJ2R5bmFtaWMnKSwgZGVsYXlpbmcgcmVzaWR1ZSBjb21waWxhdGlvbiB1bnRpbCBhY3RpdmF0ZWAsIGUsIHRoaXMuJHBsYW4pO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG5cbiAgICAgICAgICAgICAgICAgIGNhc2UgXCJzdGF0aWNcIjpcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5sb2dnZXIudHJhY2UoYGNhbkxvYWQobmV4dDolcykgLSAocmVzb2x1dGlvbjogJyR7dGhpcy4kcmVzb2x1dGlvbn0nKSwgY3JlYXRpbmcgbmV4dENBIGFuZCBjb21waWxpbmcgcmVzaWR1ZWAsIGUsIHRoaXMuJHBsYW4pO1xuICAgICAgICAgICAgICAgICAgICB0LnB1c2goKTtcbiAgICAgICAgICAgICAgICAgICAgdm9pZCBuKGJ0KGUpLCAoKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgdC5wb3AoKTtcbiAgICAgICAgICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9KSkuY29udGludWVXaXRoKChlID0+IHtcbiAgICAgICAgICAgIHN3aXRjaCAodGhpcy5uZXh0U3RhdGUpIHtcbiAgICAgICAgICAgICAgY2FzZSAxNjpcbiAgICAgICAgICAgICAgICB0aGlzLmxvZ2dlci50cmFjZShgY2FuTG9hZCgpIC0gZmluaXNoZWQgb3duIGNvbXBvbmVudCwgbm93IGludm9raW5nIG9uIGNoaWxkcmVuIGF0ICVzYCwgdGhpcyk7XG4gICAgICAgICAgICAgICAgdGhpcy5uZXh0U3RhdGUgPSA4O1xuICAgICAgICAgICAgICAgIGZvciAoY29uc3QgaSBvZiB0aGlzLm5leHROb2RlLmNoaWxkcmVuKSBpLmNvbnRleHQudnBhLmNhbkxvYWQodCwgZSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuXG4gICAgICAgICAgICAgIGNhc2UgNjQ6XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuXG4gICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgdGhpcy51bmV4cGVjdGVkU3RhdGUoXCJjYW5Mb2FkXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KSkuY29udGludWVXaXRoKCgoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLmxvZ2dlci50cmFjZShgY2FuTG9hZCgpIC0gZmluaXNoZWQgYXQgJXNgLCB0aGlzKTtcbiAgICAgICAgICAgIGUucG9wKCk7XG4gICAgICAgIH0pKS5zdGFydCgpO1xuICAgIH1cbiAgICB1bmxvYWQodCwgZSkge1xuICAgICAgICB1dCh0KTtcbiAgICAgICAgY3QodGhpcywgdCk7XG4gICAgICAgIGUucHVzaCgpO1xuICAgICAgICBCYXRjaC5zdGFydCgoZSA9PiB7XG4gICAgICAgICAgICB0aGlzLmxvZ2dlci50cmFjZShgdW5sb2FkKCkgLSBpbnZva2luZyBvbiBjaGlsZHJlbiBhdCAlc2AsIHRoaXMpO1xuICAgICAgICAgICAgZm9yIChjb25zdCBpIG9mIHRoaXMuY3Vyck5vZGUuY2hpbGRyZW4pIGkuY29udGV4dC52cGEudW5sb2FkKHQsIGUpO1xuICAgICAgICB9KSkuY29udGludWVXaXRoKChpID0+IHtcbiAgICAgICAgICAgIHN3aXRjaCAodGhpcy5jdXJyU3RhdGUpIHtcbiAgICAgICAgICAgICAgY2FzZSAxMDI0OlxuICAgICAgICAgICAgICAgIHRoaXMubG9nZ2VyLnRyYWNlKGB1bmxvYWQoKSAtIGludm9raW5nIG9uIGV4aXN0aW5nIGNvbXBvbmVudCBhdCAlc2AsIHRoaXMpO1xuICAgICAgICAgICAgICAgIHN3aXRjaCAodGhpcy4kcGxhbikge1xuICAgICAgICAgICAgICAgICAgY2FzZSBcIm5vbmVcIjpcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jdXJyU3RhdGUgPSAyNTY7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcblxuICAgICAgICAgICAgICAgICAgY2FzZSBcImludm9rZS1saWZlY3ljbGVzXCI6XG4gICAgICAgICAgICAgICAgICBjYXNlIFwicmVwbGFjZVwiOlxuICAgICAgICAgICAgICAgICAgICB0aGlzLmN1cnJTdGF0ZSA9IDUxMjtcbiAgICAgICAgICAgICAgICAgICAgaS5wdXNoKCk7XG4gICAgICAgICAgICAgICAgICAgIEJhdGNoLnN0YXJ0KChlID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubG9nZ2VyLnRyYWNlKGB1bmxvYWQoKSAtIGZpbmlzaGVkIGludm9raW5nIG9uIGNoaWxkcmVuLCBub3cgaW52b2tpbmcgb24gb3duIGNvbXBvbmVudCBhdCAlc2AsIHRoaXMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jdXJDQS51bmxvYWQodCwgdGhpcy5uZXh0Tm9kZSwgZSk7XG4gICAgICAgICAgICAgICAgICAgIH0pKS5jb250aW51ZVdpdGgoKCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubG9nZ2VyLnRyYWNlKGB1bmxvYWQoKSAtIGZpbmlzaGVkIGF0ICVzYCwgdGhpcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmN1cnJTdGF0ZSA9IDI1NjtcbiAgICAgICAgICAgICAgICAgICAgICAgIGkucG9wKCk7XG4gICAgICAgICAgICAgICAgICAgIH0pKS5zdGFydCgpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgIGNhc2UgODE5MjpcbiAgICAgICAgICAgICAgICB0aGlzLmxvZ2dlci50cmFjZShgdW5sb2FkKCkgLSBub3RoaW5nIHRvIHVubG9hZCBhdCAlc2AsIHRoaXMpO1xuICAgICAgICAgICAgICAgIGZvciAoY29uc3QgaSBvZiB0aGlzLmN1cnJOb2RlLmNoaWxkcmVuKSBpLmNvbnRleHQudnBhLnVubG9hZCh0LCBlKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG5cbiAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICB0aGlzLnVuZXhwZWN0ZWRTdGF0ZShcInVubG9hZFwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSkpLmNvbnRpbnVlV2l0aCgoKCkgPT4ge1xuICAgICAgICAgICAgZS5wb3AoKTtcbiAgICAgICAgfSkpLnN0YXJ0KCk7XG4gICAgfVxuICAgIGxvYWQodCwgZSkge1xuICAgICAgICB1dCh0KTtcbiAgICAgICAgY3QodGhpcywgdCk7XG4gICAgICAgIGUucHVzaCgpO1xuICAgICAgICBCYXRjaC5zdGFydCgoZSA9PiB7XG4gICAgICAgICAgICBzd2l0Y2ggKHRoaXMubmV4dFN0YXRlKSB7XG4gICAgICAgICAgICAgIGNhc2UgODpcbiAgICAgICAgICAgICAgICB0aGlzLmxvZ2dlci50cmFjZShgbG9hZCgpIC0gaW52b2tpbmcgb24gbmV3IGNvbXBvbmVudCBhdCAlc2AsIHRoaXMpO1xuICAgICAgICAgICAgICAgIHRoaXMubmV4dFN0YXRlID0gNDtcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKHRoaXMuJHBsYW4pIHtcbiAgICAgICAgICAgICAgICAgIGNhc2UgXCJub25lXCI6XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcblxuICAgICAgICAgICAgICAgICAgY2FzZSBcImludm9rZS1saWZlY3ljbGVzXCI6XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmN1ckNBLmxvYWQodCwgdGhpcy5uZXh0Tm9kZSwgZSk7XG5cbiAgICAgICAgICAgICAgICAgIGNhc2UgXCJyZXBsYWNlXCI6XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLm5leHRDQS5sb2FkKHQsIHRoaXMubmV4dE5vZGUsIGUpO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICBjYXNlIDY0OlxuICAgICAgICAgICAgICAgIHRoaXMubG9nZ2VyLnRyYWNlKGBsb2FkKCkgLSBub3RoaW5nIHRvIGxvYWQgYXQgJXNgLCB0aGlzKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG5cbiAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICB0aGlzLnVuZXhwZWN0ZWRTdGF0ZShcImxvYWRcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pKS5jb250aW51ZVdpdGgoKGUgPT4ge1xuICAgICAgICAgICAgc3dpdGNoICh0aGlzLm5leHRTdGF0ZSkge1xuICAgICAgICAgICAgICBjYXNlIDQ6XG4gICAgICAgICAgICAgICAgdGhpcy5sb2dnZXIudHJhY2UoYGxvYWQoKSAtIGZpbmlzaGVkIG93biBjb21wb25lbnQsIG5vdyBpbnZva2luZyBvbiBjaGlsZHJlbiBhdCAlc2AsIHRoaXMpO1xuICAgICAgICAgICAgICAgIHRoaXMubmV4dFN0YXRlID0gMjtcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGkgb2YgdGhpcy5uZXh0Tm9kZS5jaGlsZHJlbikgaS5jb250ZXh0LnZwYS5sb2FkKHQsIGUpO1xuICAgICAgICAgICAgICAgIHJldHVybjtcblxuICAgICAgICAgICAgICBjYXNlIDY0OlxuICAgICAgICAgICAgICAgIHJldHVybjtcblxuICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIHRoaXMudW5leHBlY3RlZFN0YXRlKFwibG9hZFwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSkpLmNvbnRpbnVlV2l0aCgoKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5sb2dnZXIudHJhY2UoYGxvYWQoKSAtIGZpbmlzaGVkIGF0ICVzYCwgdGhpcyk7XG4gICAgICAgICAgICBlLnBvcCgpO1xuICAgICAgICB9KSkuc3RhcnQoKTtcbiAgICB9XG4gICAgZGVhY3RpdmF0ZSh0LCBlLCBpKSB7XG4gICAgICAgIHV0KGUpO1xuICAgICAgICBjdCh0aGlzLCBlKTtcbiAgICAgICAgaS5wdXNoKCk7XG4gICAgICAgIHN3aXRjaCAodGhpcy5jdXJyU3RhdGUpIHtcbiAgICAgICAgICBjYXNlIDI1NjpcbiAgICAgICAgICAgIHRoaXMubG9nZ2VyLnRyYWNlKGBkZWFjdGl2YXRlKCkgLSBpbnZva2luZyBvbiBleGlzdGluZyBjb21wb25lbnQgYXQgJXNgLCB0aGlzKTtcbiAgICAgICAgICAgIHRoaXMuY3VyclN0YXRlID0gMTI4O1xuICAgICAgICAgICAgc3dpdGNoICh0aGlzLiRwbGFuKSB7XG4gICAgICAgICAgICAgIGNhc2UgXCJub25lXCI6XG4gICAgICAgICAgICAgIGNhc2UgXCJpbnZva2UtbGlmZWN5Y2xlc1wiOlxuICAgICAgICAgICAgICAgIGkucG9wKCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuXG4gICAgICAgICAgICAgIGNhc2UgXCJyZXBsYWNlXCI6XG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBzID0gdGhpcy5ob3N0Q29udHJvbGxlcjtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbiA9IHRoaXMudmlld3BvcnQuc3RhdGVmdWwgPyAwIDogMzI7XG4gICAgICAgICAgICAgICAgICAgIGUucnVuKCgoKSA9PiB0aGlzLmN1ckNBLmRlYWN0aXZhdGUodCwgcywgbikpLCAoKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgaS5wb3AoKTtcbiAgICAgICAgICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybjtcblxuICAgICAgICAgIGNhc2UgODE5MjpcbiAgICAgICAgICAgIHRoaXMubG9nZ2VyLnRyYWNlKGBkZWFjdGl2YXRlKCkgLSBub3RoaW5nIHRvIGRlYWN0aXZhdGUgYXQgJXNgLCB0aGlzKTtcbiAgICAgICAgICAgIGkucG9wKCk7XG4gICAgICAgICAgICByZXR1cm47XG5cbiAgICAgICAgICBjYXNlIDEyODpcbiAgICAgICAgICAgIHRoaXMubG9nZ2VyLnRyYWNlKGBkZWFjdGl2YXRlKCkgLSBhbHJlYWR5IGRlYWN0aXZhdGluZyBhdCAlc2AsIHRoaXMpO1xuICAgICAgICAgICAgaS5wb3AoKTtcbiAgICAgICAgICAgIHJldHVybjtcblxuICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICB0aGlzLnVuZXhwZWN0ZWRTdGF0ZShcImRlYWN0aXZhdGVcIik7XG4gICAgICAgIH1cbiAgICB9XG4gICAgYWN0aXZhdGUodCwgZSwgaSkge1xuICAgICAgICB1dChlKTtcbiAgICAgICAgY3QodGhpcywgZSk7XG4gICAgICAgIGkucHVzaCgpO1xuICAgICAgICBpZiAoMzIgPT09IHRoaXMubmV4dFN0YXRlICYmIFwiZHluYW1pY1wiID09PSB0aGlzLiRyZXNvbHV0aW9uKSB7XG4gICAgICAgICAgICB0aGlzLmxvZ2dlci50cmFjZShgYWN0aXZhdGUoKSAtIGludm9raW5nIGNhbkxvYWQoKSwgbG9hZCgpIGFuZCBhY3RpdmF0ZSgpIG9uIG5ldyBjb21wb25lbnQgZHVlIHRvIHJlc29sdXRpb24gJ2R5bmFtaWMnIGF0ICVzYCwgdGhpcyk7XG4gICAgICAgICAgICBCYXRjaC5zdGFydCgodCA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5jYW5Mb2FkKGUsIHQpO1xuICAgICAgICAgICAgfSkpLmNvbnRpbnVlV2l0aCgodCA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5sb2FkKGUsIHQpO1xuICAgICAgICAgICAgfSkpLmNvbnRpbnVlV2l0aCgoaSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5hY3RpdmF0ZSh0LCBlLCBpKTtcbiAgICAgICAgICAgIH0pKS5jb250aW51ZVdpdGgoKCgpID0+IHtcbiAgICAgICAgICAgICAgICBpLnBvcCgpO1xuICAgICAgICAgICAgfSkpLnN0YXJ0KCk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgc3dpdGNoICh0aGlzLm5leHRTdGF0ZSkge1xuICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgIHRoaXMubG9nZ2VyLnRyYWNlKGBhY3RpdmF0ZSgpIC0gaW52b2tpbmcgb24gZXhpc3RpbmcgY29tcG9uZW50IGF0ICVzYCwgdGhpcyk7XG4gICAgICAgICAgICB0aGlzLm5leHRTdGF0ZSA9IDE7XG4gICAgICAgICAgICBCYXRjaC5zdGFydCgoaSA9PiB7XG4gICAgICAgICAgICAgICAgc3dpdGNoICh0aGlzLiRwbGFuKSB7XG4gICAgICAgICAgICAgICAgICBjYXNlIFwibm9uZVwiOlxuICAgICAgICAgICAgICAgICAgY2FzZSBcImludm9rZS1saWZlY3ljbGVzXCI6XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcblxuICAgICAgICAgICAgICAgICAgY2FzZSBcInJlcGxhY2VcIjpcbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcyA9IHRoaXMuaG9zdENvbnRyb2xsZXI7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBuID0gMDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGUucnVuKCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaS5wdXNoKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMubmV4dENBLmFjdGl2YXRlKHQsIHMsIG4pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSksICgoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaS5wb3AoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pKS5jb250aW51ZVdpdGgoKHQgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMucHJvY2Vzc0R5bmFtaWNDaGlsZHJlbihlLCB0KTtcbiAgICAgICAgICAgIH0pKS5jb250aW51ZVdpdGgoKCgpID0+IHtcbiAgICAgICAgICAgICAgICBpLnBvcCgpO1xuICAgICAgICAgICAgfSkpLnN0YXJ0KCk7XG4gICAgICAgICAgICByZXR1cm47XG5cbiAgICAgICAgICBjYXNlIDY0OlxuICAgICAgICAgICAgdGhpcy5sb2dnZXIudHJhY2UoYGFjdGl2YXRlKCkgLSBub3RoaW5nIHRvIGFjdGl2YXRlIGF0ICVzYCwgdGhpcyk7XG4gICAgICAgICAgICBpLnBvcCgpO1xuICAgICAgICAgICAgcmV0dXJuO1xuXG4gICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIHRoaXMudW5leHBlY3RlZFN0YXRlKFwiYWN0aXZhdGVcIik7XG4gICAgICAgIH1cbiAgICB9XG4gICAgc3dhcCh0LCBlKSB7XG4gICAgICAgIGlmICg4MTkyID09PSB0aGlzLmN1cnJTdGF0ZSkge1xuICAgICAgICAgICAgdGhpcy5sb2dnZXIudHJhY2UoYHN3YXAoKSAtIHJ1bm5pbmcgYWN0aXZhdGUgb24gbmV4dCBpbnN0ZWFkLCBiZWNhdXNlIHRoZXJlIGlzIG5vdGhpbmcgdG8gZGVhY3RpdmF0ZSBhdCAlc2AsIHRoaXMpO1xuICAgICAgICAgICAgdGhpcy5hY3RpdmF0ZShudWxsLCB0LCBlKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAoNjQgPT09IHRoaXMubmV4dFN0YXRlKSB7XG4gICAgICAgICAgICB0aGlzLmxvZ2dlci50cmFjZShgc3dhcCgpIC0gcnVubmluZyBkZWFjdGl2YXRlIG9uIGN1cnJlbnQgaW5zdGVhZCwgYmVjYXVzZSB0aGVyZSBpcyBub3RoaW5nIHRvIGFjdGl2YXRlIGF0ICVzYCwgdGhpcyk7XG4gICAgICAgICAgICB0aGlzLmRlYWN0aXZhdGUobnVsbCwgdCwgZSk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdXQodCk7XG4gICAgICAgIGN0KHRoaXMsIHQpO1xuICAgICAgICBpZiAoISgyNTYgPT09IHRoaXMuY3VyclN0YXRlICYmIDIgPT09IHRoaXMubmV4dFN0YXRlKSkgdGhpcy51bmV4cGVjdGVkU3RhdGUoXCJzd2FwXCIpO1xuICAgICAgICB0aGlzLmN1cnJTdGF0ZSA9IDEyODtcbiAgICAgICAgdGhpcy5uZXh0U3RhdGUgPSAxO1xuICAgICAgICBzd2l0Y2ggKHRoaXMuJHBsYW4pIHtcbiAgICAgICAgICBjYXNlIFwibm9uZVwiOlxuICAgICAgICAgIGNhc2UgXCJpbnZva2UtbGlmZWN5Y2xlc1wiOlxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHRoaXMubG9nZ2VyLnRyYWNlKGBzd2FwKCkgLSBza2lwcGluZyB0aGlzIGxldmVsIGFuZCBzd2FwcGluZyBjaGlsZHJlbiBpbnN0ZWFkIGF0ICVzYCwgdGhpcyk7XG4gICAgICAgICAgICAgICAgY29uc3QgaSA9IEIodGhpcy5uZXh0Tm9kZS5jaGlsZHJlbiwgdGhpcy5jdXJyTm9kZS5jaGlsZHJlbik7XG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCBzIG9mIGkpIHMuY29udGV4dC52cGEuc3dhcCh0LCBlKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICBjYXNlIFwicmVwbGFjZVwiOlxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHRoaXMubG9nZ2VyLnRyYWNlKGBzd2FwKCkgLSBydW5uaW5nIG5vcm1hbGx5IGF0ICVzYCwgdGhpcyk7XG4gICAgICAgICAgICAgICAgY29uc3QgaSA9IHRoaXMuaG9zdENvbnRyb2xsZXI7XG4gICAgICAgICAgICAgICAgY29uc3QgcyA9IHRoaXMuY3VyQ0E7XG4gICAgICAgICAgICAgICAgY29uc3QgbiA9IHRoaXMubmV4dENBO1xuICAgICAgICAgICAgICAgIGNvbnN0IG8gPSB0aGlzLnZpZXdwb3J0LnN0YXRlZnVsID8gMCA6IDMyO1xuICAgICAgICAgICAgICAgIGNvbnN0IHIgPSAwO1xuICAgICAgICAgICAgICAgIGUucHVzaCgpO1xuICAgICAgICAgICAgICAgIHN3aXRjaCAodC5vcHRpb25zLnN3YXBTdHJhdGVneSkge1xuICAgICAgICAgICAgICAgICAgY2FzZSBcInNlcXVlbnRpYWwtYWRkLWZpcnN0XCI6XG4gICAgICAgICAgICAgICAgICAgIEJhdGNoLnN0YXJ0KChlID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHQucnVuKCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZS5wdXNoKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG4uYWN0aXZhdGUobnVsbCwgaSwgcik7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KSwgKCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLnBvcCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgICAgICAgICB9KSkuY29udGludWVXaXRoKChlID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucHJvY2Vzc0R5bmFtaWNDaGlsZHJlbih0LCBlKTtcbiAgICAgICAgICAgICAgICAgICAgfSkpLmNvbnRpbnVlV2l0aCgoKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgdC5ydW4oKCgpID0+IHMuZGVhY3RpdmF0ZShudWxsLCBpLCBvKSksICgoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZS5wb3AoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgICAgICAgICAgfSkpLnN0YXJ0KCk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcblxuICAgICAgICAgICAgICAgICAgY2FzZSBcInNlcXVlbnRpYWwtcmVtb3ZlLWZpcnN0XCI6XG4gICAgICAgICAgICAgICAgICAgIEJhdGNoLnN0YXJ0KChlID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHQucnVuKCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZS5wdXNoKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHMuZGVhY3RpdmF0ZShudWxsLCBpLCBvKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pLCAoKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUucG9wKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICAgICAgICAgIH0pKS5jb250aW51ZVdpdGgoKGUgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgdC5ydW4oKCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLnB1c2goKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbi5hY3RpdmF0ZShudWxsLCBpLCByKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pLCAoKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUucG9wKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICAgICAgICAgIH0pKS5jb250aW51ZVdpdGgoKGUgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wcm9jZXNzRHluYW1pY0NoaWxkcmVuKHQsIGUpO1xuICAgICAgICAgICAgICAgICAgICB9KSkuY29udGludWVXaXRoKCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBlLnBvcCgpO1xuICAgICAgICAgICAgICAgICAgICB9KSkuc3RhcnQoKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuXG4gICAgICAgICAgICAgICAgICBjYXNlIFwicGFyYWxsZWwtcmVtb3ZlLWZpcnN0XCI6XG4gICAgICAgICAgICAgICAgICAgIHQucnVuKCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBlLnB1c2goKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBzLmRlYWN0aXZhdGUobnVsbCwgaSwgbyk7XG4gICAgICAgICAgICAgICAgICAgIH0pLCAoKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgZS5wb3AoKTtcbiAgICAgICAgICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgICAgICAgICBCYXRjaC5zdGFydCgoZSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0LnJ1bigoKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUucHVzaCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBuLmFjdGl2YXRlKG51bGwsIGksIHIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSksICgoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZS5wb3AoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgICAgICAgICAgfSkpLmNvbnRpbnVlV2l0aCgoZSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnByb2Nlc3NEeW5hbWljQ2hpbGRyZW4odCwgZSk7XG4gICAgICAgICAgICAgICAgICAgIH0pKS5jb250aW51ZVdpdGgoKCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGUucG9wKCk7XG4gICAgICAgICAgICAgICAgICAgIH0pKS5zdGFydCgpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIHByb2Nlc3NEeW5hbWljQ2hpbGRyZW4odCwgZSkge1xuICAgICAgICB0aGlzLmxvZ2dlci50cmFjZShgcHJvY2Vzc0R5bmFtaWNDaGlsZHJlbigpIC0gJXNgLCB0aGlzKTtcbiAgICAgICAgY29uc3QgaSA9IHRoaXMubmV4dE5vZGU7XG4gICAgICAgIHQucnVuKCgoKSA9PiB7XG4gICAgICAgICAgICBlLnB1c2goKTtcbiAgICAgICAgICAgIHJldHVybiBTdChpKTtcbiAgICAgICAgfSksIChpID0+IHtcbiAgICAgICAgICAgIEJhdGNoLnN0YXJ0KChlID0+IHtcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IHMgb2YgaSkgdC5ydW4oKCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgZS5wdXNoKCk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBzLmNvbnRleHQudnBhLmNhbkxvYWQodCwgZSk7XG4gICAgICAgICAgICAgICAgfSksICgoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGUucG9wKCk7XG4gICAgICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgfSkpLmNvbnRpbnVlV2l0aCgoZSA9PiB7XG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCBzIG9mIGkpIHQucnVuKCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGUucHVzaCgpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcy5jb250ZXh0LnZwYS5sb2FkKHQsIGUpO1xuICAgICAgICAgICAgICAgIH0pLCAoKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBlLnBvcCgpO1xuICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgIH0pKS5jb250aW51ZVdpdGgoKGUgPT4ge1xuICAgICAgICAgICAgICAgIGZvciAoY29uc3QgcyBvZiBpKSB0LnJ1bigoKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBlLnB1c2goKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHMuY29udGV4dC52cGEuYWN0aXZhdGUobnVsbCwgdCwgZSk7XG4gICAgICAgICAgICAgICAgfSksICgoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGUucG9wKCk7XG4gICAgICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgfSkpLmNvbnRpbnVlV2l0aCgoKCkgPT4ge1xuICAgICAgICAgICAgICAgIGUucG9wKCk7XG4gICAgICAgICAgICB9KSkuc3RhcnQoKTtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICBzY2hlZHVsZVVwZGF0ZSh0LCBlKSB7XG4gICAgICAgIHZhciBpLCBzO1xuICAgICAgICBzd2l0Y2ggKHRoaXMubmV4dFN0YXRlKSB7XG4gICAgICAgICAgY2FzZSA2NDpcbiAgICAgICAgICAgIHRoaXMubmV4dE5vZGUgPSBlO1xuICAgICAgICAgICAgdGhpcy5uZXh0U3RhdGUgPSAzMjtcbiAgICAgICAgICAgIHRoaXMuJHJlc29sdXRpb24gPSB0LnJlc29sdXRpb25Nb2RlO1xuICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgdGhpcy51bmV4cGVjdGVkU3RhdGUoXCJzY2hlZHVsZVVwZGF0ZSAxXCIpO1xuICAgICAgICB9XG4gICAgICAgIHN3aXRjaCAodGhpcy5jdXJyU3RhdGUpIHtcbiAgICAgICAgICBjYXNlIDgxOTI6XG4gICAgICAgICAgY2FzZSA0MDk2OlxuICAgICAgICAgIGNhc2UgMTAyNDpcbiAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIHRoaXMudW5leHBlY3RlZFN0YXRlKFwic2NoZWR1bGVVcGRhdGUgMlwiKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBuID0gbnVsbCAhPT0gKHMgPSBudWxsID09PSAoaSA9IHRoaXMuY3VyQ0EpIHx8IHZvaWQgMCA9PT0gaSA/IHZvaWQgMCA6IGkucm91dGVOb2RlKSAmJiB2b2lkIDAgIT09IHMgPyBzIDogbnVsbDtcbiAgICAgICAgaWYgKG51bGwgPT09IG4gfHwgbi5jb21wb25lbnQgIT09IGUuY29tcG9uZW50KSB0aGlzLiRwbGFuID0gXCJyZXBsYWNlXCI7IGVsc2Uge1xuICAgICAgICAgICAgY29uc3QgdCA9IGUuY29udGV4dC5kZWZpbml0aW9uLmNvbmZpZy50cmFuc2l0aW9uUGxhbjtcbiAgICAgICAgICAgIGlmIChcImZ1bmN0aW9uXCIgPT09IHR5cGVvZiB0KSB0aGlzLiRwbGFuID0gdChuLCBlKTsgZWxzZSB0aGlzLiRwbGFuID0gdDtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmxvZ2dlci50cmFjZShgc2NoZWR1bGVVcGRhdGUobmV4dDolcykgLSBwbGFuIHNldCB0byAnJXMnYCwgZSwgdGhpcy4kcGxhbik7XG4gICAgfVxuICAgIGNhbmNlbFVwZGF0ZSgpIHtcbiAgICAgICAgaWYgKG51bGwgIT09IHRoaXMuY3Vyck5vZGUpIHRoaXMuY3Vyck5vZGUuY2hpbGRyZW4uZm9yRWFjaCgoZnVuY3Rpb24odCkge1xuICAgICAgICAgICAgdC5jb250ZXh0LnZwYS5jYW5jZWxVcGRhdGUoKTtcbiAgICAgICAgfSkpO1xuICAgICAgICBpZiAobnVsbCAhPT0gdGhpcy5uZXh0Tm9kZSkgdGhpcy5uZXh0Tm9kZS5jaGlsZHJlbi5mb3JFYWNoKChmdW5jdGlvbih0KSB7XG4gICAgICAgICAgICB0LmNvbnRleHQudnBhLmNhbmNlbFVwZGF0ZSgpO1xuICAgICAgICB9KSk7XG4gICAgICAgIHRoaXMubG9nZ2VyLnRyYWNlKGBjYW5jZWxVcGRhdGUobmV4dE5vZGU6JXMpYCwgdGhpcy5uZXh0Tm9kZSk7XG4gICAgICAgIHN3aXRjaCAodGhpcy5jdXJyU3RhdGUpIHtcbiAgICAgICAgICBjYXNlIDgxOTI6XG4gICAgICAgICAgY2FzZSA0MDk2OlxuICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICBjYXNlIDIwNDg6XG4gICAgICAgICAgY2FzZSAxMDI0OlxuICAgICAgICAgICAgdGhpcy5jdXJyU3RhdGUgPSA0MDk2O1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgc3dpdGNoICh0aGlzLm5leHRTdGF0ZSkge1xuICAgICAgICAgIGNhc2UgNjQ6XG4gICAgICAgICAgY2FzZSAzMjpcbiAgICAgICAgICBjYXNlIDE2OlxuICAgICAgICAgIGNhc2UgODpcbiAgICAgICAgICAgIHRoaXMubmV4dE5vZGUgPSBudWxsO1xuICAgICAgICAgICAgdGhpcy5uZXh0U3RhdGUgPSA2NDtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgfVxuICAgIGVuZFRyYW5zaXRpb24oKSB7XG4gICAgICAgIGlmIChudWxsICE9PSB0aGlzLmN1cnJOb2RlKSB0aGlzLmN1cnJOb2RlLmNoaWxkcmVuLmZvckVhY2goKGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgICAgIHQuY29udGV4dC52cGEuZW5kVHJhbnNpdGlvbigpO1xuICAgICAgICB9KSk7XG4gICAgICAgIGlmIChudWxsICE9PSB0aGlzLm5leHROb2RlKSB0aGlzLm5leHROb2RlLmNoaWxkcmVuLmZvckVhY2goKGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgICAgIHQuY29udGV4dC52cGEuZW5kVHJhbnNpdGlvbigpO1xuICAgICAgICB9KSk7XG4gICAgICAgIGlmIChudWxsICE9PSB0aGlzLmN1cnJUcmFuc2l0aW9uKSB7XG4gICAgICAgICAgICB1dCh0aGlzLmN1cnJUcmFuc2l0aW9uKTtcbiAgICAgICAgICAgIHN3aXRjaCAodGhpcy5uZXh0U3RhdGUpIHtcbiAgICAgICAgICAgICAgY2FzZSA2NDpcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKHRoaXMuY3VyclN0YXRlKSB7XG4gICAgICAgICAgICAgICAgICBjYXNlIDEyODpcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5sb2dnZXIudHJhY2UoYGVuZFRyYW5zaXRpb24oKSAtIHNldHRpbmcgY3VyclN0YXRlIHRvIFN0YXRlLm5leHRJc0VtcHR5IGF0ICVzYCwgdGhpcyk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY3VyclN0YXRlID0gODE5MjtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jdXJDQSA9IG51bGw7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICB0aGlzLnVuZXhwZWN0ZWRTdGF0ZShcImVuZFRyYW5zaXRpb24gMVwiKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgIHN3aXRjaCAodGhpcy5jdXJyU3RhdGUpIHtcbiAgICAgICAgICAgICAgICAgIGNhc2UgODE5MjpcbiAgICAgICAgICAgICAgICAgIGNhc2UgMTI4OlxuICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKHRoaXMuJHBsYW4pIHtcbiAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwibm9uZVwiOlxuICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCJpbnZva2UtbGlmZWN5Y2xlc1wiOlxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5sb2dnZXIudHJhY2UoYGVuZFRyYW5zaXRpb24oKSAtIHNldHRpbmcgY3VyclN0YXRlIHRvIFN0YXRlLmN1cnJJc0FjdGl2ZSBhdCAlc2AsIHRoaXMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jdXJyU3RhdGUgPSA0MDk2O1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwicmVwbGFjZVwiOlxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5sb2dnZXIudHJhY2UoYGVuZFRyYW5zaXRpb24oKSAtIHNldHRpbmcgY3VyclN0YXRlIHRvIFN0YXRlLmN1cnJJc0FjdGl2ZSBhbmQgcmVhc3NpZ25pbmcgY3VyQ0EgYXQgJXNgLCB0aGlzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY3VyclN0YXRlID0gNDA5NjtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY3VyQ0EgPSB0aGlzLm5leHRDQTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY3Vyck5vZGUgPSB0aGlzLm5leHROb2RlO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgdGhpcy51bmV4cGVjdGVkU3RhdGUoXCJlbmRUcmFuc2l0aW9uIDJcIik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgdGhpcy51bmV4cGVjdGVkU3RhdGUoXCJlbmRUcmFuc2l0aW9uIDNcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLiRwbGFuID0gXCJyZXBsYWNlXCI7XG4gICAgICAgICAgICB0aGlzLm5leHRTdGF0ZSA9IDY0O1xuICAgICAgICAgICAgdGhpcy5uZXh0Tm9kZSA9IG51bGw7XG4gICAgICAgICAgICB0aGlzLm5leHRDQSA9IG51bGw7XG4gICAgICAgICAgICB0aGlzLnByZXZUcmFuc2l0aW9uID0gdGhpcy5jdXJyVHJhbnNpdGlvbjtcbiAgICAgICAgICAgIHRoaXMuY3VyclRyYW5zaXRpb24gPSBudWxsO1xuICAgICAgICB9XG4gICAgfVxuICAgIHRvU3RyaW5nKCkge1xuICAgICAgICByZXR1cm4gYFZQQShzdGF0ZToke3RoaXMuJHN0YXRlfSxwbGFuOicke3RoaXMuJHBsYW59JyxyZXNvbHV0aW9uOicke3RoaXMuJHJlc29sdXRpb259JyxuOiR7dGhpcy5uZXh0Tm9kZX0sYzoke3RoaXMuY3Vyck5vZGV9LHZpZXdwb3J0OiR7dGhpcy52aWV3cG9ydH0pYDtcbiAgICB9XG4gICAgZGlzcG9zZSgpIHtcbiAgICAgICAgdmFyIHQ7XG4gICAgICAgIGlmICh0aGlzLnZpZXdwb3J0LnN0YXRlZnVsKSB0aGlzLmxvZ2dlci50cmFjZShgZGlzcG9zZSgpIC0gbm90IGRpc3Bvc2luZyBzdGF0ZWZ1bCB2aWV3cG9ydCBhdCAlc2AsIHRoaXMpOyBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMubG9nZ2VyLnRyYWNlKGBkaXNwb3NlKCkgLSBkaXNwb3NpbmcgJXNgLCB0aGlzKTtcbiAgICAgICAgICAgIG51bGwgPT09ICh0ID0gdGhpcy5jdXJDQSkgfHwgdm9pZCAwID09PSB0ID8gdm9pZCAwIDogdC5kaXNwb3NlKCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgdW5leHBlY3RlZFN0YXRlKHQpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBVbmV4cGVjdGVkIHN0YXRlIGF0ICR7dH0gb2YgJHt0aGlzfWApO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gY3QodCwgZSkge1xuICAgIGlmICh0cnVlICE9PSBlLmd1YXJkc1Jlc3VsdCkgdGhyb3cgbmV3IEVycm9yKGBVbmV4cGVjdGVkIGd1YXJkc1Jlc3VsdCAke2UuZ3VhcmRzUmVzdWx0fSBhdCAke3R9YCk7XG59XG5cbmZ1bmN0aW9uIHV0KHQpIHtcbiAgICBpZiAodm9pZCAwICE9PSB0LmVycm9yKSB0aHJvdyB0LmVycm9yO1xufVxuXG52YXIgbHQ7XG5cbihmdW5jdGlvbih0KSB7XG4gICAgdFt0W1wiY3VyclwiXSA9IDE2MjU2XSA9IFwiY3VyclwiO1xuICAgIHRbdFtcImN1cnJJc0VtcHR5XCJdID0gODE5Ml0gPSBcImN1cnJJc0VtcHR5XCI7XG4gICAgdFt0W1wiY3VycklzQWN0aXZlXCJdID0gNDA5Nl0gPSBcImN1cnJJc0FjdGl2ZVwiO1xuICAgIHRbdFtcImN1cnJDYW5VbmxvYWRcIl0gPSAyMDQ4XSA9IFwiY3VyckNhblVubG9hZFwiO1xuICAgIHRbdFtcImN1cnJDYW5VbmxvYWREb25lXCJdID0gMTAyNF0gPSBcImN1cnJDYW5VbmxvYWREb25lXCI7XG4gICAgdFt0W1wiY3VyclVubG9hZFwiXSA9IDUxMl0gPSBcImN1cnJVbmxvYWRcIjtcbiAgICB0W3RbXCJjdXJyVW5sb2FkRG9uZVwiXSA9IDI1Nl0gPSBcImN1cnJVbmxvYWREb25lXCI7XG4gICAgdFt0W1wiY3VyckRlYWN0aXZhdGVcIl0gPSAxMjhdID0gXCJjdXJyRGVhY3RpdmF0ZVwiO1xuICAgIHRbdFtcIm5leHRcIl0gPSAxMjddID0gXCJuZXh0XCI7XG4gICAgdFt0W1wibmV4dElzRW1wdHlcIl0gPSA2NF0gPSBcIm5leHRJc0VtcHR5XCI7XG4gICAgdFt0W1wibmV4dElzU2NoZWR1bGVkXCJdID0gMzJdID0gXCJuZXh0SXNTY2hlZHVsZWRcIjtcbiAgICB0W3RbXCJuZXh0Q2FuTG9hZFwiXSA9IDE2XSA9IFwibmV4dENhbkxvYWRcIjtcbiAgICB0W3RbXCJuZXh0Q2FuTG9hZERvbmVcIl0gPSA4XSA9IFwibmV4dENhbkxvYWREb25lXCI7XG4gICAgdFt0W1wibmV4dExvYWRcIl0gPSA0XSA9IFwibmV4dExvYWRcIjtcbiAgICB0W3RbXCJuZXh0TG9hZERvbmVcIl0gPSAyXSA9IFwibmV4dExvYWREb25lXCI7XG4gICAgdFt0W1wibmV4dEFjdGl2YXRlXCJdID0gMV0gPSBcIm5leHRBY3RpdmF0ZVwiO1xuICAgIHRbdFtcImJvdGhBcmVFbXB0eVwiXSA9IDgyNTZdID0gXCJib3RoQXJlRW1wdHlcIjtcbn0pKGx0IHx8IChsdCA9IHt9KSk7XG5cbmNvbnN0IGR0ID0gbmV3IE1hcDtcblxuZnVuY3Rpb24gZnQodCkge1xuICAgIGxldCBlID0gZHQuZ2V0KHQpO1xuICAgIGlmICh2b2lkIDAgPT09IGUpIGR0LnNldCh0LCBlID0gcHQodCkpO1xuICAgIHJldHVybiBlO1xufVxuXG5mdW5jdGlvbiBwdCh0KSB7XG4gICAgY29uc3QgZSA9IFtdO1xuICAgIGlmICg4MTkyID09PSAoODE5MiAmIHQpKSBlLnB1c2goXCJjdXJySXNFbXB0eVwiKTtcbiAgICBpZiAoNDA5NiA9PT0gKDQwOTYgJiB0KSkgZS5wdXNoKFwiY3VycklzQWN0aXZlXCIpO1xuICAgIGlmICgyMDQ4ID09PSAoMjA0OCAmIHQpKSBlLnB1c2goXCJjdXJyQ2FuVW5sb2FkXCIpO1xuICAgIGlmICgxMDI0ID09PSAoMTAyNCAmIHQpKSBlLnB1c2goXCJjdXJyQ2FuVW5sb2FkRG9uZVwiKTtcbiAgICBpZiAoNTEyID09PSAoNTEyICYgdCkpIGUucHVzaChcImN1cnJVbmxvYWRcIik7XG4gICAgaWYgKDI1NiA9PT0gKDI1NiAmIHQpKSBlLnB1c2goXCJjdXJyVW5sb2FkRG9uZVwiKTtcbiAgICBpZiAoMTI4ID09PSAoMTI4ICYgdCkpIGUucHVzaChcImN1cnJEZWFjdGl2YXRlXCIpO1xuICAgIGlmICg2NCA9PT0gKDY0ICYgdCkpIGUucHVzaChcIm5leHRJc0VtcHR5XCIpO1xuICAgIGlmICgzMiA9PT0gKDMyICYgdCkpIGUucHVzaChcIm5leHRJc1NjaGVkdWxlZFwiKTtcbiAgICBpZiAoMTYgPT09ICgxNiAmIHQpKSBlLnB1c2goXCJuZXh0Q2FuTG9hZFwiKTtcbiAgICBpZiAoOCA9PT0gKDggJiB0KSkgZS5wdXNoKFwibmV4dENhbkxvYWREb25lXCIpO1xuICAgIGlmICg0ID09PSAoNCAmIHQpKSBlLnB1c2goXCJuZXh0TG9hZFwiKTtcbiAgICBpZiAoMiA9PT0gKDIgJiB0KSkgZS5wdXNoKFwibmV4dExvYWREb25lXCIpO1xuICAgIGlmICgxID09PSAoMSAmIHQpKSBlLnB1c2goXCJuZXh0QWN0aXZhdGVcIik7XG4gICAgcmV0dXJuIGUuam9pbihcInxcIik7XG59XG5cbmNvbnN0IGd0ID0gWyBcIj9cIiwgXCIjXCIsIFwiL1wiLCBcIitcIiwgXCIoXCIsIFwiKVwiLCBcIi5cIiwgXCJAXCIsIFwiIVwiLCBcIj1cIiwgXCIsXCIsIFwiJlwiLCBcIidcIiwgXCJ+XCIsIFwiO1wiIF07XG5cbmNsYXNzIFBhcnNlclN0YXRlIHtcbiAgICBjb25zdHJ1Y3Rvcih0KSB7XG4gICAgICAgIHRoaXMuaW5wdXQgPSB0O1xuICAgICAgICB0aGlzLmJ1ZmZlcnMgPSBbXTtcbiAgICAgICAgdGhpcy5idWZmZXJJbmRleCA9IDA7XG4gICAgICAgIHRoaXMuaW5kZXggPSAwO1xuICAgICAgICB0aGlzLnJlc3QgPSB0O1xuICAgIH1cbiAgICBnZXQgZG9uZSgpIHtcbiAgICAgICAgcmV0dXJuIDAgPT09IHRoaXMucmVzdC5sZW5ndGg7XG4gICAgfVxuICAgIHN0YXJ0c1dpdGgoLi4udCkge1xuICAgICAgICBjb25zdCBlID0gdGhpcy5yZXN0O1xuICAgICAgICByZXR1cm4gdC5zb21lKChmdW5jdGlvbih0KSB7XG4gICAgICAgICAgICByZXR1cm4gZS5zdGFydHNXaXRoKHQpO1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIGNvbnN1bWVPcHRpb25hbCh0KSB7XG4gICAgICAgIGlmICh0aGlzLnN0YXJ0c1dpdGgodCkpIHtcbiAgICAgICAgICAgIHRoaXMucmVzdCA9IHRoaXMucmVzdC5zbGljZSh0Lmxlbmd0aCk7XG4gICAgICAgICAgICB0aGlzLmluZGV4ICs9IHQubGVuZ3RoO1xuICAgICAgICAgICAgdGhpcy5hcHBlbmQodCk7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIGNvbnN1bWUodCkge1xuICAgICAgICBpZiAoIXRoaXMuY29uc3VtZU9wdGlvbmFsKHQpKSB0aGlzLmV4cGVjdChgJyR7dH0nYCk7XG4gICAgfVxuICAgIGV4cGVjdCh0KSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgRXhwZWN0ZWQgJHt0fSBhdCBpbmRleCAke3RoaXMuaW5kZXh9IG9mICcke3RoaXMuaW5wdXR9JywgYnV0IGdvdDogJyR7dGhpcy5yZXN0fScgKHJlc3Q9JyR7dGhpcy5yZXN0fScpYCk7XG4gICAgfVxuICAgIGVuc3VyZURvbmUoKSB7XG4gICAgICAgIGlmICghdGhpcy5kb25lKSB0aHJvdyBuZXcgRXJyb3IoYFVuZXhwZWN0ZWQgJyR7dGhpcy5yZXN0fScgYXQgaW5kZXggJHt0aGlzLmluZGV4fSBvZiAnJHt0aGlzLmlucHV0fSdgKTtcbiAgICB9XG4gICAgYWR2YW5jZSgpIHtcbiAgICAgICAgY29uc3QgdCA9IHRoaXMucmVzdFswXTtcbiAgICAgICAgdGhpcy5yZXN0ID0gdGhpcy5yZXN0LnNsaWNlKDEpO1xuICAgICAgICArK3RoaXMuaW5kZXg7XG4gICAgICAgIHRoaXMuYXBwZW5kKHQpO1xuICAgIH1cbiAgICByZWNvcmQoKSB7XG4gICAgICAgIHRoaXMuYnVmZmVyc1t0aGlzLmJ1ZmZlckluZGV4KytdID0gXCJcIjtcbiAgICB9XG4gICAgcGxheWJhY2soKSB7XG4gICAgICAgIGNvbnN0IHQgPSAtLXRoaXMuYnVmZmVySW5kZXg7XG4gICAgICAgIGNvbnN0IGUgPSB0aGlzLmJ1ZmZlcnM7XG4gICAgICAgIGNvbnN0IGkgPSBlW3RdO1xuICAgICAgICBlW3RdID0gXCJcIjtcbiAgICAgICAgcmV0dXJuIGk7XG4gICAgfVxuICAgIGRpc2NhcmQoKSB7XG4gICAgICAgIHRoaXMuYnVmZmVyc1stLXRoaXMuYnVmZmVySW5kZXhdID0gXCJcIjtcbiAgICB9XG4gICAgYXBwZW5kKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IHRoaXMuYnVmZmVySW5kZXg7XG4gICAgICAgIGNvbnN0IGkgPSB0aGlzLmJ1ZmZlcnM7XG4gICAgICAgIGZvciAobGV0IHMgPSAwOyBzIDwgZTsgKytzKSBpW3NdICs9IHQ7XG4gICAgfVxufVxuXG52YXIgdnQ7XG5cbihmdW5jdGlvbih0KSB7XG4gICAgdFt0W1wiUm91dGVcIl0gPSAwXSA9IFwiUm91dGVcIjtcbiAgICB0W3RbXCJDb21wb3NpdGVTZWdtZW50XCJdID0gMV0gPSBcIkNvbXBvc2l0ZVNlZ21lbnRcIjtcbiAgICB0W3RbXCJTY29wZWRTZWdtZW50XCJdID0gMl0gPSBcIlNjb3BlZFNlZ21lbnRcIjtcbiAgICB0W3RbXCJTZWdtZW50R3JvdXBcIl0gPSAzXSA9IFwiU2VnbWVudEdyb3VwXCI7XG4gICAgdFt0W1wiU2VnbWVudFwiXSA9IDRdID0gXCJTZWdtZW50XCI7XG4gICAgdFt0W1wiQ29tcG9uZW50XCJdID0gNV0gPSBcIkNvbXBvbmVudFwiO1xuICAgIHRbdFtcIkFjdGlvblwiXSA9IDZdID0gXCJBY3Rpb25cIjtcbiAgICB0W3RbXCJWaWV3cG9ydFwiXSA9IDddID0gXCJWaWV3cG9ydFwiO1xuICAgIHRbdFtcIlBhcmFtZXRlckxpc3RcIl0gPSA4XSA9IFwiUGFyYW1ldGVyTGlzdFwiO1xuICAgIHRbdFtcIlBhcmFtZXRlclwiXSA9IDldID0gXCJQYXJhbWV0ZXJcIjtcbn0pKHZ0IHx8ICh2dCA9IHt9KSk7XG5cbmNvbnN0IHd0ID0gbmV3IE1hcDtcblxuY29uc3QgbXQgPSBuZXcgTWFwO1xuXG5jbGFzcyBSb3V0ZUV4cHJlc3Npb24ge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUsIGksIHMsIG4sIG8pIHtcbiAgICAgICAgdGhpcy5yYXcgPSB0O1xuICAgICAgICB0aGlzLmlzQWJzb2x1dGUgPSBlO1xuICAgICAgICB0aGlzLnJvb3QgPSBpO1xuICAgICAgICB0aGlzLnF1ZXJ5UGFyYW1zID0gcztcbiAgICAgICAgdGhpcy5mcmFnbWVudCA9IG47XG4gICAgICAgIHRoaXMuZnJhZ21lbnRJc1JvdXRlID0gbztcbiAgICB9XG4gICAgZ2V0IGtpbmQoKSB7XG4gICAgICAgIHJldHVybiAwO1xuICAgIH1cbiAgICBzdGF0aWMgcGFyc2UodCwgZSkge1xuICAgICAgICBjb25zdCBpID0gZSA/IHd0IDogbXQ7XG4gICAgICAgIGxldCBzID0gaS5nZXQodCk7XG4gICAgICAgIGlmICh2b2lkIDAgPT09IHMpIGkuc2V0KHQsIHMgPSBSb3V0ZUV4cHJlc3Npb24uJHBhcnNlKHQsIGUpKTtcbiAgICAgICAgcmV0dXJuIHM7XG4gICAgfVxuICAgIHN0YXRpYyAkcGFyc2UodCwgZSkge1xuICAgICAgICBsZXQgaTtcbiAgICAgICAgY29uc3QgcyA9IHQuaW5kZXhPZihcIiNcIik7XG4gICAgICAgIGlmIChzID49IDApIHtcbiAgICAgICAgICAgIGNvbnN0IG4gPSB0LnNsaWNlKHMgKyAxKTtcbiAgICAgICAgICAgIGkgPSBkZWNvZGVVUklDb21wb25lbnQobik7XG4gICAgICAgICAgICBpZiAoZSkgdCA9IGk7IGVsc2UgdCA9IHQuc2xpY2UoMCwgcyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBpZiAoZSkgdCA9IFwiXCI7XG4gICAgICAgICAgICBpID0gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICBsZXQgbiA9IG51bGw7XG4gICAgICAgIGNvbnN0IG8gPSB0LmluZGV4T2YoXCI/XCIpO1xuICAgICAgICBpZiAobyA+PSAwKSB7XG4gICAgICAgICAgICBjb25zdCBlID0gdC5zbGljZShvICsgMSk7XG4gICAgICAgICAgICB0ID0gdC5zbGljZSgwLCBvKTtcbiAgICAgICAgICAgIG4gPSBuZXcgVVJMU2VhcmNoUGFyYW1zKGUpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChcIlwiID09PSB0KSByZXR1cm4gbmV3IFJvdXRlRXhwcmVzc2lvbihcIlwiLCBmYWxzZSwgU2VnbWVudEV4cHJlc3Npb24uRU1QVFksIG51bGwgIT0gbiA/IE9iamVjdC5mcmVlemUobikgOiBUdCwgaSwgZSk7XG4gICAgICAgIGNvbnN0IHIgPSBuZXcgUGFyc2VyU3RhdGUodCk7XG4gICAgICAgIHIucmVjb3JkKCk7XG4gICAgICAgIGNvbnN0IGEgPSByLmNvbnN1bWVPcHRpb25hbChcIi9cIik7XG4gICAgICAgIGNvbnN0IGggPSBDb21wb3NpdGVTZWdtZW50RXhwcmVzc2lvbi5wYXJzZShyKTtcbiAgICAgICAgci5lbnN1cmVEb25lKCk7XG4gICAgICAgIGNvbnN0IGMgPSByLnBsYXliYWNrKCk7XG4gICAgICAgIHJldHVybiBuZXcgUm91dGVFeHByZXNzaW9uKGMsIGEsIGgsIG51bGwgIT0gbiA/IE9iamVjdC5mcmVlemUobikgOiBUdCwgaSwgZSk7XG4gICAgfVxuICAgIHRvSW5zdHJ1Y3Rpb25UcmVlKHQpIHtcbiAgICAgICAgbGV0IGUgPSB0aGlzLnF1ZXJ5UGFyYW1zO1xuICAgICAgICBjb25zdCBpID0gdC5xdWVyeVBhcmFtcztcbiAgICAgICAgaWYgKG51bGwgIT0gaSkgZSA9IG5ldyBVUkxTZWFyY2hQYXJhbXMoe1xuICAgICAgICAgICAgLi4uT2JqZWN0LmZyb21FbnRyaWVzKGUuZW50cmllcygpKSxcbiAgICAgICAgICAgIC4uLmlcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBuZXcgVmlld3BvcnRJbnN0cnVjdGlvblRyZWUodCwgdGhpcy5pc0Fic29sdXRlLCB0aGlzLnJvb3QudG9JbnN0cnVjdGlvbnModC5hcHBlbmQsIDAsIDApLCBlLCB0aGlzLmZyYWdtZW50KTtcbiAgICB9XG4gICAgdG9TdHJpbmcoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJhdztcbiAgICB9XG59XG5cbmNsYXNzIENvbXBvc2l0ZVNlZ21lbnRFeHByZXNzaW9uIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlLCBpKSB7XG4gICAgICAgIHRoaXMucmF3ID0gdDtcbiAgICAgICAgdGhpcy5zaWJsaW5ncyA9IGU7XG4gICAgICAgIHRoaXMuYXBwZW5kID0gaTtcbiAgICB9XG4gICAgZ2V0IGtpbmQoKSB7XG4gICAgICAgIHJldHVybiAxO1xuICAgIH1cbiAgICBzdGF0aWMgcGFyc2UodCkge1xuICAgICAgICB0LnJlY29yZCgpO1xuICAgICAgICBjb25zdCBlID0gdC5jb25zdW1lT3B0aW9uYWwoXCIrXCIpO1xuICAgICAgICBjb25zdCBpID0gW107XG4gICAgICAgIGRvIHtcbiAgICAgICAgICAgIGkucHVzaChTY29wZWRTZWdtZW50RXhwcmVzc2lvbi5wYXJzZSh0KSk7XG4gICAgICAgIH0gd2hpbGUgKHQuY29uc3VtZU9wdGlvbmFsKFwiK1wiKSk7XG4gICAgICAgIGlmICghZSAmJiAxID09PSBpLmxlbmd0aCkge1xuICAgICAgICAgICAgdC5kaXNjYXJkKCk7XG4gICAgICAgICAgICByZXR1cm4gaVswXTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBzID0gdC5wbGF5YmFjaygpO1xuICAgICAgICByZXR1cm4gbmV3IENvbXBvc2l0ZVNlZ21lbnRFeHByZXNzaW9uKHMsIGksIGUpO1xuICAgIH1cbiAgICB0b0luc3RydWN0aW9ucyh0LCBlLCBpKSB7XG4gICAgICAgIHN3aXRjaCAodGhpcy5zaWJsaW5ncy5sZW5ndGgpIHtcbiAgICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgICByZXR1cm4gW107XG5cbiAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5zaWJsaW5nc1swXS50b0luc3RydWN0aW9ucyh0LCBlLCBpKTtcblxuICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgIHJldHVybiBbIC4uLnRoaXMuc2libGluZ3NbMF0udG9JbnN0cnVjdGlvbnModCwgZSwgMCksIC4uLnRoaXMuc2libGluZ3NbMV0udG9JbnN0cnVjdGlvbnModCwgMCwgaSkgXTtcblxuICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICByZXR1cm4gWyAuLi50aGlzLnNpYmxpbmdzWzBdLnRvSW5zdHJ1Y3Rpb25zKHQsIGUsIDApLCAuLi50aGlzLnNpYmxpbmdzLnNsaWNlKDEsIC0xKS5mbGF0TWFwKChmdW5jdGlvbihlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGUudG9JbnN0cnVjdGlvbnModCwgMCwgMCk7XG4gICAgICAgICAgICB9KSksIC4uLnRoaXMuc2libGluZ3NbdGhpcy5zaWJsaW5ncy5sZW5ndGggLSAxXS50b0luc3RydWN0aW9ucyh0LCAwLCBpKSBdO1xuICAgICAgICB9XG4gICAgfVxuICAgIHRvU3RyaW5nKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5yYXc7XG4gICAgfVxufVxuXG5jbGFzcyBTY29wZWRTZWdtZW50RXhwcmVzc2lvbiB7XG4gICAgY29uc3RydWN0b3IodCwgZSwgaSkge1xuICAgICAgICB0aGlzLnJhdyA9IHQ7XG4gICAgICAgIHRoaXMubGVmdCA9IGU7XG4gICAgICAgIHRoaXMucmlnaHQgPSBpO1xuICAgIH1cbiAgICBnZXQga2luZCgpIHtcbiAgICAgICAgcmV0dXJuIDI7XG4gICAgfVxuICAgIHN0YXRpYyBwYXJzZSh0KSB7XG4gICAgICAgIHQucmVjb3JkKCk7XG4gICAgICAgIGNvbnN0IGUgPSBTZWdtZW50R3JvdXBFeHByZXNzaW9uLnBhcnNlKHQpO1xuICAgICAgICBpZiAodC5jb25zdW1lT3B0aW9uYWwoXCIvXCIpKSB7XG4gICAgICAgICAgICBjb25zdCBpID0gU2NvcGVkU2VnbWVudEV4cHJlc3Npb24ucGFyc2UodCk7XG4gICAgICAgICAgICBjb25zdCBzID0gdC5wbGF5YmFjaygpO1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBTY29wZWRTZWdtZW50RXhwcmVzc2lvbihzLCBlLCBpKTtcbiAgICAgICAgfVxuICAgICAgICB0LmRpc2NhcmQoKTtcbiAgICAgICAgcmV0dXJuIGU7XG4gICAgfVxuICAgIHRvSW5zdHJ1Y3Rpb25zKHQsIGUsIGkpIHtcbiAgICAgICAgY29uc3QgcyA9IHRoaXMubGVmdC50b0luc3RydWN0aW9ucyh0LCBlLCAwKTtcbiAgICAgICAgY29uc3QgbiA9IHRoaXMucmlnaHQudG9JbnN0cnVjdGlvbnMoZmFsc2UsIDAsIGkpO1xuICAgICAgICBsZXQgbyA9IHNbcy5sZW5ndGggLSAxXTtcbiAgICAgICAgd2hpbGUgKG8uY2hpbGRyZW4ubGVuZ3RoID4gMCkgbyA9IG8uY2hpbGRyZW5bby5jaGlsZHJlbi5sZW5ndGggLSAxXTtcbiAgICAgICAgby5jaGlsZHJlbi5wdXNoKC4uLm4pO1xuICAgICAgICByZXR1cm4gcztcbiAgICB9XG4gICAgdG9TdHJpbmcoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJhdztcbiAgICB9XG59XG5cbmNsYXNzIFNlZ21lbnRHcm91cEV4cHJlc3Npb24ge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUpIHtcbiAgICAgICAgdGhpcy5yYXcgPSB0O1xuICAgICAgICB0aGlzLmV4cHJlc3Npb24gPSBlO1xuICAgIH1cbiAgICBnZXQga2luZCgpIHtcbiAgICAgICAgcmV0dXJuIDM7XG4gICAgfVxuICAgIHN0YXRpYyBwYXJzZSh0KSB7XG4gICAgICAgIHQucmVjb3JkKCk7XG4gICAgICAgIGlmICh0LmNvbnN1bWVPcHRpb25hbChcIihcIikpIHtcbiAgICAgICAgICAgIGNvbnN0IGUgPSBDb21wb3NpdGVTZWdtZW50RXhwcmVzc2lvbi5wYXJzZSh0KTtcbiAgICAgICAgICAgIHQuY29uc3VtZShcIilcIik7XG4gICAgICAgICAgICBjb25zdCBpID0gdC5wbGF5YmFjaygpO1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBTZWdtZW50R3JvdXBFeHByZXNzaW9uKGksIGUpO1xuICAgICAgICB9XG4gICAgICAgIHQuZGlzY2FyZCgpO1xuICAgICAgICByZXR1cm4gU2VnbWVudEV4cHJlc3Npb24ucGFyc2UodCk7XG4gICAgfVxuICAgIHRvSW5zdHJ1Y3Rpb25zKHQsIGUsIGkpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZXhwcmVzc2lvbi50b0luc3RydWN0aW9ucyh0LCBlICsgMSwgaSArIDEpO1xuICAgIH1cbiAgICB0b1N0cmluZygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucmF3O1xuICAgIH1cbn1cblxuY2xhc3MgU2VnbWVudEV4cHJlc3Npb24ge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUsIGksIHMsIG4pIHtcbiAgICAgICAgdGhpcy5yYXcgPSB0O1xuICAgICAgICB0aGlzLmNvbXBvbmVudCA9IGU7XG4gICAgICAgIHRoaXMuYWN0aW9uID0gaTtcbiAgICAgICAgdGhpcy52aWV3cG9ydCA9IHM7XG4gICAgICAgIHRoaXMuc2NvcGVkID0gbjtcbiAgICB9XG4gICAgZ2V0IGtpbmQoKSB7XG4gICAgICAgIHJldHVybiA0O1xuICAgIH1cbiAgICBzdGF0aWMgZ2V0IEVNUFRZKCkge1xuICAgICAgICByZXR1cm4gbmV3IFNlZ21lbnRFeHByZXNzaW9uKFwiXCIsIENvbXBvbmVudEV4cHJlc3Npb24uRU1QVFksIEFjdGlvbkV4cHJlc3Npb24uRU1QVFksIFZpZXdwb3J0RXhwcmVzc2lvbi5FTVBUWSwgdHJ1ZSk7XG4gICAgfVxuICAgIHN0YXRpYyBwYXJzZSh0KSB7XG4gICAgICAgIHQucmVjb3JkKCk7XG4gICAgICAgIGNvbnN0IGUgPSBDb21wb25lbnRFeHByZXNzaW9uLnBhcnNlKHQpO1xuICAgICAgICBjb25zdCBpID0gQWN0aW9uRXhwcmVzc2lvbi5wYXJzZSh0KTtcbiAgICAgICAgY29uc3QgcyA9IFZpZXdwb3J0RXhwcmVzc2lvbi5wYXJzZSh0KTtcbiAgICAgICAgY29uc3QgbiA9ICF0LmNvbnN1bWVPcHRpb25hbChcIiFcIik7XG4gICAgICAgIGNvbnN0IG8gPSB0LnBsYXliYWNrKCk7XG4gICAgICAgIHJldHVybiBuZXcgU2VnbWVudEV4cHJlc3Npb24obywgZSwgaSwgcywgbik7XG4gICAgfVxuICAgIHRvSW5zdHJ1Y3Rpb25zKHQsIGUsIGkpIHtcbiAgICAgICAgcmV0dXJuIFsgVmlld3BvcnRJbnN0cnVjdGlvbi5jcmVhdGUoe1xuICAgICAgICAgICAgY29tcG9uZW50OiB0aGlzLmNvbXBvbmVudC5uYW1lLFxuICAgICAgICAgICAgcGFyYW1zOiB0aGlzLmNvbXBvbmVudC5wYXJhbWV0ZXJMaXN0LnRvT2JqZWN0KCksXG4gICAgICAgICAgICB2aWV3cG9ydDogdGhpcy52aWV3cG9ydC5uYW1lLFxuICAgICAgICAgICAgYXBwZW5kOiB0LFxuICAgICAgICAgICAgb3BlbjogZSxcbiAgICAgICAgICAgIGNsb3NlOiBpXG4gICAgICAgIH0pIF07XG4gICAgfVxuICAgIHRvU3RyaW5nKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5yYXc7XG4gICAgfVxufVxuXG5jbGFzcyBDb21wb25lbnRFeHByZXNzaW9uIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlLCBpKSB7XG4gICAgICAgIHRoaXMucmF3ID0gdDtcbiAgICAgICAgdGhpcy5uYW1lID0gZTtcbiAgICAgICAgdGhpcy5wYXJhbWV0ZXJMaXN0ID0gaTtcbiAgICAgICAgc3dpdGNoIChlLmNoYXJBdCgwKSkge1xuICAgICAgICAgIGNhc2UgXCI6XCI6XG4gICAgICAgICAgICB0aGlzLmlzUGFyYW1ldGVyID0gdHJ1ZTtcbiAgICAgICAgICAgIHRoaXMuaXNTdGFyID0gZmFsc2U7XG4gICAgICAgICAgICB0aGlzLmlzRHluYW1pYyA9IHRydWU7XG4gICAgICAgICAgICB0aGlzLnBhcmFtZXRlck5hbWUgPSBlLnNsaWNlKDEpO1xuICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICBjYXNlIFwiKlwiOlxuICAgICAgICAgICAgdGhpcy5pc1BhcmFtZXRlciA9IGZhbHNlO1xuICAgICAgICAgICAgdGhpcy5pc1N0YXIgPSB0cnVlO1xuICAgICAgICAgICAgdGhpcy5pc0R5bmFtaWMgPSB0cnVlO1xuICAgICAgICAgICAgdGhpcy5wYXJhbWV0ZXJOYW1lID0gZS5zbGljZSgxKTtcbiAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIHRoaXMuaXNQYXJhbWV0ZXIgPSBmYWxzZTtcbiAgICAgICAgICAgIHRoaXMuaXNTdGFyID0gZmFsc2U7XG4gICAgICAgICAgICB0aGlzLmlzRHluYW1pYyA9IGZhbHNlO1xuICAgICAgICAgICAgdGhpcy5wYXJhbWV0ZXJOYW1lID0gZTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgfVxuICAgIGdldCBraW5kKCkge1xuICAgICAgICByZXR1cm4gNTtcbiAgICB9XG4gICAgc3RhdGljIGdldCBFTVBUWSgpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBDb21wb25lbnRFeHByZXNzaW9uKFwiXCIsIFwiXCIsIFBhcmFtZXRlckxpc3RFeHByZXNzaW9uLkVNUFRZKTtcbiAgICB9XG4gICAgc3RhdGljIHBhcnNlKHQpIHtcbiAgICAgICAgdC5yZWNvcmQoKTtcbiAgICAgICAgdC5yZWNvcmQoKTtcbiAgICAgICAgaWYgKCF0LmRvbmUpIGlmICh0LnN0YXJ0c1dpdGgoXCIuL1wiKSkgdC5hZHZhbmNlKCk7IGVsc2UgaWYgKHQuc3RhcnRzV2l0aChcIi4uL1wiKSkge1xuICAgICAgICAgICAgdC5hZHZhbmNlKCk7XG4gICAgICAgICAgICB0LmFkdmFuY2UoKTtcbiAgICAgICAgfSBlbHNlIHdoaWxlICghdC5kb25lICYmICF0LnN0YXJ0c1dpdGgoLi4uZ3QpKSB0LmFkdmFuY2UoKTtcbiAgICAgICAgY29uc3QgZSA9IGRlY29kZVVSSUNvbXBvbmVudCh0LnBsYXliYWNrKCkpO1xuICAgICAgICBpZiAoMCA9PT0gZS5sZW5ndGgpIHQuZXhwZWN0KFwiY29tcG9uZW50IG5hbWVcIik7XG4gICAgICAgIGNvbnN0IGkgPSBQYXJhbWV0ZXJMaXN0RXhwcmVzc2lvbi5wYXJzZSh0KTtcbiAgICAgICAgY29uc3QgcyA9IHQucGxheWJhY2soKTtcbiAgICAgICAgcmV0dXJuIG5ldyBDb21wb25lbnRFeHByZXNzaW9uKHMsIGUsIGkpO1xuICAgIH1cbiAgICB0b1N0cmluZygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucmF3O1xuICAgIH1cbn1cblxuY2xhc3MgQWN0aW9uRXhwcmVzc2lvbiB7XG4gICAgY29uc3RydWN0b3IodCwgZSwgaSkge1xuICAgICAgICB0aGlzLnJhdyA9IHQ7XG4gICAgICAgIHRoaXMubmFtZSA9IGU7XG4gICAgICAgIHRoaXMucGFyYW1ldGVyTGlzdCA9IGk7XG4gICAgfVxuICAgIGdldCBraW5kKCkge1xuICAgICAgICByZXR1cm4gNjtcbiAgICB9XG4gICAgc3RhdGljIGdldCBFTVBUWSgpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBBY3Rpb25FeHByZXNzaW9uKFwiXCIsIFwiXCIsIFBhcmFtZXRlckxpc3RFeHByZXNzaW9uLkVNUFRZKTtcbiAgICB9XG4gICAgc3RhdGljIHBhcnNlKHQpIHtcbiAgICAgICAgdC5yZWNvcmQoKTtcbiAgICAgICAgbGV0IGUgPSBcIlwiO1xuICAgICAgICBpZiAodC5jb25zdW1lT3B0aW9uYWwoXCIuXCIpKSB7XG4gICAgICAgICAgICB0LnJlY29yZCgpO1xuICAgICAgICAgICAgd2hpbGUgKCF0LmRvbmUgJiYgIXQuc3RhcnRzV2l0aCguLi5ndCkpIHQuYWR2YW5jZSgpO1xuICAgICAgICAgICAgZSA9IGRlY29kZVVSSUNvbXBvbmVudCh0LnBsYXliYWNrKCkpO1xuICAgICAgICAgICAgaWYgKDAgPT09IGUubGVuZ3RoKSB0LmV4cGVjdChcIm1ldGhvZCBuYW1lXCIpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGkgPSBQYXJhbWV0ZXJMaXN0RXhwcmVzc2lvbi5wYXJzZSh0KTtcbiAgICAgICAgY29uc3QgcyA9IHQucGxheWJhY2soKTtcbiAgICAgICAgcmV0dXJuIG5ldyBBY3Rpb25FeHByZXNzaW9uKHMsIGUsIGkpO1xuICAgIH1cbiAgICB0b1N0cmluZygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucmF3O1xuICAgIH1cbn1cblxuY2xhc3MgVmlld3BvcnRFeHByZXNzaW9uIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlKSB7XG4gICAgICAgIHRoaXMucmF3ID0gdDtcbiAgICAgICAgdGhpcy5uYW1lID0gZTtcbiAgICB9XG4gICAgZ2V0IGtpbmQoKSB7XG4gICAgICAgIHJldHVybiA3O1xuICAgIH1cbiAgICBzdGF0aWMgZ2V0IEVNUFRZKCkge1xuICAgICAgICByZXR1cm4gbmV3IFZpZXdwb3J0RXhwcmVzc2lvbihcIlwiLCBcIlwiKTtcbiAgICB9XG4gICAgc3RhdGljIHBhcnNlKHQpIHtcbiAgICAgICAgdC5yZWNvcmQoKTtcbiAgICAgICAgbGV0IGUgPSBcIlwiO1xuICAgICAgICBpZiAodC5jb25zdW1lT3B0aW9uYWwoXCJAXCIpKSB7XG4gICAgICAgICAgICB0LnJlY29yZCgpO1xuICAgICAgICAgICAgd2hpbGUgKCF0LmRvbmUgJiYgIXQuc3RhcnRzV2l0aCguLi5ndCkpIHQuYWR2YW5jZSgpO1xuICAgICAgICAgICAgZSA9IGRlY29kZVVSSUNvbXBvbmVudCh0LnBsYXliYWNrKCkpO1xuICAgICAgICAgICAgaWYgKDAgPT09IGUubGVuZ3RoKSB0LmV4cGVjdChcInZpZXdwb3J0IG5hbWVcIik7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgaSA9IHQucGxheWJhY2soKTtcbiAgICAgICAgcmV0dXJuIG5ldyBWaWV3cG9ydEV4cHJlc3Npb24oaSwgZSk7XG4gICAgfVxuICAgIHRvU3RyaW5nKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5yYXc7XG4gICAgfVxufVxuXG5jbGFzcyBQYXJhbWV0ZXJMaXN0RXhwcmVzc2lvbiB7XG4gICAgY29uc3RydWN0b3IodCwgZSkge1xuICAgICAgICB0aGlzLnJhdyA9IHQ7XG4gICAgICAgIHRoaXMuZXhwcmVzc2lvbnMgPSBlO1xuICAgIH1cbiAgICBnZXQga2luZCgpIHtcbiAgICAgICAgcmV0dXJuIDg7XG4gICAgfVxuICAgIHN0YXRpYyBnZXQgRU1QVFkoKSB7XG4gICAgICAgIHJldHVybiBuZXcgUGFyYW1ldGVyTGlzdEV4cHJlc3Npb24oXCJcIiwgW10pO1xuICAgIH1cbiAgICBzdGF0aWMgcGFyc2UodCkge1xuICAgICAgICB0LnJlY29yZCgpO1xuICAgICAgICBjb25zdCBlID0gW107XG4gICAgICAgIGlmICh0LmNvbnN1bWVPcHRpb25hbChcIihcIikpIHtcbiAgICAgICAgICAgIGRvIHtcbiAgICAgICAgICAgICAgICBlLnB1c2goUGFyYW1ldGVyRXhwcmVzc2lvbi5wYXJzZSh0LCBlLmxlbmd0aCkpO1xuICAgICAgICAgICAgICAgIGlmICghdC5jb25zdW1lT3B0aW9uYWwoXCIsXCIpKSBicmVhaztcbiAgICAgICAgICAgIH0gd2hpbGUgKCF0LmRvbmUgJiYgIXQuc3RhcnRzV2l0aChcIilcIikpO1xuICAgICAgICAgICAgdC5jb25zdW1lKFwiKVwiKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBpID0gdC5wbGF5YmFjaygpO1xuICAgICAgICByZXR1cm4gbmV3IFBhcmFtZXRlckxpc3RFeHByZXNzaW9uKGksIGUpO1xuICAgIH1cbiAgICB0b09iamVjdCgpIHtcbiAgICAgICAgY29uc3QgdCA9IHt9O1xuICAgICAgICBmb3IgKGNvbnN0IGUgb2YgdGhpcy5leHByZXNzaW9ucykgdFtlLmtleV0gPSBlLnZhbHVlO1xuICAgICAgICByZXR1cm4gdDtcbiAgICB9XG4gICAgdG9TdHJpbmcoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJhdztcbiAgICB9XG59XG5cbmNsYXNzIFBhcmFtZXRlckV4cHJlc3Npb24ge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUsIGkpIHtcbiAgICAgICAgdGhpcy5yYXcgPSB0O1xuICAgICAgICB0aGlzLmtleSA9IGU7XG4gICAgICAgIHRoaXMudmFsdWUgPSBpO1xuICAgIH1cbiAgICBnZXQga2luZCgpIHtcbiAgICAgICAgcmV0dXJuIDk7XG4gICAgfVxuICAgIHN0YXRpYyBnZXQgRU1QVFkoKSB7XG4gICAgICAgIHJldHVybiBuZXcgUGFyYW1ldGVyRXhwcmVzc2lvbihcIlwiLCBcIlwiLCBcIlwiKTtcbiAgICB9XG4gICAgc3RhdGljIHBhcnNlKHQsIGUpIHtcbiAgICAgICAgdC5yZWNvcmQoKTtcbiAgICAgICAgdC5yZWNvcmQoKTtcbiAgICAgICAgd2hpbGUgKCF0LmRvbmUgJiYgIXQuc3RhcnRzV2l0aCguLi5ndCkpIHQuYWR2YW5jZSgpO1xuICAgICAgICBsZXQgaSA9IGRlY29kZVVSSUNvbXBvbmVudCh0LnBsYXliYWNrKCkpO1xuICAgICAgICBpZiAoMCA9PT0gaS5sZW5ndGgpIHQuZXhwZWN0KFwicGFyYW1ldGVyIGtleVwiKTtcbiAgICAgICAgbGV0IHM7XG4gICAgICAgIGlmICh0LmNvbnN1bWVPcHRpb25hbChcIj1cIikpIHtcbiAgICAgICAgICAgIHQucmVjb3JkKCk7XG4gICAgICAgICAgICB3aGlsZSAoIXQuZG9uZSAmJiAhdC5zdGFydHNXaXRoKC4uLmd0KSkgdC5hZHZhbmNlKCk7XG4gICAgICAgICAgICBzID0gZGVjb2RlVVJJQ29tcG9uZW50KHQucGxheWJhY2soKSk7XG4gICAgICAgICAgICBpZiAoMCA9PT0gcy5sZW5ndGgpIHQuZXhwZWN0KFwicGFyYW1ldGVyIHZhbHVlXCIpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcyA9IGk7XG4gICAgICAgICAgICBpID0gZS50b1N0cmluZygpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IG4gPSB0LnBsYXliYWNrKCk7XG4gICAgICAgIHJldHVybiBuZXcgUGFyYW1ldGVyRXhwcmVzc2lvbihuLCBpLCBzKTtcbiAgICB9XG4gICAgdG9TdHJpbmcoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJhdztcbiAgICB9XG59XG5cbmNvbnN0ICR0ID0gT2JqZWN0LmZyZWV6ZSh7XG4gICAgUm91dGVFeHByZXNzaW9uOiBSb3V0ZUV4cHJlc3Npb24sXG4gICAgQ29tcG9zaXRlU2VnbWVudEV4cHJlc3Npb246IENvbXBvc2l0ZVNlZ21lbnRFeHByZXNzaW9uLFxuICAgIFNjb3BlZFNlZ21lbnRFeHByZXNzaW9uOiBTY29wZWRTZWdtZW50RXhwcmVzc2lvbixcbiAgICBTZWdtZW50R3JvdXBFeHByZXNzaW9uOiBTZWdtZW50R3JvdXBFeHByZXNzaW9uLFxuICAgIFNlZ21lbnRFeHByZXNzaW9uOiBTZWdtZW50RXhwcmVzc2lvbixcbiAgICBDb21wb25lbnRFeHByZXNzaW9uOiBDb21wb25lbnRFeHByZXNzaW9uLFxuICAgIEFjdGlvbkV4cHJlc3Npb246IEFjdGlvbkV4cHJlc3Npb24sXG4gICAgVmlld3BvcnRFeHByZXNzaW9uOiBWaWV3cG9ydEV4cHJlc3Npb24sXG4gICAgUGFyYW1ldGVyTGlzdEV4cHJlc3Npb246IFBhcmFtZXRlckxpc3RFeHByZXNzaW9uLFxuICAgIFBhcmFtZXRlckV4cHJlc3Npb246IFBhcmFtZXRlckV4cHJlc3Npb25cbn0pO1xuXG5sZXQgeHQgPSAwO1xuXG5jbGFzcyBSb3V0ZU5vZGUge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUsIGksIHMsIG4sIG8sIHIsIGEsIGgsIGMsIHUsIGwsIGQsIGYsIHAsIGcpIHtcbiAgICAgICAgdGhpcy5pZCA9IHQ7XG4gICAgICAgIHRoaXMucGF0aCA9IGU7XG4gICAgICAgIHRoaXMuZmluYWxQYXRoID0gaTtcbiAgICAgICAgdGhpcy5jb250ZXh0ID0gcztcbiAgICAgICAgdGhpcy5vcmlnaW5hbEluc3RydWN0aW9uID0gbjtcbiAgICAgICAgdGhpcy5pbnN0cnVjdGlvbiA9IG87XG4gICAgICAgIHRoaXMucGFyYW1zID0gcjtcbiAgICAgICAgdGhpcy5xdWVyeVBhcmFtcyA9IGE7XG4gICAgICAgIHRoaXMuZnJhZ21lbnQgPSBoO1xuICAgICAgICB0aGlzLmRhdGEgPSBjO1xuICAgICAgICB0aGlzLnZpZXdwb3J0ID0gdTtcbiAgICAgICAgdGhpcy50aXRsZSA9IGw7XG4gICAgICAgIHRoaXMuY29tcG9uZW50ID0gZDtcbiAgICAgICAgdGhpcy5hcHBlbmQgPSBmO1xuICAgICAgICB0aGlzLmNoaWxkcmVuID0gcDtcbiAgICAgICAgdGhpcy5yZXNpZHVlID0gZztcbiAgICAgICAgdGhpcy52ZXJzaW9uID0gMTtcbiAgICAgICAgdGhpcy5vcmlnaW5hbEluc3RydWN0aW9uID0gbztcbiAgICB9XG4gICAgZ2V0IHJvb3QoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnRyZWUucm9vdDtcbiAgICB9XG4gICAgc3RhdGljIGNyZWF0ZSh0KSB7XG4gICAgICAgIHZhciBlLCBpLCBzLCBuLCBvLCByLCBhLCBoO1xuICAgICAgICByZXR1cm4gbmV3IFJvdXRlTm9kZSgrK3h0LCB0LnBhdGgsIHQuZmluYWxQYXRoLCB0LmNvbnRleHQsIHQuaW5zdHJ1Y3Rpb24sIHQuaW5zdHJ1Y3Rpb24sIG51bGwgIT09IChlID0gdC5wYXJhbXMpICYmIHZvaWQgMCAhPT0gZSA/IGUgOiB7fSwgbnVsbCAhPT0gKGkgPSB0LnF1ZXJ5UGFyYW1zKSAmJiB2b2lkIDAgIT09IGkgPyBpIDogVHQsIG51bGwgIT09IChzID0gdC5mcmFnbWVudCkgJiYgdm9pZCAwICE9PSBzID8gcyA6IG51bGwsIG51bGwgIT09IChuID0gdC5kYXRhKSAmJiB2b2lkIDAgIT09IG4gPyBuIDoge30sIG51bGwgIT09IChvID0gdC52aWV3cG9ydCkgJiYgdm9pZCAwICE9PSBvID8gbyA6IG51bGwsIG51bGwgIT09IChyID0gdC50aXRsZSkgJiYgdm9pZCAwICE9PSByID8gciA6IG51bGwsIHQuY29tcG9uZW50LCB0LmFwcGVuZCwgbnVsbCAhPT0gKGEgPSB0LmNoaWxkcmVuKSAmJiB2b2lkIDAgIT09IGEgPyBhIDogW10sIG51bGwgIT09IChoID0gdC5yZXNpZHVlKSAmJiB2b2lkIDAgIT09IGggPyBoIDogW10pO1xuICAgIH1cbiAgICBjb250YWlucyh0KSB7XG4gICAgICAgIHZhciBlLCBpO1xuICAgICAgICBpZiAodGhpcy5jb250ZXh0ID09PSB0Lm9wdGlvbnMuY29udGV4dCkge1xuICAgICAgICAgICAgY29uc3QgcyA9IHRoaXMuY2hpbGRyZW47XG4gICAgICAgICAgICBjb25zdCBuID0gdC5jaGlsZHJlbjtcbiAgICAgICAgICAgIGZvciAobGV0IHQgPSAwLCBvID0gcy5sZW5ndGg7IHQgPCBvOyArK3QpIGZvciAobGV0IHIgPSAwLCBhID0gbi5sZW5ndGg7IHIgPCBhOyArK3IpIGlmICh0ICsgciA8IG8gJiYgKG51bGwgIT09IChpID0gbnVsbCA9PT0gKGUgPSBzW3QgKyByXS5pbnN0cnVjdGlvbikgfHwgdm9pZCAwID09PSBlID8gdm9pZCAwIDogZS5jb250YWlucyhuW3JdKSkgJiYgdm9pZCAwICE9PSBpID8gaSA6IGZhbHNlKSkge1xuICAgICAgICAgICAgICAgIGlmIChyICsgMSA9PT0gYSkgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9IGVsc2UgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMuY2hpbGRyZW4uc29tZSgoZnVuY3Rpb24oZSkge1xuICAgICAgICAgICAgcmV0dXJuIGUuY29udGFpbnModCk7XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgYXBwZW5kQ2hpbGQodCkge1xuICAgICAgICB0aGlzLmNoaWxkcmVuLnB1c2godCk7XG4gICAgICAgIHQuc2V0VHJlZSh0aGlzLnRyZWUpO1xuICAgIH1cbiAgICBhcHBlbmRDaGlsZHJlbiguLi50KSB7XG4gICAgICAgIGZvciAoY29uc3QgZSBvZiB0KSB0aGlzLmFwcGVuZENoaWxkKGUpO1xuICAgIH1cbiAgICBjbGVhckNoaWxkcmVuKCkge1xuICAgICAgICBmb3IgKGNvbnN0IHQgb2YgdGhpcy5jaGlsZHJlbikge1xuICAgICAgICAgICAgdC5jbGVhckNoaWxkcmVuKCk7XG4gICAgICAgICAgICB0LmNvbnRleHQudnBhLmNhbmNlbFVwZGF0ZSgpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuY2hpbGRyZW4ubGVuZ3RoID0gMDtcbiAgICB9XG4gICAgZ2V0VGl0bGUodCkge1xuICAgICAgICBjb25zdCBlID0gWyAuLi50aGlzLmNoaWxkcmVuLm1hcCgoZSA9PiBlLmdldFRpdGxlKHQpKSksIHRoaXMuZ2V0VGl0bGVQYXJ0KCkgXS5maWx0ZXIoKHQgPT4gbnVsbCAhPT0gdCkpO1xuICAgICAgICBpZiAoMCA9PT0gZS5sZW5ndGgpIHJldHVybiBudWxsO1xuICAgICAgICByZXR1cm4gZS5qb2luKHQpO1xuICAgIH1cbiAgICBnZXRUaXRsZVBhcnQoKSB7XG4gICAgICAgIGlmIChcImZ1bmN0aW9uXCIgPT09IHR5cGVvZiB0aGlzLnRpdGxlKSByZXR1cm4gdGhpcy50aXRsZS5jYWxsKHZvaWQgMCwgdGhpcyk7XG4gICAgICAgIHJldHVybiB0aGlzLnRpdGxlO1xuICAgIH1cbiAgICBjb21wdXRlQWJzb2x1dGVQYXRoKCkge1xuICAgICAgICBpZiAodGhpcy5jb250ZXh0LmlzUm9vdCkgcmV0dXJuIFwiXCI7XG4gICAgICAgIGNvbnN0IHQgPSB0aGlzLmNvbnRleHQucGFyZW50Lm5vZGUuY29tcHV0ZUFic29sdXRlUGF0aCgpO1xuICAgICAgICBjb25zdCBlID0gdGhpcy5pbnN0cnVjdGlvbi50b1VybENvbXBvbmVudChmYWxzZSk7XG4gICAgICAgIGlmICh0Lmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIGlmIChlLmxlbmd0aCA+IDApIHJldHVybiBbIHQsIGUgXS5qb2luKFwiL1wiKTtcbiAgICAgICAgICAgIHJldHVybiB0O1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBlO1xuICAgIH1cbiAgICBzZXRUcmVlKHQpIHtcbiAgICAgICAgdGhpcy50cmVlID0gdDtcbiAgICAgICAgZm9yIChjb25zdCBlIG9mIHRoaXMuY2hpbGRyZW4pIGUuc2V0VHJlZSh0KTtcbiAgICB9XG4gICAgZmluYWxpemVJbnN0cnVjdGlvbigpIHtcbiAgICAgICAgY29uc3QgdCA9IHRoaXMuY2hpbGRyZW4ubWFwKCh0ID0+IHQuZmluYWxpemVJbnN0cnVjdGlvbigpKSk7XG4gICAgICAgIGNvbnN0IGUgPSB0aGlzLmluc3RydWN0aW9uLmNsb25lKCk7XG4gICAgICAgIGUuY2hpbGRyZW4uc3BsaWNlKDAsIGUuY2hpbGRyZW4ubGVuZ3RoLCAuLi50KTtcbiAgICAgICAgcmV0dXJuIHRoaXMuaW5zdHJ1Y3Rpb24gPSBlO1xuICAgIH1cbiAgICBjbG9uZSgpIHtcbiAgICAgICAgY29uc3QgdCA9IG5ldyBSb3V0ZU5vZGUodGhpcy5pZCwgdGhpcy5wYXRoLCB0aGlzLmZpbmFsUGF0aCwgdGhpcy5jb250ZXh0LCB0aGlzLm9yaWdpbmFsSW5zdHJ1Y3Rpb24sIHRoaXMuaW5zdHJ1Y3Rpb24sIHtcbiAgICAgICAgICAgIC4uLnRoaXMucGFyYW1zXG4gICAgICAgIH0sIHtcbiAgICAgICAgICAgIC4uLnRoaXMucXVlcnlQYXJhbXNcbiAgICAgICAgfSwgdGhpcy5mcmFnbWVudCwge1xuICAgICAgICAgICAgLi4udGhpcy5kYXRhXG4gICAgICAgIH0sIHRoaXMudmlld3BvcnQsIHRoaXMudGl0bGUsIHRoaXMuY29tcG9uZW50LCB0aGlzLmFwcGVuZCwgdGhpcy5jaGlsZHJlbi5tYXAoKHQgPT4gdC5jbG9uZSgpKSksIFsgLi4udGhpcy5yZXNpZHVlIF0pO1xuICAgICAgICB0LnZlcnNpb24gPSB0aGlzLnZlcnNpb24gKyAxO1xuICAgICAgICBpZiAodC5jb250ZXh0Lm5vZGUgPT09IHRoaXMpIHQuY29udGV4dC5ub2RlID0gdDtcbiAgICAgICAgcmV0dXJuIHQ7XG4gICAgfVxuICAgIHRvU3RyaW5nKCkge1xuICAgICAgICB2YXIgdCwgZSwgaSwgcywgbjtcbiAgICAgICAgY29uc3QgbyA9IFtdO1xuICAgICAgICBjb25zdCByID0gbnVsbCAhPT0gKGkgPSBudWxsID09PSAoZSA9IG51bGwgPT09ICh0ID0gdGhpcy5jb250ZXh0KSB8fCB2b2lkIDAgPT09IHQgPyB2b2lkIDAgOiB0LmRlZmluaXRpb24uY29tcG9uZW50KSB8fCB2b2lkIDAgPT09IGUgPyB2b2lkIDAgOiBlLm5hbWUpICYmIHZvaWQgMCAhPT0gaSA/IGkgOiBcIlwiO1xuICAgICAgICBpZiAoci5sZW5ndGggPiAwKSBvLnB1c2goYGM6JyR7cn0nYCk7XG4gICAgICAgIGNvbnN0IGEgPSBudWxsICE9PSAobiA9IG51bGwgPT09IChzID0gdGhpcy5jb250ZXh0KSB8fCB2b2lkIDAgPT09IHMgPyB2b2lkIDAgOiBzLmRlZmluaXRpb24uY29uZmlnLnBhdGgpICYmIHZvaWQgMCAhPT0gbiA/IG4gOiBcIlwiO1xuICAgICAgICBpZiAoYS5sZW5ndGggPiAwKSBvLnB1c2goYHBhdGg6JyR7YX0nYCk7XG4gICAgICAgIGlmICh0aGlzLmNoaWxkcmVuLmxlbmd0aCA+IDApIG8ucHVzaChgY2hpbGRyZW46WyR7dGhpcy5jaGlsZHJlbi5tYXAoU3RyaW5nKS5qb2luKFwiLFwiKX1dYCk7XG4gICAgICAgIGlmICh0aGlzLnJlc2lkdWUubGVuZ3RoID4gMCkgby5wdXNoKGByZXNpZHVlOiR7dGhpcy5yZXNpZHVlLm1hcCgoZnVuY3Rpb24odCkge1xuICAgICAgICAgICAgaWYgKFwic3RyaW5nXCIgPT09IHR5cGVvZiB0KSByZXR1cm4gYCcke3R9J2A7XG4gICAgICAgICAgICByZXR1cm4gU3RyaW5nKHQpO1xuICAgICAgICB9KSkuam9pbihcIixcIil9YCk7XG4gICAgICAgIHJldHVybiBgUk4oY3R4Oicke3RoaXMuY29udGV4dC5mcmllbmRseVBhdGh9Jywke28uam9pbihcIixcIil9KWA7XG4gICAgfVxufVxuXG5jbGFzcyBSb3V0ZVRyZWUge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUsIGksIHMpIHtcbiAgICAgICAgdGhpcy5vcHRpb25zID0gdDtcbiAgICAgICAgdGhpcy5xdWVyeVBhcmFtcyA9IGU7XG4gICAgICAgIHRoaXMuZnJhZ21lbnQgPSBpO1xuICAgICAgICB0aGlzLnJvb3QgPSBzO1xuICAgIH1cbiAgICBjb250YWlucyh0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJvb3QuY29udGFpbnModCk7XG4gICAgfVxuICAgIGNsb25lKCkge1xuICAgICAgICBjb25zdCB0ID0gbmV3IFJvdXRlVHJlZSh0aGlzLm9wdGlvbnMuY2xvbmUoKSwge1xuICAgICAgICAgICAgLi4udGhpcy5xdWVyeVBhcmFtc1xuICAgICAgICB9LCB0aGlzLmZyYWdtZW50LCB0aGlzLnJvb3QuY2xvbmUoKSk7XG4gICAgICAgIHQucm9vdC5zZXRUcmVlKHRoaXMpO1xuICAgICAgICByZXR1cm4gdDtcbiAgICB9XG4gICAgZmluYWxpemVJbnN0cnVjdGlvbnMoKSB7XG4gICAgICAgIHJldHVybiBuZXcgVmlld3BvcnRJbnN0cnVjdGlvblRyZWUodGhpcy5vcHRpb25zLCB0cnVlLCB0aGlzLnJvb3QuY2hpbGRyZW4ubWFwKCh0ID0+IHQuZmluYWxpemVJbnN0cnVjdGlvbigpKSksIHRoaXMucXVlcnlQYXJhbXMsIHRoaXMuZnJhZ21lbnQpO1xuICAgIH1cbiAgICB0b1N0cmluZygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucm9vdC50b1N0cmluZygpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24geXQodCwgZSwgcykge1xuICAgIGNvbnN0IG8gPSBzLmNvbnRhaW5lci5nZXQoaSkuc2NvcGVUbyhcIlJvdXRlVHJlZVwiKTtcbiAgICBjb25zdCByID0gcy5yb290O1xuICAgIHQub3B0aW9ucyA9IGUub3B0aW9ucztcbiAgICB0LnF1ZXJ5UGFyYW1zID0gZS5xdWVyeVBhcmFtcztcbiAgICB0LmZyYWdtZW50ID0gZS5mcmFnbWVudDtcbiAgICBpZiAoZS5pc0Fic29sdXRlKSBzID0gcjtcbiAgICBpZiAocyA9PT0gcikge1xuICAgICAgICB0LnJvb3Quc2V0VHJlZSh0KTtcbiAgICAgICAgci5ub2RlID0gdC5yb290O1xuICAgIH1cbiAgICBjb25zdCBhID0gcy5yZXNvbHZlZCBpbnN0YW5jZW9mIFByb21pc2UgPyBcIiAtIGF3YWl0aW5nIHByb21pc2VcIiA6IFwiXCI7XG4gICAgby50cmFjZShgdXBkYXRlUm91dGVUcmVlKHJvb3RDdHg6JXMscnQ6JXMsdml0OiVzKSR7YX1gLCByLCB0LCBlKTtcbiAgICByZXR1cm4gbihzLnJlc29sdmVkLCAoKCkgPT4gRXQobywgZSwgcywgci5ub2RlKSkpO1xufVxuXG5mdW5jdGlvbiBFdCh0LCBlLCBpLCBzKSB7XG4gICAgdC50cmFjZShgdXBkYXRlTm9kZShjdHg6JXMsbm9kZTolcylgLCBpLCBzKTtcbiAgICBzLnF1ZXJ5UGFyYW1zID0gZS5xdWVyeVBhcmFtcztcbiAgICBzLmZyYWdtZW50ID0gZS5mcmFnbWVudDtcbiAgICBsZXQgcjtcbiAgICBpZiAoIXMuY29udGV4dC5pc1Jvb3QpIHIgPSBzLmNvbnRleHQudnBhLnNjaGVkdWxlVXBkYXRlKHMudHJlZS5vcHRpb25zLCBzKTsgZWxzZSByID0gdm9pZCAwO1xuICAgIHJldHVybiBuKHIsICgoKSA9PiB7XG4gICAgICAgIGlmIChzLmNvbnRleHQgPT09IGkpIHtcbiAgICAgICAgICAgIHMuY2xlYXJDaGlsZHJlbigpO1xuICAgICAgICAgICAgcmV0dXJuIG4obyguLi5lLmNoaWxkcmVuLm1hcCgoZSA9PiBSdCh0LCBzLCBlLCBzLnRyZWUub3B0aW9ucy5hcHBlbmQgfHwgZS5hcHBlbmQpKSkpLCAoKCkgPT4gbyguLi5pLmdldEF2YWlsYWJsZVZpZXdwb3J0QWdlbnRzKFwiZHluYW1pY1wiKS5tYXAoKGUgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IGkgPSBWaWV3cG9ydEluc3RydWN0aW9uLmNyZWF0ZSh7XG4gICAgICAgICAgICAgICAgICAgIGNvbXBvbmVudDogZS52aWV3cG9ydC5kZWZhdWx0LFxuICAgICAgICAgICAgICAgICAgICB2aWV3cG9ydDogZS52aWV3cG9ydC5uYW1lXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFJ0KHQsIHMsIGksIHMuYXBwZW5kKTtcbiAgICAgICAgICAgIH0pKSkpKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbyguLi5zLmNoaWxkcmVuLm1hcCgocyA9PiBFdCh0LCBlLCBpLCBzKSkpKTtcbiAgICB9KSk7XG59XG5cbmZ1bmN0aW9uIGJ0KHQpIHtcbiAgICBjb25zdCBlID0gdC5jb250ZXh0O1xuICAgIGNvbnN0IHMgPSBlLmNvbnRhaW5lci5nZXQoaSkuc2NvcGVUbyhcIlJvdXRlVHJlZVwiKTtcbiAgICBjb25zdCByID0gZS5yZXNvbHZlZCBpbnN0YW5jZW9mIFByb21pc2UgPyBcIiAtIGF3YWl0aW5nIHByb21pc2VcIiA6IFwiXCI7XG4gICAgcy50cmFjZShgcHJvY2Vzc1Jlc2lkdWUobm9kZTolcykke3J9YCwgdCk7XG4gICAgcmV0dXJuIG4oZS5yZXNvbHZlZCwgKCgpID0+IG8oLi4udC5yZXNpZHVlLnNwbGljZSgwKS5tYXAoKGUgPT4gUnQocywgdCwgZSwgdC5hcHBlbmQpKSksIC4uLmUuZ2V0QXZhaWxhYmxlVmlld3BvcnRBZ2VudHMoXCJzdGF0aWNcIikubWFwKChlID0+IHtcbiAgICAgICAgY29uc3QgaSA9IFZpZXdwb3J0SW5zdHJ1Y3Rpb24uY3JlYXRlKHtcbiAgICAgICAgICAgIGNvbXBvbmVudDogZS52aWV3cG9ydC5kZWZhdWx0LFxuICAgICAgICAgICAgdmlld3BvcnQ6IGUudmlld3BvcnQubmFtZVxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIFJ0KHMsIHQsIGksIHQuYXBwZW5kKTtcbiAgICB9KSkpKSk7XG59XG5cbmZ1bmN0aW9uIFN0KHQpIHtcbiAgICBjb25zdCBlID0gdC5jb250ZXh0O1xuICAgIGNvbnN0IHMgPSBlLmNvbnRhaW5lci5nZXQoaSkuc2NvcGVUbyhcIlJvdXRlVHJlZVwiKTtcbiAgICBjb25zdCByID0gZS5yZXNvbHZlZCBpbnN0YW5jZW9mIFByb21pc2UgPyBcIiAtIGF3YWl0aW5nIHByb21pc2VcIiA6IFwiXCI7XG4gICAgcy50cmFjZShgZ2V0RHluYW1pY0NoaWxkcmVuKG5vZGU6JXMpJHtyfWAsIHQpO1xuICAgIHJldHVybiBuKGUucmVzb2x2ZWQsICgoKSA9PiB7XG4gICAgICAgIGNvbnN0IGkgPSB0LmNoaWxkcmVuLnNsaWNlKCk7XG4gICAgICAgIHJldHVybiBuKG8oLi4udC5yZXNpZHVlLnNwbGljZSgwKS5tYXAoKGUgPT4gUnQocywgdCwgZSwgdC5hcHBlbmQpKSksIC4uLmUuZ2V0QXZhaWxhYmxlVmlld3BvcnRBZ2VudHMoXCJkeW5hbWljXCIpLm1hcCgoZSA9PiB7XG4gICAgICAgICAgICBjb25zdCBpID0gVmlld3BvcnRJbnN0cnVjdGlvbi5jcmVhdGUoe1xuICAgICAgICAgICAgICAgIGNvbXBvbmVudDogZS52aWV3cG9ydC5kZWZhdWx0LFxuICAgICAgICAgICAgICAgIHZpZXdwb3J0OiBlLnZpZXdwb3J0Lm5hbWVcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIFJ0KHMsIHQsIGksIHQuYXBwZW5kKTtcbiAgICAgICAgfSkpKSwgKCgpID0+IHQuY2hpbGRyZW4uZmlsdGVyKCh0ID0+ICFpLmluY2x1ZGVzKHQpKSkpKTtcbiAgICB9KSk7XG59XG5cbmZ1bmN0aW9uIFJ0KHQsIGUsIGksIHMpIHtcbiAgICB2YXIgbiwgcjtcbiAgICB0LnRyYWNlKGBjcmVhdGVBbmRBcHBlbmROb2Rlcyhub2RlOiVzLHZpOiVzLGFwcGVuZDoke3N9KWAsIGUsIGkpO1xuICAgIHN3aXRjaCAoaS5jb21wb25lbnQudHlwZSkge1xuICAgICAgY2FzZSAwOlxuICAgICAgICBzd2l0Y2ggKGkuY29tcG9uZW50LnZhbHVlKSB7XG4gICAgICAgICAgY2FzZSBcIi4uXCI6XG4gICAgICAgICAgICBlLmNsZWFyQ2hpbGRyZW4oKTtcbiAgICAgICAgICAgIGUgPSBudWxsICE9PSAociA9IG51bGwgPT09IChuID0gZS5jb250ZXh0LnBhcmVudCkgfHwgdm9pZCAwID09PSBuID8gdm9pZCAwIDogbi5ub2RlKSAmJiB2b2lkIDAgIT09IHIgPyByIDogZTtcblxuICAgICAgICAgIGNhc2UgXCIuXCI6XG4gICAgICAgICAgICByZXR1cm4gbyguLi5pLmNoaWxkcmVuLm1hcCgoaSA9PiBSdCh0LCBlLCBpLCBpLmFwcGVuZCkpKSk7XG5cbiAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGNvbnN0IG4gPSBDdCh0LCBlLCBpLCBzKTtcbiAgICAgICAgICAgICAgICBpZiAobnVsbCA9PT0gbikgcmV0dXJuO1xuICAgICAgICAgICAgICAgIHJldHVybiBOdCh0LCBlLCBuKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICBjYXNlIDQ6XG4gICAgICBjYXNlIDI6XG4gICAgICAgIHtcbiAgICAgICAgICAgIGNvbnN0IG4gPSBSb3V0ZURlZmluaXRpb24ucmVzb2x2ZShpLmNvbXBvbmVudC52YWx1ZSk7XG4gICAgICAgICAgICBjb25zdCBvID0gSXQodCwgZSwgaSwgcywgbi5jb21wb25lbnQpO1xuICAgICAgICAgICAgcmV0dXJuIE50KHQsIGUsIG8pO1xuICAgICAgICB9XG4gICAgfVxufVxuXG5mdW5jdGlvbiBDdCh0LCBlLCBpLCBzKSB7XG4gICAgY29uc3QgbiA9IGUuY29udGV4dDtcbiAgICBsZXQgbyA9IDA7XG4gICAgbGV0IHIgPSBpLmNvbXBvbmVudC52YWx1ZTtcbiAgICBsZXQgYSA9IGk7XG4gICAgd2hpbGUgKDEgPT09IGEuY2hpbGRyZW4ubGVuZ3RoKSB7XG4gICAgICAgIGEgPSBhLmNoaWxkcmVuWzBdO1xuICAgICAgICBpZiAoMCA9PT0gYS5jb21wb25lbnQudHlwZSkge1xuICAgICAgICAgICAgKytvO1xuICAgICAgICAgICAgciA9IGAke3J9LyR7YS5jb21wb25lbnQudmFsdWV9YDtcbiAgICAgICAgfSBlbHNlIGJyZWFrO1xuICAgIH1cbiAgICBjb25zdCBoID0gbi5yZWNvZ25pemUocik7XG4gICAgaWYgKG51bGwgPT09IGgpIHtcbiAgICAgICAgY29uc3QgbyA9IGkuY29tcG9uZW50LnZhbHVlO1xuICAgICAgICBsZXQgciA9IG4uY29udGFpbmVyLmZpbmQoeSwgbyk7XG4gICAgICAgIHN3aXRjaCAoZS50cmVlLm9wdGlvbnMucm91dGluZ01vZGUpIHtcbiAgICAgICAgICBjYXNlIFwiY29uZmlndXJlZC1vbmx5XCI6XG4gICAgICAgICAgICBpZiAobnVsbCA9PT0gcikge1xuICAgICAgICAgICAgICAgIGlmIChcIlwiID09PSBvKSByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYCcke299JyBkaWQgbm90IG1hdGNoIGFueSBjb25maWd1cmVkIHJvdXRlIG9yIHJlZ2lzdGVyZWQgY29tcG9uZW50IG5hbWUgYXQgJyR7bi5mcmllbmRseVBhdGh9JyAtIGRpZCB5b3UgZm9yZ2V0IHRvIGFkZCAnJHtvfScgdG8gdGhlIHJvdXRlcyBsaXN0IG9mIHRoZSByb3V0ZSBkZWNvcmF0b3Igb2YgJyR7bi5jb21wb25lbnQubmFtZX0nP2ApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGAnJHtvfScgZGlkIG5vdCBtYXRjaCBhbnkgY29uZmlndXJlZCByb3V0ZSwgYnV0IGl0IGRvZXMgbWF0Y2ggYSByZWdpc3RlcmVkIGNvbXBvbmVudCBuYW1lIGF0ICcke24uZnJpZW5kbHlQYXRofScgLSBkaWQgeW91IGZvcmdldCB0byBhZGQgYSBAcm91dGUoeyBwYXRoOiAnJHtvfScgfSkgZGVjb3JhdG9yIHRvICcke299JyBvciB1bmludGVudGlvbmFsbHkgc2V0IHJvdXRpbmdNb2RlIHRvICdjb25maWd1cmVkLW9ubHknP2ApO1xuXG4gICAgICAgICAgY2FzZSBcImNvbmZpZ3VyZWQtZmlyc3RcIjpcbiAgICAgICAgICAgIGlmIChudWxsID09PSByKSB7XG4gICAgICAgICAgICAgICAgaWYgKFwiXCIgPT09IG8pIHJldHVybiBudWxsO1xuICAgICAgICAgICAgICAgIGNvbnN0IHQgPSBudWxsID09PSBpLnZpZXdwb3J0IHx8IDAgPT09IGkudmlld3BvcnQubGVuZ3RoID8gXCJkZWZhdWx0XCIgOiBpLnZpZXdwb3J0O1xuICAgICAgICAgICAgICAgIGNvbnN0IGUgPSBuLmdldEZhbGxiYWNrVmlld3BvcnRBZ2VudChcImR5bmFtaWNcIiwgdCk7XG4gICAgICAgICAgICAgICAgaWYgKG51bGwgPT09IGUpIHRocm93IG5ldyBFcnJvcihgJyR7b30nIGRpZCBub3QgbWF0Y2ggYW55IGNvbmZpZ3VyZWQgcm91dGUgb3IgcmVnaXN0ZXJlZCBjb21wb25lbnQgbmFtZSBhdCAnJHtuLmZyaWVuZGx5UGF0aH0nIGFuZCBubyBmYWxsYmFjayB3YXMgcHJvdmlkZWQgZm9yIHZpZXdwb3J0ICcke3R9JyAtIGRpZCB5b3UgZm9yZ2V0IHRvIGFkZCB0aGUgY29tcG9uZW50ICcke299JyB0byB0aGUgZGVwZW5kZW5jaWVzIG9mICcke24uY29tcG9uZW50Lm5hbWV9JyBvciB0byByZWdpc3RlciBpdCBhcyBhIGdsb2JhbCBkZXBlbmRlbmN5P2ApO1xuICAgICAgICAgICAgICAgIGNvbnN0IHMgPSBlLnZpZXdwb3J0LmZhbGxiYWNrO1xuICAgICAgICAgICAgICAgIHIgPSBuLmNvbnRhaW5lci5maW5kKHksIHMpO1xuICAgICAgICAgICAgICAgIGlmIChudWxsID09PSByKSB0aHJvdyBuZXcgRXJyb3IoYHRoZSByZXF1ZXN0ZWQgY29tcG9uZW50ICcke299JyBhbmQgdGhlIGZhbGxiYWNrICcke3N9JyBhdCB2aWV3cG9ydCAnJHt0fScgZGlkIG5vdCBtYXRjaCBhbnkgY29uZmlndXJlZCByb3V0ZSBvciByZWdpc3RlcmVkIGNvbXBvbmVudCBuYW1lIGF0ICcke24uZnJpZW5kbHlQYXRofScgLSBkaWQgeW91IGZvcmdldCB0byBhZGQgdGhlIGNvbXBvbmVudCAnJHtvfScgdG8gdGhlIGRlcGVuZGVuY2llcyBvZiAnJHtuLmNvbXBvbmVudC5uYW1lfScgb3IgdG8gcmVnaXN0ZXIgaXQgYXMgYSBnbG9iYWwgZGVwZW5kZW5jeT9gKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBJdCh0LCBlLCBpLCBzLCByKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBjb25zdCBjID0gbnVsbCA9PT0gaC5yZXNpZHVlID8gciA6IHIuc2xpY2UoMCwgLShoLnJlc2lkdWUubGVuZ3RoICsgMSkpO1xuICAgIGkuY29tcG9uZW50LnZhbHVlID0gYztcbiAgICBmb3IgKGxldCB0ID0gMDsgdCA8IG87ICsrdCkgaS5jaGlsZHJlbiA9IGkuY2hpbGRyZW5bMF0uY2hpbGRyZW47XG4gICAgcmV0dXJuIGt0KHQsIGUsIGksIHMsIGgpO1xufVxuXG5mdW5jdGlvbiBrdCh0LCBlLCBpLCBzLCBvLCByID0gby5yb3V0ZS5lbmRwb2ludC5yb3V0ZSkge1xuICAgIGNvbnN0IGEgPSBlLmNvbnRleHQ7XG4gICAgY29uc3QgaCA9IGUudHJlZTtcbiAgICByZXR1cm4gbihyLmhhbmRsZXIsIChuID0+IHtcbiAgICAgICAgci5oYW5kbGVyID0gbjtcbiAgICAgICAgaWYgKG51bGwgPT09IG4ucmVkaXJlY3RUbykge1xuICAgICAgICAgICAgY29uc3QgYyA9IG4udmlld3BvcnQ7XG4gICAgICAgICAgICBjb25zdCB1ID0gbi5jb21wb25lbnQ7XG4gICAgICAgICAgICBjb25zdCBsID0gYS5yZXNvbHZlVmlld3BvcnRBZ2VudChWaWV3cG9ydFJlcXVlc3QuY3JlYXRlKHtcbiAgICAgICAgICAgICAgICB2aWV3cG9ydE5hbWU6IGMsXG4gICAgICAgICAgICAgICAgY29tcG9uZW50TmFtZTogdS5uYW1lLFxuICAgICAgICAgICAgICAgIGFwcGVuZDogcyxcbiAgICAgICAgICAgICAgICByZXNvbHV0aW9uOiBoLm9wdGlvbnMucmVzb2x1dGlvbk1vZGVcbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgIGNvbnN0IGQgPSBhLmNvbnRhaW5lci5nZXQoVXQpO1xuICAgICAgICAgICAgY29uc3QgZiA9IGQuZ2V0Um91dGVDb250ZXh0KGwsIHUsIGwuaG9zdENvbnRyb2xsZXIuY29udGFpbmVyKTtcbiAgICAgICAgICAgIGYubm9kZSA9IFJvdXRlTm9kZS5jcmVhdGUoe1xuICAgICAgICAgICAgICAgIHBhdGg6IG8ucm91dGUuZW5kcG9pbnQucm91dGUucGF0aCxcbiAgICAgICAgICAgICAgICBmaW5hbFBhdGg6IHIucGF0aCxcbiAgICAgICAgICAgICAgICBjb250ZXh0OiBmLFxuICAgICAgICAgICAgICAgIGluc3RydWN0aW9uOiBpLFxuICAgICAgICAgICAgICAgIHBhcmFtczoge1xuICAgICAgICAgICAgICAgICAgICAuLi5lLnBhcmFtcyxcbiAgICAgICAgICAgICAgICAgICAgLi4uby5yb3V0ZS5wYXJhbXNcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHF1ZXJ5UGFyYW1zOiBoLnF1ZXJ5UGFyYW1zLFxuICAgICAgICAgICAgICAgIGZyYWdtZW50OiBoLmZyYWdtZW50LFxuICAgICAgICAgICAgICAgIGRhdGE6IG4uZGF0YSxcbiAgICAgICAgICAgICAgICB2aWV3cG9ydDogYyxcbiAgICAgICAgICAgICAgICBjb21wb25lbnQ6IHUsXG4gICAgICAgICAgICAgICAgYXBwZW5kOiBzLFxuICAgICAgICAgICAgICAgIHRpdGxlOiBuLmNvbmZpZy50aXRsZSxcbiAgICAgICAgICAgICAgICByZXNpZHVlOiBudWxsID09PSBvLnJlc2lkdWUgPyBbXSA6IFsgVmlld3BvcnRJbnN0cnVjdGlvbi5jcmVhdGUoby5yZXNpZHVlKSBdXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGYubm9kZS5zZXRUcmVlKGUudHJlZSk7XG4gICAgICAgICAgICB0LnRyYWNlKGBjcmVhdGVDb25maWd1cmVkTm9kZSh2aTolcykgLT4gJXNgLCBpLCBmLm5vZGUpO1xuICAgICAgICAgICAgcmV0dXJuIGYubm9kZTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBjID0gUm91dGVFeHByZXNzaW9uLnBhcnNlKHIucGF0aCwgZmFsc2UpO1xuICAgICAgICBjb25zdCB1ID0gUm91dGVFeHByZXNzaW9uLnBhcnNlKG4ucmVkaXJlY3RUbywgZmFsc2UpO1xuICAgICAgICBsZXQgbDtcbiAgICAgICAgbGV0IGQ7XG4gICAgICAgIGNvbnN0IGYgPSBbXTtcbiAgICAgICAgc3dpdGNoIChjLnJvb3Qua2luZCkge1xuICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICBjYXNlIDQ6XG4gICAgICAgICAgICBsID0gYy5yb290O1xuICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBVbmV4cGVjdGVkIGV4cHJlc3Npb24ga2luZCAke2Mucm9vdC5raW5kfWApO1xuICAgICAgICB9XG4gICAgICAgIHN3aXRjaCAodS5yb290LmtpbmQpIHtcbiAgICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgY2FzZSA0OlxuICAgICAgICAgICAgZCA9IHUucm9vdDtcbiAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgVW5leHBlY3RlZCBleHByZXNzaW9uIGtpbmQgJHt1LnJvb3Qua2luZH1gKTtcbiAgICAgICAgfVxuICAgICAgICBsZXQgcDtcbiAgICAgICAgbGV0IGc7XG4gICAgICAgIGxldCB2ID0gZmFsc2U7XG4gICAgICAgIGxldCB3ID0gZmFsc2U7XG4gICAgICAgIHdoaWxlICghKHYgJiYgdykpIHtcbiAgICAgICAgICAgIGlmICh2KSBwID0gbnVsbDsgZWxzZSBpZiAoNCA9PT0gbC5raW5kKSB7XG4gICAgICAgICAgICAgICAgcCA9IGw7XG4gICAgICAgICAgICAgICAgdiA9IHRydWU7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKDQgPT09IGwubGVmdC5raW5kKSB7XG4gICAgICAgICAgICAgICAgcCA9IGwubGVmdDtcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKGwucmlnaHQua2luZCkge1xuICAgICAgICAgICAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgICAgICAgY2FzZSA0OlxuICAgICAgICAgICAgICAgICAgICBsID0gbC5yaWdodDtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgVW5leHBlY3RlZCBleHByZXNzaW9uIGtpbmQgJHtsLnJpZ2h0LmtpbmR9YCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIHRocm93IG5ldyBFcnJvcihgVW5leHBlY3RlZCBleHByZXNzaW9uIGtpbmQgJHtsLmxlZnQua2luZH1gKTtcbiAgICAgICAgICAgIGlmICh3KSBnID0gbnVsbDsgZWxzZSBpZiAoNCA9PT0gZC5raW5kKSB7XG4gICAgICAgICAgICAgICAgZyA9IGQ7XG4gICAgICAgICAgICAgICAgdyA9IHRydWU7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKDQgPT09IGQubGVmdC5raW5kKSB7XG4gICAgICAgICAgICAgICAgZyA9IGQubGVmdDtcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKGQucmlnaHQua2luZCkge1xuICAgICAgICAgICAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgICAgICAgY2FzZSA0OlxuICAgICAgICAgICAgICAgICAgICBkID0gZC5yaWdodDtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgVW5leHBlY3RlZCBleHByZXNzaW9uIGtpbmQgJHtkLnJpZ2h0LmtpbmR9YCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIHRocm93IG5ldyBFcnJvcihgVW5leHBlY3RlZCBleHByZXNzaW9uIGtpbmQgJHtkLmxlZnQua2luZH1gKTtcbiAgICAgICAgICAgIGlmIChudWxsICE9PSBnKSBpZiAoZy5jb21wb25lbnQuaXNEeW5hbWljICYmIChudWxsID09PSBwIHx8IHZvaWQgMCA9PT0gcCA/IHZvaWQgMCA6IHAuY29tcG9uZW50LmlzRHluYW1pYykpIGYucHVzaChvLnJvdXRlLnBhcmFtc1twLmNvbXBvbmVudC5uYW1lXSk7IGVsc2UgZi5wdXNoKGcucmF3KTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBtID0gZi5maWx0ZXIoQm9vbGVhbikuam9pbihcIi9cIik7XG4gICAgICAgIGNvbnN0ICQgPSBhLnJlY29nbml6ZShtKTtcbiAgICAgICAgaWYgKG51bGwgPT09ICQpIHtcbiAgICAgICAgICAgIGNvbnN0IG4gPSBtO1xuICAgICAgICAgICAgY29uc3QgbyA9IGEuY29udGFpbmVyLmZpbmQoeSwgbSk7XG4gICAgICAgICAgICBzd2l0Y2ggKGgub3B0aW9ucy5yb3V0aW5nTW9kZSkge1xuICAgICAgICAgICAgICBjYXNlIFwiY29uZmlndXJlZC1vbmx5XCI6XG4gICAgICAgICAgICAgICAgaWYgKG51bGwgPT09IG8pIHRocm93IG5ldyBFcnJvcihgJyR7bn0nIGRpZCBub3QgbWF0Y2ggYW55IGNvbmZpZ3VyZWQgcm91dGUgb3IgcmVnaXN0ZXJlZCBjb21wb25lbnQgbmFtZSBhdCAnJHthLmZyaWVuZGx5UGF0aH0nIC0gZGlkIHlvdSBmb3JnZXQgdG8gYWRkICcke259JyB0byB0aGUgcm91dGVzIGxpc3Qgb2YgdGhlIHJvdXRlIGRlY29yYXRvciBvZiAnJHthLmNvbXBvbmVudC5uYW1lfSc/YCk7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGAnJHtufScgZGlkIG5vdCBtYXRjaCBhbnkgY29uZmlndXJlZCByb3V0ZSwgYnV0IGl0IGRvZXMgbWF0Y2ggYSByZWdpc3RlcmVkIGNvbXBvbmVudCBuYW1lIGF0ICcke2EuZnJpZW5kbHlQYXRofScgLSBkaWQgeW91IGZvcmdldCB0byBhZGQgYSBAcm91dGUoeyBwYXRoOiAnJHtufScgfSkgZGVjb3JhdG9yIHRvICcke259JyBvciB1bmludGVudGlvbmFsbHkgc2V0IHJvdXRpbmdNb2RlIHRvICdjb25maWd1cmVkLW9ubHknP2ApO1xuXG4gICAgICAgICAgICAgIGNhc2UgXCJjb25maWd1cmVkLWZpcnN0XCI6XG4gICAgICAgICAgICAgICAgaWYgKG51bGwgPT09IG8pIHRocm93IG5ldyBFcnJvcihgJyR7bn0nIGRpZCBub3QgbWF0Y2ggYW55IGNvbmZpZ3VyZWQgcm91dGUgb3IgcmVnaXN0ZXJlZCBjb21wb25lbnQgbmFtZSBhdCAnJHthLmZyaWVuZGx5UGF0aH0nIC0gZGlkIHlvdSBmb3JnZXQgdG8gYWRkIHRoZSBjb21wb25lbnQgJyR7bn0nIHRvIHRoZSBkZXBlbmRlbmNpZXMgb2YgJyR7YS5jb21wb25lbnQubmFtZX0nIG9yIHRvIHJlZ2lzdGVyIGl0IGFzIGEgZ2xvYmFsIGRlcGVuZGVuY3k/YCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIEl0KHQsIGUsIGksIHMsIG8pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBrdCh0LCBlLCBpLCBzLCBvLCAkLnJvdXRlLmVuZHBvaW50LnJvdXRlKTtcbiAgICB9KSk7XG59XG5cbmZ1bmN0aW9uIEl0KHQsIGUsIGksIHMsIG4pIHtcbiAgICB2YXIgbztcbiAgICBjb25zdCByID0gZS5jb250ZXh0O1xuICAgIGNvbnN0IGEgPSBlLnRyZWU7XG4gICAgY29uc3QgaCA9IG51bGwgIT09IChvID0gaS52aWV3cG9ydCkgJiYgdm9pZCAwICE9PSBvID8gbyA6IFwiZGVmYXVsdFwiO1xuICAgIGNvbnN0IGMgPSByLnJlc29sdmVWaWV3cG9ydEFnZW50KFZpZXdwb3J0UmVxdWVzdC5jcmVhdGUoe1xuICAgICAgICB2aWV3cG9ydE5hbWU6IGgsXG4gICAgICAgIGNvbXBvbmVudE5hbWU6IG4ubmFtZSxcbiAgICAgICAgYXBwZW5kOiBzLFxuICAgICAgICByZXNvbHV0aW9uOiBhLm9wdGlvbnMucmVzb2x1dGlvbk1vZGVcbiAgICB9KSk7XG4gICAgY29uc3QgdSA9IHIuY29udGFpbmVyLmdldChVdCk7XG4gICAgY29uc3QgbCA9IHUuZ2V0Um91dGVDb250ZXh0KGMsIG4sIGMuaG9zdENvbnRyb2xsZXIuY29udGFpbmVyKTtcbiAgICBjb25zdCBkID0gUm91dGVEZWZpbml0aW9uLnJlc29sdmUobik7XG4gICAgbC5ub2RlID0gUm91dGVOb2RlLmNyZWF0ZSh7XG4gICAgICAgIHBhdGg6IG4ubmFtZSxcbiAgICAgICAgZmluYWxQYXRoOiBuLm5hbWUsXG4gICAgICAgIGNvbnRleHQ6IGwsXG4gICAgICAgIGluc3RydWN0aW9uOiBpLFxuICAgICAgICBwYXJhbXM6IHtcbiAgICAgICAgICAgIC4uLnIubm9kZS5wYXJhbXMsXG4gICAgICAgICAgICAuLi5pLnBhcmFtc1xuICAgICAgICB9LFxuICAgICAgICBxdWVyeVBhcmFtczogYS5xdWVyeVBhcmFtcyxcbiAgICAgICAgZnJhZ21lbnQ6IGEuZnJhZ21lbnQsXG4gICAgICAgIGRhdGE6IGQuZGF0YSxcbiAgICAgICAgdmlld3BvcnQ6IGgsXG4gICAgICAgIGNvbXBvbmVudDogbixcbiAgICAgICAgYXBwZW5kOiBzLFxuICAgICAgICB0aXRsZTogZC5jb25maWcudGl0bGUsXG4gICAgICAgIHJlc2lkdWU6IFsgLi4uaS5jaGlsZHJlbiBdXG4gICAgfSk7XG4gICAgbC5ub2RlLnNldFRyZWUoci5ub2RlLnRyZWUpO1xuICAgIHQudHJhY2UoYGNyZWF0ZURpcmVjdE5vZGUodmk6JXMpIC0+ICVzYCwgaSwgbC5ub2RlKTtcbiAgICByZXR1cm4gbC5ub2RlO1xufVxuXG5mdW5jdGlvbiBOdCh0LCBlLCBpKSB7XG4gICAgcmV0dXJuIG4oaSwgKGkgPT4ge1xuICAgICAgICB0LnRyYWNlKGBhcHBlbmROb2RlKCRjaGlsZE5vZGU6JXMpYCwgaSk7XG4gICAgICAgIGUuYXBwZW5kQ2hpbGQoaSk7XG4gICAgICAgIHJldHVybiBpLmNvbnRleHQudnBhLnNjaGVkdWxlVXBkYXRlKGUudHJlZS5vcHRpb25zLCBpKTtcbiAgICB9KSk7XG59XG5cbmNvbnN0IFR0ID0gT2JqZWN0LmZyZWV6ZShuZXcgVVJMU2VhcmNoUGFyYW1zKTtcblxuY29uc3QgVnQgPSBcImF1LW5hdi1pZFwiO1xuXG5mdW5jdGlvbiBBdCh0KSB7XG4gICAgcmV0dXJuIHIodCkgJiYgdHJ1ZSA9PT0gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHQsIFZ0KTtcbn1cblxuZnVuY3Rpb24gUHQodCwgZSkge1xuICAgIHJldHVybiB7XG4gICAgICAgIC4uLnQsXG4gICAgICAgIFtWdF06IGVcbiAgICB9O1xufVxuXG5mdW5jdGlvbiBMdCh0LCBlKSB7XG4gICAgaWYgKFwiZnVuY3Rpb25cIiA9PT0gdHlwZW9mIGUpIHJldHVybiBlKHQpO1xuICAgIHJldHVybiBlO1xufVxuXG5jbGFzcyBSb3V0ZXJPcHRpb25zIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlLCBpLCBzLCBuLCBvLCByLCBhLCBoLCBjKSB7XG4gICAgICAgIHRoaXMudXNlVXJsRnJhZ21lbnRIYXNoID0gdDtcbiAgICAgICAgdGhpcy51c2VIcmVmID0gZTtcbiAgICAgICAgdGhpcy5zdGF0ZWZ1bEhpc3RvcnlMZW5ndGggPSBpO1xuICAgICAgICB0aGlzLnJvdXRpbmdNb2RlID0gcztcbiAgICAgICAgdGhpcy5zd2FwU3RyYXRlZ3kgPSBuO1xuICAgICAgICB0aGlzLnJlc29sdXRpb25Nb2RlID0gbztcbiAgICAgICAgdGhpcy5xdWVyeVBhcmFtc1N0cmF0ZWd5ID0gcjtcbiAgICAgICAgdGhpcy5mcmFnbWVudFN0cmF0ZWd5ID0gYTtcbiAgICAgICAgdGhpcy5oaXN0b3J5U3RyYXRlZ3kgPSBoO1xuICAgICAgICB0aGlzLnNhbWVVcmxTdHJhdGVneSA9IGM7XG4gICAgfVxuICAgIHN0YXRpYyBnZXQgREVGQVVMVCgpIHtcbiAgICAgICAgcmV0dXJuIFJvdXRlck9wdGlvbnMuY3JlYXRlKHt9KTtcbiAgICB9XG4gICAgc3RhdGljIGNyZWF0ZSh0KSB7XG4gICAgICAgIHZhciBlLCBpLCBzLCBuLCBvLCByLCBhLCBoLCBjLCB1O1xuICAgICAgICByZXR1cm4gbmV3IFJvdXRlck9wdGlvbnMobnVsbCAhPT0gKGUgPSB0LnVzZVVybEZyYWdtZW50SGFzaCkgJiYgdm9pZCAwICE9PSBlID8gZSA6IGZhbHNlLCBudWxsICE9PSAoaSA9IHQudXNlSHJlZikgJiYgdm9pZCAwICE9PSBpID8gaSA6IHRydWUsIG51bGwgIT09IChzID0gdC5zdGF0ZWZ1bEhpc3RvcnlMZW5ndGgpICYmIHZvaWQgMCAhPT0gcyA/IHMgOiAwLCBudWxsICE9PSAobiA9IHQucm91dGluZ01vZGUpICYmIHZvaWQgMCAhPT0gbiA/IG4gOiBcImNvbmZpZ3VyZWQtZmlyc3RcIiwgbnVsbCAhPT0gKG8gPSB0LnN3YXBTdHJhdGVneSkgJiYgdm9pZCAwICE9PSBvID8gbyA6IFwic2VxdWVudGlhbC1yZW1vdmUtZmlyc3RcIiwgbnVsbCAhPT0gKHIgPSB0LnJlc29sdXRpb25Nb2RlKSAmJiB2b2lkIDAgIT09IHIgPyByIDogXCJkeW5hbWljXCIsIG51bGwgIT09IChhID0gdC5xdWVyeVBhcmFtc1N0cmF0ZWd5KSAmJiB2b2lkIDAgIT09IGEgPyBhIDogXCJvdmVyd3JpdGVcIiwgbnVsbCAhPT0gKGggPSB0LmZyYWdtZW50U3RyYXRlZ3kpICYmIHZvaWQgMCAhPT0gaCA/IGggOiBcIm92ZXJ3cml0ZVwiLCBudWxsICE9PSAoYyA9IHQuaGlzdG9yeVN0cmF0ZWd5KSAmJiB2b2lkIDAgIT09IGMgPyBjIDogXCJwdXNoXCIsIG51bGwgIT09ICh1ID0gdC5zYW1lVXJsU3RyYXRlZ3kpICYmIHZvaWQgMCAhPT0gdSA/IHUgOiBcImlnbm9yZVwiKTtcbiAgICB9XG4gICAgZ2V0UXVlcnlQYXJhbXNTdHJhdGVneSh0KSB7XG4gICAgICAgIHJldHVybiBMdCh0LCB0aGlzLnF1ZXJ5UGFyYW1zU3RyYXRlZ3kpO1xuICAgIH1cbiAgICBnZXRGcmFnbWVudFN0cmF0ZWd5KHQpIHtcbiAgICAgICAgcmV0dXJuIEx0KHQsIHRoaXMuZnJhZ21lbnRTdHJhdGVneSk7XG4gICAgfVxuICAgIGdldEhpc3RvcnlTdHJhdGVneSh0KSB7XG4gICAgICAgIHJldHVybiBMdCh0LCB0aGlzLmhpc3RvcnlTdHJhdGVneSk7XG4gICAgfVxuICAgIGdldFNhbWVVcmxTdHJhdGVneSh0KSB7XG4gICAgICAgIHJldHVybiBMdCh0LCB0aGlzLnNhbWVVcmxTdHJhdGVneSk7XG4gICAgfVxuICAgIHN0cmluZ2lmeVByb3BlcnRpZXMoKSB7XG4gICAgICAgIHJldHVybiBbIFsgXCJyb3V0aW5nTW9kZVwiLCBcIm1vZGVcIiBdLCBbIFwic3dhcFN0cmF0ZWd5XCIsIFwic3dhcFwiIF0sIFsgXCJyZXNvbHV0aW9uTW9kZVwiLCBcInJlc29sdXRpb25cIiBdLCBbIFwicXVlcnlQYXJhbXNTdHJhdGVneVwiLCBcInF1ZXJ5UGFyYW1zXCIgXSwgWyBcImZyYWdtZW50U3RyYXRlZ3lcIiwgXCJmcmFnbWVudFwiIF0sIFsgXCJoaXN0b3J5U3RyYXRlZ3lcIiwgXCJoaXN0b3J5XCIgXSwgWyBcInNhbWVVcmxTdHJhdGVneVwiLCBcInNhbWVVcmxcIiBdIF0ubWFwKCgoW3QsIGVdKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBpID0gdGhpc1t0XTtcbiAgICAgICAgICAgIHJldHVybiBgJHtlfToke1wiZnVuY3Rpb25cIiA9PT0gdHlwZW9mIGkgPyBpIDogYCcke2l9J2B9YDtcbiAgICAgICAgfSkpLmpvaW4oXCIsXCIpO1xuICAgIH1cbiAgICBjbG9uZSgpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBSb3V0ZXJPcHRpb25zKHRoaXMudXNlVXJsRnJhZ21lbnRIYXNoLCB0aGlzLnVzZUhyZWYsIHRoaXMuc3RhdGVmdWxIaXN0b3J5TGVuZ3RoLCB0aGlzLnJvdXRpbmdNb2RlLCB0aGlzLnN3YXBTdHJhdGVneSwgdGhpcy5yZXNvbHV0aW9uTW9kZSwgdGhpcy5xdWVyeVBhcmFtc1N0cmF0ZWd5LCB0aGlzLmZyYWdtZW50U3RyYXRlZ3ksIHRoaXMuaGlzdG9yeVN0cmF0ZWd5LCB0aGlzLnNhbWVVcmxTdHJhdGVneSk7XG4gICAgfVxuICAgIHRvU3RyaW5nKCkge1xuICAgICAgICByZXR1cm4gYFJPKCR7dGhpcy5zdHJpbmdpZnlQcm9wZXJ0aWVzKCl9KWA7XG4gICAgfVxufVxuXG5jbGFzcyBOYXZpZ2F0aW9uT3B0aW9ucyBleHRlbmRzIFJvdXRlck9wdGlvbnMge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUsIGksIHMsIG4sIG8sIHIsIGEpIHtcbiAgICAgICAgc3VwZXIodC51c2VVcmxGcmFnbWVudEhhc2gsIHQudXNlSHJlZiwgdC5zdGF0ZWZ1bEhpc3RvcnlMZW5ndGgsIHQucm91dGluZ01vZGUsIHQuc3dhcFN0cmF0ZWd5LCB0LnJlc29sdXRpb25Nb2RlLCB0LnF1ZXJ5UGFyYW1zU3RyYXRlZ3ksIHQuZnJhZ21lbnRTdHJhdGVneSwgdC5oaXN0b3J5U3RyYXRlZ3ksIHQuc2FtZVVybFN0cmF0ZWd5KTtcbiAgICAgICAgdGhpcy50aXRsZSA9IGU7XG4gICAgICAgIHRoaXMudGl0bGVTZXBhcmF0b3IgPSBpO1xuICAgICAgICB0aGlzLmFwcGVuZCA9IHM7XG4gICAgICAgIHRoaXMuY29udGV4dCA9IG47XG4gICAgICAgIHRoaXMucXVlcnlQYXJhbXMgPSBvO1xuICAgICAgICB0aGlzLmZyYWdtZW50ID0gcjtcbiAgICAgICAgdGhpcy5zdGF0ZSA9IGE7XG4gICAgfVxuICAgIHN0YXRpYyBnZXQgREVGQVVMVCgpIHtcbiAgICAgICAgcmV0dXJuIE5hdmlnYXRpb25PcHRpb25zLmNyZWF0ZSh7fSk7XG4gICAgfVxuICAgIHN0YXRpYyBjcmVhdGUodCkge1xuICAgICAgICB2YXIgZSwgaSwgcywgbiwgbywgciwgYTtcbiAgICAgICAgcmV0dXJuIG5ldyBOYXZpZ2F0aW9uT3B0aW9ucyhSb3V0ZXJPcHRpb25zLmNyZWF0ZSh0KSwgbnVsbCAhPT0gKGUgPSB0LnRpdGxlKSAmJiB2b2lkIDAgIT09IGUgPyBlIDogbnVsbCwgbnVsbCAhPT0gKGkgPSB0LnRpdGxlU2VwYXJhdG9yKSAmJiB2b2lkIDAgIT09IGkgPyBpIDogXCIgfCBcIiwgbnVsbCAhPT0gKHMgPSB0LmFwcGVuZCkgJiYgdm9pZCAwICE9PSBzID8gcyA6IGZhbHNlLCBudWxsICE9PSAobiA9IHQuY29udGV4dCkgJiYgdm9pZCAwICE9PSBuID8gbiA6IG51bGwsIG51bGwgIT09IChvID0gdC5xdWVyeVBhcmFtcykgJiYgdm9pZCAwICE9PSBvID8gbyA6IG51bGwsIG51bGwgIT09IChyID0gdC5mcmFnbWVudCkgJiYgdm9pZCAwICE9PSByID8gciA6IFwiXCIsIG51bGwgIT09IChhID0gdC5zdGF0ZSkgJiYgdm9pZCAwICE9PSBhID8gYSA6IG51bGwpO1xuICAgIH1cbiAgICBjbG9uZSgpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBOYXZpZ2F0aW9uT3B0aW9ucyhzdXBlci5jbG9uZSgpLCB0aGlzLnRpdGxlLCB0aGlzLnRpdGxlU2VwYXJhdG9yLCB0aGlzLmFwcGVuZCwgdGhpcy5jb250ZXh0LCB7XG4gICAgICAgICAgICAuLi50aGlzLnF1ZXJ5UGFyYW1zXG4gICAgICAgIH0sIHRoaXMuZnJhZ21lbnQsIG51bGwgPT09IHRoaXMuc3RhdGUgPyBudWxsIDoge1xuICAgICAgICAgICAgLi4udGhpcy5zdGF0ZVxuICAgICAgICB9KTtcbiAgICB9XG4gICAgdG9TdHJpbmcoKSB7XG4gICAgICAgIHJldHVybiBgTk8oJHtzdXBlci5zdHJpbmdpZnlQcm9wZXJ0aWVzKCl9KWA7XG4gICAgfVxufVxuXG5jbGFzcyBOYXZpZ2F0aW9uIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlLCBpLCBzLCBuLCBvKSB7XG4gICAgICAgIHRoaXMuaWQgPSB0O1xuICAgICAgICB0aGlzLmluc3RydWN0aW9ucyA9IGU7XG4gICAgICAgIHRoaXMudHJpZ2dlciA9IGk7XG4gICAgICAgIHRoaXMub3B0aW9ucyA9IHM7XG4gICAgICAgIHRoaXMucHJldk5hdmlnYXRpb24gPSBuO1xuICAgICAgICB0aGlzLmZpbmFsSW5zdHJ1Y3Rpb25zID0gbztcbiAgICB9XG4gICAgc3RhdGljIGNyZWF0ZSh0KSB7XG4gICAgICAgIHJldHVybiBuZXcgTmF2aWdhdGlvbih0LmlkLCB0Lmluc3RydWN0aW9ucywgdC50cmlnZ2VyLCB0Lm9wdGlvbnMsIHQucHJldk5hdmlnYXRpb24sIHQuZmluYWxJbnN0cnVjdGlvbnMpO1xuICAgIH1cbiAgICB0b1N0cmluZygpIHtcbiAgICAgICAgcmV0dXJuIGBOKGlkOiR7dGhpcy5pZH0saW5zdHJ1Y3Rpb25zOiR7dGhpcy5pbnN0cnVjdGlvbnN9LHRyaWdnZXI6JyR7dGhpcy50cmlnZ2VyfScpYDtcbiAgICB9XG59XG5cbmNsYXNzIFRyYW5zaXRpb24ge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUsIGksIHMsIG4sIG8sIHIsIGEsIGgsIGMsIHUsIGwsIGQsIGYsIHApIHtcbiAgICAgICAgdGhpcy5pZCA9IHQ7XG4gICAgICAgIHRoaXMucHJldkluc3RydWN0aW9ucyA9IGU7XG4gICAgICAgIHRoaXMuaW5zdHJ1Y3Rpb25zID0gaTtcbiAgICAgICAgdGhpcy5maW5hbEluc3RydWN0aW9ucyA9IHM7XG4gICAgICAgIHRoaXMuaW5zdHJ1Y3Rpb25zQ2hhbmdlZCA9IG47XG4gICAgICAgIHRoaXMudHJpZ2dlciA9IG87XG4gICAgICAgIHRoaXMub3B0aW9ucyA9IHI7XG4gICAgICAgIHRoaXMubWFuYWdlZFN0YXRlID0gYTtcbiAgICAgICAgdGhpcy5wcmV2aW91c1JvdXRlVHJlZSA9IGg7XG4gICAgICAgIHRoaXMucm91dGVUcmVlID0gYztcbiAgICAgICAgdGhpcy5wcm9taXNlID0gdTtcbiAgICAgICAgdGhpcy5yZXNvbHZlID0gbDtcbiAgICAgICAgdGhpcy5yZWplY3QgPSBkO1xuICAgICAgICB0aGlzLmd1YXJkc1Jlc3VsdCA9IGY7XG4gICAgICAgIHRoaXMuZXJyb3IgPSBwO1xuICAgIH1cbiAgICBzdGF0aWMgY3JlYXRlKHQpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBUcmFuc2l0aW9uKHQuaWQsIHQucHJldkluc3RydWN0aW9ucywgdC5pbnN0cnVjdGlvbnMsIHQuZmluYWxJbnN0cnVjdGlvbnMsIHQuaW5zdHJ1Y3Rpb25zQ2hhbmdlZCwgdC50cmlnZ2VyLCB0Lm9wdGlvbnMsIHQubWFuYWdlZFN0YXRlLCB0LnByZXZpb3VzUm91dGVUcmVlLCB0LnJvdXRlVHJlZSwgdC5wcm9taXNlLCB0LnJlc29sdmUsIHQucmVqZWN0LCB0Lmd1YXJkc1Jlc3VsdCwgdm9pZCAwKTtcbiAgICB9XG4gICAgcnVuKHQsIGUpIHtcbiAgICAgICAgaWYgKHRydWUgIT09IHRoaXMuZ3VhcmRzUmVzdWx0KSByZXR1cm47XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCBpID0gdCgpO1xuICAgICAgICAgICAgaWYgKGkgaW5zdGFuY2VvZiBQcm9taXNlKSBpLnRoZW4oZSkuY2F0Y2goKHQgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuaGFuZGxlRXJyb3IodCk7XG4gICAgICAgICAgICB9KSk7IGVsc2UgZShpKTtcbiAgICAgICAgfSBjYXRjaCAodCkge1xuICAgICAgICAgICAgdGhpcy5oYW5kbGVFcnJvcih0KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBoYW5kbGVFcnJvcih0KSB7XG4gICAgICAgIHRoaXMucmVqZWN0KHRoaXMuZXJyb3IgPSB0KTtcbiAgICB9XG4gICAgdG9TdHJpbmcoKSB7XG4gICAgICAgIHJldHVybiBgVChpZDoke3RoaXMuaWR9LHRyaWdnZXI6JyR7dGhpcy50cmlnZ2VyfScsaW5zdHJ1Y3Rpb25zOiR7dGhpcy5pbnN0cnVjdGlvbnN9LG9wdGlvbnM6JHt0aGlzLm9wdGlvbnN9KWA7XG4gICAgfVxufVxuXG5jb25zdCBVdCA9IHQuY3JlYXRlSW50ZXJmYWNlKFwiSVJvdXRlclwiLCAodCA9PiB0LnNpbmdsZXRvbihPdCkpKTtcblxubGV0IE90ID0gY2xhc3MgUm91dGVyIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlLCBpLCBzLCBuKSB7XG4gICAgICAgIHRoaXMuY29udGFpbmVyID0gdDtcbiAgICAgICAgdGhpcy5wID0gZTtcbiAgICAgICAgdGhpcy5sb2dnZXIgPSBpO1xuICAgICAgICB0aGlzLmV2ZW50cyA9IHM7XG4gICAgICAgIHRoaXMubG9jYXRpb25NZ3IgPSBuO1xuICAgICAgICB0aGlzLnQgPSBudWxsO1xuICAgICAgICB0aGlzLmkgPSBudWxsO1xuICAgICAgICB0aGlzLm8gPSBudWxsO1xuICAgICAgICB0aGlzLm9wdGlvbnMgPSBSb3V0ZXJPcHRpb25zLkRFRkFVTFQ7XG4gICAgICAgIHRoaXMubmF2aWdhdGVkID0gZmFsc2U7XG4gICAgICAgIHRoaXMubmF2aWdhdGlvbklkID0gMDtcbiAgICAgICAgdGhpcy5sYXN0U3VjY2Vzc2Z1bE5hdmlnYXRpb24gPSBudWxsO1xuICAgICAgICB0aGlzLmFjdGl2ZU5hdmlnYXRpb24gPSBudWxsO1xuICAgICAgICB0aGlzLmluc3RydWN0aW9ucyA9IFZpZXdwb3J0SW5zdHJ1Y3Rpb25UcmVlLmNyZWF0ZShcIlwiKTtcbiAgICAgICAgdGhpcy5uZXh0VHIgPSBudWxsO1xuICAgICAgICB0aGlzLmxvY2F0aW9uQ2hhbmdlU3Vic2NyaXB0aW9uID0gbnVsbDtcbiAgICAgICAgdGhpcy52cGFMb29rdXAgPSBuZXcgTWFwO1xuICAgICAgICB0aGlzLmxvZ2dlciA9IGkucm9vdC5zY29wZVRvKFwiUm91dGVyXCIpO1xuICAgIH1cbiAgICBnZXQgY3R4KCkge1xuICAgICAgICBsZXQgdCA9IHRoaXMudDtcbiAgICAgICAgaWYgKG51bGwgPT09IHQpIHtcbiAgICAgICAgICAgIGlmICghdGhpcy5jb250YWluZXIuaGFzKEd0LCB0cnVlKSkgdGhyb3cgbmV3IEVycm9yKGBSb290IFJvdXRlQ29udGV4dCBpcyBub3Qgc2V0LiBEaWQgeW91IGZvcmdldCB0byByZWdpc3RlciBSb3V0ZUNvbmZpZ3VyYXRpb24sIG9yIHRyeSB0byBuYXZpZ2F0ZSBiZWZvcmUgY2FsbGluZyBBdXJlbGlhLnN0YXJ0KCk/YCk7XG4gICAgICAgICAgICB0ID0gdGhpcy50ID0gdGhpcy5jb250YWluZXIuZ2V0KEd0KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdDtcbiAgICB9XG4gICAgZ2V0IHJvdXRlVHJlZSgpIHtcbiAgICAgICAgbGV0IHQgPSB0aGlzLmk7XG4gICAgICAgIGlmIChudWxsID09PSB0KSB7XG4gICAgICAgICAgICBjb25zdCBlID0gdGhpcy5jdHg7XG4gICAgICAgICAgICB0ID0gdGhpcy5pID0gbmV3IFJvdXRlVHJlZShOYXZpZ2F0aW9uT3B0aW9ucy5jcmVhdGUoe1xuICAgICAgICAgICAgICAgIC4uLnRoaXMub3B0aW9uc1xuICAgICAgICAgICAgfSksIFR0LCBudWxsLCBSb3V0ZU5vZGUuY3JlYXRlKHtcbiAgICAgICAgICAgICAgICBwYXRoOiBcIlwiLFxuICAgICAgICAgICAgICAgIGZpbmFsUGF0aDogXCJcIixcbiAgICAgICAgICAgICAgICBjb250ZXh0OiBlLFxuICAgICAgICAgICAgICAgIGluc3RydWN0aW9uOiBudWxsLFxuICAgICAgICAgICAgICAgIGNvbXBvbmVudDogZS5kZWZpbml0aW9uLmNvbXBvbmVudCxcbiAgICAgICAgICAgICAgICBhcHBlbmQ6IGZhbHNlXG4gICAgICAgICAgICB9KSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHQ7XG4gICAgfVxuICAgIGdldCBjdXJyZW50VHIoKSB7XG4gICAgICAgIGxldCB0ID0gdGhpcy5vO1xuICAgICAgICBpZiAobnVsbCA9PT0gdCkgdCA9IHRoaXMubyA9IFRyYW5zaXRpb24uY3JlYXRlKHtcbiAgICAgICAgICAgIGlkOiAwLFxuICAgICAgICAgICAgcHJldkluc3RydWN0aW9uczogdGhpcy5pbnN0cnVjdGlvbnMsXG4gICAgICAgICAgICBpbnN0cnVjdGlvbnM6IHRoaXMuaW5zdHJ1Y3Rpb25zLFxuICAgICAgICAgICAgZmluYWxJbnN0cnVjdGlvbnM6IHRoaXMuaW5zdHJ1Y3Rpb25zLFxuICAgICAgICAgICAgaW5zdHJ1Y3Rpb25zQ2hhbmdlZDogdHJ1ZSxcbiAgICAgICAgICAgIHRyaWdnZXI6IFwiYXBpXCIsXG4gICAgICAgICAgICBvcHRpb25zOiBOYXZpZ2F0aW9uT3B0aW9ucy5ERUZBVUxULFxuICAgICAgICAgICAgbWFuYWdlZFN0YXRlOiBudWxsLFxuICAgICAgICAgICAgcHJldmlvdXNSb3V0ZVRyZWU6IHRoaXMucm91dGVUcmVlLmNsb25lKCksXG4gICAgICAgICAgICByb3V0ZVRyZWU6IHRoaXMucm91dGVUcmVlLFxuICAgICAgICAgICAgcmVzb2x2ZTogbnVsbCxcbiAgICAgICAgICAgIHJlamVjdDogbnVsbCxcbiAgICAgICAgICAgIHByb21pc2U6IG51bGwsXG4gICAgICAgICAgICBndWFyZHNSZXN1bHQ6IHRydWUsXG4gICAgICAgICAgICBlcnJvcjogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gdDtcbiAgICB9XG4gICAgc2V0IGN1cnJlbnRUcih0KSB7XG4gICAgICAgIHRoaXMubyA9IHQ7XG4gICAgfVxuICAgIHJlc29sdmVDb250ZXh0KHQpIHtcbiAgICAgICAgcmV0dXJuIFJvdXRlQ29udGV4dC5yZXNvbHZlKHRoaXMuY3R4LCB0KTtcbiAgICB9XG4gICAgc3RhcnQodCwgZSkge1xuICAgICAgICB0aGlzLm9wdGlvbnMgPSBSb3V0ZXJPcHRpb25zLmNyZWF0ZSh0KTtcbiAgICAgICAgdGhpcy5sb2NhdGlvbk1nci5zdGFydExpc3RlbmluZygpO1xuICAgICAgICB0aGlzLmxvY2F0aW9uQ2hhbmdlU3Vic2NyaXB0aW9uID0gdGhpcy5ldmVudHMuc3Vic2NyaWJlKFwiYXU6cm91dGVyOmxvY2F0aW9uLWNoYW5nZVwiLCAodCA9PiB7XG4gICAgICAgICAgICB0aGlzLnAudGFza1F1ZXVlLnF1ZXVlVGFzaygoKCkgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IGUgPSBBdCh0LnN0YXRlKSA/IHQuc3RhdGUgOiBudWxsO1xuICAgICAgICAgICAgICAgIGNvbnN0IGkgPSBOYXZpZ2F0aW9uT3B0aW9ucy5jcmVhdGUoe1xuICAgICAgICAgICAgICAgICAgICAuLi50aGlzLm9wdGlvbnMsXG4gICAgICAgICAgICAgICAgICAgIGhpc3RvcnlTdHJhdGVneTogXCJyZXBsYWNlXCJcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBjb25zdCBzID0gVmlld3BvcnRJbnN0cnVjdGlvblRyZWUuY3JlYXRlKHQudXJsLCBpKTtcbiAgICAgICAgICAgICAgICB0aGlzLmVucXVldWUocywgdC50cmlnZ2VyLCBlLCBudWxsKTtcbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgfSkpO1xuICAgICAgICBpZiAoIXRoaXMubmF2aWdhdGVkICYmIGUpIHJldHVybiB0aGlzLmxvYWQodGhpcy5sb2NhdGlvbk1nci5nZXRQYXRoKCksIHtcbiAgICAgICAgICAgIGhpc3RvcnlTdHJhdGVneTogXCJyZXBsYWNlXCJcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIHN0b3AoKSB7XG4gICAgICAgIHZhciB0O1xuICAgICAgICB0aGlzLmxvY2F0aW9uTWdyLnN0b3BMaXN0ZW5pbmcoKTtcbiAgICAgICAgbnVsbCA9PT0gKHQgPSB0aGlzLmxvY2F0aW9uQ2hhbmdlU3Vic2NyaXB0aW9uKSB8fCB2b2lkIDAgPT09IHQgPyB2b2lkIDAgOiB0LmRpc3Bvc2UoKTtcbiAgICB9XG4gICAgbG9hZCh0LCBlKSB7XG4gICAgICAgIGNvbnN0IGkgPSB0aGlzLmNyZWF0ZVZpZXdwb3J0SW5zdHJ1Y3Rpb25zKHQsIGUpO1xuICAgICAgICB0aGlzLmxvZ2dlci50cmFjZShcImxvYWQoaW5zdHJ1Y3Rpb25zOiVzKVwiLCBpKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuZW5xdWV1ZShpLCBcImFwaVwiLCBudWxsLCBudWxsKTtcbiAgICB9XG4gICAgaXNBY3RpdmUodCwgZSkge1xuICAgICAgICBjb25zdCBpID0gdGhpcy5yZXNvbHZlQ29udGV4dChlKTtcbiAgICAgICAgY29uc3QgcyA9IHRoaXMuY3JlYXRlVmlld3BvcnRJbnN0cnVjdGlvbnModCwge1xuICAgICAgICAgICAgY29udGV4dDogaVxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5sb2dnZXIudHJhY2UoXCJpc0FjdGl2ZShpbnN0cnVjdGlvbnM6JXMsY3R4OiVzKVwiLCBzLCBpKTtcbiAgICAgICAgcmV0dXJuIHRoaXMucm91dGVUcmVlLmNvbnRhaW5zKHMpO1xuICAgIH1cbiAgICBnZXRSb3V0ZUNvbnRleHQodCwgZSwgcykge1xuICAgICAgICBjb25zdCBuID0gcy5nZXQoaSkuc2NvcGVUbyhcIlJvdXRlQ29udGV4dFwiKTtcbiAgICAgICAgY29uc3QgbyA9IFJvdXRlRGVmaW5pdGlvbi5yZXNvbHZlKGUuVHlwZSk7XG4gICAgICAgIGxldCByID0gdGhpcy52cGFMb29rdXAuZ2V0KHQpO1xuICAgICAgICBpZiAodm9pZCAwID09PSByKSB0aGlzLnZwYUxvb2t1cC5zZXQodCwgciA9IG5ldyBXZWFrTWFwKTtcbiAgICAgICAgbGV0IGEgPSByLmdldChvKTtcbiAgICAgICAgaWYgKHZvaWQgMCA9PT0gYSkge1xuICAgICAgICAgICAgbi50cmFjZShgY3JlYXRpbmcgbmV3IFJvdXRlQ29udGV4dCBmb3IgJXNgLCBvKTtcbiAgICAgICAgICAgIGNvbnN0IGkgPSBzLmhhcyhHdCwgdHJ1ZSkgPyBzLmdldChHdCkgOiBudWxsO1xuICAgICAgICAgICAgci5zZXQobywgYSA9IG5ldyBSb3V0ZUNvbnRleHQodCwgaSwgZSwgbywgcykpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgbi50cmFjZShgcmV0dXJuaW5nIGV4aXN0aW5nIFJvdXRlQ29udGV4dCBmb3IgJXNgLCBvKTtcbiAgICAgICAgICAgIGlmIChudWxsICE9PSB0KSBhLnZwYSA9IHQ7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGE7XG4gICAgfVxuICAgIGNyZWF0ZVZpZXdwb3J0SW5zdHJ1Y3Rpb25zKHQsIGUpIHtcbiAgICAgICAgaWYgKFwic3RyaW5nXCIgPT09IHR5cGVvZiB0KSB0ID0gdGhpcy5sb2NhdGlvbk1nci5yZW1vdmVCYXNlSHJlZih0KTtcbiAgICAgICAgcmV0dXJuIFZpZXdwb3J0SW5zdHJ1Y3Rpb25UcmVlLmNyZWF0ZSh0LCB0aGlzLmdldE5hdmlnYXRpb25PcHRpb25zKGUpKTtcbiAgICB9XG4gICAgZW5xdWV1ZSh0LCBlLCBpLCBzKSB7XG4gICAgICAgIGNvbnN0IG4gPSB0aGlzLmN1cnJlbnRUcjtcbiAgICAgICAgaWYgKFwiYXBpXCIgIT09IGUgJiYgXCJhcGlcIiA9PT0gbi50cmlnZ2VyICYmIG4uaW5zdHJ1Y3Rpb25zLmVxdWFscyh0KSkge1xuICAgICAgICAgICAgdGhpcy5sb2dnZXIuZGVidWcoYElnbm9yaW5nIG5hdmlnYXRpb24gdHJpZ2dlcmVkIGJ5ICclcycgYmVjYXVzZSBpdCBpcyB0aGUgc2FtZSBVUkwgYXMgdGhlIHByZXZpb3VzIG5hdmlnYXRpb24gd2hpY2ggd2FzIHRyaWdnZXJlZCBieSAnYXBpJy5gLCBlKTtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGxldCBvO1xuICAgICAgICBsZXQgcjtcbiAgICAgICAgbGV0IGE7XG4gICAgICAgIGlmIChudWxsID09PSBzKSBhID0gbmV3IFByb21pc2UoKGZ1bmN0aW9uKHQsIGUpIHtcbiAgICAgICAgICAgIG8gPSB0O1xuICAgICAgICAgICAgciA9IGU7XG4gICAgICAgIH0pKTsgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmxvZ2dlci5kZWJ1ZyhgUmV1c2luZyBwcm9taXNlL3Jlc29sdmUvcmVqZWN0IGZyb20gdGhlIHByZXZpb3VzbHkgZmFpbGVkIHRyYW5zaXRpb24gJXNgLCBzKTtcbiAgICAgICAgICAgIGEgPSBzLnByb21pc2U7XG4gICAgICAgICAgICBvID0gcy5yZXNvbHZlO1xuICAgICAgICAgICAgciA9IHMucmVqZWN0O1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGggPSB0aGlzLm5leHRUciA9IFRyYW5zaXRpb24uY3JlYXRlKHtcbiAgICAgICAgICAgIGlkOiArK3RoaXMubmF2aWdhdGlvbklkLFxuICAgICAgICAgICAgdHJpZ2dlcjogZSxcbiAgICAgICAgICAgIG1hbmFnZWRTdGF0ZTogaSxcbiAgICAgICAgICAgIHByZXZJbnN0cnVjdGlvbnM6IG4uZmluYWxJbnN0cnVjdGlvbnMsXG4gICAgICAgICAgICBmaW5hbEluc3RydWN0aW9uczogdCxcbiAgICAgICAgICAgIGluc3RydWN0aW9uc0NoYW5nZWQ6ICFuLmZpbmFsSW5zdHJ1Y3Rpb25zLmVxdWFscyh0KSxcbiAgICAgICAgICAgIGluc3RydWN0aW9uczogdCxcbiAgICAgICAgICAgIG9wdGlvbnM6IHQub3B0aW9ucyxcbiAgICAgICAgICAgIHByb21pc2U6IGEsXG4gICAgICAgICAgICByZXNvbHZlOiBvLFxuICAgICAgICAgICAgcmVqZWN0OiByLFxuICAgICAgICAgICAgcHJldmlvdXNSb3V0ZVRyZWU6IHRoaXMucm91dGVUcmVlLFxuICAgICAgICAgICAgcm91dGVUcmVlOiB0aGlzLmkgPSB0aGlzLnJvdXRlVHJlZS5jbG9uZSgpLFxuICAgICAgICAgICAgZ3VhcmRzUmVzdWx0OiB0cnVlLFxuICAgICAgICAgICAgZXJyb3I6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5sb2dnZXIuZGVidWcoYFNjaGVkdWxpbmcgdHJhbnNpdGlvbjogJXNgLCBoKTtcbiAgICAgICAgaWYgKG51bGwgPT09IHRoaXMuYWN0aXZlTmF2aWdhdGlvbikgdHJ5IHtcbiAgICAgICAgICAgIHRoaXMucnVuKGgpO1xuICAgICAgICB9IGNhdGNoICh0KSB7XG4gICAgICAgICAgICBoLmhhbmRsZUVycm9yKHQpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBoLnByb21pc2UudGhlbigodCA9PiB7XG4gICAgICAgICAgICB0aGlzLmxvZ2dlci5kZWJ1ZyhgVHJhbnNpdGlvbiBzdWNjZWVkZWQ6ICVzYCwgaCk7XG4gICAgICAgICAgICByZXR1cm4gdDtcbiAgICAgICAgfSkpLmNhdGNoKCh0ID0+IHtcbiAgICAgICAgICAgIHRoaXMubG9nZ2VyLmVycm9yKGBOYXZpZ2F0aW9uIGZhaWxlZDogJXNgLCBoLCB0KTtcbiAgICAgICAgICAgIHRocm93IHQ7XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgcnVuKHQpIHtcbiAgICAgICAgdGhpcy5jdXJyZW50VHIgPSB0O1xuICAgICAgICB0aGlzLm5leHRUciA9IG51bGw7XG4gICAgICAgIGNvbnN0IGUgPSBudWxsID09PSB0aGlzLmxhc3RTdWNjZXNzZnVsTmF2aWdhdGlvbiA/IG51bGwgOiBOYXZpZ2F0aW9uLmNyZWF0ZSh7XG4gICAgICAgICAgICAuLi50aGlzLmxhc3RTdWNjZXNzZnVsTmF2aWdhdGlvbixcbiAgICAgICAgICAgIHByZXZOYXZpZ2F0aW9uOiBudWxsXG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLmFjdGl2ZU5hdmlnYXRpb24gPSBOYXZpZ2F0aW9uLmNyZWF0ZSh7XG4gICAgICAgICAgICBpZDogdC5pZCxcbiAgICAgICAgICAgIGluc3RydWN0aW9uczogdC5pbnN0cnVjdGlvbnMsXG4gICAgICAgICAgICB0cmlnZ2VyOiB0LnRyaWdnZXIsXG4gICAgICAgICAgICBvcHRpb25zOiB0Lm9wdGlvbnMsXG4gICAgICAgICAgICBwcmV2TmF2aWdhdGlvbjogZSxcbiAgICAgICAgICAgIGZpbmFsSW5zdHJ1Y3Rpb25zOiB0LmZpbmFsSW5zdHJ1Y3Rpb25zXG4gICAgICAgIH0pO1xuICAgICAgICBjb25zdCBpID0gdGhpcy5yZXNvbHZlQ29udGV4dCh0Lm9wdGlvbnMuY29udGV4dCk7XG4gICAgICAgIGNvbnN0IHMgPSAhdGhpcy5uYXZpZ2F0ZWQgfHwgdC5pbnN0cnVjdGlvbnMuY2hpbGRyZW4ubGVuZ3RoICE9PSBpLm5vZGUuY2hpbGRyZW4ubGVuZ3RoIHx8IHQuaW5zdHJ1Y3Rpb25zLmNoaWxkcmVuLnNvbWUoKCh0LCBlKSA9PiB7XG4gICAgICAgICAgICB2YXIgcywgbjtcbiAgICAgICAgICAgIHJldHVybiAhKG51bGwgIT09IChuID0gbnVsbCA9PT0gKHMgPSBpLm5vZGUuY2hpbGRyZW5bZV0pIHx8IHZvaWQgMCA9PT0gcyA/IHZvaWQgMCA6IHMub3JpZ2luYWxJbnN0cnVjdGlvbi5lcXVhbHModCkpICYmIHZvaWQgMCAhPT0gbiA/IG4gOiBmYWxzZSk7XG4gICAgICAgIH0pKTtcbiAgICAgICAgY29uc3QgbiA9IHMgfHwgXCJyZWxvYWRcIiA9PT0gdC5vcHRpb25zLmdldFNhbWVVcmxTdHJhdGVneSh0aGlzLmluc3RydWN0aW9ucyk7XG4gICAgICAgIGlmICghbikge1xuICAgICAgICAgICAgdGhpcy5sb2dnZXIudHJhY2UoYHJ1bih0cjolcykgLSBOT1QgcHJvY2Vzc2luZyByb3V0ZWAsIHQpO1xuICAgICAgICAgICAgdGhpcy5uYXZpZ2F0ZWQgPSB0cnVlO1xuICAgICAgICAgICAgdGhpcy5hY3RpdmVOYXZpZ2F0aW9uID0gbnVsbDtcbiAgICAgICAgICAgIHQucmVzb2x2ZShmYWxzZSk7XG4gICAgICAgICAgICB0aGlzLnJ1bk5leHRUcmFuc2l0aW9uKHQpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMubG9nZ2VyLnRyYWNlKGBydW4odHI6JXMpIC0gcHJvY2Vzc2luZyByb3V0ZWAsIHQpO1xuICAgICAgICB0aGlzLmV2ZW50cy5wdWJsaXNoKG5ldyBOYXZpZ2F0aW9uU3RhcnRFdmVudCh0LmlkLCB0Lmluc3RydWN0aW9ucywgdC50cmlnZ2VyLCB0Lm1hbmFnZWRTdGF0ZSkpO1xuICAgICAgICBpZiAobnVsbCAhPT0gdGhpcy5uZXh0VHIpIHtcbiAgICAgICAgICAgIHRoaXMubG9nZ2VyLmRlYnVnKGBydW4odHI6JXMpIC0gYWJvcnRpbmcgYmVjYXVzZSBhIG5ldyB0cmFuc2l0aW9uIHdhcyBxdWV1ZWQgaW4gcmVzcG9uc2UgdG8gdGhlIE5hdmlnYXRpb25TdGFydEV2ZW50YCwgdCk7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5ydW4odGhpcy5uZXh0VHIpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuYWN0aXZlTmF2aWdhdGlvbiA9IE5hdmlnYXRpb24uY3JlYXRlKHtcbiAgICAgICAgICAgIC4uLnRoaXMuYWN0aXZlTmF2aWdhdGlvbixcbiAgICAgICAgICAgIGZpbmFsSW5zdHJ1Y3Rpb25zOiB0LmZpbmFsSW5zdHJ1Y3Rpb25zXG4gICAgICAgIH0pO1xuICAgICAgICB0LnJ1bigoKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5sb2dnZXIudHJhY2UoYHJ1bigpIC0gY29tcGlsaW5nIHJvdXRlIHRyZWU6ICVzYCwgdC5maW5hbEluc3RydWN0aW9ucyk7XG4gICAgICAgICAgICByZXR1cm4geXQodC5yb3V0ZVRyZWUsIHQuZmluYWxJbnN0cnVjdGlvbnMsIGkpO1xuICAgICAgICB9KSwgKCgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGUgPSB0LnByZXZpb3VzUm91dGVUcmVlLnJvb3QuY2hpbGRyZW47XG4gICAgICAgICAgICBjb25zdCBpID0gdC5yb3V0ZVRyZWUucm9vdC5jaGlsZHJlbjtcbiAgICAgICAgICAgIGNvbnN0IHMgPSBCKGUsIGkpO1xuICAgICAgICAgICAgQmF0Y2guc3RhcnQoKGkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMubG9nZ2VyLnRyYWNlKGBydW4oKSAtIGludm9raW5nIGNhblVubG9hZCBvbiAke2UubGVuZ3RofSBub2Rlc2ApO1xuICAgICAgICAgICAgICAgIGZvciAoY29uc3QgcyBvZiBlKSBzLmNvbnRleHQudnBhLmNhblVubG9hZCh0LCBpKTtcbiAgICAgICAgICAgIH0pKS5jb250aW51ZVdpdGgoKGUgPT4ge1xuICAgICAgICAgICAgICAgIGlmICh0cnVlICE9PSB0Lmd1YXJkc1Jlc3VsdCkge1xuICAgICAgICAgICAgICAgICAgICBlLnB1c2goKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jYW5jZWxOYXZpZ2F0aW9uKHQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pKS5jb250aW51ZVdpdGgoKGUgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMubG9nZ2VyLnRyYWNlKGBydW4oKSAtIGludm9raW5nIGNhbkxvYWQgb24gJHtpLmxlbmd0aH0gbm9kZXNgKTtcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IHMgb2YgaSkgcy5jb250ZXh0LnZwYS5jYW5Mb2FkKHQsIGUpO1xuICAgICAgICAgICAgfSkpLmNvbnRpbnVlV2l0aCgoZSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKHRydWUgIT09IHQuZ3VhcmRzUmVzdWx0KSB7XG4gICAgICAgICAgICAgICAgICAgIGUucHVzaCgpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmNhbmNlbE5hdmlnYXRpb24odCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSkpLmNvbnRpbnVlV2l0aCgoaSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5sb2dnZXIudHJhY2UoYHJ1bigpIC0gaW52b2tpbmcgdW5sb2FkIG9uICR7ZS5sZW5ndGh9IG5vZGVzYCk7XG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCBzIG9mIGUpIHMuY29udGV4dC52cGEudW5sb2FkKHQsIGkpO1xuICAgICAgICAgICAgfSkpLmNvbnRpbnVlV2l0aCgoZSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5sb2dnZXIudHJhY2UoYHJ1bigpIC0gaW52b2tpbmcgbG9hZCBvbiAke2kubGVuZ3RofSBub2Rlc2ApO1xuICAgICAgICAgICAgICAgIGZvciAoY29uc3QgcyBvZiBpKSBzLmNvbnRleHQudnBhLmxvYWQodCwgZSk7XG4gICAgICAgICAgICB9KSkuY29udGludWVXaXRoKChlID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLmxvZ2dlci50cmFjZShgcnVuKCkgLSBpbnZva2luZyBzd2FwIG9uICR7cy5sZW5ndGh9IG5vZGVzYCk7XG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCBpIG9mIHMpIGkuY29udGV4dC52cGEuc3dhcCh0LCBlKTtcbiAgICAgICAgICAgIH0pKS5jb250aW51ZVdpdGgoKCgpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLmxvZ2dlci50cmFjZShgcnVuKCkgLSBmaW5hbGl6aW5nIHRyYW5zaXRpb25gKTtcbiAgICAgICAgICAgICAgICBzLmZvckVhY2goKGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgICAgICAgICAgICAgdC5jb250ZXh0LnZwYS5lbmRUcmFuc2l0aW9uKCk7XG4gICAgICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgICAgIHRoaXMubmF2aWdhdGVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB0aGlzLmluc3RydWN0aW9ucyA9IHQuZmluYWxJbnN0cnVjdGlvbnMgPSB0LnJvdXRlVHJlZS5maW5hbGl6ZUluc3RydWN0aW9ucygpO1xuICAgICAgICAgICAgICAgIHRoaXMuZXZlbnRzLnB1Ymxpc2gobmV3IE5hdmlnYXRpb25FbmRFdmVudCh0LmlkLCB0Lmluc3RydWN0aW9ucywgdGhpcy5pbnN0cnVjdGlvbnMpKTtcbiAgICAgICAgICAgICAgICB0aGlzLmxhc3RTdWNjZXNzZnVsTmF2aWdhdGlvbiA9IHRoaXMuYWN0aXZlTmF2aWdhdGlvbjtcbiAgICAgICAgICAgICAgICB0aGlzLmFjdGl2ZU5hdmlnYXRpb24gPSBudWxsO1xuICAgICAgICAgICAgICAgIHRoaXMuYXBwbHlIaXN0b3J5U3RhdGUodCk7XG4gICAgICAgICAgICAgICAgdC5yZXNvbHZlKHRydWUpO1xuICAgICAgICAgICAgICAgIHRoaXMucnVuTmV4dFRyYW5zaXRpb24odCk7XG4gICAgICAgICAgICB9KSkuc3RhcnQoKTtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICBhcHBseUhpc3RvcnlTdGF0ZSh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSB0LmZpbmFsSW5zdHJ1Y3Rpb25zLnRvVXJsKHRoaXMub3B0aW9ucy51c2VVcmxGcmFnbWVudEhhc2gpO1xuICAgICAgICBzd2l0Y2ggKHQub3B0aW9ucy5nZXRIaXN0b3J5U3RyYXRlZ3kodGhpcy5pbnN0cnVjdGlvbnMpKSB7XG4gICAgICAgICAgY2FzZSBcIm5vbmVcIjpcbiAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgY2FzZSBcInB1c2hcIjpcbiAgICAgICAgICAgIHRoaXMubG9jYXRpb25NZ3IucHVzaFN0YXRlKFB0KHQub3B0aW9ucy5zdGF0ZSwgdC5pZCksIHRoaXMudXBkYXRlVGl0bGUodCksIGUpO1xuICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICBjYXNlIFwicmVwbGFjZVwiOlxuICAgICAgICAgICAgdGhpcy5sb2NhdGlvbk1nci5yZXBsYWNlU3RhdGUoUHQodC5vcHRpb25zLnN0YXRlLCB0LmlkKSwgdGhpcy51cGRhdGVUaXRsZSh0KSwgZSk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgIH1cbiAgICBnZXRUaXRsZSh0KSB7XG4gICAgICAgIHZhciBlLCBpO1xuICAgICAgICBzd2l0Y2ggKHR5cGVvZiB0Lm9wdGlvbnMudGl0bGUpIHtcbiAgICAgICAgICBjYXNlIFwiZnVuY3Rpb25cIjpcbiAgICAgICAgICAgIHJldHVybiBudWxsICE9PSAoZSA9IHQub3B0aW9ucy50aXRsZS5jYWxsKHZvaWQgMCwgdC5yb3V0ZVRyZWUucm9vdCkpICYmIHZvaWQgMCAhPT0gZSA/IGUgOiBcIlwiO1xuXG4gICAgICAgICAgY2FzZSBcInN0cmluZ1wiOlxuICAgICAgICAgICAgcmV0dXJuIHQub3B0aW9ucy50aXRsZTtcblxuICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICByZXR1cm4gbnVsbCAhPT0gKGkgPSB0LnJvdXRlVHJlZS5yb290LmdldFRpdGxlKHQub3B0aW9ucy50aXRsZVNlcGFyYXRvcikpICYmIHZvaWQgMCAhPT0gaSA/IGkgOiBcIlwiO1xuICAgICAgICB9XG4gICAgfVxuICAgIHVwZGF0ZVRpdGxlKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IHRoaXMuZ2V0VGl0bGUodCk7XG4gICAgICAgIGlmIChlLmxlbmd0aCA+IDApIHRoaXMucC5kb2N1bWVudC50aXRsZSA9IGU7XG4gICAgICAgIHJldHVybiB0aGlzLnAuZG9jdW1lbnQudGl0bGU7XG4gICAgfVxuICAgIGNhbmNlbE5hdmlnYXRpb24odCkge1xuICAgICAgICB0aGlzLmxvZ2dlci50cmFjZShgY2FuY2VsTmF2aWdhdGlvbih0cjolcylgLCB0KTtcbiAgICAgICAgY29uc3QgZSA9IHQucHJldmlvdXNSb3V0ZVRyZWUucm9vdC5jaGlsZHJlbjtcbiAgICAgICAgY29uc3QgaSA9IHQucm91dGVUcmVlLnJvb3QuY2hpbGRyZW47XG4gICAgICAgIGNvbnN0IHMgPSBCKGUsIGkpO1xuICAgICAgICBzLmZvckVhY2goKGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgICAgIHQuY29udGV4dC52cGEuY2FuY2VsVXBkYXRlKCk7XG4gICAgICAgIH0pKTtcbiAgICAgICAgdGhpcy5hY3RpdmVOYXZpZ2F0aW9uID0gbnVsbDtcbiAgICAgICAgdGhpcy5pbnN0cnVjdGlvbnMgPSB0LnByZXZJbnN0cnVjdGlvbnM7XG4gICAgICAgIHRoaXMuaSA9IHQucHJldmlvdXNSb3V0ZVRyZWU7XG4gICAgICAgIHRoaXMuZXZlbnRzLnB1Ymxpc2gobmV3IE5hdmlnYXRpb25DYW5jZWxFdmVudCh0LmlkLCB0Lmluc3RydWN0aW9ucywgYGd1YXJkc1Jlc3VsdCBpcyAke3QuZ3VhcmRzUmVzdWx0fWApKTtcbiAgICAgICAgaWYgKGZhbHNlID09PSB0Lmd1YXJkc1Jlc3VsdCkge1xuICAgICAgICAgICAgdC5yZXNvbHZlKGZhbHNlKTtcbiAgICAgICAgICAgIHRoaXMucnVuTmV4dFRyYW5zaXRpb24odCk7XG4gICAgICAgIH0gZWxzZSB2b2lkIG4odGhpcy5lbnF1ZXVlKHQuZ3VhcmRzUmVzdWx0LCBcImFwaVwiLCB0Lm1hbmFnZWRTdGF0ZSwgdCksICgoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLmxvZ2dlci50cmFjZShgY2FuY2VsTmF2aWdhdGlvbih0cjolcykgLSBmaW5pc2hlZCByZWRpcmVjdGAsIHQpO1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIHJ1bk5leHRUcmFuc2l0aW9uKHQpIHtcbiAgICAgICAgaWYgKG51bGwgIT09IHRoaXMubmV4dFRyKSB7XG4gICAgICAgICAgICB0aGlzLmxvZ2dlci50cmFjZShgcnVuTmV4dFRyYW5zaXRpb24odHI6JXMpIC0+IHNjaGVkdWxpbmcgbmV4dFRyYW5zaXRpb246ICVzYCwgdCwgdGhpcy5uZXh0VHIpO1xuICAgICAgICAgICAgdGhpcy5wLnRhc2tRdWV1ZS5xdWV1ZVRhc2soKCgpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCB0ID0gdGhpcy5uZXh0VHI7XG4gICAgICAgICAgICAgICAgaWYgKG51bGwgIT09IHQpIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucnVuKHQpO1xuICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgdC5oYW5kbGVFcnJvcihlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZ2V0TmF2aWdhdGlvbk9wdGlvbnModCkge1xuICAgICAgICByZXR1cm4gTmF2aWdhdGlvbk9wdGlvbnMuY3JlYXRlKHtcbiAgICAgICAgICAgIC4uLnRoaXMub3B0aW9ucyxcbiAgICAgICAgICAgIC4uLnRcbiAgICAgICAgfSk7XG4gICAgfVxufTtcblxuT3QgPSBLKFsgWCgwLCBhKSwgWCgxLCBFKSwgWCgyLCBpKSwgWCgzLCB0dCksIFgoNCwgbnQpIF0sIE90KTtcblxuY29uc3QganQgPSB0LmNyZWF0ZUludGVyZmFjZShcIklWaWV3cG9ydEluc3RydWN0aW9uXCIpO1xuXG5jbGFzcyBWaWV3cG9ydEluc3RydWN0aW9uIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlLCBpLCBzLCBuLCBvLCByLCBhKSB7XG4gICAgICAgIHRoaXMuY29udGV4dCA9IHQ7XG4gICAgICAgIHRoaXMuYXBwZW5kID0gZTtcbiAgICAgICAgdGhpcy5vcGVuID0gaTtcbiAgICAgICAgdGhpcy5jbG9zZSA9IHM7XG4gICAgICAgIHRoaXMuY29tcG9uZW50ID0gbjtcbiAgICAgICAgdGhpcy52aWV3cG9ydCA9IG87XG4gICAgICAgIHRoaXMucGFyYW1zID0gcjtcbiAgICAgICAgdGhpcy5jaGlsZHJlbiA9IGE7XG4gICAgfVxuICAgIHN0YXRpYyBjcmVhdGUodCwgZSkge1xuICAgICAgICB2YXIgaSwgcywgbiwgbywgciwgYSwgaCwgYywgdTtcbiAgICAgICAgaWYgKHQgaW5zdGFuY2VvZiBWaWV3cG9ydEluc3RydWN0aW9uKSByZXR1cm4gdDtcbiAgICAgICAgaWYgKEcodCkpIHtcbiAgICAgICAgICAgIGNvbnN0IGwgPSBUeXBlZE5hdmlnYXRpb25JbnN0cnVjdGlvbi5jcmVhdGUodC5jb21wb25lbnQpO1xuICAgICAgICAgICAgY29uc3QgZCA9IG51bGwgIT09IChzID0gbnVsbCA9PT0gKGkgPSB0LmNoaWxkcmVuKSB8fCB2b2lkIDAgPT09IGkgPyB2b2lkIDAgOiBpLm1hcChWaWV3cG9ydEluc3RydWN0aW9uLmNyZWF0ZSkpICYmIHZvaWQgMCAhPT0gcyA/IHMgOiBbXTtcbiAgICAgICAgICAgIHJldHVybiBuZXcgVmlld3BvcnRJbnN0cnVjdGlvbihudWxsICE9PSAobyA9IG51bGwgIT09IChuID0gdC5jb250ZXh0KSAmJiB2b2lkIDAgIT09IG4gPyBuIDogZSkgJiYgdm9pZCAwICE9PSBvID8gbyA6IG51bGwsIG51bGwgIT09IChyID0gdC5hcHBlbmQpICYmIHZvaWQgMCAhPT0gciA/IHIgOiBmYWxzZSwgbnVsbCAhPT0gKGEgPSB0Lm9wZW4pICYmIHZvaWQgMCAhPT0gYSA/IGEgOiAwLCBudWxsICE9PSAoaCA9IHQuY2xvc2UpICYmIHZvaWQgMCAhPT0gaCA/IGggOiAwLCBsLCBudWxsICE9PSAoYyA9IHQudmlld3BvcnQpICYmIHZvaWQgMCAhPT0gYyA/IGMgOiBudWxsLCBudWxsICE9PSAodSA9IHQucGFyYW1zKSAmJiB2b2lkIDAgIT09IHUgPyB1IDogbnVsbCwgZCk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgbCA9IFR5cGVkTmF2aWdhdGlvbkluc3RydWN0aW9uLmNyZWF0ZSh0KTtcbiAgICAgICAgcmV0dXJuIG5ldyBWaWV3cG9ydEluc3RydWN0aW9uKG51bGwgIT09IGUgJiYgdm9pZCAwICE9PSBlID8gZSA6IG51bGwsIGZhbHNlLCAwLCAwLCBsLCBudWxsLCBudWxsLCBbXSk7XG4gICAgfVxuICAgIGNvbnRhaW5zKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IHRoaXMuY2hpbGRyZW47XG4gICAgICAgIGNvbnN0IGkgPSB0LmNoaWxkcmVuO1xuICAgICAgICBpZiAoZS5sZW5ndGggPCBpLmxlbmd0aCkgcmV0dXJuIGZhbHNlO1xuICAgICAgICBpZiAoIXRoaXMuY29tcG9uZW50LmVxdWFscyh0LmNvbXBvbmVudCkpIHJldHVybiBmYWxzZTtcbiAgICAgICAgZm9yIChsZXQgdCA9IDAsIHMgPSBpLmxlbmd0aDsgdCA8IHM7ICsrdCkgaWYgKCFlW3RdLmNvbnRhaW5zKGlbdF0pKSByZXR1cm4gZmFsc2U7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICBlcXVhbHModCkge1xuICAgICAgICBjb25zdCBlID0gdGhpcy5jaGlsZHJlbjtcbiAgICAgICAgY29uc3QgaSA9IHQuY2hpbGRyZW47XG4gICAgICAgIGlmIChlLmxlbmd0aCAhPT0gaS5sZW5ndGgpIHJldHVybiBmYWxzZTtcbiAgICAgICAgaWYgKCF0aGlzLmNvbXBvbmVudC5lcXVhbHModC5jb21wb25lbnQpIHx8IHRoaXMudmlld3BvcnQgIT09IHQudmlld3BvcnQgfHwgIVEodGhpcy5wYXJhbXMsIHQucGFyYW1zKSkgcmV0dXJuIGZhbHNlO1xuICAgICAgICBmb3IgKGxldCB0ID0gMCwgcyA9IGUubGVuZ3RoOyB0IDwgczsgKyt0KSBpZiAoIWVbdF0uZXF1YWxzKGlbdF0pKSByZXR1cm4gZmFsc2U7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICBjbG9uZSgpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBWaWV3cG9ydEluc3RydWN0aW9uKHRoaXMuY29udGV4dCwgdGhpcy5hcHBlbmQsIHRoaXMub3BlbiwgdGhpcy5jbG9zZSwgdGhpcy5jb21wb25lbnQuY2xvbmUoKSwgdGhpcy52aWV3cG9ydCwgbnVsbCA9PT0gdGhpcy5wYXJhbXMgPyBudWxsIDoge1xuICAgICAgICAgICAgLi4udGhpcy5wYXJhbXNcbiAgICAgICAgfSwgWyAuLi50aGlzLmNoaWxkcmVuIF0pO1xuICAgIH1cbiAgICB0b1VybENvbXBvbmVudCh0ID0gdHJ1ZSkge1xuICAgICAgICBjb25zdCBlID0gdGhpcy5jb21wb25lbnQudG9VcmxDb21wb25lbnQoKTtcbiAgICAgICAgY29uc3QgaSA9IG51bGwgPT09IHRoaXMucGFyYW1zIHx8IDAgPT09IE9iamVjdC5rZXlzKHRoaXMucGFyYW1zKS5sZW5ndGggPyBcIlwiIDogYCgke0J0KHRoaXMucGFyYW1zKX0pYDtcbiAgICAgICAgY29uc3QgcyA9IDAgPT09IGUubGVuZ3RoIHx8IG51bGwgPT09IHRoaXMudmlld3BvcnQgfHwgMCA9PT0gdGhpcy52aWV3cG9ydC5sZW5ndGggPyBcIlwiIDogYEAke3RoaXMudmlld3BvcnR9YDtcbiAgICAgICAgY29uc3QgbiA9IGAke1wiKFwiLnJlcGVhdCh0aGlzLm9wZW4pfSR7ZX0ke2l9JHtzfSR7XCIpXCIucmVwZWF0KHRoaXMuY2xvc2UpfWA7XG4gICAgICAgIGNvbnN0IG8gPSB0ID8gdGhpcy5jaGlsZHJlbi5tYXAoKHQgPT4gdC50b1VybENvbXBvbmVudCgpKSkuam9pbihcIitcIikgOiBcIlwiO1xuICAgICAgICBpZiAobi5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICBpZiAoby5sZW5ndGggPiAwKSByZXR1cm4gWyBuLCBvIF0uam9pbihcIi9cIik7XG4gICAgICAgICAgICByZXR1cm4gbjtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbztcbiAgICB9XG4gICAgdG9TdHJpbmcoKSB7XG4gICAgICAgIGNvbnN0IHQgPSBgYzoke3RoaXMuY29tcG9uZW50fWA7XG4gICAgICAgIGNvbnN0IGUgPSBudWxsID09PSB0aGlzLnZpZXdwb3J0IHx8IDAgPT09IHRoaXMudmlld3BvcnQubGVuZ3RoID8gXCJcIiA6IGB2aWV3cG9ydDoke3RoaXMudmlld3BvcnR9YDtcbiAgICAgICAgY29uc3QgaSA9IDAgPT09IHRoaXMuY2hpbGRyZW4ubGVuZ3RoID8gXCJcIiA6IGBjaGlsZHJlbjpbJHt0aGlzLmNoaWxkcmVuLm1hcChTdHJpbmcpLmpvaW4oXCIsXCIpfV1gO1xuICAgICAgICBjb25zdCBzID0gWyB0LCBlLCBpIF0uZmlsdGVyKEJvb2xlYW4pLmpvaW4oXCIsXCIpO1xuICAgICAgICByZXR1cm4gYFZQSSgke3N9KWA7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBCdCh0KSB7XG4gICAgY29uc3QgZSA9IE9iamVjdC5rZXlzKHQpO1xuICAgIGNvbnN0IGkgPSBBcnJheShlLmxlbmd0aCk7XG4gICAgY29uc3QgcyA9IFtdO1xuICAgIGNvbnN0IG4gPSBbXTtcbiAgICBmb3IgKGNvbnN0IHQgb2YgZSkgaWYgKGgodCkpIHMucHVzaChOdW1iZXIodCkpOyBlbHNlIG4ucHVzaCh0KTtcbiAgICBmb3IgKGxldCBvID0gMDsgbyA8IGUubGVuZ3RoOyArK28pIHtcbiAgICAgICAgY29uc3QgZSA9IHMuaW5kZXhPZihvKTtcbiAgICAgICAgaWYgKGUgPiAtMSkge1xuICAgICAgICAgICAgaVtvXSA9IHRbb107XG4gICAgICAgICAgICBzLnNwbGljZShlLCAxKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNvbnN0IGUgPSBuLnNoaWZ0KCk7XG4gICAgICAgICAgICBpW29dID0gYCR7ZX09JHt0W2VdfWA7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGkuam9pbihcIixcIik7XG59XG5cbmNvbnN0IER0ID0gZnVuY3Rpb24oKSB7XG4gICAgbGV0IHQgPSAwO1xuICAgIGNvbnN0IGUgPSBuZXcgTWFwO1xuICAgIHJldHVybiBmdW5jdGlvbihpKSB7XG4gICAgICAgIGxldCBzID0gZS5nZXQoaSk7XG4gICAgICAgIGlmICh2b2lkIDAgPT09IHMpIGUuc2V0KGksIHMgPSArK3QpO1xuICAgICAgICByZXR1cm4gcztcbiAgICB9O1xufSgpO1xuXG5jbGFzcyBWaWV3cG9ydEluc3RydWN0aW9uVHJlZSB7XG4gICAgY29uc3RydWN0b3IodCwgZSwgaSwgcywgbikge1xuICAgICAgICB0aGlzLm9wdGlvbnMgPSB0O1xuICAgICAgICB0aGlzLmlzQWJzb2x1dGUgPSBlO1xuICAgICAgICB0aGlzLmNoaWxkcmVuID0gaTtcbiAgICAgICAgdGhpcy5xdWVyeVBhcmFtcyA9IHM7XG4gICAgICAgIHRoaXMuZnJhZ21lbnQgPSBuO1xuICAgIH1cbiAgICBzdGF0aWMgY3JlYXRlKHQsIGUpIHtcbiAgICAgICAgY29uc3QgaSA9IE5hdmlnYXRpb25PcHRpb25zLmNyZWF0ZSh7XG4gICAgICAgICAgICAuLi5lXG4gICAgICAgIH0pO1xuICAgICAgICBpZiAodCBpbnN0YW5jZW9mIFZpZXdwb3J0SW5zdHJ1Y3Rpb25UcmVlKSByZXR1cm4gbmV3IFZpZXdwb3J0SW5zdHJ1Y3Rpb25UcmVlKGksIHQuaXNBYnNvbHV0ZSwgdC5jaGlsZHJlbi5tYXAoKHQgPT4gVmlld3BvcnRJbnN0cnVjdGlvbi5jcmVhdGUodCwgaS5jb250ZXh0KSkpLCB0LnF1ZXJ5UGFyYW1zLCB0LmZyYWdtZW50KTtcbiAgICAgICAgaWYgKHQgaW5zdGFuY2VvZiBBcnJheSkgcmV0dXJuIG5ldyBWaWV3cG9ydEluc3RydWN0aW9uVHJlZShpLCBmYWxzZSwgdC5tYXAoKHQgPT4gVmlld3BvcnRJbnN0cnVjdGlvbi5jcmVhdGUodCwgaS5jb250ZXh0KSkpLCBUdCwgbnVsbCk7XG4gICAgICAgIGlmIChcInN0cmluZ1wiID09PSB0eXBlb2YgdCkge1xuICAgICAgICAgICAgY29uc3QgZSA9IFJvdXRlRXhwcmVzc2lvbi5wYXJzZSh0LCBpLnVzZVVybEZyYWdtZW50SGFzaCk7XG4gICAgICAgICAgICByZXR1cm4gZS50b0luc3RydWN0aW9uVHJlZShpKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbmV3IFZpZXdwb3J0SW5zdHJ1Y3Rpb25UcmVlKGksIGZhbHNlLCBbIFZpZXdwb3J0SW5zdHJ1Y3Rpb24uY3JlYXRlKHQsIGkuY29udGV4dCkgXSwgVHQsIG51bGwpO1xuICAgIH1cbiAgICBlcXVhbHModCkge1xuICAgICAgICBjb25zdCBlID0gdGhpcy5jaGlsZHJlbjtcbiAgICAgICAgY29uc3QgaSA9IHQuY2hpbGRyZW47XG4gICAgICAgIGlmIChlLmxlbmd0aCAhPT0gaS5sZW5ndGgpIHJldHVybiBmYWxzZTtcbiAgICAgICAgZm9yIChsZXQgdCA9IDAsIHMgPSBlLmxlbmd0aDsgdCA8IHM7ICsrdCkgaWYgKCFlW3RdLmVxdWFscyhpW3RdKSkgcmV0dXJuIGZhbHNlO1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgdG9VcmwodCA9IGZhbHNlKSB7XG4gICAgICAgIHZhciBlO1xuICAgICAgICBsZXQgaTtcbiAgICAgICAgbGV0IHM7XG4gICAgICAgIGlmICh0KSB7XG4gICAgICAgICAgICBpID0gXCJcIjtcbiAgICAgICAgICAgIHMgPSBgIyR7dGhpcy50b1BhdGgoKX1gO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgaSA9IHRoaXMudG9QYXRoKCk7XG4gICAgICAgICAgICBzID0gbnVsbCAhPT0gKGUgPSB0aGlzLmZyYWdtZW50KSAmJiB2b2lkIDAgIT09IGUgPyBlIDogXCJcIjtcbiAgICAgICAgfVxuICAgICAgICBsZXQgbiA9IHRoaXMucXVlcnlQYXJhbXMudG9TdHJpbmcoKTtcbiAgICAgICAgbiA9IFwiXCIgPT09IG4gPyBcIlwiIDogYD8ke259YDtcbiAgICAgICAgY29uc3QgbyA9IGAke2l9JHtzfSR7bn1gO1xuICAgICAgICByZXR1cm4gbztcbiAgICB9XG4gICAgdG9QYXRoKCkge1xuICAgICAgICBjb25zdCB0ID0gdGhpcy5jaGlsZHJlbi5tYXAoKHQgPT4gdC50b1VybENvbXBvbmVudCgpKSkuam9pbihcIitcIik7XG4gICAgICAgIHJldHVybiB0O1xuICAgIH1cbiAgICB0b1N0cmluZygpIHtcbiAgICAgICAgcmV0dXJuIGBbJHt0aGlzLmNoaWxkcmVuLm1hcChTdHJpbmcpLmpvaW4oXCIsXCIpfV1gO1xuICAgIH1cbn1cblxudmFyIE10O1xuXG4oZnVuY3Rpb24odCkge1xuICAgIHRbdFtcInN0cmluZ1wiXSA9IDBdID0gXCJzdHJpbmdcIjtcbiAgICB0W3RbXCJWaWV3cG9ydEluc3RydWN0aW9uXCJdID0gMV0gPSBcIlZpZXdwb3J0SW5zdHJ1Y3Rpb25cIjtcbiAgICB0W3RbXCJDdXN0b21FbGVtZW50RGVmaW5pdGlvblwiXSA9IDJdID0gXCJDdXN0b21FbGVtZW50RGVmaW5pdGlvblwiO1xuICAgIHRbdFtcIlByb21pc2VcIl0gPSAzXSA9IFwiUHJvbWlzZVwiO1xuICAgIHRbdFtcIklSb3V0ZVZpZXdNb2RlbFwiXSA9IDRdID0gXCJJUm91dGVWaWV3TW9kZWxcIjtcbn0pKE10IHx8IChNdCA9IHt9KSk7XG5cbmNsYXNzIFR5cGVkTmF2aWdhdGlvbkluc3RydWN0aW9uIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlKSB7XG4gICAgICAgIHRoaXMudHlwZSA9IHQ7XG4gICAgICAgIHRoaXMudmFsdWUgPSBlO1xuICAgIH1cbiAgICBzdGF0aWMgY3JlYXRlKHQpIHtcbiAgICAgICAgaWYgKHQgaW5zdGFuY2VvZiBUeXBlZE5hdmlnYXRpb25JbnN0cnVjdGlvbikgcmV0dXJuIHQ7XG4gICAgICAgIGlmIChcInN0cmluZ1wiID09PSB0eXBlb2YgdCkgcmV0dXJuIG5ldyBUeXBlZE5hdmlnYXRpb25JbnN0cnVjdGlvbigwLCB0KTsgZWxzZSBpZiAoIXIodCkpIFkoXCJmdW5jdGlvbi9jbGFzcyBvciBvYmplY3RcIiwgXCJcIiwgdCk7IGVsc2UgaWYgKFwiZnVuY3Rpb25cIiA9PT0gdHlwZW9mIHQpIGlmICh5LmlzVHlwZSh0KSkge1xuICAgICAgICAgICAgY29uc3QgZSA9IHkuZ2V0RGVmaW5pdGlvbih0KTtcbiAgICAgICAgICAgIHJldHVybiBuZXcgVHlwZWROYXZpZ2F0aW9uSW5zdHJ1Y3Rpb24oMiwgZSk7XG4gICAgICAgIH0gZWxzZSByZXR1cm4gVHlwZWROYXZpZ2F0aW9uSW5zdHJ1Y3Rpb24uY3JlYXRlKHQoKSk7IGVsc2UgaWYgKHQgaW5zdGFuY2VvZiBQcm9taXNlKSByZXR1cm4gbmV3IFR5cGVkTmF2aWdhdGlvbkluc3RydWN0aW9uKDMsIHQpOyBlbHNlIGlmIChHKHQpKSB7XG4gICAgICAgICAgICBjb25zdCBlID0gVmlld3BvcnRJbnN0cnVjdGlvbi5jcmVhdGUodCk7XG4gICAgICAgICAgICByZXR1cm4gbmV3IFR5cGVkTmF2aWdhdGlvbkluc3RydWN0aW9uKDEsIGUpO1xuICAgICAgICB9IGVsc2UgaWYgKHYodCkpIHJldHVybiBuZXcgVHlwZWROYXZpZ2F0aW9uSW5zdHJ1Y3Rpb24oNCwgdCk7IGVsc2UgaWYgKHQgaW5zdGFuY2VvZiBiKSByZXR1cm4gbmV3IFR5cGVkTmF2aWdhdGlvbkluc3RydWN0aW9uKDIsIHQpOyBlbHNlIGlmIChGKHQpKSB7XG4gICAgICAgICAgICBjb25zdCBlID0geS5kZWZpbmUodCk7XG4gICAgICAgICAgICBjb25zdCBpID0geS5nZXREZWZpbml0aW9uKGUpO1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBUeXBlZE5hdmlnYXRpb25JbnN0cnVjdGlvbigyLCBpKTtcbiAgICAgICAgfSBlbHNlIHRocm93IG5ldyBFcnJvcihgSW52YWxpZCBjb21wb25lbnQgJHtEKHQpfTogbXVzdCBiZSBlaXRoZXIgYSBjbGFzcywgYSBjdXN0b20gZWxlbWVudCBWaWV3TW9kZWwsIG9yIGEgKHBhcnRpYWwpIGN1c3RvbSBlbGVtZW50IGRlZmluaXRpb25gKTtcbiAgICB9XG4gICAgZXF1YWxzKHQpIHtcbiAgICAgICAgc3dpdGNoICh0aGlzLnR5cGUpIHtcbiAgICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgY2FzZSA0OlxuICAgICAgICAgIGNhc2UgMzpcbiAgICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgICByZXR1cm4gdGhpcy50eXBlID09PSB0LnR5cGUgJiYgdGhpcy52YWx1ZSA9PT0gdC52YWx1ZTtcblxuICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnR5cGUgPT09IHQudHlwZSAmJiB0aGlzLnZhbHVlLmVxdWFscyh0LnZhbHVlKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBjbG9uZSgpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBUeXBlZE5hdmlnYXRpb25JbnN0cnVjdGlvbih0aGlzLnR5cGUsIHRoaXMudmFsdWUpO1xuICAgIH1cbiAgICB0b1VybENvbXBvbmVudCgpIHtcbiAgICAgICAgc3dpdGNoICh0aGlzLnR5cGUpIHtcbiAgICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgICByZXR1cm4gdGhpcy52YWx1ZS5uYW1lO1xuXG4gICAgICAgICAgY2FzZSA0OlxuICAgICAgICAgIGNhc2UgMzpcbiAgICAgICAgICAgIHJldHVybiBgYXUkb2JqJHtEdCh0aGlzLnZhbHVlKX1gO1xuXG4gICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgcmV0dXJuIHRoaXMudmFsdWUudG9VcmxDb21wb25lbnQoKTtcblxuICAgICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnZhbHVlO1xuICAgICAgICB9XG4gICAgfVxuICAgIHRvU3RyaW5nKCkge1xuICAgICAgICBzd2l0Y2ggKHRoaXMudHlwZSkge1xuICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgIHJldHVybiBgQ0VEZWYobmFtZTonJHt0aGlzLnZhbHVlLm5hbWV9JylgO1xuXG4gICAgICAgICAgY2FzZSAzOlxuICAgICAgICAgICAgcmV0dXJuIGBQcm9taXNlYDtcblxuICAgICAgICAgIGNhc2UgNDpcbiAgICAgICAgICAgIHJldHVybiBgVk0obmFtZTonJHt5LmdldERlZmluaXRpb24odGhpcy52YWx1ZS5jb25zdHJ1Y3RvcikubmFtZX0nKWA7XG5cbiAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICByZXR1cm4gdGhpcy52YWx1ZS50b1N0cmluZygpO1xuXG4gICAgICAgICAgY2FzZSAwOlxuICAgICAgICAgICAgcmV0dXJuIGAnJHt0aGlzLnZhbHVlfSdgO1xuICAgICAgICB9XG4gICAgfVxufVxuXG5jb25zdCBxdCA9IGw7XG5cbmZ1bmN0aW9uIEh0KHQsIGUpIHtcbiAgICBpZiAoIVEodC5wYXJhbXMsIGUucGFyYW1zKSkgcmV0dXJuIFwiaW52b2tlLWxpZmVjeWNsZXNcIjtcbiAgICByZXR1cm4gXCJub25lXCI7XG59XG5cbmNsYXNzIFJvdXRlQ29uZmlnIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlLCBpLCBzLCBuLCBvLCByLCBhLCBoKSB7XG4gICAgICAgIHRoaXMuaWQgPSB0O1xuICAgICAgICB0aGlzLnBhdGggPSBlO1xuICAgICAgICB0aGlzLnRpdGxlID0gaTtcbiAgICAgICAgdGhpcy5yZWRpcmVjdFRvID0gcztcbiAgICAgICAgdGhpcy5jYXNlU2Vuc2l0aXZlID0gbjtcbiAgICAgICAgdGhpcy50cmFuc2l0aW9uUGxhbiA9IG87XG4gICAgICAgIHRoaXMudmlld3BvcnQgPSByO1xuICAgICAgICB0aGlzLmRhdGEgPSBhO1xuICAgICAgICB0aGlzLnJvdXRlcyA9IGg7XG4gICAgfVxuICAgIHN0YXRpYyBjcmVhdGUodCwgZSkge1xuICAgICAgICB2YXIgaSwgcywgbiwgbywgciwgYSwgaCwgYywgdSwgbCwgZCwgZiwgcCwgZywgdiwgdywgbSwgJCwgeCwgeSwgRSwgYiwgUywgUjtcbiAgICAgICAgaWYgKFwic3RyaW5nXCIgPT09IHR5cGVvZiB0IHx8IHQgaW5zdGFuY2VvZiBBcnJheSkge1xuICAgICAgICAgICAgY29uc3QgdSA9IHQ7XG4gICAgICAgICAgICBjb25zdCBsID0gbnVsbCAhPT0gKGkgPSBudWxsID09PSBlIHx8IHZvaWQgMCA9PT0gZSA/IHZvaWQgMCA6IGUucmVkaXJlY3RUbykgJiYgdm9pZCAwICE9PSBpID8gaSA6IG51bGw7XG4gICAgICAgICAgICBjb25zdCBkID0gbnVsbCAhPT0gKHMgPSBudWxsID09PSBlIHx8IHZvaWQgMCA9PT0gZSA/IHZvaWQgMCA6IGUuY2FzZVNlbnNpdGl2ZSkgJiYgdm9pZCAwICE9PSBzID8gcyA6IGZhbHNlO1xuICAgICAgICAgICAgY29uc3QgZiA9IG51bGwgIT09IChuID0gbnVsbCA9PT0gZSB8fCB2b2lkIDAgPT09IGUgPyB2b2lkIDAgOiBlLmlkKSAmJiB2b2lkIDAgIT09IG4gPyBuIDogdSBpbnN0YW5jZW9mIEFycmF5ID8gdVswXSA6IHU7XG4gICAgICAgICAgICBjb25zdCBwID0gbnVsbCAhPT0gKG8gPSBudWxsID09PSBlIHx8IHZvaWQgMCA9PT0gZSA/IHZvaWQgMCA6IGUudGl0bGUpICYmIHZvaWQgMCAhPT0gbyA/IG8gOiBudWxsO1xuICAgICAgICAgICAgY29uc3QgZyA9IG51bGwgIT09IChyID0gbnVsbCA9PT0gZSB8fCB2b2lkIDAgPT09IGUgPyB2b2lkIDAgOiBlLnRyYW5zaXRpb25QbGFuKSAmJiB2b2lkIDAgIT09IHIgPyByIDogSHQ7XG4gICAgICAgICAgICBjb25zdCB2ID0gbnVsbCAhPT0gKGEgPSBudWxsID09PSBlIHx8IHZvaWQgMCA9PT0gZSA/IHZvaWQgMCA6IGUudmlld3BvcnQpICYmIHZvaWQgMCAhPT0gYSA/IGEgOiBudWxsO1xuICAgICAgICAgICAgY29uc3QgdyA9IG51bGwgIT09IChoID0gbnVsbCA9PT0gZSB8fCB2b2lkIDAgPT09IGUgPyB2b2lkIDAgOiBlLmRhdGEpICYmIHZvaWQgMCAhPT0gaCA/IGggOiB7fTtcbiAgICAgICAgICAgIGNvbnN0IG0gPSBudWxsICE9PSAoYyA9IG51bGwgPT09IGUgfHwgdm9pZCAwID09PSBlID8gdm9pZCAwIDogZS5yb3V0ZXMpICYmIHZvaWQgMCAhPT0gYyA/IGMgOiBxdDtcbiAgICAgICAgICAgIHJldHVybiBuZXcgUm91dGVDb25maWcoZiwgdSwgcCwgbCwgZCwgZywgdiwgdywgbSk7XG4gICAgICAgIH0gZWxzZSBpZiAoXCJvYmplY3RcIiA9PT0gdHlwZW9mIHQpIHtcbiAgICAgICAgICAgIGNvbnN0IGkgPSB0O1xuICAgICAgICAgICAgXyhpLCBcIlwiKTtcbiAgICAgICAgICAgIGNvbnN0IHMgPSBudWxsICE9PSAobCA9IG51bGwgIT09ICh1ID0gaS5wYXRoKSAmJiB2b2lkIDAgIT09IHUgPyB1IDogbnVsbCA9PT0gZSB8fCB2b2lkIDAgPT09IGUgPyB2b2lkIDAgOiBlLnBhdGgpICYmIHZvaWQgMCAhPT0gbCA/IGwgOiBudWxsO1xuICAgICAgICAgICAgY29uc3QgbiA9IG51bGwgIT09IChmID0gbnVsbCAhPT0gKGQgPSBpLnRpdGxlKSAmJiB2b2lkIDAgIT09IGQgPyBkIDogbnVsbCA9PT0gZSB8fCB2b2lkIDAgPT09IGUgPyB2b2lkIDAgOiBlLnRpdGxlKSAmJiB2b2lkIDAgIT09IGYgPyBmIDogbnVsbDtcbiAgICAgICAgICAgIGNvbnN0IG8gPSBudWxsICE9PSAoZyA9IG51bGwgIT09IChwID0gaS5yZWRpcmVjdFRvKSAmJiB2b2lkIDAgIT09IHAgPyBwIDogbnVsbCA9PT0gZSB8fCB2b2lkIDAgPT09IGUgPyB2b2lkIDAgOiBlLnJlZGlyZWN0VG8pICYmIHZvaWQgMCAhPT0gZyA/IGcgOiBudWxsO1xuICAgICAgICAgICAgY29uc3QgciA9IG51bGwgIT09ICh3ID0gbnVsbCAhPT0gKHYgPSBpLmNhc2VTZW5zaXRpdmUpICYmIHZvaWQgMCAhPT0gdiA/IHYgOiBudWxsID09PSBlIHx8IHZvaWQgMCA9PT0gZSA/IHZvaWQgMCA6IGUuY2FzZVNlbnNpdGl2ZSkgJiYgdm9pZCAwICE9PSB3ID8gdyA6IGZhbHNlO1xuICAgICAgICAgICAgY29uc3QgYSA9IG51bGwgIT09ICgkID0gbnVsbCAhPT0gKG0gPSBpLmlkKSAmJiB2b2lkIDAgIT09IG0gPyBtIDogbnVsbCA9PT0gZSB8fCB2b2lkIDAgPT09IGUgPyB2b2lkIDAgOiBlLmlkKSAmJiB2b2lkIDAgIT09ICQgPyAkIDogcyBpbnN0YW5jZW9mIEFycmF5ID8gc1swXSA6IHM7XG4gICAgICAgICAgICBjb25zdCBoID0gbnVsbCAhPT0gKHkgPSBudWxsICE9PSAoeCA9IGkudHJhbnNpdGlvblBsYW4pICYmIHZvaWQgMCAhPT0geCA/IHggOiBudWxsID09PSBlIHx8IHZvaWQgMCA9PT0gZSA/IHZvaWQgMCA6IGUudHJhbnNpdGlvblBsYW4pICYmIHZvaWQgMCAhPT0geSA/IHkgOiBIdDtcbiAgICAgICAgICAgIGNvbnN0IGMgPSBudWxsICE9PSAoYiA9IG51bGwgIT09IChFID0gaS52aWV3cG9ydCkgJiYgdm9pZCAwICE9PSBFID8gRSA6IG51bGwgPT09IGUgfHwgdm9pZCAwID09PSBlID8gdm9pZCAwIDogZS52aWV3cG9ydCkgJiYgdm9pZCAwICE9PSBiID8gYiA6IG51bGw7XG4gICAgICAgICAgICBjb25zdCBDID0ge1xuICAgICAgICAgICAgICAgIC4uLm51bGwgPT09IGUgfHwgdm9pZCAwID09PSBlID8gdm9pZCAwIDogZS5kYXRhLFxuICAgICAgICAgICAgICAgIC4uLmkuZGF0YVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGNvbnN0IGsgPSBbIC4uLm51bGwgIT09IChTID0gaS5yb3V0ZXMpICYmIHZvaWQgMCAhPT0gUyA/IFMgOiBxdCwgLi4ubnVsbCAhPT0gKFIgPSBudWxsID09PSBlIHx8IHZvaWQgMCA9PT0gZSA/IHZvaWQgMCA6IGUucm91dGVzKSAmJiB2b2lkIDAgIT09IFIgPyBSIDogcXQgXTtcbiAgICAgICAgICAgIHJldHVybiBuZXcgUm91dGVDb25maWcoYSwgcywgbiwgbywgciwgaCwgYywgQywgayk7XG4gICAgICAgIH0gZWxzZSBZKFwic3RyaW5nLCBmdW5jdGlvbi9jbGFzcyBvciBvYmplY3RcIiwgXCJcIiwgdCk7XG4gICAgfVxuICAgIHN0YXRpYyBjb25maWd1cmUodCwgZSkge1xuICAgICAgICBjb25zdCBpID0gUm91dGVDb25maWcuY3JlYXRlKHQsIGUpO1xuICAgICAgICB1LmRlZmluZShGdC5uYW1lLCBpLCBlKTtcbiAgICAgICAgcmV0dXJuIGU7XG4gICAgfVxuICAgIHN0YXRpYyBnZXRDb25maWcodCkge1xuICAgICAgICBpZiAoIXUuaGFzT3duKEZ0Lm5hbWUsIHQpKSBGdC5jb25maWd1cmUoe30sIHQpO1xuICAgICAgICByZXR1cm4gdS5nZXRPd24oRnQubmFtZSwgdCk7XG4gICAgfVxuICAgIHNhdmVUbyh0KSB7XG4gICAgICAgIHUuZGVmaW5lKEZ0Lm5hbWUsIHRoaXMsIHQpO1xuICAgIH1cbn1cblxuY2xhc3MgQ2hpbGRSb3V0ZUNvbmZpZyBleHRlbmRzIFJvdXRlQ29uZmlnIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlLCBpLCBzLCBuLCBvLCByLCBhLCBoLCBjKSB7XG4gICAgICAgIHN1cGVyKHQsIGUsIGksIHMsIG4sIG8sIHIsIGEsIGgpO1xuICAgICAgICB0aGlzLmNvbXBvbmVudCA9IGM7XG4gICAgfVxufVxuXG5jb25zdCBGdCA9IHtcbiAgICBuYW1lOiBjLnJlc291cmNlLmtleUZvcihcInJvdXRlXCIpLFxuICAgIGlzQ29uZmlndXJlZCh0KSB7XG4gICAgICAgIHJldHVybiB1Lmhhc093bihGdC5uYW1lLCB0KTtcbiAgICB9LFxuICAgIGNvbmZpZ3VyZSh0LCBlKSB7XG4gICAgICAgIGNvbnN0IGkgPSBSb3V0ZUNvbmZpZy5jcmVhdGUodCwgZSk7XG4gICAgICAgIHUuZGVmaW5lKEZ0Lm5hbWUsIGksIGUpO1xuICAgICAgICByZXR1cm4gZTtcbiAgICB9LFxuICAgIGdldENvbmZpZyh0KSB7XG4gICAgICAgIGlmICghRnQuaXNDb25maWd1cmVkKHQpKSBGdC5jb25maWd1cmUoe30sIHQpO1xuICAgICAgICByZXR1cm4gdS5nZXRPd24oRnQubmFtZSwgdCk7XG4gICAgfVxufTtcblxuZnVuY3Rpb24genQodCkge1xuICAgIHJldHVybiBmdW5jdGlvbihlKSB7XG4gICAgICAgIHJldHVybiBGdC5jb25maWd1cmUodCwgZSk7XG4gICAgfTtcbn1cblxuY2xhc3MgUm91dGVEZWZpbml0aW9uIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlKSB7XG4gICAgICAgIHZhciBpLCBzLCBuLCBvLCByO1xuICAgICAgICB0aGlzLmNvbmZpZyA9IHQ7XG4gICAgICAgIHRoaXMuY29tcG9uZW50ID0gZTtcbiAgICAgICAgdGhpcy5oYXNFeHBsaWNpdFBhdGggPSBudWxsICE9PSB0LnBhdGg7XG4gICAgICAgIHRoaXMuY2FzZVNlbnNpdGl2ZSA9IHQuY2FzZVNlbnNpdGl2ZTtcbiAgICAgICAgdGhpcy5wYXRoID0gTShudWxsICE9PSAoaSA9IHQucGF0aCkgJiYgdm9pZCAwICE9PSBpID8gaSA6IGUubmFtZSk7XG4gICAgICAgIHRoaXMucmVkaXJlY3RUbyA9IG51bGwgIT09IChzID0gdC5yZWRpcmVjdFRvKSAmJiB2b2lkIDAgIT09IHMgPyBzIDogbnVsbDtcbiAgICAgICAgdGhpcy52aWV3cG9ydCA9IG51bGwgIT09IChuID0gdC52aWV3cG9ydCkgJiYgdm9pZCAwICE9PSBuID8gbiA6IFwiZGVmYXVsdFwiO1xuICAgICAgICB0aGlzLmlkID0gcShudWxsICE9PSAobyA9IHQuaWQpICYmIHZvaWQgMCAhPT0gbyA/IG8gOiB0aGlzLnBhdGgpO1xuICAgICAgICB0aGlzLmRhdGEgPSBudWxsICE9PSAociA9IHQuZGF0YSkgJiYgdm9pZCAwICE9PSByID8gciA6IHt9O1xuICAgIH1cbiAgICBzdGF0aWMgcmVzb2x2ZSh0LCBlKSB7XG4gICAgICAgIGlmIChXKHQpKSByZXR1cm4gbmV3IFJvdXRlRGVmaW5pdGlvbih0LCBudWxsKTtcbiAgICAgICAgcmV0dXJuIG4odGhpcy5yZXNvbHZlQ3VzdG9tRWxlbWVudERlZmluaXRpb24odCwgZSksIChlID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGkgPSB6KHQpID8ge1xuICAgICAgICAgICAgICAgIC4uLkZ0LmdldENvbmZpZyhlLlR5cGUpLFxuICAgICAgICAgICAgICAgIC4uLnRcbiAgICAgICAgICAgIH0gOiBGdC5nZXRDb25maWcoZS5UeXBlKTtcbiAgICAgICAgICAgIGlmICghdS5oYXNPd24oRnQubmFtZSwgZSkpIHtcbiAgICAgICAgICAgICAgICBjb25zdCB0ID0gbmV3IFJvdXRlRGVmaW5pdGlvbihpLCBlKTtcbiAgICAgICAgICAgICAgICB1LmRlZmluZShGdC5uYW1lLCB0LCBlKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgbGV0IHQgPSB1LmdldE93bihGdC5uYW1lLCBlKTtcbiAgICAgICAgICAgICAgICBpZiAodC5jb25maWcgIT09IGkpIHtcbiAgICAgICAgICAgICAgICAgICAgdCA9IG5ldyBSb3V0ZURlZmluaXRpb24oaSwgZSk7XG4gICAgICAgICAgICAgICAgICAgIHUuZGVmaW5lKEZ0Lm5hbWUsIHQsIGUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB1LmdldE93bihGdC5uYW1lLCBlKTtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICBzdGF0aWMgcmVzb2x2ZUN1c3RvbUVsZW1lbnREZWZpbml0aW9uKHQsIGUpIHtcbiAgICAgICAgaWYgKHoodCkpIHJldHVybiB0aGlzLnJlc29sdmVDdXN0b21FbGVtZW50RGVmaW5pdGlvbih0LmNvbXBvbmVudCwgZSk7XG4gICAgICAgIGNvbnN0IGkgPSBUeXBlZE5hdmlnYXRpb25JbnN0cnVjdGlvbi5jcmVhdGUodCk7XG4gICAgICAgIHN3aXRjaCAoaS50eXBlKSB7XG4gICAgICAgICAgY2FzZSAwOlxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGlmICh2b2lkIDAgPT09IGUpIHRocm93IG5ldyBFcnJvcihgV2hlbiByZXRyaWV2aW5nIHRoZSBSb3V0ZURlZmluaXRpb24gZm9yIGEgY29tcG9uZW50IG5hbWUsIGEgUm91dGVDb250ZXh0ICh0aGF0IGNhbiByZXNvbHZlIGl0KSBtdXN0IGJlIHByb3ZpZGVkYCk7XG4gICAgICAgICAgICAgICAgY29uc3QgdCA9IGUuY29udGFpbmVyLmZpbmQoeSwgaS52YWx1ZSk7XG4gICAgICAgICAgICAgICAgaWYgKG51bGwgPT09IHQpIHRocm93IG5ldyBFcnJvcihgQ291bGQgbm90IGZpbmQgYSBDdXN0b21FbGVtZW50IG5hbWVkICcke2kudmFsdWV9JyBpbiB0aGUgY3VycmVudCBjb250YWluZXIgc2NvcGUgb2YgJHtlfS4gVGhpcyBtZWFucyB0aGUgY29tcG9uZW50IGlzIG5laXRoZXIgcmVnaXN0ZXJlZCBhdCBBdXJlbGlhIHN0YXJ0dXAgbm9yIHZpYSB0aGUgJ2RlcGVuZGVuY2llcycgZGVjb3JhdG9yIG9yIHN0YXRpYyBwcm9wZXJ0eS5gKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gdDtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgIHJldHVybiBpLnZhbHVlO1xuXG4gICAgICAgICAgY2FzZSA0OlxuICAgICAgICAgICAgcmV0dXJuIHkuZ2V0RGVmaW5pdGlvbihpLnZhbHVlLmNvbnN0cnVjdG9yKTtcblxuICAgICAgICAgIGNhc2UgMzpcbiAgICAgICAgICAgIGlmICh2b2lkIDAgPT09IGUpIHRocm93IG5ldyBFcnJvcihgUm91dGVDb250ZXh0IG11c3QgYmUgcHJvdmlkZWQgd2hlbiByZXNvbHZpbmcgYW4gaW1wb3J0ZWQgbW9kdWxlYCk7XG4gICAgICAgICAgICByZXR1cm4gZS5yZXNvbHZlTGF6eShpLnZhbHVlKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZWdpc3Rlcih0KSB7XG4gICAgICAgIHZhciBlO1xuICAgICAgICBudWxsID09PSAoZSA9IHRoaXMuY29tcG9uZW50KSB8fCB2b2lkIDAgPT09IGUgPyB2b2lkIDAgOiBlLnJlZ2lzdGVyKHQpO1xuICAgIH1cbiAgICB0b1VybENvbXBvbmVudCgpIHtcbiAgICAgICAgcmV0dXJuIFwibm90LWltcGxlbWVudGVkXCI7XG4gICAgfVxuICAgIHRvU3RyaW5nKCkge1xuICAgICAgICBjb25zdCB0ID0gbnVsbCA9PT0gdGhpcy5jb25maWcucGF0aCA/IFwibnVsbFwiIDogYCcke3RoaXMuY29uZmlnLnBhdGh9J2A7XG4gICAgICAgIGlmIChudWxsICE9PSB0aGlzLmNvbXBvbmVudCkgcmV0dXJuIGBSRChjb25maWcucGF0aDoke3R9LGMubmFtZTonJHt0aGlzLmNvbXBvbmVudC5uYW1lfScpYDsgZWxzZSByZXR1cm4gYFJEKGNvbmZpZy5wYXRoOiR7dH0scmVkaXJlY3RUbzonJHt0aGlzLnJlZGlyZWN0VG99JylgO1xuICAgIH1cbn1cblxuY29uc3QgV3QgPSBuZXcgV2Vha01hcDtcblxuY2xhc3MgQ29tcG9uZW50QWdlbnQge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUsIHMsIG4sIG8pIHtcbiAgICAgICAgdmFyIHIsIGEsIGgsIGM7XG4gICAgICAgIHRoaXMuaW5zdGFuY2UgPSB0O1xuICAgICAgICB0aGlzLmNvbnRyb2xsZXIgPSBlO1xuICAgICAgICB0aGlzLmRlZmluaXRpb24gPSBzO1xuICAgICAgICB0aGlzLnJvdXRlTm9kZSA9IG47XG4gICAgICAgIHRoaXMuY3R4ID0gbztcbiAgICAgICAgdGhpcy5oID0gby5jb250YWluZXIuZ2V0KGkpLnNjb3BlVG8oYENvbXBvbmVudEFnZW50PCR7by5mcmllbmRseVBhdGh9PmApO1xuICAgICAgICB0aGlzLmgudHJhY2UoYGNvbnN0cnVjdG9yKClgKTtcbiAgICAgICAgY29uc3QgdSA9IGUubGlmZWN5Y2xlSG9va3M7XG4gICAgICAgIHRoaXMuY2FuTG9hZEhvb2tzID0gKG51bGwgIT09IChyID0gdS5jYW5Mb2FkKSAmJiB2b2lkIDAgIT09IHIgPyByIDogW10pLm1hcCgodCA9PiB0Lmluc3RhbmNlKSk7XG4gICAgICAgIHRoaXMubG9hZEhvb2tzID0gKG51bGwgIT09IChhID0gdS5sb2FkKSAmJiB2b2lkIDAgIT09IGEgPyBhIDogW10pLm1hcCgodCA9PiB0Lmluc3RhbmNlKSk7XG4gICAgICAgIHRoaXMuY2FuVW5sb2FkSG9va3MgPSAobnVsbCAhPT0gKGggPSB1LmNhblVubG9hZCkgJiYgdm9pZCAwICE9PSBoID8gaCA6IFtdKS5tYXAoKHQgPT4gdC5pbnN0YW5jZSkpO1xuICAgICAgICB0aGlzLnVubG9hZEhvb2tzID0gKG51bGwgIT09IChjID0gdS51bmxvYWQpICYmIHZvaWQgMCAhPT0gYyA/IGMgOiBbXSkubWFwKCh0ID0+IHQuaW5zdGFuY2UpKTtcbiAgICAgICAgdGhpcy51ID0gXCJjYW5Mb2FkXCIgaW4gdDtcbiAgICAgICAgdGhpcy5sID0gXCJsb2FkXCIgaW4gdDtcbiAgICAgICAgdGhpcy5nID0gXCJjYW5VbmxvYWRcIiBpbiB0O1xuICAgICAgICB0aGlzLnYgPSBcInVubG9hZFwiIGluIHQ7XG4gICAgfVxuICAgIHN0YXRpYyBmb3IodCwgZSwgaSwgcykge1xuICAgICAgICBsZXQgbiA9IFd0LmdldCh0KTtcbiAgICAgICAgaWYgKHZvaWQgMCA9PT0gbikge1xuICAgICAgICAgICAgY29uc3QgbyA9IHMuY29udGFpbmVyO1xuICAgICAgICAgICAgY29uc3QgciA9IFJvdXRlRGVmaW5pdGlvbi5yZXNvbHZlKHQuY29uc3RydWN0b3IpO1xuICAgICAgICAgICAgY29uc3QgYSA9IHguJGVsKG8sIHQsIGUuaG9zdCwgbnVsbCk7XG4gICAgICAgICAgICBXdC5zZXQodCwgbiA9IG5ldyBDb21wb25lbnRBZ2VudCh0LCBhLCByLCBpLCBzKSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG47XG4gICAgfVxuICAgIGFjdGl2YXRlKHQsIGUsIGkpIHtcbiAgICAgICAgaWYgKG51bGwgPT09IHQpIHtcbiAgICAgICAgICAgIHRoaXMuaC50cmFjZShgYWN0aXZhdGUoKSAtIGluaXRpYWxgKTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmNvbnRyb2xsZXIuYWN0aXZhdGUodGhpcy5jb250cm9sbGVyLCBlLCBpKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmgudHJhY2UoYGFjdGl2YXRlKClgKTtcbiAgICAgICAgdm9pZCB0aGlzLmNvbnRyb2xsZXIuYWN0aXZhdGUodCwgZSwgaSk7XG4gICAgfVxuICAgIGRlYWN0aXZhdGUodCwgZSwgaSkge1xuICAgICAgICBpZiAobnVsbCA9PT0gdCkge1xuICAgICAgICAgICAgdGhpcy5oLnRyYWNlKGBkZWFjdGl2YXRlKCkgLSBpbml0aWFsYCk7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5jb250cm9sbGVyLmRlYWN0aXZhdGUodGhpcy5jb250cm9sbGVyLCBlLCBpKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmgudHJhY2UoYGRlYWN0aXZhdGUoKWApO1xuICAgICAgICB2b2lkIHRoaXMuY29udHJvbGxlci5kZWFjdGl2YXRlKHQsIGUsIGkpO1xuICAgIH1cbiAgICBkaXNwb3NlKCkge1xuICAgICAgICB0aGlzLmgudHJhY2UoYGRpc3Bvc2UoKWApO1xuICAgICAgICB0aGlzLmNvbnRyb2xsZXIuZGlzcG9zZSgpO1xuICAgIH1cbiAgICBjYW5VbmxvYWQodCwgZSwgaSkge1xuICAgICAgICB0aGlzLmgudHJhY2UoYGNhblVubG9hZChuZXh0OiVzKSAtIGludm9raW5nICR7dGhpcy5jYW5VbmxvYWRIb29rcy5sZW5ndGh9IGhvb2tzYCwgZSk7XG4gICAgICAgIGkucHVzaCgpO1xuICAgICAgICBmb3IgKGNvbnN0IHMgb2YgdGhpcy5jYW5VbmxvYWRIb29rcykgdC5ydW4oKCgpID0+IHtcbiAgICAgICAgICAgIGkucHVzaCgpO1xuICAgICAgICAgICAgcmV0dXJuIHMuY2FuVW5sb2FkKHRoaXMuaW5zdGFuY2UsIGUsIHRoaXMucm91dGVOb2RlKTtcbiAgICAgICAgfSksIChlID0+IHtcbiAgICAgICAgICAgIGlmICh0cnVlID09PSB0Lmd1YXJkc1Jlc3VsdCAmJiB0cnVlICE9PSBlKSB0Lmd1YXJkc1Jlc3VsdCA9IGZhbHNlO1xuICAgICAgICAgICAgaS5wb3AoKTtcbiAgICAgICAgfSkpO1xuICAgICAgICBpZiAodGhpcy5nKSB0LnJ1bigoKCkgPT4ge1xuICAgICAgICAgICAgaS5wdXNoKCk7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5pbnN0YW5jZS5jYW5VbmxvYWQoZSwgdGhpcy5yb3V0ZU5vZGUpO1xuICAgICAgICB9KSwgKGUgPT4ge1xuICAgICAgICAgICAgaWYgKHRydWUgPT09IHQuZ3VhcmRzUmVzdWx0ICYmIHRydWUgIT09IGUpIHQuZ3VhcmRzUmVzdWx0ID0gZmFsc2U7XG4gICAgICAgICAgICBpLnBvcCgpO1xuICAgICAgICB9KSk7XG4gICAgICAgIGkucG9wKCk7XG4gICAgfVxuICAgIGNhbkxvYWQodCwgZSwgaSkge1xuICAgICAgICB0aGlzLmgudHJhY2UoYGNhbkxvYWQobmV4dDolcykgLSBpbnZva2luZyAke3RoaXMuY2FuTG9hZEhvb2tzLmxlbmd0aH0gaG9va3NgLCBlKTtcbiAgICAgICAgaS5wdXNoKCk7XG4gICAgICAgIGZvciAoY29uc3QgcyBvZiB0aGlzLmNhbkxvYWRIb29rcykgdC5ydW4oKCgpID0+IHtcbiAgICAgICAgICAgIGkucHVzaCgpO1xuICAgICAgICAgICAgcmV0dXJuIHMuY2FuTG9hZCh0aGlzLmluc3RhbmNlLCBlLnBhcmFtcywgZSwgdGhpcy5yb3V0ZU5vZGUpO1xuICAgICAgICB9KSwgKGUgPT4ge1xuICAgICAgICAgICAgaWYgKHRydWUgPT09IHQuZ3VhcmRzUmVzdWx0ICYmIHRydWUgIT09IGUpIHQuZ3VhcmRzUmVzdWx0ID0gZmFsc2UgPT09IGUgPyBmYWxzZSA6IFZpZXdwb3J0SW5zdHJ1Y3Rpb25UcmVlLmNyZWF0ZShlKTtcbiAgICAgICAgICAgIGkucG9wKCk7XG4gICAgICAgIH0pKTtcbiAgICAgICAgaWYgKHRoaXMudSkgdC5ydW4oKCgpID0+IHtcbiAgICAgICAgICAgIGkucHVzaCgpO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuaW5zdGFuY2UuY2FuTG9hZChlLnBhcmFtcywgZSwgdGhpcy5yb3V0ZU5vZGUpO1xuICAgICAgICB9KSwgKGUgPT4ge1xuICAgICAgICAgICAgaWYgKHRydWUgPT09IHQuZ3VhcmRzUmVzdWx0ICYmIHRydWUgIT09IGUpIHQuZ3VhcmRzUmVzdWx0ID0gZmFsc2UgPT09IGUgPyBmYWxzZSA6IFZpZXdwb3J0SW5zdHJ1Y3Rpb25UcmVlLmNyZWF0ZShlKTtcbiAgICAgICAgICAgIGkucG9wKCk7XG4gICAgICAgIH0pKTtcbiAgICAgICAgaS5wb3AoKTtcbiAgICB9XG4gICAgdW5sb2FkKHQsIGUsIGkpIHtcbiAgICAgICAgdGhpcy5oLnRyYWNlKGB1bmxvYWQobmV4dDolcykgLSBpbnZva2luZyAke3RoaXMudW5sb2FkSG9va3MubGVuZ3RofSBob29rc2AsIGUpO1xuICAgICAgICBpLnB1c2goKTtcbiAgICAgICAgZm9yIChjb25zdCBzIG9mIHRoaXMudW5sb2FkSG9va3MpIHQucnVuKCgoKSA9PiB7XG4gICAgICAgICAgICBpLnB1c2goKTtcbiAgICAgICAgICAgIHJldHVybiBzLnVubG9hZCh0aGlzLmluc3RhbmNlLCBlLCB0aGlzLnJvdXRlTm9kZSk7XG4gICAgICAgIH0pLCAoKCkgPT4ge1xuICAgICAgICAgICAgaS5wb3AoKTtcbiAgICAgICAgfSkpO1xuICAgICAgICBpZiAodGhpcy52KSB0LnJ1bigoKCkgPT4ge1xuICAgICAgICAgICAgaS5wdXNoKCk7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5pbnN0YW5jZS51bmxvYWQoZSwgdGhpcy5yb3V0ZU5vZGUpO1xuICAgICAgICB9KSwgKCgpID0+IHtcbiAgICAgICAgICAgIGkucG9wKCk7XG4gICAgICAgIH0pKTtcbiAgICAgICAgaS5wb3AoKTtcbiAgICB9XG4gICAgbG9hZCh0LCBlLCBpKSB7XG4gICAgICAgIHRoaXMuaC50cmFjZShgbG9hZChuZXh0OiVzKSAtIGludm9raW5nICR7dGhpcy5sb2FkSG9va3MubGVuZ3RofSBob29rc2AsIGUpO1xuICAgICAgICBpLnB1c2goKTtcbiAgICAgICAgZm9yIChjb25zdCBzIG9mIHRoaXMubG9hZEhvb2tzKSB0LnJ1bigoKCkgPT4ge1xuICAgICAgICAgICAgaS5wdXNoKCk7XG4gICAgICAgICAgICByZXR1cm4gcy5sb2FkKHRoaXMuaW5zdGFuY2UsIGUucGFyYW1zLCBlLCB0aGlzLnJvdXRlTm9kZSk7XG4gICAgICAgIH0pLCAoKCkgPT4ge1xuICAgICAgICAgICAgaS5wb3AoKTtcbiAgICAgICAgfSkpO1xuICAgICAgICBpZiAodGhpcy5sKSB0LnJ1bigoKCkgPT4ge1xuICAgICAgICAgICAgaS5wdXNoKCk7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5pbnN0YW5jZS5sb2FkKGUucGFyYW1zLCBlLCB0aGlzLnJvdXRlTm9kZSk7XG4gICAgICAgIH0pLCAoKCkgPT4ge1xuICAgICAgICAgICAgaS5wb3AoKTtcbiAgICAgICAgfSkpO1xuICAgICAgICBpLnBvcCgpO1xuICAgIH1cbiAgICB0b1N0cmluZygpIHtcbiAgICAgICAgcmV0dXJuIGBDQShjdHg6JyR7dGhpcy5jdHguZnJpZW5kbHlQYXRofScsYzonJHt0aGlzLmRlZmluaXRpb24uY29tcG9uZW50Lm5hbWV9JylgO1xuICAgIH1cbn1cblxuY29uc3QgR3QgPSB0LmNyZWF0ZUludGVyZmFjZShcIklSb3V0ZUNvbnRleHRcIik7XG5cbmNvbnN0IFl0ID0gXCJhdSRyZXNpZHVlXCI7XG5cbmNsYXNzIFJvdXRlQ29udGV4dCB7XG4gICAgY29uc3RydWN0b3IodCwgZSwgcywgbiwgbykge1xuICAgICAgICB2YXIgcjtcbiAgICAgICAgdGhpcy5wYXJlbnQgPSBlO1xuICAgICAgICB0aGlzLmNvbXBvbmVudCA9IHM7XG4gICAgICAgIHRoaXMuZGVmaW5pdGlvbiA9IG47XG4gICAgICAgIHRoaXMucGFyZW50Q29udGFpbmVyID0gbztcbiAgICAgICAgdGhpcy5jaGlsZFZpZXdwb3J0QWdlbnRzID0gW107XG4gICAgICAgIHRoaXMuY2hpbGRSb3V0ZXMgPSBbXTtcbiAgICAgICAgdGhpcy5tID0gbnVsbDtcbiAgICAgICAgdGhpcy4kID0gbnVsbDtcbiAgICAgICAgdGhpcy5wcmV2Tm9kZSA9IG51bGw7XG4gICAgICAgIHRoaXMuUyA9IG51bGw7XG4gICAgICAgIHRoaXMuUiA9IG51bGw7XG4gICAgICAgIHRoaXMuUiA9IHQ7XG4gICAgICAgIGlmIChudWxsID09PSBlKSB7XG4gICAgICAgICAgICB0aGlzLnJvb3QgPSB0aGlzO1xuICAgICAgICAgICAgdGhpcy5wYXRoID0gWyB0aGlzIF07XG4gICAgICAgICAgICB0aGlzLmZyaWVuZGx5UGF0aCA9IHMubmFtZTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMucm9vdCA9IGUucm9vdDtcbiAgICAgICAgICAgIHRoaXMucGF0aCA9IFsgLi4uZS5wYXRoLCB0aGlzIF07XG4gICAgICAgICAgICB0aGlzLmZyaWVuZGx5UGF0aCA9IGAke2UuZnJpZW5kbHlQYXRofS8ke3MubmFtZX1gO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMubG9nZ2VyID0gby5nZXQoaSkuc2NvcGVUbyhgUm91dGVDb250ZXh0PCR7dGhpcy5mcmllbmRseVBhdGh9PmApO1xuICAgICAgICB0aGlzLmxvZ2dlci50cmFjZShcImNvbnN0cnVjdG9yKClcIik7XG4gICAgICAgIHRoaXMubW9kdWxlTG9hZGVyID0gby5nZXQoZCk7XG4gICAgICAgIGNvbnN0IGEgPSB0aGlzLmNvbnRhaW5lciA9IG8uY3JlYXRlQ2hpbGQoKTtcbiAgICAgICAgYS5yZWdpc3RlclJlc29sdmVyKFMsIHRoaXMuaG9zdENvbnRyb2xsZXJQcm92aWRlciA9IG5ldyBmLCB0cnVlKTtcbiAgICAgICAgYS5yZWdpc3RlclJlc29sdmVyKEd0LCBuZXcgZihcIklSb3V0ZUNvbnRleHRcIiwgdGhpcykpO1xuICAgICAgICBhLnJlZ2lzdGVyKG4pO1xuICAgICAgICBhLnJlZ2lzdGVyKC4uLnMuZGVwZW5kZW5jaWVzKTtcbiAgICAgICAgdGhpcy5yZWNvZ25pemVyID0gbmV3IGo7XG4gICAgICAgIGNvbnN0IGggPSBbXTtcbiAgICAgICAgY29uc3QgYyA9IFtdO1xuICAgICAgICBmb3IgKGNvbnN0IHQgb2Ygbi5jb25maWcucm91dGVzKSBpZiAodCBpbnN0YW5jZW9mIFByb21pc2UpIHtcbiAgICAgICAgICAgIGNvbnN0IGUgPSB0aGlzLmFkZFJvdXRlKHQpO1xuICAgICAgICAgICAgaC5wdXNoKGUpO1xuICAgICAgICAgICAgYy5wdXNoKGUpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY29uc3QgZSA9IFJvdXRlRGVmaW5pdGlvbi5yZXNvbHZlKHQsIHRoaXMpO1xuICAgICAgICAgICAgaWYgKGUgaW5zdGFuY2VvZiBQcm9taXNlKSBpZiAoeih0KSAmJiBudWxsICE9IHQucGF0aCkge1xuICAgICAgICAgICAgICAgIGZvciAoY29uc3QgaSBvZiBNKHQucGF0aCkpIHRoaXMuJGFkZFJvdXRlKGksIG51bGwgIT09IChyID0gdC5jYXNlU2Vuc2l0aXZlKSAmJiB2b2lkIDAgIT09IHIgPyByIDogZmFsc2UsIGUpO1xuICAgICAgICAgICAgICAgIGNvbnN0IGkgPSB0aGlzLmNoaWxkUm91dGVzLmxlbmd0aDtcbiAgICAgICAgICAgICAgICBjb25zdCBzID0gZS50aGVuKCh0ID0+IHRoaXMuY2hpbGRSb3V0ZXNbaV0gPSB0KSk7XG4gICAgICAgICAgICAgICAgdGhpcy5jaGlsZFJvdXRlcy5wdXNoKHMpO1xuICAgICAgICAgICAgICAgIGMucHVzaChzLnRoZW4ocCkpO1xuICAgICAgICAgICAgfSBlbHNlIHRocm93IG5ldyBFcnJvcihgSW52YWxpZCByb3V0ZSBjb25maWcuIFdoZW4gdGhlIGNvbXBvbmVudCBwcm9wZXJ0eSBpcyBhIGxhenkgaW1wb3J0LCB0aGUgcGF0aCBtdXN0IGJlIHNwZWNpZmllZC4gVG8gdXNlIGxhenkgbG9hZGluZyB3aXRob3V0IHNwZWNpZnlpbmcgdGhlIHBhdGggKGUuZy4gaW4gZGlyZWN0IHJvdXRpbmcpLCBwYXNzIHRoZSBpbXBvcnQgcHJvbWlzZSBhcyBhIGRpcmVjdCB2YWx1ZSB0byB0aGUgcm91dGVzIGFycmF5IGluc3RlYWQgb2YgcHJvdmlkaW5nIGl0IGFzIHRoZSBjb21wb25lbnQgcHJvcGVydHkgb24gYW4gb2JqZWN0IGxpdGVyYWwuYCk7IGVsc2Uge1xuICAgICAgICAgICAgICAgIGZvciAoY29uc3QgdCBvZiBlLnBhdGgpIHRoaXMuJGFkZFJvdXRlKHQsIGUuY2FzZVNlbnNpdGl2ZSwgZSk7XG4gICAgICAgICAgICAgICAgdGhpcy5jaGlsZFJvdXRlcy5wdXNoKGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChoLmxlbmd0aCA+IDApIHRoaXMubSA9IFByb21pc2UuYWxsKGgpLnRoZW4oKCgpID0+IHtcbiAgICAgICAgICAgIHRoaXMubSA9IG51bGw7XG4gICAgICAgIH0pKTtcbiAgICAgICAgaWYgKGMubGVuZ3RoID4gMCkgdGhpcy4kID0gUHJvbWlzZS5hbGwoYykudGhlbigoKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy4kID0gbnVsbDtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICBnZXQgaWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmNvbnRhaW5lci5pZDtcbiAgICB9XG4gICAgZ2V0IGlzUm9vdCgpIHtcbiAgICAgICAgcmV0dXJuIG51bGwgPT09IHRoaXMucGFyZW50O1xuICAgIH1cbiAgICBnZXQgZGVwdGgoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnBhdGgubGVuZ3RoIC0gMTtcbiAgICB9XG4gICAgZ2V0IHJlc29sdmVkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5tO1xuICAgIH1cbiAgICBnZXQgYWxsUmVzb2x2ZWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLiQ7XG4gICAgfVxuICAgIGdldCBub2RlKCkge1xuICAgICAgICBjb25zdCB0ID0gdGhpcy5TO1xuICAgICAgICBpZiAobnVsbCA9PT0gdCkgdGhyb3cgbmV3IEVycm9yKGBJbnZhcmlhbnQgdmlvbGF0aW9uOiBSb3V0ZU5vZGUgc2hvdWxkIGJlIHNldCBpbW1lZGlhdGVseSBhZnRlciB0aGUgUm91dGVDb250ZXh0IGlzIGNyZWF0ZWQuIENvbnRleHQ6ICR7dGhpc31gKTtcbiAgICAgICAgcmV0dXJuIHQ7XG4gICAgfVxuICAgIHNldCBub2RlKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IHRoaXMucHJldk5vZGUgPSB0aGlzLlM7XG4gICAgICAgIGlmIChlICE9PSB0KSB7XG4gICAgICAgICAgICB0aGlzLlMgPSB0O1xuICAgICAgICAgICAgdGhpcy5sb2dnZXIudHJhY2UoYE5vZGUgY2hhbmdlZCBmcm9tICVzIHRvICVzYCwgdGhpcy5wcmV2Tm9kZSwgdCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZ2V0IHZwYSgpIHtcbiAgICAgICAgY29uc3QgdCA9IHRoaXMuUjtcbiAgICAgICAgaWYgKG51bGwgPT09IHQpIHRocm93IG5ldyBFcnJvcihgUm91dGVDb250ZXh0IGhhcyBubyBWaWV3cG9ydEFnZW50OiAke3RoaXN9YCk7XG4gICAgICAgIHJldHVybiB0O1xuICAgIH1cbiAgICBzZXQgdnBhKHQpIHtcbiAgICAgICAgaWYgKG51bGwgPT09IHQgfHwgdm9pZCAwID09PSB0KSB0aHJvdyBuZXcgRXJyb3IoYENhbm5vdCBzZXQgVmlld3BvcnRBZ2VudCB0byAke3R9IGZvciBSb3V0ZUNvbnRleHQ6ICR7dGhpc31gKTtcbiAgICAgICAgY29uc3QgZSA9IHRoaXMuUjtcbiAgICAgICAgaWYgKGUgIT09IHQpIHtcbiAgICAgICAgICAgIHRoaXMuUiA9IHQ7XG4gICAgICAgICAgICB0aGlzLmxvZ2dlci50cmFjZShgVmlld3BvcnRBZ2VudCBjaGFuZ2VkIGZyb20gJXMgdG8gJXNgLCBlLCB0KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBzdGF0aWMgc2V0Um9vdCh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSB0LmdldChpKS5zY29wZVRvKFwiUm91dGVDb250ZXh0XCIpO1xuICAgICAgICBpZiAoIXQuaGFzKFIsIHRydWUpKSBKdChuZXcgRXJyb3IoYFRoZSBwcm92aWRlZCBjb250YWluZXIgaGFzIG5vIHJlZ2lzdGVyZWQgSUFwcFJvb3QuIFJvdXRlQ29udGV4dC5zZXRSb290IGNhbiBvbmx5IGJlIHVzZWQgYWZ0ZXIgQXVyZWxpYS5hcHAgd2FzIGNhbGxlZCwgb24gYSBjb250YWluZXIgdGhhdCBpcyB3aXRoaW4gdGhhdCBhcHAncyBjb21wb25lbnQgdHJlZS5gKSwgZSk7XG4gICAgICAgIGlmICh0LmhhcyhHdCwgdHJ1ZSkpIEp0KG5ldyBFcnJvcihgQSByb290IFJvdXRlQ29udGV4dCBpcyBhbHJlYWR5IHJlZ2lzdGVyZWQuIEEgcG9zc2libGUgY2F1c2UgaXMgdGhlIFJvdXRlckNvbmZpZ3VyYXRpb24gYmVpbmcgcmVnaXN0ZXJlZCBtb3JlIHRoYW4gb25jZSBpbiB0aGUgc2FtZSBjb250YWluZXIgdHJlZS4gSWYgeW91IGhhdmUgYSBtdWx0aS1yb290ZWQgYXBwLCBtYWtlIHN1cmUgeW91IHJlZ2lzdGVyIFJvdXRlckNvbmZpZ3VyYXRpb24gb25seSBpbiB0aGUgXCJmb3JrZWRcIiBjb250YWluZXJzIGFuZCBub3QgaW4gdGhlIGNvbW1vbiByb290LmApLCBlKTtcbiAgICAgICAgY29uc3Qge2NvbnRyb2xsZXI6IHN9ID0gdC5nZXQoUik7XG4gICAgICAgIGlmICh2b2lkIDAgPT09IHMpIEp0KG5ldyBFcnJvcihgVGhlIHByb3ZpZGVkIElBcHBSb290IGRvZXMgbm90ICh5ZXQpIGhhdmUgYSBjb250cm9sbGVyLiBBIHBvc3NpYmxlIGNhdXNlIGlzIGNhbGxpbmcgdGhpcyBBUEkgbWFudWFsbHkgYmVmb3JlIEF1cmVsaWEuc3RhcnQoKSBpcyBjYWxsZWRgKSwgZSk7XG4gICAgICAgIGNvbnN0IG4gPSB0LmdldChVdCk7XG4gICAgICAgIGNvbnN0IG8gPSBuLmdldFJvdXRlQ29udGV4dChudWxsLCBzLmRlZmluaXRpb24sIHMuY29udGFpbmVyKTtcbiAgICAgICAgdC5yZWdpc3RlcihnLmluc3RhbmNlKEd0LCBvKSk7XG4gICAgICAgIG8ubm9kZSA9IG4ucm91dGVUcmVlLnJvb3Q7XG4gICAgfVxuICAgIHN0YXRpYyByZXNvbHZlKHQsIGUpIHtcbiAgICAgICAgY29uc3QgcyA9IHQuY29udGFpbmVyO1xuICAgICAgICBjb25zdCBuID0gcy5nZXQoaSkuc2NvcGVUbyhcIlJvdXRlQ29udGV4dFwiKTtcbiAgICAgICAgaWYgKG51bGwgPT09IGUgfHwgdm9pZCAwID09PSBlKSB7XG4gICAgICAgICAgICBuLnRyYWNlKGByZXNvbHZlKGNvbnRleHQ6JXMpIC0gcmV0dXJuaW5nIHJvb3QgUm91dGVDb250ZXh0YCwgZSk7XG4gICAgICAgICAgICByZXR1cm4gdDtcbiAgICAgICAgfVxuICAgICAgICBpZiAoX3QoZSkpIHtcbiAgICAgICAgICAgIG4udHJhY2UoYHJlc29sdmUoY29udGV4dDolcykgLSByZXR1cm5pbmcgcHJvdmlkZWQgUm91dGVDb250ZXh0YCwgZSk7XG4gICAgICAgICAgICByZXR1cm4gZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoZSBpbnN0YW5jZW9mIHMuZ2V0KEUpLk5vZGUpIHRyeSB7XG4gICAgICAgICAgICBjb25zdCB0ID0geS5mb3IoZSwge1xuICAgICAgICAgICAgICAgIHNlYXJjaFBhcmVudHM6IHRydWVcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgbi50cmFjZShgcmVzb2x2ZShjb250ZXh0Ok5vZGUobm9kZU5hbWU6JyR7ZS5ub2RlTmFtZX0nKSxjb250cm9sbGVyOicke3QuZGVmaW5pdGlvbi5uYW1lfScpIC0gcmVzb2x2aW5nIFJvdXRlQ29udGV4dCBmcm9tIGNvbnRyb2xsZXIncyBSZW5kZXJDb250ZXh0YCk7XG4gICAgICAgICAgICByZXR1cm4gdC5jb250YWluZXIuZ2V0KEd0KTtcbiAgICAgICAgfSBjYXRjaCAodCkge1xuICAgICAgICAgICAgbi5lcnJvcihgRmFpbGVkIHRvIHJlc29sdmUgUm91dGVDb250ZXh0IGZyb20gTm9kZShub2RlTmFtZTonJHtlLm5vZGVOYW1lfScpYCwgdCk7XG4gICAgICAgICAgICB0aHJvdyB0O1xuICAgICAgICB9XG4gICAgICAgIGlmICh2KGUpKSB7XG4gICAgICAgICAgICBjb25zdCB0ID0gZS4kY29udHJvbGxlcjtcbiAgICAgICAgICAgIG4udHJhY2UoYHJlc29sdmUoY29udGV4dDpDdXN0b21FbGVtZW50Vmlld01vZGVsKG5hbWU6JyR7dC5kZWZpbml0aW9uLm5hbWV9JykpIC0gcmVzb2x2aW5nIFJvdXRlQ29udGV4dCBmcm9tIGNvbnRyb2xsZXIncyBSZW5kZXJDb250ZXh0YCk7XG4gICAgICAgICAgICByZXR1cm4gdC5jb250YWluZXIuZ2V0KEd0KTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoQyhlKSkge1xuICAgICAgICAgICAgY29uc3QgdCA9IGU7XG4gICAgICAgICAgICBuLnRyYWNlKGByZXNvbHZlKGNvbnRleHQ6Q3VzdG9tRWxlbWVudENvbnRyb2xsZXIobmFtZTonJHt0LmRlZmluaXRpb24ubmFtZX0nKSkgLSByZXNvbHZpbmcgUm91dGVDb250ZXh0IGZyb20gY29udHJvbGxlcidzIFJlbmRlckNvbnRleHRgKTtcbiAgICAgICAgICAgIHJldHVybiB0LmNvbnRhaW5lci5nZXQoR3QpO1xuICAgICAgICB9XG4gICAgICAgIEp0KG5ldyBFcnJvcihgSW52YWxpZCBjb250ZXh0IHR5cGU6ICR7T2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGUpfWApLCBuKTtcbiAgICB9XG4gICAgZGlzcG9zZSgpIHtcbiAgICAgICAgdGhpcy5jb250YWluZXIuZGlzcG9zZSgpO1xuICAgIH1cbiAgICByZXNvbHZlVmlld3BvcnRBZ2VudCh0KSB7XG4gICAgICAgIHRoaXMubG9nZ2VyLnRyYWNlKGByZXNvbHZlVmlld3BvcnRBZ2VudChyZXE6JXMpYCwgdCk7XG4gICAgICAgIGNvbnN0IGUgPSB0aGlzLmNoaWxkVmlld3BvcnRBZ2VudHMuZmluZCgoZSA9PiBlLmhhbmRsZXModCkpKTtcbiAgICAgICAgaWYgKHZvaWQgMCA9PT0gZSkgdGhyb3cgbmV3IEVycm9yKGBGYWlsZWQgdG8gcmVzb2x2ZSAke3R9IGF0OlxcbiR7dGhpcy5wcmludFRyZWUoKX1gKTtcbiAgICAgICAgcmV0dXJuIGU7XG4gICAgfVxuICAgIGdldEF2YWlsYWJsZVZpZXdwb3J0QWdlbnRzKHQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY2hpbGRWaWV3cG9ydEFnZW50cy5maWx0ZXIoKGUgPT4gZS5pc0F2YWlsYWJsZSh0KSkpO1xuICAgIH1cbiAgICBnZXRGYWxsYmFja1ZpZXdwb3J0QWdlbnQodCwgZSkge1xuICAgICAgICB2YXIgaTtcbiAgICAgICAgcmV0dXJuIG51bGwgIT09IChpID0gdGhpcy5jaGlsZFZpZXdwb3J0QWdlbnRzLmZpbmQoKGkgPT4gaS5pc0F2YWlsYWJsZSh0KSAmJiBpLnZpZXdwb3J0Lm5hbWUgPT09IGUgJiYgaS52aWV3cG9ydC5mYWxsYmFjay5sZW5ndGggPiAwKSkpICYmIHZvaWQgMCAhPT0gaSA/IGkgOiBudWxsO1xuICAgIH1cbiAgICBjcmVhdGVDb21wb25lbnRBZ2VudCh0LCBlKSB7XG4gICAgICAgIHRoaXMubG9nZ2VyLnRyYWNlKGBjcmVhdGVDb21wb25lbnRBZ2VudChyb3V0ZU5vZGU6JXMpYCwgZSk7XG4gICAgICAgIHRoaXMuaG9zdENvbnRyb2xsZXJQcm92aWRlci5wcmVwYXJlKHQpO1xuICAgICAgICBjb25zdCBpID0gUm91dGVEZWZpbml0aW9uLnJlc29sdmUoZS5jb21wb25lbnQpO1xuICAgICAgICBjb25zdCBzID0gdGhpcy5jb250YWluZXIuZ2V0KGkuY29tcG9uZW50LmtleSk7XG4gICAgICAgIGNvbnN0IG4gPSBDb21wb25lbnRBZ2VudC5mb3IocywgdCwgZSwgdGhpcyk7XG4gICAgICAgIHRoaXMuaG9zdENvbnRyb2xsZXJQcm92aWRlci5kaXNwb3NlKCk7XG4gICAgICAgIHJldHVybiBuO1xuICAgIH1cbiAgICByZWdpc3RlclZpZXdwb3J0KHQpIHtcbiAgICAgICAgY29uc3QgZSA9IFZpZXdwb3J0QWdlbnQuZm9yKHQsIHRoaXMpO1xuICAgICAgICBpZiAodGhpcy5jaGlsZFZpZXdwb3J0QWdlbnRzLmluY2x1ZGVzKGUpKSB0aGlzLmxvZ2dlci50cmFjZShgcmVnaXN0ZXJWaWV3cG9ydChhZ2VudDolcykgLT4gYWxyZWFkeSByZWdpc3RlcmVkLCBzbyBza2lwcGluZ2AsIGUpOyBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMubG9nZ2VyLnRyYWNlKGByZWdpc3RlclZpZXdwb3J0KGFnZW50OiVzKSAtPiBhZGRpbmdgLCBlKTtcbiAgICAgICAgICAgIHRoaXMuY2hpbGRWaWV3cG9ydEFnZW50cy5wdXNoKGUpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBlO1xuICAgIH1cbiAgICB1bnJlZ2lzdGVyVmlld3BvcnQodCkge1xuICAgICAgICBjb25zdCBlID0gVmlld3BvcnRBZ2VudC5mb3IodCwgdGhpcyk7XG4gICAgICAgIGlmICh0aGlzLmNoaWxkVmlld3BvcnRBZ2VudHMuaW5jbHVkZXMoZSkpIHtcbiAgICAgICAgICAgIHRoaXMubG9nZ2VyLnRyYWNlKGB1bnJlZ2lzdGVyVmlld3BvcnQoYWdlbnQ6JXMpIC0+IHVucmVnaXN0ZXJpbmdgLCBlKTtcbiAgICAgICAgICAgIHRoaXMuY2hpbGRWaWV3cG9ydEFnZW50cy5zcGxpY2UodGhpcy5jaGlsZFZpZXdwb3J0QWdlbnRzLmluZGV4T2YoZSksIDEpO1xuICAgICAgICB9IGVsc2UgdGhpcy5sb2dnZXIudHJhY2UoYHVucmVnaXN0ZXJWaWV3cG9ydChhZ2VudDolcykgLT4gbm90IHJlZ2lzdGVyZWQsIHNvIHNraXBwaW5nYCwgZSk7XG4gICAgfVxuICAgIHJlY29nbml6ZSh0KSB7XG4gICAgICAgIHZhciBlO1xuICAgICAgICB0aGlzLmxvZ2dlci50cmFjZShgcmVjb2duaXplKHBhdGg6JyR7dH0nKWApO1xuICAgICAgICBjb25zdCBpID0gdGhpcy5yZWNvZ25pemVyLnJlY29nbml6ZSh0KTtcbiAgICAgICAgaWYgKG51bGwgPT09IGkpIHJldHVybiBudWxsO1xuICAgICAgICBsZXQgcztcbiAgICAgICAgaWYgKFJlZmxlY3QuaGFzKGkucGFyYW1zLCBZdCkpIHtcbiAgICAgICAgICAgIHMgPSBudWxsICE9PSAoZSA9IGkucGFyYW1zW1l0XSkgJiYgdm9pZCAwICE9PSBlID8gZSA6IG51bGw7XG4gICAgICAgICAgICBSZWZsZWN0LmRlbGV0ZVByb3BlcnR5KGkucGFyYW1zLCBZdCk7XG4gICAgICAgIH0gZWxzZSBzID0gbnVsbDtcbiAgICAgICAgcmV0dXJuIG5ldyAkUmVjb2duaXplZFJvdXRlKGksIHMpO1xuICAgIH1cbiAgICBhZGRSb3V0ZSh0KSB7XG4gICAgICAgIHRoaXMubG9nZ2VyLnRyYWNlKGBhZGRSb3V0ZShyb3V0ZWFibGU6JyR7dH0nKWApO1xuICAgICAgICByZXR1cm4gbihSb3V0ZURlZmluaXRpb24ucmVzb2x2ZSh0LCB0aGlzKSwgKHQgPT4ge1xuICAgICAgICAgICAgZm9yIChjb25zdCBlIG9mIHQucGF0aCkgdGhpcy4kYWRkUm91dGUoZSwgdC5jYXNlU2Vuc2l0aXZlLCB0KTtcbiAgICAgICAgICAgIHRoaXMuY2hpbGRSb3V0ZXMucHVzaCh0KTtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICAkYWRkUm91dGUodCwgZSwgaSkge1xuICAgICAgICB0aGlzLnJlY29nbml6ZXIuYWRkKHtcbiAgICAgICAgICAgIHBhdGg6IHQsXG4gICAgICAgICAgICBjYXNlU2Vuc2l0aXZlOiBlLFxuICAgICAgICAgICAgaGFuZGxlcjogaVxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5yZWNvZ25pemVyLmFkZCh7XG4gICAgICAgICAgICBwYXRoOiBgJHt0fS8qJHtZdH1gLFxuICAgICAgICAgICAgY2FzZVNlbnNpdGl2ZTogZSxcbiAgICAgICAgICAgIGhhbmRsZXI6IGlcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIHJlc29sdmVMYXp5KHQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubW9kdWxlTG9hZGVyLmxvYWQodCwgKGUgPT4ge1xuICAgICAgICAgICAgbGV0IGk7XG4gICAgICAgICAgICBsZXQgcztcbiAgICAgICAgICAgIGZvciAoY29uc3QgdCBvZiBlLml0ZW1zKSBpZiAodC5pc0NvbnN0cnVjdGFibGUpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBlID0gdC5kZWZpbml0aW9ucy5maW5kKFp0KTtcbiAgICAgICAgICAgICAgICBpZiAodm9pZCAwICE9PSBlKSBpZiAoXCJkZWZhdWx0XCIgPT09IHQua2V5KSBpID0gZTsgZWxzZSBpZiAodm9pZCAwID09PSBzKSBzID0gZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh2b2lkIDAgPT09IGkpIHtcbiAgICAgICAgICAgICAgICBpZiAodm9pZCAwID09PSBzKSB0aHJvdyBuZXcgRXJyb3IoYCR7dH0gZG9lcyBub3QgYXBwZWFyIHRvIGJlIGEgY29tcG9uZW50IG9yIEN1c3RvbUVsZW1lbnQgcmVjb2duaXphYmxlIGJ5IEF1cmVsaWFgKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gcztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBpO1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIHRvU3RyaW5nKCkge1xuICAgICAgICBjb25zdCB0ID0gdGhpcy5jaGlsZFZpZXdwb3J0QWdlbnRzO1xuICAgICAgICBjb25zdCBlID0gdC5tYXAoU3RyaW5nKS5qb2luKFwiLFwiKTtcbiAgICAgICAgcmV0dXJuIGBSQyhwYXRoOicke3RoaXMuZnJpZW5kbHlQYXRofScsdmlld3BvcnRzOlske2V9XSlgO1xuICAgIH1cbiAgICBwcmludFRyZWUoKSB7XG4gICAgICAgIGNvbnN0IHQgPSBbXTtcbiAgICAgICAgZm9yIChsZXQgZSA9IDA7IGUgPCB0aGlzLnBhdGgubGVuZ3RoOyArK2UpIHQucHVzaChgJHtcIiBcIi5yZXBlYXQoZSl9JHt0aGlzLnBhdGhbZV19YCk7XG4gICAgICAgIHJldHVybiB0LmpvaW4oXCJcXG5cIik7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBfdCh0KSB7XG4gICAgcmV0dXJuIHQgaW5zdGFuY2VvZiBSb3V0ZUNvbnRleHQ7XG59XG5cbmZ1bmN0aW9uIEp0KHQsIGUpIHtcbiAgICBlLmVycm9yKHQpO1xuICAgIHRocm93IHQ7XG59XG5cbmZ1bmN0aW9uIFp0KHQpIHtcbiAgICByZXR1cm4geS5pc1R5cGUodC5UeXBlKTtcbn1cblxuY2xhc3MgJFJlY29nbml6ZWRSb3V0ZSB7XG4gICAgY29uc3RydWN0b3IodCwgZSkge1xuICAgICAgICB0aGlzLnJvdXRlID0gdDtcbiAgICAgICAgdGhpcy5yZXNpZHVlID0gZTtcbiAgICB9XG59XG5cbmxldCBRdCA9IGNsYXNzIFZpZXdwb3J0Q3VzdG9tRWxlbWVudCB7XG4gICAgY29uc3RydWN0b3IodCwgZSkge1xuICAgICAgICB0aGlzLmxvZ2dlciA9IHQ7XG4gICAgICAgIHRoaXMuY3R4ID0gZTtcbiAgICAgICAgdGhpcy5uYW1lID0gXCJkZWZhdWx0XCI7XG4gICAgICAgIHRoaXMudXNlZEJ5ID0gXCJcIjtcbiAgICAgICAgdGhpcy5kZWZhdWx0ID0gXCJcIjtcbiAgICAgICAgdGhpcy5mYWxsYmFjayA9IFwiXCI7XG4gICAgICAgIHRoaXMubm9TY29wZSA9IGZhbHNlO1xuICAgICAgICB0aGlzLm5vTGluayA9IGZhbHNlO1xuICAgICAgICB0aGlzLm5vSGlzdG9yeSA9IGZhbHNlO1xuICAgICAgICB0aGlzLnN0YXRlZnVsID0gZmFsc2U7XG4gICAgICAgIHRoaXMuYWdlbnQgPSB2b2lkIDA7XG4gICAgICAgIHRoaXMuY29udHJvbGxlciA9IHZvaWQgMDtcbiAgICAgICAgdGhpcy5sb2dnZXIgPSB0LnNjb3BlVG8oYGF1LXZpZXdwb3J0PCR7ZS5mcmllbmRseVBhdGh9PmApO1xuICAgICAgICB0aGlzLmxvZ2dlci50cmFjZShcImNvbnN0cnVjdG9yKClcIik7XG4gICAgfVxuICAgIGh5ZHJhdGVkKHQpIHtcbiAgICAgICAgdGhpcy5sb2dnZXIudHJhY2UoXCJoeWRyYXRlZCgpXCIpO1xuICAgICAgICB0aGlzLmNvbnRyb2xsZXIgPSB0O1xuICAgICAgICB0aGlzLmFnZW50ID0gdGhpcy5jdHgucmVnaXN0ZXJWaWV3cG9ydCh0aGlzKTtcbiAgICB9XG4gICAgYXR0YWNoaW5nKHQsIGUsIGkpIHtcbiAgICAgICAgdGhpcy5sb2dnZXIudHJhY2UoXCJhdHRhY2hpbmcoKVwiKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuYWdlbnQuYWN0aXZhdGVGcm9tVmlld3BvcnQodCwgdGhpcy5jb250cm9sbGVyLCBpKTtcbiAgICB9XG4gICAgZGV0YWNoaW5nKHQsIGUsIGkpIHtcbiAgICAgICAgdGhpcy5sb2dnZXIudHJhY2UoXCJkZXRhY2hpbmcoKVwiKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuYWdlbnQuZGVhY3RpdmF0ZUZyb21WaWV3cG9ydCh0LCB0aGlzLmNvbnRyb2xsZXIsIGkpO1xuICAgIH1cbiAgICBkaXNwb3NlKCkge1xuICAgICAgICB0aGlzLmxvZ2dlci50cmFjZShcImRpc3Bvc2UoKVwiKTtcbiAgICAgICAgdGhpcy5jdHgudW5yZWdpc3RlclZpZXdwb3J0KHRoaXMpO1xuICAgICAgICB0aGlzLmFnZW50LmRpc3Bvc2UoKTtcbiAgICAgICAgdGhpcy5hZ2VudCA9IHZvaWQgMDtcbiAgICB9XG4gICAgdG9TdHJpbmcoKSB7XG4gICAgICAgIGNvbnN0IHQgPSBbXTtcbiAgICAgICAgZm9yIChjb25zdCBlIG9mIEt0KSB7XG4gICAgICAgICAgICBjb25zdCBpID0gdGhpc1tlXTtcbiAgICAgICAgICAgIHN3aXRjaCAodHlwZW9mIGkpIHtcbiAgICAgICAgICAgICAgY2FzZSBcInN0cmluZ1wiOlxuICAgICAgICAgICAgICAgIGlmIChcIlwiICE9PSBpKSB0LnB1c2goYCR7ZX06JyR7aX0nYCk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgICAgY2FzZSBcImJvb2xlYW5cIjpcbiAgICAgICAgICAgICAgICBpZiAoaSkgdC5wdXNoKGAke2V9OiR7aX1gKTtcbiAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIHQucHVzaChgJHtlfToke1N0cmluZyhpKX1gKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gYFZQKGN0eDonJHt0aGlzLmN0eC5mcmllbmRseVBhdGh9Jywke3Quam9pbihcIixcIil9KWA7XG4gICAgfVxufTtcblxuSyhbIGsgXSwgUXQucHJvdG90eXBlLCBcIm5hbWVcIiwgdm9pZCAwKTtcblxuSyhbIGsgXSwgUXQucHJvdG90eXBlLCBcInVzZWRCeVwiLCB2b2lkIDApO1xuXG5LKFsgayBdLCBRdC5wcm90b3R5cGUsIFwiZGVmYXVsdFwiLCB2b2lkIDApO1xuXG5LKFsgayBdLCBRdC5wcm90b3R5cGUsIFwiZmFsbGJhY2tcIiwgdm9pZCAwKTtcblxuSyhbIGsgXSwgUXQucHJvdG90eXBlLCBcIm5vU2NvcGVcIiwgdm9pZCAwKTtcblxuSyhbIGsgXSwgUXQucHJvdG90eXBlLCBcIm5vTGlua1wiLCB2b2lkIDApO1xuXG5LKFsgayBdLCBRdC5wcm90b3R5cGUsIFwibm9IaXN0b3J5XCIsIHZvaWQgMCk7XG5cbksoWyBrIF0sIFF0LnByb3RvdHlwZSwgXCJzdGF0ZWZ1bFwiLCB2b2lkIDApO1xuXG5RdCA9IEsoWyBJKHtcbiAgICBuYW1lOiBcImF1LXZpZXdwb3J0XCJcbn0pLCBYKDAsIGkpLCBYKDEsIEd0KSBdLCBRdCk7XG5cbmNvbnN0IEt0ID0gWyBcIm5hbWVcIiwgXCJ1c2VkQnlcIiwgXCJkZWZhdWx0XCIsIFwiZmFsbGJhY2tcIiwgXCJub1Njb3BlXCIsIFwibm9MaW5rXCIsIFwibm9IaXN0b3J5XCIsIFwic3RhdGVmdWxcIiBdO1xuXG5sZXQgWHQgPSBjbGFzcyBMb2FkQ3VzdG9tQXR0cmlidXRlIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlLCBpLCBzLCBuLCBvLCByKSB7XG4gICAgICAgIHRoaXMudGFyZ2V0ID0gdDtcbiAgICAgICAgdGhpcy5lbCA9IGU7XG4gICAgICAgIHRoaXMucm91dGVyID0gaTtcbiAgICAgICAgdGhpcy5ldmVudHMgPSBzO1xuICAgICAgICB0aGlzLmRlbGVnYXRvciA9IG47XG4gICAgICAgIHRoaXMuY3R4ID0gbztcbiAgICAgICAgdGhpcy5sb2NhdGlvbk1nciA9IHI7XG4gICAgICAgIHRoaXMuYXR0cmlidXRlID0gXCJocmVmXCI7XG4gICAgICAgIHRoaXMuYWN0aXZlID0gZmFsc2U7XG4gICAgICAgIHRoaXMuaHJlZiA9IG51bGw7XG4gICAgICAgIHRoaXMuaW5zdHJ1Y3Rpb25zID0gbnVsbDtcbiAgICAgICAgdGhpcy5ldmVudExpc3RlbmVyID0gbnVsbDtcbiAgICAgICAgdGhpcy5uYXZpZ2F0aW9uRW5kTGlzdGVuZXIgPSBudWxsO1xuICAgICAgICB0aGlzLm9uQ2xpY2sgPSB0ID0+IHtcbiAgICAgICAgICAgIGlmIChudWxsID09PSB0aGlzLmluc3RydWN0aW9ucykgcmV0dXJuO1xuICAgICAgICAgICAgaWYgKHQuYWx0S2V5IHx8IHQuY3RybEtleSB8fCB0LnNoaWZ0S2V5IHx8IHQubWV0YUtleSB8fCAwICE9PSB0LmJ1dHRvbikgcmV0dXJuO1xuICAgICAgICAgICAgdC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgdm9pZCB0aGlzLnJvdXRlci5sb2FkKHRoaXMuaW5zdHJ1Y3Rpb25zLCB7XG4gICAgICAgICAgICAgICAgY29udGV4dDogdGhpcy5jdHhcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLmlzRW5hYmxlZCA9ICFlLmhhc0F0dHJpYnV0ZShcImV4dGVybmFsXCIpICYmICFlLmhhc0F0dHJpYnV0ZShcImRhdGEtZXh0ZXJuYWxcIik7XG4gICAgfVxuICAgIGJpbmRpbmcoKSB7XG4gICAgICAgIGlmICh0aGlzLmlzRW5hYmxlZCkgdGhpcy5ldmVudExpc3RlbmVyID0gdGhpcy5kZWxlZ2F0b3IuYWRkRXZlbnRMaXN0ZW5lcih0aGlzLnRhcmdldCwgdGhpcy5lbCwgXCJjbGlja1wiLCB0aGlzLm9uQ2xpY2spO1xuICAgICAgICB0aGlzLnZhbHVlQ2hhbmdlZCgpO1xuICAgICAgICB0aGlzLm5hdmlnYXRpb25FbmRMaXN0ZW5lciA9IHRoaXMuZXZlbnRzLnN1YnNjcmliZShcImF1OnJvdXRlcjpuYXZpZ2F0aW9uLWVuZFwiLCAodCA9PiB7XG4gICAgICAgICAgICB0aGlzLnZhbHVlQ2hhbmdlZCgpO1xuICAgICAgICAgICAgdGhpcy5hY3RpdmUgPSBudWxsICE9PSB0aGlzLmluc3RydWN0aW9ucyAmJiB0aGlzLnJvdXRlci5pc0FjdGl2ZSh0aGlzLmluc3RydWN0aW9ucywgdGhpcy5jdHgpO1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIGF0dGFjaGluZygpIHtcbiAgICAgICAgaWYgKG51bGwgIT09IHRoaXMuY3R4LmFsbFJlc29sdmVkKSByZXR1cm4gdGhpcy5jdHguYWxsUmVzb2x2ZWQudGhlbigoKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy52YWx1ZUNoYW5nZWQoKTtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICB1bmJpbmRpbmcoKSB7XG4gICAgICAgIGlmICh0aGlzLmlzRW5hYmxlZCkgdGhpcy5ldmVudExpc3RlbmVyLmRpc3Bvc2UoKTtcbiAgICAgICAgdGhpcy5uYXZpZ2F0aW9uRW5kTGlzdGVuZXIuZGlzcG9zZSgpO1xuICAgIH1cbiAgICB2YWx1ZUNoYW5nZWQoKSB7XG4gICAgICAgIGNvbnN0IHQgPSB0aGlzLnJvdXRlci5vcHRpb25zLnVzZVVybEZyYWdtZW50SGFzaDtcbiAgICAgICAgaWYgKG51bGwgIT09IHRoaXMucm91dGUgJiYgdm9pZCAwICE9PSB0aGlzLnJvdXRlICYmIG51bGwgPT09IHRoaXMuY3R4LmFsbFJlc29sdmVkKSB7XG4gICAgICAgICAgICBjb25zdCBlID0gdGhpcy5jdHguY2hpbGRSb3V0ZXMuZmluZCgodCA9PiB0LmlkID09PSB0aGlzLnJvdXRlKSk7XG4gICAgICAgICAgICBpZiAodm9pZCAwICE9PSBlKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgaSA9IHRoaXMuY3R4Lm5vZGUuY29tcHV0ZUFic29sdXRlUGF0aCgpO1xuICAgICAgICAgICAgICAgIGxldCBzID0gZS5wYXRoWzBdO1xuICAgICAgICAgICAgICAgIGlmIChcIm9iamVjdFwiID09PSB0eXBlb2YgdGhpcy5wYXJhbXMgJiYgbnVsbCAhPT0gdGhpcy5wYXJhbXMpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgdCA9IE9iamVjdC5rZXlzKHRoaXMucGFyYW1zKTtcbiAgICAgICAgICAgICAgICAgICAgZm9yIChjb25zdCBlIG9mIHQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHQgPSB0aGlzLnBhcmFtc1tlXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChudWxsICE9IHQgJiYgU3RyaW5nKHQpLmxlbmd0aCA+IDApIHMgPSBzLnJlcGxhY2UobmV3IFJlZ0V4cChgWyo6XSR7ZX1bP10/YCksIHQpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHMgPSBzLnJlcGxhY2UoL1xcL1sqOl1bXi9dK1s/XS9nLCBcIlwiKS5yZXBsYWNlKC9bKjpdW14vXStbP11cXC8vZywgXCJcIik7XG4gICAgICAgICAgICAgICAgaWYgKGkpIGlmIChzKSB0aGlzLmhyZWYgPSBgJHt0ID8gXCIjXCIgOiBcIlwifSR7WyBpLCBzIF0uam9pbihcIi9cIil9YDsgZWxzZSB0aGlzLmhyZWYgPSBgJHt0ID8gXCIjXCIgOiBcIlwifSR7aX1gOyBlbHNlIHRoaXMuaHJlZiA9IGAke3QgPyBcIiNcIiA6IFwiXCJ9JHtzfWA7XG4gICAgICAgICAgICAgICAgdGhpcy5pbnN0cnVjdGlvbnMgPSB0aGlzLnJvdXRlci5jcmVhdGVWaWV3cG9ydEluc3RydWN0aW9ucyhgJHt0ID8gXCIjXCIgOiBcIlwifSR7c31gLCB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRleHQ6IHRoaXMuY3R4XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGlmIChcIm9iamVjdFwiID09PSB0eXBlb2YgdGhpcy5wYXJhbXMgJiYgbnVsbCAhPT0gdGhpcy5wYXJhbXMpIHRoaXMuaW5zdHJ1Y3Rpb25zID0gdGhpcy5yb3V0ZXIuY3JlYXRlVmlld3BvcnRJbnN0cnVjdGlvbnMoe1xuICAgICAgICAgICAgICAgICAgICBjb21wb25lbnQ6IHRoaXMucm91dGUsXG4gICAgICAgICAgICAgICAgICAgIHBhcmFtczogdGhpcy5wYXJhbXNcbiAgICAgICAgICAgICAgICB9LCB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRleHQ6IHRoaXMuY3R4XG4gICAgICAgICAgICAgICAgfSk7IGVsc2UgdGhpcy5pbnN0cnVjdGlvbnMgPSB0aGlzLnJvdXRlci5jcmVhdGVWaWV3cG9ydEluc3RydWN0aW9ucyh0aGlzLnJvdXRlLCB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRleHQ6IHRoaXMuY3R4XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgdGhpcy5ocmVmID0gdGhpcy5pbnN0cnVjdGlvbnMudG9VcmwodGhpcy5yb3V0ZXIub3B0aW9ucy51c2VVcmxGcmFnbWVudEhhc2gpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5pbnN0cnVjdGlvbnMgPSBudWxsO1xuICAgICAgICAgICAgdGhpcy5ocmVmID0gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBlID0geS5mb3IodGhpcy5lbCwge1xuICAgICAgICAgICAgb3B0aW9uYWw6IHRydWVcbiAgICAgICAgfSk7XG4gICAgICAgIGlmIChudWxsICE9PSBlKSBlLnZpZXdNb2RlbFt0aGlzLmF0dHJpYnV0ZV0gPSB0aGlzLmluc3RydWN0aW9uczsgZWxzZSBpZiAobnVsbCA9PT0gdGhpcy5ocmVmKSB0aGlzLmVsLnJlbW92ZUF0dHJpYnV0ZSh0aGlzLmF0dHJpYnV0ZSk7IGVsc2Uge1xuICAgICAgICAgICAgY29uc3QgZSA9IHQgPyB0aGlzLmhyZWYgOiB0aGlzLmxvY2F0aW9uTWdyLmFkZEJhc2VIcmVmKHRoaXMuaHJlZik7XG4gICAgICAgICAgICB0aGlzLmVsLnNldEF0dHJpYnV0ZSh0aGlzLmF0dHJpYnV0ZSwgZSk7XG4gICAgICAgIH1cbiAgICB9XG59O1xuXG5LKFsgayh7XG4gICAgbW9kZTogTi50b1ZpZXcsXG4gICAgcHJpbWFyeTogdHJ1ZSxcbiAgICBjYWxsYmFjazogXCJ2YWx1ZUNoYW5nZWRcIlxufSkgXSwgWHQucHJvdG90eXBlLCBcInJvdXRlXCIsIHZvaWQgMCk7XG5cbksoWyBrKHtcbiAgICBtb2RlOiBOLnRvVmlldyxcbiAgICBjYWxsYmFjazogXCJ2YWx1ZUNoYW5nZWRcIlxufSkgXSwgWHQucHJvdG90eXBlLCBcInBhcmFtc1wiLCB2b2lkIDApO1xuXG5LKFsgayh7XG4gICAgbW9kZTogTi50b1ZpZXdcbn0pIF0sIFh0LnByb3RvdHlwZSwgXCJhdHRyaWJ1dGVcIiwgdm9pZCAwKTtcblxuSyhbIGsoe1xuICAgIG1vZGU6IE4uZnJvbVZpZXdcbn0pIF0sIFh0LnByb3RvdHlwZSwgXCJhY3RpdmVcIiwgdm9pZCAwKTtcblxuWHQgPSBLKFsgVChcImxvYWRcIiksIFgoMCwgViksIFgoMSwgQSksIFgoMiwgVXQpLCBYKDMsIHR0KSwgWCg0LCBQKSwgWCg1LCBHdCksIFgoNiwgbnQpIF0sIFh0KTtcblxubGV0IHRlID0gY2xhc3MgSHJlZkN1c3RvbUF0dHJpYnV0ZSB7XG4gICAgY29uc3RydWN0b3IodCwgZSwgaSwgcywgbiwgbykge1xuICAgICAgICB0aGlzLnRhcmdldCA9IHQ7XG4gICAgICAgIHRoaXMuZWwgPSBlO1xuICAgICAgICB0aGlzLnJvdXRlciA9IGk7XG4gICAgICAgIHRoaXMuZGVsZWdhdG9yID0gcztcbiAgICAgICAgdGhpcy5jdHggPSBuO1xuICAgICAgICB0aGlzLmlzSW5pdGlhbGl6ZWQgPSBmYWxzZTtcbiAgICAgICAgaWYgKGkub3B0aW9ucy51c2VIcmVmICYmIFwiQVwiID09PSBlLm5vZGVOYW1lKSBzd2l0Y2ggKGUuZ2V0QXR0cmlidXRlKFwidGFyZ2V0XCIpKSB7XG4gICAgICAgICAgY2FzZSBudWxsOlxuICAgICAgICAgIGNhc2Ugby5uYW1lOlxuICAgICAgICAgIGNhc2UgXCJfc2VsZlwiOlxuICAgICAgICAgICAgdGhpcy5pc0VuYWJsZWQgPSB0cnVlO1xuICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgdGhpcy5pc0VuYWJsZWQgPSBmYWxzZTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9IGVsc2UgdGhpcy5pc0VuYWJsZWQgPSBmYWxzZTtcbiAgICB9XG4gICAgZ2V0IGlzRXh0ZXJuYWwoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmVsLmhhc0F0dHJpYnV0ZShcImV4dGVybmFsXCIpIHx8IHRoaXMuZWwuaGFzQXR0cmlidXRlKFwiZGF0YS1leHRlcm5hbFwiKTtcbiAgICB9XG4gICAgYmluZGluZygpIHtcbiAgICAgICAgaWYgKCF0aGlzLmlzSW5pdGlhbGl6ZWQpIHtcbiAgICAgICAgICAgIHRoaXMuaXNJbml0aWFsaXplZCA9IHRydWU7XG4gICAgICAgICAgICB0aGlzLmlzRW5hYmxlZCA9IHRoaXMuaXNFbmFibGVkICYmIG51bGwgPT09IEwodGhpcy5lbCwgVS5nZXREZWZpbml0aW9uKFh0KS5rZXkpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChudWxsID09IHRoaXMudmFsdWUpIHRoaXMuZWwucmVtb3ZlQXR0cmlidXRlKFwiaHJlZlwiKTsgZWxzZSB0aGlzLmVsLnNldEF0dHJpYnV0ZShcImhyZWZcIiwgdGhpcy52YWx1ZSk7XG4gICAgICAgIHRoaXMuZXZlbnRMaXN0ZW5lciA9IHRoaXMuZGVsZWdhdG9yLmFkZEV2ZW50TGlzdGVuZXIodGhpcy50YXJnZXQsIHRoaXMuZWwsIFwiY2xpY2tcIiwgdGhpcyk7XG4gICAgfVxuICAgIHVuYmluZGluZygpIHtcbiAgICAgICAgdGhpcy5ldmVudExpc3RlbmVyLmRpc3Bvc2UoKTtcbiAgICB9XG4gICAgdmFsdWVDaGFuZ2VkKHQpIHtcbiAgICAgICAgaWYgKG51bGwgPT0gdCkgdGhpcy5lbC5yZW1vdmVBdHRyaWJ1dGUoXCJocmVmXCIpOyBlbHNlIHRoaXMuZWwuc2V0QXR0cmlidXRlKFwiaHJlZlwiLCB0KTtcbiAgICB9XG4gICAgaGFuZGxlRXZlbnQodCkge1xuICAgICAgICB0aGlzLkModCk7XG4gICAgfVxuICAgIEModCkge1xuICAgICAgICBpZiAodC5hbHRLZXkgfHwgdC5jdHJsS2V5IHx8IHQuc2hpZnRLZXkgfHwgdC5tZXRhS2V5IHx8IDAgIT09IHQuYnV0dG9uIHx8IHRoaXMuaXNFeHRlcm5hbCB8fCAhdGhpcy5pc0VuYWJsZWQpIHJldHVybjtcbiAgICAgICAgY29uc3QgZSA9IHRoaXMuZWwuZ2V0QXR0cmlidXRlKFwiaHJlZlwiKTtcbiAgICAgICAgaWYgKG51bGwgIT09IGUpIHtcbiAgICAgICAgICAgIHQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIHZvaWQgdGhpcy5yb3V0ZXIubG9hZChlLCB7XG4gICAgICAgICAgICAgICAgY29udGV4dDogdGhpcy5jdHhcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxufTtcblxuSyhbIGsoe1xuICAgIG1vZGU6IE4udG9WaWV3XG59KSBdLCB0ZS5wcm90b3R5cGUsIFwidmFsdWVcIiwgdm9pZCAwKTtcblxudGUgPSBLKFsgVCh7XG4gICAgbmFtZTogXCJocmVmXCIsXG4gICAgbm9NdWx0aUJpbmRpbmdzOiB0cnVlXG59KSwgWCgwLCBWKSwgWCgxLCBBKSwgWCgyLCBVdCksIFgoMywgUCksIFgoNCwgR3QpLCBYKDUsICQpIF0sIHRlKTtcblxuY29uc3QgZWUgPSBVdDtcblxuY29uc3QgaWUgPSBbIGVlIF07XG5cbmNvbnN0IHNlID0gUXQ7XG5cbmNvbnN0IG5lID0gWHQ7XG5cbmNvbnN0IG9lID0gdGU7XG5cbmNvbnN0IHJlID0gWyBRdCwgWHQsIHRlIF07XG5cbmZ1bmN0aW9uIGFlKHQsIGUpIHtcbiAgICByZXR1cm4gdC5yZWdpc3RlcihPLmh5ZHJhdGVkKGEsIFJvdXRlQ29udGV4dC5zZXRSb290KSwgTy5hZnRlckFjdGl2YXRlKFV0LCAodCA9PiB7XG4gICAgICAgIGlmIChyKGUpKSBpZiAoXCJmdW5jdGlvblwiID09PSB0eXBlb2YgZSkgcmV0dXJuIGUodCk7IGVsc2UgcmV0dXJuIHQuc3RhcnQoZSwgdHJ1ZSk7XG4gICAgICAgIHJldHVybiB0LnN0YXJ0KHt9LCB0cnVlKTtcbiAgICB9KSksIE8uYWZ0ZXJEZWFjdGl2YXRlKFV0LCAodCA9PiB7XG4gICAgICAgIHQuc3RvcCgpO1xuICAgIH0pKSwgLi4uaWUsIC4uLnJlKTtcbn1cblxuY29uc3QgaGUgPSB7XG4gICAgcmVnaXN0ZXIodCkge1xuICAgICAgICByZXR1cm4gYWUodCk7XG4gICAgfSxcbiAgICBjdXN0b21pemUodCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgcmVnaXN0ZXIoZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBhZShlLCB0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICB9XG59O1xuXG5jbGFzcyBTY3JvbGxTdGF0ZSB7XG4gICAgY29uc3RydWN0b3IodCkge1xuICAgICAgICB0aGlzLmVsID0gdDtcbiAgICAgICAgdGhpcy50b3AgPSB0LnNjcm9sbFRvcDtcbiAgICAgICAgdGhpcy5sZWZ0ID0gdC5zY3JvbGxMZWZ0O1xuICAgIH1cbiAgICBzdGF0aWMgaGFzKHQpIHtcbiAgICAgICAgcmV0dXJuIHQuc2Nyb2xsVG9wID4gMCB8fCB0LnNjcm9sbExlZnQgPiAwO1xuICAgIH1cbiAgICByZXN0b3JlKCkge1xuICAgICAgICB0aGlzLmVsLnNjcm9sbFRvKHRoaXMubGVmdCwgdGhpcy50b3ApO1xuICAgICAgICB0aGlzLmVsID0gbnVsbDtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIGNlKHQpIHtcbiAgICB0LnJlc3RvcmUoKTtcbn1cblxuY2xhc3MgSG9zdEVsZW1lbnRTdGF0ZSB7XG4gICAgY29uc3RydWN0b3IodCkge1xuICAgICAgICB0aGlzLnNjcm9sbFN0YXRlcyA9IFtdO1xuICAgICAgICB0aGlzLnNhdmUodC5jaGlsZHJlbik7XG4gICAgfVxuICAgIHNhdmUodCkge1xuICAgICAgICBsZXQgZTtcbiAgICAgICAgZm9yIChsZXQgaSA9IDAsIHMgPSB0Lmxlbmd0aDsgaSA8IHM7ICsraSkge1xuICAgICAgICAgICAgZSA9IHRbaV07XG4gICAgICAgICAgICBpZiAoU2Nyb2xsU3RhdGUuaGFzKGUpKSB0aGlzLnNjcm9sbFN0YXRlcy5wdXNoKG5ldyBTY3JvbGxTdGF0ZShlKSk7XG4gICAgICAgICAgICB0aGlzLnNhdmUoZS5jaGlsZHJlbik7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmVzdG9yZSgpIHtcbiAgICAgICAgdGhpcy5zY3JvbGxTdGF0ZXMuZm9yRWFjaChjZSk7XG4gICAgICAgIHRoaXMuc2Nyb2xsU3RhdGVzID0gbnVsbDtcbiAgICB9XG59XG5cbmNvbnN0IHVlID0gdC5jcmVhdGVJbnRlcmZhY2UoXCJJU3RhdGVNYW5hZ2VyXCIsICh0ID0+IHQuc2luZ2xldG9uKFNjcm9sbFN0YXRlTWFuYWdlcikpKTtcblxuY2xhc3MgU2Nyb2xsU3RhdGVNYW5hZ2VyIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgdGhpcy5jYWNoZSA9IG5ldyBXZWFrTWFwO1xuICAgIH1cbiAgICBzYXZlU3RhdGUodCkge1xuICAgICAgICB0aGlzLmNhY2hlLnNldCh0Lmhvc3QsIG5ldyBIb3N0RWxlbWVudFN0YXRlKHQuaG9zdCkpO1xuICAgIH1cbiAgICByZXN0b3JlU3RhdGUodCkge1xuICAgICAgICBjb25zdCBlID0gdGhpcy5jYWNoZS5nZXQodC5ob3N0KTtcbiAgICAgICAgaWYgKHZvaWQgMCAhPT0gZSkge1xuICAgICAgICAgICAgZS5yZXN0b3JlKCk7XG4gICAgICAgICAgICB0aGlzLmNhY2hlLmRlbGV0ZSh0Lmhvc3QpO1xuICAgICAgICB9XG4gICAgfVxufVxuXG5leHBvcnQgeyAkdCBhcyBBU1QsIEFjdGlvbkV4cHJlc3Npb24sIFZ0IGFzIEF1TmF2SWQsIENoaWxkUm91dGVDb25maWcsIENvbXBvbmVudEFnZW50LCBDb21wb25lbnRFeHByZXNzaW9uLCBDb21wb3NpdGVTZWdtZW50RXhwcmVzc2lvbiwgaWUgYXMgRGVmYXVsdENvbXBvbmVudHMsIHJlIGFzIERlZmF1bHRSZXNvdXJjZXMsIHZ0IGFzIEV4cHJlc3Npb25LaW5kLCB0ZSBhcyBIcmVmQ3VzdG9tQXR0cmlidXRlLCBvZSBhcyBIcmVmQ3VzdG9tQXR0cmlidXRlUmVnaXN0cmF0aW9uLCBpdCBhcyBJQmFzZUhyZWZQcm92aWRlciwgbnQgYXMgSUxvY2F0aW9uTWFuYWdlciwgR3QgYXMgSVJvdXRlQ29udGV4dCwgVXQgYXMgSVJvdXRlciwgdHQgYXMgSVJvdXRlckV2ZW50cywgdWUgYXMgSVN0YXRlTWFuYWdlciwganQgYXMgSVZpZXdwb3J0SW5zdHJ1Y3Rpb24sIFh0IGFzIExvYWRDdXN0b21BdHRyaWJ1dGUsIG5lIGFzIExvYWRDdXN0b21BdHRyaWJ1dGVSZWdpc3RyYXRpb24sIExvY2F0aW9uQ2hhbmdlRXZlbnQsIE5hdmlnYXRpb24sIE5hdmlnYXRpb25DYW5jZWxFdmVudCwgTmF2aWdhdGlvbkVuZEV2ZW50LCBOYXZpZ2F0aW9uRXJyb3JFdmVudCwgTmF2aWdhdGlvbk9wdGlvbnMsIE5hdmlnYXRpb25TdGFydEV2ZW50LCBQYXJhbWV0ZXJFeHByZXNzaW9uLCBQYXJhbWV0ZXJMaXN0RXhwcmVzc2lvbiwgRnQgYXMgUm91dGUsIFJvdXRlQ29uZmlnLCBSb3V0ZUNvbnRleHQsIFJvdXRlRGVmaW5pdGlvbiwgUm91dGVFeHByZXNzaW9uLCBSb3V0ZU5vZGUsIFJvdXRlVHJlZSwgT3QgYXMgUm91dGVyLCBoZSBhcyBSb3V0ZXJDb25maWd1cmF0aW9uLCBSb3V0ZXJPcHRpb25zLCBlZSBhcyBSb3V0ZXJSZWdpc3RyYXRpb24sIFNjb3BlZFNlZ21lbnRFeHByZXNzaW9uLCBTZWdtZW50RXhwcmVzc2lvbiwgU2VnbWVudEdyb3VwRXhwcmVzc2lvbiwgVHJhbnNpdGlvbiwgVmlld3BvcnRBZ2VudCwgUXQgYXMgVmlld3BvcnRDdXN0b21FbGVtZW50LCBzZSBhcyBWaWV3cG9ydEN1c3RvbUVsZW1lbnRSZWdpc3RyYXRpb24sIFZpZXdwb3J0RXhwcmVzc2lvbiwgQXQgYXMgaXNNYW5hZ2VkU3RhdGUsIHp0IGFzIHJvdXRlLCBQdCBhcyB0b01hbmFnZWRTdGF0ZSB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXguanMubWFwXG4iLCJleHBvcnQgeyBQbGF0Zm9ybSwgVGFzaywgVGFza0Fib3J0RXJyb3IsIFRhc2tRdWV1ZSwgVGFza1F1ZXVlUHJpb3JpdHksIFRhc2tTdGF0dXMgfSBmcm9tIFwiQGF1cmVsaWEvcGxhdGZvcm1cIjtcblxuaW1wb3J0IHsgQnJvd3NlclBsYXRmb3JtIGFzIHQgfSBmcm9tIFwiQGF1cmVsaWEvcGxhdGZvcm0tYnJvd3NlclwiO1xuXG5leHBvcnQgeyBCcm93c2VyUGxhdGZvcm0gfSBmcm9tIFwiQGF1cmVsaWEvcGxhdGZvcm0tYnJvd3NlclwiO1xuXG5pbXBvcnQgeyBNZXRhZGF0YSBhcyBlLCBQcm90b2NvbCBhcyBpLCBnZXRQcm90b3R5cGVDaGFpbiBhcyBzLCBmaXJzdERlZmluZWQgYXMgbiwga2ViYWJDYXNlIGFzIHIsIG5vb3AgYXMgbywgREkgYXMgbCwgZW1wdHlBcnJheSBhcyBoLCBhbGwgYXMgYSwgUmVnaXN0cmF0aW9uIGFzIGMsIElQbGF0Zm9ybSBhcyB1LCBtZXJnZUFycmF5cyBhcyBmLCBmcm9tRGVmaW5pdGlvbk9yRGVmYXVsdCBhcyBkLCBwYXNjYWxDYXNlIGFzIG0sIGZyb21Bbm5vdGF0aW9uT3JUeXBlT3JEZWZhdWx0IGFzIHYsIGZyb21Bbm5vdGF0aW9uT3JEZWZpbml0aW9uT3JUeXBlT3JEZWZhdWx0IGFzIHAsIElDb250YWluZXIgYXMgZywgbmV4dElkIGFzIHcsIG9wdGlvbmFsIGFzIGIsIEluc3RhbmNlUHJvdmlkZXIgYXMgeCwgaXNPYmplY3QgYXMgeSwgSUxvZ2dlciBhcyBrLCBvblJlc29sdmUgYXMgQywgcmVzb2x2ZUFsbCBhcyBBLCBjYW1lbENhc2UgYXMgUywgdG9BcnJheSBhcyBSLCBlbXB0eU9iamVjdCBhcyBFLCBJU2VydmljZUxvY2F0b3IgYXMgQiwgY29tcGFyZU51bWJlciBhcyBJLCB0cmFuc2llbnQgYXMgVCB9IGZyb20gXCJAYXVyZWxpYS9rZXJuZWxcIjtcblxuaW1wb3J0IHsgQmluZGluZ01vZGUgYXMgRCwgc3Vic2NyaWJlckNvbGxlY3Rpb24gYXMgUCwgd2l0aEZsdXNoUXVldWUgYXMgTywgY29ubmVjdGFibGUgYXMgJCwgcmVnaXN0ZXJBbGlhc2VzIGFzIEwsIENvbm5lY3RhYmxlU3dpdGNoZXIgYXMgcSwgUHJveHlPYnNlcnZhYmxlIGFzIE0sIFNjb3BlIGFzIFUsIElDb2VyY2lvbkNvbmZpZ3VyYXRpb24gYXMgRiwgSU9ic2VydmVyTG9jYXRvciBhcyBWLCBJRXhwcmVzc2lvblBhcnNlciBhcyBfLCBBY2Nlc3NTY29wZUV4cHJlc3Npb24gYXMgaiwgRGVsZWdhdGlvblN0cmF0ZWd5IGFzIE4sIEJpbmRpbmdCZWhhdmlvckV4cHJlc3Npb24gYXMgVywgQmluZGluZ0JlaGF2aW9yRmFjdG9yeSBhcyBILCBQcmltaXRpdmVMaXRlcmFsRXhwcmVzc2lvbiBhcyB6LCBiaW5kaW5nQmVoYXZpb3IgYXMgRywgQmluZGluZ0ludGVyY2VwdG9yIGFzIFgsIElTaWduYWxlciBhcyBLLCBQcm9wZXJ0eUFjY2Vzc29yIGFzIFksIElOb2RlT2JzZXJ2ZXJMb2NhdG9yIGFzIFEsIFNldHRlck9ic2VydmVyIGFzIFosIElEaXJ0eUNoZWNrZXIgYXMgSiwgYWxpYXMgYXMgdHQsIGFwcGx5TXV0YXRpb25zVG9JbmRpY2VzIGFzIGV0LCBnZXRDb2xsZWN0aW9uT2JzZXJ2ZXIgYXMgaXQsIEJpbmRpbmdDb250ZXh0IGFzIHN0LCBzeW5jaHJvbml6ZUluZGljZXMgYXMgbnQsIHZhbHVlQ29udmVydGVyIGFzIHJ0IH0gZnJvbSBcIkBhdXJlbGlhL3J1bnRpbWVcIjtcblxuZXhwb3J0IHsgQWNjZXNzLCBBY2Nlc3NLZXllZEV4cHJlc3Npb24sIEFjY2Vzc01lbWJlckV4cHJlc3Npb24sIEFjY2Vzc1Njb3BlRXhwcmVzc2lvbiwgQWNjZXNzVGhpc0V4cHJlc3Npb24sIEFjY2Vzc29yVHlwZSwgQXJyYXlCaW5kaW5nUGF0dGVybiwgQXJyYXlJbmRleE9ic2VydmVyLCBBcnJheUxpdGVyYWxFeHByZXNzaW9uLCBBcnJheU9ic2VydmVyLCBBc3NpZ25FeHByZXNzaW9uLCBCaW5hcnlFeHByZXNzaW9uLCBCaW5kaW5nQmVoYXZpb3IsIEJpbmRpbmdCZWhhdmlvckRlZmluaXRpb24sIEJpbmRpbmdCZWhhdmlvckV4cHJlc3Npb24sIEJpbmRpbmdCZWhhdmlvckZhY3RvcnksIEJpbmRpbmdCZWhhdmlvclN0cmF0ZWd5LCBCaW5kaW5nQ29udGV4dCwgQmluZGluZ0lkZW50aWZpZXIsIEJpbmRpbmdJbnRlcmNlcHRvciwgQmluZGluZ01lZGlhdG9yLCBCaW5kaW5nTW9kZSwgQ2FsbEZ1bmN0aW9uRXhwcmVzc2lvbiwgQ2FsbE1lbWJlckV4cHJlc3Npb24sIENhbGxTY29wZUV4cHJlc3Npb24sIENoYXIsIENvbGxlY3Rpb25LaW5kLCBDb2xsZWN0aW9uTGVuZ3RoT2JzZXJ2ZXIsIENvbGxlY3Rpb25TaXplT2JzZXJ2ZXIsIENvbXB1dGVkT2JzZXJ2ZXIsIENvbmRpdGlvbmFsRXhwcmVzc2lvbiwgQ3VzdG9tRXhwcmVzc2lvbiwgRGVsZWdhdGlvblN0cmF0ZWd5LCBEaXJ0eUNoZWNrUHJvcGVydHksIERpcnR5Q2hlY2tTZXR0aW5ncywgRXhwcmVzc2lvbktpbmQsIEV4cHJlc3Npb25UeXBlLCBGb3JPZlN0YXRlbWVudCwgSHRtbExpdGVyYWxFeHByZXNzaW9uLCBJRGlydHlDaGVja2VyLCBJRXhwcmVzc2lvblBhcnNlciwgSU5vZGVPYnNlcnZlckxvY2F0b3IsIElPYnNlcnZlckxvY2F0b3IsIElTaWduYWxlciwgSW50ZXJwb2xhdGlvbiwgTGlmZWN5Y2xlRmxhZ3MsIE1hcE9ic2VydmVyLCBPYmplY3RCaW5kaW5nUGF0dGVybiwgT2JqZWN0TGl0ZXJhbEV4cHJlc3Npb24sIE9ic2VydmVyTG9jYXRvciwgT3ZlcnJpZGVDb250ZXh0LCBQcmVjZWRlbmNlLCBQcmltaXRpdmVMaXRlcmFsRXhwcmVzc2lvbiwgUHJpbWl0aXZlT2JzZXJ2ZXIsIFByb3BlcnR5QWNjZXNzb3IsIFNjb3BlLCBTZXRPYnNlcnZlciwgU2V0dGVyT2JzZXJ2ZXIsIFRhZ2dlZFRlbXBsYXRlRXhwcmVzc2lvbiwgVGVtcGxhdGVFeHByZXNzaW9uLCBVbmFyeUV4cHJlc3Npb24sIFZhbHVlQ29udmVydGVyLCBWYWx1ZUNvbnZlcnRlckRlZmluaXRpb24sIFZhbHVlQ29udmVydGVyRXhwcmVzc2lvbiwgYWxpYXMsIGFwcGx5TXV0YXRpb25zVG9JbmRpY2VzLCBiaW5kaW5nQmVoYXZpb3IsIGNsb25lSW5kZXhNYXAsIGNvbm5lY3RhYmxlLCBjb3B5SW5kZXhNYXAsIGNyZWF0ZUluZGV4TWFwLCBkaXNhYmxlQXJyYXlPYnNlcnZhdGlvbiwgZGlzYWJsZU1hcE9ic2VydmF0aW9uLCBkaXNhYmxlU2V0T2JzZXJ2YXRpb24sIGVuYWJsZUFycmF5T2JzZXJ2YXRpb24sIGVuYWJsZU1hcE9ic2VydmF0aW9uLCBlbmFibGVTZXRPYnNlcnZhdGlvbiwgZ2V0Q29sbGVjdGlvbk9ic2VydmVyLCBpc0luZGV4TWFwLCBvYnNlcnZhYmxlLCBwYXJzZUV4cHJlc3Npb24sIHJlZ2lzdGVyQWxpYXNlcywgc3Vic2NyaWJlckNvbGxlY3Rpb24sIHN5bmNocm9uaXplSW5kaWNlcywgdmFsdWVDb252ZXJ0ZXIgfSBmcm9tIFwiQGF1cmVsaWEvcnVudGltZVwiO1xuXG4vKiEgKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKipcbkNvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLlxuXG5QZXJtaXNzaW9uIHRvIHVzZSwgY29weSwgbW9kaWZ5LCBhbmQvb3IgZGlzdHJpYnV0ZSB0aGlzIHNvZnR3YXJlIGZvciBhbnlcbnB1cnBvc2Ugd2l0aCBvciB3aXRob3V0IGZlZSBpcyBoZXJlYnkgZ3JhbnRlZC5cblxuVEhFIFNPRlRXQVJFIElTIFBST1ZJREVEIFwiQVMgSVNcIiBBTkQgVEhFIEFVVEhPUiBESVNDTEFJTVMgQUxMIFdBUlJBTlRJRVMgV0lUSFxuUkVHQVJEIFRPIFRISVMgU09GVFdBUkUgSU5DTFVESU5HIEFMTCBJTVBMSUVEIFdBUlJBTlRJRVMgT0YgTUVSQ0hBTlRBQklMSVRZXG5BTkQgRklUTkVTUy4gSU4gTk8gRVZFTlQgU0hBTEwgVEhFIEFVVEhPUiBCRSBMSUFCTEUgRk9SIEFOWSBTUEVDSUFMLCBESVJFQ1QsXG5JTkRJUkVDVCwgT1IgQ09OU0VRVUVOVElBTCBEQU1BR0VTIE9SIEFOWSBEQU1BR0VTIFdIQVRTT0VWRVIgUkVTVUxUSU5HIEZST01cbkxPU1MgT0YgVVNFLCBEQVRBIE9SIFBST0ZJVFMsIFdIRVRIRVIgSU4gQU4gQUNUSU9OIE9GIENPTlRSQUNULCBORUdMSUdFTkNFIE9SXG5PVEhFUiBUT1JUSU9VUyBBQ1RJT04sIEFSSVNJTkcgT1VUIE9GIE9SIElOIENPTk5FQ1RJT04gV0lUSCBUSEUgVVNFIE9SXG5QRVJGT1JNQU5DRSBPRiBUSElTIFNPRlRXQVJFLlxuKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiogKi8gZnVuY3Rpb24gb3QodCwgZSwgaSwgcykge1xuICAgIHZhciBuID0gYXJndW1lbnRzLmxlbmd0aCwgciA9IG4gPCAzID8gZSA6IG51bGwgPT09IHMgPyBzID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihlLCBpKSA6IHMsIG87XG4gICAgaWYgKFwib2JqZWN0XCIgPT09IHR5cGVvZiBSZWZsZWN0ICYmIFwiZnVuY3Rpb25cIiA9PT0gdHlwZW9mIFJlZmxlY3QuZGVjb3JhdGUpIHIgPSBSZWZsZWN0LmRlY29yYXRlKHQsIGUsIGksIHMpOyBlbHNlIGZvciAodmFyIGwgPSB0Lmxlbmd0aCAtIDE7IGwgPj0gMDsgbC0tKSBpZiAobyA9IHRbbF0pIHIgPSAobiA8IDMgPyBvKHIpIDogbiA+IDMgPyBvKGUsIGksIHIpIDogbyhlLCBpKSkgfHwgcjtcbiAgICByZXR1cm4gbiA+IDMgJiYgciAmJiBPYmplY3QuZGVmaW5lUHJvcGVydHkoZSwgaSwgciksIHI7XG59XG5cbmZ1bmN0aW9uIGx0KHQsIGUpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24oaSwgcykge1xuICAgICAgICBlKGksIHMsIHQpO1xuICAgIH07XG59XG5cbmNvbnN0IGh0ID0gZS5nZXRPd247XG5cbmNvbnN0IGF0ID0gZS5oYXNPd247XG5cbmNvbnN0IGN0ID0gZS5kZWZpbmU7XG5cbmNvbnN0IHthbm5vdGF0aW9uOiB1dCwgcmVzb3VyY2U6IGZ0fSA9IGk7XG5cbmNvbnN0IGR0ID0gdXQua2V5Rm9yO1xuXG5jb25zdCBtdCA9IGZ0LmtleUZvcjtcblxuY29uc3QgdnQgPSBmdC5hcHBlbmRUbztcblxuY29uc3QgcHQgPSB1dC5hcHBlbmRUbztcblxuY29uc3QgZ3QgPSB1dC5nZXRLZXlzO1xuXG5jb25zdCB3dCA9ICgpID0+IE9iamVjdC5jcmVhdGUobnVsbCk7XG5cbmNvbnN0IGJ0ID0gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eTtcblxuY29uc3QgeHQgPSB3dCgpO1xuXG5jb25zdCB5dCA9ICh0LCBlLCBpKSA9PiB7XG4gICAgaWYgKHRydWUgPT09IHh0W2VdKSByZXR1cm4gdHJ1ZTtcbiAgICBpZiAoIUF0KGUpKSByZXR1cm4gZmFsc2U7XG4gICAgY29uc3QgcyA9IGUuc2xpY2UoMCwgNSk7XG4gICAgcmV0dXJuIHh0W2VdID0gXCJhcmlhLVwiID09PSBzIHx8IFwiZGF0YS1cIiA9PT0gcyB8fCBpLmlzU3RhbmRhcmRTdmdBdHRyaWJ1dGUodCwgZSk7XG59O1xuXG5jb25zdCBrdCA9IHQgPT4gdCBpbnN0YW5jZW9mIFByb21pc2U7XG5cbmNvbnN0IEN0ID0gdCA9PiBcImZ1bmN0aW9uXCIgPT09IHR5cGVvZiB0O1xuXG5jb25zdCBBdCA9IHQgPT4gXCJzdHJpbmdcIiA9PT0gdHlwZW9mIHQ7XG5cbmZ1bmN0aW9uIFN0KHQsIGUpIHtcbiAgICBsZXQgaTtcbiAgICBmdW5jdGlvbiBzKHQsIGUpIHtcbiAgICAgICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPiAxKSBpLnByb3BlcnR5ID0gZTtcbiAgICAgICAgY3QoRXQsIEJpbmRhYmxlRGVmaW5pdGlvbi5jcmVhdGUoZSwgdCwgaSksIHQuY29uc3RydWN0b3IsIGUpO1xuICAgICAgICBwdCh0LmNvbnN0cnVjdG9yLCBCdC5rZXlGcm9tKGUpKTtcbiAgICB9XG4gICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPiAxKSB7XG4gICAgICAgIGkgPSB7fTtcbiAgICAgICAgcyh0LCBlKTtcbiAgICAgICAgcmV0dXJuO1xuICAgIH0gZWxzZSBpZiAoQXQodCkpIHtcbiAgICAgICAgaSA9IHt9O1xuICAgICAgICByZXR1cm4gcztcbiAgICB9XG4gICAgaSA9IHZvaWQgMCA9PT0gdCA/IHt9IDogdDtcbiAgICByZXR1cm4gcztcbn1cblxuZnVuY3Rpb24gUnQodCkge1xuICAgIHJldHVybiB0LnN0YXJ0c1dpdGgoRXQpO1xufVxuXG5jb25zdCBFdCA9IGR0KFwiYmluZGFibGVcIik7XG5cbmNvbnN0IEJ0ID0gT2JqZWN0LmZyZWV6ZSh7XG4gICAgbmFtZTogRXQsXG4gICAga2V5RnJvbTogdCA9PiBgJHtFdH06JHt0fWAsXG4gICAgZnJvbSh0LCAuLi5lKSB7XG4gICAgICAgIGNvbnN0IGkgPSB7fTtcbiAgICAgICAgY29uc3QgcyA9IEFycmF5LmlzQXJyYXk7XG4gICAgICAgIGZ1bmN0aW9uIG4oZSkge1xuICAgICAgICAgICAgaVtlXSA9IEJpbmRhYmxlRGVmaW5pdGlvbi5jcmVhdGUoZSwgdCk7XG4gICAgICAgIH1cbiAgICAgICAgZnVuY3Rpb24gcihlLCBzKSB7XG4gICAgICAgICAgICBpW2VdID0gcyBpbnN0YW5jZW9mIEJpbmRhYmxlRGVmaW5pdGlvbiA/IHMgOiBCaW5kYWJsZURlZmluaXRpb24uY3JlYXRlKGUsIHQsIHMpO1xuICAgICAgICB9XG4gICAgICAgIGZ1bmN0aW9uIG8odCkge1xuICAgICAgICAgICAgaWYgKHModCkpIHQuZm9yRWFjaChuKTsgZWxzZSBpZiAodCBpbnN0YW5jZW9mIEJpbmRhYmxlRGVmaW5pdGlvbikgaVt0LnByb3BlcnR5XSA9IHQ7IGVsc2UgaWYgKHZvaWQgMCAhPT0gdCkgT2JqZWN0LmtleXModCkuZm9yRWFjaCgoZSA9PiByKGUsIHRbZV0pKSk7XG4gICAgICAgIH1cbiAgICAgICAgZS5mb3JFYWNoKG8pO1xuICAgICAgICByZXR1cm4gaTtcbiAgICB9LFxuICAgIGZvcih0KSB7XG4gICAgICAgIGxldCBlO1xuICAgICAgICBjb25zdCBpID0ge1xuICAgICAgICAgICAgYWRkKHMpIHtcbiAgICAgICAgICAgICAgICBsZXQgbjtcbiAgICAgICAgICAgICAgICBsZXQgcjtcbiAgICAgICAgICAgICAgICBpZiAoQXQocykpIHtcbiAgICAgICAgICAgICAgICAgICAgbiA9IHM7XG4gICAgICAgICAgICAgICAgICAgIHIgPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBwcm9wZXJ0eTogblxuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIG4gPSBzLnByb3BlcnR5O1xuICAgICAgICAgICAgICAgICAgICByID0gcztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZSA9IEJpbmRhYmxlRGVmaW5pdGlvbi5jcmVhdGUobiwgdCwgcik7XG4gICAgICAgICAgICAgICAgaWYgKCFhdChFdCwgdCwgbikpIHB0KHQsIEJ0LmtleUZyb20obikpO1xuICAgICAgICAgICAgICAgIGN0KEV0LCBlLCB0LCBuKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gaTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBtb2RlKHQpIHtcbiAgICAgICAgICAgICAgICBlLm1vZGUgPSB0O1xuICAgICAgICAgICAgICAgIHJldHVybiBpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGNhbGxiYWNrKHQpIHtcbiAgICAgICAgICAgICAgICBlLmNhbGxiYWNrID0gdDtcbiAgICAgICAgICAgICAgICByZXR1cm4gaTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBhdHRyaWJ1dGUodCkge1xuICAgICAgICAgICAgICAgIGUuYXR0cmlidXRlID0gdDtcbiAgICAgICAgICAgICAgICByZXR1cm4gaTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBwcmltYXJ5KCkge1xuICAgICAgICAgICAgICAgIGUucHJpbWFyeSA9IHRydWU7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgc2V0KHQpIHtcbiAgICAgICAgICAgICAgICBlLnNldCA9IHQ7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBpO1xuICAgIH0sXG4gICAgZ2V0QWxsKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IEV0Lmxlbmd0aCArIDE7XG4gICAgICAgIGNvbnN0IGkgPSBbXTtcbiAgICAgICAgY29uc3QgbiA9IHModCk7XG4gICAgICAgIGxldCByID0gbi5sZW5ndGg7XG4gICAgICAgIGxldCBvID0gMDtcbiAgICAgICAgbGV0IGw7XG4gICAgICAgIGxldCBoO1xuICAgICAgICBsZXQgYTtcbiAgICAgICAgbGV0IGM7XG4gICAgICAgIHdoaWxlICgtLXIgPj0gMCkge1xuICAgICAgICAgICAgYSA9IG5bcl07XG4gICAgICAgICAgICBsID0gZ3QoYSkuZmlsdGVyKFJ0KTtcbiAgICAgICAgICAgIGggPSBsLmxlbmd0aDtcbiAgICAgICAgICAgIGZvciAoYyA9IDA7IGMgPCBoOyArK2MpIGlbbysrXSA9IGh0KEV0LCBhLCBsW2NdLnNsaWNlKGUpKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gaTtcbiAgICB9XG59KTtcblxuY2xhc3MgQmluZGFibGVEZWZpbml0aW9uIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlLCBpLCBzLCBuLCByKSB7XG4gICAgICAgIHRoaXMuYXR0cmlidXRlID0gdDtcbiAgICAgICAgdGhpcy5jYWxsYmFjayA9IGU7XG4gICAgICAgIHRoaXMubW9kZSA9IGk7XG4gICAgICAgIHRoaXMucHJpbWFyeSA9IHM7XG4gICAgICAgIHRoaXMucHJvcGVydHkgPSBuO1xuICAgICAgICB0aGlzLnNldCA9IHI7XG4gICAgfVxuICAgIHN0YXRpYyBjcmVhdGUodCwgZSwgaSA9IHt9KSB7XG4gICAgICAgIHJldHVybiBuZXcgQmluZGFibGVEZWZpbml0aW9uKG4oaS5hdHRyaWJ1dGUsIHIodCkpLCBuKGkuY2FsbGJhY2ssIGAke3R9Q2hhbmdlZGApLCBuKGkubW9kZSwgRC50b1ZpZXcpLCBuKGkucHJpbWFyeSwgZmFsc2UpLCBuKGkucHJvcGVydHksIHQpLCBuKGkuc2V0LCBEdCh0LCBlLCBpKSkpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gSXQodCwgZSwgaSkge1xuICAgIFR0LmRlZmluZSh0LCBlKTtcbn1cblxuY29uc3QgVHQgPSB7XG4gICAga2V5OiBkdChcImNvZXJjZXJcIiksXG4gICAgZGVmaW5lKHQsIGUpIHtcbiAgICAgICAgY3QoVHQua2V5LCB0W2VdLmJpbmQodCksIHQpO1xuICAgIH0sXG4gICAgZm9yKHQpIHtcbiAgICAgICAgcmV0dXJuIGh0KFR0LmtleSwgdCk7XG4gICAgfVxufTtcblxuZnVuY3Rpb24gRHQodCwgZSwgaSA9IHt9KSB7XG4gICAgdmFyIHMsIG4sIHI7XG4gICAgY29uc3QgbCA9IG51bGwgIT09IChuID0gbnVsbCAhPT0gKHMgPSBpLnR5cGUpICYmIHZvaWQgMCAhPT0gcyA/IHMgOiBSZWZsZWN0LmdldE1ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgZSwgdCkpICYmIHZvaWQgMCAhPT0gbiA/IG4gOiBudWxsO1xuICAgIGlmIChudWxsID09IGwpIHJldHVybiBvO1xuICAgIGxldCBoO1xuICAgIHN3aXRjaCAobCkge1xuICAgICAgY2FzZSBOdW1iZXI6XG4gICAgICBjYXNlIEJvb2xlYW46XG4gICAgICBjYXNlIFN0cmluZzpcbiAgICAgIGNhc2UgQmlnSW50OlxuICAgICAgICBoID0gbDtcbiAgICAgICAgYnJlYWs7XG5cbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHtcbiAgICAgICAgICAgIGNvbnN0IHQgPSBsLmNvZXJjZTtcbiAgICAgICAgICAgIGggPSBcImZ1bmN0aW9uXCIgPT09IHR5cGVvZiB0ID8gdC5iaW5kKGwpIDogbnVsbCAhPT0gKHIgPSBUdC5mb3IobCkpICYmIHZvaWQgMCAhPT0gciA/IHIgOiBvO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGggPT09IG8gPyBoIDogUHQoaCwgaS5udWxsYWJsZSk7XG59XG5cbmZ1bmN0aW9uIFB0KHQsIGUpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24oaSwgcykge1xuICAgICAgICB2YXIgbjtcbiAgICAgICAgaWYgKCEobnVsbCA9PT0gcyB8fCB2b2lkIDAgPT09IHMgPyB2b2lkIDAgOiBzLmVuYWJsZUNvZXJjaW9uKSkgcmV0dXJuIGk7XG4gICAgICAgIHJldHVybiAobnVsbCAhPT0gZSAmJiB2b2lkIDAgIT09IGUgPyBlIDogKG51bGwgIT09IChuID0gbnVsbCA9PT0gcyB8fCB2b2lkIDAgPT09IHMgPyB2b2lkIDAgOiBzLmNvZXJjZU51bGxpc2gpICYmIHZvaWQgMCAhPT0gbiA/IG4gOiBmYWxzZSkgPyBmYWxzZSA6IHRydWUpICYmIG51bGwgPT0gaSA/IGkgOiB0KGksIHMpO1xuICAgIH07XG59XG5cbmNsYXNzIEJpbmRhYmxlT2JzZXJ2ZXIge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUsIGksIHMsIG4sIHIpIHtcbiAgICAgICAgdGhpcy5zZXQgPSBzO1xuICAgICAgICB0aGlzLiRjb250cm9sbGVyID0gbjtcbiAgICAgICAgdGhpcy50ID0gcjtcbiAgICAgICAgdGhpcy52ID0gdm9pZCAwO1xuICAgICAgICB0aGlzLm92ID0gdm9pZCAwO1xuICAgICAgICB0aGlzLmYgPSAwO1xuICAgICAgICBjb25zdCBsID0gdFtpXTtcbiAgICAgICAgY29uc3QgaCA9IHQucHJvcGVydHlDaGFuZ2VkO1xuICAgICAgICBjb25zdCBhID0gdGhpcy5pID0gQ3QobCk7XG4gICAgICAgIGNvbnN0IGMgPSB0aGlzLnUgPSBDdChoKTtcbiAgICAgICAgY29uc3QgdSA9IHRoaXMuaHMgPSBzICE9PSBvO1xuICAgICAgICBsZXQgZjtcbiAgICAgICAgdGhpcy5vID0gdDtcbiAgICAgICAgdGhpcy5rID0gZTtcbiAgICAgICAgdGhpcy5jYiA9IGEgPyBsIDogbztcbiAgICAgICAgdGhpcy5DID0gYyA/IGggOiBvO1xuICAgICAgICBpZiAodm9pZCAwID09PSB0aGlzLmNiICYmICFjICYmICF1KSB0aGlzLmlPID0gZmFsc2U7IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5pTyA9IHRydWU7XG4gICAgICAgICAgICBmID0gdFtlXTtcbiAgICAgICAgICAgIHRoaXMudiA9IHUgJiYgdm9pZCAwICE9PSBmID8gcyhmLCB0aGlzLnQpIDogZjtcbiAgICAgICAgICAgIHRoaXMuQSgpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGdldCB0eXBlKCkge1xuICAgICAgICByZXR1cm4gMTtcbiAgICB9XG4gICAgZ2V0VmFsdWUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnY7XG4gICAgfVxuICAgIHNldFZhbHVlKHQsIGUpIHtcbiAgICAgICAgaWYgKHRoaXMuaHMpIHQgPSB0aGlzLnNldCh0LCB0aGlzLnQpO1xuICAgICAgICBjb25zdCBpID0gdGhpcy52O1xuICAgICAgICBpZiAodGhpcy5pTykge1xuICAgICAgICAgICAgaWYgKE9iamVjdC5pcyh0LCBpKSkgcmV0dXJuO1xuICAgICAgICAgICAgdGhpcy52ID0gdDtcbiAgICAgICAgICAgIHRoaXMub3YgPSBpO1xuICAgICAgICAgICAgdGhpcy5mID0gZTtcbiAgICAgICAgICAgIGlmIChudWxsID09IHRoaXMuJGNvbnRyb2xsZXIgfHwgdGhpcy4kY29udHJvbGxlci5pc0JvdW5kKSB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuaSkgdGhpcy5jYi5jYWxsKHRoaXMubywgdCwgaSwgZSk7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMudSkgdGhpcy5DLmNhbGwodGhpcy5vLCB0aGlzLmssIHQsIGksIGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5xdWV1ZS5hZGQodGhpcyk7XG4gICAgICAgIH0gZWxzZSB0aGlzLm9bdGhpcy5rXSA9IHQ7XG4gICAgfVxuICAgIHN1YnNjcmliZSh0KSB7XG4gICAgICAgIGlmIChmYWxzZSA9PT0gIXRoaXMuaU8pIHtcbiAgICAgICAgICAgIHRoaXMuaU8gPSB0cnVlO1xuICAgICAgICAgICAgdGhpcy52ID0gdGhpcy5ocyA/IHRoaXMuc2V0KHRoaXMub1t0aGlzLmtdLCB0aGlzLnQpIDogdGhpcy5vW3RoaXMua107XG4gICAgICAgICAgICB0aGlzLkEoKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnN1YnMuYWRkKHQpO1xuICAgIH1cbiAgICBmbHVzaCgpIHtcbiAgICAgICAgT3QgPSB0aGlzLm92O1xuICAgICAgICB0aGlzLm92ID0gdGhpcy52O1xuICAgICAgICB0aGlzLnN1YnMubm90aWZ5KHRoaXMudiwgT3QsIHRoaXMuZik7XG4gICAgfVxuICAgIEEoKSB7XG4gICAgICAgIFJlZmxlY3QuZGVmaW5lUHJvcGVydHkodGhpcy5vLCB0aGlzLmssIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICBnZXQ6ICgpID0+IHRoaXMudixcbiAgICAgICAgICAgIHNldDogdCA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5zZXRWYWx1ZSh0LCAwKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxufVxuXG5QKEJpbmRhYmxlT2JzZXJ2ZXIpO1xuXG5PKEJpbmRhYmxlT2JzZXJ2ZXIpO1xuXG5sZXQgT3Q7XG5cbmNsYXNzIENoYXJTcGVjIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlLCBpLCBzKSB7XG4gICAgICAgIHRoaXMuY2hhcnMgPSB0O1xuICAgICAgICB0aGlzLnJlcGVhdCA9IGU7XG4gICAgICAgIHRoaXMuaXNTeW1ib2wgPSBpO1xuICAgICAgICB0aGlzLmlzSW52ZXJ0ZWQgPSBzO1xuICAgICAgICBpZiAocykgc3dpdGNoICh0Lmxlbmd0aCkge1xuICAgICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAgIHRoaXMuaGFzID0gdGhpcy5SO1xuICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICB0aGlzLmhhcyA9IHRoaXMuQjtcbiAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIHRoaXMuaGFzID0gdGhpcy5JO1xuICAgICAgICB9IGVsc2Ugc3dpdGNoICh0Lmxlbmd0aCkge1xuICAgICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAgIHRoaXMuaGFzID0gdGhpcy5UO1xuICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICB0aGlzLmhhcyA9IHRoaXMuUDtcbiAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIHRoaXMuaGFzID0gdGhpcy5PO1xuICAgICAgICB9XG4gICAgfVxuICAgIGVxdWFscyh0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLmNoYXJzID09PSB0LmNoYXJzICYmIHRoaXMucmVwZWF0ID09PSB0LnJlcGVhdCAmJiB0aGlzLmlzU3ltYm9sID09PSB0LmlzU3ltYm9sICYmIHRoaXMuaXNJbnZlcnRlZCA9PT0gdC5pc0ludmVydGVkO1xuICAgIH1cbiAgICBPKHQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY2hhcnMuaW5jbHVkZXModCk7XG4gICAgfVxuICAgIFAodCkge1xuICAgICAgICByZXR1cm4gdGhpcy5jaGFycyA9PT0gdDtcbiAgICB9XG4gICAgVCh0KSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgSSh0KSB7XG4gICAgICAgIHJldHVybiAhdGhpcy5jaGFycy5pbmNsdWRlcyh0KTtcbiAgICB9XG4gICAgQih0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLmNoYXJzICE9PSB0O1xuICAgIH1cbiAgICBSKHQpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxufVxuXG5jbGFzcyBJbnRlcnByZXRhdGlvbiB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMucGFydHMgPSBoO1xuICAgICAgICB0aGlzLiQgPSBcIlwiO1xuICAgICAgICB0aGlzLkwgPSB7fTtcbiAgICAgICAgdGhpcy5xID0ge307XG4gICAgfVxuICAgIGdldCBwYXR0ZXJuKCkge1xuICAgICAgICBjb25zdCB0ID0gdGhpcy4kO1xuICAgICAgICBpZiAoXCJcIiA9PT0gdCkgcmV0dXJuIG51bGw7IGVsc2UgcmV0dXJuIHQ7XG4gICAgfVxuICAgIHNldCBwYXR0ZXJuKHQpIHtcbiAgICAgICAgaWYgKG51bGwgPT0gdCkge1xuICAgICAgICAgICAgdGhpcy4kID0gXCJcIjtcbiAgICAgICAgICAgIHRoaXMucGFydHMgPSBoO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy4kID0gdDtcbiAgICAgICAgICAgIHRoaXMucGFydHMgPSB0aGlzLnFbdF07XG4gICAgICAgIH1cbiAgICB9XG4gICAgYXBwZW5kKHQsIGUpIHtcbiAgICAgICAgY29uc3QgaSA9IHRoaXMuTDtcbiAgICAgICAgaWYgKHZvaWQgMCA9PT0gaVt0XSkgaVt0XSA9IGU7IGVsc2UgaVt0XSArPSBlO1xuICAgIH1cbiAgICBuZXh0KHQpIHtcbiAgICAgICAgY29uc3QgZSA9IHRoaXMuTDtcbiAgICAgICAgbGV0IGk7XG4gICAgICAgIGlmICh2b2lkIDAgIT09IGVbdF0pIHtcbiAgICAgICAgICAgIGkgPSB0aGlzLnE7XG4gICAgICAgICAgICBpZiAodm9pZCAwID09PSBpW3RdKSBpW3RdID0gWyBlW3RdIF07IGVsc2UgaVt0XS5wdXNoKGVbdF0pO1xuICAgICAgICAgICAgZVt0XSA9IHZvaWQgMDtcbiAgICAgICAgfVxuICAgIH1cbn1cblxuY2xhc3MgU3RhdGUkMSB7XG4gICAgY29uc3RydWN0b3IodCwgLi4uZSkge1xuICAgICAgICB0aGlzLmNoYXJTcGVjID0gdDtcbiAgICAgICAgdGhpcy5uZXh0U3RhdGVzID0gW107XG4gICAgICAgIHRoaXMudHlwZXMgPSBudWxsO1xuICAgICAgICB0aGlzLmlzRW5kcG9pbnQgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5wYXR0ZXJucyA9IGU7XG4gICAgfVxuICAgIGdldCBwYXR0ZXJuKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5pc0VuZHBvaW50ID8gdGhpcy5wYXR0ZXJuc1swXSA6IG51bGw7XG4gICAgfVxuICAgIGZpbmRDaGlsZCh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSB0aGlzLm5leHRTdGF0ZXM7XG4gICAgICAgIGNvbnN0IGkgPSBlLmxlbmd0aDtcbiAgICAgICAgbGV0IHMgPSBudWxsO1xuICAgICAgICBsZXQgbiA9IDA7XG4gICAgICAgIGZvciAoO24gPCBpOyArK24pIHtcbiAgICAgICAgICAgIHMgPSBlW25dO1xuICAgICAgICAgICAgaWYgKHQuZXF1YWxzKHMuY2hhclNwZWMpKSByZXR1cm4gcztcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgYXBwZW5kKHQsIGUpIHtcbiAgICAgICAgY29uc3QgaSA9IHRoaXMucGF0dGVybnM7XG4gICAgICAgIGlmICghaS5pbmNsdWRlcyhlKSkgaS5wdXNoKGUpO1xuICAgICAgICBsZXQgcyA9IHRoaXMuZmluZENoaWxkKHQpO1xuICAgICAgICBpZiAobnVsbCA9PSBzKSB7XG4gICAgICAgICAgICBzID0gbmV3IFN0YXRlJDEodCwgZSk7XG4gICAgICAgICAgICB0aGlzLm5leHRTdGF0ZXMucHVzaChzKTtcbiAgICAgICAgICAgIGlmICh0LnJlcGVhdCkgcy5uZXh0U3RhdGVzLnB1c2gocyk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHM7XG4gICAgfVxuICAgIGZpbmRNYXRjaGVzKHQsIGUpIHtcbiAgICAgICAgY29uc3QgaSA9IFtdO1xuICAgICAgICBjb25zdCBzID0gdGhpcy5uZXh0U3RhdGVzO1xuICAgICAgICBjb25zdCBuID0gcy5sZW5ndGg7XG4gICAgICAgIGxldCByID0gMDtcbiAgICAgICAgbGV0IG8gPSBudWxsO1xuICAgICAgICBsZXQgbCA9IDA7XG4gICAgICAgIGxldCBoID0gMDtcbiAgICAgICAgZm9yICg7bCA8IG47ICsrbCkge1xuICAgICAgICAgICAgbyA9IHNbbF07XG4gICAgICAgICAgICBpZiAoby5jaGFyU3BlYy5oYXModCkpIHtcbiAgICAgICAgICAgICAgICBpLnB1c2gobyk7XG4gICAgICAgICAgICAgICAgciA9IG8ucGF0dGVybnMubGVuZ3RoO1xuICAgICAgICAgICAgICAgIGggPSAwO1xuICAgICAgICAgICAgICAgIGlmIChvLmNoYXJTcGVjLmlzU3ltYm9sKSBmb3IgKDtoIDwgcjsgKytoKSBlLm5leHQoby5wYXR0ZXJuc1toXSk7IGVsc2UgZm9yICg7aCA8IHI7ICsraCkgZS5hcHBlbmQoby5wYXR0ZXJuc1toXSwgdCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGk7XG4gICAgfVxufVxuXG5jbGFzcyBTdGF0aWNTZWdtZW50IHtcbiAgICBjb25zdHJ1Y3Rvcih0KSB7XG4gICAgICAgIHRoaXMudGV4dCA9IHQ7XG4gICAgICAgIGNvbnN0IGUgPSB0aGlzLmxlbiA9IHQubGVuZ3RoO1xuICAgICAgICBjb25zdCBpID0gdGhpcy5zcGVjcyA9IFtdO1xuICAgICAgICBsZXQgcyA9IDA7XG4gICAgICAgIGZvciAoO2UgPiBzOyArK3MpIGkucHVzaChuZXcgQ2hhclNwZWModFtzXSwgZmFsc2UsIGZhbHNlLCBmYWxzZSkpO1xuICAgIH1cbiAgICBlYWNoQ2hhcih0KSB7XG4gICAgICAgIGNvbnN0IGUgPSB0aGlzLmxlbjtcbiAgICAgICAgY29uc3QgaSA9IHRoaXMuc3BlY3M7XG4gICAgICAgIGxldCBzID0gMDtcbiAgICAgICAgZm9yICg7ZSA+IHM7ICsrcykgdChpW3NdKTtcbiAgICB9XG59XG5cbmNsYXNzIER5bmFtaWNTZWdtZW50IHtcbiAgICBjb25zdHJ1Y3Rvcih0KSB7XG4gICAgICAgIHRoaXMudGV4dCA9IFwiUEFSVFwiO1xuICAgICAgICB0aGlzLnNwZWMgPSBuZXcgQ2hhclNwZWModCwgdHJ1ZSwgZmFsc2UsIHRydWUpO1xuICAgIH1cbiAgICBlYWNoQ2hhcih0KSB7XG4gICAgICAgIHQodGhpcy5zcGVjKTtcbiAgICB9XG59XG5cbmNsYXNzIFN5bWJvbFNlZ21lbnQge1xuICAgIGNvbnN0cnVjdG9yKHQpIHtcbiAgICAgICAgdGhpcy50ZXh0ID0gdDtcbiAgICAgICAgdGhpcy5zcGVjID0gbmV3IENoYXJTcGVjKHQsIGZhbHNlLCB0cnVlLCBmYWxzZSk7XG4gICAgfVxuICAgIGVhY2hDaGFyKHQpIHtcbiAgICAgICAgdCh0aGlzLnNwZWMpO1xuICAgIH1cbn1cblxuY2xhc3MgU2VnbWVudFR5cGVzIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgdGhpcy5zdGF0aWNzID0gMDtcbiAgICAgICAgdGhpcy5keW5hbWljcyA9IDA7XG4gICAgICAgIHRoaXMuc3ltYm9scyA9IDA7XG4gICAgfVxufVxuXG5jb25zdCAkdCA9IGwuY3JlYXRlSW50ZXJmYWNlKFwiSVN5bnRheEludGVycHJldGVyXCIsICh0ID0+IHQuc2luZ2xldG9uKFN5bnRheEludGVycHJldGVyKSkpO1xuXG5jbGFzcyBTeW50YXhJbnRlcnByZXRlciB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMucm9vdFN0YXRlID0gbmV3IFN0YXRlJDEobnVsbCk7XG4gICAgICAgIHRoaXMuaW5pdGlhbFN0YXRlcyA9IFsgdGhpcy5yb290U3RhdGUgXTtcbiAgICB9XG4gICAgYWRkKHQpIHtcbiAgICAgICAgdCA9IHQuc2xpY2UoMCkuc29ydCgoKHQsIGUpID0+IHQucGF0dGVybiA+IGUucGF0dGVybiA/IDEgOiAtMSkpO1xuICAgICAgICBjb25zdCBlID0gdC5sZW5ndGg7XG4gICAgICAgIGxldCBpO1xuICAgICAgICBsZXQgcztcbiAgICAgICAgbGV0IG47XG4gICAgICAgIGxldCByO1xuICAgICAgICBsZXQgbztcbiAgICAgICAgbGV0IGw7XG4gICAgICAgIGxldCBoO1xuICAgICAgICBsZXQgYSA9IDA7XG4gICAgICAgIGxldCBjO1xuICAgICAgICB3aGlsZSAoZSA+IGEpIHtcbiAgICAgICAgICAgIGkgPSB0aGlzLnJvb3RTdGF0ZTtcbiAgICAgICAgICAgIHMgPSB0W2FdO1xuICAgICAgICAgICAgbiA9IHMucGF0dGVybjtcbiAgICAgICAgICAgIHIgPSBuZXcgU2VnbWVudFR5cGVzO1xuICAgICAgICAgICAgbyA9IHRoaXMucGFyc2Uocywgcik7XG4gICAgICAgICAgICBsID0gby5sZW5ndGg7XG4gICAgICAgICAgICBoID0gdCA9PiB7XG4gICAgICAgICAgICAgICAgaSA9IGkuYXBwZW5kKHQsIG4pO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGZvciAoYyA9IDA7IGwgPiBjOyArK2MpIG9bY10uZWFjaENoYXIoaCk7XG4gICAgICAgICAgICBpLnR5cGVzID0gcjtcbiAgICAgICAgICAgIGkuaXNFbmRwb2ludCA9IHRydWU7XG4gICAgICAgICAgICArK2E7XG4gICAgICAgIH1cbiAgICB9XG4gICAgaW50ZXJwcmV0KHQpIHtcbiAgICAgICAgY29uc3QgZSA9IG5ldyBJbnRlcnByZXRhdGlvbjtcbiAgICAgICAgY29uc3QgaSA9IHQubGVuZ3RoO1xuICAgICAgICBsZXQgcyA9IHRoaXMuaW5pdGlhbFN0YXRlcztcbiAgICAgICAgbGV0IG4gPSAwO1xuICAgICAgICBsZXQgcjtcbiAgICAgICAgZm9yICg7biA8IGk7ICsrbikge1xuICAgICAgICAgICAgcyA9IHRoaXMuZ2V0TmV4dFN0YXRlcyhzLCB0LmNoYXJBdChuKSwgZSk7XG4gICAgICAgICAgICBpZiAoMCA9PT0gcy5sZW5ndGgpIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIHMgPSBzLmZpbHRlcihMdCk7XG4gICAgICAgIGlmIChzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIHMuc29ydChxdCk7XG4gICAgICAgICAgICByID0gc1swXTtcbiAgICAgICAgICAgIGlmICghci5jaGFyU3BlYy5pc1N5bWJvbCkgZS5uZXh0KHIucGF0dGVybik7XG4gICAgICAgICAgICBlLnBhdHRlcm4gPSByLnBhdHRlcm47XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGU7XG4gICAgfVxuICAgIGdldE5leHRTdGF0ZXModCwgZSwgaSkge1xuICAgICAgICBjb25zdCBzID0gW107XG4gICAgICAgIGxldCBuID0gbnVsbDtcbiAgICAgICAgY29uc3QgciA9IHQubGVuZ3RoO1xuICAgICAgICBsZXQgbyA9IDA7XG4gICAgICAgIGZvciAoO28gPCByOyArK28pIHtcbiAgICAgICAgICAgIG4gPSB0W29dO1xuICAgICAgICAgICAgcy5wdXNoKC4uLm4uZmluZE1hdGNoZXMoZSwgaSkpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBzO1xuICAgIH1cbiAgICBwYXJzZSh0LCBlKSB7XG4gICAgICAgIGNvbnN0IGkgPSBbXTtcbiAgICAgICAgY29uc3QgcyA9IHQucGF0dGVybjtcbiAgICAgICAgY29uc3QgbiA9IHMubGVuZ3RoO1xuICAgICAgICBjb25zdCByID0gdC5zeW1ib2xzO1xuICAgICAgICBsZXQgbyA9IDA7XG4gICAgICAgIGxldCBsID0gMDtcbiAgICAgICAgbGV0IGggPSBcIlwiO1xuICAgICAgICB3aGlsZSAobyA8IG4pIHtcbiAgICAgICAgICAgIGggPSBzLmNoYXJBdChvKTtcbiAgICAgICAgICAgIGlmICgwID09PSByLmxlbmd0aCB8fCAhci5pbmNsdWRlcyhoKSkgaWYgKG8gPT09IGwpIGlmIChcIlBcIiA9PT0gaCAmJiBcIlBBUlRcIiA9PT0gcy5zbGljZShvLCBvICsgNCkpIHtcbiAgICAgICAgICAgICAgICBsID0gbyArPSA0O1xuICAgICAgICAgICAgICAgIGkucHVzaChuZXcgRHluYW1pY1NlZ21lbnQocikpO1xuICAgICAgICAgICAgICAgICsrZS5keW5hbWljcztcbiAgICAgICAgICAgIH0gZWxzZSArK287IGVsc2UgKytvOyBlbHNlIGlmIChvICE9PSBsKSB7XG4gICAgICAgICAgICAgICAgaS5wdXNoKG5ldyBTdGF0aWNTZWdtZW50KHMuc2xpY2UobCwgbykpKTtcbiAgICAgICAgICAgICAgICArK2Uuc3RhdGljcztcbiAgICAgICAgICAgICAgICBsID0gbztcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgaS5wdXNoKG5ldyBTeW1ib2xTZWdtZW50KHMuc2xpY2UobCwgbyArIDEpKSk7XG4gICAgICAgICAgICAgICAgKytlLnN5bWJvbHM7XG4gICAgICAgICAgICAgICAgbCA9ICsrbztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAobCAhPT0gbykge1xuICAgICAgICAgICAgaS5wdXNoKG5ldyBTdGF0aWNTZWdtZW50KHMuc2xpY2UobCwgbykpKTtcbiAgICAgICAgICAgICsrZS5zdGF0aWNzO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gTHQodCkge1xuICAgIHJldHVybiB0LmlzRW5kcG9pbnQ7XG59XG5cbmZ1bmN0aW9uIHF0KHQsIGUpIHtcbiAgICBjb25zdCBpID0gdC50eXBlcztcbiAgICBjb25zdCBzID0gZS50eXBlcztcbiAgICBpZiAoaS5zdGF0aWNzICE9PSBzLnN0YXRpY3MpIHJldHVybiBzLnN0YXRpY3MgLSBpLnN0YXRpY3M7XG4gICAgaWYgKGkuZHluYW1pY3MgIT09IHMuZHluYW1pY3MpIHJldHVybiBzLmR5bmFtaWNzIC0gaS5keW5hbWljcztcbiAgICBpZiAoaS5zeW1ib2xzICE9PSBzLnN5bWJvbHMpIHJldHVybiBzLnN5bWJvbHMgLSBpLnN5bWJvbHM7XG4gICAgcmV0dXJuIDA7XG59XG5cbmNsYXNzIEF0dHJTeW50YXgge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUsIGksIHMpIHtcbiAgICAgICAgdGhpcy5yYXdOYW1lID0gdDtcbiAgICAgICAgdGhpcy5yYXdWYWx1ZSA9IGU7XG4gICAgICAgIHRoaXMudGFyZ2V0ID0gaTtcbiAgICAgICAgdGhpcy5jb21tYW5kID0gcztcbiAgICB9XG59XG5cbmNvbnN0IE10ID0gbC5jcmVhdGVJbnRlcmZhY2UoXCJJQXR0cmlidXRlUGF0dGVyblwiKTtcblxuY29uc3QgVXQgPSBsLmNyZWF0ZUludGVyZmFjZShcIklBdHRyaWJ1dGVQYXJzZXJcIiwgKHQgPT4gdC5zaW5nbGV0b24oQXR0cmlidXRlUGFyc2VyKSkpO1xuXG5jbGFzcyBBdHRyaWJ1dGVQYXJzZXIge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUpIHtcbiAgICAgICAgdGhpcy5NID0ge307XG4gICAgICAgIHRoaXMuVSA9IHQ7XG4gICAgICAgIGNvbnN0IGkgPSB0aGlzLkYgPSB7fTtcbiAgICAgICAgY29uc3QgcyA9IGUucmVkdWNlKCgodCwgZSkgPT4ge1xuICAgICAgICAgICAgY29uc3QgcyA9IGp0KGUuY29uc3RydWN0b3IpO1xuICAgICAgICAgICAgcy5mb3JFYWNoKCh0ID0+IGlbdC5wYXR0ZXJuXSA9IGUpKTtcbiAgICAgICAgICAgIHJldHVybiB0LmNvbmNhdChzKTtcbiAgICAgICAgfSksIGgpO1xuICAgICAgICB0LmFkZChzKTtcbiAgICB9XG4gICAgcGFyc2UodCwgZSkge1xuICAgICAgICBsZXQgaSA9IHRoaXMuTVt0XTtcbiAgICAgICAgaWYgKG51bGwgPT0gaSkgaSA9IHRoaXMuTVt0XSA9IHRoaXMuVS5pbnRlcnByZXQodCk7XG4gICAgICAgIGNvbnN0IHMgPSBpLnBhdHRlcm47XG4gICAgICAgIGlmIChudWxsID09IHMpIHJldHVybiBuZXcgQXR0clN5bnRheCh0LCBlLCB0LCBudWxsKTsgZWxzZSByZXR1cm4gdGhpcy5GW3NdW3NdKHQsIGUsIGkucGFydHMpO1xuICAgIH1cbn1cblxuQXR0cmlidXRlUGFyc2VyLmluamVjdCA9IFsgJHQsIGEoTXQpIF07XG5cbmZ1bmN0aW9uIEZ0KC4uLnQpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gZShpKSB7XG4gICAgICAgIHJldHVybiBOdC5kZWZpbmUodCwgaSk7XG4gICAgfTtcbn1cblxuY2xhc3MgQXR0cmlidXRlUGF0dGVyblJlc291cmNlRGVmaW5pdGlvbiB7XG4gICAgY29uc3RydWN0b3IodCkge1xuICAgICAgICB0aGlzLlR5cGUgPSB0O1xuICAgICAgICB0aGlzLm5hbWUgPSB2b2lkIDA7XG4gICAgfVxuICAgIHJlZ2lzdGVyKHQpIHtcbiAgICAgICAgYy5zaW5nbGV0b24oTXQsIHRoaXMuVHlwZSkucmVnaXN0ZXIodCk7XG4gICAgfVxufVxuXG5jb25zdCBWdCA9IG10KFwiYXR0cmlidXRlLXBhdHRlcm5cIik7XG5cbmNvbnN0IF90ID0gXCJhdHRyaWJ1dGUtcGF0dGVybi1kZWZpbml0aW9uc1wiO1xuXG5jb25zdCBqdCA9IHQgPT4gaS5hbm5vdGF0aW9uLmdldCh0LCBfdCk7XG5cbmNvbnN0IE50ID0gT2JqZWN0LmZyZWV6ZSh7XG4gICAgbmFtZTogVnQsXG4gICAgZGVmaW5pdGlvbkFubm90YXRpb25LZXk6IF90LFxuICAgIGRlZmluZSh0LCBlKSB7XG4gICAgICAgIGNvbnN0IHMgPSBuZXcgQXR0cmlidXRlUGF0dGVyblJlc291cmNlRGVmaW5pdGlvbihlKTtcbiAgICAgICAgY3QoVnQsIHMsIGUpO1xuICAgICAgICB2dChlLCBWdCk7XG4gICAgICAgIGkuYW5ub3RhdGlvbi5zZXQoZSwgX3QsIHQpO1xuICAgICAgICBwdChlLCBfdCk7XG4gICAgICAgIHJldHVybiBlO1xuICAgIH0sXG4gICAgZ2V0UGF0dGVybkRlZmluaXRpb25zOiBqdFxufSk7XG5cbmxldCBXdCA9IGNsYXNzIERvdFNlcGFyYXRlZEF0dHJpYnV0ZVBhdHRlcm4ge1xuICAgIFwiUEFSVC5QQVJUXCIodCwgZSwgaSkge1xuICAgICAgICByZXR1cm4gbmV3IEF0dHJTeW50YXgodCwgZSwgaVswXSwgaVsxXSk7XG4gICAgfVxuICAgIFwiUEFSVC5QQVJULlBBUlRcIih0LCBlLCBpKSB7XG4gICAgICAgIHJldHVybiBuZXcgQXR0clN5bnRheCh0LCBlLCBpWzBdLCBpWzJdKTtcbiAgICB9XG59O1xuXG5XdCA9IG90KFsgRnQoe1xuICAgIHBhdHRlcm46IFwiUEFSVC5QQVJUXCIsXG4gICAgc3ltYm9sczogXCIuXCJcbn0sIHtcbiAgICBwYXR0ZXJuOiBcIlBBUlQuUEFSVC5QQVJUXCIsXG4gICAgc3ltYm9sczogXCIuXCJcbn0pIF0sIFd0KTtcblxubGV0IEh0ID0gY2xhc3MgUmVmQXR0cmlidXRlUGF0dGVybiB7XG4gICAgcmVmKHQsIGUsIGkpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBBdHRyU3ludGF4KHQsIGUsIFwiZWxlbWVudFwiLCBcInJlZlwiKTtcbiAgICB9XG4gICAgXCJQQVJULnJlZlwiKHQsIGUsIGkpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBBdHRyU3ludGF4KHQsIGUsIGlbMF0sIFwicmVmXCIpO1xuICAgIH1cbn07XG5cbkh0ID0gb3QoWyBGdCh7XG4gICAgcGF0dGVybjogXCJyZWZcIixcbiAgICBzeW1ib2xzOiBcIlwiXG59LCB7XG4gICAgcGF0dGVybjogXCJQQVJULnJlZlwiLFxuICAgIHN5bWJvbHM6IFwiLlwiXG59KSBdLCBIdCk7XG5cbmxldCB6dCA9IGNsYXNzIENvbG9uUHJlZml4ZWRCaW5kQXR0cmlidXRlUGF0dGVybiB7XG4gICAgXCI6UEFSVFwiKHQsIGUsIGkpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBBdHRyU3ludGF4KHQsIGUsIGlbMF0sIFwiYmluZFwiKTtcbiAgICB9XG59O1xuXG56dCA9IG90KFsgRnQoe1xuICAgIHBhdHRlcm46IFwiOlBBUlRcIixcbiAgICBzeW1ib2xzOiBcIjpcIlxufSkgXSwgenQpO1xuXG5sZXQgR3QgPSBjbGFzcyBBdFByZWZpeGVkVHJpZ2dlckF0dHJpYnV0ZVBhdHRlcm4ge1xuICAgIFwiQFBBUlRcIih0LCBlLCBpKSB7XG4gICAgICAgIHJldHVybiBuZXcgQXR0clN5bnRheCh0LCBlLCBpWzBdLCBcInRyaWdnZXJcIik7XG4gICAgfVxufTtcblxuR3QgPSBvdChbIEZ0KHtcbiAgICBwYXR0ZXJuOiBcIkBQQVJUXCIsXG4gICAgc3ltYm9sczogXCJAXCJcbn0pIF0sIEd0KTtcblxubGV0IFh0ID0gY2xhc3MgU3ByZWFkQXR0cmlidXRlUGF0dGVybiB7XG4gICAgXCIuLi4kYXR0cnNcIih0LCBlLCBpKSB7XG4gICAgICAgIHJldHVybiBuZXcgQXR0clN5bnRheCh0LCBlLCBcIlwiLCBcIi4uLiRhdHRyc1wiKTtcbiAgICB9XG59O1xuXG5YdCA9IG90KFsgRnQoe1xuICAgIHBhdHRlcm46IFwiLi4uJGF0dHJzXCIsXG4gICAgc3ltYm9sczogXCJcIlxufSkgXSwgWHQpO1xuXG5jb25zdCBLdCA9IHU7XG5cbmNvbnN0IFl0ID0gbC5jcmVhdGVJbnRlcmZhY2UoXCJJU1ZHQW5hbHl6ZXJcIiwgKHQgPT4gdC5zaW5nbGV0b24oTm9vcFNWR0FuYWx5emVyKSkpO1xuXG5jbGFzcyBOb29wU1ZHQW5hbHl6ZXIge1xuICAgIGlzU3RhbmRhcmRTdmdBdHRyaWJ1dGUodCwgZSkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBRdCh0KSB7XG4gICAgY29uc3QgZSA9IHd0KCk7XG4gICAgbGV0IGk7XG4gICAgZm9yIChpIG9mIHQpIGVbaV0gPSB0cnVlO1xuICAgIHJldHVybiBlO1xufVxuXG5jbGFzcyBTVkdBbmFseXplciB7XG4gICAgY29uc3RydWN0b3IodCkge1xuICAgICAgICB0aGlzLlYgPSBPYmplY3QuYXNzaWduKHd0KCksIHtcbiAgICAgICAgICAgIGE6IFF0KFsgXCJjbGFzc1wiLCBcImV4dGVybmFsUmVzb3VyY2VzUmVxdWlyZWRcIiwgXCJpZFwiLCBcIm9uYWN0aXZhdGVcIiwgXCJvbmNsaWNrXCIsIFwib25mb2N1c2luXCIsIFwib25mb2N1c291dFwiLCBcIm9ubG9hZFwiLCBcIm9ubW91c2Vkb3duXCIsIFwib25tb3VzZW1vdmVcIiwgXCJvbm1vdXNlb3V0XCIsIFwib25tb3VzZW92ZXJcIiwgXCJvbm1vdXNldXBcIiwgXCJyZXF1aXJlZEV4dGVuc2lvbnNcIiwgXCJyZXF1aXJlZEZlYXR1cmVzXCIsIFwic3R5bGVcIiwgXCJzeXN0ZW1MYW5ndWFnZVwiLCBcInRhcmdldFwiLCBcInRyYW5zZm9ybVwiLCBcInhsaW5rOmFjdHVhdGVcIiwgXCJ4bGluazphcmNyb2xlXCIsIFwieGxpbms6aHJlZlwiLCBcInhsaW5rOnJvbGVcIiwgXCJ4bGluazpzaG93XCIsIFwieGxpbms6dGl0bGVcIiwgXCJ4bGluazp0eXBlXCIsIFwieG1sOmJhc2VcIiwgXCJ4bWw6bGFuZ1wiLCBcInhtbDpzcGFjZVwiIF0pLFxuICAgICAgICAgICAgYWx0R2x5cGg6IFF0KFsgXCJjbGFzc1wiLCBcImR4XCIsIFwiZHlcIiwgXCJleHRlcm5hbFJlc291cmNlc1JlcXVpcmVkXCIsIFwiZm9ybWF0XCIsIFwiZ2x5cGhSZWZcIiwgXCJpZFwiLCBcIm9uYWN0aXZhdGVcIiwgXCJvbmNsaWNrXCIsIFwib25mb2N1c2luXCIsIFwib25mb2N1c291dFwiLCBcIm9ubG9hZFwiLCBcIm9ubW91c2Vkb3duXCIsIFwib25tb3VzZW1vdmVcIiwgXCJvbm1vdXNlb3V0XCIsIFwib25tb3VzZW92ZXJcIiwgXCJvbm1vdXNldXBcIiwgXCJyZXF1aXJlZEV4dGVuc2lvbnNcIiwgXCJyZXF1aXJlZEZlYXR1cmVzXCIsIFwicm90YXRlXCIsIFwic3R5bGVcIiwgXCJzeXN0ZW1MYW5ndWFnZVwiLCBcInhcIiwgXCJ4bGluazphY3R1YXRlXCIsIFwieGxpbms6YXJjcm9sZVwiLCBcInhsaW5rOmhyZWZcIiwgXCJ4bGluazpyb2xlXCIsIFwieGxpbms6c2hvd1wiLCBcInhsaW5rOnRpdGxlXCIsIFwieGxpbms6dHlwZVwiLCBcInhtbDpiYXNlXCIsIFwieG1sOmxhbmdcIiwgXCJ4bWw6c3BhY2VcIiwgXCJ5XCIgXSksXG4gICAgICAgICAgICBhbHRnbHlwaDogd3QoKSxcbiAgICAgICAgICAgIGFsdEdseXBoRGVmOiBRdChbIFwiaWRcIiwgXCJ4bWw6YmFzZVwiLCBcInhtbDpsYW5nXCIsIFwieG1sOnNwYWNlXCIgXSksXG4gICAgICAgICAgICBhbHRnbHlwaGRlZjogd3QoKSxcbiAgICAgICAgICAgIGFsdEdseXBoSXRlbTogUXQoWyBcImlkXCIsIFwieG1sOmJhc2VcIiwgXCJ4bWw6bGFuZ1wiLCBcInhtbDpzcGFjZVwiIF0pLFxuICAgICAgICAgICAgYWx0Z2x5cGhpdGVtOiB3dCgpLFxuICAgICAgICAgICAgYW5pbWF0ZTogUXQoWyBcImFjY3VtdWxhdGVcIiwgXCJhZGRpdGl2ZVwiLCBcImF0dHJpYnV0ZU5hbWVcIiwgXCJhdHRyaWJ1dGVUeXBlXCIsIFwiYmVnaW5cIiwgXCJieVwiLCBcImNhbGNNb2RlXCIsIFwiZHVyXCIsIFwiZW5kXCIsIFwiZXh0ZXJuYWxSZXNvdXJjZXNSZXF1aXJlZFwiLCBcImZpbGxcIiwgXCJmcm9tXCIsIFwiaWRcIiwgXCJrZXlTcGxpbmVzXCIsIFwia2V5VGltZXNcIiwgXCJtYXhcIiwgXCJtaW5cIiwgXCJvbmJlZ2luXCIsIFwib25lbmRcIiwgXCJvbmxvYWRcIiwgXCJvbnJlcGVhdFwiLCBcInJlcGVhdENvdW50XCIsIFwicmVwZWF0RHVyXCIsIFwicmVxdWlyZWRFeHRlbnNpb25zXCIsIFwicmVxdWlyZWRGZWF0dXJlc1wiLCBcInJlc3RhcnRcIiwgXCJzeXN0ZW1MYW5ndWFnZVwiLCBcInRvXCIsIFwidmFsdWVzXCIsIFwieGxpbms6YWN0dWF0ZVwiLCBcInhsaW5rOmFyY3JvbGVcIiwgXCJ4bGluazpocmVmXCIsIFwieGxpbms6cm9sZVwiLCBcInhsaW5rOnNob3dcIiwgXCJ4bGluazp0aXRsZVwiLCBcInhsaW5rOnR5cGVcIiwgXCJ4bWw6YmFzZVwiLCBcInhtbDpsYW5nXCIsIFwieG1sOnNwYWNlXCIgXSksXG4gICAgICAgICAgICBhbmltYXRlQ29sb3I6IFF0KFsgXCJhY2N1bXVsYXRlXCIsIFwiYWRkaXRpdmVcIiwgXCJhdHRyaWJ1dGVOYW1lXCIsIFwiYXR0cmlidXRlVHlwZVwiLCBcImJlZ2luXCIsIFwiYnlcIiwgXCJjYWxjTW9kZVwiLCBcImR1clwiLCBcImVuZFwiLCBcImV4dGVybmFsUmVzb3VyY2VzUmVxdWlyZWRcIiwgXCJmaWxsXCIsIFwiZnJvbVwiLCBcImlkXCIsIFwia2V5U3BsaW5lc1wiLCBcImtleVRpbWVzXCIsIFwibWF4XCIsIFwibWluXCIsIFwib25iZWdpblwiLCBcIm9uZW5kXCIsIFwib25sb2FkXCIsIFwib25yZXBlYXRcIiwgXCJyZXBlYXRDb3VudFwiLCBcInJlcGVhdER1clwiLCBcInJlcXVpcmVkRXh0ZW5zaW9uc1wiLCBcInJlcXVpcmVkRmVhdHVyZXNcIiwgXCJyZXN0YXJ0XCIsIFwic3lzdGVtTGFuZ3VhZ2VcIiwgXCJ0b1wiLCBcInZhbHVlc1wiLCBcInhsaW5rOmFjdHVhdGVcIiwgXCJ4bGluazphcmNyb2xlXCIsIFwieGxpbms6aHJlZlwiLCBcInhsaW5rOnJvbGVcIiwgXCJ4bGluazpzaG93XCIsIFwieGxpbms6dGl0bGVcIiwgXCJ4bGluazp0eXBlXCIsIFwieG1sOmJhc2VcIiwgXCJ4bWw6bGFuZ1wiLCBcInhtbDpzcGFjZVwiIF0pLFxuICAgICAgICAgICAgYW5pbWF0ZU1vdGlvbjogUXQoWyBcImFjY3VtdWxhdGVcIiwgXCJhZGRpdGl2ZVwiLCBcImJlZ2luXCIsIFwiYnlcIiwgXCJjYWxjTW9kZVwiLCBcImR1clwiLCBcImVuZFwiLCBcImV4dGVybmFsUmVzb3VyY2VzUmVxdWlyZWRcIiwgXCJmaWxsXCIsIFwiZnJvbVwiLCBcImlkXCIsIFwia2V5UG9pbnRzXCIsIFwia2V5U3BsaW5lc1wiLCBcImtleVRpbWVzXCIsIFwibWF4XCIsIFwibWluXCIsIFwib25iZWdpblwiLCBcIm9uZW5kXCIsIFwib25sb2FkXCIsIFwib25yZXBlYXRcIiwgXCJvcmlnaW5cIiwgXCJwYXRoXCIsIFwicmVwZWF0Q291bnRcIiwgXCJyZXBlYXREdXJcIiwgXCJyZXF1aXJlZEV4dGVuc2lvbnNcIiwgXCJyZXF1aXJlZEZlYXR1cmVzXCIsIFwicmVzdGFydFwiLCBcInJvdGF0ZVwiLCBcInN5c3RlbUxhbmd1YWdlXCIsIFwidG9cIiwgXCJ2YWx1ZXNcIiwgXCJ4bGluazphY3R1YXRlXCIsIFwieGxpbms6YXJjcm9sZVwiLCBcInhsaW5rOmhyZWZcIiwgXCJ4bGluazpyb2xlXCIsIFwieGxpbms6c2hvd1wiLCBcInhsaW5rOnRpdGxlXCIsIFwieGxpbms6dHlwZVwiLCBcInhtbDpiYXNlXCIsIFwieG1sOmxhbmdcIiwgXCJ4bWw6c3BhY2VcIiBdKSxcbiAgICAgICAgICAgIGFuaW1hdGVUcmFuc2Zvcm06IFF0KFsgXCJhY2N1bXVsYXRlXCIsIFwiYWRkaXRpdmVcIiwgXCJhdHRyaWJ1dGVOYW1lXCIsIFwiYXR0cmlidXRlVHlwZVwiLCBcImJlZ2luXCIsIFwiYnlcIiwgXCJjYWxjTW9kZVwiLCBcImR1clwiLCBcImVuZFwiLCBcImV4dGVybmFsUmVzb3VyY2VzUmVxdWlyZWRcIiwgXCJmaWxsXCIsIFwiZnJvbVwiLCBcImlkXCIsIFwia2V5U3BsaW5lc1wiLCBcImtleVRpbWVzXCIsIFwibWF4XCIsIFwibWluXCIsIFwib25iZWdpblwiLCBcIm9uZW5kXCIsIFwib25sb2FkXCIsIFwib25yZXBlYXRcIiwgXCJyZXBlYXRDb3VudFwiLCBcInJlcGVhdER1clwiLCBcInJlcXVpcmVkRXh0ZW5zaW9uc1wiLCBcInJlcXVpcmVkRmVhdHVyZXNcIiwgXCJyZXN0YXJ0XCIsIFwic3lzdGVtTGFuZ3VhZ2VcIiwgXCJ0b1wiLCBcInR5cGVcIiwgXCJ2YWx1ZXNcIiwgXCJ4bGluazphY3R1YXRlXCIsIFwieGxpbms6YXJjcm9sZVwiLCBcInhsaW5rOmhyZWZcIiwgXCJ4bGluazpyb2xlXCIsIFwieGxpbms6c2hvd1wiLCBcInhsaW5rOnRpdGxlXCIsIFwieGxpbms6dHlwZVwiLCBcInhtbDpiYXNlXCIsIFwieG1sOmxhbmdcIiwgXCJ4bWw6c3BhY2VcIiBdKSxcbiAgICAgICAgICAgIGNpcmNsZTogUXQoWyBcImNsYXNzXCIsIFwiY3hcIiwgXCJjeVwiLCBcImV4dGVybmFsUmVzb3VyY2VzUmVxdWlyZWRcIiwgXCJpZFwiLCBcIm9uYWN0aXZhdGVcIiwgXCJvbmNsaWNrXCIsIFwib25mb2N1c2luXCIsIFwib25mb2N1c291dFwiLCBcIm9ubG9hZFwiLCBcIm9ubW91c2Vkb3duXCIsIFwib25tb3VzZW1vdmVcIiwgXCJvbm1vdXNlb3V0XCIsIFwib25tb3VzZW92ZXJcIiwgXCJvbm1vdXNldXBcIiwgXCJyXCIsIFwicmVxdWlyZWRFeHRlbnNpb25zXCIsIFwicmVxdWlyZWRGZWF0dXJlc1wiLCBcInN0eWxlXCIsIFwic3lzdGVtTGFuZ3VhZ2VcIiwgXCJ0cmFuc2Zvcm1cIiwgXCJ4bWw6YmFzZVwiLCBcInhtbDpsYW5nXCIsIFwieG1sOnNwYWNlXCIgXSksXG4gICAgICAgICAgICBjbGlwUGF0aDogUXQoWyBcImNsYXNzXCIsIFwiY2xpcFBhdGhVbml0c1wiLCBcImV4dGVybmFsUmVzb3VyY2VzUmVxdWlyZWRcIiwgXCJpZFwiLCBcInJlcXVpcmVkRXh0ZW5zaW9uc1wiLCBcInJlcXVpcmVkRmVhdHVyZXNcIiwgXCJzdHlsZVwiLCBcInN5c3RlbUxhbmd1YWdlXCIsIFwidHJhbnNmb3JtXCIsIFwieG1sOmJhc2VcIiwgXCJ4bWw6bGFuZ1wiLCBcInhtbDpzcGFjZVwiIF0pLFxuICAgICAgICAgICAgXCJjb2xvci1wcm9maWxlXCI6IFF0KFsgXCJpZFwiLCBcImxvY2FsXCIsIFwibmFtZVwiLCBcInJlbmRlcmluZy1pbnRlbnRcIiwgXCJ4bGluazphY3R1YXRlXCIsIFwieGxpbms6YXJjcm9sZVwiLCBcInhsaW5rOmhyZWZcIiwgXCJ4bGluazpyb2xlXCIsIFwieGxpbms6c2hvd1wiLCBcInhsaW5rOnRpdGxlXCIsIFwieGxpbms6dHlwZVwiLCBcInhtbDpiYXNlXCIsIFwieG1sOmxhbmdcIiwgXCJ4bWw6c3BhY2VcIiBdKSxcbiAgICAgICAgICAgIGN1cnNvcjogUXQoWyBcImV4dGVybmFsUmVzb3VyY2VzUmVxdWlyZWRcIiwgXCJpZFwiLCBcInJlcXVpcmVkRXh0ZW5zaW9uc1wiLCBcInJlcXVpcmVkRmVhdHVyZXNcIiwgXCJzeXN0ZW1MYW5ndWFnZVwiLCBcInhcIiwgXCJ4bGluazphY3R1YXRlXCIsIFwieGxpbms6YXJjcm9sZVwiLCBcInhsaW5rOmhyZWZcIiwgXCJ4bGluazpyb2xlXCIsIFwieGxpbms6c2hvd1wiLCBcInhsaW5rOnRpdGxlXCIsIFwieGxpbms6dHlwZVwiLCBcInhtbDpiYXNlXCIsIFwieG1sOmxhbmdcIiwgXCJ4bWw6c3BhY2VcIiwgXCJ5XCIgXSksXG4gICAgICAgICAgICBkZWZzOiBRdChbIFwiY2xhc3NcIiwgXCJleHRlcm5hbFJlc291cmNlc1JlcXVpcmVkXCIsIFwiaWRcIiwgXCJvbmFjdGl2YXRlXCIsIFwib25jbGlja1wiLCBcIm9uZm9jdXNpblwiLCBcIm9uZm9jdXNvdXRcIiwgXCJvbmxvYWRcIiwgXCJvbm1vdXNlZG93blwiLCBcIm9ubW91c2Vtb3ZlXCIsIFwib25tb3VzZW91dFwiLCBcIm9ubW91c2VvdmVyXCIsIFwib25tb3VzZXVwXCIsIFwicmVxdWlyZWRFeHRlbnNpb25zXCIsIFwicmVxdWlyZWRGZWF0dXJlc1wiLCBcInN0eWxlXCIsIFwic3lzdGVtTGFuZ3VhZ2VcIiwgXCJ0cmFuc2Zvcm1cIiwgXCJ4bWw6YmFzZVwiLCBcInhtbDpsYW5nXCIsIFwieG1sOnNwYWNlXCIgXSksXG4gICAgICAgICAgICBkZXNjOiBRdChbIFwiY2xhc3NcIiwgXCJpZFwiLCBcInN0eWxlXCIsIFwieG1sOmJhc2VcIiwgXCJ4bWw6bGFuZ1wiLCBcInhtbDpzcGFjZVwiIF0pLFxuICAgICAgICAgICAgZWxsaXBzZTogUXQoWyBcImNsYXNzXCIsIFwiY3hcIiwgXCJjeVwiLCBcImV4dGVybmFsUmVzb3VyY2VzUmVxdWlyZWRcIiwgXCJpZFwiLCBcIm9uYWN0aXZhdGVcIiwgXCJvbmNsaWNrXCIsIFwib25mb2N1c2luXCIsIFwib25mb2N1c291dFwiLCBcIm9ubG9hZFwiLCBcIm9ubW91c2Vkb3duXCIsIFwib25tb3VzZW1vdmVcIiwgXCJvbm1vdXNlb3V0XCIsIFwib25tb3VzZW92ZXJcIiwgXCJvbm1vdXNldXBcIiwgXCJyZXF1aXJlZEV4dGVuc2lvbnNcIiwgXCJyZXF1aXJlZEZlYXR1cmVzXCIsIFwicnhcIiwgXCJyeVwiLCBcInN0eWxlXCIsIFwic3lzdGVtTGFuZ3VhZ2VcIiwgXCJ0cmFuc2Zvcm1cIiwgXCJ4bWw6YmFzZVwiLCBcInhtbDpsYW5nXCIsIFwieG1sOnNwYWNlXCIgXSksXG4gICAgICAgICAgICBmZUJsZW5kOiBRdChbIFwiY2xhc3NcIiwgXCJoZWlnaHRcIiwgXCJpZFwiLCBcImluXCIsIFwiaW4yXCIsIFwibW9kZVwiLCBcInJlc3VsdFwiLCBcInN0eWxlXCIsIFwid2lkdGhcIiwgXCJ4XCIsIFwieG1sOmJhc2VcIiwgXCJ4bWw6bGFuZ1wiLCBcInhtbDpzcGFjZVwiLCBcInlcIiBdKSxcbiAgICAgICAgICAgIGZlQ29sb3JNYXRyaXg6IFF0KFsgXCJjbGFzc1wiLCBcImhlaWdodFwiLCBcImlkXCIsIFwiaW5cIiwgXCJyZXN1bHRcIiwgXCJzdHlsZVwiLCBcInR5cGVcIiwgXCJ2YWx1ZXNcIiwgXCJ3aWR0aFwiLCBcInhcIiwgXCJ4bWw6YmFzZVwiLCBcInhtbDpsYW5nXCIsIFwieG1sOnNwYWNlXCIsIFwieVwiIF0pLFxuICAgICAgICAgICAgZmVDb21wb25lbnRUcmFuc2ZlcjogUXQoWyBcImNsYXNzXCIsIFwiaGVpZ2h0XCIsIFwiaWRcIiwgXCJpblwiLCBcInJlc3VsdFwiLCBcInN0eWxlXCIsIFwid2lkdGhcIiwgXCJ4XCIsIFwieG1sOmJhc2VcIiwgXCJ4bWw6bGFuZ1wiLCBcInhtbDpzcGFjZVwiLCBcInlcIiBdKSxcbiAgICAgICAgICAgIGZlQ29tcG9zaXRlOiBRdChbIFwiY2xhc3NcIiwgXCJoZWlnaHRcIiwgXCJpZFwiLCBcImluXCIsIFwiaW4yXCIsIFwiazFcIiwgXCJrMlwiLCBcImszXCIsIFwiazRcIiwgXCJvcGVyYXRvclwiLCBcInJlc3VsdFwiLCBcInN0eWxlXCIsIFwid2lkdGhcIiwgXCJ4XCIsIFwieG1sOmJhc2VcIiwgXCJ4bWw6bGFuZ1wiLCBcInhtbDpzcGFjZVwiLCBcInlcIiBdKSxcbiAgICAgICAgICAgIGZlQ29udm9sdmVNYXRyaXg6IFF0KFsgXCJiaWFzXCIsIFwiY2xhc3NcIiwgXCJkaXZpc29yXCIsIFwiZWRnZU1vZGVcIiwgXCJoZWlnaHRcIiwgXCJpZFwiLCBcImluXCIsIFwia2VybmVsTWF0cml4XCIsIFwia2VybmVsVW5pdExlbmd0aFwiLCBcIm9yZGVyXCIsIFwicHJlc2VydmVBbHBoYVwiLCBcInJlc3VsdFwiLCBcInN0eWxlXCIsIFwidGFyZ2V0WFwiLCBcInRhcmdldFlcIiwgXCJ3aWR0aFwiLCBcInhcIiwgXCJ4bWw6YmFzZVwiLCBcInhtbDpsYW5nXCIsIFwieG1sOnNwYWNlXCIsIFwieVwiIF0pLFxuICAgICAgICAgICAgZmVEaWZmdXNlTGlnaHRpbmc6IFF0KFsgXCJjbGFzc1wiLCBcImRpZmZ1c2VDb25zdGFudFwiLCBcImhlaWdodFwiLCBcImlkXCIsIFwiaW5cIiwgXCJrZXJuZWxVbml0TGVuZ3RoXCIsIFwicmVzdWx0XCIsIFwic3R5bGVcIiwgXCJzdXJmYWNlU2NhbGVcIiwgXCJ3aWR0aFwiLCBcInhcIiwgXCJ4bWw6YmFzZVwiLCBcInhtbDpsYW5nXCIsIFwieG1sOnNwYWNlXCIsIFwieVwiIF0pLFxuICAgICAgICAgICAgZmVEaXNwbGFjZW1lbnRNYXA6IFF0KFsgXCJjbGFzc1wiLCBcImhlaWdodFwiLCBcImlkXCIsIFwiaW5cIiwgXCJpbjJcIiwgXCJyZXN1bHRcIiwgXCJzY2FsZVwiLCBcInN0eWxlXCIsIFwid2lkdGhcIiwgXCJ4XCIsIFwieENoYW5uZWxTZWxlY3RvclwiLCBcInhtbDpiYXNlXCIsIFwieG1sOmxhbmdcIiwgXCJ4bWw6c3BhY2VcIiwgXCJ5XCIsIFwieUNoYW5uZWxTZWxlY3RvclwiIF0pLFxuICAgICAgICAgICAgZmVEaXN0YW50TGlnaHQ6IFF0KFsgXCJhemltdXRoXCIsIFwiZWxldmF0aW9uXCIsIFwiaWRcIiwgXCJ4bWw6YmFzZVwiLCBcInhtbDpsYW5nXCIsIFwieG1sOnNwYWNlXCIgXSksXG4gICAgICAgICAgICBmZUZsb29kOiBRdChbIFwiY2xhc3NcIiwgXCJoZWlnaHRcIiwgXCJpZFwiLCBcInJlc3VsdFwiLCBcInN0eWxlXCIsIFwid2lkdGhcIiwgXCJ4XCIsIFwieG1sOmJhc2VcIiwgXCJ4bWw6bGFuZ1wiLCBcInhtbDpzcGFjZVwiLCBcInlcIiBdKSxcbiAgICAgICAgICAgIGZlRnVuY0E6IFF0KFsgXCJhbXBsaXR1ZGVcIiwgXCJleHBvbmVudFwiLCBcImlkXCIsIFwiaW50ZXJjZXB0XCIsIFwib2Zmc2V0XCIsIFwic2xvcGVcIiwgXCJ0YWJsZVZhbHVlc1wiLCBcInR5cGVcIiwgXCJ4bWw6YmFzZVwiLCBcInhtbDpsYW5nXCIsIFwieG1sOnNwYWNlXCIgXSksXG4gICAgICAgICAgICBmZUZ1bmNCOiBRdChbIFwiYW1wbGl0dWRlXCIsIFwiZXhwb25lbnRcIiwgXCJpZFwiLCBcImludGVyY2VwdFwiLCBcIm9mZnNldFwiLCBcInNsb3BlXCIsIFwidGFibGVWYWx1ZXNcIiwgXCJ0eXBlXCIsIFwieG1sOmJhc2VcIiwgXCJ4bWw6bGFuZ1wiLCBcInhtbDpzcGFjZVwiIF0pLFxuICAgICAgICAgICAgZmVGdW5jRzogUXQoWyBcImFtcGxpdHVkZVwiLCBcImV4cG9uZW50XCIsIFwiaWRcIiwgXCJpbnRlcmNlcHRcIiwgXCJvZmZzZXRcIiwgXCJzbG9wZVwiLCBcInRhYmxlVmFsdWVzXCIsIFwidHlwZVwiLCBcInhtbDpiYXNlXCIsIFwieG1sOmxhbmdcIiwgXCJ4bWw6c3BhY2VcIiBdKSxcbiAgICAgICAgICAgIGZlRnVuY1I6IFF0KFsgXCJhbXBsaXR1ZGVcIiwgXCJleHBvbmVudFwiLCBcImlkXCIsIFwiaW50ZXJjZXB0XCIsIFwib2Zmc2V0XCIsIFwic2xvcGVcIiwgXCJ0YWJsZVZhbHVlc1wiLCBcInR5cGVcIiwgXCJ4bWw6YmFzZVwiLCBcInhtbDpsYW5nXCIsIFwieG1sOnNwYWNlXCIgXSksXG4gICAgICAgICAgICBmZUdhdXNzaWFuQmx1cjogUXQoWyBcImNsYXNzXCIsIFwiaGVpZ2h0XCIsIFwiaWRcIiwgXCJpblwiLCBcInJlc3VsdFwiLCBcInN0ZERldmlhdGlvblwiLCBcInN0eWxlXCIsIFwid2lkdGhcIiwgXCJ4XCIsIFwieG1sOmJhc2VcIiwgXCJ4bWw6bGFuZ1wiLCBcInhtbDpzcGFjZVwiLCBcInlcIiBdKSxcbiAgICAgICAgICAgIGZlSW1hZ2U6IFF0KFsgXCJjbGFzc1wiLCBcImV4dGVybmFsUmVzb3VyY2VzUmVxdWlyZWRcIiwgXCJoZWlnaHRcIiwgXCJpZFwiLCBcInByZXNlcnZlQXNwZWN0UmF0aW9cIiwgXCJyZXN1bHRcIiwgXCJzdHlsZVwiLCBcIndpZHRoXCIsIFwieFwiLCBcInhsaW5rOmFjdHVhdGVcIiwgXCJ4bGluazphcmNyb2xlXCIsIFwieGxpbms6aHJlZlwiLCBcInhsaW5rOnJvbGVcIiwgXCJ4bGluazpzaG93XCIsIFwieGxpbms6dGl0bGVcIiwgXCJ4bGluazp0eXBlXCIsIFwieG1sOmJhc2VcIiwgXCJ4bWw6bGFuZ1wiLCBcInhtbDpzcGFjZVwiLCBcInlcIiBdKSxcbiAgICAgICAgICAgIGZlTWVyZ2U6IFF0KFsgXCJjbGFzc1wiLCBcImhlaWdodFwiLCBcImlkXCIsIFwicmVzdWx0XCIsIFwic3R5bGVcIiwgXCJ3aWR0aFwiLCBcInhcIiwgXCJ4bWw6YmFzZVwiLCBcInhtbDpsYW5nXCIsIFwieG1sOnNwYWNlXCIsIFwieVwiIF0pLFxuICAgICAgICAgICAgZmVNZXJnZU5vZGU6IFF0KFsgXCJpZFwiLCBcInhtbDpiYXNlXCIsIFwieG1sOmxhbmdcIiwgXCJ4bWw6c3BhY2VcIiBdKSxcbiAgICAgICAgICAgIGZlTW9ycGhvbG9neTogUXQoWyBcImNsYXNzXCIsIFwiaGVpZ2h0XCIsIFwiaWRcIiwgXCJpblwiLCBcIm9wZXJhdG9yXCIsIFwicmFkaXVzXCIsIFwicmVzdWx0XCIsIFwic3R5bGVcIiwgXCJ3aWR0aFwiLCBcInhcIiwgXCJ4bWw6YmFzZVwiLCBcInhtbDpsYW5nXCIsIFwieG1sOnNwYWNlXCIsIFwieVwiIF0pLFxuICAgICAgICAgICAgZmVPZmZzZXQ6IFF0KFsgXCJjbGFzc1wiLCBcImR4XCIsIFwiZHlcIiwgXCJoZWlnaHRcIiwgXCJpZFwiLCBcImluXCIsIFwicmVzdWx0XCIsIFwic3R5bGVcIiwgXCJ3aWR0aFwiLCBcInhcIiwgXCJ4bWw6YmFzZVwiLCBcInhtbDpsYW5nXCIsIFwieG1sOnNwYWNlXCIsIFwieVwiIF0pLFxuICAgICAgICAgICAgZmVQb2ludExpZ2h0OiBRdChbIFwiaWRcIiwgXCJ4XCIsIFwieG1sOmJhc2VcIiwgXCJ4bWw6bGFuZ1wiLCBcInhtbDpzcGFjZVwiLCBcInlcIiwgXCJ6XCIgXSksXG4gICAgICAgICAgICBmZVNwZWN1bGFyTGlnaHRpbmc6IFF0KFsgXCJjbGFzc1wiLCBcImhlaWdodFwiLCBcImlkXCIsIFwiaW5cIiwgXCJrZXJuZWxVbml0TGVuZ3RoXCIsIFwicmVzdWx0XCIsIFwic3BlY3VsYXJDb25zdGFudFwiLCBcInNwZWN1bGFyRXhwb25lbnRcIiwgXCJzdHlsZVwiLCBcInN1cmZhY2VTY2FsZVwiLCBcIndpZHRoXCIsIFwieFwiLCBcInhtbDpiYXNlXCIsIFwieG1sOmxhbmdcIiwgXCJ4bWw6c3BhY2VcIiwgXCJ5XCIgXSksXG4gICAgICAgICAgICBmZVNwb3RMaWdodDogUXQoWyBcImlkXCIsIFwibGltaXRpbmdDb25lQW5nbGVcIiwgXCJwb2ludHNBdFhcIiwgXCJwb2ludHNBdFlcIiwgXCJwb2ludHNBdFpcIiwgXCJzcGVjdWxhckV4cG9uZW50XCIsIFwieFwiLCBcInhtbDpiYXNlXCIsIFwieG1sOmxhbmdcIiwgXCJ4bWw6c3BhY2VcIiwgXCJ5XCIsIFwielwiIF0pLFxuICAgICAgICAgICAgZmVUaWxlOiBRdChbIFwiY2xhc3NcIiwgXCJoZWlnaHRcIiwgXCJpZFwiLCBcImluXCIsIFwicmVzdWx0XCIsIFwic3R5bGVcIiwgXCJ3aWR0aFwiLCBcInhcIiwgXCJ4bWw6YmFzZVwiLCBcInhtbDpsYW5nXCIsIFwieG1sOnNwYWNlXCIsIFwieVwiIF0pLFxuICAgICAgICAgICAgZmVUdXJidWxlbmNlOiBRdChbIFwiYmFzZUZyZXF1ZW5jeVwiLCBcImNsYXNzXCIsIFwiaGVpZ2h0XCIsIFwiaWRcIiwgXCJudW1PY3RhdmVzXCIsIFwicmVzdWx0XCIsIFwic2VlZFwiLCBcInN0aXRjaFRpbGVzXCIsIFwic3R5bGVcIiwgXCJ0eXBlXCIsIFwid2lkdGhcIiwgXCJ4XCIsIFwieG1sOmJhc2VcIiwgXCJ4bWw6bGFuZ1wiLCBcInhtbDpzcGFjZVwiLCBcInlcIiBdKSxcbiAgICAgICAgICAgIGZpbHRlcjogUXQoWyBcImNsYXNzXCIsIFwiZXh0ZXJuYWxSZXNvdXJjZXNSZXF1aXJlZFwiLCBcImZpbHRlclJlc1wiLCBcImZpbHRlclVuaXRzXCIsIFwiaGVpZ2h0XCIsIFwiaWRcIiwgXCJwcmltaXRpdmVVbml0c1wiLCBcInN0eWxlXCIsIFwid2lkdGhcIiwgXCJ4XCIsIFwieGxpbms6YWN0dWF0ZVwiLCBcInhsaW5rOmFyY3JvbGVcIiwgXCJ4bGluazpocmVmXCIsIFwieGxpbms6cm9sZVwiLCBcInhsaW5rOnNob3dcIiwgXCJ4bGluazp0aXRsZVwiLCBcInhsaW5rOnR5cGVcIiwgXCJ4bWw6YmFzZVwiLCBcInhtbDpsYW5nXCIsIFwieG1sOnNwYWNlXCIsIFwieVwiIF0pLFxuICAgICAgICAgICAgZm9udDogUXQoWyBcImNsYXNzXCIsIFwiZXh0ZXJuYWxSZXNvdXJjZXNSZXF1aXJlZFwiLCBcImhvcml6LWFkdi14XCIsIFwiaG9yaXotb3JpZ2luLXhcIiwgXCJob3Jpei1vcmlnaW4teVwiLCBcImlkXCIsIFwic3R5bGVcIiwgXCJ2ZXJ0LWFkdi15XCIsIFwidmVydC1vcmlnaW4teFwiLCBcInZlcnQtb3JpZ2luLXlcIiwgXCJ4bWw6YmFzZVwiLCBcInhtbDpsYW5nXCIsIFwieG1sOnNwYWNlXCIgXSksXG4gICAgICAgICAgICBcImZvbnQtZmFjZVwiOiBRdChbIFwiYWNjZW50LWhlaWdodFwiLCBcImFscGhhYmV0aWNcIiwgXCJhc2NlbnRcIiwgXCJiYm94XCIsIFwiY2FwLWhlaWdodFwiLCBcImRlc2NlbnRcIiwgXCJmb250LWZhbWlseVwiLCBcImZvbnQtc2l6ZVwiLCBcImZvbnQtc3RyZXRjaFwiLCBcImZvbnQtc3R5bGVcIiwgXCJmb250LXZhcmlhbnRcIiwgXCJmb250LXdlaWdodFwiLCBcImhhbmdpbmdcIiwgXCJpZFwiLCBcImlkZW9ncmFwaGljXCIsIFwibWF0aGVtYXRpY2FsXCIsIFwib3ZlcmxpbmUtcG9zaXRpb25cIiwgXCJvdmVybGluZS10aGlja25lc3NcIiwgXCJwYW5vc2UtMVwiLCBcInNsb3BlXCIsIFwic3RlbWhcIiwgXCJzdGVtdlwiLCBcInN0cmlrZXRocm91Z2gtcG9zaXRpb25cIiwgXCJzdHJpa2V0aHJvdWdoLXRoaWNrbmVzc1wiLCBcInVuZGVybGluZS1wb3NpdGlvblwiLCBcInVuZGVybGluZS10aGlja25lc3NcIiwgXCJ1bmljb2RlLXJhbmdlXCIsIFwidW5pdHMtcGVyLWVtXCIsIFwidi1hbHBoYWJldGljXCIsIFwidi1oYW5naW5nXCIsIFwidi1pZGVvZ3JhcGhpY1wiLCBcInYtbWF0aGVtYXRpY2FsXCIsIFwid2lkdGhzXCIsIFwieC1oZWlnaHRcIiwgXCJ4bWw6YmFzZVwiLCBcInhtbDpsYW5nXCIsIFwieG1sOnNwYWNlXCIgXSksXG4gICAgICAgICAgICBcImZvbnQtZmFjZS1mb3JtYXRcIjogUXQoWyBcImlkXCIsIFwic3RyaW5nXCIsIFwieG1sOmJhc2VcIiwgXCJ4bWw6bGFuZ1wiLCBcInhtbDpzcGFjZVwiIF0pLFxuICAgICAgICAgICAgXCJmb250LWZhY2UtbmFtZVwiOiBRdChbIFwiaWRcIiwgXCJuYW1lXCIsIFwieG1sOmJhc2VcIiwgXCJ4bWw6bGFuZ1wiLCBcInhtbDpzcGFjZVwiIF0pLFxuICAgICAgICAgICAgXCJmb250LWZhY2Utc3JjXCI6IFF0KFsgXCJpZFwiLCBcInhtbDpiYXNlXCIsIFwieG1sOmxhbmdcIiwgXCJ4bWw6c3BhY2VcIiBdKSxcbiAgICAgICAgICAgIFwiZm9udC1mYWNlLXVyaVwiOiBRdChbIFwiaWRcIiwgXCJ4bGluazphY3R1YXRlXCIsIFwieGxpbms6YXJjcm9sZVwiLCBcInhsaW5rOmhyZWZcIiwgXCJ4bGluazpyb2xlXCIsIFwieGxpbms6c2hvd1wiLCBcInhsaW5rOnRpdGxlXCIsIFwieGxpbms6dHlwZVwiLCBcInhtbDpiYXNlXCIsIFwieG1sOmxhbmdcIiwgXCJ4bWw6c3BhY2VcIiBdKSxcbiAgICAgICAgICAgIGZvcmVpZ25PYmplY3Q6IFF0KFsgXCJjbGFzc1wiLCBcImV4dGVybmFsUmVzb3VyY2VzUmVxdWlyZWRcIiwgXCJoZWlnaHRcIiwgXCJpZFwiLCBcIm9uYWN0aXZhdGVcIiwgXCJvbmNsaWNrXCIsIFwib25mb2N1c2luXCIsIFwib25mb2N1c291dFwiLCBcIm9ubG9hZFwiLCBcIm9ubW91c2Vkb3duXCIsIFwib25tb3VzZW1vdmVcIiwgXCJvbm1vdXNlb3V0XCIsIFwib25tb3VzZW92ZXJcIiwgXCJvbm1vdXNldXBcIiwgXCJyZXF1aXJlZEV4dGVuc2lvbnNcIiwgXCJyZXF1aXJlZEZlYXR1cmVzXCIsIFwic3R5bGVcIiwgXCJzeXN0ZW1MYW5ndWFnZVwiLCBcInRyYW5zZm9ybVwiLCBcIndpZHRoXCIsIFwieFwiLCBcInhtbDpiYXNlXCIsIFwieG1sOmxhbmdcIiwgXCJ4bWw6c3BhY2VcIiwgXCJ5XCIgXSksXG4gICAgICAgICAgICBnOiBRdChbIFwiY2xhc3NcIiwgXCJleHRlcm5hbFJlc291cmNlc1JlcXVpcmVkXCIsIFwiaWRcIiwgXCJvbmFjdGl2YXRlXCIsIFwib25jbGlja1wiLCBcIm9uZm9jdXNpblwiLCBcIm9uZm9jdXNvdXRcIiwgXCJvbmxvYWRcIiwgXCJvbm1vdXNlZG93blwiLCBcIm9ubW91c2Vtb3ZlXCIsIFwib25tb3VzZW91dFwiLCBcIm9ubW91c2VvdmVyXCIsIFwib25tb3VzZXVwXCIsIFwicmVxdWlyZWRFeHRlbnNpb25zXCIsIFwicmVxdWlyZWRGZWF0dXJlc1wiLCBcInN0eWxlXCIsIFwic3lzdGVtTGFuZ3VhZ2VcIiwgXCJ0cmFuc2Zvcm1cIiwgXCJ4bWw6YmFzZVwiLCBcInhtbDpsYW5nXCIsIFwieG1sOnNwYWNlXCIgXSksXG4gICAgICAgICAgICBnbHlwaDogUXQoWyBcImFyYWJpYy1mb3JtXCIsIFwiY2xhc3NcIiwgXCJkXCIsIFwiZ2x5cGgtbmFtZVwiLCBcImhvcml6LWFkdi14XCIsIFwiaWRcIiwgXCJsYW5nXCIsIFwib3JpZW50YXRpb25cIiwgXCJzdHlsZVwiLCBcInVuaWNvZGVcIiwgXCJ2ZXJ0LWFkdi15XCIsIFwidmVydC1vcmlnaW4teFwiLCBcInZlcnQtb3JpZ2luLXlcIiwgXCJ4bWw6YmFzZVwiLCBcInhtbDpsYW5nXCIsIFwieG1sOnNwYWNlXCIgXSksXG4gICAgICAgICAgICBnbHlwaFJlZjogUXQoWyBcImNsYXNzXCIsIFwiZHhcIiwgXCJkeVwiLCBcImZvcm1hdFwiLCBcImdseXBoUmVmXCIsIFwiaWRcIiwgXCJzdHlsZVwiLCBcInhcIiwgXCJ4bGluazphY3R1YXRlXCIsIFwieGxpbms6YXJjcm9sZVwiLCBcInhsaW5rOmhyZWZcIiwgXCJ4bGluazpyb2xlXCIsIFwieGxpbms6c2hvd1wiLCBcInhsaW5rOnRpdGxlXCIsIFwieGxpbms6dHlwZVwiLCBcInhtbDpiYXNlXCIsIFwieG1sOmxhbmdcIiwgXCJ4bWw6c3BhY2VcIiwgXCJ5XCIgXSksXG4gICAgICAgICAgICBnbHlwaHJlZjogd3QoKSxcbiAgICAgICAgICAgIGhrZXJuOiBRdChbIFwiZzFcIiwgXCJnMlwiLCBcImlkXCIsIFwia1wiLCBcInUxXCIsIFwidTJcIiwgXCJ4bWw6YmFzZVwiLCBcInhtbDpsYW5nXCIsIFwieG1sOnNwYWNlXCIgXSksXG4gICAgICAgICAgICBpbWFnZTogUXQoWyBcImNsYXNzXCIsIFwiZXh0ZXJuYWxSZXNvdXJjZXNSZXF1aXJlZFwiLCBcImhlaWdodFwiLCBcImlkXCIsIFwib25hY3RpdmF0ZVwiLCBcIm9uY2xpY2tcIiwgXCJvbmZvY3VzaW5cIiwgXCJvbmZvY3Vzb3V0XCIsIFwib25sb2FkXCIsIFwib25tb3VzZWRvd25cIiwgXCJvbm1vdXNlbW92ZVwiLCBcIm9ubW91c2VvdXRcIiwgXCJvbm1vdXNlb3ZlclwiLCBcIm9ubW91c2V1cFwiLCBcInByZXNlcnZlQXNwZWN0UmF0aW9cIiwgXCJyZXF1aXJlZEV4dGVuc2lvbnNcIiwgXCJyZXF1aXJlZEZlYXR1cmVzXCIsIFwic3R5bGVcIiwgXCJzeXN0ZW1MYW5ndWFnZVwiLCBcInRyYW5zZm9ybVwiLCBcIndpZHRoXCIsIFwieFwiLCBcInhsaW5rOmFjdHVhdGVcIiwgXCJ4bGluazphcmNyb2xlXCIsIFwieGxpbms6aHJlZlwiLCBcInhsaW5rOnJvbGVcIiwgXCJ4bGluazpzaG93XCIsIFwieGxpbms6dGl0bGVcIiwgXCJ4bGluazp0eXBlXCIsIFwieG1sOmJhc2VcIiwgXCJ4bWw6bGFuZ1wiLCBcInhtbDpzcGFjZVwiLCBcInlcIiBdKSxcbiAgICAgICAgICAgIGxpbmU6IFF0KFsgXCJjbGFzc1wiLCBcImV4dGVybmFsUmVzb3VyY2VzUmVxdWlyZWRcIiwgXCJpZFwiLCBcIm9uYWN0aXZhdGVcIiwgXCJvbmNsaWNrXCIsIFwib25mb2N1c2luXCIsIFwib25mb2N1c291dFwiLCBcIm9ubG9hZFwiLCBcIm9ubW91c2Vkb3duXCIsIFwib25tb3VzZW1vdmVcIiwgXCJvbm1vdXNlb3V0XCIsIFwib25tb3VzZW92ZXJcIiwgXCJvbm1vdXNldXBcIiwgXCJyZXF1aXJlZEV4dGVuc2lvbnNcIiwgXCJyZXF1aXJlZEZlYXR1cmVzXCIsIFwic3R5bGVcIiwgXCJzeXN0ZW1MYW5ndWFnZVwiLCBcInRyYW5zZm9ybVwiLCBcIngxXCIsIFwieDJcIiwgXCJ4bWw6YmFzZVwiLCBcInhtbDpsYW5nXCIsIFwieG1sOnNwYWNlXCIsIFwieTFcIiwgXCJ5MlwiIF0pLFxuICAgICAgICAgICAgbGluZWFyR3JhZGllbnQ6IFF0KFsgXCJjbGFzc1wiLCBcImV4dGVybmFsUmVzb3VyY2VzUmVxdWlyZWRcIiwgXCJncmFkaWVudFRyYW5zZm9ybVwiLCBcImdyYWRpZW50VW5pdHNcIiwgXCJpZFwiLCBcInNwcmVhZE1ldGhvZFwiLCBcInN0eWxlXCIsIFwieDFcIiwgXCJ4MlwiLCBcInhsaW5rOmFyY3JvbGVcIiwgXCJ4bGluazpocmVmXCIsIFwieGxpbms6cm9sZVwiLCBcInhsaW5rOnRpdGxlXCIsIFwieGxpbms6dHlwZVwiLCBcInhtbDpiYXNlXCIsIFwieG1sOmxhbmdcIiwgXCJ4bWw6c3BhY2VcIiwgXCJ5MVwiLCBcInkyXCIgXSksXG4gICAgICAgICAgICBtYXJrZXI6IFF0KFsgXCJjbGFzc1wiLCBcImV4dGVybmFsUmVzb3VyY2VzUmVxdWlyZWRcIiwgXCJpZFwiLCBcIm1hcmtlckhlaWdodFwiLCBcIm1hcmtlclVuaXRzXCIsIFwibWFya2VyV2lkdGhcIiwgXCJvcmllbnRcIiwgXCJwcmVzZXJ2ZUFzcGVjdFJhdGlvXCIsIFwicmVmWFwiLCBcInJlZllcIiwgXCJzdHlsZVwiLCBcInZpZXdCb3hcIiwgXCJ4bWw6YmFzZVwiLCBcInhtbDpsYW5nXCIsIFwieG1sOnNwYWNlXCIgXSksXG4gICAgICAgICAgICBtYXNrOiBRdChbIFwiY2xhc3NcIiwgXCJleHRlcm5hbFJlc291cmNlc1JlcXVpcmVkXCIsIFwiaGVpZ2h0XCIsIFwiaWRcIiwgXCJtYXNrQ29udGVudFVuaXRzXCIsIFwibWFza1VuaXRzXCIsIFwicmVxdWlyZWRFeHRlbnNpb25zXCIsIFwicmVxdWlyZWRGZWF0dXJlc1wiLCBcInN0eWxlXCIsIFwic3lzdGVtTGFuZ3VhZ2VcIiwgXCJ3aWR0aFwiLCBcInhcIiwgXCJ4bWw6YmFzZVwiLCBcInhtbDpsYW5nXCIsIFwieG1sOnNwYWNlXCIsIFwieVwiIF0pLFxuICAgICAgICAgICAgbWV0YWRhdGE6IFF0KFsgXCJpZFwiLCBcInhtbDpiYXNlXCIsIFwieG1sOmxhbmdcIiwgXCJ4bWw6c3BhY2VcIiBdKSxcbiAgICAgICAgICAgIFwibWlzc2luZy1nbHlwaFwiOiBRdChbIFwiY2xhc3NcIiwgXCJkXCIsIFwiaG9yaXotYWR2LXhcIiwgXCJpZFwiLCBcInN0eWxlXCIsIFwidmVydC1hZHYteVwiLCBcInZlcnQtb3JpZ2luLXhcIiwgXCJ2ZXJ0LW9yaWdpbi15XCIsIFwieG1sOmJhc2VcIiwgXCJ4bWw6bGFuZ1wiLCBcInhtbDpzcGFjZVwiIF0pLFxuICAgICAgICAgICAgbXBhdGg6IFF0KFsgXCJleHRlcm5hbFJlc291cmNlc1JlcXVpcmVkXCIsIFwiaWRcIiwgXCJ4bGluazphY3R1YXRlXCIsIFwieGxpbms6YXJjcm9sZVwiLCBcInhsaW5rOmhyZWZcIiwgXCJ4bGluazpyb2xlXCIsIFwieGxpbms6c2hvd1wiLCBcInhsaW5rOnRpdGxlXCIsIFwieGxpbms6dHlwZVwiLCBcInhtbDpiYXNlXCIsIFwieG1sOmxhbmdcIiwgXCJ4bWw6c3BhY2VcIiBdKSxcbiAgICAgICAgICAgIHBhdGg6IFF0KFsgXCJjbGFzc1wiLCBcImRcIiwgXCJleHRlcm5hbFJlc291cmNlc1JlcXVpcmVkXCIsIFwiaWRcIiwgXCJvbmFjdGl2YXRlXCIsIFwib25jbGlja1wiLCBcIm9uZm9jdXNpblwiLCBcIm9uZm9jdXNvdXRcIiwgXCJvbmxvYWRcIiwgXCJvbm1vdXNlZG93blwiLCBcIm9ubW91c2Vtb3ZlXCIsIFwib25tb3VzZW91dFwiLCBcIm9ubW91c2VvdmVyXCIsIFwib25tb3VzZXVwXCIsIFwicGF0aExlbmd0aFwiLCBcInJlcXVpcmVkRXh0ZW5zaW9uc1wiLCBcInJlcXVpcmVkRmVhdHVyZXNcIiwgXCJzdHlsZVwiLCBcInN5c3RlbUxhbmd1YWdlXCIsIFwidHJhbnNmb3JtXCIsIFwieG1sOmJhc2VcIiwgXCJ4bWw6bGFuZ1wiLCBcInhtbDpzcGFjZVwiIF0pLFxuICAgICAgICAgICAgcGF0dGVybjogUXQoWyBcImNsYXNzXCIsIFwiZXh0ZXJuYWxSZXNvdXJjZXNSZXF1aXJlZFwiLCBcImhlaWdodFwiLCBcImlkXCIsIFwicGF0dGVybkNvbnRlbnRVbml0c1wiLCBcInBhdHRlcm5UcmFuc2Zvcm1cIiwgXCJwYXR0ZXJuVW5pdHNcIiwgXCJwcmVzZXJ2ZUFzcGVjdFJhdGlvXCIsIFwicmVxdWlyZWRFeHRlbnNpb25zXCIsIFwicmVxdWlyZWRGZWF0dXJlc1wiLCBcInN0eWxlXCIsIFwic3lzdGVtTGFuZ3VhZ2VcIiwgXCJ2aWV3Qm94XCIsIFwid2lkdGhcIiwgXCJ4XCIsIFwieGxpbms6YWN0dWF0ZVwiLCBcInhsaW5rOmFyY3JvbGVcIiwgXCJ4bGluazpocmVmXCIsIFwieGxpbms6cm9sZVwiLCBcInhsaW5rOnNob3dcIiwgXCJ4bGluazp0aXRsZVwiLCBcInhsaW5rOnR5cGVcIiwgXCJ4bWw6YmFzZVwiLCBcInhtbDpsYW5nXCIsIFwieG1sOnNwYWNlXCIsIFwieVwiIF0pLFxuICAgICAgICAgICAgcG9seWdvbjogUXQoWyBcImNsYXNzXCIsIFwiZXh0ZXJuYWxSZXNvdXJjZXNSZXF1aXJlZFwiLCBcImlkXCIsIFwib25hY3RpdmF0ZVwiLCBcIm9uY2xpY2tcIiwgXCJvbmZvY3VzaW5cIiwgXCJvbmZvY3Vzb3V0XCIsIFwib25sb2FkXCIsIFwib25tb3VzZWRvd25cIiwgXCJvbm1vdXNlbW92ZVwiLCBcIm9ubW91c2VvdXRcIiwgXCJvbm1vdXNlb3ZlclwiLCBcIm9ubW91c2V1cFwiLCBcInBvaW50c1wiLCBcInJlcXVpcmVkRXh0ZW5zaW9uc1wiLCBcInJlcXVpcmVkRmVhdHVyZXNcIiwgXCJzdHlsZVwiLCBcInN5c3RlbUxhbmd1YWdlXCIsIFwidHJhbnNmb3JtXCIsIFwieG1sOmJhc2VcIiwgXCJ4bWw6bGFuZ1wiLCBcInhtbDpzcGFjZVwiIF0pLFxuICAgICAgICAgICAgcG9seWxpbmU6IFF0KFsgXCJjbGFzc1wiLCBcImV4dGVybmFsUmVzb3VyY2VzUmVxdWlyZWRcIiwgXCJpZFwiLCBcIm9uYWN0aXZhdGVcIiwgXCJvbmNsaWNrXCIsIFwib25mb2N1c2luXCIsIFwib25mb2N1c291dFwiLCBcIm9ubG9hZFwiLCBcIm9ubW91c2Vkb3duXCIsIFwib25tb3VzZW1vdmVcIiwgXCJvbm1vdXNlb3V0XCIsIFwib25tb3VzZW92ZXJcIiwgXCJvbm1vdXNldXBcIiwgXCJwb2ludHNcIiwgXCJyZXF1aXJlZEV4dGVuc2lvbnNcIiwgXCJyZXF1aXJlZEZlYXR1cmVzXCIsIFwic3R5bGVcIiwgXCJzeXN0ZW1MYW5ndWFnZVwiLCBcInRyYW5zZm9ybVwiLCBcInhtbDpiYXNlXCIsIFwieG1sOmxhbmdcIiwgXCJ4bWw6c3BhY2VcIiBdKSxcbiAgICAgICAgICAgIHJhZGlhbEdyYWRpZW50OiBRdChbIFwiY2xhc3NcIiwgXCJjeFwiLCBcImN5XCIsIFwiZXh0ZXJuYWxSZXNvdXJjZXNSZXF1aXJlZFwiLCBcImZ4XCIsIFwiZnlcIiwgXCJncmFkaWVudFRyYW5zZm9ybVwiLCBcImdyYWRpZW50VW5pdHNcIiwgXCJpZFwiLCBcInJcIiwgXCJzcHJlYWRNZXRob2RcIiwgXCJzdHlsZVwiLCBcInhsaW5rOmFyY3JvbGVcIiwgXCJ4bGluazpocmVmXCIsIFwieGxpbms6cm9sZVwiLCBcInhsaW5rOnRpdGxlXCIsIFwieGxpbms6dHlwZVwiLCBcInhtbDpiYXNlXCIsIFwieG1sOmxhbmdcIiwgXCJ4bWw6c3BhY2VcIiBdKSxcbiAgICAgICAgICAgIHJlY3Q6IFF0KFsgXCJjbGFzc1wiLCBcImV4dGVybmFsUmVzb3VyY2VzUmVxdWlyZWRcIiwgXCJoZWlnaHRcIiwgXCJpZFwiLCBcIm9uYWN0aXZhdGVcIiwgXCJvbmNsaWNrXCIsIFwib25mb2N1c2luXCIsIFwib25mb2N1c291dFwiLCBcIm9ubG9hZFwiLCBcIm9ubW91c2Vkb3duXCIsIFwib25tb3VzZW1vdmVcIiwgXCJvbm1vdXNlb3V0XCIsIFwib25tb3VzZW92ZXJcIiwgXCJvbm1vdXNldXBcIiwgXCJyZXF1aXJlZEV4dGVuc2lvbnNcIiwgXCJyZXF1aXJlZEZlYXR1cmVzXCIsIFwicnhcIiwgXCJyeVwiLCBcInN0eWxlXCIsIFwic3lzdGVtTGFuZ3VhZ2VcIiwgXCJ0cmFuc2Zvcm1cIiwgXCJ3aWR0aFwiLCBcInhcIiwgXCJ4bWw6YmFzZVwiLCBcInhtbDpsYW5nXCIsIFwieG1sOnNwYWNlXCIsIFwieVwiIF0pLFxuICAgICAgICAgICAgc2NyaXB0OiBRdChbIFwiZXh0ZXJuYWxSZXNvdXJjZXNSZXF1aXJlZFwiLCBcImlkXCIsIFwidHlwZVwiLCBcInhsaW5rOmFjdHVhdGVcIiwgXCJ4bGluazphcmNyb2xlXCIsIFwieGxpbms6aHJlZlwiLCBcInhsaW5rOnJvbGVcIiwgXCJ4bGluazpzaG93XCIsIFwieGxpbms6dGl0bGVcIiwgXCJ4bGluazp0eXBlXCIsIFwieG1sOmJhc2VcIiwgXCJ4bWw6bGFuZ1wiLCBcInhtbDpzcGFjZVwiIF0pLFxuICAgICAgICAgICAgc2V0OiBRdChbIFwiYXR0cmlidXRlTmFtZVwiLCBcImF0dHJpYnV0ZVR5cGVcIiwgXCJiZWdpblwiLCBcImR1clwiLCBcImVuZFwiLCBcImV4dGVybmFsUmVzb3VyY2VzUmVxdWlyZWRcIiwgXCJmaWxsXCIsIFwiaWRcIiwgXCJtYXhcIiwgXCJtaW5cIiwgXCJvbmJlZ2luXCIsIFwib25lbmRcIiwgXCJvbmxvYWRcIiwgXCJvbnJlcGVhdFwiLCBcInJlcGVhdENvdW50XCIsIFwicmVwZWF0RHVyXCIsIFwicmVxdWlyZWRFeHRlbnNpb25zXCIsIFwicmVxdWlyZWRGZWF0dXJlc1wiLCBcInJlc3RhcnRcIiwgXCJzeXN0ZW1MYW5ndWFnZVwiLCBcInRvXCIsIFwieGxpbms6YWN0dWF0ZVwiLCBcInhsaW5rOmFyY3JvbGVcIiwgXCJ4bGluazpocmVmXCIsIFwieGxpbms6cm9sZVwiLCBcInhsaW5rOnNob3dcIiwgXCJ4bGluazp0aXRsZVwiLCBcInhsaW5rOnR5cGVcIiwgXCJ4bWw6YmFzZVwiLCBcInhtbDpsYW5nXCIsIFwieG1sOnNwYWNlXCIgXSksXG4gICAgICAgICAgICBzdG9wOiBRdChbIFwiY2xhc3NcIiwgXCJpZFwiLCBcIm9mZnNldFwiLCBcInN0eWxlXCIsIFwieG1sOmJhc2VcIiwgXCJ4bWw6bGFuZ1wiLCBcInhtbDpzcGFjZVwiIF0pLFxuICAgICAgICAgICAgc3R5bGU6IFF0KFsgXCJpZFwiLCBcIm1lZGlhXCIsIFwidGl0bGVcIiwgXCJ0eXBlXCIsIFwieG1sOmJhc2VcIiwgXCJ4bWw6bGFuZ1wiLCBcInhtbDpzcGFjZVwiIF0pLFxuICAgICAgICAgICAgc3ZnOiBRdChbIFwiYmFzZVByb2ZpbGVcIiwgXCJjbGFzc1wiLCBcImNvbnRlbnRTY3JpcHRUeXBlXCIsIFwiY29udGVudFN0eWxlVHlwZVwiLCBcImV4dGVybmFsUmVzb3VyY2VzUmVxdWlyZWRcIiwgXCJoZWlnaHRcIiwgXCJpZFwiLCBcIm9uYWJvcnRcIiwgXCJvbmFjdGl2YXRlXCIsIFwib25jbGlja1wiLCBcIm9uZXJyb3JcIiwgXCJvbmZvY3VzaW5cIiwgXCJvbmZvY3Vzb3V0XCIsIFwib25sb2FkXCIsIFwib25tb3VzZWRvd25cIiwgXCJvbm1vdXNlbW92ZVwiLCBcIm9ubW91c2VvdXRcIiwgXCJvbm1vdXNlb3ZlclwiLCBcIm9ubW91c2V1cFwiLCBcIm9ucmVzaXplXCIsIFwib25zY3JvbGxcIiwgXCJvbnVubG9hZFwiLCBcIm9uem9vbVwiLCBcInByZXNlcnZlQXNwZWN0UmF0aW9cIiwgXCJyZXF1aXJlZEV4dGVuc2lvbnNcIiwgXCJyZXF1aXJlZEZlYXR1cmVzXCIsIFwic3R5bGVcIiwgXCJzeXN0ZW1MYW5ndWFnZVwiLCBcInZlcnNpb25cIiwgXCJ2aWV3Qm94XCIsIFwid2lkdGhcIiwgXCJ4XCIsIFwieG1sOmJhc2VcIiwgXCJ4bWw6bGFuZ1wiLCBcInhtbDpzcGFjZVwiLCBcInlcIiwgXCJ6b29tQW5kUGFuXCIgXSksXG4gICAgICAgICAgICBzd2l0Y2g6IFF0KFsgXCJjbGFzc1wiLCBcImV4dGVybmFsUmVzb3VyY2VzUmVxdWlyZWRcIiwgXCJpZFwiLCBcIm9uYWN0aXZhdGVcIiwgXCJvbmNsaWNrXCIsIFwib25mb2N1c2luXCIsIFwib25mb2N1c291dFwiLCBcIm9ubG9hZFwiLCBcIm9ubW91c2Vkb3duXCIsIFwib25tb3VzZW1vdmVcIiwgXCJvbm1vdXNlb3V0XCIsIFwib25tb3VzZW92ZXJcIiwgXCJvbm1vdXNldXBcIiwgXCJyZXF1aXJlZEV4dGVuc2lvbnNcIiwgXCJyZXF1aXJlZEZlYXR1cmVzXCIsIFwic3R5bGVcIiwgXCJzeXN0ZW1MYW5ndWFnZVwiLCBcInRyYW5zZm9ybVwiLCBcInhtbDpiYXNlXCIsIFwieG1sOmxhbmdcIiwgXCJ4bWw6c3BhY2VcIiBdKSxcbiAgICAgICAgICAgIHN5bWJvbDogUXQoWyBcImNsYXNzXCIsIFwiZXh0ZXJuYWxSZXNvdXJjZXNSZXF1aXJlZFwiLCBcImlkXCIsIFwib25hY3RpdmF0ZVwiLCBcIm9uY2xpY2tcIiwgXCJvbmZvY3VzaW5cIiwgXCJvbmZvY3Vzb3V0XCIsIFwib25sb2FkXCIsIFwib25tb3VzZWRvd25cIiwgXCJvbm1vdXNlbW92ZVwiLCBcIm9ubW91c2VvdXRcIiwgXCJvbm1vdXNlb3ZlclwiLCBcIm9ubW91c2V1cFwiLCBcInByZXNlcnZlQXNwZWN0UmF0aW9cIiwgXCJzdHlsZVwiLCBcInZpZXdCb3hcIiwgXCJ4bWw6YmFzZVwiLCBcInhtbDpsYW5nXCIsIFwieG1sOnNwYWNlXCIgXSksXG4gICAgICAgICAgICB0ZXh0OiBRdChbIFwiY2xhc3NcIiwgXCJkeFwiLCBcImR5XCIsIFwiZXh0ZXJuYWxSZXNvdXJjZXNSZXF1aXJlZFwiLCBcImlkXCIsIFwibGVuZ3RoQWRqdXN0XCIsIFwib25hY3RpdmF0ZVwiLCBcIm9uY2xpY2tcIiwgXCJvbmZvY3VzaW5cIiwgXCJvbmZvY3Vzb3V0XCIsIFwib25sb2FkXCIsIFwib25tb3VzZWRvd25cIiwgXCJvbm1vdXNlbW92ZVwiLCBcIm9ubW91c2VvdXRcIiwgXCJvbm1vdXNlb3ZlclwiLCBcIm9ubW91c2V1cFwiLCBcInJlcXVpcmVkRXh0ZW5zaW9uc1wiLCBcInJlcXVpcmVkRmVhdHVyZXNcIiwgXCJyb3RhdGVcIiwgXCJzdHlsZVwiLCBcInN5c3RlbUxhbmd1YWdlXCIsIFwidGV4dExlbmd0aFwiLCBcInRyYW5zZm9ybVwiLCBcInhcIiwgXCJ4bWw6YmFzZVwiLCBcInhtbDpsYW5nXCIsIFwieG1sOnNwYWNlXCIsIFwieVwiIF0pLFxuICAgICAgICAgICAgdGV4dFBhdGg6IFF0KFsgXCJjbGFzc1wiLCBcImV4dGVybmFsUmVzb3VyY2VzUmVxdWlyZWRcIiwgXCJpZFwiLCBcImxlbmd0aEFkanVzdFwiLCBcIm1ldGhvZFwiLCBcIm9uYWN0aXZhdGVcIiwgXCJvbmNsaWNrXCIsIFwib25mb2N1c2luXCIsIFwib25mb2N1c291dFwiLCBcIm9ubG9hZFwiLCBcIm9ubW91c2Vkb3duXCIsIFwib25tb3VzZW1vdmVcIiwgXCJvbm1vdXNlb3V0XCIsIFwib25tb3VzZW92ZXJcIiwgXCJvbm1vdXNldXBcIiwgXCJyZXF1aXJlZEV4dGVuc2lvbnNcIiwgXCJyZXF1aXJlZEZlYXR1cmVzXCIsIFwic3BhY2luZ1wiLCBcInN0YXJ0T2Zmc2V0XCIsIFwic3R5bGVcIiwgXCJzeXN0ZW1MYW5ndWFnZVwiLCBcInRleHRMZW5ndGhcIiwgXCJ4bGluazphcmNyb2xlXCIsIFwieGxpbms6aHJlZlwiLCBcInhsaW5rOnJvbGVcIiwgXCJ4bGluazp0aXRsZVwiLCBcInhsaW5rOnR5cGVcIiwgXCJ4bWw6YmFzZVwiLCBcInhtbDpsYW5nXCIsIFwieG1sOnNwYWNlXCIgXSksXG4gICAgICAgICAgICB0aXRsZTogUXQoWyBcImNsYXNzXCIsIFwiaWRcIiwgXCJzdHlsZVwiLCBcInhtbDpiYXNlXCIsIFwieG1sOmxhbmdcIiwgXCJ4bWw6c3BhY2VcIiBdKSxcbiAgICAgICAgICAgIHRyZWY6IFF0KFsgXCJjbGFzc1wiLCBcImR4XCIsIFwiZHlcIiwgXCJleHRlcm5hbFJlc291cmNlc1JlcXVpcmVkXCIsIFwiaWRcIiwgXCJsZW5ndGhBZGp1c3RcIiwgXCJvbmFjdGl2YXRlXCIsIFwib25jbGlja1wiLCBcIm9uZm9jdXNpblwiLCBcIm9uZm9jdXNvdXRcIiwgXCJvbmxvYWRcIiwgXCJvbm1vdXNlZG93blwiLCBcIm9ubW91c2Vtb3ZlXCIsIFwib25tb3VzZW91dFwiLCBcIm9ubW91c2VvdmVyXCIsIFwib25tb3VzZXVwXCIsIFwicmVxdWlyZWRFeHRlbnNpb25zXCIsIFwicmVxdWlyZWRGZWF0dXJlc1wiLCBcInJvdGF0ZVwiLCBcInN0eWxlXCIsIFwic3lzdGVtTGFuZ3VhZ2VcIiwgXCJ0ZXh0TGVuZ3RoXCIsIFwieFwiLCBcInhsaW5rOmFyY3JvbGVcIiwgXCJ4bGluazpocmVmXCIsIFwieGxpbms6cm9sZVwiLCBcInhsaW5rOnRpdGxlXCIsIFwieGxpbms6dHlwZVwiLCBcInhtbDpiYXNlXCIsIFwieG1sOmxhbmdcIiwgXCJ4bWw6c3BhY2VcIiwgXCJ5XCIgXSksXG4gICAgICAgICAgICB0c3BhbjogUXQoWyBcImNsYXNzXCIsIFwiZHhcIiwgXCJkeVwiLCBcImV4dGVybmFsUmVzb3VyY2VzUmVxdWlyZWRcIiwgXCJpZFwiLCBcImxlbmd0aEFkanVzdFwiLCBcIm9uYWN0aXZhdGVcIiwgXCJvbmNsaWNrXCIsIFwib25mb2N1c2luXCIsIFwib25mb2N1c291dFwiLCBcIm9ubG9hZFwiLCBcIm9ubW91c2Vkb3duXCIsIFwib25tb3VzZW1vdmVcIiwgXCJvbm1vdXNlb3V0XCIsIFwib25tb3VzZW92ZXJcIiwgXCJvbm1vdXNldXBcIiwgXCJyZXF1aXJlZEV4dGVuc2lvbnNcIiwgXCJyZXF1aXJlZEZlYXR1cmVzXCIsIFwicm90YXRlXCIsIFwic3R5bGVcIiwgXCJzeXN0ZW1MYW5ndWFnZVwiLCBcInRleHRMZW5ndGhcIiwgXCJ4XCIsIFwieG1sOmJhc2VcIiwgXCJ4bWw6bGFuZ1wiLCBcInhtbDpzcGFjZVwiLCBcInlcIiBdKSxcbiAgICAgICAgICAgIHVzZTogUXQoWyBcImNsYXNzXCIsIFwiZXh0ZXJuYWxSZXNvdXJjZXNSZXF1aXJlZFwiLCBcImhlaWdodFwiLCBcImlkXCIsIFwib25hY3RpdmF0ZVwiLCBcIm9uY2xpY2tcIiwgXCJvbmZvY3VzaW5cIiwgXCJvbmZvY3Vzb3V0XCIsIFwib25sb2FkXCIsIFwib25tb3VzZWRvd25cIiwgXCJvbm1vdXNlbW92ZVwiLCBcIm9ubW91c2VvdXRcIiwgXCJvbm1vdXNlb3ZlclwiLCBcIm9ubW91c2V1cFwiLCBcInJlcXVpcmVkRXh0ZW5zaW9uc1wiLCBcInJlcXVpcmVkRmVhdHVyZXNcIiwgXCJzdHlsZVwiLCBcInN5c3RlbUxhbmd1YWdlXCIsIFwidHJhbnNmb3JtXCIsIFwid2lkdGhcIiwgXCJ4XCIsIFwieGxpbms6YWN0dWF0ZVwiLCBcInhsaW5rOmFyY3JvbGVcIiwgXCJ4bGluazpocmVmXCIsIFwieGxpbms6cm9sZVwiLCBcInhsaW5rOnNob3dcIiwgXCJ4bGluazp0aXRsZVwiLCBcInhsaW5rOnR5cGVcIiwgXCJ4bWw6YmFzZVwiLCBcInhtbDpsYW5nXCIsIFwieG1sOnNwYWNlXCIsIFwieVwiIF0pLFxuICAgICAgICAgICAgdmlldzogUXQoWyBcImV4dGVybmFsUmVzb3VyY2VzUmVxdWlyZWRcIiwgXCJpZFwiLCBcInByZXNlcnZlQXNwZWN0UmF0aW9cIiwgXCJ2aWV3Qm94XCIsIFwidmlld1RhcmdldFwiLCBcInhtbDpiYXNlXCIsIFwieG1sOmxhbmdcIiwgXCJ4bWw6c3BhY2VcIiwgXCJ6b29tQW5kUGFuXCIgXSksXG4gICAgICAgICAgICB2a2VybjogUXQoWyBcImcxXCIsIFwiZzJcIiwgXCJpZFwiLCBcImtcIiwgXCJ1MVwiLCBcInUyXCIsIFwieG1sOmJhc2VcIiwgXCJ4bWw6bGFuZ1wiLCBcInhtbDpzcGFjZVwiIF0pXG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLl8gPSBRdChbIFwiYVwiLCBcImFsdEdseXBoXCIsIFwiYW5pbWF0ZVwiLCBcImFuaW1hdGVDb2xvclwiLCBcImNpcmNsZVwiLCBcImNsaXBQYXRoXCIsIFwiZGVmc1wiLCBcImVsbGlwc2VcIiwgXCJmZUJsZW5kXCIsIFwiZmVDb2xvck1hdHJpeFwiLCBcImZlQ29tcG9uZW50VHJhbnNmZXJcIiwgXCJmZUNvbXBvc2l0ZVwiLCBcImZlQ29udm9sdmVNYXRyaXhcIiwgXCJmZURpZmZ1c2VMaWdodGluZ1wiLCBcImZlRGlzcGxhY2VtZW50TWFwXCIsIFwiZmVGbG9vZFwiLCBcImZlR2F1c3NpYW5CbHVyXCIsIFwiZmVJbWFnZVwiLCBcImZlTWVyZ2VcIiwgXCJmZU1vcnBob2xvZ3lcIiwgXCJmZU9mZnNldFwiLCBcImZlU3BlY3VsYXJMaWdodGluZ1wiLCBcImZlVGlsZVwiLCBcImZlVHVyYnVsZW5jZVwiLCBcImZpbHRlclwiLCBcImZvbnRcIiwgXCJmb3JlaWduT2JqZWN0XCIsIFwiZ1wiLCBcImdseXBoXCIsIFwiZ2x5cGhSZWZcIiwgXCJpbWFnZVwiLCBcImxpbmVcIiwgXCJsaW5lYXJHcmFkaWVudFwiLCBcIm1hcmtlclwiLCBcIm1hc2tcIiwgXCJtaXNzaW5nLWdseXBoXCIsIFwicGF0aFwiLCBcInBhdHRlcm5cIiwgXCJwb2x5Z29uXCIsIFwicG9seWxpbmVcIiwgXCJyYWRpYWxHcmFkaWVudFwiLCBcInJlY3RcIiwgXCJzdG9wXCIsIFwic3ZnXCIsIFwic3dpdGNoXCIsIFwic3ltYm9sXCIsIFwidGV4dFwiLCBcInRleHRQYXRoXCIsIFwidHJlZlwiLCBcInRzcGFuXCIsIFwidXNlXCIgXSk7XG4gICAgICAgIHRoaXMuaiA9IFF0KFsgXCJhbGlnbm1lbnQtYmFzZWxpbmVcIiwgXCJiYXNlbGluZS1zaGlmdFwiLCBcImNsaXAtcGF0aFwiLCBcImNsaXAtcnVsZVwiLCBcImNsaXBcIiwgXCJjb2xvci1pbnRlcnBvbGF0aW9uLWZpbHRlcnNcIiwgXCJjb2xvci1pbnRlcnBvbGF0aW9uXCIsIFwiY29sb3ItcHJvZmlsZVwiLCBcImNvbG9yLXJlbmRlcmluZ1wiLCBcImNvbG9yXCIsIFwiY3Vyc29yXCIsIFwiZGlyZWN0aW9uXCIsIFwiZGlzcGxheVwiLCBcImRvbWluYW50LWJhc2VsaW5lXCIsIFwiZW5hYmxlLWJhY2tncm91bmRcIiwgXCJmaWxsLW9wYWNpdHlcIiwgXCJmaWxsLXJ1bGVcIiwgXCJmaWxsXCIsIFwiZmlsdGVyXCIsIFwiZmxvb2QtY29sb3JcIiwgXCJmbG9vZC1vcGFjaXR5XCIsIFwiZm9udC1mYW1pbHlcIiwgXCJmb250LXNpemUtYWRqdXN0XCIsIFwiZm9udC1zaXplXCIsIFwiZm9udC1zdHJldGNoXCIsIFwiZm9udC1zdHlsZVwiLCBcImZvbnQtdmFyaWFudFwiLCBcImZvbnQtd2VpZ2h0XCIsIFwiZ2x5cGgtb3JpZW50YXRpb24taG9yaXpvbnRhbFwiLCBcImdseXBoLW9yaWVudGF0aW9uLXZlcnRpY2FsXCIsIFwiaW1hZ2UtcmVuZGVyaW5nXCIsIFwia2VybmluZ1wiLCBcImxldHRlci1zcGFjaW5nXCIsIFwibGlnaHRpbmctY29sb3JcIiwgXCJtYXJrZXItZW5kXCIsIFwibWFya2VyLW1pZFwiLCBcIm1hcmtlci1zdGFydFwiLCBcIm1hc2tcIiwgXCJvcGFjaXR5XCIsIFwib3ZlcmZsb3dcIiwgXCJwb2ludGVyLWV2ZW50c1wiLCBcInNoYXBlLXJlbmRlcmluZ1wiLCBcInN0b3AtY29sb3JcIiwgXCJzdG9wLW9wYWNpdHlcIiwgXCJzdHJva2UtZGFzaGFycmF5XCIsIFwic3Ryb2tlLWRhc2hvZmZzZXRcIiwgXCJzdHJva2UtbGluZWNhcFwiLCBcInN0cm9rZS1saW5lam9pblwiLCBcInN0cm9rZS1taXRlcmxpbWl0XCIsIFwic3Ryb2tlLW9wYWNpdHlcIiwgXCJzdHJva2Utd2lkdGhcIiwgXCJzdHJva2VcIiwgXCJ0ZXh0LWFuY2hvclwiLCBcInRleHQtZGVjb3JhdGlvblwiLCBcInRleHQtcmVuZGVyaW5nXCIsIFwidW5pY29kZS1iaWRpXCIsIFwidmlzaWJpbGl0eVwiLCBcIndvcmQtc3BhY2luZ1wiLCBcIndyaXRpbmctbW9kZVwiIF0pO1xuICAgICAgICB0aGlzLlNWR0VsZW1lbnQgPSB0Lmdsb2JhbFRoaXMuU1ZHRWxlbWVudDtcbiAgICAgICAgY29uc3QgZSA9IHQuZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgICAgZS5pbm5lckhUTUwgPSBcIjxzdmc+PGFsdEdseXBoIC8+PC9zdmc+XCI7XG4gICAgICAgIGlmIChcImFsdGdseXBoXCIgPT09IGUuZmlyc3RFbGVtZW50Q2hpbGQubm9kZU5hbWUpIHtcbiAgICAgICAgICAgIGNvbnN0IHQgPSB0aGlzLlY7XG4gICAgICAgICAgICBsZXQgZSA9IHQuYWx0R2x5cGg7XG4gICAgICAgICAgICB0LmFsdEdseXBoID0gdC5hbHRnbHlwaDtcbiAgICAgICAgICAgIHQuYWx0Z2x5cGggPSBlO1xuICAgICAgICAgICAgZSA9IHQuYWx0R2x5cGhEZWY7XG4gICAgICAgICAgICB0LmFsdEdseXBoRGVmID0gdC5hbHRnbHlwaGRlZjtcbiAgICAgICAgICAgIHQuYWx0Z2x5cGhkZWYgPSBlO1xuICAgICAgICAgICAgZSA9IHQuYWx0R2x5cGhJdGVtO1xuICAgICAgICAgICAgdC5hbHRHbHlwaEl0ZW0gPSB0LmFsdGdseXBoaXRlbTtcbiAgICAgICAgICAgIHQuYWx0Z2x5cGhpdGVtID0gZTtcbiAgICAgICAgICAgIGUgPSB0LmdseXBoUmVmO1xuICAgICAgICAgICAgdC5nbHlwaFJlZiA9IHQuZ2x5cGhyZWY7XG4gICAgICAgICAgICB0LmdseXBocmVmID0gZTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBzdGF0aWMgcmVnaXN0ZXIodCkge1xuICAgICAgICByZXR1cm4gYy5zaW5nbGV0b24oWXQsIHRoaXMpLnJlZ2lzdGVyKHQpO1xuICAgIH1cbiAgICBpc1N0YW5kYXJkU3ZnQXR0cmlidXRlKHQsIGUpIHtcbiAgICAgICAgdmFyIGk7XG4gICAgICAgIGlmICghKHQgaW5zdGFuY2VvZiB0aGlzLlNWR0VsZW1lbnQpKSByZXR1cm4gZmFsc2U7XG4gICAgICAgIHJldHVybiB0cnVlID09PSB0aGlzLl9bdC5ub2RlTmFtZV0gJiYgdHJ1ZSA9PT0gdGhpcy5qW2VdIHx8IHRydWUgPT09IChudWxsID09PSAoaSA9IHRoaXMuVlt0Lm5vZGVOYW1lXSkgfHwgdm9pZCAwID09PSBpID8gdm9pZCAwIDogaVtlXSk7XG4gICAgfVxufVxuXG5TVkdBbmFseXplci5pbmplY3QgPSBbIEt0IF07XG5cbmNvbnN0IFp0ID0gbC5jcmVhdGVJbnRlcmZhY2UoXCJJQXR0ck1hcHBlclwiLCAodCA9PiB0LnNpbmdsZXRvbihBdHRyTWFwcGVyKSkpO1xuXG5jbGFzcyBBdHRyTWFwcGVyIHtcbiAgICBjb25zdHJ1Y3Rvcih0KSB7XG4gICAgICAgIHRoaXMuc3ZnID0gdDtcbiAgICAgICAgdGhpcy5mbnMgPSBbXTtcbiAgICAgICAgdGhpcy5OID0gd3QoKTtcbiAgICAgICAgdGhpcy5XID0gd3QoKTtcbiAgICAgICAgdGhpcy51c2VNYXBwaW5nKHtcbiAgICAgICAgICAgIExBQkVMOiB7XG4gICAgICAgICAgICAgICAgZm9yOiBcImh0bWxGb3JcIlxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIElNRzoge1xuICAgICAgICAgICAgICAgIHVzZW1hcDogXCJ1c2VNYXBcIlxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIElOUFVUOiB7XG4gICAgICAgICAgICAgICAgbWF4bGVuZ3RoOiBcIm1heExlbmd0aFwiLFxuICAgICAgICAgICAgICAgIG1pbmxlbmd0aDogXCJtaW5MZW5ndGhcIixcbiAgICAgICAgICAgICAgICBmb3JtYWN0aW9uOiBcImZvcm1BY3Rpb25cIixcbiAgICAgICAgICAgICAgICBmb3JtZW5jdHlwZTogXCJmb3JtRW5jVHlwZVwiLFxuICAgICAgICAgICAgICAgIGZvcm1tZXRob2Q6IFwiZm9ybU1ldGhvZFwiLFxuICAgICAgICAgICAgICAgIGZvcm1ub3ZhbGlkYXRlOiBcImZvcm1Ob1ZhbGlkYXRlXCIsXG4gICAgICAgICAgICAgICAgZm9ybXRhcmdldDogXCJmb3JtVGFyZ2V0XCIsXG4gICAgICAgICAgICAgICAgaW5wdXRtb2RlOiBcImlucHV0TW9kZVwiXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgVEVYVEFSRUE6IHtcbiAgICAgICAgICAgICAgICBtYXhsZW5ndGg6IFwibWF4TGVuZ3RoXCJcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBURDoge1xuICAgICAgICAgICAgICAgIHJvd3NwYW46IFwicm93U3BhblwiLFxuICAgICAgICAgICAgICAgIGNvbHNwYW46IFwiY29sU3BhblwiXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgVEg6IHtcbiAgICAgICAgICAgICAgICByb3dzcGFuOiBcInJvd1NwYW5cIixcbiAgICAgICAgICAgICAgICBjb2xzcGFuOiBcImNvbFNwYW5cIlxuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy51c2VHbG9iYWxNYXBwaW5nKHtcbiAgICAgICAgICAgIGFjY2Vzc2tleTogXCJhY2Nlc3NLZXlcIixcbiAgICAgICAgICAgIGNvbnRlbnRlZGl0YWJsZTogXCJjb250ZW50RWRpdGFibGVcIixcbiAgICAgICAgICAgIHRhYmluZGV4OiBcInRhYkluZGV4XCIsXG4gICAgICAgICAgICB0ZXh0Y29udGVudDogXCJ0ZXh0Q29udGVudFwiLFxuICAgICAgICAgICAgaW5uZXJodG1sOiBcImlubmVySFRNTFwiLFxuICAgICAgICAgICAgc2Nyb2xsdG9wOiBcInNjcm9sbFRvcFwiLFxuICAgICAgICAgICAgc2Nyb2xsbGVmdDogXCJzY3JvbGxMZWZ0XCIsXG4gICAgICAgICAgICByZWFkb25seTogXCJyZWFkT25seVwiXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBzdGF0aWMgZ2V0IGluamVjdCgpIHtcbiAgICAgICAgcmV0dXJuIFsgWXQgXTtcbiAgICB9XG4gICAgdXNlTWFwcGluZyh0KSB7XG4gICAgICAgIHZhciBlO1xuICAgICAgICB2YXIgaTtcbiAgICAgICAgbGV0IHM7XG4gICAgICAgIGxldCBuO1xuICAgICAgICBsZXQgcjtcbiAgICAgICAgbGV0IG87XG4gICAgICAgIGZvciAociBpbiB0KSB7XG4gICAgICAgICAgICBzID0gdFtyXTtcbiAgICAgICAgICAgIG4gPSBudWxsICE9PSAoZSA9IChpID0gdGhpcy5OKVtyXSkgJiYgdm9pZCAwICE9PSBlID8gZSA6IGlbcl0gPSB3dCgpO1xuICAgICAgICAgICAgZm9yIChvIGluIHMpIHtcbiAgICAgICAgICAgICAgICBpZiAodm9pZCAwICE9PSBuW29dKSB0aHJvdyB0ZShvLCByKTtcbiAgICAgICAgICAgICAgICBuW29dID0gc1tvXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICB1c2VHbG9iYWxNYXBwaW5nKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IHRoaXMuVztcbiAgICAgICAgZm9yIChjb25zdCBpIGluIHQpIHtcbiAgICAgICAgICAgIGlmICh2b2lkIDAgIT09IGVbaV0pIHRocm93IHRlKGksIFwiKlwiKTtcbiAgICAgICAgICAgIGVbaV0gPSB0W2ldO1xuICAgICAgICB9XG4gICAgfVxuICAgIHVzZVR3b1dheSh0KSB7XG4gICAgICAgIHRoaXMuZm5zLnB1c2godCk7XG4gICAgfVxuICAgIGlzVHdvV2F5KHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIEp0KHQsIGUpIHx8IHRoaXMuZm5zLmxlbmd0aCA+IDAgJiYgdGhpcy5mbnMuc29tZSgoaSA9PiBpKHQsIGUpKSk7XG4gICAgfVxuICAgIG1hcCh0LCBlKSB7XG4gICAgICAgIHZhciBpLCBzLCBuO1xuICAgICAgICByZXR1cm4gbnVsbCAhPT0gKG4gPSBudWxsICE9PSAocyA9IG51bGwgPT09IChpID0gdGhpcy5OW3Qubm9kZU5hbWVdKSB8fCB2b2lkIDAgPT09IGkgPyB2b2lkIDAgOiBpW2VdKSAmJiB2b2lkIDAgIT09IHMgPyBzIDogdGhpcy5XW2VdKSAmJiB2b2lkIDAgIT09IG4gPyBuIDogeXQodCwgZSwgdGhpcy5zdmcpID8gZSA6IG51bGw7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBKdCh0LCBlKSB7XG4gICAgc3dpdGNoICh0Lm5vZGVOYW1lKSB7XG4gICAgICBjYXNlIFwiSU5QVVRcIjpcbiAgICAgICAgc3dpdGNoICh0LnR5cGUpIHtcbiAgICAgICAgICBjYXNlIFwiY2hlY2tib3hcIjpcbiAgICAgICAgICBjYXNlIFwicmFkaW9cIjpcbiAgICAgICAgICAgIHJldHVybiBcImNoZWNrZWRcIiA9PT0gZTtcblxuICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICByZXR1cm4gXCJ2YWx1ZVwiID09PSBlIHx8IFwiZmlsZXNcIiA9PT0gZSB8fCBcInZhbHVlLWFzLW51bWJlclwiID09PSBlIHx8IFwidmFsdWUtYXMtZGF0ZVwiID09PSBlO1xuICAgICAgICB9XG5cbiAgICAgIGNhc2UgXCJURVhUQVJFQVwiOlxuICAgICAgY2FzZSBcIlNFTEVDVFwiOlxuICAgICAgICByZXR1cm4gXCJ2YWx1ZVwiID09PSBlO1xuXG4gICAgICBkZWZhdWx0OlxuICAgICAgICBzd2l0Y2ggKGUpIHtcbiAgICAgICAgICBjYXNlIFwidGV4dGNvbnRlbnRcIjpcbiAgICAgICAgICBjYXNlIFwiaW5uZXJodG1sXCI6XG4gICAgICAgICAgICByZXR1cm4gdC5oYXNBdHRyaWJ1dGUoXCJjb250ZW50ZWRpdGFibGVcIik7XG5cbiAgICAgICAgICBjYXNlIFwic2Nyb2xsdG9wXCI6XG4gICAgICAgICAgY2FzZSBcInNjcm9sbGxlZnRcIjpcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuXG4gICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgIH1cbn1cblxuZnVuY3Rpb24gdGUodCwgZSkge1xuICAgIHJldHVybiBuZXcgRXJyb3IoYEF0dHJpYnV0ZSAke3R9IGhhcyBiZWVuIGFscmVhZHkgcmVnaXN0ZXJlZCBmb3IgJHtcIipcIiA9PT0gZSA/IFwiYWxsIGVsZW1lbnRzXCIgOiBgPCR7ZX0vPmB9YCk7XG59XG5cbmNsYXNzIENhbGxCaW5kaW5nIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlLCBpLCBzLCBuKSB7XG4gICAgICAgIHRoaXMuc291cmNlRXhwcmVzc2lvbiA9IHQ7XG4gICAgICAgIHRoaXMudGFyZ2V0ID0gZTtcbiAgICAgICAgdGhpcy50YXJnZXRQcm9wZXJ0eSA9IGk7XG4gICAgICAgIHRoaXMubG9jYXRvciA9IG47XG4gICAgICAgIHRoaXMuaW50ZXJjZXB0b3IgPSB0aGlzO1xuICAgICAgICB0aGlzLmlzQm91bmQgPSBmYWxzZTtcbiAgICAgICAgdGhpcy50YXJnZXRPYnNlcnZlciA9IHMuZ2V0QWNjZXNzb3IoZSwgaSk7XG4gICAgfVxuICAgIGNhbGxTb3VyY2UodCkge1xuICAgICAgICBjb25zdCBlID0gdGhpcy4kc2NvcGUub3ZlcnJpZGVDb250ZXh0O1xuICAgICAgICBlLiRldmVudCA9IHQ7XG4gICAgICAgIGNvbnN0IGkgPSB0aGlzLnNvdXJjZUV4cHJlc3Npb24uZXZhbHVhdGUoOCwgdGhpcy4kc2NvcGUsIHRoaXMubG9jYXRvciwgbnVsbCk7XG4gICAgICAgIFJlZmxlY3QuZGVsZXRlUHJvcGVydHkoZSwgXCIkZXZlbnRcIik7XG4gICAgICAgIHJldHVybiBpO1xuICAgIH1cbiAgICAkYmluZCh0LCBlKSB7XG4gICAgICAgIGlmICh0aGlzLmlzQm91bmQpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLiRzY29wZSA9PT0gZSkgcmV0dXJuO1xuICAgICAgICAgICAgdGhpcy5pbnRlcmNlcHRvci4kdW5iaW5kKDIgfCB0KTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLiRzY29wZSA9IGU7XG4gICAgICAgIGlmICh0aGlzLnNvdXJjZUV4cHJlc3Npb24uaGFzQmluZCkgdGhpcy5zb3VyY2VFeHByZXNzaW9uLmJpbmQodCwgZSwgdGhpcy5pbnRlcmNlcHRvcik7XG4gICAgICAgIHRoaXMudGFyZ2V0T2JzZXJ2ZXIuc2V0VmFsdWUoKHQgPT4gdGhpcy5pbnRlcmNlcHRvci5jYWxsU291cmNlKHQpKSwgdCwgdGhpcy50YXJnZXQsIHRoaXMudGFyZ2V0UHJvcGVydHkpO1xuICAgICAgICB0aGlzLmlzQm91bmQgPSB0cnVlO1xuICAgIH1cbiAgICAkdW5iaW5kKHQpIHtcbiAgICAgICAgaWYgKCF0aGlzLmlzQm91bmQpIHJldHVybjtcbiAgICAgICAgaWYgKHRoaXMuc291cmNlRXhwcmVzc2lvbi5oYXNVbmJpbmQpIHRoaXMuc291cmNlRXhwcmVzc2lvbi51bmJpbmQodCwgdGhpcy4kc2NvcGUsIHRoaXMuaW50ZXJjZXB0b3IpO1xuICAgICAgICB0aGlzLiRzY29wZSA9IHZvaWQgMDtcbiAgICAgICAgdGhpcy50YXJnZXRPYnNlcnZlci5zZXRWYWx1ZShudWxsLCB0LCB0aGlzLnRhcmdldCwgdGhpcy50YXJnZXRQcm9wZXJ0eSk7XG4gICAgICAgIHRoaXMuaXNCb3VuZCA9IGZhbHNlO1xuICAgIH1cbiAgICBvYnNlcnZlKHQsIGUpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBoYW5kbGVDaGFuZ2UodCwgZSwgaSkge1xuICAgICAgICByZXR1cm47XG4gICAgfVxufVxuXG5jbGFzcyBBdHRyaWJ1dGVPYnNlcnZlciB7XG4gICAgY29uc3RydWN0b3IodCwgZSwgaSkge1xuICAgICAgICB0aGlzLnR5cGUgPSAyIHwgMSB8IDQ7XG4gICAgICAgIHRoaXMudiA9IG51bGw7XG4gICAgICAgIHRoaXMub3YgPSBudWxsO1xuICAgICAgICB0aGlzLkggPSBmYWxzZTtcbiAgICAgICAgdGhpcy5mID0gMDtcbiAgICAgICAgdGhpcy5vID0gdDtcbiAgICAgICAgdGhpcy5HID0gZTtcbiAgICAgICAgdGhpcy5YID0gaTtcbiAgICB9XG4gICAgZ2V0VmFsdWUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnY7XG4gICAgfVxuICAgIHNldFZhbHVlKHQsIGUpIHtcbiAgICAgICAgdGhpcy52ID0gdDtcbiAgICAgICAgdGhpcy5IID0gdCAhPT0gdGhpcy5vdjtcbiAgICAgICAgaWYgKDAgPT09ICgyNTYgJiBlKSkgdGhpcy5LKCk7XG4gICAgfVxuICAgIEsoKSB7XG4gICAgICAgIGlmICh0aGlzLkgpIHtcbiAgICAgICAgICAgIHRoaXMuSCA9IGZhbHNlO1xuICAgICAgICAgICAgdGhpcy5vdiA9IHRoaXMudjtcbiAgICAgICAgICAgIHN3aXRjaCAodGhpcy5YKSB7XG4gICAgICAgICAgICAgIGNhc2UgXCJjbGFzc1wiOlxuICAgICAgICAgICAgICAgIHRoaXMuby5jbGFzc0xpc3QudG9nZ2xlKHRoaXMuRywgISF0aGlzLnYpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICAgIGNhc2UgXCJzdHlsZVwiOlxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgbGV0IHQgPSBcIlwiO1xuICAgICAgICAgICAgICAgICAgICBsZXQgZSA9IHRoaXMudjtcbiAgICAgICAgICAgICAgICAgICAgaWYgKEF0KGUpICYmIGUuaW5jbHVkZXMoXCIhaW1wb3J0YW50XCIpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0ID0gXCJpbXBvcnRhbnRcIjtcbiAgICAgICAgICAgICAgICAgICAgICAgIGUgPSBlLnJlcGxhY2UoXCIhaW1wb3J0YW50XCIsIFwiXCIpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuby5zdHlsZS5zZXRQcm9wZXJ0eSh0aGlzLkcsIGUsIHQpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICBpZiAobnVsbCA9PSB0aGlzLnYpIHRoaXMuby5yZW1vdmVBdHRyaWJ1dGUodGhpcy5YKTsgZWxzZSB0aGlzLm8uc2V0QXR0cmlidXRlKHRoaXMuWCwgU3RyaW5nKHRoaXMudikpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIGhhbmRsZU11dGF0aW9uKHQpIHtcbiAgICAgICAgbGV0IGUgPSBmYWxzZTtcbiAgICAgICAgZm9yIChsZXQgaSA9IDAsIHMgPSB0Lmxlbmd0aDsgcyA+IGk7ICsraSkge1xuICAgICAgICAgICAgY29uc3QgcyA9IHRbaV07XG4gICAgICAgICAgICBpZiAoXCJhdHRyaWJ1dGVzXCIgPT09IHMudHlwZSAmJiBzLmF0dHJpYnV0ZU5hbWUgPT09IHRoaXMuRykge1xuICAgICAgICAgICAgICAgIGUgPSB0cnVlO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChlKSB7XG4gICAgICAgICAgICBsZXQgdDtcbiAgICAgICAgICAgIHN3aXRjaCAodGhpcy5YKSB7XG4gICAgICAgICAgICAgIGNhc2UgXCJjbGFzc1wiOlxuICAgICAgICAgICAgICAgIHQgPSB0aGlzLm8uY2xhc3NMaXN0LmNvbnRhaW5zKHRoaXMuRyk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgICAgY2FzZSBcInN0eWxlXCI6XG4gICAgICAgICAgICAgICAgdCA9IHRoaXMuby5zdHlsZS5nZXRQcm9wZXJ0eVZhbHVlKHRoaXMuRyk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEFVUjA2NTE6JHt0aGlzLlh9YCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodCAhPT0gdGhpcy52KSB7XG4gICAgICAgICAgICAgICAgdGhpcy5vdiA9IHRoaXMudjtcbiAgICAgICAgICAgICAgICB0aGlzLnYgPSB0O1xuICAgICAgICAgICAgICAgIHRoaXMuSCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIHRoaXMuZiA9IDA7XG4gICAgICAgICAgICAgICAgdGhpcy5xdWV1ZS5hZGQodGhpcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgc3Vic2NyaWJlKHQpIHtcbiAgICAgICAgaWYgKHRoaXMuc3Vicy5hZGQodCkgJiYgMSA9PT0gdGhpcy5zdWJzLmNvdW50KSB7XG4gICAgICAgICAgICB0aGlzLnYgPSB0aGlzLm92ID0gdGhpcy5vLmdldEF0dHJpYnV0ZSh0aGlzLkcpO1xuICAgICAgICAgICAgZWUodGhpcy5vLm93bmVyRG9jdW1lbnQuZGVmYXVsdFZpZXcuTXV0YXRpb25PYnNlcnZlciwgdGhpcy5vLCB0aGlzKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICB1bnN1YnNjcmliZSh0KSB7XG4gICAgICAgIGlmICh0aGlzLnN1YnMucmVtb3ZlKHQpICYmIDAgPT09IHRoaXMuc3Vicy5jb3VudCkgaWUodGhpcy5vLCB0aGlzKTtcbiAgICB9XG4gICAgZmx1c2goKSB7XG4gICAgICAgIHJlID0gdGhpcy5vdjtcbiAgICAgICAgdGhpcy5vdiA9IHRoaXMudjtcbiAgICAgICAgdGhpcy5zdWJzLm5vdGlmeSh0aGlzLnYsIHJlLCB0aGlzLmYpO1xuICAgIH1cbn1cblxuUChBdHRyaWJ1dGVPYnNlcnZlcik7XG5cbk8oQXR0cmlidXRlT2JzZXJ2ZXIpO1xuXG5jb25zdCBlZSA9ICh0LCBlLCBpKSA9PiB7XG4gICAgaWYgKHZvaWQgMCA9PT0gZS4kZU1PYnMpIGUuJGVNT2JzID0gbmV3IFNldDtcbiAgICBpZiAodm9pZCAwID09PSBlLiRtT2JzKSAoZS4kbU9icyA9IG5ldyB0KHNlKSkub2JzZXJ2ZShlLCB7XG4gICAgICAgIGF0dHJpYnV0ZXM6IHRydWVcbiAgICB9KTtcbiAgICBlLiRlTU9icy5hZGQoaSk7XG59O1xuXG5jb25zdCBpZSA9ICh0LCBlKSA9PiB7XG4gICAgY29uc3QgaSA9IHQuJGVNT2JzO1xuICAgIGlmIChpICYmIGkuZGVsZXRlKGUpKSB7XG4gICAgICAgIGlmICgwID09PSBpLnNpemUpIHtcbiAgICAgICAgICAgIHQuJG1PYnMuZGlzY29ubmVjdCgpO1xuICAgICAgICAgICAgdC4kbU9icyA9IHZvaWQgMDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xufTtcblxuY29uc3Qgc2UgPSB0ID0+IHtcbiAgICB0WzBdLnRhcmdldC4kZU1PYnMuZm9yRWFjaChuZSwgdCk7XG59O1xuXG5mdW5jdGlvbiBuZSh0KSB7XG4gICAgdC5oYW5kbGVNdXRhdGlvbih0aGlzKTtcbn1cblxubGV0IHJlO1xuXG5jbGFzcyBCaW5kaW5nVGFyZ2V0U3Vic2NyaWJlciB7XG4gICAgY29uc3RydWN0b3IodCkge1xuICAgICAgICB0aGlzLmIgPSB0O1xuICAgIH1cbiAgICBoYW5kbGVDaGFuZ2UodCwgZSwgaSkge1xuICAgICAgICBjb25zdCBzID0gdGhpcy5iO1xuICAgICAgICBpZiAodCAhPT0gcy5zb3VyY2VFeHByZXNzaW9uLmV2YWx1YXRlKGksIHMuJHNjb3BlLCBzLmxvY2F0b3IsIG51bGwpKSBzLnVwZGF0ZVNvdXJjZSh0LCBpKTtcbiAgICB9XG59XG5cbmNvbnN0IHtvbmVUaW1lOiBvZSwgdG9WaWV3OiBsZSwgZnJvbVZpZXc6IGhlfSA9IEQ7XG5cbmNvbnN0IGFlID0gbGUgfCBvZTtcblxuY29uc3QgY2UgPSB7XG4gICAgcmV1c2FibGU6IGZhbHNlLFxuICAgIHByZWVtcHQ6IHRydWVcbn07XG5cbmNsYXNzIEF0dHJpYnV0ZUJpbmRpbmcge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUsIGksIHMsIG4sIHIsIG8pIHtcbiAgICAgICAgdGhpcy5zb3VyY2VFeHByZXNzaW9uID0gdDtcbiAgICAgICAgdGhpcy50YXJnZXRBdHRyaWJ1dGUgPSBpO1xuICAgICAgICB0aGlzLnRhcmdldFByb3BlcnR5ID0gcztcbiAgICAgICAgdGhpcy5tb2RlID0gbjtcbiAgICAgICAgdGhpcy5sb2NhdG9yID0gbztcbiAgICAgICAgdGhpcy5pbnRlcmNlcHRvciA9IHRoaXM7XG4gICAgICAgIHRoaXMuaXNCb3VuZCA9IGZhbHNlO1xuICAgICAgICB0aGlzLiRzY29wZSA9IG51bGw7XG4gICAgICAgIHRoaXMudGFzayA9IG51bGw7XG4gICAgICAgIHRoaXMudGFyZ2V0U3Vic2NyaWJlciA9IG51bGw7XG4gICAgICAgIHRoaXMucGVyc2lzdGVudEZsYWdzID0gMDtcbiAgICAgICAgdGhpcy52YWx1ZSA9IHZvaWQgMDtcbiAgICAgICAgdGhpcy50YXJnZXQgPSBlO1xuICAgICAgICB0aGlzLnAgPSBvLmdldChLdCk7XG4gICAgICAgIHRoaXMub0wgPSByO1xuICAgIH1cbiAgICB1cGRhdGVUYXJnZXQodCwgZSkge1xuICAgICAgICBlIHw9IHRoaXMucGVyc2lzdGVudEZsYWdzO1xuICAgICAgICB0aGlzLnRhcmdldE9ic2VydmVyLnNldFZhbHVlKHQsIGUsIHRoaXMudGFyZ2V0LCB0aGlzLnRhcmdldFByb3BlcnR5KTtcbiAgICB9XG4gICAgdXBkYXRlU291cmNlKHQsIGUpIHtcbiAgICAgICAgZSB8PSB0aGlzLnBlcnNpc3RlbnRGbGFncztcbiAgICAgICAgdGhpcy5zb3VyY2VFeHByZXNzaW9uLmFzc2lnbihlLCB0aGlzLiRzY29wZSwgdGhpcy5sb2NhdG9yLCB0KTtcbiAgICB9XG4gICAgaGFuZGxlQ2hhbmdlKHQsIGUsIGkpIHtcbiAgICAgICAgaWYgKCF0aGlzLmlzQm91bmQpIHJldHVybjtcbiAgICAgICAgaSB8PSB0aGlzLnBlcnNpc3RlbnRGbGFncztcbiAgICAgICAgY29uc3QgcyA9IHRoaXMubW9kZTtcbiAgICAgICAgY29uc3QgbiA9IHRoaXMuaW50ZXJjZXB0b3I7XG4gICAgICAgIGNvbnN0IHIgPSB0aGlzLnNvdXJjZUV4cHJlc3Npb247XG4gICAgICAgIGNvbnN0IG8gPSB0aGlzLiRzY29wZTtcbiAgICAgICAgY29uc3QgbCA9IHRoaXMubG9jYXRvcjtcbiAgICAgICAgY29uc3QgaCA9IHRoaXMudGFyZ2V0T2JzZXJ2ZXI7XG4gICAgICAgIGNvbnN0IGEgPSAwID09PSAoMiAmIGkpICYmICg0ICYgaC50eXBlKSA+IDA7XG4gICAgICAgIGxldCBjID0gZmFsc2U7XG4gICAgICAgIGxldCB1O1xuICAgICAgICBpZiAoMTAwODIgIT09IHIuJGtpbmQgfHwgdGhpcy5vYnMuY291bnQgPiAxKSB7XG4gICAgICAgICAgICBjID0gMCA9PT0gKHMgJiBvZSk7XG4gICAgICAgICAgICBpZiAoYykgdGhpcy5vYnMudmVyc2lvbisrO1xuICAgICAgICAgICAgdCA9IHIuZXZhbHVhdGUoaSwgbywgbCwgbik7XG4gICAgICAgICAgICBpZiAoYykgdGhpcy5vYnMuY2xlYXIoKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodCAhPT0gdGhpcy52YWx1ZSkge1xuICAgICAgICAgICAgdGhpcy52YWx1ZSA9IHQ7XG4gICAgICAgICAgICBpZiAoYSkge1xuICAgICAgICAgICAgICAgIHUgPSB0aGlzLnRhc2s7XG4gICAgICAgICAgICAgICAgdGhpcy50YXNrID0gdGhpcy5wLmRvbVdyaXRlUXVldWUucXVldWVUYXNrKCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudGFzayA9IG51bGw7XG4gICAgICAgICAgICAgICAgICAgIG4udXBkYXRlVGFyZ2V0KHQsIGkpO1xuICAgICAgICAgICAgICAgIH0pLCBjZSk7XG4gICAgICAgICAgICAgICAgbnVsbCA9PT0gdSB8fCB2b2lkIDAgPT09IHUgPyB2b2lkIDAgOiB1LmNhbmNlbCgpO1xuICAgICAgICAgICAgfSBlbHNlIG4udXBkYXRlVGFyZ2V0KHQsIGkpO1xuICAgICAgICB9XG4gICAgfVxuICAgICRiaW5kKHQsIGUpIHtcbiAgICAgICAgdmFyIGk7XG4gICAgICAgIGlmICh0aGlzLmlzQm91bmQpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLiRzY29wZSA9PT0gZSkgcmV0dXJuO1xuICAgICAgICAgICAgdGhpcy5pbnRlcmNlcHRvci4kdW5iaW5kKDIgfCB0KTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnBlcnNpc3RlbnRGbGFncyA9IDk2MSAmIHQ7XG4gICAgICAgIHRoaXMuJHNjb3BlID0gZTtcbiAgICAgICAgbGV0IHMgPSB0aGlzLnNvdXJjZUV4cHJlc3Npb247XG4gICAgICAgIGlmIChzLmhhc0JpbmQpIHMuYmluZCh0LCBlLCB0aGlzLmludGVyY2VwdG9yKTtcbiAgICAgICAgbGV0IG4gPSB0aGlzLnRhcmdldE9ic2VydmVyO1xuICAgICAgICBpZiAoIW4pIG4gPSB0aGlzLnRhcmdldE9ic2VydmVyID0gbmV3IEF0dHJpYnV0ZU9ic2VydmVyKHRoaXMudGFyZ2V0LCB0aGlzLnRhcmdldFByb3BlcnR5LCB0aGlzLnRhcmdldEF0dHJpYnV0ZSk7XG4gICAgICAgIHMgPSB0aGlzLnNvdXJjZUV4cHJlc3Npb247XG4gICAgICAgIGNvbnN0IHIgPSB0aGlzLm1vZGU7XG4gICAgICAgIGNvbnN0IG8gPSB0aGlzLmludGVyY2VwdG9yO1xuICAgICAgICBsZXQgbCA9IGZhbHNlO1xuICAgICAgICBpZiAociAmIGFlKSB7XG4gICAgICAgICAgICBsID0gKHIgJiBsZSkgPiAwO1xuICAgICAgICAgICAgby51cGRhdGVUYXJnZXQodGhpcy52YWx1ZSA9IHMuZXZhbHVhdGUodCwgZSwgdGhpcy5sb2NhdG9yLCBsID8gbyA6IG51bGwpLCB0KTtcbiAgICAgICAgfVxuICAgICAgICBpZiAociAmIGhlKSBuLnN1YnNjcmliZShudWxsICE9PSAoaSA9IHRoaXMudGFyZ2V0U3Vic2NyaWJlcikgJiYgdm9pZCAwICE9PSBpID8gaSA6IHRoaXMudGFyZ2V0U3Vic2NyaWJlciA9IG5ldyBCaW5kaW5nVGFyZ2V0U3Vic2NyaWJlcihvKSk7XG4gICAgICAgIHRoaXMuaXNCb3VuZCA9IHRydWU7XG4gICAgfVxuICAgICR1bmJpbmQodCkge1xuICAgICAgICB2YXIgZTtcbiAgICAgICAgaWYgKCF0aGlzLmlzQm91bmQpIHJldHVybjtcbiAgICAgICAgdGhpcy5wZXJzaXN0ZW50RmxhZ3MgPSAwO1xuICAgICAgICBpZiAodGhpcy5zb3VyY2VFeHByZXNzaW9uLmhhc1VuYmluZCkgdGhpcy5zb3VyY2VFeHByZXNzaW9uLnVuYmluZCh0LCB0aGlzLiRzY29wZSwgdGhpcy5pbnRlcmNlcHRvcik7XG4gICAgICAgIHRoaXMuJHNjb3BlID0gbnVsbDtcbiAgICAgICAgdGhpcy52YWx1ZSA9IHZvaWQgMDtcbiAgICAgICAgaWYgKHRoaXMudGFyZ2V0U3Vic2NyaWJlcikgdGhpcy50YXJnZXRPYnNlcnZlci51bnN1YnNjcmliZSh0aGlzLnRhcmdldFN1YnNjcmliZXIpO1xuICAgICAgICBudWxsID09PSAoZSA9IHRoaXMudGFzaykgfHwgdm9pZCAwID09PSBlID8gdm9pZCAwIDogZS5jYW5jZWwoKTtcbiAgICAgICAgdGhpcy50YXNrID0gbnVsbDtcbiAgICAgICAgdGhpcy5vYnMuY2xlYXJBbGwoKTtcbiAgICAgICAgdGhpcy5pc0JvdW5kID0gZmFsc2U7XG4gICAgfVxufVxuXG4kKEF0dHJpYnV0ZUJpbmRpbmcpO1xuXG5jb25zdCB7dG9WaWV3OiB1ZX0gPSBEO1xuXG5jb25zdCBmZSA9IHtcbiAgICByZXVzYWJsZTogZmFsc2UsXG4gICAgcHJlZW1wdDogdHJ1ZVxufTtcblxuY2xhc3MgSW50ZXJwb2xhdGlvbkJpbmRpbmcge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUsIGksIHMsIG4sIHIsIG8pIHtcbiAgICAgICAgdGhpcy5pbnRlcnBvbGF0aW9uID0gZTtcbiAgICAgICAgdGhpcy50YXJnZXQgPSBpO1xuICAgICAgICB0aGlzLnRhcmdldFByb3BlcnR5ID0gcztcbiAgICAgICAgdGhpcy5tb2RlID0gbjtcbiAgICAgICAgdGhpcy5sb2NhdG9yID0gcjtcbiAgICAgICAgdGhpcy50YXNrUXVldWUgPSBvO1xuICAgICAgICB0aGlzLmludGVyY2VwdG9yID0gdGhpcztcbiAgICAgICAgdGhpcy5pc0JvdW5kID0gZmFsc2U7XG4gICAgICAgIHRoaXMuJHNjb3BlID0gdm9pZCAwO1xuICAgICAgICB0aGlzLnRhc2sgPSBudWxsO1xuICAgICAgICB0aGlzLm9MID0gdDtcbiAgICAgICAgdGhpcy50YXJnZXRPYnNlcnZlciA9IHQuZ2V0QWNjZXNzb3IoaSwgcyk7XG4gICAgICAgIGNvbnN0IGwgPSBlLmV4cHJlc3Npb25zO1xuICAgICAgICBjb25zdCBoID0gdGhpcy5wYXJ0QmluZGluZ3MgPSBBcnJheShsLmxlbmd0aCk7XG4gICAgICAgIGNvbnN0IGEgPSBsLmxlbmd0aDtcbiAgICAgICAgbGV0IGMgPSAwO1xuICAgICAgICBmb3IgKDthID4gYzsgKytjKSBoW2NdID0gbmV3IEludGVycG9sYXRpb25QYXJ0QmluZGluZyhsW2NdLCBpLCBzLCByLCB0LCB0aGlzKTtcbiAgICB9XG4gICAgdXBkYXRlVGFyZ2V0KHQsIGUpIHtcbiAgICAgICAgY29uc3QgaSA9IHRoaXMucGFydEJpbmRpbmdzO1xuICAgICAgICBjb25zdCBzID0gdGhpcy5pbnRlcnBvbGF0aW9uLnBhcnRzO1xuICAgICAgICBjb25zdCBuID0gaS5sZW5ndGg7XG4gICAgICAgIGxldCByID0gXCJcIjtcbiAgICAgICAgbGV0IG8gPSAwO1xuICAgICAgICBpZiAoMSA9PT0gbikgciA9IHNbMF0gKyBpWzBdLnZhbHVlICsgc1sxXTsgZWxzZSB7XG4gICAgICAgICAgICByID0gc1swXTtcbiAgICAgICAgICAgIGZvciAoO24gPiBvOyArK28pIHIgKz0gaVtvXS52YWx1ZSArIHNbbyArIDFdO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGwgPSB0aGlzLnRhcmdldE9ic2VydmVyO1xuICAgICAgICBjb25zdCBoID0gMCA9PT0gKDIgJiBlKSAmJiAoNCAmIGwudHlwZSkgPiAwO1xuICAgICAgICBsZXQgYTtcbiAgICAgICAgaWYgKGgpIHtcbiAgICAgICAgICAgIGEgPSB0aGlzLnRhc2s7XG4gICAgICAgICAgICB0aGlzLnRhc2sgPSB0aGlzLnRhc2tRdWV1ZS5xdWV1ZVRhc2soKCgpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLnRhc2sgPSBudWxsO1xuICAgICAgICAgICAgICAgIGwuc2V0VmFsdWUociwgZSwgdGhpcy50YXJnZXQsIHRoaXMudGFyZ2V0UHJvcGVydHkpO1xuICAgICAgICAgICAgfSksIGZlKTtcbiAgICAgICAgICAgIG51bGwgPT09IGEgfHwgdm9pZCAwID09PSBhID8gdm9pZCAwIDogYS5jYW5jZWwoKTtcbiAgICAgICAgICAgIGEgPSBudWxsO1xuICAgICAgICB9IGVsc2UgbC5zZXRWYWx1ZShyLCBlLCB0aGlzLnRhcmdldCwgdGhpcy50YXJnZXRQcm9wZXJ0eSk7XG4gICAgfVxuICAgICRiaW5kKHQsIGUpIHtcbiAgICAgICAgaWYgKHRoaXMuaXNCb3VuZCkge1xuICAgICAgICAgICAgaWYgKHRoaXMuJHNjb3BlID09PSBlKSByZXR1cm47XG4gICAgICAgICAgICB0aGlzLmludGVyY2VwdG9yLiR1bmJpbmQodCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5pc0JvdW5kID0gdHJ1ZTtcbiAgICAgICAgdGhpcy4kc2NvcGUgPSBlO1xuICAgICAgICBjb25zdCBpID0gdGhpcy5wYXJ0QmluZGluZ3M7XG4gICAgICAgIGNvbnN0IHMgPSBpLmxlbmd0aDtcbiAgICAgICAgbGV0IG4gPSAwO1xuICAgICAgICBmb3IgKDtzID4gbjsgKytuKSBpW25dLiRiaW5kKHQsIGUpO1xuICAgICAgICB0aGlzLnVwZGF0ZVRhcmdldCh2b2lkIDAsIHQpO1xuICAgIH1cbiAgICAkdW5iaW5kKHQpIHtcbiAgICAgICAgdmFyIGU7XG4gICAgICAgIGlmICghdGhpcy5pc0JvdW5kKSByZXR1cm47XG4gICAgICAgIHRoaXMuaXNCb3VuZCA9IGZhbHNlO1xuICAgICAgICB0aGlzLiRzY29wZSA9IHZvaWQgMDtcbiAgICAgICAgY29uc3QgaSA9IHRoaXMucGFydEJpbmRpbmdzO1xuICAgICAgICBjb25zdCBzID0gaS5sZW5ndGg7XG4gICAgICAgIGxldCBuID0gMDtcbiAgICAgICAgZm9yICg7cyA+IG47ICsrbikgaVtuXS5pbnRlcmNlcHRvci4kdW5iaW5kKHQpO1xuICAgICAgICBudWxsID09PSAoZSA9IHRoaXMudGFzaykgfHwgdm9pZCAwID09PSBlID8gdm9pZCAwIDogZS5jYW5jZWwoKTtcbiAgICAgICAgdGhpcy50YXNrID0gbnVsbDtcbiAgICB9XG59XG5cbmNsYXNzIEludGVycG9sYXRpb25QYXJ0QmluZGluZyB7XG4gICAgY29uc3RydWN0b3IodCwgZSwgaSwgcywgbiwgcikge1xuICAgICAgICB0aGlzLnNvdXJjZUV4cHJlc3Npb24gPSB0O1xuICAgICAgICB0aGlzLnRhcmdldCA9IGU7XG4gICAgICAgIHRoaXMudGFyZ2V0UHJvcGVydHkgPSBpO1xuICAgICAgICB0aGlzLmxvY2F0b3IgPSBzO1xuICAgICAgICB0aGlzLm93bmVyID0gcjtcbiAgICAgICAgdGhpcy5pbnRlcmNlcHRvciA9IHRoaXM7XG4gICAgICAgIHRoaXMubW9kZSA9IEQudG9WaWV3O1xuICAgICAgICB0aGlzLnZhbHVlID0gXCJcIjtcbiAgICAgICAgdGhpcy50YXNrID0gbnVsbDtcbiAgICAgICAgdGhpcy5pc0JvdW5kID0gZmFsc2U7XG4gICAgICAgIHRoaXMub0wgPSBuO1xuICAgIH1cbiAgICBoYW5kbGVDaGFuZ2UodCwgZSwgaSkge1xuICAgICAgICBpZiAoIXRoaXMuaXNCb3VuZCkgcmV0dXJuO1xuICAgICAgICBjb25zdCBzID0gdGhpcy5zb3VyY2VFeHByZXNzaW9uO1xuICAgICAgICBjb25zdCBuID0gdGhpcy5vYnM7XG4gICAgICAgIGNvbnN0IHIgPSAxMDA4MiA9PT0gcy4ka2luZCAmJiAxID09PSBuLmNvdW50O1xuICAgICAgICBsZXQgbyA9IGZhbHNlO1xuICAgICAgICBpZiAoIXIpIHtcbiAgICAgICAgICAgIG8gPSAodGhpcy5tb2RlICYgdWUpID4gMDtcbiAgICAgICAgICAgIGlmIChvKSBuLnZlcnNpb24rKztcbiAgICAgICAgICAgIHQgPSBzLmV2YWx1YXRlKGksIHRoaXMuJHNjb3BlLCB0aGlzLmxvY2F0b3IsIG8gPyB0aGlzLmludGVyY2VwdG9yIDogbnVsbCk7XG4gICAgICAgICAgICBpZiAobykgbi5jbGVhcigpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0ICE9IHRoaXMudmFsdWUpIHtcbiAgICAgICAgICAgIHRoaXMudmFsdWUgPSB0O1xuICAgICAgICAgICAgaWYgKHQgaW5zdGFuY2VvZiBBcnJheSkgdGhpcy5vYnNlcnZlQ29sbGVjdGlvbih0KTtcbiAgICAgICAgICAgIHRoaXMub3duZXIudXBkYXRlVGFyZ2V0KHQsIGkpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGhhbmRsZUNvbGxlY3Rpb25DaGFuZ2UodCwgZSkge1xuICAgICAgICB0aGlzLm93bmVyLnVwZGF0ZVRhcmdldCh2b2lkIDAsIGUpO1xuICAgIH1cbiAgICAkYmluZCh0LCBlKSB7XG4gICAgICAgIGlmICh0aGlzLmlzQm91bmQpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLiRzY29wZSA9PT0gZSkgcmV0dXJuO1xuICAgICAgICAgICAgdGhpcy5pbnRlcmNlcHRvci4kdW5iaW5kKHQpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuaXNCb3VuZCA9IHRydWU7XG4gICAgICAgIHRoaXMuJHNjb3BlID0gZTtcbiAgICAgICAgaWYgKHRoaXMuc291cmNlRXhwcmVzc2lvbi5oYXNCaW5kKSB0aGlzLnNvdXJjZUV4cHJlc3Npb24uYmluZCh0LCBlLCB0aGlzLmludGVyY2VwdG9yKTtcbiAgICAgICAgdGhpcy52YWx1ZSA9IHRoaXMuc291cmNlRXhwcmVzc2lvbi5ldmFsdWF0ZSh0LCBlLCB0aGlzLmxvY2F0b3IsICh0aGlzLm1vZGUgJiB1ZSkgPiAwID8gdGhpcy5pbnRlcmNlcHRvciA6IG51bGwpO1xuICAgICAgICBpZiAodGhpcy52YWx1ZSBpbnN0YW5jZW9mIEFycmF5KSB0aGlzLm9ic2VydmVDb2xsZWN0aW9uKHRoaXMudmFsdWUpO1xuICAgIH1cbiAgICAkdW5iaW5kKHQpIHtcbiAgICAgICAgaWYgKCF0aGlzLmlzQm91bmQpIHJldHVybjtcbiAgICAgICAgdGhpcy5pc0JvdW5kID0gZmFsc2U7XG4gICAgICAgIGlmICh0aGlzLnNvdXJjZUV4cHJlc3Npb24uaGFzVW5iaW5kKSB0aGlzLnNvdXJjZUV4cHJlc3Npb24udW5iaW5kKHQsIHRoaXMuJHNjb3BlLCB0aGlzLmludGVyY2VwdG9yKTtcbiAgICAgICAgdGhpcy4kc2NvcGUgPSB2b2lkIDA7XG4gICAgICAgIHRoaXMub2JzLmNsZWFyQWxsKCk7XG4gICAgfVxufVxuXG4kKEludGVycG9sYXRpb25QYXJ0QmluZGluZyk7XG5cbmNsYXNzIENvbnRlbnRCaW5kaW5nIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlLCBpLCBzLCBuLCByKSB7XG4gICAgICAgIHRoaXMuc291cmNlRXhwcmVzc2lvbiA9IHQ7XG4gICAgICAgIHRoaXMudGFyZ2V0ID0gZTtcbiAgICAgICAgdGhpcy5sb2NhdG9yID0gaTtcbiAgICAgICAgdGhpcy5wID0gbjtcbiAgICAgICAgdGhpcy5zdHJpY3QgPSByO1xuICAgICAgICB0aGlzLmludGVyY2VwdG9yID0gdGhpcztcbiAgICAgICAgdGhpcy5tb2RlID0gRC50b1ZpZXc7XG4gICAgICAgIHRoaXMudmFsdWUgPSBcIlwiO1xuICAgICAgICB0aGlzLnRhc2sgPSBudWxsO1xuICAgICAgICB0aGlzLmlzQm91bmQgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5vTCA9IHM7XG4gICAgfVxuICAgIHVwZGF0ZVRhcmdldCh0LCBlKSB7XG4gICAgICAgIHZhciBpLCBzO1xuICAgICAgICBjb25zdCBuID0gdGhpcy50YXJnZXQ7XG4gICAgICAgIGNvbnN0IHIgPSB0aGlzLnAuTm9kZTtcbiAgICAgICAgY29uc3QgbyA9IHRoaXMudmFsdWU7XG4gICAgICAgIHRoaXMudmFsdWUgPSB0O1xuICAgICAgICBpZiAobyBpbnN0YW5jZW9mIHIpIG51bGwgPT09IChpID0gby5wYXJlbnROb2RlKSB8fCB2b2lkIDAgPT09IGkgPyB2b2lkIDAgOiBpLnJlbW92ZUNoaWxkKG8pO1xuICAgICAgICBpZiAodCBpbnN0YW5jZW9mIHIpIHtcbiAgICAgICAgICAgIG4udGV4dENvbnRlbnQgPSBcIlwiO1xuICAgICAgICAgICAgbnVsbCA9PT0gKHMgPSBuLnBhcmVudE5vZGUpIHx8IHZvaWQgMCA9PT0gcyA/IHZvaWQgMCA6IHMuaW5zZXJ0QmVmb3JlKHQsIG4pO1xuICAgICAgICB9IGVsc2Ugbi50ZXh0Q29udGVudCA9IFN0cmluZyh0KTtcbiAgICB9XG4gICAgaGFuZGxlQ2hhbmdlKHQsIGUsIGkpIHtcbiAgICAgICAgdmFyIHM7XG4gICAgICAgIGlmICghdGhpcy5pc0JvdW5kKSByZXR1cm47XG4gICAgICAgIGNvbnN0IG4gPSB0aGlzLnNvdXJjZUV4cHJlc3Npb247XG4gICAgICAgIGNvbnN0IHIgPSB0aGlzLm9icztcbiAgICAgICAgY29uc3QgbyA9IDEwMDgyID09PSBuLiRraW5kICYmIDEgPT09IHIuY291bnQ7XG4gICAgICAgIGxldCBsID0gZmFsc2U7XG4gICAgICAgIGlmICghbykge1xuICAgICAgICAgICAgbCA9ICh0aGlzLm1vZGUgJiB1ZSkgPiAwO1xuICAgICAgICAgICAgaWYgKGwpIHIudmVyc2lvbisrO1xuICAgICAgICAgICAgaSB8PSB0aGlzLnN0cmljdCA/IDEgOiAwO1xuICAgICAgICAgICAgdCA9IG4uZXZhbHVhdGUoaSwgdGhpcy4kc2NvcGUsIHRoaXMubG9jYXRvciwgbCA/IHRoaXMuaW50ZXJjZXB0b3IgOiBudWxsKTtcbiAgICAgICAgICAgIGlmIChsKSByLmNsZWFyKCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHQgPT09IHRoaXMudmFsdWUpIHtcbiAgICAgICAgICAgIG51bGwgPT09IChzID0gdGhpcy50YXNrKSB8fCB2b2lkIDAgPT09IHMgPyB2b2lkIDAgOiBzLmNhbmNlbCgpO1xuICAgICAgICAgICAgdGhpcy50YXNrID0gbnVsbDtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBoID0gMCA9PT0gKDIgJiBpKTtcbiAgICAgICAgaWYgKGgpIHRoaXMucXVldWVVcGRhdGUodCwgaSk7IGVsc2UgdGhpcy51cGRhdGVUYXJnZXQodCwgaSk7XG4gICAgfVxuICAgIGhhbmRsZUNvbGxlY3Rpb25DaGFuZ2UoKSB7XG4gICAgICAgIHRoaXMucXVldWVVcGRhdGUodGhpcy52YWx1ZSwgMCk7XG4gICAgfVxuICAgICRiaW5kKHQsIGUpIHtcbiAgICAgICAgaWYgKHRoaXMuaXNCb3VuZCkge1xuICAgICAgICAgICAgaWYgKHRoaXMuJHNjb3BlID09PSBlKSByZXR1cm47XG4gICAgICAgICAgICB0aGlzLmludGVyY2VwdG9yLiR1bmJpbmQodCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5pc0JvdW5kID0gdHJ1ZTtcbiAgICAgICAgdGhpcy4kc2NvcGUgPSBlO1xuICAgICAgICBpZiAodGhpcy5zb3VyY2VFeHByZXNzaW9uLmhhc0JpbmQpIHRoaXMuc291cmNlRXhwcmVzc2lvbi5iaW5kKHQsIGUsIHRoaXMuaW50ZXJjZXB0b3IpO1xuICAgICAgICB0IHw9IHRoaXMuc3RyaWN0ID8gMSA6IDA7XG4gICAgICAgIGNvbnN0IGkgPSB0aGlzLnZhbHVlID0gdGhpcy5zb3VyY2VFeHByZXNzaW9uLmV2YWx1YXRlKHQsIGUsIHRoaXMubG9jYXRvciwgKHRoaXMubW9kZSAmIHVlKSA+IDAgPyB0aGlzLmludGVyY2VwdG9yIDogbnVsbCk7XG4gICAgICAgIGlmIChpIGluc3RhbmNlb2YgQXJyYXkpIHRoaXMub2JzZXJ2ZUNvbGxlY3Rpb24oaSk7XG4gICAgICAgIHRoaXMudXBkYXRlVGFyZ2V0KGksIHQpO1xuICAgIH1cbiAgICAkdW5iaW5kKHQpIHtcbiAgICAgICAgdmFyIGU7XG4gICAgICAgIGlmICghdGhpcy5pc0JvdW5kKSByZXR1cm47XG4gICAgICAgIHRoaXMuaXNCb3VuZCA9IGZhbHNlO1xuICAgICAgICBpZiAodGhpcy5zb3VyY2VFeHByZXNzaW9uLmhhc1VuYmluZCkgdGhpcy5zb3VyY2VFeHByZXNzaW9uLnVuYmluZCh0LCB0aGlzLiRzY29wZSwgdGhpcy5pbnRlcmNlcHRvcik7XG4gICAgICAgIHRoaXMuJHNjb3BlID0gdm9pZCAwO1xuICAgICAgICB0aGlzLm9icy5jbGVhckFsbCgpO1xuICAgICAgICBudWxsID09PSAoZSA9IHRoaXMudGFzaykgfHwgdm9pZCAwID09PSBlID8gdm9pZCAwIDogZS5jYW5jZWwoKTtcbiAgICAgICAgdGhpcy50YXNrID0gbnVsbDtcbiAgICB9XG4gICAgcXVldWVVcGRhdGUodCwgZSkge1xuICAgICAgICBjb25zdCBpID0gdGhpcy50YXNrO1xuICAgICAgICB0aGlzLnRhc2sgPSB0aGlzLnAuZG9tV3JpdGVRdWV1ZS5xdWV1ZVRhc2soKCgpID0+IHtcbiAgICAgICAgICAgIHRoaXMudGFzayA9IG51bGw7XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZVRhcmdldCh0LCBlKTtcbiAgICAgICAgfSksIGZlKTtcbiAgICAgICAgbnVsbCA9PT0gaSB8fCB2b2lkIDAgPT09IGkgPyB2b2lkIDAgOiBpLmNhbmNlbCgpO1xuICAgIH1cbn1cblxuJChDb250ZW50QmluZGluZyk7XG5cbmNsYXNzIExldEJpbmRpbmcge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUsIGksIHMsIG4gPSBmYWxzZSkge1xuICAgICAgICB0aGlzLnNvdXJjZUV4cHJlc3Npb24gPSB0O1xuICAgICAgICB0aGlzLnRhcmdldFByb3BlcnR5ID0gZTtcbiAgICAgICAgdGhpcy5sb2NhdG9yID0gcztcbiAgICAgICAgdGhpcy5pbnRlcmNlcHRvciA9IHRoaXM7XG4gICAgICAgIHRoaXMuaXNCb3VuZCA9IGZhbHNlO1xuICAgICAgICB0aGlzLiRzY29wZSA9IHZvaWQgMDtcbiAgICAgICAgdGhpcy50YXNrID0gbnVsbDtcbiAgICAgICAgdGhpcy50YXJnZXQgPSBudWxsO1xuICAgICAgICB0aGlzLm9MID0gaTtcbiAgICAgICAgdGhpcy5ZID0gbjtcbiAgICB9XG4gICAgaGFuZGxlQ2hhbmdlKHQsIGUsIGkpIHtcbiAgICAgICAgaWYgKCF0aGlzLmlzQm91bmQpIHJldHVybjtcbiAgICAgICAgY29uc3QgcyA9IHRoaXMudGFyZ2V0O1xuICAgICAgICBjb25zdCBuID0gdGhpcy50YXJnZXRQcm9wZXJ0eTtcbiAgICAgICAgY29uc3QgciA9IHNbbl07XG4gICAgICAgIHRoaXMub2JzLnZlcnNpb24rKztcbiAgICAgICAgdCA9IHRoaXMuc291cmNlRXhwcmVzc2lvbi5ldmFsdWF0ZShpLCB0aGlzLiRzY29wZSwgdGhpcy5sb2NhdG9yLCB0aGlzLmludGVyY2VwdG9yKTtcbiAgICAgICAgdGhpcy5vYnMuY2xlYXIoKTtcbiAgICAgICAgaWYgKHQgIT09IHIpIHNbbl0gPSB0O1xuICAgIH1cbiAgICAkYmluZCh0LCBlKSB7XG4gICAgICAgIGlmICh0aGlzLmlzQm91bmQpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLiRzY29wZSA9PT0gZSkgcmV0dXJuO1xuICAgICAgICAgICAgdGhpcy5pbnRlcmNlcHRvci4kdW5iaW5kKDIgfCB0KTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLiRzY29wZSA9IGU7XG4gICAgICAgIHRoaXMudGFyZ2V0ID0gdGhpcy5ZID8gZS5iaW5kaW5nQ29udGV4dCA6IGUub3ZlcnJpZGVDb250ZXh0O1xuICAgICAgICBjb25zdCBpID0gdGhpcy5zb3VyY2VFeHByZXNzaW9uO1xuICAgICAgICBpZiAoaS5oYXNCaW5kKSBpLmJpbmQodCwgZSwgdGhpcy5pbnRlcmNlcHRvcik7XG4gICAgICAgIHRoaXMudGFyZ2V0W3RoaXMudGFyZ2V0UHJvcGVydHldID0gdGhpcy5zb3VyY2VFeHByZXNzaW9uLmV2YWx1YXRlKDIgfCB0LCBlLCB0aGlzLmxvY2F0b3IsIHRoaXMuaW50ZXJjZXB0b3IpO1xuICAgICAgICB0aGlzLmlzQm91bmQgPSB0cnVlO1xuICAgIH1cbiAgICAkdW5iaW5kKHQpIHtcbiAgICAgICAgaWYgKCF0aGlzLmlzQm91bmQpIHJldHVybjtcbiAgICAgICAgY29uc3QgZSA9IHRoaXMuc291cmNlRXhwcmVzc2lvbjtcbiAgICAgICAgaWYgKGUuaGFzVW5iaW5kKSBlLnVuYmluZCh0LCB0aGlzLiRzY29wZSwgdGhpcy5pbnRlcmNlcHRvcik7XG4gICAgICAgIHRoaXMuJHNjb3BlID0gdm9pZCAwO1xuICAgICAgICB0aGlzLm9icy5jbGVhckFsbCgpO1xuICAgICAgICB0aGlzLmlzQm91bmQgPSBmYWxzZTtcbiAgICB9XG59XG5cbiQoTGV0QmluZGluZyk7XG5cbmNvbnN0IHtvbmVUaW1lOiBkZSwgdG9WaWV3OiBtZSwgZnJvbVZpZXc6IHZlfSA9IEQ7XG5cbmNvbnN0IHBlID0gbWUgfCBkZTtcblxuY29uc3QgZ2UgPSB7XG4gICAgcmV1c2FibGU6IGZhbHNlLFxuICAgIHByZWVtcHQ6IHRydWVcbn07XG5cbmNsYXNzIFByb3BlcnR5QmluZGluZyB7XG4gICAgY29uc3RydWN0b3IodCwgZSwgaSwgcywgbiwgciwgbykge1xuICAgICAgICB0aGlzLnNvdXJjZUV4cHJlc3Npb24gPSB0O1xuICAgICAgICB0aGlzLnRhcmdldCA9IGU7XG4gICAgICAgIHRoaXMudGFyZ2V0UHJvcGVydHkgPSBpO1xuICAgICAgICB0aGlzLm1vZGUgPSBzO1xuICAgICAgICB0aGlzLmxvY2F0b3IgPSByO1xuICAgICAgICB0aGlzLnRhc2tRdWV1ZSA9IG87XG4gICAgICAgIHRoaXMuaW50ZXJjZXB0b3IgPSB0aGlzO1xuICAgICAgICB0aGlzLmlzQm91bmQgPSBmYWxzZTtcbiAgICAgICAgdGhpcy4kc2NvcGUgPSB2b2lkIDA7XG4gICAgICAgIHRoaXMudGFyZ2V0T2JzZXJ2ZXIgPSB2b2lkIDA7XG4gICAgICAgIHRoaXMucGVyc2lzdGVudEZsYWdzID0gMDtcbiAgICAgICAgdGhpcy50YXNrID0gbnVsbDtcbiAgICAgICAgdGhpcy50YXJnZXRTdWJzY3JpYmVyID0gbnVsbDtcbiAgICAgICAgdGhpcy5vTCA9IG47XG4gICAgfVxuICAgIHVwZGF0ZVRhcmdldCh0LCBlKSB7XG4gICAgICAgIGUgfD0gdGhpcy5wZXJzaXN0ZW50RmxhZ3M7XG4gICAgICAgIHRoaXMudGFyZ2V0T2JzZXJ2ZXIuc2V0VmFsdWUodCwgZSwgdGhpcy50YXJnZXQsIHRoaXMudGFyZ2V0UHJvcGVydHkpO1xuICAgIH1cbiAgICB1cGRhdGVTb3VyY2UodCwgZSkge1xuICAgICAgICBlIHw9IHRoaXMucGVyc2lzdGVudEZsYWdzO1xuICAgICAgICB0aGlzLnNvdXJjZUV4cHJlc3Npb24uYXNzaWduKGUsIHRoaXMuJHNjb3BlLCB0aGlzLmxvY2F0b3IsIHQpO1xuICAgIH1cbiAgICBoYW5kbGVDaGFuZ2UodCwgZSwgaSkge1xuICAgICAgICBpZiAoIXRoaXMuaXNCb3VuZCkgcmV0dXJuO1xuICAgICAgICBpIHw9IHRoaXMucGVyc2lzdGVudEZsYWdzO1xuICAgICAgICBjb25zdCBzID0gMCA9PT0gKDIgJiBpKSAmJiAoNCAmIHRoaXMudGFyZ2V0T2JzZXJ2ZXIudHlwZSkgPiAwO1xuICAgICAgICBjb25zdCBuID0gdGhpcy5vYnM7XG4gICAgICAgIGxldCByID0gZmFsc2U7XG4gICAgICAgIGlmICgxMDA4MiAhPT0gdGhpcy5zb3VyY2VFeHByZXNzaW9uLiRraW5kIHx8IG4uY291bnQgPiAxKSB7XG4gICAgICAgICAgICByID0gdGhpcy5tb2RlID4gZGU7XG4gICAgICAgICAgICBpZiAocikgbi52ZXJzaW9uKys7XG4gICAgICAgICAgICB0ID0gdGhpcy5zb3VyY2VFeHByZXNzaW9uLmV2YWx1YXRlKGksIHRoaXMuJHNjb3BlLCB0aGlzLmxvY2F0b3IsIHRoaXMuaW50ZXJjZXB0b3IpO1xuICAgICAgICAgICAgaWYgKHIpIG4uY2xlYXIoKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAocykge1xuICAgICAgICAgICAgd2UgPSB0aGlzLnRhc2s7XG4gICAgICAgICAgICB0aGlzLnRhc2sgPSB0aGlzLnRhc2tRdWV1ZS5xdWV1ZVRhc2soKCgpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLmludGVyY2VwdG9yLnVwZGF0ZVRhcmdldCh0LCBpKTtcbiAgICAgICAgICAgICAgICB0aGlzLnRhc2sgPSBudWxsO1xuICAgICAgICAgICAgfSksIGdlKTtcbiAgICAgICAgICAgIG51bGwgPT09IHdlIHx8IHZvaWQgMCA9PT0gd2UgPyB2b2lkIDAgOiB3ZS5jYW5jZWwoKTtcbiAgICAgICAgICAgIHdlID0gbnVsbDtcbiAgICAgICAgfSBlbHNlIHRoaXMuaW50ZXJjZXB0b3IudXBkYXRlVGFyZ2V0KHQsIGkpO1xuICAgIH1cbiAgICAkYmluZCh0LCBlKSB7XG4gICAgICAgIHZhciBpO1xuICAgICAgICBpZiAodGhpcy5pc0JvdW5kKSB7XG4gICAgICAgICAgICBpZiAodGhpcy4kc2NvcGUgPT09IGUpIHJldHVybjtcbiAgICAgICAgICAgIHRoaXMuaW50ZXJjZXB0b3IuJHVuYmluZCgyIHwgdCk7XG4gICAgICAgIH1cbiAgICAgICAgdCB8PSAxO1xuICAgICAgICB0aGlzLnBlcnNpc3RlbnRGbGFncyA9IDk2MSAmIHQ7XG4gICAgICAgIHRoaXMuJHNjb3BlID0gZTtcbiAgICAgICAgbGV0IHMgPSB0aGlzLnNvdXJjZUV4cHJlc3Npb247XG4gICAgICAgIGlmIChzLmhhc0JpbmQpIHMuYmluZCh0LCBlLCB0aGlzLmludGVyY2VwdG9yKTtcbiAgICAgICAgY29uc3QgbiA9IHRoaXMub0w7XG4gICAgICAgIGNvbnN0IHIgPSB0aGlzLm1vZGU7XG4gICAgICAgIGxldCBvID0gdGhpcy50YXJnZXRPYnNlcnZlcjtcbiAgICAgICAgaWYgKCFvKSB7XG4gICAgICAgICAgICBpZiAociAmIHZlKSBvID0gbi5nZXRPYnNlcnZlcih0aGlzLnRhcmdldCwgdGhpcy50YXJnZXRQcm9wZXJ0eSk7IGVsc2UgbyA9IG4uZ2V0QWNjZXNzb3IodGhpcy50YXJnZXQsIHRoaXMudGFyZ2V0UHJvcGVydHkpO1xuICAgICAgICAgICAgdGhpcy50YXJnZXRPYnNlcnZlciA9IG87XG4gICAgICAgIH1cbiAgICAgICAgcyA9IHRoaXMuc291cmNlRXhwcmVzc2lvbjtcbiAgICAgICAgY29uc3QgbCA9IHRoaXMuaW50ZXJjZXB0b3I7XG4gICAgICAgIGNvbnN0IGggPSAociAmIG1lKSA+IDA7XG4gICAgICAgIGlmIChyICYgcGUpIGwudXBkYXRlVGFyZ2V0KHMuZXZhbHVhdGUodCwgZSwgdGhpcy5sb2NhdG9yLCBoID8gbCA6IG51bGwpLCB0KTtcbiAgICAgICAgaWYgKHIgJiB2ZSkge1xuICAgICAgICAgICAgby5zdWJzY3JpYmUobnVsbCAhPT0gKGkgPSB0aGlzLnRhcmdldFN1YnNjcmliZXIpICYmIHZvaWQgMCAhPT0gaSA/IGkgOiB0aGlzLnRhcmdldFN1YnNjcmliZXIgPSBuZXcgQmluZGluZ1RhcmdldFN1YnNjcmliZXIobCkpO1xuICAgICAgICAgICAgaWYgKCFoKSBsLnVwZGF0ZVNvdXJjZShvLmdldFZhbHVlKHRoaXMudGFyZ2V0LCB0aGlzLnRhcmdldFByb3BlcnR5KSwgdCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5pc0JvdW5kID0gdHJ1ZTtcbiAgICB9XG4gICAgJHVuYmluZCh0KSB7XG4gICAgICAgIGlmICghdGhpcy5pc0JvdW5kKSByZXR1cm47XG4gICAgICAgIHRoaXMucGVyc2lzdGVudEZsYWdzID0gMDtcbiAgICAgICAgaWYgKHRoaXMuc291cmNlRXhwcmVzc2lvbi5oYXNVbmJpbmQpIHRoaXMuc291cmNlRXhwcmVzc2lvbi51bmJpbmQodCwgdGhpcy4kc2NvcGUsIHRoaXMuaW50ZXJjZXB0b3IpO1xuICAgICAgICB0aGlzLiRzY29wZSA9IHZvaWQgMDtcbiAgICAgICAgd2UgPSB0aGlzLnRhc2s7XG4gICAgICAgIGlmICh0aGlzLnRhcmdldFN1YnNjcmliZXIpIHRoaXMudGFyZ2V0T2JzZXJ2ZXIudW5zdWJzY3JpYmUodGhpcy50YXJnZXRTdWJzY3JpYmVyKTtcbiAgICAgICAgaWYgKG51bGwgIT0gd2UpIHtcbiAgICAgICAgICAgIHdlLmNhbmNlbCgpO1xuICAgICAgICAgICAgd2UgPSB0aGlzLnRhc2sgPSBudWxsO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMub2JzLmNsZWFyQWxsKCk7XG4gICAgICAgIHRoaXMuaXNCb3VuZCA9IGZhbHNlO1xuICAgIH1cbn1cblxuJChQcm9wZXJ0eUJpbmRpbmcpO1xuXG5sZXQgd2UgPSBudWxsO1xuXG5jbGFzcyBSZWZCaW5kaW5nIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlLCBpKSB7XG4gICAgICAgIHRoaXMuc291cmNlRXhwcmVzc2lvbiA9IHQ7XG4gICAgICAgIHRoaXMudGFyZ2V0ID0gZTtcbiAgICAgICAgdGhpcy5sb2NhdG9yID0gaTtcbiAgICAgICAgdGhpcy5pbnRlcmNlcHRvciA9IHRoaXM7XG4gICAgICAgIHRoaXMuaXNCb3VuZCA9IGZhbHNlO1xuICAgICAgICB0aGlzLiRzY29wZSA9IHZvaWQgMDtcbiAgICB9XG4gICAgJGJpbmQodCwgZSkge1xuICAgICAgICBpZiAodGhpcy5pc0JvdW5kKSB7XG4gICAgICAgICAgICBpZiAodGhpcy4kc2NvcGUgPT09IGUpIHJldHVybjtcbiAgICAgICAgICAgIHRoaXMuaW50ZXJjZXB0b3IuJHVuYmluZCgyIHwgdCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy4kc2NvcGUgPSBlO1xuICAgICAgICBpZiAodGhpcy5zb3VyY2VFeHByZXNzaW9uLmhhc0JpbmQpIHRoaXMuc291cmNlRXhwcmVzc2lvbi5iaW5kKHQsIGUsIHRoaXMpO1xuICAgICAgICB0aGlzLnNvdXJjZUV4cHJlc3Npb24uYXNzaWduKHQsIHRoaXMuJHNjb3BlLCB0aGlzLmxvY2F0b3IsIHRoaXMudGFyZ2V0KTtcbiAgICAgICAgdGhpcy5pc0JvdW5kID0gdHJ1ZTtcbiAgICB9XG4gICAgJHVuYmluZCh0KSB7XG4gICAgICAgIGlmICghdGhpcy5pc0JvdW5kKSByZXR1cm47XG4gICAgICAgIGxldCBlID0gdGhpcy5zb3VyY2VFeHByZXNzaW9uO1xuICAgICAgICBpZiAoZS5ldmFsdWF0ZSh0LCB0aGlzLiRzY29wZSwgdGhpcy5sb2NhdG9yLCBudWxsKSA9PT0gdGhpcy50YXJnZXQpIGUuYXNzaWduKHQsIHRoaXMuJHNjb3BlLCB0aGlzLmxvY2F0b3IsIG51bGwpO1xuICAgICAgICBlID0gdGhpcy5zb3VyY2VFeHByZXNzaW9uO1xuICAgICAgICBpZiAoZS5oYXNVbmJpbmQpIGUudW5iaW5kKHQsIHRoaXMuJHNjb3BlLCB0aGlzLmludGVyY2VwdG9yKTtcbiAgICAgICAgdGhpcy4kc2NvcGUgPSB2b2lkIDA7XG4gICAgICAgIHRoaXMuaXNCb3VuZCA9IGZhbHNlO1xuICAgIH1cbiAgICBvYnNlcnZlKHQsIGUpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBoYW5kbGVDaGFuZ2UodCwgZSwgaSkge1xuICAgICAgICByZXR1cm47XG4gICAgfVxufVxuXG5jb25zdCBiZSA9IGwuY3JlYXRlSW50ZXJmYWNlKFwiSUFwcFRhc2tcIik7XG5cbmNsYXNzICRBcHBUYXNrIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlLCBpKSB7XG4gICAgICAgIHRoaXMuYyA9IHZvaWQgMDtcbiAgICAgICAgdGhpcy5zbG90ID0gdDtcbiAgICAgICAgdGhpcy5rID0gZTtcbiAgICAgICAgdGhpcy5jYiA9IGk7XG4gICAgfVxuICAgIHJlZ2lzdGVyKHQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuYyA9IHQucmVnaXN0ZXIoYy5pbnN0YW5jZShiZSwgdGhpcykpO1xuICAgIH1cbiAgICBydW4oKSB7XG4gICAgICAgIGNvbnN0IHQgPSB0aGlzLms7XG4gICAgICAgIGNvbnN0IGUgPSB0aGlzLmNiO1xuICAgICAgICByZXR1cm4gbnVsbCA9PT0gdCA/IGUoKSA6IGUodGhpcy5jLmdldCh0KSk7XG4gICAgfVxufVxuXG5jb25zdCB4ZSA9IE9iamVjdC5mcmVlemUoe1xuICAgIGJlZm9yZUNyZWF0ZTogeWUoXCJiZWZvcmVDcmVhdGVcIiksXG4gICAgaHlkcmF0aW5nOiB5ZShcImh5ZHJhdGluZ1wiKSxcbiAgICBoeWRyYXRlZDogeWUoXCJoeWRyYXRlZFwiKSxcbiAgICBiZWZvcmVBY3RpdmF0ZTogeWUoXCJiZWZvcmVBY3RpdmF0ZVwiKSxcbiAgICBhZnRlckFjdGl2YXRlOiB5ZShcImFmdGVyQWN0aXZhdGVcIiksXG4gICAgYmVmb3JlRGVhY3RpdmF0ZTogeWUoXCJiZWZvcmVEZWFjdGl2YXRlXCIpLFxuICAgIGFmdGVyRGVhY3RpdmF0ZTogeWUoXCJhZnRlckRlYWN0aXZhdGVcIilcbn0pO1xuXG5mdW5jdGlvbiB5ZSh0KSB7XG4gICAgZnVuY3Rpb24gZShlLCBpKSB7XG4gICAgICAgIGlmIChDdChpKSkgcmV0dXJuIG5ldyAkQXBwVGFzayh0LCBlLCBpKTtcbiAgICAgICAgcmV0dXJuIG5ldyAkQXBwVGFzayh0LCBudWxsLCBlKTtcbiAgICB9XG4gICAgcmV0dXJuIGU7XG59XG5cbmZ1bmN0aW9uIGtlKHQsIGUpIHtcbiAgICBsZXQgaTtcbiAgICBmdW5jdGlvbiBzKHQsIGUpIHtcbiAgICAgICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPiAxKSBpLnByb3BlcnR5ID0gZTtcbiAgICAgICAgY3QoQWUsIENoaWxkcmVuRGVmaW5pdGlvbi5jcmVhdGUoZSwgaSksIHQuY29uc3RydWN0b3IsIGUpO1xuICAgICAgICBwdCh0LmNvbnN0cnVjdG9yLCBTZS5rZXlGcm9tKGUpKTtcbiAgICB9XG4gICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPiAxKSB7XG4gICAgICAgIGkgPSB7fTtcbiAgICAgICAgcyh0LCBlKTtcbiAgICAgICAgcmV0dXJuO1xuICAgIH0gZWxzZSBpZiAoQXQodCkpIHtcbiAgICAgICAgaSA9IHt9O1xuICAgICAgICByZXR1cm4gcztcbiAgICB9XG4gICAgaSA9IHZvaWQgMCA9PT0gdCA/IHt9IDogdDtcbiAgICByZXR1cm4gcztcbn1cblxuZnVuY3Rpb24gQ2UodCkge1xuICAgIHJldHVybiB0LnN0YXJ0c1dpdGgoQWUpO1xufVxuXG5jb25zdCBBZSA9IGR0KFwiY2hpbGRyZW4tb2JzZXJ2ZXJcIik7XG5cbmNvbnN0IFNlID0gT2JqZWN0LmZyZWV6ZSh7XG4gICAgbmFtZTogQWUsXG4gICAga2V5RnJvbTogdCA9PiBgJHtBZX06JHt0fWAsXG4gICAgZnJvbSguLi50KSB7XG4gICAgICAgIGNvbnN0IGUgPSB7fTtcbiAgICAgICAgY29uc3QgaSA9IEFycmF5LmlzQXJyYXk7XG4gICAgICAgIGZ1bmN0aW9uIHModCkge1xuICAgICAgICAgICAgZVt0XSA9IENoaWxkcmVuRGVmaW5pdGlvbi5jcmVhdGUodCk7XG4gICAgICAgIH1cbiAgICAgICAgZnVuY3Rpb24gbih0LCBpKSB7XG4gICAgICAgICAgICBlW3RdID0gQ2hpbGRyZW5EZWZpbml0aW9uLmNyZWF0ZSh0LCBpKTtcbiAgICAgICAgfVxuICAgICAgICBmdW5jdGlvbiByKHQpIHtcbiAgICAgICAgICAgIGlmIChpKHQpKSB0LmZvckVhY2gocyk7IGVsc2UgaWYgKHQgaW5zdGFuY2VvZiBDaGlsZHJlbkRlZmluaXRpb24pIGVbdC5wcm9wZXJ0eV0gPSB0OyBlbHNlIGlmICh2b2lkIDAgIT09IHQpIE9iamVjdC5rZXlzKHQpLmZvckVhY2goKGUgPT4gbihlLCB0KSkpO1xuICAgICAgICB9XG4gICAgICAgIHQuZm9yRWFjaChyKTtcbiAgICAgICAgcmV0dXJuIGU7XG4gICAgfSxcbiAgICBnZXRBbGwodCkge1xuICAgICAgICBjb25zdCBlID0gQWUubGVuZ3RoICsgMTtcbiAgICAgICAgY29uc3QgaSA9IFtdO1xuICAgICAgICBjb25zdCBuID0gcyh0KTtcbiAgICAgICAgbGV0IHIgPSBuLmxlbmd0aDtcbiAgICAgICAgbGV0IG8gPSAwO1xuICAgICAgICBsZXQgbDtcbiAgICAgICAgbGV0IGg7XG4gICAgICAgIGxldCBhO1xuICAgICAgICB3aGlsZSAoLS1yID49IDApIHtcbiAgICAgICAgICAgIGEgPSBuW3JdO1xuICAgICAgICAgICAgbCA9IGd0KGEpLmZpbHRlcihDZSk7XG4gICAgICAgICAgICBoID0gbC5sZW5ndGg7XG4gICAgICAgICAgICBmb3IgKGxldCB0ID0gMDsgdCA8IGg7ICsrdCkgaVtvKytdID0gaHQoQWUsIGEsIGxbdF0uc2xpY2UoZSkpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBpO1xuICAgIH1cbn0pO1xuXG5jb25zdCBSZSA9IHtcbiAgICBjaGlsZExpc3Q6IHRydWVcbn07XG5cbmNsYXNzIENoaWxkcmVuRGVmaW5pdGlvbiB7XG4gICAgY29uc3RydWN0b3IodCwgZSwgaSwgcywgbiwgcikge1xuICAgICAgICB0aGlzLmNhbGxiYWNrID0gdDtcbiAgICAgICAgdGhpcy5wcm9wZXJ0eSA9IGU7XG4gICAgICAgIHRoaXMub3B0aW9ucyA9IGk7XG4gICAgICAgIHRoaXMucXVlcnkgPSBzO1xuICAgICAgICB0aGlzLmZpbHRlciA9IG47XG4gICAgICAgIHRoaXMubWFwID0gcjtcbiAgICB9XG4gICAgc3RhdGljIGNyZWF0ZSh0LCBlID0ge30pIHtcbiAgICAgICAgdmFyIGk7XG4gICAgICAgIHJldHVybiBuZXcgQ2hpbGRyZW5EZWZpbml0aW9uKG4oZS5jYWxsYmFjaywgYCR7dH1DaGFuZ2VkYCksIG4oZS5wcm9wZXJ0eSwgdCksIG51bGwgIT09IChpID0gZS5vcHRpb25zKSAmJiB2b2lkIDAgIT09IGkgPyBpIDogUmUsIGUucXVlcnksIGUuZmlsdGVyLCBlLm1hcCk7XG4gICAgfVxufVxuXG5jbGFzcyBDaGlsZHJlbk9ic2VydmVyIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlLCBpLCBzLCBuID0gRWUsIHIgPSBCZSwgbyA9IEllLCBsKSB7XG4gICAgICAgIHRoaXMuY29udHJvbGxlciA9IHQ7XG4gICAgICAgIHRoaXMub2JqID0gZTtcbiAgICAgICAgdGhpcy5wcm9wZXJ0eUtleSA9IGk7XG4gICAgICAgIHRoaXMucXVlcnkgPSBuO1xuICAgICAgICB0aGlzLmZpbHRlciA9IHI7XG4gICAgICAgIHRoaXMubWFwID0gbztcbiAgICAgICAgdGhpcy5vcHRpb25zID0gbDtcbiAgICAgICAgdGhpcy5vYnNlcnZpbmcgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5jaGlsZHJlbiA9IHZvaWQgMDtcbiAgICAgICAgdGhpcy5vYnNlcnZlciA9IHZvaWQgMDtcbiAgICAgICAgdGhpcy5jYWxsYmFjayA9IGVbc107XG4gICAgICAgIFJlZmxlY3QuZGVmaW5lUHJvcGVydHkodGhpcy5vYmosIHRoaXMucHJvcGVydHlLZXksIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICBnZXQ6ICgpID0+IHRoaXMuZ2V0VmFsdWUoKSxcbiAgICAgICAgICAgIHNldDogKCkgPT4ge31cbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGdldFZhbHVlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5vYnNlcnZpbmcgPyB0aGlzLmNoaWxkcmVuIDogdGhpcy5nZXQoKTtcbiAgICB9XG4gICAgc2V0VmFsdWUodCkge31cbiAgICBzdGFydCgpIHtcbiAgICAgICAgdmFyIHQ7XG4gICAgICAgIGlmICghdGhpcy5vYnNlcnZpbmcpIHtcbiAgICAgICAgICAgIHRoaXMub2JzZXJ2aW5nID0gdHJ1ZTtcbiAgICAgICAgICAgIHRoaXMuY2hpbGRyZW4gPSB0aGlzLmdldCgpO1xuICAgICAgICAgICAgKG51bGwgIT09ICh0ID0gdGhpcy5vYnNlcnZlcikgJiYgdm9pZCAwICE9PSB0ID8gdCA6IHRoaXMub2JzZXJ2ZXIgPSBuZXcgdGhpcy5jb250cm9sbGVyLmhvc3Qub3duZXJEb2N1bWVudC5kZWZhdWx0Vmlldy5NdXRhdGlvbk9ic2VydmVyKCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5aKCk7XG4gICAgICAgICAgICB9KSkpLm9ic2VydmUodGhpcy5jb250cm9sbGVyLmhvc3QsIHRoaXMub3B0aW9ucyk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgc3RvcCgpIHtcbiAgICAgICAgaWYgKHRoaXMub2JzZXJ2aW5nKSB7XG4gICAgICAgICAgICB0aGlzLm9ic2VydmluZyA9IGZhbHNlO1xuICAgICAgICAgICAgdGhpcy5vYnNlcnZlci5kaXNjb25uZWN0KCk7XG4gICAgICAgICAgICB0aGlzLmNoaWxkcmVuID0gaDtcbiAgICAgICAgfVxuICAgIH1cbiAgICBaKCkge1xuICAgICAgICB0aGlzLmNoaWxkcmVuID0gdGhpcy5nZXQoKTtcbiAgICAgICAgaWYgKHZvaWQgMCAhPT0gdGhpcy5jYWxsYmFjaykgdGhpcy5jYWxsYmFjay5jYWxsKHRoaXMub2JqKTtcbiAgICAgICAgdGhpcy5zdWJzLm5vdGlmeSh0aGlzLmNoaWxkcmVuLCB2b2lkIDAsIDApO1xuICAgIH1cbiAgICBnZXQoKSB7XG4gICAgICAgIHJldHVybiBEZSh0aGlzLmNvbnRyb2xsZXIsIHRoaXMucXVlcnksIHRoaXMuZmlsdGVyLCB0aGlzLm1hcCk7XG4gICAgfVxufVxuXG5QKCkoQ2hpbGRyZW5PYnNlcnZlcik7XG5cbmZ1bmN0aW9uIEVlKHQpIHtcbiAgICByZXR1cm4gdC5ob3N0LmNoaWxkTm9kZXM7XG59XG5cbmZ1bmN0aW9uIEJlKHQsIGUsIGkpIHtcbiAgICByZXR1cm4gISFpO1xufVxuXG5mdW5jdGlvbiBJZSh0LCBlLCBpKSB7XG4gICAgcmV0dXJuIGk7XG59XG5cbmNvbnN0IFRlID0ge1xuICAgIG9wdGlvbmFsOiB0cnVlXG59O1xuXG5mdW5jdGlvbiBEZSh0LCBlLCBpLCBzKSB7XG4gICAgdmFyIG47XG4gICAgY29uc3QgciA9IGUodCk7XG4gICAgY29uc3QgbyA9IHIubGVuZ3RoO1xuICAgIGNvbnN0IGwgPSBbXTtcbiAgICBsZXQgaDtcbiAgICBsZXQgYTtcbiAgICBsZXQgYztcbiAgICBsZXQgdSA9IDA7XG4gICAgZm9yICg7dSA8IG87ICsrdSkge1xuICAgICAgICBoID0gclt1XTtcbiAgICAgICAgYSA9IHNpLmZvcihoLCBUZSk7XG4gICAgICAgIGMgPSBudWxsICE9PSAobiA9IG51bGwgPT09IGEgfHwgdm9pZCAwID09PSBhID8gdm9pZCAwIDogYS52aWV3TW9kZWwpICYmIHZvaWQgMCAhPT0gbiA/IG4gOiBudWxsO1xuICAgICAgICBpZiAoaShoLCBhLCBjKSkgbC5wdXNoKHMoaCwgYSwgYykpO1xuICAgIH1cbiAgICByZXR1cm4gbDtcbn1cblxuZnVuY3Rpb24gUGUodCkge1xuICAgIHJldHVybiBmdW5jdGlvbihlKSB7XG4gICAgICAgIHJldHVybiBNZS5kZWZpbmUodCwgZSk7XG4gICAgfTtcbn1cblxuZnVuY3Rpb24gT2UodCkge1xuICAgIHJldHVybiBmdW5jdGlvbihlKSB7XG4gICAgICAgIHJldHVybiBNZS5kZWZpbmUoQXQodCkgPyB7XG4gICAgICAgICAgICBpc1RlbXBsYXRlQ29udHJvbGxlcjogdHJ1ZSxcbiAgICAgICAgICAgIG5hbWU6IHRcbiAgICAgICAgfSA6IHtcbiAgICAgICAgICAgIGlzVGVtcGxhdGVDb250cm9sbGVyOiB0cnVlLFxuICAgICAgICAgICAgLi4udFxuICAgICAgICB9LCBlKTtcbiAgICB9O1xufVxuXG5jbGFzcyBDdXN0b21BdHRyaWJ1dGVEZWZpbml0aW9uIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlLCBpLCBzLCBuLCByLCBvLCBsLCBoKSB7XG4gICAgICAgIHRoaXMuVHlwZSA9IHQ7XG4gICAgICAgIHRoaXMubmFtZSA9IGU7XG4gICAgICAgIHRoaXMuYWxpYXNlcyA9IGk7XG4gICAgICAgIHRoaXMua2V5ID0gcztcbiAgICAgICAgdGhpcy5kZWZhdWx0QmluZGluZ01vZGUgPSBuO1xuICAgICAgICB0aGlzLmlzVGVtcGxhdGVDb250cm9sbGVyID0gcjtcbiAgICAgICAgdGhpcy5iaW5kYWJsZXMgPSBvO1xuICAgICAgICB0aGlzLm5vTXVsdGlCaW5kaW5ncyA9IGw7XG4gICAgICAgIHRoaXMud2F0Y2hlcyA9IGg7XG4gICAgfVxuICAgIGdldCB0eXBlKCkge1xuICAgICAgICByZXR1cm4gMjtcbiAgICB9XG4gICAgc3RhdGljIGNyZWF0ZSh0LCBlKSB7XG4gICAgICAgIGxldCBpO1xuICAgICAgICBsZXQgcztcbiAgICAgICAgaWYgKEF0KHQpKSB7XG4gICAgICAgICAgICBpID0gdDtcbiAgICAgICAgICAgIHMgPSB7XG4gICAgICAgICAgICAgICAgbmFtZTogaVxuICAgICAgICAgICAgfTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGkgPSB0Lm5hbWU7XG4gICAgICAgICAgICBzID0gdDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbmV3IEN1c3RvbUF0dHJpYnV0ZURlZmluaXRpb24oZSwgbihxZShlLCBcIm5hbWVcIiksIGkpLCBmKHFlKGUsIFwiYWxpYXNlc1wiKSwgcy5hbGlhc2VzLCBlLmFsaWFzZXMpLCBNZS5rZXlGcm9tKGkpLCBuKHFlKGUsIFwiZGVmYXVsdEJpbmRpbmdNb2RlXCIpLCBzLmRlZmF1bHRCaW5kaW5nTW9kZSwgZS5kZWZhdWx0QmluZGluZ01vZGUsIEQudG9WaWV3KSwgbihxZShlLCBcImlzVGVtcGxhdGVDb250cm9sbGVyXCIpLCBzLmlzVGVtcGxhdGVDb250cm9sbGVyLCBlLmlzVGVtcGxhdGVDb250cm9sbGVyLCBmYWxzZSksIEJ0LmZyb20oZSwgLi4uQnQuZ2V0QWxsKGUpLCBxZShlLCBcImJpbmRhYmxlc1wiKSwgZS5iaW5kYWJsZXMsIHMuYmluZGFibGVzKSwgbihxZShlLCBcIm5vTXVsdGlCaW5kaW5nc1wiKSwgcy5ub011bHRpQmluZGluZ3MsIGUubm9NdWx0aUJpbmRpbmdzLCBmYWxzZSksIGYoX2UuZ2V0QW5ub3RhdGlvbihlKSwgZS53YXRjaGVzKSk7XG4gICAgfVxuICAgIHJlZ2lzdGVyKHQpIHtcbiAgICAgICAgY29uc3Qge1R5cGU6IGUsIGtleTogaSwgYWxpYXNlczogc30gPSB0aGlzO1xuICAgICAgICBjLnRyYW5zaWVudChpLCBlKS5yZWdpc3Rlcih0KTtcbiAgICAgICAgYy5hbGlhc1RvKGksIGUpLnJlZ2lzdGVyKHQpO1xuICAgICAgICBMKHMsIE1lLCBpLCB0KTtcbiAgICB9XG59XG5cbmNvbnN0ICRlID0gbXQoXCJjdXN0b20tYXR0cmlidXRlXCIpO1xuXG5jb25zdCBMZSA9IHQgPT4gYCR7JGV9OiR7dH1gO1xuXG5jb25zdCBxZSA9ICh0LCBlKSA9PiBodChkdChlKSwgdCk7XG5cbmNvbnN0IE1lID0gT2JqZWN0LmZyZWV6ZSh7XG4gICAgbmFtZTogJGUsXG4gICAga2V5RnJvbTogTGUsXG4gICAgaXNUeXBlKHQpIHtcbiAgICAgICAgcmV0dXJuIEN0KHQpICYmIGF0KCRlLCB0KTtcbiAgICB9LFxuICAgIGZvcih0LCBlKSB7XG4gICAgICAgIHZhciBpO1xuICAgICAgICByZXR1cm4gbnVsbCAhPT0gKGkgPSBpcyh0LCBMZShlKSkpICYmIHZvaWQgMCAhPT0gaSA/IGkgOiB2b2lkIDA7XG4gICAgfSxcbiAgICBkZWZpbmUodCwgZSkge1xuICAgICAgICBjb25zdCBpID0gQ3VzdG9tQXR0cmlidXRlRGVmaW5pdGlvbi5jcmVhdGUodCwgZSk7XG4gICAgICAgIGN0KCRlLCBpLCBpLlR5cGUpO1xuICAgICAgICBjdCgkZSwgaSwgaSk7XG4gICAgICAgIHZ0KGUsICRlKTtcbiAgICAgICAgcmV0dXJuIGkuVHlwZTtcbiAgICB9LFxuICAgIGdldERlZmluaXRpb24odCkge1xuICAgICAgICBjb25zdCBlID0gaHQoJGUsIHQpO1xuICAgICAgICBpZiAodm9pZCAwID09PSBlKSB0aHJvdyBuZXcgRXJyb3IoYEFVUjA3NTk6JHt0Lm5hbWV9YCk7XG4gICAgICAgIHJldHVybiBlO1xuICAgIH0sXG4gICAgYW5ub3RhdGUodCwgZSwgaSkge1xuICAgICAgICBjdChkdChlKSwgaSwgdCk7XG4gICAgfSxcbiAgICBnZXRBbm5vdGF0aW9uOiBxZVxufSk7XG5cbmZ1bmN0aW9uIFVlKHQsIGUpIHtcbiAgICBpZiAoIXQpIHRocm93IG5ldyBFcnJvcihcIkFVUjA3NzJcIik7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIGkocywgbiwgcikge1xuICAgICAgICBjb25zdCBvID0gbnVsbCA9PSBuO1xuICAgICAgICBjb25zdCBsID0gbyA/IHMgOiBzLmNvbnN0cnVjdG9yO1xuICAgICAgICBjb25zdCBoID0gbmV3IFdhdGNoRGVmaW5pdGlvbih0LCBvID8gZSA6IHIudmFsdWUpO1xuICAgICAgICBpZiAobykge1xuICAgICAgICAgICAgaWYgKCFDdChlKSAmJiAobnVsbCA9PSBlIHx8ICEoZSBpbiBsLnByb3RvdHlwZSkpKSB0aHJvdyBuZXcgRXJyb3IoYEFVUjA3NzM6JHtTdHJpbmcoZSl9QCR7bC5uYW1lfX1gKTtcbiAgICAgICAgfSBlbHNlIGlmICghQ3QobnVsbCA9PT0gciB8fCB2b2lkIDAgPT09IHIgPyB2b2lkIDAgOiByLnZhbHVlKSkgdGhyb3cgbmV3IEVycm9yKGBBVVIwNzc0OiR7U3RyaW5nKG4pfWApO1xuICAgICAgICBfZS5hZGQobCwgaCk7XG4gICAgICAgIGlmIChNZS5pc1R5cGUobCkpIE1lLmdldERlZmluaXRpb24obCkud2F0Y2hlcy5wdXNoKGgpO1xuICAgICAgICBpZiAoc2kuaXNUeXBlKGwpKSBzaS5nZXREZWZpbml0aW9uKGwpLndhdGNoZXMucHVzaChoKTtcbiAgICB9O1xufVxuXG5jbGFzcyBXYXRjaERlZmluaXRpb24ge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUpIHtcbiAgICAgICAgdGhpcy5leHByZXNzaW9uID0gdDtcbiAgICAgICAgdGhpcy5jYWxsYmFjayA9IGU7XG4gICAgfVxufVxuXG5jb25zdCBGZSA9IGg7XG5cbmNvbnN0IFZlID0gZHQoXCJ3YXRjaFwiKTtcblxuY29uc3QgX2UgPSBPYmplY3QuZnJlZXplKHtcbiAgICBuYW1lOiBWZSxcbiAgICBhZGQodCwgZSkge1xuICAgICAgICBsZXQgaSA9IGh0KFZlLCB0KTtcbiAgICAgICAgaWYgKG51bGwgPT0gaSkgY3QoVmUsIGkgPSBbXSwgdCk7XG4gICAgICAgIGkucHVzaChlKTtcbiAgICB9LFxuICAgIGdldEFubm90YXRpb24odCkge1xuICAgICAgICB2YXIgZTtcbiAgICAgICAgcmV0dXJuIG51bGwgIT09IChlID0gaHQoVmUsIHQpKSAmJiB2b2lkIDAgIT09IGUgPyBlIDogRmU7XG4gICAgfVxufSk7XG5cbmZ1bmN0aW9uIGplKHQpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24oZSkge1xuICAgICAgICByZXR1cm4gc2kuZGVmaW5lKHQsIGUpO1xuICAgIH07XG59XG5cbmZ1bmN0aW9uIE5lKHQpIHtcbiAgICBpZiAodm9pZCAwID09PSB0KSByZXR1cm4gZnVuY3Rpb24odCkge1xuICAgICAgICBlaSh0LCBcInNoYWRvd09wdGlvbnNcIiwge1xuICAgICAgICAgICAgbW9kZTogXCJvcGVuXCJcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICBpZiAoIUN0KHQpKSByZXR1cm4gZnVuY3Rpb24oZSkge1xuICAgICAgICBlaShlLCBcInNoYWRvd09wdGlvbnNcIiwgdCk7XG4gICAgfTtcbiAgICBlaSh0LCBcInNoYWRvd09wdGlvbnNcIiwge1xuICAgICAgICBtb2RlOiBcIm9wZW5cIlxuICAgIH0pO1xufVxuXG5mdW5jdGlvbiBXZSh0KSB7XG4gICAgaWYgKHZvaWQgMCA9PT0gdCkgcmV0dXJuIGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgZWkodCwgXCJjb250YWluZXJsZXNzXCIsIHRydWUpO1xuICAgIH07XG4gICAgZWkodCwgXCJjb250YWluZXJsZXNzXCIsIHRydWUpO1xufVxuXG5jb25zdCBIZSA9IG5ldyBXZWFrTWFwO1xuXG5jbGFzcyBDdXN0b21FbGVtZW50RGVmaW5pdGlvbiB7XG4gICAgY29uc3RydWN0b3IodCwgZSwgaSwgcywgbiwgciwgbywgbCwgaCwgYSwgYywgdSwgZiwgZCwgbSwgdiwgcCwgZywgdywgYiwgeCkge1xuICAgICAgICB0aGlzLlR5cGUgPSB0O1xuICAgICAgICB0aGlzLm5hbWUgPSBlO1xuICAgICAgICB0aGlzLmFsaWFzZXMgPSBpO1xuICAgICAgICB0aGlzLmtleSA9IHM7XG4gICAgICAgIHRoaXMuY2FjaGUgPSBuO1xuICAgICAgICB0aGlzLmNhcHR1cmUgPSByO1xuICAgICAgICB0aGlzLnRlbXBsYXRlID0gbztcbiAgICAgICAgdGhpcy5pbnN0cnVjdGlvbnMgPSBsO1xuICAgICAgICB0aGlzLmRlcGVuZGVuY2llcyA9IGg7XG4gICAgICAgIHRoaXMuaW5qZWN0YWJsZSA9IGE7XG4gICAgICAgIHRoaXMubmVlZHNDb21waWxlID0gYztcbiAgICAgICAgdGhpcy5zdXJyb2dhdGVzID0gdTtcbiAgICAgICAgdGhpcy5iaW5kYWJsZXMgPSBmO1xuICAgICAgICB0aGlzLmNoaWxkcmVuT2JzZXJ2ZXJzID0gZDtcbiAgICAgICAgdGhpcy5jb250YWluZXJsZXNzID0gbTtcbiAgICAgICAgdGhpcy5pc1N0cmljdEJpbmRpbmcgPSB2O1xuICAgICAgICB0aGlzLnNoYWRvd09wdGlvbnMgPSBwO1xuICAgICAgICB0aGlzLmhhc1Nsb3RzID0gZztcbiAgICAgICAgdGhpcy5lbmhhbmNlID0gdztcbiAgICAgICAgdGhpcy53YXRjaGVzID0gYjtcbiAgICAgICAgdGhpcy5wcm9jZXNzQ29udGVudCA9IHg7XG4gICAgfVxuICAgIGdldCB0eXBlKCkge1xuICAgICAgICByZXR1cm4gMTtcbiAgICB9XG4gICAgc3RhdGljIGNyZWF0ZSh0LCBlID0gbnVsbCkge1xuICAgICAgICBpZiAobnVsbCA9PT0gZSkge1xuICAgICAgICAgICAgY29uc3QgaSA9IHQ7XG4gICAgICAgICAgICBpZiAoQXQoaSkpIHRocm93IG5ldyBFcnJvcihgQVVSMDc2MToke3R9YCk7XG4gICAgICAgICAgICBjb25zdCBzID0gZChcIm5hbWVcIiwgaSwgdGkpO1xuICAgICAgICAgICAgaWYgKEN0KGkuVHlwZSkpIGUgPSBpLlR5cGU7IGVsc2UgZSA9IHNpLmdlbmVyYXRlVHlwZShtKHMpKTtcbiAgICAgICAgICAgIHJldHVybiBuZXcgQ3VzdG9tRWxlbWVudERlZmluaXRpb24oZSwgcywgZihpLmFsaWFzZXMpLCBkKFwia2V5XCIsIGksICgoKSA9PiBzaS5rZXlGcm9tKHMpKSksIGQoXCJjYWNoZVwiLCBpLCBHZSksIGQoXCJjYXB0dXJlXCIsIGksIEtlKSwgZChcInRlbXBsYXRlXCIsIGksIFhlKSwgZihpLmluc3RydWN0aW9ucyksIGYoaS5kZXBlbmRlbmNpZXMpLCBkKFwiaW5qZWN0YWJsZVwiLCBpLCBYZSksIGQoXCJuZWVkc0NvbXBpbGVcIiwgaSwgWWUpLCBmKGkuc3Vycm9nYXRlcyksIEJ0LmZyb20oZSwgaS5iaW5kYWJsZXMpLCBTZS5mcm9tKGkuY2hpbGRyZW5PYnNlcnZlcnMpLCBkKFwiY29udGFpbmVybGVzc1wiLCBpLCBLZSksIGQoXCJpc1N0cmljdEJpbmRpbmdcIiwgaSwgS2UpLCBkKFwic2hhZG93T3B0aW9uc1wiLCBpLCBYZSksIGQoXCJoYXNTbG90c1wiLCBpLCBLZSksIGQoXCJlbmhhbmNlXCIsIGksIEtlKSwgZChcIndhdGNoZXNcIiwgaSwgUWUpLCB2KFwicHJvY2Vzc0NvbnRlbnRcIiwgZSwgWGUpKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoQXQodCkpIHJldHVybiBuZXcgQ3VzdG9tRWxlbWVudERlZmluaXRpb24oZSwgdCwgZihpaShlLCBcImFsaWFzZXNcIiksIGUuYWxpYXNlcyksIHNpLmtleUZyb20odCksIHYoXCJjYWNoZVwiLCBlLCBHZSksIHYoXCJjYXB0dXJlXCIsIGUsIEtlKSwgdihcInRlbXBsYXRlXCIsIGUsIFhlKSwgZihpaShlLCBcImluc3RydWN0aW9uc1wiKSwgZS5pbnN0cnVjdGlvbnMpLCBmKGlpKGUsIFwiZGVwZW5kZW5jaWVzXCIpLCBlLmRlcGVuZGVuY2llcyksIHYoXCJpbmplY3RhYmxlXCIsIGUsIFhlKSwgdihcIm5lZWRzQ29tcGlsZVwiLCBlLCBZZSksIGYoaWkoZSwgXCJzdXJyb2dhdGVzXCIpLCBlLnN1cnJvZ2F0ZXMpLCBCdC5mcm9tKGUsIC4uLkJ0LmdldEFsbChlKSwgaWkoZSwgXCJiaW5kYWJsZXNcIiksIGUuYmluZGFibGVzKSwgU2UuZnJvbSguLi5TZS5nZXRBbGwoZSksIGlpKGUsIFwiY2hpbGRyZW5PYnNlcnZlcnNcIiksIGUuY2hpbGRyZW5PYnNlcnZlcnMpLCB2KFwiY29udGFpbmVybGVzc1wiLCBlLCBLZSksIHYoXCJpc1N0cmljdEJpbmRpbmdcIiwgZSwgS2UpLCB2KFwic2hhZG93T3B0aW9uc1wiLCBlLCBYZSksIHYoXCJoYXNTbG90c1wiLCBlLCBLZSksIHYoXCJlbmhhbmNlXCIsIGUsIEtlKSwgZihfZS5nZXRBbm5vdGF0aW9uKGUpLCBlLndhdGNoZXMpLCB2KFwicHJvY2Vzc0NvbnRlbnRcIiwgZSwgWGUpKTtcbiAgICAgICAgY29uc3QgaSA9IGQoXCJuYW1lXCIsIHQsIHRpKTtcbiAgICAgICAgcmV0dXJuIG5ldyBDdXN0b21FbGVtZW50RGVmaW5pdGlvbihlLCBpLCBmKGlpKGUsIFwiYWxpYXNlc1wiKSwgdC5hbGlhc2VzLCBlLmFsaWFzZXMpLCBzaS5rZXlGcm9tKGkpLCBwKFwiY2FjaGVcIiwgdCwgZSwgR2UpLCBwKFwiY2FwdHVyZVwiLCB0LCBlLCBLZSksIHAoXCJ0ZW1wbGF0ZVwiLCB0LCBlLCBYZSksIGYoaWkoZSwgXCJpbnN0cnVjdGlvbnNcIiksIHQuaW5zdHJ1Y3Rpb25zLCBlLmluc3RydWN0aW9ucyksIGYoaWkoZSwgXCJkZXBlbmRlbmNpZXNcIiksIHQuZGVwZW5kZW5jaWVzLCBlLmRlcGVuZGVuY2llcyksIHAoXCJpbmplY3RhYmxlXCIsIHQsIGUsIFhlKSwgcChcIm5lZWRzQ29tcGlsZVwiLCB0LCBlLCBZZSksIGYoaWkoZSwgXCJzdXJyb2dhdGVzXCIpLCB0LnN1cnJvZ2F0ZXMsIGUuc3Vycm9nYXRlcyksIEJ0LmZyb20oZSwgLi4uQnQuZ2V0QWxsKGUpLCBpaShlLCBcImJpbmRhYmxlc1wiKSwgZS5iaW5kYWJsZXMsIHQuYmluZGFibGVzKSwgU2UuZnJvbSguLi5TZS5nZXRBbGwoZSksIGlpKGUsIFwiY2hpbGRyZW5PYnNlcnZlcnNcIiksIGUuY2hpbGRyZW5PYnNlcnZlcnMsIHQuY2hpbGRyZW5PYnNlcnZlcnMpLCBwKFwiY29udGFpbmVybGVzc1wiLCB0LCBlLCBLZSksIHAoXCJpc1N0cmljdEJpbmRpbmdcIiwgdCwgZSwgS2UpLCBwKFwic2hhZG93T3B0aW9uc1wiLCB0LCBlLCBYZSksIHAoXCJoYXNTbG90c1wiLCB0LCBlLCBLZSksIHAoXCJlbmhhbmNlXCIsIHQsIGUsIEtlKSwgZih0LndhdGNoZXMsIF9lLmdldEFubm90YXRpb24oZSksIGUud2F0Y2hlcyksIHAoXCJwcm9jZXNzQ29udGVudFwiLCB0LCBlLCBYZSkpO1xuICAgIH1cbiAgICBzdGF0aWMgZ2V0T3JDcmVhdGUodCkge1xuICAgICAgICBpZiAodCBpbnN0YW5jZW9mIEN1c3RvbUVsZW1lbnREZWZpbml0aW9uKSByZXR1cm4gdDtcbiAgICAgICAgaWYgKEhlLmhhcyh0KSkgcmV0dXJuIEhlLmdldCh0KTtcbiAgICAgICAgY29uc3QgZSA9IEN1c3RvbUVsZW1lbnREZWZpbml0aW9uLmNyZWF0ZSh0KTtcbiAgICAgICAgSGUuc2V0KHQsIGUpO1xuICAgICAgICBjdChaZSwgZSwgZS5UeXBlKTtcbiAgICAgICAgcmV0dXJuIGU7XG4gICAgfVxuICAgIHJlZ2lzdGVyKHQpIHtcbiAgICAgICAgY29uc3Qge1R5cGU6IGUsIGtleTogaSwgYWxpYXNlczogc30gPSB0aGlzO1xuICAgICAgICBpZiAoIXQuaGFzKGksIGZhbHNlKSkge1xuICAgICAgICAgICAgYy50cmFuc2llbnQoaSwgZSkucmVnaXN0ZXIodCk7XG4gICAgICAgICAgICBjLmFsaWFzVG8oaSwgZSkucmVnaXN0ZXIodCk7XG4gICAgICAgICAgICBMKHMsIHNpLCBpLCB0KTtcbiAgICAgICAgfVxuICAgIH1cbn1cblxuY29uc3QgemUgPSB7XG4gICAgbmFtZTogdm9pZCAwLFxuICAgIHNlYXJjaFBhcmVudHM6IGZhbHNlLFxuICAgIG9wdGlvbmFsOiBmYWxzZVxufTtcblxuY29uc3QgR2UgPSAoKSA9PiAwO1xuXG5jb25zdCBYZSA9ICgpID0+IG51bGw7XG5cbmNvbnN0IEtlID0gKCkgPT4gZmFsc2U7XG5cbmNvbnN0IFllID0gKCkgPT4gdHJ1ZTtcblxuY29uc3QgUWUgPSAoKSA9PiBoO1xuXG5jb25zdCBaZSA9IG10KFwiY3VzdG9tLWVsZW1lbnRcIik7XG5cbmNvbnN0IEplID0gdCA9PiBgJHtaZX06JHt0fWA7XG5cbmNvbnN0IHRpID0gKCgpID0+IHtcbiAgICBsZXQgdCA9IDA7XG4gICAgcmV0dXJuICgpID0+IGB1bm5hbWVkLSR7Kyt0fWA7XG59KSgpO1xuXG5jb25zdCBlaSA9ICh0LCBlLCBpKSA9PiB7XG4gICAgY3QoZHQoZSksIGksIHQpO1xufTtcblxuY29uc3QgaWkgPSAodCwgZSkgPT4gaHQoZHQoZSksIHQpO1xuXG5jb25zdCBzaSA9IE9iamVjdC5mcmVlemUoe1xuICAgIG5hbWU6IFplLFxuICAgIGtleUZyb206IEplLFxuICAgIGlzVHlwZSh0KSB7XG4gICAgICAgIHJldHVybiBDdCh0KSAmJiBhdChaZSwgdCk7XG4gICAgfSxcbiAgICBmb3IodCwgZSA9IHplKSB7XG4gICAgICAgIGlmICh2b2lkIDAgPT09IGUubmFtZSAmJiB0cnVlICE9PSBlLnNlYXJjaFBhcmVudHMpIHtcbiAgICAgICAgICAgIGNvbnN0IGkgPSBpcyh0LCBaZSk7XG4gICAgICAgICAgICBpZiAobnVsbCA9PT0gaSkge1xuICAgICAgICAgICAgICAgIGlmICh0cnVlID09PSBlLm9wdGlvbmFsKSByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJBVVIwNzYyXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHZvaWQgMCAhPT0gZS5uYW1lKSB7XG4gICAgICAgICAgICBpZiAodHJ1ZSAhPT0gZS5zZWFyY2hQYXJlbnRzKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgaSA9IGlzKHQsIFplKTtcbiAgICAgICAgICAgICAgICBpZiAobnVsbCA9PT0gaSkgdGhyb3cgbmV3IEVycm9yKFwiQVVSMDc2M1wiKTtcbiAgICAgICAgICAgICAgICBpZiAoaS5pcyhlLm5hbWUpKSByZXR1cm4gaTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBsZXQgaSA9IHQ7XG4gICAgICAgICAgICBsZXQgcyA9IGZhbHNlO1xuICAgICAgICAgICAgd2hpbGUgKG51bGwgIT09IGkpIHtcbiAgICAgICAgICAgICAgICBjb25zdCB0ID0gaXMoaSwgWmUpO1xuICAgICAgICAgICAgICAgIGlmIChudWxsICE9PSB0KSB7XG4gICAgICAgICAgICAgICAgICAgIHMgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICBpZiAodC5pcyhlLm5hbWUpKSByZXR1cm4gdDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaSA9IGFzKGkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHMpIHJldHVybjtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkFVUjA3NjRcIik7XG4gICAgICAgIH1cbiAgICAgICAgbGV0IGkgPSB0O1xuICAgICAgICB3aGlsZSAobnVsbCAhPT0gaSkge1xuICAgICAgICAgICAgY29uc3QgdCA9IGlzKGksIFplKTtcbiAgICAgICAgICAgIGlmIChudWxsICE9PSB0KSByZXR1cm4gdDtcbiAgICAgICAgICAgIGkgPSBhcyhpKTtcbiAgICAgICAgfVxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJBVVIwNzY1XCIpO1xuICAgIH0sXG4gICAgZGVmaW5lKHQsIGUpIHtcbiAgICAgICAgY29uc3QgaSA9IEN1c3RvbUVsZW1lbnREZWZpbml0aW9uLmNyZWF0ZSh0LCBlKTtcbiAgICAgICAgY3QoWmUsIGksIGkuVHlwZSk7XG4gICAgICAgIGN0KFplLCBpLCBpKTtcbiAgICAgICAgdnQoaS5UeXBlLCBaZSk7XG4gICAgICAgIHJldHVybiBpLlR5cGU7XG4gICAgfSxcbiAgICBnZXREZWZpbml0aW9uKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IGh0KFplLCB0KTtcbiAgICAgICAgaWYgKHZvaWQgMCA9PT0gZSkgdGhyb3cgbmV3IEVycm9yKGBBVVIwNzYwOiR7dC5uYW1lfWApO1xuICAgICAgICByZXR1cm4gZTtcbiAgICB9LFxuICAgIGFubm90YXRlOiBlaSxcbiAgICBnZXRBbm5vdGF0aW9uOiBpaSxcbiAgICBnZW5lcmF0ZU5hbWU6IHRpLFxuICAgIGNyZWF0ZUluamVjdGFibGUoKSB7XG4gICAgICAgIGNvbnN0IHQgPSBmdW5jdGlvbihlLCBpLCBzKSB7XG4gICAgICAgICAgICBjb25zdCBuID0gbC5nZXRPckNyZWF0ZUFubm90YXRpb25QYXJhbVR5cGVzKGUpO1xuICAgICAgICAgICAgbltzXSA9IHQ7XG4gICAgICAgICAgICByZXR1cm4gZTtcbiAgICAgICAgfTtcbiAgICAgICAgdC5yZWdpc3RlciA9IGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgcmVzb2x2ZShlLCBpKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChpLmhhcyh0LCB0cnVlKSkgcmV0dXJuIGkuZ2V0KHQpOyBlbHNlIHJldHVybiBudWxsO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiB0O1xuICAgIH0sXG4gICAgZ2VuZXJhdGVUeXBlOiBmdW5jdGlvbigpIHtcbiAgICAgICAgY29uc3QgdCA9IHtcbiAgICAgICAgICAgIHZhbHVlOiBcIlwiLFxuICAgICAgICAgICAgd3JpdGFibGU6IGZhbHNlLFxuICAgICAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICAgICAgfTtcbiAgICAgICAgY29uc3QgZSA9IHt9O1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24oaSwgcyA9IGUpIHtcbiAgICAgICAgICAgIGNvbnN0IG4gPSBjbGFzcyB7fTtcbiAgICAgICAgICAgIHQudmFsdWUgPSBpO1xuICAgICAgICAgICAgUmVmbGVjdC5kZWZpbmVQcm9wZXJ0eShuLCBcIm5hbWVcIiwgdCk7XG4gICAgICAgICAgICBpZiAocyAhPT0gZSkgT2JqZWN0LmFzc2lnbihuLnByb3RvdHlwZSwgcyk7XG4gICAgICAgICAgICByZXR1cm4gbjtcbiAgICAgICAgfTtcbiAgICB9KClcbn0pO1xuXG5jb25zdCBuaSA9IGR0KFwicHJvY2Vzc0NvbnRlbnRcIik7XG5cbmZ1bmN0aW9uIHJpKHQpIHtcbiAgICByZXR1cm4gdm9pZCAwID09PSB0ID8gZnVuY3Rpb24odCwgZSwgaSkge1xuICAgICAgICBjdChuaSwgb2kodCwgZSksIHQpO1xuICAgIH0gOiBmdW5jdGlvbihlKSB7XG4gICAgICAgIHQgPSBvaShlLCB0KTtcbiAgICAgICAgY29uc3QgaSA9IGh0KFplLCBlKTtcbiAgICAgICAgaWYgKHZvaWQgMCAhPT0gaSkgaS5wcm9jZXNzQ29udGVudCA9IHQ7IGVsc2UgY3QobmksIHQsIGUpO1xuICAgICAgICByZXR1cm4gZTtcbiAgICB9O1xufVxuXG5mdW5jdGlvbiBvaSh0LCBlKSB7XG4gICAgaWYgKEF0KGUpKSBlID0gdFtlXTtcbiAgICBpZiAoIUN0KGUpKSB0aHJvdyBuZXcgRXJyb3IoYEFVUjA3NjY6JHt0eXBlb2YgZX1gKTtcbiAgICByZXR1cm4gZTtcbn1cblxuY2xhc3MgQ2xhc3NBdHRyaWJ1dGVBY2Nlc3NvciB7XG4gICAgY29uc3RydWN0b3IodCkge1xuICAgICAgICB0aGlzLm9iaiA9IHQ7XG4gICAgICAgIHRoaXMudHlwZSA9IDIgfCA0O1xuICAgICAgICB0aGlzLnZhbHVlID0gXCJcIjtcbiAgICAgICAgdGhpcy5vdiA9IFwiXCI7XG4gICAgICAgIHRoaXMuSiA9IHt9O1xuICAgICAgICB0aGlzLnR0ID0gMDtcbiAgICAgICAgdGhpcy5IID0gZmFsc2U7XG4gICAgfVxuICAgIGdldCBkb05vdENhY2hlKCkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgZ2V0VmFsdWUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnZhbHVlO1xuICAgIH1cbiAgICBzZXRWYWx1ZSh0LCBlKSB7XG4gICAgICAgIHRoaXMudmFsdWUgPSB0O1xuICAgICAgICB0aGlzLkggPSB0ICE9PSB0aGlzLm92O1xuICAgICAgICBpZiAoMCA9PT0gKDI1NiAmIGUpKSB0aGlzLksoKTtcbiAgICB9XG4gICAgSygpIHtcbiAgICAgICAgaWYgKHRoaXMuSCkge1xuICAgICAgICAgICAgdGhpcy5IID0gZmFsc2U7XG4gICAgICAgICAgICBjb25zdCB0ID0gdGhpcy52YWx1ZTtcbiAgICAgICAgICAgIGNvbnN0IGUgPSB0aGlzLko7XG4gICAgICAgICAgICBjb25zdCBpID0gbGkodCk7XG4gICAgICAgICAgICBsZXQgcyA9IHRoaXMudHQ7XG4gICAgICAgICAgICB0aGlzLm92ID0gdDtcbiAgICAgICAgICAgIGlmIChpLmxlbmd0aCA+IDApIHRoaXMuZXQoaSk7XG4gICAgICAgICAgICB0aGlzLnR0ICs9IDE7XG4gICAgICAgICAgICBpZiAoMCA9PT0gcykgcmV0dXJuO1xuICAgICAgICAgICAgcyAtPSAxO1xuICAgICAgICAgICAgZm9yIChjb25zdCB0IGluIGUpIHtcbiAgICAgICAgICAgICAgICBpZiAoIU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChlLCB0KSB8fCBlW3RdICE9PSBzKSBjb250aW51ZTtcbiAgICAgICAgICAgICAgICB0aGlzLm9iai5jbGFzc0xpc3QucmVtb3ZlKHQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIGV0KHQpIHtcbiAgICAgICAgY29uc3QgZSA9IHRoaXMub2JqO1xuICAgICAgICBjb25zdCBpID0gdC5sZW5ndGg7XG4gICAgICAgIGxldCBzID0gMDtcbiAgICAgICAgbGV0IG47XG4gICAgICAgIGZvciAoO3MgPCBpOyBzKyspIHtcbiAgICAgICAgICAgIG4gPSB0W3NdO1xuICAgICAgICAgICAgaWYgKDAgPT09IG4ubGVuZ3RoKSBjb250aW51ZTtcbiAgICAgICAgICAgIHRoaXMuSltuXSA9IHRoaXMudHQ7XG4gICAgICAgICAgICBlLmNsYXNzTGlzdC5hZGQobik7XG4gICAgICAgIH1cbiAgICB9XG59XG5cbmZ1bmN0aW9uIGxpKHQpIHtcbiAgICBpZiAoQXQodCkpIHJldHVybiBoaSh0KTtcbiAgICBpZiAoXCJvYmplY3RcIiAhPT0gdHlwZW9mIHQpIHJldHVybiBoO1xuICAgIGlmICh0IGluc3RhbmNlb2YgQXJyYXkpIHtcbiAgICAgICAgY29uc3QgZSA9IHQubGVuZ3RoO1xuICAgICAgICBpZiAoZSA+IDApIHtcbiAgICAgICAgICAgIGNvbnN0IGkgPSBbXTtcbiAgICAgICAgICAgIGxldCBzID0gMDtcbiAgICAgICAgICAgIGZvciAoO2UgPiBzOyArK3MpIGkucHVzaCguLi5saSh0W3NdKSk7XG4gICAgICAgICAgICByZXR1cm4gaTtcbiAgICAgICAgfSBlbHNlIHJldHVybiBoO1xuICAgIH1cbiAgICBjb25zdCBlID0gW107XG4gICAgbGV0IGk7XG4gICAgZm9yIChpIGluIHQpIGlmIChCb29sZWFuKHRbaV0pKSBpZiAoaS5pbmNsdWRlcyhcIiBcIikpIGUucHVzaCguLi5oaShpKSk7IGVsc2UgZS5wdXNoKGkpO1xuICAgIHJldHVybiBlO1xufVxuXG5mdW5jdGlvbiBoaSh0KSB7XG4gICAgY29uc3QgZSA9IHQubWF0Y2goL1xcUysvZyk7XG4gICAgaWYgKG51bGwgPT09IGUpIHJldHVybiBoO1xuICAgIHJldHVybiBlO1xufVxuXG5mdW5jdGlvbiBhaSguLi50KSB7XG4gICAgcmV0dXJuIG5ldyBDU1NNb2R1bGVzUHJvY2Vzc29yUmVnaXN0cnkodCk7XG59XG5cbmNsYXNzIENTU01vZHVsZXNQcm9jZXNzb3JSZWdpc3RyeSB7XG4gICAgY29uc3RydWN0b3IodCkge1xuICAgICAgICB0aGlzLm1vZHVsZXMgPSB0O1xuICAgIH1cbiAgICByZWdpc3Rlcih0KSB7XG4gICAgICAgIHZhciBlO1xuICAgICAgICBjb25zdCBpID0gT2JqZWN0LmFzc2lnbih7fSwgLi4udGhpcy5tb2R1bGVzKTtcbiAgICAgICAgY29uc3QgcyA9IE1lLmRlZmluZSh7XG4gICAgICAgICAgICBuYW1lOiBcImNsYXNzXCIsXG4gICAgICAgICAgICBiaW5kYWJsZXM6IFsgXCJ2YWx1ZVwiIF1cbiAgICAgICAgfSwgKGUgPSBjbGFzcyBDdXN0b21BdHRyaWJ1dGVDbGFzcyB7XG4gICAgICAgICAgICBjb25zdHJ1Y3Rvcih0KSB7XG4gICAgICAgICAgICAgICAgdGhpcy5lbGVtZW50ID0gdDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGJpbmRpbmcoKSB7XG4gICAgICAgICAgICAgICAgdGhpcy52YWx1ZUNoYW5nZWQoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhbHVlQ2hhbmdlZCgpIHtcbiAgICAgICAgICAgICAgICBpZiAoIXRoaXMudmFsdWUpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5lbGVtZW50LmNsYXNzTmFtZSA9IFwiXCI7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy5lbGVtZW50LmNsYXNzTmFtZSA9IGxpKHRoaXMudmFsdWUpLm1hcCgodCA9PiBpW3RdIHx8IHQpKS5qb2luKFwiIFwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSwgZS5pbmplY3QgPSBbIG5zIF0sIGUpKTtcbiAgICAgICAgdC5yZWdpc3RlcihzKTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIGNpKC4uLnQpIHtcbiAgICByZXR1cm4gbmV3IFNoYWRvd0RPTVJlZ2lzdHJ5KHQpO1xufVxuXG5jb25zdCB1aSA9IGwuY3JlYXRlSW50ZXJmYWNlKFwiSVNoYWRvd0RPTVN0eWxlRmFjdG9yeVwiLCAodCA9PiB0LmNhY2hlZENhbGxiYWNrKCh0ID0+IHtcbiAgICBpZiAoQWRvcHRlZFN0eWxlU2hlZXRzU3R5bGVzLnN1cHBvcnRlZCh0LmdldChLdCkpKSByZXR1cm4gdC5nZXQoQWRvcHRlZFN0eWxlU2hlZXRzU3R5bGVzRmFjdG9yeSk7XG4gICAgcmV0dXJuIHQuZ2V0KFN0eWxlRWxlbWVudFN0eWxlc0ZhY3RvcnkpO1xufSkpKSk7XG5cbmNsYXNzIFNoYWRvd0RPTVJlZ2lzdHJ5IHtcbiAgICBjb25zdHJ1Y3Rvcih0KSB7XG4gICAgICAgIHRoaXMuY3NzID0gdDtcbiAgICB9XG4gICAgcmVnaXN0ZXIodCkge1xuICAgICAgICBjb25zdCBlID0gdC5nZXQoZGkpO1xuICAgICAgICBjb25zdCBpID0gdC5nZXQodWkpO1xuICAgICAgICB0LnJlZ2lzdGVyKGMuaW5zdGFuY2UoZmksIGkuY3JlYXRlU3R5bGVzKHRoaXMuY3NzLCBlKSkpO1xuICAgIH1cbn1cblxuY2xhc3MgQWRvcHRlZFN0eWxlU2hlZXRzU3R5bGVzRmFjdG9yeSB7XG4gICAgY29uc3RydWN0b3IodCkge1xuICAgICAgICB0aGlzLnAgPSB0O1xuICAgICAgICB0aGlzLmNhY2hlID0gbmV3IE1hcDtcbiAgICB9XG4gICAgY3JlYXRlU3R5bGVzKHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBBZG9wdGVkU3R5bGVTaGVldHNTdHlsZXModGhpcy5wLCB0LCB0aGlzLmNhY2hlLCBlKTtcbiAgICB9XG59XG5cbkFkb3B0ZWRTdHlsZVNoZWV0c1N0eWxlc0ZhY3RvcnkuaW5qZWN0ID0gWyBLdCBdO1xuXG5jbGFzcyBTdHlsZUVsZW1lbnRTdHlsZXNGYWN0b3J5IHtcbiAgICBjb25zdHJ1Y3Rvcih0KSB7XG4gICAgICAgIHRoaXMucCA9IHQ7XG4gICAgfVxuICAgIGNyZWF0ZVN0eWxlcyh0LCBlKSB7XG4gICAgICAgIHJldHVybiBuZXcgU3R5bGVFbGVtZW50U3R5bGVzKHRoaXMucCwgdCwgZSk7XG4gICAgfVxufVxuXG5TdHlsZUVsZW1lbnRTdHlsZXNGYWN0b3J5LmluamVjdCA9IFsgS3QgXTtcblxuY29uc3QgZmkgPSBsLmNyZWF0ZUludGVyZmFjZShcIklTaGFkb3dET01TdHlsZXNcIik7XG5cbmNvbnN0IGRpID0gbC5jcmVhdGVJbnRlcmZhY2UoXCJJU2hhZG93RE9NR2xvYmFsU3R5bGVzXCIsICh0ID0+IHQuaW5zdGFuY2Uoe1xuICAgIGFwcGx5VG86IG9cbn0pKSk7XG5cbmNsYXNzIEFkb3B0ZWRTdHlsZVNoZWV0c1N0eWxlcyB7XG4gICAgY29uc3RydWN0b3IodCwgZSwgaSwgcyA9IG51bGwpIHtcbiAgICAgICAgdGhpcy5zaGFyZWRTdHlsZXMgPSBzO1xuICAgICAgICB0aGlzLnN0eWxlU2hlZXRzID0gZS5tYXAoKGUgPT4ge1xuICAgICAgICAgICAgbGV0IHM7XG4gICAgICAgICAgICBpZiAoZSBpbnN0YW5jZW9mIHQuQ1NTU3R5bGVTaGVldCkgcyA9IGU7IGVsc2Uge1xuICAgICAgICAgICAgICAgIHMgPSBpLmdldChlKTtcbiAgICAgICAgICAgICAgICBpZiAodm9pZCAwID09PSBzKSB7XG4gICAgICAgICAgICAgICAgICAgIHMgPSBuZXcgdC5DU1NTdHlsZVNoZWV0O1xuICAgICAgICAgICAgICAgICAgICBzLnJlcGxhY2VTeW5jKGUpO1xuICAgICAgICAgICAgICAgICAgICBpLnNldChlLCBzKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gcztcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICBzdGF0aWMgc3VwcG9ydGVkKHQpIHtcbiAgICAgICAgcmV0dXJuIFwiYWRvcHRlZFN0eWxlU2hlZXRzXCIgaW4gdC5TaGFkb3dSb290LnByb3RvdHlwZTtcbiAgICB9XG4gICAgYXBwbHlUbyh0KSB7XG4gICAgICAgIGlmIChudWxsICE9PSB0aGlzLnNoYXJlZFN0eWxlcykgdGhpcy5zaGFyZWRTdHlsZXMuYXBwbHlUbyh0KTtcbiAgICAgICAgdC5hZG9wdGVkU3R5bGVTaGVldHMgPSBbIC4uLnQuYWRvcHRlZFN0eWxlU2hlZXRzLCAuLi50aGlzLnN0eWxlU2hlZXRzIF07XG4gICAgfVxufVxuXG5jbGFzcyBTdHlsZUVsZW1lbnRTdHlsZXMge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUsIGkgPSBudWxsKSB7XG4gICAgICAgIHRoaXMucCA9IHQ7XG4gICAgICAgIHRoaXMubG9jYWxTdHlsZXMgPSBlO1xuICAgICAgICB0aGlzLnNoYXJlZFN0eWxlcyA9IGk7XG4gICAgfVxuICAgIGFwcGx5VG8odCkge1xuICAgICAgICBjb25zdCBlID0gdGhpcy5sb2NhbFN0eWxlcztcbiAgICAgICAgY29uc3QgaSA9IHRoaXMucDtcbiAgICAgICAgZm9yIChsZXQgcyA9IGUubGVuZ3RoIC0gMTsgcyA+IC0xOyAtLXMpIHtcbiAgICAgICAgICAgIGNvbnN0IG4gPSBpLmRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzdHlsZVwiKTtcbiAgICAgICAgICAgIG4uaW5uZXJIVE1MID0gZVtzXTtcbiAgICAgICAgICAgIHQucHJlcGVuZChuKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobnVsbCAhPT0gdGhpcy5zaGFyZWRTdHlsZXMpIHRoaXMuc2hhcmVkU3R5bGVzLmFwcGx5VG8odCk7XG4gICAgfVxufVxuXG5jb25zdCBtaSA9IHtcbiAgICBzaGFkb3dET00odCkge1xuICAgICAgICByZXR1cm4geGUuYmVmb3JlQ3JlYXRlKGcsIChlID0+IHtcbiAgICAgICAgICAgIGlmIChudWxsICE9IHQuc2hhcmVkU3R5bGVzKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgaSA9IGUuZ2V0KHVpKTtcbiAgICAgICAgICAgICAgICBlLnJlZ2lzdGVyKGMuaW5zdGFuY2UoZGksIGkuY3JlYXRlU3R5bGVzKHQuc2hhcmVkU3R5bGVzLCBudWxsKSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KSk7XG4gICAgfVxufTtcblxuY29uc3Qge2VudGVyOiB2aSwgZXhpdDogcGl9ID0gcTtcblxuY29uc3Qge3dyYXA6IGdpLCB1bndyYXA6IHdpfSA9IE07XG5cbmNsYXNzIENvbXB1dGVkV2F0Y2hlciB7XG4gICAgY29uc3RydWN0b3IodCwgZSwgaSwgcywgbikge1xuICAgICAgICB0aGlzLm9iaiA9IHQ7XG4gICAgICAgIHRoaXMuZ2V0ID0gaTtcbiAgICAgICAgdGhpcy5jYiA9IHM7XG4gICAgICAgIHRoaXMudXNlUHJveHkgPSBuO1xuICAgICAgICB0aGlzLmludGVyY2VwdG9yID0gdGhpcztcbiAgICAgICAgdGhpcy52YWx1ZSA9IHZvaWQgMDtcbiAgICAgICAgdGhpcy5pc0JvdW5kID0gZmFsc2U7XG4gICAgICAgIHRoaXMucnVubmluZyA9IGZhbHNlO1xuICAgICAgICB0aGlzLm9MID0gZTtcbiAgICB9XG4gICAgaGFuZGxlQ2hhbmdlKCkge1xuICAgICAgICB0aGlzLnJ1bigpO1xuICAgIH1cbiAgICBoYW5kbGVDb2xsZWN0aW9uQ2hhbmdlKCkge1xuICAgICAgICB0aGlzLnJ1bigpO1xuICAgIH1cbiAgICAkYmluZCgpIHtcbiAgICAgICAgaWYgKHRoaXMuaXNCb3VuZCkgcmV0dXJuO1xuICAgICAgICB0aGlzLmlzQm91bmQgPSB0cnVlO1xuICAgICAgICB0aGlzLmNvbXB1dGUoKTtcbiAgICB9XG4gICAgJHVuYmluZCgpIHtcbiAgICAgICAgaWYgKCF0aGlzLmlzQm91bmQpIHJldHVybjtcbiAgICAgICAgdGhpcy5pc0JvdW5kID0gZmFsc2U7XG4gICAgICAgIHRoaXMub2JzLmNsZWFyQWxsKCk7XG4gICAgfVxuICAgIHJ1bigpIHtcbiAgICAgICAgaWYgKCF0aGlzLmlzQm91bmQgfHwgdGhpcy5ydW5uaW5nKSByZXR1cm47XG4gICAgICAgIGNvbnN0IHQgPSB0aGlzLm9iajtcbiAgICAgICAgY29uc3QgZSA9IHRoaXMudmFsdWU7XG4gICAgICAgIGNvbnN0IGkgPSB0aGlzLmNvbXB1dGUoKTtcbiAgICAgICAgaWYgKCFPYmplY3QuaXMoaSwgZSkpIHRoaXMuY2IuY2FsbCh0LCBpLCBlLCB0KTtcbiAgICB9XG4gICAgY29tcHV0ZSgpIHtcbiAgICAgICAgdGhpcy5ydW5uaW5nID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5vYnMudmVyc2lvbisrO1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgdmkodGhpcyk7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy52YWx1ZSA9IHdpKHRoaXMuZ2V0LmNhbGwodm9pZCAwLCB0aGlzLnVzZVByb3h5ID8gZ2kodGhpcy5vYmopIDogdGhpcy5vYmosIHRoaXMpKTtcbiAgICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgICAgIHRoaXMub2JzLmNsZWFyKCk7XG4gICAgICAgICAgICB0aGlzLnJ1bm5pbmcgPSBmYWxzZTtcbiAgICAgICAgICAgIHBpKHRoaXMpO1xuICAgICAgICB9XG4gICAgfVxufVxuXG5jbGFzcyBFeHByZXNzaW9uV2F0Y2hlciB7XG4gICAgY29uc3RydWN0b3IodCwgZSwgaSwgcywgbikge1xuICAgICAgICB0aGlzLnNjb3BlID0gdDtcbiAgICAgICAgdGhpcy5sb2NhdG9yID0gZTtcbiAgICAgICAgdGhpcy5vTCA9IGk7XG4gICAgICAgIHRoaXMuZXhwcmVzc2lvbiA9IHM7XG4gICAgICAgIHRoaXMuY2FsbGJhY2sgPSBuO1xuICAgICAgICB0aGlzLmludGVyY2VwdG9yID0gdGhpcztcbiAgICAgICAgdGhpcy5pc0JvdW5kID0gZmFsc2U7XG4gICAgICAgIHRoaXMub2JqID0gdC5iaW5kaW5nQ29udGV4dDtcbiAgICB9XG4gICAgaGFuZGxlQ2hhbmdlKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IHRoaXMuZXhwcmVzc2lvbjtcbiAgICAgICAgY29uc3QgaSA9IHRoaXMub2JqO1xuICAgICAgICBjb25zdCBzID0gdGhpcy52YWx1ZTtcbiAgICAgICAgY29uc3QgbiA9IDEwMDgyID09PSBlLiRraW5kICYmIDEgPT09IHRoaXMub2JzLmNvdW50O1xuICAgICAgICBpZiAoIW4pIHtcbiAgICAgICAgICAgIHRoaXMub2JzLnZlcnNpb24rKztcbiAgICAgICAgICAgIHQgPSBlLmV2YWx1YXRlKDAsIHRoaXMuc2NvcGUsIHRoaXMubG9jYXRvciwgdGhpcyk7XG4gICAgICAgICAgICB0aGlzLm9icy5jbGVhcigpO1xuICAgICAgICB9XG4gICAgICAgIGlmICghT2JqZWN0LmlzKHQsIHMpKSB7XG4gICAgICAgICAgICB0aGlzLnZhbHVlID0gdDtcbiAgICAgICAgICAgIHRoaXMuY2FsbGJhY2suY2FsbChpLCB0LCBzLCBpKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAkYmluZCgpIHtcbiAgICAgICAgaWYgKHRoaXMuaXNCb3VuZCkgcmV0dXJuO1xuICAgICAgICB0aGlzLmlzQm91bmQgPSB0cnVlO1xuICAgICAgICB0aGlzLm9icy52ZXJzaW9uKys7XG4gICAgICAgIHRoaXMudmFsdWUgPSB0aGlzLmV4cHJlc3Npb24uZXZhbHVhdGUoMCwgdGhpcy5zY29wZSwgdGhpcy5sb2NhdG9yLCB0aGlzKTtcbiAgICAgICAgdGhpcy5vYnMuY2xlYXIoKTtcbiAgICB9XG4gICAgJHVuYmluZCgpIHtcbiAgICAgICAgaWYgKCF0aGlzLmlzQm91bmQpIHJldHVybjtcbiAgICAgICAgdGhpcy5pc0JvdW5kID0gZmFsc2U7XG4gICAgICAgIHRoaXMub2JzLmNsZWFyQWxsKCk7XG4gICAgICAgIHRoaXMudmFsdWUgPSB2b2lkIDA7XG4gICAgfVxufVxuXG4kKENvbXB1dGVkV2F0Y2hlcik7XG5cbiQoRXhwcmVzc2lvbldhdGNoZXIpO1xuXG5jb25zdCBiaSA9IGwuY3JlYXRlSW50ZXJmYWNlKFwiSUxpZmVjeWNsZUhvb2tzXCIpO1xuXG5jbGFzcyBMaWZlY3ljbGVIb29rc0VudHJ5IHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlKSB7XG4gICAgICAgIHRoaXMuZGVmaW5pdGlvbiA9IHQ7XG4gICAgICAgIHRoaXMuaW5zdGFuY2UgPSBlO1xuICAgIH1cbn1cblxuY2xhc3MgTGlmZWN5Y2xlSG9va3NEZWZpbml0aW9uIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlKSB7XG4gICAgICAgIHRoaXMuVHlwZSA9IHQ7XG4gICAgICAgIHRoaXMucHJvcGVydHlOYW1lcyA9IGU7XG4gICAgfVxuICAgIHN0YXRpYyBjcmVhdGUodCwgZSkge1xuICAgICAgICBjb25zdCBpID0gbmV3IFNldDtcbiAgICAgICAgbGV0IHMgPSBlLnByb3RvdHlwZTtcbiAgICAgICAgd2hpbGUgKHMgIT09IE9iamVjdC5wcm90b3R5cGUpIHtcbiAgICAgICAgICAgIGZvciAoY29uc3QgdCBvZiBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyhzKSkgaWYgKFwiY29uc3RydWN0b3JcIiAhPT0gdCkgaS5hZGQodCk7XG4gICAgICAgICAgICBzID0gT2JqZWN0LmdldFByb3RvdHlwZU9mKHMpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBuZXcgTGlmZWN5Y2xlSG9va3NEZWZpbml0aW9uKGUsIGkpO1xuICAgIH1cbiAgICByZWdpc3Rlcih0KSB7XG4gICAgICAgIGMuc2luZ2xldG9uKGJpLCB0aGlzLlR5cGUpLnJlZ2lzdGVyKHQpO1xuICAgIH1cbn1cblxuY29uc3QgeGkgPSBuZXcgV2Vha01hcDtcblxuY29uc3QgeWkgPSBkdChcImxpZmVjeWNsZS1ob29rc1wiKTtcblxuY29uc3Qga2kgPSBPYmplY3QuZnJlZXplKHtcbiAgICBuYW1lOiB5aSxcbiAgICBkZWZpbmUodCwgZSkge1xuICAgICAgICBjb25zdCBpID0gTGlmZWN5Y2xlSG9va3NEZWZpbml0aW9uLmNyZWF0ZSh0LCBlKTtcbiAgICAgICAgY3QoeWksIGksIGUpO1xuICAgICAgICB2dChlLCB5aSk7XG4gICAgICAgIHJldHVybiBpLlR5cGU7XG4gICAgfSxcbiAgICByZXNvbHZlKHQpIHtcbiAgICAgICAgbGV0IGUgPSB4aS5nZXQodCk7XG4gICAgICAgIGlmICh2b2lkIDAgPT09IGUpIHtcbiAgICAgICAgICAgIGUgPSBuZXcgTGlmZWN5Y2xlSG9va3NMb29rdXBJbXBsO1xuICAgICAgICAgICAgY29uc3QgaSA9IHQucm9vdDtcbiAgICAgICAgICAgIGNvbnN0IHMgPSBpLmlkID09PSB0LmlkID8gdC5nZXRBbGwoYmkpIDogdC5oYXMoYmksIGZhbHNlKSA/IFsgLi4uaS5nZXRBbGwoYmkpLCAuLi50LmdldEFsbChiaSkgXSA6IGkuZ2V0QWxsKGJpKTtcbiAgICAgICAgICAgIGxldCBuO1xuICAgICAgICAgICAgbGV0IHI7XG4gICAgICAgICAgICBsZXQgbztcbiAgICAgICAgICAgIGxldCBsO1xuICAgICAgICAgICAgbGV0IGg7XG4gICAgICAgICAgICBmb3IgKG4gb2Ygcykge1xuICAgICAgICAgICAgICAgIHIgPSBodCh5aSwgbi5jb25zdHJ1Y3Rvcik7XG4gICAgICAgICAgICAgICAgbyA9IG5ldyBMaWZlY3ljbGVIb29rc0VudHJ5KHIsIG4pO1xuICAgICAgICAgICAgICAgIGZvciAobCBvZiByLnByb3BlcnR5TmFtZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgaCA9IGVbbF07XG4gICAgICAgICAgICAgICAgICAgIGlmICh2b2lkIDAgPT09IGgpIGVbbF0gPSBbIG8gXTsgZWxzZSBoLnB1c2gobyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBlO1xuICAgIH1cbn0pO1xuXG5jbGFzcyBMaWZlY3ljbGVIb29rc0xvb2t1cEltcGwge31cblxuZnVuY3Rpb24gQ2koKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIHQoZSkge1xuICAgICAgICByZXR1cm4ga2kuZGVmaW5lKHt9LCBlKTtcbiAgICB9O1xufVxuXG5jb25zdCBBaSA9IGwuY3JlYXRlSW50ZXJmYWNlKFwiSVZpZXdGYWN0b3J5XCIpO1xuXG5jbGFzcyBWaWV3RmFjdG9yeSB7XG4gICAgY29uc3RydWN0b3IodCwgZSkge1xuICAgICAgICB0aGlzLmlzQ2FjaGluZyA9IGZhbHNlO1xuICAgICAgICB0aGlzLmNhY2hlID0gbnVsbDtcbiAgICAgICAgdGhpcy5jYWNoZVNpemUgPSAtMTtcbiAgICAgICAgdGhpcy5uYW1lID0gZS5uYW1lO1xuICAgICAgICB0aGlzLmNvbnRhaW5lciA9IHQ7XG4gICAgICAgIHRoaXMuZGVmID0gZTtcbiAgICB9XG4gICAgc2V0Q2FjaGVTaXplKHQsIGUpIHtcbiAgICAgICAgaWYgKHQpIHtcbiAgICAgICAgICAgIGlmIChcIipcIiA9PT0gdCkgdCA9IFZpZXdGYWN0b3J5Lm1heENhY2hlU2l6ZTsgZWxzZSBpZiAoQXQodCkpIHQgPSBwYXJzZUludCh0LCAxMCk7XG4gICAgICAgICAgICBpZiAoLTEgPT09IHRoaXMuY2FjaGVTaXplIHx8ICFlKSB0aGlzLmNhY2hlU2l6ZSA9IHQ7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuY2FjaGVTaXplID4gMCkgdGhpcy5jYWNoZSA9IFtdOyBlbHNlIHRoaXMuY2FjaGUgPSBudWxsO1xuICAgICAgICB0aGlzLmlzQ2FjaGluZyA9IHRoaXMuY2FjaGVTaXplID4gMDtcbiAgICB9XG4gICAgY2FuUmV0dXJuVG9DYWNoZSh0KSB7XG4gICAgICAgIHJldHVybiBudWxsICE9IHRoaXMuY2FjaGUgJiYgdGhpcy5jYWNoZS5sZW5ndGggPCB0aGlzLmNhY2hlU2l6ZTtcbiAgICB9XG4gICAgdHJ5UmV0dXJuVG9DYWNoZSh0KSB7XG4gICAgICAgIGlmICh0aGlzLmNhblJldHVyblRvQ2FjaGUodCkpIHtcbiAgICAgICAgICAgIHRoaXMuY2FjaGUucHVzaCh0KTtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgY3JlYXRlKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IHRoaXMuY2FjaGU7XG4gICAgICAgIGxldCBpO1xuICAgICAgICBpZiAobnVsbCAhPSBlICYmIGUubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgaSA9IGUucG9wKCk7XG4gICAgICAgICAgICByZXR1cm4gaTtcbiAgICAgICAgfVxuICAgICAgICBpID0gQ29udHJvbGxlci4kdmlldyh0aGlzLCB0KTtcbiAgICAgICAgcmV0dXJuIGk7XG4gICAgfVxufVxuXG5WaWV3RmFjdG9yeS5tYXhDYWNoZVNpemUgPSA2NTUzNTtcblxuY29uc3QgU2kgPSBuZXcgV2Vha1NldDtcblxuZnVuY3Rpb24gUmkodCkge1xuICAgIHJldHVybiAhU2kuaGFzKHQpO1xufVxuXG5mdW5jdGlvbiBFaSh0KSB7XG4gICAgU2kuYWRkKHQpO1xuICAgIHJldHVybiBDdXN0b21FbGVtZW50RGVmaW5pdGlvbi5jcmVhdGUodCk7XG59XG5cbmNvbnN0IEJpID0gbXQoXCJ2aWV3c1wiKTtcblxuY29uc3QgSWkgPSBPYmplY3QuZnJlZXplKHtcbiAgICBuYW1lOiBCaSxcbiAgICBoYXModCkge1xuICAgICAgICByZXR1cm4gQ3QodCkgJiYgKGF0KEJpLCB0KSB8fCBcIiR2aWV3c1wiIGluIHQpO1xuICAgIH0sXG4gICAgZ2V0KHQpIHtcbiAgICAgICAgaWYgKEN0KHQpICYmIFwiJHZpZXdzXCIgaW4gdCkge1xuICAgICAgICAgICAgY29uc3QgZSA9IHQuJHZpZXdzO1xuICAgICAgICAgICAgY29uc3QgaSA9IGUuZmlsdGVyKFJpKS5tYXAoRWkpO1xuICAgICAgICAgICAgZm9yIChjb25zdCBlIG9mIGkpIElpLmFkZCh0LCBlKTtcbiAgICAgICAgfVxuICAgICAgICBsZXQgZSA9IGh0KEJpLCB0KTtcbiAgICAgICAgaWYgKHZvaWQgMCA9PT0gZSkgY3QoQmksIGUgPSBbXSwgdCk7XG4gICAgICAgIHJldHVybiBlO1xuICAgIH0sXG4gICAgYWRkKHQsIGUpIHtcbiAgICAgICAgY29uc3QgaSA9IEN1c3RvbUVsZW1lbnREZWZpbml0aW9uLmNyZWF0ZShlKTtcbiAgICAgICAgbGV0IHMgPSBodChCaSwgdCk7XG4gICAgICAgIGlmICh2b2lkIDAgPT09IHMpIGN0KEJpLCBzID0gWyBpIF0sIHQpOyBlbHNlIHMucHVzaChpKTtcbiAgICAgICAgcmV0dXJuIHM7XG4gICAgfVxufSk7XG5cbmZ1bmN0aW9uIFRpKHQpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24oZSkge1xuICAgICAgICBJaS5hZGQoZSwgdCk7XG4gICAgfTtcbn1cblxuY29uc3QgRGkgPSBsLmNyZWF0ZUludGVyZmFjZShcIklWaWV3TG9jYXRvclwiLCAodCA9PiB0LnNpbmdsZXRvbihWaWV3TG9jYXRvcikpKTtcblxuY2xhc3MgVmlld0xvY2F0b3Ige1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICB0aGlzLml0ID0gbmV3IFdlYWtNYXA7XG4gICAgICAgIHRoaXMuc3QgPSBuZXcgTWFwO1xuICAgIH1cbiAgICBnZXRWaWV3Q29tcG9uZW50Rm9yT2JqZWN0KHQsIGUpIHtcbiAgICAgICAgaWYgKHQpIHtcbiAgICAgICAgICAgIGNvbnN0IGkgPSBJaS5oYXModC5jb25zdHJ1Y3RvcikgPyBJaS5nZXQodC5jb25zdHJ1Y3RvcikgOiBbXTtcbiAgICAgICAgICAgIGNvbnN0IHMgPSBDdChlKSA/IGUodCwgaSkgOiB0aGlzLm50KGksIGUpO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMucnQodCwgaSwgcyk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIHJ0KHQsIGUsIGkpIHtcbiAgICAgICAgbGV0IHMgPSB0aGlzLml0LmdldCh0KTtcbiAgICAgICAgbGV0IG47XG4gICAgICAgIGlmICh2b2lkIDAgPT09IHMpIHtcbiAgICAgICAgICAgIHMgPSB7fTtcbiAgICAgICAgICAgIHRoaXMuaXQuc2V0KHQsIHMpO1xuICAgICAgICB9IGVsc2UgbiA9IHNbaV07XG4gICAgICAgIGlmICh2b2lkIDAgPT09IG4pIHtcbiAgICAgICAgICAgIGNvbnN0IHIgPSB0aGlzLm90KHQsIGUsIGkpO1xuICAgICAgICAgICAgbiA9IHNpLmRlZmluZShzaS5nZXREZWZpbml0aW9uKHIpLCBjbGFzcyBleHRlbmRzIHIge1xuICAgICAgICAgICAgICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICAgICAgICAgICAgICBzdXBlcih0KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHNbaV0gPSBuO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBuO1xuICAgIH1cbiAgICBvdCh0LCBlLCBpKSB7XG4gICAgICAgIGxldCBzID0gdGhpcy5zdC5nZXQodC5jb25zdHJ1Y3Rvcik7XG4gICAgICAgIGxldCBuO1xuICAgICAgICBpZiAodm9pZCAwID09PSBzKSB7XG4gICAgICAgICAgICBzID0ge307XG4gICAgICAgICAgICB0aGlzLnN0LnNldCh0LmNvbnN0cnVjdG9yLCBzKTtcbiAgICAgICAgfSBlbHNlIG4gPSBzW2ldO1xuICAgICAgICBpZiAodm9pZCAwID09PSBuKSB7XG4gICAgICAgICAgICBuID0gc2kuZGVmaW5lKHRoaXMubHQoZSwgaSksIGNsYXNzIHtcbiAgICAgICAgICAgICAgICBjb25zdHJ1Y3Rvcih0KSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudmlld01vZGVsID0gdDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZGVmaW5lKHQsIGUsIGkpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcyA9IHRoaXMudmlld01vZGVsO1xuICAgICAgICAgICAgICAgICAgICB0LnNjb3BlID0gVS5mcm9tUGFyZW50KHQuc2NvcGUsIHMpO1xuICAgICAgICAgICAgICAgICAgICBpZiAodm9pZCAwICE9PSBzLmRlZmluZSkgcmV0dXJuIHMuZGVmaW5lKHQsIGUsIGkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgY29uc3QgciA9IG4ucHJvdG90eXBlO1xuICAgICAgICAgICAgaWYgKFwiaHlkcmF0aW5nXCIgaW4gdCkgci5oeWRyYXRpbmcgPSBmdW5jdGlvbiB0KGUpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnZpZXdNb2RlbC5oeWRyYXRpbmcoZSk7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgaWYgKFwiaHlkcmF0ZWRcIiBpbiB0KSByLmh5ZHJhdGVkID0gZnVuY3Rpb24gdChlKSB7XG4gICAgICAgICAgICAgICAgdGhpcy52aWV3TW9kZWwuaHlkcmF0ZWQoZSk7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgaWYgKFwiY3JlYXRlZFwiIGluIHQpIHIuY3JlYXRlZCA9IGZ1bmN0aW9uIHQoZSkge1xuICAgICAgICAgICAgICAgIHRoaXMudmlld01vZGVsLmNyZWF0ZWQoZSk7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgaWYgKFwiYmluZGluZ1wiIGluIHQpIHIuYmluZGluZyA9IGZ1bmN0aW9uIHQoZSwgaSwgcykge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnZpZXdNb2RlbC5iaW5kaW5nKGUsIGksIHMpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGlmIChcImJvdW5kXCIgaW4gdCkgci5ib3VuZCA9IGZ1bmN0aW9uIHQoZSwgaSwgcykge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnZpZXdNb2RlbC5ib3VuZChlLCBpLCBzKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBpZiAoXCJhdHRhY2hpbmdcIiBpbiB0KSByLmF0dGFjaGluZyA9IGZ1bmN0aW9uIHQoZSwgaSwgcykge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnZpZXdNb2RlbC5hdHRhY2hpbmcoZSwgaSwgcyk7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgaWYgKFwiYXR0YWNoZWRcIiBpbiB0KSByLmF0dGFjaGVkID0gZnVuY3Rpb24gdChlLCBpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMudmlld01vZGVsLmF0dGFjaGVkKGUsIGkpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGlmIChcImRldGFjaGluZ1wiIGluIHQpIHIuZGV0YWNoaW5nID0gZnVuY3Rpb24gdChlLCBpLCBzKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMudmlld01vZGVsLmRldGFjaGluZyhlLCBpLCBzKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBpZiAoXCJ1bmJpbmRpbmdcIiBpbiB0KSByLnVuYmluZGluZyA9IGZ1bmN0aW9uIHQoZSwgaSwgcykge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnZpZXdNb2RlbC51bmJpbmRpbmcoZSwgaSwgcyk7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgaWYgKFwiZGlzcG9zZVwiIGluIHQpIHIuZGlzcG9zZSA9IGZ1bmN0aW9uIHQoKSB7XG4gICAgICAgICAgICAgICAgdGhpcy52aWV3TW9kZWwuZGlzcG9zZSgpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHNbaV0gPSBuO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBuO1xuICAgIH1cbiAgICBudCh0LCBlKSB7XG4gICAgICAgIGlmIChlKSByZXR1cm4gZTtcbiAgICAgICAgaWYgKDEgPT09IHQubGVuZ3RoKSByZXR1cm4gdFswXS5uYW1lO1xuICAgICAgICByZXR1cm4gXCJkZWZhdWx0LXZpZXdcIjtcbiAgICB9XG4gICAgbHQodCwgZSkge1xuICAgICAgICBjb25zdCBpID0gdC5maW5kKCh0ID0+IHQubmFtZSA9PT0gZSkpO1xuICAgICAgICBpZiAodm9pZCAwID09PSBpKSB0aHJvdyBuZXcgRXJyb3IoYENvdWxkIG5vdCBmaW5kIHZpZXc6ICR7ZX1gKTtcbiAgICAgICAgcmV0dXJuIGk7XG4gICAgfVxufVxuXG5jb25zdCBQaSA9IGwuY3JlYXRlSW50ZXJmYWNlKFwiSVJlbmRlcmluZ1wiLCAodCA9PiB0LnNpbmdsZXRvbihSZW5kZXJpbmcpKSk7XG5cbmNsYXNzIFJlbmRlcmluZyB7XG4gICAgY29uc3RydWN0b3IodCkge1xuICAgICAgICB0aGlzLmh0ID0gbmV3IFdlYWtNYXA7XG4gICAgICAgIHRoaXMuYXQgPSBuZXcgV2Vha01hcDtcbiAgICAgICAgdGhpcy5jdCA9ICh0aGlzLnV0ID0gdC5yb290KS5nZXQoS3QpO1xuICAgICAgICB0aGlzLmZ0ID0gbmV3IEZyYWdtZW50Tm9kZVNlcXVlbmNlKHRoaXMuY3QsIHRoaXMuY3QuZG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpKTtcbiAgICB9XG4gICAgZ2V0IHJlbmRlcmVycygpIHtcbiAgICAgICAgcmV0dXJuIG51bGwgPT0gdGhpcy5ycyA/IHRoaXMucnMgPSB0aGlzLnV0LmdldEFsbChTcywgZmFsc2UpLnJlZHVjZSgoKHQsIGUpID0+IHtcbiAgICAgICAgICAgIHRbZS5pbnN0cnVjdGlvblR5cGVdID0gZTtcbiAgICAgICAgICAgIHJldHVybiB0O1xuICAgICAgICB9KSwgd3QoKSkgOiB0aGlzLnJzO1xuICAgIH1cbiAgICBjb21waWxlKHQsIGUsIGkpIHtcbiAgICAgICAgaWYgKGZhbHNlICE9PSB0Lm5lZWRzQ29tcGlsZSkge1xuICAgICAgICAgICAgY29uc3QgcyA9IHRoaXMuaHQ7XG4gICAgICAgICAgICBjb25zdCBuID0gZS5nZXQoQXMpO1xuICAgICAgICAgICAgbGV0IHIgPSBzLmdldCh0KTtcbiAgICAgICAgICAgIGlmIChudWxsID09IHIpIHMuc2V0KHQsIHIgPSBuLmNvbXBpbGUodCwgZSwgaSkpOyBlbHNlIGUucmVnaXN0ZXIoLi4uci5kZXBlbmRlbmNpZXMpO1xuICAgICAgICAgICAgcmV0dXJuIHI7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHQ7XG4gICAgfVxuICAgIGdldFZpZXdGYWN0b3J5KHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBWaWV3RmFjdG9yeShlLCBDdXN0b21FbGVtZW50RGVmaW5pdGlvbi5nZXRPckNyZWF0ZSh0KSk7XG4gICAgfVxuICAgIGNyZWF0ZU5vZGVzKHQpIHtcbiAgICAgICAgaWYgKHRydWUgPT09IHQuZW5oYW5jZSkgcmV0dXJuIG5ldyBGcmFnbWVudE5vZGVTZXF1ZW5jZSh0aGlzLmN0LCB0LnRlbXBsYXRlKTtcbiAgICAgICAgbGV0IGU7XG4gICAgICAgIGNvbnN0IGkgPSB0aGlzLmF0O1xuICAgICAgICBpZiAoaS5oYXModCkpIGUgPSBpLmdldCh0KTsgZWxzZSB7XG4gICAgICAgICAgICBjb25zdCBzID0gdGhpcy5jdDtcbiAgICAgICAgICAgIGNvbnN0IG4gPSBzLmRvY3VtZW50O1xuICAgICAgICAgICAgY29uc3QgciA9IHQudGVtcGxhdGU7XG4gICAgICAgICAgICBsZXQgbztcbiAgICAgICAgICAgIGlmIChudWxsID09PSByKSBlID0gbnVsbDsgZWxzZSBpZiAociBpbnN0YW5jZW9mIHMuTm9kZSkgaWYgKFwiVEVNUExBVEVcIiA9PT0gci5ub2RlTmFtZSkgZSA9IG4uYWRvcHROb2RlKHIuY29udGVudCk7IGVsc2UgKGUgPSBuLmFkb3B0Tm9kZShuLmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKSkpLmFwcGVuZENoaWxkKHIuY2xvbmVOb2RlKHRydWUpKTsgZWxzZSB7XG4gICAgICAgICAgICAgICAgbyA9IG4uY3JlYXRlRWxlbWVudChcInRlbXBsYXRlXCIpO1xuICAgICAgICAgICAgICAgIGlmIChBdChyKSkgby5pbm5lckhUTUwgPSByO1xuICAgICAgICAgICAgICAgIG4uYWRvcHROb2RlKGUgPSBvLmNvbnRlbnQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaS5zZXQodCwgZSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG51bGwgPT0gZSA/IHRoaXMuZnQgOiBuZXcgRnJhZ21lbnROb2RlU2VxdWVuY2UodGhpcy5jdCwgZS5jbG9uZU5vZGUodHJ1ZSkpO1xuICAgIH1cbiAgICByZW5kZXIodCwgZSwgaSwgcykge1xuICAgICAgICBjb25zdCBuID0gaS5pbnN0cnVjdGlvbnM7XG4gICAgICAgIGNvbnN0IHIgPSB0aGlzLnJlbmRlcmVycztcbiAgICAgICAgY29uc3QgbyA9IGUubGVuZ3RoO1xuICAgICAgICBpZiAoZS5sZW5ndGggIT09IG4ubGVuZ3RoKSB0aHJvdyBuZXcgRXJyb3IoYEFVUjA3NTc6JHtvfTw+JHtuLmxlbmd0aH1gKTtcbiAgICAgICAgbGV0IGwgPSAwO1xuICAgICAgICBsZXQgaCA9IDA7XG4gICAgICAgIGxldCBhID0gMDtcbiAgICAgICAgbGV0IGM7XG4gICAgICAgIGxldCB1O1xuICAgICAgICBsZXQgZjtcbiAgICAgICAgaWYgKG8gPiAwKSB3aGlsZSAobyA+IGwpIHtcbiAgICAgICAgICAgIGMgPSBuW2xdO1xuICAgICAgICAgICAgZiA9IGVbbF07XG4gICAgICAgICAgICBoID0gMDtcbiAgICAgICAgICAgIGEgPSBjLmxlbmd0aDtcbiAgICAgICAgICAgIHdoaWxlIChhID4gaCkge1xuICAgICAgICAgICAgICAgIHUgPSBjW2hdO1xuICAgICAgICAgICAgICAgIHJbdS50eXBlXS5yZW5kZXIodCwgZiwgdSk7XG4gICAgICAgICAgICAgICAgKytoO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgKytsO1xuICAgICAgICB9XG4gICAgICAgIGlmICh2b2lkIDAgIT09IHMgJiYgbnVsbCAhPT0gcykge1xuICAgICAgICAgICAgYyA9IGkuc3Vycm9nYXRlcztcbiAgICAgICAgICAgIGlmICgoYSA9IGMubGVuZ3RoKSA+IDApIHtcbiAgICAgICAgICAgICAgICBoID0gMDtcbiAgICAgICAgICAgICAgICB3aGlsZSAoYSA+IGgpIHtcbiAgICAgICAgICAgICAgICAgICAgdSA9IGNbaF07XG4gICAgICAgICAgICAgICAgICAgIHJbdS50eXBlXS5yZW5kZXIodCwgcywgdSk7XG4gICAgICAgICAgICAgICAgICAgICsraDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG59XG5cblJlbmRlcmluZy5pbmplY3QgPSBbIGcgXTtcblxudmFyIE9pO1xuXG4oZnVuY3Rpb24odCkge1xuICAgIHRbdFtcIm5vbmVcIl0gPSAwXSA9IFwibm9uZVwiO1xuICAgIHRbdFtcImhvc3RcIl0gPSAxXSA9IFwiaG9zdFwiO1xuICAgIHRbdFtcInNoYWRvd1Jvb3RcIl0gPSAyXSA9IFwic2hhZG93Um9vdFwiO1xuICAgIHRbdFtcImxvY2F0aW9uXCJdID0gM10gPSBcImxvY2F0aW9uXCI7XG59KShPaSB8fCAoT2kgPSB7fSkpO1xuXG5jb25zdCAkaSA9IHtcbiAgICBvcHRpb25hbDogdHJ1ZVxufTtcblxuY29uc3QgTGkgPSBuZXcgV2Vha01hcDtcblxuY2xhc3MgQ29udHJvbGxlciB7XG4gICAgY29uc3RydWN0b3IodCwgZSwgaSwgcywgbiwgcikge1xuICAgICAgICB0aGlzLmNvbnRhaW5lciA9IHQ7XG4gICAgICAgIHRoaXMudm1LaW5kID0gZTtcbiAgICAgICAgdGhpcy5kZWZpbml0aW9uID0gaTtcbiAgICAgICAgdGhpcy52aWV3RmFjdG9yeSA9IHM7XG4gICAgICAgIHRoaXMudmlld01vZGVsID0gbjtcbiAgICAgICAgdGhpcy5ob3N0ID0gcjtcbiAgICAgICAgdGhpcy5pZCA9IHcoXCJhdSRjb21wb25lbnRcIik7XG4gICAgICAgIHRoaXMuaGVhZCA9IG51bGw7XG4gICAgICAgIHRoaXMudGFpbCA9IG51bGw7XG4gICAgICAgIHRoaXMubmV4dCA9IG51bGw7XG4gICAgICAgIHRoaXMucGFyZW50ID0gbnVsbDtcbiAgICAgICAgdGhpcy5iaW5kaW5ncyA9IG51bGw7XG4gICAgICAgIHRoaXMuY2hpbGRyZW4gPSBudWxsO1xuICAgICAgICB0aGlzLmhhc0xvY2tlZFNjb3BlID0gZmFsc2U7XG4gICAgICAgIHRoaXMuaXNTdHJpY3RCaW5kaW5nID0gZmFsc2U7XG4gICAgICAgIHRoaXMuc2NvcGUgPSBudWxsO1xuICAgICAgICB0aGlzLmlzQm91bmQgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5ob3N0Q29udHJvbGxlciA9IG51bGw7XG4gICAgICAgIHRoaXMubW91bnRUYXJnZXQgPSAwO1xuICAgICAgICB0aGlzLnNoYWRvd1Jvb3QgPSBudWxsO1xuICAgICAgICB0aGlzLm5vZGVzID0gbnVsbDtcbiAgICAgICAgdGhpcy5sb2NhdGlvbiA9IG51bGw7XG4gICAgICAgIHRoaXMubGlmZWN5Y2xlSG9va3MgPSBudWxsO1xuICAgICAgICB0aGlzLnN0YXRlID0gMDtcbiAgICAgICAgdGhpcy5kdCA9IGZhbHNlO1xuICAgICAgICB0aGlzLnZ0ID0gaDtcbiAgICAgICAgdGhpcy5mbGFncyA9IDA7XG4gICAgICAgIHRoaXMuJGluaXRpYXRvciA9IG51bGw7XG4gICAgICAgIHRoaXMuJGZsYWdzID0gMDtcbiAgICAgICAgdGhpcy4kcmVzb2x2ZSA9IHZvaWQgMDtcbiAgICAgICAgdGhpcy4kcmVqZWN0ID0gdm9pZCAwO1xuICAgICAgICB0aGlzLiRwcm9taXNlID0gdm9pZCAwO1xuICAgICAgICB0aGlzLmd0ID0gMDtcbiAgICAgICAgdGhpcy53dCA9IDA7XG4gICAgICAgIHRoaXMuYnQgPSAwO1xuICAgICAgICB0aGlzLnIgPSB0LnJvb3QuZ2V0KFBpKTtcbiAgICAgICAgc3dpdGNoIChlKSB7XG4gICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAgIHRoaXMuaG9va3MgPSBuZXcgSG9va3NEZWZpbml0aW9uKG4pO1xuICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgICB0aGlzLmhvb2tzID0gSG9va3NEZWZpbml0aW9uLm5vbmU7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgIH1cbiAgICBnZXQgaXNBY3RpdmUoKSB7XG4gICAgICAgIHJldHVybiAodGhpcy5zdGF0ZSAmICgxIHwgMikpID4gMCAmJiAwID09PSAoNCAmIHRoaXMuc3RhdGUpO1xuICAgIH1cbiAgICBnZXQgbmFtZSgpIHtcbiAgICAgICAgdmFyIHQ7XG4gICAgICAgIGlmIChudWxsID09PSB0aGlzLnBhcmVudCkgc3dpdGNoICh0aGlzLnZtS2luZCkge1xuICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgIHJldHVybiBgWyR7dGhpcy5kZWZpbml0aW9uLm5hbWV9XWA7XG5cbiAgICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5kZWZpbml0aW9uLm5hbWU7XG5cbiAgICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgICByZXR1cm4gdGhpcy52aWV3RmFjdG9yeS5uYW1lO1xuICAgICAgICB9XG4gICAgICAgIHN3aXRjaCAodGhpcy52bUtpbmQpIHtcbiAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICByZXR1cm4gYCR7dGhpcy5wYXJlbnQubmFtZX0+WyR7dGhpcy5kZWZpbml0aW9uLm5hbWV9XWA7XG5cbiAgICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgICByZXR1cm4gYCR7dGhpcy5wYXJlbnQubmFtZX0+JHt0aGlzLmRlZmluaXRpb24ubmFtZX1gO1xuXG4gICAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgcmV0dXJuIHRoaXMudmlld0ZhY3RvcnkubmFtZSA9PT0gKG51bGwgPT09ICh0ID0gdGhpcy5wYXJlbnQuZGVmaW5pdGlvbikgfHwgdm9pZCAwID09PSB0ID8gdm9pZCAwIDogdC5uYW1lKSA/IGAke3RoaXMucGFyZW50Lm5hbWV9W3ZpZXddYCA6IGAke3RoaXMucGFyZW50Lm5hbWV9W3ZpZXc6JHt0aGlzLnZpZXdGYWN0b3J5Lm5hbWV9XWA7XG4gICAgICAgIH1cbiAgICB9XG4gICAgc3RhdGljIGdldENhY2hlZCh0KSB7XG4gICAgICAgIHJldHVybiBMaS5nZXQodCk7XG4gICAgfVxuICAgIHN0YXRpYyBnZXRDYWNoZWRPclRocm93KHQpIHtcbiAgICAgICAgY29uc3QgZSA9IENvbnRyb2xsZXIuZ2V0Q2FjaGVkKHQpO1xuICAgICAgICBpZiAodm9pZCAwID09PSBlKSB0aHJvdyBuZXcgRXJyb3IoYEFVUjA1MDA6JHt0fWApO1xuICAgICAgICByZXR1cm4gZTtcbiAgICB9XG4gICAgc3RhdGljICRlbCh0LCBlLCBpLCBzLCBuID0gdm9pZCAwKSB7XG4gICAgICAgIGlmIChMaS5oYXMoZSkpIHJldHVybiBMaS5nZXQoZSk7XG4gICAgICAgIG4gPSBudWxsICE9PSBuICYmIHZvaWQgMCAhPT0gbiA/IG4gOiBzaS5nZXREZWZpbml0aW9uKGUuY29uc3RydWN0b3IpO1xuICAgICAgICBjb25zdCByID0gbmV3IENvbnRyb2xsZXIodCwgMCwgbiwgbnVsbCwgZSwgaSk7XG4gICAgICAgIGNvbnN0IG8gPSB0LmdldChiKEtpKSk7XG4gICAgICAgIGlmIChuLmRlcGVuZGVuY2llcy5sZW5ndGggPiAwKSB0LnJlZ2lzdGVyKC4uLm4uZGVwZW5kZW5jaWVzKTtcbiAgICAgICAgdC5yZWdpc3RlclJlc29sdmVyKEtpLCBuZXcgeChcIklIeWRyYXRpb25Db250ZXh0XCIsIG5ldyBIeWRyYXRpb25Db250ZXh0KHIsIHMsIG8pKSk7XG4gICAgICAgIExpLnNldChlLCByKTtcbiAgICAgICAgaWYgKG51bGwgPT0gcyB8fCBmYWxzZSAhPT0gcy5oeWRyYXRlKSByLnh0KHMsIG8pO1xuICAgICAgICByZXR1cm4gcjtcbiAgICB9XG4gICAgc3RhdGljICRhdHRyKHQsIGUsIGksIHMpIHtcbiAgICAgICAgaWYgKExpLmhhcyhlKSkgcmV0dXJuIExpLmdldChlKTtcbiAgICAgICAgcyA9IG51bGwgIT09IHMgJiYgdm9pZCAwICE9PSBzID8gcyA6IE1lLmdldERlZmluaXRpb24oZS5jb25zdHJ1Y3Rvcik7XG4gICAgICAgIGNvbnN0IG4gPSBuZXcgQ29udHJvbGxlcih0LCAxLCBzLCBudWxsLCBlLCBpKTtcbiAgICAgICAgTGkuc2V0KGUsIG4pO1xuICAgICAgICBuLnl0KCk7XG4gICAgICAgIHJldHVybiBuO1xuICAgIH1cbiAgICBzdGF0aWMgJHZpZXcodCwgZSA9IHZvaWQgMCkge1xuICAgICAgICBjb25zdCBpID0gbmV3IENvbnRyb2xsZXIodC5jb250YWluZXIsIDIsIG51bGwsIHQsIG51bGwsIG51bGwpO1xuICAgICAgICBpLnBhcmVudCA9IG51bGwgIT09IGUgJiYgdm9pZCAwICE9PSBlID8gZSA6IG51bGw7XG4gICAgICAgIGkua3QoKTtcbiAgICAgICAgcmV0dXJuIGk7XG4gICAgfVxuICAgIHh0KHQsIGUpIHtcbiAgICAgICAgY29uc3QgaSA9IHRoaXMuY29udGFpbmVyO1xuICAgICAgICBjb25zdCBzID0gdGhpcy5mbGFncztcbiAgICAgICAgY29uc3QgbiA9IHRoaXMudmlld01vZGVsO1xuICAgICAgICBsZXQgciA9IHRoaXMuZGVmaW5pdGlvbjtcbiAgICAgICAgdGhpcy5zY29wZSA9IFUuY3JlYXRlKG4sIG51bGwsIHRydWUpO1xuICAgICAgICBpZiAoci53YXRjaGVzLmxlbmd0aCA+IDApIF9pKHRoaXMsIGksIHIsIG4pO1xuICAgICAgICBNaSh0aGlzLCByLCBzLCBuKTtcbiAgICAgICAgdGhpcy52dCA9IFVpKHRoaXMsIHIsIG4pO1xuICAgICAgICBpZiAodGhpcy5ob29rcy5oYXNEZWZpbmUpIHtcbiAgICAgICAgICAgIGNvbnN0IHQgPSBuLmRlZmluZSh0aGlzLCBlLCByKTtcbiAgICAgICAgICAgIGlmICh2b2lkIDAgIT09IHQgJiYgdCAhPT0gcikgciA9IEN1c3RvbUVsZW1lbnREZWZpbml0aW9uLmdldE9yQ3JlYXRlKHQpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMubGlmZWN5Y2xlSG9va3MgPSBraS5yZXNvbHZlKGkpO1xuICAgICAgICByLnJlZ2lzdGVyKGkpO1xuICAgICAgICBpZiAobnVsbCAhPT0gci5pbmplY3RhYmxlKSBpLnJlZ2lzdGVyUmVzb2x2ZXIoci5pbmplY3RhYmxlLCBuZXcgeChcImRlZmluaXRpb24uaW5qZWN0YWJsZVwiLCBuKSk7XG4gICAgICAgIGlmIChudWxsID09IHQgfHwgZmFsc2UgIT09IHQuaHlkcmF0ZSkge1xuICAgICAgICAgICAgdGhpcy5DdCh0KTtcbiAgICAgICAgICAgIHRoaXMuQXQoKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBDdCh0KSB7XG4gICAgICAgIGlmICh0aGlzLmhvb2tzLmhhc0h5ZHJhdGluZykgdGhpcy52aWV3TW9kZWwuaHlkcmF0aW5nKHRoaXMpO1xuICAgICAgICBjb25zdCBlID0gdGhpcy5TdCA9IHRoaXMuci5jb21waWxlKHRoaXMuZGVmaW5pdGlvbiwgdGhpcy5jb250YWluZXIsIHQpO1xuICAgICAgICBjb25zdCB7c2hhZG93T3B0aW9uczogaSwgaXNTdHJpY3RCaW5kaW5nOiBzLCBoYXNTbG90czogbiwgY29udGFpbmVybGVzczogcn0gPSBlO1xuICAgICAgICB0aGlzLmlzU3RyaWN0QmluZGluZyA9IHM7XG4gICAgICAgIGlmIChudWxsICE9PSAodGhpcy5ob3N0Q29udHJvbGxlciA9IHNpLmZvcih0aGlzLmhvc3QsICRpKSkpIHRoaXMuaG9zdCA9IHRoaXMuY29udGFpbmVyLnJvb3QuZ2V0KEt0KS5kb2N1bWVudC5jcmVhdGVFbGVtZW50KHRoaXMuZGVmaW5pdGlvbi5uYW1lKTtcbiAgICAgICAgc3ModGhpcy5ob3N0LCBzaS5uYW1lLCB0aGlzKTtcbiAgICAgICAgc3ModGhpcy5ob3N0LCB0aGlzLmRlZmluaXRpb24ua2V5LCB0aGlzKTtcbiAgICAgICAgaWYgKG51bGwgIT09IGkgfHwgbikge1xuICAgICAgICAgICAgaWYgKHIpIHRocm93IG5ldyBFcnJvcihcIkFVUjA1MDFcIik7XG4gICAgICAgICAgICBzcyh0aGlzLnNoYWRvd1Jvb3QgPSB0aGlzLmhvc3QuYXR0YWNoU2hhZG93KG51bGwgIT09IGkgJiYgdm9pZCAwICE9PSBpID8gaSA6IFdpKSwgc2kubmFtZSwgdGhpcyk7XG4gICAgICAgICAgICBzcyh0aGlzLnNoYWRvd1Jvb3QsIHRoaXMuZGVmaW5pdGlvbi5rZXksIHRoaXMpO1xuICAgICAgICAgICAgdGhpcy5tb3VudFRhcmdldCA9IDI7XG4gICAgICAgIH0gZWxzZSBpZiAocikge1xuICAgICAgICAgICAgc3ModGhpcy5sb2NhdGlvbiA9IHVzKHRoaXMuaG9zdCksIHNpLm5hbWUsIHRoaXMpO1xuICAgICAgICAgICAgc3ModGhpcy5sb2NhdGlvbiwgdGhpcy5kZWZpbml0aW9uLmtleSwgdGhpcyk7XG4gICAgICAgICAgICB0aGlzLm1vdW50VGFyZ2V0ID0gMztcbiAgICAgICAgfSBlbHNlIHRoaXMubW91bnRUYXJnZXQgPSAxO1xuICAgICAgICB0aGlzLnZpZXdNb2RlbC4kY29udHJvbGxlciA9IHRoaXM7XG4gICAgICAgIHRoaXMubm9kZXMgPSB0aGlzLnIuY3JlYXRlTm9kZXMoZSk7XG4gICAgICAgIGlmICh0aGlzLmhvb2tzLmhhc0h5ZHJhdGVkKSB0aGlzLnZpZXdNb2RlbC5oeWRyYXRlZCh0aGlzKTtcbiAgICB9XG4gICAgQXQoKSB7XG4gICAgICAgIHRoaXMuci5yZW5kZXIodGhpcywgdGhpcy5ub2Rlcy5maW5kVGFyZ2V0cygpLCB0aGlzLlN0LCB0aGlzLmhvc3QpO1xuICAgICAgICBpZiAodGhpcy5ob29rcy5oYXNDcmVhdGVkKSB0aGlzLnZpZXdNb2RlbC5jcmVhdGVkKHRoaXMpO1xuICAgIH1cbiAgICB5dCgpIHtcbiAgICAgICAgY29uc3QgdCA9IHRoaXMuZGVmaW5pdGlvbjtcbiAgICAgICAgY29uc3QgZSA9IHRoaXMudmlld01vZGVsO1xuICAgICAgICBpZiAodC53YXRjaGVzLmxlbmd0aCA+IDApIF9pKHRoaXMsIHRoaXMuY29udGFpbmVyLCB0LCBlKTtcbiAgICAgICAgTWkodGhpcywgdCwgdGhpcy5mbGFncywgZSk7XG4gICAgICAgIGUuJGNvbnRyb2xsZXIgPSB0aGlzO1xuICAgICAgICB0aGlzLmxpZmVjeWNsZUhvb2tzID0ga2kucmVzb2x2ZSh0aGlzLmNvbnRhaW5lcik7XG4gICAgICAgIGlmICh0aGlzLmhvb2tzLmhhc0NyZWF0ZWQpIHRoaXMudmlld01vZGVsLmNyZWF0ZWQodGhpcyk7XG4gICAgfVxuICAgIGt0KCkge1xuICAgICAgICB0aGlzLlN0ID0gdGhpcy5yLmNvbXBpbGUodGhpcy52aWV3RmFjdG9yeS5kZWYsIHRoaXMuY29udGFpbmVyLCBudWxsKTtcbiAgICAgICAgdGhpcy5pc1N0cmljdEJpbmRpbmcgPSB0aGlzLlN0LmlzU3RyaWN0QmluZGluZztcbiAgICAgICAgdGhpcy5yLnJlbmRlcih0aGlzLCAodGhpcy5ub2RlcyA9IHRoaXMuci5jcmVhdGVOb2Rlcyh0aGlzLlN0KSkuZmluZFRhcmdldHMoKSwgdGhpcy5TdCwgdm9pZCAwKTtcbiAgICB9XG4gICAgYWN0aXZhdGUodCwgZSwgaSwgcykge1xuICAgICAgICBzd2l0Y2ggKHRoaXMuc3RhdGUpIHtcbiAgICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgY2FzZSA4OlxuICAgICAgICAgICAgaWYgKCEobnVsbCA9PT0gZSB8fCBlLmlzQWN0aXZlKSkgcmV0dXJuO1xuICAgICAgICAgICAgdGhpcy5zdGF0ZSA9IDE7XG4gICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgIHJldHVybjtcblxuICAgICAgICAgIGNhc2UgMzI6XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEFVUjA1MDI6JHt0aGlzLm5hbWV9YCk7XG5cbiAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBBVVIwNTAzOiR7dGhpcy5uYW1lfSAke0dpKHRoaXMuc3RhdGUpfWApO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMucGFyZW50ID0gZTtcbiAgICAgICAgaSB8PSAyO1xuICAgICAgICBzd2l0Y2ggKHRoaXMudm1LaW5kKSB7XG4gICAgICAgICAgY2FzZSAwOlxuICAgICAgICAgICAgdGhpcy5zY29wZS5wYXJlbnRTY29wZSA9IG51bGwgIT09IHMgJiYgdm9pZCAwICE9PSBzID8gcyA6IG51bGw7XG4gICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgIHRoaXMuc2NvcGUgPSBudWxsICE9PSBzICYmIHZvaWQgMCAhPT0gcyA/IHMgOiBudWxsO1xuICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgICBpZiAodm9pZCAwID09PSBzIHx8IG51bGwgPT09IHMpIHRocm93IG5ldyBFcnJvcihcIkFVUjA1MDRcIik7XG4gICAgICAgICAgICBpZiAoIXRoaXMuaGFzTG9ja2VkU2NvcGUpIHRoaXMuc2NvcGUgPSBzO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuaXNTdHJpY3RCaW5kaW5nKSBpIHw9IDE7XG4gICAgICAgIHRoaXMuJGluaXRpYXRvciA9IHQ7XG4gICAgICAgIHRoaXMuJGZsYWdzID0gaTtcbiAgICAgICAgdGhpcy5SdCgpO1xuICAgICAgICBpZiAodGhpcy5ob29rcy5oYXNCaW5kaW5nKSB7XG4gICAgICAgICAgICBjb25zdCB0ID0gdGhpcy52aWV3TW9kZWwuYmluZGluZyh0aGlzLiRpbml0aWF0b3IsIHRoaXMucGFyZW50LCB0aGlzLiRmbGFncyk7XG4gICAgICAgICAgICBpZiAodCBpbnN0YW5jZW9mIFByb21pc2UpIHtcbiAgICAgICAgICAgICAgICB0aGlzLkV0KCk7XG4gICAgICAgICAgICAgICAgdC50aGVuKCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYmluZCgpO1xuICAgICAgICAgICAgICAgIH0pKS5jYXRjaCgodCA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuQnQodCk7XG4gICAgICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLiRwcm9taXNlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHRoaXMuYmluZCgpO1xuICAgICAgICByZXR1cm4gdGhpcy4kcHJvbWlzZTtcbiAgICB9XG4gICAgYmluZCgpIHtcbiAgICAgICAgbGV0IHQgPSAwO1xuICAgICAgICBsZXQgZSA9IHRoaXMudnQubGVuZ3RoO1xuICAgICAgICBsZXQgaTtcbiAgICAgICAgaWYgKGUgPiAwKSB3aGlsZSAoZSA+IHQpIHtcbiAgICAgICAgICAgIHRoaXMudnRbdF0uc3RhcnQoKTtcbiAgICAgICAgICAgICsrdDtcbiAgICAgICAgfVxuICAgICAgICBpZiAobnVsbCAhPT0gdGhpcy5iaW5kaW5ncykge1xuICAgICAgICAgICAgdCA9IDA7XG4gICAgICAgICAgICBlID0gdGhpcy5iaW5kaW5ncy5sZW5ndGg7XG4gICAgICAgICAgICB3aGlsZSAoZSA+IHQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmJpbmRpbmdzW3RdLiRiaW5kKHRoaXMuJGZsYWdzLCB0aGlzLnNjb3BlKTtcbiAgICAgICAgICAgICAgICArK3Q7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuaG9va3MuaGFzQm91bmQpIHtcbiAgICAgICAgICAgIGkgPSB0aGlzLnZpZXdNb2RlbC5ib3VuZCh0aGlzLiRpbml0aWF0b3IsIHRoaXMucGFyZW50LCB0aGlzLiRmbGFncyk7XG4gICAgICAgICAgICBpZiAoaSBpbnN0YW5jZW9mIFByb21pc2UpIHtcbiAgICAgICAgICAgICAgICB0aGlzLkV0KCk7XG4gICAgICAgICAgICAgICAgaS50aGVuKCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaXNCb3VuZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuSXQoKTtcbiAgICAgICAgICAgICAgICB9KSkuY2F0Y2goKHQgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLkJ0KHQpO1xuICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5pc0JvdW5kID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5JdCgpO1xuICAgIH1cbiAgICBUdCguLi50KSB7XG4gICAgICAgIHN3aXRjaCAodGhpcy5tb3VudFRhcmdldCkge1xuICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgIHRoaXMuaG9zdC5hcHBlbmQoLi4udCk7XG4gICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgIHRoaXMuc2hhZG93Um9vdC5hcHBlbmQoLi4udCk7XG4gICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgIGNhc2UgMzpcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBsZXQgZSA9IDA7XG4gICAgICAgICAgICAgICAgZm9yICg7ZSA8IHQubGVuZ3RoOyArK2UpIHRoaXMubG9jYXRpb24ucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUodFtlXSwgdGhpcy5sb2NhdGlvbik7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgSXQoKSB7XG4gICAgICAgIGlmIChudWxsICE9PSB0aGlzLmhvc3RDb250cm9sbGVyKSBzd2l0Y2ggKHRoaXMubW91bnRUYXJnZXQpIHtcbiAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgdGhpcy5ob3N0Q29udHJvbGxlci5UdCh0aGlzLmhvc3QpO1xuICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICBjYXNlIDM6XG4gICAgICAgICAgICB0aGlzLmhvc3RDb250cm9sbGVyLlR0KHRoaXMubG9jYXRpb24uJHN0YXJ0LCB0aGlzLmxvY2F0aW9uKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIHN3aXRjaCAodGhpcy5tb3VudFRhcmdldCkge1xuICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgIHRoaXMubm9kZXMuYXBwZW5kVG8odGhpcy5ob3N0LCBudWxsICE9IHRoaXMuZGVmaW5pdGlvbiAmJiB0aGlzLmRlZmluaXRpb24uZW5oYW5jZSk7XG4gICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBjb25zdCB0ID0gdGhpcy5jb250YWluZXI7XG4gICAgICAgICAgICAgICAgY29uc3QgZSA9IHQuaGFzKGZpLCBmYWxzZSkgPyB0LmdldChmaSkgOiB0LmdldChkaSk7XG4gICAgICAgICAgICAgICAgZS5hcHBseVRvKHRoaXMuc2hhZG93Um9vdCk7XG4gICAgICAgICAgICAgICAgdGhpcy5ub2Rlcy5hcHBlbmRUbyh0aGlzLnNoYWRvd1Jvb3QpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgY2FzZSAzOlxuICAgICAgICAgICAgdGhpcy5ub2Rlcy5pbnNlcnRCZWZvcmUodGhpcy5sb2NhdGlvbik7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5ob29rcy5oYXNBdHRhY2hpbmcpIHtcbiAgICAgICAgICAgIGNvbnN0IHQgPSB0aGlzLnZpZXdNb2RlbC5hdHRhY2hpbmcodGhpcy4kaW5pdGlhdG9yLCB0aGlzLnBhcmVudCwgdGhpcy4kZmxhZ3MpO1xuICAgICAgICAgICAgaWYgKHQgaW5zdGFuY2VvZiBQcm9taXNlKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5FdCgpO1xuICAgICAgICAgICAgICAgIHRoaXMuUnQoKTtcbiAgICAgICAgICAgICAgICB0LnRoZW4oKCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5EdCgpO1xuICAgICAgICAgICAgICAgIH0pKS5jYXRjaCgodCA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuQnQodCk7XG4gICAgICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChudWxsICE9PSB0aGlzLmNoaWxkcmVuKSB7XG4gICAgICAgICAgICBsZXQgdCA9IDA7XG4gICAgICAgICAgICBmb3IgKDt0IDwgdGhpcy5jaGlsZHJlbi5sZW5ndGg7ICsrdCkgdm9pZCB0aGlzLmNoaWxkcmVuW3RdLmFjdGl2YXRlKHRoaXMuJGluaXRpYXRvciwgdGhpcywgdGhpcy4kZmxhZ3MsIHRoaXMuc2NvcGUpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuRHQoKTtcbiAgICB9XG4gICAgZGVhY3RpdmF0ZSh0LCBlLCBpKSB7XG4gICAgICAgIHN3aXRjaCAofjE2ICYgdGhpcy5zdGF0ZSkge1xuICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgIHRoaXMuc3RhdGUgPSA0O1xuICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgY2FzZSA4OlxuICAgICAgICAgIGNhc2UgMzI6XG4gICAgICAgICAgY2FzZSA4IHwgMzI6XG4gICAgICAgICAgICByZXR1cm47XG5cbiAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBBVVIwNTA1OiR7dGhpcy5uYW1lfSAke0dpKHRoaXMuc3RhdGUpfWApO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuJGluaXRpYXRvciA9IHQ7XG4gICAgICAgIHRoaXMuJGZsYWdzID0gaTtcbiAgICAgICAgaWYgKHQgPT09IHRoaXMpIHRoaXMuUHQoKTtcbiAgICAgICAgbGV0IHMgPSAwO1xuICAgICAgICBpZiAodGhpcy52dC5sZW5ndGgpIGZvciAoO3MgPCB0aGlzLnZ0Lmxlbmd0aDsgKytzKSB0aGlzLnZ0W3NdLnN0b3AoKTtcbiAgICAgICAgaWYgKG51bGwgIT09IHRoaXMuY2hpbGRyZW4pIGZvciAocyA9IDA7IHMgPCB0aGlzLmNoaWxkcmVuLmxlbmd0aDsgKytzKSB2b2lkIHRoaXMuY2hpbGRyZW5bc10uZGVhY3RpdmF0ZSh0LCB0aGlzLCBpKTtcbiAgICAgICAgaWYgKHRoaXMuaG9va3MuaGFzRGV0YWNoaW5nKSB7XG4gICAgICAgICAgICBjb25zdCBlID0gdGhpcy52aWV3TW9kZWwuZGV0YWNoaW5nKHRoaXMuJGluaXRpYXRvciwgdGhpcy5wYXJlbnQsIHRoaXMuJGZsYWdzKTtcbiAgICAgICAgICAgIGlmIChlIGluc3RhbmNlb2YgUHJvbWlzZSkge1xuICAgICAgICAgICAgICAgIHRoaXMuRXQoKTtcbiAgICAgICAgICAgICAgICB0LlB0KCk7XG4gICAgICAgICAgICAgICAgZS50aGVuKCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHQuT3QoKTtcbiAgICAgICAgICAgICAgICB9KSkuY2F0Y2goKGUgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0LkJ0KGUpO1xuICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAobnVsbCA9PT0gdC5oZWFkKSB0LmhlYWQgPSB0aGlzOyBlbHNlIHQudGFpbC5uZXh0ID0gdGhpcztcbiAgICAgICAgdC50YWlsID0gdGhpcztcbiAgICAgICAgaWYgKHQgIT09IHRoaXMpIHJldHVybjtcbiAgICAgICAgdGhpcy5PdCgpO1xuICAgICAgICByZXR1cm4gdGhpcy4kcHJvbWlzZTtcbiAgICB9XG4gICAgcmVtb3ZlTm9kZXMoKSB7XG4gICAgICAgIHN3aXRjaCAodGhpcy52bUtpbmQpIHtcbiAgICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgdGhpcy5ub2Rlcy5yZW1vdmUoKTtcbiAgICAgICAgICAgIHRoaXMubm9kZXMudW5saW5rKCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG51bGwgIT09IHRoaXMuaG9zdENvbnRyb2xsZXIpIHN3aXRjaCAodGhpcy5tb3VudFRhcmdldCkge1xuICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgICB0aGlzLmhvc3QucmVtb3ZlKCk7XG4gICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgIGNhc2UgMzpcbiAgICAgICAgICAgIHRoaXMubG9jYXRpb24uJHN0YXJ0LnJlbW92ZSgpO1xuICAgICAgICAgICAgdGhpcy5sb2NhdGlvbi5yZW1vdmUoKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgfVxuICAgIHVuYmluZCgpIHtcbiAgICAgICAgY29uc3QgdCA9IDQgfCB0aGlzLiRmbGFncztcbiAgICAgICAgbGV0IGUgPSAwO1xuICAgICAgICBpZiAobnVsbCAhPT0gdGhpcy5iaW5kaW5ncykgZm9yICg7ZSA8IHRoaXMuYmluZGluZ3MubGVuZ3RoOyArK2UpIHRoaXMuYmluZGluZ3NbZV0uJHVuYmluZCh0KTtcbiAgICAgICAgdGhpcy5wYXJlbnQgPSBudWxsO1xuICAgICAgICBzd2l0Y2ggKHRoaXMudm1LaW5kKSB7XG4gICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgdGhpcy5zY29wZSA9IG51bGw7XG4gICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgIGlmICghdGhpcy5oYXNMb2NrZWRTY29wZSkgdGhpcy5zY29wZSA9IG51bGw7XG4gICAgICAgICAgICBpZiAoMTYgPT09ICgxNiAmIHRoaXMuc3RhdGUpICYmICF0aGlzLnZpZXdGYWN0b3J5LnRyeVJldHVyblRvQ2FjaGUodGhpcykgJiYgdGhpcy4kaW5pdGlhdG9yID09PSB0aGlzKSB0aGlzLmRpc3Bvc2UoKTtcbiAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgY2FzZSAwOlxuICAgICAgICAgICAgdGhpcy5zY29wZS5wYXJlbnRTY29wZSA9IG51bGw7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICBpZiAoMzIgPT09ICgzMiAmIHQpICYmIHRoaXMuJGluaXRpYXRvciA9PT0gdGhpcykgdGhpcy5kaXNwb3NlKCk7XG4gICAgICAgIHRoaXMuc3RhdGUgPSAzMiAmIHRoaXMuc3RhdGUgfCA4O1xuICAgICAgICB0aGlzLiRpbml0aWF0b3IgPSBudWxsO1xuICAgICAgICB0aGlzLiR0KCk7XG4gICAgfVxuICAgIEV0KCkge1xuICAgICAgICBpZiAodm9pZCAwID09PSB0aGlzLiRwcm9taXNlKSB7XG4gICAgICAgICAgICB0aGlzLiRwcm9taXNlID0gbmV3IFByb21pc2UoKCh0LCBlKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy4kcmVzb2x2ZSA9IHQ7XG4gICAgICAgICAgICAgICAgdGhpcy4kcmVqZWN0ID0gZTtcbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgIGlmICh0aGlzLiRpbml0aWF0b3IgIT09IHRoaXMpIHRoaXMucGFyZW50LkV0KCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgJHQoKSB7XG4gICAgICAgIGlmICh2b2lkIDAgIT09IHRoaXMuJHByb21pc2UpIHtcbiAgICAgICAgICAgIFFpID0gdGhpcy4kcmVzb2x2ZTtcbiAgICAgICAgICAgIHRoaXMuJHJlc29sdmUgPSB0aGlzLiRyZWplY3QgPSB0aGlzLiRwcm9taXNlID0gdm9pZCAwO1xuICAgICAgICAgICAgUWkoKTtcbiAgICAgICAgICAgIFFpID0gdm9pZCAwO1xuICAgICAgICB9XG4gICAgfVxuICAgIEJ0KHQpIHtcbiAgICAgICAgaWYgKHZvaWQgMCAhPT0gdGhpcy4kcHJvbWlzZSkge1xuICAgICAgICAgICAgWmkgPSB0aGlzLiRyZWplY3Q7XG4gICAgICAgICAgICB0aGlzLiRyZXNvbHZlID0gdGhpcy4kcmVqZWN0ID0gdGhpcy4kcHJvbWlzZSA9IHZvaWQgMDtcbiAgICAgICAgICAgIFppKHQpO1xuICAgICAgICAgICAgWmkgPSB2b2lkIDA7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuJGluaXRpYXRvciAhPT0gdGhpcykgdGhpcy5wYXJlbnQuQnQodCk7XG4gICAgfVxuICAgIFJ0KCkge1xuICAgICAgICArK3RoaXMuZ3Q7XG4gICAgICAgIGlmICh0aGlzLiRpbml0aWF0b3IgIT09IHRoaXMpIHRoaXMucGFyZW50LlJ0KCk7XG4gICAgfVxuICAgIER0KCkge1xuICAgICAgICBpZiAoMCA9PT0gLS10aGlzLmd0KSB7XG4gICAgICAgICAgICBpZiAodGhpcy5ob29rcy5oYXNBdHRhY2hlZCkge1xuICAgICAgICAgICAgICAgIEppID0gdGhpcy52aWV3TW9kZWwuYXR0YWNoZWQodGhpcy4kaW5pdGlhdG9yLCB0aGlzLiRmbGFncyk7XG4gICAgICAgICAgICAgICAgaWYgKEppIGluc3RhbmNlb2YgUHJvbWlzZSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLkV0KCk7XG4gICAgICAgICAgICAgICAgICAgIEppLnRoZW4oKCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc3RhdGUgPSAyO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy4kdCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuJGluaXRpYXRvciAhPT0gdGhpcykgdGhpcy5wYXJlbnQuRHQoKTtcbiAgICAgICAgICAgICAgICAgICAgfSkpLmNhdGNoKCh0ID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuQnQodCk7XG4gICAgICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgICAgICAgICAgSmkgPSB2b2lkIDA7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgSmkgPSB2b2lkIDA7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnN0YXRlID0gMjtcbiAgICAgICAgICAgIHRoaXMuJHQoKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy4kaW5pdGlhdG9yICE9PSB0aGlzKSB0aGlzLnBhcmVudC5EdCgpO1xuICAgIH1cbiAgICBQdCgpIHtcbiAgICAgICAgKyt0aGlzLnd0O1xuICAgIH1cbiAgICBPdCgpIHtcbiAgICAgICAgaWYgKDAgPT09IC0tdGhpcy53dCkge1xuICAgICAgICAgICAgdGhpcy5MdCgpO1xuICAgICAgICAgICAgdGhpcy5yZW1vdmVOb2RlcygpO1xuICAgICAgICAgICAgbGV0IHQgPSB0aGlzLiRpbml0aWF0b3IuaGVhZDtcbiAgICAgICAgICAgIHdoaWxlIChudWxsICE9PSB0KSB7XG4gICAgICAgICAgICAgICAgaWYgKHQgIT09IHRoaXMpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHQuZGVidWcpIHQubG9nZ2VyLnRyYWNlKGBkZXRhY2goKWApO1xuICAgICAgICAgICAgICAgICAgICB0LnJlbW92ZU5vZGVzKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmICh0Lmhvb2tzLmhhc1VuYmluZGluZykge1xuICAgICAgICAgICAgICAgICAgICBpZiAodC5kZWJ1ZykgdC5sb2dnZXIudHJhY2UoXCJ1bmJpbmRpbmcoKVwiKTtcbiAgICAgICAgICAgICAgICAgICAgSmkgPSB0LnZpZXdNb2RlbC51bmJpbmRpbmcodC4kaW5pdGlhdG9yLCB0LnBhcmVudCwgdC4kZmxhZ3MpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoSmkgaW5zdGFuY2VvZiBQcm9taXNlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLkV0KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLkx0KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBKaS50aGVuKCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5xdCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSkpLmNhdGNoKCh0ID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLkJ0KHQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIEppID0gdm9pZCAwO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0ID0gdC5uZXh0O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5xdCgpO1xuICAgICAgICB9XG4gICAgfVxuICAgIEx0KCkge1xuICAgICAgICArK3RoaXMuYnQ7XG4gICAgfVxuICAgIHF0KCkge1xuICAgICAgICBpZiAoMCA9PT0gLS10aGlzLmJ0KSB7XG4gICAgICAgICAgICBsZXQgdCA9IHRoaXMuJGluaXRpYXRvci5oZWFkO1xuICAgICAgICAgICAgbGV0IGUgPSBudWxsO1xuICAgICAgICAgICAgd2hpbGUgKG51bGwgIT09IHQpIHtcbiAgICAgICAgICAgICAgICBpZiAodCAhPT0gdGhpcykge1xuICAgICAgICAgICAgICAgICAgICB0LmlzQm91bmQgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgdC51bmJpbmQoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZSA9IHQubmV4dDtcbiAgICAgICAgICAgICAgICB0Lm5leHQgPSBudWxsO1xuICAgICAgICAgICAgICAgIHQgPSBlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5oZWFkID0gdGhpcy50YWlsID0gbnVsbDtcbiAgICAgICAgICAgIHRoaXMuaXNCb3VuZCA9IGZhbHNlO1xuICAgICAgICAgICAgdGhpcy51bmJpbmQoKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBhZGRCaW5kaW5nKHQpIHtcbiAgICAgICAgaWYgKG51bGwgPT09IHRoaXMuYmluZGluZ3MpIHRoaXMuYmluZGluZ3MgPSBbIHQgXTsgZWxzZSB0aGlzLmJpbmRpbmdzW3RoaXMuYmluZGluZ3MubGVuZ3RoXSA9IHQ7XG4gICAgfVxuICAgIGFkZENoaWxkKHQpIHtcbiAgICAgICAgaWYgKG51bGwgPT09IHRoaXMuY2hpbGRyZW4pIHRoaXMuY2hpbGRyZW4gPSBbIHQgXTsgZWxzZSB0aGlzLmNoaWxkcmVuW3RoaXMuY2hpbGRyZW4ubGVuZ3RoXSA9IHQ7XG4gICAgfVxuICAgIGlzKHQpIHtcbiAgICAgICAgc3dpdGNoICh0aGlzLnZtS2luZCkge1xuICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgIHJldHVybiBNZS5nZXREZWZpbml0aW9uKHRoaXMudmlld01vZGVsLmNvbnN0cnVjdG9yKS5uYW1lID09PSB0O1xuXG4gICAgICAgICAgY2FzZSAwOlxuICAgICAgICAgICAgcmV0dXJuIHNpLmdldERlZmluaXRpb24odGhpcy52aWV3TW9kZWwuY29uc3RydWN0b3IpLm5hbWUgPT09IHQ7XG5cbiAgICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgICByZXR1cm4gdGhpcy52aWV3RmFjdG9yeS5uYW1lID09PSB0O1xuICAgICAgICB9XG4gICAgfVxuICAgIGxvY2tTY29wZSh0KSB7XG4gICAgICAgIHRoaXMuc2NvcGUgPSB0O1xuICAgICAgICB0aGlzLmhhc0xvY2tlZFNjb3BlID0gdHJ1ZTtcbiAgICB9XG4gICAgc2V0SG9zdCh0KSB7XG4gICAgICAgIGlmICgwID09PSB0aGlzLnZtS2luZCkge1xuICAgICAgICAgICAgc3ModCwgc2kubmFtZSwgdGhpcyk7XG4gICAgICAgICAgICBzcyh0LCB0aGlzLmRlZmluaXRpb24ua2V5LCB0aGlzKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmhvc3QgPSB0O1xuICAgICAgICB0aGlzLm1vdW50VGFyZ2V0ID0gMTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIHNldFNoYWRvd1Jvb3QodCkge1xuICAgICAgICBpZiAoMCA9PT0gdGhpcy52bUtpbmQpIHtcbiAgICAgICAgICAgIHNzKHQsIHNpLm5hbWUsIHRoaXMpO1xuICAgICAgICAgICAgc3ModCwgdGhpcy5kZWZpbml0aW9uLmtleSwgdGhpcyk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5zaGFkb3dSb290ID0gdDtcbiAgICAgICAgdGhpcy5tb3VudFRhcmdldCA9IDI7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICBzZXRMb2NhdGlvbih0KSB7XG4gICAgICAgIGlmICgwID09PSB0aGlzLnZtS2luZCkge1xuICAgICAgICAgICAgc3ModCwgc2kubmFtZSwgdGhpcyk7XG4gICAgICAgICAgICBzcyh0LCB0aGlzLmRlZmluaXRpb24ua2V5LCB0aGlzKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmxvY2F0aW9uID0gdDtcbiAgICAgICAgdGhpcy5tb3VudFRhcmdldCA9IDM7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICByZWxlYXNlKCkge1xuICAgICAgICB0aGlzLnN0YXRlIHw9IDE2O1xuICAgIH1cbiAgICBkaXNwb3NlKCkge1xuICAgICAgICBpZiAoMzIgPT09ICgzMiAmIHRoaXMuc3RhdGUpKSByZXR1cm47XG4gICAgICAgIHRoaXMuc3RhdGUgfD0gMzI7XG4gICAgICAgIGlmICh0aGlzLmhvb2tzLmhhc0Rpc3Bvc2UpIHRoaXMudmlld01vZGVsLmRpc3Bvc2UoKTtcbiAgICAgICAgaWYgKG51bGwgIT09IHRoaXMuY2hpbGRyZW4pIHtcbiAgICAgICAgICAgIHRoaXMuY2hpbGRyZW4uZm9yRWFjaChZaSk7XG4gICAgICAgICAgICB0aGlzLmNoaWxkcmVuID0gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmhvc3RDb250cm9sbGVyID0gbnVsbDtcbiAgICAgICAgdGhpcy5zY29wZSA9IG51bGw7XG4gICAgICAgIHRoaXMubm9kZXMgPSBudWxsO1xuICAgICAgICB0aGlzLmxvY2F0aW9uID0gbnVsbDtcbiAgICAgICAgdGhpcy52aWV3RmFjdG9yeSA9IG51bGw7XG4gICAgICAgIGlmIChudWxsICE9PSB0aGlzLnZpZXdNb2RlbCkge1xuICAgICAgICAgICAgTGkuZGVsZXRlKHRoaXMudmlld01vZGVsKTtcbiAgICAgICAgICAgIHRoaXMudmlld01vZGVsID0gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnZpZXdNb2RlbCA9IG51bGw7XG4gICAgICAgIHRoaXMuaG9zdCA9IG51bGw7XG4gICAgICAgIHRoaXMuc2hhZG93Um9vdCA9IG51bGw7XG4gICAgICAgIHRoaXMuY29udGFpbmVyLmRpc3Bvc2VSZXNvbHZlcnMoKTtcbiAgICB9XG4gICAgYWNjZXB0KHQpIHtcbiAgICAgICAgaWYgKHRydWUgPT09IHQodGhpcykpIHJldHVybiB0cnVlO1xuICAgICAgICBpZiAodGhpcy5ob29rcy5oYXNBY2NlcHQgJiYgdHJ1ZSA9PT0gdGhpcy52aWV3TW9kZWwuYWNjZXB0KHQpKSByZXR1cm4gdHJ1ZTtcbiAgICAgICAgaWYgKG51bGwgIT09IHRoaXMuY2hpbGRyZW4pIHtcbiAgICAgICAgICAgIGNvbnN0IHtjaGlsZHJlbjogZX0gPSB0aGlzO1xuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDAsIHMgPSBlLmxlbmd0aDsgaSA8IHM7ICsraSkgaWYgKHRydWUgPT09IGVbaV0uYWNjZXB0KHQpKSByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgIH1cbn1cblxuZnVuY3Rpb24gcWkodCkge1xuICAgIGxldCBlID0gdC4kb2JzZXJ2ZXJzO1xuICAgIGlmICh2b2lkIDAgPT09IGUpIFJlZmxlY3QuZGVmaW5lUHJvcGVydHkodCwgXCIkb2JzZXJ2ZXJzXCIsIHtcbiAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICAgIHZhbHVlOiBlID0ge31cbiAgICB9KTtcbiAgICByZXR1cm4gZTtcbn1cblxuZnVuY3Rpb24gTWkodCwgZSwgaSwgcykge1xuICAgIGNvbnN0IG4gPSBlLmJpbmRhYmxlcztcbiAgICBjb25zdCByID0gT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMobik7XG4gICAgY29uc3QgbyA9IHIubGVuZ3RoO1xuICAgIGlmIChvID4gMCkge1xuICAgICAgICBsZXQgZTtcbiAgICAgICAgbGV0IGk7XG4gICAgICAgIGxldCBsID0gMDtcbiAgICAgICAgY29uc3QgaCA9IHFpKHMpO1xuICAgICAgICBjb25zdCBhID0gdC5jb250YWluZXI7XG4gICAgICAgIGNvbnN0IGMgPSBhLmhhcyhGLCB0cnVlKSA/IGEuZ2V0KEYpIDogbnVsbDtcbiAgICAgICAgZm9yICg7bCA8IG87ICsrbCkge1xuICAgICAgICAgICAgZSA9IHJbbF07XG4gICAgICAgICAgICBpZiAodm9pZCAwID09PSBoW2VdKSB7XG4gICAgICAgICAgICAgICAgaSA9IG5bZV07XG4gICAgICAgICAgICAgICAgaFtlXSA9IG5ldyBCaW5kYWJsZU9ic2VydmVyKHMsIGUsIGkuY2FsbGJhY2ssIGkuc2V0LCB0LCBjKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbn1cblxuZnVuY3Rpb24gVWkodCwgZSwgaSkge1xuICAgIGNvbnN0IHMgPSBlLmNoaWxkcmVuT2JzZXJ2ZXJzO1xuICAgIGNvbnN0IG4gPSBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyhzKTtcbiAgICBjb25zdCByID0gbi5sZW5ndGg7XG4gICAgaWYgKHIgPiAwKSB7XG4gICAgICAgIGNvbnN0IGUgPSBxaShpKTtcbiAgICAgICAgY29uc3QgbyA9IFtdO1xuICAgICAgICBsZXQgbDtcbiAgICAgICAgbGV0IGggPSAwO1xuICAgICAgICBsZXQgYTtcbiAgICAgICAgZm9yICg7aCA8IHI7ICsraCkge1xuICAgICAgICAgICAgbCA9IG5baF07XG4gICAgICAgICAgICBpZiAodm9pZCAwID09IGVbbF0pIHtcbiAgICAgICAgICAgICAgICBhID0gc1tsXTtcbiAgICAgICAgICAgICAgICBvW28ubGVuZ3RoXSA9IGVbbF0gPSBuZXcgQ2hpbGRyZW5PYnNlcnZlcih0LCBpLCBsLCBhLmNhbGxiYWNrLCBhLnF1ZXJ5LCBhLmZpbHRlciwgYS5tYXAsIGEub3B0aW9ucyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG87XG4gICAgfVxuICAgIHJldHVybiBoO1xufVxuXG5jb25zdCBGaSA9IG5ldyBNYXA7XG5cbmNvbnN0IFZpID0gdCA9PiB7XG4gICAgbGV0IGUgPSBGaS5nZXQodCk7XG4gICAgaWYgKG51bGwgPT0gZSkge1xuICAgICAgICBlID0gbmV3IGoodCwgMCk7XG4gICAgICAgIEZpLnNldCh0LCBlKTtcbiAgICB9XG4gICAgcmV0dXJuIGU7XG59O1xuXG5mdW5jdGlvbiBfaSh0LCBlLCBpLCBzKSB7XG4gICAgY29uc3QgbiA9IGUuZ2V0KFYpO1xuICAgIGNvbnN0IHIgPSBlLmdldChfKTtcbiAgICBjb25zdCBvID0gaS53YXRjaGVzO1xuICAgIGNvbnN0IGwgPSAwID09PSB0LnZtS2luZCA/IHQuc2NvcGUgOiBVLmNyZWF0ZShzLCBudWxsLCB0cnVlKTtcbiAgICBjb25zdCBoID0gby5sZW5ndGg7XG4gICAgbGV0IGE7XG4gICAgbGV0IGM7XG4gICAgbGV0IHU7XG4gICAgbGV0IGYgPSAwO1xuICAgIGZvciAoO2ggPiBmOyArK2YpIHtcbiAgICAgICAgKHtleHByZXNzaW9uOiBhLCBjYWxsYmFjazogY30gPSBvW2ZdKTtcbiAgICAgICAgYyA9IEN0KGMpID8gYyA6IFJlZmxlY3QuZ2V0KHMsIGMpO1xuICAgICAgICBpZiAoIUN0KGMpKSB0aHJvdyBuZXcgRXJyb3IoYEFVUjA1MDY6JHtTdHJpbmcoYyl9YCk7XG4gICAgICAgIGlmIChDdChhKSkgdC5hZGRCaW5kaW5nKG5ldyBDb21wdXRlZFdhdGNoZXIocywgbiwgYSwgYywgdHJ1ZSkpOyBlbHNlIHtcbiAgICAgICAgICAgIHUgPSBBdChhKSA/IHIucGFyc2UoYSwgOCkgOiBWaShhKTtcbiAgICAgICAgICAgIHQuYWRkQmluZGluZyhuZXcgRXhwcmVzc2lvbldhdGNoZXIobCwgZSwgbiwgdSwgYykpO1xuICAgICAgICB9XG4gICAgfVxufVxuXG5mdW5jdGlvbiBqaSh0KSB7XG4gICAgcmV0dXJuIHQgaW5zdGFuY2VvZiBDb250cm9sbGVyICYmIDAgPT09IHQudm1LaW5kO1xufVxuXG5mdW5jdGlvbiBOaSh0KSB7XG4gICAgcmV0dXJuIHkodCkgJiYgc2kuaXNUeXBlKHQuY29uc3RydWN0b3IpO1xufVxuXG5jbGFzcyBIb29rc0RlZmluaXRpb24ge1xuICAgIGNvbnN0cnVjdG9yKHQpIHtcbiAgICAgICAgdGhpcy5oYXNEZWZpbmUgPSBcImRlZmluZVwiIGluIHQ7XG4gICAgICAgIHRoaXMuaGFzSHlkcmF0aW5nID0gXCJoeWRyYXRpbmdcIiBpbiB0O1xuICAgICAgICB0aGlzLmhhc0h5ZHJhdGVkID0gXCJoeWRyYXRlZFwiIGluIHQ7XG4gICAgICAgIHRoaXMuaGFzQ3JlYXRlZCA9IFwiY3JlYXRlZFwiIGluIHQ7XG4gICAgICAgIHRoaXMuaGFzQmluZGluZyA9IFwiYmluZGluZ1wiIGluIHQ7XG4gICAgICAgIHRoaXMuaGFzQm91bmQgPSBcImJvdW5kXCIgaW4gdDtcbiAgICAgICAgdGhpcy5oYXNBdHRhY2hpbmcgPSBcImF0dGFjaGluZ1wiIGluIHQ7XG4gICAgICAgIHRoaXMuaGFzQXR0YWNoZWQgPSBcImF0dGFjaGVkXCIgaW4gdDtcbiAgICAgICAgdGhpcy5oYXNEZXRhY2hpbmcgPSBcImRldGFjaGluZ1wiIGluIHQ7XG4gICAgICAgIHRoaXMuaGFzVW5iaW5kaW5nID0gXCJ1bmJpbmRpbmdcIiBpbiB0O1xuICAgICAgICB0aGlzLmhhc0Rpc3Bvc2UgPSBcImRpc3Bvc2VcIiBpbiB0O1xuICAgICAgICB0aGlzLmhhc0FjY2VwdCA9IFwiYWNjZXB0XCIgaW4gdDtcbiAgICB9XG59XG5cbkhvb2tzRGVmaW5pdGlvbi5ub25lID0gbmV3IEhvb2tzRGVmaW5pdGlvbih7fSk7XG5cbmNvbnN0IFdpID0ge1xuICAgIG1vZGU6IFwib3BlblwiXG59O1xuXG52YXIgSGk7XG5cbihmdW5jdGlvbih0KSB7XG4gICAgdFt0W1wiY3VzdG9tRWxlbWVudFwiXSA9IDBdID0gXCJjdXN0b21FbGVtZW50XCI7XG4gICAgdFt0W1wiY3VzdG9tQXR0cmlidXRlXCJdID0gMV0gPSBcImN1c3RvbUF0dHJpYnV0ZVwiO1xuICAgIHRbdFtcInN5bnRoZXRpY1wiXSA9IDJdID0gXCJzeW50aGV0aWNcIjtcbn0pKEhpIHx8IChIaSA9IHt9KSk7XG5cbnZhciB6aTtcblxuKGZ1bmN0aW9uKHQpIHtcbiAgICB0W3RbXCJub25lXCJdID0gMF0gPSBcIm5vbmVcIjtcbiAgICB0W3RbXCJhY3RpdmF0aW5nXCJdID0gMV0gPSBcImFjdGl2YXRpbmdcIjtcbiAgICB0W3RbXCJhY3RpdmF0ZWRcIl0gPSAyXSA9IFwiYWN0aXZhdGVkXCI7XG4gICAgdFt0W1wiZGVhY3RpdmF0aW5nXCJdID0gNF0gPSBcImRlYWN0aXZhdGluZ1wiO1xuICAgIHRbdFtcImRlYWN0aXZhdGVkXCJdID0gOF0gPSBcImRlYWN0aXZhdGVkXCI7XG4gICAgdFt0W1wicmVsZWFzZWRcIl0gPSAxNl0gPSBcInJlbGVhc2VkXCI7XG4gICAgdFt0W1wiZGlzcG9zZWRcIl0gPSAzMl0gPSBcImRpc3Bvc2VkXCI7XG59KSh6aSB8fCAoemkgPSB7fSkpO1xuXG5mdW5jdGlvbiBHaSh0KSB7XG4gICAgY29uc3QgZSA9IFtdO1xuICAgIGlmICgxID09PSAoMSAmIHQpKSBlLnB1c2goXCJhY3RpdmF0aW5nXCIpO1xuICAgIGlmICgyID09PSAoMiAmIHQpKSBlLnB1c2goXCJhY3RpdmF0ZWRcIik7XG4gICAgaWYgKDQgPT09ICg0ICYgdCkpIGUucHVzaChcImRlYWN0aXZhdGluZ1wiKTtcbiAgICBpZiAoOCA9PT0gKDggJiB0KSkgZS5wdXNoKFwiZGVhY3RpdmF0ZWRcIik7XG4gICAgaWYgKDE2ID09PSAoMTYgJiB0KSkgZS5wdXNoKFwicmVsZWFzZWRcIik7XG4gICAgaWYgKDMyID09PSAoMzIgJiB0KSkgZS5wdXNoKFwiZGlzcG9zZWRcIik7XG4gICAgcmV0dXJuIDAgPT09IGUubGVuZ3RoID8gXCJub25lXCIgOiBlLmpvaW4oXCJ8XCIpO1xufVxuXG5jb25zdCBYaSA9IGwuY3JlYXRlSW50ZXJmYWNlKFwiSUNvbnRyb2xsZXJcIik7XG5cbmNvbnN0IEtpID0gbC5jcmVhdGVJbnRlcmZhY2UoXCJJSHlkcmF0aW9uQ29udGV4dFwiKTtcblxuY2xhc3MgSHlkcmF0aW9uQ29udGV4dCB7XG4gICAgY29uc3RydWN0b3IodCwgZSwgaSkge1xuICAgICAgICB0aGlzLmluc3RydWN0aW9uID0gZTtcbiAgICAgICAgdGhpcy5wYXJlbnQgPSBpO1xuICAgICAgICB0aGlzLmNvbnRyb2xsZXIgPSB0O1xuICAgIH1cbn1cblxuZnVuY3Rpb24gWWkodCkge1xuICAgIHQuZGlzcG9zZSgpO1xufVxuXG5sZXQgUWk7XG5cbmxldCBaaTtcblxubGV0IEppO1xuXG5jb25zdCB0cyA9IGwuY3JlYXRlSW50ZXJmYWNlKFwiSUFwcFJvb3RcIik7XG5cbmNvbnN0IGVzID0gbC5jcmVhdGVJbnRlcmZhY2UoXCJJV29ya1RyYWNrZXJcIiwgKHQgPT4gdC5zaW5nbGV0b24oV29ya1RyYWNrZXIpKSk7XG5cbmNsYXNzIFdvcmtUcmFja2VyIHtcbiAgICBjb25zdHJ1Y3Rvcih0KSB7XG4gICAgICAgIHRoaXMuTXQgPSAwO1xuICAgICAgICB0aGlzLlV0ID0gbnVsbDtcbiAgICAgICAgdGhpcy4kdCA9IG51bGw7XG4gICAgICAgIHRoaXMuRnQgPSB0LnNjb3BlVG8oXCJXb3JrVHJhY2tlclwiKTtcbiAgICB9XG4gICAgc3RhcnQoKSB7XG4gICAgICAgIHRoaXMuRnQudHJhY2UoYHN0YXJ0KHN0YWNrOiR7dGhpcy5NdH0pYCk7XG4gICAgICAgICsrdGhpcy5NdDtcbiAgICB9XG4gICAgZmluaXNoKCkge1xuICAgICAgICB0aGlzLkZ0LnRyYWNlKGBmaW5pc2goc3RhY2s6JHt0aGlzLk10fSlgKTtcbiAgICAgICAgaWYgKDAgPT09IC0tdGhpcy5NdCkge1xuICAgICAgICAgICAgY29uc3QgdCA9IHRoaXMuJHQ7XG4gICAgICAgICAgICBpZiAobnVsbCAhPT0gdCkge1xuICAgICAgICAgICAgICAgIHRoaXMuJHQgPSB0aGlzLlV0ID0gbnVsbDtcbiAgICAgICAgICAgICAgICB0KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgd2FpdCgpIHtcbiAgICAgICAgdGhpcy5GdC50cmFjZShgd2FpdChzdGFjazoke3RoaXMuTXR9KWApO1xuICAgICAgICBpZiAobnVsbCA9PT0gdGhpcy5VdCkge1xuICAgICAgICAgICAgaWYgKDAgPT09IHRoaXMuTXQpIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcbiAgICAgICAgICAgIHRoaXMuVXQgPSBuZXcgUHJvbWlzZSgodCA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy4kdCA9IHQ7XG4gICAgICAgICAgICB9KSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMuVXQ7XG4gICAgfVxufVxuXG5Xb3JrVHJhY2tlci5pbmplY3QgPSBbIGsgXTtcblxuY2xhc3MgQXBwUm9vdCB7XG4gICAgY29uc3RydWN0b3IodCwgZSwgaSwgcykge1xuICAgICAgICB0aGlzLmNvbmZpZyA9IHQ7XG4gICAgICAgIHRoaXMucGxhdGZvcm0gPSBlO1xuICAgICAgICB0aGlzLmNvbnRhaW5lciA9IGk7XG4gICAgICAgIHRoaXMuY29udHJvbGxlciA9IHZvaWQgMDtcbiAgICAgICAgdGhpcy5WdCA9IHZvaWQgMDtcbiAgICAgICAgdGhpcy5ob3N0ID0gdC5ob3N0O1xuICAgICAgICB0aGlzLndvcmsgPSBpLmdldChlcyk7XG4gICAgICAgIHMucHJlcGFyZSh0aGlzKTtcbiAgICAgICAgaS5yZWdpc3RlclJlc29sdmVyKGUuSFRNTEVsZW1lbnQsIGkucmVnaXN0ZXJSZXNvbHZlcihlLkVsZW1lbnQsIGkucmVnaXN0ZXJSZXNvbHZlcihucywgbmV3IHgoXCJFbGVtZW50UmVzb2x2ZXJcIiwgdC5ob3N0KSkpKTtcbiAgICAgICAgdGhpcy5WdCA9IEModGhpcy5fdChcImJlZm9yZUNyZWF0ZVwiKSwgKCgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGUgPSB0LmNvbXBvbmVudDtcbiAgICAgICAgICAgIGNvbnN0IHMgPSBpLmNyZWF0ZUNoaWxkKCk7XG4gICAgICAgICAgICBsZXQgbjtcbiAgICAgICAgICAgIGlmIChzaS5pc1R5cGUoZSkpIG4gPSB0aGlzLmNvbnRhaW5lci5nZXQoZSk7IGVsc2UgbiA9IHQuY29tcG9uZW50O1xuICAgICAgICAgICAgY29uc3QgciA9IHtcbiAgICAgICAgICAgICAgICBoeWRyYXRlOiBmYWxzZSxcbiAgICAgICAgICAgICAgICBwcm9qZWN0aW9uczogbnVsbFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGNvbnN0IG8gPSB0aGlzLmNvbnRyb2xsZXIgPSBDb250cm9sbGVyLiRlbChzLCBuLCB0aGlzLmhvc3QsIHIpO1xuICAgICAgICAgICAgby54dChyLCBudWxsKTtcbiAgICAgICAgICAgIHJldHVybiBDKHRoaXMuX3QoXCJoeWRyYXRpbmdcIiksICgoKSA9PiB7XG4gICAgICAgICAgICAgICAgby5DdChudWxsKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gQyh0aGlzLl90KFwiaHlkcmF0ZWRcIiksICgoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIG8uQXQoKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5WdCA9IHZvaWQgMDtcbiAgICAgICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICB9KSk7XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgYWN0aXZhdGUoKSB7XG4gICAgICAgIHJldHVybiBDKHRoaXMuVnQsICgoKSA9PiBDKHRoaXMuX3QoXCJiZWZvcmVBY3RpdmF0ZVwiKSwgKCgpID0+IEModGhpcy5jb250cm9sbGVyLmFjdGl2YXRlKHRoaXMuY29udHJvbGxlciwgbnVsbCwgMiwgdm9pZCAwKSwgKCgpID0+IHRoaXMuX3QoXCJhZnRlckFjdGl2YXRlXCIpKSkpKSkpO1xuICAgIH1cbiAgICBkZWFjdGl2YXRlKCkge1xuICAgICAgICByZXR1cm4gQyh0aGlzLl90KFwiYmVmb3JlRGVhY3RpdmF0ZVwiKSwgKCgpID0+IEModGhpcy5jb250cm9sbGVyLmRlYWN0aXZhdGUodGhpcy5jb250cm9sbGVyLCBudWxsLCAwKSwgKCgpID0+IHRoaXMuX3QoXCJhZnRlckRlYWN0aXZhdGVcIikpKSkpO1xuICAgIH1cbiAgICBfdCh0KSB7XG4gICAgICAgIHJldHVybiBBKC4uLnRoaXMuY29udGFpbmVyLmdldEFsbChiZSkucmVkdWNlKCgoZSwgaSkgPT4ge1xuICAgICAgICAgICAgaWYgKGkuc2xvdCA9PT0gdCkgZS5wdXNoKGkucnVuKCkpO1xuICAgICAgICAgICAgcmV0dXJuIGU7XG4gICAgICAgIH0pLCBbXSkpO1xuICAgIH1cbiAgICBkaXNwb3NlKCkge1xuICAgICAgICB2YXIgdDtcbiAgICAgICAgbnVsbCA9PT0gKHQgPSB0aGlzLmNvbnRyb2xsZXIpIHx8IHZvaWQgMCA9PT0gdCA/IHZvaWQgMCA6IHQuZGlzcG9zZSgpO1xuICAgIH1cbn1cblxuY2xhc3MgUmVmcyB7fVxuXG5mdW5jdGlvbiBpcyh0LCBlKSB7XG4gICAgdmFyIGksIHM7XG4gICAgcmV0dXJuIG51bGwgIT09IChzID0gbnVsbCA9PT0gKGkgPSB0LiRhdSkgfHwgdm9pZCAwID09PSBpID8gdm9pZCAwIDogaVtlXSkgJiYgdm9pZCAwICE9PSBzID8gcyA6IG51bGw7XG59XG5cbmZ1bmN0aW9uIHNzKHQsIGUsIGkpIHtcbiAgICB2YXIgcztcbiAgICB2YXIgbjtcbiAgICAobnVsbCAhPT0gKHMgPSAobiA9IHQpLiRhdSkgJiYgdm9pZCAwICE9PSBzID8gcyA6IG4uJGF1ID0gbmV3IFJlZnMpW2VdID0gaTtcbn1cblxuY29uc3QgbnMgPSBsLmNyZWF0ZUludGVyZmFjZShcIklOb2RlXCIpO1xuXG5jb25zdCBycyA9IGwuY3JlYXRlSW50ZXJmYWNlKFwiSUV2ZW50VGFyZ2V0XCIsICh0ID0+IHQuY2FjaGVkQ2FsbGJhY2soKHQgPT4ge1xuICAgIGlmICh0Lmhhcyh0cywgdHJ1ZSkpIHJldHVybiB0LmdldCh0cykuaG9zdDtcbiAgICByZXR1cm4gdC5nZXQoS3QpLmRvY3VtZW50O1xufSkpKSk7XG5cbmNvbnN0IG9zID0gbC5jcmVhdGVJbnRlcmZhY2UoXCJJUmVuZGVyTG9jYXRpb25cIik7XG5cbnZhciBscztcblxuKGZ1bmN0aW9uKHQpIHtcbiAgICB0W3RbXCJFbGVtZW50XCJdID0gMV0gPSBcIkVsZW1lbnRcIjtcbiAgICB0W3RbXCJBdHRyXCJdID0gMl0gPSBcIkF0dHJcIjtcbiAgICB0W3RbXCJUZXh0XCJdID0gM10gPSBcIlRleHRcIjtcbiAgICB0W3RbXCJDREFUQVNlY3Rpb25cIl0gPSA0XSA9IFwiQ0RBVEFTZWN0aW9uXCI7XG4gICAgdFt0W1wiRW50aXR5UmVmZXJlbmNlXCJdID0gNV0gPSBcIkVudGl0eVJlZmVyZW5jZVwiO1xuICAgIHRbdFtcIkVudGl0eVwiXSA9IDZdID0gXCJFbnRpdHlcIjtcbiAgICB0W3RbXCJQcm9jZXNzaW5nSW5zdHJ1Y3Rpb25cIl0gPSA3XSA9IFwiUHJvY2Vzc2luZ0luc3RydWN0aW9uXCI7XG4gICAgdFt0W1wiQ29tbWVudFwiXSA9IDhdID0gXCJDb21tZW50XCI7XG4gICAgdFt0W1wiRG9jdW1lbnRcIl0gPSA5XSA9IFwiRG9jdW1lbnRcIjtcbiAgICB0W3RbXCJEb2N1bWVudFR5cGVcIl0gPSAxMF0gPSBcIkRvY3VtZW50VHlwZVwiO1xuICAgIHRbdFtcIkRvY3VtZW50RnJhZ21lbnRcIl0gPSAxMV0gPSBcIkRvY3VtZW50RnJhZ21lbnRcIjtcbiAgICB0W3RbXCJOb3RhdGlvblwiXSA9IDEyXSA9IFwiTm90YXRpb25cIjtcbn0pKGxzIHx8IChscyA9IHt9KSk7XG5cbmNvbnN0IGhzID0gbmV3IFdlYWtNYXA7XG5cbmZ1bmN0aW9uIGFzKHQpIHtcbiAgICBpZiAoaHMuaGFzKHQpKSByZXR1cm4gaHMuZ2V0KHQpO1xuICAgIGxldCBlID0gMDtcbiAgICBsZXQgaSA9IHQubmV4dFNpYmxpbmc7XG4gICAgd2hpbGUgKG51bGwgIT09IGkpIHtcbiAgICAgICAgaWYgKDggPT09IGkubm9kZVR5cGUpIHN3aXRjaCAoaS50ZXh0Q29udGVudCkge1xuICAgICAgICAgIGNhc2UgXCJhdS1zdGFydFwiOlxuICAgICAgICAgICAgKytlO1xuICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICBjYXNlIFwiYXUtZW5kXCI6XG4gICAgICAgICAgICBpZiAoMCA9PT0gZS0tKSByZXR1cm4gaTtcbiAgICAgICAgfVxuICAgICAgICBpID0gaS5uZXh0U2libGluZztcbiAgICB9XG4gICAgaWYgKG51bGwgPT09IHQucGFyZW50Tm9kZSAmJiAxMSA9PT0gdC5ub2RlVHlwZSkge1xuICAgICAgICBjb25zdCBlID0gc2kuZm9yKHQpO1xuICAgICAgICBpZiAodm9pZCAwID09PSBlKSByZXR1cm4gbnVsbDtcbiAgICAgICAgaWYgKDIgPT09IGUubW91bnRUYXJnZXQpIHJldHVybiBhcyhlLmhvc3QpO1xuICAgIH1cbiAgICByZXR1cm4gdC5wYXJlbnROb2RlO1xufVxuXG5mdW5jdGlvbiBjcyh0LCBlKSB7XG4gICAgaWYgKHZvaWQgMCAhPT0gdC5wbGF0Zm9ybSAmJiAhKHQgaW5zdGFuY2VvZiB0LnBsYXRmb3JtLk5vZGUpKSB7XG4gICAgICAgIGNvbnN0IGkgPSB0LmNoaWxkTm9kZXM7XG4gICAgICAgIGZvciAobGV0IHQgPSAwLCBzID0gaS5sZW5ndGg7IHQgPCBzOyArK3QpIGhzLnNldChpW3RdLCBlKTtcbiAgICB9IGVsc2UgaHMuc2V0KHQsIGUpO1xufVxuXG5mdW5jdGlvbiB1cyh0KSB7XG4gICAgaWYgKGZzKHQpKSByZXR1cm4gdDtcbiAgICBjb25zdCBlID0gdC5vd25lckRvY3VtZW50LmNyZWF0ZUNvbW1lbnQoXCJhdS1lbmRcIik7XG4gICAgY29uc3QgaSA9IHQub3duZXJEb2N1bWVudC5jcmVhdGVDb21tZW50KFwiYXUtc3RhcnRcIik7XG4gICAgaWYgKG51bGwgIT09IHQucGFyZW50Tm9kZSkge1xuICAgICAgICB0LnBhcmVudE5vZGUucmVwbGFjZUNoaWxkKGUsIHQpO1xuICAgICAgICBlLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKGksIGUpO1xuICAgIH1cbiAgICBlLiRzdGFydCA9IGk7XG4gICAgcmV0dXJuIGU7XG59XG5cbmZ1bmN0aW9uIGZzKHQpIHtcbiAgICByZXR1cm4gXCJhdS1lbmRcIiA9PT0gdC50ZXh0Q29udGVudDtcbn1cblxuY2xhc3MgRnJhZ21lbnROb2RlU2VxdWVuY2Uge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUpIHtcbiAgICAgICAgdGhpcy5wbGF0Zm9ybSA9IHQ7XG4gICAgICAgIHRoaXMuZnJhZ21lbnQgPSBlO1xuICAgICAgICB0aGlzLmlzTW91bnRlZCA9IGZhbHNlO1xuICAgICAgICB0aGlzLmlzTGlua2VkID0gZmFsc2U7XG4gICAgICAgIHRoaXMubmV4dCA9IHZvaWQgMDtcbiAgICAgICAgdGhpcy5yZWZOb2RlID0gdm9pZCAwO1xuICAgICAgICBjb25zdCBpID0gZS5xdWVyeVNlbGVjdG9yQWxsKFwiLmF1XCIpO1xuICAgICAgICBsZXQgcyA9IDA7XG4gICAgICAgIGxldCBuID0gaS5sZW5ndGg7XG4gICAgICAgIGxldCByO1xuICAgICAgICBsZXQgbyA9IHRoaXMudGFyZ2V0cyA9IEFycmF5KG4pO1xuICAgICAgICB3aGlsZSAobiA+IHMpIHtcbiAgICAgICAgICAgIHIgPSBpW3NdO1xuICAgICAgICAgICAgaWYgKFwiQVUtTVwiID09PSByLm5vZGVOYW1lKSBvW3NdID0gdXMocik7IGVsc2Ugb1tzXSA9IHI7XG4gICAgICAgICAgICArK3M7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgbCA9IGUuY2hpbGROb2RlcztcbiAgICAgICAgY29uc3QgaCA9IHRoaXMuY2hpbGROb2RlcyA9IEFycmF5KG4gPSBsLmxlbmd0aCk7XG4gICAgICAgIHMgPSAwO1xuICAgICAgICB3aGlsZSAobiA+IHMpIHtcbiAgICAgICAgICAgIGhbc10gPSBsW3NdO1xuICAgICAgICAgICAgKytzO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuZmlyc3RDaGlsZCA9IGUuZmlyc3RDaGlsZDtcbiAgICAgICAgdGhpcy5sYXN0Q2hpbGQgPSBlLmxhc3RDaGlsZDtcbiAgICB9XG4gICAgZmluZFRhcmdldHMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnRhcmdldHM7XG4gICAgfVxuICAgIGluc2VydEJlZm9yZSh0KSB7XG4gICAgICAgIGlmICh0aGlzLmlzTGlua2VkICYmICEhdGhpcy5yZWZOb2RlKSB0aGlzLmFkZFRvTGlua2VkKCk7IGVsc2Uge1xuICAgICAgICAgICAgY29uc3QgZSA9IHQucGFyZW50Tm9kZTtcbiAgICAgICAgICAgIGlmICh0aGlzLmlzTW91bnRlZCkge1xuICAgICAgICAgICAgICAgIGxldCBpID0gdGhpcy5maXJzdENoaWxkO1xuICAgICAgICAgICAgICAgIGxldCBzO1xuICAgICAgICAgICAgICAgIGNvbnN0IG4gPSB0aGlzLmxhc3RDaGlsZDtcbiAgICAgICAgICAgICAgICB3aGlsZSAobnVsbCAhPSBpKSB7XG4gICAgICAgICAgICAgICAgICAgIHMgPSBpLm5leHRTaWJsaW5nO1xuICAgICAgICAgICAgICAgICAgICBlLmluc2VydEJlZm9yZShpLCB0KTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGkgPT09IG4pIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBpID0gcztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMuaXNNb3VudGVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB0LnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKHRoaXMuZnJhZ21lbnQsIHQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIGFwcGVuZFRvKHQsIGUgPSBmYWxzZSkge1xuICAgICAgICBpZiAodGhpcy5pc01vdW50ZWQpIHtcbiAgICAgICAgICAgIGxldCBlID0gdGhpcy5maXJzdENoaWxkO1xuICAgICAgICAgICAgbGV0IGk7XG4gICAgICAgICAgICBjb25zdCBzID0gdGhpcy5sYXN0Q2hpbGQ7XG4gICAgICAgICAgICB3aGlsZSAobnVsbCAhPSBlKSB7XG4gICAgICAgICAgICAgICAgaSA9IGUubmV4dFNpYmxpbmc7XG4gICAgICAgICAgICAgICAgdC5hcHBlbmRDaGlsZChlKTtcbiAgICAgICAgICAgICAgICBpZiAoZSA9PT0gcykgYnJlYWs7XG4gICAgICAgICAgICAgICAgZSA9IGk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmlzTW91bnRlZCA9IHRydWU7XG4gICAgICAgICAgICBpZiAoIWUpIHQuYXBwZW5kQ2hpbGQodGhpcy5mcmFnbWVudCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmVtb3ZlKCkge1xuICAgICAgICBpZiAodGhpcy5pc01vdW50ZWQpIHtcbiAgICAgICAgICAgIHRoaXMuaXNNb3VudGVkID0gZmFsc2U7XG4gICAgICAgICAgICBjb25zdCB0ID0gdGhpcy5mcmFnbWVudDtcbiAgICAgICAgICAgIGNvbnN0IGUgPSB0aGlzLmxhc3RDaGlsZDtcbiAgICAgICAgICAgIGxldCBpO1xuICAgICAgICAgICAgbGV0IHMgPSB0aGlzLmZpcnN0Q2hpbGQ7XG4gICAgICAgICAgICB3aGlsZSAobnVsbCAhPT0gcykge1xuICAgICAgICAgICAgICAgIGkgPSBzLm5leHRTaWJsaW5nO1xuICAgICAgICAgICAgICAgIHQuYXBwZW5kQ2hpbGQocyk7XG4gICAgICAgICAgICAgICAgaWYgKHMgPT09IGUpIGJyZWFrO1xuICAgICAgICAgICAgICAgIHMgPSBpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIGFkZFRvTGlua2VkKCkge1xuICAgICAgICBjb25zdCB0ID0gdGhpcy5yZWZOb2RlO1xuICAgICAgICBjb25zdCBlID0gdC5wYXJlbnROb2RlO1xuICAgICAgICBpZiAodGhpcy5pc01vdW50ZWQpIHtcbiAgICAgICAgICAgIGxldCBpID0gdGhpcy5maXJzdENoaWxkO1xuICAgICAgICAgICAgbGV0IHM7XG4gICAgICAgICAgICBjb25zdCBuID0gdGhpcy5sYXN0Q2hpbGQ7XG4gICAgICAgICAgICB3aGlsZSAobnVsbCAhPSBpKSB7XG4gICAgICAgICAgICAgICAgcyA9IGkubmV4dFNpYmxpbmc7XG4gICAgICAgICAgICAgICAgZS5pbnNlcnRCZWZvcmUoaSwgdCk7XG4gICAgICAgICAgICAgICAgaWYgKGkgPT09IG4pIGJyZWFrO1xuICAgICAgICAgICAgICAgIGkgPSBzO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5pc01vdW50ZWQgPSB0cnVlO1xuICAgICAgICAgICAgZS5pbnNlcnRCZWZvcmUodGhpcy5mcmFnbWVudCwgdCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgdW5saW5rKCkge1xuICAgICAgICB0aGlzLmlzTGlua2VkID0gZmFsc2U7XG4gICAgICAgIHRoaXMubmV4dCA9IHZvaWQgMDtcbiAgICAgICAgdGhpcy5yZWZOb2RlID0gdm9pZCAwO1xuICAgIH1cbiAgICBsaW5rKHQpIHtcbiAgICAgICAgdGhpcy5pc0xpbmtlZCA9IHRydWU7XG4gICAgICAgIGlmIChmcyh0KSkgdGhpcy5yZWZOb2RlID0gdDsgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLm5leHQgPSB0O1xuICAgICAgICAgICAgdGhpcy5vYnRhaW5SZWZOb2RlKCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgb2J0YWluUmVmTm9kZSgpIHtcbiAgICAgICAgaWYgKHZvaWQgMCAhPT0gdGhpcy5uZXh0KSB0aGlzLnJlZk5vZGUgPSB0aGlzLm5leHQuZmlyc3RDaGlsZDsgZWxzZSB0aGlzLnJlZk5vZGUgPSB2b2lkIDA7XG4gICAgfVxufVxuXG5jb25zdCBkcyA9IGwuY3JlYXRlSW50ZXJmYWNlKFwiSVdpbmRvd1wiLCAodCA9PiB0LmNhbGxiYWNrKCh0ID0+IHQuZ2V0KEt0KS53aW5kb3cpKSkpO1xuXG5jb25zdCBtcyA9IGwuY3JlYXRlSW50ZXJmYWNlKFwiSUxvY2F0aW9uXCIsICh0ID0+IHQuY2FsbGJhY2soKHQgPT4gdC5nZXQoZHMpLmxvY2F0aW9uKSkpKTtcblxuY29uc3QgdnMgPSBsLmNyZWF0ZUludGVyZmFjZShcIklIaXN0b3J5XCIsICh0ID0+IHQuY2FsbGJhY2soKHQgPT4gdC5nZXQoZHMpLmhpc3RvcnkpKSkpO1xuXG5jb25zdCBwcyA9IHtcbiAgICBbTi5jYXB0dXJpbmddOiB7XG4gICAgICAgIGNhcHR1cmU6IHRydWVcbiAgICB9LFxuICAgIFtOLmJ1YmJsaW5nXToge1xuICAgICAgICBjYXB0dXJlOiBmYWxzZVxuICAgIH1cbn07XG5cbmNsYXNzIExpc3RlbmVyIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlLCBpLCBzLCBuLCByLCBvLCBsKSB7XG4gICAgICAgIHRoaXMucGxhdGZvcm0gPSB0O1xuICAgICAgICB0aGlzLnRhcmdldEV2ZW50ID0gZTtcbiAgICAgICAgdGhpcy5kZWxlZ2F0aW9uU3RyYXRlZ3kgPSBpO1xuICAgICAgICB0aGlzLnNvdXJjZUV4cHJlc3Npb24gPSBzO1xuICAgICAgICB0aGlzLnRhcmdldCA9IG47XG4gICAgICAgIHRoaXMucHJldmVudERlZmF1bHQgPSByO1xuICAgICAgICB0aGlzLmV2ZW50RGVsZWdhdG9yID0gbztcbiAgICAgICAgdGhpcy5sb2NhdG9yID0gbDtcbiAgICAgICAgdGhpcy5pbnRlcmNlcHRvciA9IHRoaXM7XG4gICAgICAgIHRoaXMuaXNCb3VuZCA9IGZhbHNlO1xuICAgICAgICB0aGlzLmhhbmRsZXIgPSBudWxsO1xuICAgIH1cbiAgICBjYWxsU291cmNlKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IHRoaXMuJHNjb3BlLm92ZXJyaWRlQ29udGV4dDtcbiAgICAgICAgZS4kZXZlbnQgPSB0O1xuICAgICAgICBjb25zdCBpID0gdGhpcy5zb3VyY2VFeHByZXNzaW9uLmV2YWx1YXRlKDgsIHRoaXMuJHNjb3BlLCB0aGlzLmxvY2F0b3IsIG51bGwpO1xuICAgICAgICBSZWZsZWN0LmRlbGV0ZVByb3BlcnR5KGUsIFwiJGV2ZW50XCIpO1xuICAgICAgICBpZiAodHJ1ZSAhPT0gaSAmJiB0aGlzLnByZXZlbnREZWZhdWx0KSB0LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIHJldHVybiBpO1xuICAgIH1cbiAgICBoYW5kbGVFdmVudCh0KSB7XG4gICAgICAgIHRoaXMuaW50ZXJjZXB0b3IuY2FsbFNvdXJjZSh0KTtcbiAgICB9XG4gICAgJGJpbmQodCwgZSkge1xuICAgICAgICBpZiAodGhpcy5pc0JvdW5kKSB7XG4gICAgICAgICAgICBpZiAodGhpcy4kc2NvcGUgPT09IGUpIHJldHVybjtcbiAgICAgICAgICAgIHRoaXMuaW50ZXJjZXB0b3IuJHVuYmluZCgyIHwgdCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy4kc2NvcGUgPSBlO1xuICAgICAgICBjb25zdCBpID0gdGhpcy5zb3VyY2VFeHByZXNzaW9uO1xuICAgICAgICBpZiAoaS5oYXNCaW5kKSBpLmJpbmQodCwgZSwgdGhpcy5pbnRlcmNlcHRvcik7XG4gICAgICAgIGlmICh0aGlzLmRlbGVnYXRpb25TdHJhdGVneSA9PT0gTi5ub25lKSB0aGlzLnRhcmdldC5hZGRFdmVudExpc3RlbmVyKHRoaXMudGFyZ2V0RXZlbnQsIHRoaXMpOyBlbHNlIHRoaXMuaGFuZGxlciA9IHRoaXMuZXZlbnREZWxlZ2F0b3IuYWRkRXZlbnRMaXN0ZW5lcih0aGlzLmxvY2F0b3IuZ2V0KHJzKSwgdGhpcy50YXJnZXQsIHRoaXMudGFyZ2V0RXZlbnQsIHRoaXMsIHBzW3RoaXMuZGVsZWdhdGlvblN0cmF0ZWd5XSk7XG4gICAgICAgIHRoaXMuaXNCb3VuZCA9IHRydWU7XG4gICAgfVxuICAgICR1bmJpbmQodCkge1xuICAgICAgICBpZiAoIXRoaXMuaXNCb3VuZCkgcmV0dXJuO1xuICAgICAgICBjb25zdCBlID0gdGhpcy5zb3VyY2VFeHByZXNzaW9uO1xuICAgICAgICBpZiAoZS5oYXNVbmJpbmQpIGUudW5iaW5kKHQsIHRoaXMuJHNjb3BlLCB0aGlzLmludGVyY2VwdG9yKTtcbiAgICAgICAgdGhpcy4kc2NvcGUgPSBudWxsO1xuICAgICAgICBpZiAodGhpcy5kZWxlZ2F0aW9uU3RyYXRlZ3kgPT09IE4ubm9uZSkgdGhpcy50YXJnZXQucmVtb3ZlRXZlbnRMaXN0ZW5lcih0aGlzLnRhcmdldEV2ZW50LCB0aGlzKTsgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmhhbmRsZXIuZGlzcG9zZSgpO1xuICAgICAgICAgICAgdGhpcy5oYW5kbGVyID0gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmlzQm91bmQgPSBmYWxzZTtcbiAgICB9XG4gICAgb2JzZXJ2ZSh0LCBlKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaGFuZGxlQ2hhbmdlKHQsIGUsIGkpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbn1cblxuY29uc3QgZ3MgPSB7XG4gICAgY2FwdHVyZTogZmFsc2Vcbn07XG5cbmNsYXNzIExpc3RlbmVyVHJhY2tlciB7XG4gICAgY29uc3RydWN0b3IodCwgZSwgaSA9IGdzKSB7XG4gICAgICAgIHRoaXMuanQgPSB0O1xuICAgICAgICB0aGlzLk50ID0gZTtcbiAgICAgICAgdGhpcy5XdCA9IGk7XG4gICAgICAgIHRoaXMuSHQgPSAwO1xuICAgICAgICB0aGlzLnp0ID0gbmV3IE1hcDtcbiAgICAgICAgdGhpcy5HdCA9IG5ldyBNYXA7XG4gICAgfVxuICAgIFh0KCkge1xuICAgICAgICBpZiAoMSA9PT0gKyt0aGlzLkh0KSB0aGlzLmp0LmFkZEV2ZW50TGlzdGVuZXIodGhpcy5OdCwgdGhpcywgdGhpcy5XdCk7XG4gICAgfVxuICAgIEt0KCkge1xuICAgICAgICBpZiAoMCA9PT0gLS10aGlzLkh0KSB0aGlzLmp0LnJlbW92ZUV2ZW50TGlzdGVuZXIodGhpcy5OdCwgdGhpcywgdGhpcy5XdCk7XG4gICAgfVxuICAgIGRpc3Bvc2UoKSB7XG4gICAgICAgIGlmICh0aGlzLkh0ID4gMCkge1xuICAgICAgICAgICAgdGhpcy5IdCA9IDA7XG4gICAgICAgICAgICB0aGlzLmp0LnJlbW92ZUV2ZW50TGlzdGVuZXIodGhpcy5OdCwgdGhpcywgdGhpcy5XdCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy56dC5jbGVhcigpO1xuICAgICAgICB0aGlzLkd0LmNsZWFyKCk7XG4gICAgfVxuICAgIFl0KHQpIHtcbiAgICAgICAgY29uc3QgZSA9IHRydWUgPT09IHRoaXMuV3QuY2FwdHVyZSA/IHRoaXMuenQgOiB0aGlzLkd0O1xuICAgICAgICBsZXQgaSA9IGUuZ2V0KHQpO1xuICAgICAgICBpZiAodm9pZCAwID09PSBpKSBlLnNldCh0LCBpID0gd3QoKSk7XG4gICAgICAgIHJldHVybiBpO1xuICAgIH1cbiAgICBoYW5kbGVFdmVudCh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSB0cnVlID09PSB0aGlzLld0LmNhcHR1cmUgPyB0aGlzLnp0IDogdGhpcy5HdDtcbiAgICAgICAgY29uc3QgaSA9IHQuY29tcG9zZWRQYXRoKCk7XG4gICAgICAgIGlmICh0cnVlID09PSB0aGlzLld0LmNhcHR1cmUpIGkucmV2ZXJzZSgpO1xuICAgICAgICBmb3IgKGNvbnN0IHMgb2YgaSkge1xuICAgICAgICAgICAgY29uc3QgaSA9IGUuZ2V0KHMpO1xuICAgICAgICAgICAgaWYgKHZvaWQgMCA9PT0gaSkgY29udGludWU7XG4gICAgICAgICAgICBjb25zdCBuID0gaVt0aGlzLk50XTtcbiAgICAgICAgICAgIGlmICh2b2lkIDAgPT09IG4pIGNvbnRpbnVlO1xuICAgICAgICAgICAgaWYgKEN0KG4pKSBuKHQpOyBlbHNlIG4uaGFuZGxlRXZlbnQodCk7XG4gICAgICAgICAgICBpZiAodHJ1ZSA9PT0gdC5jYW5jZWxCdWJibGUpIHJldHVybjtcbiAgICAgICAgfVxuICAgIH1cbn1cblxuY2xhc3MgRGVsZWdhdGVTdWJzY3JpcHRpb24ge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUsIGksIHMpIHtcbiAgICAgICAgdGhpcy5RdCA9IHQ7XG4gICAgICAgIHRoaXMuWnQgPSBlO1xuICAgICAgICB0aGlzLk50ID0gaTtcbiAgICAgICAgdC5YdCgpO1xuICAgICAgICBlW2ldID0gcztcbiAgICB9XG4gICAgZGlzcG9zZSgpIHtcbiAgICAgICAgdGhpcy5RdC5LdCgpO1xuICAgICAgICB0aGlzLlp0W3RoaXMuTnRdID0gdm9pZCAwO1xuICAgIH1cbn1cblxuY2xhc3MgRXZlbnRTdWJzY3JpYmVyIHtcbiAgICBjb25zdHJ1Y3Rvcih0KSB7XG4gICAgICAgIHRoaXMuY29uZmlnID0gdDtcbiAgICAgICAgdGhpcy50YXJnZXQgPSBudWxsO1xuICAgICAgICB0aGlzLmhhbmRsZXIgPSBudWxsO1xuICAgIH1cbiAgICBzdWJzY3JpYmUodCwgZSkge1xuICAgICAgICB0aGlzLnRhcmdldCA9IHQ7XG4gICAgICAgIHRoaXMuaGFuZGxlciA9IGU7XG4gICAgICAgIGxldCBpO1xuICAgICAgICBmb3IgKGkgb2YgdGhpcy5jb25maWcuZXZlbnRzKSB0LmFkZEV2ZW50TGlzdGVuZXIoaSwgZSk7XG4gICAgfVxuICAgIGRpc3Bvc2UoKSB7XG4gICAgICAgIGNvbnN0IHt0YXJnZXQ6IHQsIGhhbmRsZXI6IGV9ID0gdGhpcztcbiAgICAgICAgbGV0IGk7XG4gICAgICAgIGlmIChudWxsICE9PSB0ICYmIG51bGwgIT09IGUpIGZvciAoaSBvZiB0aGlzLmNvbmZpZy5ldmVudHMpIHQucmVtb3ZlRXZlbnRMaXN0ZW5lcihpLCBlKTtcbiAgICAgICAgdGhpcy50YXJnZXQgPSB0aGlzLmhhbmRsZXIgPSBudWxsO1xuICAgIH1cbn1cblxuY29uc3Qgd3MgPSBsLmNyZWF0ZUludGVyZmFjZShcIklFdmVudERlbGVnYXRvclwiLCAodCA9PiB0LnNpbmdsZXRvbihFdmVudERlbGVnYXRvcikpKTtcblxuY2xhc3MgRXZlbnREZWxlZ2F0b3Ige1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICB0aGlzLkp0ID0gd3QoKTtcbiAgICB9XG4gICAgYWRkRXZlbnRMaXN0ZW5lcih0LCBlLCBpLCBzLCBuKSB7XG4gICAgICAgIHZhciByO1xuICAgICAgICB2YXIgbztcbiAgICAgICAgY29uc3QgbCA9IG51bGwgIT09IChyID0gKG8gPSB0aGlzLkp0KVtpXSkgJiYgdm9pZCAwICE9PSByID8gciA6IG9baV0gPSBuZXcgTWFwO1xuICAgICAgICBsZXQgaCA9IGwuZ2V0KHQpO1xuICAgICAgICBpZiAodm9pZCAwID09PSBoKSBsLnNldCh0LCBoID0gbmV3IExpc3RlbmVyVHJhY2tlcih0LCBpLCBuKSk7XG4gICAgICAgIHJldHVybiBuZXcgRGVsZWdhdGVTdWJzY3JpcHRpb24oaCwgaC5ZdChlKSwgaSwgcyk7XG4gICAgfVxuICAgIGRpc3Bvc2UoKSB7XG4gICAgICAgIGZvciAoY29uc3QgdCBpbiB0aGlzLkp0KSB7XG4gICAgICAgICAgICBjb25zdCBlID0gdGhpcy5KdFt0XTtcbiAgICAgICAgICAgIGZvciAoY29uc3QgdCBvZiBlLnZhbHVlcygpKSB0LmRpc3Bvc2UoKTtcbiAgICAgICAgICAgIGUuY2xlYXIoKTtcbiAgICAgICAgfVxuICAgIH1cbn1cblxuY29uc3QgYnMgPSBsLmNyZWF0ZUludGVyZmFjZShcIklQcm9qZWN0aW9uc1wiKTtcblxuY29uc3QgeHMgPSBsLmNyZWF0ZUludGVyZmFjZShcIklBdVNsb3RzSW5mb1wiKTtcblxuY2xhc3MgQXVTbG90c0luZm8ge1xuICAgIGNvbnN0cnVjdG9yKHQpIHtcbiAgICAgICAgdGhpcy5wcm9qZWN0ZWRTbG90cyA9IHQ7XG4gICAgfVxufVxuXG52YXIgeXM7XG5cbihmdW5jdGlvbih0KSB7XG4gICAgdFtcImh5ZHJhdGVFbGVtZW50XCJdID0gXCJyYVwiO1xuICAgIHRbXCJoeWRyYXRlQXR0cmlidXRlXCJdID0gXCJyYlwiO1xuICAgIHRbXCJoeWRyYXRlVGVtcGxhdGVDb250cm9sbGVyXCJdID0gXCJyY1wiO1xuICAgIHRbXCJoeWRyYXRlTGV0RWxlbWVudFwiXSA9IFwicmRcIjtcbiAgICB0W1wic2V0UHJvcGVydHlcIl0gPSBcInJlXCI7XG4gICAgdFtcImludGVycG9sYXRpb25cIl0gPSBcInJmXCI7XG4gICAgdFtcInByb3BlcnR5QmluZGluZ1wiXSA9IFwicmdcIjtcbiAgICB0W1wiY2FsbEJpbmRpbmdcIl0gPSBcInJoXCI7XG4gICAgdFtcImxldEJpbmRpbmdcIl0gPSBcInJpXCI7XG4gICAgdFtcInJlZkJpbmRpbmdcIl0gPSBcInJqXCI7XG4gICAgdFtcIml0ZXJhdG9yQmluZGluZ1wiXSA9IFwicmtcIjtcbiAgICB0W1widGV4dEJpbmRpbmdcIl0gPSBcImhhXCI7XG4gICAgdFtcImxpc3RlbmVyQmluZGluZ1wiXSA9IFwiaGJcIjtcbiAgICB0W1wiYXR0cmlidXRlQmluZGluZ1wiXSA9IFwiaGNcIjtcbiAgICB0W1wic3R5bGVQcm9wZXJ0eUJpbmRpbmdcIl0gPSBcImhkXCI7XG4gICAgdFtcInNldEF0dHJpYnV0ZVwiXSA9IFwiaGVcIjtcbiAgICB0W1wic2V0Q2xhc3NBdHRyaWJ1dGVcIl0gPSBcImhmXCI7XG4gICAgdFtcInNldFN0eWxlQXR0cmlidXRlXCJdID0gXCJoZ1wiO1xuICAgIHRbXCJzcHJlYWRCaW5kaW5nXCJdID0gXCJoc1wiO1xuICAgIHRbXCJzcHJlYWRFbGVtZW50UHJvcFwiXSA9IFwiaHBcIjtcbn0pKHlzIHx8ICh5cyA9IHt9KSk7XG5cbmNvbnN0IGtzID0gbC5jcmVhdGVJbnRlcmZhY2UoXCJJbnN0cnVjdGlvblwiKTtcblxuZnVuY3Rpb24gQ3ModCkge1xuICAgIGNvbnN0IGUgPSB0LnR5cGU7XG4gICAgcmV0dXJuIEF0KGUpICYmIDIgPT09IGUubGVuZ3RoO1xufVxuXG5jbGFzcyBJbnRlcnBvbGF0aW9uSW5zdHJ1Y3Rpb24ge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUpIHtcbiAgICAgICAgdGhpcy5mcm9tID0gdDtcbiAgICAgICAgdGhpcy50byA9IGU7XG4gICAgfVxuICAgIGdldCB0eXBlKCkge1xuICAgICAgICByZXR1cm4gXCJyZlwiO1xuICAgIH1cbn1cblxuY2xhc3MgUHJvcGVydHlCaW5kaW5nSW5zdHJ1Y3Rpb24ge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUsIGkpIHtcbiAgICAgICAgdGhpcy5mcm9tID0gdDtcbiAgICAgICAgdGhpcy50byA9IGU7XG4gICAgICAgIHRoaXMubW9kZSA9IGk7XG4gICAgfVxuICAgIGdldCB0eXBlKCkge1xuICAgICAgICByZXR1cm4gXCJyZ1wiO1xuICAgIH1cbn1cblxuY2xhc3MgSXRlcmF0b3JCaW5kaW5nSW5zdHJ1Y3Rpb24ge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUpIHtcbiAgICAgICAgdGhpcy5mcm9tID0gdDtcbiAgICAgICAgdGhpcy50byA9IGU7XG4gICAgfVxuICAgIGdldCB0eXBlKCkge1xuICAgICAgICByZXR1cm4gXCJya1wiO1xuICAgIH1cbn1cblxuY2xhc3MgQ2FsbEJpbmRpbmdJbnN0cnVjdGlvbiB7XG4gICAgY29uc3RydWN0b3IodCwgZSkge1xuICAgICAgICB0aGlzLmZyb20gPSB0O1xuICAgICAgICB0aGlzLnRvID0gZTtcbiAgICB9XG4gICAgZ2V0IHR5cGUoKSB7XG4gICAgICAgIHJldHVybiBcInJoXCI7XG4gICAgfVxufVxuXG5jbGFzcyBSZWZCaW5kaW5nSW5zdHJ1Y3Rpb24ge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUpIHtcbiAgICAgICAgdGhpcy5mcm9tID0gdDtcbiAgICAgICAgdGhpcy50byA9IGU7XG4gICAgfVxuICAgIGdldCB0eXBlKCkge1xuICAgICAgICByZXR1cm4gXCJyalwiO1xuICAgIH1cbn1cblxuY2xhc3MgU2V0UHJvcGVydHlJbnN0cnVjdGlvbiB7XG4gICAgY29uc3RydWN0b3IodCwgZSkge1xuICAgICAgICB0aGlzLnZhbHVlID0gdDtcbiAgICAgICAgdGhpcy50byA9IGU7XG4gICAgfVxuICAgIGdldCB0eXBlKCkge1xuICAgICAgICByZXR1cm4gXCJyZVwiO1xuICAgIH1cbn1cblxuY2xhc3MgSHlkcmF0ZUVsZW1lbnRJbnN0cnVjdGlvbiB7XG4gICAgY29uc3RydWN0b3IodCwgZSwgaSwgcywgbiwgcikge1xuICAgICAgICB0aGlzLnJlcyA9IHQ7XG4gICAgICAgIHRoaXMuYWxpYXMgPSBlO1xuICAgICAgICB0aGlzLnByb3BzID0gaTtcbiAgICAgICAgdGhpcy5wcm9qZWN0aW9ucyA9IHM7XG4gICAgICAgIHRoaXMuY29udGFpbmVybGVzcyA9IG47XG4gICAgICAgIHRoaXMuY2FwdHVyZXMgPSByO1xuICAgICAgICB0aGlzLmF1U2xvdCA9IG51bGw7XG4gICAgfVxuICAgIGdldCB0eXBlKCkge1xuICAgICAgICByZXR1cm4gXCJyYVwiO1xuICAgIH1cbn1cblxuY2xhc3MgSHlkcmF0ZUF0dHJpYnV0ZUluc3RydWN0aW9uIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlLCBpKSB7XG4gICAgICAgIHRoaXMucmVzID0gdDtcbiAgICAgICAgdGhpcy5hbGlhcyA9IGU7XG4gICAgICAgIHRoaXMucHJvcHMgPSBpO1xuICAgIH1cbiAgICBnZXQgdHlwZSgpIHtcbiAgICAgICAgcmV0dXJuIFwicmJcIjtcbiAgICB9XG59XG5cbmNsYXNzIEh5ZHJhdGVUZW1wbGF0ZUNvbnRyb2xsZXIge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUsIGksIHMpIHtcbiAgICAgICAgdGhpcy5kZWYgPSB0O1xuICAgICAgICB0aGlzLnJlcyA9IGU7XG4gICAgICAgIHRoaXMuYWxpYXMgPSBpO1xuICAgICAgICB0aGlzLnByb3BzID0gcztcbiAgICB9XG4gICAgZ2V0IHR5cGUoKSB7XG4gICAgICAgIHJldHVybiBcInJjXCI7XG4gICAgfVxufVxuXG5jbGFzcyBIeWRyYXRlTGV0RWxlbWVudEluc3RydWN0aW9uIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlKSB7XG4gICAgICAgIHRoaXMuaW5zdHJ1Y3Rpb25zID0gdDtcbiAgICAgICAgdGhpcy50b0JpbmRpbmdDb250ZXh0ID0gZTtcbiAgICB9XG4gICAgZ2V0IHR5cGUoKSB7XG4gICAgICAgIHJldHVybiBcInJkXCI7XG4gICAgfVxufVxuXG5jbGFzcyBMZXRCaW5kaW5nSW5zdHJ1Y3Rpb24ge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUpIHtcbiAgICAgICAgdGhpcy5mcm9tID0gdDtcbiAgICAgICAgdGhpcy50byA9IGU7XG4gICAgfVxuICAgIGdldCB0eXBlKCkge1xuICAgICAgICByZXR1cm4gXCJyaVwiO1xuICAgIH1cbn1cblxuY2xhc3MgVGV4dEJpbmRpbmdJbnN0cnVjdGlvbiB7XG4gICAgY29uc3RydWN0b3IodCwgZSkge1xuICAgICAgICB0aGlzLmZyb20gPSB0O1xuICAgICAgICB0aGlzLnN0cmljdCA9IGU7XG4gICAgfVxuICAgIGdldCB0eXBlKCkge1xuICAgICAgICByZXR1cm4gXCJoYVwiO1xuICAgIH1cbn1cblxuY2xhc3MgTGlzdGVuZXJCaW5kaW5nSW5zdHJ1Y3Rpb24ge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUsIGksIHMpIHtcbiAgICAgICAgdGhpcy5mcm9tID0gdDtcbiAgICAgICAgdGhpcy50byA9IGU7XG4gICAgICAgIHRoaXMucHJldmVudERlZmF1bHQgPSBpO1xuICAgICAgICB0aGlzLnN0cmF0ZWd5ID0gcztcbiAgICB9XG4gICAgZ2V0IHR5cGUoKSB7XG4gICAgICAgIHJldHVybiBcImhiXCI7XG4gICAgfVxufVxuXG5jbGFzcyBTdHlsZVByb3BlcnR5QmluZGluZ0luc3RydWN0aW9uIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlKSB7XG4gICAgICAgIHRoaXMuZnJvbSA9IHQ7XG4gICAgICAgIHRoaXMudG8gPSBlO1xuICAgIH1cbiAgICBnZXQgdHlwZSgpIHtcbiAgICAgICAgcmV0dXJuIFwiaGRcIjtcbiAgICB9XG59XG5cbmNsYXNzIFNldEF0dHJpYnV0ZUluc3RydWN0aW9uIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlKSB7XG4gICAgICAgIHRoaXMudmFsdWUgPSB0O1xuICAgICAgICB0aGlzLnRvID0gZTtcbiAgICB9XG4gICAgZ2V0IHR5cGUoKSB7XG4gICAgICAgIHJldHVybiBcImhlXCI7XG4gICAgfVxufVxuXG5jbGFzcyBTZXRDbGFzc0F0dHJpYnV0ZUluc3RydWN0aW9uIHtcbiAgICBjb25zdHJ1Y3Rvcih0KSB7XG4gICAgICAgIHRoaXMudmFsdWUgPSB0O1xuICAgICAgICB0aGlzLnR5cGUgPSBcImhmXCI7XG4gICAgfVxufVxuXG5jbGFzcyBTZXRTdHlsZUF0dHJpYnV0ZUluc3RydWN0aW9uIHtcbiAgICBjb25zdHJ1Y3Rvcih0KSB7XG4gICAgICAgIHRoaXMudmFsdWUgPSB0O1xuICAgICAgICB0aGlzLnR5cGUgPSBcImhnXCI7XG4gICAgfVxufVxuXG5jbGFzcyBBdHRyaWJ1dGVCaW5kaW5nSW5zdHJ1Y3Rpb24ge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUsIGkpIHtcbiAgICAgICAgdGhpcy5hdHRyID0gdDtcbiAgICAgICAgdGhpcy5mcm9tID0gZTtcbiAgICAgICAgdGhpcy50byA9IGk7XG4gICAgfVxuICAgIGdldCB0eXBlKCkge1xuICAgICAgICByZXR1cm4gXCJoY1wiO1xuICAgIH1cbn1cblxuY2xhc3MgU3ByZWFkQmluZGluZ0luc3RydWN0aW9uIHtcbiAgICBnZXQgdHlwZSgpIHtcbiAgICAgICAgcmV0dXJuIFwiaHNcIjtcbiAgICB9XG59XG5cbmNsYXNzIFNwcmVhZEVsZW1lbnRQcm9wQmluZGluZ0luc3RydWN0aW9uIHtcbiAgICBjb25zdHJ1Y3Rvcih0KSB7XG4gICAgICAgIHRoaXMuaW5zdHJ1Y3Rpb25zID0gdDtcbiAgICB9XG4gICAgZ2V0IHR5cGUoKSB7XG4gICAgICAgIHJldHVybiBcImhwXCI7XG4gICAgfVxufVxuXG5jb25zdCBBcyA9IGwuY3JlYXRlSW50ZXJmYWNlKFwiSVRlbXBsYXRlQ29tcGlsZXJcIik7XG5cbmNvbnN0IFNzID0gbC5jcmVhdGVJbnRlcmZhY2UoXCJJUmVuZGVyZXJcIik7XG5cbmZ1bmN0aW9uIFJzKHQpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gaShzKSB7XG4gICAgICAgIGNvbnN0IG4gPSBmdW5jdGlvbiguLi5lKSB7XG4gICAgICAgICAgICBjb25zdCBpID0gbmV3IHMoLi4uZSk7XG4gICAgICAgICAgICBpLmluc3RydWN0aW9uVHlwZSA9IHQ7XG4gICAgICAgICAgICByZXR1cm4gaTtcbiAgICAgICAgfTtcbiAgICAgICAgbi5yZWdpc3RlciA9IGZ1bmN0aW9uIHQoZSkge1xuICAgICAgICAgICAgYy5zaW5nbGV0b24oU3MsIG4pLnJlZ2lzdGVyKGUpO1xuICAgICAgICB9O1xuICAgICAgICBjb25zdCByID0gZS5nZXRPd25LZXlzKHMpO1xuICAgICAgICBmb3IgKGNvbnN0IHQgb2YgcikgY3QodCwgaHQodCwgcyksIG4pO1xuICAgICAgICBjb25zdCBvID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMocyk7XG4gICAgICAgIE9iamVjdC5rZXlzKG8pLmZpbHRlcigodCA9PiBcInByb3RvdHlwZVwiICE9PSB0KSkuZm9yRWFjaCgodCA9PiB7XG4gICAgICAgICAgICBSZWZsZWN0LmRlZmluZVByb3BlcnR5KG4sIHQsIG9bdF0pO1xuICAgICAgICB9KSk7XG4gICAgICAgIHJldHVybiBuO1xuICAgIH07XG59XG5cbmZ1bmN0aW9uIEVzKHQsIGUsIGkpIHtcbiAgICBpZiAoQXQoZSkpIHJldHVybiB0LnBhcnNlKGUsIGkpO1xuICAgIHJldHVybiBlO1xufVxuXG5mdW5jdGlvbiBCcyh0KSB7XG4gICAgaWYgKG51bGwgIT0gdC52aWV3TW9kZWwpIHJldHVybiB0LnZpZXdNb2RlbDtcbiAgICByZXR1cm4gdDtcbn1cblxuZnVuY3Rpb24gSXModCwgZSkge1xuICAgIGlmIChcImVsZW1lbnRcIiA9PT0gZSkgcmV0dXJuIHQ7XG4gICAgc3dpdGNoIChlKSB7XG4gICAgICBjYXNlIFwiY29udHJvbGxlclwiOlxuICAgICAgICByZXR1cm4gc2kuZm9yKHQpO1xuXG4gICAgICBjYXNlIFwidmlld1wiOlxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJBVVIwNzUwXCIpO1xuXG4gICAgICBjYXNlIFwidmlldy1tb2RlbFwiOlxuICAgICAgICByZXR1cm4gc2kuZm9yKHQpLnZpZXdNb2RlbDtcblxuICAgICAgZGVmYXVsdDpcbiAgICAgICAge1xuICAgICAgICAgICAgY29uc3QgaSA9IE1lLmZvcih0LCBlKTtcbiAgICAgICAgICAgIGlmICh2b2lkIDAgIT09IGkpIHJldHVybiBpLnZpZXdNb2RlbDtcbiAgICAgICAgICAgIGNvbnN0IHMgPSBzaS5mb3IodCwge1xuICAgICAgICAgICAgICAgIG5hbWU6IGVcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgaWYgKHZvaWQgMCA9PT0gcykgdGhyb3cgbmV3IEVycm9yKGBBVVIwNzUxOiR7ZX1gKTtcbiAgICAgICAgICAgIHJldHVybiBzLnZpZXdNb2RlbDtcbiAgICAgICAgfVxuICAgIH1cbn1cblxubGV0IFRzID0gY2xhc3MgU2V0UHJvcGVydHlSZW5kZXJlciB7XG4gICAgcmVuZGVyKHQsIGUsIGkpIHtcbiAgICAgICAgY29uc3QgcyA9IEJzKGUpO1xuICAgICAgICBpZiAodm9pZCAwICE9PSBzLiRvYnNlcnZlcnMgJiYgdm9pZCAwICE9PSBzLiRvYnNlcnZlcnNbaS50b10pIHMuJG9ic2VydmVyc1tpLnRvXS5zZXRWYWx1ZShpLnZhbHVlLCAyKTsgZWxzZSBzW2kudG9dID0gaS52YWx1ZTtcbiAgICB9XG59O1xuXG5UcyA9IG90KFsgUnMoXCJyZVwiKSBdLCBUcyk7XG5cbmxldCBEcyA9IGNsYXNzIEN1c3RvbUVsZW1lbnRSZW5kZXJlciB7XG4gICAgY29uc3RydWN0b3IodCwgZSkge1xuICAgICAgICB0aGlzLnIgPSB0O1xuICAgICAgICB0aGlzLnAgPSBlO1xuICAgIH1cbiAgICBzdGF0aWMgZ2V0IGluamVjdCgpIHtcbiAgICAgICAgcmV0dXJuIFsgUGksIEt0IF07XG4gICAgfVxuICAgIHJlbmRlcih0LCBlLCBpKSB7XG4gICAgICAgIGxldCBzO1xuICAgICAgICBsZXQgbjtcbiAgICAgICAgbGV0IHI7XG4gICAgICAgIGxldCBvO1xuICAgICAgICBjb25zdCBsID0gaS5yZXM7XG4gICAgICAgIGNvbnN0IGggPSBpLnByb2plY3Rpb25zO1xuICAgICAgICBjb25zdCBhID0gdC5jb250YWluZXI7XG4gICAgICAgIGNvbnN0IGMgPSBubih0aGlzLnAsIHQsIGUsIGksIGUsIG51bGwgPT0gaCA/IHZvaWQgMCA6IG5ldyBBdVNsb3RzSW5mbyhPYmplY3Qua2V5cyhoKSkpO1xuICAgICAgICBzd2l0Y2ggKHR5cGVvZiBsKSB7XG4gICAgICAgICAgY2FzZSBcInN0cmluZ1wiOlxuICAgICAgICAgICAgcyA9IGEuZmluZChzaSwgbCk7XG4gICAgICAgICAgICBpZiAobnVsbCA9PSBzKSB0aHJvdyBuZXcgRXJyb3IoYEFVUjA3NTI6JHtsfUAke3RbXCJuYW1lXCJdfWApO1xuICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgcyA9IGw7XG4gICAgICAgIH1cbiAgICAgICAgbiA9IHMuVHlwZTtcbiAgICAgICAgciA9IGMuaW52b2tlKG4pO1xuICAgICAgICBjLnJlZ2lzdGVyUmVzb2x2ZXIobiwgbmV3IHgocy5rZXksIHIpKTtcbiAgICAgICAgbyA9IENvbnRyb2xsZXIuJGVsKGMsIHIsIGUsIGksIHMpO1xuICAgICAgICBzcyhlLCBzLmtleSwgbyk7XG4gICAgICAgIGNvbnN0IHUgPSB0aGlzLnIucmVuZGVyZXJzO1xuICAgICAgICBjb25zdCBmID0gaS5wcm9wcztcbiAgICAgICAgY29uc3QgZCA9IGYubGVuZ3RoO1xuICAgICAgICBsZXQgbSA9IDA7XG4gICAgICAgIGxldCB2O1xuICAgICAgICB3aGlsZSAoZCA+IG0pIHtcbiAgICAgICAgICAgIHYgPSBmW21dO1xuICAgICAgICAgICAgdVt2LnR5cGVdLnJlbmRlcih0LCBvLCB2KTtcbiAgICAgICAgICAgICsrbTtcbiAgICAgICAgfVxuICAgICAgICB0LmFkZENoaWxkKG8pO1xuICAgIH1cbn07XG5cbkRzID0gb3QoWyBScyhcInJhXCIpIF0sIERzKTtcblxubGV0IFBzID0gY2xhc3MgQ3VzdG9tQXR0cmlidXRlUmVuZGVyZXIge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUpIHtcbiAgICAgICAgdGhpcy5yID0gdDtcbiAgICAgICAgdGhpcy5wID0gZTtcbiAgICB9XG4gICAgc3RhdGljIGdldCBpbmplY3QoKSB7XG4gICAgICAgIHJldHVybiBbIFBpLCBLdCBdO1xuICAgIH1cbiAgICByZW5kZXIodCwgZSwgaSkge1xuICAgICAgICBsZXQgcyA9IHQuY29udGFpbmVyO1xuICAgICAgICBsZXQgbjtcbiAgICAgICAgc3dpdGNoICh0eXBlb2YgaS5yZXMpIHtcbiAgICAgICAgICBjYXNlIFwic3RyaW5nXCI6XG4gICAgICAgICAgICBuID0gcy5maW5kKE1lLCBpLnJlcyk7XG4gICAgICAgICAgICBpZiAobnVsbCA9PSBuKSB0aHJvdyBuZXcgRXJyb3IoYEFVUjA3NTM6JHtpLnJlc31AJHt0W1wibmFtZVwiXX1gKTtcbiAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIG4gPSBpLnJlcztcbiAgICAgICAgfVxuICAgICAgICBjb25zdCByID0gcm4odGhpcy5wLCBuLCB0LCBlLCBpLCB2b2lkIDAsIHZvaWQgMCk7XG4gICAgICAgIGNvbnN0IG8gPSBDb250cm9sbGVyLiRhdHRyKHQuY29udGFpbmVyLCByLCBlLCBuKTtcbiAgICAgICAgc3MoZSwgbi5rZXksIG8pO1xuICAgICAgICBjb25zdCBsID0gdGhpcy5yLnJlbmRlcmVycztcbiAgICAgICAgY29uc3QgaCA9IGkucHJvcHM7XG4gICAgICAgIGNvbnN0IGEgPSBoLmxlbmd0aDtcbiAgICAgICAgbGV0IGMgPSAwO1xuICAgICAgICBsZXQgdTtcbiAgICAgICAgd2hpbGUgKGEgPiBjKSB7XG4gICAgICAgICAgICB1ID0gaFtjXTtcbiAgICAgICAgICAgIGxbdS50eXBlXS5yZW5kZXIodCwgbywgdSk7XG4gICAgICAgICAgICArK2M7XG4gICAgICAgIH1cbiAgICAgICAgdC5hZGRDaGlsZChvKTtcbiAgICB9XG59O1xuXG5QcyA9IG90KFsgUnMoXCJyYlwiKSBdLCBQcyk7XG5cbmxldCBPcyA9IGNsYXNzIFRlbXBsYXRlQ29udHJvbGxlclJlbmRlcmVyIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlKSB7XG4gICAgICAgIHRoaXMuciA9IHQ7XG4gICAgICAgIHRoaXMucCA9IGU7XG4gICAgfVxuICAgIHN0YXRpYyBnZXQgaW5qZWN0KCkge1xuICAgICAgICByZXR1cm4gWyBQaSwgS3QgXTtcbiAgICB9XG4gICAgcmVuZGVyKHQsIGUsIGkpIHtcbiAgICAgICAgdmFyIHM7XG4gICAgICAgIGxldCBuID0gdC5jb250YWluZXI7XG4gICAgICAgIGxldCByO1xuICAgICAgICBzd2l0Y2ggKHR5cGVvZiBpLnJlcykge1xuICAgICAgICAgIGNhc2UgXCJzdHJpbmdcIjpcbiAgICAgICAgICAgIHIgPSBuLmZpbmQoTWUsIGkucmVzKTtcbiAgICAgICAgICAgIGlmIChudWxsID09IHIpIHRocm93IG5ldyBFcnJvcihgQVVSMDc1NDoke2kucmVzfUAke3RbXCJuYW1lXCJdfWApO1xuICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgciA9IGkucmVzO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IG8gPSB0aGlzLnIuZ2V0Vmlld0ZhY3RvcnkoaS5kZWYsIG4pO1xuICAgICAgICBjb25zdCBsID0gdXMoZSk7XG4gICAgICAgIGNvbnN0IGggPSBybih0aGlzLnAsIHIsIHQsIGUsIGksIG8sIGwpO1xuICAgICAgICBjb25zdCBhID0gQ29udHJvbGxlci4kYXR0cih0LmNvbnRhaW5lciwgaCwgZSwgcik7XG4gICAgICAgIHNzKGwsIHIua2V5LCBhKTtcbiAgICAgICAgbnVsbCA9PT0gKHMgPSBoLmxpbmspIHx8IHZvaWQgMCA9PT0gcyA/IHZvaWQgMCA6IHMuY2FsbChoLCB0LCBhLCBlLCBpKTtcbiAgICAgICAgY29uc3QgYyA9IHRoaXMuci5yZW5kZXJlcnM7XG4gICAgICAgIGNvbnN0IHUgPSBpLnByb3BzO1xuICAgICAgICBjb25zdCBmID0gdS5sZW5ndGg7XG4gICAgICAgIGxldCBkID0gMDtcbiAgICAgICAgbGV0IG07XG4gICAgICAgIHdoaWxlIChmID4gZCkge1xuICAgICAgICAgICAgbSA9IHVbZF07XG4gICAgICAgICAgICBjW20udHlwZV0ucmVuZGVyKHQsIGEsIG0pO1xuICAgICAgICAgICAgKytkO1xuICAgICAgICB9XG4gICAgICAgIHQuYWRkQ2hpbGQoYSk7XG4gICAgfVxufTtcblxuT3MgPSBvdChbIFJzKFwicmNcIikgXSwgT3MpO1xuXG5sZXQgJHMgPSBjbGFzcyBMZXRFbGVtZW50UmVuZGVyZXIge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUpIHtcbiAgICAgICAgdGhpcy5lcCA9IHQ7XG4gICAgICAgIHRoaXMub0wgPSBlO1xuICAgIH1cbiAgICByZW5kZXIodCwgZSwgaSkge1xuICAgICAgICBlLnJlbW92ZSgpO1xuICAgICAgICBjb25zdCBzID0gaS5pbnN0cnVjdGlvbnM7XG4gICAgICAgIGNvbnN0IG4gPSBpLnRvQmluZGluZ0NvbnRleHQ7XG4gICAgICAgIGNvbnN0IHIgPSB0LmNvbnRhaW5lcjtcbiAgICAgICAgY29uc3QgbyA9IHMubGVuZ3RoO1xuICAgICAgICBsZXQgbDtcbiAgICAgICAgbGV0IGg7XG4gICAgICAgIGxldCBhO1xuICAgICAgICBsZXQgYyA9IDA7XG4gICAgICAgIHdoaWxlIChvID4gYykge1xuICAgICAgICAgICAgbCA9IHNbY107XG4gICAgICAgICAgICBoID0gRXModGhpcy5lcCwgbC5mcm9tLCA4KTtcbiAgICAgICAgICAgIGEgPSBuZXcgTGV0QmluZGluZyhoLCBsLnRvLCB0aGlzLm9MLCByLCBuKTtcbiAgICAgICAgICAgIHQuYWRkQmluZGluZygzODk2MiA9PT0gaC4ka2luZCA/IGpzKGEsIGgsIHIpIDogYSk7XG4gICAgICAgICAgICArK2M7XG4gICAgICAgIH1cbiAgICB9XG59O1xuXG4kcy5pbmplY3QgPSBbIF8sIFYgXTtcblxuJHMgPSBvdChbIFJzKFwicmRcIikgXSwgJHMpO1xuXG5sZXQgTHMgPSBjbGFzcyBDYWxsQmluZGluZ1JlbmRlcmVyIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlKSB7XG4gICAgICAgIHRoaXMuZXAgPSB0O1xuICAgICAgICB0aGlzLm9MID0gZTtcbiAgICB9XG4gICAgcmVuZGVyKHQsIGUsIGkpIHtcbiAgICAgICAgY29uc3QgcyA9IEVzKHRoaXMuZXAsIGkuZnJvbSwgOCB8IDQpO1xuICAgICAgICBjb25zdCBuID0gbmV3IENhbGxCaW5kaW5nKHMsIEJzKGUpLCBpLnRvLCB0aGlzLm9MLCB0LmNvbnRhaW5lcik7XG4gICAgICAgIHQuYWRkQmluZGluZygzODk2MiA9PT0gcy4ka2luZCA/IGpzKG4sIHMsIHQuY29udGFpbmVyKSA6IG4pO1xuICAgIH1cbn07XG5cbkxzLmluamVjdCA9IFsgXywgViBdO1xuXG5McyA9IG90KFsgUnMoXCJyaFwiKSBdLCBMcyk7XG5cbmxldCBxcyA9IGNsYXNzIFJlZkJpbmRpbmdSZW5kZXJlciB7XG4gICAgY29uc3RydWN0b3IodCkge1xuICAgICAgICB0aGlzLmVwID0gdDtcbiAgICB9XG4gICAgcmVuZGVyKHQsIGUsIGkpIHtcbiAgICAgICAgY29uc3QgcyA9IEVzKHRoaXMuZXAsIGkuZnJvbSwgOCk7XG4gICAgICAgIGNvbnN0IG4gPSBuZXcgUmVmQmluZGluZyhzLCBJcyhlLCBpLnRvKSwgdC5jb250YWluZXIpO1xuICAgICAgICB0LmFkZEJpbmRpbmcoMzg5NjIgPT09IHMuJGtpbmQgPyBqcyhuLCBzLCB0LmNvbnRhaW5lcikgOiBuKTtcbiAgICB9XG59O1xuXG5xcy5pbmplY3QgPSBbIF8gXTtcblxucXMgPSBvdChbIFJzKFwicmpcIikgXSwgcXMpO1xuXG5sZXQgTXMgPSBjbGFzcyBJbnRlcnBvbGF0aW9uQmluZGluZ1JlbmRlcmVyIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlLCBpKSB7XG4gICAgICAgIHRoaXMuZXAgPSB0O1xuICAgICAgICB0aGlzLm9MID0gZTtcbiAgICAgICAgdGhpcy5wID0gaTtcbiAgICB9XG4gICAgcmVuZGVyKHQsIGUsIGkpIHtcbiAgICAgICAgY29uc3QgcyA9IHQuY29udGFpbmVyO1xuICAgICAgICBjb25zdCBuID0gRXModGhpcy5lcCwgaS5mcm9tLCAxKTtcbiAgICAgICAgY29uc3QgciA9IG5ldyBJbnRlcnBvbGF0aW9uQmluZGluZyh0aGlzLm9MLCBuLCBCcyhlKSwgaS50bywgRC50b1ZpZXcsIHMsIHRoaXMucC5kb21Xcml0ZVF1ZXVlKTtcbiAgICAgICAgY29uc3QgbyA9IHIucGFydEJpbmRpbmdzO1xuICAgICAgICBjb25zdCBsID0gby5sZW5ndGg7XG4gICAgICAgIGxldCBoID0gMDtcbiAgICAgICAgbGV0IGE7XG4gICAgICAgIGZvciAoO2wgPiBoOyArK2gpIHtcbiAgICAgICAgICAgIGEgPSBvW2hdO1xuICAgICAgICAgICAgaWYgKDM4OTYyID09PSBhLnNvdXJjZUV4cHJlc3Npb24uJGtpbmQpIG9baF0gPSBqcyhhLCBhLnNvdXJjZUV4cHJlc3Npb24sIHMpO1xuICAgICAgICB9XG4gICAgICAgIHQuYWRkQmluZGluZyhyKTtcbiAgICB9XG59O1xuXG5Ncy5pbmplY3QgPSBbIF8sIFYsIEt0IF07XG5cbk1zID0gb3QoWyBScyhcInJmXCIpIF0sIE1zKTtcblxubGV0IFVzID0gY2xhc3MgUHJvcGVydHlCaW5kaW5nUmVuZGVyZXIge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUsIGkpIHtcbiAgICAgICAgdGhpcy5lcCA9IHQ7XG4gICAgICAgIHRoaXMub0wgPSBlO1xuICAgICAgICB0aGlzLnAgPSBpO1xuICAgIH1cbiAgICByZW5kZXIodCwgZSwgaSkge1xuICAgICAgICBjb25zdCBzID0gRXModGhpcy5lcCwgaS5mcm9tLCA4KTtcbiAgICAgICAgY29uc3QgbiA9IG5ldyBQcm9wZXJ0eUJpbmRpbmcocywgQnMoZSksIGkudG8sIGkubW9kZSwgdGhpcy5vTCwgdC5jb250YWluZXIsIHRoaXMucC5kb21Xcml0ZVF1ZXVlKTtcbiAgICAgICAgdC5hZGRCaW5kaW5nKDM4OTYyID09PSBzLiRraW5kID8ganMobiwgcywgdC5jb250YWluZXIpIDogbik7XG4gICAgfVxufTtcblxuVXMuaW5qZWN0ID0gWyBfLCBWLCBLdCBdO1xuXG5VcyA9IG90KFsgUnMoXCJyZ1wiKSBdLCBVcyk7XG5cbmxldCBGcyA9IGNsYXNzIEl0ZXJhdG9yQmluZGluZ1JlbmRlcmVyIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlLCBpKSB7XG4gICAgICAgIHRoaXMuZXAgPSB0O1xuICAgICAgICB0aGlzLm9MID0gZTtcbiAgICAgICAgdGhpcy5wID0gaTtcbiAgICB9XG4gICAgcmVuZGVyKHQsIGUsIGkpIHtcbiAgICAgICAgY29uc3QgcyA9IEVzKHRoaXMuZXAsIGkuZnJvbSwgMik7XG4gICAgICAgIGNvbnN0IG4gPSBuZXcgUHJvcGVydHlCaW5kaW5nKHMsIEJzKGUpLCBpLnRvLCBELnRvVmlldywgdGhpcy5vTCwgdC5jb250YWluZXIsIHRoaXMucC5kb21Xcml0ZVF1ZXVlKTtcbiAgICAgICAgdC5hZGRCaW5kaW5nKDM4OTYyID09PSBzLml0ZXJhYmxlLiRraW5kID8ganMobiwgcy5pdGVyYWJsZSwgdC5jb250YWluZXIpIDogbik7XG4gICAgfVxufTtcblxuRnMuaW5qZWN0ID0gWyBfLCBWLCBLdCBdO1xuXG5GcyA9IG90KFsgUnMoXCJya1wiKSBdLCBGcyk7XG5cbmxldCBWcyA9IDA7XG5cbmNvbnN0IF9zID0gW107XG5cbmZ1bmN0aW9uIGpzKHQsIGUsIGkpIHtcbiAgICB3aGlsZSAoZSBpbnN0YW5jZW9mIFcpIHtcbiAgICAgICAgX3NbVnMrK10gPSBlO1xuICAgICAgICBlID0gZS5leHByZXNzaW9uO1xuICAgIH1cbiAgICB3aGlsZSAoVnMgPiAwKSB7XG4gICAgICAgIGNvbnN0IGUgPSBfc1stLVZzXTtcbiAgICAgICAgY29uc3QgcyA9IGkuZ2V0KGUuYmVoYXZpb3JLZXkpO1xuICAgICAgICBpZiAocyBpbnN0YW5jZW9mIEgpIHQgPSBzLmNvbnN0cnVjdCh0LCBlKTtcbiAgICB9XG4gICAgX3MubGVuZ3RoID0gMDtcbiAgICByZXR1cm4gdDtcbn1cblxubGV0IE5zID0gY2xhc3MgVGV4dEJpbmRpbmdSZW5kZXJlciB7XG4gICAgY29uc3RydWN0b3IodCwgZSwgaSkge1xuICAgICAgICB0aGlzLmVwID0gdDtcbiAgICAgICAgdGhpcy5vTCA9IGU7XG4gICAgICAgIHRoaXMucCA9IGk7XG4gICAgfVxuICAgIHJlbmRlcih0LCBlLCBpKSB7XG4gICAgICAgIGNvbnN0IHMgPSB0LmNvbnRhaW5lcjtcbiAgICAgICAgY29uc3QgbiA9IGUubmV4dFNpYmxpbmc7XG4gICAgICAgIGNvbnN0IHIgPSBlLnBhcmVudE5vZGU7XG4gICAgICAgIGNvbnN0IG8gPSB0aGlzLnAuZG9jdW1lbnQ7XG4gICAgICAgIGNvbnN0IGwgPSBFcyh0aGlzLmVwLCBpLmZyb20sIDEpO1xuICAgICAgICBjb25zdCBoID0gbC5wYXJ0cztcbiAgICAgICAgY29uc3QgYSA9IGwuZXhwcmVzc2lvbnM7XG4gICAgICAgIGNvbnN0IGMgPSBhLmxlbmd0aDtcbiAgICAgICAgbGV0IHUgPSAwO1xuICAgICAgICBsZXQgZiA9IGhbMF07XG4gICAgICAgIGxldCBkO1xuICAgICAgICBsZXQgbTtcbiAgICAgICAgaWYgKFwiXCIgIT09IGYpIHIuaW5zZXJ0QmVmb3JlKG8uY3JlYXRlVGV4dE5vZGUoZiksIG4pO1xuICAgICAgICBmb3IgKDtjID4gdTsgKyt1KSB7XG4gICAgICAgICAgICBtID0gYVt1XTtcbiAgICAgICAgICAgIGQgPSBuZXcgQ29udGVudEJpbmRpbmcobSwgci5pbnNlcnRCZWZvcmUoby5jcmVhdGVUZXh0Tm9kZShcIlwiKSwgbiksIHMsIHRoaXMub0wsIHRoaXMucCwgaS5zdHJpY3QpO1xuICAgICAgICAgICAgdC5hZGRCaW5kaW5nKDM4OTYyID09PSBtLiRraW5kID8ganMoZCwgbSwgcykgOiBkKTtcbiAgICAgICAgICAgIGYgPSBoW3UgKyAxXTtcbiAgICAgICAgICAgIGlmIChcIlwiICE9PSBmKSByLmluc2VydEJlZm9yZShvLmNyZWF0ZVRleHROb2RlKGYpLCBuKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoXCJBVS1NXCIgPT09IGUubm9kZU5hbWUpIGUucmVtb3ZlKCk7XG4gICAgfVxufTtcblxuTnMuaW5qZWN0ID0gWyBfLCBWLCBLdCBdO1xuXG5OcyA9IG90KFsgUnMoXCJoYVwiKSBdLCBOcyk7XG5cbmxldCBXcyA9IGNsYXNzIExpc3RlbmVyQmluZGluZ1JlbmRlcmVyIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlLCBpKSB7XG4gICAgICAgIHRoaXMuZXAgPSB0O1xuICAgICAgICB0aGlzLnRlID0gZTtcbiAgICAgICAgdGhpcy5wID0gaTtcbiAgICB9XG4gICAgcmVuZGVyKHQsIGUsIGkpIHtcbiAgICAgICAgY29uc3QgcyA9IEVzKHRoaXMuZXAsIGkuZnJvbSwgNCk7XG4gICAgICAgIGNvbnN0IG4gPSBuZXcgTGlzdGVuZXIodGhpcy5wLCBpLnRvLCBpLnN0cmF0ZWd5LCBzLCBlLCBpLnByZXZlbnREZWZhdWx0LCB0aGlzLnRlLCB0LmNvbnRhaW5lcik7XG4gICAgICAgIHQuYWRkQmluZGluZygzODk2MiA9PT0gcy4ka2luZCA/IGpzKG4sIHMsIHQuY29udGFpbmVyKSA6IG4pO1xuICAgIH1cbn07XG5cbldzLmluamVjdCA9IFsgXywgd3MsIEt0IF07XG5cbldzID0gb3QoWyBScyhcImhiXCIpIF0sIFdzKTtcblxubGV0IEhzID0gY2xhc3MgU2V0QXR0cmlidXRlUmVuZGVyZXIge1xuICAgIHJlbmRlcih0LCBlLCBpKSB7XG4gICAgICAgIGUuc2V0QXR0cmlidXRlKGkudG8sIGkudmFsdWUpO1xuICAgIH1cbn07XG5cbkhzID0gb3QoWyBScyhcImhlXCIpIF0sIEhzKTtcblxubGV0IHpzID0gY2xhc3MgU2V0Q2xhc3NBdHRyaWJ1dGVSZW5kZXJlciB7XG4gICAgcmVuZGVyKHQsIGUsIGkpIHtcbiAgICAgICAgUXMoZS5jbGFzc0xpc3QsIGkudmFsdWUpO1xuICAgIH1cbn07XG5cbnpzID0gb3QoWyBScyhcImhmXCIpIF0sIHpzKTtcblxubGV0IEdzID0gY2xhc3MgU2V0U3R5bGVBdHRyaWJ1dGVSZW5kZXJlciB7XG4gICAgcmVuZGVyKHQsIGUsIGkpIHtcbiAgICAgICAgZS5zdHlsZS5jc3NUZXh0ICs9IGkudmFsdWU7XG4gICAgfVxufTtcblxuR3MgPSBvdChbIFJzKFwiaGdcIikgXSwgR3MpO1xuXG5sZXQgWHMgPSBjbGFzcyBTdHlsZVByb3BlcnR5QmluZGluZ1JlbmRlcmVyIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlLCBpKSB7XG4gICAgICAgIHRoaXMuZXAgPSB0O1xuICAgICAgICB0aGlzLm9MID0gZTtcbiAgICAgICAgdGhpcy5wID0gaTtcbiAgICB9XG4gICAgcmVuZGVyKHQsIGUsIGkpIHtcbiAgICAgICAgY29uc3QgcyA9IEVzKHRoaXMuZXAsIGkuZnJvbSwgOCk7XG4gICAgICAgIGNvbnN0IG4gPSBuZXcgUHJvcGVydHlCaW5kaW5nKHMsIGUuc3R5bGUsIGkudG8sIEQudG9WaWV3LCB0aGlzLm9MLCB0LmNvbnRhaW5lciwgdGhpcy5wLmRvbVdyaXRlUXVldWUpO1xuICAgICAgICB0LmFkZEJpbmRpbmcoMzg5NjIgPT09IHMuJGtpbmQgPyBqcyhuLCBzLCB0LmNvbnRhaW5lcikgOiBuKTtcbiAgICB9XG59O1xuXG5Ycy5pbmplY3QgPSBbIF8sIFYsIEt0IF07XG5cblhzID0gb3QoWyBScyhcImhkXCIpIF0sIFhzKTtcblxubGV0IEtzID0gY2xhc3MgQXR0cmlidXRlQmluZGluZ1JlbmRlcmVyIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlKSB7XG4gICAgICAgIHRoaXMuZXAgPSB0O1xuICAgICAgICB0aGlzLm9MID0gZTtcbiAgICB9XG4gICAgcmVuZGVyKHQsIGUsIGkpIHtcbiAgICAgICAgY29uc3QgcyA9IEVzKHRoaXMuZXAsIGkuZnJvbSwgOCk7XG4gICAgICAgIGNvbnN0IG4gPSBuZXcgQXR0cmlidXRlQmluZGluZyhzLCBlLCBpLmF0dHIsIGkudG8sIEQudG9WaWV3LCB0aGlzLm9MLCB0LmNvbnRhaW5lcik7XG4gICAgICAgIHQuYWRkQmluZGluZygzODk2MiA9PT0gcy4ka2luZCA/IGpzKG4sIHMsIHQuY29udGFpbmVyKSA6IG4pO1xuICAgIH1cbn07XG5cbktzLmluamVjdCA9IFsgXywgViBdO1xuXG5LcyA9IG90KFsgUnMoXCJoY1wiKSBdLCBLcyk7XG5cbmxldCBZcyA9IGNsYXNzIFNwcmVhZFJlbmRlcmVyIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlKSB7XG4gICAgICAgIHRoaXMuZWUgPSB0O1xuICAgICAgICB0aGlzLnIgPSBlO1xuICAgIH1cbiAgICBzdGF0aWMgZ2V0IGluamVjdCgpIHtcbiAgICAgICAgcmV0dXJuIFsgQXMsIFBpIF07XG4gICAgfVxuICAgIHJlbmRlcih0LCBlLCBpKSB7XG4gICAgICAgIGNvbnN0IHMgPSB0LmNvbnRhaW5lcjtcbiAgICAgICAgY29uc3QgbiA9IHMuZ2V0KEtpKTtcbiAgICAgICAgY29uc3QgciA9IHRoaXMuci5yZW5kZXJlcnM7XG4gICAgICAgIGNvbnN0IG8gPSB0ID0+IHtcbiAgICAgICAgICAgIGxldCBlID0gdDtcbiAgICAgICAgICAgIGxldCBpID0gbjtcbiAgICAgICAgICAgIHdoaWxlIChudWxsICE9IGkgJiYgZSA+IDApIHtcbiAgICAgICAgICAgICAgICBpID0gaS5wYXJlbnQ7XG4gICAgICAgICAgICAgICAgLS1lO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKG51bGwgPT0gaSkgdGhyb3cgbmV3IEVycm9yKFwiTm8gc2NvcGUgY29udGV4dCBmb3Igc3ByZWFkIGJpbmRpbmcuXCIpO1xuICAgICAgICAgICAgcmV0dXJuIGk7XG4gICAgICAgIH07XG4gICAgICAgIGNvbnN0IGwgPSBpID0+IHtcbiAgICAgICAgICAgIHZhciBzLCBuO1xuICAgICAgICAgICAgY29uc3QgYSA9IG8oaSk7XG4gICAgICAgICAgICBjb25zdCBjID0gWnMoYSk7XG4gICAgICAgICAgICBjb25zdCB1ID0gdGhpcy5lZS5jb21waWxlU3ByZWFkKGEuY29udHJvbGxlci5kZWZpbml0aW9uLCBudWxsICE9PSAobiA9IG51bGwgPT09IChzID0gYS5pbnN0cnVjdGlvbikgfHwgdm9pZCAwID09PSBzID8gdm9pZCAwIDogcy5jYXB0dXJlcykgJiYgdm9pZCAwICE9PSBuID8gbiA6IGgsIGEuY29udHJvbGxlci5jb250YWluZXIsIGUpO1xuICAgICAgICAgICAgbGV0IGY7XG4gICAgICAgICAgICBmb3IgKGYgb2YgdSkgc3dpdGNoIChmLnR5cGUpIHtcbiAgICAgICAgICAgICAgY2FzZSBcImhzXCI6XG4gICAgICAgICAgICAgICAgbChpICsgMSk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgICAgY2FzZSBcImhwXCI6XG4gICAgICAgICAgICAgICAgcltmLmluc3RydWN0aW9ucy50eXBlXS5yZW5kZXIoYywgc2kuZm9yKGUpLCBmLmluc3RydWN0aW9ucyk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICByW2YudHlwZV0ucmVuZGVyKGMsIGUsIGYpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdC5hZGRCaW5kaW5nKGMpO1xuICAgICAgICB9O1xuICAgICAgICBsKDApO1xuICAgIH1cbn07XG5cbllzID0gb3QoWyBScyhcImhzXCIpIF0sIFlzKTtcblxuY2xhc3MgU3ByZWFkQmluZGluZyB7XG4gICAgY29uc3RydWN0b3IodCwgZSkge1xuICAgICAgICB0aGlzLmllID0gdDtcbiAgICAgICAgdGhpcy5zZSA9IGU7XG4gICAgICAgIHRoaXMuaW50ZXJjZXB0b3IgPSB0aGlzO1xuICAgICAgICB0aGlzLmlzQm91bmQgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5jdHJsID0gZS5jb250cm9sbGVyO1xuICAgICAgICB0aGlzLmxvY2F0b3IgPSB0aGlzLmN0cmwuY29udGFpbmVyO1xuICAgIH1cbiAgICBnZXQgY29udGFpbmVyKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5sb2NhdG9yO1xuICAgIH1cbiAgICBnZXQgZGVmaW5pdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY3RybC5kZWZpbml0aW9uO1xuICAgIH1cbiAgICBnZXQgaXNTdHJpY3RCaW5kaW5nKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5jdHJsLmlzU3RyaWN0QmluZGluZztcbiAgICB9XG4gICAgJGJpbmQodCwgZSkge1xuICAgICAgICB2YXIgaTtcbiAgICAgICAgaWYgKHRoaXMuaXNCb3VuZCkgcmV0dXJuO1xuICAgICAgICB0aGlzLmlzQm91bmQgPSB0cnVlO1xuICAgICAgICBjb25zdCBzID0gdGhpcy4kc2NvcGUgPSBudWxsICE9PSAoaSA9IHRoaXMuc2UuY29udHJvbGxlci5zY29wZS5wYXJlbnRTY29wZSkgJiYgdm9pZCAwICE9PSBpID8gaSA6IHZvaWQgMDtcbiAgICAgICAgaWYgKG51bGwgPT0gcykgdGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCBzcHJlYWRpbmcuIENvbnRleHQgc2NvcGUgaXMgbnVsbC91bmRlZmluZWRcIik7XG4gICAgICAgIHRoaXMuaWUuZm9yRWFjaCgoZSA9PiBlLiRiaW5kKHQsIHMpKSk7XG4gICAgfVxuICAgICR1bmJpbmQodCkge1xuICAgICAgICB0aGlzLmllLmZvckVhY2goKGUgPT4gZS4kdW5iaW5kKHQpKSk7XG4gICAgICAgIHRoaXMuaXNCb3VuZCA9IGZhbHNlO1xuICAgIH1cbiAgICBhZGRCaW5kaW5nKHQpIHtcbiAgICAgICAgdGhpcy5pZS5wdXNoKHQpO1xuICAgIH1cbiAgICBhZGRDaGlsZCh0KSB7XG4gICAgICAgIGlmICgxICE9PSB0LnZtS2luZCkgdGhyb3cgbmV3IEVycm9yKFwiU3ByZWFkIGJpbmRpbmcgZG9lcyBub3Qgc3VwcG9ydCBzcHJlYWRpbmcgY3VzdG9tIGF0dHJpYnV0ZXMvdGVtcGxhdGUgY29udHJvbGxlcnNcIik7XG4gICAgICAgIHRoaXMuY3RybC5hZGRDaGlsZCh0KTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIFFzKHQsIGUpIHtcbiAgICBjb25zdCBpID0gZS5sZW5ndGg7XG4gICAgbGV0IHMgPSAwO1xuICAgIGZvciAobGV0IG4gPSAwOyBuIDwgaTsgKytuKSBpZiAoMzIgPT09IGUuY2hhckNvZGVBdChuKSkge1xuICAgICAgICBpZiAobiAhPT0gcykgdC5hZGQoZS5zbGljZShzLCBuKSk7XG4gICAgICAgIHMgPSBuICsgMTtcbiAgICB9IGVsc2UgaWYgKG4gKyAxID09PSBpKSB0LmFkZChlLnNsaWNlKHMpKTtcbn1cblxuY29uc3QgWnMgPSB0ID0+IG5ldyBTcHJlYWRCaW5kaW5nKFtdLCB0KTtcblxuY29uc3QgSnMgPSBcIklDb250cm9sbGVyXCI7XG5cbmNvbnN0IHRuID0gXCJJSW5zdHJ1Y3Rpb25cIjtcblxuY29uc3QgZW4gPSBcIklSZW5kZXJMb2NhdGlvblwiO1xuXG5jb25zdCBzbiA9IFwiSUF1U2xvdHNJbmZvXCI7XG5cbmZ1bmN0aW9uIG5uKHQsIGUsIGksIHMsIG4sIHIpIHtcbiAgICBjb25zdCBvID0gZS5jb250YWluZXIuY3JlYXRlQ2hpbGQoKTtcbiAgICBvLnJlZ2lzdGVyUmVzb2x2ZXIodC5IVE1MRWxlbWVudCwgby5yZWdpc3RlclJlc29sdmVyKHQuRWxlbWVudCwgby5yZWdpc3RlclJlc29sdmVyKG5zLCBuZXcgeChcIkVsZW1lbnRSZXNvbHZlclwiLCBpKSkpKTtcbiAgICBvLnJlZ2lzdGVyUmVzb2x2ZXIoWGksIG5ldyB4KEpzLCBlKSk7XG4gICAgby5yZWdpc3RlclJlc29sdmVyKGtzLCBuZXcgeCh0biwgcykpO1xuICAgIG8ucmVnaXN0ZXJSZXNvbHZlcihvcywgbnVsbCA9PSBuID8gb24gOiBuZXcgeChlbiwgbikpO1xuICAgIG8ucmVnaXN0ZXJSZXNvbHZlcihBaSwgbG4pO1xuICAgIG8ucmVnaXN0ZXJSZXNvbHZlcih4cywgbnVsbCA9PSByID8gaG4gOiBuZXcgeChzbiwgcikpO1xuICAgIHJldHVybiBvO1xufVxuXG5jbGFzcyBWaWV3RmFjdG9yeVByb3ZpZGVyIHtcbiAgICBjb25zdHJ1Y3Rvcih0KSB7XG4gICAgICAgIHRoaXMuZiA9IHQ7XG4gICAgfVxuICAgIGdldCAkaXNSZXNvbHZlcigpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIHJlc29sdmUoKSB7XG4gICAgICAgIGNvbnN0IHQgPSB0aGlzLmY7XG4gICAgICAgIGlmIChudWxsID09PSB0KSB0aHJvdyBuZXcgRXJyb3IoXCJBVVI3MDU1XCIpO1xuICAgICAgICBpZiAoIUF0KHQubmFtZSkgfHwgMCA9PT0gdC5uYW1lLmxlbmd0aCkgdGhyb3cgbmV3IEVycm9yKFwiQVVSMDc1NlwiKTtcbiAgICAgICAgcmV0dXJuIHQ7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBybih0LCBlLCBpLCBzLCBuLCByLCBvLCBsKSB7XG4gICAgY29uc3QgaCA9IGkuY29udGFpbmVyLmNyZWF0ZUNoaWxkKCk7XG4gICAgaC5yZWdpc3RlclJlc29sdmVyKHQuSFRNTEVsZW1lbnQsIGgucmVnaXN0ZXJSZXNvbHZlcih0LkVsZW1lbnQsIGgucmVnaXN0ZXJSZXNvbHZlcihucywgbmV3IHgoXCJFbGVtZW50UmVzb2x2ZXJcIiwgcykpKSk7XG4gICAgaSA9IGkgaW5zdGFuY2VvZiBDb250cm9sbGVyID8gaSA6IGkuY3RybDtcbiAgICBoLnJlZ2lzdGVyUmVzb2x2ZXIoWGksIG5ldyB4KEpzLCBpKSk7XG4gICAgaC5yZWdpc3RlclJlc29sdmVyKGtzLCBuZXcgeCh0biwgbikpO1xuICAgIGgucmVnaXN0ZXJSZXNvbHZlcihvcywgbnVsbCA9PSBvID8gb24gOiBuZXcgeChlbiwgbykpO1xuICAgIGgucmVnaXN0ZXJSZXNvbHZlcihBaSwgbnVsbCA9PSByID8gbG4gOiBuZXcgVmlld0ZhY3RvcnlQcm92aWRlcihyKSk7XG4gICAgaC5yZWdpc3RlclJlc29sdmVyKHhzLCBudWxsID09IGwgPyBobiA6IG5ldyB4KHNuLCBsKSk7XG4gICAgcmV0dXJuIGguaW52b2tlKGUuVHlwZSk7XG59XG5cbmNvbnN0IG9uID0gbmV3IHgoZW4pO1xuXG5jb25zdCBsbiA9IG5ldyBWaWV3RmFjdG9yeVByb3ZpZGVyKG51bGwpO1xuXG5jb25zdCBobiA9IG5ldyB4KHNuLCBuZXcgQXVTbG90c0luZm8oaCkpO1xuXG52YXIgYW47XG5cbihmdW5jdGlvbih0KSB7XG4gICAgdFt0W1wiTm9uZVwiXSA9IDBdID0gXCJOb25lXCI7XG4gICAgdFt0W1wiSWdub3JlQXR0clwiXSA9IDFdID0gXCJJZ25vcmVBdHRyXCI7XG59KShhbiB8fCAoYW4gPSB7fSkpO1xuXG5mdW5jdGlvbiBjbih0KSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgcmV0dXJuIG1uLmRlZmluZSh0LCBlKTtcbiAgICB9O1xufVxuXG5jbGFzcyBCaW5kaW5nQ29tbWFuZERlZmluaXRpb24ge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUsIGksIHMsIG4pIHtcbiAgICAgICAgdGhpcy5UeXBlID0gdDtcbiAgICAgICAgdGhpcy5uYW1lID0gZTtcbiAgICAgICAgdGhpcy5hbGlhc2VzID0gaTtcbiAgICAgICAgdGhpcy5rZXkgPSBzO1xuICAgICAgICB0aGlzLnR5cGUgPSBuO1xuICAgIH1cbiAgICBzdGF0aWMgY3JlYXRlKHQsIGUpIHtcbiAgICAgICAgbGV0IGk7XG4gICAgICAgIGxldCBzO1xuICAgICAgICBpZiAoQXQodCkpIHtcbiAgICAgICAgICAgIGkgPSB0O1xuICAgICAgICAgICAgcyA9IHtcbiAgICAgICAgICAgICAgICBuYW1lOiBpXG4gICAgICAgICAgICB9O1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgaSA9IHQubmFtZTtcbiAgICAgICAgICAgIHMgPSB0O1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBuZXcgQmluZGluZ0NvbW1hbmREZWZpbml0aW9uKGUsIG4oZG4oZSwgXCJuYW1lXCIpLCBpKSwgZihkbihlLCBcImFsaWFzZXNcIiksIHMuYWxpYXNlcywgZS5hbGlhc2VzKSwgZm4oaSksIG4oZG4oZSwgXCJ0eXBlXCIpLCBzLnR5cGUsIGUudHlwZSwgbnVsbCkpO1xuICAgIH1cbiAgICByZWdpc3Rlcih0KSB7XG4gICAgICAgIGNvbnN0IHtUeXBlOiBlLCBrZXk6IGksIGFsaWFzZXM6IHN9ID0gdGhpcztcbiAgICAgICAgYy5zaW5nbGV0b24oaSwgZSkucmVnaXN0ZXIodCk7XG4gICAgICAgIGMuYWxpYXNUbyhpLCBlKS5yZWdpc3Rlcih0KTtcbiAgICAgICAgTChzLCBtbiwgaSwgdCk7XG4gICAgfVxufVxuXG5jb25zdCB1biA9IG10KFwiYmluZGluZy1jb21tYW5kXCIpO1xuXG5jb25zdCBmbiA9IHQgPT4gYCR7dW59OiR7dH1gO1xuXG5jb25zdCBkbiA9ICh0LCBlKSA9PiBodChkdChlKSwgdCk7XG5cbmNvbnN0IG1uID0gT2JqZWN0LmZyZWV6ZSh7XG4gICAgbmFtZTogdW4sXG4gICAga2V5RnJvbTogZm4sXG4gICAgZGVmaW5lKHQsIGUpIHtcbiAgICAgICAgY29uc3QgaSA9IEJpbmRpbmdDb21tYW5kRGVmaW5pdGlvbi5jcmVhdGUodCwgZSk7XG4gICAgICAgIGN0KHVuLCBpLCBpLlR5cGUpO1xuICAgICAgICBjdCh1biwgaSwgaSk7XG4gICAgICAgIHZ0KGUsIHVuKTtcbiAgICAgICAgcmV0dXJuIGkuVHlwZTtcbiAgICB9LFxuICAgIGdldEFubm90YXRpb246IGRuXG59KTtcblxubGV0IHZuID0gY2xhc3MgT25lVGltZUJpbmRpbmdDb21tYW5kIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlKSB7XG4gICAgICAgIHRoaXMudHlwZSA9IDA7XG4gICAgICAgIHRoaXMubSA9IHQ7XG4gICAgICAgIHRoaXMuZXAgPSBlO1xuICAgIH1cbiAgICBnZXQgbmFtZSgpIHtcbiAgICAgICAgcmV0dXJuIFwib25lLXRpbWVcIjtcbiAgICB9XG4gICAgYnVpbGQodCkge1xuICAgICAgICB2YXIgZTtcbiAgICAgICAgY29uc3QgaSA9IHQuYXR0cjtcbiAgICAgICAgbGV0IHMgPSBpLnRhcmdldDtcbiAgICAgICAgbGV0IG4gPSB0LmF0dHIucmF3VmFsdWU7XG4gICAgICAgIGlmIChudWxsID09IHQuYmluZGFibGUpIHMgPSBudWxsICE9PSAoZSA9IHRoaXMubS5tYXAodC5ub2RlLCBzKSkgJiYgdm9pZCAwICE9PSBlID8gZSA6IFMocyk7IGVsc2Uge1xuICAgICAgICAgICAgaWYgKFwiXCIgPT09IG4gJiYgMSA9PT0gdC5kZWYudHlwZSkgbiA9IFMocyk7XG4gICAgICAgICAgICBzID0gdC5iaW5kYWJsZS5wcm9wZXJ0eTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbmV3IFByb3BlcnR5QmluZGluZ0luc3RydWN0aW9uKHRoaXMuZXAucGFyc2UobiwgOCksIHMsIEQub25lVGltZSk7XG4gICAgfVxufTtcblxudm4uaW5qZWN0ID0gWyBadCwgXyBdO1xuXG52biA9IG90KFsgY24oXCJvbmUtdGltZVwiKSBdLCB2bik7XG5cbmxldCBwbiA9IGNsYXNzIFRvVmlld0JpbmRpbmdDb21tYW5kIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlKSB7XG4gICAgICAgIHRoaXMudHlwZSA9IDA7XG4gICAgICAgIHRoaXMubSA9IHQ7XG4gICAgICAgIHRoaXMuZXAgPSBlO1xuICAgIH1cbiAgICBnZXQgbmFtZSgpIHtcbiAgICAgICAgcmV0dXJuIFwidG8tdmlld1wiO1xuICAgIH1cbiAgICBidWlsZCh0KSB7XG4gICAgICAgIHZhciBlO1xuICAgICAgICBjb25zdCBpID0gdC5hdHRyO1xuICAgICAgICBsZXQgcyA9IGkudGFyZ2V0O1xuICAgICAgICBsZXQgbiA9IHQuYXR0ci5yYXdWYWx1ZTtcbiAgICAgICAgaWYgKG51bGwgPT0gdC5iaW5kYWJsZSkgcyA9IG51bGwgIT09IChlID0gdGhpcy5tLm1hcCh0Lm5vZGUsIHMpKSAmJiB2b2lkIDAgIT09IGUgPyBlIDogUyhzKTsgZWxzZSB7XG4gICAgICAgICAgICBpZiAoXCJcIiA9PT0gbiAmJiAxID09PSB0LmRlZi50eXBlKSBuID0gUyhzKTtcbiAgICAgICAgICAgIHMgPSB0LmJpbmRhYmxlLnByb3BlcnR5O1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBuZXcgUHJvcGVydHlCaW5kaW5nSW5zdHJ1Y3Rpb24odGhpcy5lcC5wYXJzZShuLCA4KSwgcywgRC50b1ZpZXcpO1xuICAgIH1cbn07XG5cbnBuLmluamVjdCA9IFsgWnQsIF8gXTtcblxucG4gPSBvdChbIGNuKFwidG8tdmlld1wiKSBdLCBwbik7XG5cbmxldCBnbiA9IGNsYXNzIEZyb21WaWV3QmluZGluZ0NvbW1hbmQge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUpIHtcbiAgICAgICAgdGhpcy50eXBlID0gMDtcbiAgICAgICAgdGhpcy5tID0gdDtcbiAgICAgICAgdGhpcy5lcCA9IGU7XG4gICAgfVxuICAgIGdldCBuYW1lKCkge1xuICAgICAgICByZXR1cm4gXCJmcm9tLXZpZXdcIjtcbiAgICB9XG4gICAgYnVpbGQodCkge1xuICAgICAgICB2YXIgZTtcbiAgICAgICAgY29uc3QgaSA9IHQuYXR0cjtcbiAgICAgICAgbGV0IHMgPSBpLnRhcmdldDtcbiAgICAgICAgbGV0IG4gPSBpLnJhd1ZhbHVlO1xuICAgICAgICBpZiAobnVsbCA9PSB0LmJpbmRhYmxlKSBzID0gbnVsbCAhPT0gKGUgPSB0aGlzLm0ubWFwKHQubm9kZSwgcykpICYmIHZvaWQgMCAhPT0gZSA/IGUgOiBTKHMpOyBlbHNlIHtcbiAgICAgICAgICAgIGlmIChcIlwiID09PSBuICYmIDEgPT09IHQuZGVmLnR5cGUpIG4gPSBTKHMpO1xuICAgICAgICAgICAgcyA9IHQuYmluZGFibGUucHJvcGVydHk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5ldyBQcm9wZXJ0eUJpbmRpbmdJbnN0cnVjdGlvbih0aGlzLmVwLnBhcnNlKG4sIDgpLCBzLCBELmZyb21WaWV3KTtcbiAgICB9XG59O1xuXG5nbi5pbmplY3QgPSBbIFp0LCBfIF07XG5cbmduID0gb3QoWyBjbihcImZyb20tdmlld1wiKSBdLCBnbik7XG5cbmxldCB3biA9IGNsYXNzIFR3b1dheUJpbmRpbmdDb21tYW5kIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlKSB7XG4gICAgICAgIHRoaXMudHlwZSA9IDA7XG4gICAgICAgIHRoaXMubSA9IHQ7XG4gICAgICAgIHRoaXMuZXAgPSBlO1xuICAgIH1cbiAgICBnZXQgbmFtZSgpIHtcbiAgICAgICAgcmV0dXJuIFwidHdvLXdheVwiO1xuICAgIH1cbiAgICBidWlsZCh0KSB7XG4gICAgICAgIHZhciBlO1xuICAgICAgICBjb25zdCBpID0gdC5hdHRyO1xuICAgICAgICBsZXQgcyA9IGkudGFyZ2V0O1xuICAgICAgICBsZXQgbiA9IGkucmF3VmFsdWU7XG4gICAgICAgIGlmIChudWxsID09IHQuYmluZGFibGUpIHMgPSBudWxsICE9PSAoZSA9IHRoaXMubS5tYXAodC5ub2RlLCBzKSkgJiYgdm9pZCAwICE9PSBlID8gZSA6IFMocyk7IGVsc2Uge1xuICAgICAgICAgICAgaWYgKFwiXCIgPT09IG4gJiYgMSA9PT0gdC5kZWYudHlwZSkgbiA9IFMocyk7XG4gICAgICAgICAgICBzID0gdC5iaW5kYWJsZS5wcm9wZXJ0eTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbmV3IFByb3BlcnR5QmluZGluZ0luc3RydWN0aW9uKHRoaXMuZXAucGFyc2UobiwgOCksIHMsIEQudHdvV2F5KTtcbiAgICB9XG59O1xuXG53bi5pbmplY3QgPSBbIFp0LCBfIF07XG5cbnduID0gb3QoWyBjbihcInR3by13YXlcIikgXSwgd24pO1xuXG5sZXQgYm4gPSBjbGFzcyBEZWZhdWx0QmluZGluZ0NvbW1hbmQge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUpIHtcbiAgICAgICAgdGhpcy50eXBlID0gMDtcbiAgICAgICAgdGhpcy5tID0gdDtcbiAgICAgICAgdGhpcy5lcCA9IGU7XG4gICAgfVxuICAgIGdldCBuYW1lKCkge1xuICAgICAgICByZXR1cm4gXCJiaW5kXCI7XG4gICAgfVxuICAgIGJ1aWxkKHQpIHtcbiAgICAgICAgdmFyIGU7XG4gICAgICAgIGNvbnN0IGkgPSB0LmF0dHI7XG4gICAgICAgIGNvbnN0IHMgPSB0LmJpbmRhYmxlO1xuICAgICAgICBsZXQgbjtcbiAgICAgICAgbGV0IHI7XG4gICAgICAgIGxldCBvID0gaS50YXJnZXQ7XG4gICAgICAgIGxldCBsID0gaS5yYXdWYWx1ZTtcbiAgICAgICAgaWYgKG51bGwgPT0gcykge1xuICAgICAgICAgICAgciA9IHRoaXMubS5pc1R3b1dheSh0Lm5vZGUsIG8pID8gRC50d29XYXkgOiBELnRvVmlldztcbiAgICAgICAgICAgIG8gPSBudWxsICE9PSAoZSA9IHRoaXMubS5tYXAodC5ub2RlLCBvKSkgJiYgdm9pZCAwICE9PSBlID8gZSA6IFMobyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBpZiAoXCJcIiA9PT0gbCAmJiAxID09PSB0LmRlZi50eXBlKSBsID0gUyhvKTtcbiAgICAgICAgICAgIG4gPSB0LmRlZi5kZWZhdWx0QmluZGluZ01vZGU7XG4gICAgICAgICAgICByID0gcy5tb2RlID09PSBELmRlZmF1bHQgfHwgbnVsbCA9PSBzLm1vZGUgPyBudWxsID09IG4gfHwgbiA9PT0gRC5kZWZhdWx0ID8gRC50b1ZpZXcgOiBuIDogcy5tb2RlO1xuICAgICAgICAgICAgbyA9IHMucHJvcGVydHk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5ldyBQcm9wZXJ0eUJpbmRpbmdJbnN0cnVjdGlvbih0aGlzLmVwLnBhcnNlKGwsIDgpLCBvLCByKTtcbiAgICB9XG59O1xuXG5ibi5pbmplY3QgPSBbIFp0LCBfIF07XG5cbmJuID0gb3QoWyBjbihcImJpbmRcIikgXSwgYm4pO1xuXG5sZXQgeG4gPSBjbGFzcyBDYWxsQmluZGluZ0NvbW1hbmQge1xuICAgIGNvbnN0cnVjdG9yKHQpIHtcbiAgICAgICAgdGhpcy50eXBlID0gMDtcbiAgICAgICAgdGhpcy5lcCA9IHQ7XG4gICAgfVxuICAgIGdldCBuYW1lKCkge1xuICAgICAgICByZXR1cm4gXCJjYWxsXCI7XG4gICAgfVxuICAgIGJ1aWxkKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IG51bGwgPT09IHQuYmluZGFibGUgPyBTKHQuYXR0ci50YXJnZXQpIDogdC5iaW5kYWJsZS5wcm9wZXJ0eTtcbiAgICAgICAgcmV0dXJuIG5ldyBDYWxsQmluZGluZ0luc3RydWN0aW9uKHRoaXMuZXAucGFyc2UodC5hdHRyLnJhd1ZhbHVlLCA4IHwgNCksIGUpO1xuICAgIH1cbn07XG5cbnhuLmluamVjdCA9IFsgXyBdO1xuXG54biA9IG90KFsgY24oXCJjYWxsXCIpIF0sIHhuKTtcblxubGV0IHluID0gY2xhc3MgRm9yQmluZGluZ0NvbW1hbmQge1xuICAgIGNvbnN0cnVjdG9yKHQpIHtcbiAgICAgICAgdGhpcy50eXBlID0gMDtcbiAgICAgICAgdGhpcy5lcCA9IHQ7XG4gICAgfVxuICAgIGdldCBuYW1lKCkge1xuICAgICAgICByZXR1cm4gXCJmb3JcIjtcbiAgICB9XG4gICAgYnVpbGQodCkge1xuICAgICAgICBjb25zdCBlID0gbnVsbCA9PT0gdC5iaW5kYWJsZSA/IFModC5hdHRyLnRhcmdldCkgOiB0LmJpbmRhYmxlLnByb3BlcnR5O1xuICAgICAgICByZXR1cm4gbmV3IEl0ZXJhdG9yQmluZGluZ0luc3RydWN0aW9uKHRoaXMuZXAucGFyc2UodC5hdHRyLnJhd1ZhbHVlLCAyKSwgZSk7XG4gICAgfVxufTtcblxueW4uaW5qZWN0ID0gWyBfIF07XG5cbnluID0gb3QoWyBjbihcImZvclwiKSBdLCB5bik7XG5cbmxldCBrbiA9IGNsYXNzIFRyaWdnZXJCaW5kaW5nQ29tbWFuZCB7XG4gICAgY29uc3RydWN0b3IodCkge1xuICAgICAgICB0aGlzLnR5cGUgPSAxO1xuICAgICAgICB0aGlzLmVwID0gdDtcbiAgICB9XG4gICAgZ2V0IG5hbWUoKSB7XG4gICAgICAgIHJldHVybiBcInRyaWdnZXJcIjtcbiAgICB9XG4gICAgYnVpbGQodCkge1xuICAgICAgICByZXR1cm4gbmV3IExpc3RlbmVyQmluZGluZ0luc3RydWN0aW9uKHRoaXMuZXAucGFyc2UodC5hdHRyLnJhd1ZhbHVlLCA0KSwgdC5hdHRyLnRhcmdldCwgdHJ1ZSwgTi5ub25lKTtcbiAgICB9XG59O1xuXG5rbi5pbmplY3QgPSBbIF8gXTtcblxua24gPSBvdChbIGNuKFwidHJpZ2dlclwiKSBdLCBrbik7XG5cbmxldCBDbiA9IGNsYXNzIERlbGVnYXRlQmluZGluZ0NvbW1hbmQge1xuICAgIGNvbnN0cnVjdG9yKHQpIHtcbiAgICAgICAgdGhpcy50eXBlID0gMTtcbiAgICAgICAgdGhpcy5lcCA9IHQ7XG4gICAgfVxuICAgIGdldCBuYW1lKCkge1xuICAgICAgICByZXR1cm4gXCJkZWxlZ2F0ZVwiO1xuICAgIH1cbiAgICBidWlsZCh0KSB7XG4gICAgICAgIHJldHVybiBuZXcgTGlzdGVuZXJCaW5kaW5nSW5zdHJ1Y3Rpb24odGhpcy5lcC5wYXJzZSh0LmF0dHIucmF3VmFsdWUsIDQpLCB0LmF0dHIudGFyZ2V0LCBmYWxzZSwgTi5idWJibGluZyk7XG4gICAgfVxufTtcblxuQ24uaW5qZWN0ID0gWyBfIF07XG5cbkNuID0gb3QoWyBjbihcImRlbGVnYXRlXCIpIF0sIENuKTtcblxubGV0IEFuID0gY2xhc3MgQ2FwdHVyZUJpbmRpbmdDb21tYW5kIHtcbiAgICBjb25zdHJ1Y3Rvcih0KSB7XG4gICAgICAgIHRoaXMudHlwZSA9IDE7XG4gICAgICAgIHRoaXMuZXAgPSB0O1xuICAgIH1cbiAgICBnZXQgbmFtZSgpIHtcbiAgICAgICAgcmV0dXJuIFwiY2FwdHVyZVwiO1xuICAgIH1cbiAgICBidWlsZCh0KSB7XG4gICAgICAgIHJldHVybiBuZXcgTGlzdGVuZXJCaW5kaW5nSW5zdHJ1Y3Rpb24odGhpcy5lcC5wYXJzZSh0LmF0dHIucmF3VmFsdWUsIDQpLCB0LmF0dHIudGFyZ2V0LCBmYWxzZSwgTi5jYXB0dXJpbmcpO1xuICAgIH1cbn07XG5cbkFuLmluamVjdCA9IFsgXyBdO1xuXG5BbiA9IG90KFsgY24oXCJjYXB0dXJlXCIpIF0sIEFuKTtcblxubGV0IFNuID0gY2xhc3MgQXR0ckJpbmRpbmdDb21tYW5kIHtcbiAgICBjb25zdHJ1Y3Rvcih0KSB7XG4gICAgICAgIHRoaXMudHlwZSA9IDE7XG4gICAgICAgIHRoaXMuZXAgPSB0O1xuICAgIH1cbiAgICBnZXQgbmFtZSgpIHtcbiAgICAgICAgcmV0dXJuIFwiYXR0clwiO1xuICAgIH1cbiAgICBidWlsZCh0KSB7XG4gICAgICAgIHJldHVybiBuZXcgQXR0cmlidXRlQmluZGluZ0luc3RydWN0aW9uKHQuYXR0ci50YXJnZXQsIHRoaXMuZXAucGFyc2UodC5hdHRyLnJhd1ZhbHVlLCA4KSwgdC5hdHRyLnRhcmdldCk7XG4gICAgfVxufTtcblxuU24uaW5qZWN0ID0gWyBfIF07XG5cblNuID0gb3QoWyBjbihcImF0dHJcIikgXSwgU24pO1xuXG5sZXQgUm4gPSBjbGFzcyBTdHlsZUJpbmRpbmdDb21tYW5kIHtcbiAgICBjb25zdHJ1Y3Rvcih0KSB7XG4gICAgICAgIHRoaXMudHlwZSA9IDE7XG4gICAgICAgIHRoaXMuZXAgPSB0O1xuICAgIH1cbiAgICBnZXQgbmFtZSgpIHtcbiAgICAgICAgcmV0dXJuIFwic3R5bGVcIjtcbiAgICB9XG4gICAgYnVpbGQodCkge1xuICAgICAgICByZXR1cm4gbmV3IEF0dHJpYnV0ZUJpbmRpbmdJbnN0cnVjdGlvbihcInN0eWxlXCIsIHRoaXMuZXAucGFyc2UodC5hdHRyLnJhd1ZhbHVlLCA4KSwgdC5hdHRyLnRhcmdldCk7XG4gICAgfVxufTtcblxuUm4uaW5qZWN0ID0gWyBfIF07XG5cblJuID0gb3QoWyBjbihcInN0eWxlXCIpIF0sIFJuKTtcblxubGV0IEVuID0gY2xhc3MgQ2xhc3NCaW5kaW5nQ29tbWFuZCB7XG4gICAgY29uc3RydWN0b3IodCkge1xuICAgICAgICB0aGlzLnR5cGUgPSAxO1xuICAgICAgICB0aGlzLmVwID0gdDtcbiAgICB9XG4gICAgZ2V0IG5hbWUoKSB7XG4gICAgICAgIHJldHVybiBcImNsYXNzXCI7XG4gICAgfVxuICAgIGJ1aWxkKHQpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBBdHRyaWJ1dGVCaW5kaW5nSW5zdHJ1Y3Rpb24oXCJjbGFzc1wiLCB0aGlzLmVwLnBhcnNlKHQuYXR0ci5yYXdWYWx1ZSwgOCksIHQuYXR0ci50YXJnZXQpO1xuICAgIH1cbn07XG5cbkVuLmluamVjdCA9IFsgXyBdO1xuXG5FbiA9IG90KFsgY24oXCJjbGFzc1wiKSBdLCBFbik7XG5cbmxldCBCbiA9IGNsYXNzIFJlZkJpbmRpbmdDb21tYW5kIHtcbiAgICBjb25zdHJ1Y3Rvcih0KSB7XG4gICAgICAgIHRoaXMudHlwZSA9IDE7XG4gICAgICAgIHRoaXMuZXAgPSB0O1xuICAgIH1cbiAgICBnZXQgbmFtZSgpIHtcbiAgICAgICAgcmV0dXJuIFwicmVmXCI7XG4gICAgfVxuICAgIGJ1aWxkKHQpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBSZWZCaW5kaW5nSW5zdHJ1Y3Rpb24odGhpcy5lcC5wYXJzZSh0LmF0dHIucmF3VmFsdWUsIDgpLCB0LmF0dHIudGFyZ2V0KTtcbiAgICB9XG59O1xuXG5Cbi5pbmplY3QgPSBbIF8gXTtcblxuQm4gPSBvdChbIGNuKFwicmVmXCIpIF0sIEJuKTtcblxubGV0IEluID0gY2xhc3MgU3ByZWFkQmluZGluZ0NvbW1hbmQge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICB0aGlzLnR5cGUgPSAxO1xuICAgIH1cbiAgICBnZXQgbmFtZSgpIHtcbiAgICAgICAgcmV0dXJuIFwiLi4uJGF0dHJzXCI7XG4gICAgfVxuICAgIGJ1aWxkKHQpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBTcHJlYWRCaW5kaW5nSW5zdHJ1Y3Rpb247XG4gICAgfVxufTtcblxuSW4gPSBvdChbIGNuKFwiLi4uJGF0dHJzXCIpIF0sIEluKTtcblxuY29uc3QgVG4gPSBsLmNyZWF0ZUludGVyZmFjZShcIklUZW1wbGF0ZUVsZW1lbnRGYWN0b3J5XCIsICh0ID0+IHQuc2luZ2xldG9uKFRlbXBsYXRlRWxlbWVudEZhY3RvcnkpKSk7XG5cbmNvbnN0IERuID0ge307XG5cbmNsYXNzIFRlbXBsYXRlRWxlbWVudEZhY3Rvcnkge1xuICAgIGNvbnN0cnVjdG9yKHQpIHtcbiAgICAgICAgdGhpcy5wID0gdDtcbiAgICAgICAgdGhpcy5uZSA9IHQuZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInRlbXBsYXRlXCIpO1xuICAgIH1cbiAgICBjcmVhdGVUZW1wbGF0ZSh0KSB7XG4gICAgICAgIHZhciBlO1xuICAgICAgICBpZiAoQXQodCkpIHtcbiAgICAgICAgICAgIGxldCBlID0gRG5bdF07XG4gICAgICAgICAgICBpZiAodm9pZCAwID09PSBlKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgaSA9IHRoaXMubmU7XG4gICAgICAgICAgICAgICAgaS5pbm5lckhUTUwgPSB0O1xuICAgICAgICAgICAgICAgIGNvbnN0IHMgPSBpLmNvbnRlbnQuZmlyc3RFbGVtZW50Q2hpbGQ7XG4gICAgICAgICAgICAgICAgaWYgKG51bGwgPT0gcyB8fCBcIlRFTVBMQVRFXCIgIT09IHMubm9kZU5hbWUgfHwgbnVsbCAhPSBzLm5leHRFbGVtZW50U2libGluZykge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLm5lID0gdGhpcy5wLmRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJ0ZW1wbGF0ZVwiKTtcbiAgICAgICAgICAgICAgICAgICAgZSA9IGk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgaS5jb250ZW50LnJlbW92ZUNoaWxkKHMpO1xuICAgICAgICAgICAgICAgICAgICBlID0gcztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgRG5bdF0gPSBlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGUuY2xvbmVOb2RlKHRydWUpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChcIlRFTVBMQVRFXCIgIT09IHQubm9kZU5hbWUpIHtcbiAgICAgICAgICAgIGNvbnN0IGUgPSB0aGlzLnAuZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInRlbXBsYXRlXCIpO1xuICAgICAgICAgICAgZS5jb250ZW50LmFwcGVuZENoaWxkKHQpO1xuICAgICAgICAgICAgcmV0dXJuIGU7XG4gICAgICAgIH1cbiAgICAgICAgbnVsbCA9PT0gKGUgPSB0LnBhcmVudE5vZGUpIHx8IHZvaWQgMCA9PT0gZSA/IHZvaWQgMCA6IGUucmVtb3ZlQ2hpbGQodCk7XG4gICAgICAgIHJldHVybiB0LmNsb25lTm9kZSh0cnVlKTtcbiAgICB9XG59XG5cblRlbXBsYXRlRWxlbWVudEZhY3RvcnkuaW5qZWN0ID0gWyBLdCBdO1xuXG5jb25zdCBQbiA9IGZ1bmN0aW9uKHQpIHtcbiAgICBmdW5jdGlvbiBlKHQsIGksIHMpIHtcbiAgICAgICAgbC5pbmplY3QoZSkodCwgaSwgcyk7XG4gICAgfVxuICAgIGUuJGlzUmVzb2x2ZXIgPSB0cnVlO1xuICAgIGUucmVzb2x2ZSA9IGZ1bmN0aW9uKGUsIGkpIHtcbiAgICAgICAgaWYgKGkucm9vdCA9PT0gaSkgcmV0dXJuIGkuZ2V0QWxsKHQsIGZhbHNlKTtcbiAgICAgICAgcmV0dXJuIGkuaGFzKHQsIGZhbHNlKSA/IGkuZ2V0QWxsKHQsIGZhbHNlKS5jb25jYXQoaS5yb290LmdldEFsbCh0LCBmYWxzZSkpIDogaS5yb290LmdldEFsbCh0LCBmYWxzZSk7XG4gICAgfTtcbiAgICByZXR1cm4gZTtcbn07XG5cbmNsYXNzIFRlbXBsYXRlQ29tcGlsZXIge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICB0aGlzLmRlYnVnID0gZmFsc2U7XG4gICAgICAgIHRoaXMucmVzb2x2ZVJlc291cmNlcyA9IHRydWU7XG4gICAgfVxuICAgIHN0YXRpYyByZWdpc3Rlcih0KSB7XG4gICAgICAgIHJldHVybiBjLnNpbmdsZXRvbihBcywgdGhpcykucmVnaXN0ZXIodCk7XG4gICAgfVxuICAgIGNvbXBpbGUodCwgZSwgaSkge1xuICAgICAgICB2YXIgcywgbiwgciwgbztcbiAgICAgICAgY29uc3QgbCA9IEN1c3RvbUVsZW1lbnREZWZpbml0aW9uLmdldE9yQ3JlYXRlKHQpO1xuICAgICAgICBpZiAobnVsbCA9PT0gbC50ZW1wbGF0ZSB8fCB2b2lkIDAgPT09IGwudGVtcGxhdGUpIHJldHVybiBsO1xuICAgICAgICBpZiAoZmFsc2UgPT09IGwubmVlZHNDb21waWxlKSByZXR1cm4gbDtcbiAgICAgICAgbnVsbCAhPT0gaSAmJiB2b2lkIDAgIT09IGkgPyBpIDogaSA9IExuO1xuICAgICAgICBjb25zdCBhID0gbmV3IENvbXBpbGF0aW9uQ29udGV4dCh0LCBlLCBpLCBudWxsLCBudWxsLCB2b2lkIDApO1xuICAgICAgICBjb25zdCBjID0gQXQobC50ZW1wbGF0ZSkgfHwgIXQuZW5oYW5jZSA/IGEucmUuY3JlYXRlVGVtcGxhdGUobC50ZW1wbGF0ZSkgOiBsLnRlbXBsYXRlO1xuICAgICAgICBjb25zdCB1ID0gXCJURU1QTEFURVwiID09PSBjLm5vZGVOYW1lICYmIG51bGwgIT0gYy5jb250ZW50O1xuICAgICAgICBjb25zdCBmID0gdSA/IGMuY29udGVudCA6IGM7XG4gICAgICAgIGNvbnN0IGQgPSBlLmdldChQbih6bikpO1xuICAgICAgICBjb25zdCBtID0gZC5sZW5ndGg7XG4gICAgICAgIGxldCB2ID0gMDtcbiAgICAgICAgaWYgKG0gPiAwKSB3aGlsZSAobSA+IHYpIHtcbiAgICAgICAgICAgIG51bGwgPT09IChuID0gKHMgPSBkW3ZdKS5jb21waWxpbmcpIHx8IHZvaWQgMCA9PT0gbiA/IHZvaWQgMCA6IG4uY2FsbChzLCBjKTtcbiAgICAgICAgICAgICsrdjtcbiAgICAgICAgfVxuICAgICAgICBpZiAoYy5oYXNBdHRyaWJ1dGUoTm4pKSB0aHJvdyBuZXcgRXJyb3IoXCJBVVIwNzAxXCIpO1xuICAgICAgICB0aGlzLm9lKGYsIGEpO1xuICAgICAgICB0aGlzLmxlKGYsIGEpO1xuICAgICAgICByZXR1cm4gQ3VzdG9tRWxlbWVudERlZmluaXRpb24uY3JlYXRlKHtcbiAgICAgICAgICAgIC4uLnQsXG4gICAgICAgICAgICBuYW1lOiB0Lm5hbWUgfHwgUW4oKSxcbiAgICAgICAgICAgIGRlcGVuZGVuY2llczogKG51bGwgIT09IChyID0gdC5kZXBlbmRlbmNpZXMpICYmIHZvaWQgMCAhPT0gciA/IHIgOiBoKS5jb25jYXQobnVsbCAhPT0gKG8gPSBhLmRlcHMpICYmIHZvaWQgMCAhPT0gbyA/IG8gOiBoKSxcbiAgICAgICAgICAgIGluc3RydWN0aW9uczogYS5yb3dzLFxuICAgICAgICAgICAgc3Vycm9nYXRlczogdSA/IHRoaXMuaGUoYywgYSkgOiBoLFxuICAgICAgICAgICAgdGVtcGxhdGU6IGMsXG4gICAgICAgICAgICBoYXNTbG90czogYS5oYXNTbG90LFxuICAgICAgICAgICAgbmVlZHNDb21waWxlOiBmYWxzZVxuICAgICAgICB9KTtcbiAgICB9XG4gICAgY29tcGlsZVNwcmVhZCh0LCBlLCBpLCBzKSB7XG4gICAgICAgIHZhciBuO1xuICAgICAgICBjb25zdCByID0gbmV3IENvbXBpbGF0aW9uQ29udGV4dCh0LCBpLCBMbiwgbnVsbCwgbnVsbCwgdm9pZCAwKTtcbiAgICAgICAgY29uc3QgbyA9IFtdO1xuICAgICAgICBjb25zdCBsID0gci5hZShzLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkpO1xuICAgICAgICBjb25zdCBoID0gci5lcDtcbiAgICAgICAgY29uc3QgYSA9IGUubGVuZ3RoO1xuICAgICAgICBsZXQgYyA9IDA7XG4gICAgICAgIGxldCB1O1xuICAgICAgICBsZXQgZiA9IG51bGw7XG4gICAgICAgIGxldCBkO1xuICAgICAgICBsZXQgbTtcbiAgICAgICAgbGV0IHY7XG4gICAgICAgIGxldCBwO1xuICAgICAgICBsZXQgZztcbiAgICAgICAgbGV0IHcgPSBudWxsO1xuICAgICAgICBsZXQgYjtcbiAgICAgICAgbGV0IHg7XG4gICAgICAgIGxldCB5O1xuICAgICAgICBsZXQgaztcbiAgICAgICAgZm9yICg7YSA+IGM7ICsrYykge1xuICAgICAgICAgICAgdSA9IGVbY107XG4gICAgICAgICAgICB5ID0gdS50YXJnZXQ7XG4gICAgICAgICAgICBrID0gdS5yYXdWYWx1ZTtcbiAgICAgICAgICAgIHcgPSByLmNlKHUpO1xuICAgICAgICAgICAgaWYgKG51bGwgIT09IHcgJiYgKDEgJiB3LnR5cGUpID4gMCkge1xuICAgICAgICAgICAgICAgIE1uLm5vZGUgPSBzO1xuICAgICAgICAgICAgICAgIE1uLmF0dHIgPSB1O1xuICAgICAgICAgICAgICAgIE1uLmJpbmRhYmxlID0gbnVsbDtcbiAgICAgICAgICAgICAgICBNbi5kZWYgPSBudWxsO1xuICAgICAgICAgICAgICAgIG8ucHVzaCh3LmJ1aWxkKE1uKSk7XG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBmID0gci51ZSh5KTtcbiAgICAgICAgICAgIGlmIChudWxsICE9PSBmKSB7XG4gICAgICAgICAgICAgICAgaWYgKGYuaXNUZW1wbGF0ZUNvbnRyb2xsZXIpIHRocm93IG5ldyBFcnJvcihgQVVSMDcwMzoke3l9YCk7XG4gICAgICAgICAgICAgICAgdiA9IEJpbmRhYmxlc0luZm8uZnJvbShmLCB0cnVlKTtcbiAgICAgICAgICAgICAgICB4ID0gZmFsc2UgPT09IGYubm9NdWx0aUJpbmRpbmdzICYmIG51bGwgPT09IHcgJiYgT24oayk7XG4gICAgICAgICAgICAgICAgaWYgKHgpIG0gPSB0aGlzLmZlKHMsIGssIGYsIHIpOyBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgZyA9IHYucHJpbWFyeTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG51bGwgPT09IHcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGIgPSBoLnBhcnNlKGssIDEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgbSA9IFsgbnVsbCA9PT0gYiA/IG5ldyBTZXRQcm9wZXJ0eUluc3RydWN0aW9uKGssIGcucHJvcGVydHkpIDogbmV3IEludGVycG9sYXRpb25JbnN0cnVjdGlvbihiLCBnLnByb3BlcnR5KSBdO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgTW4ubm9kZSA9IHM7XG4gICAgICAgICAgICAgICAgICAgICAgICBNbi5hdHRyID0gdTtcbiAgICAgICAgICAgICAgICAgICAgICAgIE1uLmJpbmRhYmxlID0gZztcbiAgICAgICAgICAgICAgICAgICAgICAgIE1uLmRlZiA9IGY7XG4gICAgICAgICAgICAgICAgICAgICAgICBtID0gWyB3LmJ1aWxkKE1uKSBdO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIChudWxsICE9PSBkICYmIHZvaWQgMCAhPT0gZCA/IGQgOiBkID0gW10pLnB1c2gobmV3IEh5ZHJhdGVBdHRyaWJ1dGVJbnN0cnVjdGlvbih0aGlzLnJlc29sdmVSZXNvdXJjZXMgPyBmIDogZi5uYW1lLCBudWxsICE9IGYuYWxpYXNlcyAmJiBmLmFsaWFzZXMuaW5jbHVkZXMoeSkgPyB5IDogdm9pZCAwLCBtKSk7XG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAobnVsbCA9PT0gdykge1xuICAgICAgICAgICAgICAgIGIgPSBoLnBhcnNlKGssIDEpO1xuICAgICAgICAgICAgICAgIGlmIChudWxsICE9PSBsKSB7XG4gICAgICAgICAgICAgICAgICAgIHYgPSBCaW5kYWJsZXNJbmZvLmZyb20obCwgZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICBwID0gdi5hdHRyc1t5XTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHZvaWQgMCAhPT0gcCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgYiA9IGgucGFyc2UoaywgMSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBvLnB1c2gobmV3IFNwcmVhZEVsZW1lbnRQcm9wQmluZGluZ0luc3RydWN0aW9uKG51bGwgPT0gYiA/IG5ldyBTZXRQcm9wZXJ0eUluc3RydWN0aW9uKGssIHAucHJvcGVydHkpIDogbmV3IEludGVycG9sYXRpb25JbnN0cnVjdGlvbihiLCBwLnByb3BlcnR5KSkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKG51bGwgIT0gYikgby5wdXNoKG5ldyBJbnRlcnBvbGF0aW9uSW5zdHJ1Y3Rpb24oYiwgbnVsbCAhPT0gKG4gPSByLm0ubWFwKHMsIHkpKSAmJiB2b2lkIDAgIT09IG4gPyBuIDogUyh5KSkpOyBlbHNlIHN3aXRjaCAoeSkge1xuICAgICAgICAgICAgICAgICAgY2FzZSBcImNsYXNzXCI6XG4gICAgICAgICAgICAgICAgICAgIG8ucHVzaChuZXcgU2V0Q2xhc3NBdHRyaWJ1dGVJbnN0cnVjdGlvbihrKSk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICAgICAgICBjYXNlIFwic3R5bGVcIjpcbiAgICAgICAgICAgICAgICAgICAgby5wdXNoKG5ldyBTZXRTdHlsZUF0dHJpYnV0ZUluc3RydWN0aW9uKGspKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgIG8ucHVzaChuZXcgU2V0QXR0cmlidXRlSW5zdHJ1Y3Rpb24oaywgeSkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgaWYgKG51bGwgIT09IGwpIHtcbiAgICAgICAgICAgICAgICAgICAgdiA9IEJpbmRhYmxlc0luZm8uZnJvbShsLCBmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgIHAgPSB2LmF0dHJzW3ldO1xuICAgICAgICAgICAgICAgICAgICBpZiAodm9pZCAwICE9PSBwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBNbi5ub2RlID0gcztcbiAgICAgICAgICAgICAgICAgICAgICAgIE1uLmF0dHIgPSB1O1xuICAgICAgICAgICAgICAgICAgICAgICAgTW4uYmluZGFibGUgPSBwO1xuICAgICAgICAgICAgICAgICAgICAgICAgTW4uZGVmID0gbDtcbiAgICAgICAgICAgICAgICAgICAgICAgIG8ucHVzaChuZXcgU3ByZWFkRWxlbWVudFByb3BCaW5kaW5nSW5zdHJ1Y3Rpb24ody5idWlsZChNbikpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIE1uLm5vZGUgPSBzO1xuICAgICAgICAgICAgICAgIE1uLmF0dHIgPSB1O1xuICAgICAgICAgICAgICAgIE1uLmJpbmRhYmxlID0gbnVsbDtcbiAgICAgICAgICAgICAgICBNbi5kZWYgPSBudWxsO1xuICAgICAgICAgICAgICAgIG8ucHVzaCh3LmJ1aWxkKE1uKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgJG4oKTtcbiAgICAgICAgaWYgKG51bGwgIT0gZCkgcmV0dXJuIGQuY29uY2F0KG8pO1xuICAgICAgICByZXR1cm4gbztcbiAgICB9XG4gICAgaGUodCwgZSkge1xuICAgICAgICB2YXIgaTtcbiAgICAgICAgY29uc3QgcyA9IFtdO1xuICAgICAgICBjb25zdCBuID0gdC5hdHRyaWJ1dGVzO1xuICAgICAgICBjb25zdCByID0gZS5lcDtcbiAgICAgICAgbGV0IG8gPSBuLmxlbmd0aDtcbiAgICAgICAgbGV0IGwgPSAwO1xuICAgICAgICBsZXQgaDtcbiAgICAgICAgbGV0IGE7XG4gICAgICAgIGxldCBjO1xuICAgICAgICBsZXQgdTtcbiAgICAgICAgbGV0IGYgPSBudWxsO1xuICAgICAgICBsZXQgZDtcbiAgICAgICAgbGV0IG07XG4gICAgICAgIGxldCB2O1xuICAgICAgICBsZXQgcDtcbiAgICAgICAgbGV0IGcgPSBudWxsO1xuICAgICAgICBsZXQgdztcbiAgICAgICAgbGV0IGI7XG4gICAgICAgIGxldCB4O1xuICAgICAgICBsZXQgeTtcbiAgICAgICAgZm9yICg7byA+IGw7ICsrbCkge1xuICAgICAgICAgICAgaCA9IG5bbF07XG4gICAgICAgICAgICBhID0gaC5uYW1lO1xuICAgICAgICAgICAgYyA9IGgudmFsdWU7XG4gICAgICAgICAgICB1ID0gZS5kZS5wYXJzZShhLCBjKTtcbiAgICAgICAgICAgIHggPSB1LnRhcmdldDtcbiAgICAgICAgICAgIHkgPSB1LnJhd1ZhbHVlO1xuICAgICAgICAgICAgaWYgKFVuW3hdKSB0aHJvdyBuZXcgRXJyb3IoYEFVUjA3MDI6JHthfWApO1xuICAgICAgICAgICAgZyA9IGUuY2UodSk7XG4gICAgICAgICAgICBpZiAobnVsbCAhPT0gZyAmJiAoMSAmIGcudHlwZSkgPiAwKSB7XG4gICAgICAgICAgICAgICAgTW4ubm9kZSA9IHQ7XG4gICAgICAgICAgICAgICAgTW4uYXR0ciA9IHU7XG4gICAgICAgICAgICAgICAgTW4uYmluZGFibGUgPSBudWxsO1xuICAgICAgICAgICAgICAgIE1uLmRlZiA9IG51bGw7XG4gICAgICAgICAgICAgICAgcy5wdXNoKGcuYnVpbGQoTW4pKTtcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGYgPSBlLnVlKHgpO1xuICAgICAgICAgICAgaWYgKG51bGwgIT09IGYpIHtcbiAgICAgICAgICAgICAgICBpZiAoZi5pc1RlbXBsYXRlQ29udHJvbGxlcikgdGhyb3cgbmV3IEVycm9yKGBBVVIwNzAzOiR7eH1gKTtcbiAgICAgICAgICAgICAgICB2ID0gQmluZGFibGVzSW5mby5mcm9tKGYsIHRydWUpO1xuICAgICAgICAgICAgICAgIGIgPSBmYWxzZSA9PT0gZi5ub011bHRpQmluZGluZ3MgJiYgbnVsbCA9PT0gZyAmJiBPbih5KTtcbiAgICAgICAgICAgICAgICBpZiAoYikgbSA9IHRoaXMuZmUodCwgeSwgZiwgZSk7IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBwID0gdi5wcmltYXJ5O1xuICAgICAgICAgICAgICAgICAgICBpZiAobnVsbCA9PT0gZykge1xuICAgICAgICAgICAgICAgICAgICAgICAgdyA9IHIucGFyc2UoeSwgMSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBtID0gWyBudWxsID09PSB3ID8gbmV3IFNldFByb3BlcnR5SW5zdHJ1Y3Rpb24oeSwgcC5wcm9wZXJ0eSkgOiBuZXcgSW50ZXJwb2xhdGlvbkluc3RydWN0aW9uKHcsIHAucHJvcGVydHkpIF07XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBNbi5ub2RlID0gdDtcbiAgICAgICAgICAgICAgICAgICAgICAgIE1uLmF0dHIgPSB1O1xuICAgICAgICAgICAgICAgICAgICAgICAgTW4uYmluZGFibGUgPSBwO1xuICAgICAgICAgICAgICAgICAgICAgICAgTW4uZGVmID0gZjtcbiAgICAgICAgICAgICAgICAgICAgICAgIG0gPSBbIGcuYnVpbGQoTW4pIF07XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdC5yZW1vdmVBdHRyaWJ1dGUoYSk7XG4gICAgICAgICAgICAgICAgLS1sO1xuICAgICAgICAgICAgICAgIC0tbztcbiAgICAgICAgICAgICAgICAobnVsbCAhPT0gZCAmJiB2b2lkIDAgIT09IGQgPyBkIDogZCA9IFtdKS5wdXNoKG5ldyBIeWRyYXRlQXR0cmlidXRlSW5zdHJ1Y3Rpb24odGhpcy5yZXNvbHZlUmVzb3VyY2VzID8gZiA6IGYubmFtZSwgbnVsbCAhPSBmLmFsaWFzZXMgJiYgZi5hbGlhc2VzLmluY2x1ZGVzKHgpID8geCA6IHZvaWQgMCwgbSkpO1xuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKG51bGwgPT09IGcpIHtcbiAgICAgICAgICAgICAgICB3ID0gci5wYXJzZSh5LCAxKTtcbiAgICAgICAgICAgICAgICBpZiAobnVsbCAhPSB3KSB7XG4gICAgICAgICAgICAgICAgICAgIHQucmVtb3ZlQXR0cmlidXRlKGEpO1xuICAgICAgICAgICAgICAgICAgICAtLWw7XG4gICAgICAgICAgICAgICAgICAgIC0tbztcbiAgICAgICAgICAgICAgICAgICAgcy5wdXNoKG5ldyBJbnRlcnBvbGF0aW9uSW5zdHJ1Y3Rpb24odywgbnVsbCAhPT0gKGkgPSBlLm0ubWFwKHQsIHgpKSAmJiB2b2lkIDAgIT09IGkgPyBpIDogUyh4KSkpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSBzd2l0Y2ggKGEpIHtcbiAgICAgICAgICAgICAgICAgIGNhc2UgXCJjbGFzc1wiOlxuICAgICAgICAgICAgICAgICAgICBzLnB1c2gobmV3IFNldENsYXNzQXR0cmlidXRlSW5zdHJ1Y3Rpb24oeSkpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgICAgICAgY2FzZSBcInN0eWxlXCI6XG4gICAgICAgICAgICAgICAgICAgIHMucHVzaChuZXcgU2V0U3R5bGVBdHRyaWJ1dGVJbnN0cnVjdGlvbih5KSk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICBzLnB1c2gobmV3IFNldEF0dHJpYnV0ZUluc3RydWN0aW9uKHksIGEpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIE1uLm5vZGUgPSB0O1xuICAgICAgICAgICAgICAgIE1uLmF0dHIgPSB1O1xuICAgICAgICAgICAgICAgIE1uLmJpbmRhYmxlID0gbnVsbDtcbiAgICAgICAgICAgICAgICBNbi5kZWYgPSBudWxsO1xuICAgICAgICAgICAgICAgIHMucHVzaChnLmJ1aWxkKE1uKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgJG4oKTtcbiAgICAgICAgaWYgKG51bGwgIT0gZCkgcmV0dXJuIGQuY29uY2F0KHMpO1xuICAgICAgICByZXR1cm4gcztcbiAgICB9XG4gICAgbGUodCwgZSkge1xuICAgICAgICBzd2l0Y2ggKHQubm9kZVR5cGUpIHtcbiAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICBzd2l0Y2ggKHQubm9kZU5hbWUpIHtcbiAgICAgICAgICAgICAgY2FzZSBcIkxFVFwiOlxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLm1lKHQsIGUpO1xuXG4gICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMudmUodCwgZSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICBjYXNlIDM6XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5wZSh0LCBlKTtcblxuICAgICAgICAgIGNhc2UgMTE6XG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgbGV0IGkgPSB0LmZpcnN0Q2hpbGQ7XG4gICAgICAgICAgICAgICAgd2hpbGUgKG51bGwgIT09IGkpIGkgPSB0aGlzLmxlKGksIGUpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0Lm5leHRTaWJsaW5nO1xuICAgIH1cbiAgICBtZSh0LCBlKSB7XG4gICAgICAgIGNvbnN0IGkgPSB0LmF0dHJpYnV0ZXM7XG4gICAgICAgIGNvbnN0IHMgPSBpLmxlbmd0aDtcbiAgICAgICAgY29uc3QgbiA9IFtdO1xuICAgICAgICBjb25zdCByID0gZS5lcDtcbiAgICAgICAgbGV0IG8gPSBmYWxzZTtcbiAgICAgICAgbGV0IGwgPSAwO1xuICAgICAgICBsZXQgaDtcbiAgICAgICAgbGV0IGE7XG4gICAgICAgIGxldCBjO1xuICAgICAgICBsZXQgdTtcbiAgICAgICAgbGV0IGY7XG4gICAgICAgIGxldCBkO1xuICAgICAgICBsZXQgbTtcbiAgICAgICAgbGV0IHY7XG4gICAgICAgIGZvciAoO3MgPiBsOyArK2wpIHtcbiAgICAgICAgICAgIGggPSBpW2xdO1xuICAgICAgICAgICAgYyA9IGgubmFtZTtcbiAgICAgICAgICAgIHUgPSBoLnZhbHVlO1xuICAgICAgICAgICAgaWYgKFwidG8tYmluZGluZy1jb250ZXh0XCIgPT09IGMpIHtcbiAgICAgICAgICAgICAgICBvID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGEgPSBlLmRlLnBhcnNlKGMsIHUpO1xuICAgICAgICAgICAgZCA9IGEudGFyZ2V0O1xuICAgICAgICAgICAgbSA9IGEucmF3VmFsdWU7XG4gICAgICAgICAgICBmID0gZS5jZShhKTtcbiAgICAgICAgICAgIGlmIChudWxsICE9PSBmKSBzd2l0Y2ggKGYubmFtZSkge1xuICAgICAgICAgICAgICBjYXNlIFwidG8tdmlld1wiOlxuICAgICAgICAgICAgICBjYXNlIFwiYmluZFwiOlxuICAgICAgICAgICAgICAgIG4ucHVzaChuZXcgTGV0QmluZGluZ0luc3RydWN0aW9uKHIucGFyc2UobSwgOCksIFMoZCkpKTtcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcblxuICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgQVVSMDcwNDoke2EuY29tbWFuZH1gKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHYgPSByLnBhcnNlKG0sIDEpO1xuICAgICAgICAgICAgbi5wdXNoKG5ldyBMZXRCaW5kaW5nSW5zdHJ1Y3Rpb24obnVsbCA9PT0gdiA/IG5ldyB6KG0pIDogdiwgUyhkKSkpO1xuICAgICAgICB9XG4gICAgICAgIGUucm93cy5wdXNoKFsgbmV3IEh5ZHJhdGVMZXRFbGVtZW50SW5zdHJ1Y3Rpb24obiwgbykgXSk7XG4gICAgICAgIHJldHVybiB0aGlzLmdlKHQpLm5leHRTaWJsaW5nO1xuICAgIH1cbiAgICB2ZSh0LCBlKSB7XG4gICAgICAgIHZhciBpLCBzLCBuLCByLCBsLCBhO1xuICAgICAgICB2YXIgYywgdTtcbiAgICAgICAgY29uc3QgZiA9IHQubmV4dFNpYmxpbmc7XG4gICAgICAgIGNvbnN0IGQgPSAobnVsbCAhPT0gKGkgPSB0LmdldEF0dHJpYnV0ZShcImFzLWVsZW1lbnRcIikpICYmIHZvaWQgMCAhPT0gaSA/IGkgOiB0Lm5vZGVOYW1lKS50b0xvd2VyQ2FzZSgpO1xuICAgICAgICBjb25zdCBtID0gZS5hZShkKTtcbiAgICAgICAgY29uc3QgdiA9ICEhKG51bGwgPT09IG0gfHwgdm9pZCAwID09PSBtID8gdm9pZCAwIDogbS5jYXB0dXJlKTtcbiAgICAgICAgY29uc3QgcCA9IHYgPyBbXSA6IGg7XG4gICAgICAgIGNvbnN0IGcgPSBlLmVwO1xuICAgICAgICBjb25zdCB3ID0gdGhpcy5kZWJ1ZyA/IG8gOiAoKSA9PiB7XG4gICAgICAgICAgICB0LnJlbW92ZUF0dHJpYnV0ZShBKTtcbiAgICAgICAgICAgIC0taztcbiAgICAgICAgICAgIC0teTtcbiAgICAgICAgfTtcbiAgICAgICAgbGV0IGIgPSB0LmF0dHJpYnV0ZXM7XG4gICAgICAgIGxldCB4O1xuICAgICAgICBsZXQgeSA9IGIubGVuZ3RoO1xuICAgICAgICBsZXQgayA9IDA7XG4gICAgICAgIGxldCBDO1xuICAgICAgICBsZXQgQTtcbiAgICAgICAgbGV0IFI7XG4gICAgICAgIGxldCBFO1xuICAgICAgICBsZXQgQjtcbiAgICAgICAgbGV0IEk7XG4gICAgICAgIGxldCBUID0gbnVsbDtcbiAgICAgICAgbGV0IEQgPSBmYWxzZTtcbiAgICAgICAgbGV0IFA7XG4gICAgICAgIGxldCBPO1xuICAgICAgICBsZXQgJDtcbiAgICAgICAgbGV0IEw7XG4gICAgICAgIGxldCBxO1xuICAgICAgICBsZXQgTTtcbiAgICAgICAgbGV0IFU7XG4gICAgICAgIGxldCBGID0gbnVsbDtcbiAgICAgICAgbGV0IFY7XG4gICAgICAgIGxldCBfO1xuICAgICAgICBsZXQgajtcbiAgICAgICAgbGV0IE47XG4gICAgICAgIGxldCBXID0gdHJ1ZTtcbiAgICAgICAgbGV0IEggPSBmYWxzZTtcbiAgICAgICAgaWYgKFwic2xvdFwiID09PSBkKSBlLnJvb3QuaGFzU2xvdCA9IHRydWU7XG4gICAgICAgIGlmIChudWxsICE9PSBtKSB7XG4gICAgICAgICAgICBXID0gbnVsbCA9PT0gKHMgPSBtLnByb2Nlc3NDb250ZW50KSB8fCB2b2lkIDAgPT09IHMgPyB2b2lkIDAgOiBzLmNhbGwobS5UeXBlLCB0LCBlLnApO1xuICAgICAgICAgICAgYiA9IHQuYXR0cmlidXRlcztcbiAgICAgICAgICAgIHkgPSBiLmxlbmd0aDtcbiAgICAgICAgfVxuICAgICAgICBpZiAoZS5yb290LmRlZi5lbmhhbmNlICYmIHQuY2xhc3NMaXN0LmNvbnRhaW5zKFwiYXVcIikpIHRocm93IG5ldyBFcnJvcihgQVVSMDcwNWApO1xuICAgICAgICBmb3IgKDt5ID4gazsgKytrKSB7XG4gICAgICAgICAgICBDID0gYltrXTtcbiAgICAgICAgICAgIEEgPSBDLm5hbWU7XG4gICAgICAgICAgICBSID0gQy52YWx1ZTtcbiAgICAgICAgICAgIHN3aXRjaCAoQSkge1xuICAgICAgICAgICAgICBjYXNlIFwiYXMtZWxlbWVudFwiOlxuICAgICAgICAgICAgICBjYXNlIFwiY29udGFpbmVybGVzc1wiOlxuICAgICAgICAgICAgICAgIHcoKTtcbiAgICAgICAgICAgICAgICBpZiAoIUgpIEggPSBcImNvbnRhaW5lcmxlc3NcIiA9PT0gQTtcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIEUgPSBlLmRlLnBhcnNlKEEsIFIpO1xuICAgICAgICAgICAgRiA9IGUuY2UoRSk7XG4gICAgICAgICAgICBqID0gRS50YXJnZXQ7XG4gICAgICAgICAgICBOID0gRS5yYXdWYWx1ZTtcbiAgICAgICAgICAgIGlmICh2KSB7XG4gICAgICAgICAgICAgICAgaWYgKG51bGwgIT0gRiAmJiAxICYgRi50eXBlKSB7XG4gICAgICAgICAgICAgICAgICAgIHcoKTtcbiAgICAgICAgICAgICAgICAgICAgcC5wdXNoKEUpO1xuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKFwiYXUtc2xvdFwiICE9PSBqKSB7XG4gICAgICAgICAgICAgICAgICAgIFYgPSBCaW5kYWJsZXNJbmZvLmZyb20obSwgZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICBpZiAobnVsbCA9PSBWLmF0dHJzW2pdICYmICEobnVsbCA9PT0gKG4gPSBlLnVlKGopKSB8fCB2b2lkIDAgPT09IG4gPyB2b2lkIDAgOiBuLmlzVGVtcGxhdGVDb250cm9sbGVyKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcC5wdXNoKEUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAobnVsbCAhPT0gRiAmJiAxICYgRi50eXBlKSB7XG4gICAgICAgICAgICAgICAgTW4ubm9kZSA9IHQ7XG4gICAgICAgICAgICAgICAgTW4uYXR0ciA9IEU7XG4gICAgICAgICAgICAgICAgTW4uYmluZGFibGUgPSBudWxsO1xuICAgICAgICAgICAgICAgIE1uLmRlZiA9IG51bGw7XG4gICAgICAgICAgICAgICAgKG51bGwgIT09IEIgJiYgdm9pZCAwICE9PSBCID8gQiA6IEIgPSBbXSkucHVzaChGLmJ1aWxkKE1uKSk7XG4gICAgICAgICAgICAgICAgdygpO1xuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgVCA9IGUudWUoaik7XG4gICAgICAgICAgICBpZiAobnVsbCAhPT0gVCkge1xuICAgICAgICAgICAgICAgIFYgPSBCaW5kYWJsZXNJbmZvLmZyb20oVCwgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgRCA9IGZhbHNlID09PSBULm5vTXVsdGlCaW5kaW5ncyAmJiBudWxsID09PSBGICYmIE9uKFIpO1xuICAgICAgICAgICAgICAgIGlmIChEKSAkID0gdGhpcy5mZSh0LCBSLCBULCBlKTsgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIF8gPSBWLnByaW1hcnk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChudWxsID09PSBGKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBNID0gZy5wYXJzZShSLCAxKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICQgPSBbIG51bGwgPT09IE0gPyBuZXcgU2V0UHJvcGVydHlJbnN0cnVjdGlvbihSLCBfLnByb3BlcnR5KSA6IG5ldyBJbnRlcnBvbGF0aW9uSW5zdHJ1Y3Rpb24oTSwgXy5wcm9wZXJ0eSkgXTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIE1uLm5vZGUgPSB0O1xuICAgICAgICAgICAgICAgICAgICAgICAgTW4uYXR0ciA9IEU7XG4gICAgICAgICAgICAgICAgICAgICAgICBNbi5iaW5kYWJsZSA9IF87XG4gICAgICAgICAgICAgICAgICAgICAgICBNbi5kZWYgPSBUO1xuICAgICAgICAgICAgICAgICAgICAgICAgJCA9IFsgRi5idWlsZChNbikgXTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB3KCk7XG4gICAgICAgICAgICAgICAgaWYgKFQuaXNUZW1wbGF0ZUNvbnRyb2xsZXIpIChudWxsICE9PSBMICYmIHZvaWQgMCAhPT0gTCA/IEwgOiBMID0gW10pLnB1c2gobmV3IEh5ZHJhdGVUZW1wbGF0ZUNvbnRyb2xsZXIocW4sIHRoaXMucmVzb2x2ZVJlc291cmNlcyA/IFQgOiBULm5hbWUsIHZvaWQgMCwgJCkpOyBlbHNlIChudWxsICE9PSBPICYmIHZvaWQgMCAhPT0gTyA/IE8gOiBPID0gW10pLnB1c2gobmV3IEh5ZHJhdGVBdHRyaWJ1dGVJbnN0cnVjdGlvbih0aGlzLnJlc29sdmVSZXNvdXJjZXMgPyBUIDogVC5uYW1lLCBudWxsICE9IFQuYWxpYXNlcyAmJiBULmFsaWFzZXMuaW5jbHVkZXMoaikgPyBqIDogdm9pZCAwLCAkKSk7XG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAobnVsbCA9PT0gRikge1xuICAgICAgICAgICAgICAgIGlmIChudWxsICE9PSBtKSB7XG4gICAgICAgICAgICAgICAgICAgIFYgPSBCaW5kYWJsZXNJbmZvLmZyb20obSwgZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICBQID0gVi5hdHRyc1tqXTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHZvaWQgMCAhPT0gUCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgTSA9IGcucGFyc2UoTiwgMSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAobnVsbCAhPT0gSSAmJiB2b2lkIDAgIT09IEkgPyBJIDogSSA9IFtdKS5wdXNoKG51bGwgPT0gTSA/IG5ldyBTZXRQcm9wZXJ0eUluc3RydWN0aW9uKE4sIFAucHJvcGVydHkpIDogbmV3IEludGVycG9sYXRpb25JbnN0cnVjdGlvbihNLCBQLnByb3BlcnR5KSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB3KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBNID0gZy5wYXJzZShOLCAxKTtcbiAgICAgICAgICAgICAgICBpZiAobnVsbCAhPSBNKSB7XG4gICAgICAgICAgICAgICAgICAgIHcoKTtcbiAgICAgICAgICAgICAgICAgICAgKG51bGwgIT09IEIgJiYgdm9pZCAwICE9PSBCID8gQiA6IEIgPSBbXSkucHVzaChuZXcgSW50ZXJwb2xhdGlvbkluc3RydWN0aW9uKE0sIG51bGwgIT09IChyID0gZS5tLm1hcCh0LCBqKSkgJiYgdm9pZCAwICE9PSByID8gciA6IFMoaikpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB3KCk7XG4gICAgICAgICAgICBpZiAobnVsbCAhPT0gbSkge1xuICAgICAgICAgICAgICAgIFYgPSBCaW5kYWJsZXNJbmZvLmZyb20obSwgZmFsc2UpO1xuICAgICAgICAgICAgICAgIFAgPSBWLmF0dHJzW2pdO1xuICAgICAgICAgICAgICAgIGlmICh2b2lkIDAgIT09IFApIHtcbiAgICAgICAgICAgICAgICAgICAgTW4ubm9kZSA9IHQ7XG4gICAgICAgICAgICAgICAgICAgIE1uLmF0dHIgPSBFO1xuICAgICAgICAgICAgICAgICAgICBNbi5iaW5kYWJsZSA9IFA7XG4gICAgICAgICAgICAgICAgICAgIE1uLmRlZiA9IG07XG4gICAgICAgICAgICAgICAgICAgIChudWxsICE9PSBJICYmIHZvaWQgMCAhPT0gSSA/IEkgOiBJID0gW10pLnB1c2goRi5idWlsZChNbikpO1xuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBNbi5ub2RlID0gdDtcbiAgICAgICAgICAgIE1uLmF0dHIgPSBFO1xuICAgICAgICAgICAgTW4uYmluZGFibGUgPSBudWxsO1xuICAgICAgICAgICAgTW4uZGVmID0gbnVsbDtcbiAgICAgICAgICAgIChudWxsICE9PSBCICYmIHZvaWQgMCAhPT0gQiA/IEIgOiBCID0gW10pLnB1c2goRi5idWlsZChNbikpO1xuICAgICAgICB9XG4gICAgICAgICRuKCk7XG4gICAgICAgIGlmICh0aGlzLndlKHQpICYmIG51bGwgIT0gQiAmJiBCLmxlbmd0aCA+IDEpIHRoaXMuYmUodCwgQik7XG4gICAgICAgIGlmIChudWxsICE9PSBtKSB7XG4gICAgICAgICAgICBVID0gbmV3IEh5ZHJhdGVFbGVtZW50SW5zdHJ1Y3Rpb24odGhpcy5yZXNvbHZlUmVzb3VyY2VzID8gbSA6IG0ubmFtZSwgdm9pZCAwLCBudWxsICE9PSBJICYmIHZvaWQgMCAhPT0gSSA/IEkgOiBoLCBudWxsLCBILCBwKTtcbiAgICAgICAgICAgIGlmIChcImF1LXNsb3RcIiA9PT0gZCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGkgPSB0LmdldEF0dHJpYnV0ZShcIm5hbWVcIikgfHwgXCJkZWZhdWx0XCI7XG4gICAgICAgICAgICAgICAgY29uc3QgcyA9IGUuaChcInRlbXBsYXRlXCIpO1xuICAgICAgICAgICAgICAgIGNvbnN0IG4gPSBlLnhlKCk7XG4gICAgICAgICAgICAgICAgbGV0IHIgPSB0LmZpcnN0Q2hpbGQ7XG4gICAgICAgICAgICAgICAgd2hpbGUgKG51bGwgIT09IHIpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKDEgPT09IHIubm9kZVR5cGUgJiYgci5oYXNBdHRyaWJ1dGUoXCJhdS1zbG90XCIpKSB0LnJlbW92ZUNoaWxkKHIpOyBlbHNlIHMuY29udGVudC5hcHBlbmRDaGlsZChyKTtcbiAgICAgICAgICAgICAgICAgICAgciA9IHQuZmlyc3RDaGlsZDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy5sZShzLmNvbnRlbnQsIG4pO1xuICAgICAgICAgICAgICAgIFUuYXVTbG90ID0ge1xuICAgICAgICAgICAgICAgICAgICBuYW1lOiBpLFxuICAgICAgICAgICAgICAgICAgICBmYWxsYmFjazogQ3VzdG9tRWxlbWVudERlZmluaXRpb24uY3JlYXRlKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6IFFuKCksXG4gICAgICAgICAgICAgICAgICAgICAgICB0ZW1wbGF0ZTogcyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGluc3RydWN0aW9uczogbi5yb3dzLFxuICAgICAgICAgICAgICAgICAgICAgICAgbmVlZHNDb21waWxlOiBmYWxzZVxuICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgdCA9IHRoaXMueWUodCwgZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG51bGwgIT0gQiB8fCBudWxsICE9IFUgfHwgbnVsbCAhPSBPKSB7XG4gICAgICAgICAgICB4ID0gaC5jb25jYXQobnVsbCAhPT0gVSAmJiB2b2lkIDAgIT09IFUgPyBVIDogaCwgbnVsbCAhPT0gTyAmJiB2b2lkIDAgIT09IE8gPyBPIDogaCwgbnVsbCAhPT0gQiAmJiB2b2lkIDAgIT09IEIgPyBCIDogaCk7XG4gICAgICAgICAgICB0aGlzLmdlKHQpO1xuICAgICAgICB9XG4gICAgICAgIGxldCB6O1xuICAgICAgICBpZiAobnVsbCAhPSBMKSB7XG4gICAgICAgICAgICB5ID0gTC5sZW5ndGggLSAxO1xuICAgICAgICAgICAgayA9IHk7XG4gICAgICAgICAgICBxID0gTFtrXTtcbiAgICAgICAgICAgIGxldCBpO1xuICAgICAgICAgICAgdGhpcy55ZSh0LCBlKTtcbiAgICAgICAgICAgIGlmIChcIlRFTVBMQVRFXCIgPT09IHQubm9kZU5hbWUpIGkgPSB0OyBlbHNlIHtcbiAgICAgICAgICAgICAgICBpID0gZS5oKFwidGVtcGxhdGVcIik7XG4gICAgICAgICAgICAgICAgaS5jb250ZW50LmFwcGVuZENoaWxkKHQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgcyA9IGk7XG4gICAgICAgICAgICBjb25zdCBuID0gZS54ZShudWxsID09IHggPyBbXSA6IFsgeCBdKTtcbiAgICAgICAgICAgIGxldCByO1xuICAgICAgICAgICAgbGV0IG87XG4gICAgICAgICAgICBsZXQgaDtcbiAgICAgICAgICAgIGxldCBhO1xuICAgICAgICAgICAgbGV0IHU7XG4gICAgICAgICAgICBsZXQgZjtcbiAgICAgICAgICAgIGxldCB2O1xuICAgICAgICAgICAgbGV0IHA7XG4gICAgICAgICAgICBsZXQgZyA9IDAsIHcgPSAwO1xuICAgICAgICAgICAgbGV0IGIgPSB0LmZpcnN0Q2hpbGQ7XG4gICAgICAgICAgICBpZiAoZmFsc2UgIT09IFcpIHdoaWxlIChudWxsICE9PSBiKSBpZiAoMSA9PT0gYi5ub2RlVHlwZSkge1xuICAgICAgICAgICAgICAgIHIgPSBiO1xuICAgICAgICAgICAgICAgIGIgPSBiLm5leHRTaWJsaW5nO1xuICAgICAgICAgICAgICAgIG8gPSByLmdldEF0dHJpYnV0ZShcImF1LXNsb3RcIik7XG4gICAgICAgICAgICAgICAgaWYgKG51bGwgIT09IG8pIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG51bGwgPT09IG0pIHRocm93IG5ldyBFcnJvcihgQVVSMDcwNjoke2R9WyR7b31dYCk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChcIlwiID09PSBvKSBvID0gXCJkZWZhdWx0XCI7XG4gICAgICAgICAgICAgICAgICAgIHIucmVtb3ZlQXR0cmlidXRlKFwiYXUtc2xvdFwiKTtcbiAgICAgICAgICAgICAgICAgICAgdC5yZW1vdmVDaGlsZChyKTtcbiAgICAgICAgICAgICAgICAgICAgKG51bGwgIT09IChsID0gKGMgPSBudWxsICE9PSBhICYmIHZvaWQgMCAhPT0gYSA/IGEgOiBhID0ge30pW29dKSAmJiB2b2lkIDAgIT09IGwgPyBsIDogY1tvXSA9IFtdKS5wdXNoKHIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSBiID0gYi5uZXh0U2libGluZztcbiAgICAgICAgICAgIGlmIChudWxsICE9IGEpIHtcbiAgICAgICAgICAgICAgICBoID0ge307XG4gICAgICAgICAgICAgICAgZm9yIChvIGluIGEpIHtcbiAgICAgICAgICAgICAgICAgICAgaSA9IGUuaChcInRlbXBsYXRlXCIpO1xuICAgICAgICAgICAgICAgICAgICB1ID0gYVtvXTtcbiAgICAgICAgICAgICAgICAgICAgZm9yIChnID0gMCwgdyA9IHUubGVuZ3RoOyB3ID4gZzsgKytnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBmID0gdVtnXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChcIlRFTVBMQVRFXCIgPT09IGYubm9kZU5hbWUpIGlmIChmLmF0dHJpYnV0ZXMubGVuZ3RoID4gMCkgaS5jb250ZW50LmFwcGVuZENoaWxkKGYpOyBlbHNlIGkuY29udGVudC5hcHBlbmRDaGlsZChmLmNvbnRlbnQpOyBlbHNlIGkuY29udGVudC5hcHBlbmRDaGlsZChmKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBwID0gZS54ZSgpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmxlKGkuY29udGVudCwgcCk7XG4gICAgICAgICAgICAgICAgICAgIGhbb10gPSBDdXN0b21FbGVtZW50RGVmaW5pdGlvbi5jcmVhdGUoe1xuICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogUW4oKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBsYXRlOiBpLFxuICAgICAgICAgICAgICAgICAgICAgICAgaW5zdHJ1Y3Rpb25zOiBwLnJvd3MsXG4gICAgICAgICAgICAgICAgICAgICAgICBuZWVkc0NvbXBpbGU6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgaXNTdHJpY3RCaW5kaW5nOiBlLnJvb3QuZGVmLmlzU3RyaWN0QmluZGluZ1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgVS5wcm9qZWN0aW9ucyA9IGg7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAobnVsbCAhPT0gbSAmJiBtLmNvbnRhaW5lcmxlc3MpIHRoaXMueWUodCwgZSk7XG4gICAgICAgICAgICB6ID0gbnVsbCA9PT0gbSB8fCAhbS5jb250YWluZXJsZXNzICYmICFIICYmIGZhbHNlICE9PSBXO1xuICAgICAgICAgICAgaWYgKHopIGlmIChcIlRFTVBMQVRFXCIgPT09IHQubm9kZU5hbWUpIHRoaXMubGUodC5jb250ZW50LCBuKTsgZWxzZSB7XG4gICAgICAgICAgICAgICAgYiA9IHQuZmlyc3RDaGlsZDtcbiAgICAgICAgICAgICAgICB3aGlsZSAobnVsbCAhPT0gYikgYiA9IHRoaXMubGUoYiwgbik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBxLmRlZiA9IEN1c3RvbUVsZW1lbnREZWZpbml0aW9uLmNyZWF0ZSh7XG4gICAgICAgICAgICAgICAgbmFtZTogUW4oKSxcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZTogcyxcbiAgICAgICAgICAgICAgICBpbnN0cnVjdGlvbnM6IG4ucm93cyxcbiAgICAgICAgICAgICAgICBuZWVkc0NvbXBpbGU6IGZhbHNlLFxuICAgICAgICAgICAgICAgIGlzU3RyaWN0QmluZGluZzogZS5yb290LmRlZi5pc1N0cmljdEJpbmRpbmdcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgd2hpbGUgKGstLSA+IDApIHtcbiAgICAgICAgICAgICAgICBxID0gTFtrXTtcbiAgICAgICAgICAgICAgICBpID0gZS5oKFwidGVtcGxhdGVcIik7XG4gICAgICAgICAgICAgICAgdiA9IGUuaChcImF1LW1cIik7XG4gICAgICAgICAgICAgICAgdi5jbGFzc0xpc3QuYWRkKFwiYXVcIik7XG4gICAgICAgICAgICAgICAgaS5jb250ZW50LmFwcGVuZENoaWxkKHYpO1xuICAgICAgICAgICAgICAgIHEuZGVmID0gQ3VzdG9tRWxlbWVudERlZmluaXRpb24uY3JlYXRlKHtcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogUW4oKSxcbiAgICAgICAgICAgICAgICAgICAgdGVtcGxhdGU6IGksXG4gICAgICAgICAgICAgICAgICAgIG5lZWRzQ29tcGlsZTogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgIGluc3RydWN0aW9uczogWyBbIExbayArIDFdIF0gXSxcbiAgICAgICAgICAgICAgICAgICAgaXNTdHJpY3RCaW5kaW5nOiBlLnJvb3QuZGVmLmlzU3RyaWN0QmluZGluZ1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZS5yb3dzLnB1c2goWyBxIF0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgaWYgKG51bGwgIT0geCkgZS5yb3dzLnB1c2goeCk7XG4gICAgICAgICAgICBsZXQgaSA9IHQuZmlyc3RDaGlsZDtcbiAgICAgICAgICAgIGxldCBzO1xuICAgICAgICAgICAgbGV0IG47XG4gICAgICAgICAgICBsZXQgciA9IG51bGw7XG4gICAgICAgICAgICBsZXQgbztcbiAgICAgICAgICAgIGxldCBsO1xuICAgICAgICAgICAgbGV0IGg7XG4gICAgICAgICAgICBsZXQgYztcbiAgICAgICAgICAgIGxldCBmO1xuICAgICAgICAgICAgbGV0IGQgPSAwLCB2ID0gMDtcbiAgICAgICAgICAgIGlmIChmYWxzZSAhPT0gVykgd2hpbGUgKG51bGwgIT09IGkpIGlmICgxID09PSBpLm5vZGVUeXBlKSB7XG4gICAgICAgICAgICAgICAgcyA9IGk7XG4gICAgICAgICAgICAgICAgaSA9IGkubmV4dFNpYmxpbmc7XG4gICAgICAgICAgICAgICAgbiA9IHMuZ2V0QXR0cmlidXRlKFwiYXUtc2xvdFwiKTtcbiAgICAgICAgICAgICAgICBpZiAobnVsbCAhPT0gbikge1xuICAgICAgICAgICAgICAgICAgICBpZiAobnVsbCA9PT0gbSkgdGhyb3cgbmV3IEVycm9yKGBBVVIwNzA2OiR7dC5ub2RlTmFtZX1bJHtufV1gKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKFwiXCIgPT09IG4pIG4gPSBcImRlZmF1bHRcIjtcbiAgICAgICAgICAgICAgICAgICAgdC5yZW1vdmVDaGlsZChzKTtcbiAgICAgICAgICAgICAgICAgICAgcy5yZW1vdmVBdHRyaWJ1dGUoXCJhdS1zbG90XCIpO1xuICAgICAgICAgICAgICAgICAgICAobnVsbCAhPT0gKGEgPSAodSA9IG51bGwgIT09IG8gJiYgdm9pZCAwICE9PSBvID8gbyA6IG8gPSB7fSlbbl0pICYmIHZvaWQgMCAhPT0gYSA/IGEgOiB1W25dID0gW10pLnB1c2gocyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIGkgPSBpLm5leHRTaWJsaW5nO1xuICAgICAgICAgICAgaWYgKG51bGwgIT0gbykge1xuICAgICAgICAgICAgICAgIHIgPSB7fTtcbiAgICAgICAgICAgICAgICBmb3IgKG4gaW4gbykge1xuICAgICAgICAgICAgICAgICAgICBjID0gZS5oKFwidGVtcGxhdGVcIik7XG4gICAgICAgICAgICAgICAgICAgIGwgPSBvW25dO1xuICAgICAgICAgICAgICAgICAgICBmb3IgKGQgPSAwLCB2ID0gbC5sZW5ndGg7IHYgPiBkOyArK2QpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGggPSBsW2RdO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKFwiVEVNUExBVEVcIiA9PT0gaC5ub2RlTmFtZSkgaWYgKGguYXR0cmlidXRlcy5sZW5ndGggPiAwKSBjLmNvbnRlbnQuYXBwZW5kQ2hpbGQoaCk7IGVsc2UgYy5jb250ZW50LmFwcGVuZENoaWxkKGguY29udGVudCk7IGVsc2UgYy5jb250ZW50LmFwcGVuZENoaWxkKGgpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGYgPSBlLnhlKCk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMubGUoYy5jb250ZW50LCBmKTtcbiAgICAgICAgICAgICAgICAgICAgcltuXSA9IEN1c3RvbUVsZW1lbnREZWZpbml0aW9uLmNyZWF0ZSh7XG4gICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiBRbigpLFxuICAgICAgICAgICAgICAgICAgICAgICAgdGVtcGxhdGU6IGMsXG4gICAgICAgICAgICAgICAgICAgICAgICBpbnN0cnVjdGlvbnM6IGYucm93cyxcbiAgICAgICAgICAgICAgICAgICAgICAgIG5lZWRzQ29tcGlsZTogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgICAgICBpc1N0cmljdEJpbmRpbmc6IGUucm9vdC5kZWYuaXNTdHJpY3RCaW5kaW5nXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBVLnByb2plY3Rpb25zID0gcjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChudWxsICE9PSBtICYmIG0uY29udGFpbmVybGVzcykgdGhpcy55ZSh0LCBlKTtcbiAgICAgICAgICAgIHogPSBudWxsID09PSBtIHx8ICFtLmNvbnRhaW5lcmxlc3MgJiYgIUggJiYgZmFsc2UgIT09IFc7XG4gICAgICAgICAgICBpZiAoeiAmJiB0LmNoaWxkTm9kZXMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgIGkgPSB0LmZpcnN0Q2hpbGQ7XG4gICAgICAgICAgICAgICAgd2hpbGUgKG51bGwgIT09IGkpIGkgPSB0aGlzLmxlKGksIGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmO1xuICAgIH1cbiAgICBwZSh0LCBlKSB7XG4gICAgICAgIGxldCBpID0gXCJcIjtcbiAgICAgICAgbGV0IHMgPSB0O1xuICAgICAgICB3aGlsZSAobnVsbCAhPT0gcyAmJiAzID09PSBzLm5vZGVUeXBlKSB7XG4gICAgICAgICAgICBpICs9IHMudGV4dENvbnRlbnQ7XG4gICAgICAgICAgICBzID0gcy5uZXh0U2libGluZztcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBuID0gZS5lcC5wYXJzZShpLCAxKTtcbiAgICAgICAgaWYgKG51bGwgPT09IG4pIHJldHVybiBzO1xuICAgICAgICBjb25zdCByID0gdC5wYXJlbnROb2RlO1xuICAgICAgICByLmluc2VydEJlZm9yZSh0aGlzLmdlKGUuaChcImF1LW1cIikpLCB0KTtcbiAgICAgICAgZS5yb3dzLnB1c2goWyBuZXcgVGV4dEJpbmRpbmdJbnN0cnVjdGlvbihuLCAhIWUuZGVmLmlzU3RyaWN0QmluZGluZykgXSk7XG4gICAgICAgIHQudGV4dENvbnRlbnQgPSBcIlwiO1xuICAgICAgICBzID0gdC5uZXh0U2libGluZztcbiAgICAgICAgd2hpbGUgKG51bGwgIT09IHMgJiYgMyA9PT0gcy5ub2RlVHlwZSkge1xuICAgICAgICAgICAgci5yZW1vdmVDaGlsZChzKTtcbiAgICAgICAgICAgIHMgPSB0Lm5leHRTaWJsaW5nO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0Lm5leHRTaWJsaW5nO1xuICAgIH1cbiAgICBmZSh0LCBlLCBpLCBzKSB7XG4gICAgICAgIGNvbnN0IG4gPSBCaW5kYWJsZXNJbmZvLmZyb20oaSwgdHJ1ZSk7XG4gICAgICAgIGNvbnN0IHIgPSBlLmxlbmd0aDtcbiAgICAgICAgY29uc3QgbyA9IFtdO1xuICAgICAgICBsZXQgbDtcbiAgICAgICAgbGV0IGg7XG4gICAgICAgIGxldCBhID0gMDtcbiAgICAgICAgbGV0IGMgPSAwO1xuICAgICAgICBsZXQgdTtcbiAgICAgICAgbGV0IGY7XG4gICAgICAgIGxldCBkO1xuICAgICAgICBsZXQgbTtcbiAgICAgICAgZm9yIChsZXQgdiA9IDA7IHYgPCByOyArK3YpIHtcbiAgICAgICAgICAgIGMgPSBlLmNoYXJDb2RlQXQodik7XG4gICAgICAgICAgICBpZiAoOTIgPT09IGMpICsrdjsgZWxzZSBpZiAoNTggPT09IGMpIHtcbiAgICAgICAgICAgICAgICBsID0gZS5zbGljZShhLCB2KTtcbiAgICAgICAgICAgICAgICB3aGlsZSAoZS5jaGFyQ29kZUF0KCsrdikgPD0gMzIpIDtcbiAgICAgICAgICAgICAgICBhID0gdjtcbiAgICAgICAgICAgICAgICBmb3IgKDt2IDwgcjsgKyt2KSB7XG4gICAgICAgICAgICAgICAgICAgIGMgPSBlLmNoYXJDb2RlQXQodik7XG4gICAgICAgICAgICAgICAgICAgIGlmICg5MiA9PT0gYykgKyt2OyBlbHNlIGlmICg1OSA9PT0gYykge1xuICAgICAgICAgICAgICAgICAgICAgICAgaCA9IGUuc2xpY2UoYSwgdik7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAodm9pZCAwID09PSBoKSBoID0gZS5zbGljZShhKTtcbiAgICAgICAgICAgICAgICBmID0gcy5kZS5wYXJzZShsLCBoKTtcbiAgICAgICAgICAgICAgICBkID0gcy5jZShmKTtcbiAgICAgICAgICAgICAgICBtID0gbi5hdHRyc1tmLnRhcmdldF07XG4gICAgICAgICAgICAgICAgaWYgKG51bGwgPT0gbSkgdGhyb3cgbmV3IEVycm9yKGBBVVIwNzA3OiR7aS5uYW1lfS4ke2YudGFyZ2V0fWApO1xuICAgICAgICAgICAgICAgIGlmIChudWxsID09PSBkKSB7XG4gICAgICAgICAgICAgICAgICAgIHUgPSBzLmVwLnBhcnNlKGgsIDEpO1xuICAgICAgICAgICAgICAgICAgICBvLnB1c2gobnVsbCA9PT0gdSA/IG5ldyBTZXRQcm9wZXJ0eUluc3RydWN0aW9uKGgsIG0ucHJvcGVydHkpIDogbmV3IEludGVycG9sYXRpb25JbnN0cnVjdGlvbih1LCBtLnByb3BlcnR5KSk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgTW4ubm9kZSA9IHQ7XG4gICAgICAgICAgICAgICAgICAgIE1uLmF0dHIgPSBmO1xuICAgICAgICAgICAgICAgICAgICBNbi5iaW5kYWJsZSA9IG07XG4gICAgICAgICAgICAgICAgICAgIE1uLmRlZiA9IGk7XG4gICAgICAgICAgICAgICAgICAgIG8ucHVzaChkLmJ1aWxkKE1uKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHdoaWxlICh2IDwgciAmJiBlLmNoYXJDb2RlQXQoKyt2KSA8PSAzMikgO1xuICAgICAgICAgICAgICAgIGEgPSB2O1xuICAgICAgICAgICAgICAgIGwgPSB2b2lkIDA7XG4gICAgICAgICAgICAgICAgaCA9IHZvaWQgMDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICAkbigpO1xuICAgICAgICByZXR1cm4gbztcbiAgICB9XG4gICAgb2UodCwgZSkge1xuICAgICAgICBjb25zdCBpID0gdDtcbiAgICAgICAgY29uc3QgcyA9IFIoaS5xdWVyeVNlbGVjdG9yQWxsKFwidGVtcGxhdGVbYXMtY3VzdG9tLWVsZW1lbnRdXCIpKTtcbiAgICAgICAgY29uc3QgbiA9IHMubGVuZ3RoO1xuICAgICAgICBpZiAoMCA9PT0gbikgcmV0dXJuO1xuICAgICAgICBpZiAobiA9PT0gaS5jaGlsZEVsZW1lbnRDb3VudCkgdGhyb3cgbmV3IEVycm9yKFwiQVVSMDcwOFwiKTtcbiAgICAgICAgY29uc3QgciA9IG5ldyBTZXQ7XG4gICAgICAgIGZvciAoY29uc3QgdCBvZiBzKSB7XG4gICAgICAgICAgICBpZiAodC5wYXJlbnROb2RlICE9PSBpKSB0aHJvdyBuZXcgRXJyb3IoXCJBVVIwNzA5XCIpO1xuICAgICAgICAgICAgY29uc3QgcyA9IFduKHQsIHIpO1xuICAgICAgICAgICAgY29uc3QgbiA9IGNsYXNzIExvY2FsVGVtcGxhdGUge307XG4gICAgICAgICAgICBjb25zdCBvID0gdC5jb250ZW50O1xuICAgICAgICAgICAgY29uc3QgbCA9IFIoby5xdWVyeVNlbGVjdG9yQWxsKFwiYmluZGFibGVcIikpO1xuICAgICAgICAgICAgY29uc3QgaCA9IEJ0LmZvcihuKTtcbiAgICAgICAgICAgIGNvbnN0IGEgPSBuZXcgU2V0O1xuICAgICAgICAgICAgY29uc3QgYyA9IG5ldyBTZXQ7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IHQgb2YgbCkge1xuICAgICAgICAgICAgICAgIGlmICh0LnBhcmVudE5vZGUgIT09IG8pIHRocm93IG5ldyBFcnJvcihcIkFVUjA3MTBcIik7XG4gICAgICAgICAgICAgICAgY29uc3QgZSA9IHQuZ2V0QXR0cmlidXRlKFwicHJvcGVydHlcIik7XG4gICAgICAgICAgICAgICAgaWYgKG51bGwgPT09IGUpIHRocm93IG5ldyBFcnJvcihcIkFVUjA3MTFcIik7XG4gICAgICAgICAgICAgICAgY29uc3QgaSA9IHQuZ2V0QXR0cmlidXRlKFwiYXR0cmlidXRlXCIpO1xuICAgICAgICAgICAgICAgIGlmIChudWxsICE9PSBpICYmIGMuaGFzKGkpIHx8IGEuaGFzKGUpKSB0aHJvdyBuZXcgRXJyb3IoYEFVUjA3MTI6JHtlfSske2l9YCk7IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBpZiAobnVsbCAhPT0gaSkgYy5hZGQoaSk7XG4gICAgICAgICAgICAgICAgICAgIGEuYWRkKGUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBoLmFkZCh7XG4gICAgICAgICAgICAgICAgICAgIHByb3BlcnR5OiBlLFxuICAgICAgICAgICAgICAgICAgICBhdHRyaWJ1dGU6IG51bGwgIT09IGkgJiYgdm9pZCAwICE9PSBpID8gaSA6IHZvaWQgMCxcbiAgICAgICAgICAgICAgICAgICAgbW9kZTogSG4odClcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBjb25zdCBzID0gdC5nZXRBdHRyaWJ1dGVOYW1lcygpLmZpbHRlcigodCA9PiAham4uaW5jbHVkZXModCkpKTtcbiAgICAgICAgICAgICAgICBpZiAocy5sZW5ndGggPiAwKSA7XG4gICAgICAgICAgICAgICAgby5yZW1vdmVDaGlsZCh0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGUua2Uoc2kuZGVmaW5lKHtcbiAgICAgICAgICAgICAgICBuYW1lOiBzLFxuICAgICAgICAgICAgICAgIHRlbXBsYXRlOiB0XG4gICAgICAgICAgICB9LCBuKSk7XG4gICAgICAgICAgICBpLnJlbW92ZUNoaWxkKHQpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHdlKHQpIHtcbiAgICAgICAgcmV0dXJuIFwiSU5QVVRcIiA9PT0gdC5ub2RlTmFtZSAmJiAxID09PSBGblt0LnR5cGVdO1xuICAgIH1cbiAgICBiZSh0LCBlKSB7XG4gICAgICAgIHN3aXRjaCAodC5ub2RlTmFtZSkge1xuICAgICAgICAgIGNhc2UgXCJJTlBVVFwiOlxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGNvbnN0IHQgPSBlO1xuICAgICAgICAgICAgICAgIGxldCBpO1xuICAgICAgICAgICAgICAgIGxldCBzO1xuICAgICAgICAgICAgICAgIGxldCBuID0gMDtcbiAgICAgICAgICAgICAgICBsZXQgcjtcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBlID0gMDsgZSA8IHQubGVuZ3RoICYmIG4gPCAzOyBlKyspIHtcbiAgICAgICAgICAgICAgICAgICAgciA9IHRbZV07XG4gICAgICAgICAgICAgICAgICAgIHN3aXRjaCAoci50bykge1xuICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCJtb2RlbFwiOlxuICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCJ2YWx1ZVwiOlxuICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCJtYXRjaGVyXCI6XG4gICAgICAgICAgICAgICAgICAgICAgICBpID0gZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIG4rKztcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICAgICAgICAgICAgY2FzZSBcImNoZWNrZWRcIjpcbiAgICAgICAgICAgICAgICAgICAgICAgIHMgPSBlO1xuICAgICAgICAgICAgICAgICAgICAgICAgbisrO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHZvaWQgMCAhPT0gcyAmJiB2b2lkIDAgIT09IGkgJiYgcyA8IGkpIFt0W2ldLCB0W3NdXSA9IFsgdFtzXSwgdFtpXSBdO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIGdlKHQpIHtcbiAgICAgICAgdC5jbGFzc0xpc3QuYWRkKFwiYXVcIik7XG4gICAgICAgIHJldHVybiB0O1xuICAgIH1cbiAgICB5ZSh0LCBlKSB7XG4gICAgICAgIGNvbnN0IGkgPSB0LnBhcmVudE5vZGU7XG4gICAgICAgIGNvbnN0IHMgPSBlLmgoXCJhdS1tXCIpO1xuICAgICAgICB0aGlzLmdlKGkuaW5zZXJ0QmVmb3JlKHMsIHQpKTtcbiAgICAgICAgaS5yZW1vdmVDaGlsZCh0KTtcbiAgICAgICAgcmV0dXJuIHM7XG4gICAgfVxufVxuXG5jbGFzcyBDb21waWxhdGlvbkNvbnRleHQge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUsIGksIHMsIG4sIHIpIHtcbiAgICAgICAgdGhpcy5oYXNTbG90ID0gZmFsc2U7XG4gICAgICAgIHRoaXMuQ2UgPSB3dCgpO1xuICAgICAgICBjb25zdCBvID0gbnVsbCAhPT0gcztcbiAgICAgICAgdGhpcy5jID0gZTtcbiAgICAgICAgdGhpcy5yb290ID0gbnVsbCA9PT0gbiA/IHRoaXMgOiBuO1xuICAgICAgICB0aGlzLmRlZiA9IHQ7XG4gICAgICAgIHRoaXMuY2kgPSBpO1xuICAgICAgICB0aGlzLnBhcmVudCA9IHM7XG4gICAgICAgIHRoaXMucmUgPSBvID8gcy5yZSA6IGUuZ2V0KFRuKTtcbiAgICAgICAgdGhpcy5kZSA9IG8gPyBzLmRlIDogZS5nZXQoVXQpO1xuICAgICAgICB0aGlzLmVwID0gbyA/IHMuZXAgOiBlLmdldChfKTtcbiAgICAgICAgdGhpcy5tID0gbyA/IHMubSA6IGUuZ2V0KFp0KTtcbiAgICAgICAgdGhpcy5GdCA9IG8gPyBzLkZ0IDogZS5nZXQoayk7XG4gICAgICAgIHRoaXMucCA9IG8gPyBzLnAgOiBlLmdldChLdCk7XG4gICAgICAgIHRoaXMubG9jYWxFbHMgPSBvID8gcy5sb2NhbEVscyA6IG5ldyBTZXQ7XG4gICAgICAgIHRoaXMucm93cyA9IG51bGwgIT09IHIgJiYgdm9pZCAwICE9PSByID8gciA6IFtdO1xuICAgIH1cbiAgICBrZSh0KSB7XG4gICAgICAgIHZhciBlO1xuICAgICAgICB2YXIgaTtcbiAgICAgICAgKG51bGwgIT09IChlID0gKGkgPSB0aGlzLnJvb3QpLmRlcHMpICYmIHZvaWQgMCAhPT0gZSA/IGUgOiBpLmRlcHMgPSBbXSkucHVzaCh0KTtcbiAgICAgICAgdGhpcy5yb290LmMucmVnaXN0ZXIodCk7XG4gICAgfVxuICAgIGgodCkge1xuICAgICAgICBjb25zdCBlID0gdGhpcy5wLmRvY3VtZW50LmNyZWF0ZUVsZW1lbnQodCk7XG4gICAgICAgIGlmIChcInRlbXBsYXRlXCIgPT09IHQpIHRoaXMucC5kb2N1bWVudC5hZG9wdE5vZGUoZS5jb250ZW50KTtcbiAgICAgICAgcmV0dXJuIGU7XG4gICAgfVxuICAgIGFlKHQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuYy5maW5kKHNpLCB0KTtcbiAgICB9XG4gICAgdWUodCkge1xuICAgICAgICByZXR1cm4gdGhpcy5jLmZpbmQoTWUsIHQpO1xuICAgIH1cbiAgICB4ZSh0KSB7XG4gICAgICAgIHJldHVybiBuZXcgQ29tcGlsYXRpb25Db250ZXh0KHRoaXMuZGVmLCB0aGlzLmMsIHRoaXMuY2ksIHRoaXMsIHRoaXMucm9vdCwgdCk7XG4gICAgfVxuICAgIGNlKHQpIHtcbiAgICAgICAgaWYgKHRoaXMucm9vdCAhPT0gdGhpcykgcmV0dXJuIHRoaXMucm9vdC5jZSh0KTtcbiAgICAgICAgY29uc3QgZSA9IHQuY29tbWFuZDtcbiAgICAgICAgaWYgKG51bGwgPT09IGUpIHJldHVybiBudWxsO1xuICAgICAgICBsZXQgaSA9IHRoaXMuQ2VbZV07XG4gICAgICAgIGlmICh2b2lkIDAgPT09IGkpIHtcbiAgICAgICAgICAgIGkgPSB0aGlzLmMuY3JlYXRlKG1uLCBlKTtcbiAgICAgICAgICAgIGlmIChudWxsID09PSBpKSB0aHJvdyBuZXcgRXJyb3IoYEFVUjA3MTM6JHtlfWApO1xuICAgICAgICAgICAgdGhpcy5DZVtlXSA9IGk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGk7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBPbih0KSB7XG4gICAgY29uc3QgZSA9IHQubGVuZ3RoO1xuICAgIGxldCBpID0gMDtcbiAgICBsZXQgcyA9IDA7XG4gICAgd2hpbGUgKGUgPiBzKSB7XG4gICAgICAgIGkgPSB0LmNoYXJDb2RlQXQocyk7XG4gICAgICAgIGlmICg5MiA9PT0gaSkgKytzOyBlbHNlIGlmICg1OCA9PT0gaSkgcmV0dXJuIHRydWU7IGVsc2UgaWYgKDM2ID09PSBpICYmIDEyMyA9PT0gdC5jaGFyQ29kZUF0KHMgKyAxKSkgcmV0dXJuIGZhbHNlO1xuICAgICAgICArK3M7XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbn1cblxuZnVuY3Rpb24gJG4oKSB7XG4gICAgTW4ubm9kZSA9IE1uLmF0dHIgPSBNbi5iaW5kYWJsZSA9IE1uLmRlZiA9IG51bGw7XG59XG5cbmNvbnN0IExuID0ge1xuICAgIHByb2plY3Rpb25zOiBudWxsXG59O1xuXG5jb25zdCBxbiA9IHtcbiAgICBuYW1lOiBcInVubmFtZWRcIlxufTtcblxuY29uc3QgTW4gPSB7XG4gICAgbm9kZTogbnVsbCxcbiAgICBhdHRyOiBudWxsLFxuICAgIGJpbmRhYmxlOiBudWxsLFxuICAgIGRlZjogbnVsbFxufTtcblxuY29uc3QgVW4gPSBPYmplY3QuYXNzaWduKHd0KCksIHtcbiAgICBpZDogdHJ1ZSxcbiAgICBuYW1lOiB0cnVlLFxuICAgIFwiYXUtc2xvdFwiOiB0cnVlLFxuICAgIFwiYXMtZWxlbWVudFwiOiB0cnVlXG59KTtcblxuY29uc3QgRm4gPSB7XG4gICAgY2hlY2tib3g6IDEsXG4gICAgcmFkaW86IDFcbn07XG5cbmNvbnN0IFZuID0gbmV3IFdlYWtNYXA7XG5cbmNsYXNzIEJpbmRhYmxlc0luZm8ge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUsIGkpIHtcbiAgICAgICAgdGhpcy5hdHRycyA9IHQ7XG4gICAgICAgIHRoaXMuYmluZGFibGVzID0gZTtcbiAgICAgICAgdGhpcy5wcmltYXJ5ID0gaTtcbiAgICB9XG4gICAgc3RhdGljIGZyb20odCwgZSkge1xuICAgICAgICBsZXQgaSA9IFZuLmdldCh0KTtcbiAgICAgICAgaWYgKG51bGwgPT0gaSkge1xuICAgICAgICAgICAgY29uc3QgcyA9IHQuYmluZGFibGVzO1xuICAgICAgICAgICAgY29uc3QgbiA9IHd0KCk7XG4gICAgICAgICAgICBjb25zdCByID0gZSA/IHZvaWQgMCA9PT0gdC5kZWZhdWx0QmluZGluZ01vZGUgPyBELmRlZmF1bHQgOiB0LmRlZmF1bHRCaW5kaW5nTW9kZSA6IEQuZGVmYXVsdDtcbiAgICAgICAgICAgIGxldCBvO1xuICAgICAgICAgICAgbGV0IGw7XG4gICAgICAgICAgICBsZXQgaCA9IGZhbHNlO1xuICAgICAgICAgICAgbGV0IGE7XG4gICAgICAgICAgICBsZXQgYztcbiAgICAgICAgICAgIGZvciAobCBpbiBzKSB7XG4gICAgICAgICAgICAgICAgbyA9IHNbbF07XG4gICAgICAgICAgICAgICAgYyA9IG8uYXR0cmlidXRlO1xuICAgICAgICAgICAgICAgIGlmICh0cnVlID09PSBvLnByaW1hcnkpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGgpIHRocm93IG5ldyBFcnJvcihgQVVSMDcxNDoke3QubmFtZX1gKTtcbiAgICAgICAgICAgICAgICAgICAgaCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIGEgPSBvO1xuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoIWggJiYgbnVsbCA9PSBhKSBhID0gbztcbiAgICAgICAgICAgICAgICBuW2NdID0gQmluZGFibGVEZWZpbml0aW9uLmNyZWF0ZShsLCB0LlR5cGUsIG8pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKG51bGwgPT0gbyAmJiBlKSBhID0gbi52YWx1ZSA9IEJpbmRhYmxlRGVmaW5pdGlvbi5jcmVhdGUoXCJ2YWx1ZVwiLCB0LlR5cGUsIHtcbiAgICAgICAgICAgICAgICBtb2RlOiByXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIFZuLnNldCh0LCBpID0gbmV3IEJpbmRhYmxlc0luZm8obiwgcywgYSkpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBpO1xuICAgIH1cbn1cblxudmFyIF9uO1xuXG4oZnVuY3Rpb24odCkge1xuICAgIHRbXCJwcm9wZXJ0eVwiXSA9IFwicHJvcGVydHlcIjtcbiAgICB0W1wiYXR0cmlidXRlXCJdID0gXCJhdHRyaWJ1dGVcIjtcbiAgICB0W1wibW9kZVwiXSA9IFwibW9kZVwiO1xufSkoX24gfHwgKF9uID0ge30pKTtcblxuY29uc3Qgam4gPSBPYmplY3QuZnJlZXplKFsgXCJwcm9wZXJ0eVwiLCBcImF0dHJpYnV0ZVwiLCBcIm1vZGVcIiBdKTtcblxuY29uc3QgTm4gPSBcImFzLWN1c3RvbS1lbGVtZW50XCI7XG5cbmZ1bmN0aW9uIFduKHQsIGUpIHtcbiAgICBjb25zdCBpID0gdC5nZXRBdHRyaWJ1dGUoTm4pO1xuICAgIGlmIChudWxsID09PSBpIHx8IFwiXCIgPT09IGkpIHRocm93IG5ldyBFcnJvcihcIkFVUjA3MTVcIik7XG4gICAgaWYgKGUuaGFzKGkpKSB0aHJvdyBuZXcgRXJyb3IoYEFVUjA3MTY6JHtpfWApOyBlbHNlIHtcbiAgICAgICAgZS5hZGQoaSk7XG4gICAgICAgIHQucmVtb3ZlQXR0cmlidXRlKE5uKTtcbiAgICB9XG4gICAgcmV0dXJuIGk7XG59XG5cbmZ1bmN0aW9uIEhuKHQpIHtcbiAgICBzd2l0Y2ggKHQuZ2V0QXR0cmlidXRlKFwibW9kZVwiKSkge1xuICAgICAgY2FzZSBcIm9uZVRpbWVcIjpcbiAgICAgICAgcmV0dXJuIEQub25lVGltZTtcblxuICAgICAgY2FzZSBcInRvVmlld1wiOlxuICAgICAgICByZXR1cm4gRC50b1ZpZXc7XG5cbiAgICAgIGNhc2UgXCJmcm9tVmlld1wiOlxuICAgICAgICByZXR1cm4gRC5mcm9tVmlldztcblxuICAgICAgY2FzZSBcInR3b1dheVwiOlxuICAgICAgICByZXR1cm4gRC50d29XYXk7XG5cbiAgICAgIGNhc2UgXCJkZWZhdWx0XCI6XG4gICAgICBkZWZhdWx0OlxuICAgICAgICByZXR1cm4gRC5kZWZhdWx0O1xuICAgIH1cbn1cblxuY29uc3Qgem4gPSBsLmNyZWF0ZUludGVyZmFjZShcIklUZW1wbGF0ZUNvbXBpbGVySG9va3NcIik7XG5cbmNvbnN0IEduID0gbmV3IFdlYWtNYXA7XG5cbmNvbnN0IFhuID0gbXQoXCJjb21waWxlci1ob29rc1wiKTtcblxuY29uc3QgS24gPSBPYmplY3QuZnJlZXplKHtcbiAgICBuYW1lOiBYbixcbiAgICBkZWZpbmUodCkge1xuICAgICAgICBsZXQgZSA9IEduLmdldCh0KTtcbiAgICAgICAgaWYgKHZvaWQgMCA9PT0gZSkge1xuICAgICAgICAgICAgR24uc2V0KHQsIGUgPSBuZXcgVGVtcGxhdGVDb21waWxlckhvb2tzRGVmaW5pdGlvbih0KSk7XG4gICAgICAgICAgICBjdChYbiwgZSwgdCk7XG4gICAgICAgICAgICB2dCh0LCBYbik7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHQ7XG4gICAgfVxufSk7XG5cbmNsYXNzIFRlbXBsYXRlQ29tcGlsZXJIb29rc0RlZmluaXRpb24ge1xuICAgIGNvbnN0cnVjdG9yKHQpIHtcbiAgICAgICAgdGhpcy5UeXBlID0gdDtcbiAgICB9XG4gICAgZ2V0IG5hbWUoKSB7XG4gICAgICAgIHJldHVybiBcIlwiO1xuICAgIH1cbiAgICByZWdpc3Rlcih0KSB7XG4gICAgICAgIHQucmVnaXN0ZXIoYy5zaW5nbGV0b24oem4sIHRoaXMuVHlwZSkpO1xuICAgIH1cbn1cblxuY29uc3QgWW4gPSB0ID0+IHtcbiAgICByZXR1cm4gdm9pZCAwID09PSB0ID8gZSA6IGUodCk7XG4gICAgZnVuY3Rpb24gZSh0KSB7XG4gICAgICAgIHJldHVybiBLbi5kZWZpbmUodCk7XG4gICAgfVxufTtcblxuY29uc3QgUW4gPSBzaS5nZW5lcmF0ZU5hbWU7XG5cbmNsYXNzIEJpbmRpbmdNb2RlQmVoYXZpb3Ige1xuICAgIGNvbnN0cnVjdG9yKHQpIHtcbiAgICAgICAgdGhpcy5tb2RlID0gdDtcbiAgICAgICAgdGhpcy5BZSA9IG5ldyBNYXA7XG4gICAgfVxuICAgIGJpbmQodCwgZSwgaSkge1xuICAgICAgICB0aGlzLkFlLnNldChpLCBpLm1vZGUpO1xuICAgICAgICBpLm1vZGUgPSB0aGlzLm1vZGU7XG4gICAgfVxuICAgIHVuYmluZCh0LCBlLCBpKSB7XG4gICAgICAgIGkubW9kZSA9IHRoaXMuQWUuZ2V0KGkpO1xuICAgICAgICB0aGlzLkFlLmRlbGV0ZShpKTtcbiAgICB9XG59XG5cbmNsYXNzIE9uZVRpbWVCaW5kaW5nQmVoYXZpb3IgZXh0ZW5kcyBCaW5kaW5nTW9kZUJlaGF2aW9yIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgc3VwZXIoRC5vbmVUaW1lKTtcbiAgICB9XG59XG5cbmNsYXNzIFRvVmlld0JpbmRpbmdCZWhhdmlvciBleHRlbmRzIEJpbmRpbmdNb2RlQmVoYXZpb3Ige1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICBzdXBlcihELnRvVmlldyk7XG4gICAgfVxufVxuXG5jbGFzcyBGcm9tVmlld0JpbmRpbmdCZWhhdmlvciBleHRlbmRzIEJpbmRpbmdNb2RlQmVoYXZpb3Ige1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICBzdXBlcihELmZyb21WaWV3KTtcbiAgICB9XG59XG5cbmNsYXNzIFR3b1dheUJpbmRpbmdCZWhhdmlvciBleHRlbmRzIEJpbmRpbmdNb2RlQmVoYXZpb3Ige1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICBzdXBlcihELnR3b1dheSk7XG4gICAgfVxufVxuXG5HKFwib25lVGltZVwiKShPbmVUaW1lQmluZGluZ0JlaGF2aW9yKTtcblxuRyhcInRvVmlld1wiKShUb1ZpZXdCaW5kaW5nQmVoYXZpb3IpO1xuXG5HKFwiZnJvbVZpZXdcIikoRnJvbVZpZXdCaW5kaW5nQmVoYXZpb3IpO1xuXG5HKFwidHdvV2F5XCIpKFR3b1dheUJpbmRpbmdCZWhhdmlvcik7XG5cbmNvbnN0IFpuID0gMjAwO1xuXG5jbGFzcyBEZWJvdW5jZUJpbmRpbmdCZWhhdmlvciBleHRlbmRzIFgge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUpIHtcbiAgICAgICAgc3VwZXIodCwgZSk7XG4gICAgICAgIHRoaXMub3B0cyA9IHtcbiAgICAgICAgICAgIGRlbGF5OiBablxuICAgICAgICB9O1xuICAgICAgICB0aGlzLmZpcnN0QXJnID0gbnVsbDtcbiAgICAgICAgdGhpcy50YXNrID0gbnVsbDtcbiAgICAgICAgdGhpcy50YXNrUXVldWUgPSB0LmxvY2F0b3IuZ2V0KHUpLnRhc2tRdWV1ZTtcbiAgICAgICAgaWYgKGUuYXJncy5sZW5ndGggPiAwKSB0aGlzLmZpcnN0QXJnID0gZS5hcmdzWzBdO1xuICAgIH1cbiAgICBjYWxsU291cmNlKHQpIHtcbiAgICAgICAgdGhpcy5xdWV1ZVRhc2soKCgpID0+IHRoaXMuYmluZGluZy5jYWxsU291cmNlKHQpKSk7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaGFuZGxlQ2hhbmdlKHQsIGUsIGkpIHtcbiAgICAgICAgaWYgKG51bGwgIT09IHRoaXMudGFzaykge1xuICAgICAgICAgICAgdGhpcy50YXNrLmNhbmNlbCgpO1xuICAgICAgICAgICAgdGhpcy50YXNrID0gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmJpbmRpbmcuaGFuZGxlQ2hhbmdlKHQsIGUsIGkpO1xuICAgIH1cbiAgICB1cGRhdGVTb3VyY2UodCwgZSkge1xuICAgICAgICB0aGlzLnF1ZXVlVGFzaygoKCkgPT4gdGhpcy5iaW5kaW5nLnVwZGF0ZVNvdXJjZSh0LCBlKSkpO1xuICAgIH1cbiAgICBxdWV1ZVRhc2sodCkge1xuICAgICAgICBjb25zdCBlID0gdGhpcy50YXNrO1xuICAgICAgICB0aGlzLnRhc2sgPSB0aGlzLnRhc2tRdWV1ZS5xdWV1ZVRhc2soKCgpID0+IHtcbiAgICAgICAgICAgIHRoaXMudGFzayA9IG51bGw7XG4gICAgICAgICAgICByZXR1cm4gdCgpO1xuICAgICAgICB9KSwgdGhpcy5vcHRzKTtcbiAgICAgICAgbnVsbCA9PT0gZSB8fCB2b2lkIDAgPT09IGUgPyB2b2lkIDAgOiBlLmNhbmNlbCgpO1xuICAgIH1cbiAgICAkYmluZCh0LCBlKSB7XG4gICAgICAgIGlmIChudWxsICE9PSB0aGlzLmZpcnN0QXJnKSB7XG4gICAgICAgICAgICBjb25zdCBpID0gTnVtYmVyKHRoaXMuZmlyc3RBcmcuZXZhbHVhdGUodCwgZSwgdGhpcy5sb2NhdG9yLCBudWxsKSk7XG4gICAgICAgICAgICB0aGlzLm9wdHMuZGVsYXkgPSBpc05hTihpKSA/IFpuIDogaTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmJpbmRpbmcuJGJpbmQodCwgZSk7XG4gICAgfVxuICAgICR1bmJpbmQodCkge1xuICAgICAgICB2YXIgZTtcbiAgICAgICAgbnVsbCA9PT0gKGUgPSB0aGlzLnRhc2spIHx8IHZvaWQgMCA9PT0gZSA/IHZvaWQgMCA6IGUuY2FuY2VsKCk7XG4gICAgICAgIHRoaXMudGFzayA9IG51bGw7XG4gICAgICAgIHRoaXMuYmluZGluZy4kdW5iaW5kKHQpO1xuICAgIH1cbn1cblxuRyhcImRlYm91bmNlXCIpKERlYm91bmNlQmluZGluZ0JlaGF2aW9yKTtcblxuY2xhc3MgU2lnbmFsQmluZGluZ0JlaGF2aW9yIHtcbiAgICBjb25zdHJ1Y3Rvcih0KSB7XG4gICAgICAgIHRoaXMuWnQgPSBuZXcgTWFwO1xuICAgICAgICB0aGlzLlNlID0gdDtcbiAgICB9XG4gICAgYmluZCh0LCBlLCBpLCAuLi5zKSB7XG4gICAgICAgIGlmICghKFwiaGFuZGxlQ2hhbmdlXCIgaW4gaSkpIHRocm93IG5ldyBFcnJvcihcIkFVUjA4MTdcIik7XG4gICAgICAgIGlmICgwID09PSBzLmxlbmd0aCkgdGhyb3cgbmV3IEVycm9yKFwiQVVSMDgxOFwiKTtcbiAgICAgICAgdGhpcy5adC5zZXQoaSwgcyk7XG4gICAgICAgIGxldCBuO1xuICAgICAgICBmb3IgKG4gb2YgcykgdGhpcy5TZS5hZGRTaWduYWxMaXN0ZW5lcihuLCBpKTtcbiAgICB9XG4gICAgdW5iaW5kKHQsIGUsIGkpIHtcbiAgICAgICAgY29uc3QgcyA9IHRoaXMuWnQuZ2V0KGkpO1xuICAgICAgICB0aGlzLlp0LmRlbGV0ZShpKTtcbiAgICAgICAgbGV0IG47XG4gICAgICAgIGZvciAobiBvZiBzKSB0aGlzLlNlLnJlbW92ZVNpZ25hbExpc3RlbmVyKG4sIGkpO1xuICAgIH1cbn1cblxuU2lnbmFsQmluZGluZ0JlaGF2aW9yLmluamVjdCA9IFsgSyBdO1xuXG5HKFwic2lnbmFsXCIpKFNpZ25hbEJpbmRpbmdCZWhhdmlvcik7XG5cbmNvbnN0IEpuID0gMjAwO1xuXG5jbGFzcyBUaHJvdHRsZUJpbmRpbmdCZWhhdmlvciBleHRlbmRzIFgge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUpIHtcbiAgICAgICAgc3VwZXIodCwgZSk7XG4gICAgICAgIHRoaXMub3B0cyA9IHtcbiAgICAgICAgICAgIGRlbGF5OiBKblxuICAgICAgICB9O1xuICAgICAgICB0aGlzLmZpcnN0QXJnID0gbnVsbDtcbiAgICAgICAgdGhpcy50YXNrID0gbnVsbDtcbiAgICAgICAgdGhpcy5sYXN0Q2FsbCA9IDA7XG4gICAgICAgIHRoaXMuZGVsYXkgPSAwO1xuICAgICAgICB0aGlzLnAgPSB0LmxvY2F0b3IuZ2V0KHUpO1xuICAgICAgICB0aGlzLlJlID0gdGhpcy5wLnRhc2tRdWV1ZTtcbiAgICAgICAgaWYgKGUuYXJncy5sZW5ndGggPiAwKSB0aGlzLmZpcnN0QXJnID0gZS5hcmdzWzBdO1xuICAgIH1cbiAgICBjYWxsU291cmNlKHQpIHtcbiAgICAgICAgdGhpcy5FZSgoKCkgPT4gdGhpcy5iaW5kaW5nLmNhbGxTb3VyY2UodCkpKTtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBoYW5kbGVDaGFuZ2UodCwgZSwgaSkge1xuICAgICAgICBpZiAobnVsbCAhPT0gdGhpcy50YXNrKSB7XG4gICAgICAgICAgICB0aGlzLnRhc2suY2FuY2VsKCk7XG4gICAgICAgICAgICB0aGlzLnRhc2sgPSBudWxsO1xuICAgICAgICAgICAgdGhpcy5sYXN0Q2FsbCA9IHRoaXMucC5wZXJmb3JtYW5jZU5vdygpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuYmluZGluZy5oYW5kbGVDaGFuZ2UodCwgZSwgaSk7XG4gICAgfVxuICAgIHVwZGF0ZVNvdXJjZSh0LCBlKSB7XG4gICAgICAgIHRoaXMuRWUoKCgpID0+IHRoaXMuYmluZGluZy51cGRhdGVTb3VyY2UodCwgZSkpKTtcbiAgICB9XG4gICAgRWUodCkge1xuICAgICAgICBjb25zdCBlID0gdGhpcy5vcHRzO1xuICAgICAgICBjb25zdCBpID0gdGhpcy5wO1xuICAgICAgICBjb25zdCBzID0gdGhpcy5sYXN0Q2FsbCArIGUuZGVsYXkgLSBpLnBlcmZvcm1hbmNlTm93KCk7XG4gICAgICAgIGlmIChzID4gMCkge1xuICAgICAgICAgICAgY29uc3QgbiA9IHRoaXMudGFzaztcbiAgICAgICAgICAgIGUuZGVsYXkgPSBzO1xuICAgICAgICAgICAgdGhpcy50YXNrID0gdGhpcy5SZS5xdWV1ZVRhc2soKCgpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLmxhc3RDYWxsID0gaS5wZXJmb3JtYW5jZU5vdygpO1xuICAgICAgICAgICAgICAgIHRoaXMudGFzayA9IG51bGw7XG4gICAgICAgICAgICAgICAgZS5kZWxheSA9IHRoaXMuZGVsYXk7XG4gICAgICAgICAgICAgICAgdCgpO1xuICAgICAgICAgICAgfSksIGUpO1xuICAgICAgICAgICAgbnVsbCA9PT0gbiB8fCB2b2lkIDAgPT09IG4gPyB2b2lkIDAgOiBuLmNhbmNlbCgpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5sYXN0Q2FsbCA9IGkucGVyZm9ybWFuY2VOb3coKTtcbiAgICAgICAgICAgIHQoKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAkYmluZCh0LCBlKSB7XG4gICAgICAgIGlmIChudWxsICE9PSB0aGlzLmZpcnN0QXJnKSB7XG4gICAgICAgICAgICBjb25zdCBpID0gTnVtYmVyKHRoaXMuZmlyc3RBcmcuZXZhbHVhdGUodCwgZSwgdGhpcy5sb2NhdG9yLCBudWxsKSk7XG4gICAgICAgICAgICB0aGlzLm9wdHMuZGVsYXkgPSB0aGlzLmRlbGF5ID0gaXNOYU4oaSkgPyBKbiA6IGk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5iaW5kaW5nLiRiaW5kKHQsIGUpO1xuICAgIH1cbiAgICAkdW5iaW5kKHQpIHtcbiAgICAgICAgdmFyIGU7XG4gICAgICAgIG51bGwgPT09IChlID0gdGhpcy50YXNrKSB8fCB2b2lkIDAgPT09IGUgPyB2b2lkIDAgOiBlLmNhbmNlbCgpO1xuICAgICAgICB0aGlzLnRhc2sgPSBudWxsO1xuICAgICAgICBzdXBlci4kdW5iaW5kKHQpO1xuICAgIH1cbn1cblxuRyhcInRocm90dGxlXCIpKFRocm90dGxlQmluZGluZ0JlaGF2aW9yKTtcblxuY2xhc3MgRGF0YUF0dHJpYnV0ZUFjY2Vzc29yIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgdGhpcy50eXBlID0gMiB8IDQ7XG4gICAgfVxuICAgIGdldFZhbHVlKHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIHQuZ2V0QXR0cmlidXRlKGUpO1xuICAgIH1cbiAgICBzZXRWYWx1ZSh0LCBlLCBpLCBzKSB7XG4gICAgICAgIGlmICh2b2lkIDAgPT0gdCkgaS5yZW1vdmVBdHRyaWJ1dGUocyk7IGVsc2UgaS5zZXRBdHRyaWJ1dGUocywgdCk7XG4gICAgfVxufVxuXG5jb25zdCB0ciA9IG5ldyBEYXRhQXR0cmlidXRlQWNjZXNzb3I7XG5cbmNsYXNzIEF0dHJCaW5kaW5nQmVoYXZpb3Ige1xuICAgIGJpbmQodCwgZSwgaSkge1xuICAgICAgICBpLnRhcmdldE9ic2VydmVyID0gdHI7XG4gICAgfVxuICAgIHVuYmluZCh0LCBlLCBpKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG59XG5cbkcoXCJhdHRyXCIpKEF0dHJCaW5kaW5nQmVoYXZpb3IpO1xuXG5mdW5jdGlvbiBlcih0KSB7XG4gICAgY29uc3QgZSA9IHQuY29tcG9zZWRQYXRoKClbMF07XG4gICAgaWYgKHRoaXMudGFyZ2V0ICE9PSBlKSByZXR1cm47XG4gICAgcmV0dXJuIHRoaXMuc2VsZkV2ZW50Q2FsbFNvdXJjZSh0KTtcbn1cblxuY2xhc3MgU2VsZkJpbmRpbmdCZWhhdmlvciB7XG4gICAgYmluZCh0LCBlLCBpKSB7XG4gICAgICAgIGlmICghaS5jYWxsU291cmNlIHx8ICFpLnRhcmdldEV2ZW50KSB0aHJvdyBuZXcgRXJyb3IoXCJBVVIwODAxXCIpO1xuICAgICAgICBpLnNlbGZFdmVudENhbGxTb3VyY2UgPSBpLmNhbGxTb3VyY2U7XG4gICAgICAgIGkuY2FsbFNvdXJjZSA9IGVyO1xuICAgIH1cbiAgICB1bmJpbmQodCwgZSwgaSkge1xuICAgICAgICBpLmNhbGxTb3VyY2UgPSBpLnNlbGZFdmVudENhbGxTb3VyY2U7XG4gICAgICAgIGkuc2VsZkV2ZW50Q2FsbFNvdXJjZSA9IG51bGw7XG4gICAgfVxufVxuXG5HKFwic2VsZlwiKShTZWxmQmluZGluZ0JlaGF2aW9yKTtcblxuY29uc3QgaXIgPSB3dCgpO1xuXG5jbGFzcyBBdHRyaWJ1dGVOU0FjY2Vzc29yIHtcbiAgICBjb25zdHJ1Y3Rvcih0KSB7XG4gICAgICAgIHRoaXMubnMgPSB0O1xuICAgICAgICB0aGlzLnR5cGUgPSAyIHwgNDtcbiAgICB9XG4gICAgc3RhdGljIGZvck5zKHQpIHtcbiAgICAgICAgdmFyIGU7XG4gICAgICAgIHJldHVybiBudWxsICE9PSAoZSA9IGlyW3RdKSAmJiB2b2lkIDAgIT09IGUgPyBlIDogaXJbdF0gPSBuZXcgQXR0cmlidXRlTlNBY2Nlc3Nvcih0KTtcbiAgICB9XG4gICAgZ2V0VmFsdWUodCwgZSkge1xuICAgICAgICByZXR1cm4gdC5nZXRBdHRyaWJ1dGVOUyh0aGlzLm5zLCBlKTtcbiAgICB9XG4gICAgc2V0VmFsdWUodCwgZSwgaSwgcykge1xuICAgICAgICBpZiAodm9pZCAwID09IHQpIGkucmVtb3ZlQXR0cmlidXRlTlModGhpcy5ucywgcyk7IGVsc2UgaS5zZXRBdHRyaWJ1dGVOUyh0aGlzLm5zLCBzLCB0KTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIHNyKHQsIGUpIHtcbiAgICByZXR1cm4gdCA9PT0gZTtcbn1cblxuY2xhc3MgQ2hlY2tlZE9ic2VydmVyIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlLCBpLCBzKSB7XG4gICAgICAgIHRoaXMuaGFuZGxlciA9IGk7XG4gICAgICAgIHRoaXMudHlwZSA9IDIgfCAxIHwgNDtcbiAgICAgICAgdGhpcy52ID0gdm9pZCAwO1xuICAgICAgICB0aGlzLm92ID0gdm9pZCAwO1xuICAgICAgICB0aGlzLkJlID0gdm9pZCAwO1xuICAgICAgICB0aGlzLkllID0gdm9pZCAwO1xuICAgICAgICB0aGlzLmYgPSAwO1xuICAgICAgICB0aGlzLm8gPSB0O1xuICAgICAgICB0aGlzLm9MID0gcztcbiAgICB9XG4gICAgZ2V0VmFsdWUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnY7XG4gICAgfVxuICAgIHNldFZhbHVlKHQsIGUpIHtcbiAgICAgICAgY29uc3QgaSA9IHRoaXMudjtcbiAgICAgICAgaWYgKHQgPT09IGkpIHJldHVybjtcbiAgICAgICAgdGhpcy52ID0gdDtcbiAgICAgICAgdGhpcy5vdiA9IGk7XG4gICAgICAgIHRoaXMuZiA9IGU7XG4gICAgICAgIHRoaXMuVGUoKTtcbiAgICAgICAgdGhpcy5EZSgpO1xuICAgICAgICB0aGlzLnF1ZXVlLmFkZCh0aGlzKTtcbiAgICB9XG4gICAgaGFuZGxlQ29sbGVjdGlvbkNoYW5nZSh0LCBlKSB7XG4gICAgICAgIHRoaXMuRGUoKTtcbiAgICB9XG4gICAgaGFuZGxlQ2hhbmdlKHQsIGUsIGkpIHtcbiAgICAgICAgdGhpcy5EZSgpO1xuICAgIH1cbiAgICBEZSgpIHtcbiAgICAgICAgY29uc3QgdCA9IHRoaXMudjtcbiAgICAgICAgY29uc3QgZSA9IHRoaXMubztcbiAgICAgICAgY29uc3QgaSA9IGJ0LmNhbGwoZSwgXCJtb2RlbFwiKSA/IGUubW9kZWwgOiBlLnZhbHVlO1xuICAgICAgICBjb25zdCBzID0gXCJyYWRpb1wiID09PSBlLnR5cGU7XG4gICAgICAgIGNvbnN0IG4gPSB2b2lkIDAgIT09IGUubWF0Y2hlciA/IGUubWF0Y2hlciA6IHNyO1xuICAgICAgICBpZiAocykgZS5jaGVja2VkID0gISFuKHQsIGkpOyBlbHNlIGlmICh0cnVlID09PSB0KSBlLmNoZWNrZWQgPSB0cnVlOyBlbHNlIHtcbiAgICAgICAgICAgIGxldCBzID0gZmFsc2U7XG4gICAgICAgICAgICBpZiAodCBpbnN0YW5jZW9mIEFycmF5KSBzID0gLTEgIT09IHQuZmluZEluZGV4KCh0ID0+ICEhbih0LCBpKSkpOyBlbHNlIGlmICh0IGluc3RhbmNlb2YgU2V0KSB7XG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCBlIG9mIHQpIGlmIChuKGUsIGkpKSB7XG4gICAgICAgICAgICAgICAgICAgIHMgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHQgaW5zdGFuY2VvZiBNYXApIGZvciAoY29uc3QgZSBvZiB0KSB7XG4gICAgICAgICAgICAgICAgY29uc3QgdCA9IGVbMF07XG4gICAgICAgICAgICAgICAgY29uc3QgciA9IGVbMV07XG4gICAgICAgICAgICAgICAgaWYgKG4odCwgaSkgJiYgdHJ1ZSA9PT0gcikge1xuICAgICAgICAgICAgICAgICAgICBzID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZS5jaGVja2VkID0gcztcbiAgICAgICAgfVxuICAgIH1cbiAgICBoYW5kbGVFdmVudCgpIHtcbiAgICAgICAgbGV0IHQgPSB0aGlzLm92ID0gdGhpcy52O1xuICAgICAgICBjb25zdCBlID0gdGhpcy5vO1xuICAgICAgICBjb25zdCBpID0gYnQuY2FsbChlLCBcIm1vZGVsXCIpID8gZS5tb2RlbCA6IGUudmFsdWU7XG4gICAgICAgIGNvbnN0IHMgPSBlLmNoZWNrZWQ7XG4gICAgICAgIGNvbnN0IG4gPSB2b2lkIDAgIT09IGUubWF0Y2hlciA/IGUubWF0Y2hlciA6IHNyO1xuICAgICAgICBpZiAoXCJjaGVja2JveFwiID09PSBlLnR5cGUpIHtcbiAgICAgICAgICAgIGlmICh0IGluc3RhbmNlb2YgQXJyYXkpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBlID0gdC5maW5kSW5kZXgoKHQgPT4gISFuKHQsIGkpKSk7XG4gICAgICAgICAgICAgICAgaWYgKHMgJiYgLTEgPT09IGUpIHQucHVzaChpKTsgZWxzZSBpZiAoIXMgJiYgLTEgIT09IGUpIHQuc3BsaWNlKGUsIDEpO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAodCBpbnN0YW5jZW9mIFNldCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGUgPSB7fTtcbiAgICAgICAgICAgICAgICBsZXQgciA9IGU7XG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCBlIG9mIHQpIGlmICh0cnVlID09PSBuKGUsIGkpKSB7XG4gICAgICAgICAgICAgICAgICAgIHIgPSBlO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHMgJiYgciA9PT0gZSkgdC5hZGQoaSk7IGVsc2UgaWYgKCFzICYmIHIgIT09IGUpIHQuZGVsZXRlKHIpO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAodCBpbnN0YW5jZW9mIE1hcCkge1xuICAgICAgICAgICAgICAgIGxldCBlO1xuICAgICAgICAgICAgICAgIGZvciAoY29uc3QgcyBvZiB0KSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHQgPSBzWzBdO1xuICAgICAgICAgICAgICAgICAgICBpZiAodHJ1ZSA9PT0gbih0LCBpKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZSA9IHQ7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0LnNldChlLCBzKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0ID0gcztcbiAgICAgICAgfSBlbHNlIGlmIChzKSB0ID0gaTsgZWxzZSByZXR1cm47XG4gICAgICAgIHRoaXMudiA9IHQ7XG4gICAgICAgIHRoaXMucXVldWUuYWRkKHRoaXMpO1xuICAgIH1cbiAgICBzdGFydCgpIHtcbiAgICAgICAgdGhpcy5oYW5kbGVyLnN1YnNjcmliZSh0aGlzLm8sIHRoaXMpO1xuICAgICAgICB0aGlzLlRlKCk7XG4gICAgfVxuICAgIHN0b3AoKSB7XG4gICAgICAgIHZhciB0LCBlO1xuICAgICAgICB0aGlzLmhhbmRsZXIuZGlzcG9zZSgpO1xuICAgICAgICBudWxsID09PSAodCA9IHRoaXMuQmUpIHx8IHZvaWQgMCA9PT0gdCA/IHZvaWQgMCA6IHQudW5zdWJzY3JpYmUodGhpcyk7XG4gICAgICAgIHRoaXMuQmUgPSB2b2lkIDA7XG4gICAgICAgIG51bGwgPT09IChlID0gdGhpcy5JZSkgfHwgdm9pZCAwID09PSBlID8gdm9pZCAwIDogZS51bnN1YnNjcmliZSh0aGlzKTtcbiAgICB9XG4gICAgc3Vic2NyaWJlKHQpIHtcbiAgICAgICAgaWYgKHRoaXMuc3Vicy5hZGQodCkgJiYgMSA9PT0gdGhpcy5zdWJzLmNvdW50KSB0aGlzLnN0YXJ0KCk7XG4gICAgfVxuICAgIHVuc3Vic2NyaWJlKHQpIHtcbiAgICAgICAgaWYgKHRoaXMuc3Vicy5yZW1vdmUodCkgJiYgMCA9PT0gdGhpcy5zdWJzLmNvdW50KSB0aGlzLnN0b3AoKTtcbiAgICB9XG4gICAgZmx1c2goKSB7XG4gICAgICAgIG5yID0gdGhpcy5vdjtcbiAgICAgICAgdGhpcy5vdiA9IHRoaXMudjtcbiAgICAgICAgdGhpcy5zdWJzLm5vdGlmeSh0aGlzLnYsIG5yLCB0aGlzLmYpO1xuICAgIH1cbiAgICBUZSgpIHtcbiAgICAgICAgdmFyIHQsIGUsIGksIHMsIG4sIHIsIG87XG4gICAgICAgIGNvbnN0IGwgPSB0aGlzLm87XG4gICAgICAgIG51bGwgPT09IChuID0gbnVsbCAhPT0gKHQgPSB0aGlzLkllKSAmJiB2b2lkIDAgIT09IHQgPyB0IDogdGhpcy5JZSA9IG51bGwgIT09IChpID0gbnVsbCA9PT0gKGUgPSBsLiRvYnNlcnZlcnMpIHx8IHZvaWQgMCA9PT0gZSA/IHZvaWQgMCA6IGUubW9kZWwpICYmIHZvaWQgMCAhPT0gaSA/IGkgOiBudWxsID09PSAocyA9IGwuJG9ic2VydmVycykgfHwgdm9pZCAwID09PSBzID8gdm9pZCAwIDogcy52YWx1ZSkgfHwgdm9pZCAwID09PSBuID8gdm9pZCAwIDogbi5zdWJzY3JpYmUodGhpcyk7XG4gICAgICAgIG51bGwgPT09IChyID0gdGhpcy5CZSkgfHwgdm9pZCAwID09PSByID8gdm9pZCAwIDogci51bnN1YnNjcmliZSh0aGlzKTtcbiAgICAgICAgdGhpcy5CZSA9IHZvaWQgMDtcbiAgICAgICAgaWYgKFwiY2hlY2tib3hcIiA9PT0gbC50eXBlKSBudWxsID09PSAobyA9IHRoaXMuQmUgPSBncih0aGlzLnYsIHRoaXMub0wpKSB8fCB2b2lkIDAgPT09IG8gPyB2b2lkIDAgOiBvLnN1YnNjcmliZSh0aGlzKTtcbiAgICB9XG59XG5cblAoQ2hlY2tlZE9ic2VydmVyKTtcblxuTyhDaGVja2VkT2JzZXJ2ZXIpO1xuXG5sZXQgbnI7XG5cbmNvbnN0IHJyID0gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eTtcblxuY29uc3Qgb3IgPSB7XG4gICAgY2hpbGRMaXN0OiB0cnVlLFxuICAgIHN1YnRyZWU6IHRydWUsXG4gICAgY2hhcmFjdGVyRGF0YTogdHJ1ZVxufTtcblxuZnVuY3Rpb24gbHIodCwgZSkge1xuICAgIHJldHVybiB0ID09PSBlO1xufVxuXG5jbGFzcyBTZWxlY3RWYWx1ZU9ic2VydmVyIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlLCBpLCBzKSB7XG4gICAgICAgIHRoaXMudHlwZSA9IDIgfCAxIHwgNDtcbiAgICAgICAgdGhpcy52ID0gdm9pZCAwO1xuICAgICAgICB0aGlzLm92ID0gdm9pZCAwO1xuICAgICAgICB0aGlzLkggPSBmYWxzZTtcbiAgICAgICAgdGhpcy5QZSA9IHZvaWQgMDtcbiAgICAgICAgdGhpcy5PZSA9IHZvaWQgMDtcbiAgICAgICAgdGhpcy5pTyA9IGZhbHNlO1xuICAgICAgICB0aGlzLm8gPSB0O1xuICAgICAgICB0aGlzLm9MID0gcztcbiAgICAgICAgdGhpcy5oYW5kbGVyID0gaTtcbiAgICB9XG4gICAgZ2V0VmFsdWUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmlPID8gdGhpcy52IDogdGhpcy5vLm11bHRpcGxlID8gaHIodGhpcy5vLm9wdGlvbnMpIDogdGhpcy5vLnZhbHVlO1xuICAgIH1cbiAgICBzZXRWYWx1ZSh0LCBlKSB7XG4gICAgICAgIHRoaXMub3YgPSB0aGlzLnY7XG4gICAgICAgIHRoaXMudiA9IHQ7XG4gICAgICAgIHRoaXMuSCA9IHQgIT09IHRoaXMub3Y7XG4gICAgICAgIHRoaXMuJGUodCBpbnN0YW5jZW9mIEFycmF5ID8gdCA6IG51bGwpO1xuICAgICAgICBpZiAoMCA9PT0gKDI1NiAmIGUpKSB0aGlzLksoKTtcbiAgICB9XG4gICAgSygpIHtcbiAgICAgICAgaWYgKHRoaXMuSCkge1xuICAgICAgICAgICAgdGhpcy5IID0gZmFsc2U7XG4gICAgICAgICAgICB0aGlzLnN5bmNPcHRpb25zKCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgaGFuZGxlQ29sbGVjdGlvbkNoYW5nZSgpIHtcbiAgICAgICAgdGhpcy5zeW5jT3B0aW9ucygpO1xuICAgIH1cbiAgICBzeW5jT3B0aW9ucygpIHtcbiAgICAgICAgdmFyIHQ7XG4gICAgICAgIGNvbnN0IGUgPSB0aGlzLnY7XG4gICAgICAgIGNvbnN0IGkgPSB0aGlzLm87XG4gICAgICAgIGNvbnN0IHMgPSBBcnJheS5pc0FycmF5KGUpO1xuICAgICAgICBjb25zdCBuID0gbnVsbCAhPT0gKHQgPSBpLm1hdGNoZXIpICYmIHZvaWQgMCAhPT0gdCA/IHQgOiBscjtcbiAgICAgICAgY29uc3QgciA9IGkub3B0aW9ucztcbiAgICAgICAgbGV0IG8gPSByLmxlbmd0aDtcbiAgICAgICAgd2hpbGUgKG8tLSA+IDApIHtcbiAgICAgICAgICAgIGNvbnN0IHQgPSByW29dO1xuICAgICAgICAgICAgY29uc3QgaSA9IHJyLmNhbGwodCwgXCJtb2RlbFwiKSA/IHQubW9kZWwgOiB0LnZhbHVlO1xuICAgICAgICAgICAgaWYgKHMpIHtcbiAgICAgICAgICAgICAgICB0LnNlbGVjdGVkID0gLTEgIT09IGUuZmluZEluZGV4KCh0ID0+ICEhbihpLCB0KSkpO1xuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdC5zZWxlY3RlZCA9ICEhbihpLCBlKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBzeW5jVmFsdWUoKSB7XG4gICAgICAgIGNvbnN0IHQgPSB0aGlzLm87XG4gICAgICAgIGNvbnN0IGUgPSB0Lm9wdGlvbnM7XG4gICAgICAgIGNvbnN0IGkgPSBlLmxlbmd0aDtcbiAgICAgICAgY29uc3QgcyA9IHRoaXMudjtcbiAgICAgICAgbGV0IG4gPSAwO1xuICAgICAgICBpZiAodC5tdWx0aXBsZSkge1xuICAgICAgICAgICAgaWYgKCEocyBpbnN0YW5jZW9mIEFycmF5KSkgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICBsZXQgcjtcbiAgICAgICAgICAgIGNvbnN0IG8gPSB0Lm1hdGNoZXIgfHwgbHI7XG4gICAgICAgICAgICBjb25zdCBsID0gW107XG4gICAgICAgICAgICB3aGlsZSAobiA8IGkpIHtcbiAgICAgICAgICAgICAgICByID0gZVtuXTtcbiAgICAgICAgICAgICAgICBpZiAoci5zZWxlY3RlZCkgbC5wdXNoKHJyLmNhbGwociwgXCJtb2RlbFwiKSA/IHIubW9kZWwgOiByLnZhbHVlKTtcbiAgICAgICAgICAgICAgICArK247XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBsZXQgaDtcbiAgICAgICAgICAgIG4gPSAwO1xuICAgICAgICAgICAgd2hpbGUgKG4gPCBzLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIGggPSBzW25dO1xuICAgICAgICAgICAgICAgIGlmICgtMSA9PT0gbC5maW5kSW5kZXgoKHQgPT4gISFvKGgsIHQpKSkpIHMuc3BsaWNlKG4sIDEpOyBlbHNlICsrbjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIG4gPSAwO1xuICAgICAgICAgICAgd2hpbGUgKG4gPCBsLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIGggPSBsW25dO1xuICAgICAgICAgICAgICAgIGlmICgtMSA9PT0gcy5maW5kSW5kZXgoKHQgPT4gISFvKGgsIHQpKSkpIHMucHVzaChoKTtcbiAgICAgICAgICAgICAgICArK247XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgbGV0IHIgPSBudWxsO1xuICAgICAgICBsZXQgbztcbiAgICAgICAgd2hpbGUgKG4gPCBpKSB7XG4gICAgICAgICAgICBvID0gZVtuXTtcbiAgICAgICAgICAgIGlmIChvLnNlbGVjdGVkKSB7XG4gICAgICAgICAgICAgICAgciA9IHJyLmNhbGwobywgXCJtb2RlbFwiKSA/IG8ubW9kZWwgOiBvLnZhbHVlO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgKytuO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMub3YgPSB0aGlzLnY7XG4gICAgICAgIHRoaXMudiA9IHI7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICBMZSgpIHtcbiAgICAgICAgKHRoaXMuT2UgPSBuZXcgdGhpcy5vLm93bmVyRG9jdW1lbnQuZGVmYXVsdFZpZXcuTXV0YXRpb25PYnNlcnZlcih0aGlzLnFlLmJpbmQodGhpcykpKS5vYnNlcnZlKHRoaXMubywgb3IpO1xuICAgICAgICB0aGlzLiRlKHRoaXMudiBpbnN0YW5jZW9mIEFycmF5ID8gdGhpcy52IDogbnVsbCk7XG4gICAgICAgIHRoaXMuaU8gPSB0cnVlO1xuICAgIH1cbiAgICBNZSgpIHtcbiAgICAgICAgdmFyIHQ7XG4gICAgICAgIHRoaXMuT2UuZGlzY29ubmVjdCgpO1xuICAgICAgICBudWxsID09PSAodCA9IHRoaXMuUGUpIHx8IHZvaWQgMCA9PT0gdCA/IHZvaWQgMCA6IHQudW5zdWJzY3JpYmUodGhpcyk7XG4gICAgICAgIHRoaXMuT2UgPSB0aGlzLlBlID0gdm9pZCAwO1xuICAgICAgICB0aGlzLmlPID0gZmFsc2U7XG4gICAgfVxuICAgICRlKHQpIHtcbiAgICAgICAgdmFyIGU7XG4gICAgICAgIG51bGwgPT09IChlID0gdGhpcy5QZSkgfHwgdm9pZCAwID09PSBlID8gdm9pZCAwIDogZS51bnN1YnNjcmliZSh0aGlzKTtcbiAgICAgICAgdGhpcy5QZSA9IHZvaWQgMDtcbiAgICAgICAgaWYgKG51bGwgIT0gdCkge1xuICAgICAgICAgICAgaWYgKCF0aGlzLm8ubXVsdGlwbGUpIHRocm93IG5ldyBFcnJvcihcIkFVUjA2NTRcIik7XG4gICAgICAgICAgICAodGhpcy5QZSA9IHRoaXMub0wuZ2V0QXJyYXlPYnNlcnZlcih0KSkuc3Vic2NyaWJlKHRoaXMpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGhhbmRsZUV2ZW50KCkge1xuICAgICAgICBjb25zdCB0ID0gdGhpcy5zeW5jVmFsdWUoKTtcbiAgICAgICAgaWYgKHQpIHRoaXMucXVldWUuYWRkKHRoaXMpO1xuICAgIH1cbiAgICBxZSh0KSB7XG4gICAgICAgIHRoaXMuc3luY09wdGlvbnMoKTtcbiAgICAgICAgY29uc3QgZSA9IHRoaXMuc3luY1ZhbHVlKCk7XG4gICAgICAgIGlmIChlKSB0aGlzLnF1ZXVlLmFkZCh0aGlzKTtcbiAgICB9XG4gICAgc3Vic2NyaWJlKHQpIHtcbiAgICAgICAgaWYgKHRoaXMuc3Vicy5hZGQodCkgJiYgMSA9PT0gdGhpcy5zdWJzLmNvdW50KSB7XG4gICAgICAgICAgICB0aGlzLmhhbmRsZXIuc3Vic2NyaWJlKHRoaXMubywgdGhpcyk7XG4gICAgICAgICAgICB0aGlzLkxlKCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgdW5zdWJzY3JpYmUodCkge1xuICAgICAgICBpZiAodGhpcy5zdWJzLnJlbW92ZSh0KSAmJiAwID09PSB0aGlzLnN1YnMuY291bnQpIHtcbiAgICAgICAgICAgIHRoaXMuaGFuZGxlci5kaXNwb3NlKCk7XG4gICAgICAgICAgICB0aGlzLk1lKCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZmx1c2goKSB7XG4gICAgICAgIGFyID0gdGhpcy5vdjtcbiAgICAgICAgdGhpcy5vdiA9IHRoaXMudjtcbiAgICAgICAgdGhpcy5zdWJzLm5vdGlmeSh0aGlzLnYsIGFyLCAwKTtcbiAgICB9XG59XG5cblAoU2VsZWN0VmFsdWVPYnNlcnZlcik7XG5cbk8oU2VsZWN0VmFsdWVPYnNlcnZlcik7XG5cbmZ1bmN0aW9uIGhyKHQpIHtcbiAgICBjb25zdCBlID0gW107XG4gICAgaWYgKDAgPT09IHQubGVuZ3RoKSByZXR1cm4gZTtcbiAgICBjb25zdCBpID0gdC5sZW5ndGg7XG4gICAgbGV0IHMgPSAwO1xuICAgIGxldCBuO1xuICAgIHdoaWxlIChpID4gcykge1xuICAgICAgICBuID0gdFtzXTtcbiAgICAgICAgaWYgKG4uc2VsZWN0ZWQpIGVbZS5sZW5ndGhdID0gcnIuY2FsbChuLCBcIm1vZGVsXCIpID8gbi5tb2RlbCA6IG4udmFsdWU7XG4gICAgICAgICsrcztcbiAgICB9XG4gICAgcmV0dXJuIGU7XG59XG5cbmxldCBhcjtcblxuY29uc3QgY3IgPSBcIi0tXCI7XG5cbmNsYXNzIFN0eWxlQXR0cmlidXRlQWNjZXNzb3Ige1xuICAgIGNvbnN0cnVjdG9yKHQpIHtcbiAgICAgICAgdGhpcy5vYmogPSB0O1xuICAgICAgICB0aGlzLnR5cGUgPSAyIHwgNDtcbiAgICAgICAgdGhpcy52YWx1ZSA9IFwiXCI7XG4gICAgICAgIHRoaXMub3YgPSBcIlwiO1xuICAgICAgICB0aGlzLnN0eWxlcyA9IHt9O1xuICAgICAgICB0aGlzLnZlcnNpb24gPSAwO1xuICAgICAgICB0aGlzLkggPSBmYWxzZTtcbiAgICB9XG4gICAgZ2V0VmFsdWUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm9iai5zdHlsZS5jc3NUZXh0O1xuICAgIH1cbiAgICBzZXRWYWx1ZSh0LCBlKSB7XG4gICAgICAgIHRoaXMudmFsdWUgPSB0O1xuICAgICAgICB0aGlzLkggPSB0ICE9PSB0aGlzLm92O1xuICAgICAgICBpZiAoMCA9PT0gKDI1NiAmIGUpKSB0aGlzLksoKTtcbiAgICB9XG4gICAgVWUodCkge1xuICAgICAgICBjb25zdCBlID0gW107XG4gICAgICAgIGNvbnN0IGkgPSAvdXJsXFwoW14pXSskLztcbiAgICAgICAgbGV0IHMgPSAwO1xuICAgICAgICBsZXQgbiA9IFwiXCI7XG4gICAgICAgIGxldCByO1xuICAgICAgICBsZXQgbztcbiAgICAgICAgbGV0IGw7XG4gICAgICAgIGxldCBoO1xuICAgICAgICB3aGlsZSAocyA8IHQubGVuZ3RoKSB7XG4gICAgICAgICAgICByID0gdC5pbmRleE9mKFwiO1wiLCBzKTtcbiAgICAgICAgICAgIGlmICgtMSA9PT0gcikgciA9IHQubGVuZ3RoO1xuICAgICAgICAgICAgbiArPSB0LnN1YnN0cmluZyhzLCByKTtcbiAgICAgICAgICAgIHMgPSByICsgMTtcbiAgICAgICAgICAgIGlmIChpLnRlc3QobikpIHtcbiAgICAgICAgICAgICAgICBuICs9IFwiO1wiO1xuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbyA9IG4uaW5kZXhPZihcIjpcIik7XG4gICAgICAgICAgICBsID0gbi5zdWJzdHJpbmcoMCwgbykudHJpbSgpO1xuICAgICAgICAgICAgaCA9IG4uc3Vic3RyaW5nKG8gKyAxKS50cmltKCk7XG4gICAgICAgICAgICBlLnB1c2goWyBsLCBoIF0pO1xuICAgICAgICAgICAgbiA9IFwiXCI7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGU7XG4gICAgfVxuICAgIEZlKHQpIHtcbiAgICAgICAgbGV0IGU7XG4gICAgICAgIGxldCBpO1xuICAgICAgICBjb25zdCBzID0gW107XG4gICAgICAgIGZvciAoaSBpbiB0KSB7XG4gICAgICAgICAgICBlID0gdFtpXTtcbiAgICAgICAgICAgIGlmIChudWxsID09IGUpIGNvbnRpbnVlO1xuICAgICAgICAgICAgaWYgKEF0KGUpKSB7XG4gICAgICAgICAgICAgICAgaWYgKGkuc3RhcnRzV2l0aChjcikpIHtcbiAgICAgICAgICAgICAgICAgICAgcy5wdXNoKFsgaSwgZSBdKTtcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHMucHVzaChbIHIoaSksIGUgXSk7XG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBzLnB1c2goLi4udGhpcy5WZShlKSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHM7XG4gICAgfVxuICAgIF9lKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IHQubGVuZ3RoO1xuICAgICAgICBpZiAoZSA+IDApIHtcbiAgICAgICAgICAgIGNvbnN0IGkgPSBbXTtcbiAgICAgICAgICAgIGxldCBzID0gMDtcbiAgICAgICAgICAgIGZvciAoO2UgPiBzOyArK3MpIGkucHVzaCguLi50aGlzLlZlKHRbc10pKTtcbiAgICAgICAgICAgIHJldHVybiBpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBoO1xuICAgIH1cbiAgICBWZSh0KSB7XG4gICAgICAgIGlmIChBdCh0KSkgcmV0dXJuIHRoaXMuVWUodCk7XG4gICAgICAgIGlmICh0IGluc3RhbmNlb2YgQXJyYXkpIHJldHVybiB0aGlzLl9lKHQpO1xuICAgICAgICBpZiAodCBpbnN0YW5jZW9mIE9iamVjdCkgcmV0dXJuIHRoaXMuRmUodCk7XG4gICAgICAgIHJldHVybiBoO1xuICAgIH1cbiAgICBLKCkge1xuICAgICAgICBpZiAodGhpcy5IKSB7XG4gICAgICAgICAgICB0aGlzLkggPSBmYWxzZTtcbiAgICAgICAgICAgIGNvbnN0IHQgPSB0aGlzLnZhbHVlO1xuICAgICAgICAgICAgY29uc3QgZSA9IHRoaXMuc3R5bGVzO1xuICAgICAgICAgICAgY29uc3QgaSA9IHRoaXMuVmUodCk7XG4gICAgICAgICAgICBsZXQgcztcbiAgICAgICAgICAgIGxldCBuID0gdGhpcy52ZXJzaW9uO1xuICAgICAgICAgICAgdGhpcy5vdiA9IHQ7XG4gICAgICAgICAgICBsZXQgcjtcbiAgICAgICAgICAgIGxldCBvO1xuICAgICAgICAgICAgbGV0IGw7XG4gICAgICAgICAgICBsZXQgaCA9IDA7XG4gICAgICAgICAgICBjb25zdCBhID0gaS5sZW5ndGg7XG4gICAgICAgICAgICBmb3IgKDtoIDwgYTsgKytoKSB7XG4gICAgICAgICAgICAgICAgciA9IGlbaF07XG4gICAgICAgICAgICAgICAgbyA9IHJbMF07XG4gICAgICAgICAgICAgICAgbCA9IHJbMV07XG4gICAgICAgICAgICAgICAgdGhpcy5zZXRQcm9wZXJ0eShvLCBsKTtcbiAgICAgICAgICAgICAgICBlW29dID0gbjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuc3R5bGVzID0gZTtcbiAgICAgICAgICAgIHRoaXMudmVyc2lvbiArPSAxO1xuICAgICAgICAgICAgaWYgKDAgPT09IG4pIHJldHVybjtcbiAgICAgICAgICAgIG4gLT0gMTtcbiAgICAgICAgICAgIGZvciAocyBpbiBlKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoZSwgcykgfHwgZVtzXSAhPT0gbikgY29udGludWU7XG4gICAgICAgICAgICAgICAgdGhpcy5vYmouc3R5bGUucmVtb3ZlUHJvcGVydHkocyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgc2V0UHJvcGVydHkodCwgZSkge1xuICAgICAgICBsZXQgaSA9IFwiXCI7XG4gICAgICAgIGlmIChudWxsICE9IGUgJiYgQ3QoZS5pbmRleE9mKSAmJiBlLmluY2x1ZGVzKFwiIWltcG9ydGFudFwiKSkge1xuICAgICAgICAgICAgaSA9IFwiaW1wb3J0YW50XCI7XG4gICAgICAgICAgICBlID0gZS5yZXBsYWNlKFwiIWltcG9ydGFudFwiLCBcIlwiKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLm9iai5zdHlsZS5zZXRQcm9wZXJ0eSh0LCBlLCBpKTtcbiAgICB9XG4gICAgYmluZCh0KSB7XG4gICAgICAgIHRoaXMudmFsdWUgPSB0aGlzLm92ID0gdGhpcy5vYmouc3R5bGUuY3NzVGV4dDtcbiAgICB9XG59XG5cbmNsYXNzIFZhbHVlQXR0cmlidXRlT2JzZXJ2ZXIge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUsIGkpIHtcbiAgICAgICAgdGhpcy5oYW5kbGVyID0gaTtcbiAgICAgICAgdGhpcy50eXBlID0gMiB8IDEgfCA0O1xuICAgICAgICB0aGlzLnYgPSBcIlwiO1xuICAgICAgICB0aGlzLm92ID0gXCJcIjtcbiAgICAgICAgdGhpcy5IID0gZmFsc2U7XG4gICAgICAgIHRoaXMubyA9IHQ7XG4gICAgICAgIHRoaXMuayA9IGU7XG4gICAgfVxuICAgIGdldFZhbHVlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy52O1xuICAgIH1cbiAgICBzZXRWYWx1ZSh0LCBlKSB7XG4gICAgICAgIGlmIChPYmplY3QuaXModCwgdGhpcy52KSkgcmV0dXJuO1xuICAgICAgICB0aGlzLm92ID0gdGhpcy52O1xuICAgICAgICB0aGlzLnYgPSB0O1xuICAgICAgICB0aGlzLkggPSB0cnVlO1xuICAgICAgICBpZiAoIXRoaXMuaGFuZGxlci5jb25maWcucmVhZG9ubHkgJiYgMCA9PT0gKDI1NiAmIGUpKSB0aGlzLksoZSk7XG4gICAgfVxuICAgIEsodCkge1xuICAgICAgICB2YXIgZTtcbiAgICAgICAgaWYgKHRoaXMuSCkge1xuICAgICAgICAgICAgdGhpcy5IID0gZmFsc2U7XG4gICAgICAgICAgICB0aGlzLm9bdGhpcy5rXSA9IG51bGwgIT09IChlID0gdGhpcy52KSAmJiB2b2lkIDAgIT09IGUgPyBlIDogdGhpcy5oYW5kbGVyLmNvbmZpZy5kZWZhdWx0O1xuICAgICAgICAgICAgaWYgKDAgPT09ICgyICYgdCkpIHRoaXMucXVldWUuYWRkKHRoaXMpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGhhbmRsZUV2ZW50KCkge1xuICAgICAgICB0aGlzLm92ID0gdGhpcy52O1xuICAgICAgICB0aGlzLnYgPSB0aGlzLm9bdGhpcy5rXTtcbiAgICAgICAgaWYgKHRoaXMub3YgIT09IHRoaXMudikge1xuICAgICAgICAgICAgdGhpcy5IID0gZmFsc2U7XG4gICAgICAgICAgICB0aGlzLnF1ZXVlLmFkZCh0aGlzKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBzdWJzY3JpYmUodCkge1xuICAgICAgICBpZiAodGhpcy5zdWJzLmFkZCh0KSAmJiAxID09PSB0aGlzLnN1YnMuY291bnQpIHtcbiAgICAgICAgICAgIHRoaXMuaGFuZGxlci5zdWJzY3JpYmUodGhpcy5vLCB0aGlzKTtcbiAgICAgICAgICAgIHRoaXMudiA9IHRoaXMub3YgPSB0aGlzLm9bdGhpcy5rXTtcbiAgICAgICAgfVxuICAgIH1cbiAgICB1bnN1YnNjcmliZSh0KSB7XG4gICAgICAgIGlmICh0aGlzLnN1YnMucmVtb3ZlKHQpICYmIDAgPT09IHRoaXMuc3Vicy5jb3VudCkgdGhpcy5oYW5kbGVyLmRpc3Bvc2UoKTtcbiAgICB9XG4gICAgZmx1c2goKSB7XG4gICAgICAgIHVyID0gdGhpcy5vdjtcbiAgICAgICAgdGhpcy5vdiA9IHRoaXMudjtcbiAgICAgICAgdGhpcy5zdWJzLm5vdGlmeSh0aGlzLnYsIHVyLCAwKTtcbiAgICB9XG59XG5cblAoVmFsdWVBdHRyaWJ1dGVPYnNlcnZlcik7XG5cbk8oVmFsdWVBdHRyaWJ1dGVPYnNlcnZlcik7XG5cbmxldCB1cjtcblxuY29uc3QgZnIgPSBcImh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmtcIjtcblxuY29uc3QgZHIgPSBcImh0dHA6Ly93d3cudzMub3JnL1hNTC8xOTk4L25hbWVzcGFjZVwiO1xuXG5jb25zdCBtciA9IFwiaHR0cDovL3d3dy53My5vcmcvMjAwMC94bWxucy9cIjtcblxuY29uc3QgdnIgPSBPYmplY3QuYXNzaWduKHd0KCksIHtcbiAgICBcInhsaW5rOmFjdHVhdGVcIjogWyBcImFjdHVhdGVcIiwgZnIgXSxcbiAgICBcInhsaW5rOmFyY3JvbGVcIjogWyBcImFyY3JvbGVcIiwgZnIgXSxcbiAgICBcInhsaW5rOmhyZWZcIjogWyBcImhyZWZcIiwgZnIgXSxcbiAgICBcInhsaW5rOnJvbGVcIjogWyBcInJvbGVcIiwgZnIgXSxcbiAgICBcInhsaW5rOnNob3dcIjogWyBcInNob3dcIiwgZnIgXSxcbiAgICBcInhsaW5rOnRpdGxlXCI6IFsgXCJ0aXRsZVwiLCBmciBdLFxuICAgIFwieGxpbms6dHlwZVwiOiBbIFwidHlwZVwiLCBmciBdLFxuICAgIFwieG1sOmxhbmdcIjogWyBcImxhbmdcIiwgZHIgXSxcbiAgICBcInhtbDpzcGFjZVwiOiBbIFwic3BhY2VcIiwgZHIgXSxcbiAgICB4bWxuczogWyBcInhtbG5zXCIsIG1yIF0sXG4gICAgXCJ4bWxuczp4bGlua1wiOiBbIFwieGxpbmtcIiwgbXIgXVxufSk7XG5cbmNvbnN0IHByID0gbmV3IFk7XG5cbnByLnR5cGUgPSAyIHwgNDtcblxuY2xhc3MgTm9kZU9ic2VydmVyQ29uZmlnIHtcbiAgICBjb25zdHJ1Y3Rvcih0KSB7XG4gICAgICAgIHZhciBlO1xuICAgICAgICB0aGlzLnR5cGUgPSBudWxsICE9PSAoZSA9IHQudHlwZSkgJiYgdm9pZCAwICE9PSBlID8gZSA6IFZhbHVlQXR0cmlidXRlT2JzZXJ2ZXI7XG4gICAgICAgIHRoaXMuZXZlbnRzID0gdC5ldmVudHM7XG4gICAgICAgIHRoaXMucmVhZG9ubHkgPSB0LnJlYWRvbmx5O1xuICAgICAgICB0aGlzLmRlZmF1bHQgPSB0LmRlZmF1bHQ7XG4gICAgfVxufVxuXG5jbGFzcyBOb2RlT2JzZXJ2ZXJMb2NhdG9yIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlLCBpLCBzKSB7XG4gICAgICAgIHRoaXMubG9jYXRvciA9IHQ7XG4gICAgICAgIHRoaXMucGxhdGZvcm0gPSBlO1xuICAgICAgICB0aGlzLmRpcnR5Q2hlY2tlciA9IGk7XG4gICAgICAgIHRoaXMuc3ZnQW5hbHl6ZXIgPSBzO1xuICAgICAgICB0aGlzLmFsbG93RGlydHlDaGVjayA9IHRydWU7XG4gICAgICAgIHRoaXMuamUgPSB3dCgpO1xuICAgICAgICB0aGlzLk5lID0gd3QoKTtcbiAgICAgICAgdGhpcy5XZSA9IHd0KCk7XG4gICAgICAgIHRoaXMuSGUgPSB3dCgpO1xuICAgICAgICBjb25zdCBuID0gWyBcImNoYW5nZVwiLCBcImlucHV0XCIgXTtcbiAgICAgICAgY29uc3QgciA9IHtcbiAgICAgICAgICAgIGV2ZW50czogbixcbiAgICAgICAgICAgIGRlZmF1bHQ6IFwiXCJcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy51c2VDb25maWcoe1xuICAgICAgICAgICAgSU5QVVQ6IHtcbiAgICAgICAgICAgICAgICB2YWx1ZTogcixcbiAgICAgICAgICAgICAgICB2YWx1ZUFzTnVtYmVyOiB7XG4gICAgICAgICAgICAgICAgICAgIGV2ZW50czogbixcbiAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDogMFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgY2hlY2tlZDoge1xuICAgICAgICAgICAgICAgICAgICB0eXBlOiBDaGVja2VkT2JzZXJ2ZXIsXG4gICAgICAgICAgICAgICAgICAgIGV2ZW50czogblxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgZmlsZXM6IHtcbiAgICAgICAgICAgICAgICAgICAgZXZlbnRzOiBuLFxuICAgICAgICAgICAgICAgICAgICByZWFkb25seTogdHJ1ZVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBTRUxFQ1Q6IHtcbiAgICAgICAgICAgICAgICB2YWx1ZToge1xuICAgICAgICAgICAgICAgICAgICB0eXBlOiBTZWxlY3RWYWx1ZU9ic2VydmVyLFxuICAgICAgICAgICAgICAgICAgICBldmVudHM6IFsgXCJjaGFuZ2VcIiBdLFxuICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OiBcIlwiXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIFRFWFRBUkVBOiB7XG4gICAgICAgICAgICAgICAgdmFsdWU6IHJcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIGNvbnN0IG8gPSB7XG4gICAgICAgICAgICBldmVudHM6IFsgXCJjaGFuZ2VcIiwgXCJpbnB1dFwiLCBcImJsdXJcIiwgXCJrZXl1cFwiLCBcInBhc3RlXCIgXSxcbiAgICAgICAgICAgIGRlZmF1bHQ6IFwiXCJcbiAgICAgICAgfTtcbiAgICAgICAgY29uc3QgbCA9IHtcbiAgICAgICAgICAgIGV2ZW50czogWyBcInNjcm9sbFwiIF0sXG4gICAgICAgICAgICBkZWZhdWx0OiAwXG4gICAgICAgIH07XG4gICAgICAgIHRoaXMudXNlQ29uZmlnR2xvYmFsKHtcbiAgICAgICAgICAgIHNjcm9sbFRvcDogbCxcbiAgICAgICAgICAgIHNjcm9sbExlZnQ6IGwsXG4gICAgICAgICAgICB0ZXh0Q29udGVudDogbyxcbiAgICAgICAgICAgIGlubmVySFRNTDogb1xuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5vdmVycmlkZUFjY2Vzc29yR2xvYmFsKFwiY3NzXCIsIFwic3R5bGVcIiwgXCJjbGFzc1wiKTtcbiAgICAgICAgdGhpcy5vdmVycmlkZUFjY2Vzc29yKHtcbiAgICAgICAgICAgIElOUFVUOiBbIFwidmFsdWVcIiwgXCJjaGVja2VkXCIsIFwibW9kZWxcIiBdLFxuICAgICAgICAgICAgU0VMRUNUOiBbIFwidmFsdWVcIiBdLFxuICAgICAgICAgICAgVEVYVEFSRUE6IFsgXCJ2YWx1ZVwiIF1cbiAgICAgICAgfSk7XG4gICAgfVxuICAgIHN0YXRpYyByZWdpc3Rlcih0KSB7XG4gICAgICAgIGMuYWxpYXNUbyhRLCBOb2RlT2JzZXJ2ZXJMb2NhdG9yKS5yZWdpc3Rlcih0KTtcbiAgICAgICAgYy5zaW5nbGV0b24oUSwgTm9kZU9ic2VydmVyTG9jYXRvcikucmVnaXN0ZXIodCk7XG4gICAgfVxuICAgIGhhbmRsZXModCwgZSkge1xuICAgICAgICByZXR1cm4gdCBpbnN0YW5jZW9mIHRoaXMucGxhdGZvcm0uTm9kZTtcbiAgICB9XG4gICAgdXNlQ29uZmlnKHQsIGUsIGkpIHtcbiAgICAgICAgdmFyIHMsIG47XG4gICAgICAgIGNvbnN0IHIgPSB0aGlzLmplO1xuICAgICAgICBsZXQgbztcbiAgICAgICAgaWYgKEF0KHQpKSB7XG4gICAgICAgICAgICBvID0gbnVsbCAhPT0gKHMgPSByW3RdKSAmJiB2b2lkIDAgIT09IHMgPyBzIDogclt0XSA9IHd0KCk7XG4gICAgICAgICAgICBpZiAobnVsbCA9PSBvW2VdKSBvW2VdID0gbmV3IE5vZGVPYnNlcnZlckNvbmZpZyhpKTsgZWxzZSB3cih0LCBlKTtcbiAgICAgICAgfSBlbHNlIGZvciAoY29uc3QgaSBpbiB0KSB7XG4gICAgICAgICAgICBvID0gbnVsbCAhPT0gKG4gPSByW2ldKSAmJiB2b2lkIDAgIT09IG4gPyBuIDogcltpXSA9IHd0KCk7XG4gICAgICAgICAgICBjb25zdCBzID0gdFtpXTtcbiAgICAgICAgICAgIGZvciAoZSBpbiBzKSBpZiAobnVsbCA9PSBvW2VdKSBvW2VdID0gbmV3IE5vZGVPYnNlcnZlckNvbmZpZyhzW2VdKTsgZWxzZSB3cihpLCBlKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICB1c2VDb25maWdHbG9iYWwodCwgZSkge1xuICAgICAgICBjb25zdCBpID0gdGhpcy5OZTtcbiAgICAgICAgaWYgKFwib2JqZWN0XCIgPT09IHR5cGVvZiB0KSBmb3IgKGNvbnN0IGUgaW4gdCkgaWYgKG51bGwgPT0gaVtlXSkgaVtlXSA9IG5ldyBOb2RlT2JzZXJ2ZXJDb25maWcodFtlXSk7IGVsc2Ugd3IoXCIqXCIsIGUpOyBlbHNlIGlmIChudWxsID09IGlbdF0pIGlbdF0gPSBuZXcgTm9kZU9ic2VydmVyQ29uZmlnKGUpOyBlbHNlIHdyKFwiKlwiLCB0KTtcbiAgICB9XG4gICAgZ2V0QWNjZXNzb3IodCwgZSwgaSkge1xuICAgICAgICB2YXIgcztcbiAgICAgICAgaWYgKGUgaW4gdGhpcy5IZSB8fCBlIGluIChudWxsICE9PSAocyA9IHRoaXMuV2VbdC50YWdOYW1lXSkgJiYgdm9pZCAwICE9PSBzID8gcyA6IEUpKSByZXR1cm4gdGhpcy5nZXRPYnNlcnZlcih0LCBlLCBpKTtcbiAgICAgICAgc3dpdGNoIChlKSB7XG4gICAgICAgICAgY2FzZSBcInNyY1wiOlxuICAgICAgICAgIGNhc2UgXCJocmVmXCI6XG4gICAgICAgICAgY2FzZSBcInJvbGVcIjpcbiAgICAgICAgICAgIHJldHVybiB0cjtcblxuICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgY29uc3QgaSA9IHZyW2VdO1xuICAgICAgICAgICAgICAgIGlmICh2b2lkIDAgIT09IGkpIHJldHVybiBBdHRyaWJ1dGVOU0FjY2Vzc29yLmZvck5zKGlbMV0pO1xuICAgICAgICAgICAgICAgIGlmICh5dCh0LCBlLCB0aGlzLnN2Z0FuYWx5emVyKSkgcmV0dXJuIHRyO1xuICAgICAgICAgICAgICAgIHJldHVybiBwcjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBvdmVycmlkZUFjY2Vzc29yKHQsIGUpIHtcbiAgICAgICAgdmFyIGksIHM7XG4gICAgICAgIHZhciBuLCByO1xuICAgICAgICBsZXQgbztcbiAgICAgICAgaWYgKEF0KHQpKSB7XG4gICAgICAgICAgICBvID0gbnVsbCAhPT0gKGkgPSAobiA9IHRoaXMuV2UpW3RdKSAmJiB2b2lkIDAgIT09IGkgPyBpIDogblt0XSA9IHd0KCk7XG4gICAgICAgICAgICBvW2VdID0gdHJ1ZTtcbiAgICAgICAgfSBlbHNlIGZvciAoY29uc3QgZSBpbiB0KSBmb3IgKGNvbnN0IGkgb2YgdFtlXSkge1xuICAgICAgICAgICAgbyA9IG51bGwgIT09IChzID0gKHIgPSB0aGlzLldlKVtlXSkgJiYgdm9pZCAwICE9PSBzID8gcyA6IHJbZV0gPSB3dCgpO1xuICAgICAgICAgICAgb1tpXSA9IHRydWU7XG4gICAgICAgIH1cbiAgICB9XG4gICAgb3ZlcnJpZGVBY2Nlc3Nvckdsb2JhbCguLi50KSB7XG4gICAgICAgIGZvciAoY29uc3QgZSBvZiB0KSB0aGlzLkhlW2VdID0gdHJ1ZTtcbiAgICB9XG4gICAgZ2V0T2JzZXJ2ZXIodCwgZSwgaSkge1xuICAgICAgICB2YXIgcywgbjtcbiAgICAgICAgc3dpdGNoIChlKSB7XG4gICAgICAgICAgY2FzZSBcInJvbGVcIjpcbiAgICAgICAgICAgIHJldHVybiB0cjtcblxuICAgICAgICAgIGNhc2UgXCJjbGFzc1wiOlxuICAgICAgICAgICAgcmV0dXJuIG5ldyBDbGFzc0F0dHJpYnV0ZUFjY2Vzc29yKHQpO1xuXG4gICAgICAgICAgY2FzZSBcImNzc1wiOlxuICAgICAgICAgIGNhc2UgXCJzdHlsZVwiOlxuICAgICAgICAgICAgcmV0dXJuIG5ldyBTdHlsZUF0dHJpYnV0ZUFjY2Vzc29yKHQpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHIgPSBudWxsICE9PSAobiA9IG51bGwgPT09IChzID0gdGhpcy5qZVt0LnRhZ05hbWVdKSB8fCB2b2lkIDAgPT09IHMgPyB2b2lkIDAgOiBzW2VdKSAmJiB2b2lkIDAgIT09IG4gPyBuIDogdGhpcy5OZVtlXTtcbiAgICAgICAgaWYgKG51bGwgIT0gcikgcmV0dXJuIG5ldyByLnR5cGUodCwgZSwgbmV3IEV2ZW50U3Vic2NyaWJlcihyKSwgaSwgdGhpcy5sb2NhdG9yKTtcbiAgICAgICAgY29uc3QgbyA9IHZyW2VdO1xuICAgICAgICBpZiAodm9pZCAwICE9PSBvKSByZXR1cm4gQXR0cmlidXRlTlNBY2Nlc3Nvci5mb3JOcyhvWzFdKTtcbiAgICAgICAgaWYgKHl0KHQsIGUsIHRoaXMuc3ZnQW5hbHl6ZXIpKSByZXR1cm4gdHI7XG4gICAgICAgIGlmIChlIGluIHQuY29uc3RydWN0b3IucHJvdG90eXBlKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5hbGxvd0RpcnR5Q2hlY2spIHJldHVybiB0aGlzLmRpcnR5Q2hlY2tlci5jcmVhdGVQcm9wZXJ0eSh0LCBlKTtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgQVVSMDY1Mjoke1N0cmluZyhlKX1gKTtcbiAgICAgICAgfSBlbHNlIHJldHVybiBuZXcgWih0LCBlKTtcbiAgICB9XG59XG5cbk5vZGVPYnNlcnZlckxvY2F0b3IuaW5qZWN0ID0gWyBCLCBLdCwgSiwgWXQgXTtcblxuZnVuY3Rpb24gZ3IodCwgZSkge1xuICAgIGlmICh0IGluc3RhbmNlb2YgQXJyYXkpIHJldHVybiBlLmdldEFycmF5T2JzZXJ2ZXIodCk7XG4gICAgaWYgKHQgaW5zdGFuY2VvZiBNYXApIHJldHVybiBlLmdldE1hcE9ic2VydmVyKHQpO1xuICAgIGlmICh0IGluc3RhbmNlb2YgU2V0KSByZXR1cm4gZS5nZXRTZXRPYnNlcnZlcih0KTtcbn1cblxuZnVuY3Rpb24gd3IodCwgZSkge1xuICAgIHRocm93IG5ldyBFcnJvcihgQVVSMDY1Mzoke1N0cmluZyhlKX1AJHt0fWApO1xufVxuXG5jbGFzcyBVcGRhdGVUcmlnZ2VyQmluZGluZ0JlaGF2aW9yIHtcbiAgICBjb25zdHJ1Y3Rvcih0KSB7XG4gICAgICAgIHRoaXMub0wgPSB0O1xuICAgIH1cbiAgICBiaW5kKHQsIGUsIGksIC4uLnMpIHtcbiAgICAgICAgaWYgKDAgPT09IHMubGVuZ3RoKSB0aHJvdyBuZXcgRXJyb3IoYEFVUjA4MDJgKTtcbiAgICAgICAgaWYgKGkubW9kZSAhPT0gRC50d29XYXkgJiYgaS5tb2RlICE9PSBELmZyb21WaWV3KSB0aHJvdyBuZXcgRXJyb3IoXCJBVVIwODAzXCIpO1xuICAgICAgICBjb25zdCBuID0gdGhpcy5vTC5nZXRPYnNlcnZlcihpLnRhcmdldCwgaS50YXJnZXRQcm9wZXJ0eSk7XG4gICAgICAgIGlmICghbi5oYW5kbGVyKSB0aHJvdyBuZXcgRXJyb3IoXCJBVVIwODA0XCIpO1xuICAgICAgICBpLnRhcmdldE9ic2VydmVyID0gbjtcbiAgICAgICAgY29uc3QgciA9IG4uaGFuZGxlcjtcbiAgICAgICAgbi5vcmlnaW5hbEhhbmRsZXIgPSByO1xuICAgICAgICBuLmhhbmRsZXIgPSBuZXcgRXZlbnRTdWJzY3JpYmVyKG5ldyBOb2RlT2JzZXJ2ZXJDb25maWcoe1xuICAgICAgICAgICAgZGVmYXVsdDogci5jb25maWcuZGVmYXVsdCxcbiAgICAgICAgICAgIGV2ZW50czogcyxcbiAgICAgICAgICAgIHJlYWRvbmx5OiByLmNvbmZpZy5yZWFkb25seVxuICAgICAgICB9KSk7XG4gICAgfVxuICAgIHVuYmluZCh0LCBlLCBpKSB7XG4gICAgICAgIGkudGFyZ2V0T2JzZXJ2ZXIuaGFuZGxlci5kaXNwb3NlKCk7XG4gICAgICAgIGkudGFyZ2V0T2JzZXJ2ZXIuaGFuZGxlciA9IGkudGFyZ2V0T2JzZXJ2ZXIub3JpZ2luYWxIYW5kbGVyO1xuICAgICAgICBpLnRhcmdldE9ic2VydmVyLm9yaWdpbmFsSGFuZGxlciA9IG51bGw7XG4gICAgfVxufVxuXG5VcGRhdGVUcmlnZ2VyQmluZGluZ0JlaGF2aW9yLmluamVjdCA9IFsgViBdO1xuXG5HKFwidXBkYXRlVHJpZ2dlclwiKShVcGRhdGVUcmlnZ2VyQmluZGluZ0JlaGF2aW9yKTtcblxuY2xhc3MgRm9jdXMge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUpIHtcbiAgICAgICAgdGhpcy56ZSA9IHQ7XG4gICAgICAgIHRoaXMucCA9IGU7XG4gICAgICAgIHRoaXMuR2UgPSBmYWxzZTtcbiAgICB9XG4gICAgYmluZGluZygpIHtcbiAgICAgICAgdGhpcy52YWx1ZUNoYW5nZWQoKTtcbiAgICB9XG4gICAgdmFsdWVDaGFuZ2VkKCkge1xuICAgICAgICBpZiAodGhpcy4kY29udHJvbGxlci5pc0FjdGl2ZSkgdGhpcy5YZSgpOyBlbHNlIHRoaXMuR2UgPSB0cnVlO1xuICAgIH1cbiAgICBhdHRhY2hlZCgpIHtcbiAgICAgICAgaWYgKHRoaXMuR2UpIHtcbiAgICAgICAgICAgIHRoaXMuR2UgPSBmYWxzZTtcbiAgICAgICAgICAgIHRoaXMuWGUoKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnplLmFkZEV2ZW50TGlzdGVuZXIoXCJmb2N1c1wiLCB0aGlzKTtcbiAgICAgICAgdGhpcy56ZS5hZGRFdmVudExpc3RlbmVyKFwiYmx1clwiLCB0aGlzKTtcbiAgICB9XG4gICAgYWZ0ZXJEZXRhY2hDaGlsZHJlbigpIHtcbiAgICAgICAgY29uc3QgdCA9IHRoaXMuemU7XG4gICAgICAgIHQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImZvY3VzXCIsIHRoaXMpO1xuICAgICAgICB0LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJibHVyXCIsIHRoaXMpO1xuICAgIH1cbiAgICBoYW5kbGVFdmVudCh0KSB7XG4gICAgICAgIGlmIChcImZvY3VzXCIgPT09IHQudHlwZSkgdGhpcy52YWx1ZSA9IHRydWU7IGVsc2UgaWYgKCF0aGlzLktlKSB0aGlzLnZhbHVlID0gZmFsc2U7XG4gICAgfVxuICAgIFhlKCkge1xuICAgICAgICBjb25zdCB0ID0gdGhpcy56ZTtcbiAgICAgICAgY29uc3QgZSA9IHRoaXMuS2U7XG4gICAgICAgIGNvbnN0IGkgPSB0aGlzLnZhbHVlO1xuICAgICAgICBpZiAoaSAmJiAhZSkgdC5mb2N1cygpOyBlbHNlIGlmICghaSAmJiBlKSB0LmJsdXIoKTtcbiAgICB9XG4gICAgZ2V0IEtlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy56ZSA9PT0gdGhpcy5wLmRvY3VtZW50LmFjdGl2ZUVsZW1lbnQ7XG4gICAgfVxufVxuXG5Gb2N1cy5pbmplY3QgPSBbIG5zLCBLdCBdO1xuXG5vdChbIFN0KHtcbiAgICBtb2RlOiBELnR3b1dheVxufSkgXSwgRm9jdXMucHJvdG90eXBlLCBcInZhbHVlXCIsIHZvaWQgMCk7XG5cblBlKFwiZm9jdXNcIikoRm9jdXMpO1xuXG5sZXQgYnIgPSBjbGFzcyBTaG93IHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlLCBpKSB7XG4gICAgICAgIHRoaXMuZWwgPSB0O1xuICAgICAgICB0aGlzLnAgPSBlO1xuICAgICAgICB0aGlzLlllID0gZmFsc2U7XG4gICAgICAgIHRoaXMuUWUgPSBudWxsO1xuICAgICAgICB0aGlzLiR2YWwgPSBcIlwiO1xuICAgICAgICB0aGlzLiRwcmlvID0gXCJcIjtcbiAgICAgICAgdGhpcy51cGRhdGUgPSAoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLlFlID0gbnVsbDtcbiAgICAgICAgICAgIGlmIChCb29sZWFuKHRoaXMudmFsdWUpICE9PSB0aGlzLlplKSBpZiAodGhpcy5aZSA9PT0gdGhpcy5KZSkge1xuICAgICAgICAgICAgICAgIHRoaXMuWmUgPSAhdGhpcy5KZTtcbiAgICAgICAgICAgICAgICB0aGlzLiR2YWwgPSB0aGlzLmVsLnN0eWxlLmdldFByb3BlcnR5VmFsdWUoXCJkaXNwbGF5XCIpO1xuICAgICAgICAgICAgICAgIHRoaXMuJHByaW8gPSB0aGlzLmVsLnN0eWxlLmdldFByb3BlcnR5UHJpb3JpdHkoXCJkaXNwbGF5XCIpO1xuICAgICAgICAgICAgICAgIHRoaXMuZWwuc3R5bGUuc2V0UHJvcGVydHkoXCJkaXNwbGF5XCIsIFwibm9uZVwiLCBcImltcG9ydGFudFwiKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5aZSA9IHRoaXMuSmU7XG4gICAgICAgICAgICAgICAgdGhpcy5lbC5zdHlsZS5zZXRQcm9wZXJ0eShcImRpc3BsYXlcIiwgdGhpcy4kdmFsLCB0aGlzLiRwcmlvKTtcbiAgICAgICAgICAgICAgICBpZiAoXCJcIiA9PT0gdGhpcy5lbC5nZXRBdHRyaWJ1dGUoXCJzdHlsZVwiKSkgdGhpcy5lbC5yZW1vdmVBdHRyaWJ1dGUoXCJzdHlsZVwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5aZSA9IHRoaXMuSmUgPSBcImhpZGVcIiAhPT0gaS5hbGlhcztcbiAgICB9XG4gICAgYmluZGluZygpIHtcbiAgICAgICAgdGhpcy5ZZSA9IHRydWU7XG4gICAgICAgIHRoaXMudXBkYXRlKCk7XG4gICAgfVxuICAgIGRldGFjaGluZygpIHtcbiAgICAgICAgdmFyIHQ7XG4gICAgICAgIHRoaXMuWWUgPSBmYWxzZTtcbiAgICAgICAgbnVsbCA9PT0gKHQgPSB0aGlzLlFlKSB8fCB2b2lkIDAgPT09IHQgPyB2b2lkIDAgOiB0LmNhbmNlbCgpO1xuICAgICAgICB0aGlzLlFlID0gbnVsbDtcbiAgICB9XG4gICAgdmFsdWVDaGFuZ2VkKCkge1xuICAgICAgICBpZiAodGhpcy5ZZSAmJiBudWxsID09PSB0aGlzLlFlKSB0aGlzLlFlID0gdGhpcy5wLmRvbVdyaXRlUXVldWUucXVldWVUYXNrKHRoaXMudXBkYXRlKTtcbiAgICB9XG59O1xuXG5vdChbIFN0IF0sIGJyLnByb3RvdHlwZSwgXCJ2YWx1ZVwiLCB2b2lkIDApO1xuXG5iciA9IG90KFsgbHQoMCwgbnMpLCBsdCgxLCBLdCksIGx0KDIsIGtzKSBdLCBicik7XG5cbnR0KFwiaGlkZVwiKShicik7XG5cblBlKFwic2hvd1wiKShicik7XG5cbmNsYXNzIFBvcnRhbCB7XG4gICAgY29uc3RydWN0b3IodCwgZSwgaSkge1xuICAgICAgICB0aGlzLmlkID0gdyhcImF1JGNvbXBvbmVudFwiKTtcbiAgICAgICAgdGhpcy5zdHJpY3QgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5wID0gaTtcbiAgICAgICAgdGhpcy50aSA9IGkuZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgICAgdGhpcy52aWV3ID0gdC5jcmVhdGUoKTtcbiAgICAgICAgY3ModGhpcy52aWV3Lm5vZGVzLCBlKTtcbiAgICB9XG4gICAgYXR0YWNoaW5nKHQsIGUsIGkpIHtcbiAgICAgICAgaWYgKG51bGwgPT0gdGhpcy5jYWxsYmFja0NvbnRleHQpIHRoaXMuY2FsbGJhY2tDb250ZXh0ID0gdGhpcy4kY29udHJvbGxlci5zY29wZS5iaW5kaW5nQ29udGV4dDtcbiAgICAgICAgY29uc3QgcyA9IHRoaXMudGkgPSB0aGlzLmVpKCk7XG4gICAgICAgIHRoaXMudmlldy5zZXRIb3N0KHMpO1xuICAgICAgICByZXR1cm4gdGhpcy5paSh0LCBzLCBpKTtcbiAgICB9XG4gICAgZGV0YWNoaW5nKHQsIGUsIGkpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc2kodCwgdGhpcy50aSwgaSk7XG4gICAgfVxuICAgIHRhcmdldENoYW5nZWQoKSB7XG4gICAgICAgIGNvbnN0IHskY29udHJvbGxlcjogdH0gPSB0aGlzO1xuICAgICAgICBpZiAoIXQuaXNBY3RpdmUpIHJldHVybjtcbiAgICAgICAgY29uc3QgZSA9IHRoaXMudGk7XG4gICAgICAgIGNvbnN0IGkgPSB0aGlzLnRpID0gdGhpcy5laSgpO1xuICAgICAgICBpZiAoZSA9PT0gaSkgcmV0dXJuO1xuICAgICAgICB0aGlzLnZpZXcuc2V0SG9zdChpKTtcbiAgICAgICAgY29uc3QgcyA9IEModGhpcy5zaShudWxsLCBpLCB0LmZsYWdzKSwgKCgpID0+IHRoaXMuaWkobnVsbCwgaSwgdC5mbGFncykpKTtcbiAgICAgICAgaWYgKHMgaW5zdGFuY2VvZiBQcm9taXNlKSBzLmNhdGNoKCh0ID0+IHtcbiAgICAgICAgICAgIHRocm93IHQ7XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgaWkodCwgZSwgaSkge1xuICAgICAgICBjb25zdCB7YWN0aXZhdGluZzogcywgY2FsbGJhY2tDb250ZXh0OiBuLCB2aWV3OiByfSA9IHRoaXM7XG4gICAgICAgIHIuc2V0SG9zdChlKTtcbiAgICAgICAgcmV0dXJuIEMobnVsbCA9PT0gcyB8fCB2b2lkIDAgPT09IHMgPyB2b2lkIDAgOiBzLmNhbGwobiwgZSwgciksICgoKSA9PiB0aGlzLm5pKHQsIGUsIGkpKSk7XG4gICAgfVxuICAgIG5pKHQsIGUsIGkpIHtcbiAgICAgICAgY29uc3QgeyRjb250cm9sbGVyOiBzLCB2aWV3OiBufSA9IHRoaXM7XG4gICAgICAgIGlmIChudWxsID09PSB0KSBuLm5vZGVzLmFwcGVuZFRvKGUpOyBlbHNlIHJldHVybiBDKG4uYWN0aXZhdGUobnVsbCAhPT0gdCAmJiB2b2lkIDAgIT09IHQgPyB0IDogbiwgcywgaSwgcy5zY29wZSksICgoKSA9PiB0aGlzLnJpKGUpKSk7XG4gICAgICAgIHJldHVybiB0aGlzLnJpKGUpO1xuICAgIH1cbiAgICByaSh0KSB7XG4gICAgICAgIGNvbnN0IHthY3RpdmF0ZWQ6IGUsIGNhbGxiYWNrQ29udGV4dDogaSwgdmlldzogc30gPSB0aGlzO1xuICAgICAgICByZXR1cm4gbnVsbCA9PT0gZSB8fCB2b2lkIDAgPT09IGUgPyB2b2lkIDAgOiBlLmNhbGwoaSwgdCwgcyk7XG4gICAgfVxuICAgIHNpKHQsIGUsIGkpIHtcbiAgICAgICAgY29uc3Qge2RlYWN0aXZhdGluZzogcywgY2FsbGJhY2tDb250ZXh0OiBuLCB2aWV3OiByfSA9IHRoaXM7XG4gICAgICAgIHJldHVybiBDKG51bGwgPT09IHMgfHwgdm9pZCAwID09PSBzID8gdm9pZCAwIDogcy5jYWxsKG4sIGUsIHIpLCAoKCkgPT4gdGhpcy5vaSh0LCBlLCBpKSkpO1xuICAgIH1cbiAgICBvaSh0LCBlLCBpKSB7XG4gICAgICAgIGNvbnN0IHskY29udHJvbGxlcjogcywgdmlldzogbn0gPSB0aGlzO1xuICAgICAgICBpZiAobnVsbCA9PT0gdCkgbi5ub2Rlcy5yZW1vdmUoKTsgZWxzZSByZXR1cm4gQyhuLmRlYWN0aXZhdGUodCwgcywgaSksICgoKSA9PiB0aGlzLmxpKGUpKSk7XG4gICAgICAgIHJldHVybiB0aGlzLmxpKGUpO1xuICAgIH1cbiAgICBsaSh0KSB7XG4gICAgICAgIGNvbnN0IHtkZWFjdGl2YXRlZDogZSwgY2FsbGJhY2tDb250ZXh0OiBpLCB2aWV3OiBzfSA9IHRoaXM7XG4gICAgICAgIHJldHVybiBudWxsID09PSBlIHx8IHZvaWQgMCA9PT0gZSA/IHZvaWQgMCA6IGUuY2FsbChpLCB0LCBzKTtcbiAgICB9XG4gICAgZWkoKSB7XG4gICAgICAgIGNvbnN0IHQgPSB0aGlzLnA7XG4gICAgICAgIGNvbnN0IGUgPSB0LmRvY3VtZW50O1xuICAgICAgICBsZXQgaSA9IHRoaXMudGFyZ2V0O1xuICAgICAgICBsZXQgcyA9IHRoaXMucmVuZGVyQ29udGV4dDtcbiAgICAgICAgaWYgKFwiXCIgPT09IGkpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnN0cmljdCkgdGhyb3cgbmV3IEVycm9yKFwiQVVSMDgxMVwiKTtcbiAgICAgICAgICAgIHJldHVybiBlLmJvZHk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKEF0KGkpKSB7XG4gICAgICAgICAgICBsZXQgbiA9IGU7XG4gICAgICAgICAgICBpZiAoQXQocykpIHMgPSBlLnF1ZXJ5U2VsZWN0b3Iocyk7XG4gICAgICAgICAgICBpZiAocyBpbnN0YW5jZW9mIHQuTm9kZSkgbiA9IHM7XG4gICAgICAgICAgICBpID0gbi5xdWVyeVNlbGVjdG9yKGkpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChpIGluc3RhbmNlb2YgdC5Ob2RlKSByZXR1cm4gaTtcbiAgICAgICAgaWYgKG51bGwgPT0gaSkge1xuICAgICAgICAgICAgaWYgKHRoaXMuc3RyaWN0KSB0aHJvdyBuZXcgRXJyb3IoXCJBVVIwODEyXCIpO1xuICAgICAgICAgICAgcmV0dXJuIGUuYm9keTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gaTtcbiAgICB9XG4gICAgZGlzcG9zZSgpIHtcbiAgICAgICAgdGhpcy52aWV3LmRpc3Bvc2UoKTtcbiAgICAgICAgdGhpcy52aWV3ID0gdm9pZCAwO1xuICAgICAgICB0aGlzLmNhbGxiYWNrQ29udGV4dCA9IG51bGw7XG4gICAgfVxuICAgIGFjY2VwdCh0KSB7XG4gICAgICAgIHZhciBlO1xuICAgICAgICBpZiAodHJ1ZSA9PT0gKG51bGwgPT09IChlID0gdGhpcy52aWV3KSB8fCB2b2lkIDAgPT09IGUgPyB2b2lkIDAgOiBlLmFjY2VwdCh0KSkpIHJldHVybiB0cnVlO1xuICAgIH1cbn1cblxuUG9ydGFsLmluamVjdCA9IFsgQWksIG9zLCBLdCBdO1xuXG5vdChbIFN0KHtcbiAgICBwcmltYXJ5OiB0cnVlXG59KSBdLCBQb3J0YWwucHJvdG90eXBlLCBcInRhcmdldFwiLCB2b2lkIDApO1xuXG5vdChbIFN0KHtcbiAgICBjYWxsYmFjazogXCJ0YXJnZXRDaGFuZ2VkXCJcbn0pIF0sIFBvcnRhbC5wcm90b3R5cGUsIFwicmVuZGVyQ29udGV4dFwiLCB2b2lkIDApO1xuXG5vdChbIFN0KCkgXSwgUG9ydGFsLnByb3RvdHlwZSwgXCJzdHJpY3RcIiwgdm9pZCAwKTtcblxub3QoWyBTdCgpIF0sIFBvcnRhbC5wcm90b3R5cGUsIFwiZGVhY3RpdmF0aW5nXCIsIHZvaWQgMCk7XG5cbm90KFsgU3QoKSBdLCBQb3J0YWwucHJvdG90eXBlLCBcImFjdGl2YXRpbmdcIiwgdm9pZCAwKTtcblxub3QoWyBTdCgpIF0sIFBvcnRhbC5wcm90b3R5cGUsIFwiZGVhY3RpdmF0ZWRcIiwgdm9pZCAwKTtcblxub3QoWyBTdCgpIF0sIFBvcnRhbC5wcm90b3R5cGUsIFwiYWN0aXZhdGVkXCIsIHZvaWQgMCk7XG5cbm90KFsgU3QoKSBdLCBQb3J0YWwucHJvdG90eXBlLCBcImNhbGxiYWNrQ29udGV4dFwiLCB2b2lkIDApO1xuXG5PZShcInBvcnRhbFwiKShQb3J0YWwpO1xuXG5jbGFzcyBGbGFnc1RlbXBsYXRlQ29udHJvbGxlciB7XG4gICAgY29uc3RydWN0b3IodCwgZSwgaSkge1xuICAgICAgICB0aGlzLmZzID0gaTtcbiAgICAgICAgdGhpcy5pZCA9IHcoXCJhdSRjb21wb25lbnRcIik7XG4gICAgICAgIHRoaXMudmlldyA9IHQuY3JlYXRlKCkuc2V0TG9jYXRpb24oZSk7XG4gICAgfVxuICAgIGF0dGFjaGluZyh0LCBlLCBpKSB7XG4gICAgICAgIGNvbnN0IHskY29udHJvbGxlcjogc30gPSB0aGlzO1xuICAgICAgICByZXR1cm4gdGhpcy52aWV3LmFjdGl2YXRlKHQsIHMsIGkgfCB0aGlzLmZzLCBzLnNjb3BlKTtcbiAgICB9XG4gICAgZGV0YWNoaW5nKHQsIGUsIGkpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudmlldy5kZWFjdGl2YXRlKHQsIHRoaXMuJGNvbnRyb2xsZXIsIGkpO1xuICAgIH1cbiAgICBkaXNwb3NlKCkge1xuICAgICAgICB0aGlzLnZpZXcuZGlzcG9zZSgpO1xuICAgICAgICB0aGlzLnZpZXcgPSB2b2lkIDA7XG4gICAgfVxuICAgIGFjY2VwdCh0KSB7XG4gICAgICAgIHZhciBlO1xuICAgICAgICBpZiAodHJ1ZSA9PT0gKG51bGwgPT09IChlID0gdGhpcy52aWV3KSB8fCB2b2lkIDAgPT09IGUgPyB2b2lkIDAgOiBlLmFjY2VwdCh0KSkpIHJldHVybiB0cnVlO1xuICAgIH1cbn1cblxuY2xhc3MgRnJlcXVlbnRNdXRhdGlvbnMgZXh0ZW5kcyBGbGFnc1RlbXBsYXRlQ29udHJvbGxlciB7XG4gICAgY29uc3RydWN0b3IodCwgZSkge1xuICAgICAgICBzdXBlcih0LCBlLCA1MTIpO1xuICAgIH1cbn1cblxuRnJlcXVlbnRNdXRhdGlvbnMuaW5qZWN0ID0gWyBBaSwgb3MgXTtcblxuY2xhc3MgT2JzZXJ2ZVNoYWxsb3cgZXh0ZW5kcyBGbGFnc1RlbXBsYXRlQ29udHJvbGxlciB7XG4gICAgY29uc3RydWN0b3IodCwgZSkge1xuICAgICAgICBzdXBlcih0LCBlLCAxMjgpO1xuICAgIH1cbn1cblxuT2JzZXJ2ZVNoYWxsb3cuaW5qZWN0ID0gWyBBaSwgb3MgXTtcblxuT2UoXCJmcmVxdWVudC1tdXRhdGlvbnNcIikoRnJlcXVlbnRNdXRhdGlvbnMpO1xuXG5PZShcIm9ic2VydmUtc2hhbGxvd1wiKShPYnNlcnZlU2hhbGxvdyk7XG5cbmNsYXNzIElmIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlLCBpKSB7XG4gICAgICAgIHRoaXMuaWZGYWN0b3J5ID0gdDtcbiAgICAgICAgdGhpcy5sb2NhdGlvbiA9IGU7XG4gICAgICAgIHRoaXMud29yayA9IGk7XG4gICAgICAgIHRoaXMuaWQgPSB3KFwiYXUkY29tcG9uZW50XCIpO1xuICAgICAgICB0aGlzLmVsc2VGYWN0b3J5ID0gdm9pZCAwO1xuICAgICAgICB0aGlzLmVsc2VWaWV3ID0gdm9pZCAwO1xuICAgICAgICB0aGlzLmlmVmlldyA9IHZvaWQgMDtcbiAgICAgICAgdGhpcy52aWV3ID0gdm9pZCAwO1xuICAgICAgICB0aGlzLnZhbHVlID0gZmFsc2U7XG4gICAgICAgIHRoaXMuY2FjaGUgPSB0cnVlO1xuICAgICAgICB0aGlzLnBlbmRpbmcgPSB2b2lkIDA7XG4gICAgICAgIHRoaXMuaGkgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5haSA9IDA7XG4gICAgfVxuICAgIGF0dGFjaGluZyh0LCBlLCBpKSB7XG4gICAgICAgIGxldCBzO1xuICAgICAgICBjb25zdCBuID0gdGhpcy4kY29udHJvbGxlcjtcbiAgICAgICAgY29uc3QgciA9IHRoaXMuYWkrKztcbiAgICAgICAgY29uc3QgbyA9ICgpID0+ICF0aGlzLmhpICYmIHRoaXMuYWkgPT09IHIgKyAxO1xuICAgICAgICByZXR1cm4gQyh0aGlzLnBlbmRpbmcsICgoKSA9PiB7XG4gICAgICAgICAgICB2YXIgZTtcbiAgICAgICAgICAgIGlmICghbygpKSByZXR1cm47XG4gICAgICAgICAgICB0aGlzLnBlbmRpbmcgPSB2b2lkIDA7XG4gICAgICAgICAgICBpZiAodGhpcy52YWx1ZSkgcyA9IHRoaXMudmlldyA9IHRoaXMuaWZWaWV3ID0gdGhpcy5jYWNoZSAmJiBudWxsICE9IHRoaXMuaWZWaWV3ID8gdGhpcy5pZlZpZXcgOiB0aGlzLmlmRmFjdG9yeS5jcmVhdGUoKTsgZWxzZSBzID0gdGhpcy52aWV3ID0gdGhpcy5lbHNlVmlldyA9IHRoaXMuY2FjaGUgJiYgbnVsbCAhPSB0aGlzLmVsc2VWaWV3ID8gdGhpcy5lbHNlVmlldyA6IG51bGwgPT09IChlID0gdGhpcy5lbHNlRmFjdG9yeSkgfHwgdm9pZCAwID09PSBlID8gdm9pZCAwIDogZS5jcmVhdGUoKTtcbiAgICAgICAgICAgIGlmIChudWxsID09IHMpIHJldHVybjtcbiAgICAgICAgICAgIHMuc2V0TG9jYXRpb24odGhpcy5sb2NhdGlvbik7XG4gICAgICAgICAgICB0aGlzLnBlbmRpbmcgPSBDKHMuYWN0aXZhdGUodCwgbiwgaSwgbi5zY29wZSksICgoKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKG8oKSkgdGhpcy5wZW5kaW5nID0gdm9pZCAwO1xuICAgICAgICAgICAgfSkpO1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIGRldGFjaGluZyh0LCBlLCBpKSB7XG4gICAgICAgIHRoaXMuaGkgPSB0cnVlO1xuICAgICAgICByZXR1cm4gQyh0aGlzLnBlbmRpbmcsICgoKSA9PiB7XG4gICAgICAgICAgICB2YXIgZTtcbiAgICAgICAgICAgIHRoaXMuaGkgPSBmYWxzZTtcbiAgICAgICAgICAgIHRoaXMucGVuZGluZyA9IHZvaWQgMDtcbiAgICAgICAgICAgIHZvaWQgKG51bGwgPT09IChlID0gdGhpcy52aWV3KSB8fCB2b2lkIDAgPT09IGUgPyB2b2lkIDAgOiBlLmRlYWN0aXZhdGUodCwgdGhpcy4kY29udHJvbGxlciwgaSkpO1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIHZhbHVlQ2hhbmdlZCh0LCBlLCBpKSB7XG4gICAgICAgIGlmICghdGhpcy4kY29udHJvbGxlci5pc0FjdGl2ZSkgcmV0dXJuO1xuICAgICAgICB0ID0gISF0O1xuICAgICAgICBlID0gISFlO1xuICAgICAgICBpZiAodCA9PT0gZSkgcmV0dXJuO1xuICAgICAgICB0aGlzLndvcmsuc3RhcnQoKTtcbiAgICAgICAgY29uc3QgcyA9IHRoaXMudmlldztcbiAgICAgICAgY29uc3QgbiA9IHRoaXMuJGNvbnRyb2xsZXI7XG4gICAgICAgIGNvbnN0IHIgPSB0aGlzLmFpKys7XG4gICAgICAgIGNvbnN0IG8gPSAoKSA9PiAhdGhpcy5oaSAmJiB0aGlzLmFpID09PSByICsgMTtcbiAgICAgICAgbGV0IGw7XG4gICAgICAgIHJldHVybiBDKEModGhpcy5wZW5kaW5nLCAoKCkgPT4gdGhpcy5wZW5kaW5nID0gQyhudWxsID09PSBzIHx8IHZvaWQgMCA9PT0gcyA/IHZvaWQgMCA6IHMuZGVhY3RpdmF0ZShzLCBuLCBpKSwgKCgpID0+IHtcbiAgICAgICAgICAgIHZhciBlO1xuICAgICAgICAgICAgaWYgKCFvKCkpIHJldHVybjtcbiAgICAgICAgICAgIGlmICh0KSBsID0gdGhpcy52aWV3ID0gdGhpcy5pZlZpZXcgPSB0aGlzLmNhY2hlICYmIG51bGwgIT0gdGhpcy5pZlZpZXcgPyB0aGlzLmlmVmlldyA6IHRoaXMuaWZGYWN0b3J5LmNyZWF0ZSgpOyBlbHNlIGwgPSB0aGlzLnZpZXcgPSB0aGlzLmVsc2VWaWV3ID0gdGhpcy5jYWNoZSAmJiBudWxsICE9IHRoaXMuZWxzZVZpZXcgPyB0aGlzLmVsc2VWaWV3IDogbnVsbCA9PT0gKGUgPSB0aGlzLmVsc2VGYWN0b3J5KSB8fCB2b2lkIDAgPT09IGUgPyB2b2lkIDAgOiBlLmNyZWF0ZSgpO1xuICAgICAgICAgICAgaWYgKG51bGwgPT0gbCkgcmV0dXJuO1xuICAgICAgICAgICAgbC5zZXRMb2NhdGlvbih0aGlzLmxvY2F0aW9uKTtcbiAgICAgICAgICAgIHJldHVybiBDKGwuYWN0aXZhdGUobCwgbiwgaSwgbi5zY29wZSksICgoKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKG8oKSkgdGhpcy5wZW5kaW5nID0gdm9pZCAwO1xuICAgICAgICAgICAgfSkpO1xuICAgICAgICB9KSkpKSwgKCgpID0+IHRoaXMud29yay5maW5pc2goKSkpO1xuICAgIH1cbiAgICBkaXNwb3NlKCkge1xuICAgICAgICB2YXIgdCwgZTtcbiAgICAgICAgbnVsbCA9PT0gKHQgPSB0aGlzLmlmVmlldykgfHwgdm9pZCAwID09PSB0ID8gdm9pZCAwIDogdC5kaXNwb3NlKCk7XG4gICAgICAgIG51bGwgPT09IChlID0gdGhpcy5lbHNlVmlldykgfHwgdm9pZCAwID09PSBlID8gdm9pZCAwIDogZS5kaXNwb3NlKCk7XG4gICAgICAgIHRoaXMuaWZWaWV3ID0gdGhpcy5lbHNlVmlldyA9IHRoaXMudmlldyA9IHZvaWQgMDtcbiAgICB9XG4gICAgYWNjZXB0KHQpIHtcbiAgICAgICAgdmFyIGU7XG4gICAgICAgIGlmICh0cnVlID09PSAobnVsbCA9PT0gKGUgPSB0aGlzLnZpZXcpIHx8IHZvaWQgMCA9PT0gZSA/IHZvaWQgMCA6IGUuYWNjZXB0KHQpKSkgcmV0dXJuIHRydWU7XG4gICAgfVxufVxuXG5JZi5pbmplY3QgPSBbIEFpLCBvcywgZXMgXTtcblxub3QoWyBTdCBdLCBJZi5wcm90b3R5cGUsIFwidmFsdWVcIiwgdm9pZCAwKTtcblxub3QoWyBTdCh7XG4gICAgc2V0OiB0ID0+IFwiXCIgPT09IHQgfHwgISF0ICYmIFwiZmFsc2VcIiAhPT0gdFxufSkgXSwgSWYucHJvdG90eXBlLCBcImNhY2hlXCIsIHZvaWQgMCk7XG5cbk9lKFwiaWZcIikoSWYpO1xuXG5jbGFzcyBFbHNlIHtcbiAgICBjb25zdHJ1Y3Rvcih0KSB7XG4gICAgICAgIHRoaXMuZmFjdG9yeSA9IHQ7XG4gICAgICAgIHRoaXMuaWQgPSB3KFwiYXUkY29tcG9uZW50XCIpO1xuICAgIH1cbiAgICBsaW5rKHQsIGUsIGksIHMpIHtcbiAgICAgICAgY29uc3QgbiA9IHQuY2hpbGRyZW47XG4gICAgICAgIGNvbnN0IHIgPSBuW24ubGVuZ3RoIC0gMV07XG4gICAgICAgIGlmIChyIGluc3RhbmNlb2YgSWYpIHIuZWxzZUZhY3RvcnkgPSB0aGlzLmZhY3Rvcnk7IGVsc2UgaWYgKHIudmlld01vZGVsIGluc3RhbmNlb2YgSWYpIHIudmlld01vZGVsLmVsc2VGYWN0b3J5ID0gdGhpcy5mYWN0b3J5OyBlbHNlIHRocm93IG5ldyBFcnJvcihcIkFVUjA4MTBcIik7XG4gICAgfVxufVxuXG5FbHNlLmluamVjdCA9IFsgQWkgXTtcblxuT2Uoe1xuICAgIG5hbWU6IFwiZWxzZVwiXG59KShFbHNlKTtcblxuZnVuY3Rpb24geHIodCkge1xuICAgIHQuZGlzcG9zZSgpO1xufVxuXG5jb25zdCB5ciA9IFsgMzg5NjIsIDM2OTEzIF07XG5cbmNsYXNzIFJlcGVhdCB7XG4gICAgY29uc3RydWN0b3IodCwgZSwgaSkge1xuICAgICAgICB0aGlzLmwgPSB0O1xuICAgICAgICB0aGlzLnVpID0gZTtcbiAgICAgICAgdGhpcy5mID0gaTtcbiAgICAgICAgdGhpcy5pZCA9IHcoXCJhdSRjb21wb25lbnRcIik7XG4gICAgICAgIHRoaXMudmlld3MgPSBbXTtcbiAgICAgICAgdGhpcy5rZXkgPSB2b2lkIDA7XG4gICAgICAgIHRoaXMuZmkgPSB2b2lkIDA7XG4gICAgICAgIHRoaXMuZGkgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5taSA9IGZhbHNlO1xuICAgICAgICB0aGlzLnZpID0gbnVsbDtcbiAgICAgICAgdGhpcy5waSA9IHZvaWQgMDtcbiAgICAgICAgdGhpcy5naSA9IGZhbHNlO1xuICAgIH1cbiAgICBiaW5kaW5nKHQsIGUsIGkpIHtcbiAgICAgICAgY29uc3QgcyA9IHRoaXMudWkuYmluZGluZ3M7XG4gICAgICAgIGNvbnN0IG4gPSBzLmxlbmd0aDtcbiAgICAgICAgbGV0IHI7XG4gICAgICAgIGxldCBvO1xuICAgICAgICBsZXQgbCA9IDA7XG4gICAgICAgIGZvciAoO24gPiBsOyArK2wpIHtcbiAgICAgICAgICAgIHIgPSBzW2xdO1xuICAgICAgICAgICAgaWYgKHIudGFyZ2V0ID09PSB0aGlzICYmIFwiaXRlbXNcIiA9PT0gci50YXJnZXRQcm9wZXJ0eSkge1xuICAgICAgICAgICAgICAgIG8gPSB0aGlzLmZvck9mID0gci5zb3VyY2VFeHByZXNzaW9uO1xuICAgICAgICAgICAgICAgIHRoaXMud2kgPSByO1xuICAgICAgICAgICAgICAgIGxldCB0ID0gby5pdGVyYWJsZTtcbiAgICAgICAgICAgICAgICB3aGlsZSAobnVsbCAhPSB0ICYmIHlyLmluY2x1ZGVzKHQuJGtpbmQpKSB7XG4gICAgICAgICAgICAgICAgICAgIHQgPSB0LmV4cHJlc3Npb247XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZGkgPSB0cnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLnZpID0gdDtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB0aGlzLmJpKGkpO1xuICAgICAgICBjb25zdCBoID0gby5kZWNsYXJhdGlvbjtcbiAgICAgICAgaWYgKCEodGhpcy5naSA9IDkwMTM3ID09PSBoLiRraW5kIHx8IDEwNjUyMSA9PT0gaC4ka2luZCkpIHRoaXMubG9jYWwgPSBoLmV2YWx1YXRlKGksIHRoaXMuJGNvbnRyb2xsZXIuc2NvcGUsIHIubG9jYXRvciwgbnVsbCk7XG4gICAgfVxuICAgIGF0dGFjaGluZyh0LCBlLCBpKSB7XG4gICAgICAgIHRoaXMueGkoaSk7XG4gICAgICAgIHJldHVybiB0aGlzLnlpKHQsIGkpO1xuICAgIH1cbiAgICBkZXRhY2hpbmcodCwgZSwgaSkge1xuICAgICAgICB0aGlzLmJpKGkpO1xuICAgICAgICByZXR1cm4gdGhpcy5raSh0LCBpKTtcbiAgICB9XG4gICAgaXRlbXNDaGFuZ2VkKHQpIHtcbiAgICAgICAgY29uc3QgeyRjb250cm9sbGVyOiBlfSA9IHRoaXM7XG4gICAgICAgIGlmICghZS5pc0FjdGl2ZSkgcmV0dXJuO1xuICAgICAgICB0IHw9IGUuZmxhZ3M7XG4gICAgICAgIHRoaXMuYmkodCk7XG4gICAgICAgIHRoaXMueGkodCk7XG4gICAgICAgIGNvbnN0IGkgPSBDKHRoaXMua2kobnVsbCwgdCksICgoKSA9PiB0aGlzLnlpKG51bGwsIHQpKSk7XG4gICAgICAgIGlmIChpIGluc3RhbmNlb2YgUHJvbWlzZSkgaS5jYXRjaCgodCA9PiB7XG4gICAgICAgICAgICB0aHJvdyB0O1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIGhhbmRsZUNvbGxlY3Rpb25DaGFuZ2UodCwgZSkge1xuICAgICAgICBjb25zdCB7JGNvbnRyb2xsZXI6IGl9ID0gdGhpcztcbiAgICAgICAgaWYgKCFpLmlzQWN0aXZlKSByZXR1cm47XG4gICAgICAgIGlmICh0aGlzLmRpKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5taSkgcmV0dXJuO1xuICAgICAgICAgICAgdGhpcy5taSA9IHRydWU7XG4gICAgICAgICAgICB0aGlzLml0ZW1zID0gdGhpcy5mb3JPZi5pdGVyYWJsZS5ldmFsdWF0ZShlLCBpLnNjb3BlLCB0aGlzLndpLmxvY2F0b3IsIG51bGwpO1xuICAgICAgICAgICAgdGhpcy5taSA9IGZhbHNlO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGUgfD0gaS5mbGFncztcbiAgICAgICAgdGhpcy54aShlKTtcbiAgICAgICAgaWYgKHZvaWQgMCA9PT0gdCkge1xuICAgICAgICAgICAgY29uc3QgdCA9IEModGhpcy5raShudWxsLCBlKSwgKCgpID0+IHRoaXMueWkobnVsbCwgZSkpKTtcbiAgICAgICAgICAgIGlmICh0IGluc3RhbmNlb2YgUHJvbWlzZSkgdC5jYXRjaCgodCA9PiB7XG4gICAgICAgICAgICAgICAgdGhyb3cgdDtcbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNvbnN0IGkgPSB0aGlzLnZpZXdzLmxlbmd0aDtcbiAgICAgICAgICAgIGV0KHQpO1xuICAgICAgICAgICAgaWYgKHQuZGVsZXRlZEl0ZW1zLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICB0LmRlbGV0ZWRJdGVtcy5zb3J0KEkpO1xuICAgICAgICAgICAgICAgIGNvbnN0IHMgPSBDKHRoaXMuQ2kodCwgZSksICgoKSA9PiB0aGlzLkFpKGksIHQsIGUpKSk7XG4gICAgICAgICAgICAgICAgaWYgKHMgaW5zdGFuY2VvZiBQcm9taXNlKSBzLmNhdGNoKCh0ID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgdDtcbiAgICAgICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICB9IGVsc2UgdGhpcy5BaShpLCB0LCBlKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBiaSh0KSB7XG4gICAgICAgIHZhciBlO1xuICAgICAgICBjb25zdCBpID0gdGhpcy4kY29udHJvbGxlci5zY29wZTtcbiAgICAgICAgbGV0IHMgPSB0aGlzLlNpO1xuICAgICAgICBsZXQgbiA9IHRoaXMuZGk7XG4gICAgICAgIGlmIChuKSB7XG4gICAgICAgICAgICBzID0gdGhpcy5TaSA9IG51bGwgIT09IChlID0gdGhpcy52aS5ldmFsdWF0ZSh0LCBpLCB0aGlzLndpLmxvY2F0b3IsIG51bGwpKSAmJiB2b2lkIDAgIT09IGUgPyBlIDogbnVsbDtcbiAgICAgICAgICAgIG4gPSB0aGlzLmRpID0gIU9iamVjdC5pcyh0aGlzLml0ZW1zLCBzKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCByID0gdGhpcy5maTtcbiAgICAgICAgaWYgKDQgJiB0KSB7XG4gICAgICAgICAgICBpZiAodm9pZCAwICE9PSByKSByLnVuc3Vic2NyaWJlKHRoaXMpO1xuICAgICAgICB9IGVsc2UgaWYgKHRoaXMuJGNvbnRyb2xsZXIuaXNBY3RpdmUpIHtcbiAgICAgICAgICAgIGNvbnN0IHQgPSB0aGlzLmZpID0gaXQobiA/IHMgOiB0aGlzLml0ZW1zKTtcbiAgICAgICAgICAgIGlmIChyICE9PSB0ICYmIHIpIHIudW5zdWJzY3JpYmUodGhpcyk7XG4gICAgICAgICAgICBpZiAodCkgdC5zdWJzY3JpYmUodGhpcyk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgeGkodCkge1xuICAgICAgICBjb25zdCBlID0gdGhpcy5pdGVtcztcbiAgICAgICAgaWYgKGUgaW5zdGFuY2VvZiBBcnJheSkge1xuICAgICAgICAgICAgdGhpcy5waSA9IGU7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgaSA9IHRoaXMuZm9yT2Y7XG4gICAgICAgIGlmICh2b2lkIDAgPT09IGkpIHJldHVybjtcbiAgICAgICAgY29uc3QgcyA9IFtdO1xuICAgICAgICB0aGlzLmZvck9mLml0ZXJhdGUodCwgZSwgKCh0LCBlLCBpKSA9PiB7XG4gICAgICAgICAgICBzW2VdID0gaTtcbiAgICAgICAgfSkpO1xuICAgICAgICB0aGlzLnBpID0gcztcbiAgICB9XG4gICAgeWkodCwgZSkge1xuICAgICAgICBsZXQgaTtcbiAgICAgICAgbGV0IHM7XG4gICAgICAgIGxldCBuO1xuICAgICAgICBsZXQgcjtcbiAgICAgICAgY29uc3QgeyRjb250cm9sbGVyOiBvLCBmOiBsLCBsb2NhbDogaCwgbDogYSwgaXRlbXM6IGN9ID0gdGhpcztcbiAgICAgICAgY29uc3QgdSA9IG8uc2NvcGU7XG4gICAgICAgIGNvbnN0IGYgPSB0aGlzLmZvck9mO1xuICAgICAgICBjb25zdCBkID0gZi5jb3VudChlLCBjKTtcbiAgICAgICAgY29uc3QgbSA9IHRoaXMudmlld3MgPSBBcnJheShkKTtcbiAgICAgICAgZi5pdGVyYXRlKGUsIGMsICgoYywgdiwgcCkgPT4ge1xuICAgICAgICAgICAgbiA9IG1bdl0gPSBsLmNyZWF0ZSgpLnNldExvY2F0aW9uKGEpO1xuICAgICAgICAgICAgbi5ub2Rlcy51bmxpbmsoKTtcbiAgICAgICAgICAgIGlmICh0aGlzLmdpKSBmLmRlY2xhcmF0aW9uLmFzc2lnbihlLCByID0gVS5mcm9tUGFyZW50KHUsIHN0LmNyZWF0ZSgpKSwgdGhpcy53aS5sb2NhdG9yLCBwKTsgZWxzZSByID0gVS5mcm9tUGFyZW50KHUsIHN0LmNyZWF0ZShoLCBwKSk7XG4gICAgICAgICAgICBScihyLm92ZXJyaWRlQ29udGV4dCwgdiwgZCk7XG4gICAgICAgICAgICBzID0gbi5hY3RpdmF0ZShudWxsICE9PSB0ICYmIHZvaWQgMCAhPT0gdCA/IHQgOiBuLCBvLCBlLCByKTtcbiAgICAgICAgICAgIGlmIChzIGluc3RhbmNlb2YgUHJvbWlzZSkgKG51bGwgIT09IGkgJiYgdm9pZCAwICE9PSBpID8gaSA6IGkgPSBbXSkucHVzaChzKTtcbiAgICAgICAgfSkpO1xuICAgICAgICBpZiAodm9pZCAwICE9PSBpKSByZXR1cm4gMSA9PT0gaS5sZW5ndGggPyBpWzBdIDogUHJvbWlzZS5hbGwoaSk7XG4gICAgfVxuICAgIGtpKHQsIGUpIHtcbiAgICAgICAgbGV0IGk7XG4gICAgICAgIGxldCBzO1xuICAgICAgICBsZXQgbjtcbiAgICAgICAgbGV0IHIgPSAwO1xuICAgICAgICBjb25zdCB7dmlld3M6IG8sICRjb250cm9sbGVyOiBsfSA9IHRoaXM7XG4gICAgICAgIGNvbnN0IGggPSBvLmxlbmd0aDtcbiAgICAgICAgZm9yICg7aCA+IHI7ICsrcikge1xuICAgICAgICAgICAgbiA9IG9bcl07XG4gICAgICAgICAgICBuLnJlbGVhc2UoKTtcbiAgICAgICAgICAgIHMgPSBuLmRlYWN0aXZhdGUobnVsbCAhPT0gdCAmJiB2b2lkIDAgIT09IHQgPyB0IDogbiwgbCwgZSk7XG4gICAgICAgICAgICBpZiAocyBpbnN0YW5jZW9mIFByb21pc2UpIChudWxsICE9PSBpICYmIHZvaWQgMCAhPT0gaSA/IGkgOiBpID0gW10pLnB1c2gocyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHZvaWQgMCAhPT0gaSkgcmV0dXJuIDEgPT09IGkubGVuZ3RoID8gaVswXSA6IFByb21pc2UuYWxsKGkpO1xuICAgIH1cbiAgICBDaSh0LCBlKSB7XG4gICAgICAgIGxldCBpO1xuICAgICAgICBsZXQgcztcbiAgICAgICAgbGV0IG47XG4gICAgICAgIGNvbnN0IHskY29udHJvbGxlcjogciwgdmlld3M6IG99ID0gdGhpcztcbiAgICAgICAgY29uc3QgbCA9IHQuZGVsZXRlZEl0ZW1zO1xuICAgICAgICBjb25zdCBoID0gbC5sZW5ndGg7XG4gICAgICAgIGxldCBhID0gMDtcbiAgICAgICAgZm9yICg7aCA+IGE7ICsrYSkge1xuICAgICAgICAgICAgbiA9IG9bbFthXV07XG4gICAgICAgICAgICBuLnJlbGVhc2UoKTtcbiAgICAgICAgICAgIHMgPSBuLmRlYWN0aXZhdGUobiwgciwgZSk7XG4gICAgICAgICAgICBpZiAocyBpbnN0YW5jZW9mIFByb21pc2UpIChudWxsICE9PSBpICYmIHZvaWQgMCAhPT0gaSA/IGkgOiBpID0gW10pLnB1c2gocyk7XG4gICAgICAgIH1cbiAgICAgICAgYSA9IDA7XG4gICAgICAgIGxldCBjID0gMDtcbiAgICAgICAgZm9yICg7aCA+IGE7ICsrYSkge1xuICAgICAgICAgICAgYyA9IGxbYV0gLSBhO1xuICAgICAgICAgICAgby5zcGxpY2UoYywgMSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHZvaWQgMCAhPT0gaSkgcmV0dXJuIDEgPT09IGkubGVuZ3RoID8gaVswXSA6IFByb21pc2UuYWxsKGkpO1xuICAgIH1cbiAgICBBaSh0LCBlLCBpKSB7XG4gICAgICAgIHZhciBzO1xuICAgICAgICBsZXQgbjtcbiAgICAgICAgbGV0IHI7XG4gICAgICAgIGxldCBvO1xuICAgICAgICBsZXQgbDtcbiAgICAgICAgbGV0IGggPSAwO1xuICAgICAgICBjb25zdCB7JGNvbnRyb2xsZXI6IGEsIGY6IGMsIGxvY2FsOiB1LCBwaTogZiwgbDogZCwgdmlld3M6IG19ID0gdGhpcztcbiAgICAgICAgY29uc3QgdiA9IGUubGVuZ3RoO1xuICAgICAgICBmb3IgKDt2ID4gaDsgKytoKSBpZiAoLTIgPT09IGVbaF0pIHtcbiAgICAgICAgICAgIG8gPSBjLmNyZWF0ZSgpO1xuICAgICAgICAgICAgbS5zcGxpY2UoaCwgMCwgbyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG0ubGVuZ3RoICE9PSB2KSB0aHJvdyBuZXcgRXJyb3IoYEFVUjA4MTQ6JHttLmxlbmd0aH0hPSR7dn1gKTtcbiAgICAgICAgY29uc3QgcCA9IGEuc2NvcGU7XG4gICAgICAgIGNvbnN0IGcgPSBlLmxlbmd0aDtcbiAgICAgICAgbnQobSwgZSk7XG4gICAgICAgIGNvbnN0IHcgPSBTcihlKTtcbiAgICAgICAgY29uc3QgYiA9IHcubGVuZ3RoO1xuICAgICAgICBsZXQgeDtcbiAgICAgICAgbGV0IHkgPSBiIC0gMTtcbiAgICAgICAgaCA9IGcgLSAxO1xuICAgICAgICBmb3IgKDtoID49IDA7IC0taCkge1xuICAgICAgICAgICAgbyA9IG1baF07XG4gICAgICAgICAgICB4ID0gbVtoICsgMV07XG4gICAgICAgICAgICBvLm5vZGVzLmxpbmsobnVsbCAhPT0gKHMgPSBudWxsID09PSB4IHx8IHZvaWQgMCA9PT0geCA/IHZvaWQgMCA6IHgubm9kZXMpICYmIHZvaWQgMCAhPT0gcyA/IHMgOiBkKTtcbiAgICAgICAgICAgIGlmICgtMiA9PT0gZVtoXSkge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLmdpKSB0aGlzLmZvck9mLmRlY2xhcmF0aW9uLmFzc2lnbihpLCBsID0gVS5mcm9tUGFyZW50KHAsIHN0LmNyZWF0ZSgpKSwgdGhpcy53aS5sb2NhdG9yLCBmW2hdKTsgZWxzZSBsID0gVS5mcm9tUGFyZW50KHAsIHN0LmNyZWF0ZSh1LCBmW2hdKSk7XG4gICAgICAgICAgICAgICAgUnIobC5vdmVycmlkZUNvbnRleHQsIGgsIGcpO1xuICAgICAgICAgICAgICAgIG8uc2V0TG9jYXRpb24oZCk7XG4gICAgICAgICAgICAgICAgciA9IG8uYWN0aXZhdGUobywgYSwgaSwgbCk7XG4gICAgICAgICAgICAgICAgaWYgKHIgaW5zdGFuY2VvZiBQcm9taXNlKSAobnVsbCAhPT0gbiAmJiB2b2lkIDAgIT09IG4gPyBuIDogbiA9IFtdKS5wdXNoKHIpO1xuICAgICAgICAgICAgfSBlbHNlIGlmICh5IDwgMCB8fCAxID09PSBiIHx8IGggIT09IHdbeV0pIHtcbiAgICAgICAgICAgICAgICBScihvLnNjb3BlLm92ZXJyaWRlQ29udGV4dCwgaCwgZyk7XG4gICAgICAgICAgICAgICAgby5ub2Rlcy5pbnNlcnRCZWZvcmUoby5sb2NhdGlvbik7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGlmICh0ICE9PSBnKSBScihvLnNjb3BlLm92ZXJyaWRlQ29udGV4dCwgaCwgZyk7XG4gICAgICAgICAgICAgICAgLS15O1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmICh2b2lkIDAgIT09IG4pIHJldHVybiAxID09PSBuLmxlbmd0aCA/IG5bMF0gOiBQcm9taXNlLmFsbChuKTtcbiAgICB9XG4gICAgZGlzcG9zZSgpIHtcbiAgICAgICAgdGhpcy52aWV3cy5mb3JFYWNoKHhyKTtcbiAgICAgICAgdGhpcy52aWV3cyA9IHZvaWQgMDtcbiAgICB9XG4gICAgYWNjZXB0KHQpIHtcbiAgICAgICAgY29uc3Qge3ZpZXdzOiBlfSA9IHRoaXM7XG4gICAgICAgIGlmICh2b2lkIDAgIT09IGUpIGZvciAobGV0IGkgPSAwLCBzID0gZS5sZW5ndGg7IGkgPCBzOyArK2kpIGlmICh0cnVlID09PSBlW2ldLmFjY2VwdCh0KSkgcmV0dXJuIHRydWU7XG4gICAgfVxufVxuXG5SZXBlYXQuaW5qZWN0ID0gWyBvcywgWGksIEFpIF07XG5cbm90KFsgU3QgXSwgUmVwZWF0LnByb3RvdHlwZSwgXCJpdGVtc1wiLCB2b2lkIDApO1xuXG5PZShcInJlcGVhdFwiKShSZXBlYXQpO1xuXG5sZXQga3IgPSAxNjtcblxubGV0IENyID0gbmV3IEludDMyQXJyYXkoa3IpO1xuXG5sZXQgQXIgPSBuZXcgSW50MzJBcnJheShrcik7XG5cbmZ1bmN0aW9uIFNyKHQpIHtcbiAgICBjb25zdCBlID0gdC5sZW5ndGg7XG4gICAgaWYgKGUgPiBrcikge1xuICAgICAgICBrciA9IGU7XG4gICAgICAgIENyID0gbmV3IEludDMyQXJyYXkoZSk7XG4gICAgICAgIEFyID0gbmV3IEludDMyQXJyYXkoZSk7XG4gICAgfVxuICAgIGxldCBpID0gMDtcbiAgICBsZXQgcyA9IDA7XG4gICAgbGV0IG4gPSAwO1xuICAgIGxldCByID0gMDtcbiAgICBsZXQgbyA9IDA7XG4gICAgbGV0IGwgPSAwO1xuICAgIGxldCBoID0gMDtcbiAgICBsZXQgYSA9IDA7XG4gICAgZm9yICg7ciA8IGU7IHIrKykge1xuICAgICAgICBzID0gdFtyXTtcbiAgICAgICAgaWYgKC0yICE9PSBzKSB7XG4gICAgICAgICAgICBvID0gQ3JbaV07XG4gICAgICAgICAgICBuID0gdFtvXTtcbiAgICAgICAgICAgIGlmICgtMiAhPT0gbiAmJiBuIDwgcykge1xuICAgICAgICAgICAgICAgIEFyW3JdID0gbztcbiAgICAgICAgICAgICAgICBDclsrK2ldID0gcjtcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGwgPSAwO1xuICAgICAgICAgICAgaCA9IGk7XG4gICAgICAgICAgICB3aGlsZSAobCA8IGgpIHtcbiAgICAgICAgICAgICAgICBhID0gbCArIGggPj4gMTtcbiAgICAgICAgICAgICAgICBuID0gdFtDclthXV07XG4gICAgICAgICAgICAgICAgaWYgKC0yICE9PSBuICYmIG4gPCBzKSBsID0gYSArIDE7IGVsc2UgaCA9IGE7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBuID0gdFtDcltsXV07XG4gICAgICAgICAgICBpZiAocyA8IG4gfHwgLTIgPT09IG4pIHtcbiAgICAgICAgICAgICAgICBpZiAobCA+IDApIEFyW3JdID0gQ3JbbCAtIDFdO1xuICAgICAgICAgICAgICAgIENyW2xdID0gcjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICByID0gKytpO1xuICAgIGNvbnN0IGMgPSBuZXcgSW50MzJBcnJheShyKTtcbiAgICBzID0gQ3JbaSAtIDFdO1xuICAgIHdoaWxlIChpLS0gPiAwKSB7XG4gICAgICAgIGNbaV0gPSBzO1xuICAgICAgICBzID0gQXJbc107XG4gICAgfVxuICAgIHdoaWxlIChyLS0gPiAwKSBDcltyXSA9IDA7XG4gICAgcmV0dXJuIGM7XG59XG5cbmZ1bmN0aW9uIFJyKHQsIGUsIGkpIHtcbiAgICBjb25zdCBzID0gMCA9PT0gZTtcbiAgICBjb25zdCBuID0gZSA9PT0gaSAtIDE7XG4gICAgY29uc3QgciA9IGUgJSAyID09PSAwO1xuICAgIHQuJGluZGV4ID0gZTtcbiAgICB0LiRmaXJzdCA9IHM7XG4gICAgdC4kbGFzdCA9IG47XG4gICAgdC4kbWlkZGxlID0gIXMgJiYgIW47XG4gICAgdC4kZXZlbiA9IHI7XG4gICAgdC4kb2RkID0gIXI7XG4gICAgdC4kbGVuZ3RoID0gaTtcbn1cblxuY2xhc3MgV2l0aCB7XG4gICAgY29uc3RydWN0b3IodCwgZSkge1xuICAgICAgICB0aGlzLmlkID0gdyhcImF1JGNvbXBvbmVudFwiKTtcbiAgICAgICAgdGhpcy5pZCA9IHcoXCJhdSRjb21wb25lbnRcIik7XG4gICAgICAgIHRoaXMudmlldyA9IHQuY3JlYXRlKCkuc2V0TG9jYXRpb24oZSk7XG4gICAgfVxuICAgIHZhbHVlQ2hhbmdlZCh0LCBlLCBpKSB7XG4gICAgICAgIGNvbnN0IHMgPSB0aGlzLiRjb250cm9sbGVyO1xuICAgICAgICBjb25zdCBuID0gdGhpcy52aWV3LmJpbmRpbmdzO1xuICAgICAgICBsZXQgcjtcbiAgICAgICAgbGV0IG8gPSAwLCBsID0gMDtcbiAgICAgICAgaWYgKHMuaXNBY3RpdmUgJiYgbnVsbCAhPSBuKSB7XG4gICAgICAgICAgICByID0gVS5mcm9tUGFyZW50KHMuc2NvcGUsIHZvaWQgMCA9PT0gdCA/IHt9IDogdCk7XG4gICAgICAgICAgICBmb3IgKGwgPSBuLmxlbmd0aDsgbCA+IG87ICsrbykgbltvXS4kYmluZCgyLCByKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBhdHRhY2hpbmcodCwgZSwgaSkge1xuICAgICAgICBjb25zdCB7JGNvbnRyb2xsZXI6IHMsIHZhbHVlOiBufSA9IHRoaXM7XG4gICAgICAgIGNvbnN0IHIgPSBVLmZyb21QYXJlbnQocy5zY29wZSwgdm9pZCAwID09PSBuID8ge30gOiBuKTtcbiAgICAgICAgcmV0dXJuIHRoaXMudmlldy5hY3RpdmF0ZSh0LCBzLCBpLCByKTtcbiAgICB9XG4gICAgZGV0YWNoaW5nKHQsIGUsIGkpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudmlldy5kZWFjdGl2YXRlKHQsIHRoaXMuJGNvbnRyb2xsZXIsIGkpO1xuICAgIH1cbiAgICBkaXNwb3NlKCkge1xuICAgICAgICB0aGlzLnZpZXcuZGlzcG9zZSgpO1xuICAgICAgICB0aGlzLnZpZXcgPSB2b2lkIDA7XG4gICAgfVxuICAgIGFjY2VwdCh0KSB7XG4gICAgICAgIHZhciBlO1xuICAgICAgICBpZiAodHJ1ZSA9PT0gKG51bGwgPT09IChlID0gdGhpcy52aWV3KSB8fCB2b2lkIDAgPT09IGUgPyB2b2lkIDAgOiBlLmFjY2VwdCh0KSkpIHJldHVybiB0cnVlO1xuICAgIH1cbn1cblxuV2l0aC5pbmplY3QgPSBbIEFpLCBvcyBdO1xuXG5vdChbIFN0IF0sIFdpdGgucHJvdG90eXBlLCBcInZhbHVlXCIsIHZvaWQgMCk7XG5cbk9lKFwid2l0aFwiKShXaXRoKTtcblxubGV0IEVyID0gY2xhc3MgU3dpdGNoIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlKSB7XG4gICAgICAgIHRoaXMuZiA9IHQ7XG4gICAgICAgIHRoaXMubCA9IGU7XG4gICAgICAgIHRoaXMuaWQgPSB3KFwiYXUkY29tcG9uZW50XCIpO1xuICAgICAgICB0aGlzLmNhc2VzID0gW107XG4gICAgICAgIHRoaXMuYWN0aXZlQ2FzZXMgPSBbXTtcbiAgICAgICAgdGhpcy5wcm9taXNlID0gdm9pZCAwO1xuICAgIH1cbiAgICBsaW5rKHQsIGUsIGksIHMpIHtcbiAgICAgICAgdGhpcy52aWV3ID0gdGhpcy5mLmNyZWF0ZSh0aGlzLiRjb250cm9sbGVyKS5zZXRMb2NhdGlvbih0aGlzLmwpO1xuICAgIH1cbiAgICBhdHRhY2hpbmcodCwgZSwgaSkge1xuICAgICAgICBjb25zdCBzID0gdGhpcy52aWV3O1xuICAgICAgICBjb25zdCBuID0gdGhpcy4kY29udHJvbGxlcjtcbiAgICAgICAgdGhpcy5xdWV1ZSgoKCkgPT4gcy5hY3RpdmF0ZSh0LCBuLCBpLCBuLnNjb3BlKSkpO1xuICAgICAgICB0aGlzLnF1ZXVlKCgoKSA9PiB0aGlzLnN3YXAodCwgaSwgdGhpcy52YWx1ZSkpKTtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJvbWlzZTtcbiAgICB9XG4gICAgZGV0YWNoaW5nKHQsIGUsIGkpIHtcbiAgICAgICAgdGhpcy5xdWV1ZSgoKCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgZSA9IHRoaXMudmlldztcbiAgICAgICAgICAgIHJldHVybiBlLmRlYWN0aXZhdGUodCwgdGhpcy4kY29udHJvbGxlciwgaSk7XG4gICAgICAgIH0pKTtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJvbWlzZTtcbiAgICB9XG4gICAgZGlzcG9zZSgpIHtcbiAgICAgICAgdmFyIHQ7XG4gICAgICAgIG51bGwgPT09ICh0ID0gdGhpcy52aWV3KSB8fCB2b2lkIDAgPT09IHQgPyB2b2lkIDAgOiB0LmRpc3Bvc2UoKTtcbiAgICAgICAgdGhpcy52aWV3ID0gdm9pZCAwO1xuICAgIH1cbiAgICB2YWx1ZUNoYW5nZWQodCwgZSwgaSkge1xuICAgICAgICBpZiAoIXRoaXMuJGNvbnRyb2xsZXIuaXNBY3RpdmUpIHJldHVybjtcbiAgICAgICAgdGhpcy5xdWV1ZSgoKCkgPT4gdGhpcy5zd2FwKG51bGwsIGksIHRoaXMudmFsdWUpKSk7XG4gICAgfVxuICAgIGNhc2VDaGFuZ2VkKHQsIGUpIHtcbiAgICAgICAgdGhpcy5xdWV1ZSgoKCkgPT4gdGhpcy5SaSh0LCBlKSkpO1xuICAgIH1cbiAgICBSaSh0LCBlKSB7XG4gICAgICAgIGNvbnN0IGkgPSB0LmlzTWF0Y2godGhpcy52YWx1ZSwgZSk7XG4gICAgICAgIGNvbnN0IHMgPSB0aGlzLmFjdGl2ZUNhc2VzO1xuICAgICAgICBjb25zdCBuID0gcy5sZW5ndGg7XG4gICAgICAgIGlmICghaSkge1xuICAgICAgICAgICAgaWYgKG4gPiAwICYmIHNbMF0uaWQgPT09IHQuaWQpIHJldHVybiB0aGlzLkVpKG51bGwsIGUpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmIChuID4gMCAmJiBzWzBdLmlkIDwgdC5pZCkgcmV0dXJuO1xuICAgICAgICBjb25zdCByID0gW107XG4gICAgICAgIGxldCBvID0gdC5mYWxsVGhyb3VnaDtcbiAgICAgICAgaWYgKCFvKSByLnB1c2godCk7IGVsc2Uge1xuICAgICAgICAgICAgY29uc3QgZSA9IHRoaXMuY2FzZXM7XG4gICAgICAgICAgICBjb25zdCBpID0gZS5pbmRleE9mKHQpO1xuICAgICAgICAgICAgZm9yIChsZXQgdCA9IGksIHMgPSBlLmxlbmd0aDsgdCA8IHMgJiYgbzsgdCsrKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgaSA9IGVbdF07XG4gICAgICAgICAgICAgICAgci5wdXNoKGkpO1xuICAgICAgICAgICAgICAgIG8gPSBpLmZhbGxUaHJvdWdoO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBDKHRoaXMuRWkobnVsbCwgZSwgciksICgoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLmFjdGl2ZUNhc2VzID0gcjtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLkJpKG51bGwsIGUpO1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIHN3YXAodCwgZSwgaSkge1xuICAgICAgICBjb25zdCBzID0gW107XG4gICAgICAgIGxldCBuID0gZmFsc2U7XG4gICAgICAgIGZvciAoY29uc3QgdCBvZiB0aGlzLmNhc2VzKSB7XG4gICAgICAgICAgICBpZiAobiB8fCB0LmlzTWF0Y2goaSwgZSkpIHtcbiAgICAgICAgICAgICAgICBzLnB1c2godCk7XG4gICAgICAgICAgICAgICAgbiA9IHQuZmFsbFRocm91Z2g7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAocy5sZW5ndGggPiAwICYmICFuKSBicmVhaztcbiAgICAgICAgfVxuICAgICAgICBjb25zdCByID0gdGhpcy5kZWZhdWx0Q2FzZTtcbiAgICAgICAgaWYgKDAgPT09IHMubGVuZ3RoICYmIHZvaWQgMCAhPT0gcikgcy5wdXNoKHIpO1xuICAgICAgICByZXR1cm4gQyh0aGlzLmFjdGl2ZUNhc2VzLmxlbmd0aCA+IDAgPyB0aGlzLkVpKHQsIGUsIHMpIDogdm9pZCAwLCAoKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5hY3RpdmVDYXNlcyA9IHM7XG4gICAgICAgICAgICBpZiAoMCA9PT0gcy5sZW5ndGgpIHJldHVybjtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLkJpKHQsIGUpO1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIEJpKHQsIGUpIHtcbiAgICAgICAgY29uc3QgaSA9IHRoaXMuJGNvbnRyb2xsZXI7XG4gICAgICAgIGlmICghaS5pc0FjdGl2ZSkgcmV0dXJuO1xuICAgICAgICBjb25zdCBzID0gdGhpcy5hY3RpdmVDYXNlcztcbiAgICAgICAgY29uc3QgbiA9IHMubGVuZ3RoO1xuICAgICAgICBpZiAoMCA9PT0gbikgcmV0dXJuO1xuICAgICAgICBjb25zdCByID0gaS5zY29wZTtcbiAgICAgICAgaWYgKDEgPT09IG4pIHJldHVybiBzWzBdLmFjdGl2YXRlKHQsIGUsIHIpO1xuICAgICAgICByZXR1cm4gQSguLi5zLm1hcCgoaSA9PiBpLmFjdGl2YXRlKHQsIGUsIHIpKSkpO1xuICAgIH1cbiAgICBFaSh0LCBlLCBpID0gW10pIHtcbiAgICAgICAgY29uc3QgcyA9IHRoaXMuYWN0aXZlQ2FzZXM7XG4gICAgICAgIGNvbnN0IG4gPSBzLmxlbmd0aDtcbiAgICAgICAgaWYgKDAgPT09IG4pIHJldHVybjtcbiAgICAgICAgaWYgKDEgPT09IG4pIHtcbiAgICAgICAgICAgIGNvbnN0IG4gPSBzWzBdO1xuICAgICAgICAgICAgaWYgKCFpLmluY2x1ZGVzKG4pKSB7XG4gICAgICAgICAgICAgICAgcy5sZW5ndGggPSAwO1xuICAgICAgICAgICAgICAgIHJldHVybiBuLmRlYWN0aXZhdGUodCwgZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIEMoQSguLi5zLnJlZHVjZSgoKHMsIG4pID0+IHtcbiAgICAgICAgICAgIGlmICghaS5pbmNsdWRlcyhuKSkgcy5wdXNoKG4uZGVhY3RpdmF0ZSh0LCBlKSk7XG4gICAgICAgICAgICByZXR1cm4gcztcbiAgICAgICAgfSksIFtdKSksICgoKSA9PiB7XG4gICAgICAgICAgICBzLmxlbmd0aCA9IDA7XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgcXVldWUodCkge1xuICAgICAgICBjb25zdCBlID0gdGhpcy5wcm9taXNlO1xuICAgICAgICBsZXQgaTtcbiAgICAgICAgaSA9IHRoaXMucHJvbWlzZSA9IEMoQyhlLCB0KSwgKCgpID0+IHtcbiAgICAgICAgICAgIGlmICh0aGlzLnByb21pc2UgPT09IGkpIHRoaXMucHJvbWlzZSA9IHZvaWQgMDtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICBhY2NlcHQodCkge1xuICAgICAgICBpZiAodHJ1ZSA9PT0gdGhpcy4kY29udHJvbGxlci5hY2NlcHQodCkpIHJldHVybiB0cnVlO1xuICAgICAgICBpZiAodGhpcy5hY3RpdmVDYXNlcy5zb21lKChlID0+IGUuYWNjZXB0KHQpKSkpIHJldHVybiB0cnVlO1xuICAgIH1cbn07XG5cbm90KFsgU3QgXSwgRXIucHJvdG90eXBlLCBcInZhbHVlXCIsIHZvaWQgMCk7XG5cbkVyID0gb3QoWyBPZShcInN3aXRjaFwiKSwgbHQoMCwgQWkpLCBsdCgxLCBvcykgXSwgRXIpO1xuXG5sZXQgQnIgPSBjbGFzcyBDYXNlIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlLCBpLCBzKSB7XG4gICAgICAgIHRoaXMuSWkgPSBlO1xuICAgICAgICB0aGlzLmlkID0gdyhcImF1JGNvbXBvbmVudFwiKTtcbiAgICAgICAgdGhpcy5mYWxsVGhyb3VnaCA9IGZhbHNlO1xuICAgICAgICB0aGlzLlRpID0gcy5jb25maWcubGV2ZWwgPD0gMTtcbiAgICAgICAgdGhpcy5GdCA9IHMuc2NvcGVUbyhgJHt0aGlzLmNvbnN0cnVjdG9yLm5hbWV9LSMke3RoaXMuaWR9YCk7XG4gICAgICAgIHRoaXMudmlldyA9IHQuY3JlYXRlKCkuc2V0TG9jYXRpb24oaSk7XG4gICAgfVxuICAgIGxpbmsodCwgZSwgaSwgcykge1xuICAgICAgICBjb25zdCBuID0gdC5wYXJlbnQ7XG4gICAgICAgIGNvbnN0IHIgPSBudWxsID09PSBuIHx8IHZvaWQgMCA9PT0gbiA/IHZvaWQgMCA6IG4udmlld01vZGVsO1xuICAgICAgICBpZiAociBpbnN0YW5jZW9mIEVyKSB7XG4gICAgICAgICAgICB0aGlzLiRzd2l0Y2ggPSByO1xuICAgICAgICAgICAgdGhpcy5saW5rVG9Td2l0Y2gocik7XG4gICAgICAgIH0gZWxzZSB0aHJvdyBuZXcgRXJyb3IoXCJBVVIwODE1XCIpO1xuICAgIH1cbiAgICBkZXRhY2hpbmcodCwgZSwgaSkge1xuICAgICAgICByZXR1cm4gdGhpcy5kZWFjdGl2YXRlKHQsIGkpO1xuICAgIH1cbiAgICBpc01hdGNoKHQsIGUpIHtcbiAgICAgICAgdGhpcy5GdC5kZWJ1ZyhcImlzTWF0Y2goKVwiKTtcbiAgICAgICAgY29uc3QgaSA9IHRoaXMudmFsdWU7XG4gICAgICAgIGlmIChBcnJheS5pc0FycmF5KGkpKSB7XG4gICAgICAgICAgICBpZiAodm9pZCAwID09PSB0aGlzLmZpKSB0aGlzLmZpID0gdGhpcy5EaShlLCBpKTtcbiAgICAgICAgICAgIHJldHVybiBpLmluY2x1ZGVzKHQpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBpID09PSB0O1xuICAgIH1cbiAgICB2YWx1ZUNoYW5nZWQodCwgZSwgaSkge1xuICAgICAgICB2YXIgcztcbiAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkodCkpIHtcbiAgICAgICAgICAgIG51bGwgPT09IChzID0gdGhpcy5maSkgfHwgdm9pZCAwID09PSBzID8gdm9pZCAwIDogcy51bnN1YnNjcmliZSh0aGlzKTtcbiAgICAgICAgICAgIHRoaXMuZmkgPSB0aGlzLkRpKGksIHQpO1xuICAgICAgICB9IGVsc2UgaWYgKHZvaWQgMCAhPT0gdGhpcy5maSkgdGhpcy5maS51bnN1YnNjcmliZSh0aGlzKTtcbiAgICAgICAgdGhpcy4kc3dpdGNoLmNhc2VDaGFuZ2VkKHRoaXMsIGkpO1xuICAgIH1cbiAgICBoYW5kbGVDb2xsZWN0aW9uQ2hhbmdlKHQsIGUpIHtcbiAgICAgICAgdGhpcy4kc3dpdGNoLmNhc2VDaGFuZ2VkKHRoaXMsIGUpO1xuICAgIH1cbiAgICBhY3RpdmF0ZSh0LCBlLCBpKSB7XG4gICAgICAgIGNvbnN0IHMgPSB0aGlzLnZpZXc7XG4gICAgICAgIGlmIChzLmlzQWN0aXZlKSByZXR1cm47XG4gICAgICAgIHJldHVybiBzLmFjdGl2YXRlKG51bGwgIT09IHQgJiYgdm9pZCAwICE9PSB0ID8gdCA6IHMsIHRoaXMuJGNvbnRyb2xsZXIsIGUsIGkpO1xuICAgIH1cbiAgICBkZWFjdGl2YXRlKHQsIGUpIHtcbiAgICAgICAgY29uc3QgaSA9IHRoaXMudmlldztcbiAgICAgICAgaWYgKCFpLmlzQWN0aXZlKSByZXR1cm47XG4gICAgICAgIHJldHVybiBpLmRlYWN0aXZhdGUobnVsbCAhPT0gdCAmJiB2b2lkIDAgIT09IHQgPyB0IDogaSwgdGhpcy4kY29udHJvbGxlciwgZSk7XG4gICAgfVxuICAgIGRpc3Bvc2UoKSB7XG4gICAgICAgIHZhciB0LCBlO1xuICAgICAgICBudWxsID09PSAodCA9IHRoaXMuZmkpIHx8IHZvaWQgMCA9PT0gdCA/IHZvaWQgMCA6IHQudW5zdWJzY3JpYmUodGhpcyk7XG4gICAgICAgIG51bGwgPT09IChlID0gdGhpcy52aWV3KSB8fCB2b2lkIDAgPT09IGUgPyB2b2lkIDAgOiBlLmRpc3Bvc2UoKTtcbiAgICAgICAgdGhpcy52aWV3ID0gdm9pZCAwO1xuICAgIH1cbiAgICBsaW5rVG9Td2l0Y2godCkge1xuICAgICAgICB0LmNhc2VzLnB1c2godGhpcyk7XG4gICAgfVxuICAgIERpKHQsIGUpIHtcbiAgICAgICAgY29uc3QgaSA9IHRoaXMuSWkuZ2V0QXJyYXlPYnNlcnZlcihlKTtcbiAgICAgICAgaS5zdWJzY3JpYmUodGhpcyk7XG4gICAgICAgIHJldHVybiBpO1xuICAgIH1cbiAgICBhY2NlcHQodCkge1xuICAgICAgICB2YXIgZTtcbiAgICAgICAgaWYgKHRydWUgPT09IHRoaXMuJGNvbnRyb2xsZXIuYWNjZXB0KHQpKSByZXR1cm4gdHJ1ZTtcbiAgICAgICAgcmV0dXJuIG51bGwgPT09IChlID0gdGhpcy52aWV3KSB8fCB2b2lkIDAgPT09IGUgPyB2b2lkIDAgOiBlLmFjY2VwdCh0KTtcbiAgICB9XG59O1xuXG5Cci5pbmplY3QgPSBbIEFpLCBWLCBvcywgayBdO1xuXG5vdChbIFN0IF0sIEJyLnByb3RvdHlwZSwgXCJ2YWx1ZVwiLCB2b2lkIDApO1xuXG5vdChbIFN0KHtcbiAgICBzZXQ6IHQgPT4ge1xuICAgICAgICBzd2l0Y2ggKHQpIHtcbiAgICAgICAgICBjYXNlIFwidHJ1ZVwiOlxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG5cbiAgICAgICAgICBjYXNlIFwiZmFsc2VcIjpcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcblxuICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICByZXR1cm4gISF0O1xuICAgICAgICB9XG4gICAgfSxcbiAgICBtb2RlOiBELm9uZVRpbWVcbn0pIF0sIEJyLnByb3RvdHlwZSwgXCJmYWxsVGhyb3VnaFwiLCB2b2lkIDApO1xuXG5CciA9IG90KFsgT2UoXCJjYXNlXCIpIF0sIEJyKTtcblxubGV0IElyID0gY2xhc3MgRGVmYXVsdENhc2UgZXh0ZW5kcyBCciB7XG4gICAgbGlua1RvU3dpdGNoKHQpIHtcbiAgICAgICAgaWYgKHZvaWQgMCAhPT0gdC5kZWZhdWx0Q2FzZSkgdGhyb3cgbmV3IEVycm9yKFwiQVVSMDgxNlwiKTtcbiAgICAgICAgdC5kZWZhdWx0Q2FzZSA9IHRoaXM7XG4gICAgfVxufTtcblxuSXIgPSBvdChbIE9lKFwiZGVmYXVsdC1jYXNlXCIpIF0sIElyKTtcblxubGV0IFRyID0gY2xhc3MgUHJvbWlzZVRlbXBsYXRlQ29udHJvbGxlciB7XG4gICAgY29uc3RydWN0b3IodCwgZSwgaSwgcykge1xuICAgICAgICB0aGlzLmYgPSB0O1xuICAgICAgICB0aGlzLmwgPSBlO1xuICAgICAgICB0aGlzLnAgPSBpO1xuICAgICAgICB0aGlzLmlkID0gdyhcImF1JGNvbXBvbmVudFwiKTtcbiAgICAgICAgdGhpcy5wcmVTZXR0bGVkVGFzayA9IG51bGw7XG4gICAgICAgIHRoaXMucG9zdFNldHRsZWRUYXNrID0gbnVsbDtcbiAgICAgICAgdGhpcy5sb2dnZXIgPSBzLnNjb3BlVG8oXCJwcm9taXNlLnJlc29sdmVcIik7XG4gICAgfVxuICAgIGxpbmsodCwgZSwgaSwgcykge1xuICAgICAgICB0aGlzLnZpZXcgPSB0aGlzLmYuY3JlYXRlKHRoaXMuJGNvbnRyb2xsZXIpLnNldExvY2F0aW9uKHRoaXMubCk7XG4gICAgfVxuICAgIGF0dGFjaGluZyh0LCBlLCBpKSB7XG4gICAgICAgIGNvbnN0IHMgPSB0aGlzLnZpZXc7XG4gICAgICAgIGNvbnN0IG4gPSB0aGlzLiRjb250cm9sbGVyO1xuICAgICAgICByZXR1cm4gQyhzLmFjdGl2YXRlKHQsIG4sIGksIHRoaXMudmlld1Njb3BlID0gVS5mcm9tUGFyZW50KG4uc2NvcGUsIHt9KSksICgoKSA9PiB0aGlzLnN3YXAodCwgaSkpKTtcbiAgICB9XG4gICAgdmFsdWVDaGFuZ2VkKHQsIGUsIGkpIHtcbiAgICAgICAgaWYgKCF0aGlzLiRjb250cm9sbGVyLmlzQWN0aXZlKSByZXR1cm47XG4gICAgICAgIHRoaXMuc3dhcChudWxsLCBpKTtcbiAgICB9XG4gICAgc3dhcCh0LCBlKSB7XG4gICAgICAgIHZhciBpLCBzO1xuICAgICAgICBjb25zdCBuID0gdGhpcy52YWx1ZTtcbiAgICAgICAgaWYgKCEobiBpbnN0YW5jZW9mIFByb21pc2UpKSB7XG4gICAgICAgICAgICB0aGlzLmxvZ2dlci53YXJuKGBUaGUgdmFsdWUgJyR7U3RyaW5nKG4pfScgaXMgbm90IGEgcHJvbWlzZS4gTm8gY2hhbmdlIHdpbGwgYmUgZG9uZS5gKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCByID0gdGhpcy5wLmRvbVdyaXRlUXVldWU7XG4gICAgICAgIGNvbnN0IG8gPSB0aGlzLmZ1bGZpbGxlZDtcbiAgICAgICAgY29uc3QgbCA9IHRoaXMucmVqZWN0ZWQ7XG4gICAgICAgIGNvbnN0IGggPSB0aGlzLnBlbmRpbmc7XG4gICAgICAgIGNvbnN0IGEgPSB0aGlzLnZpZXdTY29wZTtcbiAgICAgICAgbGV0IGM7XG4gICAgICAgIGNvbnN0IHUgPSB7XG4gICAgICAgICAgICByZXVzYWJsZTogZmFsc2VcbiAgICAgICAgfTtcbiAgICAgICAgY29uc3QgZiA9ICgpID0+IHtcbiAgICAgICAgICAgIHZvaWQgQShjID0gKHRoaXMucHJlU2V0dGxlZFRhc2sgPSByLnF1ZXVlVGFzaygoKCkgPT4gQShudWxsID09PSBvIHx8IHZvaWQgMCA9PT0gbyA/IHZvaWQgMCA6IG8uZGVhY3RpdmF0ZSh0LCBlKSwgbnVsbCA9PT0gbCB8fCB2b2lkIDAgPT09IGwgPyB2b2lkIDAgOiBsLmRlYWN0aXZhdGUodCwgZSksIG51bGwgPT09IGggfHwgdm9pZCAwID09PSBoID8gdm9pZCAwIDogaC5hY3RpdmF0ZSh0LCBlLCBhKSkpLCB1KSkucmVzdWx0LCBuLnRoZW4oKGkgPT4ge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLnZhbHVlICE9PSBuKSByZXR1cm47XG4gICAgICAgICAgICAgICAgY29uc3QgcyA9ICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wb3N0U2V0dGxlUHJvbWlzZSA9ICh0aGlzLnBvc3RTZXR0bGVkVGFzayA9IHIucXVldWVUYXNrKCgoKSA9PiBBKG51bGwgPT09IGggfHwgdm9pZCAwID09PSBoID8gdm9pZCAwIDogaC5kZWFjdGl2YXRlKHQsIGUpLCBudWxsID09PSBsIHx8IHZvaWQgMCA9PT0gbCA/IHZvaWQgMCA6IGwuZGVhY3RpdmF0ZSh0LCBlKSwgbnVsbCA9PT0gbyB8fCB2b2lkIDAgPT09IG8gPyB2b2lkIDAgOiBvLmFjdGl2YXRlKHQsIGUsIGEsIGkpKSksIHUpKS5yZXN1bHQ7XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICBpZiAoMSA9PT0gdGhpcy5wcmVTZXR0bGVkVGFzay5zdGF0dXMpIHZvaWQgYy50aGVuKHMpOyBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wcmVTZXR0bGVkVGFzay5jYW5jZWwoKTtcbiAgICAgICAgICAgICAgICAgICAgcygpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pLCAoaSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMudmFsdWUgIT09IG4pIHJldHVybjtcbiAgICAgICAgICAgICAgICBjb25zdCBzID0gKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnBvc3RTZXR0bGVQcm9taXNlID0gKHRoaXMucG9zdFNldHRsZWRUYXNrID0gci5xdWV1ZVRhc2soKCgpID0+IEEobnVsbCA9PT0gaCB8fCB2b2lkIDAgPT09IGggPyB2b2lkIDAgOiBoLmRlYWN0aXZhdGUodCwgZSksIG51bGwgPT09IG8gfHwgdm9pZCAwID09PSBvID8gdm9pZCAwIDogby5kZWFjdGl2YXRlKHQsIGUpLCBudWxsID09PSBsIHx8IHZvaWQgMCA9PT0gbCA/IHZvaWQgMCA6IGwuYWN0aXZhdGUodCwgZSwgYSwgaSkpKSwgdSkpLnJlc3VsdDtcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIGlmICgxID09PSB0aGlzLnByZVNldHRsZWRUYXNrLnN0YXR1cykgdm9pZCBjLnRoZW4ocyk7IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnByZVNldHRsZWRUYXNrLmNhbmNlbCgpO1xuICAgICAgICAgICAgICAgICAgICBzKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSkpKTtcbiAgICAgICAgfTtcbiAgICAgICAgaWYgKDEgPT09IChudWxsID09PSAoaSA9IHRoaXMucG9zdFNldHRsZWRUYXNrKSB8fCB2b2lkIDAgPT09IGkgPyB2b2lkIDAgOiBpLnN0YXR1cykpIHZvaWQgdGhpcy5wb3N0U2V0dGxlUHJvbWlzZS50aGVuKGYpOyBlbHNlIHtcbiAgICAgICAgICAgIG51bGwgPT09IChzID0gdGhpcy5wb3N0U2V0dGxlZFRhc2spIHx8IHZvaWQgMCA9PT0gcyA/IHZvaWQgMCA6IHMuY2FuY2VsKCk7XG4gICAgICAgICAgICBmKCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZGV0YWNoaW5nKHQsIGUsIGkpIHtcbiAgICAgICAgdmFyIHMsIG47XG4gICAgICAgIG51bGwgPT09IChzID0gdGhpcy5wcmVTZXR0bGVkVGFzaykgfHwgdm9pZCAwID09PSBzID8gdm9pZCAwIDogcy5jYW5jZWwoKTtcbiAgICAgICAgbnVsbCA9PT0gKG4gPSB0aGlzLnBvc3RTZXR0bGVkVGFzaykgfHwgdm9pZCAwID09PSBuID8gdm9pZCAwIDogbi5jYW5jZWwoKTtcbiAgICAgICAgdGhpcy5wcmVTZXR0bGVkVGFzayA9IHRoaXMucG9zdFNldHRsZWRUYXNrID0gbnVsbDtcbiAgICAgICAgcmV0dXJuIHRoaXMudmlldy5kZWFjdGl2YXRlKHQsIHRoaXMuJGNvbnRyb2xsZXIsIGkpO1xuICAgIH1cbiAgICBkaXNwb3NlKCkge1xuICAgICAgICB2YXIgdDtcbiAgICAgICAgbnVsbCA9PT0gKHQgPSB0aGlzLnZpZXcpIHx8IHZvaWQgMCA9PT0gdCA/IHZvaWQgMCA6IHQuZGlzcG9zZSgpO1xuICAgICAgICB0aGlzLnZpZXcgPSB2b2lkIDA7XG4gICAgfVxufTtcblxub3QoWyBTdCBdLCBUci5wcm90b3R5cGUsIFwidmFsdWVcIiwgdm9pZCAwKTtcblxuVHIgPSBvdChbIE9lKFwicHJvbWlzZVwiKSwgbHQoMCwgQWkpLCBsdCgxLCBvcyksIGx0KDIsIEt0KSwgbHQoMywgaykgXSwgVHIpO1xuXG5sZXQgRHIgPSBjbGFzcyBQZW5kaW5nVGVtcGxhdGVDb250cm9sbGVyIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlKSB7XG4gICAgICAgIHRoaXMuZmFjdG9yeSA9IHQ7XG4gICAgICAgIHRoaXMuaWQgPSB3KFwiYXUkY29tcG9uZW50XCIpO1xuICAgICAgICB0aGlzLnZpZXcgPSB0aGlzLmZhY3RvcnkuY3JlYXRlKCkuc2V0TG9jYXRpb24oZSk7XG4gICAgfVxuICAgIGxpbmsodCwgZSwgaSwgcykge1xuICAgICAgICAkcih0KS5wZW5kaW5nID0gdGhpcztcbiAgICB9XG4gICAgYWN0aXZhdGUodCwgZSwgaSkge1xuICAgICAgICBjb25zdCBzID0gdGhpcy52aWV3O1xuICAgICAgICBpZiAocy5pc0FjdGl2ZSkgcmV0dXJuO1xuICAgICAgICByZXR1cm4gcy5hY3RpdmF0ZShzLCB0aGlzLiRjb250cm9sbGVyLCBlLCBpKTtcbiAgICB9XG4gICAgZGVhY3RpdmF0ZSh0LCBlKSB7XG4gICAgICAgIGNvbnN0IGkgPSB0aGlzLnZpZXc7XG4gICAgICAgIGlmICghaS5pc0FjdGl2ZSkgcmV0dXJuO1xuICAgICAgICByZXR1cm4gaS5kZWFjdGl2YXRlKGksIHRoaXMuJGNvbnRyb2xsZXIsIGUpO1xuICAgIH1cbiAgICBkZXRhY2hpbmcodCwgZSwgaSkge1xuICAgICAgICByZXR1cm4gdGhpcy5kZWFjdGl2YXRlKHQsIGkpO1xuICAgIH1cbiAgICBkaXNwb3NlKCkge1xuICAgICAgICB2YXIgdDtcbiAgICAgICAgbnVsbCA9PT0gKHQgPSB0aGlzLnZpZXcpIHx8IHZvaWQgMCA9PT0gdCA/IHZvaWQgMCA6IHQuZGlzcG9zZSgpO1xuICAgICAgICB0aGlzLnZpZXcgPSB2b2lkIDA7XG4gICAgfVxufTtcblxub3QoWyBTdCh7XG4gICAgbW9kZTogRC50b1ZpZXdcbn0pIF0sIERyLnByb3RvdHlwZSwgXCJ2YWx1ZVwiLCB2b2lkIDApO1xuXG5EciA9IG90KFsgT2UoXCJwZW5kaW5nXCIpLCBsdCgwLCBBaSksIGx0KDEsIG9zKSBdLCBEcik7XG5cbmxldCBQciA9IGNsYXNzIEZ1bGZpbGxlZFRlbXBsYXRlQ29udHJvbGxlciB7XG4gICAgY29uc3RydWN0b3IodCwgZSkge1xuICAgICAgICB0aGlzLmZhY3RvcnkgPSB0O1xuICAgICAgICB0aGlzLmlkID0gdyhcImF1JGNvbXBvbmVudFwiKTtcbiAgICAgICAgdGhpcy52aWV3ID0gdGhpcy5mYWN0b3J5LmNyZWF0ZSgpLnNldExvY2F0aW9uKGUpO1xuICAgIH1cbiAgICBsaW5rKHQsIGUsIGksIHMpIHtcbiAgICAgICAgJHIodCkuZnVsZmlsbGVkID0gdGhpcztcbiAgICB9XG4gICAgYWN0aXZhdGUodCwgZSwgaSwgcykge1xuICAgICAgICB0aGlzLnZhbHVlID0gcztcbiAgICAgICAgY29uc3QgbiA9IHRoaXMudmlldztcbiAgICAgICAgaWYgKG4uaXNBY3RpdmUpIHJldHVybjtcbiAgICAgICAgcmV0dXJuIG4uYWN0aXZhdGUobiwgdGhpcy4kY29udHJvbGxlciwgZSwgaSk7XG4gICAgfVxuICAgIGRlYWN0aXZhdGUodCwgZSkge1xuICAgICAgICBjb25zdCBpID0gdGhpcy52aWV3O1xuICAgICAgICBpZiAoIWkuaXNBY3RpdmUpIHJldHVybjtcbiAgICAgICAgcmV0dXJuIGkuZGVhY3RpdmF0ZShpLCB0aGlzLiRjb250cm9sbGVyLCBlKTtcbiAgICB9XG4gICAgZGV0YWNoaW5nKHQsIGUsIGkpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZGVhY3RpdmF0ZSh0LCBpKTtcbiAgICB9XG4gICAgZGlzcG9zZSgpIHtcbiAgICAgICAgdmFyIHQ7XG4gICAgICAgIG51bGwgPT09ICh0ID0gdGhpcy52aWV3KSB8fCB2b2lkIDAgPT09IHQgPyB2b2lkIDAgOiB0LmRpc3Bvc2UoKTtcbiAgICAgICAgdGhpcy52aWV3ID0gdm9pZCAwO1xuICAgIH1cbn07XG5cbm90KFsgU3Qoe1xuICAgIG1vZGU6IEQuZnJvbVZpZXdcbn0pIF0sIFByLnByb3RvdHlwZSwgXCJ2YWx1ZVwiLCB2b2lkIDApO1xuXG5QciA9IG90KFsgT2UoXCJ0aGVuXCIpLCBsdCgwLCBBaSksIGx0KDEsIG9zKSBdLCBQcik7XG5cbmxldCBPciA9IGNsYXNzIFJlamVjdGVkVGVtcGxhdGVDb250cm9sbGVyIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlKSB7XG4gICAgICAgIHRoaXMuZmFjdG9yeSA9IHQ7XG4gICAgICAgIHRoaXMuaWQgPSB3KFwiYXUkY29tcG9uZW50XCIpO1xuICAgICAgICB0aGlzLnZpZXcgPSB0aGlzLmZhY3RvcnkuY3JlYXRlKCkuc2V0TG9jYXRpb24oZSk7XG4gICAgfVxuICAgIGxpbmsodCwgZSwgaSwgcykge1xuICAgICAgICAkcih0KS5yZWplY3RlZCA9IHRoaXM7XG4gICAgfVxuICAgIGFjdGl2YXRlKHQsIGUsIGksIHMpIHtcbiAgICAgICAgdGhpcy52YWx1ZSA9IHM7XG4gICAgICAgIGNvbnN0IG4gPSB0aGlzLnZpZXc7XG4gICAgICAgIGlmIChuLmlzQWN0aXZlKSByZXR1cm47XG4gICAgICAgIHJldHVybiBuLmFjdGl2YXRlKG4sIHRoaXMuJGNvbnRyb2xsZXIsIGUsIGkpO1xuICAgIH1cbiAgICBkZWFjdGl2YXRlKHQsIGUpIHtcbiAgICAgICAgY29uc3QgaSA9IHRoaXMudmlldztcbiAgICAgICAgaWYgKCFpLmlzQWN0aXZlKSByZXR1cm47XG4gICAgICAgIHJldHVybiBpLmRlYWN0aXZhdGUoaSwgdGhpcy4kY29udHJvbGxlciwgZSk7XG4gICAgfVxuICAgIGRldGFjaGluZyh0LCBlLCBpKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmRlYWN0aXZhdGUodCwgaSk7XG4gICAgfVxuICAgIGRpc3Bvc2UoKSB7XG4gICAgICAgIHZhciB0O1xuICAgICAgICBudWxsID09PSAodCA9IHRoaXMudmlldykgfHwgdm9pZCAwID09PSB0ID8gdm9pZCAwIDogdC5kaXNwb3NlKCk7XG4gICAgICAgIHRoaXMudmlldyA9IHZvaWQgMDtcbiAgICB9XG59O1xuXG5vdChbIFN0KHtcbiAgICBtb2RlOiBELmZyb21WaWV3XG59KSBdLCBPci5wcm90b3R5cGUsIFwidmFsdWVcIiwgdm9pZCAwKTtcblxuT3IgPSBvdChbIE9lKFwiY2F0Y2hcIiksIGx0KDAsIEFpKSwgbHQoMSwgb3MpIF0sIE9yKTtcblxuZnVuY3Rpb24gJHIodCkge1xuICAgIGNvbnN0IGUgPSB0LnBhcmVudDtcbiAgICBjb25zdCBpID0gbnVsbCA9PT0gZSB8fCB2b2lkIDAgPT09IGUgPyB2b2lkIDAgOiBlLnZpZXdNb2RlbDtcbiAgICBpZiAoaSBpbnN0YW5jZW9mIFRyKSByZXR1cm4gaTtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJBVVIwODEzXCIpO1xufVxuXG5sZXQgTHIgPSBjbGFzcyBQcm9taXNlQXR0cmlidXRlUGF0dGVybiB7XG4gICAgXCJwcm9taXNlLnJlc29sdmVcIih0LCBlLCBpKSB7XG4gICAgICAgIHJldHVybiBuZXcgQXR0clN5bnRheCh0LCBlLCBcInByb21pc2VcIiwgXCJiaW5kXCIpO1xuICAgIH1cbn07XG5cbkxyID0gb3QoWyBGdCh7XG4gICAgcGF0dGVybjogXCJwcm9taXNlLnJlc29sdmVcIixcbiAgICBzeW1ib2xzOiBcIlwiXG59KSBdLCBMcik7XG5cbmxldCBxciA9IGNsYXNzIEZ1bGZpbGxlZEF0dHJpYnV0ZVBhdHRlcm4ge1xuICAgIHRoZW4odCwgZSwgaSkge1xuICAgICAgICByZXR1cm4gbmV3IEF0dHJTeW50YXgodCwgZSwgXCJ0aGVuXCIsIFwiZnJvbS12aWV3XCIpO1xuICAgIH1cbn07XG5cbnFyID0gb3QoWyBGdCh7XG4gICAgcGF0dGVybjogXCJ0aGVuXCIsXG4gICAgc3ltYm9sczogXCJcIlxufSkgXSwgcXIpO1xuXG5sZXQgTXIgPSBjbGFzcyBSZWplY3RlZEF0dHJpYnV0ZVBhdHRlcm4ge1xuICAgIGNhdGNoKHQsIGUsIGkpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBBdHRyU3ludGF4KHQsIGUsIFwiY2F0Y2hcIiwgXCJmcm9tLXZpZXdcIik7XG4gICAgfVxufTtcblxuTXIgPSBvdChbIEZ0KHtcbiAgICBwYXR0ZXJuOiBcImNhdGNoXCIsXG4gICAgc3ltYm9sczogXCJcIlxufSkgXSwgTXIpO1xuXG5mdW5jdGlvbiBVcih0LCBlLCBpLCBzKSB7XG4gICAgaWYgKEF0KGUpKSByZXR1cm4gRnIodCwgZSwgaSwgcyk7XG4gICAgaWYgKHNpLmlzVHlwZShlKSkgcmV0dXJuIFZyKHQsIGUsIGksIHMpO1xuICAgIHRocm93IG5ldyBFcnJvcihgSW52YWxpZCBUYWcgb3IgVHlwZS5gKTtcbn1cblxuY2xhc3MgUmVuZGVyUGxhbiB7XG4gICAgY29uc3RydWN0b3IodCwgZSwgaSkge1xuICAgICAgICB0aGlzLm5vZGUgPSB0O1xuICAgICAgICB0aGlzLmluc3RydWN0aW9ucyA9IGU7XG4gICAgICAgIHRoaXMuUGkgPSBpO1xuICAgICAgICB0aGlzLk9pID0gdm9pZCAwO1xuICAgIH1cbiAgICBnZXQgZGVmaW5pdGlvbigpIHtcbiAgICAgICAgaWYgKHZvaWQgMCA9PT0gdGhpcy5PaSkgdGhpcy5PaSA9IEN1c3RvbUVsZW1lbnREZWZpbml0aW9uLmNyZWF0ZSh7XG4gICAgICAgICAgICBuYW1lOiBzaS5nZW5lcmF0ZU5hbWUoKSxcbiAgICAgICAgICAgIHRlbXBsYXRlOiB0aGlzLm5vZGUsXG4gICAgICAgICAgICBuZWVkc0NvbXBpbGU6IEF0KHRoaXMubm9kZSksXG4gICAgICAgICAgICBpbnN0cnVjdGlvbnM6IHRoaXMuaW5zdHJ1Y3Rpb25zLFxuICAgICAgICAgICAgZGVwZW5kZW5jaWVzOiB0aGlzLlBpXG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gdGhpcy5PaTtcbiAgICB9XG4gICAgY3JlYXRlVmlldyh0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLmdldFZpZXdGYWN0b3J5KHQpLmNyZWF0ZSgpO1xuICAgIH1cbiAgICBnZXRWaWV3RmFjdG9yeSh0KSB7XG4gICAgICAgIHJldHVybiB0LnJvb3QuZ2V0KFBpKS5nZXRWaWV3RmFjdG9yeSh0aGlzLmRlZmluaXRpb24sIHQuY3JlYXRlQ2hpbGQoKS5yZWdpc3RlciguLi50aGlzLlBpKSk7XG4gICAgfVxuICAgIG1lcmdlSW50byh0LCBlLCBpKSB7XG4gICAgICAgIHQuYXBwZW5kQ2hpbGQodGhpcy5ub2RlKTtcbiAgICAgICAgZS5wdXNoKC4uLnRoaXMuaW5zdHJ1Y3Rpb25zKTtcbiAgICAgICAgaS5wdXNoKC4uLnRoaXMuUGkpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gRnIodCwgZSwgaSwgcykge1xuICAgIGNvbnN0IG4gPSBbXTtcbiAgICBjb25zdCByID0gW107XG4gICAgY29uc3QgbyA9IFtdO1xuICAgIGNvbnN0IGwgPSB0LmRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoZSk7XG4gICAgbGV0IGggPSBmYWxzZTtcbiAgICBpZiAoaSkgT2JqZWN0LmtleXMoaSkuZm9yRWFjaCgodCA9PiB7XG4gICAgICAgIGNvbnN0IGUgPSBpW3RdO1xuICAgICAgICBpZiAoQ3MoZSkpIHtcbiAgICAgICAgICAgIGggPSB0cnVlO1xuICAgICAgICAgICAgbi5wdXNoKGUpO1xuICAgICAgICB9IGVsc2UgbC5zZXRBdHRyaWJ1dGUodCwgZSk7XG4gICAgfSkpO1xuICAgIGlmIChoKSB7XG4gICAgICAgIGwuY2xhc3NOYW1lID0gXCJhdVwiO1xuICAgICAgICByLnB1c2gobik7XG4gICAgfVxuICAgIGlmIChzKSBfcih0LCBsLCBzLCByLCBvKTtcbiAgICByZXR1cm4gbmV3IFJlbmRlclBsYW4obCwgciwgbyk7XG59XG5cbmZ1bmN0aW9uIFZyKHQsIGUsIGksIHMpIHtcbiAgICBjb25zdCBuID0gc2kuZ2V0RGVmaW5pdGlvbihlKTtcbiAgICBjb25zdCByID0gW107XG4gICAgY29uc3QgbyA9IFsgciBdO1xuICAgIGNvbnN0IGwgPSBbXTtcbiAgICBjb25zdCBoID0gW107XG4gICAgY29uc3QgYSA9IG4uYmluZGFibGVzO1xuICAgIGNvbnN0IGMgPSB0LmRvY3VtZW50LmNyZWF0ZUVsZW1lbnQobi5uYW1lKTtcbiAgICBjLmNsYXNzTmFtZSA9IFwiYXVcIjtcbiAgICBpZiAoIWwuaW5jbHVkZXMoZSkpIGwucHVzaChlKTtcbiAgICByLnB1c2gobmV3IEh5ZHJhdGVFbGVtZW50SW5zdHJ1Y3Rpb24obiwgdm9pZCAwLCBoLCBudWxsLCBmYWxzZSwgdm9pZCAwKSk7XG4gICAgaWYgKGkpIE9iamVjdC5rZXlzKGkpLmZvckVhY2goKHQgPT4ge1xuICAgICAgICBjb25zdCBlID0gaVt0XTtcbiAgICAgICAgaWYgKENzKGUpKSBoLnB1c2goZSk7IGVsc2UgaWYgKHZvaWQgMCA9PT0gYVt0XSkgaC5wdXNoKG5ldyBTZXRBdHRyaWJ1dGVJbnN0cnVjdGlvbihlLCB0KSk7IGVsc2UgaC5wdXNoKG5ldyBTZXRQcm9wZXJ0eUluc3RydWN0aW9uKGUsIHQpKTtcbiAgICB9KSk7XG4gICAgaWYgKHMpIF9yKHQsIGMsIHMsIG8sIGwpO1xuICAgIHJldHVybiBuZXcgUmVuZGVyUGxhbihjLCBvLCBsKTtcbn1cblxuZnVuY3Rpb24gX3IodCwgZSwgaSwgcywgbikge1xuICAgIGZvciAobGV0IHIgPSAwLCBvID0gaS5sZW5ndGg7IHIgPCBvOyArK3IpIHtcbiAgICAgICAgY29uc3QgbyA9IGlbcl07XG4gICAgICAgIHN3aXRjaCAodHlwZW9mIG8pIHtcbiAgICAgICAgICBjYXNlIFwic3RyaW5nXCI6XG4gICAgICAgICAgICBlLmFwcGVuZENoaWxkKHQuZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUobykpO1xuICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICBjYXNlIFwib2JqZWN0XCI6XG4gICAgICAgICAgICBpZiAobyBpbnN0YW5jZW9mIHQuTm9kZSkgZS5hcHBlbmRDaGlsZChvKTsgZWxzZSBpZiAoXCJtZXJnZUludG9cIiBpbiBvKSBvLm1lcmdlSW50byhlLCBzLCBuKTtcbiAgICAgICAgfVxuICAgIH1cbn1cblxuZnVuY3Rpb24ganIodCwgZSkge1xuICAgIGNvbnN0IGkgPSBlLnRvO1xuICAgIGlmICh2b2lkIDAgIT09IGkgJiYgXCJzdWJqZWN0XCIgIT09IGkgJiYgXCJjb21wb3NpbmdcIiAhPT0gaSkgdFtpXSA9IGU7XG4gICAgcmV0dXJuIHQ7XG59XG5cbmNsYXNzIEF1UmVuZGVyIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlLCBpLCBzKSB7XG4gICAgICAgIHRoaXMucCA9IHQ7XG4gICAgICAgIHRoaXMuJGkgPSBlO1xuICAgICAgICB0aGlzLkxpID0gaTtcbiAgICAgICAgdGhpcy5yID0gcztcbiAgICAgICAgdGhpcy5pZCA9IHcoXCJhdSRjb21wb25lbnRcIik7XG4gICAgICAgIHRoaXMuY29tcG9uZW50ID0gdm9pZCAwO1xuICAgICAgICB0aGlzLmNvbXBvc2luZyA9IGZhbHNlO1xuICAgICAgICB0aGlzLnZpZXcgPSB2b2lkIDA7XG4gICAgICAgIHRoaXMucWkgPSB2b2lkIDA7XG4gICAgICAgIHRoaXMuTWkgPSBlLnByb3BzLnJlZHVjZShqciwge30pO1xuICAgIH1cbiAgICBhdHRhY2hpbmcodCwgZSwgaSkge1xuICAgICAgICBjb25zdCB7Y29tcG9uZW50OiBzLCB2aWV3OiBufSA9IHRoaXM7XG4gICAgICAgIGlmICh2b2lkIDAgPT09IG4gfHwgdGhpcy5xaSAhPT0gcykge1xuICAgICAgICAgICAgdGhpcy5xaSA9IHM7XG4gICAgICAgICAgICB0aGlzLmNvbXBvc2luZyA9IHRydWU7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5jb21wb3NlKHZvaWQgMCwgcywgdCwgaSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMuY29tcG9zZShuLCBzLCB0LCBpKTtcbiAgICB9XG4gICAgZGV0YWNoaW5nKHQsIGUsIGkpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMub2kodGhpcy52aWV3LCB0LCBpKTtcbiAgICB9XG4gICAgY29tcG9uZW50Q2hhbmdlZCh0LCBlLCBpKSB7XG4gICAgICAgIGNvbnN0IHskY29udHJvbGxlcjogc30gPSB0aGlzO1xuICAgICAgICBpZiAoIXMuaXNBY3RpdmUpIHJldHVybjtcbiAgICAgICAgaWYgKHRoaXMucWkgPT09IHQpIHJldHVybjtcbiAgICAgICAgdGhpcy5xaSA9IHQ7XG4gICAgICAgIHRoaXMuY29tcG9zaW5nID0gdHJ1ZTtcbiAgICAgICAgaSB8PSBzLmZsYWdzO1xuICAgICAgICBjb25zdCBuID0gQyh0aGlzLm9pKHRoaXMudmlldywgbnVsbCwgaSksICgoKSA9PiB0aGlzLmNvbXBvc2Uodm9pZCAwLCB0LCBudWxsLCBpKSkpO1xuICAgICAgICBpZiAobiBpbnN0YW5jZW9mIFByb21pc2UpIG4uY2F0Y2goKHQgPT4ge1xuICAgICAgICAgICAgdGhyb3cgdDtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICBjb21wb3NlKHQsIGUsIGksIHMpIHtcbiAgICAgICAgcmV0dXJuIEModm9pZCAwID09PSB0ID8gQyhlLCAodCA9PiB0aGlzLlVpKHQsIHMpKSkgOiB0LCAodCA9PiB0aGlzLm5pKHRoaXMudmlldyA9IHQsIGksIHMpKSk7XG4gICAgfVxuICAgIG9pKHQsIGUsIGkpIHtcbiAgICAgICAgcmV0dXJuIG51bGwgPT09IHQgfHwgdm9pZCAwID09PSB0ID8gdm9pZCAwIDogdC5kZWFjdGl2YXRlKG51bGwgIT09IGUgJiYgdm9pZCAwICE9PSBlID8gZSA6IHQsIHRoaXMuJGNvbnRyb2xsZXIsIGkpO1xuICAgIH1cbiAgICBuaSh0LCBlLCBpKSB7XG4gICAgICAgIGNvbnN0IHskY29udHJvbGxlcjogc30gPSB0aGlzO1xuICAgICAgICByZXR1cm4gQyhudWxsID09PSB0IHx8IHZvaWQgMCA9PT0gdCA/IHZvaWQgMCA6IHQuYWN0aXZhdGUobnVsbCAhPT0gZSAmJiB2b2lkIDAgIT09IGUgPyBlIDogdCwgcywgaSwgcy5zY29wZSksICgoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLmNvbXBvc2luZyA9IGZhbHNlO1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIFVpKHQsIGUpIHtcbiAgICAgICAgY29uc3QgaSA9IHRoaXMuRmkodCwgZSk7XG4gICAgICAgIGlmIChpKSB7XG4gICAgICAgICAgICBpLnNldExvY2F0aW9uKHRoaXMuJGNvbnRyb2xsZXIubG9jYXRpb24pO1xuICAgICAgICAgICAgaS5sb2NrU2NvcGUodGhpcy4kY29udHJvbGxlci5zY29wZSk7XG4gICAgICAgICAgICByZXR1cm4gaTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIEZpKHQsIGUpIHtcbiAgICAgICAgaWYgKCF0KSByZXR1cm47XG4gICAgICAgIGNvbnN0IGkgPSB0aGlzLkxpLmNvbnRyb2xsZXIuY29udGFpbmVyO1xuICAgICAgICBpZiAoXCJvYmplY3RcIiA9PT0gdHlwZW9mIHQpIHtcbiAgICAgICAgICAgIGlmIChOcih0KSkgcmV0dXJuIHQ7XG4gICAgICAgICAgICBpZiAoXCJjcmVhdGVWaWV3XCIgaW4gdCkgcmV0dXJuIHQuY3JlYXRlVmlldyhpKTtcbiAgICAgICAgICAgIGlmIChcImNyZWF0ZVwiIGluIHQpIHJldHVybiB0LmNyZWF0ZSgpO1xuICAgICAgICAgICAgaWYgKFwidGVtcGxhdGVcIiBpbiB0KSByZXR1cm4gdGhpcy5yLmdldFZpZXdGYWN0b3J5KEN1c3RvbUVsZW1lbnREZWZpbml0aW9uLmdldE9yQ3JlYXRlKHQpLCBpKS5jcmVhdGUoKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoQXQodCkpIHtcbiAgICAgICAgICAgIGNvbnN0IGUgPSBpLmZpbmQoc2ksIHQpO1xuICAgICAgICAgICAgaWYgKG51bGwgPT0gZSkgdGhyb3cgbmV3IEVycm9yKGBBVVIwODA5OiR7dH1gKTtcbiAgICAgICAgICAgIHQgPSBlLlR5cGU7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIFVyKHRoaXMucCwgdCwgdGhpcy5NaSwgdGhpcy4kY29udHJvbGxlci5ob3N0LmNoaWxkTm9kZXMpLmNyZWF0ZVZpZXcoaSk7XG4gICAgfVxuICAgIGRpc3Bvc2UoKSB7XG4gICAgICAgIHZhciB0O1xuICAgICAgICBudWxsID09PSAodCA9IHRoaXMudmlldykgfHwgdm9pZCAwID09PSB0ID8gdm9pZCAwIDogdC5kaXNwb3NlKCk7XG4gICAgICAgIHRoaXMudmlldyA9IHZvaWQgMDtcbiAgICB9XG4gICAgYWNjZXB0KHQpIHtcbiAgICAgICAgdmFyIGU7XG4gICAgICAgIGlmICh0cnVlID09PSAobnVsbCA9PT0gKGUgPSB0aGlzLnZpZXcpIHx8IHZvaWQgMCA9PT0gZSA/IHZvaWQgMCA6IGUuYWNjZXB0KHQpKSkgcmV0dXJuIHRydWU7XG4gICAgfVxufVxuXG5BdVJlbmRlci5pbmplY3QgPSBbIEt0LCBrcywgS2ksIFBpIF07XG5cbm90KFsgU3QgXSwgQXVSZW5kZXIucHJvdG90eXBlLCBcImNvbXBvbmVudFwiLCB2b2lkIDApO1xuXG5vdChbIFN0KHtcbiAgICBtb2RlOiBELmZyb21WaWV3XG59KSBdLCBBdVJlbmRlci5wcm90b3R5cGUsIFwiY29tcG9zaW5nXCIsIHZvaWQgMCk7XG5cbmplKHtcbiAgICBuYW1lOiBcImF1LXJlbmRlclwiLFxuICAgIHRlbXBsYXRlOiBudWxsLFxuICAgIGNvbnRhaW5lcmxlc3M6IHRydWUsXG4gICAgY2FwdHVyZTogdHJ1ZVxufSkoQXVSZW5kZXIpO1xuXG5mdW5jdGlvbiBOcih0KSB7XG4gICAgcmV0dXJuIFwibG9ja1Njb3BlXCIgaW4gdDtcbn1cblxuY2xhc3MgQXVDb21wb3NlIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlLCBpLCBzLCBuLCByKSB7XG4gICAgICAgIHRoaXMuYyA9IHQ7XG4gICAgICAgIHRoaXMucGFyZW50ID0gZTtcbiAgICAgICAgdGhpcy5ob3N0ID0gaTtcbiAgICAgICAgdGhpcy5wID0gcztcbiAgICAgICAgdGhpcy5zY29wZUJlaGF2aW9yID0gXCJhdXRvXCI7XG4gICAgICAgIHRoaXMuVmkgPSB2b2lkIDA7XG4gICAgICAgIHRoaXMubCA9IG4uY29udGFpbmVybGVzcyA/IHVzKHRoaXMuaG9zdCkgOiB2b2lkIDA7XG4gICAgICAgIHRoaXMuciA9IHQuZ2V0KFBpKTtcbiAgICAgICAgdGhpcy4kaSA9IG47XG4gICAgICAgIHRoaXMuX2kgPSByO1xuICAgIH1cbiAgICBzdGF0aWMgZ2V0IGluamVjdCgpIHtcbiAgICAgICAgcmV0dXJuIFsgZywgWGksIG5zLCBLdCwga3MsIFQoQ29tcG9zaXRpb25Db250ZXh0RmFjdG9yeSkgXTtcbiAgICB9XG4gICAgZ2V0IHBlbmRpbmcoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmppO1xuICAgIH1cbiAgICBnZXQgY29tcG9zaXRpb24oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLlZpO1xuICAgIH1cbiAgICBhdHRhY2hpbmcodCwgZSwgaSkge1xuICAgICAgICByZXR1cm4gdGhpcy5qaSA9IEModGhpcy5xdWV1ZShuZXcgQ2hhbmdlSW5mbyh0aGlzLnZpZXcsIHRoaXMudmlld01vZGVsLCB0aGlzLm1vZGVsLCB2b2lkIDApLCB0KSwgKHQgPT4ge1xuICAgICAgICAgICAgaWYgKHRoaXMuX2kuaXNDdXJyZW50KHQpKSB0aGlzLmppID0gdm9pZCAwO1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIGRldGFjaGluZyh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSB0aGlzLlZpO1xuICAgICAgICBjb25zdCBpID0gdGhpcy5qaTtcbiAgICAgICAgdGhpcy5faS5pbnZhbGlkYXRlKCk7XG4gICAgICAgIHRoaXMuVmkgPSB0aGlzLmppID0gdm9pZCAwO1xuICAgICAgICByZXR1cm4gQyhpLCAoKCkgPT4gbnVsbCA9PT0gZSB8fCB2b2lkIDAgPT09IGUgPyB2b2lkIDAgOiBlLmRlYWN0aXZhdGUodCkpKTtcbiAgICB9XG4gICAgcHJvcGVydHlDaGFuZ2VkKHQpIHtcbiAgICAgICAgaWYgKFwibW9kZWxcIiA9PT0gdCAmJiBudWxsICE9IHRoaXMuVmkpIHtcbiAgICAgICAgICAgIHRoaXMuVmkudXBkYXRlKHRoaXMubW9kZWwpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuamkgPSBDKHRoaXMuamksICgoKSA9PiBDKHRoaXMucXVldWUobmV3IENoYW5nZUluZm8odGhpcy52aWV3LCB0aGlzLnZpZXdNb2RlbCwgdGhpcy5tb2RlbCwgdCksIHZvaWQgMCksICh0ID0+IHtcbiAgICAgICAgICAgIGlmICh0aGlzLl9pLmlzQ3VycmVudCh0KSkgdGhpcy5qaSA9IHZvaWQgMDtcbiAgICAgICAgfSkpKSk7XG4gICAgfVxuICAgIHF1ZXVlKHQsIGUpIHtcbiAgICAgICAgY29uc3QgaSA9IHRoaXMuX2k7XG4gICAgICAgIGNvbnN0IHMgPSB0aGlzLlZpO1xuICAgICAgICByZXR1cm4gQyhpLmNyZWF0ZSh0KSwgKHQgPT4ge1xuICAgICAgICAgICAgaWYgKGkuaXNDdXJyZW50KHQpKSByZXR1cm4gQyh0aGlzLmNvbXBvc2UodCksIChuID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoaS5pc0N1cnJlbnQodCkpIHJldHVybiBDKG4uYWN0aXZhdGUoZSksICgoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChpLmlzQ3VycmVudCh0KSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5WaSA9IG47XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gQyhudWxsID09PSBzIHx8IHZvaWQgMCA9PT0gcyA/IHZvaWQgMCA6IHMuZGVhY3RpdmF0ZShlKSwgKCgpID0+IHQpKTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHJldHVybiBDKG4uY29udHJvbGxlci5kZWFjdGl2YXRlKG4uY29udHJvbGxlciwgdGhpcy4kY29udHJvbGxlciwgNCksICgoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBuLmNvbnRyb2xsZXIuZGlzcG9zZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHQ7XG4gICAgICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICAgICAgbi5jb250cm9sbGVyLmRpc3Bvc2UoKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gdDtcbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgIHJldHVybiB0O1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIGNvbXBvc2UodCkge1xuICAgICAgICBsZXQgZTtcbiAgICAgICAgbGV0IGk7XG4gICAgICAgIGxldCBzO1xuICAgICAgICBjb25zdCB7dmlldzogbiwgdmlld01vZGVsOiByLCBtb2RlbDogb30gPSB0LmNoYW5nZTtcbiAgICAgICAgY29uc3Qge2M6IGwsIGhvc3Q6IGgsICRjb250cm9sbGVyOiBhLCBsOiBjfSA9IHRoaXM7XG4gICAgICAgIGNvbnN0IHUgPSB0aGlzLmdldERlZihyKTtcbiAgICAgICAgY29uc3QgZiA9IGwuY3JlYXRlQ2hpbGQoKTtcbiAgICAgICAgY29uc3QgZCA9IG51bGwgPT0gYyA/IGgucGFyZW50Tm9kZSA6IGMucGFyZW50Tm9kZTtcbiAgICAgICAgaWYgKG51bGwgIT09IHUpIHtcbiAgICAgICAgICAgIGlmICh1LmNvbnRhaW5lcmxlc3MpIHRocm93IG5ldyBFcnJvcihcIkFVUjA4MDZcIik7XG4gICAgICAgICAgICBpZiAobnVsbCA9PSBjKSB7XG4gICAgICAgICAgICAgICAgaSA9IGg7XG4gICAgICAgICAgICAgICAgcyA9ICgpID0+IHt9O1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBpID0gZC5pbnNlcnRCZWZvcmUodGhpcy5wLmRvY3VtZW50LmNyZWF0ZUVsZW1lbnQodS5uYW1lKSwgYyk7XG4gICAgICAgICAgICAgICAgcyA9ICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgaS5yZW1vdmUoKTtcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZSA9IHRoaXMuZ2V0Vm0oZiwgciwgaSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBpID0gbnVsbCA9PSBjID8gaCA6IGM7XG4gICAgICAgICAgICBlID0gdGhpcy5nZXRWbShmLCByLCBpKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBtID0gKCkgPT4ge1xuICAgICAgICAgICAgaWYgKG51bGwgIT09IHUpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBuID0gQ29udHJvbGxlci4kZWwoZiwgZSwgaSwge1xuICAgICAgICAgICAgICAgICAgICBwcm9qZWN0aW9uczogdGhpcy4kaS5wcm9qZWN0aW9uc1xuICAgICAgICAgICAgICAgIH0sIHUpO1xuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgQ29tcG9zaXRpb25Db250cm9sbGVyKG4sICh0ID0+IG4uYWN0aXZhdGUobnVsbCAhPT0gdCAmJiB2b2lkIDAgIT09IHQgPyB0IDogbiwgYSwgMiwgYS5zY29wZS5wYXJlbnRTY29wZSkpLCAodCA9PiBDKG4uZGVhY3RpdmF0ZShudWxsICE9PSB0ICYmIHZvaWQgMCAhPT0gdCA/IHQgOiBuLCBhLCA0KSwgcykpLCAodCA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbnVsbCA9PT0gKGkgPSBlLmFjdGl2YXRlKSB8fCB2b2lkIDAgPT09IGkgPyB2b2lkIDAgOiBpLmNhbGwoZSwgdCk7XG4gICAgICAgICAgICAgICAgfSksIHQpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBjb25zdCBzID0gQ3VzdG9tRWxlbWVudERlZmluaXRpb24uY3JlYXRlKHtcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogc2kuZ2VuZXJhdGVOYW1lKCksXG4gICAgICAgICAgICAgICAgICAgIHRlbXBsYXRlOiBuXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgY29uc3QgciA9IHRoaXMuci5nZXRWaWV3RmFjdG9yeShzLCBmKTtcbiAgICAgICAgICAgICAgICBjb25zdCBvID0gQ29udHJvbGxlci4kdmlldyhyLCBhKTtcbiAgICAgICAgICAgICAgICBjb25zdCBsID0gXCJhdXRvXCIgPT09IHRoaXMuc2NvcGVCZWhhdmlvciA/IFUuZnJvbVBhcmVudCh0aGlzLnBhcmVudC5zY29wZSwgZSkgOiBVLmNyZWF0ZShlKTtcbiAgICAgICAgICAgICAgICBpZiAoZnMoaSkpIG8uc2V0TG9jYXRpb24oaSk7IGVsc2Ugby5zZXRIb3N0KGkpO1xuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgQ29tcG9zaXRpb25Db250cm9sbGVyKG8sICh0ID0+IG8uYWN0aXZhdGUobnVsbCAhPT0gdCAmJiB2b2lkIDAgIT09IHQgPyB0IDogbywgYSwgMiwgbCkpLCAodCA9PiBvLmRlYWN0aXZhdGUobnVsbCAhPT0gdCAmJiB2b2lkIDAgIT09IHQgPyB0IDogbywgYSwgNCkpLCAodCA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbnVsbCA9PT0gKGkgPSBlLmFjdGl2YXRlKSB8fCB2b2lkIDAgPT09IGkgPyB2b2lkIDAgOiBpLmNhbGwoZSwgdCk7XG4gICAgICAgICAgICAgICAgfSksIHQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBpZiAoXCJhY3RpdmF0ZVwiIGluIGUpIHJldHVybiBDKGUuYWN0aXZhdGUobyksICgoKSA9PiBtKCkpKTsgZWxzZSByZXR1cm4gbSgpO1xuICAgIH1cbiAgICBnZXRWbSh0LCBlLCBpKSB7XG4gICAgICAgIGlmIChudWxsID09IGUpIHJldHVybiBuZXcgRW1wdHlDb21wb25lbnQkMTtcbiAgICAgICAgaWYgKFwib2JqZWN0XCIgPT09IHR5cGVvZiBlKSByZXR1cm4gZTtcbiAgICAgICAgY29uc3QgcyA9IHRoaXMucDtcbiAgICAgICAgY29uc3QgbiA9IGZzKGkpO1xuICAgICAgICB0LnJlZ2lzdGVyUmVzb2x2ZXIocy5FbGVtZW50LCB0LnJlZ2lzdGVyUmVzb2x2ZXIobnMsIG5ldyB4KFwiRWxlbWVudFJlc29sdmVyXCIsIG4gPyBudWxsIDogaSkpKTtcbiAgICAgICAgdC5yZWdpc3RlclJlc29sdmVyKG9zLCBuZXcgeChcIklSZW5kZXJMb2NhdGlvblwiLCBuID8gaSA6IG51bGwpKTtcbiAgICAgICAgY29uc3QgciA9IHQuaW52b2tlKGUpO1xuICAgICAgICB0LnJlZ2lzdGVyUmVzb2x2ZXIoZSwgbmV3IHgoXCJhdS1jb21wb3NlLnZpZXdNb2RlbFwiLCByKSk7XG4gICAgICAgIHJldHVybiByO1xuICAgIH1cbiAgICBnZXREZWYodCkge1xuICAgICAgICBjb25zdCBlID0gQ3QodCkgPyB0IDogbnVsbCA9PT0gdCB8fCB2b2lkIDAgPT09IHQgPyB2b2lkIDAgOiB0LmNvbnN0cnVjdG9yO1xuICAgICAgICByZXR1cm4gc2kuaXNUeXBlKGUpID8gc2kuZ2V0RGVmaW5pdGlvbihlKSA6IG51bGw7XG4gICAgfVxufVxuXG5vdChbIFN0IF0sIEF1Q29tcG9zZS5wcm90b3R5cGUsIFwidmlld1wiLCB2b2lkIDApO1xuXG5vdChbIFN0IF0sIEF1Q29tcG9zZS5wcm90b3R5cGUsIFwidmlld01vZGVsXCIsIHZvaWQgMCk7XG5cbm90KFsgU3QgXSwgQXVDb21wb3NlLnByb3RvdHlwZSwgXCJtb2RlbFwiLCB2b2lkIDApO1xuXG5vdChbIFN0KHtcbiAgICBzZXQ6IHQgPT4ge1xuICAgICAgICBpZiAoXCJzY29wZWRcIiA9PT0gdCB8fCBcImF1dG9cIiA9PT0gdCkgcmV0dXJuIHQ7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIkFVUjA4MDVcIik7XG4gICAgfVxufSkgXSwgQXVDb21wb3NlLnByb3RvdHlwZSwgXCJzY29wZUJlaGF2aW9yXCIsIHZvaWQgMCk7XG5cbmplKFwiYXUtY29tcG9zZVwiKShBdUNvbXBvc2UpO1xuXG5jbGFzcyBFbXB0eUNvbXBvbmVudCQxIHt9XG5cbmNsYXNzIENvbXBvc2l0aW9uQ29udGV4dEZhY3Rvcnkge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICB0aGlzLmlkID0gMDtcbiAgICB9XG4gICAgaXNDdXJyZW50KHQpIHtcbiAgICAgICAgcmV0dXJuIHQuaWQgPT09IHRoaXMuaWQ7XG4gICAgfVxuICAgIGNyZWF0ZSh0KSB7XG4gICAgICAgIHJldHVybiBDKHQubG9hZCgpLCAodCA9PiBuZXcgQ29tcG9zaXRpb25Db250ZXh0KCsrdGhpcy5pZCwgdCkpKTtcbiAgICB9XG4gICAgaW52YWxpZGF0ZSgpIHtcbiAgICAgICAgdGhpcy5pZCsrO1xuICAgIH1cbn1cblxuY2xhc3MgQ2hhbmdlSW5mbyB7XG4gICAgY29uc3RydWN0b3IodCwgZSwgaSwgcykge1xuICAgICAgICB0aGlzLnZpZXcgPSB0O1xuICAgICAgICB0aGlzLnZpZXdNb2RlbCA9IGU7XG4gICAgICAgIHRoaXMubW9kZWwgPSBpO1xuICAgICAgICB0aGlzLnNyYyA9IHM7XG4gICAgfVxuICAgIGxvYWQoKSB7XG4gICAgICAgIGlmIChrdCh0aGlzLnZpZXcpIHx8IGt0KHRoaXMudmlld01vZGVsKSkgcmV0dXJuIFByb21pc2UuYWxsKFsgdGhpcy52aWV3LCB0aGlzLnZpZXdNb2RlbCBdKS50aGVuKCgoW3QsIGVdKSA9PiBuZXcgTG9hZGVkQ2hhbmdlSW5mbyh0LCBlLCB0aGlzLm1vZGVsLCB0aGlzLnNyYykpKTsgZWxzZSByZXR1cm4gbmV3IExvYWRlZENoYW5nZUluZm8odGhpcy52aWV3LCB0aGlzLnZpZXdNb2RlbCwgdGhpcy5tb2RlbCwgdGhpcy5zcmMpO1xuICAgIH1cbn1cblxuY2xhc3MgTG9hZGVkQ2hhbmdlSW5mbyB7XG4gICAgY29uc3RydWN0b3IodCwgZSwgaSwgcykge1xuICAgICAgICB0aGlzLnZpZXcgPSB0O1xuICAgICAgICB0aGlzLnZpZXdNb2RlbCA9IGU7XG4gICAgICAgIHRoaXMubW9kZWwgPSBpO1xuICAgICAgICB0aGlzLnNyYyA9IHM7XG4gICAgfVxufVxuXG5jbGFzcyBDb21wb3NpdGlvbkNvbnRleHQge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUpIHtcbiAgICAgICAgdGhpcy5pZCA9IHQ7XG4gICAgICAgIHRoaXMuY2hhbmdlID0gZTtcbiAgICB9XG59XG5cbmNsYXNzIENvbXBvc2l0aW9uQ29udHJvbGxlciB7XG4gICAgY29uc3RydWN0b3IodCwgZSwgaSwgcywgbikge1xuICAgICAgICB0aGlzLmNvbnRyb2xsZXIgPSB0O1xuICAgICAgICB0aGlzLnN0YXJ0ID0gZTtcbiAgICAgICAgdGhpcy5zdG9wID0gaTtcbiAgICAgICAgdGhpcy51cGRhdGUgPSBzO1xuICAgICAgICB0aGlzLmNvbnRleHQgPSBuO1xuICAgICAgICB0aGlzLnN0YXRlID0gMDtcbiAgICB9XG4gICAgYWN0aXZhdGUodCkge1xuICAgICAgICBpZiAoMCAhPT0gdGhpcy5zdGF0ZSkgdGhyb3cgbmV3IEVycm9yKGBBVVIwODA3OiR7dGhpcy5jb250cm9sbGVyLm5hbWV9YCk7XG4gICAgICAgIHRoaXMuc3RhdGUgPSAxO1xuICAgICAgICByZXR1cm4gdGhpcy5zdGFydCh0KTtcbiAgICB9XG4gICAgZGVhY3RpdmF0ZSh0KSB7XG4gICAgICAgIHN3aXRjaCAodGhpcy5zdGF0ZSkge1xuICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgIHRoaXMuc3RhdGUgPSAtMTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnN0b3AodCk7XG5cbiAgICAgICAgICBjYXNlIC0xOlxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiQVVSMDgwOFwiKTtcblxuICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICB0aGlzLnN0YXRlID0gLTE7XG4gICAgICAgIH1cbiAgICB9XG59XG5cbmNsYXNzIEF1U2xvdCB7XG4gICAgY29uc3RydWN0b3IodCwgZSwgaSwgcykge1xuICAgICAgICB2YXIgbiwgcjtcbiAgICAgICAgdGhpcy5OaSA9IG51bGw7XG4gICAgICAgIHRoaXMuV2kgPSBudWxsO1xuICAgICAgICBsZXQgbztcbiAgICAgICAgY29uc3QgbCA9IGUuYXVTbG90O1xuICAgICAgICBjb25zdCBoID0gbnVsbCA9PT0gKHIgPSBudWxsID09PSAobiA9IGkuaW5zdHJ1Y3Rpb24pIHx8IHZvaWQgMCA9PT0gbiA/IHZvaWQgMCA6IG4ucHJvamVjdGlvbnMpIHx8IHZvaWQgMCA9PT0gciA/IHZvaWQgMCA6IHJbbC5uYW1lXTtcbiAgICAgICAgaWYgKG51bGwgPT0gaCkge1xuICAgICAgICAgICAgbyA9IHMuZ2V0Vmlld0ZhY3RvcnkobC5mYWxsYmFjaywgaS5jb250cm9sbGVyLmNvbnRhaW5lcik7XG4gICAgICAgICAgICB0aGlzLkhpID0gZmFsc2U7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBvID0gcy5nZXRWaWV3RmFjdG9yeShoLCBpLnBhcmVudC5jb250cm9sbGVyLmNvbnRhaW5lcik7XG4gICAgICAgICAgICB0aGlzLkhpID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLkxpID0gaTtcbiAgICAgICAgdGhpcy52aWV3ID0gby5jcmVhdGUoKS5zZXRMb2NhdGlvbih0KTtcbiAgICB9XG4gICAgc3RhdGljIGdldCBpbmplY3QoKSB7XG4gICAgICAgIHJldHVybiBbIG9zLCBrcywgS2ksIFBpIF07XG4gICAgfVxuICAgIGJpbmRpbmcodCwgZSwgaSkge1xuICAgICAgICB2YXIgcztcbiAgICAgICAgdGhpcy5OaSA9IHRoaXMuJGNvbnRyb2xsZXIuc2NvcGUucGFyZW50U2NvcGU7XG4gICAgICAgIGxldCBuO1xuICAgICAgICBpZiAodGhpcy5IaSkge1xuICAgICAgICAgICAgbiA9IHRoaXMuTGkuY29udHJvbGxlci5zY29wZS5wYXJlbnRTY29wZTtcbiAgICAgICAgICAgICh0aGlzLldpID0gVS5mcm9tUGFyZW50KG4sIG4uYmluZGluZ0NvbnRleHQpKS5vdmVycmlkZUNvbnRleHQuJGhvc3QgPSBudWxsICE9PSAocyA9IHRoaXMuZXhwb3NlKSAmJiB2b2lkIDAgIT09IHMgPyBzIDogdGhpcy5OaS5iaW5kaW5nQ29udGV4dDtcbiAgICAgICAgfVxuICAgIH1cbiAgICBhdHRhY2hpbmcodCwgZSwgaSkge1xuICAgICAgICByZXR1cm4gdGhpcy52aWV3LmFjdGl2YXRlKHQsIHRoaXMuJGNvbnRyb2xsZXIsIGksIHRoaXMuSGkgPyB0aGlzLldpIDogdGhpcy5OaSk7XG4gICAgfVxuICAgIGRldGFjaGluZyh0LCBlLCBpKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnZpZXcuZGVhY3RpdmF0ZSh0LCB0aGlzLiRjb250cm9sbGVyLCBpKTtcbiAgICB9XG4gICAgZXhwb3NlQ2hhbmdlZCh0KSB7XG4gICAgICAgIGlmICh0aGlzLkhpICYmIG51bGwgIT0gdGhpcy5XaSkgdGhpcy5XaS5vdmVycmlkZUNvbnRleHQuJGhvc3QgPSB0O1xuICAgIH1cbiAgICBkaXNwb3NlKCkge1xuICAgICAgICB0aGlzLnZpZXcuZGlzcG9zZSgpO1xuICAgICAgICB0aGlzLnZpZXcgPSB2b2lkIDA7XG4gICAgfVxuICAgIGFjY2VwdCh0KSB7XG4gICAgICAgIHZhciBlO1xuICAgICAgICBpZiAodHJ1ZSA9PT0gKG51bGwgPT09IChlID0gdGhpcy52aWV3KSB8fCB2b2lkIDAgPT09IGUgPyB2b2lkIDAgOiBlLmFjY2VwdCh0KSkpIHJldHVybiB0cnVlO1xuICAgIH1cbn1cblxub3QoWyBTdCBdLCBBdVNsb3QucHJvdG90eXBlLCBcImV4cG9zZVwiLCB2b2lkIDApO1xuXG5qZSh7XG4gICAgbmFtZTogXCJhdS1zbG90XCIsXG4gICAgdGVtcGxhdGU6IG51bGwsXG4gICAgY29udGFpbmVybGVzczogdHJ1ZVxufSkoQXVTbG90KTtcblxuY29uc3QgV3IgPSAvPHNjcmlwdFxcYltePF0qKD86KD8hPFxcL3NjcmlwdD4pPFtePF0qKSo8XFwvc2NyaXB0Pi9naTtcblxuY29uc3QgSHIgPSBsLmNyZWF0ZUludGVyZmFjZShcIklTYW5pdGl6ZXJcIiwgKHQgPT4gdC5zaW5nbGV0b24oY2xhc3Mge1xuICAgIHNhbml0aXplKHQpIHtcbiAgICAgICAgcmV0dXJuIHQucmVwbGFjZShXciwgXCJcIik7XG4gICAgfVxufSkpKTtcblxubGV0IHpyID0gY2xhc3MgU2FuaXRpemVWYWx1ZUNvbnZlcnRlciB7XG4gICAgY29uc3RydWN0b3IodCkge1xuICAgICAgICB0aGlzLnppID0gdDtcbiAgICB9XG4gICAgdG9WaWV3KHQpIHtcbiAgICAgICAgaWYgKG51bGwgPT0gdCkgcmV0dXJuIG51bGw7XG4gICAgICAgIHJldHVybiB0aGlzLnppLnNhbml0aXplKHQpO1xuICAgIH1cbn07XG5cbnpyID0gb3QoWyBsdCgwLCBIcikgXSwgenIpO1xuXG5ydChcInNhbml0aXplXCIpKHpyKTtcblxubGV0IEdyID0gY2xhc3MgVmlld1ZhbHVlQ29udmVydGVyIHtcbiAgICBjb25zdHJ1Y3Rvcih0KSB7XG4gICAgICAgIHRoaXMuR2kgPSB0O1xuICAgIH1cbiAgICB0b1ZpZXcodCwgZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5HaS5nZXRWaWV3Q29tcG9uZW50Rm9yT2JqZWN0KHQsIGUpO1xuICAgIH1cbn07XG5cbkdyID0gb3QoWyBsdCgwLCBEaSkgXSwgR3IpO1xuXG5ydChcInZpZXdcIikoR3IpO1xuXG5jb25zdCBYciA9IERlYm91bmNlQmluZGluZ0JlaGF2aW9yO1xuXG5jb25zdCBLciA9IE9uZVRpbWVCaW5kaW5nQmVoYXZpb3I7XG5cbmNvbnN0IFlyID0gVG9WaWV3QmluZGluZ0JlaGF2aW9yO1xuXG5jb25zdCBRciA9IEZyb21WaWV3QmluZGluZ0JlaGF2aW9yO1xuXG5jb25zdCBaciA9IFNpZ25hbEJpbmRpbmdCZWhhdmlvcjtcblxuY29uc3QgSnIgPSBUaHJvdHRsZUJpbmRpbmdCZWhhdmlvcjtcblxuY29uc3QgdG8gPSBUd29XYXlCaW5kaW5nQmVoYXZpb3I7XG5cbmNvbnN0IGVvID0gVGVtcGxhdGVDb21waWxlcjtcblxuY29uc3QgaW8gPSBOb2RlT2JzZXJ2ZXJMb2NhdG9yO1xuXG5jb25zdCBzbyA9IFsgZW8sIGlvIF07XG5cbmNvbnN0IG5vID0gU1ZHQW5hbHl6ZXI7XG5cbmNvbnN0IHJvID0gR3Q7XG5cbmNvbnN0IG9vID0genQ7XG5cbmNvbnN0IGxvID0gSHQ7XG5cbmNvbnN0IGhvID0gV3Q7XG5cbmNvbnN0IGFvID0gWHQ7XG5cbmNvbnN0IGNvID0gWyBsbywgaG8sIGFvIF07XG5cbmNvbnN0IHVvID0gWyBybywgb28gXTtcblxuY29uc3QgZm8gPSB4bjtcblxuY29uc3QgbW8gPSBibjtcblxuY29uc3Qgdm8gPSB5bjtcblxuY29uc3QgcG8gPSBnbjtcblxuY29uc3QgZ28gPSB2bjtcblxuY29uc3Qgd28gPSBwbjtcblxuY29uc3QgYm8gPSB3bjtcblxuY29uc3QgeG8gPSBCbjtcblxuY29uc3QgeW8gPSBrbjtcblxuY29uc3Qga28gPSBDbjtcblxuY29uc3QgQ28gPSBBbjtcblxuY29uc3QgQW8gPSBTbjtcblxuY29uc3QgU28gPSBFbjtcblxuY29uc3QgUm8gPSBSbjtcblxuY29uc3QgRW8gPSBJbjtcblxuY29uc3QgQm8gPSBbIG1vLCBnbywgcG8sIHdvLCBibywgZm8sIHZvLCB4bywgeW8sIGtvLCBDbywgU28sIFJvLCBBbywgRW8gXTtcblxuY29uc3QgSW8gPSB6cjtcblxuY29uc3QgVG8gPSBHcjtcblxuY29uc3QgRG8gPSBGcmVxdWVudE11dGF0aW9ucztcblxuY29uc3QgUG8gPSBPYnNlcnZlU2hhbGxvdztcblxuY29uc3QgT28gPSBJZjtcblxuY29uc3QgJG8gPSBFbHNlO1xuXG5jb25zdCBMbyA9IFJlcGVhdDtcblxuY29uc3QgcW8gPSBXaXRoO1xuXG5jb25zdCBNbyA9IEVyO1xuXG5jb25zdCBVbyA9IEJyO1xuXG5jb25zdCBGbyA9IElyO1xuXG5jb25zdCBWbyA9IFRyO1xuXG5jb25zdCBfbyA9IERyO1xuXG5jb25zdCBqbyA9IFByO1xuXG5jb25zdCBObyA9IE9yO1xuXG5jb25zdCBXbyA9IExyO1xuXG5jb25zdCBIbyA9IHFyO1xuXG5jb25zdCB6byA9IE1yO1xuXG5jb25zdCBHbyA9IEF0dHJCaW5kaW5nQmVoYXZpb3I7XG5cbmNvbnN0IFhvID0gU2VsZkJpbmRpbmdCZWhhdmlvcjtcblxuY29uc3QgS28gPSBVcGRhdGVUcmlnZ2VyQmluZGluZ0JlaGF2aW9yO1xuXG5jb25zdCBZbyA9IEF1UmVuZGVyO1xuXG5jb25zdCBRbyA9IEF1Q29tcG9zZTtcblxuY29uc3QgWm8gPSBQb3J0YWw7XG5cbmNvbnN0IEpvID0gRm9jdXM7XG5cbmNvbnN0IHRsID0gYnI7XG5cbmNvbnN0IGVsID0gWyBYciwgS3IsIFlyLCBRciwgWnIsIEpyLCB0bywgSW8sIFRvLCBEbywgUG8sIE9vLCAkbywgTG8sIHFvLCBNbywgVW8sIEZvLCBWbywgX28sIGpvLCBObywgV28sIEhvLCB6bywgR28sIFhvLCBLbywgWW8sIFFvLCBabywgSm8sIHRsLCBBdVNsb3QgXTtcblxuY29uc3QgaWwgPSBMcztcblxuY29uc3Qgc2wgPSBQcztcblxuY29uc3QgbmwgPSBEcztcblxuY29uc3QgcmwgPSBNcztcblxuY29uc3Qgb2wgPSBGcztcblxuY29uc3QgbGwgPSAkcztcblxuY29uc3QgaGwgPSBVcztcblxuY29uc3QgYWwgPSBxcztcblxuY29uc3QgY2wgPSBUcztcblxuY29uc3QgdWwgPSBPcztcblxuY29uc3QgZmwgPSBXcztcblxuY29uc3QgZGwgPSBLcztcblxuY29uc3QgbWwgPSBIcztcblxuY29uc3QgdmwgPSB6cztcblxuY29uc3QgcGwgPSBHcztcblxuY29uc3QgZ2wgPSBYcztcblxuY29uc3Qgd2wgPSBOcztcblxuY29uc3QgYmwgPSBZcztcblxuY29uc3QgeGwgPSBbIGhsLCBvbCwgaWwsIGFsLCBybCwgY2wsIG5sLCBzbCwgdWwsIGxsLCBmbCwgZGwsIG1sLCB2bCwgcGwsIGdsLCB3bCwgYmwgXTtcblxuY29uc3QgeWwgPSBrbChvKTtcblxuZnVuY3Rpb24ga2wodCkge1xuICAgIHJldHVybiB7XG4gICAgICAgIG9wdGlvbnNQcm92aWRlcjogdCxcbiAgICAgICAgcmVnaXN0ZXIoZSkge1xuICAgICAgICAgICAgY29uc3QgaSA9IHtcbiAgICAgICAgICAgICAgICBjb2VyY2luZ09wdGlvbnM6IHtcbiAgICAgICAgICAgICAgICAgICAgZW5hYmxlQ29lcmNpb246IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICBjb2VyY2VOdWxsaXNoOiBmYWxzZVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB0KGkpO1xuICAgICAgICAgICAgcmV0dXJuIGUucmVnaXN0ZXIoYy5pbnN0YW5jZShGLCBpLmNvZXJjaW5nT3B0aW9ucyksIC4uLnNvLCAuLi5lbCwgLi4uY28sIC4uLkJvLCAuLi54bCk7XG4gICAgICAgIH0sXG4gICAgICAgIGN1c3RvbWl6ZShlKSB7XG4gICAgICAgICAgICByZXR1cm4ga2wobnVsbCAhPT0gZSAmJiB2b2lkIDAgIT09IGUgPyBlIDogdCk7XG4gICAgICAgIH1cbiAgICB9O1xufVxuXG5jb25zdCBDbCA9IGwuY3JlYXRlSW50ZXJmYWNlKFwiSUF1cmVsaWFcIik7XG5cbmNsYXNzIEF1cmVsaWEge1xuICAgIGNvbnN0cnVjdG9yKHQgPSBsLmNyZWF0ZUNvbnRhaW5lcigpKSB7XG4gICAgICAgIHRoaXMuY29udGFpbmVyID0gdDtcbiAgICAgICAgdGhpcy5pciA9IGZhbHNlO1xuICAgICAgICB0aGlzLlhpID0gZmFsc2U7XG4gICAgICAgIHRoaXMuS2kgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5ZaSA9IHZvaWQgMDtcbiAgICAgICAgdGhpcy5uZXh0ID0gdm9pZCAwO1xuICAgICAgICB0aGlzLlFpID0gdm9pZCAwO1xuICAgICAgICB0aGlzLlppID0gdm9pZCAwO1xuICAgICAgICBpZiAodC5oYXMoQ2wsIHRydWUpKSB0aHJvdyBuZXcgRXJyb3IoXCJBVVIwNzY4XCIpO1xuICAgICAgICB0LnJlZ2lzdGVyUmVzb2x2ZXIoQ2wsIG5ldyB4KFwiSUF1cmVsaWFcIiwgdGhpcykpO1xuICAgICAgICB0LnJlZ2lzdGVyUmVzb2x2ZXIodHMsIHRoaXMuSmkgPSBuZXcgeChcIklBcHBSb290XCIpKTtcbiAgICB9XG4gICAgZ2V0IGlzUnVubmluZygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuaXI7XG4gICAgfVxuICAgIGdldCBpc1N0YXJ0aW5nKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5YaTtcbiAgICB9XG4gICAgZ2V0IGlzU3RvcHBpbmcoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLktpO1xuICAgIH1cbiAgICBnZXQgcm9vdCgpIHtcbiAgICAgICAgaWYgKG51bGwgPT0gdGhpcy5ZaSkge1xuICAgICAgICAgICAgaWYgKG51bGwgPT0gdGhpcy5uZXh0KSB0aHJvdyBuZXcgRXJyb3IoXCJBVVIwNzY3XCIpO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMubmV4dDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5ZaTtcbiAgICB9XG4gICAgcmVnaXN0ZXIoLi4udCkge1xuICAgICAgICB0aGlzLmNvbnRhaW5lci5yZWdpc3RlciguLi50KTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIGFwcCh0KSB7XG4gICAgICAgIHRoaXMubmV4dCA9IG5ldyBBcHBSb290KHQsIHRoaXMudHModC5ob3N0KSwgdGhpcy5jb250YWluZXIsIHRoaXMuSmkpO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgZW5oYW5jZSh0LCBlKSB7XG4gICAgICAgIHZhciBpO1xuICAgICAgICBjb25zdCBzID0gbnVsbCAhPT0gKGkgPSB0LmNvbnRhaW5lcikgJiYgdm9pZCAwICE9PSBpID8gaSA6IHRoaXMuY29udGFpbmVyLmNyZWF0ZUNoaWxkKCk7XG4gICAgICAgIGNvbnN0IG4gPSB0Lmhvc3Q7XG4gICAgICAgIGNvbnN0IHIgPSB0aGlzLnRzKG4pO1xuICAgICAgICBjb25zdCBvID0gdC5jb21wb25lbnQ7XG4gICAgICAgIGxldCBsO1xuICAgICAgICBpZiAoQ3QobykpIHtcbiAgICAgICAgICAgIHMucmVnaXN0ZXJSZXNvbHZlcihyLkhUTUxFbGVtZW50LCBzLnJlZ2lzdGVyUmVzb2x2ZXIoci5FbGVtZW50LCBzLnJlZ2lzdGVyUmVzb2x2ZXIobnMsIG5ldyB4KFwiRWxlbWVudFJlc29sdmVyXCIsIG4pKSkpO1xuICAgICAgICAgICAgbCA9IHMuaW52b2tlKG8pO1xuICAgICAgICB9IGVsc2UgbCA9IG87XG4gICAgICAgIHMucmVnaXN0ZXJSZXNvbHZlcihycywgbmV3IHgoXCJJRXZlbnRUYXJnZXRcIiwgbikpO1xuICAgICAgICBlID0gbnVsbCAhPT0gZSAmJiB2b2lkIDAgIT09IGUgPyBlIDogbnVsbDtcbiAgICAgICAgY29uc3QgaCA9IENvbnRyb2xsZXIuJGVsKHMsIGwsIG4sIG51bGwsIEN1c3RvbUVsZW1lbnREZWZpbml0aW9uLmNyZWF0ZSh7XG4gICAgICAgICAgICBuYW1lOiBzaS5nZW5lcmF0ZU5hbWUoKSxcbiAgICAgICAgICAgIHRlbXBsYXRlOiBuLFxuICAgICAgICAgICAgZW5oYW5jZTogdHJ1ZVxuICAgICAgICB9KSk7XG4gICAgICAgIHJldHVybiBDKGguYWN0aXZhdGUoaCwgZSwgMiksICgoKSA9PiBoKSk7XG4gICAgfVxuICAgIGFzeW5jIHdhaXRGb3JJZGxlKCkge1xuICAgICAgICBjb25zdCB0ID0gdGhpcy5yb290LnBsYXRmb3JtO1xuICAgICAgICBhd2FpdCB0LmRvbVdyaXRlUXVldWUueWllbGQoKTtcbiAgICAgICAgYXdhaXQgdC5kb21SZWFkUXVldWUueWllbGQoKTtcbiAgICAgICAgYXdhaXQgdC50YXNrUXVldWUueWllbGQoKTtcbiAgICB9XG4gICAgdHMoZSkge1xuICAgICAgICBsZXQgaTtcbiAgICAgICAgaWYgKCF0aGlzLmNvbnRhaW5lci5oYXMoS3QsIGZhbHNlKSkge1xuICAgICAgICAgICAgaWYgKG51bGwgPT09IGUub3duZXJEb2N1bWVudC5kZWZhdWx0VmlldykgdGhyb3cgbmV3IEVycm9yKFwiQVVSMDc2OVwiKTtcbiAgICAgICAgICAgIGkgPSBuZXcgdChlLm93bmVyRG9jdW1lbnQuZGVmYXVsdFZpZXcpO1xuICAgICAgICAgICAgdGhpcy5jb250YWluZXIucmVnaXN0ZXIoYy5pbnN0YW5jZShLdCwgaSkpO1xuICAgICAgICB9IGVsc2UgaSA9IHRoaXMuY29udGFpbmVyLmdldChLdCk7XG4gICAgICAgIHJldHVybiBpO1xuICAgIH1cbiAgICBzdGFydCh0ID0gdGhpcy5uZXh0KSB7XG4gICAgICAgIGlmIChudWxsID09IHQpIHRocm93IG5ldyBFcnJvcihcIkFVUjA3NzBcIik7XG4gICAgICAgIGlmICh0aGlzLlFpIGluc3RhbmNlb2YgUHJvbWlzZSkgcmV0dXJuIHRoaXMuUWk7XG4gICAgICAgIHJldHVybiB0aGlzLlFpID0gQyh0aGlzLnN0b3AoKSwgKCgpID0+IHtcbiAgICAgICAgICAgIFJlZmxlY3Quc2V0KHQuaG9zdCwgXCIkYXVyZWxpYVwiLCB0aGlzKTtcbiAgICAgICAgICAgIHRoaXMuSmkucHJlcGFyZSh0aGlzLllpID0gdCk7XG4gICAgICAgICAgICB0aGlzLlhpID0gdHJ1ZTtcbiAgICAgICAgICAgIHJldHVybiBDKHQuYWN0aXZhdGUoKSwgKCgpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLmlyID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB0aGlzLlhpID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgdGhpcy5RaSA9IHZvaWQgMDtcbiAgICAgICAgICAgICAgICB0aGlzLmVzKHQsIFwiYXUtc3RhcnRlZFwiLCB0Lmhvc3QpO1xuICAgICAgICAgICAgfSkpO1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIHN0b3AodCA9IGZhbHNlKSB7XG4gICAgICAgIGlmICh0aGlzLlppIGluc3RhbmNlb2YgUHJvbWlzZSkgcmV0dXJuIHRoaXMuWmk7XG4gICAgICAgIGlmICh0cnVlID09PSB0aGlzLmlyKSB7XG4gICAgICAgICAgICBjb25zdCBlID0gdGhpcy5ZaTtcbiAgICAgICAgICAgIHRoaXMuaXIgPSBmYWxzZTtcbiAgICAgICAgICAgIHRoaXMuS2kgPSB0cnVlO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuWmkgPSBDKGUuZGVhY3RpdmF0ZSgpLCAoKCkgPT4ge1xuICAgICAgICAgICAgICAgIFJlZmxlY3QuZGVsZXRlUHJvcGVydHkoZS5ob3N0LCBcIiRhdXJlbGlhXCIpO1xuICAgICAgICAgICAgICAgIGlmICh0KSBlLmRpc3Bvc2UoKTtcbiAgICAgICAgICAgICAgICB0aGlzLllpID0gdm9pZCAwO1xuICAgICAgICAgICAgICAgIHRoaXMuSmkuZGlzcG9zZSgpO1xuICAgICAgICAgICAgICAgIHRoaXMuS2kgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICB0aGlzLmVzKGUsIFwiYXUtc3RvcHBlZFwiLCBlLmhvc3QpO1xuICAgICAgICAgICAgfSkpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGRpc3Bvc2UoKSB7XG4gICAgICAgIGlmICh0aGlzLmlyIHx8IHRoaXMuS2kpIHRocm93IG5ldyBFcnJvcihcIkFVUjA3NzFcIik7XG4gICAgICAgIHRoaXMuY29udGFpbmVyLmRpc3Bvc2UoKTtcbiAgICB9XG4gICAgZXModCwgZSwgaSkge1xuICAgICAgICBjb25zdCBzID0gbmV3IHQucGxhdGZvcm0ud2luZG93LkN1c3RvbUV2ZW50KGUsIHtcbiAgICAgICAgICAgIGRldGFpbDogdGhpcyxcbiAgICAgICAgICAgIGJ1YmJsZXM6IHRydWUsXG4gICAgICAgICAgICBjYW5jZWxhYmxlOiB0cnVlXG4gICAgICAgIH0pO1xuICAgICAgICBpLmRpc3BhdGNoRXZlbnQocyk7XG4gICAgfVxufVxuXG52YXIgQWw7XG5cbihmdW5jdGlvbih0KSB7XG4gICAgdFt0W1wiRWxlbWVudFwiXSA9IDFdID0gXCJFbGVtZW50XCI7XG4gICAgdFt0W1wiQXR0cmlidXRlXCJdID0gMl0gPSBcIkF0dHJpYnV0ZVwiO1xufSkoQWwgfHwgKEFsID0ge30pKTtcblxuY29uc3QgU2wgPSBsLmNyZWF0ZUludGVyZmFjZShcIklEaWFsb2dTZXJ2aWNlXCIpO1xuXG5jb25zdCBSbCA9IGwuY3JlYXRlSW50ZXJmYWNlKFwiSURpYWxvZ0NvbnRyb2xsZXJcIik7XG5cbmNvbnN0IEVsID0gbC5jcmVhdGVJbnRlcmZhY2UoXCJJRGlhbG9nRG9tUmVuZGVyZXJcIik7XG5cbmNvbnN0IEJsID0gbC5jcmVhdGVJbnRlcmZhY2UoXCJJRGlhbG9nRG9tXCIpO1xuXG5jb25zdCBJbCA9IGwuY3JlYXRlSW50ZXJmYWNlKFwiSURpYWxvZ0dsb2JhbFNldHRpbmdzXCIpO1xuXG5jbGFzcyBEaWFsb2dPcGVuUmVzdWx0IHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlKSB7XG4gICAgICAgIHRoaXMud2FzQ2FuY2VsbGVkID0gdDtcbiAgICAgICAgdGhpcy5kaWFsb2cgPSBlO1xuICAgIH1cbiAgICBzdGF0aWMgY3JlYXRlKHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBEaWFsb2dPcGVuUmVzdWx0KHQsIGUpO1xuICAgIH1cbn1cblxuY2xhc3MgRGlhbG9nQ2xvc2VSZXN1bHQge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUpIHtcbiAgICAgICAgdGhpcy5zdGF0dXMgPSB0O1xuICAgICAgICB0aGlzLnZhbHVlID0gZTtcbiAgICB9XG4gICAgc3RhdGljIGNyZWF0ZSh0LCBlKSB7XG4gICAgICAgIHJldHVybiBuZXcgRGlhbG9nQ2xvc2VSZXN1bHQodCwgZSk7XG4gICAgfVxufVxuXG52YXIgVGw7XG5cbihmdW5jdGlvbih0KSB7XG4gICAgdFtcIk9rXCJdID0gXCJva1wiO1xuICAgIHRbXCJFcnJvclwiXSA9IFwiZXJyb3JcIjtcbiAgICB0W1wiQ2FuY2VsXCJdID0gXCJjYW5jZWxcIjtcbiAgICB0W1wiQWJvcnRcIl0gPSBcImFib3J0XCI7XG59KShUbCB8fCAoVGwgPSB7fSkpO1xuXG5jbGFzcyBEaWFsb2dDb250cm9sbGVyIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlKSB7XG4gICAgICAgIHRoaXMucCA9IHQ7XG4gICAgICAgIHRoaXMuY3RuID0gZTtcbiAgICAgICAgdGhpcy5jbG9zZWQgPSBuZXcgUHJvbWlzZSgoKHQsIGUpID0+IHtcbiAgICAgICAgICAgIHRoaXMuJHQgPSB0O1xuICAgICAgICAgICAgdGhpcy5CdCA9IGU7XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgc3RhdGljIGdldCBpbmplY3QoKSB7XG4gICAgICAgIHJldHVybiBbIEt0LCBnIF07XG4gICAgfVxuICAgIGFjdGl2YXRlKHQpIHtcbiAgICAgICAgdmFyIGU7XG4gICAgICAgIGNvbnN0IGkgPSB0aGlzLmN0bi5jcmVhdGVDaGlsZCgpO1xuICAgICAgICBjb25zdCB7bW9kZWw6IHMsIHRlbXBsYXRlOiBuLCByZWplY3RPbkNhbmNlbDogcn0gPSB0O1xuICAgICAgICBjb25zdCBvID0gaS5nZXQoRWwpO1xuICAgICAgICBjb25zdCBsID0gbnVsbCAhPT0gKGUgPSB0Lmhvc3QpICYmIHZvaWQgMCAhPT0gZSA/IGUgOiB0aGlzLnAuZG9jdW1lbnQuYm9keTtcbiAgICAgICAgY29uc3QgaCA9IHRoaXMuZG9tID0gby5yZW5kZXIobCwgdCk7XG4gICAgICAgIGNvbnN0IGEgPSBpLmhhcyhycywgdHJ1ZSkgPyBpLmdldChycykgOiBudWxsO1xuICAgICAgICBjb25zdCB1ID0gaC5jb250ZW50SG9zdDtcbiAgICAgICAgdGhpcy5zZXR0aW5ncyA9IHQ7XG4gICAgICAgIGlmIChudWxsID09IGEgfHwgIWEuY29udGFpbnMobCkpIGkucmVnaXN0ZXIoYy5pbnN0YW5jZShycywgbCkpO1xuICAgICAgICBpLnJlZ2lzdGVyKGMuaW5zdGFuY2UobnMsIHUpLCBjLmluc3RhbmNlKEJsLCBoKSk7XG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgoZSA9PiB7XG4gICAgICAgICAgICB2YXIgbiwgcjtcbiAgICAgICAgICAgIGNvbnN0IG8gPSBPYmplY3QuYXNzaWduKHRoaXMuY21wID0gdGhpcy5nZXRPckNyZWF0ZVZtKGksIHQsIHUpLCB7XG4gICAgICAgICAgICAgICAgJGRpYWxvZzogdGhpc1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBlKG51bGwgIT09IChyID0gbnVsbCA9PT0gKG4gPSBvLmNhbkFjdGl2YXRlKSB8fCB2b2lkIDAgPT09IG4gPyB2b2lkIDAgOiBuLmNhbGwobywgcykpICYmIHZvaWQgMCAhPT0gciA/IHIgOiB0cnVlKTtcbiAgICAgICAgfSkpLnRoZW4oKGUgPT4ge1xuICAgICAgICAgICAgdmFyIG87XG4gICAgICAgICAgICBpZiAodHJ1ZSAhPT0gZSkge1xuICAgICAgICAgICAgICAgIGguZGlzcG9zZSgpO1xuICAgICAgICAgICAgICAgIGlmIChyKSB0aHJvdyBEbChudWxsLCBcIkRpYWxvZyBhY3RpdmF0aW9uIHJlamVjdGVkXCIpO1xuICAgICAgICAgICAgICAgIHJldHVybiBEaWFsb2dPcGVuUmVzdWx0LmNyZWF0ZSh0cnVlLCB0aGlzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IGwgPSB0aGlzLmNtcDtcbiAgICAgICAgICAgIHJldHVybiBDKG51bGwgPT09IChvID0gbC5hY3RpdmF0ZSkgfHwgdm9pZCAwID09PSBvID8gdm9pZCAwIDogby5jYWxsKGwsIHMpLCAoKCkgPT4ge1xuICAgICAgICAgICAgICAgIHZhciBlO1xuICAgICAgICAgICAgICAgIGNvbnN0IHMgPSB0aGlzLmNvbnRyb2xsZXIgPSBDb250cm9sbGVyLiRlbChpLCBsLCB1LCBudWxsLCBDdXN0b21FbGVtZW50RGVmaW5pdGlvbi5jcmVhdGUobnVsbCAhPT0gKGUgPSB0aGlzLmdldERlZmluaXRpb24obCkpICYmIHZvaWQgMCAhPT0gZSA/IGUgOiB7XG4gICAgICAgICAgICAgICAgICAgIG5hbWU6IHNpLmdlbmVyYXRlTmFtZSgpLFxuICAgICAgICAgICAgICAgICAgICB0ZW1wbGF0ZTogblxuICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gQyhzLmFjdGl2YXRlKHMsIG51bGwsIDIpLCAoKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICB2YXIgZTtcbiAgICAgICAgICAgICAgICAgICAgaC5vdmVybGF5LmFkZEV2ZW50TGlzdGVuZXIobnVsbCAhPT0gKGUgPSB0Lm1vdXNlRXZlbnQpICYmIHZvaWQgMCAhPT0gZSA/IGUgOiBcImNsaWNrXCIsIHRoaXMpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gRGlhbG9nT3BlblJlc3VsdC5jcmVhdGUoZmFsc2UsIHRoaXMpO1xuICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgfSksICh0ID0+IHtcbiAgICAgICAgICAgIGguZGlzcG9zZSgpO1xuICAgICAgICAgICAgdGhyb3cgdDtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICBkZWFjdGl2YXRlKHQsIGUpIHtcbiAgICAgICAgaWYgKHRoaXMuc3MpIHJldHVybiB0aGlzLnNzO1xuICAgICAgICBsZXQgaSA9IHRydWU7XG4gICAgICAgIGNvbnN0IHtjb250cm9sbGVyOiBzLCBkb206IG4sIGNtcDogciwgc2V0dGluZ3M6IHttb3VzZUV2ZW50OiBvLCByZWplY3RPbkNhbmNlbDogbH19ID0gdGhpcztcbiAgICAgICAgY29uc3QgaCA9IERpYWxvZ0Nsb3NlUmVzdWx0LmNyZWF0ZSh0LCBlKTtcbiAgICAgICAgY29uc3QgYSA9IG5ldyBQcm9taXNlKChhID0+IHtcbiAgICAgICAgICAgIHZhciBjLCB1O1xuICAgICAgICAgICAgYShDKG51bGwgIT09ICh1ID0gbnVsbCA9PT0gKGMgPSByLmNhbkRlYWN0aXZhdGUpIHx8IHZvaWQgMCA9PT0gYyA/IHZvaWQgMCA6IGMuY2FsbChyLCBoKSkgJiYgdm9pZCAwICE9PSB1ID8gdSA6IHRydWUsIChhID0+IHtcbiAgICAgICAgICAgICAgICB2YXIgYztcbiAgICAgICAgICAgICAgICBpZiAodHJ1ZSAhPT0gYSkge1xuICAgICAgICAgICAgICAgICAgICBpID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc3MgPSB2b2lkIDA7XG4gICAgICAgICAgICAgICAgICAgIGlmIChsKSB0aHJvdyBEbChudWxsLCBcIkRpYWxvZyBjYW5jZWxsYXRpb24gcmVqZWN0ZWRcIik7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBEaWFsb2dDbG9zZVJlc3VsdC5jcmVhdGUoXCJhYm9ydFwiKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIEMobnVsbCA9PT0gKGMgPSByLmRlYWN0aXZhdGUpIHx8IHZvaWQgMCA9PT0gYyA/IHZvaWQgMCA6IGMuY2FsbChyLCBoKSwgKCgpID0+IEMocy5kZWFjdGl2YXRlKHMsIG51bGwsIDQpLCAoKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBuLmRpc3Bvc2UoKTtcbiAgICAgICAgICAgICAgICAgICAgbi5vdmVybGF5LnJlbW92ZUV2ZW50TGlzdGVuZXIobnVsbCAhPT0gbyAmJiB2b2lkIDAgIT09IG8gPyBvIDogXCJjbGlja1wiLCB0aGlzKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFsICYmIFwiZXJyb3JcIiAhPT0gdCkgdGhpcy4kdChoKTsgZWxzZSB0aGlzLkJ0KERsKGUsIFwiRGlhbG9nIGNhbmNlbGxlZCB3aXRoIGEgcmVqZWN0aW9uIG9uIGNhbmNlbFwiKSk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBoO1xuICAgICAgICAgICAgICAgIH0pKSkpO1xuICAgICAgICAgICAgfSkpKTtcbiAgICAgICAgfSkpLmNhdGNoKCh0ID0+IHtcbiAgICAgICAgICAgIHRoaXMuc3MgPSB2b2lkIDA7XG4gICAgICAgICAgICB0aHJvdyB0O1xuICAgICAgICB9KSk7XG4gICAgICAgIHRoaXMuc3MgPSBpID8gYSA6IHZvaWQgMDtcbiAgICAgICAgcmV0dXJuIGE7XG4gICAgfVxuICAgIG9rKHQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZGVhY3RpdmF0ZShcIm9rXCIsIHQpO1xuICAgIH1cbiAgICBjYW5jZWwodCkge1xuICAgICAgICByZXR1cm4gdGhpcy5kZWFjdGl2YXRlKFwiY2FuY2VsXCIsIHQpO1xuICAgIH1cbiAgICBlcnJvcih0KSB7XG4gICAgICAgIGNvbnN0IGUgPSBQbCh0KTtcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKCh0ID0+IHtcbiAgICAgICAgICAgIHZhciBpLCBzO1xuICAgICAgICAgICAgcmV0dXJuIHQoQyhudWxsID09PSAocyA9IChpID0gdGhpcy5jbXApLmRlYWN0aXZhdGUpIHx8IHZvaWQgMCA9PT0gcyA/IHZvaWQgMCA6IHMuY2FsbChpLCBEaWFsb2dDbG9zZVJlc3VsdC5jcmVhdGUoXCJlcnJvclwiLCBlKSksICgoKSA9PiBDKHRoaXMuY29udHJvbGxlci5kZWFjdGl2YXRlKHRoaXMuY29udHJvbGxlciwgbnVsbCwgNCksICgoKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5kb20uZGlzcG9zZSgpO1xuICAgICAgICAgICAgICAgIHRoaXMuQnQoZSk7XG4gICAgICAgICAgICB9KSkpKSk7XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgaGFuZGxlRXZlbnQodCkge1xuICAgICAgICBpZiAodGhpcy5zZXR0aW5ncy5vdmVybGF5RGlzbWlzcyAmJiAhdGhpcy5kb20uY29udGVudEhvc3QuY29udGFpbnModC50YXJnZXQpKSB0aGlzLmNhbmNlbCgpO1xuICAgIH1cbiAgICBnZXRPckNyZWF0ZVZtKHQsIGUsIGkpIHtcbiAgICAgICAgY29uc3QgcyA9IGUuY29tcG9uZW50O1xuICAgICAgICBpZiAobnVsbCA9PSBzKSByZXR1cm4gbmV3IEVtcHR5Q29tcG9uZW50O1xuICAgICAgICBpZiAoXCJvYmplY3RcIiA9PT0gdHlwZW9mIHMpIHJldHVybiBzO1xuICAgICAgICBjb25zdCBuID0gdGhpcy5wO1xuICAgICAgICB0LnJlZ2lzdGVyUmVzb2x2ZXIobi5IVE1MRWxlbWVudCwgdC5yZWdpc3RlclJlc29sdmVyKG4uRWxlbWVudCwgdC5yZWdpc3RlclJlc29sdmVyKG5zLCBuZXcgeChcIkVsZW1lbnRSZXNvbHZlclwiLCBpKSkpKTtcbiAgICAgICAgcmV0dXJuIHQuaW52b2tlKHMpO1xuICAgIH1cbiAgICBnZXREZWZpbml0aW9uKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IEN0KHQpID8gdCA6IG51bGwgPT09IHQgfHwgdm9pZCAwID09PSB0ID8gdm9pZCAwIDogdC5jb25zdHJ1Y3RvcjtcbiAgICAgICAgcmV0dXJuIHNpLmlzVHlwZShlKSA/IHNpLmdldERlZmluaXRpb24oZSkgOiBudWxsO1xuICAgIH1cbn1cblxuY2xhc3MgRW1wdHlDb21wb25lbnQge31cblxuZnVuY3Rpb24gRGwodCwgZSkge1xuICAgIGNvbnN0IGkgPSBuZXcgRXJyb3IoZSk7XG4gICAgaS53YXNDYW5jZWxsZWQgPSB0cnVlO1xuICAgIGkudmFsdWUgPSB0O1xuICAgIHJldHVybiBpO1xufVxuXG5mdW5jdGlvbiBQbCh0KSB7XG4gICAgY29uc3QgZSA9IG5ldyBFcnJvcjtcbiAgICBlLndhc0NhbmNlbGxlZCA9IGZhbHNlO1xuICAgIGUudmFsdWUgPSB0O1xuICAgIHJldHVybiBlO1xufVxuXG5jbGFzcyBEaWFsb2dTZXJ2aWNlIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlLCBpKSB7XG4gICAgICAgIHRoaXMudXQgPSB0O1xuICAgICAgICB0aGlzLnAgPSBlO1xuICAgICAgICB0aGlzLm9zID0gaTtcbiAgICAgICAgdGhpcy5kbGdzID0gW107XG4gICAgfVxuICAgIGdldCBjb250cm9sbGVycygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZGxncy5zbGljZSgwKTtcbiAgICB9XG4gICAgZ2V0IHRvcCgpIHtcbiAgICAgICAgY29uc3QgdCA9IHRoaXMuZGxncztcbiAgICAgICAgcmV0dXJuIHQubGVuZ3RoID4gMCA/IHRbdC5sZW5ndGggLSAxXSA6IG51bGw7XG4gICAgfVxuICAgIHN0YXRpYyBnZXQgaW5qZWN0KCkge1xuICAgICAgICByZXR1cm4gWyBnLCBLdCwgSWwgXTtcbiAgICB9XG4gICAgc3RhdGljIHJlZ2lzdGVyKHQpIHtcbiAgICAgICAgdC5yZWdpc3RlcihjLnNpbmdsZXRvbihTbCwgdGhpcyksIHhlLmJlZm9yZURlYWN0aXZhdGUoU2wsICh0ID0+IEModC5jbG9zZUFsbCgpLCAodCA9PiB7XG4gICAgICAgICAgICBpZiAodC5sZW5ndGggPiAwKSB0aHJvdyBuZXcgRXJyb3IoYEFVUjA5MDE6JHt0Lmxlbmd0aH1gKTtcbiAgICAgICAgfSkpKSkpO1xuICAgIH1cbiAgICBvcGVuKHQpIHtcbiAgICAgICAgcmV0dXJuICRsKG5ldyBQcm9taXNlKChlID0+IHtcbiAgICAgICAgICAgIHZhciBpO1xuICAgICAgICAgICAgY29uc3QgcyA9IERpYWxvZ1NldHRpbmdzLmZyb20odGhpcy5vcywgdCk7XG4gICAgICAgICAgICBjb25zdCBuID0gbnVsbCAhPT0gKGkgPSBzLmNvbnRhaW5lcikgJiYgdm9pZCAwICE9PSBpID8gaSA6IHRoaXMudXQuY3JlYXRlQ2hpbGQoKTtcbiAgICAgICAgICAgIGUoQyhzLmxvYWQoKSwgKHQgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IGUgPSBuLmludm9rZShEaWFsb2dDb250cm9sbGVyKTtcbiAgICAgICAgICAgICAgICBuLnJlZ2lzdGVyKGMuaW5zdGFuY2UoUmwsIGUpKTtcbiAgICAgICAgICAgICAgICBuLnJlZ2lzdGVyKGMuY2FsbGJhY2soRGlhbG9nQ29udHJvbGxlciwgKCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiQVVSMDkwMlwiKTtcbiAgICAgICAgICAgICAgICB9KSkpO1xuICAgICAgICAgICAgICAgIHJldHVybiBDKGUuYWN0aXZhdGUodCksICh0ID0+IHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCF0Lndhc0NhbmNlbGxlZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKDEgPT09IHRoaXMuZGxncy5wdXNoKGUpKSB0aGlzLnAud2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIHRoaXMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdCA9ICgpID0+IHRoaXMucmVtb3ZlKGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgZS5jbG9zZWQudGhlbih0LCB0KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdDtcbiAgICAgICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICB9KSkpO1xuICAgICAgICB9KSkpO1xuICAgIH1cbiAgICBjbG9zZUFsbCgpIHtcbiAgICAgICAgcmV0dXJuIFByb21pc2UuYWxsKEFycmF5LmZyb20odGhpcy5kbGdzKS5tYXAoKHQgPT4ge1xuICAgICAgICAgICAgaWYgKHQuc2V0dGluZ3MucmVqZWN0T25DYW5jZWwpIHJldHVybiB0LmNhbmNlbCgpLnRoZW4oKCgpID0+IG51bGwpKTtcbiAgICAgICAgICAgIHJldHVybiB0LmNhbmNlbCgpLnRoZW4oKGUgPT4gXCJjYW5jZWxcIiA9PT0gZS5zdGF0dXMgPyBudWxsIDogdCkpO1xuICAgICAgICB9KSkpLnRoZW4oKHQgPT4gdC5maWx0ZXIoKHQgPT4gISF0KSkpKTtcbiAgICB9XG4gICAgcmVtb3ZlKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IHRoaXMuZGxncztcbiAgICAgICAgY29uc3QgaSA9IGUuaW5kZXhPZih0KTtcbiAgICAgICAgaWYgKGkgPiAtMSkgdGhpcy5kbGdzLnNwbGljZShpLCAxKTtcbiAgICAgICAgaWYgKDAgPT09IGUubGVuZ3RoKSB0aGlzLnAud2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIHRoaXMpO1xuICAgIH1cbiAgICBoYW5kbGVFdmVudCh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSB0O1xuICAgICAgICBjb25zdCBpID0gTGwoZSk7XG4gICAgICAgIGlmIChudWxsID09IGkpIHJldHVybjtcbiAgICAgICAgY29uc3QgcyA9IHRoaXMudG9wO1xuICAgICAgICBpZiAobnVsbCA9PT0gcyB8fCAwID09PSBzLnNldHRpbmdzLmtleWJvYXJkLmxlbmd0aCkgcmV0dXJuO1xuICAgICAgICBjb25zdCBuID0gcy5zZXR0aW5ncy5rZXlib2FyZDtcbiAgICAgICAgaWYgKFwiRXNjYXBlXCIgPT09IGkgJiYgbi5pbmNsdWRlcyhpKSkgdm9pZCBzLmNhbmNlbCgpOyBlbHNlIGlmIChcIkVudGVyXCIgPT09IGkgJiYgbi5pbmNsdWRlcyhpKSkgdm9pZCBzLm9rKCk7XG4gICAgfVxufVxuXG5jbGFzcyBEaWFsb2dTZXR0aW5ncyB7XG4gICAgc3RhdGljIGZyb20oLi4udCkge1xuICAgICAgICByZXR1cm4gT2JqZWN0LmFzc2lnbihuZXcgRGlhbG9nU2V0dGluZ3MsIC4uLnQpLmNzKCkubHMoKTtcbiAgICB9XG4gICAgbG9hZCgpIHtcbiAgICAgICAgY29uc3QgdCA9IHRoaXM7XG4gICAgICAgIGNvbnN0IGUgPSB0aGlzLmNvbXBvbmVudDtcbiAgICAgICAgY29uc3QgaSA9IHRoaXMudGVtcGxhdGU7XG4gICAgICAgIGNvbnN0IHMgPSBBKG51bGwgPT0gZSA/IHZvaWQgMCA6IEMoZSgpLCAoZSA9PiB7XG4gICAgICAgICAgICB0LmNvbXBvbmVudCA9IGU7XG4gICAgICAgIH0pKSwgQ3QoaSkgPyBDKGkoKSwgKGUgPT4ge1xuICAgICAgICAgICAgdC50ZW1wbGF0ZSA9IGU7XG4gICAgICAgIH0pKSA6IHZvaWQgMCk7XG4gICAgICAgIHJldHVybiBzIGluc3RhbmNlb2YgUHJvbWlzZSA/IHMudGhlbigoKCkgPT4gdCkpIDogdDtcbiAgICB9XG4gICAgY3MoKSB7XG4gICAgICAgIGlmIChudWxsID09IHRoaXMuY29tcG9uZW50ICYmIG51bGwgPT0gdGhpcy50ZW1wbGF0ZSkgdGhyb3cgbmV3IEVycm9yKFwiQVVSMDkwM1wiKTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIGxzKCkge1xuICAgICAgICBpZiAobnVsbCA9PSB0aGlzLmtleWJvYXJkKSB0aGlzLmtleWJvYXJkID0gdGhpcy5sb2NrID8gW10gOiBbIFwiRW50ZXJcIiwgXCJFc2NhcGVcIiBdO1xuICAgICAgICBpZiAoXCJib29sZWFuXCIgIT09IHR5cGVvZiB0aGlzLm92ZXJsYXlEaXNtaXNzKSB0aGlzLm92ZXJsYXlEaXNtaXNzID0gIXRoaXMubG9jaztcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBPbCh0LCBlKSB7XG4gICAgcmV0dXJuIHRoaXMudGhlbigoaSA9PiBpLmRpYWxvZy5jbG9zZWQudGhlbih0LCBlKSksIGUpO1xufVxuXG5mdW5jdGlvbiAkbCh0KSB7XG4gICAgdC53aGVuQ2xvc2VkID0gT2w7XG4gICAgcmV0dXJuIHQ7XG59XG5cbmZ1bmN0aW9uIExsKHQpIHtcbiAgICBpZiAoXCJFc2NhcGVcIiA9PT0gKHQuY29kZSB8fCB0LmtleSkgfHwgMjcgPT09IHQua2V5Q29kZSkgcmV0dXJuIFwiRXNjYXBlXCI7XG4gICAgaWYgKFwiRW50ZXJcIiA9PT0gKHQuY29kZSB8fCB0LmtleSkgfHwgMTMgPT09IHQua2V5Q29kZSkgcmV0dXJuIFwiRW50ZXJcIjtcbiAgICByZXR1cm47XG59XG5cbmNsYXNzIERlZmF1bHREaWFsb2dHbG9iYWxTZXR0aW5ncyB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMubG9jayA9IHRydWU7XG4gICAgICAgIHRoaXMuc3RhcnRpbmdaSW5kZXggPSAxZTM7XG4gICAgICAgIHRoaXMucmVqZWN0T25DYW5jZWwgPSBmYWxzZTtcbiAgICB9XG4gICAgc3RhdGljIHJlZ2lzdGVyKHQpIHtcbiAgICAgICAgYy5zaW5nbGV0b24oSWwsIHRoaXMpLnJlZ2lzdGVyKHQpO1xuICAgIH1cbn1cblxuY29uc3QgcWwgPSBcInBvc2l0aW9uOmFic29sdXRlO3dpZHRoOjEwMCU7aGVpZ2h0OjEwMCU7dG9wOjA7bGVmdDowO1wiO1xuXG5jbGFzcyBEZWZhdWx0RGlhbG9nRG9tUmVuZGVyZXIge1xuICAgIGNvbnN0cnVjdG9yKHQpIHtcbiAgICAgICAgdGhpcy5wID0gdDtcbiAgICAgICAgdGhpcy53cmFwcGVyQ3NzID0gYCR7cWx9IGRpc3BsYXk6ZmxleDtgO1xuICAgICAgICB0aGlzLm92ZXJsYXlDc3MgPSBxbDtcbiAgICAgICAgdGhpcy5ob3N0Q3NzID0gXCJwb3NpdGlvbjpyZWxhdGl2ZTttYXJnaW46YXV0bztcIjtcbiAgICB9XG4gICAgc3RhdGljIHJlZ2lzdGVyKHQpIHtcbiAgICAgICAgYy5zaW5nbGV0b24oRWwsIHRoaXMpLnJlZ2lzdGVyKHQpO1xuICAgIH1cbiAgICByZW5kZXIodCkge1xuICAgICAgICBjb25zdCBlID0gdGhpcy5wLmRvY3VtZW50O1xuICAgICAgICBjb25zdCBpID0gKHQsIGkpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHMgPSBlLmNyZWF0ZUVsZW1lbnQodCk7XG4gICAgICAgICAgICBzLnN0eWxlLmNzc1RleHQgPSBpO1xuICAgICAgICAgICAgcmV0dXJuIHM7XG4gICAgICAgIH07XG4gICAgICAgIGNvbnN0IHMgPSB0LmFwcGVuZENoaWxkKGkoXCJhdS1kaWFsb2ctY29udGFpbmVyXCIsIHRoaXMud3JhcHBlckNzcykpO1xuICAgICAgICBjb25zdCBuID0gcy5hcHBlbmRDaGlsZChpKFwiYXUtZGlhbG9nLW92ZXJsYXlcIiwgdGhpcy5vdmVybGF5Q3NzKSk7XG4gICAgICAgIGNvbnN0IHIgPSBzLmFwcGVuZENoaWxkKGkoXCJkaXZcIiwgdGhpcy5ob3N0Q3NzKSk7XG4gICAgICAgIHJldHVybiBuZXcgRGVmYXVsdERpYWxvZ0RvbShzLCBuLCByKTtcbiAgICB9XG59XG5cbkRlZmF1bHREaWFsb2dEb21SZW5kZXJlci5pbmplY3QgPSBbIEt0IF07XG5cbmNsYXNzIERlZmF1bHREaWFsb2dEb20ge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUsIGkpIHtcbiAgICAgICAgdGhpcy53cmFwcGVyID0gdDtcbiAgICAgICAgdGhpcy5vdmVybGF5ID0gZTtcbiAgICAgICAgdGhpcy5jb250ZW50SG9zdCA9IGk7XG4gICAgfVxuICAgIGRpc3Bvc2UoKSB7XG4gICAgICAgIHRoaXMud3JhcHBlci5yZW1vdmUoKTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIE1sKHQsIGUpIHtcbiAgICByZXR1cm4ge1xuICAgICAgICBzZXR0aW5nc1Byb3ZpZGVyOiB0LFxuICAgICAgICByZWdpc3RlcjogaSA9PiBpLnJlZ2lzdGVyKC4uLmUsIHhlLmJlZm9yZUNyZWF0ZSgoKCkgPT4gdChpLmdldChJbCkpKSkpLFxuICAgICAgICBjdXN0b21pemUodCwgaSkge1xuICAgICAgICAgICAgcmV0dXJuIE1sKHQsIG51bGwgIT09IGkgJiYgdm9pZCAwICE9PSBpID8gaSA6IGUpO1xuICAgICAgICB9XG4gICAgfTtcbn1cblxuY29uc3QgVWwgPSBNbCgoKCkgPT4ge1xuICAgIHRocm93IG5ldyBFcnJvcihcIkFVUjA5MDRcIik7XG59KSwgWyBjbGFzcyBOb29wRGlhbG9nR2xvYmFsU2V0dGluZ3Mge1xuICAgIHN0YXRpYyByZWdpc3Rlcih0KSB7XG4gICAgICAgIHQucmVnaXN0ZXIoYy5zaW5nbGV0b24oSWwsIHRoaXMpKTtcbiAgICB9XG59IF0pO1xuXG5jb25zdCBGbCA9IE1sKG8sIFsgRGlhbG9nU2VydmljZSwgRGVmYXVsdERpYWxvZ0dsb2JhbFNldHRpbmdzLCBEZWZhdWx0RGlhbG9nRG9tUmVuZGVyZXIgXSk7XG5cbmNvbnN0IFZsID0gbC5jcmVhdGVJbnRlcmZhY2UoKHQgPT4gdC5zaW5nbGV0b24oV2NDdXN0b21FbGVtZW50UmVnaXN0cnkpKSk7XG5cbmNsYXNzIFdjQ3VzdG9tRWxlbWVudFJlZ2lzdHJ5IHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlLCBpKSB7XG4gICAgICAgIHRoaXMuY3RuID0gdDtcbiAgICAgICAgdGhpcy5wID0gZTtcbiAgICAgICAgdGhpcy5yID0gaTtcbiAgICB9XG4gICAgZGVmaW5lKHQsIGUsIGkpIHtcbiAgICAgICAgaWYgKCF0LmluY2x1ZGVzKFwiLVwiKSkgdGhyb3cgbmV3IEVycm9yKCdJbnZhbGlkIHdlYi1jb21wb25lbnRzIGN1c3RvbSBlbGVtZW50IG5hbWUuIEl0IG11c3QgaW5jbHVkZSBhIFwiLVwiJyk7XG4gICAgICAgIGxldCBzO1xuICAgICAgICBpZiAobnVsbCA9PSBlKSB0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIGN1c3RvbSBlbGVtZW50IGRlZmluaXRpb25cIik7XG4gICAgICAgIHN3aXRjaCAodHlwZW9mIGUpIHtcbiAgICAgICAgICBjYXNlIFwiZnVuY3Rpb25cIjpcbiAgICAgICAgICAgIHMgPSBzaS5pc1R5cGUoZSkgPyBzaS5nZXREZWZpbml0aW9uKGUpIDogQ3VzdG9tRWxlbWVudERlZmluaXRpb24uY3JlYXRlKHNpLmdlbmVyYXRlTmFtZSgpLCBlKTtcbiAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIHMgPSBDdXN0b21FbGVtZW50RGVmaW5pdGlvbi5nZXRPckNyZWF0ZShlKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIGlmIChzLmNvbnRhaW5lcmxlc3MpIHRocm93IG5ldyBFcnJvcihcIkNvbnRhaW5lcmxlc3MgY3VzdG9tIGVsZW1lbnQgaXMgbm90IHN1cHBvcnRlZC4gQ29uc2lkZXIgdXNpbmcgYnVpdGwtaW4gZXh0ZW5kcyBpbnN0ZWFkXCIpO1xuICAgICAgICBjb25zdCBuID0gIShudWxsID09PSBpIHx8IHZvaWQgMCA9PT0gaSA/IHZvaWQgMCA6IGkuZXh0ZW5kcykgPyBIVE1MRWxlbWVudCA6IHRoaXMucC5kb2N1bWVudC5jcmVhdGVFbGVtZW50KGkuZXh0ZW5kcykuY29uc3RydWN0b3I7XG4gICAgICAgIGNvbnN0IHIgPSB0aGlzLmN0bjtcbiAgICAgICAgY29uc3QgbyA9IHRoaXMucjtcbiAgICAgICAgY29uc3QgbCA9IHMuYmluZGFibGVzO1xuICAgICAgICBjb25zdCBoID0gdGhpcy5wO1xuICAgICAgICBjbGFzcyBDdXN0b21FbGVtZW50Q2xhc3MgZXh0ZW5kcyBuIHtcbiAgICAgICAgICAgIGF1SW5pdCgpIHtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5hdUluaXRlZCkgcmV0dXJuO1xuICAgICAgICAgICAgICAgIHRoaXMuYXVJbml0ZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgIGNvbnN0IHQgPSByLmNyZWF0ZUNoaWxkKCk7XG4gICAgICAgICAgICAgICAgdC5yZWdpc3RlclJlc29sdmVyKGguSFRNTEVsZW1lbnQsIHQucmVnaXN0ZXJSZXNvbHZlcihoLkVsZW1lbnQsIHQucmVnaXN0ZXJSZXNvbHZlcihucywgbmV3IHgoXCJFbGVtZW50UHJvdmlkZXJcIiwgdGhpcykpKSk7XG4gICAgICAgICAgICAgICAgY29uc3QgZSA9IG8uY29tcGlsZShzLCB0LCB7XG4gICAgICAgICAgICAgICAgICAgIHByb2plY3Rpb25zOiBudWxsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgY29uc3QgaSA9IHQuaW52b2tlKGUuVHlwZSk7XG4gICAgICAgICAgICAgICAgY29uc3QgbiA9IHRoaXMuYXVDdHJsID0gQ29udHJvbGxlci4kZWwodCwgaSwgdGhpcywgbnVsbCwgZSk7XG4gICAgICAgICAgICAgICAgc3ModGhpcywgZS5rZXksIG4pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29ubmVjdGVkQ2FsbGJhY2soKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5hdUluaXQoKTtcbiAgICAgICAgICAgICAgICB0aGlzLmF1Q3RybC5hY3RpdmF0ZSh0aGlzLmF1Q3RybCwgbnVsbCwgMCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBkaXNjb25uZWN0ZWRDYWxsYmFjaygpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmF1Q3RybC5kZWFjdGl2YXRlKHRoaXMuYXVDdHJsLCBudWxsLCAwKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGFkb3B0ZWRDYWxsYmFjaygpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmF1SW5pdCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYXR0cmlidXRlQ2hhbmdlZENhbGxiYWNrKHQsIGUsIGkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmF1SW5pdCgpO1xuICAgICAgICAgICAgICAgIHRoaXMuYXVDdHJsLnZpZXdNb2RlbFt0XSA9IGk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgQ3VzdG9tRWxlbWVudENsYXNzLm9ic2VydmVkQXR0cmlidXRlcyA9IE9iamVjdC5rZXlzKGwpO1xuICAgICAgICBmb3IgKGNvbnN0IHQgaW4gbCkgT2JqZWN0LmRlZmluZVByb3BlcnR5KEN1c3RvbUVsZW1lbnRDbGFzcy5wcm90b3R5cGUsIHQsIHtcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICAgICAgZ2V0KCkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzW1wiYXVDdHJsXCJdLnZpZXdNb2RlbFt0XTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBzZXQoZSkge1xuICAgICAgICAgICAgICAgIGlmICghdGhpc1tcImF1SW5pdGVkXCJdKSB0aGlzW1wiYXVJbml0XCJdKCk7XG4gICAgICAgICAgICAgICAgdGhpc1tcImF1Q3RybFwiXS52aWV3TW9kZWxbdF0gPSBlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5wLmN1c3RvbUVsZW1lbnRzLmRlZmluZSh0LCBDdXN0b21FbGVtZW50Q2xhc3MsIGkpO1xuICAgICAgICByZXR1cm4gQ3VzdG9tRWxlbWVudENsYXNzO1xuICAgIH1cbn1cblxuV2NDdXN0b21FbGVtZW50UmVnaXN0cnkuaW5qZWN0ID0gWyBnLCBLdCwgUGkgXTtcblxuZXhwb3J0IHsgQWRvcHRlZFN0eWxlU2hlZXRzU3R5bGVzLCBBcHBSb290LCB4ZSBhcyBBcHBUYXNrLCBHdCBhcyBBdFByZWZpeGVkVHJpZ2dlckF0dHJpYnV0ZVBhdHRlcm4sIHJvIGFzIEF0UHJlZml4ZWRUcmlnZ2VyQXR0cmlidXRlUGF0dGVyblJlZ2lzdHJhdGlvbiwgQXR0ckJpbmRpbmdCZWhhdmlvciwgR28gYXMgQXR0ckJpbmRpbmdCZWhhdmlvclJlZ2lzdHJhdGlvbiwgU24gYXMgQXR0ckJpbmRpbmdDb21tYW5kLCBBbyBhcyBBdHRyQmluZGluZ0NvbW1hbmRSZWdpc3RyYXRpb24sIEF0dHJTeW50YXgsIEF0dHJpYnV0ZUJpbmRpbmcsIEF0dHJpYnV0ZUJpbmRpbmdJbnN0cnVjdGlvbiwgZGwgYXMgQXR0cmlidXRlQmluZGluZ1JlbmRlcmVyUmVnaXN0cmF0aW9uLCBBdHRyaWJ1dGVOU0FjY2Vzc29yLCBOdCBhcyBBdHRyaWJ1dGVQYXR0ZXJuLCBBdUNvbXBvc2UsIEF1UmVuZGVyLCBZbyBhcyBBdVJlbmRlclJlZ2lzdHJhdGlvbiwgQXVTbG90LCBBdVNsb3RzSW5mbywgQXVyZWxpYSwgQnQgYXMgQmluZGFibGUsIEJpbmRhYmxlRGVmaW5pdGlvbiwgQmluZGFibGVPYnNlcnZlciwgQmluZGFibGVzSW5mbywgbW4gYXMgQmluZGluZ0NvbW1hbmQsIEJpbmRpbmdDb21tYW5kRGVmaW5pdGlvbiwgQmluZGluZ01vZGVCZWhhdmlvciwgQ1NTTW9kdWxlc1Byb2Nlc3NvclJlZ2lzdHJ5LCBDYWxsQmluZGluZywgeG4gYXMgQ2FsbEJpbmRpbmdDb21tYW5kLCBmbyBhcyBDYWxsQmluZGluZ0NvbW1hbmRSZWdpc3RyYXRpb24sIENhbGxCaW5kaW5nSW5zdHJ1Y3Rpb24sIGlsIGFzIENhbGxCaW5kaW5nUmVuZGVyZXJSZWdpc3RyYXRpb24sIEFuIGFzIENhcHR1cmVCaW5kaW5nQ29tbWFuZCwgQ28gYXMgQ2FwdHVyZUJpbmRpbmdDb21tYW5kUmVnaXN0cmF0aW9uLCBCciBhcyBDYXNlLCBDaGVja2VkT2JzZXJ2ZXIsIFNlIGFzIENoaWxkcmVuLCBDaGlsZHJlbkRlZmluaXRpb24sIENoaWxkcmVuT2JzZXJ2ZXIsIENsYXNzQXR0cmlidXRlQWNjZXNzb3IsIEVuIGFzIENsYXNzQmluZGluZ0NvbW1hbmQsIFNvIGFzIENsYXNzQmluZGluZ0NvbW1hbmRSZWdpc3RyYXRpb24sIHp0IGFzIENvbG9uUHJlZml4ZWRCaW5kQXR0cmlidXRlUGF0dGVybiwgb28gYXMgQ29sb25QcmVmaXhlZEJpbmRBdHRyaWJ1dGVQYXR0ZXJuUmVnaXN0cmF0aW9uLCBhbiBhcyBDb21tYW5kVHlwZSwgQ29tcHV0ZWRXYXRjaGVyLCBDb250cm9sbGVyLCBNZSBhcyBDdXN0b21BdHRyaWJ1dGUsIEN1c3RvbUF0dHJpYnV0ZURlZmluaXRpb24sIHNsIGFzIEN1c3RvbUF0dHJpYnV0ZVJlbmRlcmVyUmVnaXN0cmF0aW9uLCBzaSBhcyBDdXN0b21FbGVtZW50LCBDdXN0b21FbGVtZW50RGVmaW5pdGlvbiwgbmwgYXMgQ3VzdG9tRWxlbWVudFJlbmRlcmVyUmVnaXN0cmF0aW9uLCBEYXRhQXR0cmlidXRlQWNjZXNzb3IsIERlYm91bmNlQmluZGluZ0JlaGF2aW9yLCBYciBhcyBEZWJvdW5jZUJpbmRpbmdCZWhhdmlvclJlZ2lzdHJhdGlvbiwgYm4gYXMgRGVmYXVsdEJpbmRpbmdDb21tYW5kLCBtbyBhcyBEZWZhdWx0QmluZGluZ0NvbW1hbmRSZWdpc3RyYXRpb24sIEJvIGFzIERlZmF1bHRCaW5kaW5nTGFuZ3VhZ2UsIGNvIGFzIERlZmF1bHRCaW5kaW5nU3ludGF4LCBJciBhcyBEZWZhdWx0Q2FzZSwgc28gYXMgRGVmYXVsdENvbXBvbmVudHMsIERlZmF1bHREaWFsb2dEb20sIERlZmF1bHREaWFsb2dEb21SZW5kZXJlciwgRGVmYXVsdERpYWxvZ0dsb2JhbFNldHRpbmdzLCB4bCBhcyBEZWZhdWx0UmVuZGVyZXJzLCBlbCBhcyBEZWZhdWx0UmVzb3VyY2VzLCBBbCBhcyBEZWZpbml0aW9uVHlwZSwgQ24gYXMgRGVsZWdhdGVCaW5kaW5nQ29tbWFuZCwga28gYXMgRGVsZWdhdGVCaW5kaW5nQ29tbWFuZFJlZ2lzdHJhdGlvbiwgRGlhbG9nQ2xvc2VSZXN1bHQsIFVsIGFzIERpYWxvZ0NvbmZpZ3VyYXRpb24sIERpYWxvZ0NvbnRyb2xsZXIsIFRsIGFzIERpYWxvZ0RlYWN0aXZhdGlvblN0YXR1c2VzLCBGbCBhcyBEaWFsb2dEZWZhdWx0Q29uZmlndXJhdGlvbiwgRGlhbG9nT3BlblJlc3VsdCwgRGlhbG9nU2VydmljZSwgV3QgYXMgRG90U2VwYXJhdGVkQXR0cmlidXRlUGF0dGVybiwgaG8gYXMgRG90U2VwYXJhdGVkQXR0cmlidXRlUGF0dGVyblJlZ2lzdHJhdGlvbiwgRWxzZSwgJG8gYXMgRWxzZVJlZ2lzdHJhdGlvbiwgRXZlbnREZWxlZ2F0b3IsIEV2ZW50U3Vic2NyaWJlciwgRXhwcmVzc2lvbldhdGNoZXIsIEZvY3VzLCB5biBhcyBGb3JCaW5kaW5nQ29tbWFuZCwgdm8gYXMgRm9yQmluZGluZ0NvbW1hbmRSZWdpc3RyYXRpb24sIEZyYWdtZW50Tm9kZVNlcXVlbmNlLCBGcmVxdWVudE11dGF0aW9ucywgRnJvbVZpZXdCaW5kaW5nQmVoYXZpb3IsIFFyIGFzIEZyb21WaWV3QmluZGluZ0JlaGF2aW9yUmVnaXN0cmF0aW9uLCBnbiBhcyBGcm9tVmlld0JpbmRpbmdDb21tYW5kLCBwbyBhcyBGcm9tVmlld0JpbmRpbmdDb21tYW5kUmVnaXN0cmF0aW9uLCBQciBhcyBGdWxmaWxsZWRUZW1wbGF0ZUNvbnRyb2xsZXIsIEh5ZHJhdGVBdHRyaWJ1dGVJbnN0cnVjdGlvbiwgSHlkcmF0ZUVsZW1lbnRJbnN0cnVjdGlvbiwgSHlkcmF0ZUxldEVsZW1lbnRJbnN0cnVjdGlvbiwgSHlkcmF0ZVRlbXBsYXRlQ29udHJvbGxlciwgdHMgYXMgSUFwcFJvb3QsIGJlIGFzIElBcHBUYXNrLCBadCBhcyBJQXR0ck1hcHBlciwgVXQgYXMgSUF0dHJpYnV0ZVBhcnNlciwgTXQgYXMgSUF0dHJpYnV0ZVBhdHRlcm4sIHhzIGFzIElBdVNsb3RzSW5mbywgQ2wgYXMgSUF1cmVsaWEsIFhpIGFzIElDb250cm9sbGVyLCBSbCBhcyBJRGlhbG9nQ29udHJvbGxlciwgQmwgYXMgSURpYWxvZ0RvbSwgRWwgYXMgSURpYWxvZ0RvbVJlbmRlcmVyLCBJbCBhcyBJRGlhbG9nR2xvYmFsU2V0dGluZ3MsIFNsIGFzIElEaWFsb2dTZXJ2aWNlLCB3cyBhcyBJRXZlbnREZWxlZ2F0b3IsIHJzIGFzIElFdmVudFRhcmdldCwgdnMgYXMgSUhpc3RvcnksIEtpIGFzIElIeWRyYXRpb25Db250ZXh0LCBrcyBhcyBJSW5zdHJ1Y3Rpb24sIGJpIGFzIElMaWZlY3ljbGVIb29rcywgbXMgYXMgSUxvY2F0aW9uLCBucyBhcyBJTm9kZSwgaW8gYXMgSU5vZGVPYnNlcnZlckxvY2F0b3JSZWdpc3RyYXRpb24sIEt0IGFzIElQbGF0Zm9ybSwgYnMgYXMgSVByb2plY3Rpb25zLCBvcyBhcyBJUmVuZGVyTG9jYXRpb24sIFNzIGFzIElSZW5kZXJlciwgUGkgYXMgSVJlbmRlcmluZywgWXQgYXMgSVNWR0FuYWx5emVyLCBIciBhcyBJU2FuaXRpemVyLCBkaSBhcyBJU2hhZG93RE9NR2xvYmFsU3R5bGVzLCB1aSBhcyBJU2hhZG93RE9NU3R5bGVGYWN0b3J5LCBmaSBhcyBJU2hhZG93RE9NU3R5bGVzLCAkdCBhcyBJU3ludGF4SW50ZXJwcmV0ZXIsIEFzIGFzIElUZW1wbGF0ZUNvbXBpbGVyLCB6biBhcyBJVGVtcGxhdGVDb21waWxlckhvb2tzLCBlbyBhcyBJVGVtcGxhdGVDb21waWxlclJlZ2lzdHJhdGlvbiwgVG4gYXMgSVRlbXBsYXRlRWxlbWVudEZhY3RvcnksIEFpIGFzIElWaWV3RmFjdG9yeSwgRGkgYXMgSVZpZXdMb2NhdG9yLCBWbCBhcyBJV2NFbGVtZW50UmVnaXN0cnksIGRzIGFzIElXaW5kb3csIGVzIGFzIElXb3JrVHJhY2tlciwgSWYsIE9vIGFzIElmUmVnaXN0cmF0aW9uLCB5cyBhcyBJbnN0cnVjdGlvblR5cGUsIEludGVycG9sYXRpb25CaW5kaW5nLCBybCBhcyBJbnRlcnBvbGF0aW9uQmluZGluZ1JlbmRlcmVyUmVnaXN0cmF0aW9uLCBJbnRlcnBvbGF0aW9uSW5zdHJ1Y3Rpb24sIEludGVycHJldGF0aW9uLCBJdGVyYXRvckJpbmRpbmdJbnN0cnVjdGlvbiwgb2wgYXMgSXRlcmF0b3JCaW5kaW5nUmVuZGVyZXJSZWdpc3RyYXRpb24sIExldEJpbmRpbmcsIExldEJpbmRpbmdJbnN0cnVjdGlvbiwgbGwgYXMgTGV0RWxlbWVudFJlbmRlcmVyUmVnaXN0cmF0aW9uLCBraSBhcyBMaWZlY3ljbGVIb29rcywgTGlmZWN5Y2xlSG9va3NEZWZpbml0aW9uLCBMaWZlY3ljbGVIb29rc0VudHJ5LCBMaXN0ZW5lciwgTGlzdGVuZXJCaW5kaW5nSW5zdHJ1Y3Rpb24sIGZsIGFzIExpc3RlbmVyQmluZGluZ1JlbmRlcmVyUmVnaXN0cmF0aW9uLCBOb2RlT2JzZXJ2ZXJDb25maWcsIE5vZGVPYnNlcnZlckxvY2F0b3IsIGxzIGFzIE5vZGVUeXBlLCBOb29wU1ZHQW5hbHl6ZXIsIE9ic2VydmVTaGFsbG93LCBPbmVUaW1lQmluZGluZ0JlaGF2aW9yLCBLciBhcyBPbmVUaW1lQmluZGluZ0JlaGF2aW9yUmVnaXN0cmF0aW9uLCB2biBhcyBPbmVUaW1lQmluZGluZ0NvbW1hbmQsIGdvIGFzIE9uZVRpbWVCaW5kaW5nQ29tbWFuZFJlZ2lzdHJhdGlvbiwgRHIgYXMgUGVuZGluZ1RlbXBsYXRlQ29udHJvbGxlciwgUG9ydGFsLCBUciBhcyBQcm9taXNlVGVtcGxhdGVDb250cm9sbGVyLCBQcm9wZXJ0eUJpbmRpbmcsIFByb3BlcnR5QmluZGluZ0luc3RydWN0aW9uLCBobCBhcyBQcm9wZXJ0eUJpbmRpbmdSZW5kZXJlclJlZ2lzdHJhdGlvbiwgSHQgYXMgUmVmQXR0cmlidXRlUGF0dGVybiwgbG8gYXMgUmVmQXR0cmlidXRlUGF0dGVyblJlZ2lzdHJhdGlvbiwgUmVmQmluZGluZywgeG8gYXMgUmVmQmluZGluZ0NvbW1hbmRSZWdpc3RyYXRpb24sIFJlZkJpbmRpbmdJbnN0cnVjdGlvbiwgYWwgYXMgUmVmQmluZGluZ1JlbmRlcmVyUmVnaXN0cmF0aW9uLCBPciBhcyBSZWplY3RlZFRlbXBsYXRlQ29udHJvbGxlciwgUmVuZGVyUGxhbiwgUmVuZGVyaW5nLCBSZXBlYXQsIExvIGFzIFJlcGVhdFJlZ2lzdHJhdGlvbiwgU1ZHQW5hbHl6ZXIsIG5vIGFzIFNWR0FuYWx5emVyUmVnaXN0cmF0aW9uLCB6ciBhcyBTYW5pdGl6ZVZhbHVlQ29udmVydGVyLCBJbyBhcyBTYW5pdGl6ZVZhbHVlQ29udmVydGVyUmVnaXN0cmF0aW9uLCBTZWxlY3RWYWx1ZU9ic2VydmVyLCBTZWxmQmluZGluZ0JlaGF2aW9yLCBYbyBhcyBTZWxmQmluZGluZ0JlaGF2aW9yUmVnaXN0cmF0aW9uLCBTZXRBdHRyaWJ1dGVJbnN0cnVjdGlvbiwgbWwgYXMgU2V0QXR0cmlidXRlUmVuZGVyZXJSZWdpc3RyYXRpb24sIFNldENsYXNzQXR0cmlidXRlSW5zdHJ1Y3Rpb24sIHZsIGFzIFNldENsYXNzQXR0cmlidXRlUmVuZGVyZXJSZWdpc3RyYXRpb24sIFNldFByb3BlcnR5SW5zdHJ1Y3Rpb24sIGNsIGFzIFNldFByb3BlcnR5UmVuZGVyZXJSZWdpc3RyYXRpb24sIFNldFN0eWxlQXR0cmlidXRlSW5zdHJ1Y3Rpb24sIHBsIGFzIFNldFN0eWxlQXR0cmlidXRlUmVuZGVyZXJSZWdpc3RyYXRpb24sIFNoYWRvd0RPTVJlZ2lzdHJ5LCB1byBhcyBTaG9ydEhhbmRCaW5kaW5nU3ludGF4LCBTaWduYWxCaW5kaW5nQmVoYXZpb3IsIFpyIGFzIFNpZ25hbEJpbmRpbmdCZWhhdmlvclJlZ2lzdHJhdGlvbiwgeWwgYXMgU3RhbmRhcmRDb25maWd1cmF0aW9uLCBTdHlsZUF0dHJpYnV0ZUFjY2Vzc29yLCBSbiBhcyBTdHlsZUJpbmRpbmdDb21tYW5kLCBSbyBhcyBTdHlsZUJpbmRpbmdDb21tYW5kUmVnaXN0cmF0aW9uLCBtaSBhcyBTdHlsZUNvbmZpZ3VyYXRpb24sIFN0eWxlRWxlbWVudFN0eWxlcywgU3R5bGVQcm9wZXJ0eUJpbmRpbmdJbnN0cnVjdGlvbiwgZ2wgYXMgU3R5bGVQcm9wZXJ0eUJpbmRpbmdSZW5kZXJlclJlZ2lzdHJhdGlvbiwgRXIgYXMgU3dpdGNoLCBUZW1wbGF0ZUNvbXBpbGVyLCBLbiBhcyBUZW1wbGF0ZUNvbXBpbGVySG9va3MsIHVsIGFzIFRlbXBsYXRlQ29udHJvbGxlclJlbmRlcmVyUmVnaXN0cmF0aW9uLCBUZXh0QmluZGluZ0luc3RydWN0aW9uLCB3bCBhcyBUZXh0QmluZGluZ1JlbmRlcmVyUmVnaXN0cmF0aW9uLCBUaHJvdHRsZUJpbmRpbmdCZWhhdmlvciwgSnIgYXMgVGhyb3R0bGVCaW5kaW5nQmVoYXZpb3JSZWdpc3RyYXRpb24sIFRvVmlld0JpbmRpbmdCZWhhdmlvciwgWXIgYXMgVG9WaWV3QmluZGluZ0JlaGF2aW9yUmVnaXN0cmF0aW9uLCBwbiBhcyBUb1ZpZXdCaW5kaW5nQ29tbWFuZCwgd28gYXMgVG9WaWV3QmluZGluZ0NvbW1hbmRSZWdpc3RyYXRpb24sIGtuIGFzIFRyaWdnZXJCaW5kaW5nQ29tbWFuZCwgeW8gYXMgVHJpZ2dlckJpbmRpbmdDb21tYW5kUmVnaXN0cmF0aW9uLCBUd29XYXlCaW5kaW5nQmVoYXZpb3IsIHRvIGFzIFR3b1dheUJpbmRpbmdCZWhhdmlvclJlZ2lzdHJhdGlvbiwgd24gYXMgVHdvV2F5QmluZGluZ0NvbW1hbmQsIGJvIGFzIFR3b1dheUJpbmRpbmdDb21tYW5kUmVnaXN0cmF0aW9uLCBVcGRhdGVUcmlnZ2VyQmluZGluZ0JlaGF2aW9yLCBLbyBhcyBVcGRhdGVUcmlnZ2VyQmluZGluZ0JlaGF2aW9yUmVnaXN0cmF0aW9uLCBWYWx1ZUF0dHJpYnV0ZU9ic2VydmVyLCBWaWV3RmFjdG9yeSwgVmlld0xvY2F0b3IsIEhpIGFzIFZpZXdNb2RlbEtpbmQsIEdyIGFzIFZpZXdWYWx1ZUNvbnZlcnRlciwgVG8gYXMgVmlld1ZhbHVlQ29udmVydGVyUmVnaXN0cmF0aW9uLCBJaSBhcyBWaWV3cywgX2UgYXMgV2F0Y2gsIFdjQ3VzdG9tRWxlbWVudFJlZ2lzdHJ5LCBXaXRoLCBxbyBhcyBXaXRoUmVnaXN0cmF0aW9uLCBQbiBhcyBhbGxSZXNvdXJjZXMsIEZ0IGFzIGF0dHJpYnV0ZVBhdHRlcm4sIFN0IGFzIGJpbmRhYmxlLCBjbiBhcyBiaW5kaW5nQ29tbWFuZCwga2UgYXMgY2hpbGRyZW4sIEl0IGFzIGNvZXJjZXIsIFdlIGFzIGNvbnRhaW5lcmxlc3MsIHVzIGFzIGNvbnZlcnRUb1JlbmRlckxvY2F0aW9uLCBVciBhcyBjcmVhdGVFbGVtZW50LCBhaSBhcyBjc3NNb2R1bGVzLCBQZSBhcyBjdXN0b21BdHRyaWJ1dGUsIGplIGFzIGN1c3RvbUVsZW1lbnQsIGFzIGFzIGdldEVmZmVjdGl2ZVBhcmVudE5vZGUsIGlzIGFzIGdldFJlZiwgamkgYXMgaXNDdXN0b21FbGVtZW50Q29udHJvbGxlciwgTmkgYXMgaXNDdXN0b21FbGVtZW50Vmlld01vZGVsLCBDcyBhcyBpc0luc3RydWN0aW9uLCBmcyBhcyBpc1JlbmRlckxvY2F0aW9uLCBDaSBhcyBsaWZlY3ljbGVIb29rcywgcmkgYXMgcHJvY2Vzc0NvbnRlbnQsIFJzIGFzIHJlbmRlcmVyLCBjcyBhcyBzZXRFZmZlY3RpdmVQYXJlbnROb2RlLCBzcyBhcyBzZXRSZWYsIGNpIGFzIHNoYWRvd0NTUywgWW4gYXMgdGVtcGxhdGVDb21waWxlckhvb2tzLCBPZSBhcyB0ZW1wbGF0ZUNvbnRyb2xsZXIsIE5lIGFzIHVzZVNoYWRvd0RPTSwgVGkgYXMgdmlldywgVWUgYXMgd2F0Y2ggfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluZGV4LmpzLm1hcFxuIiwiaW1wb3J0IHsgTWV0YWRhdGEgYXMgdCwgUHJvdG9jb2wgYXMgZSwgUmVnaXN0cmF0aW9uIGFzIHMsIERJIGFzIHIsIGZpcnN0RGVmaW5lZCBhcyBpLCBtZXJnZUFycmF5cyBhcyBuLCBmcm9tQW5ub3RhdGlvbk9yRGVmaW5pdGlvbk9yVHlwZU9yRGVmYXVsdCBhcyBvLCBpc051bWJlck9yQmlnSW50IGFzIGgsIGlzU3RyaW5nT3JEYXRlIGFzIGMsIGVtcHR5QXJyYXkgYXMgdSwgaXNBcnJheUluZGV4IGFzIGEsIElQbGF0Zm9ybSBhcyBsLCBJTG9nZ2VyIGFzIGYgfSBmcm9tIFwiQGF1cmVsaWEva2VybmVsXCI7XG5cbmV4cG9ydCB7IElQbGF0Zm9ybSB9IGZyb20gXCJAYXVyZWxpYS9rZXJuZWxcIjtcblxuZXhwb3J0IHsgUGxhdGZvcm0sIFRhc2ssIFRhc2tBYm9ydEVycm9yLCBUYXNrUXVldWUsIFRhc2tRdWV1ZVByaW9yaXR5LCBUYXNrU3RhdHVzIH0gZnJvbSBcIkBhdXJlbGlhL3BsYXRmb3JtXCI7XG5cbmNvbnN0IGQgPSBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5O1xuXG5jb25zdCB2ID0gUmVmbGVjdC5kZWZpbmVQcm9wZXJ0eTtcblxuY29uc3QgcCA9IHQgPT4gXCJmdW5jdGlvblwiID09PSB0eXBlb2YgdDtcblxuY29uc3QgZyA9IHQgPT4gXCJzdHJpbmdcIiA9PT0gdHlwZW9mIHQ7XG5cbmZ1bmN0aW9uIHcodCwgZSwgcykge1xuICAgIHYodCwgZSwge1xuICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgdmFsdWU6IHNcbiAgICB9KTtcbiAgICByZXR1cm4gcztcbn1cblxuZnVuY3Rpb24gYih0LCBlLCBzLCByID0gZmFsc2UpIHtcbiAgICBpZiAociB8fCAhZC5jYWxsKHQsIGUpKSB3KHQsIGUsIHMpO1xufVxuXG5jb25zdCBFID0gKCkgPT4gT2JqZWN0LmNyZWF0ZShudWxsKTtcblxuY29uc3QgQSA9IHQuZ2V0T3duO1xuXG5jb25zdCB5ID0gdC5oYXNPd247XG5cbmNvbnN0IG0gPSB0LmRlZmluZTtcblxuY29uc3QgVSA9IGUuYW5ub3RhdGlvbi5rZXlGb3I7XG5cbmNvbnN0IHggPSBlLnJlc291cmNlLmtleUZvcjtcblxuY29uc3QgUyA9IGUucmVzb3VyY2UuYXBwZW5kVG87XG5cbmZ1bmN0aW9uIE8oLi4udCkge1xuICAgIHJldHVybiBmdW5jdGlvbihlKSB7XG4gICAgICAgIGNvbnN0IHMgPSBVKFwiYWxpYXNlc1wiKTtcbiAgICAgICAgY29uc3QgciA9IEEocywgZSk7XG4gICAgICAgIGlmICh2b2lkIDAgPT09IHIpIG0ocywgdCwgZSk7IGVsc2Ugci5wdXNoKC4uLnQpO1xuICAgIH07XG59XG5cbmZ1bmN0aW9uIEModCwgZSwgciwgaSkge1xuICAgIGZvciAobGV0IG4gPSAwLCBvID0gdC5sZW5ndGg7IG4gPCBvOyArK24pIHMuYWxpYXNUbyhyLCBlLmtleUZyb20odFtuXSkpLnJlZ2lzdGVyKGkpO1xufVxuXG5jb25zdCBrID0gT2JqZWN0LmZyZWV6ZSh7fSk7XG5cbmNsYXNzIEJpbmRpbmdDb250ZXh0IHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlKSB7XG4gICAgICAgIGlmICh2b2lkIDAgIT09IHQpIGlmICh2b2lkIDAgIT09IGUpIHRoaXNbdF0gPSBlOyBlbHNlIGZvciAoY29uc3QgZSBpbiB0KSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHQsIGUpKSB0aGlzW2VdID0gdFtlXTtcbiAgICB9XG4gICAgc3RhdGljIGNyZWF0ZSh0LCBlKSB7XG4gICAgICAgIHJldHVybiBuZXcgQmluZGluZ0NvbnRleHQodCwgZSk7XG4gICAgfVxuICAgIHN0YXRpYyBnZXQodCwgZSwgcywgcikge1xuICAgICAgICB2YXIgaSwgbjtcbiAgICAgICAgaWYgKG51bGwgPT0gdCkgdGhyb3cgbmV3IEVycm9yKGBBVVIwMjAzOiR7dH1gKTtcbiAgICAgICAgbGV0IG8gPSB0Lm92ZXJyaWRlQ29udGV4dDtcbiAgICAgICAgbGV0IGggPSB0O1xuICAgICAgICBpZiAocyA+IDApIHtcbiAgICAgICAgICAgIHdoaWxlIChzID4gMCkge1xuICAgICAgICAgICAgICAgIHMtLTtcbiAgICAgICAgICAgICAgICBoID0gaC5wYXJlbnRTY29wZTtcbiAgICAgICAgICAgICAgICBpZiAobnVsbCA9PSAobnVsbCA9PT0gaCB8fCB2b2lkIDAgPT09IGggPyB2b2lkIDAgOiBoLm92ZXJyaWRlQ29udGV4dCkpIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIG8gPSBoLm92ZXJyaWRlQ29udGV4dDtcbiAgICAgICAgICAgIHJldHVybiBlIGluIG8gPyBvIDogby5iaW5kaW5nQ29udGV4dDtcbiAgICAgICAgfVxuICAgICAgICB3aGlsZSAoIShudWxsID09PSBoIHx8IHZvaWQgMCA9PT0gaCA/IHZvaWQgMCA6IGguaXNCb3VuZGFyeSkgJiYgbnVsbCAhPSBvICYmICEoZSBpbiBvKSAmJiAhKG8uYmluZGluZ0NvbnRleHQgJiYgZSBpbiBvLmJpbmRpbmdDb250ZXh0KSkge1xuICAgICAgICAgICAgaCA9IG51bGwgIT09IChpID0gaC5wYXJlbnRTY29wZSkgJiYgdm9pZCAwICE9PSBpID8gaSA6IG51bGw7XG4gICAgICAgICAgICBvID0gbnVsbCAhPT0gKG4gPSBudWxsID09PSBoIHx8IHZvaWQgMCA9PT0gaCA/IHZvaWQgMCA6IGgub3ZlcnJpZGVDb250ZXh0KSAmJiB2b2lkIDAgIT09IG4gPyBuIDogbnVsbDtcbiAgICAgICAgfVxuICAgICAgICBpZiAobykgcmV0dXJuIGUgaW4gbyA/IG8gOiBvLmJpbmRpbmdDb250ZXh0O1xuICAgICAgICBpZiAoMTYgJiByKSByZXR1cm4gaztcbiAgICAgICAgcmV0dXJuIHQuYmluZGluZ0NvbnRleHQgfHwgdC5vdmVycmlkZUNvbnRleHQ7XG4gICAgfVxufVxuXG5jbGFzcyBTY29wZSB7XG4gICAgY29uc3RydWN0b3IodCwgZSwgcywgcikge1xuICAgICAgICB0aGlzLnBhcmVudFNjb3BlID0gdDtcbiAgICAgICAgdGhpcy5iaW5kaW5nQ29udGV4dCA9IGU7XG4gICAgICAgIHRoaXMub3ZlcnJpZGVDb250ZXh0ID0gcztcbiAgICAgICAgdGhpcy5pc0JvdW5kYXJ5ID0gcjtcbiAgICB9XG4gICAgc3RhdGljIGNyZWF0ZSh0LCBlLCBzKSB7XG4gICAgICAgIHJldHVybiBuZXcgU2NvcGUobnVsbCwgdCwgbnVsbCA9PSBlID8gT3ZlcnJpZGVDb250ZXh0LmNyZWF0ZSh0KSA6IGUsIG51bGwgIT09IHMgJiYgdm9pZCAwICE9PSBzID8gcyA6IGZhbHNlKTtcbiAgICB9XG4gICAgc3RhdGljIGZyb21PdmVycmlkZSh0KSB7XG4gICAgICAgIGlmIChudWxsID09IHQpIHRocm93IG5ldyBFcnJvcihgQVVSMDIwNDoke3R9YCk7XG4gICAgICAgIHJldHVybiBuZXcgU2NvcGUobnVsbCwgdC5iaW5kaW5nQ29udGV4dCwgdCwgZmFsc2UpO1xuICAgIH1cbiAgICBzdGF0aWMgZnJvbVBhcmVudCh0LCBlKSB7XG4gICAgICAgIGlmIChudWxsID09IHQpIHRocm93IG5ldyBFcnJvcihgQVVSMDIwNToke3R9YCk7XG4gICAgICAgIHJldHVybiBuZXcgU2NvcGUodCwgZSwgT3ZlcnJpZGVDb250ZXh0LmNyZWF0ZShlKSwgZmFsc2UpO1xuICAgIH1cbn1cblxuY2xhc3MgT3ZlcnJpZGVDb250ZXh0IHtcbiAgICBjb25zdHJ1Y3Rvcih0KSB7XG4gICAgICAgIHRoaXMuYmluZGluZ0NvbnRleHQgPSB0O1xuICAgIH1cbiAgICBzdGF0aWMgY3JlYXRlKHQpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBPdmVycmlkZUNvbnRleHQodCk7XG4gICAgfVxufVxuXG5jb25zdCBCID0gci5jcmVhdGVJbnRlcmZhY2UoXCJJU2lnbmFsZXJcIiwgKHQgPT4gdC5zaW5nbGV0b24oU2lnbmFsZXIpKSk7XG5cbmNsYXNzIFNpZ25hbGVyIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgdGhpcy5zaWduYWxzID0gRSgpO1xuICAgIH1cbiAgICBkaXNwYXRjaFNpZ25hbCh0LCBlKSB7XG4gICAgICAgIGNvbnN0IHMgPSB0aGlzLnNpZ25hbHNbdF07XG4gICAgICAgIGlmICh2b2lkIDAgPT09IHMpIHJldHVybjtcbiAgICAgICAgbGV0IHI7XG4gICAgICAgIGZvciAociBvZiBzLmtleXMoKSkgci5oYW5kbGVDaGFuZ2Uodm9pZCAwLCB2b2lkIDAsIGUpO1xuICAgIH1cbiAgICBhZGRTaWduYWxMaXN0ZW5lcih0LCBlKSB7XG4gICAgICAgIGNvbnN0IHMgPSB0aGlzLnNpZ25hbHM7XG4gICAgICAgIGNvbnN0IHIgPSBzW3RdO1xuICAgICAgICBpZiAodm9pZCAwID09PSByKSBzW3RdID0gbmV3IFNldChbIGUgXSk7IGVsc2Ugci5hZGQoZSk7XG4gICAgfVxuICAgIHJlbW92ZVNpZ25hbExpc3RlbmVyKHQsIGUpIHtcbiAgICAgICAgY29uc3QgcyA9IHRoaXMuc2lnbmFsc1t0XTtcbiAgICAgICAgaWYgKHMpIHMuZGVsZXRlKGUpO1xuICAgIH1cbn1cblxudmFyICQ7XG5cbihmdW5jdGlvbih0KSB7XG4gICAgdFt0W1wic2luZ2xldG9uXCJdID0gMV0gPSBcInNpbmdsZXRvblwiO1xuICAgIHRbdFtcImludGVyY2VwdG9yXCJdID0gMl0gPSBcImludGVyY2VwdG9yXCI7XG59KSgkIHx8ICgkID0ge30pKTtcblxuZnVuY3Rpb24gTCh0KSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgcmV0dXJuIFQuZGVmaW5lKHQsIGUpO1xuICAgIH07XG59XG5cbmNsYXNzIEJpbmRpbmdCZWhhdmlvckRlZmluaXRpb24ge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUsIHMsIHIsIGkpIHtcbiAgICAgICAgdGhpcy5UeXBlID0gdDtcbiAgICAgICAgdGhpcy5uYW1lID0gZTtcbiAgICAgICAgdGhpcy5hbGlhc2VzID0gcztcbiAgICAgICAgdGhpcy5rZXkgPSByO1xuICAgICAgICB0aGlzLnN0cmF0ZWd5ID0gaTtcbiAgICB9XG4gICAgc3RhdGljIGNyZWF0ZSh0LCBlKSB7XG4gICAgICAgIGxldCBzO1xuICAgICAgICBsZXQgcjtcbiAgICAgICAgaWYgKGcodCkpIHtcbiAgICAgICAgICAgIHMgPSB0O1xuICAgICAgICAgICAgciA9IHtcbiAgICAgICAgICAgICAgICBuYW1lOiBzXG4gICAgICAgICAgICB9O1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcyA9IHQubmFtZTtcbiAgICAgICAgICAgIHIgPSB0O1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGggPSBPYmplY3QuZ2V0UHJvdG90eXBlT2YoZSkgPT09IEJpbmRpbmdJbnRlcmNlcHRvcjtcbiAgICAgICAgcmV0dXJuIG5ldyBCaW5kaW5nQmVoYXZpb3JEZWZpbml0aW9uKGUsIGkoUChlLCBcIm5hbWVcIiksIHMpLCBuKFAoZSwgXCJhbGlhc2VzXCIpLCByLmFsaWFzZXMsIGUuYWxpYXNlcyksIFQua2V5RnJvbShzKSwgbyhcInN0cmF0ZWd5XCIsIHIsIGUsICgoKSA9PiBoID8gMiA6IDEpKSk7XG4gICAgfVxuICAgIHJlZ2lzdGVyKHQpIHtcbiAgICAgICAgY29uc3Qge1R5cGU6IGUsIGtleTogciwgYWxpYXNlczogaSwgc3RyYXRlZ3k6IG59ID0gdGhpcztcbiAgICAgICAgc3dpdGNoIChuKSB7XG4gICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgcy5zaW5nbGV0b24ociwgZSkucmVnaXN0ZXIodCk7XG4gICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgIHMuaW5zdGFuY2UociwgbmV3IEJpbmRpbmdCZWhhdmlvckZhY3RvcnkodCwgZSkpLnJlZ2lzdGVyKHQpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgcy5hbGlhc1RvKHIsIGUpLnJlZ2lzdGVyKHQpO1xuICAgICAgICBDKGksIFQsIHIsIHQpO1xuICAgIH1cbn1cblxuY2xhc3MgQmluZGluZ0JlaGF2aW9yRmFjdG9yeSB7XG4gICAgY29uc3RydWN0b3IodCwgZSkge1xuICAgICAgICB0aGlzLmN0biA9IHQ7XG4gICAgICAgIHRoaXMuVHlwZSA9IGU7XG4gICAgICAgIHRoaXMuZGVwcyA9IHIuZ2V0RGVwZW5kZW5jaWVzKGUpO1xuICAgIH1cbiAgICBjb25zdHJ1Y3QodCwgZSkge1xuICAgICAgICBjb25zdCBzID0gdGhpcy5jdG47XG4gICAgICAgIGNvbnN0IHIgPSB0aGlzLmRlcHM7XG4gICAgICAgIHN3aXRjaCAoci5sZW5ndGgpIHtcbiAgICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgICByZXR1cm4gbmV3IHRoaXMuVHlwZSh0LCBlKTtcblxuICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgIHJldHVybiBuZXcgdGhpcy5UeXBlKHMuZ2V0KHJbMF0pLCB0LCBlKTtcblxuICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgIHJldHVybiBuZXcgdGhpcy5UeXBlKHMuZ2V0KHJbMF0pLCBzLmdldChyWzFdKSwgdCwgZSk7XG5cbiAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgcmV0dXJuIG5ldyB0aGlzLlR5cGUoLi4uci5tYXAoKHQgPT4gcy5nZXQodCkpKSwgdCwgZSk7XG4gICAgICAgIH1cbiAgICB9XG59XG5cbmNsYXNzIEJpbmRpbmdJbnRlcmNlcHRvciB7XG4gICAgY29uc3RydWN0b3IodCwgZSkge1xuICAgICAgICB0aGlzLmJpbmRpbmcgPSB0O1xuICAgICAgICB0aGlzLmV4cHIgPSBlO1xuICAgICAgICB0aGlzLmludGVyY2VwdG9yID0gdGhpcztcbiAgICAgICAgbGV0IHM7XG4gICAgICAgIHdoaWxlICh0LmludGVyY2VwdG9yICE9PSB0aGlzKSB7XG4gICAgICAgICAgICBzID0gdC5pbnRlcmNlcHRvcjtcbiAgICAgICAgICAgIHQuaW50ZXJjZXB0b3IgPSB0aGlzO1xuICAgICAgICAgICAgdCA9IHM7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZ2V0IG9MKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5iaW5kaW5nLm9MO1xuICAgIH1cbiAgICBnZXQgbG9jYXRvcigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuYmluZGluZy5sb2NhdG9yO1xuICAgIH1cbiAgICBnZXQgJHNjb3BlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5iaW5kaW5nLiRzY29wZTtcbiAgICB9XG4gICAgZ2V0IGlzQm91bmQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmJpbmRpbmcuaXNCb3VuZDtcbiAgICB9XG4gICAgZ2V0IG9icygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuYmluZGluZy5vYnM7XG4gICAgfVxuICAgIGdldCBzb3VyY2VFeHByZXNzaW9uKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5iaW5kaW5nLnNvdXJjZUV4cHJlc3Npb247XG4gICAgfVxuICAgIHVwZGF0ZVRhcmdldCh0LCBlKSB7XG4gICAgICAgIHRoaXMuYmluZGluZy51cGRhdGVUYXJnZXQodCwgZSk7XG4gICAgfVxuICAgIHVwZGF0ZVNvdXJjZSh0LCBlKSB7XG4gICAgICAgIHRoaXMuYmluZGluZy51cGRhdGVTb3VyY2UodCwgZSk7XG4gICAgfVxuICAgIGNhbGxTb3VyY2UodCkge1xuICAgICAgICByZXR1cm4gdGhpcy5iaW5kaW5nLmNhbGxTb3VyY2UodCk7XG4gICAgfVxuICAgIGhhbmRsZUNoYW5nZSh0LCBlLCBzKSB7XG4gICAgICAgIHRoaXMuYmluZGluZy5oYW5kbGVDaGFuZ2UodCwgZSwgcyk7XG4gICAgfVxuICAgIGhhbmRsZUNvbGxlY3Rpb25DaGFuZ2UodCwgZSkge1xuICAgICAgICB0aGlzLmJpbmRpbmcuaGFuZGxlQ29sbGVjdGlvbkNoYW5nZSh0LCBlKTtcbiAgICB9XG4gICAgb2JzZXJ2ZSh0LCBlKSB7XG4gICAgICAgIHRoaXMuYmluZGluZy5vYnNlcnZlKHQsIGUpO1xuICAgIH1cbiAgICBvYnNlcnZlQ29sbGVjdGlvbih0KSB7XG4gICAgICAgIHRoaXMuYmluZGluZy5vYnNlcnZlQ29sbGVjdGlvbih0KTtcbiAgICB9XG4gICAgJGJpbmQodCwgZSkge1xuICAgICAgICB0aGlzLmJpbmRpbmcuJGJpbmQodCwgZSk7XG4gICAgfVxuICAgICR1bmJpbmQodCkge1xuICAgICAgICB0aGlzLmJpbmRpbmcuJHVuYmluZCh0KTtcbiAgICB9XG59XG5cbmNvbnN0IFIgPSB4KFwiYmluZGluZy1iZWhhdmlvclwiKTtcblxuY29uc3QgUCA9ICh0LCBlKSA9PiBBKFUoZSksIHQpO1xuXG5jb25zdCBUID0gT2JqZWN0LmZyZWV6ZSh7XG4gICAgbmFtZTogUixcbiAgICBrZXlGcm9tKHQpIHtcbiAgICAgICAgcmV0dXJuIGAke1J9OiR7dH1gO1xuICAgIH0sXG4gICAgaXNUeXBlKHQpIHtcbiAgICAgICAgcmV0dXJuIHAodCkgJiYgeShSLCB0KTtcbiAgICB9LFxuICAgIGRlZmluZSh0LCBlKSB7XG4gICAgICAgIGNvbnN0IHMgPSBCaW5kaW5nQmVoYXZpb3JEZWZpbml0aW9uLmNyZWF0ZSh0LCBlKTtcbiAgICAgICAgbShSLCBzLCBzLlR5cGUpO1xuICAgICAgICBtKFIsIHMsIHMpO1xuICAgICAgICBTKGUsIFIpO1xuICAgICAgICByZXR1cm4gcy5UeXBlO1xuICAgIH0sXG4gICAgZ2V0RGVmaW5pdGlvbih0KSB7XG4gICAgICAgIGNvbnN0IGUgPSBBKFIsIHQpO1xuICAgICAgICBpZiAodm9pZCAwID09PSBlKSB0aHJvdyBuZXcgRXJyb3IoYEFVUjAxNTE6JHt0Lm5hbWV9YCk7XG4gICAgICAgIHJldHVybiBlO1xuICAgIH0sXG4gICAgYW5ub3RhdGUodCwgZSwgcykge1xuICAgICAgICBtKFUoZSksIHMsIHQpO1xuICAgIH0sXG4gICAgZ2V0QW5ub3RhdGlvbjogUFxufSk7XG5cbmZ1bmN0aW9uIGoodCkge1xuICAgIHJldHVybiBmdW5jdGlvbihlKSB7XG4gICAgICAgIHJldHVybiBELmRlZmluZSh0LCBlKTtcbiAgICB9O1xufVxuXG5jbGFzcyBWYWx1ZUNvbnZlcnRlckRlZmluaXRpb24ge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUsIHMsIHIpIHtcbiAgICAgICAgdGhpcy5UeXBlID0gdDtcbiAgICAgICAgdGhpcy5uYW1lID0gZTtcbiAgICAgICAgdGhpcy5hbGlhc2VzID0gcztcbiAgICAgICAgdGhpcy5rZXkgPSByO1xuICAgIH1cbiAgICBzdGF0aWMgY3JlYXRlKHQsIGUpIHtcbiAgICAgICAgbGV0IHM7XG4gICAgICAgIGxldCByO1xuICAgICAgICBpZiAoZyh0KSkge1xuICAgICAgICAgICAgcyA9IHQ7XG4gICAgICAgICAgICByID0ge1xuICAgICAgICAgICAgICAgIG5hbWU6IHNcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBzID0gdC5uYW1lO1xuICAgICAgICAgICAgciA9IHQ7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5ldyBWYWx1ZUNvbnZlcnRlckRlZmluaXRpb24oZSwgaShNKGUsIFwibmFtZVwiKSwgcyksIG4oTShlLCBcImFsaWFzZXNcIiksIHIuYWxpYXNlcywgZS5hbGlhc2VzKSwgRC5rZXlGcm9tKHMpKTtcbiAgICB9XG4gICAgcmVnaXN0ZXIodCkge1xuICAgICAgICBjb25zdCB7VHlwZTogZSwga2V5OiByLCBhbGlhc2VzOiBpfSA9IHRoaXM7XG4gICAgICAgIHMuc2luZ2xldG9uKHIsIGUpLnJlZ2lzdGVyKHQpO1xuICAgICAgICBzLmFsaWFzVG8ociwgZSkucmVnaXN0ZXIodCk7XG4gICAgICAgIEMoaSwgRCwgciwgdCk7XG4gICAgfVxufVxuXG5jb25zdCBJID0geChcInZhbHVlLWNvbnZlcnRlclwiKTtcblxuY29uc3QgTSA9ICh0LCBlKSA9PiBBKFUoZSksIHQpO1xuXG5jb25zdCBEID0gT2JqZWN0LmZyZWV6ZSh7XG4gICAgbmFtZTogSSxcbiAgICBrZXlGcm9tOiB0ID0+IGAke0l9OiR7dH1gLFxuICAgIGlzVHlwZSh0KSB7XG4gICAgICAgIHJldHVybiBwKHQpICYmIHkoSSwgdCk7XG4gICAgfSxcbiAgICBkZWZpbmUodCwgZSkge1xuICAgICAgICBjb25zdCBzID0gVmFsdWVDb252ZXJ0ZXJEZWZpbml0aW9uLmNyZWF0ZSh0LCBlKTtcbiAgICAgICAgbShJLCBzLCBzLlR5cGUpO1xuICAgICAgICBtKEksIHMsIHMpO1xuICAgICAgICBTKGUsIEkpO1xuICAgICAgICByZXR1cm4gcy5UeXBlO1xuICAgIH0sXG4gICAgZ2V0RGVmaW5pdGlvbih0KSB7XG4gICAgICAgIGNvbnN0IGUgPSBBKEksIHQpO1xuICAgICAgICBpZiAodm9pZCAwID09PSBlKSB0aHJvdyBuZXcgRXJyb3IoYEFVUjAxNTI6JHt0Lm5hbWV9YCk7XG4gICAgICAgIHJldHVybiBlO1xuICAgIH0sXG4gICAgYW5ub3RhdGUodCwgZSwgcykge1xuICAgICAgICBtKFUoZSksIHMsIHQpO1xuICAgIH0sXG4gICAgZ2V0QW5ub3RhdGlvbjogTVxufSk7XG5cbnZhciBGO1xuXG4oZnVuY3Rpb24odCkge1xuICAgIHRbdFtcIkNhbGxzRnVuY3Rpb25cIl0gPSAxMjhdID0gXCJDYWxsc0Z1bmN0aW9uXCI7XG4gICAgdFt0W1wiSGFzQW5jZXN0b3JcIl0gPSAyNTZdID0gXCJIYXNBbmNlc3RvclwiO1xuICAgIHRbdFtcIklzUHJpbWFyeVwiXSA9IDUxMl0gPSBcIklzUHJpbWFyeVwiO1xuICAgIHRbdFtcIklzTGVmdEhhbmRTaWRlXCJdID0gMTAyNF0gPSBcIklzTGVmdEhhbmRTaWRlXCI7XG4gICAgdFt0W1wiSGFzQmluZFwiXSA9IDIwNDhdID0gXCJIYXNCaW5kXCI7XG4gICAgdFt0W1wiSGFzVW5iaW5kXCJdID0gNDA5Nl0gPSBcIkhhc1VuYmluZFwiO1xuICAgIHRbdFtcIklzQXNzaWduYWJsZVwiXSA9IDgxOTJdID0gXCJJc0Fzc2lnbmFibGVcIjtcbiAgICB0W3RbXCJJc0xpdGVyYWxcIl0gPSAxNjM4NF0gPSBcIklzTGl0ZXJhbFwiO1xuICAgIHRbdFtcIklzUmVzb3VyY2VcIl0gPSAzMjc2OF0gPSBcIklzUmVzb3VyY2VcIjtcbiAgICB0W3RbXCJJc0ZvckRlY2xhcmF0aW9uXCJdID0gNjU1MzZdID0gXCJJc0ZvckRlY2xhcmF0aW9uXCI7XG4gICAgdFt0W1wiVHlwZVwiXSA9IDMxXSA9IFwiVHlwZVwiO1xuICAgIHRbdFtcIkFjY2Vzc1RoaXNcIl0gPSAxNzkzXSA9IFwiQWNjZXNzVGhpc1wiO1xuICAgIHRbdFtcIkFjY2Vzc1Njb3BlXCJdID0gMTAwODJdID0gXCJBY2Nlc3NTY29wZVwiO1xuICAgIHRbdFtcIkFycmF5TGl0ZXJhbFwiXSA9IDE3OTU1XSA9IFwiQXJyYXlMaXRlcmFsXCI7XG4gICAgdFt0W1wiT2JqZWN0TGl0ZXJhbFwiXSA9IDE3OTU2XSA9IFwiT2JqZWN0TGl0ZXJhbFwiO1xuICAgIHRbdFtcIlByaW1pdGl2ZUxpdGVyYWxcIl0gPSAxNzkyNV0gPSBcIlByaW1pdGl2ZUxpdGVyYWxcIjtcbiAgICB0W3RbXCJUZW1wbGF0ZVwiXSA9IDE3OTU4XSA9IFwiVGVtcGxhdGVcIjtcbiAgICB0W3RbXCJVbmFyeVwiXSA9IDM5XSA9IFwiVW5hcnlcIjtcbiAgICB0W3RbXCJDYWxsU2NvcGVcIl0gPSAxNDQ4XSA9IFwiQ2FsbFNjb3BlXCI7XG4gICAgdFt0W1wiQ2FsbE1lbWJlclwiXSA9IDExNjFdID0gXCJDYWxsTWVtYmVyXCI7XG4gICAgdFt0W1wiQ2FsbEZ1bmN0aW9uXCJdID0gMTE2Ml0gPSBcIkNhbGxGdW5jdGlvblwiO1xuICAgIHRbdFtcIkFjY2Vzc01lbWJlclwiXSA9IDkzMjNdID0gXCJBY2Nlc3NNZW1iZXJcIjtcbiAgICB0W3RbXCJBY2Nlc3NLZXllZFwiXSA9IDkzMjRdID0gXCJBY2Nlc3NLZXllZFwiO1xuICAgIHRbdFtcIlRhZ2dlZFRlbXBsYXRlXCJdID0gMTE5N10gPSBcIlRhZ2dlZFRlbXBsYXRlXCI7XG4gICAgdFt0W1wiQmluYXJ5XCJdID0gNDZdID0gXCJCaW5hcnlcIjtcbiAgICB0W3RbXCJDb25kaXRpb25hbFwiXSA9IDYzXSA9IFwiQ29uZGl0aW9uYWxcIjtcbiAgICB0W3RbXCJBc3NpZ25cIl0gPSA4MjA4XSA9IFwiQXNzaWduXCI7XG4gICAgdFt0W1wiVmFsdWVDb252ZXJ0ZXJcIl0gPSAzNjkxM10gPSBcIlZhbHVlQ29udmVydGVyXCI7XG4gICAgdFt0W1wiQmluZGluZ0JlaGF2aW9yXCJdID0gMzg5NjJdID0gXCJCaW5kaW5nQmVoYXZpb3JcIjtcbiAgICB0W3RbXCJIdG1sTGl0ZXJhbFwiXSA9IDUxXSA9IFwiSHRtbExpdGVyYWxcIjtcbiAgICB0W3RbXCJBcnJheUJpbmRpbmdQYXR0ZXJuXCJdID0gNjU1NTZdID0gXCJBcnJheUJpbmRpbmdQYXR0ZXJuXCI7XG4gICAgdFt0W1wiT2JqZWN0QmluZGluZ1BhdHRlcm5cIl0gPSA2NTU1N10gPSBcIk9iamVjdEJpbmRpbmdQYXR0ZXJuXCI7XG4gICAgdFt0W1wiQmluZGluZ0lkZW50aWZpZXJcIl0gPSA2NTU1OF0gPSBcIkJpbmRpbmdJZGVudGlmaWVyXCI7XG4gICAgdFt0W1wiRm9yT2ZTdGF0ZW1lbnRcIl0gPSA2MTk5XSA9IFwiRm9yT2ZTdGF0ZW1lbnRcIjtcbiAgICB0W3RbXCJJbnRlcnBvbGF0aW9uXCJdID0gMjRdID0gXCJJbnRlcnBvbGF0aW9uXCI7XG4gICAgdFt0W1wiQXJyYXlEZXN0cnVjdHVyaW5nXCJdID0gOTAxMzddID0gXCJBcnJheURlc3RydWN0dXJpbmdcIjtcbiAgICB0W3RbXCJPYmplY3REZXN0cnVjdHVyaW5nXCJdID0gMTA2NTIxXSA9IFwiT2JqZWN0RGVzdHJ1Y3R1cmluZ1wiO1xuICAgIHRbdFtcIkRlc3RydWN0dXJpbmdBc3NpZ25tZW50TGVhZlwiXSA9IDEzOTI4OV0gPSBcIkRlc3RydWN0dXJpbmdBc3NpZ25tZW50TGVhZlwiO1xufSkoRiB8fCAoRiA9IHt9KSk7XG5cbmNsYXNzIFVucGFyc2VyIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgdGhpcy50ZXh0ID0gXCJcIjtcbiAgICB9XG4gICAgc3RhdGljIHVucGFyc2UodCkge1xuICAgICAgICBjb25zdCBlID0gbmV3IFVucGFyc2VyO1xuICAgICAgICB0LmFjY2VwdChlKTtcbiAgICAgICAgcmV0dXJuIGUudGV4dDtcbiAgICB9XG4gICAgdmlzaXRBY2Nlc3NNZW1iZXIodCkge1xuICAgICAgICB0Lm9iamVjdC5hY2NlcHQodGhpcyk7XG4gICAgICAgIHRoaXMudGV4dCArPSBgLiR7dC5uYW1lfWA7XG4gICAgfVxuICAgIHZpc2l0QWNjZXNzS2V5ZWQodCkge1xuICAgICAgICB0Lm9iamVjdC5hY2NlcHQodGhpcyk7XG4gICAgICAgIHRoaXMudGV4dCArPSBcIltcIjtcbiAgICAgICAgdC5rZXkuYWNjZXB0KHRoaXMpO1xuICAgICAgICB0aGlzLnRleHQgKz0gXCJdXCI7XG4gICAgfVxuICAgIHZpc2l0QWNjZXNzVGhpcyh0KSB7XG4gICAgICAgIGlmICgwID09PSB0LmFuY2VzdG9yKSB7XG4gICAgICAgICAgICB0aGlzLnRleHQgKz0gXCIkdGhpc1wiO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMudGV4dCArPSBcIiRwYXJlbnRcIjtcbiAgICAgICAgbGV0IGUgPSB0LmFuY2VzdG9yIC0gMTtcbiAgICAgICAgd2hpbGUgKGUtLSkgdGhpcy50ZXh0ICs9IFwiLiRwYXJlbnRcIjtcbiAgICB9XG4gICAgdmlzaXRBY2Nlc3NTY29wZSh0KSB7XG4gICAgICAgIGxldCBlID0gdC5hbmNlc3RvcjtcbiAgICAgICAgd2hpbGUgKGUtLSkgdGhpcy50ZXh0ICs9IFwiJHBhcmVudC5cIjtcbiAgICAgICAgdGhpcy50ZXh0ICs9IHQubmFtZTtcbiAgICB9XG4gICAgdmlzaXRBcnJheUxpdGVyYWwodCkge1xuICAgICAgICBjb25zdCBlID0gdC5lbGVtZW50cztcbiAgICAgICAgdGhpcy50ZXh0ICs9IFwiW1wiO1xuICAgICAgICBmb3IgKGxldCB0ID0gMCwgcyA9IGUubGVuZ3RoOyB0IDwgczsgKyt0KSB7XG4gICAgICAgICAgICBpZiAoMCAhPT0gdCkgdGhpcy50ZXh0ICs9IFwiLFwiO1xuICAgICAgICAgICAgZVt0XS5hY2NlcHQodGhpcyk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy50ZXh0ICs9IFwiXVwiO1xuICAgIH1cbiAgICB2aXNpdE9iamVjdExpdGVyYWwodCkge1xuICAgICAgICBjb25zdCBlID0gdC5rZXlzO1xuICAgICAgICBjb25zdCBzID0gdC52YWx1ZXM7XG4gICAgICAgIHRoaXMudGV4dCArPSBcIntcIjtcbiAgICAgICAgZm9yIChsZXQgdCA9IDAsIHIgPSBlLmxlbmd0aDsgdCA8IHI7ICsrdCkge1xuICAgICAgICAgICAgaWYgKDAgIT09IHQpIHRoaXMudGV4dCArPSBcIixcIjtcbiAgICAgICAgICAgIHRoaXMudGV4dCArPSBgJyR7ZVt0XX0nOmA7XG4gICAgICAgICAgICBzW3RdLmFjY2VwdCh0aGlzKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnRleHQgKz0gXCJ9XCI7XG4gICAgfVxuICAgIHZpc2l0UHJpbWl0aXZlTGl0ZXJhbCh0KSB7XG4gICAgICAgIHRoaXMudGV4dCArPSBcIihcIjtcbiAgICAgICAgaWYgKGcodC52YWx1ZSkpIHtcbiAgICAgICAgICAgIGNvbnN0IGUgPSB0LnZhbHVlLnJlcGxhY2UoLycvZywgXCJcXFxcJ1wiKTtcbiAgICAgICAgICAgIHRoaXMudGV4dCArPSBgJyR7ZX0nYDtcbiAgICAgICAgfSBlbHNlIHRoaXMudGV4dCArPSBgJHt0LnZhbHVlfWA7XG4gICAgICAgIHRoaXMudGV4dCArPSBcIilcIjtcbiAgICB9XG4gICAgdmlzaXRDYWxsRnVuY3Rpb24odCkge1xuICAgICAgICB0aGlzLnRleHQgKz0gXCIoXCI7XG4gICAgICAgIHQuZnVuYy5hY2NlcHQodGhpcyk7XG4gICAgICAgIHRoaXMud3JpdGVBcmdzKHQuYXJncyk7XG4gICAgICAgIHRoaXMudGV4dCArPSBcIilcIjtcbiAgICB9XG4gICAgdmlzaXRDYWxsTWVtYmVyKHQpIHtcbiAgICAgICAgdGhpcy50ZXh0ICs9IFwiKFwiO1xuICAgICAgICB0Lm9iamVjdC5hY2NlcHQodGhpcyk7XG4gICAgICAgIHRoaXMudGV4dCArPSBgLiR7dC5uYW1lfWA7XG4gICAgICAgIHRoaXMud3JpdGVBcmdzKHQuYXJncyk7XG4gICAgICAgIHRoaXMudGV4dCArPSBcIilcIjtcbiAgICB9XG4gICAgdmlzaXRDYWxsU2NvcGUodCkge1xuICAgICAgICB0aGlzLnRleHQgKz0gXCIoXCI7XG4gICAgICAgIGxldCBlID0gdC5hbmNlc3RvcjtcbiAgICAgICAgd2hpbGUgKGUtLSkgdGhpcy50ZXh0ICs9IFwiJHBhcmVudC5cIjtcbiAgICAgICAgdGhpcy50ZXh0ICs9IHQubmFtZTtcbiAgICAgICAgdGhpcy53cml0ZUFyZ3ModC5hcmdzKTtcbiAgICAgICAgdGhpcy50ZXh0ICs9IFwiKVwiO1xuICAgIH1cbiAgICB2aXNpdFRlbXBsYXRlKHQpIHtcbiAgICAgICAgY29uc3Qge2Nvb2tlZDogZSwgZXhwcmVzc2lvbnM6IHN9ID0gdDtcbiAgICAgICAgY29uc3QgciA9IHMubGVuZ3RoO1xuICAgICAgICB0aGlzLnRleHQgKz0gXCJgXCI7XG4gICAgICAgIHRoaXMudGV4dCArPSBlWzBdO1xuICAgICAgICBmb3IgKGxldCB0ID0gMDsgdCA8IHI7IHQrKykge1xuICAgICAgICAgICAgc1t0XS5hY2NlcHQodGhpcyk7XG4gICAgICAgICAgICB0aGlzLnRleHQgKz0gZVt0ICsgMV07XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy50ZXh0ICs9IFwiYFwiO1xuICAgIH1cbiAgICB2aXNpdFRhZ2dlZFRlbXBsYXRlKHQpIHtcbiAgICAgICAgY29uc3Qge2Nvb2tlZDogZSwgZXhwcmVzc2lvbnM6IHN9ID0gdDtcbiAgICAgICAgY29uc3QgciA9IHMubGVuZ3RoO1xuICAgICAgICB0LmZ1bmMuYWNjZXB0KHRoaXMpO1xuICAgICAgICB0aGlzLnRleHQgKz0gXCJgXCI7XG4gICAgICAgIHRoaXMudGV4dCArPSBlWzBdO1xuICAgICAgICBmb3IgKGxldCB0ID0gMDsgdCA8IHI7IHQrKykge1xuICAgICAgICAgICAgc1t0XS5hY2NlcHQodGhpcyk7XG4gICAgICAgICAgICB0aGlzLnRleHQgKz0gZVt0ICsgMV07XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy50ZXh0ICs9IFwiYFwiO1xuICAgIH1cbiAgICB2aXNpdFVuYXJ5KHQpIHtcbiAgICAgICAgdGhpcy50ZXh0ICs9IGAoJHt0Lm9wZXJhdGlvbn1gO1xuICAgICAgICBpZiAodC5vcGVyYXRpb24uY2hhckNvZGVBdCgwKSA+PSA5NykgdGhpcy50ZXh0ICs9IFwiIFwiO1xuICAgICAgICB0LmV4cHJlc3Npb24uYWNjZXB0KHRoaXMpO1xuICAgICAgICB0aGlzLnRleHQgKz0gXCIpXCI7XG4gICAgfVxuICAgIHZpc2l0QmluYXJ5KHQpIHtcbiAgICAgICAgdGhpcy50ZXh0ICs9IFwiKFwiO1xuICAgICAgICB0LmxlZnQuYWNjZXB0KHRoaXMpO1xuICAgICAgICBpZiAoMTA1ID09PSB0Lm9wZXJhdGlvbi5jaGFyQ29kZUF0KDApKSB0aGlzLnRleHQgKz0gYCAke3Qub3BlcmF0aW9ufSBgOyBlbHNlIHRoaXMudGV4dCArPSB0Lm9wZXJhdGlvbjtcbiAgICAgICAgdC5yaWdodC5hY2NlcHQodGhpcyk7XG4gICAgICAgIHRoaXMudGV4dCArPSBcIilcIjtcbiAgICB9XG4gICAgdmlzaXRDb25kaXRpb25hbCh0KSB7XG4gICAgICAgIHRoaXMudGV4dCArPSBcIihcIjtcbiAgICAgICAgdC5jb25kaXRpb24uYWNjZXB0KHRoaXMpO1xuICAgICAgICB0aGlzLnRleHQgKz0gXCI/XCI7XG4gICAgICAgIHQueWVzLmFjY2VwdCh0aGlzKTtcbiAgICAgICAgdGhpcy50ZXh0ICs9IFwiOlwiO1xuICAgICAgICB0Lm5vLmFjY2VwdCh0aGlzKTtcbiAgICAgICAgdGhpcy50ZXh0ICs9IFwiKVwiO1xuICAgIH1cbiAgICB2aXNpdEFzc2lnbih0KSB7XG4gICAgICAgIHRoaXMudGV4dCArPSBcIihcIjtcbiAgICAgICAgdC50YXJnZXQuYWNjZXB0KHRoaXMpO1xuICAgICAgICB0aGlzLnRleHQgKz0gXCI9XCI7XG4gICAgICAgIHQudmFsdWUuYWNjZXB0KHRoaXMpO1xuICAgICAgICB0aGlzLnRleHQgKz0gXCIpXCI7XG4gICAgfVxuICAgIHZpc2l0VmFsdWVDb252ZXJ0ZXIodCkge1xuICAgICAgICBjb25zdCBlID0gdC5hcmdzO1xuICAgICAgICB0LmV4cHJlc3Npb24uYWNjZXB0KHRoaXMpO1xuICAgICAgICB0aGlzLnRleHQgKz0gYHwke3QubmFtZX1gO1xuICAgICAgICBmb3IgKGxldCB0ID0gMCwgcyA9IGUubGVuZ3RoOyB0IDwgczsgKyt0KSB7XG4gICAgICAgICAgICB0aGlzLnRleHQgKz0gXCI6XCI7XG4gICAgICAgICAgICBlW3RdLmFjY2VwdCh0aGlzKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICB2aXNpdEJpbmRpbmdCZWhhdmlvcih0KSB7XG4gICAgICAgIGNvbnN0IGUgPSB0LmFyZ3M7XG4gICAgICAgIHQuZXhwcmVzc2lvbi5hY2NlcHQodGhpcyk7XG4gICAgICAgIHRoaXMudGV4dCArPSBgJiR7dC5uYW1lfWA7XG4gICAgICAgIGZvciAobGV0IHQgPSAwLCBzID0gZS5sZW5ndGg7IHQgPCBzOyArK3QpIHtcbiAgICAgICAgICAgIHRoaXMudGV4dCArPSBcIjpcIjtcbiAgICAgICAgICAgIGVbdF0uYWNjZXB0KHRoaXMpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHZpc2l0QXJyYXlCaW5kaW5nUGF0dGVybih0KSB7XG4gICAgICAgIGNvbnN0IGUgPSB0LmVsZW1lbnRzO1xuICAgICAgICB0aGlzLnRleHQgKz0gXCJbXCI7XG4gICAgICAgIGZvciAobGV0IHQgPSAwLCBzID0gZS5sZW5ndGg7IHQgPCBzOyArK3QpIHtcbiAgICAgICAgICAgIGlmICgwICE9PSB0KSB0aGlzLnRleHQgKz0gXCIsXCI7XG4gICAgICAgICAgICBlW3RdLmFjY2VwdCh0aGlzKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnRleHQgKz0gXCJdXCI7XG4gICAgfVxuICAgIHZpc2l0T2JqZWN0QmluZGluZ1BhdHRlcm4odCkge1xuICAgICAgICBjb25zdCBlID0gdC5rZXlzO1xuICAgICAgICBjb25zdCBzID0gdC52YWx1ZXM7XG4gICAgICAgIHRoaXMudGV4dCArPSBcIntcIjtcbiAgICAgICAgZm9yIChsZXQgdCA9IDAsIHIgPSBlLmxlbmd0aDsgdCA8IHI7ICsrdCkge1xuICAgICAgICAgICAgaWYgKDAgIT09IHQpIHRoaXMudGV4dCArPSBcIixcIjtcbiAgICAgICAgICAgIHRoaXMudGV4dCArPSBgJyR7ZVt0XX0nOmA7XG4gICAgICAgICAgICBzW3RdLmFjY2VwdCh0aGlzKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnRleHQgKz0gXCJ9XCI7XG4gICAgfVxuICAgIHZpc2l0QmluZGluZ0lkZW50aWZpZXIodCkge1xuICAgICAgICB0aGlzLnRleHQgKz0gdC5uYW1lO1xuICAgIH1cbiAgICB2aXNpdEh0bWxMaXRlcmFsKHQpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwidmlzaXRIdG1sTGl0ZXJhbFwiKTtcbiAgICB9XG4gICAgdmlzaXRGb3JPZlN0YXRlbWVudCh0KSB7XG4gICAgICAgIHQuZGVjbGFyYXRpb24uYWNjZXB0KHRoaXMpO1xuICAgICAgICB0aGlzLnRleHQgKz0gXCIgb2YgXCI7XG4gICAgICAgIHQuaXRlcmFibGUuYWNjZXB0KHRoaXMpO1xuICAgIH1cbiAgICB2aXNpdEludGVycG9sYXRpb24odCkge1xuICAgICAgICBjb25zdCB7cGFydHM6IGUsIGV4cHJlc3Npb25zOiBzfSA9IHQ7XG4gICAgICAgIGNvbnN0IHIgPSBzLmxlbmd0aDtcbiAgICAgICAgdGhpcy50ZXh0ICs9IFwiJHtcIjtcbiAgICAgICAgdGhpcy50ZXh0ICs9IGVbMF07XG4gICAgICAgIGZvciAobGV0IHQgPSAwOyB0IDwgcjsgdCsrKSB7XG4gICAgICAgICAgICBzW3RdLmFjY2VwdCh0aGlzKTtcbiAgICAgICAgICAgIHRoaXMudGV4dCArPSBlW3QgKyAxXTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnRleHQgKz0gXCJ9XCI7XG4gICAgfVxuICAgIHZpc2l0RGVzdHJ1Y3R1cmluZ0Fzc2lnbm1lbnRFeHByZXNzaW9uKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IHQuJGtpbmQ7XG4gICAgICAgIGNvbnN0IHMgPSAxMDY1MjEgPT09IGU7XG4gICAgICAgIHRoaXMudGV4dCArPSBzID8gXCJ7XCIgOiBcIltcIjtcbiAgICAgICAgY29uc3QgciA9IHQubGlzdDtcbiAgICAgICAgY29uc3QgaSA9IHIubGVuZ3RoO1xuICAgICAgICBsZXQgbjtcbiAgICAgICAgbGV0IG87XG4gICAgICAgIGZvciAobiA9IDA7IG4gPCBpOyBuKyspIHtcbiAgICAgICAgICAgIG8gPSByW25dO1xuICAgICAgICAgICAgc3dpdGNoIChvLiRraW5kKSB7XG4gICAgICAgICAgICAgIGNhc2UgMTM5Mjg5OlxuICAgICAgICAgICAgICAgIG8uYWNjZXB0KHRoaXMpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICAgIGNhc2UgOTAxMzc6XG4gICAgICAgICAgICAgIGNhc2UgMTA2NTIxOlxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgdCA9IG8uc291cmNlO1xuICAgICAgICAgICAgICAgICAgICBpZiAodCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdC5hY2NlcHQodGhpcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnRleHQgKz0gXCI6XCI7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgby5hY2NlcHQodGhpcyk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB0aGlzLnRleHQgKz0gcyA/IFwifVwiIDogXCJdXCI7XG4gICAgfVxuICAgIHZpc2l0RGVzdHJ1Y3R1cmluZ0Fzc2lnbm1lbnRTaW5nbGVFeHByZXNzaW9uKHQpIHtcbiAgICAgICAgdC5zb3VyY2UuYWNjZXB0KHRoaXMpO1xuICAgICAgICB0aGlzLnRleHQgKz0gXCI6XCI7XG4gICAgICAgIHQudGFyZ2V0LmFjY2VwdCh0aGlzKTtcbiAgICAgICAgY29uc3QgZSA9IHQuaW5pdGlhbGl6ZXI7XG4gICAgICAgIGlmICh2b2lkIDAgIT09IGUpIHtcbiAgICAgICAgICAgIHRoaXMudGV4dCArPSBcIj1cIjtcbiAgICAgICAgICAgIGUuYWNjZXB0KHRoaXMpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHZpc2l0RGVzdHJ1Y3R1cmluZ0Fzc2lnbm1lbnRSZXN0RXhwcmVzc2lvbih0KSB7XG4gICAgICAgIHRoaXMudGV4dCArPSBcIi4uLlwiO1xuICAgICAgICB0LmFjY2VwdCh0aGlzKTtcbiAgICB9XG4gICAgd3JpdGVBcmdzKHQpIHtcbiAgICAgICAgdGhpcy50ZXh0ICs9IFwiKFwiO1xuICAgICAgICBmb3IgKGxldCBlID0gMCwgcyA9IHQubGVuZ3RoOyBlIDwgczsgKytlKSB7XG4gICAgICAgICAgICBpZiAoMCAhPT0gZSkgdGhpcy50ZXh0ICs9IFwiLFwiO1xuICAgICAgICAgICAgdFtlXS5hY2NlcHQodGhpcyk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy50ZXh0ICs9IFwiKVwiO1xuICAgIH1cbn1cblxuY2xhc3MgQ3VzdG9tRXhwcmVzc2lvbiB7XG4gICAgY29uc3RydWN0b3IodCkge1xuICAgICAgICB0aGlzLnZhbHVlID0gdDtcbiAgICB9XG4gICAgZXZhbHVhdGUodCwgZSwgcywgcikge1xuICAgICAgICByZXR1cm4gdGhpcy52YWx1ZTtcbiAgICB9XG59XG5cbmNsYXNzIEJpbmRpbmdCZWhhdmlvckV4cHJlc3Npb24ge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUsIHMpIHtcbiAgICAgICAgdGhpcy5leHByZXNzaW9uID0gdDtcbiAgICAgICAgdGhpcy5uYW1lID0gZTtcbiAgICAgICAgdGhpcy5hcmdzID0gcztcbiAgICAgICAgdGhpcy5iZWhhdmlvcktleSA9IFQua2V5RnJvbShlKTtcbiAgICB9XG4gICAgZ2V0ICRraW5kKCkge1xuICAgICAgICByZXR1cm4gMzg5NjI7XG4gICAgfVxuICAgIGdldCBoYXNCaW5kKCkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgZ2V0IGhhc1VuYmluZCgpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIGV2YWx1YXRlKHQsIGUsIHMsIHIpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZXhwcmVzc2lvbi5ldmFsdWF0ZSh0LCBlLCBzLCByKTtcbiAgICB9XG4gICAgYXNzaWduKHQsIGUsIHMsIHIpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZXhwcmVzc2lvbi5hc3NpZ24odCwgZSwgcywgcik7XG4gICAgfVxuICAgIGJpbmQodCwgZSwgcykge1xuICAgICAgICBpZiAodGhpcy5leHByZXNzaW9uLmhhc0JpbmQpIHRoaXMuZXhwcmVzc2lvbi5iaW5kKHQsIGUsIHMpO1xuICAgICAgICBjb25zdCByID0gcy5sb2NhdG9yLmdldCh0aGlzLmJlaGF2aW9yS2V5KTtcbiAgICAgICAgaWYgKG51bGwgPT0gcikgdGhyb3cgbmV3IEVycm9yKGBBVVIwMTAxOiR7dGhpcy5uYW1lfWApO1xuICAgICAgICBpZiAoIShyIGluc3RhbmNlb2YgQmluZGluZ0JlaGF2aW9yRmFjdG9yeSkpIGlmICh2b2lkIDAgPT09IHNbdGhpcy5iZWhhdmlvcktleV0pIHtcbiAgICAgICAgICAgIHNbdGhpcy5iZWhhdmlvcktleV0gPSByO1xuICAgICAgICAgICAgci5iaW5kLmNhbGwociwgdCwgZSwgcywgLi4udGhpcy5hcmdzLm1hcCgociA9PiByLmV2YWx1YXRlKHQsIGUsIHMubG9jYXRvciwgbnVsbCkpKSk7XG4gICAgICAgIH0gZWxzZSB0aHJvdyBuZXcgRXJyb3IoYEFVUjAxMDI6JHt0aGlzLm5hbWV9YCk7XG4gICAgfVxuICAgIHVuYmluZCh0LCBlLCBzKSB7XG4gICAgICAgIGNvbnN0IHIgPSB0aGlzLmJlaGF2aW9yS2V5O1xuICAgICAgICBjb25zdCBpID0gcztcbiAgICAgICAgaWYgKHZvaWQgMCAhPT0gaVtyXSkge1xuICAgICAgICAgICAgaWYgKHAoaVtyXS51bmJpbmQpKSBpW3JdLnVuYmluZCh0LCBlLCBzKTtcbiAgICAgICAgICAgIGlbcl0gPSB2b2lkIDA7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuZXhwcmVzc2lvbi5oYXNVbmJpbmQpIHRoaXMuZXhwcmVzc2lvbi51bmJpbmQodCwgZSwgcyk7XG4gICAgfVxuICAgIGFjY2VwdCh0KSB7XG4gICAgICAgIHJldHVybiB0LnZpc2l0QmluZGluZ0JlaGF2aW9yKHRoaXMpO1xuICAgIH1cbiAgICB0b1N0cmluZygpIHtcbiAgICAgICAgcmV0dXJuIFVucGFyc2VyLnVucGFyc2UodGhpcyk7XG4gICAgfVxufVxuXG5jbGFzcyBWYWx1ZUNvbnZlcnRlckV4cHJlc3Npb24ge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUsIHMpIHtcbiAgICAgICAgdGhpcy5leHByZXNzaW9uID0gdDtcbiAgICAgICAgdGhpcy5uYW1lID0gZTtcbiAgICAgICAgdGhpcy5hcmdzID0gcztcbiAgICAgICAgdGhpcy5jb252ZXJ0ZXJLZXkgPSBELmtleUZyb20oZSk7XG4gICAgfVxuICAgIGdldCAka2luZCgpIHtcbiAgICAgICAgcmV0dXJuIDM2OTEzO1xuICAgIH1cbiAgICBnZXQgaGFzQmluZCgpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBnZXQgaGFzVW5iaW5kKCkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgZXZhbHVhdGUodCwgZSwgcywgcikge1xuICAgICAgICBjb25zdCBpID0gcy5nZXQodGhpcy5jb252ZXJ0ZXJLZXkpO1xuICAgICAgICBpZiAobnVsbCA9PSBpKSB0aHJvdyBuZXcgRXJyb3IoYEFVUjAxMDM6JHt0aGlzLm5hbWV9YCk7XG4gICAgICAgIGlmIChudWxsICE9PSByICYmIFwiaGFuZGxlQ2hhbmdlXCIgaW4gcikge1xuICAgICAgICAgICAgY29uc3QgdCA9IGkuc2lnbmFscztcbiAgICAgICAgICAgIGlmIChudWxsICE9IHQpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBlID0gcy5nZXQoQik7XG4gICAgICAgICAgICAgICAgZm9yIChsZXQgcyA9IDAsIGkgPSB0Lmxlbmd0aDsgcyA8IGk7ICsrcykgZS5hZGRTaWduYWxMaXN0ZW5lcih0W3NdLCByKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoXCJ0b1ZpZXdcIiBpbiBpKSByZXR1cm4gaS50b1ZpZXcodGhpcy5leHByZXNzaW9uLmV2YWx1YXRlKHQsIGUsIHMsIHIpLCAuLi50aGlzLmFyZ3MubWFwKChpID0+IGkuZXZhbHVhdGUodCwgZSwgcywgcikpKSk7XG4gICAgICAgIHJldHVybiB0aGlzLmV4cHJlc3Npb24uZXZhbHVhdGUodCwgZSwgcywgcik7XG4gICAgfVxuICAgIGFzc2lnbih0LCBlLCBzLCByKSB7XG4gICAgICAgIGNvbnN0IGkgPSBzLmdldCh0aGlzLmNvbnZlcnRlcktleSk7XG4gICAgICAgIGlmIChudWxsID09IGkpIHRocm93IG5ldyBFcnJvcihgQVVSMDEwNDoke3RoaXMubmFtZX1gKTtcbiAgICAgICAgaWYgKFwiZnJvbVZpZXdcIiBpbiBpKSByID0gaS5mcm9tVmlldyhyLCAuLi50aGlzLmFyZ3MubWFwKChyID0+IHIuZXZhbHVhdGUodCwgZSwgcywgbnVsbCkpKSk7XG4gICAgICAgIHJldHVybiB0aGlzLmV4cHJlc3Npb24uYXNzaWduKHQsIGUsIHMsIHIpO1xuICAgIH1cbiAgICB1bmJpbmQodCwgZSwgcykge1xuICAgICAgICBjb25zdCByID0gcy5sb2NhdG9yLmdldCh0aGlzLmNvbnZlcnRlcktleSk7XG4gICAgICAgIGlmICh2b2lkIDAgPT09IHIuc2lnbmFscykgcmV0dXJuO1xuICAgICAgICBjb25zdCBpID0gcy5sb2NhdG9yLmdldChCKTtcbiAgICAgICAgZm9yIChsZXQgdCA9IDA7IHQgPCByLnNpZ25hbHMubGVuZ3RoOyArK3QpIGkucmVtb3ZlU2lnbmFsTGlzdGVuZXIoci5zaWduYWxzW3RdLCBzKTtcbiAgICB9XG4gICAgYWNjZXB0KHQpIHtcbiAgICAgICAgcmV0dXJuIHQudmlzaXRWYWx1ZUNvbnZlcnRlcih0aGlzKTtcbiAgICB9XG4gICAgdG9TdHJpbmcoKSB7XG4gICAgICAgIHJldHVybiBVbnBhcnNlci51bnBhcnNlKHRoaXMpO1xuICAgIH1cbn1cblxuY2xhc3MgQXNzaWduRXhwcmVzc2lvbiB7XG4gICAgY29uc3RydWN0b3IodCwgZSkge1xuICAgICAgICB0aGlzLnRhcmdldCA9IHQ7XG4gICAgICAgIHRoaXMudmFsdWUgPSBlO1xuICAgIH1cbiAgICBnZXQgJGtpbmQoKSB7XG4gICAgICAgIHJldHVybiA4MjA4O1xuICAgIH1cbiAgICBnZXQgaGFzQmluZCgpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBnZXQgaGFzVW5iaW5kKCkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIGV2YWx1YXRlKHQsIGUsIHMsIHIpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudGFyZ2V0LmFzc2lnbih0LCBlLCBzLCB0aGlzLnZhbHVlLmV2YWx1YXRlKHQsIGUsIHMsIHIpKTtcbiAgICB9XG4gICAgYXNzaWduKHQsIGUsIHMsIHIpIHtcbiAgICAgICAgdGhpcy52YWx1ZS5hc3NpZ24odCwgZSwgcywgcik7XG4gICAgICAgIHJldHVybiB0aGlzLnRhcmdldC5hc3NpZ24odCwgZSwgcywgcik7XG4gICAgfVxuICAgIGFjY2VwdCh0KSB7XG4gICAgICAgIHJldHVybiB0LnZpc2l0QXNzaWduKHRoaXMpO1xuICAgIH1cbiAgICB0b1N0cmluZygpIHtcbiAgICAgICAgcmV0dXJuIFVucGFyc2VyLnVucGFyc2UodGhpcyk7XG4gICAgfVxufVxuXG5jbGFzcyBDb25kaXRpb25hbEV4cHJlc3Npb24ge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUsIHMpIHtcbiAgICAgICAgdGhpcy5jb25kaXRpb24gPSB0O1xuICAgICAgICB0aGlzLnllcyA9IGU7XG4gICAgICAgIHRoaXMubm8gPSBzO1xuICAgIH1cbiAgICBnZXQgJGtpbmQoKSB7XG4gICAgICAgIHJldHVybiA2MztcbiAgICB9XG4gICAgZ2V0IGhhc0JpbmQoKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgZ2V0IGhhc1VuYmluZCgpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBldmFsdWF0ZSh0LCBlLCBzLCByKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmNvbmRpdGlvbi5ldmFsdWF0ZSh0LCBlLCBzLCByKSA/IHRoaXMueWVzLmV2YWx1YXRlKHQsIGUsIHMsIHIpIDogdGhpcy5uby5ldmFsdWF0ZSh0LCBlLCBzLCByKTtcbiAgICB9XG4gICAgYXNzaWduKHQsIGUsIHMsIHIpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBhY2NlcHQodCkge1xuICAgICAgICByZXR1cm4gdC52aXNpdENvbmRpdGlvbmFsKHRoaXMpO1xuICAgIH1cbiAgICB0b1N0cmluZygpIHtcbiAgICAgICAgcmV0dXJuIFVucGFyc2VyLnVucGFyc2UodGhpcyk7XG4gICAgfVxufVxuXG5jbGFzcyBBY2Nlc3NUaGlzRXhwcmVzc2lvbiB7XG4gICAgY29uc3RydWN0b3IodCA9IDApIHtcbiAgICAgICAgdGhpcy5hbmNlc3RvciA9IHQ7XG4gICAgfVxuICAgIGdldCAka2luZCgpIHtcbiAgICAgICAgcmV0dXJuIDE3OTM7XG4gICAgfVxuICAgIGdldCBoYXNCaW5kKCkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIGdldCBoYXNVbmJpbmQoKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgZXZhbHVhdGUodCwgZSwgcywgcikge1xuICAgICAgICB2YXIgaTtcbiAgICAgICAgbGV0IG4gPSBlLm92ZXJyaWRlQ29udGV4dDtcbiAgICAgICAgbGV0IG8gPSBlO1xuICAgICAgICBsZXQgaCA9IHRoaXMuYW5jZXN0b3I7XG4gICAgICAgIHdoaWxlIChoLS0gJiYgbikge1xuICAgICAgICAgICAgbyA9IG8ucGFyZW50U2NvcGU7XG4gICAgICAgICAgICBuID0gbnVsbCAhPT0gKGkgPSBudWxsID09PSBvIHx8IHZvaWQgMCA9PT0gbyA/IHZvaWQgMCA6IG8ub3ZlcnJpZGVDb250ZXh0KSAmJiB2b2lkIDAgIT09IGkgPyBpIDogbnVsbDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gaCA8IDEgJiYgbiA/IG4uYmluZGluZ0NvbnRleHQgOiB2b2lkIDA7XG4gICAgfVxuICAgIGFzc2lnbih0LCBlLCBzLCByKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgYWNjZXB0KHQpIHtcbiAgICAgICAgcmV0dXJuIHQudmlzaXRBY2Nlc3NUaGlzKHRoaXMpO1xuICAgIH1cbiAgICB0b1N0cmluZygpIHtcbiAgICAgICAgcmV0dXJuIFVucGFyc2VyLnVucGFyc2UodGhpcyk7XG4gICAgfVxufVxuXG5BY2Nlc3NUaGlzRXhwcmVzc2lvbi4kdGhpcyA9IG5ldyBBY2Nlc3NUaGlzRXhwcmVzc2lvbigwKTtcblxuQWNjZXNzVGhpc0V4cHJlc3Npb24uJHBhcmVudCA9IG5ldyBBY2Nlc3NUaGlzRXhwcmVzc2lvbigxKTtcblxuY2xhc3MgQWNjZXNzU2NvcGVFeHByZXNzaW9uIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlID0gMCkge1xuICAgICAgICB0aGlzLm5hbWUgPSB0O1xuICAgICAgICB0aGlzLmFuY2VzdG9yID0gZTtcbiAgICB9XG4gICAgZ2V0ICRraW5kKCkge1xuICAgICAgICByZXR1cm4gMTAwODI7XG4gICAgfVxuICAgIGdldCBoYXNCaW5kKCkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIGdldCBoYXNVbmJpbmQoKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgZXZhbHVhdGUodCwgZSwgcywgcikge1xuICAgICAgICBjb25zdCBpID0gQmluZGluZ0NvbnRleHQuZ2V0KGUsIHRoaXMubmFtZSwgdGhpcy5hbmNlc3RvciwgdCk7XG4gICAgICAgIGlmIChudWxsICE9PSByKSByLm9ic2VydmUoaSwgdGhpcy5uYW1lKTtcbiAgICAgICAgY29uc3QgbiA9IGlbdGhpcy5uYW1lXTtcbiAgICAgICAgaWYgKG51bGwgPT0gbiAmJiBcIiRob3N0XCIgPT09IHRoaXMubmFtZSkgdGhyb3cgbmV3IEVycm9yKFwiQVVSMDEwNVwiKTtcbiAgICAgICAgaWYgKDEgJiB0KSByZXR1cm4gbjtcbiAgICAgICAgcmV0dXJuIG51bGwgPT0gbiA/IFwiXCIgOiBuO1xuICAgIH1cbiAgICBhc3NpZ24odCwgZSwgcywgcikge1xuICAgICAgICB2YXIgaTtcbiAgICAgICAgaWYgKFwiJGhvc3RcIiA9PT0gdGhpcy5uYW1lKSB0aHJvdyBuZXcgRXJyb3IoXCJBVVIwMTA2XCIpO1xuICAgICAgICBjb25zdCBuID0gQmluZGluZ0NvbnRleHQuZ2V0KGUsIHRoaXMubmFtZSwgdGhpcy5hbmNlc3RvciwgdCk7XG4gICAgICAgIGlmIChuIGluc3RhbmNlb2YgT2JqZWN0KSBpZiAodm9pZCAwICE9PSAobnVsbCA9PT0gKGkgPSBuLiRvYnNlcnZlcnMpIHx8IHZvaWQgMCA9PT0gaSA/IHZvaWQgMCA6IGlbdGhpcy5uYW1lXSkpIHtcbiAgICAgICAgICAgIG4uJG9ic2VydmVyc1t0aGlzLm5hbWVdLnNldFZhbHVlKHIsIHQpO1xuICAgICAgICAgICAgcmV0dXJuIHI7XG4gICAgICAgIH0gZWxzZSByZXR1cm4gblt0aGlzLm5hbWVdID0gcjtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBhY2NlcHQodCkge1xuICAgICAgICByZXR1cm4gdC52aXNpdEFjY2Vzc1Njb3BlKHRoaXMpO1xuICAgIH1cbiAgICB0b1N0cmluZygpIHtcbiAgICAgICAgcmV0dXJuIFVucGFyc2VyLnVucGFyc2UodGhpcyk7XG4gICAgfVxufVxuXG5jbGFzcyBBY2Nlc3NNZW1iZXJFeHByZXNzaW9uIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlKSB7XG4gICAgICAgIHRoaXMub2JqZWN0ID0gdDtcbiAgICAgICAgdGhpcy5uYW1lID0gZTtcbiAgICB9XG4gICAgZ2V0ICRraW5kKCkge1xuICAgICAgICByZXR1cm4gOTMyMztcbiAgICB9XG4gICAgZ2V0IGhhc0JpbmQoKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgZ2V0IGhhc1VuYmluZCgpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBldmFsdWF0ZSh0LCBlLCBzLCByKSB7XG4gICAgICAgIGNvbnN0IGkgPSB0aGlzLm9iamVjdC5ldmFsdWF0ZSh0LCBlLCBzLCAoMTI4ICYgdCkgPiAwID8gbnVsbCA6IHIpO1xuICAgICAgICBpZiAoMSAmIHQpIHtcbiAgICAgICAgICAgIGlmIChudWxsID09IGkpIHJldHVybiBpO1xuICAgICAgICAgICAgaWYgKG51bGwgIT09IHIpIHIub2JzZXJ2ZShpLCB0aGlzLm5hbWUpO1xuICAgICAgICAgICAgcmV0dXJuIGlbdGhpcy5uYW1lXTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobnVsbCAhPT0gciAmJiBpIGluc3RhbmNlb2YgT2JqZWN0KSByLm9ic2VydmUoaSwgdGhpcy5uYW1lKTtcbiAgICAgICAgcmV0dXJuIGkgPyBpW3RoaXMubmFtZV0gOiBcIlwiO1xuICAgIH1cbiAgICBhc3NpZ24odCwgZSwgcywgcikge1xuICAgICAgICBjb25zdCBpID0gdGhpcy5vYmplY3QuZXZhbHVhdGUodCwgZSwgcywgbnVsbCk7XG4gICAgICAgIGlmIChpIGluc3RhbmNlb2YgT2JqZWN0KSBpZiAodm9pZCAwICE9PSBpLiRvYnNlcnZlcnMgJiYgdm9pZCAwICE9PSBpLiRvYnNlcnZlcnNbdGhpcy5uYW1lXSkgaS4kb2JzZXJ2ZXJzW3RoaXMubmFtZV0uc2V0VmFsdWUociwgdCk7IGVsc2UgaVt0aGlzLm5hbWVdID0gcjsgZWxzZSB0aGlzLm9iamVjdC5hc3NpZ24odCwgZSwgcywge1xuICAgICAgICAgICAgW3RoaXMubmFtZV06IHJcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiByO1xuICAgIH1cbiAgICBhY2NlcHQodCkge1xuICAgICAgICByZXR1cm4gdC52aXNpdEFjY2Vzc01lbWJlcih0aGlzKTtcbiAgICB9XG4gICAgdG9TdHJpbmcoKSB7XG4gICAgICAgIHJldHVybiBVbnBhcnNlci51bnBhcnNlKHRoaXMpO1xuICAgIH1cbn1cblxuY2xhc3MgQWNjZXNzS2V5ZWRFeHByZXNzaW9uIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlKSB7XG4gICAgICAgIHRoaXMub2JqZWN0ID0gdDtcbiAgICAgICAgdGhpcy5rZXkgPSBlO1xuICAgIH1cbiAgICBnZXQgJGtpbmQoKSB7XG4gICAgICAgIHJldHVybiA5MzI0O1xuICAgIH1cbiAgICBnZXQgaGFzQmluZCgpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBnZXQgaGFzVW5iaW5kKCkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIGV2YWx1YXRlKHQsIGUsIHMsIHIpIHtcbiAgICAgICAgY29uc3QgaSA9IHRoaXMub2JqZWN0LmV2YWx1YXRlKHQsIGUsIHMsICgxMjggJiB0KSA+IDAgPyBudWxsIDogcik7XG4gICAgICAgIGlmIChpIGluc3RhbmNlb2YgT2JqZWN0KSB7XG4gICAgICAgICAgICBjb25zdCBuID0gdGhpcy5rZXkuZXZhbHVhdGUodCwgZSwgcywgKDEyOCAmIHQpID4gMCA/IG51bGwgOiByKTtcbiAgICAgICAgICAgIGlmIChudWxsICE9PSByKSByLm9ic2VydmUoaSwgbik7XG4gICAgICAgICAgICByZXR1cm4gaVtuXTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIGFzc2lnbih0LCBlLCBzLCByKSB7XG4gICAgICAgIGNvbnN0IGkgPSB0aGlzLm9iamVjdC5ldmFsdWF0ZSh0LCBlLCBzLCBudWxsKTtcbiAgICAgICAgY29uc3QgbiA9IHRoaXMua2V5LmV2YWx1YXRlKHQsIGUsIHMsIG51bGwpO1xuICAgICAgICByZXR1cm4gaVtuXSA9IHI7XG4gICAgfVxuICAgIGFjY2VwdCh0KSB7XG4gICAgICAgIHJldHVybiB0LnZpc2l0QWNjZXNzS2V5ZWQodGhpcyk7XG4gICAgfVxuICAgIHRvU3RyaW5nKCkge1xuICAgICAgICByZXR1cm4gVW5wYXJzZXIudW5wYXJzZSh0aGlzKTtcbiAgICB9XG59XG5cbmNsYXNzIENhbGxTY29wZUV4cHJlc3Npb24ge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUsIHMgPSAwKSB7XG4gICAgICAgIHRoaXMubmFtZSA9IHQ7XG4gICAgICAgIHRoaXMuYXJncyA9IGU7XG4gICAgICAgIHRoaXMuYW5jZXN0b3IgPSBzO1xuICAgIH1cbiAgICBnZXQgJGtpbmQoKSB7XG4gICAgICAgIHJldHVybiAxNDQ4O1xuICAgIH1cbiAgICBnZXQgaGFzQmluZCgpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBnZXQgaGFzVW5iaW5kKCkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIGV2YWx1YXRlKHQsIGUsIHMsIHIpIHtcbiAgICAgICAgY29uc3QgaSA9IHRoaXMuYXJncy5tYXAoKGkgPT4gaS5ldmFsdWF0ZSh0LCBlLCBzLCByKSkpO1xuICAgICAgICBjb25zdCBuID0gQmluZGluZ0NvbnRleHQuZ2V0KGUsIHRoaXMubmFtZSwgdGhpcy5hbmNlc3RvciwgdCk7XG4gICAgICAgIGNvbnN0IG8gPSBOKHQsIG4sIHRoaXMubmFtZSk7XG4gICAgICAgIGlmIChvKSByZXR1cm4gby5hcHBseShuLCBpKTtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBhc3NpZ24odCwgZSwgcywgcikge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIGFjY2VwdCh0KSB7XG4gICAgICAgIHJldHVybiB0LnZpc2l0Q2FsbFNjb3BlKHRoaXMpO1xuICAgIH1cbiAgICB0b1N0cmluZygpIHtcbiAgICAgICAgcmV0dXJuIFVucGFyc2VyLnVucGFyc2UodGhpcyk7XG4gICAgfVxufVxuXG5jbGFzcyBDYWxsTWVtYmVyRXhwcmVzc2lvbiB7XG4gICAgY29uc3RydWN0b3IodCwgZSwgcykge1xuICAgICAgICB0aGlzLm9iamVjdCA9IHQ7XG4gICAgICAgIHRoaXMubmFtZSA9IGU7XG4gICAgICAgIHRoaXMuYXJncyA9IHM7XG4gICAgfVxuICAgIGdldCAka2luZCgpIHtcbiAgICAgICAgcmV0dXJuIDExNjE7XG4gICAgfVxuICAgIGdldCBoYXNCaW5kKCkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIGdldCBoYXNVbmJpbmQoKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgZXZhbHVhdGUodCwgZSwgcywgcikge1xuICAgICAgICBjb25zdCBpID0gdGhpcy5vYmplY3QuZXZhbHVhdGUodCwgZSwgcywgKDEyOCAmIHQpID4gMCA/IG51bGwgOiByKTtcbiAgICAgICAgY29uc3QgbiA9IHRoaXMuYXJncy5tYXAoKGkgPT4gaS5ldmFsdWF0ZSh0LCBlLCBzLCByKSkpO1xuICAgICAgICBjb25zdCBvID0gTih0LCBpLCB0aGlzLm5hbWUpO1xuICAgICAgICBpZiAobykgcmV0dXJuIG8uYXBwbHkoaSwgbik7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgYXNzaWduKHQsIGUsIHMsIHIpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBhY2NlcHQodCkge1xuICAgICAgICByZXR1cm4gdC52aXNpdENhbGxNZW1iZXIodGhpcyk7XG4gICAgfVxuICAgIHRvU3RyaW5nKCkge1xuICAgICAgICByZXR1cm4gVW5wYXJzZXIudW5wYXJzZSh0aGlzKTtcbiAgICB9XG59XG5cbmNsYXNzIENhbGxGdW5jdGlvbkV4cHJlc3Npb24ge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUpIHtcbiAgICAgICAgdGhpcy5mdW5jID0gdDtcbiAgICAgICAgdGhpcy5hcmdzID0gZTtcbiAgICB9XG4gICAgZ2V0ICRraW5kKCkge1xuICAgICAgICByZXR1cm4gMTE2MjtcbiAgICB9XG4gICAgZ2V0IGhhc0JpbmQoKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgZ2V0IGhhc1VuYmluZCgpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBldmFsdWF0ZSh0LCBlLCBzLCByKSB7XG4gICAgICAgIGNvbnN0IGkgPSB0aGlzLmZ1bmMuZXZhbHVhdGUodCwgZSwgcywgcik7XG4gICAgICAgIGlmIChwKGkpKSByZXR1cm4gaSguLi50aGlzLmFyZ3MubWFwKChpID0+IGkuZXZhbHVhdGUodCwgZSwgcywgcikpKSk7XG4gICAgICAgIGlmICghKDggJiB0KSAmJiBudWxsID09IGkpIHJldHVybjtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiQVVSMDEwN1wiKTtcbiAgICB9XG4gICAgYXNzaWduKHQsIGUsIHMsIHIpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBhY2NlcHQodCkge1xuICAgICAgICByZXR1cm4gdC52aXNpdENhbGxGdW5jdGlvbih0aGlzKTtcbiAgICB9XG4gICAgdG9TdHJpbmcoKSB7XG4gICAgICAgIHJldHVybiBVbnBhcnNlci51bnBhcnNlKHRoaXMpO1xuICAgIH1cbn1cblxuY2xhc3MgQmluYXJ5RXhwcmVzc2lvbiB7XG4gICAgY29uc3RydWN0b3IodCwgZSwgcykge1xuICAgICAgICB0aGlzLm9wZXJhdGlvbiA9IHQ7XG4gICAgICAgIHRoaXMubGVmdCA9IGU7XG4gICAgICAgIHRoaXMucmlnaHQgPSBzO1xuICAgIH1cbiAgICBnZXQgJGtpbmQoKSB7XG4gICAgICAgIHJldHVybiA0NjtcbiAgICB9XG4gICAgZ2V0IGhhc0JpbmQoKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgZ2V0IGhhc1VuYmluZCgpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBldmFsdWF0ZSh0LCBlLCBzLCByKSB7XG4gICAgICAgIHN3aXRjaCAodGhpcy5vcGVyYXRpb24pIHtcbiAgICAgICAgICBjYXNlIFwiJiZcIjpcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmxlZnQuZXZhbHVhdGUodCwgZSwgcywgcikgJiYgdGhpcy5yaWdodC5ldmFsdWF0ZSh0LCBlLCBzLCByKTtcblxuICAgICAgICAgIGNhc2UgXCJ8fFwiOlxuICAgICAgICAgICAgcmV0dXJuIHRoaXMubGVmdC5ldmFsdWF0ZSh0LCBlLCBzLCByKSB8fCB0aGlzLnJpZ2h0LmV2YWx1YXRlKHQsIGUsIHMsIHIpO1xuXG4gICAgICAgICAgY2FzZSBcIj09XCI6XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5sZWZ0LmV2YWx1YXRlKHQsIGUsIHMsIHIpID09IHRoaXMucmlnaHQuZXZhbHVhdGUodCwgZSwgcywgcik7XG5cbiAgICAgICAgICBjYXNlIFwiPT09XCI6XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5sZWZ0LmV2YWx1YXRlKHQsIGUsIHMsIHIpID09PSB0aGlzLnJpZ2h0LmV2YWx1YXRlKHQsIGUsIHMsIHIpO1xuXG4gICAgICAgICAgY2FzZSBcIiE9XCI6XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5sZWZ0LmV2YWx1YXRlKHQsIGUsIHMsIHIpICE9IHRoaXMucmlnaHQuZXZhbHVhdGUodCwgZSwgcywgcik7XG5cbiAgICAgICAgICBjYXNlIFwiIT09XCI6XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5sZWZ0LmV2YWx1YXRlKHQsIGUsIHMsIHIpICE9PSB0aGlzLnJpZ2h0LmV2YWx1YXRlKHQsIGUsIHMsIHIpO1xuXG4gICAgICAgICAgY2FzZSBcImluc3RhbmNlb2ZcIjpcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBjb25zdCBpID0gdGhpcy5yaWdodC5ldmFsdWF0ZSh0LCBlLCBzLCByKTtcbiAgICAgICAgICAgICAgICBpZiAocChpKSkgcmV0dXJuIHRoaXMubGVmdC5ldmFsdWF0ZSh0LCBlLCBzLCByKSBpbnN0YW5jZW9mIGk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgY2FzZSBcImluXCI6XG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgY29uc3QgaSA9IHRoaXMucmlnaHQuZXZhbHVhdGUodCwgZSwgcywgcik7XG4gICAgICAgICAgICAgICAgaWYgKGkgaW5zdGFuY2VvZiBPYmplY3QpIHJldHVybiB0aGlzLmxlZnQuZXZhbHVhdGUodCwgZSwgcywgcikgaW4gaTtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICBjYXNlIFwiK1wiOlxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGNvbnN0IGkgPSB0aGlzLmxlZnQuZXZhbHVhdGUodCwgZSwgcywgcik7XG4gICAgICAgICAgICAgICAgY29uc3QgbiA9IHRoaXMucmlnaHQuZXZhbHVhdGUodCwgZSwgcywgcik7XG4gICAgICAgICAgICAgICAgaWYgKCgxICYgdCkgPiAwKSByZXR1cm4gaSArIG47XG4gICAgICAgICAgICAgICAgaWYgKCFpIHx8ICFuKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChoKGkpIHx8IGgobikpIHJldHVybiAoaSB8fCAwKSArIChuIHx8IDApO1xuICAgICAgICAgICAgICAgICAgICBpZiAoYyhpKSB8fCBjKG4pKSByZXR1cm4gKGkgfHwgXCJcIikgKyAobiB8fCBcIlwiKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIGkgKyBuO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgY2FzZSBcIi1cIjpcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmxlZnQuZXZhbHVhdGUodCwgZSwgcywgcikgLSB0aGlzLnJpZ2h0LmV2YWx1YXRlKHQsIGUsIHMsIHIpO1xuXG4gICAgICAgICAgY2FzZSBcIipcIjpcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmxlZnQuZXZhbHVhdGUodCwgZSwgcywgcikgKiB0aGlzLnJpZ2h0LmV2YWx1YXRlKHQsIGUsIHMsIHIpO1xuXG4gICAgICAgICAgY2FzZSBcIi9cIjpcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmxlZnQuZXZhbHVhdGUodCwgZSwgcywgcikgLyB0aGlzLnJpZ2h0LmV2YWx1YXRlKHQsIGUsIHMsIHIpO1xuXG4gICAgICAgICAgY2FzZSBcIiVcIjpcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmxlZnQuZXZhbHVhdGUodCwgZSwgcywgcikgJSB0aGlzLnJpZ2h0LmV2YWx1YXRlKHQsIGUsIHMsIHIpO1xuXG4gICAgICAgICAgY2FzZSBcIjxcIjpcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmxlZnQuZXZhbHVhdGUodCwgZSwgcywgcikgPCB0aGlzLnJpZ2h0LmV2YWx1YXRlKHQsIGUsIHMsIHIpO1xuXG4gICAgICAgICAgY2FzZSBcIj5cIjpcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmxlZnQuZXZhbHVhdGUodCwgZSwgcywgcikgPiB0aGlzLnJpZ2h0LmV2YWx1YXRlKHQsIGUsIHMsIHIpO1xuXG4gICAgICAgICAgY2FzZSBcIjw9XCI6XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5sZWZ0LmV2YWx1YXRlKHQsIGUsIHMsIHIpIDw9IHRoaXMucmlnaHQuZXZhbHVhdGUodCwgZSwgcywgcik7XG5cbiAgICAgICAgICBjYXNlIFwiPj1cIjpcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmxlZnQuZXZhbHVhdGUodCwgZSwgcywgcikgPj0gdGhpcy5yaWdodC5ldmFsdWF0ZSh0LCBlLCBzLCByKTtcblxuICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEFVUjAxMDg6JHt0aGlzLm9wZXJhdGlvbn1gKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBhc3NpZ24odCwgZSwgcywgcikge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIGFjY2VwdCh0KSB7XG4gICAgICAgIHJldHVybiB0LnZpc2l0QmluYXJ5KHRoaXMpO1xuICAgIH1cbiAgICB0b1N0cmluZygpIHtcbiAgICAgICAgcmV0dXJuIFVucGFyc2VyLnVucGFyc2UodGhpcyk7XG4gICAgfVxufVxuXG5jbGFzcyBVbmFyeUV4cHJlc3Npb24ge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUpIHtcbiAgICAgICAgdGhpcy5vcGVyYXRpb24gPSB0O1xuICAgICAgICB0aGlzLmV4cHJlc3Npb24gPSBlO1xuICAgIH1cbiAgICBnZXQgJGtpbmQoKSB7XG4gICAgICAgIHJldHVybiAzOTtcbiAgICB9XG4gICAgZ2V0IGhhc0JpbmQoKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgZ2V0IGhhc1VuYmluZCgpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBldmFsdWF0ZSh0LCBlLCBzLCByKSB7XG4gICAgICAgIHN3aXRjaCAodGhpcy5vcGVyYXRpb24pIHtcbiAgICAgICAgICBjYXNlIFwidm9pZFwiOlxuICAgICAgICAgICAgcmV0dXJuIHZvaWQgdGhpcy5leHByZXNzaW9uLmV2YWx1YXRlKHQsIGUsIHMsIHIpO1xuXG4gICAgICAgICAgY2FzZSBcInR5cGVvZlwiOlxuICAgICAgICAgICAgcmV0dXJuIHR5cGVvZiB0aGlzLmV4cHJlc3Npb24uZXZhbHVhdGUoMSB8IHQsIGUsIHMsIHIpO1xuXG4gICAgICAgICAgY2FzZSBcIiFcIjpcbiAgICAgICAgICAgIHJldHVybiAhdGhpcy5leHByZXNzaW9uLmV2YWx1YXRlKHQsIGUsIHMsIHIpO1xuXG4gICAgICAgICAgY2FzZSBcIi1cIjpcbiAgICAgICAgICAgIHJldHVybiAtdGhpcy5leHByZXNzaW9uLmV2YWx1YXRlKHQsIGUsIHMsIHIpO1xuXG4gICAgICAgICAgY2FzZSBcIitcIjpcbiAgICAgICAgICAgIHJldHVybiArdGhpcy5leHByZXNzaW9uLmV2YWx1YXRlKHQsIGUsIHMsIHIpO1xuXG4gICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgQVVSMDEwOToke3RoaXMub3BlcmF0aW9ufWApO1xuICAgICAgICB9XG4gICAgfVxuICAgIGFzc2lnbih0LCBlLCBzLCByKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgYWNjZXB0KHQpIHtcbiAgICAgICAgcmV0dXJuIHQudmlzaXRVbmFyeSh0aGlzKTtcbiAgICB9XG4gICAgdG9TdHJpbmcoKSB7XG4gICAgICAgIHJldHVybiBVbnBhcnNlci51bnBhcnNlKHRoaXMpO1xuICAgIH1cbn1cblxuY2xhc3MgUHJpbWl0aXZlTGl0ZXJhbEV4cHJlc3Npb24ge1xuICAgIGNvbnN0cnVjdG9yKHQpIHtcbiAgICAgICAgdGhpcy52YWx1ZSA9IHQ7XG4gICAgfVxuICAgIGdldCAka2luZCgpIHtcbiAgICAgICAgcmV0dXJuIDE3OTI1O1xuICAgIH1cbiAgICBnZXQgaGFzQmluZCgpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBnZXQgaGFzVW5iaW5kKCkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIGV2YWx1YXRlKHQsIGUsIHMsIHIpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudmFsdWU7XG4gICAgfVxuICAgIGFzc2lnbih0LCBlLCBzLCByKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgYWNjZXB0KHQpIHtcbiAgICAgICAgcmV0dXJuIHQudmlzaXRQcmltaXRpdmVMaXRlcmFsKHRoaXMpO1xuICAgIH1cbiAgICB0b1N0cmluZygpIHtcbiAgICAgICAgcmV0dXJuIFVucGFyc2VyLnVucGFyc2UodGhpcyk7XG4gICAgfVxufVxuXG5QcmltaXRpdmVMaXRlcmFsRXhwcmVzc2lvbi4kdW5kZWZpbmVkID0gbmV3IFByaW1pdGl2ZUxpdGVyYWxFeHByZXNzaW9uKHZvaWQgMCk7XG5cblByaW1pdGl2ZUxpdGVyYWxFeHByZXNzaW9uLiRudWxsID0gbmV3IFByaW1pdGl2ZUxpdGVyYWxFeHByZXNzaW9uKG51bGwpO1xuXG5QcmltaXRpdmVMaXRlcmFsRXhwcmVzc2lvbi4kdHJ1ZSA9IG5ldyBQcmltaXRpdmVMaXRlcmFsRXhwcmVzc2lvbih0cnVlKTtcblxuUHJpbWl0aXZlTGl0ZXJhbEV4cHJlc3Npb24uJGZhbHNlID0gbmV3IFByaW1pdGl2ZUxpdGVyYWxFeHByZXNzaW9uKGZhbHNlKTtcblxuUHJpbWl0aXZlTGl0ZXJhbEV4cHJlc3Npb24uJGVtcHR5ID0gbmV3IFByaW1pdGl2ZUxpdGVyYWxFeHByZXNzaW9uKFwiXCIpO1xuXG5jbGFzcyBIdG1sTGl0ZXJhbEV4cHJlc3Npb24ge1xuICAgIGNvbnN0cnVjdG9yKHQpIHtcbiAgICAgICAgdGhpcy5wYXJ0cyA9IHQ7XG4gICAgfVxuICAgIGdldCAka2luZCgpIHtcbiAgICAgICAgcmV0dXJuIDUxO1xuICAgIH1cbiAgICBnZXQgaGFzQmluZCgpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBnZXQgaGFzVW5iaW5kKCkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIGV2YWx1YXRlKHQsIGUsIHMsIHIpIHtcbiAgICAgICAgbGV0IGkgPSBcIlwiO1xuICAgICAgICBmb3IgKGxldCBuID0gMDsgbiA8IHRoaXMucGFydHMubGVuZ3RoOyArK24pIHtcbiAgICAgICAgICAgIGNvbnN0IG8gPSB0aGlzLnBhcnRzW25dLmV2YWx1YXRlKHQsIGUsIHMsIHIpO1xuICAgICAgICAgICAgaWYgKG51bGwgPT0gbykgY29udGludWU7XG4gICAgICAgICAgICBpICs9IG87XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGk7XG4gICAgfVxuICAgIGFzc2lnbih0LCBlLCBzLCByLCBpKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgYWNjZXB0KHQpIHtcbiAgICAgICAgcmV0dXJuIHQudmlzaXRIdG1sTGl0ZXJhbCh0aGlzKTtcbiAgICB9XG4gICAgdG9TdHJpbmcoKSB7XG4gICAgICAgIHJldHVybiBVbnBhcnNlci51bnBhcnNlKHRoaXMpO1xuICAgIH1cbn1cblxuY2xhc3MgQXJyYXlMaXRlcmFsRXhwcmVzc2lvbiB7XG4gICAgY29uc3RydWN0b3IodCkge1xuICAgICAgICB0aGlzLmVsZW1lbnRzID0gdDtcbiAgICB9XG4gICAgZ2V0ICRraW5kKCkge1xuICAgICAgICByZXR1cm4gMTc5NTU7XG4gICAgfVxuICAgIGdldCBoYXNCaW5kKCkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIGdldCBoYXNVbmJpbmQoKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgZXZhbHVhdGUodCwgZSwgcywgcikge1xuICAgICAgICByZXR1cm4gdGhpcy5lbGVtZW50cy5tYXAoKGkgPT4gaS5ldmFsdWF0ZSh0LCBlLCBzLCByKSkpO1xuICAgIH1cbiAgICBhc3NpZ24odCwgZSwgcywgcikge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIGFjY2VwdCh0KSB7XG4gICAgICAgIHJldHVybiB0LnZpc2l0QXJyYXlMaXRlcmFsKHRoaXMpO1xuICAgIH1cbiAgICB0b1N0cmluZygpIHtcbiAgICAgICAgcmV0dXJuIFVucGFyc2VyLnVucGFyc2UodGhpcyk7XG4gICAgfVxufVxuXG5BcnJheUxpdGVyYWxFeHByZXNzaW9uLiRlbXB0eSA9IG5ldyBBcnJheUxpdGVyYWxFeHByZXNzaW9uKHUpO1xuXG5jbGFzcyBPYmplY3RMaXRlcmFsRXhwcmVzc2lvbiB7XG4gICAgY29uc3RydWN0b3IodCwgZSkge1xuICAgICAgICB0aGlzLmtleXMgPSB0O1xuICAgICAgICB0aGlzLnZhbHVlcyA9IGU7XG4gICAgfVxuICAgIGdldCAka2luZCgpIHtcbiAgICAgICAgcmV0dXJuIDE3OTU2O1xuICAgIH1cbiAgICBnZXQgaGFzQmluZCgpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBnZXQgaGFzVW5iaW5kKCkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIGV2YWx1YXRlKHQsIGUsIHMsIHIpIHtcbiAgICAgICAgY29uc3QgaSA9IHt9O1xuICAgICAgICBmb3IgKGxldCBuID0gMDsgbiA8IHRoaXMua2V5cy5sZW5ndGg7ICsrbikgaVt0aGlzLmtleXNbbl1dID0gdGhpcy52YWx1ZXNbbl0uZXZhbHVhdGUodCwgZSwgcywgcik7XG4gICAgICAgIHJldHVybiBpO1xuICAgIH1cbiAgICBhc3NpZ24odCwgZSwgcywgcikge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIGFjY2VwdCh0KSB7XG4gICAgICAgIHJldHVybiB0LnZpc2l0T2JqZWN0TGl0ZXJhbCh0aGlzKTtcbiAgICB9XG4gICAgdG9TdHJpbmcoKSB7XG4gICAgICAgIHJldHVybiBVbnBhcnNlci51bnBhcnNlKHRoaXMpO1xuICAgIH1cbn1cblxuT2JqZWN0TGl0ZXJhbEV4cHJlc3Npb24uJGVtcHR5ID0gbmV3IE9iamVjdExpdGVyYWxFeHByZXNzaW9uKHUsIHUpO1xuXG5jbGFzcyBUZW1wbGF0ZUV4cHJlc3Npb24ge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUgPSB1KSB7XG4gICAgICAgIHRoaXMuY29va2VkID0gdDtcbiAgICAgICAgdGhpcy5leHByZXNzaW9ucyA9IGU7XG4gICAgfVxuICAgIGdldCAka2luZCgpIHtcbiAgICAgICAgcmV0dXJuIDE3OTU4O1xuICAgIH1cbiAgICBnZXQgaGFzQmluZCgpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBnZXQgaGFzVW5iaW5kKCkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIGV2YWx1YXRlKHQsIGUsIHMsIHIpIHtcbiAgICAgICAgbGV0IGkgPSB0aGlzLmNvb2tlZFswXTtcbiAgICAgICAgZm9yIChsZXQgbiA9IDA7IG4gPCB0aGlzLmV4cHJlc3Npb25zLmxlbmd0aDsgKytuKSB7XG4gICAgICAgICAgICBpICs9IFN0cmluZyh0aGlzLmV4cHJlc3Npb25zW25dLmV2YWx1YXRlKHQsIGUsIHMsIHIpKTtcbiAgICAgICAgICAgIGkgKz0gdGhpcy5jb29rZWRbbiArIDFdO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBpO1xuICAgIH1cbiAgICBhc3NpZ24odCwgZSwgcywgcikge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIGFjY2VwdCh0KSB7XG4gICAgICAgIHJldHVybiB0LnZpc2l0VGVtcGxhdGUodGhpcyk7XG4gICAgfVxuICAgIHRvU3RyaW5nKCkge1xuICAgICAgICByZXR1cm4gVW5wYXJzZXIudW5wYXJzZSh0aGlzKTtcbiAgICB9XG59XG5cblRlbXBsYXRlRXhwcmVzc2lvbi4kZW1wdHkgPSBuZXcgVGVtcGxhdGVFeHByZXNzaW9uKFsgXCJcIiBdKTtcblxuY2xhc3MgVGFnZ2VkVGVtcGxhdGVFeHByZXNzaW9uIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlLCBzLCByID0gdSkge1xuICAgICAgICB0aGlzLmNvb2tlZCA9IHQ7XG4gICAgICAgIHRoaXMuZnVuYyA9IHM7XG4gICAgICAgIHRoaXMuZXhwcmVzc2lvbnMgPSByO1xuICAgICAgICB0LnJhdyA9IGU7XG4gICAgfVxuICAgIGdldCAka2luZCgpIHtcbiAgICAgICAgcmV0dXJuIDExOTc7XG4gICAgfVxuICAgIGdldCBoYXNCaW5kKCkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIGdldCBoYXNVbmJpbmQoKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgZXZhbHVhdGUodCwgZSwgcywgcikge1xuICAgICAgICBjb25zdCBpID0gdGhpcy5leHByZXNzaW9ucy5tYXAoKGkgPT4gaS5ldmFsdWF0ZSh0LCBlLCBzLCByKSkpO1xuICAgICAgICBjb25zdCBuID0gdGhpcy5mdW5jLmV2YWx1YXRlKHQsIGUsIHMsIHIpO1xuICAgICAgICBpZiAoIXAobikpIHRocm93IG5ldyBFcnJvcihgQVVSMDExMGApO1xuICAgICAgICByZXR1cm4gbih0aGlzLmNvb2tlZCwgLi4uaSk7XG4gICAgfVxuICAgIGFzc2lnbih0LCBlLCBzLCByKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgYWNjZXB0KHQpIHtcbiAgICAgICAgcmV0dXJuIHQudmlzaXRUYWdnZWRUZW1wbGF0ZSh0aGlzKTtcbiAgICB9XG4gICAgdG9TdHJpbmcoKSB7XG4gICAgICAgIHJldHVybiBVbnBhcnNlci51bnBhcnNlKHRoaXMpO1xuICAgIH1cbn1cblxuY2xhc3MgQXJyYXlCaW5kaW5nUGF0dGVybiB7XG4gICAgY29uc3RydWN0b3IodCkge1xuICAgICAgICB0aGlzLmVsZW1lbnRzID0gdDtcbiAgICB9XG4gICAgZ2V0ICRraW5kKCkge1xuICAgICAgICByZXR1cm4gNjU1NTY7XG4gICAgfVxuICAgIGdldCBoYXNCaW5kKCkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIGdldCBoYXNVbmJpbmQoKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgZXZhbHVhdGUodCwgZSwgcywgcikge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIGFzc2lnbih0LCBlLCBzLCByKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgYWNjZXB0KHQpIHtcbiAgICAgICAgcmV0dXJuIHQudmlzaXRBcnJheUJpbmRpbmdQYXR0ZXJuKHRoaXMpO1xuICAgIH1cbiAgICB0b1N0cmluZygpIHtcbiAgICAgICAgcmV0dXJuIFVucGFyc2VyLnVucGFyc2UodGhpcyk7XG4gICAgfVxufVxuXG5jbGFzcyBPYmplY3RCaW5kaW5nUGF0dGVybiB7XG4gICAgY29uc3RydWN0b3IodCwgZSkge1xuICAgICAgICB0aGlzLmtleXMgPSB0O1xuICAgICAgICB0aGlzLnZhbHVlcyA9IGU7XG4gICAgfVxuICAgIGdldCAka2luZCgpIHtcbiAgICAgICAgcmV0dXJuIDY1NTU3O1xuICAgIH1cbiAgICBnZXQgaGFzQmluZCgpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBnZXQgaGFzVW5iaW5kKCkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIGV2YWx1YXRlKHQsIGUsIHMsIHIpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBhc3NpZ24odCwgZSwgcywgcikge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIGFjY2VwdCh0KSB7XG4gICAgICAgIHJldHVybiB0LnZpc2l0T2JqZWN0QmluZGluZ1BhdHRlcm4odGhpcyk7XG4gICAgfVxuICAgIHRvU3RyaW5nKCkge1xuICAgICAgICByZXR1cm4gVW5wYXJzZXIudW5wYXJzZSh0aGlzKTtcbiAgICB9XG59XG5cbmNsYXNzIEJpbmRpbmdJZGVudGlmaWVyIHtcbiAgICBjb25zdHJ1Y3Rvcih0KSB7XG4gICAgICAgIHRoaXMubmFtZSA9IHQ7XG4gICAgfVxuICAgIGdldCAka2luZCgpIHtcbiAgICAgICAgcmV0dXJuIDY1NTU4O1xuICAgIH1cbiAgICBnZXQgaGFzQmluZCgpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBnZXQgaGFzVW5iaW5kKCkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIGV2YWx1YXRlKHQsIGUsIHMsIHIpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubmFtZTtcbiAgICB9XG4gICAgYWNjZXB0KHQpIHtcbiAgICAgICAgcmV0dXJuIHQudmlzaXRCaW5kaW5nSWRlbnRpZmllcih0aGlzKTtcbiAgICB9XG4gICAgdG9TdHJpbmcoKSB7XG4gICAgICAgIHJldHVybiBVbnBhcnNlci51bnBhcnNlKHRoaXMpO1xuICAgIH1cbn1cblxuY29uc3QgViA9IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmc7XG5cbmNsYXNzIEZvck9mU3RhdGVtZW50IHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlKSB7XG4gICAgICAgIHRoaXMuZGVjbGFyYXRpb24gPSB0O1xuICAgICAgICB0aGlzLml0ZXJhYmxlID0gZTtcbiAgICB9XG4gICAgZ2V0ICRraW5kKCkge1xuICAgICAgICByZXR1cm4gNjE5OTtcbiAgICB9XG4gICAgZ2V0IGhhc0JpbmQoKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgZ2V0IGhhc1VuYmluZCgpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBldmFsdWF0ZSh0LCBlLCBzLCByKSB7XG4gICAgICAgIHJldHVybiB0aGlzLml0ZXJhYmxlLmV2YWx1YXRlKHQsIGUsIHMsIHIpO1xuICAgIH1cbiAgICBhc3NpZ24odCwgZSwgcywgcikge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvdW50KHQsIGUpIHtcbiAgICAgICAgc3dpdGNoIChWLmNhbGwoZSkpIHtcbiAgICAgICAgICBjYXNlIFwiW29iamVjdCBBcnJheV1cIjpcbiAgICAgICAgICAgIHJldHVybiBlLmxlbmd0aDtcblxuICAgICAgICAgIGNhc2UgXCJbb2JqZWN0IE1hcF1cIjpcbiAgICAgICAgICAgIHJldHVybiBlLnNpemU7XG5cbiAgICAgICAgICBjYXNlIFwiW29iamVjdCBTZXRdXCI6XG4gICAgICAgICAgICByZXR1cm4gZS5zaXplO1xuXG4gICAgICAgICAgY2FzZSBcIltvYmplY3QgTnVtYmVyXVwiOlxuICAgICAgICAgICAgcmV0dXJuIGU7XG5cbiAgICAgICAgICBjYXNlIFwiW29iamVjdCBOdWxsXVwiOlxuICAgICAgICAgICAgcmV0dXJuIDA7XG5cbiAgICAgICAgICBjYXNlIFwiW29iamVjdCBVbmRlZmluZWRdXCI6XG4gICAgICAgICAgICByZXR1cm4gMDtcblxuICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYENhbm5vdCBjb3VudCAke1YuY2FsbChlKX1gKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBpdGVyYXRlKHQsIGUsIHMpIHtcbiAgICAgICAgc3dpdGNoIChWLmNhbGwoZSkpIHtcbiAgICAgICAgICBjYXNlIFwiW29iamVjdCBBcnJheV1cIjpcbiAgICAgICAgICAgIHJldHVybiBLKGUsIHMpO1xuXG4gICAgICAgICAgY2FzZSBcIltvYmplY3QgTWFwXVwiOlxuICAgICAgICAgICAgcmV0dXJuIHEoZSwgcyk7XG5cbiAgICAgICAgICBjYXNlIFwiW29iamVjdCBTZXRdXCI6XG4gICAgICAgICAgICByZXR1cm4gSChlLCBzKTtcblxuICAgICAgICAgIGNhc2UgXCJbb2JqZWN0IE51bWJlcl1cIjpcbiAgICAgICAgICAgIHJldHVybiBRKGUsIHMpO1xuXG4gICAgICAgICAgY2FzZSBcIltvYmplY3QgTnVsbF1cIjpcbiAgICAgICAgICAgIHJldHVybjtcblxuICAgICAgICAgIGNhc2UgXCJbb2JqZWN0IFVuZGVmaW5lZF1cIjpcbiAgICAgICAgICAgIHJldHVybjtcblxuICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYENhbm5vdCBpdGVyYXRlIG92ZXIgJHtWLmNhbGwoZSl9YCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgYmluZCh0LCBlLCBzKSB7XG4gICAgICAgIGlmICh0aGlzLml0ZXJhYmxlLmhhc0JpbmQpIHRoaXMuaXRlcmFibGUuYmluZCh0LCBlLCBzKTtcbiAgICB9XG4gICAgdW5iaW5kKHQsIGUsIHMpIHtcbiAgICAgICAgaWYgKHRoaXMuaXRlcmFibGUuaGFzVW5iaW5kKSB0aGlzLml0ZXJhYmxlLnVuYmluZCh0LCBlLCBzKTtcbiAgICB9XG4gICAgYWNjZXB0KHQpIHtcbiAgICAgICAgcmV0dXJuIHQudmlzaXRGb3JPZlN0YXRlbWVudCh0aGlzKTtcbiAgICB9XG4gICAgdG9TdHJpbmcoKSB7XG4gICAgICAgIHJldHVybiBVbnBhcnNlci51bnBhcnNlKHRoaXMpO1xuICAgIH1cbn1cblxuY2xhc3MgSW50ZXJwb2xhdGlvbiB7XG4gICAgY29uc3RydWN0b3IodCwgZSA9IHUpIHtcbiAgICAgICAgdGhpcy5wYXJ0cyA9IHQ7XG4gICAgICAgIHRoaXMuZXhwcmVzc2lvbnMgPSBlO1xuICAgICAgICB0aGlzLmlzTXVsdGkgPSBlLmxlbmd0aCA+IDE7XG4gICAgICAgIHRoaXMuZmlyc3RFeHByZXNzaW9uID0gZVswXTtcbiAgICB9XG4gICAgZ2V0ICRraW5kKCkge1xuICAgICAgICByZXR1cm4gMjQ7XG4gICAgfVxuICAgIGdldCBoYXNCaW5kKCkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIGdldCBoYXNVbmJpbmQoKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgZXZhbHVhdGUodCwgZSwgcywgcikge1xuICAgICAgICBpZiAodGhpcy5pc011bHRpKSB7XG4gICAgICAgICAgICBsZXQgaSA9IHRoaXMucGFydHNbMF07XG4gICAgICAgICAgICBmb3IgKGxldCBuID0gMDsgbiA8IHRoaXMuZXhwcmVzc2lvbnMubGVuZ3RoOyArK24pIHtcbiAgICAgICAgICAgICAgICBpICs9IFN0cmluZyh0aGlzLmV4cHJlc3Npb25zW25dLmV2YWx1YXRlKHQsIGUsIHMsIHIpKTtcbiAgICAgICAgICAgICAgICBpICs9IHRoaXMucGFydHNbbiArIDFdO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGk7XG4gICAgICAgIH0gZWxzZSByZXR1cm4gYCR7dGhpcy5wYXJ0c1swXX0ke3RoaXMuZmlyc3RFeHByZXNzaW9uLmV2YWx1YXRlKHQsIGUsIHMsIHIpfSR7dGhpcy5wYXJ0c1sxXX1gO1xuICAgIH1cbiAgICBhc3NpZ24odCwgZSwgcywgcikge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIGFjY2VwdCh0KSB7XG4gICAgICAgIHJldHVybiB0LnZpc2l0SW50ZXJwb2xhdGlvbih0aGlzKTtcbiAgICB9XG4gICAgdG9TdHJpbmcoKSB7XG4gICAgICAgIHJldHVybiBVbnBhcnNlci51bnBhcnNlKHRoaXMpO1xuICAgIH1cbn1cblxuY2xhc3MgRGVzdHJ1Y3R1cmluZ0Fzc2lnbm1lbnRFeHByZXNzaW9uIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlLCBzLCByKSB7XG4gICAgICAgIHRoaXMuJGtpbmQgPSB0O1xuICAgICAgICB0aGlzLmxpc3QgPSBlO1xuICAgICAgICB0aGlzLnNvdXJjZSA9IHM7XG4gICAgICAgIHRoaXMuaW5pdGlhbGl6ZXIgPSByO1xuICAgIH1cbiAgICBnZXQgaGFzQmluZCgpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBnZXQgaGFzVW5iaW5kKCkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIGV2YWx1YXRlKHQsIGUsIHMsIHIpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBhc3NpZ24odCwgZSwgcywgcikge1xuICAgICAgICB2YXIgaTtcbiAgICAgICAgY29uc3QgbiA9IHRoaXMubGlzdDtcbiAgICAgICAgY29uc3QgbyA9IG4ubGVuZ3RoO1xuICAgICAgICBsZXQgaDtcbiAgICAgICAgbGV0IGM7XG4gICAgICAgIGZvciAoaCA9IDA7IGggPCBvOyBoKyspIHtcbiAgICAgICAgICAgIGMgPSBuW2hdO1xuICAgICAgICAgICAgc3dpdGNoIChjLiRraW5kKSB7XG4gICAgICAgICAgICAgIGNhc2UgMTM5Mjg5OlxuICAgICAgICAgICAgICAgIGMuYXNzaWduKHQsIGUsIHMsIHIpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICAgIGNhc2UgOTAxMzc6XG4gICAgICAgICAgICAgIGNhc2UgMTA2NTIxOlxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKFwib2JqZWN0XCIgIT09IHR5cGVvZiByIHx8IG51bGwgPT09IHIpIHRocm93IG5ldyBFcnJvcihcIkFVUjAxMTJcIik7XG4gICAgICAgICAgICAgICAgICAgIGxldCBuID0gYy5zb3VyY2UuZXZhbHVhdGUodCwgU2NvcGUuY3JlYXRlKHIpLCBzLCBudWxsKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHZvaWQgMCA9PT0gbikgbiA9IG51bGwgPT09IChpID0gYy5pbml0aWFsaXplcikgfHwgdm9pZCAwID09PSBpID8gdm9pZCAwIDogaS5ldmFsdWF0ZSh0LCBlLCBzLCBudWxsKTtcbiAgICAgICAgICAgICAgICAgICAgYy5hc3NpZ24odCwgZSwgcywgbik7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBhY2NlcHQodCkge1xuICAgICAgICByZXR1cm4gdC52aXNpdERlc3RydWN0dXJpbmdBc3NpZ25tZW50RXhwcmVzc2lvbih0aGlzKTtcbiAgICB9XG4gICAgdG9TdHJpbmcoKSB7XG4gICAgICAgIHJldHVybiBVbnBhcnNlci51bnBhcnNlKHRoaXMpO1xuICAgIH1cbn1cblxuY2xhc3MgRGVzdHJ1Y3R1cmluZ0Fzc2lnbm1lbnRTaW5nbGVFeHByZXNzaW9uIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlLCBzKSB7XG4gICAgICAgIHRoaXMudGFyZ2V0ID0gdDtcbiAgICAgICAgdGhpcy5zb3VyY2UgPSBlO1xuICAgICAgICB0aGlzLmluaXRpYWxpemVyID0gcztcbiAgICB9XG4gICAgZ2V0ICRraW5kKCkge1xuICAgICAgICByZXR1cm4gMTM5Mjg5O1xuICAgIH1cbiAgICBldmFsdWF0ZSh0LCBlLCBzLCByKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgYXNzaWduKHQsIGUsIHMsIHIpIHtcbiAgICAgICAgdmFyIGk7XG4gICAgICAgIGlmIChudWxsID09IHIpIHJldHVybjtcbiAgICAgICAgaWYgKFwib2JqZWN0XCIgIT09IHR5cGVvZiByKSB0aHJvdyBuZXcgRXJyb3IoXCJBVVIwMTEyXCIpO1xuICAgICAgICBsZXQgbiA9IHRoaXMuc291cmNlLmV2YWx1YXRlKHQsIFNjb3BlLmNyZWF0ZShyKSwgcywgbnVsbCk7XG4gICAgICAgIGlmICh2b2lkIDAgPT09IG4pIG4gPSBudWxsID09PSAoaSA9IHRoaXMuaW5pdGlhbGl6ZXIpIHx8IHZvaWQgMCA9PT0gaSA/IHZvaWQgMCA6IGkuZXZhbHVhdGUodCwgZSwgcywgbnVsbCk7XG4gICAgICAgIHRoaXMudGFyZ2V0LmFzc2lnbih0LCBlLCBzLCBuKTtcbiAgICB9XG4gICAgYWNjZXB0KHQpIHtcbiAgICAgICAgcmV0dXJuIHQudmlzaXREZXN0cnVjdHVyaW5nQXNzaWdubWVudFNpbmdsZUV4cHJlc3Npb24odGhpcyk7XG4gICAgfVxuICAgIHRvU3RyaW5nKCkge1xuICAgICAgICByZXR1cm4gVW5wYXJzZXIudW5wYXJzZSh0aGlzKTtcbiAgICB9XG59XG5cbmNsYXNzIERlc3RydWN0dXJpbmdBc3NpZ25tZW50UmVzdEV4cHJlc3Npb24ge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUpIHtcbiAgICAgICAgdGhpcy50YXJnZXQgPSB0O1xuICAgICAgICB0aGlzLmluZGV4T3JQcm9wZXJ0aWVzID0gZTtcbiAgICB9XG4gICAgZ2V0ICRraW5kKCkge1xuICAgICAgICByZXR1cm4gMTM5Mjg5O1xuICAgIH1cbiAgICBldmFsdWF0ZSh0LCBlLCBzLCByKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgYXNzaWduKHQsIGUsIHMsIHIpIHtcbiAgICAgICAgaWYgKG51bGwgPT0gcikgcmV0dXJuO1xuICAgICAgICBpZiAoXCJvYmplY3RcIiAhPT0gdHlwZW9mIHIpIHRocm93IG5ldyBFcnJvcihcIkFVUjAxMTJcIik7XG4gICAgICAgIGNvbnN0IGkgPSB0aGlzLmluZGV4T3JQcm9wZXJ0aWVzO1xuICAgICAgICBsZXQgbjtcbiAgICAgICAgaWYgKGEoaSkpIHtcbiAgICAgICAgICAgIGlmICghQXJyYXkuaXNBcnJheShyKSkgdGhyb3cgbmV3IEVycm9yKFwiQVVSMDExMlwiKTtcbiAgICAgICAgICAgIG4gPSByLnNsaWNlKGkpO1xuICAgICAgICB9IGVsc2UgbiA9IE9iamVjdC5lbnRyaWVzKHIpLnJlZHVjZSgoKHQsIFtlLCBzXSkgPT4ge1xuICAgICAgICAgICAgaWYgKCFpLmluY2x1ZGVzKGUpKSB0W2VdID0gcztcbiAgICAgICAgICAgIHJldHVybiB0O1xuICAgICAgICB9KSwge30pO1xuICAgICAgICB0aGlzLnRhcmdldC5hc3NpZ24odCwgZSwgcywgbik7XG4gICAgfVxuICAgIGFjY2VwdCh0KSB7XG4gICAgICAgIHJldHVybiB0LnZpc2l0RGVzdHJ1Y3R1cmluZ0Fzc2lnbm1lbnRSZXN0RXhwcmVzc2lvbih0aGlzKTtcbiAgICB9XG4gICAgdG9TdHJpbmcoKSB7XG4gICAgICAgIHJldHVybiBVbnBhcnNlci51bnBhcnNlKHRoaXMpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gTih0LCBlLCBzKSB7XG4gICAgY29uc3QgciA9IG51bGwgPT0gZSA/IG51bGwgOiBlW3NdO1xuICAgIGlmIChwKHIpKSByZXR1cm4gcjtcbiAgICBpZiAoISg4ICYgdCkgJiYgbnVsbCA9PSByKSByZXR1cm4gbnVsbDtcbiAgICB0aHJvdyBuZXcgRXJyb3IoYEFVUjAxMTE6JHtzfWApO1xufVxuXG5mdW5jdGlvbiBLKHQsIGUpIHtcbiAgICBmb3IgKGxldCBzID0gMCwgciA9IHQubGVuZ3RoOyBzIDwgcjsgKytzKSBlKHQsIHMsIHRbc10pO1xufVxuXG5mdW5jdGlvbiBxKHQsIGUpIHtcbiAgICBjb25zdCBzID0gQXJyYXkodC5zaXplKTtcbiAgICBsZXQgciA9IC0xO1xuICAgIGZvciAoY29uc3QgZSBvZiB0LmVudHJpZXMoKSkgc1srK3JdID0gZTtcbiAgICBLKHMsIGUpO1xufVxuXG5mdW5jdGlvbiBIKHQsIGUpIHtcbiAgICBjb25zdCBzID0gQXJyYXkodC5zaXplKTtcbiAgICBsZXQgciA9IC0xO1xuICAgIGZvciAoY29uc3QgZSBvZiB0LmtleXMoKSkgc1srK3JdID0gZTtcbiAgICBLKHMsIGUpO1xufVxuXG5mdW5jdGlvbiBRKHQsIGUpIHtcbiAgICBjb25zdCBzID0gQXJyYXkodCk7XG4gICAgZm9yIChsZXQgZSA9IDA7IGUgPCB0OyArK2UpIHNbZV0gPSBlO1xuICAgIEsocywgZSk7XG59XG5cbmNvbnN0IF8gPSByLmNyZWF0ZUludGVyZmFjZShcIklDb2VyY2lvbkNvbmZpZ3VyYXRpb25cIik7XG5cbnZhciB6O1xuXG4oZnVuY3Rpb24odCkge1xuICAgIHRbdFtcIm9uZVRpbWVcIl0gPSAxXSA9IFwib25lVGltZVwiO1xuICAgIHRbdFtcInRvVmlld1wiXSA9IDJdID0gXCJ0b1ZpZXdcIjtcbiAgICB0W3RbXCJmcm9tVmlld1wiXSA9IDRdID0gXCJmcm9tVmlld1wiO1xuICAgIHRbdFtcInR3b1dheVwiXSA9IDZdID0gXCJ0d29XYXlcIjtcbiAgICB0W3RbXCJkZWZhdWx0XCJdID0gOF0gPSBcImRlZmF1bHRcIjtcbn0pKHogfHwgKHogPSB7fSkpO1xuXG52YXIgVztcblxuKGZ1bmN0aW9uKHQpIHtcbiAgICB0W3RbXCJub25lXCJdID0gMF0gPSBcIm5vbmVcIjtcbiAgICB0W3RbXCJwZXJzaXN0ZW50QmluZGluZ0ZsYWdzXCJdID0gOTYxXSA9IFwicGVyc2lzdGVudEJpbmRpbmdGbGFnc1wiO1xuICAgIHRbdFtcImFsbG93UGFyZW50U2NvcGVUcmF2ZXJzYWxcIl0gPSA2NF0gPSBcImFsbG93UGFyZW50U2NvcGVUcmF2ZXJzYWxcIjtcbiAgICB0W3RbXCJvYnNlcnZlTGVhZlByb3BlcnRpZXNPbmx5XCJdID0gMTI4XSA9IFwib2JzZXJ2ZUxlYWZQcm9wZXJ0aWVzT25seVwiO1xuICAgIHRbdFtcInRhcmdldE9ic2VydmVyRmxhZ3NcIl0gPSA3NjldID0gXCJ0YXJnZXRPYnNlcnZlckZsYWdzXCI7XG4gICAgdFt0W1wibm9GbHVzaFwiXSA9IDI1Nl0gPSBcIm5vRmx1c2hcIjtcbiAgICB0W3RbXCJwZXJzaXN0ZW50VGFyZ2V0T2JzZXJ2ZXJRdWV1ZVwiXSA9IDUxMl0gPSBcInBlcnNpc3RlbnRUYXJnZXRPYnNlcnZlclF1ZXVlXCI7XG4gICAgdFt0W1wiYmluZGluZ1N0cmF0ZWd5XCJdID0gMV0gPSBcImJpbmRpbmdTdHJhdGVneVwiO1xuICAgIHRbdFtcImlzU3RyaWN0QmluZGluZ1N0cmF0ZWd5XCJdID0gMV0gPSBcImlzU3RyaWN0QmluZGluZ1N0cmF0ZWd5XCI7XG4gICAgdFt0W1wiZnJvbUJpbmRcIl0gPSAyXSA9IFwiZnJvbUJpbmRcIjtcbiAgICB0W3RbXCJmcm9tVW5iaW5kXCJdID0gNF0gPSBcImZyb21VbmJpbmRcIjtcbiAgICB0W3RbXCJtdXN0RXZhbHVhdGVcIl0gPSA4XSA9IFwibXVzdEV2YWx1YXRlXCI7XG4gICAgdFt0W1wiaXNUcmF2ZXJzaW5nUGFyZW50U2NvcGVcIl0gPSAxNl0gPSBcImlzVHJhdmVyc2luZ1BhcmVudFNjb3BlXCI7XG4gICAgdFt0W1wiZGlzcG9zZVwiXSA9IDMyXSA9IFwiZGlzcG9zZVwiO1xufSkoVyB8fCAoVyA9IHt9KSk7XG5cbnZhciBHO1xuXG4oZnVuY3Rpb24odCkge1xuICAgIHRbdFtcIk5vbmVcIl0gPSAwXSA9IFwiTm9uZVwiO1xuICAgIHRbdFtcIlN1YnNjcmliZXIwXCJdID0gMV0gPSBcIlN1YnNjcmliZXIwXCI7XG4gICAgdFt0W1wiU3Vic2NyaWJlcjFcIl0gPSAyXSA9IFwiU3Vic2NyaWJlcjFcIjtcbiAgICB0W3RbXCJTdWJzY3JpYmVyMlwiXSA9IDRdID0gXCJTdWJzY3JpYmVyMlwiO1xuICAgIHRbdFtcIlN1YnNjcmliZXJzUmVzdFwiXSA9IDhdID0gXCJTdWJzY3JpYmVyc1Jlc3RcIjtcbiAgICB0W3RbXCJBbnlcIl0gPSAxNV0gPSBcIkFueVwiO1xufSkoRyB8fCAoRyA9IHt9KSk7XG5cbnZhciBaO1xuXG4oZnVuY3Rpb24odCkge1xuICAgIHRbdFtcIm5vbmVcIl0gPSAwXSA9IFwibm9uZVwiO1xuICAgIHRbdFtcImNhcHR1cmluZ1wiXSA9IDFdID0gXCJjYXB0dXJpbmdcIjtcbiAgICB0W3RbXCJidWJibGluZ1wiXSA9IDJdID0gXCJidWJibGluZ1wiO1xufSkoWiB8fCAoWiA9IHt9KSk7XG5cbnZhciBKO1xuXG4oZnVuY3Rpb24odCkge1xuICAgIHRbdFtcImluZGV4ZWRcIl0gPSA4XSA9IFwiaW5kZXhlZFwiO1xuICAgIHRbdFtcImtleWVkXCJdID0gNF0gPSBcImtleWVkXCI7XG4gICAgdFt0W1wiYXJyYXlcIl0gPSA5XSA9IFwiYXJyYXlcIjtcbiAgICB0W3RbXCJtYXBcIl0gPSA2XSA9IFwibWFwXCI7XG4gICAgdFt0W1wic2V0XCJdID0gN10gPSBcInNldFwiO1xufSkoSiB8fCAoSiA9IHt9KSk7XG5cbnZhciBYO1xuXG4oZnVuY3Rpb24odCkge1xuICAgIHRbdFtcIk5vbmVcIl0gPSAwXSA9IFwiTm9uZVwiO1xuICAgIHRbdFtcIk9ic2VydmVyXCJdID0gMV0gPSBcIk9ic2VydmVyXCI7XG4gICAgdFt0W1wiTm9kZVwiXSA9IDJdID0gXCJOb2RlXCI7XG4gICAgdFt0W1wiTGF5b3V0XCJdID0gNF0gPSBcIkxheW91dFwiO1xuICAgIHRbdFtcIlByaW10aXZlXCJdID0gOF0gPSBcIlByaW10aXZlXCI7XG4gICAgdFt0W1wiQXJyYXlcIl0gPSAxOF0gPSBcIkFycmF5XCI7XG4gICAgdFt0W1wiU2V0XCJdID0gMzRdID0gXCJTZXRcIjtcbiAgICB0W3RbXCJNYXBcIl0gPSA2Nl0gPSBcIk1hcFwiO1xufSkoWCB8fCAoWCA9IHt9KSk7XG5cbmZ1bmN0aW9uIFkodCwgZSkge1xuICAgIGNvbnN0IHtsZW5ndGg6IHN9ID0gdDtcbiAgICBjb25zdCByID0gQXJyYXkocyk7XG4gICAgbGV0IGkgPSAwO1xuICAgIHdoaWxlIChpIDwgcykge1xuICAgICAgICByW2ldID0gdFtpXTtcbiAgICAgICAgKytpO1xuICAgIH1cbiAgICBpZiAodm9pZCAwICE9PSBlKSByLmRlbGV0ZWRJdGVtcyA9IGUuc2xpY2UoMCk7IGVsc2UgaWYgKHZvaWQgMCAhPT0gdC5kZWxldGVkSXRlbXMpIHIuZGVsZXRlZEl0ZW1zID0gdC5kZWxldGVkSXRlbXMuc2xpY2UoMCk7IGVsc2Ugci5kZWxldGVkSXRlbXMgPSBbXTtcbiAgICByLmlzSW5kZXhNYXAgPSB0cnVlO1xuICAgIHJldHVybiByO1xufVxuXG5mdW5jdGlvbiB0dCh0ID0gMCkge1xuICAgIGNvbnN0IGUgPSBBcnJheSh0KTtcbiAgICBsZXQgcyA9IDA7XG4gICAgd2hpbGUgKHMgPCB0KSBlW3NdID0gcysrO1xuICAgIGUuZGVsZXRlZEl0ZW1zID0gW107XG4gICAgZS5pc0luZGV4TWFwID0gdHJ1ZTtcbiAgICByZXR1cm4gZTtcbn1cblxuZnVuY3Rpb24gZXQodCkge1xuICAgIGNvbnN0IGUgPSB0LnNsaWNlKCk7XG4gICAgZS5kZWxldGVkSXRlbXMgPSB0LmRlbGV0ZWRJdGVtcy5zbGljZSgpO1xuICAgIGUuaXNJbmRleE1hcCA9IHRydWU7XG4gICAgcmV0dXJuIGU7XG59XG5cbmZ1bmN0aW9uIHN0KHQpIHtcbiAgICByZXR1cm4gdCBpbnN0YW5jZW9mIEFycmF5ICYmIHRydWUgPT09IHQuaXNJbmRleE1hcDtcbn1cblxuZnVuY3Rpb24gcnQodCkge1xuICAgIHJldHVybiBudWxsID09IHQgPyBpdCA6IGl0KHQpO1xufVxuXG5mdW5jdGlvbiBpdCh0KSB7XG4gICAgY29uc3QgZSA9IHQucHJvdG90eXBlO1xuICAgIHYoZSwgXCJzdWJzXCIsIHtcbiAgICAgICAgZ2V0OiBudFxuICAgIH0pO1xuICAgIGIoZSwgXCJzdWJzY3JpYmVcIiwgb3QpO1xuICAgIGIoZSwgXCJ1bnN1YnNjcmliZVwiLCBodCk7XG59XG5cbmNsYXNzIFN1YnNjcmliZXJSZWNvcmQge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICB0aGlzLnNmID0gMDtcbiAgICAgICAgdGhpcy5jb3VudCA9IDA7XG4gICAgfVxuICAgIGFkZCh0KSB7XG4gICAgICAgIGlmICh0aGlzLmhhcyh0KSkgcmV0dXJuIGZhbHNlO1xuICAgICAgICBjb25zdCBlID0gdGhpcy5zZjtcbiAgICAgICAgaWYgKDAgPT09ICgxICYgZSkpIHtcbiAgICAgICAgICAgIHRoaXMuczAgPSB0O1xuICAgICAgICAgICAgdGhpcy5zZiB8PSAxO1xuICAgICAgICB9IGVsc2UgaWYgKDAgPT09ICgyICYgZSkpIHtcbiAgICAgICAgICAgIHRoaXMuczEgPSB0O1xuICAgICAgICAgICAgdGhpcy5zZiB8PSAyO1xuICAgICAgICB9IGVsc2UgaWYgKDAgPT09ICg0ICYgZSkpIHtcbiAgICAgICAgICAgIHRoaXMuczIgPSB0O1xuICAgICAgICAgICAgdGhpcy5zZiB8PSA0O1xuICAgICAgICB9IGVsc2UgaWYgKDAgPT09ICg4ICYgZSkpIHtcbiAgICAgICAgICAgIHRoaXMuc3IgPSBbIHQgXTtcbiAgICAgICAgICAgIHRoaXMuc2YgfD0gODtcbiAgICAgICAgfSBlbHNlIHRoaXMuc3IucHVzaCh0KTtcbiAgICAgICAgKyt0aGlzLmNvdW50O1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgaGFzKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IHRoaXMuc2Y7XG4gICAgICAgIGlmICgoMSAmIGUpID4gMCAmJiB0aGlzLnMwID09PSB0KSByZXR1cm4gdHJ1ZTtcbiAgICAgICAgaWYgKCgyICYgZSkgPiAwICYmIHRoaXMuczEgPT09IHQpIHJldHVybiB0cnVlO1xuICAgICAgICBpZiAoKDQgJiBlKSA+IDAgJiYgdGhpcy5zMiA9PT0gdCkgcmV0dXJuIHRydWU7XG4gICAgICAgIGlmICgoOCAmIGUpID4gMCkge1xuICAgICAgICAgICAgY29uc3QgZSA9IHRoaXMuc3I7XG4gICAgICAgICAgICBjb25zdCBzID0gZS5sZW5ndGg7XG4gICAgICAgICAgICBsZXQgciA9IDA7XG4gICAgICAgICAgICBmb3IgKDtyIDwgczsgKytyKSBpZiAoZVtyXSA9PT0gdCkgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBhbnkoKSB7XG4gICAgICAgIHJldHVybiAwICE9PSB0aGlzLnNmO1xuICAgIH1cbiAgICByZW1vdmUodCkge1xuICAgICAgICBjb25zdCBlID0gdGhpcy5zZjtcbiAgICAgICAgaWYgKCgxICYgZSkgPiAwICYmIHRoaXMuczAgPT09IHQpIHtcbiAgICAgICAgICAgIHRoaXMuczAgPSB2b2lkIDA7XG4gICAgICAgICAgICB0aGlzLnNmID0gMSBeICgxIHwgdGhpcy5zZik7XG4gICAgICAgICAgICAtLXRoaXMuY291bnQ7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfSBlbHNlIGlmICgoMiAmIGUpID4gMCAmJiB0aGlzLnMxID09PSB0KSB7XG4gICAgICAgICAgICB0aGlzLnMxID0gdm9pZCAwO1xuICAgICAgICAgICAgdGhpcy5zZiA9IDIgXiAoMiB8IHRoaXMuc2YpO1xuICAgICAgICAgICAgLS10aGlzLmNvdW50O1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH0gZWxzZSBpZiAoKDQgJiBlKSA+IDAgJiYgdGhpcy5zMiA9PT0gdCkge1xuICAgICAgICAgICAgdGhpcy5zMiA9IHZvaWQgMDtcbiAgICAgICAgICAgIHRoaXMuc2YgPSA0IF4gKDQgfCB0aGlzLnNmKTtcbiAgICAgICAgICAgIC0tdGhpcy5jb3VudDtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9IGVsc2UgaWYgKCg4ICYgZSkgPiAwKSB7XG4gICAgICAgICAgICBjb25zdCBlID0gdGhpcy5zcjtcbiAgICAgICAgICAgIGNvbnN0IHMgPSBlLmxlbmd0aDtcbiAgICAgICAgICAgIGxldCByID0gMDtcbiAgICAgICAgICAgIGZvciAoO3IgPCBzOyArK3IpIGlmIChlW3JdID09PSB0KSB7XG4gICAgICAgICAgICAgICAgZS5zcGxpY2UociwgMSk7XG4gICAgICAgICAgICAgICAgaWYgKDEgPT09IHMpIHRoaXMuc2YgPSA4IF4gKDggfCB0aGlzLnNmKTtcbiAgICAgICAgICAgICAgICAtLXRoaXMuY291bnQ7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBub3RpZnkodCwgZSwgcykge1xuICAgICAgICBjb25zdCByID0gdGhpcy5zMDtcbiAgICAgICAgY29uc3QgaSA9IHRoaXMuczE7XG4gICAgICAgIGNvbnN0IG4gPSB0aGlzLnMyO1xuICAgICAgICBsZXQgbyA9IHRoaXMuc3I7XG4gICAgICAgIGlmICh2b2lkIDAgIT09IG8pIG8gPSBvLnNsaWNlKCk7XG4gICAgICAgIGlmICh2b2lkIDAgIT09IHIpIHIuaGFuZGxlQ2hhbmdlKHQsIGUsIHMpO1xuICAgICAgICBpZiAodm9pZCAwICE9PSBpKSBpLmhhbmRsZUNoYW5nZSh0LCBlLCBzKTtcbiAgICAgICAgaWYgKHZvaWQgMCAhPT0gbikgbi5oYW5kbGVDaGFuZ2UodCwgZSwgcyk7XG4gICAgICAgIGlmICh2b2lkIDAgIT09IG8pIHtcbiAgICAgICAgICAgIGNvbnN0IHIgPSBvLmxlbmd0aDtcbiAgICAgICAgICAgIGxldCBpO1xuICAgICAgICAgICAgbGV0IG4gPSAwO1xuICAgICAgICAgICAgZm9yICg7biA8IHI7ICsrbikge1xuICAgICAgICAgICAgICAgIGkgPSBvW25dO1xuICAgICAgICAgICAgICAgIGlmICh2b2lkIDAgIT09IGkpIGkuaGFuZGxlQ2hhbmdlKHQsIGUsIHMpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIG5vdGlmeUNvbGxlY3Rpb24odCwgZSkge1xuICAgICAgICBjb25zdCBzID0gdGhpcy5zMDtcbiAgICAgICAgY29uc3QgciA9IHRoaXMuczE7XG4gICAgICAgIGNvbnN0IGkgPSB0aGlzLnMyO1xuICAgICAgICBsZXQgbiA9IHRoaXMuc3I7XG4gICAgICAgIGlmICh2b2lkIDAgIT09IG4pIG4gPSBuLnNsaWNlKCk7XG4gICAgICAgIGlmICh2b2lkIDAgIT09IHMpIHMuaGFuZGxlQ29sbGVjdGlvbkNoYW5nZSh0LCBlKTtcbiAgICAgICAgaWYgKHZvaWQgMCAhPT0gcikgci5oYW5kbGVDb2xsZWN0aW9uQ2hhbmdlKHQsIGUpO1xuICAgICAgICBpZiAodm9pZCAwICE9PSBpKSBpLmhhbmRsZUNvbGxlY3Rpb25DaGFuZ2UodCwgZSk7XG4gICAgICAgIGlmICh2b2lkIDAgIT09IG4pIHtcbiAgICAgICAgICAgIGNvbnN0IHMgPSBuLmxlbmd0aDtcbiAgICAgICAgICAgIGxldCByO1xuICAgICAgICAgICAgbGV0IGkgPSAwO1xuICAgICAgICAgICAgZm9yICg7aSA8IHM7ICsraSkge1xuICAgICAgICAgICAgICAgIHIgPSBuW2ldO1xuICAgICAgICAgICAgICAgIGlmICh2b2lkIDAgIT09IHIpIHIuaGFuZGxlQ29sbGVjdGlvbkNoYW5nZSh0LCBlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbn1cblxuZnVuY3Rpb24gbnQoKSB7XG4gICAgcmV0dXJuIHcodGhpcywgXCJzdWJzXCIsIG5ldyBTdWJzY3JpYmVyUmVjb3JkKTtcbn1cblxuZnVuY3Rpb24gb3QodCkge1xuICAgIHJldHVybiB0aGlzLnN1YnMuYWRkKHQpO1xufVxuXG5mdW5jdGlvbiBodCh0KSB7XG4gICAgcmV0dXJuIHRoaXMuc3Vicy5yZW1vdmUodCk7XG59XG5cbmZ1bmN0aW9uIGN0KHQpIHtcbiAgICByZXR1cm4gbnVsbCA9PSB0ID8gdXQgOiB1dCh0KTtcbn1cblxuZnVuY3Rpb24gdXQodCkge1xuICAgIGNvbnN0IGUgPSB0LnByb3RvdHlwZTtcbiAgICB2KGUsIFwicXVldWVcIiwge1xuICAgICAgICBnZXQ6IGF0XG4gICAgfSk7XG59XG5cbmNsYXNzIEZsdXNoUXVldWUge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICB0aGlzLnQgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5pID0gbmV3IFNldDtcbiAgICB9XG4gICAgZ2V0IGNvdW50KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5pLnNpemU7XG4gICAgfVxuICAgIGFkZCh0KSB7XG4gICAgICAgIHRoaXMuaS5hZGQodCk7XG4gICAgICAgIGlmICh0aGlzLnQpIHJldHVybjtcbiAgICAgICAgdGhpcy50ID0gdHJ1ZTtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHRoaXMuaS5mb3JFYWNoKGx0KTtcbiAgICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgICAgIHRoaXMudCA9IGZhbHNlO1xuICAgICAgICB9XG4gICAgfVxuICAgIGNsZWFyKCkge1xuICAgICAgICB0aGlzLmkuY2xlYXIoKTtcbiAgICAgICAgdGhpcy50ID0gZmFsc2U7XG4gICAgfVxufVxuXG5GbHVzaFF1ZXVlLmluc3RhbmNlID0gbmV3IEZsdXNoUXVldWU7XG5cbmZ1bmN0aW9uIGF0KCkge1xuICAgIHJldHVybiBGbHVzaFF1ZXVlLmluc3RhbmNlO1xufVxuXG5mdW5jdGlvbiBsdCh0LCBlLCBzKSB7XG4gICAgcy5kZWxldGUodCk7XG4gICAgdC5mbHVzaCgpO1xufVxuXG5jbGFzcyBDb2xsZWN0aW9uTGVuZ3RoT2JzZXJ2ZXIge1xuICAgIGNvbnN0cnVjdG9yKHQpIHtcbiAgICAgICAgdGhpcy5vd25lciA9IHQ7XG4gICAgICAgIHRoaXMudHlwZSA9IDE4O1xuICAgICAgICB0aGlzLmYgPSAwO1xuICAgICAgICB0aGlzLnYgPSB0aGlzLmggPSAodGhpcy5vID0gdC5jb2xsZWN0aW9uKS5sZW5ndGg7XG4gICAgfVxuICAgIGdldFZhbHVlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5vLmxlbmd0aDtcbiAgICB9XG4gICAgc2V0VmFsdWUodCwgZSkge1xuICAgICAgICBjb25zdCBzID0gdGhpcy52O1xuICAgICAgICBpZiAodCAhPT0gcyAmJiBhKHQpKSB7XG4gICAgICAgICAgICBpZiAoMCA9PT0gKDI1NiAmIGUpKSB0aGlzLm8ubGVuZ3RoID0gdDtcbiAgICAgICAgICAgIHRoaXMudiA9IHQ7XG4gICAgICAgICAgICB0aGlzLmggPSBzO1xuICAgICAgICAgICAgdGhpcy5mID0gZTtcbiAgICAgICAgICAgIHRoaXMucXVldWUuYWRkKHRoaXMpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGhhbmRsZUNvbGxlY3Rpb25DaGFuZ2UodCwgZSkge1xuICAgICAgICBjb25zdCBzID0gdGhpcy52O1xuICAgICAgICBjb25zdCByID0gdGhpcy5vLmxlbmd0aDtcbiAgICAgICAgaWYgKCh0aGlzLnYgPSByKSAhPT0gcykge1xuICAgICAgICAgICAgdGhpcy5oID0gcztcbiAgICAgICAgICAgIHRoaXMuZiA9IGU7XG4gICAgICAgICAgICB0aGlzLnF1ZXVlLmFkZCh0aGlzKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBmbHVzaCgpIHtcbiAgICAgICAgcHQgPSB0aGlzLmg7XG4gICAgICAgIHRoaXMuaCA9IHRoaXMudjtcbiAgICAgICAgdGhpcy5zdWJzLm5vdGlmeSh0aGlzLnYsIHB0LCB0aGlzLmYpO1xuICAgIH1cbn1cblxuY2xhc3MgQ29sbGVjdGlvblNpemVPYnNlcnZlciB7XG4gICAgY29uc3RydWN0b3IodCkge1xuICAgICAgICB0aGlzLm93bmVyID0gdDtcbiAgICAgICAgdGhpcy5mID0gMDtcbiAgICAgICAgdGhpcy52ID0gdGhpcy5oID0gKHRoaXMubyA9IHQuY29sbGVjdGlvbikuc2l6ZTtcbiAgICAgICAgdGhpcy50eXBlID0gdGhpcy5vIGluc3RhbmNlb2YgTWFwID8gNjYgOiAzNDtcbiAgICB9XG4gICAgZ2V0VmFsdWUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm8uc2l6ZTtcbiAgICB9XG4gICAgc2V0VmFsdWUoKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIkFVUjAyXCIpO1xuICAgIH1cbiAgICBoYW5kbGVDb2xsZWN0aW9uQ2hhbmdlKHQsIGUpIHtcbiAgICAgICAgY29uc3QgcyA9IHRoaXMudjtcbiAgICAgICAgY29uc3QgciA9IHRoaXMuby5zaXplO1xuICAgICAgICBpZiAoKHRoaXMudiA9IHIpICE9PSBzKSB7XG4gICAgICAgICAgICB0aGlzLmggPSBzO1xuICAgICAgICAgICAgdGhpcy5mID0gZTtcbiAgICAgICAgICAgIHRoaXMucXVldWUuYWRkKHRoaXMpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGZsdXNoKCkge1xuICAgICAgICBwdCA9IHRoaXMuaDtcbiAgICAgICAgdGhpcy5oID0gdGhpcy52O1xuICAgICAgICB0aGlzLnN1YnMubm90aWZ5KHRoaXMudiwgcHQsIHRoaXMuZik7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBmdCh0KSB7XG4gICAgY29uc3QgZSA9IHQucHJvdG90eXBlO1xuICAgIGIoZSwgXCJzdWJzY3JpYmVcIiwgZHQsIHRydWUpO1xuICAgIGIoZSwgXCJ1bnN1YnNjcmliZVwiLCB2dCwgdHJ1ZSk7XG4gICAgY3QodCk7XG4gICAgcnQodCk7XG59XG5cbmZ1bmN0aW9uIGR0KHQpIHtcbiAgICBpZiAodGhpcy5zdWJzLmFkZCh0KSAmJiAxID09PSB0aGlzLnN1YnMuY291bnQpIHRoaXMub3duZXIuc3Vic2NyaWJlKHRoaXMpO1xufVxuXG5mdW5jdGlvbiB2dCh0KSB7XG4gICAgaWYgKHRoaXMuc3Vicy5yZW1vdmUodCkgJiYgMCA9PT0gdGhpcy5zdWJzLmNvdW50KSB0aGlzLm93bmVyLnN1YnNjcmliZSh0aGlzKTtcbn1cblxuZnQoQ29sbGVjdGlvbkxlbmd0aE9ic2VydmVyKTtcblxuZnQoQ29sbGVjdGlvblNpemVPYnNlcnZlcik7XG5cbmxldCBwdDtcblxuY29uc3QgZ3QgPSBuZXcgV2Vha01hcDtcblxuZnVuY3Rpb24gd3QodCwgZSkge1xuICAgIGlmICh0ID09PSBlKSByZXR1cm4gMDtcbiAgICB0ID0gbnVsbCA9PT0gdCA/IFwibnVsbFwiIDogdC50b1N0cmluZygpO1xuICAgIGUgPSBudWxsID09PSBlID8gXCJudWxsXCIgOiBlLnRvU3RyaW5nKCk7XG4gICAgcmV0dXJuIHQgPCBlID8gLTEgOiAxO1xufVxuXG5mdW5jdGlvbiBidCh0LCBlKSB7XG4gICAgaWYgKHZvaWQgMCA9PT0gdCkgaWYgKHZvaWQgMCA9PT0gZSkgcmV0dXJuIDA7IGVsc2UgcmV0dXJuIDE7XG4gICAgaWYgKHZvaWQgMCA9PT0gZSkgcmV0dXJuIC0xO1xuICAgIHJldHVybiAwO1xufVxuXG5mdW5jdGlvbiBFdCh0LCBlLCBzLCByLCBpKSB7XG4gICAgbGV0IG4sIG8sIGgsIGMsIHU7XG4gICAgbGV0IGEsIGw7XG4gICAgZm9yIChhID0gcyArIDE7IGEgPCByOyBhKyspIHtcbiAgICAgICAgbiA9IHRbYV07XG4gICAgICAgIG8gPSBlW2FdO1xuICAgICAgICBmb3IgKGwgPSBhIC0gMTsgbCA+PSBzOyBsLS0pIHtcbiAgICAgICAgICAgIGggPSB0W2xdO1xuICAgICAgICAgICAgYyA9IGVbbF07XG4gICAgICAgICAgICB1ID0gaShoLCBuKTtcbiAgICAgICAgICAgIGlmICh1ID4gMCkge1xuICAgICAgICAgICAgICAgIHRbbCArIDFdID0gaDtcbiAgICAgICAgICAgICAgICBlW2wgKyAxXSA9IGM7XG4gICAgICAgICAgICB9IGVsc2UgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgdFtsICsgMV0gPSBuO1xuICAgICAgICBlW2wgKyAxXSA9IG87XG4gICAgfVxufVxuXG5mdW5jdGlvbiBBdCh0LCBlLCBzLCByLCBpKSB7XG4gICAgbGV0IG4gPSAwLCBvID0gMDtcbiAgICBsZXQgaCwgYywgdTtcbiAgICBsZXQgYSwgbCwgZjtcbiAgICBsZXQgZCwgdiwgcDtcbiAgICBsZXQgZywgdztcbiAgICBsZXQgYiwgRSwgQSwgeTtcbiAgICBsZXQgbSwgVSwgeCwgUztcbiAgICB3aGlsZSAodHJ1ZSkge1xuICAgICAgICBpZiAociAtIHMgPD0gMTApIHtcbiAgICAgICAgICAgIEV0KHQsIGUsIHMsIHIsIGkpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIG4gPSBzICsgKHIgLSBzID4+IDEpO1xuICAgICAgICBoID0gdFtzXTtcbiAgICAgICAgYSA9IGVbc107XG4gICAgICAgIGMgPSB0W3IgLSAxXTtcbiAgICAgICAgbCA9IGVbciAtIDFdO1xuICAgICAgICB1ID0gdFtuXTtcbiAgICAgICAgZiA9IGVbbl07XG4gICAgICAgIGQgPSBpKGgsIGMpO1xuICAgICAgICBpZiAoZCA+IDApIHtcbiAgICAgICAgICAgIGcgPSBoO1xuICAgICAgICAgICAgdyA9IGE7XG4gICAgICAgICAgICBoID0gYztcbiAgICAgICAgICAgIGEgPSBsO1xuICAgICAgICAgICAgYyA9IGc7XG4gICAgICAgICAgICBsID0gdztcbiAgICAgICAgfVxuICAgICAgICB2ID0gaShoLCB1KTtcbiAgICAgICAgaWYgKHYgPj0gMCkge1xuICAgICAgICAgICAgZyA9IGg7XG4gICAgICAgICAgICB3ID0gYTtcbiAgICAgICAgICAgIGggPSB1O1xuICAgICAgICAgICAgYSA9IGY7XG4gICAgICAgICAgICB1ID0gYztcbiAgICAgICAgICAgIGYgPSBsO1xuICAgICAgICAgICAgYyA9IGc7XG4gICAgICAgICAgICBsID0gdztcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHAgPSBpKGMsIHUpO1xuICAgICAgICAgICAgaWYgKHAgPiAwKSB7XG4gICAgICAgICAgICAgICAgZyA9IGM7XG4gICAgICAgICAgICAgICAgdyA9IGw7XG4gICAgICAgICAgICAgICAgYyA9IHU7XG4gICAgICAgICAgICAgICAgbCA9IGY7XG4gICAgICAgICAgICAgICAgdSA9IGc7XG4gICAgICAgICAgICAgICAgZiA9IHc7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdFtzXSA9IGg7XG4gICAgICAgIGVbc10gPSBhO1xuICAgICAgICB0W3IgLSAxXSA9IHU7XG4gICAgICAgIGVbciAtIDFdID0gZjtcbiAgICAgICAgYiA9IGM7XG4gICAgICAgIEUgPSBsO1xuICAgICAgICBBID0gcyArIDE7XG4gICAgICAgIHkgPSByIC0gMTtcbiAgICAgICAgdFtuXSA9IHRbQV07XG4gICAgICAgIGVbbl0gPSBlW0FdO1xuICAgICAgICB0W0FdID0gYjtcbiAgICAgICAgZVtBXSA9IEU7XG4gICAgICAgIHQ6IGZvciAobyA9IEEgKyAxOyBvIDwgeTsgbysrKSB7XG4gICAgICAgICAgICBtID0gdFtvXTtcbiAgICAgICAgICAgIFUgPSBlW29dO1xuICAgICAgICAgICAgeCA9IGkobSwgYik7XG4gICAgICAgICAgICBpZiAoeCA8IDApIHtcbiAgICAgICAgICAgICAgICB0W29dID0gdFtBXTtcbiAgICAgICAgICAgICAgICBlW29dID0gZVtBXTtcbiAgICAgICAgICAgICAgICB0W0FdID0gbTtcbiAgICAgICAgICAgICAgICBlW0FdID0gVTtcbiAgICAgICAgICAgICAgICBBKys7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHggPiAwKSB7XG4gICAgICAgICAgICAgICAgZG8ge1xuICAgICAgICAgICAgICAgICAgICB5LS07XG4gICAgICAgICAgICAgICAgICAgIGlmICh5ID09IG8pIGJyZWFrIHQ7XG4gICAgICAgICAgICAgICAgICAgIFMgPSB0W3ldO1xuICAgICAgICAgICAgICAgICAgICB4ID0gaShTLCBiKTtcbiAgICAgICAgICAgICAgICB9IHdoaWxlICh4ID4gMCk7XG4gICAgICAgICAgICAgICAgdFtvXSA9IHRbeV07XG4gICAgICAgICAgICAgICAgZVtvXSA9IGVbeV07XG4gICAgICAgICAgICAgICAgdFt5XSA9IG07XG4gICAgICAgICAgICAgICAgZVt5XSA9IFU7XG4gICAgICAgICAgICAgICAgaWYgKHggPCAwKSB7XG4gICAgICAgICAgICAgICAgICAgIG0gPSB0W29dO1xuICAgICAgICAgICAgICAgICAgICBVID0gZVtvXTtcbiAgICAgICAgICAgICAgICAgICAgdFtvXSA9IHRbQV07XG4gICAgICAgICAgICAgICAgICAgIGVbb10gPSBlW0FdO1xuICAgICAgICAgICAgICAgICAgICB0W0FdID0gbTtcbiAgICAgICAgICAgICAgICAgICAgZVtBXSA9IFU7XG4gICAgICAgICAgICAgICAgICAgIEErKztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHIgLSB5IDwgQSAtIHMpIHtcbiAgICAgICAgICAgIEF0KHQsIGUsIHksIHIsIGkpO1xuICAgICAgICAgICAgciA9IEE7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBBdCh0LCBlLCBzLCBBLCBpKTtcbiAgICAgICAgICAgIHMgPSB5O1xuICAgICAgICB9XG4gICAgfVxufVxuXG5jb25zdCB5dCA9IEFycmF5LnByb3RvdHlwZTtcblxuY29uc3QgbXQgPSB5dC5wdXNoO1xuXG5jb25zdCBVdCA9IHl0LnVuc2hpZnQ7XG5cbmNvbnN0IHh0ID0geXQucG9wO1xuXG5jb25zdCBTdCA9IHl0LnNoaWZ0O1xuXG5jb25zdCBPdCA9IHl0LnNwbGljZTtcblxuY29uc3QgQ3QgPSB5dC5yZXZlcnNlO1xuXG5jb25zdCBrdCA9IHl0LnNvcnQ7XG5cbmNvbnN0IEJ0ID0ge1xuICAgIHB1c2g6IG10LFxuICAgIHVuc2hpZnQ6IFV0LFxuICAgIHBvcDogeHQsXG4gICAgc2hpZnQ6IFN0LFxuICAgIHNwbGljZTogT3QsXG4gICAgcmV2ZXJzZTogQ3QsXG4gICAgc29ydDoga3Rcbn07XG5cbmNvbnN0ICR0ID0gWyBcInB1c2hcIiwgXCJ1bnNoaWZ0XCIsIFwicG9wXCIsIFwic2hpZnRcIiwgXCJzcGxpY2VcIiwgXCJyZXZlcnNlXCIsIFwic29ydFwiIF07XG5cbmNvbnN0IEx0ID0ge1xuICAgIHB1c2g6IGZ1bmN0aW9uKC4uLnQpIHtcbiAgICAgICAgY29uc3QgZSA9IGd0LmdldCh0aGlzKTtcbiAgICAgICAgaWYgKHZvaWQgMCA9PT0gZSkgcmV0dXJuIG10LmFwcGx5KHRoaXMsIHQpO1xuICAgICAgICBjb25zdCBzID0gdGhpcy5sZW5ndGg7XG4gICAgICAgIGNvbnN0IHIgPSB0Lmxlbmd0aDtcbiAgICAgICAgaWYgKDAgPT09IHIpIHJldHVybiBzO1xuICAgICAgICB0aGlzLmxlbmd0aCA9IGUuaW5kZXhNYXAubGVuZ3RoID0gcyArIHI7XG4gICAgICAgIGxldCBpID0gcztcbiAgICAgICAgd2hpbGUgKGkgPCB0aGlzLmxlbmd0aCkge1xuICAgICAgICAgICAgdGhpc1tpXSA9IHRbaSAtIHNdO1xuICAgICAgICAgICAgZS5pbmRleE1hcFtpXSA9IC0yO1xuICAgICAgICAgICAgaSsrO1xuICAgICAgICB9XG4gICAgICAgIGUubm90aWZ5KCk7XG4gICAgICAgIHJldHVybiB0aGlzLmxlbmd0aDtcbiAgICB9LFxuICAgIHVuc2hpZnQ6IGZ1bmN0aW9uKC4uLnQpIHtcbiAgICAgICAgY29uc3QgZSA9IGd0LmdldCh0aGlzKTtcbiAgICAgICAgaWYgKHZvaWQgMCA9PT0gZSkgcmV0dXJuIFV0LmFwcGx5KHRoaXMsIHQpO1xuICAgICAgICBjb25zdCBzID0gdC5sZW5ndGg7XG4gICAgICAgIGNvbnN0IHIgPSBuZXcgQXJyYXkocyk7XG4gICAgICAgIGxldCBpID0gMDtcbiAgICAgICAgd2hpbGUgKGkgPCBzKSByW2krK10gPSAtMjtcbiAgICAgICAgVXQuYXBwbHkoZS5pbmRleE1hcCwgcik7XG4gICAgICAgIGNvbnN0IG4gPSBVdC5hcHBseSh0aGlzLCB0KTtcbiAgICAgICAgZS5ub3RpZnkoKTtcbiAgICAgICAgcmV0dXJuIG47XG4gICAgfSxcbiAgICBwb3A6IGZ1bmN0aW9uKCkge1xuICAgICAgICBjb25zdCB0ID0gZ3QuZ2V0KHRoaXMpO1xuICAgICAgICBpZiAodm9pZCAwID09PSB0KSByZXR1cm4geHQuY2FsbCh0aGlzKTtcbiAgICAgICAgY29uc3QgZSA9IHQuaW5kZXhNYXA7XG4gICAgICAgIGNvbnN0IHMgPSB4dC5jYWxsKHRoaXMpO1xuICAgICAgICBjb25zdCByID0gZS5sZW5ndGggLSAxO1xuICAgICAgICBpZiAoZVtyXSA+IC0xKSBlLmRlbGV0ZWRJdGVtcy5wdXNoKGVbcl0pO1xuICAgICAgICB4dC5jYWxsKGUpO1xuICAgICAgICB0Lm5vdGlmeSgpO1xuICAgICAgICByZXR1cm4gcztcbiAgICB9LFxuICAgIHNoaWZ0OiBmdW5jdGlvbigpIHtcbiAgICAgICAgY29uc3QgdCA9IGd0LmdldCh0aGlzKTtcbiAgICAgICAgaWYgKHZvaWQgMCA9PT0gdCkgcmV0dXJuIFN0LmNhbGwodGhpcyk7XG4gICAgICAgIGNvbnN0IGUgPSB0LmluZGV4TWFwO1xuICAgICAgICBjb25zdCBzID0gU3QuY2FsbCh0aGlzKTtcbiAgICAgICAgaWYgKGVbMF0gPiAtMSkgZS5kZWxldGVkSXRlbXMucHVzaChlWzBdKTtcbiAgICAgICAgU3QuY2FsbChlKTtcbiAgICAgICAgdC5ub3RpZnkoKTtcbiAgICAgICAgcmV0dXJuIHM7XG4gICAgfSxcbiAgICBzcGxpY2U6IGZ1bmN0aW9uKC4uLnQpIHtcbiAgICAgICAgY29uc3QgZSA9IHRbMF07XG4gICAgICAgIGNvbnN0IHMgPSB0WzFdO1xuICAgICAgICBjb25zdCByID0gZ3QuZ2V0KHRoaXMpO1xuICAgICAgICBpZiAodm9pZCAwID09PSByKSByZXR1cm4gT3QuYXBwbHkodGhpcywgdCk7XG4gICAgICAgIGNvbnN0IGkgPSB0aGlzLmxlbmd0aDtcbiAgICAgICAgY29uc3QgbiA9IDAgfCBlO1xuICAgICAgICBjb25zdCBvID0gbiA8IDAgPyBNYXRoLm1heChpICsgbiwgMCkgOiBNYXRoLm1pbihuLCBpKTtcbiAgICAgICAgY29uc3QgaCA9IHIuaW5kZXhNYXA7XG4gICAgICAgIGNvbnN0IGMgPSB0Lmxlbmd0aDtcbiAgICAgICAgY29uc3QgdSA9IDAgPT09IGMgPyAwIDogMSA9PT0gYyA/IGkgLSBvIDogcztcbiAgICAgICAgaWYgKHUgPiAwKSB7XG4gICAgICAgICAgICBsZXQgdCA9IG87XG4gICAgICAgICAgICBjb25zdCBlID0gdCArIHU7XG4gICAgICAgICAgICB3aGlsZSAodCA8IGUpIHtcbiAgICAgICAgICAgICAgICBpZiAoaFt0XSA+IC0xKSBoLmRlbGV0ZWRJdGVtcy5wdXNoKGhbdF0pO1xuICAgICAgICAgICAgICAgIHQrKztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoYyA+IDIpIHtcbiAgICAgICAgICAgIGNvbnN0IHQgPSBjIC0gMjtcbiAgICAgICAgICAgIGNvbnN0IHIgPSBuZXcgQXJyYXkodCk7XG4gICAgICAgICAgICBsZXQgaSA9IDA7XG4gICAgICAgICAgICB3aGlsZSAoaSA8IHQpIHJbaSsrXSA9IC0yO1xuICAgICAgICAgICAgT3QuY2FsbChoLCBlLCBzLCAuLi5yKTtcbiAgICAgICAgfSBlbHNlIE90LmFwcGx5KGgsIHQpO1xuICAgICAgICBjb25zdCBhID0gT3QuYXBwbHkodGhpcywgdCk7XG4gICAgICAgIHIubm90aWZ5KCk7XG4gICAgICAgIHJldHVybiBhO1xuICAgIH0sXG4gICAgcmV2ZXJzZTogZnVuY3Rpb24oKSB7XG4gICAgICAgIGNvbnN0IHQgPSBndC5nZXQodGhpcyk7XG4gICAgICAgIGlmICh2b2lkIDAgPT09IHQpIHtcbiAgICAgICAgICAgIEN0LmNhbGwodGhpcyk7XG4gICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBlID0gdGhpcy5sZW5ndGg7XG4gICAgICAgIGNvbnN0IHMgPSBlIC8gMiB8IDA7XG4gICAgICAgIGxldCByID0gMDtcbiAgICAgICAgd2hpbGUgKHIgIT09IHMpIHtcbiAgICAgICAgICAgIGNvbnN0IHMgPSBlIC0gciAtIDE7XG4gICAgICAgICAgICBjb25zdCBpID0gdGhpc1tyXTtcbiAgICAgICAgICAgIGNvbnN0IG4gPSB0LmluZGV4TWFwW3JdO1xuICAgICAgICAgICAgY29uc3QgbyA9IHRoaXNbc107XG4gICAgICAgICAgICBjb25zdCBoID0gdC5pbmRleE1hcFtzXTtcbiAgICAgICAgICAgIHRoaXNbcl0gPSBvO1xuICAgICAgICAgICAgdC5pbmRleE1hcFtyXSA9IGg7XG4gICAgICAgICAgICB0aGlzW3NdID0gaTtcbiAgICAgICAgICAgIHQuaW5kZXhNYXBbc10gPSBuO1xuICAgICAgICAgICAgcisrO1xuICAgICAgICB9XG4gICAgICAgIHQubm90aWZ5KCk7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH0sXG4gICAgc29ydDogZnVuY3Rpb24odCkge1xuICAgICAgICBjb25zdCBlID0gZ3QuZ2V0KHRoaXMpO1xuICAgICAgICBpZiAodm9pZCAwID09PSBlKSB7XG4gICAgICAgICAgICBrdC5jYWxsKHRoaXMsIHQpO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcyA9IHRoaXMubGVuZ3RoO1xuICAgICAgICBpZiAocyA8IDIpIHJldHVybiB0aGlzO1xuICAgICAgICBBdCh0aGlzLCBlLmluZGV4TWFwLCAwLCBzLCBidCk7XG4gICAgICAgIGxldCByID0gMDtcbiAgICAgICAgd2hpbGUgKHIgPCBzKSB7XG4gICAgICAgICAgICBpZiAodm9pZCAwID09PSB0aGlzW3JdKSBicmVhaztcbiAgICAgICAgICAgIHIrKztcbiAgICAgICAgfVxuICAgICAgICBpZiAodm9pZCAwID09PSB0IHx8ICFwKHQpKSB0ID0gd3Q7XG4gICAgICAgIEF0KHRoaXMsIGUuaW5kZXhNYXAsIDAsIHIsIHQpO1xuICAgICAgICBlLm5vdGlmeSgpO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG59O1xuXG5mb3IgKGNvbnN0IHQgb2YgJHQpIHYoTHRbdF0sIFwib2JzZXJ2aW5nXCIsIHtcbiAgICB2YWx1ZTogdHJ1ZSxcbiAgICB3cml0YWJsZTogZmFsc2UsXG4gICAgY29uZmlndXJhYmxlOiBmYWxzZSxcbiAgICBlbnVtZXJhYmxlOiBmYWxzZVxufSk7XG5cbmxldCBSdCA9IGZhbHNlO1xuXG5mdW5jdGlvbiBQdCgpIHtcbiAgICBmb3IgKGNvbnN0IHQgb2YgJHQpIGlmICh0cnVlICE9PSB5dFt0XS5vYnNlcnZpbmcpIHcoeXQsIHQsIEx0W3RdKTtcbn1cblxuZnVuY3Rpb24gVHQoKSB7XG4gICAgZm9yIChjb25zdCB0IG9mICR0KSBpZiAodHJ1ZSA9PT0geXRbdF0ub2JzZXJ2aW5nKSB3KHl0LCB0LCBCdFt0XSk7XG59XG5cbmNsYXNzIEFycmF5T2JzZXJ2ZXIge1xuICAgIGNvbnN0cnVjdG9yKHQpIHtcbiAgICAgICAgdGhpcy50eXBlID0gMTg7XG4gICAgICAgIGlmICghUnQpIHtcbiAgICAgICAgICAgIFJ0ID0gdHJ1ZTtcbiAgICAgICAgICAgIFB0KCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5pbmRleE9ic2VydmVycyA9IHt9O1xuICAgICAgICB0aGlzLmNvbGxlY3Rpb24gPSB0O1xuICAgICAgICB0aGlzLmluZGV4TWFwID0gdHQodC5sZW5ndGgpO1xuICAgICAgICB0aGlzLmxlbk9icyA9IHZvaWQgMDtcbiAgICAgICAgZ3Quc2V0KHQsIHRoaXMpO1xuICAgIH1cbiAgICBub3RpZnkoKSB7XG4gICAgICAgIGNvbnN0IHQgPSB0aGlzLmluZGV4TWFwO1xuICAgICAgICBjb25zdCBlID0gdGhpcy5jb2xsZWN0aW9uLmxlbmd0aDtcbiAgICAgICAgdGhpcy5pbmRleE1hcCA9IHR0KGUpO1xuICAgICAgICB0aGlzLnN1YnMubm90aWZ5Q29sbGVjdGlvbih0LCAwKTtcbiAgICB9XG4gICAgZ2V0TGVuZ3RoT2JzZXJ2ZXIoKSB7XG4gICAgICAgIHZhciB0O1xuICAgICAgICByZXR1cm4gbnVsbCAhPT0gKHQgPSB0aGlzLmxlbk9icykgJiYgdm9pZCAwICE9PSB0ID8gdCA6IHRoaXMubGVuT2JzID0gbmV3IENvbGxlY3Rpb25MZW5ndGhPYnNlcnZlcih0aGlzKTtcbiAgICB9XG4gICAgZ2V0SW5kZXhPYnNlcnZlcih0KSB7XG4gICAgICAgIHZhciBlO1xuICAgICAgICB2YXIgcztcbiAgICAgICAgcmV0dXJuIG51bGwgIT09IChlID0gKHMgPSB0aGlzLmluZGV4T2JzZXJ2ZXJzKVt0XSkgJiYgdm9pZCAwICE9PSBlID8gZSA6IHNbdF0gPSBuZXcgQXJyYXlJbmRleE9ic2VydmVyKHRoaXMsIHQpO1xuICAgIH1cbn1cblxuY2xhc3MgQXJyYXlJbmRleE9ic2VydmVyIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlKSB7XG4gICAgICAgIHRoaXMub3duZXIgPSB0O1xuICAgICAgICB0aGlzLmluZGV4ID0gZTtcbiAgICAgICAgdGhpcy5kb05vdENhY2hlID0gdHJ1ZTtcbiAgICAgICAgdGhpcy52YWx1ZSA9IHRoaXMuZ2V0VmFsdWUoKTtcbiAgICB9XG4gICAgZ2V0VmFsdWUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm93bmVyLmNvbGxlY3Rpb25bdGhpcy5pbmRleF07XG4gICAgfVxuICAgIHNldFZhbHVlKHQsIGUpIHtcbiAgICAgICAgaWYgKHQgPT09IHRoaXMuZ2V0VmFsdWUoKSkgcmV0dXJuO1xuICAgICAgICBjb25zdCBzID0gdGhpcy5vd25lcjtcbiAgICAgICAgY29uc3QgciA9IHRoaXMuaW5kZXg7XG4gICAgICAgIGNvbnN0IGkgPSBzLmluZGV4TWFwO1xuICAgICAgICBpZiAoaVtyXSA+IC0xKSBpLmRlbGV0ZWRJdGVtcy5wdXNoKGlbcl0pO1xuICAgICAgICBpW3JdID0gLTI7XG4gICAgICAgIHMuY29sbGVjdGlvbltyXSA9IHQ7XG4gICAgICAgIHMubm90aWZ5KCk7XG4gICAgfVxuICAgIGhhbmRsZUNvbGxlY3Rpb25DaGFuZ2UodCwgZSkge1xuICAgICAgICBjb25zdCBzID0gdGhpcy5pbmRleDtcbiAgICAgICAgY29uc3QgciA9IHRbc10gPT09IHM7XG4gICAgICAgIGlmIChyKSByZXR1cm47XG4gICAgICAgIGNvbnN0IGkgPSB0aGlzLnZhbHVlO1xuICAgICAgICBjb25zdCBuID0gdGhpcy52YWx1ZSA9IHRoaXMuZ2V0VmFsdWUoKTtcbiAgICAgICAgaWYgKGkgIT09IG4pIHRoaXMuc3Vicy5ub3RpZnkobiwgaSwgZSk7XG4gICAgfVxuICAgIHN1YnNjcmliZSh0KSB7XG4gICAgICAgIGlmICh0aGlzLnN1YnMuYWRkKHQpICYmIDEgPT09IHRoaXMuc3Vicy5jb3VudCkgdGhpcy5vd25lci5zdWJzY3JpYmUodGhpcyk7XG4gICAgfVxuICAgIHVuc3Vic2NyaWJlKHQpIHtcbiAgICAgICAgaWYgKHRoaXMuc3Vicy5yZW1vdmUodCkgJiYgMCA9PT0gdGhpcy5zdWJzLmNvdW50KSB0aGlzLm93bmVyLnVuc3Vic2NyaWJlKHRoaXMpO1xuICAgIH1cbn1cblxucnQoQXJyYXlPYnNlcnZlcik7XG5cbnJ0KEFycmF5SW5kZXhPYnNlcnZlcik7XG5cbmZ1bmN0aW9uIGp0KHQpIHtcbiAgICBsZXQgZSA9IGd0LmdldCh0KTtcbiAgICBpZiAodm9pZCAwID09PSBlKSBlID0gbmV3IEFycmF5T2JzZXJ2ZXIodCk7XG4gICAgcmV0dXJuIGU7XG59XG5cbmZ1bmN0aW9uIEl0KHQpIHtcbiAgICBsZXQgZSA9IDA7XG4gICAgbGV0IHMgPSAwO1xuICAgIGNvbnN0IHIgPSB0Lmxlbmd0aDtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHI7ICsraSkge1xuICAgICAgICB3aGlsZSAodC5kZWxldGVkSXRlbXNbc10gPD0gaSAtIGUpIHtcbiAgICAgICAgICAgICsrcztcbiAgICAgICAgICAgIC0tZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoLTIgPT09IHRbaV0pICsrZTsgZWxzZSB0W2ldICs9IGU7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBNdCh0LCBlKSB7XG4gICAgY29uc3QgcyA9IHQuc2xpY2UoKTtcbiAgICBjb25zdCByID0gZS5sZW5ndGg7XG4gICAgbGV0IGkgPSAwO1xuICAgIGxldCBuID0gMDtcbiAgICB3aGlsZSAoaSA8IHIpIHtcbiAgICAgICAgbiA9IGVbaV07XG4gICAgICAgIGlmICgtMiAhPT0gbikgdFtpXSA9IHNbbl07XG4gICAgICAgICsraTtcbiAgICB9XG59XG5cbmNvbnN0IER0ID0gbmV3IFdlYWtNYXA7XG5cbmNvbnN0IEZ0ID0gU2V0LnByb3RvdHlwZTtcblxuY29uc3QgVnQgPSBGdC5hZGQ7XG5cbmNvbnN0IE50ID0gRnQuY2xlYXI7XG5cbmNvbnN0IEt0ID0gRnQuZGVsZXRlO1xuXG5jb25zdCBxdCA9IHtcbiAgICBhZGQ6IFZ0LFxuICAgIGNsZWFyOiBOdCxcbiAgICBkZWxldGU6IEt0XG59O1xuXG5jb25zdCBIdCA9IFsgXCJhZGRcIiwgXCJjbGVhclwiLCBcImRlbGV0ZVwiIF07XG5cbmNvbnN0IFF0ID0ge1xuICAgIGFkZDogZnVuY3Rpb24odCkge1xuICAgICAgICBjb25zdCBlID0gRHQuZ2V0KHRoaXMpO1xuICAgICAgICBpZiAodm9pZCAwID09PSBlKSB7XG4gICAgICAgICAgICBWdC5jYWxsKHRoaXMsIHQpO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcyA9IHRoaXMuc2l6ZTtcbiAgICAgICAgVnQuY2FsbCh0aGlzLCB0KTtcbiAgICAgICAgY29uc3QgciA9IHRoaXMuc2l6ZTtcbiAgICAgICAgaWYgKHIgPT09IHMpIHJldHVybiB0aGlzO1xuICAgICAgICBlLmluZGV4TWFwW3NdID0gLTI7XG4gICAgICAgIGUubm90aWZ5KCk7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH0sXG4gICAgY2xlYXI6IGZ1bmN0aW9uKCkge1xuICAgICAgICBjb25zdCB0ID0gRHQuZ2V0KHRoaXMpO1xuICAgICAgICBpZiAodm9pZCAwID09PSB0KSByZXR1cm4gTnQuY2FsbCh0aGlzKTtcbiAgICAgICAgY29uc3QgZSA9IHRoaXMuc2l6ZTtcbiAgICAgICAgaWYgKGUgPiAwKSB7XG4gICAgICAgICAgICBjb25zdCBlID0gdC5pbmRleE1hcDtcbiAgICAgICAgICAgIGxldCBzID0gMDtcbiAgICAgICAgICAgIGZvciAoY29uc3QgdCBvZiB0aGlzLmtleXMoKSkge1xuICAgICAgICAgICAgICAgIGlmIChlW3NdID4gLTEpIGUuZGVsZXRlZEl0ZW1zLnB1c2goZVtzXSk7XG4gICAgICAgICAgICAgICAgcysrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgTnQuY2FsbCh0aGlzKTtcbiAgICAgICAgICAgIGUubGVuZ3RoID0gMDtcbiAgICAgICAgICAgIHQubm90aWZ5KCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuO1xuICAgIH0sXG4gICAgZGVsZXRlOiBmdW5jdGlvbih0KSB7XG4gICAgICAgIGNvbnN0IGUgPSBEdC5nZXQodGhpcyk7XG4gICAgICAgIGlmICh2b2lkIDAgPT09IGUpIHJldHVybiBLdC5jYWxsKHRoaXMsIHQpO1xuICAgICAgICBjb25zdCBzID0gdGhpcy5zaXplO1xuICAgICAgICBpZiAoMCA9PT0gcykgcmV0dXJuIGZhbHNlO1xuICAgICAgICBsZXQgciA9IDA7XG4gICAgICAgIGNvbnN0IGkgPSBlLmluZGV4TWFwO1xuICAgICAgICBmb3IgKGNvbnN0IHMgb2YgdGhpcy5rZXlzKCkpIHtcbiAgICAgICAgICAgIGlmIChzID09PSB0KSB7XG4gICAgICAgICAgICAgICAgaWYgKGlbcl0gPiAtMSkgaS5kZWxldGVkSXRlbXMucHVzaChpW3JdKTtcbiAgICAgICAgICAgICAgICBpLnNwbGljZShyLCAxKTtcbiAgICAgICAgICAgICAgICBjb25zdCBzID0gS3QuY2FsbCh0aGlzLCB0KTtcbiAgICAgICAgICAgICAgICBpZiAodHJ1ZSA9PT0gcykgZS5ub3RpZnkoKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gcztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHIrKztcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxufTtcblxuY29uc3QgX3QgPSB7XG4gICAgd3JpdGFibGU6IHRydWUsXG4gICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgY29uZmlndXJhYmxlOiB0cnVlXG59O1xuXG5mb3IgKGNvbnN0IHQgb2YgSHQpIHYoUXRbdF0sIFwib2JzZXJ2aW5nXCIsIHtcbiAgICB2YWx1ZTogdHJ1ZSxcbiAgICB3cml0YWJsZTogZmFsc2UsXG4gICAgY29uZmlndXJhYmxlOiBmYWxzZSxcbiAgICBlbnVtZXJhYmxlOiBmYWxzZVxufSk7XG5cbmxldCB6dCA9IGZhbHNlO1xuXG5mdW5jdGlvbiBXdCgpIHtcbiAgICBmb3IgKGNvbnN0IHQgb2YgSHQpIGlmICh0cnVlICE9PSBGdFt0XS5vYnNlcnZpbmcpIHYoRnQsIHQsIHtcbiAgICAgICAgLi4uX3QsXG4gICAgICAgIHZhbHVlOiBRdFt0XVxuICAgIH0pO1xufVxuXG5mdW5jdGlvbiBHdCgpIHtcbiAgICBmb3IgKGNvbnN0IHQgb2YgSHQpIGlmICh0cnVlID09PSBGdFt0XS5vYnNlcnZpbmcpIHYoRnQsIHQsIHtcbiAgICAgICAgLi4uX3QsXG4gICAgICAgIHZhbHVlOiBxdFt0XVxuICAgIH0pO1xufVxuXG5jbGFzcyBTZXRPYnNlcnZlciB7XG4gICAgY29uc3RydWN0b3IodCkge1xuICAgICAgICB0aGlzLnR5cGUgPSAzNDtcbiAgICAgICAgaWYgKCF6dCkge1xuICAgICAgICAgICAgenQgPSB0cnVlO1xuICAgICAgICAgICAgV3QoKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmNvbGxlY3Rpb24gPSB0O1xuICAgICAgICB0aGlzLmluZGV4TWFwID0gdHQodC5zaXplKTtcbiAgICAgICAgdGhpcy5sZW5PYnMgPSB2b2lkIDA7XG4gICAgICAgIER0LnNldCh0LCB0aGlzKTtcbiAgICB9XG4gICAgbm90aWZ5KCkge1xuICAgICAgICBjb25zdCB0ID0gdGhpcy5pbmRleE1hcDtcbiAgICAgICAgY29uc3QgZSA9IHRoaXMuY29sbGVjdGlvbi5zaXplO1xuICAgICAgICB0aGlzLmluZGV4TWFwID0gdHQoZSk7XG4gICAgICAgIHRoaXMuc3Vicy5ub3RpZnlDb2xsZWN0aW9uKHQsIDApO1xuICAgIH1cbiAgICBnZXRMZW5ndGhPYnNlcnZlcigpIHtcbiAgICAgICAgdmFyIHQ7XG4gICAgICAgIHJldHVybiBudWxsICE9PSAodCA9IHRoaXMubGVuT2JzKSAmJiB2b2lkIDAgIT09IHQgPyB0IDogdGhpcy5sZW5PYnMgPSBuZXcgQ29sbGVjdGlvblNpemVPYnNlcnZlcih0aGlzKTtcbiAgICB9XG59XG5cbnJ0KFNldE9ic2VydmVyKTtcblxuZnVuY3Rpb24gWnQodCkge1xuICAgIGxldCBlID0gRHQuZ2V0KHQpO1xuICAgIGlmICh2b2lkIDAgPT09IGUpIGUgPSBuZXcgU2V0T2JzZXJ2ZXIodCk7XG4gICAgcmV0dXJuIGU7XG59XG5cbmNvbnN0IEp0ID0gbmV3IFdlYWtNYXA7XG5cbmNvbnN0IFh0ID0gTWFwLnByb3RvdHlwZTtcblxuY29uc3QgWXQgPSBYdC5zZXQ7XG5cbmNvbnN0IHRlID0gWHQuY2xlYXI7XG5cbmNvbnN0IGVlID0gWHQuZGVsZXRlO1xuXG5jb25zdCBzZSA9IHtcbiAgICBzZXQ6IFl0LFxuICAgIGNsZWFyOiB0ZSxcbiAgICBkZWxldGU6IGVlXG59O1xuXG5jb25zdCByZSA9IFsgXCJzZXRcIiwgXCJjbGVhclwiLCBcImRlbGV0ZVwiIF07XG5cbmNvbnN0IGllID0ge1xuICAgIHNldDogZnVuY3Rpb24odCwgZSkge1xuICAgICAgICBjb25zdCBzID0gSnQuZ2V0KHRoaXMpO1xuICAgICAgICBpZiAodm9pZCAwID09PSBzKSB7XG4gICAgICAgICAgICBZdC5jYWxsKHRoaXMsIHQsIGUpO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgciA9IHRoaXMuZ2V0KHQpO1xuICAgICAgICBjb25zdCBpID0gdGhpcy5zaXplO1xuICAgICAgICBZdC5jYWxsKHRoaXMsIHQsIGUpO1xuICAgICAgICBjb25zdCBuID0gdGhpcy5zaXplO1xuICAgICAgICBpZiAobiA9PT0gaSkge1xuICAgICAgICAgICAgbGV0IGUgPSAwO1xuICAgICAgICAgICAgZm9yIChjb25zdCBpIG9mIHRoaXMuZW50cmllcygpKSB7XG4gICAgICAgICAgICAgICAgaWYgKGlbMF0gPT09IHQpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGlbMV0gIT09IHIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHMuaW5kZXhNYXAuZGVsZXRlZEl0ZW1zLnB1c2gocy5pbmRleE1hcFtlXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBzLmluZGV4TWFwW2VdID0gLTI7XG4gICAgICAgICAgICAgICAgICAgICAgICBzLm5vdGlmeSgpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlKys7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgfVxuICAgICAgICBzLmluZGV4TWFwW2ldID0gLTI7XG4gICAgICAgIHMubm90aWZ5KCk7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH0sXG4gICAgY2xlYXI6IGZ1bmN0aW9uKCkge1xuICAgICAgICBjb25zdCB0ID0gSnQuZ2V0KHRoaXMpO1xuICAgICAgICBpZiAodm9pZCAwID09PSB0KSByZXR1cm4gdGUuY2FsbCh0aGlzKTtcbiAgICAgICAgY29uc3QgZSA9IHRoaXMuc2l6ZTtcbiAgICAgICAgaWYgKGUgPiAwKSB7XG4gICAgICAgICAgICBjb25zdCBlID0gdC5pbmRleE1hcDtcbiAgICAgICAgICAgIGxldCBzID0gMDtcbiAgICAgICAgICAgIGZvciAoY29uc3QgdCBvZiB0aGlzLmtleXMoKSkge1xuICAgICAgICAgICAgICAgIGlmIChlW3NdID4gLTEpIGUuZGVsZXRlZEl0ZW1zLnB1c2goZVtzXSk7XG4gICAgICAgICAgICAgICAgcysrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGUuY2FsbCh0aGlzKTtcbiAgICAgICAgICAgIGUubGVuZ3RoID0gMDtcbiAgICAgICAgICAgIHQubm90aWZ5KCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuO1xuICAgIH0sXG4gICAgZGVsZXRlOiBmdW5jdGlvbih0KSB7XG4gICAgICAgIGNvbnN0IGUgPSBKdC5nZXQodGhpcyk7XG4gICAgICAgIGlmICh2b2lkIDAgPT09IGUpIHJldHVybiBlZS5jYWxsKHRoaXMsIHQpO1xuICAgICAgICBjb25zdCBzID0gdGhpcy5zaXplO1xuICAgICAgICBpZiAoMCA9PT0gcykgcmV0dXJuIGZhbHNlO1xuICAgICAgICBsZXQgciA9IDA7XG4gICAgICAgIGNvbnN0IGkgPSBlLmluZGV4TWFwO1xuICAgICAgICBmb3IgKGNvbnN0IHMgb2YgdGhpcy5rZXlzKCkpIHtcbiAgICAgICAgICAgIGlmIChzID09PSB0KSB7XG4gICAgICAgICAgICAgICAgaWYgKGlbcl0gPiAtMSkgaS5kZWxldGVkSXRlbXMucHVzaChpW3JdKTtcbiAgICAgICAgICAgICAgICBpLnNwbGljZShyLCAxKTtcbiAgICAgICAgICAgICAgICBjb25zdCBzID0gZWUuY2FsbCh0aGlzLCB0KTtcbiAgICAgICAgICAgICAgICBpZiAodHJ1ZSA9PT0gcykgZS5ub3RpZnkoKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gcztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgICsrcjtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxufTtcblxuY29uc3QgbmUgPSB7XG4gICAgd3JpdGFibGU6IHRydWUsXG4gICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgY29uZmlndXJhYmxlOiB0cnVlXG59O1xuXG5mb3IgKGNvbnN0IHQgb2YgcmUpIHYoaWVbdF0sIFwib2JzZXJ2aW5nXCIsIHtcbiAgICB2YWx1ZTogdHJ1ZSxcbiAgICB3cml0YWJsZTogZmFsc2UsXG4gICAgY29uZmlndXJhYmxlOiBmYWxzZSxcbiAgICBlbnVtZXJhYmxlOiBmYWxzZVxufSk7XG5cbmxldCBvZSA9IGZhbHNlO1xuXG5mdW5jdGlvbiBoZSgpIHtcbiAgICBmb3IgKGNvbnN0IHQgb2YgcmUpIGlmICh0cnVlICE9PSBYdFt0XS5vYnNlcnZpbmcpIHYoWHQsIHQsIHtcbiAgICAgICAgLi4ubmUsXG4gICAgICAgIHZhbHVlOiBpZVt0XVxuICAgIH0pO1xufVxuXG5mdW5jdGlvbiBjZSgpIHtcbiAgICBmb3IgKGNvbnN0IHQgb2YgcmUpIGlmICh0cnVlID09PSBYdFt0XS5vYnNlcnZpbmcpIHYoWHQsIHQsIHtcbiAgICAgICAgLi4ubmUsXG4gICAgICAgIHZhbHVlOiBzZVt0XVxuICAgIH0pO1xufVxuXG5jbGFzcyBNYXBPYnNlcnZlciB7XG4gICAgY29uc3RydWN0b3IodCkge1xuICAgICAgICB0aGlzLnR5cGUgPSA2NjtcbiAgICAgICAgaWYgKCFvZSkge1xuICAgICAgICAgICAgb2UgPSB0cnVlO1xuICAgICAgICAgICAgaGUoKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmNvbGxlY3Rpb24gPSB0O1xuICAgICAgICB0aGlzLmluZGV4TWFwID0gdHQodC5zaXplKTtcbiAgICAgICAgdGhpcy5sZW5PYnMgPSB2b2lkIDA7XG4gICAgICAgIEp0LnNldCh0LCB0aGlzKTtcbiAgICB9XG4gICAgbm90aWZ5KCkge1xuICAgICAgICBjb25zdCB0ID0gdGhpcy5pbmRleE1hcDtcbiAgICAgICAgY29uc3QgZSA9IHRoaXMuY29sbGVjdGlvbi5zaXplO1xuICAgICAgICB0aGlzLmluZGV4TWFwID0gdHQoZSk7XG4gICAgICAgIHRoaXMuc3Vicy5ub3RpZnlDb2xsZWN0aW9uKHQsIDApO1xuICAgIH1cbiAgICBnZXRMZW5ndGhPYnNlcnZlcigpIHtcbiAgICAgICAgdmFyIHQ7XG4gICAgICAgIHJldHVybiBudWxsICE9PSAodCA9IHRoaXMubGVuT2JzKSAmJiB2b2lkIDAgIT09IHQgPyB0IDogdGhpcy5sZW5PYnMgPSBuZXcgQ29sbGVjdGlvblNpemVPYnNlcnZlcih0aGlzKTtcbiAgICB9XG59XG5cbnJ0KE1hcE9ic2VydmVyKTtcblxuZnVuY3Rpb24gdWUodCkge1xuICAgIGxldCBlID0gSnQuZ2V0KHQpO1xuICAgIGlmICh2b2lkIDAgPT09IGUpIGUgPSBuZXcgTWFwT2JzZXJ2ZXIodCk7XG4gICAgcmV0dXJuIGU7XG59XG5cbmZ1bmN0aW9uIGFlKHQsIGUpIHtcbiAgICBjb25zdCBzID0gdGhpcy5vTC5nZXRPYnNlcnZlcih0LCBlKTtcbiAgICB0aGlzLm9icy5hZGQocyk7XG59XG5cbmZ1bmN0aW9uIGxlKCkge1xuICAgIHJldHVybiB3KHRoaXMsIFwib2JzXCIsIG5ldyBCaW5kaW5nT2JzZXJ2ZXJSZWNvcmQodGhpcykpO1xufVxuXG5mdW5jdGlvbiBmZSh0KSB7XG4gICAgbGV0IGU7XG4gICAgaWYgKHQgaW5zdGFuY2VvZiBBcnJheSkgZSA9IGp0KHQpOyBlbHNlIGlmICh0IGluc3RhbmNlb2YgU2V0KSBlID0gWnQodCk7IGVsc2UgaWYgKHQgaW5zdGFuY2VvZiBNYXApIGUgPSB1ZSh0KTsgZWxzZSB0aHJvdyBuZXcgRXJyb3IoXCJBVVIwMjEwXCIpO1xuICAgIHRoaXMub2JzLmFkZChlKTtcbn1cblxuZnVuY3Rpb24gZGUodCkge1xuICAgIHRoaXMub2JzLmFkZCh0KTtcbn1cblxuZnVuY3Rpb24gdmUoKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKGBBVVIyMDExOmhhbmRsZUNoYW5nZWApO1xufVxuXG5mdW5jdGlvbiBwZSgpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJBVVIyMDEyOmhhbmRsZUNvbGxlY3Rpb25DaGFuZ2VcIik7XG59XG5cbmNsYXNzIEJpbmRpbmdPYnNlcnZlclJlY29yZCB7XG4gICAgY29uc3RydWN0b3IodCkge1xuICAgICAgICB0aGlzLnZlcnNpb24gPSAwO1xuICAgICAgICB0aGlzLmNvdW50ID0gMDtcbiAgICAgICAgdGhpcy5vID0gbmV3IE1hcDtcbiAgICAgICAgdGhpcy5iID0gdDtcbiAgICB9XG4gICAgaGFuZGxlQ2hhbmdlKHQsIGUsIHMpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuYi5pbnRlcmNlcHRvci5oYW5kbGVDaGFuZ2UodCwgZSwgcyk7XG4gICAgfVxuICAgIGhhbmRsZUNvbGxlY3Rpb25DaGFuZ2UodCwgZSkge1xuICAgICAgICB0aGlzLmIuaW50ZXJjZXB0b3IuaGFuZGxlQ29sbGVjdGlvbkNoYW5nZSh0LCBlKTtcbiAgICB9XG4gICAgYWRkKHQpIHtcbiAgICAgICAgaWYgKCF0aGlzLm8uaGFzKHQpKSB7XG4gICAgICAgICAgICB0LnN1YnNjcmliZSh0aGlzKTtcbiAgICAgICAgICAgICsrdGhpcy5jb3VudDtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLm8uc2V0KHQsIHRoaXMudmVyc2lvbik7XG4gICAgfVxuICAgIGNsZWFyKCkge1xuICAgICAgICB0aGlzLm8uZm9yRWFjaCh3ZSwgdGhpcyk7XG4gICAgICAgIHRoaXMuY291bnQgPSB0aGlzLm8uc2l6ZTtcbiAgICB9XG4gICAgY2xlYXJBbGwoKSB7XG4gICAgICAgIHRoaXMuby5mb3JFYWNoKGdlLCB0aGlzKTtcbiAgICAgICAgdGhpcy5vLmNsZWFyKCk7XG4gICAgICAgIHRoaXMuY291bnQgPSAwO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gZ2UodCwgZSkge1xuICAgIGUudW5zdWJzY3JpYmUodGhpcyk7XG59XG5cbmZ1bmN0aW9uIHdlKHQsIGUpIHtcbiAgICBpZiAodGhpcy52ZXJzaW9uICE9PSB0KSB7XG4gICAgICAgIGUudW5zdWJzY3JpYmUodGhpcyk7XG4gICAgICAgIHRoaXMuby5kZWxldGUoZSk7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBiZSh0KSB7XG4gICAgY29uc3QgZSA9IHQucHJvdG90eXBlO1xuICAgIGIoZSwgXCJvYnNlcnZlXCIsIGFlLCB0cnVlKTtcbiAgICBiKGUsIFwib2JzZXJ2ZUNvbGxlY3Rpb25cIiwgZmUsIHRydWUpO1xuICAgIGIoZSwgXCJzdWJzY3JpYmVUb1wiLCBkZSwgdHJ1ZSk7XG4gICAgdihlLCBcIm9ic1wiLCB7XG4gICAgICAgIGdldDogbGVcbiAgICB9KTtcbiAgICBiKGUsIFwiaGFuZGxlQ2hhbmdlXCIsIHZlKTtcbiAgICBiKGUsIFwiaGFuZGxlQ29sbGVjdGlvbkNoYW5nZVwiLCBwZSk7XG4gICAgcmV0dXJuIHQ7XG59XG5cbmZ1bmN0aW9uIEVlKHQpIHtcbiAgICByZXR1cm4gbnVsbCA9PSB0ID8gYmUgOiBiZSh0KTtcbn1cblxuY2xhc3MgQmluZGluZ01lZGlhdG9yIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlLCBzLCByKSB7XG4gICAgICAgIHRoaXMua2V5ID0gdDtcbiAgICAgICAgdGhpcy5iaW5kaW5nID0gZTtcbiAgICAgICAgdGhpcy5vTCA9IHM7XG4gICAgICAgIHRoaXMubG9jYXRvciA9IHI7XG4gICAgICAgIHRoaXMuaW50ZXJjZXB0b3IgPSB0aGlzO1xuICAgIH1cbiAgICAkYmluZCgpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiQVVSMDIxMzokYmluZFwiKTtcbiAgICB9XG4gICAgJHVuYmluZCgpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiQVVSMDIxNDokdW5iaW5kXCIpO1xuICAgIH1cbiAgICBoYW5kbGVDaGFuZ2UodCwgZSwgcykge1xuICAgICAgICB0aGlzLmJpbmRpbmdbdGhpcy5rZXldKHQsIGUsIHMpO1xuICAgIH1cbn1cblxuYmUoQmluZGluZ01lZGlhdG9yKTtcblxuY29uc3QgQWUgPSByLmNyZWF0ZUludGVyZmFjZShcIklFeHByZXNzaW9uUGFyc2VyXCIsICh0ID0+IHQuc2luZ2xldG9uKEV4cHJlc3Npb25QYXJzZXIpKSk7XG5cbmNsYXNzIEV4cHJlc3Npb25QYXJzZXIge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICB0aGlzLnUgPSBFKCk7XG4gICAgICAgIHRoaXMuQSA9IEUoKTtcbiAgICAgICAgdGhpcy5VID0gRSgpO1xuICAgIH1cbiAgICBwYXJzZSh0LCBlKSB7XG4gICAgICAgIGxldCBzO1xuICAgICAgICBzd2l0Y2ggKGUpIHtcbiAgICAgICAgICBjYXNlIDE2OlxuICAgICAgICAgICAgcmV0dXJuIG5ldyBDdXN0b21FeHByZXNzaW9uKHQpO1xuXG4gICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgcyA9IHRoaXMuVVt0XTtcbiAgICAgICAgICAgIGlmICh2b2lkIDAgPT09IHMpIHMgPSB0aGlzLlVbdF0gPSB0aGlzLiRwYXJzZSh0LCBlKTtcbiAgICAgICAgICAgIHJldHVybiBzO1xuXG4gICAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgcyA9IHRoaXMuQVt0XTtcbiAgICAgICAgICAgIGlmICh2b2lkIDAgPT09IHMpIHMgPSB0aGlzLkFbdF0gPSB0aGlzLiRwYXJzZSh0LCBlKTtcbiAgICAgICAgICAgIHJldHVybiBzO1xuXG4gICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIGlmICgwID09PSB0Lmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIGlmICgoZSAmICg0IHwgOCkpID4gMCkgcmV0dXJuIFByaW1pdGl2ZUxpdGVyYWxFeHByZXNzaW9uLiRlbXB0eTtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJBVVIwMTY5XCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcyA9IHRoaXMudVt0XTtcbiAgICAgICAgICAgIGlmICh2b2lkIDAgPT09IHMpIHMgPSB0aGlzLnVbdF0gPSB0aGlzLiRwYXJzZSh0LCBlKTtcbiAgICAgICAgICAgIHJldHVybiBzO1xuICAgICAgICB9XG4gICAgfVxuICAgICRwYXJzZSh0LCBlKSB7XG4gICAgICAgIFBlLmlwID0gdDtcbiAgICAgICAgUGUubGVuZ3RoID0gdC5sZW5ndGg7XG4gICAgICAgIFBlLmluZGV4ID0gMDtcbiAgICAgICAgUGUuTyA9IHQuY2hhckNvZGVBdCgwKTtcbiAgICAgICAgcmV0dXJuIGplKFBlLCAwLCA2MSwgdm9pZCAwID09PSBlID8gOCA6IGUpO1xuICAgIH1cbn1cblxudmFyIHllO1xuXG4oZnVuY3Rpb24odCkge1xuICAgIHRbdFtcIk51bGxcIl0gPSAwXSA9IFwiTnVsbFwiO1xuICAgIHRbdFtcIkJhY2tzcGFjZVwiXSA9IDhdID0gXCJCYWNrc3BhY2VcIjtcbiAgICB0W3RbXCJUYWJcIl0gPSA5XSA9IFwiVGFiXCI7XG4gICAgdFt0W1wiTGluZUZlZWRcIl0gPSAxMF0gPSBcIkxpbmVGZWVkXCI7XG4gICAgdFt0W1wiVmVydGljYWxUYWJcIl0gPSAxMV0gPSBcIlZlcnRpY2FsVGFiXCI7XG4gICAgdFt0W1wiRm9ybUZlZWRcIl0gPSAxMl0gPSBcIkZvcm1GZWVkXCI7XG4gICAgdFt0W1wiQ2FycmlhZ2VSZXR1cm5cIl0gPSAxM10gPSBcIkNhcnJpYWdlUmV0dXJuXCI7XG4gICAgdFt0W1wiU3BhY2VcIl0gPSAzMl0gPSBcIlNwYWNlXCI7XG4gICAgdFt0W1wiRXhjbGFtYXRpb25cIl0gPSAzM10gPSBcIkV4Y2xhbWF0aW9uXCI7XG4gICAgdFt0W1wiRG91YmxlUXVvdGVcIl0gPSAzNF0gPSBcIkRvdWJsZVF1b3RlXCI7XG4gICAgdFt0W1wiRG9sbGFyXCJdID0gMzZdID0gXCJEb2xsYXJcIjtcbiAgICB0W3RbXCJQZXJjZW50XCJdID0gMzddID0gXCJQZXJjZW50XCI7XG4gICAgdFt0W1wiQW1wZXJzYW5kXCJdID0gMzhdID0gXCJBbXBlcnNhbmRcIjtcbiAgICB0W3RbXCJTaW5nbGVRdW90ZVwiXSA9IDM5XSA9IFwiU2luZ2xlUXVvdGVcIjtcbiAgICB0W3RbXCJPcGVuUGFyZW5cIl0gPSA0MF0gPSBcIk9wZW5QYXJlblwiO1xuICAgIHRbdFtcIkNsb3NlUGFyZW5cIl0gPSA0MV0gPSBcIkNsb3NlUGFyZW5cIjtcbiAgICB0W3RbXCJBc3Rlcmlza1wiXSA9IDQyXSA9IFwiQXN0ZXJpc2tcIjtcbiAgICB0W3RbXCJQbHVzXCJdID0gNDNdID0gXCJQbHVzXCI7XG4gICAgdFt0W1wiQ29tbWFcIl0gPSA0NF0gPSBcIkNvbW1hXCI7XG4gICAgdFt0W1wiTWludXNcIl0gPSA0NV0gPSBcIk1pbnVzXCI7XG4gICAgdFt0W1wiRG90XCJdID0gNDZdID0gXCJEb3RcIjtcbiAgICB0W3RbXCJTbGFzaFwiXSA9IDQ3XSA9IFwiU2xhc2hcIjtcbiAgICB0W3RbXCJTZW1pY29sb25cIl0gPSA1OV0gPSBcIlNlbWljb2xvblwiO1xuICAgIHRbdFtcIkJhY2t0aWNrXCJdID0gOTZdID0gXCJCYWNrdGlja1wiO1xuICAgIHRbdFtcIk9wZW5CcmFja2V0XCJdID0gOTFdID0gXCJPcGVuQnJhY2tldFwiO1xuICAgIHRbdFtcIkJhY2tzbGFzaFwiXSA9IDkyXSA9IFwiQmFja3NsYXNoXCI7XG4gICAgdFt0W1wiQ2xvc2VCcmFja2V0XCJdID0gOTNdID0gXCJDbG9zZUJyYWNrZXRcIjtcbiAgICB0W3RbXCJDYXJldFwiXSA9IDk0XSA9IFwiQ2FyZXRcIjtcbiAgICB0W3RbXCJVbmRlcnNjb3JlXCJdID0gOTVdID0gXCJVbmRlcnNjb3JlXCI7XG4gICAgdFt0W1wiT3BlbkJyYWNlXCJdID0gMTIzXSA9IFwiT3BlbkJyYWNlXCI7XG4gICAgdFt0W1wiQmFyXCJdID0gMTI0XSA9IFwiQmFyXCI7XG4gICAgdFt0W1wiQ2xvc2VCcmFjZVwiXSA9IDEyNV0gPSBcIkNsb3NlQnJhY2VcIjtcbiAgICB0W3RbXCJDb2xvblwiXSA9IDU4XSA9IFwiQ29sb25cIjtcbiAgICB0W3RbXCJMZXNzVGhhblwiXSA9IDYwXSA9IFwiTGVzc1RoYW5cIjtcbiAgICB0W3RbXCJFcXVhbHNcIl0gPSA2MV0gPSBcIkVxdWFsc1wiO1xuICAgIHRbdFtcIkdyZWF0ZXJUaGFuXCJdID0gNjJdID0gXCJHcmVhdGVyVGhhblwiO1xuICAgIHRbdFtcIlF1ZXN0aW9uXCJdID0gNjNdID0gXCJRdWVzdGlvblwiO1xuICAgIHRbdFtcIlplcm9cIl0gPSA0OF0gPSBcIlplcm9cIjtcbiAgICB0W3RbXCJPbmVcIl0gPSA0OV0gPSBcIk9uZVwiO1xuICAgIHRbdFtcIlR3b1wiXSA9IDUwXSA9IFwiVHdvXCI7XG4gICAgdFt0W1wiVGhyZWVcIl0gPSA1MV0gPSBcIlRocmVlXCI7XG4gICAgdFt0W1wiRm91clwiXSA9IDUyXSA9IFwiRm91clwiO1xuICAgIHRbdFtcIkZpdmVcIl0gPSA1M10gPSBcIkZpdmVcIjtcbiAgICB0W3RbXCJTaXhcIl0gPSA1NF0gPSBcIlNpeFwiO1xuICAgIHRbdFtcIlNldmVuXCJdID0gNTVdID0gXCJTZXZlblwiO1xuICAgIHRbdFtcIkVpZ2h0XCJdID0gNTZdID0gXCJFaWdodFwiO1xuICAgIHRbdFtcIk5pbmVcIl0gPSA1N10gPSBcIk5pbmVcIjtcbiAgICB0W3RbXCJVcHBlckFcIl0gPSA2NV0gPSBcIlVwcGVyQVwiO1xuICAgIHRbdFtcIlVwcGVyQlwiXSA9IDY2XSA9IFwiVXBwZXJCXCI7XG4gICAgdFt0W1wiVXBwZXJDXCJdID0gNjddID0gXCJVcHBlckNcIjtcbiAgICB0W3RbXCJVcHBlckRcIl0gPSA2OF0gPSBcIlVwcGVyRFwiO1xuICAgIHRbdFtcIlVwcGVyRVwiXSA9IDY5XSA9IFwiVXBwZXJFXCI7XG4gICAgdFt0W1wiVXBwZXJGXCJdID0gNzBdID0gXCJVcHBlckZcIjtcbiAgICB0W3RbXCJVcHBlckdcIl0gPSA3MV0gPSBcIlVwcGVyR1wiO1xuICAgIHRbdFtcIlVwcGVySFwiXSA9IDcyXSA9IFwiVXBwZXJIXCI7XG4gICAgdFt0W1wiVXBwZXJJXCJdID0gNzNdID0gXCJVcHBlcklcIjtcbiAgICB0W3RbXCJVcHBlckpcIl0gPSA3NF0gPSBcIlVwcGVySlwiO1xuICAgIHRbdFtcIlVwcGVyS1wiXSA9IDc1XSA9IFwiVXBwZXJLXCI7XG4gICAgdFt0W1wiVXBwZXJMXCJdID0gNzZdID0gXCJVcHBlckxcIjtcbiAgICB0W3RbXCJVcHBlck1cIl0gPSA3N10gPSBcIlVwcGVyTVwiO1xuICAgIHRbdFtcIlVwcGVyTlwiXSA9IDc4XSA9IFwiVXBwZXJOXCI7XG4gICAgdFt0W1wiVXBwZXJPXCJdID0gNzldID0gXCJVcHBlck9cIjtcbiAgICB0W3RbXCJVcHBlclBcIl0gPSA4MF0gPSBcIlVwcGVyUFwiO1xuICAgIHRbdFtcIlVwcGVyUVwiXSA9IDgxXSA9IFwiVXBwZXJRXCI7XG4gICAgdFt0W1wiVXBwZXJSXCJdID0gODJdID0gXCJVcHBlclJcIjtcbiAgICB0W3RbXCJVcHBlclNcIl0gPSA4M10gPSBcIlVwcGVyU1wiO1xuICAgIHRbdFtcIlVwcGVyVFwiXSA9IDg0XSA9IFwiVXBwZXJUXCI7XG4gICAgdFt0W1wiVXBwZXJVXCJdID0gODVdID0gXCJVcHBlclVcIjtcbiAgICB0W3RbXCJVcHBlclZcIl0gPSA4Nl0gPSBcIlVwcGVyVlwiO1xuICAgIHRbdFtcIlVwcGVyV1wiXSA9IDg3XSA9IFwiVXBwZXJXXCI7XG4gICAgdFt0W1wiVXBwZXJYXCJdID0gODhdID0gXCJVcHBlclhcIjtcbiAgICB0W3RbXCJVcHBlcllcIl0gPSA4OV0gPSBcIlVwcGVyWVwiO1xuICAgIHRbdFtcIlVwcGVyWlwiXSA9IDkwXSA9IFwiVXBwZXJaXCI7XG4gICAgdFt0W1wiTG93ZXJBXCJdID0gOTddID0gXCJMb3dlckFcIjtcbiAgICB0W3RbXCJMb3dlckJcIl0gPSA5OF0gPSBcIkxvd2VyQlwiO1xuICAgIHRbdFtcIkxvd2VyQ1wiXSA9IDk5XSA9IFwiTG93ZXJDXCI7XG4gICAgdFt0W1wiTG93ZXJEXCJdID0gMTAwXSA9IFwiTG93ZXJEXCI7XG4gICAgdFt0W1wiTG93ZXJFXCJdID0gMTAxXSA9IFwiTG93ZXJFXCI7XG4gICAgdFt0W1wiTG93ZXJGXCJdID0gMTAyXSA9IFwiTG93ZXJGXCI7XG4gICAgdFt0W1wiTG93ZXJHXCJdID0gMTAzXSA9IFwiTG93ZXJHXCI7XG4gICAgdFt0W1wiTG93ZXJIXCJdID0gMTA0XSA9IFwiTG93ZXJIXCI7XG4gICAgdFt0W1wiTG93ZXJJXCJdID0gMTA1XSA9IFwiTG93ZXJJXCI7XG4gICAgdFt0W1wiTG93ZXJKXCJdID0gMTA2XSA9IFwiTG93ZXJKXCI7XG4gICAgdFt0W1wiTG93ZXJLXCJdID0gMTA3XSA9IFwiTG93ZXJLXCI7XG4gICAgdFt0W1wiTG93ZXJMXCJdID0gMTA4XSA9IFwiTG93ZXJMXCI7XG4gICAgdFt0W1wiTG93ZXJNXCJdID0gMTA5XSA9IFwiTG93ZXJNXCI7XG4gICAgdFt0W1wiTG93ZXJOXCJdID0gMTEwXSA9IFwiTG93ZXJOXCI7XG4gICAgdFt0W1wiTG93ZXJPXCJdID0gMTExXSA9IFwiTG93ZXJPXCI7XG4gICAgdFt0W1wiTG93ZXJQXCJdID0gMTEyXSA9IFwiTG93ZXJQXCI7XG4gICAgdFt0W1wiTG93ZXJRXCJdID0gMTEzXSA9IFwiTG93ZXJRXCI7XG4gICAgdFt0W1wiTG93ZXJSXCJdID0gMTE0XSA9IFwiTG93ZXJSXCI7XG4gICAgdFt0W1wiTG93ZXJTXCJdID0gMTE1XSA9IFwiTG93ZXJTXCI7XG4gICAgdFt0W1wiTG93ZXJUXCJdID0gMTE2XSA9IFwiTG93ZXJUXCI7XG4gICAgdFt0W1wiTG93ZXJVXCJdID0gMTE3XSA9IFwiTG93ZXJVXCI7XG4gICAgdFt0W1wiTG93ZXJWXCJdID0gMTE4XSA9IFwiTG93ZXJWXCI7XG4gICAgdFt0W1wiTG93ZXJXXCJdID0gMTE5XSA9IFwiTG93ZXJXXCI7XG4gICAgdFt0W1wiTG93ZXJYXCJdID0gMTIwXSA9IFwiTG93ZXJYXCI7XG4gICAgdFt0W1wiTG93ZXJZXCJdID0gMTIxXSA9IFwiTG93ZXJZXCI7XG4gICAgdFt0W1wiTG93ZXJaXCJdID0gMTIyXSA9IFwiTG93ZXJaXCI7XG59KSh5ZSB8fCAoeWUgPSB7fSkpO1xuXG5mdW5jdGlvbiBtZSh0KSB7XG4gICAgc3dpdGNoICh0KSB7XG4gICAgICBjYXNlIDk4OlxuICAgICAgICByZXR1cm4gODtcblxuICAgICAgY2FzZSAxMTY6XG4gICAgICAgIHJldHVybiA5O1xuXG4gICAgICBjYXNlIDExMDpcbiAgICAgICAgcmV0dXJuIDEwO1xuXG4gICAgICBjYXNlIDExODpcbiAgICAgICAgcmV0dXJuIDExO1xuXG4gICAgICBjYXNlIDEwMjpcbiAgICAgICAgcmV0dXJuIDEyO1xuXG4gICAgICBjYXNlIDExNDpcbiAgICAgICAgcmV0dXJuIDEzO1xuXG4gICAgICBjYXNlIDM0OlxuICAgICAgICByZXR1cm4gMzQ7XG5cbiAgICAgIGNhc2UgMzk6XG4gICAgICAgIHJldHVybiAzOTtcblxuICAgICAgY2FzZSA5MjpcbiAgICAgICAgcmV0dXJuIDkyO1xuXG4gICAgICBkZWZhdWx0OlxuICAgICAgICByZXR1cm4gdDtcbiAgICB9XG59XG5cbnZhciBVZTtcblxuKGZ1bmN0aW9uKHQpIHtcbiAgICB0W3RbXCJSZXNldFwiXSA9IDBdID0gXCJSZXNldFwiO1xuICAgIHRbdFtcIkFuY2VzdG9yXCJdID0gNTExXSA9IFwiQW5jZXN0b3JcIjtcbiAgICB0W3RbXCJUaGlzXCJdID0gNTEyXSA9IFwiVGhpc1wiO1xuICAgIHRbdFtcIlNjb3BlXCJdID0gMTAyNF0gPSBcIlNjb3BlXCI7XG4gICAgdFt0W1wiTWVtYmVyXCJdID0gMjA0OF0gPSBcIk1lbWJlclwiO1xuICAgIHRbdFtcIktleWVkXCJdID0gNDA5Nl0gPSBcIktleWVkXCI7XG59KShVZSB8fCAoVWUgPSB7fSkpO1xuXG52YXIgeGU7XG5cbihmdW5jdGlvbih0KSB7XG4gICAgdFt0W1wiVmFyaWFkaWNcIl0gPSA2MV0gPSBcIlZhcmlhZGljXCI7XG4gICAgdFt0W1wiQXNzaWduXCJdID0gNjJdID0gXCJBc3NpZ25cIjtcbiAgICB0W3RbXCJDb25kaXRpb25hbFwiXSA9IDYzXSA9IFwiQ29uZGl0aW9uYWxcIjtcbiAgICB0W3RbXCJMb2dpY2FsT1JcIl0gPSA2NF0gPSBcIkxvZ2ljYWxPUlwiO1xuICAgIHRbdFtcIkxvZ2ljYWxBTkRcIl0gPSAxMjhdID0gXCJMb2dpY2FsQU5EXCI7XG4gICAgdFt0W1wiRXF1YWxpdHlcIl0gPSAxOTJdID0gXCJFcXVhbGl0eVwiO1xuICAgIHRbdFtcIlJlbGF0aW9uYWxcIl0gPSAyNTZdID0gXCJSZWxhdGlvbmFsXCI7XG4gICAgdFt0W1wiQWRkaXRpdmVcIl0gPSAzMjBdID0gXCJBZGRpdGl2ZVwiO1xuICAgIHRbdFtcIk11bHRpcGxpY2F0aXZlXCJdID0gMzg0XSA9IFwiTXVsdGlwbGljYXRpdmVcIjtcbiAgICB0W3RbXCJCaW5hcnlcIl0gPSA0NDhdID0gXCJCaW5hcnlcIjtcbiAgICB0W3RbXCJMZWZ0SGFuZFNpZGVcIl0gPSA0NDldID0gXCJMZWZ0SGFuZFNpZGVcIjtcbiAgICB0W3RbXCJQcmltYXJ5XCJdID0gNDUwXSA9IFwiUHJpbWFyeVwiO1xuICAgIHRbdFtcIlVuYXJ5XCJdID0gNDUxXSA9IFwiVW5hcnlcIjtcbn0pKHhlIHx8ICh4ZSA9IHt9KSk7XG5cbnZhciBTZTtcblxuKGZ1bmN0aW9uKHQpIHtcbiAgICB0W3RbXCJFT0ZcIl0gPSAxNTcyODY0XSA9IFwiRU9GXCI7XG4gICAgdFt0W1wiRXhwcmVzc2lvblRlcm1pbmFsXCJdID0gMTA0ODU3Nl0gPSBcIkV4cHJlc3Npb25UZXJtaW5hbFwiO1xuICAgIHRbdFtcIkFjY2Vzc1Njb3BlVGVybWluYWxcIl0gPSA1MjQyODhdID0gXCJBY2Nlc3NTY29wZVRlcm1pbmFsXCI7XG4gICAgdFt0W1wiQ2xvc2luZ1Rva2VuXCJdID0gMjYyMTQ0XSA9IFwiQ2xvc2luZ1Rva2VuXCI7XG4gICAgdFt0W1wiT3BlbmluZ1Rva2VuXCJdID0gMTMxMDcyXSA9IFwiT3BlbmluZ1Rva2VuXCI7XG4gICAgdFt0W1wiQmluYXJ5T3BcIl0gPSA2NTUzNl0gPSBcIkJpbmFyeU9wXCI7XG4gICAgdFt0W1wiVW5hcnlPcFwiXSA9IDMyNzY4XSA9IFwiVW5hcnlPcFwiO1xuICAgIHRbdFtcIkxlZnRIYW5kU2lkZVwiXSA9IDE2Mzg0XSA9IFwiTGVmdEhhbmRTaWRlXCI7XG4gICAgdFt0W1wiU3RyaW5nT3JOdW1lcmljTGl0ZXJhbFwiXSA9IDEyMjg4XSA9IFwiU3RyaW5nT3JOdW1lcmljTGl0ZXJhbFwiO1xuICAgIHRbdFtcIk51bWVyaWNMaXRlcmFsXCJdID0gODE5Ml0gPSBcIk51bWVyaWNMaXRlcmFsXCI7XG4gICAgdFt0W1wiU3RyaW5nTGl0ZXJhbFwiXSA9IDQwOTZdID0gXCJTdHJpbmdMaXRlcmFsXCI7XG4gICAgdFt0W1wiSWRlbnRpZmllck5hbWVcIl0gPSAzMDcyXSA9IFwiSWRlbnRpZmllck5hbWVcIjtcbiAgICB0W3RbXCJLZXl3b3JkXCJdID0gMjA0OF0gPSBcIktleXdvcmRcIjtcbiAgICB0W3RbXCJJZGVudGlmaWVyXCJdID0gMTAyNF0gPSBcIklkZW50aWZpZXJcIjtcbiAgICB0W3RbXCJDb250ZXh0dWFsXCJdID0gNTEyXSA9IFwiQ29udGV4dHVhbFwiO1xuICAgIHRbdFtcIlByZWNlZGVuY2VcIl0gPSA0NDhdID0gXCJQcmVjZWRlbmNlXCI7XG4gICAgdFt0W1wiVHlwZVwiXSA9IDYzXSA9IFwiVHlwZVwiO1xuICAgIHRbdFtcIkZhbHNlS2V5d29yZFwiXSA9IDIwNDhdID0gXCJGYWxzZUtleXdvcmRcIjtcbiAgICB0W3RbXCJUcnVlS2V5d29yZFwiXSA9IDIwNDldID0gXCJUcnVlS2V5d29yZFwiO1xuICAgIHRbdFtcIk51bGxLZXl3b3JkXCJdID0gMjA1MF0gPSBcIk51bGxLZXl3b3JkXCI7XG4gICAgdFt0W1wiVW5kZWZpbmVkS2V5d29yZFwiXSA9IDIwNTFdID0gXCJVbmRlZmluZWRLZXl3b3JkXCI7XG4gICAgdFt0W1wiVGhpc1Njb3BlXCJdID0gMzA3Nl0gPSBcIlRoaXNTY29wZVwiO1xuICAgIHRbdFtcIlBhcmVudFNjb3BlXCJdID0gMzA3OF0gPSBcIlBhcmVudFNjb3BlXCI7XG4gICAgdFt0W1wiT3BlblBhcmVuXCJdID0gNjcxNzUxXSA9IFwiT3BlblBhcmVuXCI7XG4gICAgdFt0W1wiT3BlbkJyYWNlXCJdID0gMTMxMDgwXSA9IFwiT3BlbkJyYWNlXCI7XG4gICAgdFt0W1wiRG90XCJdID0gMTYzOTNdID0gXCJEb3RcIjtcbiAgICB0W3RbXCJDbG9zZUJyYWNlXCJdID0gMTgzNTAxOF0gPSBcIkNsb3NlQnJhY2VcIjtcbiAgICB0W3RbXCJDbG9zZVBhcmVuXCJdID0gMTgzNTAxOV0gPSBcIkNsb3NlUGFyZW5cIjtcbiAgICB0W3RbXCJDb21tYVwiXSA9IDE1NzI4NzZdID0gXCJDb21tYVwiO1xuICAgIHRbdFtcIk9wZW5CcmFja2V0XCJdID0gNjcxNzU3XSA9IFwiT3BlbkJyYWNrZXRcIjtcbiAgICB0W3RbXCJDbG9zZUJyYWNrZXRcIl0gPSAxODM1MDIyXSA9IFwiQ2xvc2VCcmFja2V0XCI7XG4gICAgdFt0W1wiQ29sb25cIl0gPSAxNTcyODc5XSA9IFwiQ29sb25cIjtcbiAgICB0W3RbXCJRdWVzdGlvblwiXSA9IDE1NzI4ODBdID0gXCJRdWVzdGlvblwiO1xuICAgIHRbdFtcIkFtcGVyc2FuZFwiXSA9IDE1NzI4ODNdID0gXCJBbXBlcnNhbmRcIjtcbiAgICB0W3RbXCJCYXJcIl0gPSAxNTcyODg0XSA9IFwiQmFyXCI7XG4gICAgdFt0W1wiQmFyQmFyXCJdID0gMTYzODU0OV0gPSBcIkJhckJhclwiO1xuICAgIHRbdFtcIkFtcGVyc2FuZEFtcGVyc2FuZFwiXSA9IDE2Mzg2MTRdID0gXCJBbXBlcnNhbmRBbXBlcnNhbmRcIjtcbiAgICB0W3RbXCJFcXVhbHNFcXVhbHNcIl0gPSAxNjM4Njc5XSA9IFwiRXF1YWxzRXF1YWxzXCI7XG4gICAgdFt0W1wiRXhjbGFtYXRpb25FcXVhbHNcIl0gPSAxNjM4NjgwXSA9IFwiRXhjbGFtYXRpb25FcXVhbHNcIjtcbiAgICB0W3RbXCJFcXVhbHNFcXVhbHNFcXVhbHNcIl0gPSAxNjM4NjgxXSA9IFwiRXF1YWxzRXF1YWxzRXF1YWxzXCI7XG4gICAgdFt0W1wiRXhjbGFtYXRpb25FcXVhbHNFcXVhbHNcIl0gPSAxNjM4NjgyXSA9IFwiRXhjbGFtYXRpb25FcXVhbHNFcXVhbHNcIjtcbiAgICB0W3RbXCJMZXNzVGhhblwiXSA9IDE2Mzg3NDddID0gXCJMZXNzVGhhblwiO1xuICAgIHRbdFtcIkdyZWF0ZXJUaGFuXCJdID0gMTYzODc0OF0gPSBcIkdyZWF0ZXJUaGFuXCI7XG4gICAgdFt0W1wiTGVzc1RoYW5FcXVhbHNcIl0gPSAxNjM4NzQ5XSA9IFwiTGVzc1RoYW5FcXVhbHNcIjtcbiAgICB0W3RbXCJHcmVhdGVyVGhhbkVxdWFsc1wiXSA9IDE2Mzg3NTBdID0gXCJHcmVhdGVyVGhhbkVxdWFsc1wiO1xuICAgIHRbdFtcIkluS2V5d29yZFwiXSA9IDE2NDA3OTldID0gXCJJbktleXdvcmRcIjtcbiAgICB0W3RbXCJJbnN0YW5jZU9mS2V5d29yZFwiXSA9IDE2NDA4MDBdID0gXCJJbnN0YW5jZU9mS2V5d29yZFwiO1xuICAgIHRbdFtcIlBsdXNcIl0gPSA2MjMwMDldID0gXCJQbHVzXCI7XG4gICAgdFt0W1wiTWludXNcIl0gPSA2MjMwMTBdID0gXCJNaW51c1wiO1xuICAgIHRbdFtcIlR5cGVvZktleXdvcmRcIl0gPSAzNDg1MV0gPSBcIlR5cGVvZktleXdvcmRcIjtcbiAgICB0W3RbXCJWb2lkS2V5d29yZFwiXSA9IDM0ODUyXSA9IFwiVm9pZEtleXdvcmRcIjtcbiAgICB0W3RbXCJBc3Rlcmlza1wiXSA9IDE2Mzg4ODVdID0gXCJBc3Rlcmlza1wiO1xuICAgIHRbdFtcIlBlcmNlbnRcIl0gPSAxNjM4ODg2XSA9IFwiUGVyY2VudFwiO1xuICAgIHRbdFtcIlNsYXNoXCJdID0gMTYzODg4N10gPSBcIlNsYXNoXCI7XG4gICAgdFt0W1wiRXF1YWxzXCJdID0gMTA0ODYxNl0gPSBcIkVxdWFsc1wiO1xuICAgIHRbdFtcIkV4Y2xhbWF0aW9uXCJdID0gMzI4MDldID0gXCJFeGNsYW1hdGlvblwiO1xuICAgIHRbdFtcIlRlbXBsYXRlVGFpbFwiXSA9IDU0MDcxNF0gPSBcIlRlbXBsYXRlVGFpbFwiO1xuICAgIHRbdFtcIlRlbXBsYXRlQ29udGludWF0aW9uXCJdID0gNTQwNzE1XSA9IFwiVGVtcGxhdGVDb250aW51YXRpb25cIjtcbiAgICB0W3RbXCJPZktleXdvcmRcIl0gPSAxMDUxMTgwXSA9IFwiT2ZLZXl3b3JkXCI7XG59KShTZSB8fCAoU2UgPSB7fSkpO1xuXG5jb25zdCBPZSA9IFByaW1pdGl2ZUxpdGVyYWxFeHByZXNzaW9uLiRmYWxzZTtcblxuY29uc3QgQ2UgPSBQcmltaXRpdmVMaXRlcmFsRXhwcmVzc2lvbi4kdHJ1ZTtcblxuY29uc3Qga2UgPSBQcmltaXRpdmVMaXRlcmFsRXhwcmVzc2lvbi4kbnVsbDtcblxuY29uc3QgQmUgPSBQcmltaXRpdmVMaXRlcmFsRXhwcmVzc2lvbi4kdW5kZWZpbmVkO1xuXG5jb25zdCAkZSA9IEFjY2Vzc1RoaXNFeHByZXNzaW9uLiR0aGlzO1xuXG5jb25zdCBMZSA9IEFjY2Vzc1RoaXNFeHByZXNzaW9uLiRwYXJlbnQ7XG5cbnZhciBSZTtcblxuKGZ1bmN0aW9uKHQpIHtcbiAgICB0W3RbXCJOb25lXCJdID0gMF0gPSBcIk5vbmVcIjtcbiAgICB0W3RbXCJJbnRlcnBvbGF0aW9uXCJdID0gMV0gPSBcIkludGVycG9sYXRpb25cIjtcbiAgICB0W3RbXCJJc0l0ZXJhdG9yXCJdID0gMl0gPSBcIklzSXRlcmF0b3JcIjtcbiAgICB0W3RbXCJJc0Z1bmN0aW9uXCJdID0gNF0gPSBcIklzRnVuY3Rpb25cIjtcbiAgICB0W3RbXCJJc1Byb3BlcnR5XCJdID0gOF0gPSBcIklzUHJvcGVydHlcIjtcbiAgICB0W3RbXCJJc0N1c3RvbVwiXSA9IDE2XSA9IFwiSXNDdXN0b21cIjtcbn0pKFJlIHx8IChSZSA9IHt9KSk7XG5cbmNsYXNzIFBhcnNlclN0YXRlIHtcbiAgICBjb25zdHJ1Y3Rvcih0KSB7XG4gICAgICAgIHRoaXMuaXAgPSB0O1xuICAgICAgICB0aGlzLmluZGV4ID0gMDtcbiAgICAgICAgdGhpcy5DID0gMDtcbiAgICAgICAgdGhpcy5CID0gMDtcbiAgICAgICAgdGhpcy4kID0gMTU3Mjg2NDtcbiAgICAgICAgdGhpcy5MID0gXCJcIjtcbiAgICAgICAgdGhpcy5SID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5sZW5ndGggPSB0Lmxlbmd0aDtcbiAgICAgICAgdGhpcy5PID0gdC5jaGFyQ29kZUF0KDApO1xuICAgIH1cbiAgICBnZXQgUCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuaXAuc2xpY2UodGhpcy5DLCB0aGlzLmluZGV4KTtcbiAgICB9XG59XG5cbmNvbnN0IFBlID0gbmV3IFBhcnNlclN0YXRlKFwiXCIpO1xuXG5mdW5jdGlvbiBUZSh0LCBlKSB7XG4gICAgUGUuaXAgPSB0O1xuICAgIFBlLmxlbmd0aCA9IHQubGVuZ3RoO1xuICAgIFBlLmluZGV4ID0gMDtcbiAgICBQZS5PID0gdC5jaGFyQ29kZUF0KDApO1xuICAgIHJldHVybiBqZShQZSwgMCwgNjEsIHZvaWQgMCA9PT0gZSA/IDggOiBlKTtcbn1cblxuZnVuY3Rpb24gamUodCwgZSwgcywgcikge1xuICAgIGlmICgxNiA9PT0gcikgcmV0dXJuIG5ldyBDdXN0b21FeHByZXNzaW9uKHQuaXApO1xuICAgIGlmICgwID09PSB0LmluZGV4KSB7XG4gICAgICAgIGlmICgxICYgcikgcmV0dXJuIFZlKHQpO1xuICAgICAgICBLZSh0KTtcbiAgICAgICAgaWYgKDEwNDg1NzYgJiB0LiQpIHRocm93IG5ldyBFcnJvcihgQVVSMDE1MToke3QuaXB9YCk7XG4gICAgfVxuICAgIHQuUiA9IDQ0OCA+IHM7XG4gICAgbGV0IGk7XG4gICAgaWYgKDMyNzY4ICYgdC4kKSB7XG4gICAgICAgIGNvbnN0IHMgPSBKZVs2MyAmIHQuJF07XG4gICAgICAgIEtlKHQpO1xuICAgICAgICBpID0gbmV3IFVuYXJ5RXhwcmVzc2lvbihzLCBqZSh0LCBlLCA0NDksIHIpKTtcbiAgICAgICAgdC5SID0gZmFsc2U7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgdDogc3dpdGNoICh0LiQpIHtcbiAgICAgICAgICBjYXNlIDMwNzg6XG4gICAgICAgICAgICB0LlIgPSBmYWxzZTtcbiAgICAgICAgICAgIGRvIHtcbiAgICAgICAgICAgICAgICBLZSh0KTtcbiAgICAgICAgICAgICAgICBlKys7XG4gICAgICAgICAgICAgICAgaWYgKEdlKHQsIDE2MzkzKSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoMTYzOTMgPT09IHQuJCkgdGhyb3cgbmV3IEVycm9yKGBBVVIwMTUyOiR7dC5pcH1gKTsgZWxzZSBpZiAoMTU3Mjg2NCA9PT0gdC4kKSB0aHJvdyBuZXcgRXJyb3IoYEFVUjAxNTM6JHt0LmlwfWApO1xuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoNTI0Mjg4ICYgdC4kKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHQgPSA1MTEgJiBlO1xuICAgICAgICAgICAgICAgICAgICBpID0gMCA9PT0gdCA/ICRlIDogMSA9PT0gdCA/IExlIDogbmV3IEFjY2Vzc1RoaXNFeHByZXNzaW9uKHQpO1xuICAgICAgICAgICAgICAgICAgICBlID0gNTEyO1xuICAgICAgICAgICAgICAgICAgICBicmVhayB0O1xuICAgICAgICAgICAgICAgIH0gZWxzZSB0aHJvdyBuZXcgRXJyb3IoYEFVUjAxNTQ6JHt0LmlwfWApO1xuICAgICAgICAgICAgfSB3aGlsZSAoMzA3OCA9PT0gdC4kKTtcblxuICAgICAgICAgIGNhc2UgMTAyNDpcbiAgICAgICAgICAgIGlmICgyICYgcikgaSA9IG5ldyBCaW5kaW5nSWRlbnRpZmllcih0LkwpOyBlbHNlIHtcbiAgICAgICAgICAgICAgICBpID0gbmV3IEFjY2Vzc1Njb3BlRXhwcmVzc2lvbih0LkwsIDUxMSAmIGUpO1xuICAgICAgICAgICAgICAgIGUgPSAxMDI0O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdC5SID0gdHJ1ZTtcbiAgICAgICAgICAgIEtlKHQpO1xuICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICBjYXNlIDMwNzY6XG4gICAgICAgICAgICB0LlIgPSBmYWxzZTtcbiAgICAgICAgICAgIEtlKHQpO1xuICAgICAgICAgICAgaSA9ICRlO1xuICAgICAgICAgICAgZSA9IDUxMjtcbiAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgY2FzZSA2NzE3NTE6XG4gICAgICAgICAgICBLZSh0KTtcbiAgICAgICAgICAgIGkgPSBqZSh0LCAwLCA2Miwgcik7XG4gICAgICAgICAgICBaZSh0LCAxODM1MDE5KTtcbiAgICAgICAgICAgIGUgPSAwO1xuICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICBjYXNlIDY3MTc1NzpcbiAgICAgICAgICAgIGkgPSB0LmlwLnNlYXJjaCgvXFxzK29mXFxzKy8pID4gdC5pbmRleCA/IEllKHQpIDogTWUodCwgZSwgcik7XG4gICAgICAgICAgICBlID0gMDtcbiAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgY2FzZSAxMzEwODA6XG4gICAgICAgICAgICBpID0gRmUodCwgcik7XG4gICAgICAgICAgICBlID0gMDtcbiAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgY2FzZSA1NDA3MTQ6XG4gICAgICAgICAgICBpID0gbmV3IFRlbXBsYXRlRXhwcmVzc2lvbihbIHQuTCBdKTtcbiAgICAgICAgICAgIHQuUiA9IGZhbHNlO1xuICAgICAgICAgICAgS2UodCk7XG4gICAgICAgICAgICBlID0gMDtcbiAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgY2FzZSA1NDA3MTU6XG4gICAgICAgICAgICBpID0gTmUodCwgZSwgciwgaSwgZmFsc2UpO1xuICAgICAgICAgICAgZSA9IDA7XG4gICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgIGNhc2UgNDA5NjpcbiAgICAgICAgICBjYXNlIDgxOTI6XG4gICAgICAgICAgICBpID0gbmV3IFByaW1pdGl2ZUxpdGVyYWxFeHByZXNzaW9uKHQuTCk7XG4gICAgICAgICAgICB0LlIgPSBmYWxzZTtcbiAgICAgICAgICAgIEtlKHQpO1xuICAgICAgICAgICAgZSA9IDA7XG4gICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgIGNhc2UgMjA1MDpcbiAgICAgICAgICBjYXNlIDIwNTE6XG4gICAgICAgICAgY2FzZSAyMDQ5OlxuICAgICAgICAgIGNhc2UgMjA0ODpcbiAgICAgICAgICAgIGkgPSBKZVs2MyAmIHQuJF07XG4gICAgICAgICAgICB0LlIgPSBmYWxzZTtcbiAgICAgICAgICAgIEtlKHQpO1xuICAgICAgICAgICAgZSA9IDA7XG4gICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICBpZiAodC5pbmRleCA+PSB0Lmxlbmd0aCkgdGhyb3cgbmV3IEVycm9yKGBBVVIwMTU1OiR7dC5pcH1gKTsgZWxzZSB0aHJvdyBuZXcgRXJyb3IoYEFVUjAxNTY6JHt0LmlwfWApO1xuICAgICAgICB9XG4gICAgICAgIGlmICgyICYgcikgcmV0dXJuIERlKHQsIGkpO1xuICAgICAgICBpZiAoNDQ5IDwgcykgcmV0dXJuIGk7XG4gICAgICAgIGxldCBuID0gdC5MO1xuICAgICAgICB3aGlsZSAoKDE2Mzg0ICYgdC4kKSA+IDApIHtcbiAgICAgICAgICAgIGNvbnN0IHMgPSBbXTtcbiAgICAgICAgICAgIGxldCBvO1xuICAgICAgICAgICAgc3dpdGNoICh0LiQpIHtcbiAgICAgICAgICAgICAgY2FzZSAxNjM5MzpcbiAgICAgICAgICAgICAgICB0LlIgPSB0cnVlO1xuICAgICAgICAgICAgICAgIEtlKHQpO1xuICAgICAgICAgICAgICAgIGlmICgwID09PSAoMzA3MiAmIHQuJCkpIHRocm93IG5ldyBFcnJvcihgQVVSMDE1Mzoke3QuaXB9YCk7XG4gICAgICAgICAgICAgICAgbiA9IHQuTDtcbiAgICAgICAgICAgICAgICBLZSh0KTtcbiAgICAgICAgICAgICAgICBlID0gKGUgJiAoNTEyIHwgMTAyNCkpIDw8IDEgfCAyMDQ4ICYgZSB8ICg0MDk2ICYgZSkgPj4gMTtcbiAgICAgICAgICAgICAgICBpZiAoNjcxNzUxID09PSB0LiQpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKDAgPT09IGUpIGUgPSAyMDQ4O1xuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKDEwMjQgJiBlKSBpID0gbmV3IEFjY2Vzc1Njb3BlRXhwcmVzc2lvbihuLCBpLmFuY2VzdG9yKTsgZWxzZSBpID0gbmV3IEFjY2Vzc01lbWJlckV4cHJlc3Npb24oaSwgbik7XG4gICAgICAgICAgICAgICAgY29udGludWU7XG5cbiAgICAgICAgICAgICAgY2FzZSA2NzE3NTc6XG4gICAgICAgICAgICAgICAgdC5SID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICBLZSh0KTtcbiAgICAgICAgICAgICAgICBlID0gNDA5NjtcbiAgICAgICAgICAgICAgICBpID0gbmV3IEFjY2Vzc0tleWVkRXhwcmVzc2lvbihpLCBqZSh0LCAwLCA2MiwgcikpO1xuICAgICAgICAgICAgICAgIFplKHQsIDE4MzUwMjIpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICAgIGNhc2UgNjcxNzUxOlxuICAgICAgICAgICAgICAgIHQuUiA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIEtlKHQpO1xuICAgICAgICAgICAgICAgIHdoaWxlICgxODM1MDE5ICE9PSB0LiQpIHtcbiAgICAgICAgICAgICAgICAgICAgcy5wdXNoKGplKHQsIDAsIDYyLCByKSk7XG4gICAgICAgICAgICAgICAgICAgIGlmICghR2UodCwgMTU3Mjg3NikpIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBaZSh0LCAxODM1MDE5KTtcbiAgICAgICAgICAgICAgICBpZiAoMTAyNCAmIGUpIGkgPSBuZXcgQ2FsbFNjb3BlRXhwcmVzc2lvbihuLCBzLCBpLmFuY2VzdG9yKTsgZWxzZSBpZiAoMjA0OCAmIGUpIGkgPSBuZXcgQ2FsbE1lbWJlckV4cHJlc3Npb24oaSwgbiwgcyk7IGVsc2UgaSA9IG5ldyBDYWxsRnVuY3Rpb25FeHByZXNzaW9uKGksIHMpO1xuICAgICAgICAgICAgICAgIGUgPSAwO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICAgIGNhc2UgNTQwNzE0OlxuICAgICAgICAgICAgICAgIHQuUiA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIG8gPSBbIHQuTCBdO1xuICAgICAgICAgICAgICAgIGkgPSBuZXcgVGFnZ2VkVGVtcGxhdGVFeHByZXNzaW9uKG8sIG8sIGkpO1xuICAgICAgICAgICAgICAgIEtlKHQpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICAgIGNhc2UgNTQwNzE1OlxuICAgICAgICAgICAgICAgIGkgPSBOZSh0LCBlLCByLCBpLCB0cnVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBpZiAoNDQ4IDwgcykgcmV0dXJuIGk7XG4gICAgd2hpbGUgKCg2NTUzNiAmIHQuJCkgPiAwKSB7XG4gICAgICAgIGNvbnN0IG4gPSB0LiQ7XG4gICAgICAgIGlmICgoNDQ4ICYgbikgPD0gcykgYnJlYWs7XG4gICAgICAgIEtlKHQpO1xuICAgICAgICBpID0gbmV3IEJpbmFyeUV4cHJlc3Npb24oSmVbNjMgJiBuXSwgaSwgamUodCwgZSwgNDQ4ICYgbiwgcikpO1xuICAgICAgICB0LlIgPSBmYWxzZTtcbiAgICB9XG4gICAgaWYgKDYzIDwgcykgcmV0dXJuIGk7XG4gICAgaWYgKEdlKHQsIDE1NzI4ODApKSB7XG4gICAgICAgIGNvbnN0IHMgPSBqZSh0LCBlLCA2Miwgcik7XG4gICAgICAgIFplKHQsIDE1NzI4NzkpO1xuICAgICAgICBpID0gbmV3IENvbmRpdGlvbmFsRXhwcmVzc2lvbihpLCBzLCBqZSh0LCBlLCA2MiwgcikpO1xuICAgICAgICB0LlIgPSBmYWxzZTtcbiAgICB9XG4gICAgaWYgKDYyIDwgcykgcmV0dXJuIGk7XG4gICAgaWYgKEdlKHQsIDEwNDg2MTYpKSB7XG4gICAgICAgIGlmICghdC5SKSB0aHJvdyBuZXcgRXJyb3IoYEFVUjAxNTg6JHt0LmlwfWApO1xuICAgICAgICBpID0gbmV3IEFzc2lnbkV4cHJlc3Npb24oaSwgamUodCwgZSwgNjIsIHIpKTtcbiAgICB9XG4gICAgaWYgKDYxIDwgcykgcmV0dXJuIGk7XG4gICAgd2hpbGUgKEdlKHQsIDE1NzI4ODQpKSB7XG4gICAgICAgIGlmICgxNTcyODY0ID09PSB0LiQpIHRocm93IG5ldyBFcnJvcihgQVVSMDE1OToke3QuaXB9YCk7XG4gICAgICAgIGNvbnN0IHMgPSB0Lkw7XG4gICAgICAgIEtlKHQpO1xuICAgICAgICBjb25zdCBuID0gbmV3IEFycmF5O1xuICAgICAgICB3aGlsZSAoR2UodCwgMTU3Mjg3OSkpIG4ucHVzaChqZSh0LCBlLCA2MiwgcikpO1xuICAgICAgICBpID0gbmV3IFZhbHVlQ29udmVydGVyRXhwcmVzc2lvbihpLCBzLCBuKTtcbiAgICB9XG4gICAgd2hpbGUgKEdlKHQsIDE1NzI4ODMpKSB7XG4gICAgICAgIGlmICgxNTcyODY0ID09PSB0LiQpIHRocm93IG5ldyBFcnJvcihgQVVSMDE2MDoke3QuaXB9YCk7XG4gICAgICAgIGNvbnN0IHMgPSB0Lkw7XG4gICAgICAgIEtlKHQpO1xuICAgICAgICBjb25zdCBuID0gbmV3IEFycmF5O1xuICAgICAgICB3aGlsZSAoR2UodCwgMTU3Mjg3OSkpIG4ucHVzaChqZSh0LCBlLCA2MiwgcikpO1xuICAgICAgICBpID0gbmV3IEJpbmRpbmdCZWhhdmlvckV4cHJlc3Npb24oaSwgcywgbik7XG4gICAgfVxuICAgIGlmICgxNTcyODY0ICE9PSB0LiQpIHtcbiAgICAgICAgaWYgKDEgJiByKSByZXR1cm4gaTtcbiAgICAgICAgaWYgKFwib2ZcIiA9PT0gdC5QKSB0aHJvdyBuZXcgRXJyb3IoYEFVUjAxNjE6JHt0LmlwfWApO1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEFVUjAxNjI6JHt0LmlwfWApO1xuICAgIH1cbiAgICByZXR1cm4gaTtcbn1cblxuZnVuY3Rpb24gSWUodCkge1xuICAgIGNvbnN0IGUgPSBbXTtcbiAgICBjb25zdCBzID0gbmV3IERlc3RydWN0dXJpbmdBc3NpZ25tZW50RXhwcmVzc2lvbig5MDEzNywgZSwgdm9pZCAwLCB2b2lkIDApO1xuICAgIGxldCByID0gXCJcIjtcbiAgICBsZXQgaSA9IHRydWU7XG4gICAgbGV0IG4gPSAwO1xuICAgIHdoaWxlIChpKSB7XG4gICAgICAgIEtlKHQpO1xuICAgICAgICBzd2l0Y2ggKHQuJCkge1xuICAgICAgICAgIGNhc2UgMTgzNTAyMjpcbiAgICAgICAgICAgIGkgPSBmYWxzZTtcbiAgICAgICAgICAgIG8oKTtcbiAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgY2FzZSAxNTcyODc2OlxuICAgICAgICAgICAgbygpO1xuICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICBjYXNlIDEwMjQ6XG4gICAgICAgICAgICByID0gdC5QO1xuICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBBVVIwMTcwOiR7dC5pcH1gKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBaZSh0LCAxODM1MDIyKTtcbiAgICByZXR1cm4gcztcbiAgICBmdW5jdGlvbiBvKCkge1xuICAgICAgICBpZiAoXCJcIiAhPT0gcikge1xuICAgICAgICAgICAgZS5wdXNoKG5ldyBEZXN0cnVjdHVyaW5nQXNzaWdubWVudFNpbmdsZUV4cHJlc3Npb24obmV3IEFjY2Vzc01lbWJlckV4cHJlc3Npb24oJGUsIHIpLCBuZXcgQWNjZXNzS2V5ZWRFeHByZXNzaW9uKCRlLCBuZXcgUHJpbWl0aXZlTGl0ZXJhbEV4cHJlc3Npb24obisrKSksIHZvaWQgMCkpO1xuICAgICAgICAgICAgciA9IFwiXCI7XG4gICAgICAgIH0gZWxzZSBuKys7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBNZSh0LCBlLCBzKSB7XG4gICAgS2UodCk7XG4gICAgY29uc3QgciA9IG5ldyBBcnJheTtcbiAgICB3aGlsZSAoMTgzNTAyMiAhPT0gdC4kKSBpZiAoR2UodCwgMTU3Mjg3NikpIHtcbiAgICAgICAgci5wdXNoKEJlKTtcbiAgICAgICAgaWYgKDE4MzUwMjIgPT09IHQuJCkgYnJlYWs7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgci5wdXNoKGplKHQsIGUsIDYyLCB+MiAmIHMpKTtcbiAgICAgICAgaWYgKEdlKHQsIDE1NzI4NzYpKSB7XG4gICAgICAgICAgICBpZiAoMTgzNTAyMiA9PT0gdC4kKSBicmVhaztcbiAgICAgICAgfSBlbHNlIGJyZWFrO1xuICAgIH1cbiAgICBaZSh0LCAxODM1MDIyKTtcbiAgICBpZiAoMiAmIHMpIHJldHVybiBuZXcgQXJyYXlCaW5kaW5nUGF0dGVybihyKTsgZWxzZSB7XG4gICAgICAgIHQuUiA9IGZhbHNlO1xuICAgICAgICByZXR1cm4gbmV3IEFycmF5TGl0ZXJhbEV4cHJlc3Npb24ocik7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBEZSh0LCBlKSB7XG4gICAgaWYgKDAgPT09ICg2NTUzNiAmIGUuJGtpbmQpKSB0aHJvdyBuZXcgRXJyb3IoYEFVUjAxNjM6JHt0LmlwfWApO1xuICAgIGlmICgxMDUxMTgwICE9PSB0LiQpIHRocm93IG5ldyBFcnJvcihgQVVSMDE2Mzoke3QuaXB9YCk7XG4gICAgS2UodCk7XG4gICAgY29uc3QgcyA9IGU7XG4gICAgY29uc3QgciA9IGplKHQsIDAsIDYxLCAwKTtcbiAgICByZXR1cm4gbmV3IEZvck9mU3RhdGVtZW50KHMsIHIpO1xufVxuXG5mdW5jdGlvbiBGZSh0LCBlKSB7XG4gICAgY29uc3QgcyA9IG5ldyBBcnJheTtcbiAgICBjb25zdCByID0gbmV3IEFycmF5O1xuICAgIEtlKHQpO1xuICAgIHdoaWxlICgxODM1MDE4ICE9PSB0LiQpIHtcbiAgICAgICAgcy5wdXNoKHQuTCk7XG4gICAgICAgIGlmICgxMjI4OCAmIHQuJCkge1xuICAgICAgICAgICAgS2UodCk7XG4gICAgICAgICAgICBaZSh0LCAxNTcyODc5KTtcbiAgICAgICAgICAgIHIucHVzaChqZSh0LCAwLCA2MiwgfjIgJiBlKSk7XG4gICAgICAgIH0gZWxzZSBpZiAoMzA3MiAmIHQuJCkge1xuICAgICAgICAgICAgY29uc3Qge086IHMsICQ6IGksIGluZGV4OiBufSA9IHQ7XG4gICAgICAgICAgICBLZSh0KTtcbiAgICAgICAgICAgIGlmIChHZSh0LCAxNTcyODc5KSkgci5wdXNoKGplKHQsIDAsIDYyLCB+MiAmIGUpKTsgZWxzZSB7XG4gICAgICAgICAgICAgICAgdC5PID0gcztcbiAgICAgICAgICAgICAgICB0LiQgPSBpO1xuICAgICAgICAgICAgICAgIHQuaW5kZXggPSBuO1xuICAgICAgICAgICAgICAgIHIucHVzaChqZSh0LCAwLCA0NTAsIH4yICYgZSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2UgdGhyb3cgbmV3IEVycm9yKGBBVVIwMTY0OiR7dC5pcH1gKTtcbiAgICAgICAgaWYgKDE4MzUwMTggIT09IHQuJCkgWmUodCwgMTU3Mjg3Nik7XG4gICAgfVxuICAgIFplKHQsIDE4MzUwMTgpO1xuICAgIGlmICgyICYgZSkgcmV0dXJuIG5ldyBPYmplY3RCaW5kaW5nUGF0dGVybihzLCByKTsgZWxzZSB7XG4gICAgICAgIHQuUiA9IGZhbHNlO1xuICAgICAgICByZXR1cm4gbmV3IE9iamVjdExpdGVyYWxFeHByZXNzaW9uKHMsIHIpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gVmUodCkge1xuICAgIGNvbnN0IGUgPSBbXTtcbiAgICBjb25zdCBzID0gW107XG4gICAgY29uc3QgciA9IHQubGVuZ3RoO1xuICAgIGxldCBpID0gXCJcIjtcbiAgICB3aGlsZSAodC5pbmRleCA8IHIpIHtcbiAgICAgICAgc3dpdGNoICh0Lk8pIHtcbiAgICAgICAgICBjYXNlIDM2OlxuICAgICAgICAgICAgaWYgKDEyMyA9PT0gdC5pcC5jaGFyQ29kZUF0KHQuaW5kZXggKyAxKSkge1xuICAgICAgICAgICAgICAgIGUucHVzaChpKTtcbiAgICAgICAgICAgICAgICBpID0gXCJcIjtcbiAgICAgICAgICAgICAgICB0LmluZGV4ICs9IDI7XG4gICAgICAgICAgICAgICAgdC5PID0gdC5pcC5jaGFyQ29kZUF0KHQuaW5kZXgpO1xuICAgICAgICAgICAgICAgIEtlKHQpO1xuICAgICAgICAgICAgICAgIGNvbnN0IHIgPSBqZSh0LCAwLCA2MSwgMSk7XG4gICAgICAgICAgICAgICAgcy5wdXNoKHIpO1xuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfSBlbHNlIGkgKz0gXCIkXCI7XG4gICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgIGNhc2UgOTI6XG4gICAgICAgICAgICBpICs9IFN0cmluZy5mcm9tQ2hhckNvZGUobWUocWUodCkpKTtcbiAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIGkgKz0gU3RyaW5nLmZyb21DaGFyQ29kZSh0Lk8pO1xuICAgICAgICB9XG4gICAgICAgIHFlKHQpO1xuICAgIH1cbiAgICBpZiAocy5sZW5ndGgpIHtcbiAgICAgICAgZS5wdXNoKGkpO1xuICAgICAgICByZXR1cm4gbmV3IEludGVycG9sYXRpb24oZSwgcyk7XG4gICAgfVxuICAgIHJldHVybiBudWxsO1xufVxuXG5mdW5jdGlvbiBOZSh0LCBlLCBzLCByLCBpKSB7XG4gICAgY29uc3QgbiA9IFsgdC5MIF07XG4gICAgWmUodCwgNTQwNzE1KTtcbiAgICBjb25zdCBvID0gWyBqZSh0LCBlLCA2MiwgcykgXTtcbiAgICB3aGlsZSAoNTQwNzE0ICE9PSAodC4kID0gV2UodCkpKSB7XG4gICAgICAgIG4ucHVzaCh0LkwpO1xuICAgICAgICBaZSh0LCA1NDA3MTUpO1xuICAgICAgICBvLnB1c2goamUodCwgZSwgNjIsIHMpKTtcbiAgICB9XG4gICAgbi5wdXNoKHQuTCk7XG4gICAgdC5SID0gZmFsc2U7XG4gICAgaWYgKGkpIHtcbiAgICAgICAgS2UodCk7XG4gICAgICAgIHJldHVybiBuZXcgVGFnZ2VkVGVtcGxhdGVFeHByZXNzaW9uKG4sIG4sIHIsIG8pO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIEtlKHQpO1xuICAgICAgICByZXR1cm4gbmV3IFRlbXBsYXRlRXhwcmVzc2lvbihuLCBvKTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIEtlKHQpIHtcbiAgICB3aGlsZSAodC5pbmRleCA8IHQubGVuZ3RoKSB7XG4gICAgICAgIHQuQyA9IHQuaW5kZXg7XG4gICAgICAgIGlmIChudWxsICE9ICh0LiQgPSBuc1t0Lk9dKHQpKSkgcmV0dXJuO1xuICAgIH1cbiAgICB0LiQgPSAxNTcyODY0O1xufVxuXG5mdW5jdGlvbiBxZSh0KSB7XG4gICAgcmV0dXJuIHQuTyA9IHQuaXAuY2hhckNvZGVBdCgrK3QuaW5kZXgpO1xufVxuXG5mdW5jdGlvbiBIZSh0KSB7XG4gICAgd2hpbGUgKGlzW3FlKHQpXSkgO1xuICAgIGNvbnN0IGUgPSBYZVt0LkwgPSB0LlBdO1xuICAgIHJldHVybiB2b2lkIDAgPT09IGUgPyAxMDI0IDogZTtcbn1cblxuZnVuY3Rpb24gUWUodCwgZSkge1xuICAgIGxldCBzID0gdC5PO1xuICAgIGlmIChmYWxzZSA9PT0gZSkge1xuICAgICAgICBkbyB7XG4gICAgICAgICAgICBzID0gcWUodCk7XG4gICAgICAgIH0gd2hpbGUgKHMgPD0gNTcgJiYgcyA+PSA0OCk7XG4gICAgICAgIGlmICg0NiAhPT0gcykge1xuICAgICAgICAgICAgdC5MID0gcGFyc2VJbnQodC5QLCAxMCk7XG4gICAgICAgICAgICByZXR1cm4gODE5MjtcbiAgICAgICAgfVxuICAgICAgICBzID0gcWUodCk7XG4gICAgICAgIGlmICh0LmluZGV4ID49IHQubGVuZ3RoKSB7XG4gICAgICAgICAgICB0LkwgPSBwYXJzZUludCh0LlAuc2xpY2UoMCwgLTEpLCAxMCk7XG4gICAgICAgICAgICByZXR1cm4gODE5MjtcbiAgICAgICAgfVxuICAgIH1cbiAgICBpZiAocyA8PSA1NyAmJiBzID49IDQ4KSBkbyB7XG4gICAgICAgIHMgPSBxZSh0KTtcbiAgICB9IHdoaWxlIChzIDw9IDU3ICYmIHMgPj0gNDgpOyBlbHNlIHQuTyA9IHQuaXAuY2hhckNvZGVBdCgtLXQuaW5kZXgpO1xuICAgIHQuTCA9IHBhcnNlRmxvYXQodC5QKTtcbiAgICByZXR1cm4gODE5Mjtcbn1cblxuZnVuY3Rpb24gX2UodCkge1xuICAgIGNvbnN0IGUgPSB0Lk87XG4gICAgcWUodCk7XG4gICAgbGV0IHMgPSAwO1xuICAgIGNvbnN0IHIgPSBuZXcgQXJyYXk7XG4gICAgbGV0IGkgPSB0LmluZGV4O1xuICAgIHdoaWxlICh0Lk8gIT09IGUpIGlmICg5MiA9PT0gdC5PKSB7XG4gICAgICAgIHIucHVzaCh0LmlwLnNsaWNlKGksIHQuaW5kZXgpKTtcbiAgICAgICAgcWUodCk7XG4gICAgICAgIHMgPSBtZSh0Lk8pO1xuICAgICAgICBxZSh0KTtcbiAgICAgICAgci5wdXNoKFN0cmluZy5mcm9tQ2hhckNvZGUocykpO1xuICAgICAgICBpID0gdC5pbmRleDtcbiAgICB9IGVsc2UgaWYgKHQuaW5kZXggPj0gdC5sZW5ndGgpIHRocm93IG5ldyBFcnJvcihgQVVSMDE2NToke3QuaXB9YCk7IGVsc2UgcWUodCk7XG4gICAgY29uc3QgbiA9IHQuaXAuc2xpY2UoaSwgdC5pbmRleCk7XG4gICAgcWUodCk7XG4gICAgci5wdXNoKG4pO1xuICAgIGNvbnN0IG8gPSByLmpvaW4oXCJcIik7XG4gICAgdC5MID0gbztcbiAgICByZXR1cm4gNDA5Njtcbn1cblxuZnVuY3Rpb24gemUodCkge1xuICAgIGxldCBlID0gdHJ1ZTtcbiAgICBsZXQgcyA9IFwiXCI7XG4gICAgd2hpbGUgKDk2ICE9PSBxZSh0KSkgaWYgKDM2ID09PSB0Lk8pIGlmICh0LmluZGV4ICsgMSA8IHQubGVuZ3RoICYmIDEyMyA9PT0gdC5pcC5jaGFyQ29kZUF0KHQuaW5kZXggKyAxKSkge1xuICAgICAgICB0LmluZGV4Kys7XG4gICAgICAgIGUgPSBmYWxzZTtcbiAgICAgICAgYnJlYWs7XG4gICAgfSBlbHNlIHMgKz0gXCIkXCI7IGVsc2UgaWYgKDkyID09PSB0Lk8pIHMgKz0gU3RyaW5nLmZyb21DaGFyQ29kZShtZShxZSh0KSkpOyBlbHNlIHtcbiAgICAgICAgaWYgKHQuaW5kZXggPj0gdC5sZW5ndGgpIHRocm93IG5ldyBFcnJvcihgQVVSMDE2Njoke3QuaXB9YCk7XG4gICAgICAgIHMgKz0gU3RyaW5nLmZyb21DaGFyQ29kZSh0Lk8pO1xuICAgIH1cbiAgICBxZSh0KTtcbiAgICB0LkwgPSBzO1xuICAgIGlmIChlKSByZXR1cm4gNTQwNzE0O1xuICAgIHJldHVybiA1NDA3MTU7XG59XG5cbmZ1bmN0aW9uIFdlKHQpIHtcbiAgICBpZiAodC5pbmRleCA+PSB0Lmxlbmd0aCkgdGhyb3cgbmV3IEVycm9yKGBBVVIwMTY2OiR7dC5pcH1gKTtcbiAgICB0LmluZGV4LS07XG4gICAgcmV0dXJuIHplKHQpO1xufVxuXG5mdW5jdGlvbiBHZSh0LCBlKSB7XG4gICAgaWYgKHQuJCA9PT0gZSkge1xuICAgICAgICBLZSh0KTtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbn1cblxuZnVuY3Rpb24gWmUodCwgZSkge1xuICAgIGlmICh0LiQgPT09IGUpIEtlKHQpOyBlbHNlIHRocm93IG5ldyBFcnJvcihgQVVSMDE2Nzoke3QuaXB9PCR7ZX1gKTtcbn1cblxuY29uc3QgSmUgPSBbIE9lLCBDZSwga2UsIEJlLCBcIiR0aGlzXCIsIG51bGwsIFwiJHBhcmVudFwiLCBcIihcIiwgXCJ7XCIsIFwiLlwiLCBcIn1cIiwgXCIpXCIsIFwiLFwiLCBcIltcIiwgXCJdXCIsIFwiOlwiLCBcIj9cIiwgXCInXCIsICdcIicsIFwiJlwiLCBcInxcIiwgXCJ8fFwiLCBcIiYmXCIsIFwiPT1cIiwgXCIhPVwiLCBcIj09PVwiLCBcIiE9PVwiLCBcIjxcIiwgXCI+XCIsIFwiPD1cIiwgXCI+PVwiLCBcImluXCIsIFwiaW5zdGFuY2VvZlwiLCBcIitcIiwgXCItXCIsIFwidHlwZW9mXCIsIFwidm9pZFwiLCBcIipcIiwgXCIlXCIsIFwiL1wiLCBcIj1cIiwgXCIhXCIsIDU0MDcxNCwgNTQwNzE1LCBcIm9mXCIgXTtcblxuY29uc3QgWGUgPSBFKCk7XG5cblhlLnRydWUgPSAyMDQ5O1xuXG5YZS5udWxsID0gMjA1MDtcblxuWGUuZmFsc2UgPSAyMDQ4O1xuXG5YZS51bmRlZmluZWQgPSAyMDUxO1xuXG5YZS4kdGhpcyA9IDMwNzY7XG5cblhlLiRwYXJlbnQgPSAzMDc4O1xuXG5YZS5pbiA9IDE2NDA3OTk7XG5cblhlLmluc3RhbmNlb2YgPSAxNjQwODAwO1xuXG5YZS50eXBlb2YgPSAzNDg1MTtcblxuWGUudm9pZCA9IDM0ODUyO1xuXG5YZS5vZiA9IDEwNTExODA7XG5cbmNvbnN0IFllID0ge1xuICAgIEFzY2lpSWRQYXJ0OiBbIDM2LCAwLCA0OCwgNTgsIDY1LCA5MSwgOTUsIDAsIDk3LCAxMjMgXSxcbiAgICBJZFN0YXJ0OiBbIDM2LCAwLCA2NSwgOTEsIDk1LCAwLCA5NywgMTIzLCAxNzAsIDAsIDE4NiwgMCwgMTkyLCAyMTUsIDIxNiwgMjQ3LCAyNDgsIDY5NywgNzM2LCA3NDEsIDc0MjQsIDc0NjIsIDc0NjgsIDc1MTcsIDc1MjIsIDc1MjYsIDc1MzEsIDc1NDQsIDc1NDUsIDc2MTUsIDc2ODAsIDc5MzYsIDgzMDUsIDAsIDgzMTksIDAsIDgzMzYsIDgzNDksIDg0OTAsIDg0OTIsIDg0OTgsIDAsIDg1MjYsIDAsIDg1NDQsIDg1ODUsIDExMzYwLCAxMTM5MiwgNDI3ODYsIDQyODg4LCA0Mjg5MSwgNDI5MjcsIDQyOTI4LCA0MjkzNiwgNDI5OTksIDQzMDA4LCA0MzgyNCwgNDM4NjcsIDQzODY4LCA0Mzg3NywgNjQyNTYsIDY0MjYzLCA2NTMxMywgNjUzMzksIDY1MzQ1LCA2NTM3MSBdLFxuICAgIERpZ2l0OiBbIDQ4LCA1OCBdLFxuICAgIFNraXA6IFsgMCwgMzMsIDEyNywgMTYxIF1cbn07XG5cbmZ1bmN0aW9uIHRzKHQsIGUsIHMsIHIpIHtcbiAgICBjb25zdCBpID0gcy5sZW5ndGg7XG4gICAgZm9yIChsZXQgbiA9IDA7IG4gPCBpOyBuICs9IDIpIHtcbiAgICAgICAgY29uc3QgaSA9IHNbbl07XG4gICAgICAgIGxldCBvID0gc1tuICsgMV07XG4gICAgICAgIG8gPSBvID4gMCA/IG8gOiBpICsgMTtcbiAgICAgICAgaWYgKHQpIHQuZmlsbChyLCBpLCBvKTtcbiAgICAgICAgaWYgKGUpIGZvciAobGV0IHQgPSBpOyB0IDwgbzsgdCsrKSBlLmFkZCh0KTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIGVzKHQpIHtcbiAgICByZXR1cm4gZSA9PiB7XG4gICAgICAgIHFlKGUpO1xuICAgICAgICByZXR1cm4gdDtcbiAgICB9O1xufVxuXG5jb25zdCBzcyA9IHQgPT4ge1xuICAgIHRocm93IG5ldyBFcnJvcihgQVVSMDE2ODoke3QuaXB9YCk7XG59O1xuXG5zcy5ub3RNYXBwZWQgPSB0cnVlO1xuXG5jb25zdCBycyA9IG5ldyBTZXQ7XG5cbnRzKG51bGwsIHJzLCBZZS5Bc2NpaUlkUGFydCwgdHJ1ZSk7XG5cbmNvbnN0IGlzID0gbmV3IFVpbnQ4QXJyYXkoNjU1MzUpO1xuXG50cyhpcywgbnVsbCwgWWUuSWRTdGFydCwgMSk7XG5cbnRzKGlzLCBudWxsLCBZZS5EaWdpdCwgMSk7XG5cbmNvbnN0IG5zID0gbmV3IEFycmF5KDY1NTM1KTtcblxubnMuZmlsbChzcywgMCwgNjU1MzUpO1xuXG50cyhucywgbnVsbCwgWWUuU2tpcCwgKHQgPT4ge1xuICAgIHFlKHQpO1xuICAgIHJldHVybiBudWxsO1xufSkpO1xuXG50cyhucywgbnVsbCwgWWUuSWRTdGFydCwgSGUpO1xuXG50cyhucywgbnVsbCwgWWUuRGlnaXQsICh0ID0+IFFlKHQsIGZhbHNlKSkpO1xuXG5uc1szNF0gPSBuc1szOV0gPSB0ID0+IF9lKHQpO1xuXG5uc1s5Nl0gPSB0ID0+IHplKHQpO1xuXG5uc1szM10gPSB0ID0+IHtcbiAgICBpZiAoNjEgIT09IHFlKHQpKSByZXR1cm4gMzI4MDk7XG4gICAgaWYgKDYxICE9PSBxZSh0KSkgcmV0dXJuIDE2Mzg2ODA7XG4gICAgcWUodCk7XG4gICAgcmV0dXJuIDE2Mzg2ODI7XG59O1xuXG5uc1s2MV0gPSB0ID0+IHtcbiAgICBpZiAoNjEgIT09IHFlKHQpKSByZXR1cm4gMTA0ODYxNjtcbiAgICBpZiAoNjEgIT09IHFlKHQpKSByZXR1cm4gMTYzODY3OTtcbiAgICBxZSh0KTtcbiAgICByZXR1cm4gMTYzODY4MTtcbn07XG5cbm5zWzM4XSA9IHQgPT4ge1xuICAgIGlmICgzOCAhPT0gcWUodCkpIHJldHVybiAxNTcyODgzO1xuICAgIHFlKHQpO1xuICAgIHJldHVybiAxNjM4NjE0O1xufTtcblxubnNbMTI0XSA9IHQgPT4ge1xuICAgIGlmICgxMjQgIT09IHFlKHQpKSByZXR1cm4gMTU3Mjg4NDtcbiAgICBxZSh0KTtcbiAgICByZXR1cm4gMTYzODU0OTtcbn07XG5cbm5zWzQ2XSA9IHQgPT4ge1xuICAgIGlmIChxZSh0KSA8PSA1NyAmJiB0Lk8gPj0gNDgpIHJldHVybiBRZSh0LCB0cnVlKTtcbiAgICByZXR1cm4gMTYzOTM7XG59O1xuXG5uc1s2MF0gPSB0ID0+IHtcbiAgICBpZiAoNjEgIT09IHFlKHQpKSByZXR1cm4gMTYzODc0NztcbiAgICBxZSh0KTtcbiAgICByZXR1cm4gMTYzODc0OTtcbn07XG5cbm5zWzYyXSA9IHQgPT4ge1xuICAgIGlmICg2MSAhPT0gcWUodCkpIHJldHVybiAxNjM4NzQ4O1xuICAgIHFlKHQpO1xuICAgIHJldHVybiAxNjM4NzUwO1xufTtcblxubnNbMzddID0gZXMoMTYzODg4Nik7XG5cbm5zWzQwXSA9IGVzKDY3MTc1MSk7XG5cbm5zWzQxXSA9IGVzKDE4MzUwMTkpO1xuXG5uc1s0Ml0gPSBlcygxNjM4ODg1KTtcblxubnNbNDNdID0gZXMoNjIzMDA5KTtcblxubnNbNDRdID0gZXMoMTU3Mjg3Nik7XG5cbm5zWzQ1XSA9IGVzKDYyMzAxMCk7XG5cbm5zWzQ3XSA9IGVzKDE2Mzg4ODcpO1xuXG5uc1s1OF0gPSBlcygxNTcyODc5KTtcblxubnNbNjNdID0gZXMoMTU3Mjg4MCk7XG5cbm5zWzkxXSA9IGVzKDY3MTc1Nyk7XG5cbm5zWzkzXSA9IGVzKDE4MzUwMjIpO1xuXG5uc1sxMjNdID0gZXMoMTMxMDgwKTtcblxubnNbMTI1XSA9IGVzKDE4MzUwMTgpO1xuXG5sZXQgb3MgPSBudWxsO1xuXG5jb25zdCBocyA9IFtdO1xuXG5sZXQgY3MgPSBmYWxzZTtcblxuZnVuY3Rpb24gdXMoKSB7XG4gICAgY3MgPSBmYWxzZTtcbn1cblxuZnVuY3Rpb24gYXMoKSB7XG4gICAgY3MgPSB0cnVlO1xufVxuXG5mdW5jdGlvbiBscygpIHtcbiAgICByZXR1cm4gb3M7XG59XG5cbmZ1bmN0aW9uIGZzKHQpIHtcbiAgICBpZiAobnVsbCA9PSB0KSB0aHJvdyBuZXcgRXJyb3IoXCJBVVIwMjA2XCIpO1xuICAgIGlmIChudWxsID09IG9zKSB7XG4gICAgICAgIG9zID0gdDtcbiAgICAgICAgaHNbMF0gPSBvcztcbiAgICAgICAgY3MgPSB0cnVlO1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmIChvcyA9PT0gdCkgdGhyb3cgbmV3IEVycm9yKFwiQVVSMDIwN1wiKTtcbiAgICBocy5wdXNoKG9zKTtcbiAgICBvcyA9IHQ7XG4gICAgY3MgPSB0cnVlO1xufVxuXG5mdW5jdGlvbiBkcyh0KSB7XG4gICAgaWYgKG51bGwgPT0gdCkgdGhyb3cgbmV3IEVycm9yKFwiQVVSMDIwOFwiKTtcbiAgICBpZiAob3MgIT09IHQpIHRocm93IG5ldyBFcnJvcihcIkFVUjAyMDlcIik7XG4gICAgaHMucG9wKCk7XG4gICAgb3MgPSBocy5sZW5ndGggPiAwID8gaHNbaHMubGVuZ3RoIC0gMV0gOiBudWxsO1xuICAgIGNzID0gbnVsbCAhPSBvcztcbn1cblxuY29uc3QgdnMgPSBPYmplY3QuZnJlZXplKHtcbiAgICBnZXQgY3VycmVudCgpIHtcbiAgICAgICAgcmV0dXJuIG9zO1xuICAgIH0sXG4gICAgZ2V0IGNvbm5lY3RpbmcoKSB7XG4gICAgICAgIHJldHVybiBjcztcbiAgICB9LFxuICAgIGVudGVyOiBmcyxcbiAgICBleGl0OiBkcyxcbiAgICBwYXVzZTogdXMsXG4gICAgcmVzdW1lOiBhc1xufSk7XG5cbmNvbnN0IHBzID0gUmVmbGVjdC5nZXQ7XG5cbmNvbnN0IGdzID0gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZztcblxuY29uc3Qgd3MgPSBuZXcgV2Vha01hcDtcblxuZnVuY3Rpb24gYnModCkge1xuICAgIHN3aXRjaCAoZ3MuY2FsbCh0KSkge1xuICAgICAgY2FzZSBcIltvYmplY3QgT2JqZWN0XVwiOlxuICAgICAgY2FzZSBcIltvYmplY3QgQXJyYXldXCI6XG4gICAgICBjYXNlIFwiW29iamVjdCBNYXBdXCI6XG4gICAgICBjYXNlIFwiW29iamVjdCBTZXRdXCI6XG4gICAgICAgIHJldHVybiB0cnVlO1xuXG4gICAgICBkZWZhdWx0OlxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxufVxuXG5jb25zdCBFcyA9IFwiX19yYXdfX1wiO1xuXG5mdW5jdGlvbiBBcyh0KSB7XG4gICAgcmV0dXJuIGJzKHQpID8geXModCkgOiB0O1xufVxuXG5mdW5jdGlvbiB5cyh0KSB7XG4gICAgdmFyIGU7XG4gICAgcmV0dXJuIG51bGwgIT09IChlID0gd3MuZ2V0KHQpKSAmJiB2b2lkIDAgIT09IGUgPyBlIDogU3ModCk7XG59XG5cbmZ1bmN0aW9uIG1zKHQpIHtcbiAgICB2YXIgZTtcbiAgICByZXR1cm4gbnVsbCAhPT0gKGUgPSB0W0VzXSkgJiYgdm9pZCAwICE9PSBlID8gZSA6IHQ7XG59XG5cbmZ1bmN0aW9uIFVzKHQpIHtcbiAgICByZXR1cm4gYnModCkgJiYgdFtFc10gfHwgdDtcbn1cblxuZnVuY3Rpb24geHModCkge1xuICAgIHJldHVybiBcImNvbnN0cnVjdG9yXCIgPT09IHQgfHwgXCJfX3Byb3RvX19cIiA9PT0gdCB8fCBcIiRvYnNlcnZlcnNcIiA9PT0gdCB8fCB0ID09PSBTeW1ib2wudG9QcmltaXRpdmUgfHwgdCA9PT0gU3ltYm9sLnRvU3RyaW5nVGFnO1xufVxuXG5mdW5jdGlvbiBTcyh0KSB7XG4gICAgY29uc3QgZSA9IHQgaW5zdGFuY2VvZiBBcnJheSA/IENzIDogdCBpbnN0YW5jZW9mIE1hcCB8fCB0IGluc3RhbmNlb2YgU2V0ID8gWnMgOiBPcztcbiAgICBjb25zdCBzID0gbmV3IFByb3h5KHQsIGUpO1xuICAgIHdzLnNldCh0LCBzKTtcbiAgICByZXR1cm4gcztcbn1cblxuY29uc3QgT3MgPSB7XG4gICAgZ2V0KHQsIGUsIHMpIHtcbiAgICAgICAgaWYgKGUgPT09IEVzKSByZXR1cm4gdDtcbiAgICAgICAgY29uc3QgciA9IGxzKCk7XG4gICAgICAgIGlmICghY3MgfHwgeHMoZSkgfHwgbnVsbCA9PSByKSByZXR1cm4gcHModCwgZSwgcyk7XG4gICAgICAgIHIub2JzZXJ2ZSh0LCBlKTtcbiAgICAgICAgcmV0dXJuIEFzKHBzKHQsIGUsIHMpKTtcbiAgICB9XG59O1xuXG5jb25zdCBDcyA9IHtcbiAgICBnZXQodCwgZSwgcykge1xuICAgICAgICBpZiAoZSA9PT0gRXMpIHJldHVybiB0O1xuICAgICAgICBjb25zdCByID0gbHMoKTtcbiAgICAgICAgaWYgKCFjcyB8fCB4cyhlKSB8fCBudWxsID09IHIpIHJldHVybiBwcyh0LCBlLCBzKTtcbiAgICAgICAgc3dpdGNoIChlKSB7XG4gICAgICAgICAgY2FzZSBcImxlbmd0aFwiOlxuICAgICAgICAgICAgci5vYnNlcnZlKHQsIFwibGVuZ3RoXCIpO1xuICAgICAgICAgICAgcmV0dXJuIHQubGVuZ3RoO1xuXG4gICAgICAgICAgY2FzZSBcIm1hcFwiOlxuICAgICAgICAgICAgcmV0dXJuIGtzO1xuXG4gICAgICAgICAgY2FzZSBcImluY2x1ZGVzXCI6XG4gICAgICAgICAgICByZXR1cm4gTHM7XG5cbiAgICAgICAgICBjYXNlIFwiaW5kZXhPZlwiOlxuICAgICAgICAgICAgcmV0dXJuIFJzO1xuXG4gICAgICAgICAgY2FzZSBcImxhc3RJbmRleE9mXCI6XG4gICAgICAgICAgICByZXR1cm4gUHM7XG5cbiAgICAgICAgICBjYXNlIFwiZXZlcnlcIjpcbiAgICAgICAgICAgIHJldHVybiBCcztcblxuICAgICAgICAgIGNhc2UgXCJmaWx0ZXJcIjpcbiAgICAgICAgICAgIHJldHVybiAkcztcblxuICAgICAgICAgIGNhc2UgXCJmaW5kXCI6XG4gICAgICAgICAgICByZXR1cm4ganM7XG5cbiAgICAgICAgICBjYXNlIFwiZmluZEluZGV4XCI6XG4gICAgICAgICAgICByZXR1cm4gVHM7XG5cbiAgICAgICAgICBjYXNlIFwiZmxhdFwiOlxuICAgICAgICAgICAgcmV0dXJuIElzO1xuXG4gICAgICAgICAgY2FzZSBcImZsYXRNYXBcIjpcbiAgICAgICAgICAgIHJldHVybiBNcztcblxuICAgICAgICAgIGNhc2UgXCJqb2luXCI6XG4gICAgICAgICAgICByZXR1cm4gRHM7XG5cbiAgICAgICAgICBjYXNlIFwicHVzaFwiOlxuICAgICAgICAgICAgcmV0dXJuIFZzO1xuXG4gICAgICAgICAgY2FzZSBcInBvcFwiOlxuICAgICAgICAgICAgcmV0dXJuIEZzO1xuXG4gICAgICAgICAgY2FzZSBcInJlZHVjZVwiOlxuICAgICAgICAgICAgcmV0dXJuIFdzO1xuXG4gICAgICAgICAgY2FzZSBcInJlZHVjZVJpZ2h0XCI6XG4gICAgICAgICAgICByZXR1cm4gR3M7XG5cbiAgICAgICAgICBjYXNlIFwicmV2ZXJzZVwiOlxuICAgICAgICAgICAgcmV0dXJuIEhzO1xuXG4gICAgICAgICAgY2FzZSBcInNoaWZ0XCI6XG4gICAgICAgICAgICByZXR1cm4gTnM7XG5cbiAgICAgICAgICBjYXNlIFwidW5zaGlmdFwiOlxuICAgICAgICAgICAgcmV0dXJuIEtzO1xuXG4gICAgICAgICAgY2FzZSBcInNsaWNlXCI6XG4gICAgICAgICAgICByZXR1cm4genM7XG5cbiAgICAgICAgICBjYXNlIFwic3BsaWNlXCI6XG4gICAgICAgICAgICByZXR1cm4gcXM7XG5cbiAgICAgICAgICBjYXNlIFwic29tZVwiOlxuICAgICAgICAgICAgcmV0dXJuIFFzO1xuXG4gICAgICAgICAgY2FzZSBcInNvcnRcIjpcbiAgICAgICAgICAgIHJldHVybiBfcztcblxuICAgICAgICAgIGNhc2UgXCJrZXlzXCI6XG4gICAgICAgICAgICByZXR1cm4gaXI7XG5cbiAgICAgICAgICBjYXNlIFwidmFsdWVzXCI6XG4gICAgICAgICAgY2FzZSBTeW1ib2wuaXRlcmF0b3I6XG4gICAgICAgICAgICByZXR1cm4gbnI7XG5cbiAgICAgICAgICBjYXNlIFwiZW50cmllc1wiOlxuICAgICAgICAgICAgcmV0dXJuIG9yO1xuICAgICAgICB9XG4gICAgICAgIHIub2JzZXJ2ZSh0LCBlKTtcbiAgICAgICAgcmV0dXJuIEFzKHBzKHQsIGUsIHMpKTtcbiAgICB9LFxuICAgIG93bktleXModCkge1xuICAgICAgICB2YXIgZTtcbiAgICAgICAgbnVsbCA9PT0gKGUgPSBscygpKSB8fCB2b2lkIDAgPT09IGUgPyB2b2lkIDAgOiBlLm9ic2VydmUodCwgXCJsZW5ndGhcIik7XG4gICAgICAgIHJldHVybiBSZWZsZWN0Lm93bktleXModCk7XG4gICAgfVxufTtcblxuZnVuY3Rpb24ga3ModCwgZSkge1xuICAgIHZhciBzO1xuICAgIGNvbnN0IHIgPSBtcyh0aGlzKTtcbiAgICBjb25zdCBpID0gci5tYXAoKChzLCByKSA9PiBVcyh0LmNhbGwoZSwgQXMocyksIHIsIHRoaXMpKSkpO1xuICAgIG51bGwgPT09IChzID0gbHMoKSkgfHwgdm9pZCAwID09PSBzID8gdm9pZCAwIDogcy5vYnNlcnZlQ29sbGVjdGlvbihyKTtcbiAgICByZXR1cm4gQXMoaSk7XG59XG5cbmZ1bmN0aW9uIEJzKHQsIGUpIHtcbiAgICB2YXIgcztcbiAgICBjb25zdCByID0gbXModGhpcyk7XG4gICAgY29uc3QgaSA9IHIuZXZlcnkoKChzLCByKSA9PiB0LmNhbGwoZSwgQXMocyksIHIsIHRoaXMpKSk7XG4gICAgbnVsbCA9PT0gKHMgPSBscygpKSB8fCB2b2lkIDAgPT09IHMgPyB2b2lkIDAgOiBzLm9ic2VydmVDb2xsZWN0aW9uKHIpO1xuICAgIHJldHVybiBpO1xufVxuXG5mdW5jdGlvbiAkcyh0LCBlKSB7XG4gICAgdmFyIHM7XG4gICAgY29uc3QgciA9IG1zKHRoaXMpO1xuICAgIGNvbnN0IGkgPSByLmZpbHRlcigoKHMsIHIpID0+IFVzKHQuY2FsbChlLCBBcyhzKSwgciwgdGhpcykpKSk7XG4gICAgbnVsbCA9PT0gKHMgPSBscygpKSB8fCB2b2lkIDAgPT09IHMgPyB2b2lkIDAgOiBzLm9ic2VydmVDb2xsZWN0aW9uKHIpO1xuICAgIHJldHVybiBBcyhpKTtcbn1cblxuZnVuY3Rpb24gTHModCkge1xuICAgIHZhciBlO1xuICAgIGNvbnN0IHMgPSBtcyh0aGlzKTtcbiAgICBjb25zdCByID0gcy5pbmNsdWRlcyhVcyh0KSk7XG4gICAgbnVsbCA9PT0gKGUgPSBscygpKSB8fCB2b2lkIDAgPT09IGUgPyB2b2lkIDAgOiBlLm9ic2VydmVDb2xsZWN0aW9uKHMpO1xuICAgIHJldHVybiByO1xufVxuXG5mdW5jdGlvbiBScyh0KSB7XG4gICAgdmFyIGU7XG4gICAgY29uc3QgcyA9IG1zKHRoaXMpO1xuICAgIGNvbnN0IHIgPSBzLmluZGV4T2YoVXModCkpO1xuICAgIG51bGwgPT09IChlID0gbHMoKSkgfHwgdm9pZCAwID09PSBlID8gdm9pZCAwIDogZS5vYnNlcnZlQ29sbGVjdGlvbihzKTtcbiAgICByZXR1cm4gcjtcbn1cblxuZnVuY3Rpb24gUHModCkge1xuICAgIHZhciBlO1xuICAgIGNvbnN0IHMgPSBtcyh0aGlzKTtcbiAgICBjb25zdCByID0gcy5sYXN0SW5kZXhPZihVcyh0KSk7XG4gICAgbnVsbCA9PT0gKGUgPSBscygpKSB8fCB2b2lkIDAgPT09IGUgPyB2b2lkIDAgOiBlLm9ic2VydmVDb2xsZWN0aW9uKHMpO1xuICAgIHJldHVybiByO1xufVxuXG5mdW5jdGlvbiBUcyh0LCBlKSB7XG4gICAgdmFyIHM7XG4gICAgY29uc3QgciA9IG1zKHRoaXMpO1xuICAgIGNvbnN0IGkgPSByLmZpbmRJbmRleCgoKHMsIHIpID0+IFVzKHQuY2FsbChlLCBBcyhzKSwgciwgdGhpcykpKSk7XG4gICAgbnVsbCA9PT0gKHMgPSBscygpKSB8fCB2b2lkIDAgPT09IHMgPyB2b2lkIDAgOiBzLm9ic2VydmVDb2xsZWN0aW9uKHIpO1xuICAgIHJldHVybiBpO1xufVxuXG5mdW5jdGlvbiBqcyh0LCBlKSB7XG4gICAgdmFyIHM7XG4gICAgY29uc3QgciA9IG1zKHRoaXMpO1xuICAgIGNvbnN0IGkgPSByLmZpbmQoKChlLCBzKSA9PiB0KEFzKGUpLCBzLCB0aGlzKSksIGUpO1xuICAgIG51bGwgPT09IChzID0gbHMoKSkgfHwgdm9pZCAwID09PSBzID8gdm9pZCAwIDogcy5vYnNlcnZlQ29sbGVjdGlvbihyKTtcbiAgICByZXR1cm4gQXMoaSk7XG59XG5cbmZ1bmN0aW9uIElzKCkge1xuICAgIHZhciB0O1xuICAgIGNvbnN0IGUgPSBtcyh0aGlzKTtcbiAgICBudWxsID09PSAodCA9IGxzKCkpIHx8IHZvaWQgMCA9PT0gdCA/IHZvaWQgMCA6IHQub2JzZXJ2ZUNvbGxlY3Rpb24oZSk7XG4gICAgcmV0dXJuIEFzKGUuZmxhdCgpKTtcbn1cblxuZnVuY3Rpb24gTXModCwgZSkge1xuICAgIHZhciBzO1xuICAgIGNvbnN0IHIgPSBtcyh0aGlzKTtcbiAgICBudWxsID09PSAocyA9IGxzKCkpIHx8IHZvaWQgMCA9PT0gcyA/IHZvaWQgMCA6IHMub2JzZXJ2ZUNvbGxlY3Rpb24ocik7XG4gICAgcmV0dXJuIHlzKHIuZmxhdE1hcCgoKHMsIHIpID0+IEFzKHQuY2FsbChlLCBBcyhzKSwgciwgdGhpcykpKSkpO1xufVxuXG5mdW5jdGlvbiBEcyh0KSB7XG4gICAgdmFyIGU7XG4gICAgY29uc3QgcyA9IG1zKHRoaXMpO1xuICAgIG51bGwgPT09IChlID0gbHMoKSkgfHwgdm9pZCAwID09PSBlID8gdm9pZCAwIDogZS5vYnNlcnZlQ29sbGVjdGlvbihzKTtcbiAgICByZXR1cm4gcy5qb2luKHQpO1xufVxuXG5mdW5jdGlvbiBGcygpIHtcbiAgICByZXR1cm4gQXMobXModGhpcykucG9wKCkpO1xufVxuXG5mdW5jdGlvbiBWcyguLi50KSB7XG4gICAgcmV0dXJuIG1zKHRoaXMpLnB1c2goLi4udCk7XG59XG5cbmZ1bmN0aW9uIE5zKCkge1xuICAgIHJldHVybiBBcyhtcyh0aGlzKS5zaGlmdCgpKTtcbn1cblxuZnVuY3Rpb24gS3MoLi4udCkge1xuICAgIHJldHVybiBtcyh0aGlzKS51bnNoaWZ0KC4uLnQpO1xufVxuXG5mdW5jdGlvbiBxcyguLi50KSB7XG4gICAgcmV0dXJuIEFzKG1zKHRoaXMpLnNwbGljZSguLi50KSk7XG59XG5cbmZ1bmN0aW9uIEhzKC4uLnQpIHtcbiAgICB2YXIgZTtcbiAgICBjb25zdCBzID0gbXModGhpcyk7XG4gICAgY29uc3QgciA9IHMucmV2ZXJzZSgpO1xuICAgIG51bGwgPT09IChlID0gbHMoKSkgfHwgdm9pZCAwID09PSBlID8gdm9pZCAwIDogZS5vYnNlcnZlQ29sbGVjdGlvbihzKTtcbiAgICByZXR1cm4gQXMocik7XG59XG5cbmZ1bmN0aW9uIFFzKHQsIGUpIHtcbiAgICB2YXIgcztcbiAgICBjb25zdCByID0gbXModGhpcyk7XG4gICAgY29uc3QgaSA9IHIuc29tZSgoKHMsIHIpID0+IFVzKHQuY2FsbChlLCBBcyhzKSwgciwgdGhpcykpKSk7XG4gICAgbnVsbCA9PT0gKHMgPSBscygpKSB8fCB2b2lkIDAgPT09IHMgPyB2b2lkIDAgOiBzLm9ic2VydmVDb2xsZWN0aW9uKHIpO1xuICAgIHJldHVybiBpO1xufVxuXG5mdW5jdGlvbiBfcyh0KSB7XG4gICAgdmFyIGU7XG4gICAgY29uc3QgcyA9IG1zKHRoaXMpO1xuICAgIGNvbnN0IHIgPSBzLnNvcnQodCk7XG4gICAgbnVsbCA9PT0gKGUgPSBscygpKSB8fCB2b2lkIDAgPT09IGUgPyB2b2lkIDAgOiBlLm9ic2VydmVDb2xsZWN0aW9uKHMpO1xuICAgIHJldHVybiBBcyhyKTtcbn1cblxuZnVuY3Rpb24genModCwgZSkge1xuICAgIHZhciBzO1xuICAgIGNvbnN0IHIgPSBtcyh0aGlzKTtcbiAgICBudWxsID09PSAocyA9IGxzKCkpIHx8IHZvaWQgMCA9PT0gcyA/IHZvaWQgMCA6IHMub2JzZXJ2ZUNvbGxlY3Rpb24ocik7XG4gICAgcmV0dXJuIHlzKHIuc2xpY2UodCwgZSkpO1xufVxuXG5mdW5jdGlvbiBXcyh0LCBlKSB7XG4gICAgdmFyIHM7XG4gICAgY29uc3QgciA9IG1zKHRoaXMpO1xuICAgIGNvbnN0IGkgPSByLnJlZHVjZSgoKGUsIHMsIHIpID0+IHQoZSwgQXMocyksIHIsIHRoaXMpKSwgZSk7XG4gICAgbnVsbCA9PT0gKHMgPSBscygpKSB8fCB2b2lkIDAgPT09IHMgPyB2b2lkIDAgOiBzLm9ic2VydmVDb2xsZWN0aW9uKHIpO1xuICAgIHJldHVybiBBcyhpKTtcbn1cblxuZnVuY3Rpb24gR3ModCwgZSkge1xuICAgIHZhciBzO1xuICAgIGNvbnN0IHIgPSBtcyh0aGlzKTtcbiAgICBjb25zdCBpID0gci5yZWR1Y2VSaWdodCgoKGUsIHMsIHIpID0+IHQoZSwgQXMocyksIHIsIHRoaXMpKSwgZSk7XG4gICAgbnVsbCA9PT0gKHMgPSBscygpKSB8fCB2b2lkIDAgPT09IHMgPyB2b2lkIDAgOiBzLm9ic2VydmVDb2xsZWN0aW9uKHIpO1xuICAgIHJldHVybiBBcyhpKTtcbn1cblxuY29uc3QgWnMgPSB7XG4gICAgZ2V0KHQsIGUsIHMpIHtcbiAgICAgICAgaWYgKGUgPT09IEVzKSByZXR1cm4gdDtcbiAgICAgICAgY29uc3QgciA9IGxzKCk7XG4gICAgICAgIGlmICghY3MgfHwgeHMoZSkgfHwgbnVsbCA9PSByKSByZXR1cm4gcHModCwgZSwgcyk7XG4gICAgICAgIHN3aXRjaCAoZSkge1xuICAgICAgICAgIGNhc2UgXCJzaXplXCI6XG4gICAgICAgICAgICByLm9ic2VydmUodCwgXCJzaXplXCIpO1xuICAgICAgICAgICAgcmV0dXJuIHQuc2l6ZTtcblxuICAgICAgICAgIGNhc2UgXCJjbGVhclwiOlxuICAgICAgICAgICAgcmV0dXJuIHNyO1xuXG4gICAgICAgICAgY2FzZSBcImRlbGV0ZVwiOlxuICAgICAgICAgICAgcmV0dXJuIHJyO1xuXG4gICAgICAgICAgY2FzZSBcImZvckVhY2hcIjpcbiAgICAgICAgICAgIHJldHVybiBKcztcblxuICAgICAgICAgIGNhc2UgXCJhZGRcIjpcbiAgICAgICAgICAgIGlmICh0IGluc3RhbmNlb2YgU2V0KSByZXR1cm4gZXI7XG4gICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgIGNhc2UgXCJnZXRcIjpcbiAgICAgICAgICAgIGlmICh0IGluc3RhbmNlb2YgTWFwKSByZXR1cm4gWXM7XG4gICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgIGNhc2UgXCJzZXRcIjpcbiAgICAgICAgICAgIGlmICh0IGluc3RhbmNlb2YgTWFwKSByZXR1cm4gdHI7XG4gICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgIGNhc2UgXCJoYXNcIjpcbiAgICAgICAgICAgIHJldHVybiBYcztcblxuICAgICAgICAgIGNhc2UgXCJrZXlzXCI6XG4gICAgICAgICAgICByZXR1cm4gaXI7XG5cbiAgICAgICAgICBjYXNlIFwidmFsdWVzXCI6XG4gICAgICAgICAgICByZXR1cm4gbnI7XG5cbiAgICAgICAgICBjYXNlIFwiZW50cmllc1wiOlxuICAgICAgICAgICAgcmV0dXJuIG9yO1xuXG4gICAgICAgICAgY2FzZSBTeW1ib2wuaXRlcmF0b3I6XG4gICAgICAgICAgICByZXR1cm4gdCBpbnN0YW5jZW9mIE1hcCA/IG9yIDogbnI7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIEFzKHBzKHQsIGUsIHMpKTtcbiAgICB9XG59O1xuXG5mdW5jdGlvbiBKcyh0LCBlKSB7XG4gICAgdmFyIHM7XG4gICAgY29uc3QgciA9IG1zKHRoaXMpO1xuICAgIG51bGwgPT09IChzID0gbHMoKSkgfHwgdm9pZCAwID09PSBzID8gdm9pZCAwIDogcy5vYnNlcnZlQ29sbGVjdGlvbihyKTtcbiAgICByZXR1cm4gci5mb3JFYWNoKCgocywgcikgPT4ge1xuICAgICAgICB0LmNhbGwoZSwgQXMocyksIEFzKHIpLCB0aGlzKTtcbiAgICB9KSk7XG59XG5cbmZ1bmN0aW9uIFhzKHQpIHtcbiAgICB2YXIgZTtcbiAgICBjb25zdCBzID0gbXModGhpcyk7XG4gICAgbnVsbCA9PT0gKGUgPSBscygpKSB8fCB2b2lkIDAgPT09IGUgPyB2b2lkIDAgOiBlLm9ic2VydmVDb2xsZWN0aW9uKHMpO1xuICAgIHJldHVybiBzLmhhcyhVcyh0KSk7XG59XG5cbmZ1bmN0aW9uIFlzKHQpIHtcbiAgICB2YXIgZTtcbiAgICBjb25zdCBzID0gbXModGhpcyk7XG4gICAgbnVsbCA9PT0gKGUgPSBscygpKSB8fCB2b2lkIDAgPT09IGUgPyB2b2lkIDAgOiBlLm9ic2VydmVDb2xsZWN0aW9uKHMpO1xuICAgIHJldHVybiBBcyhzLmdldChVcyh0KSkpO1xufVxuXG5mdW5jdGlvbiB0cih0LCBlKSB7XG4gICAgcmV0dXJuIEFzKG1zKHRoaXMpLnNldChVcyh0KSwgVXMoZSkpKTtcbn1cblxuZnVuY3Rpb24gZXIodCkge1xuICAgIHJldHVybiBBcyhtcyh0aGlzKS5hZGQoVXModCkpKTtcbn1cblxuZnVuY3Rpb24gc3IoKSB7XG4gICAgcmV0dXJuIEFzKG1zKHRoaXMpLmNsZWFyKCkpO1xufVxuXG5mdW5jdGlvbiBycih0KSB7XG4gICAgcmV0dXJuIEFzKG1zKHRoaXMpLmRlbGV0ZShVcyh0KSkpO1xufVxuXG5mdW5jdGlvbiBpcigpIHtcbiAgICB2YXIgdDtcbiAgICBjb25zdCBlID0gbXModGhpcyk7XG4gICAgbnVsbCA9PT0gKHQgPSBscygpKSB8fCB2b2lkIDAgPT09IHQgPyB2b2lkIDAgOiB0Lm9ic2VydmVDb2xsZWN0aW9uKGUpO1xuICAgIGNvbnN0IHMgPSBlLmtleXMoKTtcbiAgICByZXR1cm4ge1xuICAgICAgICBuZXh0KCkge1xuICAgICAgICAgICAgY29uc3QgdCA9IHMubmV4dCgpO1xuICAgICAgICAgICAgY29uc3QgZSA9IHQudmFsdWU7XG4gICAgICAgICAgICBjb25zdCByID0gdC5kb25lO1xuICAgICAgICAgICAgcmV0dXJuIHIgPyB7XG4gICAgICAgICAgICAgICAgdmFsdWU6IHZvaWQgMCxcbiAgICAgICAgICAgICAgICBkb25lOiByXG4gICAgICAgICAgICB9IDoge1xuICAgICAgICAgICAgICAgIHZhbHVlOiBBcyhlKSxcbiAgICAgICAgICAgICAgICBkb25lOiByXG4gICAgICAgICAgICB9O1xuICAgICAgICB9LFxuICAgICAgICBbU3ltYm9sLml0ZXJhdG9yXSgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICB9XG4gICAgfTtcbn1cblxuZnVuY3Rpb24gbnIoKSB7XG4gICAgdmFyIHQ7XG4gICAgY29uc3QgZSA9IG1zKHRoaXMpO1xuICAgIG51bGwgPT09ICh0ID0gbHMoKSkgfHwgdm9pZCAwID09PSB0ID8gdm9pZCAwIDogdC5vYnNlcnZlQ29sbGVjdGlvbihlKTtcbiAgICBjb25zdCBzID0gZS52YWx1ZXMoKTtcbiAgICByZXR1cm4ge1xuICAgICAgICBuZXh0KCkge1xuICAgICAgICAgICAgY29uc3QgdCA9IHMubmV4dCgpO1xuICAgICAgICAgICAgY29uc3QgZSA9IHQudmFsdWU7XG4gICAgICAgICAgICBjb25zdCByID0gdC5kb25lO1xuICAgICAgICAgICAgcmV0dXJuIHIgPyB7XG4gICAgICAgICAgICAgICAgdmFsdWU6IHZvaWQgMCxcbiAgICAgICAgICAgICAgICBkb25lOiByXG4gICAgICAgICAgICB9IDoge1xuICAgICAgICAgICAgICAgIHZhbHVlOiBBcyhlKSxcbiAgICAgICAgICAgICAgICBkb25lOiByXG4gICAgICAgICAgICB9O1xuICAgICAgICB9LFxuICAgICAgICBbU3ltYm9sLml0ZXJhdG9yXSgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICB9XG4gICAgfTtcbn1cblxuZnVuY3Rpb24gb3IoKSB7XG4gICAgdmFyIHQ7XG4gICAgY29uc3QgZSA9IG1zKHRoaXMpO1xuICAgIG51bGwgPT09ICh0ID0gbHMoKSkgfHwgdm9pZCAwID09PSB0ID8gdm9pZCAwIDogdC5vYnNlcnZlQ29sbGVjdGlvbihlKTtcbiAgICBjb25zdCBzID0gZS5lbnRyaWVzKCk7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgbmV4dCgpIHtcbiAgICAgICAgICAgIGNvbnN0IHQgPSBzLm5leHQoKTtcbiAgICAgICAgICAgIGNvbnN0IGUgPSB0LnZhbHVlO1xuICAgICAgICAgICAgY29uc3QgciA9IHQuZG9uZTtcbiAgICAgICAgICAgIHJldHVybiByID8ge1xuICAgICAgICAgICAgICAgIHZhbHVlOiB2b2lkIDAsXG4gICAgICAgICAgICAgICAgZG9uZTogclxuICAgICAgICAgICAgfSA6IHtcbiAgICAgICAgICAgICAgICB2YWx1ZTogWyBBcyhlWzBdKSwgQXMoZVsxXSkgXSxcbiAgICAgICAgICAgICAgICBkb25lOiByXG4gICAgICAgICAgICB9O1xuICAgICAgICB9LFxuICAgICAgICBbU3ltYm9sLml0ZXJhdG9yXSgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICB9XG4gICAgfTtcbn1cblxuY29uc3QgaHIgPSBPYmplY3QuZnJlZXplKHtcbiAgICBnZXRQcm94eTogeXMsXG4gICAgZ2V0UmF3OiBtcyxcbiAgICB3cmFwOiBBcyxcbiAgICB1bndyYXA6IFVzLFxuICAgIHJhd0tleTogRXNcbn0pO1xuXG5jbGFzcyBDb21wdXRlZE9ic2VydmVyIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlLCBzLCByLCBpKSB7XG4gICAgICAgIHRoaXMuaW50ZXJjZXB0b3IgPSB0aGlzO1xuICAgICAgICB0aGlzLnR5cGUgPSAxO1xuICAgICAgICB0aGlzLnYgPSB2b2lkIDA7XG4gICAgICAgIHRoaXMub3YgPSB2b2lkIDA7XG4gICAgICAgIHRoaXMuaXIgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5EID0gZmFsc2U7XG4gICAgICAgIHRoaXMubyA9IHQ7XG4gICAgICAgIHRoaXMuZ2V0ID0gZTtcbiAgICAgICAgdGhpcy5zZXQgPSBzO1xuICAgICAgICB0aGlzLnVwID0gcjtcbiAgICAgICAgdGhpcy5vTCA9IGk7XG4gICAgfVxuICAgIHN0YXRpYyBjcmVhdGUodCwgZSwgcywgciwgaSkge1xuICAgICAgICBjb25zdCBuID0gcy5nZXQ7XG4gICAgICAgIGNvbnN0IG8gPSBzLnNldDtcbiAgICAgICAgY29uc3QgaCA9IG5ldyBDb21wdXRlZE9ic2VydmVyKHQsIG4sIG8sIGksIHIpO1xuICAgICAgICBjb25zdCBjID0gKCkgPT4gaC5nZXRWYWx1ZSgpO1xuICAgICAgICBjLmdldE9ic2VydmVyID0gKCkgPT4gaDtcbiAgICAgICAgdih0LCBlLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiBzLmVudW1lcmFibGUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICBnZXQ6IGMsXG4gICAgICAgICAgICBzZXQ6IHQgPT4ge1xuICAgICAgICAgICAgICAgIGguc2V0VmFsdWUodCwgMCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gaDtcbiAgICB9XG4gICAgZ2V0VmFsdWUoKSB7XG4gICAgICAgIGlmICgwID09PSB0aGlzLnN1YnMuY291bnQpIHJldHVybiB0aGlzLmdldC5jYWxsKHRoaXMubywgdGhpcyk7XG4gICAgICAgIGlmICh0aGlzLkQpIHtcbiAgICAgICAgICAgIHRoaXMuY29tcHV0ZSgpO1xuICAgICAgICAgICAgdGhpcy5EID0gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMudjtcbiAgICB9XG4gICAgc2V0VmFsdWUodCwgZSkge1xuICAgICAgICBpZiAocCh0aGlzLnNldCkpIHtcbiAgICAgICAgICAgIGlmICh0ICE9PSB0aGlzLnYpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmlyID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB0aGlzLnNldC5jYWxsKHRoaXMubywgdCk7XG4gICAgICAgICAgICAgICAgdGhpcy5pciA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIHRoaXMucnVuKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB0aHJvdyBuZXcgRXJyb3IoXCJBVVIwMjIxXCIpO1xuICAgIH1cbiAgICBoYW5kbGVDaGFuZ2UoKSB7XG4gICAgICAgIHRoaXMuRCA9IHRydWU7XG4gICAgICAgIGlmICh0aGlzLnN1YnMuY291bnQgPiAwKSB0aGlzLnJ1bigpO1xuICAgIH1cbiAgICBoYW5kbGVDb2xsZWN0aW9uQ2hhbmdlKCkge1xuICAgICAgICB0aGlzLkQgPSB0cnVlO1xuICAgICAgICBpZiAodGhpcy5zdWJzLmNvdW50ID4gMCkgdGhpcy5ydW4oKTtcbiAgICB9XG4gICAgc3Vic2NyaWJlKHQpIHtcbiAgICAgICAgaWYgKHRoaXMuc3Vicy5hZGQodCkgJiYgMSA9PT0gdGhpcy5zdWJzLmNvdW50KSB7XG4gICAgICAgICAgICB0aGlzLmNvbXB1dGUoKTtcbiAgICAgICAgICAgIHRoaXMuRCA9IGZhbHNlO1xuICAgICAgICB9XG4gICAgfVxuICAgIHVuc3Vic2NyaWJlKHQpIHtcbiAgICAgICAgaWYgKHRoaXMuc3Vicy5yZW1vdmUodCkgJiYgMCA9PT0gdGhpcy5zdWJzLmNvdW50KSB7XG4gICAgICAgICAgICB0aGlzLkQgPSB0cnVlO1xuICAgICAgICAgICAgdGhpcy5vYnMuY2xlYXJBbGwoKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBmbHVzaCgpIHtcbiAgICAgICAgY3IgPSB0aGlzLm92O1xuICAgICAgICB0aGlzLm92ID0gdGhpcy52O1xuICAgICAgICB0aGlzLnN1YnMubm90aWZ5KHRoaXMudiwgY3IsIDApO1xuICAgIH1cbiAgICBydW4oKSB7XG4gICAgICAgIGlmICh0aGlzLmlyKSByZXR1cm47XG4gICAgICAgIGNvbnN0IHQgPSB0aGlzLnY7XG4gICAgICAgIGNvbnN0IGUgPSB0aGlzLmNvbXB1dGUoKTtcbiAgICAgICAgdGhpcy5EID0gZmFsc2U7XG4gICAgICAgIGlmICghT2JqZWN0LmlzKGUsIHQpKSB7XG4gICAgICAgICAgICB0aGlzLm92ID0gdDtcbiAgICAgICAgICAgIHRoaXMucXVldWUuYWRkKHRoaXMpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGNvbXB1dGUoKSB7XG4gICAgICAgIHRoaXMuaXIgPSB0cnVlO1xuICAgICAgICB0aGlzLm9icy52ZXJzaW9uKys7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBmcyh0aGlzKTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnYgPSBVcyh0aGlzLmdldC5jYWxsKHRoaXMudXAgPyBBcyh0aGlzLm8pIDogdGhpcy5vLCB0aGlzKSk7XG4gICAgICAgIH0gZmluYWxseSB7XG4gICAgICAgICAgICB0aGlzLm9icy5jbGVhcigpO1xuICAgICAgICAgICAgdGhpcy5pciA9IGZhbHNlO1xuICAgICAgICAgICAgZHModGhpcyk7XG4gICAgICAgIH1cbiAgICB9XG59XG5cbkVlKENvbXB1dGVkT2JzZXJ2ZXIpO1xuXG5ydChDb21wdXRlZE9ic2VydmVyKTtcblxuY3QoQ29tcHV0ZWRPYnNlcnZlcik7XG5cbmxldCBjcjtcblxuY29uc3QgdXIgPSByLmNyZWF0ZUludGVyZmFjZShcIklEaXJ0eUNoZWNrZXJcIiwgKHQgPT4gdC5zaW5nbGV0b24oRGlydHlDaGVja2VyKSkpO1xuXG5jb25zdCBhciA9IHtcbiAgICB0aW1lb3V0c1BlckNoZWNrOiAyNSxcbiAgICBkaXNhYmxlZDogZmFsc2UsXG4gICAgdGhyb3c6IGZhbHNlLFxuICAgIHJlc2V0VG9EZWZhdWx0KCkge1xuICAgICAgICB0aGlzLnRpbWVvdXRzUGVyQ2hlY2sgPSA2O1xuICAgICAgICB0aGlzLmRpc2FibGVkID0gZmFsc2U7XG4gICAgICAgIHRoaXMudGhyb3cgPSBmYWxzZTtcbiAgICB9XG59O1xuXG5jb25zdCBsciA9IHtcbiAgICBwZXJzaXN0ZW50OiB0cnVlXG59O1xuXG5jbGFzcyBEaXJ0eUNoZWNrZXIge1xuICAgIGNvbnN0cnVjdG9yKHQpIHtcbiAgICAgICAgdGhpcy5wID0gdDtcbiAgICAgICAgdGhpcy50cmFja2VkID0gW107XG4gICAgICAgIHRoaXMuVCA9IG51bGw7XG4gICAgICAgIHRoaXMuaiA9IDA7XG4gICAgICAgIHRoaXMuY2hlY2sgPSAoKSA9PiB7XG4gICAgICAgICAgICBpZiAoYXIuZGlzYWJsZWQpIHJldHVybjtcbiAgICAgICAgICAgIGlmICgrK3RoaXMuaiA8IGFyLnRpbWVvdXRzUGVyQ2hlY2spIHJldHVybjtcbiAgICAgICAgICAgIHRoaXMuaiA9IDA7XG4gICAgICAgICAgICBjb25zdCB0ID0gdGhpcy50cmFja2VkO1xuICAgICAgICAgICAgY29uc3QgZSA9IHQubGVuZ3RoO1xuICAgICAgICAgICAgbGV0IHM7XG4gICAgICAgICAgICBsZXQgciA9IDA7XG4gICAgICAgICAgICBmb3IgKDtyIDwgZTsgKytyKSB7XG4gICAgICAgICAgICAgICAgcyA9IHRbcl07XG4gICAgICAgICAgICAgICAgaWYgKHMuaXNEaXJ0eSgpKSB0aGlzLnF1ZXVlLmFkZChzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICB9XG4gICAgY3JlYXRlUHJvcGVydHkodCwgZSkge1xuICAgICAgICBpZiAoYXIudGhyb3cpIHRocm93IG5ldyBFcnJvcihgQVVSMDIyMjoke2V9YCk7XG4gICAgICAgIHJldHVybiBuZXcgRGlydHlDaGVja1Byb3BlcnR5KHRoaXMsIHQsIGUpO1xuICAgIH1cbiAgICBhZGRQcm9wZXJ0eSh0KSB7XG4gICAgICAgIHRoaXMudHJhY2tlZC5wdXNoKHQpO1xuICAgICAgICBpZiAoMSA9PT0gdGhpcy50cmFja2VkLmxlbmd0aCkgdGhpcy5UID0gdGhpcy5wLnRhc2tRdWV1ZS5xdWV1ZVRhc2sodGhpcy5jaGVjaywgbHIpO1xuICAgIH1cbiAgICByZW1vdmVQcm9wZXJ0eSh0KSB7XG4gICAgICAgIHRoaXMudHJhY2tlZC5zcGxpY2UodGhpcy50cmFja2VkLmluZGV4T2YodCksIDEpO1xuICAgICAgICBpZiAoMCA9PT0gdGhpcy50cmFja2VkLmxlbmd0aCkge1xuICAgICAgICAgICAgdGhpcy5ULmNhbmNlbCgpO1xuICAgICAgICAgICAgdGhpcy5UID0gbnVsbDtcbiAgICAgICAgfVxuICAgIH1cbn1cblxuRGlydHlDaGVja2VyLmluamVjdCA9IFsgbCBdO1xuXG5jdChEaXJ0eUNoZWNrZXIpO1xuXG5jbGFzcyBEaXJ0eUNoZWNrUHJvcGVydHkge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUsIHMpIHtcbiAgICAgICAgdGhpcy5vYmogPSBlO1xuICAgICAgICB0aGlzLmtleSA9IHM7XG4gICAgICAgIHRoaXMudHlwZSA9IDA7XG4gICAgICAgIHRoaXMub3YgPSB2b2lkIDA7XG4gICAgICAgIHRoaXMuSSA9IHQ7XG4gICAgfVxuICAgIGdldFZhbHVlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5vYmpbdGhpcy5rZXldO1xuICAgIH1cbiAgICBzZXRWYWx1ZSh0LCBlKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgVHJ5aW5nIHRvIHNldCB2YWx1ZSBmb3IgcHJvcGVydHkgJHt0aGlzLmtleX0gaW4gZGlydHkgY2hlY2tlcmApO1xuICAgIH1cbiAgICBpc0RpcnR5KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5vdiAhPT0gdGhpcy5vYmpbdGhpcy5rZXldO1xuICAgIH1cbiAgICBmbHVzaCgpIHtcbiAgICAgICAgY29uc3QgdCA9IHRoaXMub3Y7XG4gICAgICAgIGNvbnN0IGUgPSB0aGlzLmdldFZhbHVlKCk7XG4gICAgICAgIHRoaXMub3YgPSBlO1xuICAgICAgICB0aGlzLnN1YnMubm90aWZ5KGUsIHQsIDApO1xuICAgIH1cbiAgICBzdWJzY3JpYmUodCkge1xuICAgICAgICBpZiAodGhpcy5zdWJzLmFkZCh0KSAmJiAxID09PSB0aGlzLnN1YnMuY291bnQpIHtcbiAgICAgICAgICAgIHRoaXMub3YgPSB0aGlzLm9ialt0aGlzLmtleV07XG4gICAgICAgICAgICB0aGlzLkkuYWRkUHJvcGVydHkodGhpcyk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgdW5zdWJzY3JpYmUodCkge1xuICAgICAgICBpZiAodGhpcy5zdWJzLnJlbW92ZSh0KSAmJiAwID09PSB0aGlzLnN1YnMuY291bnQpIHRoaXMuSS5yZW1vdmVQcm9wZXJ0eSh0aGlzKTtcbiAgICB9XG59XG5cbnJ0KERpcnR5Q2hlY2tQcm9wZXJ0eSk7XG5cbmNsYXNzIFByaW1pdGl2ZU9ic2VydmVyIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlKSB7XG4gICAgICAgIHRoaXMudHlwZSA9IDA7XG4gICAgICAgIHRoaXMubyA9IHQ7XG4gICAgICAgIHRoaXMuayA9IGU7XG4gICAgfVxuICAgIGdldCBkb05vdENhY2hlKCkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgZ2V0VmFsdWUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm9bdGhpcy5rXTtcbiAgICB9XG4gICAgc2V0VmFsdWUoKSB7fVxuICAgIHN1YnNjcmliZSgpIHt9XG4gICAgdW5zdWJzY3JpYmUoKSB7fVxufVxuXG5jbGFzcyBQcm9wZXJ0eUFjY2Vzc29yIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgdGhpcy50eXBlID0gMDtcbiAgICB9XG4gICAgZ2V0VmFsdWUodCwgZSkge1xuICAgICAgICByZXR1cm4gdFtlXTtcbiAgICB9XG4gICAgc2V0VmFsdWUodCwgZSwgcywgcikge1xuICAgICAgICBzW3JdID0gdDtcbiAgICB9XG59XG5cbmxldCBmcjtcblxuY2xhc3MgU2V0dGVyT2JzZXJ2ZXIge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUpIHtcbiAgICAgICAgdGhpcy50eXBlID0gMTtcbiAgICAgICAgdGhpcy52ID0gdm9pZCAwO1xuICAgICAgICB0aGlzLm92ID0gdm9pZCAwO1xuICAgICAgICB0aGlzLmlPID0gZmFsc2U7XG4gICAgICAgIHRoaXMuZiA9IDA7XG4gICAgICAgIHRoaXMubyA9IHQ7XG4gICAgICAgIHRoaXMuayA9IGU7XG4gICAgfVxuICAgIGdldFZhbHVlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy52O1xuICAgIH1cbiAgICBzZXRWYWx1ZSh0LCBlKSB7XG4gICAgICAgIGlmICh0aGlzLmlPKSB7XG4gICAgICAgICAgICBpZiAoT2JqZWN0LmlzKHQsIHRoaXMudikpIHJldHVybjtcbiAgICAgICAgICAgIHRoaXMub3YgPSB0aGlzLnY7XG4gICAgICAgICAgICB0aGlzLnYgPSB0O1xuICAgICAgICAgICAgdGhpcy5mID0gZTtcbiAgICAgICAgICAgIHRoaXMucXVldWUuYWRkKHRoaXMpO1xuICAgICAgICB9IGVsc2UgdGhpcy5vW3RoaXMua10gPSB0O1xuICAgIH1cbiAgICBzdWJzY3JpYmUodCkge1xuICAgICAgICBpZiAoZmFsc2UgPT09IHRoaXMuaU8pIHRoaXMuc3RhcnQoKTtcbiAgICAgICAgdGhpcy5zdWJzLmFkZCh0KTtcbiAgICB9XG4gICAgZmx1c2goKSB7XG4gICAgICAgIGZyID0gdGhpcy5vdjtcbiAgICAgICAgdGhpcy5vdiA9IHRoaXMudjtcbiAgICAgICAgdGhpcy5zdWJzLm5vdGlmeSh0aGlzLnYsIGZyLCB0aGlzLmYpO1xuICAgIH1cbiAgICBzdGFydCgpIHtcbiAgICAgICAgaWYgKGZhbHNlID09PSB0aGlzLmlPKSB7XG4gICAgICAgICAgICB0aGlzLmlPID0gdHJ1ZTtcbiAgICAgICAgICAgIHRoaXMudiA9IHRoaXMub1t0aGlzLmtdO1xuICAgICAgICAgICAgdih0aGlzLm8sIHRoaXMuaywge1xuICAgICAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgICAgIGdldDogKCkgPT4gdGhpcy5nZXRWYWx1ZSgpLFxuICAgICAgICAgICAgICAgIHNldDogdCA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0VmFsdWUodCwgMCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIHN0b3AoKSB7XG4gICAgICAgIGlmICh0aGlzLmlPKSB7XG4gICAgICAgICAgICB2KHRoaXMubywgdGhpcy5rLCB7XG4gICAgICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICAgICAgdmFsdWU6IHRoaXMudlxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB0aGlzLmlPID0gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxufVxuXG5jbGFzcyBTZXR0ZXJOb3RpZmllciB7XG4gICAgY29uc3RydWN0b3IodCwgZSwgcywgcikge1xuICAgICAgICB0aGlzLnR5cGUgPSAxO1xuICAgICAgICB0aGlzLnYgPSB2b2lkIDA7XG4gICAgICAgIHRoaXMub3YgPSB2b2lkIDA7XG4gICAgICAgIHRoaXMuZiA9IDA7XG4gICAgICAgIHRoaXMubyA9IHQ7XG4gICAgICAgIHRoaXMuUyA9IHM7XG4gICAgICAgIHRoaXMuaHMgPSBwKHMpO1xuICAgICAgICBjb25zdCBpID0gdFtlXTtcbiAgICAgICAgdGhpcy5jYiA9IHAoaSkgPyBpIDogdm9pZCAwO1xuICAgICAgICB0aGlzLnYgPSByO1xuICAgIH1cbiAgICBnZXRWYWx1ZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudjtcbiAgICB9XG4gICAgc2V0VmFsdWUodCwgZSkge1xuICAgICAgICB2YXIgcztcbiAgICAgICAgaWYgKHRoaXMuaHMpIHQgPSB0aGlzLlModCwgbnVsbCk7XG4gICAgICAgIGlmICghT2JqZWN0LmlzKHQsIHRoaXMudikpIHtcbiAgICAgICAgICAgIHRoaXMub3YgPSB0aGlzLnY7XG4gICAgICAgICAgICB0aGlzLnYgPSB0O1xuICAgICAgICAgICAgdGhpcy5mID0gZTtcbiAgICAgICAgICAgIG51bGwgPT09IChzID0gdGhpcy5jYikgfHwgdm9pZCAwID09PSBzID8gdm9pZCAwIDogcy5jYWxsKHRoaXMubywgdGhpcy52LCB0aGlzLm92LCBlKTtcbiAgICAgICAgICAgIHRoaXMucXVldWUuYWRkKHRoaXMpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGZsdXNoKCkge1xuICAgICAgICBmciA9IHRoaXMub3Y7XG4gICAgICAgIHRoaXMub3YgPSB0aGlzLnY7XG4gICAgICAgIHRoaXMuc3Vicy5ub3RpZnkodGhpcy52LCBmciwgdGhpcy5mKTtcbiAgICB9XG59XG5cbnJ0KFNldHRlck9ic2VydmVyKTtcblxucnQoU2V0dGVyTm90aWZpZXIpO1xuXG5jdChTZXR0ZXJPYnNlcnZlcik7XG5cbmN0KFNldHRlck5vdGlmaWVyKTtcblxuY29uc3QgZHIgPSBuZXcgUHJvcGVydHlBY2Nlc3NvcjtcblxuY29uc3QgdnIgPSByLmNyZWF0ZUludGVyZmFjZShcIklPYnNlcnZlckxvY2F0b3JcIiwgKHQgPT4gdC5zaW5nbGV0b24oT2JzZXJ2ZXJMb2NhdG9yKSkpO1xuXG5jb25zdCBwciA9IHIuY3JlYXRlSW50ZXJmYWNlKFwiSU5vZGVPYnNlcnZlckxvY2F0b3JcIiwgKHQgPT4gdC5jYWNoZWRDYWxsYmFjaygodCA9PiB7XG4gICAgdC5nZXRBbGwoZikuZm9yRWFjaCgodCA9PiB7XG4gICAgICAgIHQuZXJyb3IoXCJVc2luZyBkZWZhdWx0IElOb2RlT2JzZXJ2ZXJMb2NhdG9yIGltcGxlbWVudGF0aW9uLiBXaWxsIG5vdCBiZSBhYmxlIHRvIG9ic2VydmUgbm9kZXMgKEhUTUwgZXRjLi4uKS5cIik7XG4gICAgfSkpO1xuICAgIHJldHVybiBuZXcgRGVmYXVsdE5vZGVPYnNlcnZlckxvY2F0b3I7XG59KSkpKTtcblxuY2xhc3MgRGVmYXVsdE5vZGVPYnNlcnZlckxvY2F0b3Ige1xuICAgIGhhbmRsZXMoKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgZ2V0T2JzZXJ2ZXIoKSB7XG4gICAgICAgIHJldHVybiBkcjtcbiAgICB9XG4gICAgZ2V0QWNjZXNzb3IoKSB7XG4gICAgICAgIHJldHVybiBkcjtcbiAgICB9XG59XG5cbmNsYXNzIE9ic2VydmVyTG9jYXRvciB7XG4gICAgY29uc3RydWN0b3IodCwgZSkge1xuICAgICAgICB0aGlzLkkgPSB0O1xuICAgICAgICB0aGlzLk0gPSBlO1xuICAgICAgICB0aGlzLkYgPSBbXTtcbiAgICB9XG4gICAgYWRkQWRhcHRlcih0KSB7XG4gICAgICAgIHRoaXMuRi5wdXNoKHQpO1xuICAgIH1cbiAgICBnZXRPYnNlcnZlcih0LCBlKSB7XG4gICAgICAgIHZhciBzLCByO1xuICAgICAgICByZXR1cm4gbnVsbCAhPT0gKHIgPSBudWxsID09PSAocyA9IHQuJG9ic2VydmVycykgfHwgdm9pZCAwID09PSBzID8gdm9pZCAwIDogc1tlXSkgJiYgdm9pZCAwICE9PSByID8gciA6IHRoaXMuVih0LCBlLCB0aGlzLmNyZWF0ZU9ic2VydmVyKHQsIGUpKTtcbiAgICB9XG4gICAgZ2V0QWNjZXNzb3IodCwgZSkge1xuICAgICAgICB2YXIgcztcbiAgICAgICAgY29uc3QgciA9IG51bGwgPT09IChzID0gdC4kb2JzZXJ2ZXJzKSB8fCB2b2lkIDAgPT09IHMgPyB2b2lkIDAgOiBzW2VdO1xuICAgICAgICBpZiAodm9pZCAwICE9PSByKSByZXR1cm4gcjtcbiAgICAgICAgaWYgKHRoaXMuTS5oYW5kbGVzKHQsIGUsIHRoaXMpKSByZXR1cm4gdGhpcy5NLmdldEFjY2Vzc29yKHQsIGUsIHRoaXMpO1xuICAgICAgICByZXR1cm4gZHI7XG4gICAgfVxuICAgIGdldEFycmF5T2JzZXJ2ZXIodCkge1xuICAgICAgICByZXR1cm4ganQodCk7XG4gICAgfVxuICAgIGdldE1hcE9ic2VydmVyKHQpIHtcbiAgICAgICAgcmV0dXJuIHVlKHQpO1xuICAgIH1cbiAgICBnZXRTZXRPYnNlcnZlcih0KSB7XG4gICAgICAgIHJldHVybiBadCh0KTtcbiAgICB9XG4gICAgY3JlYXRlT2JzZXJ2ZXIodCwgZSkge1xuICAgICAgICB2YXIgcywgciwgaSwgbjtcbiAgICAgICAgaWYgKCEodCBpbnN0YW5jZW9mIE9iamVjdCkpIHJldHVybiBuZXcgUHJpbWl0aXZlT2JzZXJ2ZXIodCwgZSk7XG4gICAgICAgIGlmICh0aGlzLk0uaGFuZGxlcyh0LCBlLCB0aGlzKSkgcmV0dXJuIHRoaXMuTS5nZXRPYnNlcnZlcih0LCBlLCB0aGlzKTtcbiAgICAgICAgc3dpdGNoIChlKSB7XG4gICAgICAgICAgY2FzZSBcImxlbmd0aFwiOlxuICAgICAgICAgICAgaWYgKHQgaW5zdGFuY2VvZiBBcnJheSkgcmV0dXJuIGp0KHQpLmdldExlbmd0aE9ic2VydmVyKCk7XG4gICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgIGNhc2UgXCJzaXplXCI6XG4gICAgICAgICAgICBpZiAodCBpbnN0YW5jZW9mIE1hcCkgcmV0dXJuIHVlKHQpLmdldExlbmd0aE9ic2VydmVyKCk7IGVsc2UgaWYgKHQgaW5zdGFuY2VvZiBTZXQpIHJldHVybiBadCh0KS5nZXRMZW5ndGhPYnNlcnZlcigpO1xuICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgaWYgKHQgaW5zdGFuY2VvZiBBcnJheSAmJiBhKGUpKSByZXR1cm4ganQodCkuZ2V0SW5kZXhPYnNlcnZlcihOdW1iZXIoZSkpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgbGV0IG8gPSBicih0LCBlKTtcbiAgICAgICAgaWYgKHZvaWQgMCA9PT0gbykge1xuICAgICAgICAgICAgbGV0IHMgPSB3cih0KTtcbiAgICAgICAgICAgIHdoaWxlIChudWxsICE9PSBzKSB7XG4gICAgICAgICAgICAgICAgbyA9IGJyKHMsIGUpO1xuICAgICAgICAgICAgICAgIGlmICh2b2lkIDAgPT09IG8pIHMgPSB3cihzKTsgZWxzZSBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAodm9pZCAwICE9PSBvICYmICFkLmNhbGwobywgXCJ2YWx1ZVwiKSkge1xuICAgICAgICAgICAgbGV0IGggPSB0aGlzLk4odCwgZSwgbyk7XG4gICAgICAgICAgICBpZiAobnVsbCA9PSBoKSBoID0gbnVsbCA9PT0gKG4gPSBudWxsICE9PSAociA9IG51bGwgPT09IChzID0gby5nZXQpIHx8IHZvaWQgMCA9PT0gcyA/IHZvaWQgMCA6IHMuZ2V0T2JzZXJ2ZXIpICYmIHZvaWQgMCAhPT0gciA/IHIgOiBudWxsID09PSAoaSA9IG8uc2V0KSB8fCB2b2lkIDAgPT09IGkgPyB2b2lkIDAgOiBpLmdldE9ic2VydmVyKSB8fCB2b2lkIDAgPT09IG4gPyB2b2lkIDAgOiBuKHQsIHRoaXMpO1xuICAgICAgICAgICAgcmV0dXJuIG51bGwgPT0gaCA/IG8uY29uZmlndXJhYmxlID8gQ29tcHV0ZWRPYnNlcnZlci5jcmVhdGUodCwgZSwgbywgdGhpcywgdHJ1ZSkgOiB0aGlzLkkuY3JlYXRlUHJvcGVydHkodCwgZSkgOiBoO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBuZXcgU2V0dGVyT2JzZXJ2ZXIodCwgZSk7XG4gICAgfVxuICAgIE4odCwgZSwgcykge1xuICAgICAgICBpZiAodGhpcy5GLmxlbmd0aCA+IDApIGZvciAoY29uc3QgciBvZiB0aGlzLkYpIHtcbiAgICAgICAgICAgIGNvbnN0IGkgPSByLmdldE9ic2VydmVyKHQsIGUsIHMsIHRoaXMpO1xuICAgICAgICAgICAgaWYgKG51bGwgIT0gaSkgcmV0dXJuIGk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIFYodCwgZSwgcykge1xuICAgICAgICBpZiAodHJ1ZSA9PT0gcy5kb05vdENhY2hlKSByZXR1cm4gcztcbiAgICAgICAgaWYgKHZvaWQgMCA9PT0gdC4kb2JzZXJ2ZXJzKSB7XG4gICAgICAgICAgICB2KHQsIFwiJG9ic2VydmVyc1wiLCB7XG4gICAgICAgICAgICAgICAgdmFsdWU6IHtcbiAgICAgICAgICAgICAgICAgICAgW2VdOiBzXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gcztcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdC4kb2JzZXJ2ZXJzW2VdID0gcztcbiAgICB9XG59XG5cbk9ic2VydmVyTG9jYXRvci5pbmplY3QgPSBbIHVyLCBwciBdO1xuXG5mdW5jdGlvbiBncih0KSB7XG4gICAgbGV0IGU7XG4gICAgaWYgKHQgaW5zdGFuY2VvZiBBcnJheSkgZSA9IGp0KHQpOyBlbHNlIGlmICh0IGluc3RhbmNlb2YgTWFwKSBlID0gdWUodCk7IGVsc2UgaWYgKHQgaW5zdGFuY2VvZiBTZXQpIGUgPSBadCh0KTtcbiAgICByZXR1cm4gZTtcbn1cblxuY29uc3Qgd3IgPSBPYmplY3QuZ2V0UHJvdG90eXBlT2Y7XG5cbmNvbnN0IGJyID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcjtcblxuY29uc3QgRXIgPSByLmNyZWF0ZUludGVyZmFjZShcIklPYnNlcnZhdGlvblwiLCAodCA9PiB0LnNpbmdsZXRvbihPYnNlcnZhdGlvbikpKTtcblxuY2xhc3MgT2JzZXJ2YXRpb24ge1xuICAgIGNvbnN0cnVjdG9yKHQpIHtcbiAgICAgICAgdGhpcy5vTCA9IHQ7XG4gICAgfVxuICAgIHN0YXRpYyBnZXQgaW5qZWN0KCkge1xuICAgICAgICByZXR1cm4gWyB2ciBdO1xuICAgIH1cbiAgICBydW4odCkge1xuICAgICAgICBjb25zdCBlID0gbmV3IEVmZmVjdCh0aGlzLm9MLCB0KTtcbiAgICAgICAgZS5ydW4oKTtcbiAgICAgICAgcmV0dXJuIGU7XG4gICAgfVxufVxuXG5jbGFzcyBFZmZlY3Qge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUpIHtcbiAgICAgICAgdGhpcy5vTCA9IHQ7XG4gICAgICAgIHRoaXMuZm4gPSBlO1xuICAgICAgICB0aGlzLmludGVyY2VwdG9yID0gdGhpcztcbiAgICAgICAgdGhpcy5tYXhSdW5Db3VudCA9IDEwO1xuICAgICAgICB0aGlzLnF1ZXVlZCA9IGZhbHNlO1xuICAgICAgICB0aGlzLnJ1bm5pbmcgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5ydW5Db3VudCA9IDA7XG4gICAgICAgIHRoaXMuc3RvcHBlZCA9IGZhbHNlO1xuICAgIH1cbiAgICBoYW5kbGVDaGFuZ2UoKSB7XG4gICAgICAgIHRoaXMucXVldWVkID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5ydW4oKTtcbiAgICB9XG4gICAgaGFuZGxlQ29sbGVjdGlvbkNoYW5nZSgpIHtcbiAgICAgICAgdGhpcy5xdWV1ZWQgPSB0cnVlO1xuICAgICAgICB0aGlzLnJ1bigpO1xuICAgIH1cbiAgICBydW4oKSB7XG4gICAgICAgIGlmICh0aGlzLnN0b3BwZWQpIHRocm93IG5ldyBFcnJvcihcIkFVUjAyMjVcIik7XG4gICAgICAgIGlmICh0aGlzLnJ1bm5pbmcpIHJldHVybjtcbiAgICAgICAgKyt0aGlzLnJ1bkNvdW50O1xuICAgICAgICB0aGlzLnJ1bm5pbmcgPSB0cnVlO1xuICAgICAgICB0aGlzLnF1ZXVlZCA9IGZhbHNlO1xuICAgICAgICArK3RoaXMub2JzLnZlcnNpb247XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBmcyh0aGlzKTtcbiAgICAgICAgICAgIHRoaXMuZm4odGhpcyk7XG4gICAgICAgIH0gZmluYWxseSB7XG4gICAgICAgICAgICB0aGlzLm9icy5jbGVhcigpO1xuICAgICAgICAgICAgdGhpcy5ydW5uaW5nID0gZmFsc2U7XG4gICAgICAgICAgICBkcyh0aGlzKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5xdWV1ZWQpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnJ1bkNvdW50ID4gdGhpcy5tYXhSdW5Db3VudCkge1xuICAgICAgICAgICAgICAgIHRoaXMucnVuQ291bnQgPSAwO1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgQVVSMDIyNmApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5ydW4oKTtcbiAgICAgICAgfSBlbHNlIHRoaXMucnVuQ291bnQgPSAwO1xuICAgIH1cbiAgICBzdG9wKCkge1xuICAgICAgICB0aGlzLnN0b3BwZWQgPSB0cnVlO1xuICAgICAgICB0aGlzLm9icy5jbGVhckFsbCgpO1xuICAgIH1cbn1cblxuRWUoRWZmZWN0KTtcblxuZnVuY3Rpb24gQXIodCkge1xuICAgIGlmICh2b2lkIDAgPT09IHQuJG9ic2VydmVycykgdih0LCBcIiRvYnNlcnZlcnNcIiwge1xuICAgICAgICB2YWx1ZToge31cbiAgICB9KTtcbiAgICByZXR1cm4gdC4kb2JzZXJ2ZXJzO1xufVxuXG5jb25zdCB5ciA9IHt9O1xuXG5mdW5jdGlvbiBtcih0LCBlLCBzKSB7XG4gICAgaWYgKG51bGwgPT0gZSkgcmV0dXJuIChlLCBzLCBpKSA9PiByKGUsIHMsIGksIHQpO1xuICAgIHJldHVybiByKHQsIGUsIHMpO1xuICAgIGZ1bmN0aW9uIHIodCwgZSwgcywgcikge1xuICAgICAgICB2YXIgaTtcbiAgICAgICAgY29uc3QgbiA9IHZvaWQgMCA9PT0gZTtcbiAgICAgICAgciA9IFwib2JqZWN0XCIgIT09IHR5cGVvZiByID8ge1xuICAgICAgICAgICAgbmFtZTogclxuICAgICAgICB9IDogciB8fCB7fTtcbiAgICAgICAgaWYgKG4pIGUgPSByLm5hbWU7XG4gICAgICAgIGlmIChudWxsID09IGUgfHwgXCJcIiA9PT0gZSkgdGhyb3cgbmV3IEVycm9yKFwiQVVSMDIyNFwiKTtcbiAgICAgICAgY29uc3QgbyA9IHIuY2FsbGJhY2sgfHwgYCR7U3RyaW5nKGUpfUNoYW5nZWRgO1xuICAgICAgICBsZXQgaCA9IHlyO1xuICAgICAgICBpZiAocykge1xuICAgICAgICAgICAgZGVsZXRlIHMudmFsdWU7XG4gICAgICAgICAgICBkZWxldGUgcy53cml0YWJsZTtcbiAgICAgICAgICAgIGggPSBudWxsID09PSAoaSA9IHMuaW5pdGlhbGl6ZXIpIHx8IHZvaWQgMCA9PT0gaSA/IHZvaWQgMCA6IGkuY2FsbChzKTtcbiAgICAgICAgICAgIGRlbGV0ZSBzLmluaXRpYWxpemVyO1xuICAgICAgICB9IGVsc2UgcyA9IHtcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgICAgICB9O1xuICAgICAgICBpZiAoIShcImVudW1lcmFibGVcIiBpbiBzKSkgcy5lbnVtZXJhYmxlID0gdHJ1ZTtcbiAgICAgICAgY29uc3QgYyA9IHIuc2V0O1xuICAgICAgICBzLmdldCA9IGZ1bmN0aW9uIHQoKSB7XG4gICAgICAgICAgICB2YXIgcztcbiAgICAgICAgICAgIGNvbnN0IHIgPSBVcih0aGlzLCBlLCBvLCBoLCBjKTtcbiAgICAgICAgICAgIG51bGwgPT09IChzID0gbHMoKSkgfHwgdm9pZCAwID09PSBzID8gdm9pZCAwIDogcy5zdWJzY3JpYmVUbyhyKTtcbiAgICAgICAgICAgIHJldHVybiByLmdldFZhbHVlKCk7XG4gICAgICAgIH07XG4gICAgICAgIHMuc2V0ID0gZnVuY3Rpb24gdChzKSB7XG4gICAgICAgICAgICBVcih0aGlzLCBlLCBvLCBoLCBjKS5zZXRWYWx1ZShzLCAwKTtcbiAgICAgICAgfTtcbiAgICAgICAgcy5nZXQuZ2V0T2JzZXJ2ZXIgPSBmdW5jdGlvbiB0KHMpIHtcbiAgICAgICAgICAgIHJldHVybiBVcihzLCBlLCBvLCBoLCBjKTtcbiAgICAgICAgfTtcbiAgICAgICAgaWYgKG4pIHYodC5wcm90b3R5cGUsIGUsIHMpOyBlbHNlIHJldHVybiBzO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gVXIodCwgZSwgcywgciwgaSkge1xuICAgIGNvbnN0IG4gPSBBcih0KTtcbiAgICBsZXQgbyA9IG5bZV07XG4gICAgaWYgKG51bGwgPT0gbykge1xuICAgICAgICBvID0gbmV3IFNldHRlck5vdGlmaWVyKHQsIHMsIGksIHIgPT09IHlyID8gdm9pZCAwIDogcik7XG4gICAgICAgIG5bZV0gPSBvO1xuICAgIH1cbiAgICByZXR1cm4gbztcbn1cblxuZXhwb3J0IHsgVWUgYXMgQWNjZXNzLCBBY2Nlc3NLZXllZEV4cHJlc3Npb24sIEFjY2Vzc01lbWJlckV4cHJlc3Npb24sIEFjY2Vzc1Njb3BlRXhwcmVzc2lvbiwgQWNjZXNzVGhpc0V4cHJlc3Npb24sIFggYXMgQWNjZXNzb3JUeXBlLCBBcnJheUJpbmRpbmdQYXR0ZXJuLCBBcnJheUluZGV4T2JzZXJ2ZXIsIEFycmF5TGl0ZXJhbEV4cHJlc3Npb24sIEFycmF5T2JzZXJ2ZXIsIEFzc2lnbkV4cHJlc3Npb24sIEJpbmFyeUV4cHJlc3Npb24sIFQgYXMgQmluZGluZ0JlaGF2aW9yLCBCaW5kaW5nQmVoYXZpb3JEZWZpbml0aW9uLCBCaW5kaW5nQmVoYXZpb3JFeHByZXNzaW9uLCBCaW5kaW5nQmVoYXZpb3JGYWN0b3J5LCAkIGFzIEJpbmRpbmdCZWhhdmlvclN0cmF0ZWd5LCBCaW5kaW5nQ29udGV4dCwgQmluZGluZ0lkZW50aWZpZXIsIEJpbmRpbmdJbnRlcmNlcHRvciwgQmluZGluZ01lZGlhdG9yLCB6IGFzIEJpbmRpbmdNb2RlLCBCaW5kaW5nT2JzZXJ2ZXJSZWNvcmQsIENhbGxGdW5jdGlvbkV4cHJlc3Npb24sIENhbGxNZW1iZXJFeHByZXNzaW9uLCBDYWxsU2NvcGVFeHByZXNzaW9uLCB5ZSBhcyBDaGFyLCBKIGFzIENvbGxlY3Rpb25LaW5kLCBDb2xsZWN0aW9uTGVuZ3RoT2JzZXJ2ZXIsIENvbGxlY3Rpb25TaXplT2JzZXJ2ZXIsIENvbXB1dGVkT2JzZXJ2ZXIsIENvbmRpdGlvbmFsRXhwcmVzc2lvbiwgdnMgYXMgQ29ubmVjdGFibGVTd2l0Y2hlciwgQ3VzdG9tRXhwcmVzc2lvbiwgWiBhcyBEZWxlZ2F0aW9uU3RyYXRlZ3ksIERlc3RydWN0dXJpbmdBc3NpZ25tZW50RXhwcmVzc2lvbiwgRGVzdHJ1Y3R1cmluZ0Fzc2lnbm1lbnRSZXN0RXhwcmVzc2lvbiwgRGVzdHJ1Y3R1cmluZ0Fzc2lnbm1lbnRTaW5nbGVFeHByZXNzaW9uLCBEaXJ0eUNoZWNrUHJvcGVydHksIGFyIGFzIERpcnR5Q2hlY2tTZXR0aW5ncywgRiBhcyBFeHByZXNzaW9uS2luZCwgUmUgYXMgRXhwcmVzc2lvblR5cGUsIEZsdXNoUXVldWUsIEZvck9mU3RhdGVtZW50LCBIdG1sTGl0ZXJhbEV4cHJlc3Npb24sIF8gYXMgSUNvZXJjaW9uQ29uZmlndXJhdGlvbiwgdXIgYXMgSURpcnR5Q2hlY2tlciwgQWUgYXMgSUV4cHJlc3Npb25QYXJzZXIsIHByIGFzIElOb2RlT2JzZXJ2ZXJMb2NhdG9yLCBFciBhcyBJT2JzZXJ2YXRpb24sIHZyIGFzIElPYnNlcnZlckxvY2F0b3IsIEIgYXMgSVNpZ25hbGVyLCBJbnRlcnBvbGF0aW9uLCBXIGFzIExpZmVjeWNsZUZsYWdzLCBNYXBPYnNlcnZlciwgT2JqZWN0QmluZGluZ1BhdHRlcm4sIE9iamVjdExpdGVyYWxFeHByZXNzaW9uLCBPYnNlcnZhdGlvbiwgT2JzZXJ2ZXJMb2NhdG9yLCBPdmVycmlkZUNvbnRleHQsIFBhcnNlclN0YXRlLCB4ZSBhcyBQcmVjZWRlbmNlLCBQcmltaXRpdmVMaXRlcmFsRXhwcmVzc2lvbiwgUHJpbWl0aXZlT2JzZXJ2ZXIsIFByb3BlcnR5QWNjZXNzb3IsIGhyIGFzIFByb3h5T2JzZXJ2YWJsZSwgU2NvcGUsIFNldE9ic2VydmVyLCBTZXR0ZXJPYnNlcnZlciwgU3Vic2NyaWJlclJlY29yZCwgVGFnZ2VkVGVtcGxhdGVFeHByZXNzaW9uLCBUZW1wbGF0ZUV4cHJlc3Npb24sIFVuYXJ5RXhwcmVzc2lvbiwgRCBhcyBWYWx1ZUNvbnZlcnRlciwgVmFsdWVDb252ZXJ0ZXJEZWZpbml0aW9uLCBWYWx1ZUNvbnZlcnRlckV4cHJlc3Npb24sIE8gYXMgYWxpYXMsIEl0IGFzIGFwcGx5TXV0YXRpb25zVG9JbmRpY2VzLCBMIGFzIGJpbmRpbmdCZWhhdmlvciwgZXQgYXMgY2xvbmVJbmRleE1hcCwgRWUgYXMgY29ubmVjdGFibGUsIFkgYXMgY29weUluZGV4TWFwLCB0dCBhcyBjcmVhdGVJbmRleE1hcCwgVHQgYXMgZGlzYWJsZUFycmF5T2JzZXJ2YXRpb24sIGNlIGFzIGRpc2FibGVNYXBPYnNlcnZhdGlvbiwgR3QgYXMgZGlzYWJsZVNldE9ic2VydmF0aW9uLCBQdCBhcyBlbmFibGVBcnJheU9ic2VydmF0aW9uLCBoZSBhcyBlbmFibGVNYXBPYnNlcnZhdGlvbiwgV3QgYXMgZW5hYmxlU2V0T2JzZXJ2YXRpb24sIGdyIGFzIGdldENvbGxlY3Rpb25PYnNlcnZlciwgc3QgYXMgaXNJbmRleE1hcCwgbXIgYXMgb2JzZXJ2YWJsZSwgamUgYXMgcGFyc2UsIFRlIGFzIHBhcnNlRXhwcmVzc2lvbiwgQyBhcyByZWdpc3RlckFsaWFzZXMsIHJ0IGFzIHN1YnNjcmliZXJDb2xsZWN0aW9uLCBNdCBhcyBzeW5jaHJvbml6ZUluZGljZXMsIGogYXMgdmFsdWVDb252ZXJ0ZXIsIGN0IGFzIHdpdGhGbHVzaFF1ZXVlIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC5qcy5tYXBcbiIsIjx0ZW1wbGF0ZT5cbiAgPHJlcXVpcmUgZnJvbT1cIi4vcmVzZXQuY3NzXCI+PC9yZXF1aXJlPlxuICA8cmVxdWlyZSBmcm9tPVwiLi9hcHAuY3NzXCI+PC9yZXF1aXJlPlxuXG4gIDxkaXYgaWQ9XCJhdS1kZXYtcm9vdFwiIGNsYXNzPVwiJHtpc0RhcmtUaGVtZSA/ICdkYXJrJyA6ICcnfVwiPlxuICAgIDxoMSBjbGFzcz1cImFwcC1oZWFkZXJcIj5cbiAgICAgIDxhdXJlbGlhLWxvZ28+PC9hdXJlbGlhLWxvZ28+XG4gICAgICA8c3BhbiBjbGFzcz1cImxvZ28tYmFkZ2VcIj5JTlNQRUNUT1I8L3NwYW4+XG4gICAgPC9oMT5cblxuICAgIDxtYWluPlxuICAgICAgPHAgY2xhc3M9XCJub3QtZm91bmRcIiBzdHlsZT1cIm1hcmdpbi1ib3R0b206IDEwcHhcIj5cbiAgICAgICAgU2VsZWN0IGEgbm9kZSB0aHJvdWdoIHRoZSBpbnNwZWN0IHdpbmRvdyB0byBzY29wZSBpbnRvIHRoYXQgbm9kZS4gQ2xpY2tcbiAgICAgICAgb24gdGhlIHZhbHVlIHdpbGwgYWxsb3cgb25lIHRvIGVkaXQgdGhlIHZhbHVlIGFuZCBiaW5kIHRvIHRoZSB2aWV3LlxuICAgICAgPC9wPlxuICAgICAgPCEtLSA8ZGVidWctZ3JvdXAgaGVhZGluZz1cIkJpbmRpbmcgQ29udGV4dFwiIHNob3cuYmluZD1cInRydWVcIj5cbiAgICAgICAgPHRlbXBsYXRlIGlmLmJpbmQ9XCJkZWJ1Z0luZm8uYmluZGluZ0NvbnRleHRcIj5cbiAgICAgICAgICA8dWw+XG4gICAgICAgICAgICA8bGkgcmVwZWF0LmZvcj1cInByb3BlcnR5IG9mIGRlYnVnSW5mby5iaW5kaW5nQ29udGV4dC5wcm9wZXJ0aWVzXCI+XG4gICAgICAgICAgICAgIDxwcm9wZXJ0eS12aWV3IHByb3BlcnR5LmJpbmQ9XCJwcm9wZXJ0eVwiPjwvcHJvcGVydHktdmlldz5cbiAgICAgICAgICAgIDwvbGk+XG4gICAgICAgICAgPC91bD5cbiAgICAgICAgPC90ZW1wbGF0ZT5cbiAgICAgICAgPHRlbXBsYXRlIGlmLmJpbmQ9XCIhZGVidWdJbmZvLmJpbmRpbmdDb250ZXh0XCI+XG4gICAgICAgICAgPHNwYW4gY2xhc3M9XCJub3QtZm91bmRcIlxuICAgICAgICAgICAgPk5vIGJpbmRpbmcgY29udGV4dCBmb3VuZCBmb3IgdGhlIHNlbGVjdGVkIG5vZGUuPC9zcGFuXG4gICAgICAgICAgPlxuICAgICAgICA8L3RlbXBsYXRlPlxuICAgICAgPC9kZWJ1Zy1ncm91cD5cblxuICAgICAgPGRlYnVnLWdyb3VwIGhlYWRpbmc9XCJPdmVycmlkZSBDb250ZXh0XCI+XG4gICAgICAgIDx0ZW1wbGF0ZVxuICAgICAgICAgIGlmLmJpbmQ9XCJkZWJ1Z0luZm8ub3ZlcnJpZGVDb250ZXh0ICYmIGRlYnVnSW5mby5vdmVycmlkZUNvbnRleHQucHJvcGVydGllcy5sZW5ndGhcIlxuICAgICAgICA+XG4gICAgICAgICAgPHVsPlxuICAgICAgICAgICAgPGxpIHJlcGVhdC5mb3I9XCJwcm9wZXJ0eSBvZiBkZWJ1Z0luZm8ub3ZlcnJpZGVDb250ZXh0LnByb3BlcnRpZXNcIj5cbiAgICAgICAgICAgICAgPHByb3BlcnR5LXZpZXcgcHJvcGVydHkuYmluZD1cInByb3BlcnR5XCI+PC9wcm9wZXJ0eS12aWV3PlxuICAgICAgICAgICAgPC9saT5cbiAgICAgICAgICA8L3VsPlxuICAgICAgICA8L3RlbXBsYXRlPlxuICAgICAgICA8dGVtcGxhdGVcbiAgICAgICAgICBpZi5iaW5kPVwiIWRlYnVnSW5mby5vdmVycmlkZUNvbnRleHQgfHwgIWRlYnVnSW5mby5vdmVycmlkZUNvbnRleHQucHJvcGVydGllcy5sZW5ndGhcIlxuICAgICAgICA+XG4gICAgICAgICAgPHNwYW4gY2xhc3M9XCJub3QtZm91bmRcIlxuICAgICAgICAgICAgPk5vIG92ZXJyaWRlIGNvbnRleHQgZm91bmQgZm9yIHRoZSBzZWxlY3RlZCBub2RlLjwvc3BhblxuICAgICAgICAgID5cbiAgICAgICAgPC90ZW1wbGF0ZT5cbiAgICAgIDwvZGVidWctZ3JvdXA+IC0tPlxuXG4gICAgICA8ZGVidWctZ3JvdXAgaGVhZGluZz1cIkN1c3RvbSBFbGVtZW50XCI+XG4gICAgICAgIDx0ZW1wbGF0ZSBhdS1zbG90PlxuICAgICAgICAgIDxzcGFuIGlmLmJpbmQ9XCIhc2VsZWN0ZWRFbGVtZW50XCIgY2xhc3M9XCJub3QtZm91bmRcIlxuICAgICAgICAgICAgPlRoZSBzZWxlY3RlZCBub2RlIGlzIG5vdCBhIGN1c3RvbSBlbGVtZW50Ljwvc3BhblxuICAgICAgICAgID5cbiAgICAgICAgICA8Y29udHJvbGxlci12aWV3XG4gICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICBjb250cm9sbGVyLmJpbmQ9XCJzZWxlY3RlZEVsZW1lbnRcIlxuICAgICAgICAgID48L2NvbnRyb2xsZXItdmlldz5cbiAgICAgICAgPC90ZW1wbGF0ZT5cbiAgICAgIDwvZGVidWctZ3JvdXA+XG5cbiAgICAgIDxkZWJ1Zy1ncm91cCBoZWFkaW5nPVwiQ3VzdG9tIEF0dHJpYnV0ZXNcIj5cbiAgICAgICAgPHRlbXBsYXRlIGF1LXNsb3Q+XG4gICAgICAgICAgPHNwYW4gaWYuYmluZD1cIiFzZWxlY3RlZEVsZW1lbnRBdHRyaWJ1dGVzXCIgY2xhc3M9XCJub3QtZm91bmRcIlxuICAgICAgICAgICAgPk5vIGN1c3RvbSBhdHRyaWJ1dGVzIGZvdW5kIG9uIHRoZSBzZWxlY3RlZCBub2RlLjwvc3BhblxuICAgICAgICAgID5cbiAgICAgICAgICA8dWwgZWxzZT5cbiAgICAgICAgICAgIDxsaVxuICAgICAgICAgICAgICByZXBlYXQuZm9yPVwiY3VzdG9tQXR0cmlidXRlIG9mIHNlbGVjdGVkRWxlbWVudEF0dHJpYnV0ZXNcIlxuICAgICAgICAgICAgICBjbGFzcz1cImN1c3RvbS1hdHRyaWJ1dGVcIlxuICAgICAgICAgICAgPlxuICAgICAgICAgICAgICA8aDMgY2xhc3M9XCJhdHRyaWJ1dGUtbmFtZVwiPiR7Y3VzdG9tQXR0cmlidXRlLm5hbWV9PC9oMz5cbiAgICAgICAgICAgICAgJm5ic3A7PHNwYW4gY2xhc3M9XCJibG9jay10b2tlblwiPns8L3NwYW4+XG4gICAgICAgICAgICAgIDxjb250cm9sbGVyLXZpZXdcbiAgICAgICAgICAgICAgICBjb250cm9sbGVyLmJpbmQ9XCJjdXN0b21BdHRyaWJ1dGVcIlxuICAgICAgICAgICAgICA+PC9jb250cm9sbGVyLXZpZXc+XG4gICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwiYmxvY2stdG9rZW5cIj59PC9zcGFuPlxuICAgICAgICAgICAgPC9saT5cbiAgICAgICAgICA8L3VsPlxuICAgICAgICA8L3RlbXBsYXRlPlxuICAgICAgPC9kZWJ1Zy1ncm91cD5cbiAgICA8L21haW4+XG5cbiAgICA8IS0tIDxtYWluPlxuICAgICAgPGN1c3RvbS1lbGVtZW50IGlmLmJpbmQ9XCJzZWxlY3RlZEVsZW1lbnRcIj5cbiAgICAgICAgJHtKU09OLnN0cmluZ2lmeShzZWxlY3RlZEVsZW1lbnQpfVxuICAgICAgICA8ZGl2Pk5hbWUgPSAke3NlbGVjdGVkRWxlbWVudC5uYW1lfTwvZGl2PlxuICAgICAgICA8ZGl2PktleSA9ICR7c2VsZWN0ZWRFbGVtZW50LmtleX08L2Rpdj5cbiAgICAgICAgPGRpdj5BbGlhc2VzID0gJHtzZWxlY3RlZEVsZW1lbnQuYWxpYXNlcy5qb2luKCcsICcpfTwvZGl2PlxuICAgICAgICA8aDM+QmluZGFibGVzPC9oMz5cbiAgICAgICAgPGRpdiByZXBlYXQuZm9yPVwidmFsdWUgb2Ygc2VsZWN0ZWRFbGVtZW50LmJpbmRhYmxlc1wiPlxuICAgICAgICAgICR7dmFsdWUubmFtZX0gPVxuICAgICAgICAgIDxpbnB1dFxuICAgICAgICAgICAgdmFsdWUuYmluZD1cInZhbHVlLnZhbHVlXCJcbiAgICAgICAgICAgIGtleXVwLmRlbGVnYXRlPVwidmFsdWVDaGFuZ2VkKHNlbGVjdGVkRWxlbWVudClcIlxuICAgICAgICAgIC8+XG4gICAgICAgIDwvZGl2PlxuICAgICAgICA8aHIgLz5cbiAgICAgIDwvY3VzdG9tLWVsZW1lbnQ+XG4gICAgPC9tYWluPiAtLT5cbiAgPC9kaXY+XG48L3RlbXBsYXRlPlxuIiwiPHRlbXBsYXRlPlxuICA8c3ZnIGhlaWdodD1cIjI4cHhcIiB2aWV3Qm94PVwiMzE1IDE5IDE0MCA0MVwiIHZlcnNpb249XCIxLjFcIiB4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIgeG1sbnM6eGxpbms9XCJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rXCI+XG4gICAgPGRlZnM+XG4gICAgICA8bGluZWFyR3JhZGllbnQgeDE9XCItMzg4LjE0Nzg1MSVcIiB5MT1cIi0xNDQuMTc3NDI1JVwiIHgyPVwiMjM3LjY4MzgwOSVcIiB5Mj1cIjQzMC40MDU3NTQlXCIgaWQ9XCJsaW5lYXJHcmFkaWVudC0xXCI+XG4gICAgICAgIDxzdG9wIHN0b3AtY29sb3I9XCIjQzA2RkJCXCIgb2Zmc2V0PVwiMCVcIj48L3N0b3A+XG4gICAgICAgIDxzdG9wIHN0b3AtY29sb3I9XCIjNkU0RDlCXCIgb2Zmc2V0PVwiMTAwJVwiPjwvc3RvcD5cbiAgICAgIDwvbGluZWFyR3JhZGllbnQ+XG4gICAgICA8bGluZWFyR3JhZGllbnQgeDE9XCI3Mi45NDU0ODU0JVwiIHkxPVwiODQuNDI0MDc3NyVcIiB4Mj1cIi05Ny4wNTE3OTA0JVwiIHkyPVwiLTE0Ny42OTY1OTElXCIgaWQ9XCJsaW5lYXJHcmFkaWVudC0yXCI+XG4gICAgICAgIDxzdG9wIHN0b3AtY29sb3I9XCIjNkU0RDlCXCIgb2Zmc2V0PVwiMCVcIj48L3N0b3A+XG4gICAgICAgIDxzdG9wIHN0b3AtY29sb3I9XCIjNzczMjdBXCIgb2Zmc2V0PVwiMTQlXCI+PC9zdG9wPlxuICAgICAgICA8c3RvcCBzdG9wLWNvbG9yPVwiI0IzMTc3N1wiIG9mZnNldD1cIjI5JVwiPjwvc3RvcD5cbiAgICAgICAgPHN0b3Agc3RvcC1jb2xvcj1cIiNDRDBGN0VcIiBvZmZzZXQ9XCI4NCVcIj48L3N0b3A+XG4gICAgICAgIDxzdG9wIHN0b3AtY29sb3I9XCIjRUQyQzg5XCIgb2Zmc2V0PVwiMTAwJVwiPjwvc3RvcD5cbiAgICAgIDwvbGluZWFyR3JhZGllbnQ+XG4gICAgICA8bGluZWFyR3JhZGllbnQgeDE9XCItMjgzLjg4NDA3OSVcIiB5MT1cIi02OTMuNTk5ODcyJVwiIHgyPVwiMjg3LjUzNzQxNyVcIiB5Mj1cIjEwMS43MDk3NiVcIiBpZD1cImxpbmVhckdyYWRpZW50LTNcIj5cbiAgICAgICAgPHN0b3Agc3RvcC1jb2xvcj1cIiNDMDZGQkJcIiBvZmZzZXQ9XCIwJVwiPjwvc3RvcD5cbiAgICAgICAgPHN0b3Agc3RvcC1jb2xvcj1cIiM2RTREOUJcIiBvZmZzZXQ9XCIxMDAlXCI+PC9zdG9wPlxuICAgICAgPC9saW5lYXJHcmFkaWVudD5cbiAgICAgIDxsaW5lYXJHcmFkaWVudCB4MT1cIi04MjEuMTg2MjE0JVwiIHkxPVwiLTQ2OS4wNDc4NjIlXCIgeDI9XCIxMDEuOTg1MTQyJVwiIHkyPVwiMjg4LjIzNTk4JVwiIGlkPVwibGluZWFyR3JhZGllbnQtNFwiPlxuICAgICAgICA8c3RvcCBzdG9wLWNvbG9yPVwiI0MwNkZCQlwiIG9mZnNldD1cIjAlXCI+PC9zdG9wPlxuICAgICAgICA8c3RvcCBzdG9wLWNvbG9yPVwiIzZFNEQ5QlwiIG9mZnNldD1cIjEwMCVcIj48L3N0b3A+XG4gICAgICA8L2xpbmVhckdyYWRpZW50PlxuICAgICAgPGxpbmVhckdyYWRpZW50IHgxPVwiLTE0MC4zNTkzNzMlXCIgeTE9XCItMjMwLjkyNTcxOCVcIiB4Mj1cIjQxOS4wMTIzMTYlXCIgeTI9XCIyNjEuOTc2NzQyJVwiIGlkPVwibGluZWFyR3JhZGllbnQtNVwiPlxuICAgICAgICA8c3RvcCBzdG9wLWNvbG9yPVwiI0MwNkZCQlwiIG9mZnNldD1cIjAlXCI+PC9zdG9wPlxuICAgICAgICA8c3RvcCBzdG9wLWNvbG9yPVwiIzZFNEQ5QlwiIG9mZnNldD1cIjEwMCVcIj48L3N0b3A+XG4gICAgICA8L2xpbmVhckdyYWRpZW50PlxuICAgICAgPGxpbmVhckdyYWRpZW50IHgxPVwiMTkxLjA4MzcxNiVcIiB5MT1cIjI1My45NTI1MTclXCIgeDI9XCIyMC4zNTc3MDIyJVwiIHkyPVwiMjAuNDAyOTI4MyVcIiBpZD1cImxpbmVhckdyYWRpZW50LTZcIj5cbiAgICAgICAgPHN0b3Agc3RvcC1jb2xvcj1cIiM2RTREOUJcIiBvZmZzZXQ9XCIwJVwiPjwvc3RvcD5cbiAgICAgICAgPHN0b3Agc3RvcC1jb2xvcj1cIiM3NzMyN0FcIiBvZmZzZXQ9XCIxNCVcIj48L3N0b3A+XG4gICAgICAgIDxzdG9wIHN0b3AtY29sb3I9XCIjQjMxNzc3XCIgb2Zmc2V0PVwiMjklXCI+PC9zdG9wPlxuICAgICAgICA8c3RvcCBzdG9wLWNvbG9yPVwiI0NEMEY3RVwiIG9mZnNldD1cIjg0JVwiPjwvc3RvcD5cbiAgICAgICAgPHN0b3Agc3RvcC1jb2xvcj1cIiNFRDJDODlcIiBvZmZzZXQ9XCIxMDAlXCI+PC9zdG9wPlxuICAgICAgPC9saW5lYXJHcmFkaWVudD5cbiAgICAgIDxsaW5lYXJHcmFkaWVudCB4MT1cIi0zODguMDk0MDA0JVwiIHkxPVwiLTE3My44NTAwNTUlXCIgeDI9XCIyMzcuNjc0ODAyJVwiIHkyPVwiNTE4Ljk5MDIyNSVcIiBpZD1cImxpbmVhckdyYWRpZW50LTdcIj5cbiAgICAgICAgPHN0b3Agc3RvcC1jb2xvcj1cIiNDMDZGQkJcIiBvZmZzZXQ9XCIwJVwiPjwvc3RvcD5cbiAgICAgICAgPHN0b3Agc3RvcC1jb2xvcj1cIiM2RTREOUJcIiBvZmZzZXQ9XCIxMDAlXCI+PC9zdG9wPlxuICAgICAgPC9saW5lYXJHcmFkaWVudD5cbiAgICAgIDxsaW5lYXJHcmFkaWVudCB4MT1cIjExLjE4ODQ1NjElXCIgeTE9XCI4OS42NTI1OTkzJVwiIHgyPVwiOTAuMTQ1MTI1JVwiIHkyPVwiMTEuNTc3Mzk4MiVcIiBpZD1cImxpbmVhckdyYWRpZW50LThcIj5cbiAgICAgICAgPHN0b3Agc3RvcC1jb2xvcj1cIiM2RTREOUJcIiBvZmZzZXQ9XCIwJVwiPjwvc3RvcD5cbiAgICAgICAgPHN0b3Agc3RvcC1jb2xvcj1cIiM3NzMyN0FcIiBvZmZzZXQ9XCIxNCVcIj48L3N0b3A+XG4gICAgICAgIDxzdG9wIHN0b3AtY29sb3I9XCIjQjMxNzc3XCIgb2Zmc2V0PVwiNTMlXCI+PC9zdG9wPlxuICAgICAgICA8c3RvcCBzdG9wLWNvbG9yPVwiI0NEMEY3RVwiIG9mZnNldD1cIjc5JVwiPjwvc3RvcD5cbiAgICAgICAgPHN0b3Agc3RvcC1jb2xvcj1cIiNFRDJDODlcIiBvZmZzZXQ9XCIxMDAlXCI+PC9zdG9wPlxuICAgICAgPC9saW5lYXJHcmFkaWVudD5cbiAgICAgIDxyZWN0IGlkPVwicGF0aC05XCIgeD1cIjAuNjI3NDk4MjU2XCIgeT1cIjBcIiB3aWR0aD1cIjM0XCIgaGVpZ2h0PVwiMTZcIiByeD1cIjJcIj48L3JlY3Q+XG4gICAgICA8ZmlsdGVyIHg9XCItNTAlXCIgeT1cIi01MCVcIiB3aWR0aD1cIjIwMCVcIiBoZWlnaHQ9XCIyMDAlXCIgZmlsdGVyVW5pdHM9XCJvYmplY3RCb3VuZGluZ0JveFwiIGlkPVwiZmlsdGVyLTEwXCI+XG4gICAgICAgIDxmZU9mZnNldCBkeD1cIjBcIiBkeT1cIjFcIiBpbj1cIlNvdXJjZUFscGhhXCIgcmVzdWx0PVwic2hhZG93T2Zmc2V0T3V0ZXIxXCI+PC9mZU9mZnNldD5cbiAgICAgICAgPGZlQ29sb3JNYXRyaXggdmFsdWVzPVwiMCAwIDAgMCAwICAgMCAwIDAgMCAwICAgMCAwIDAgMCAwICAwIDAgMCAwLjE1IDBcIiB0eXBlPVwibWF0cml4XCIgaW49XCJzaGFkb3dPZmZzZXRPdXRlcjFcIj48L2ZlQ29sb3JNYXRyaXg+XG4gICAgICA8L2ZpbHRlcj5cbiAgICA8L2RlZnM+XG4gICAgPGcgaWQ9XCJHcm91cC0zXCIgc3Ryb2tlPVwibm9uZVwiIHN0cm9rZS13aWR0aD1cIjFcIiBmaWxsPVwibm9uZVwiIGZpbGwtcnVsZT1cImV2ZW5vZGRcIiB0cmFuc2Zvcm09XCJ0cmFuc2xhdGUoMzE3LjAwMDAwMCwgMjEuMDAwMDAwKVwiPlxuICAgICAgPGcgaWQ9XCJJY29uXCIgdHJhbnNmb3JtPVwidHJhbnNsYXRlKDE4LjgyMTQzNiwgMTguODIxNDM2KSByb3RhdGUoMTEuMjgzODY0KSB0cmFuc2xhdGUoLTE4LjgyMTQzNiwgLTE4LjgyMTQzNikgdHJhbnNsYXRlKDIuODIxNDM2LCAyLjgyMTQzNilcIj5cbiAgICAgICAgPGcgaWQ9XCJHcm91cFwiIHRyYW5zZm9ybT1cInRyYW5zbGF0ZSgxNi4wNjIyMTcsIDQuMzE0NjQ5KSByb3RhdGUoLTExLjI4Mzg2NCkgdHJhbnNsYXRlKC0xNi4wNjIyMTcsIC00LjMxNDY0OSkgdHJhbnNsYXRlKDEyLjkwOTM1NCwgMC44NTI2ODIpXCJcbiAgICAgICAgICBmaWxsPVwidXJsKCNsaW5lYXJHcmFkaWVudC0xKVwiPlxuICAgICAgICAgIDxwb2x5Z29uIGlkPVwiU2hhcGVcIiBwb2ludHM9XCI2LjI0NTE0MTM0IDQuNzgxOTY1NjggMy4yMTM0NDczMSA2LjgwNTM2MTggMC4wOTAyNTg0Mjc2IDIuMTI0OTA1OTQgMy4xMjE5NTI0NiAwLjEwMTUwOTgyMVwiPjwvcG9seWdvbj5cbiAgICAgICAgPC9nPlxuICAgICAgICA8ZyBpZD1cIkdyb3VwXCIgdHJhbnNmb3JtPVwidHJhbnNsYXRlKDI0LjU3NjY3MSwgMjMuNjA2MDYyKSByb3RhdGUoLTExLjI4Mzg2NCkgdHJhbnNsYXRlKC0yNC41NzY2NzEsIC0yMy42MDYwNjIpIHRyYW5zbGF0ZSgxOC4zOTQ1ODcsIDE2LjkyOTQxMSlcIlxuICAgICAgICAgIGZpbGw9XCJ1cmwoI2xpbmVhckdyYWRpZW50LTIpXCI+XG4gICAgICAgICAgPHBvbHlnb24gaWQ9XCJTaGFwZVwiIHBvaW50cz1cIjcuMTY0MDQ2MzIgMS40NzMxOTA2NCAxMi4zNDQwMTQ2IDkuMjM1NDE1NDEgNi4xNzM0MjkxNiAxMy4zNTMzMDE2IDAuOTkzNDYwOTEyIDUuNTkwOTUzMiAwLjA4OTc2Mzg2MDkgNC4yMzY5NTMxNSA2LjI2MDQ3MjkxIDAuMTE5MDY2OTM5XCI+PC9wb2x5Z29uPlxuICAgICAgICA8L2c+XG4gICAgICAgIDxnIGlkPVwiR3JvdXBcIiB0cmFuc2Zvcm09XCJ0cmFuc2xhdGUoMTYuMDY0MDAxLCAyNy4wNjk2NzEpIHJvdGF0ZSgtMTEuMjgzODY0KSB0cmFuc2xhdGUoLTE2LjA2NDAwMSwgLTI3LjA2OTY3MSkgdHJhbnNsYXRlKDEyLjYwMjAzNCwgMjMuODU0OTg4KVwiXG4gICAgICAgICAgZmlsbD1cInVybCgjbGluZWFyR3JhZGllbnQtMylcIj5cbiAgICAgICAgICA8cG9seWdvbiBpZD1cIlNoYXBlXCIgcG9pbnRzPVwiNS42OTc3Nzk2MiAxLjQ2NjYzNzYzIDYuODM4MjUwNDkgMy4xNzU2MTI5NSAyLjE0MTQ3MzkzIDYuMzA5OTI5NTggMC4wOTczMDYwMDM1IDMuMjQ2ODMwNTYgMS4xMjM0MDgzMiAyLjU2MjEwMjkzIDQuNzk0MjA2MjEgMC4xMTI1MTM5M1wiPjwvcG9seWdvbj5cbiAgICAgICAgPC9nPlxuICAgICAgICA8ZyBpZD1cIkdyb3VwXCIgdHJhbnNmb3JtPVwidHJhbnNsYXRlKDI3LjQxNzI4NywgMTUuNzI2NzEyKSByb3RhdGUoLTExLjI4Mzg2NCkgdHJhbnNsYXRlKC0yNy40MTcyODcsIC0xNS43MjY3MTIpIHRyYW5zbGF0ZSgyNC44MjA4MTIsIDEzLjEzMDIzNilcIlxuICAgICAgICAgIGZpbGw9XCJ1cmwoI2xpbmVhckdyYWRpZW50LTQpXCI+XG4gICAgICAgICAgPHBhdGggZD1cIk0xLjgxNzAzODE1LDAuODk0NjcxMjA4IEwzLjEzNDQ0MDI3LDAuMDE1NTc4ODUxOSBMNS4xNzg0ODQ1NSwzLjA3ODY3Nzg3IEwyLjE0NjQxOTU5LDUuMTAyMDczOTkgTDEuMDA1OTQ4NzIsMy4zOTMwOTg2NyBMMi43MjA2MTE1NiwyLjI0ODc5NDkxIEwxLjgxNzAzODE1LDAuODk0NjcxMjA4IEwxLjgxNzAzODE1LDAuODk0NjcxMjA4IFogTTEuMDA1OTQ4NzIsMy4zOTMwOTg2NyBMMC4xMDIzNzUzMTIsMi4wMzg5NzQ5NyBMMS44MTcwMzgxNSwwLjg5NDY3MTIwOCBMMi43MjA2MTE1NiwyLjI0ODc5NDkxIEwxLjAwNTk0ODcyLDMuMzkzMDk4NjcgTDEuMDA1OTQ4NzIsMy4zOTMwOTg2NyBaXCJcbiAgICAgICAgICAgIGlkPVwiU2hhcGVcIj48L3BhdGg+XG4gICAgICAgIDwvZz5cbiAgICAgICAgPGcgaWQ9XCJHcm91cFwiIHRyYW5zZm9ybT1cInRyYW5zbGF0ZSg0LjcyMTA0MSwgMTUuNzE2Mzg1KSByb3RhdGUoLTExLjI4Mzg2NCkgdHJhbnNsYXRlKC00LjcyMTA0MSwgLTE1LjcxNjM4NSkgdHJhbnNsYXRlKDAuNzY0NTA3LCAxMS43NTk4NTEpXCJcbiAgICAgICAgICBmaWxsPVwidXJsKCNsaW5lYXJHcmFkaWVudC01KVwiPlxuICAgICAgICAgIDxwb2x5Z29uIGlkPVwiU2hhcGVcIiBwb2ludHM9XCI0LjE3MjQxMjE5IDcuMTQ1MDA1NSAzLjE0NjQzMzUxIDcuODI5NzMzMTMgMC4wMjI5OTczNTI4IDMuMTQ5Mjc3MjcgNC43MTk3NzM5MSAwLjAxNDk2MDY0MzUgNi45MDkwOTcxNyAzLjI5NTc5MjY3IDMuMjM4NDIyOTMgNS43NDUzODE2NiA2LjkwOTA5NzE3IDMuMjk1NzkyNjcgNy44NDMyMTAwNyA0LjY5NTU0MDE0XCI+PC9wb2x5Z29uPlxuICAgICAgICA8L2c+XG4gICAgICAgIDxnIGlkPVwiR3JvdXBcIiB0cmFuc2Zvcm09XCJ0cmFuc2xhdGUoOC44MjI1NjAsIDcuODM3NjA5KSByb3RhdGUoLTExLjI4Mzg2NCkgdHJhbnNsYXRlKC04LjgyMjU2MCwgLTcuODM3NjA5KSB0cmFuc2xhdGUoMi42NDA0NzYsIDEuMTYwOTU4KVwiXG4gICAgICAgICAgZmlsbD1cInVybCgjbGluZWFyR3JhZGllbnQtNilcIj5cbiAgICAgICAgICA8cG9seWdvbiBpZD1cIlNoYXBlXCIgcG9pbnRzPVwiMTEuMzQyODg3OSA3Ljc1MzMyMjU3IDEyLjI3Njg3NzEgOS4xNTMwNzAwNSA2LjEwNjE2ODA5IDEzLjI3MDk1NjMgNS4xNzIxNzg4MyAxMS44NzEyMDg4IDAuMDQwNjc4MTEzMyA0LjE4MTY4NTMxIDYuMjExMzg3MTYgMC4wNjM3OTkxMDc3XCI+PC9wb2x5Z29uPlxuICAgICAgICA8L2c+XG4gICAgICAgIDxnIGlkPVwiR3JvdXBcIiB0cmFuc2Zvcm09XCJ0cmFuc2xhdGUoMTYuMTIyODU3LCA0LjMwMDcwMykgcm90YXRlKC0xMS4yODM4NjQpIHRyYW5zbGF0ZSgtMTYuMTIyODU3LCAtNC4zMDA3MDMpIHRyYW5zbGF0ZSgxMi45Njk5OTQsIDAuOTAwNTU3KVwiXG4gICAgICAgICAgZmlsbD1cInVybCgjbGluZWFyR3JhZGllbnQtNylcIj5cbiAgICAgICAgICA8cG9seWdvbiBpZD1cIlNoYXBlXCIgcG9pbnRzPVwiNC44NjYwNDIwMiA1LjYwMTMzOTEgMy4xNTEzNzkxOCA2Ljc0NTUxOTIzIDIuMjE3MjY2MjggNS4zNDU4OTUzOSAwLjAyNzk0MzAyMDEgMi4wNjUwNjMzNyAzLjA2MDAwNzk4IDAuMDQxNjY3MjQ2NyA2LjE4MzQ0NDE0IDQuNzIyMTIzMTFcIj48L3BvbHlnb24+XG4gICAgICAgIDwvZz5cbiAgICAgICAgPGcgaWQ9XCJHcm91cFwiIHRyYW5zZm9ybT1cInRyYW5zbGF0ZSgxNS44MjIwNzEsIDI1Ljg1NzE1NSkgcm90YXRlKC0xMS4yODM4NjQpIHRyYW5zbGF0ZSgtMTUuODIyMDcxLCAtMjUuODU3MTU1KSB0cmFuc2xhdGUoMTMuNDcyODc5LCAyMy44Nzg4ODgpXCJcbiAgICAgICAgICBmaWxsPVwiIzcxNDg5NlwiPlxuICAgICAgICAgIDxwb2x5Z29uIGlkPVwiU2hhcGVcIiBwb2ludHM9XCIwLjkxNDMzMDIzNiAzLjkxNjIyNjYyIDAuMDEwNjMzMTg0NiAyLjU2MjEwMjkzIDMuNjgxNDMxMDcgMC4xMTI1MTM5MyA0LjU4NTAwNDQ4IDEuNDY2NjM3NjNcIj48L3BvbHlnb24+XG4gICAgICAgIDwvZz5cbiAgICAgICAgPGcgaWQ9XCJHcm91cFwiIHRyYW5zZm9ybT1cInRyYW5zbGF0ZSgyNi4xODA3MjEsIDE1LjUzMjE2NCkgcm90YXRlKC0xMS4yODM4NjQpIHRyYW5zbGF0ZSgtMjYuMTgwNzIxLCAtMTUuNTMyMTY0KSB0cmFuc2xhdGUoMjQuNzU4ODQyLCAxNC4yMzM5MjYpXCJcbiAgICAgICAgICBmaWxsPVwiIzZGNDc5NVwiPlxuICAgICAgICAgIDxwb2x5Z29uIGlkPVwiU2hhcGVcIiBwb2ludHM9XCIxLjAwNTk0ODcyIDIuNTI3NjA2OSAwLjEwMjM3NTMxMiAxLjE3MzQ4MzIgMS44MTcwMzgxNSAwLjAyOTE3OTQzNjkgMi43MjA2MTE1NiAxLjM4MzMwMzEzXCI+PC9wb2x5Z29uPlxuICAgICAgICA8L2c+XG4gICAgICAgIDxnIGlkPVwiR3JvdXBcIiB0cmFuc2Zvcm09XCJ0cmFuc2xhdGUoNi41MzkyNDIsIDE2LjYxNDM5Mykgcm90YXRlKC0xMS4yODM4NjQpIHRyYW5zbGF0ZSgtNi41MzkyNDIsIC0xNi42MTQzOTMpIHRyYW5zbGF0ZSg0LjE5MDA1MCwgMTQuNjM2MTI2KVwiXG4gICAgICAgICAgZmlsbD1cIiM4ODUxOUZcIj5cbiAgICAgICAgICA8cG9seWdvbiBpZD1cIlNoYXBlXCIgcG9pbnRzPVwiMC45NTc3Mjg0NjYgMy45MzAzMjE3OCAwLjAyMzczOTIwMjkgMi41MzA2OTc5NCAzLjY5NDQxMzQ1IDAuMDgxMTA4OTQzMiA0LjYyODUyNjM1IDEuNDgwODU2NDJcIj48L3BvbHlnb24+XG4gICAgICAgIDwvZz5cbiAgICAgICAgPGcgaWQ9XCJHcm91cFwiIHRyYW5zZm9ybT1cInRyYW5zbGF0ZSgxNi44ODU3OTUsIDYuMjI4Nzc3KSByb3RhdGUoLTExLjI4Mzg2NCkgdHJhbnNsYXRlKC0xNi44ODU3OTUsIC02LjIyODc3NykgdHJhbnNsYXRlKDE1LjQ2MzkxNiwgNC44Njg3MTgpXCJcbiAgICAgICAgICBmaWxsPVwiIzg1NTA5RVwiPlxuICAgICAgICAgIDxwb2x5Z29uIGlkPVwiU2hhcGVcIiBwb2ludHM9XCIxLjA0OTQ3MDU5IDIuNjY1MzQzNzMgMC4xMTUzNTc2ODkgMS4yNjU3MTk4OSAxLjgzMDE0NDE3IDAuMTIxNDE2MTMxIDIuNzY0MTMzNDMgMS41MjExNjM2MVwiPjwvcG9seWdvbj5cbiAgICAgICAgPC9nPlxuICAgICAgICA8ZyBpZD1cIkdyb3VwXCIgdHJhbnNmb3JtPVwidHJhbnNsYXRlKDIxLjI4MDQwNCwgMjAuMzU1MzEzKSByb3RhdGUoLTExLjI4Mzg2NCkgdHJhbnNsYXRlKC0yMS4yODA0MDQsIC0yMC4zNTUzMTMpIHRyYW5zbGF0ZSgxNy42OTQ3OTUsIDE3LjUxMTU1NClcIlxuICAgICAgICAgIGZpbGw9XCIjOEQxNjZBXCI+XG4gICAgICAgICAgPHBvbHlnb24gaWQ9XCJTaGFwZVwiIHBvaW50cz1cIjcuMTY0MDQ2MzIgMS40NzMxOTA2NCAwLjk5MzQ2MDkxMiA1LjU5MDk1MzIgMC4wODk3NjM4NjA5IDQuMjM2OTUzMTUgNi4yNjA0NzI5MSAwLjExOTA2NjkzOVwiPjwvcG9seWdvbj5cbiAgICAgICAgPC9nPlxuICAgICAgICA8ZyBpZD1cIkdyb3VwXCIgdHJhbnNmb3JtPVwidHJhbnNsYXRlKDEyLjA1ODIwMSwgMTEuMTAwNDU0KSByb3RhdGUoLTExLjI4Mzg2NCkgdHJhbnNsYXRlKC0xMi4wNTgyMDEsIC0xMS4xMDA0NTQpIHRyYW5zbGF0ZSg4LjQxMDc3MSwgOC4yNTY2OTYpXCJcbiAgICAgICAgICBmaWxsPVwiI0E3MEQ2RlwiPlxuICAgICAgICAgIDxwb2x5Z29uIGlkPVwiU2hhcGVcIiBwb2ludHM9XCI2LjI3MzU3ODkzIDAuMDg3NTM4MzEwNiA3LjIwNzU2ODE5IDEuNDg3Mjg1NzkgMS4wMzY4NTkxNCA1LjYwNTE3MiAwLjEwMjg2OTg3OSA0LjIwNTQyNDUyXCI+PC9wb2x5Z29uPlxuICAgICAgICA8L2c+XG4gICAgICAgIDxnIGlkPVwiR3JvdXBcIiB0cmFuc2Zvcm09XCJ0cmFuc2xhdGUoMS44NTM0MTEsIDEwLjY3ODI2Nykgcm90YXRlKDQ1LjAwMDAwMCkgdHJhbnNsYXRlKC0xLjg1MzQxMSwgLTEwLjY3ODI2NykgdHJhbnNsYXRlKDAuNzk3OTA2LCA5LjYyMjc2MilcIlxuICAgICAgICAgIGZpbGw9XCIjOUU2MUFEXCI+XG4gICAgICAgICAgPHJlY3QgaWQ9XCJSZWN0YW5nbGUtcGF0aFwiIHg9XCIxLjY2NjYyNTcxZS0xNVwiIHk9XCIwXCIgd2lkdGg9XCIyLjA5ODI3MTVcIiBoZWlnaHQ9XCIyLjA5ODI3MTVcIj48L3JlY3Q+XG4gICAgICAgIDwvZz5cbiAgICAgICAgPGcgaWQ9XCJHcm91cFwiIHRyYW5zZm9ybT1cInRyYW5zbGF0ZSgxMi4xMTU2NjksIDI5Ljk2NjM2Nikgcm90YXRlKDQ1LjAwMDAwMCkgdHJhbnNsYXRlKC0xMi4xMTU2NjksIC0yOS45NjYzNjYpIHRyYW5zbGF0ZSgxMS4wNjAxNjMsIDI4LjkxMDg2MClcIlxuICAgICAgICAgIGZpbGw9XCIjODA1M0EzXCI+XG4gICAgICAgICAgPHJlY3QgaWQ9XCJSZWN0YW5nbGUtcGF0aFwiIHg9XCIxLjY2NjYyNTcxZS0xNVwiIHk9XCIwXCIgd2lkdGg9XCIyLjA5ODI3MTVcIiBoZWlnaHQ9XCIyLjA5ODI3MTVcIj48L3JlY3Q+XG4gICAgICAgIDwvZz5cbiAgICAgICAgPGcgaWQ9XCJHcm91cFwiIHRyYW5zZm9ybT1cInRyYW5zbGF0ZSgxNi42NDE5NTQsIDE2LjQyNzQzNykgcm90YXRlKDAuMDAwMDAwKSB0cmFuc2xhdGUoLTE2LjY0MTk1NCwgLTE2LjQyNzQzNykgdHJhbnNsYXRlKDEuNDIyNDQyLCAxLjIwNzkyNClcIlxuICAgICAgICAgIGZpbGw9XCJ1cmwoI2xpbmVhckdyYWRpZW50LTgpXCI+XG4gICAgICAgICAgPHBvbHlnb24gaWQ9XCJTaGFwZVwiIHBvaW50cz1cIjYuNTM0NDYxNTcgMjkuODg3ODk3OCAwLjAxMjk4MjM3NCAyMy4zMTc1ODAxIDIzLjIxODY2NjggMC4wNjMwNTcyNDUxIDI5Ljk1OTYwOTkgNi40NjM5ODU4M1wiPjwvcG9seWdvbj5cbiAgICAgICAgPC9nPlxuICAgICAgPC9nPlxuICAgICAgPGcgaWQ9XCJBdXJlbGlhLSstVHlwZS1zb21ldGhpbmdcIiB0cmFuc2Zvcm09XCJ0cmFuc2xhdGUoMzguMTMxOTYwLCAzLjAyMTQyNylcIj5cbiAgICAgICAgPGcgaWQ9XCJBdXJlbGlhXCIgdHJhbnNmb3JtPVwidHJhbnNsYXRlKDAuOTI5NTA1LCAwLjI5MDI5NylcIj5cbiAgICAgICAgICA8ZyBpZD1cIkFcIiB0cmFuc2Zvcm09XCJ0cmFuc2xhdGUoMC4wNzY2NzMsIDguNDEzNDY1KVwiIGZpbGw9XCIjRUQyQzg4XCI+XG4gICAgICAgICAgICA8cGF0aCBkPVwiTTguNzk1MjQ3NTIsMTYuNTQwMzU2NCBDOC45MTA4OTEwOSwxNi41Mzk4ODEyIDkuMDI4MTE4ODEsMTYuNTM3NjYzNCA5LjE0Mzc2MjM4LDE2LjUzMjU5NDEgQzkuMzg5MzA2OTMsMTYuNTIxNjYzNCA5LjYzMzI2NzMzLDE2LjQ5OTMyNjcgOS44NzcyMjc3MiwxNi40NjUyNjczIEMxMC41ODUzNDY1LDE2LjM2NTk0MDYgMTEuMjc5MjA3OSwxNi4xNjc2MDQgMTEuOTMzNDY1MywxNS44NzY1OTQxIEMxMi43NDI5NzAzLDE1LjUxNjY3MzMgMTMuNDg5MTA4OSwxNS4wMTYyMzc2IDE0LjEzMDY5MzEsMTQuNDA1MDY5MyBDMTQuNzM1ODQxNiwxMy44MjcxNjgzIDE1LjI0NzUyNDgsMTMuMTUxMjA3OSAxNS42Mzg4MTE5LDEyLjQxMDQ1NTQgQzE1Ljk2OTkwMSwxMS43ODIxNzgyIDE2LjIxMzg2MTQsMTEuMTA4NDM1NiAxNi4zNjExODgxLDEwLjQxMzMwNjkgQzE2LjU0MDE5OCw5LjU2MzU2NDM2IDE2LjU3NTA0OTUsOC42ODMyNDc1MiAxNi40NjU3NDI2LDcuODIxNzgyMTggQzE2LjM2NDM1NjQsNy4wMzI3MTI4NyAxNi4xNDI1NzQzLDYuMjYwNDM1NjQgMTUuODA1MTQ4NSw1LjUzOTY0MzU2IEMxNS40MTg2MTM5LDQuNzA5NTQ0NTUgMTQuODgxNTg0MiwzLjk1MDI1NzQzIDE0LjIzMDQ5NSwzLjMwNjQ1NTQ1IEMxMy41NDQ1NTQ1LDIuNjI5MjI3NzIgMTIuNzMzNDY1MywyLjA4MTEwODkxIDExLjg0NzkyMDgsMS43MDAxMTg4MSBDMTEuMzY3OTIwOCwxLjQ5MzU0NDU1IDEwLjg2NTc0MjYsMS4zMzYwNzkyMSAxMC4zNTQwNTk0LDEuMjMxMzY2MzQgQzkuODc0MDU5NDEsMS4xMzMxNDg1MSA5LjM4NDU1NDQ2LDEuMDgxMDI5NyA4Ljg5NTA0OTUsMS4wNzQ4NTE0OSBDOC40MTgyMTc4MiwxLjA2ODgzMTY4IDcuOTQxMzg2MTQsMS4xMDU5MDA5OSA3LjQ3MjQ3NTI1LDEuMTg2NjkzMDcgQzYuOTQwMTk4MDIsMS4yNzg0MTU4NCA2LjQxNzQyNTc0LDEuNDI2NTM0NjUgNS45MTUyNDc1MiwxLjYyNzg4MTE5IEM1LjAzNDQ1NTQ1LDEuOTgxMzA2OTMgNC4yMjE3ODIxOCwyLjQ5OTE2ODMyIDMuNTI2MzM2NjMsMy4xNDU4MjE3OCBDMi44NDUxNDg1MSwzLjc4MDExODgxIDIuMjc5NjAzOTYsNC41MzY4NzEyOSAxLjg2NDU1NDQ2LDUuMzcwNjEzODYgQzEuNTEyODcxMjksNi4wODA3OTIwOCAxLjI3MDQ5NTA1LDYuODQ0OTkwMSAxLjE1MDA5OTAxLDcuNjI4OTkwMSBDMS4wMTcwMjk3LDguNTA0MDc5MjEgMS4wMzI4NzEyOSw5LjQwMjI5NzAzIDEuMjAwNzkyMDgsMTAuMjcxODQxNiBDMS4zMzcwMjk3LDEwLjk4NTk4MDIgMS41NzYyMzc2MiwxMS42ODAxNTg0IDEuOTA3MzI2NzMsMTIuMzI3NDQ1NSBDMi4yODkxMDg5MSwxMy4wNzMxMDg5IDIuNzkyODcxMjksMTMuNzU1MjQ3NSAzLjM5MzI2NzMzLDE0LjM0MDU5NDEgQzQuMDE0MjU3NDMsMTQuOTQ4Mjc3MiA0LjczODIxNzgyLDE1LjQ1MDI5NyA1LjUyNzEyODcxLDE1LjgxODEzODYgQzYuMTU5MjA3OTIsMTYuMTEzNDI1NyA2LjgzMjQ3NTI1LDE2LjMyMTkwMSA3LjUyLDE2LjQzNTk2MDQgQzcuNzYwNzkyMDgsMTYuNDc1ODgxMiA4LjAwNDc1MjQ4LDE2LjUwNDM5NiA4LjI0ODcxMjg3LDE2LjUyMTM0NjUgQzguMzgwMTk4MDIsMTYuNTMwNTM0NyA4LjUxMTY4MzE3LDE2LjUzNTkyMDggOC42NDQ3NTI0OCwxNi41Mzg5MzA3IEM4LjY5NTQ0NTU0LDE2LjUzOTcyMjggOC43NDQ1NTQ0NiwxNi41NDAxOTggOC43OTUyNDc1MiwxNi41NDAzNTY0IEw4Ljc5NTI0NzUyLDE2LjU0MDM1NjQgWiBNMTYuODUzODYxNCwxMi4xOTk2MDQgQzE2Ljc2OTkwMSwxMi4zOTg4OTExIDE2LjY3ODAxOTgsMTIuNTk1MDA5OSAxNi41Nzk4MDIsMTIuNzg3NDg1MSBDMTYuMTMzMDY5MywxMy42NjEzMDY5IDE1LjUzNzQyNTcsMTQuNDU3OTgwMiAxNC44MjYxMzg2LDE1LjEzNTM2NjMgQzE0LjEyNzUyNDgsMTUuODAxODIxOCAxMy4zMTgwMTk4LDE2LjM1MTg0MTYgMTIuNDQwMzk2LDE2Ljc1NTAwOTkgQzExLjcwNTM0NjUsMTcuMDkyNDM1NiAxMC45MjQzNTY0LDE3LjMyNjU3NDMgMTAuMTI1OTQwNiwxNy40NDg3MTI5IEM5Ljg1MTg4MTE5LDE3LjQ5MDUzNDcgOS41NzYyMzc2MiwxNy41MTkzNjYzIDkuMjk5MDA5OSwxNy41MzUwNDk1IEM5LjE2OTEwODkxLDE3LjU0MjQ5NSA5LjAzNzYyMzc2LDE3LjU0NjYxMzkgOC45MDc3MjI3NywxNy41NDg2NzMzIEM4Ljg2OTcwMjk3LDE3LjU0OTE0ODUgOC44MzE2ODMxNywxNy41NDkzMDY5IDguNzk1MjQ3NTIsMTcuNTQ5NDY1MyBDOC42NjM3NjIzOCwxNy41NDg5OTAxIDguNTMyMjc3MjMsMTcuNTQ2NjEzOSA4LjQwMDc5MjA4LDE3LjU0MDc1MjUgQzguMTIzNTY0MzYsMTcuNTI4Mzk2IDcuODQ3OTIwNzksMTcuNTAzMDQ5NSA3LjU3MjI3NzIzLDE3LjQ2NDcxMjkgQzYuNzcwNjkzMDcsMTcuMzUyMzk2IDUuOTg0OTUwNSwxNy4xMjc3NjI0IDUuMjQ1MTQ4NTEsMTYuNzk4NzMyNyBDNC4zNDY5MzA2OSwxNi4zOTg4OTExIDMuNTE2ODMxNjgsMTUuODQ2MDE5OCAyLjgwMDc5MjA4LDE1LjE3MTQ4NTEgQzIuMDczNjYzMzcsMTQuNDg2MTc4MiAxLjQ2NTM0NjUzLDEzLjY3NjgzMTcgMS4wMDkxMDg5MSwxMi43ODc0ODUxIEMwLjY0MTU4NDE1OCwxMi4wNzEyODcxIDAuMzc1NDQ1NTQ1LDExLjMwNDU1NDUgMC4yMTg2MTM4NjEsMTAuNTE1MTY4MyBDMC4wMzE2ODMxNjgzLDkuNTcwMzc2MjQgMC4wMDMxNjgzMTY4Myw4LjU5NDUzNDY1IDAuMTI5OTAwOTksNy42Mzk5MjA3OSBDMC4yNDcxMjg3MTMsNi43NjYyNTc0MyAwLjQ5NTg0MTU4NCw1LjkxMTI4NzEzIDAuODY5NzAyOTcsNS4xMTI3MTI4NyBDMS4zMTQ4NTE0OSw0LjE1ODU3NDI2IDEuOTM0MjU3NDMsMy4yODc2MDM5NiAyLjY4ODMxNjgzLDIuNTUxOTIwNzkgQzMuNDY2MTM4NjEsMS43OTA3MzI2NyA0LjM4ODExODgxLDEuMTc2NzEyODcgNS4zOTA4OTEwOSwwLjc1MjMxNjgzMiBDNS45MiwwLjUyODYzMzY2MyA2LjQ3MTI4NzEzLDAuMzU3NzAyOTcgNy4wMzM2NjMzNywwLjI0MjY5MzA2OSBDNy41OTQ0NTU0NSwwLjEyOCA4LjE2NjMzNjYzLDAuMDY4NzUyNDc1MiA4LjczODIxNzgyLDAuMDY1MjY3MzI2NyBDOS4zMTE2ODMxNywwLjA2MTYyMzc2MjQgOS44ODUxNDg1MSwwLjExMzU4NDE1OCAxMC40NDkxMDg5LDAuMjIxNDY1MzQ3IEMxMS4wMTMwNjkzLDAuMzI5NjYzMzY2IDExLjU2NzUyNDgsMC40OTM5NDA1OTQgMTIuMDk5ODAyLDAuNzExMjg3MTI5IEMxMy4xMDg5MTA5LDEuMTIzNjQzNTYgMTQuMDM3MjI3NywxLjcyNjg5MTA5IDE0LjgyNjEzODYsMi40NzkwNDk1IEMxNS41NzU0NDU1LDMuMTkzMDI5NyAxNi4xOTY0MzU2LDQuMDM5NjAzOTYgMTYuNjUxMDg5MSw0Ljk2OTE4ODEyIEMxNi43MjIzNzYyLDUuMTE1ODgxMTkgMTYuNzkwNDk1LDUuMjY0NDc1MjUgMTYuODUzODYxNCw1LjQxNDk3MDMgTDE2Ljg1Mzg2MTQsMC4wOTQ0MTU4NDE2IEwxNy44NDM5NjA0LDAuMDk0NDE1ODQxNiBMMTcuODQzOTYwNCwxNy41MjAxNTg0IEwxNi44NTM4NjE0LDE3LjUyMDE1ODQgTDE2Ljg1Mzg2MTQsMTIuMTk5NjA0IEwxNi44NTM4NjE0LDEyLjE5OTYwNCBaXCJcbiAgICAgICAgICAgICAgaWQ9XCJTaGFwZVwiPjwvcGF0aD5cbiAgICAgICAgICA8L2c+XG4gICAgICAgICAgPGcgaWQ9XCJVXCIgdHJhbnNmb3JtPVwidHJhbnNsYXRlKDIwLjM1MzkwMSwgOC40MTM0NjUpXCIgZmlsbD1cIiNDRDBGN0VcIj5cbiAgICAgICAgICAgIDxwYXRoIGQ9XCJNMTYuNTM3MDI5NywxMi44MTg4NTE1IEMxNi4xNzEwODkxLDEzLjUyMzQ4NTEgMTUuNzExNjgzMiwxNC4xNzkwMDk5IDE1LjE3MTQ4NTEsMTQuNzYxNTA1IEMxNC43MTA0OTUsMTUuMjYwNTE0OSAxNC4xODkzMDY5LDE1LjcwNTY2MzQgMTMuNjI1MzQ2NSwxNi4wODQ1OTQxIEMxMy4wMTA2OTMxLDE2LjQ5Njc5MjEgMTIuMzQyMTc4MiwxNi44Mjk5NDA2IDExLjY0MzU2NDQsMTcuMDcyNDc1MiBDMTEuMDYzNzYyNCwxNy4yNzM2NjM0IDEwLjQ2MTc4MjIsMTcuNDEyMjc3MiA5Ljg1MTg4MTE5LDE3LjQ4NTk0MDYgQzkuNjQ5MTA4OTEsMTcuNTEwNDk1IDkuNDQ3OTIwNzksMTcuNTI3NzYyNCA5LjI0MzU2NDM2LDE3LjUzODA1OTQgQzkuMTMxMDg5MTEsMTcuNTQzNzYyNCA5LjAyMDE5ODAyLDE3LjU0NjkzMDcgOC45MDc3MjI3NywxNy41NDg2NzMzIEM4Ljg2OTcwMjk3LDE3LjU0OTE0ODUgOC44MzE2ODMxNywxNy41NDkzMDY5IDguNzk1MjQ3NTIsMTcuNTQ5NDY1MyBDOC42ODExODgxMiwxNy41NDkxNDg1IDguNTcwMjk3MDMsMTcuNTQ3MjQ3NSA4LjQ1NjIzNzYyLDE3LjU0Mjk3MDMgQzguMjE1NDQ1NTQsMTcuNTMzOTQwNiA3Ljk3NDY1MzQ3LDE3LjUxNDkzMDcgNy43MzU0NDU1NCwxNy40ODYwOTkgQzcuMDMzNjYzMzcsMTcuNDAxNTA1IDYuMzQyOTcwMywxNy4yMzE4NDE2IDUuNjgwNzkyMDgsMTYuOTgxNzAzIEM0LjY4OTEwODkxLDE2LjYwNjU3NDMgMy43NjcxMjg3MSwxNi4wNTA1MzQ3IDIuOTcxODgxMTksMTUuMzQ5MjI3NyBDMi40MDc5MjA3OSwxNC44NTA1MzQ3IDEuOTA1NzQyNTcsMTQuMjc4ODExOSAxLjQ4NzUyNDc1LDEzLjY1MTk2MDQgQzEuMDM0NDU1NDUsMTIuOTc0NTc0MyAwLjY3ODAxOTgwMiwxMi4yMzMwMjk3IDAuNDM1NjQzNTY0LDExLjQ1NTM2NjMgQzAuMjU2NjMzNjYzLDEwLjg4MzAwOTkgMC4xMzk0MDU5NDEsMTAuMjkxODAyIDAuMDg1NTQ0NTU0NSw5LjY5NDczMjY3IEMwLjA1ODYxMzg2MTQsOS4zOTg2NTM0NyAwLjA0OTEwODkxMDksOS4xMDE2MjM3NiAwLjA1MjI3NzIyNzcsOC44MDQ0MzU2NCBMMC4wNTIyNzcyMjc3LDAuMDk0NDE1ODQxNiBMMS4wNjEzODYxNCwwLjA5NDQxNTg0MTYgTDEuMDYxMzg2MTQsOC44MTAxMzg2MSBMMS4wNjEzODYxNCw4LjkxNDUzNDY1IEwxLjA2MTM4NjE0LDkuMDE0MDE5OCBDMS4wNjI5NzAzLDkuMTEzMDI5NyAxLjA2NDU1NDQ2LDkuMjExODgxMTkgMS4wNzA4OTEwOSw5LjMxMDczMjY3IEMxLjA4MTk4MDIsOS41MzgwNTk0MSAxLjEwNDE1ODQyLDkuNzY0OTEwODkgMS4xMzU4NDE1OCw5Ljk5MDMzNjYzIEMxLjIyNzcyMjc3LDEwLjYzMzM0NjUgMS40MDM1NjQzNiwxMS4yNjQgMS42NjAxOTgwMiwxMS44NjEzODYxIEMyLjAxOTgwMTk4LDEyLjcwNDc5MjEgMi41MzYyMzc2MiwxMy40NzkyODcxIDMuMTY5OTAwOTksMTQuMTQxNDY1MyBDMy43OTU2NDM1NiwxNC43OTM5ODAyIDQuNTM1NDQ1NTQsMTUuMzM1NzYyNCA1LjM0NDk1MDUsMTUuNzM2MjM3NiBDNi4wNTk0MDU5NCwxNi4wODkwMjk3IDYuODI3NzIyNzcsMTYuMzMxMDg5MSA3LjYxNTA0OTUsMTYuNDUxMTY4MyBDOC40MjYxMzg2MSwxNi41NzQ3MzI3IDkuMjU3ODIxNzgsMTYuNTcwNDU1NCAxMC4wNjczMjY3LDE2LjQzNTk2MDQgQzEwLjcwNTc0MjYsMTYuMzI5NjYzNCAxMS4zMzE0ODUxLDE2LjE0MTYyMzggMTEuOTIzOTYwNCwxNS44NzY5MTA5IEMxMi43NzE0ODUxLDE1LjQ5Nzk4MDIgMTMuNTQ3NzIyOCwxNC45NjMxNjgzIDE0LjIwNjczMjcsMTQuMzA4OTEwOSBDMTQuODM0MDU5NCwxMy42ODUzODYxIDE1LjM1MzY2MzQsMTIuOTU1MjQ3NSAxNS43NDAxOTgsMTIuMTU4NzMyNyBDMTYuMDU4NjEzOSwxMS41MDAzNTY0IDE2LjI4MzU2NDQsMTAuNzk3NjIzOCAxNi40MDg3MTI5LDEwLjA3NzE0ODUgQzE2LjQ1NzgyMTgsOS44MDMwODkxMSAxNi40OTEwODkxLDkuNTI2NjUzNDcgMTYuNTEwMDk5LDkuMjQ5MjY3MzMgQzE2LjUxODAxOTgsOS4xMTY1MTQ4NSAxNi41MjQzNTY0LDguOTgzNzYyMzggMTYuNTI3NTI0OCw4Ljg1MDY5MzA3IEwxNi41Mjc1MjQ4LDguODAzMTY4MzIgTDE2LjUzNzAyOTcsMC4wOTQ0MTU4NDE2IEwxNy41MjcxMjg3LDAuMDk0NDE1ODQxNiBMMTcuNTI3MTI4NywxNy41MjAxNTg0IEwxNi41MzcwMjk3LDE3LjUyMDE1ODQgTDE2LjUzNzAyOTcsMTIuODE4ODUxNSBMMTYuNTM3MDI5NywxMi44MTg4NTE1IFpcIlxuICAgICAgICAgICAgICBpZD1cIlNoYXBlXCI+PC9wYXRoPlxuICAgICAgICAgIDwvZz5cbiAgICAgICAgICA8ZyBpZD1cIlJcIiB0cmFuc2Zvcm09XCJ0cmFuc2xhdGUoNDAuMzE0Mjk3LCA4LjQxMzQ2NSlcIiBmaWxsPVwiI0IzMTc3NlwiPlxuICAgICAgICAgICAgPHBhdGggZD1cIk0xLjA2NDU1NDQ2LDguNDE1NTI0NzUgTDEuMDQyMzc2MjQsMTcuNTIwMTU4NCBMMC4wNTIyNzcyMjc3LDE3LjUyMDE1ODQgTDAuMDUyMjc3MjI3NywwLjA5NDQxNTg0MTYgTDEuMDQyMzc2MjQsMC4wOTQ0MTU4NDE2IEwxLjA0MjM3NjI0LDQuNTU1MjQ3NTIgQzEuMTY1OTQwNTksNC4zMjk2NjMzNyAxLjMwMDU5NDA2LDQuMTA5NzgyMTggMS40NDMxNjgzMiwzLjg5NjM5NjA0IEMxLjgzMjg3MTI5LDMuMzE2OTEwODkgMi4yOTU0NDU1NCwyLjc4NjM3NjI0IDIuODEzNDY1MzUsMi4zMTg4OTEwOSBDMy41NzA2OTMwNywxLjYzNjExODgxIDQuNDQ4MzE2ODMsMS4wODkxMDg5MSA1LjM5NDA1OTQxLDAuNzA2NjkzMDY5IEM2LjA4OTUwNDk1LDAuNDI1MTg4MTE5IDYuODIxMzg2MTQsMC4yMzI4NzEyODcgNy41NjU5NDA1OSwwLjEzMzM4NjEzOSBDNy44MjI1NzQyNiwwLjA5OTMyNjczMjcgOC4wNzkyMDc5MiwwLjA3NjAzOTYwNCA4LjMzNzQyNTc0LDAuMDYzNTI0NzUyNSBDOC40ODYzMzY2MywwLjA1NjM5NjAzOTYgOC42MzUyNDc1MiwwLjA1MzIyNzcyMjggOC43ODQxNTg0MiwwLjA1Mjc1MjQ3NTIgTDguNzg3MzI2NzMsMS4wODY0MTU4NCBDOC43NTI0NzUyNSwxLjA4NjU3NDI2IDguNzE5MjA3OTIsMS4wODY3MzI2NyA4LjY4NTk0MDU5LDEuMDg3MDQ5NSBDOC42NTI2NzMyNywxLjA4NzUyNDc1IDguNjE5NDA1OTQsMS4wODgxNTg0MiA4LjU4NjEzODYxLDEuMDg4OTUwNSBDOC40NzA0OTUwNSwxLjA5MTk2MDQgOC4zNTQ4NTE0OSwxLjA5Njg3MTI5IDguMjM5MjA3OTIsMS4xMDQ2MzM2NiBDNy45OTUyNDc1MiwxLjEyMDc5MjA4IDcuNzUyODcxMjksMS4xNDc4ODExOSA3LjUxMjA3OTIxLDEuMTg1OTAwOTkgQzYuODczNjYzMzcsMS4yODY4MTE4OCA2LjI0NzkyMDc5LDEuNDY1NTA0OTUgNS42NTIyNzcyMywxLjcxODQ5NTA1IEM0LjgyNjkzMDY5LDIuMDcwMDE5OCA0LjA2MTc4MjE4LDIuNTY1MDY5MzEgMy40MDU5NDA1OSwzLjE3ODEzODYxIEMyLjk0NjUzNDY1LDMuNjA3MTI4NzEgMi41NDA5OTAxLDQuMDkzNDY1MzUgMi4yMDM1NjQzNiw0LjYyMzIwNzkyIEMxLjg1NjYzMzY2LDUuMTY2NzMyNjcgMS41ODA5OTAxLDUuNzU2MTk4MDIgMS4zODkzMDY5Myw2LjM3MTgwMTk4IEMxLjI1MzA2OTMxLDYuODA5NjYzMzcgMS4xNTk2MDM5Niw3LjI2MDM1NjQ0IDEuMTA4OTEwODksNy43MTYxMTg4MSBDMS4wODE5ODAyLDcuOTQ4NTE0ODUgMS4wNjkzMDY5Myw4LjE4MTg2MTM5IDEuMDY0NTU0NDYsOC40MTU1MjQ3NSBMMS4wNjQ1NTQ0Niw4LjQxNTUyNDc1IFpcIlxuICAgICAgICAgICAgICBpZD1cIlNoYXBlXCI+PC9wYXRoPlxuICAgICAgICAgIDwvZz5cbiAgICAgICAgICA8ZyBpZD1cIkVcIiB0cmFuc2Zvcm09XCJ0cmFuc2xhdGUoNDguMzkzNTA1LCA4LjQxMzQ2NSlcIiBmaWxsPVwiIzlCMjA3M1wiPlxuICAgICAgICAgICAgPHBhdGggZD1cIk05LjM3NTA0OTUsMTcuNTUxMDQ5NSBMOC44MTU4NDE1OCwxNy41NDkzMDY5IEM4Ljc3OTQwNTk0LDE3LjU0ODgzMTcgOC43NDEzODYxNCwxNy41NDgzNTY0IDguNzAzMzY2MzQsMTcuNTQ3ODgxMiBDOC41OTA4OTEwOSwxNy41NDUzNDY1IDguNDgsMTcuNTQxMzg2MSA4LjM2NzUyNDc1LDE3LjUzNTA0OTUgQzguMTI4MzE2ODMsMTcuNTIxNDI1NyA3Ljg4OTEwODkxLDE3LjQ5Nzk4MDIgNy42NTE0ODUxNSwxNy40NjQ3MTI5IEM2Ljk4OTMwNjkzLDE3LjM3MjAzOTYgNi4zMzk4MDE5OCwxNy4yMDMzMjY3IDUuNzE3MjI3NzIsMTYuOTYyMzc2MiBDNC42ODI3NzIyOCwxNi41NjIwNTk0IDMuNzI5MTA4OTEsMTUuOTYyNjEzOSAyLjkxODAxOTgsMTUuMjA3Mjg3MSBDMi4xMjExODgxMiwxNC40NjYzNzYyIDEuNDY1MzQ2NTMsMTMuNTc3MzQ2NSAwLjk5MzI2NzMyNywxMi41OTc1NDQ2IEMwLjY0MzE2ODMxNywxMS44NzA3MzI3IDAuMzk0NDU1NDQ2LDExLjA5NTQ0NTUgMC4yNTgyMTc4MjIsMTAuMzAwMzU2NCBDMC4wOTM0NjUzNDY1LDkuMzUwODExODggMC4wODg3MTI4NzEzLDguMzczODYxMzkgMC4yMzkyMDc5MjEsNy40MjI0MTU4NCBDMC40MDA3OTIwNzksNi40MTQ4OTEwOSAwLjczOTgwMTk4LDUuNDM3NzgyMTggMS4yMzcyMjc3Miw0LjU0NzMyNjczIEMxLjc4Mzc2MjM4LDMuNTY4NzkyMDggMi41MjAzOTYwNCwyLjY5ODQ1NTQ1IDMuMzkzMjY3MzMsMS45OTUyNDc1MiBDMy44NTc0MjU3NCwxLjYyMDc1MjQ4IDQuMzYxMTg4MTIsMS4yOTM5NDA1OSA0Ljg5MTg4MTE5LDEuMDIxNzgyMTggQzUuMzgyOTcwMywwLjc3MDIxNzgyMiA1Ljg5NzgyMTc4LDAuNTY1NTQ0NTU0IDYuNDI4NTE0ODUsMC40MTE1NjQzNTYgQzcuMTg1NzQyNTcsMC4xOTE1MjQ3NTIgNy45NzE0ODUxNSwwLjA3NTcyMjc3MjMgOC43NjAzOTYwNCwwLjA2NTc0MjU3NDMgQzkuNjQxMTg4MTIsMC4wNTQ2NTM0NjUzIDEwLjUyMzU2NDQsMC4xNzUzNjYzMzcgMTEuMzY5NTA1LDAuNDI2NzcyMjc3IEMxMi4zMTg0MTU4LDAuNzA5Mzg2MTM5IDEzLjIxODIxNzgsMS4xNTU2NDM1NiAxNC4wMTk4MDIsMS43Mzk3MjI3NyBDMTQuODY3MzI2NywyLjM1ODQ5NTA1IDE1LjYwMjM3NjIsMy4xMjk2NjMzNyAxNi4xODA1OTQxLDQuMDA2NjUzNDcgQzE2LjU1OTIwNzksNC41ODIzMzY2MyAxNi44Njk3MDMsNS4yMDMwMDk5IDE3LjEwMjU3NDMsNS44NTE3MjI3NyBDMTcuMzQxNzgyMiw2LjUxNjc1MjQ4IDE3LjQ5ODYxMzksNy4yMTA5MzA2OSAxNy41Njk5MDEsNy45MTQxMzg2MSBDMTcuNTkyMDc5Miw4LjEzNjA3OTIxIDE3LjYwNjMzNjYsOC4zNTg4MTE4OCAxNy42MTI2NzMzLDguNTgxODYxMzkgQzE3LjYxMjY3MzMsOC42MzgyNTc0MyAxNy42MTQyNTc0LDguNjk0NDk1MDUgMTcuNjE0MjU3NCw4Ljc1MDczMjY3IEMxNy42MTU4NDE2LDguNzg3MzI2NzMgMTcuNjE1ODQxNiw4LjgyNTgyMTc4IDE3LjYxMjY3MzMsOC44NjIwOTkwMSBDMTcuNjA5NTA1LDguODgwOTUwNSAxNy42MDYzMzY2LDguODk5NjQzNTYgMTcuNjAzMTY4Myw4LjkxODE3ODIyIEMxNy41OTA0OTUsOC45NzM0NjUzNSAxNy41NjgzMTY4LDkuMDI2NjkzMDcgMTcuNTM4MjE3OCw5LjA3NDY5MzA3IEMxNy40NzgwMTk4LDkuMTcxMzI2NzMgMTcuMzg0NTU0NSw5LjI0NTYyMzc2IDE3LjI3NjgzMTcsOS4yODMzMjY3MyBDMTcuMjQxOTgwMiw5LjI5NTg0MTU4IDE3LjIwMzk2MDQsOS4zMDQzOTYwNCAxNy4xNjc1MjQ4LDkuMzA4NjczMjcgQzE3LjE0ODUxNDksOS4zMTA3MzI2NyAxNy4xMjk1MDUsOS4zMTA3MzI2NyAxNy4xMTA0OTUsOS4zMTE4NDE1OCBMOS4wODE5ODAyLDkuMzExODQxNTggTDkuMDgxOTgwMiw4LjMwMjczMjY3IEwxNi41ODkzMDY5LDguMzAyNzMyNjcgQzE2LjU3MTg4MTIsOC4wMjg2NzMyNyAxNi41NDAxOTgsNy43NTU4ODExOSAxNi40OTI2NzMzLDcuNDg1MzA2OTMgQzE2LjQwMjM3NjIsNi45NTI3MTI4NyAxNi4yNTM0NjUzLDYuNDI5NjIzNzYgMTYuMDUyMjc3Miw1LjkyODA3OTIxIEMxNS43NjIzNzYyLDUuMjA1Mzg2MTQgMTUuMzYxNTg0Miw0LjUyOCAxNC44Njg5MTA5LDMuOTI0NDM1NjQgQzE0LjMxMTI4NzEsMy4yNDAwNzkyMSAxMy42MzY0MzU2LDIuNjUxODgxMTkgMTIuODgyMzc2MiwyLjE5MzQyNTc0IEMxMi4yNjQ1NTQ1LDEuODE4NDU1NDUgMTEuNTk2MDM5NiwxLjUzMDc3MjI4IDEwLjg5NzQyNTcsMS4zNDE5NDA1OSBDMTAuMDYyNTc0MywxLjExNTg4MTE5IDkuMTg5NzAyOTcsMS4wMzI4NzEyOSA4LjMyNjMzNjYzLDEuMDkzMjI3NzIgQzcuOTA2NTM0NjUsMS4xMjI1MzQ2NSA3LjQ4ODMxNjgzLDEuMTg1OTAwOTkgNy4wNzk2MDM5NiwxLjI4MzE2ODMyIEM2LjYzMjg3MTI5LDEuMzg5MTQ4NTEgNi4xOTcyMjc3MiwxLjUzNTIwNzkyIDUuNzc1ODQxNTgsMS43MTg5NzAzIEM0Ljg5MzQ2NTM1LDIuMTA0ODcxMjkgNC4wODU1NDQ1NSwyLjY1NzkwMDk5IDMuNDA0MzU2NDQsMy4zMzkwODkxMSBDMy4wODc1MjQ3NSwzLjY1NjU1NDQ2IDIuNzk3NjIzNzYsNC4wMDE1ODQxNiAyLjUzOTQwNTk0LDQuMzY4OTUwNSBDMi4yMTYyMzc2Miw0LjgyODM1NjQ0IDEuOTQzNzYyMzgsNS4zMjI2MTM4NiAxLjcyODMxNjgzLDUuODQwNzkyMDggQzEuNTAzMzY2MzQsNi4zODM4NDE1OCAxLjM0MDE5ODAyLDYuOTUyODcxMjkgMS4yNDM1NjQzNiw3LjUzMzE0ODUxIEMxLjE2NTk0MDU5LDguMDAzMzI2NzMgMS4xMzI2NzMyNyw4LjQ4MDYzMzY2IDEuMTQwNTk0MDYsOC45NTczMDY5MyBDMS4xNTE2ODMxNyw5LjQ5NDQ5NTA1IDEuMjE2NjMzNjYsMTAuMDMwNTc0MyAxLjMzNzAyOTcsMTAuNTU0MTM4NiBDMS40NzY0MzU2NCwxMS4xNTM1ODQyIDEuNjg3MTI4NzEsMTEuNzM2MjM3NiAxLjk2NDM1NjQ0LDEyLjI4NTYyMzggQzIuMjY1MzQ2NTMsMTIuODgxNzQyNiAyLjY0Mzk2MDQsMTMuNDM4MjU3NCAzLjA4NTk0MDU5LDEzLjkzNzU4NDIgQzMuNDk3ODIxNzgsMTQuNDAwNzkyMSAzLjk2MzU2NDM2LDE0LjgxNDU3NDMgNC40NzIwNzkyMSwxNS4xNjczNjYzIEM0Ljg4MjM3NjI0LDE1LjQ1MTQwNTkgNS4zMTk2MDM5NiwxNS42OTU4NDE2IDUuNzc1ODQxNTgsMTUuODk1NjA0IEM2LjI1NTg0MTU4LDE2LjEwNTAyOTcgNi43NTQ4NTE0OSwxNi4yNjUzNDY1IDcuMjY2NTM0NjUsMTYuMzczMzg2MSBDNy41OTkyMDc5MiwxNi40NDM3MjI4IDcuOTM4MjE3ODIsMTYuNDkxODgxMiA4LjI3NzIyNzcyLDE2LjUxNzcwMyBDOC40NTk0MDU5NCwxNi41MzE0ODUxIDguNjQsMTYuNTM4NDU1NCA4LjgyMjE3ODIyLDE2LjU0MDE5OCBMOS4zNzgyMTc4MiwxNi41NDE5NDA2IEM5LjM3ODIxNzgyLDE2Ljg3ODI1NzQgOS4zNzY2MzM2NiwxNy4yMTQ1NzQzIDkuMzc1MDQ5NSwxNy41NTEwNDk1IEw5LjM3NTA0OTUsMTcuNTUxMDQ5NSBaXCJcbiAgICAgICAgICAgICAgaWQ9XCJTaGFwZVwiPjwvcGF0aD5cbiAgICAgICAgICA8L2c+XG4gICAgICAgICAgPGcgaWQ9XCJMXCIgdHJhbnNmb3JtPVwidHJhbnNsYXRlKDY4LjUxMjMxNywgMC4wMTc0MjYpXCIgZmlsbD1cIiM4RjI0NzVcIj5cbiAgICAgICAgICAgIDxwYXRoIGQ9XCJNNS4xNTAwOTkwMSwyNS45NDU1MDUgQzQuOTg4NTE0ODUsMjUuOTQ1MDI5NyA0LjgyNjkzMDY5LDI1Ljk0MDExODggNC42NjUzNDY1MywyNS45MjkxODgxIEM0LjMyNDc1MjQ4LDI1LjkwNjIxNzggMy45ODQxNTg0MiwyNS44NTc3NDI2IDMuNjUxNDg1MTUsMjUuNzgwMjc3MiBDMy4zMTg4MTE4OCwyNS43MDI2NTM1IDIuOTkwODkxMDksMjUuNTk1NzIyOCAyLjY3ODgxMTg4LDI1LjQ1NjYzMzcgQzIuMjkyMjc3MjMsMjUuMjg0OTEwOSAxLjkyNjMzNjYzLDI1LjA2NDIzNzYgMS42MDE1ODQxNiwyNC43OTQ3NzIzIEMxLjQzMDQ5NTA1LDI0LjY1NDg5MTEgMS4yNzIwNzkyMSwyNC41MDIwMTk4IDEuMTI2MzM2NjMsMjQuMzM3NTg0MiBDMC45NDI1NzQyNTcsMjQuMTMxNDg1MSAwLjc4MDk5MDA5OSwyMy45MDc0ODUxIDAuNjQxNTg0MTU4LDIzLjY2OTIyNzcgQzAuNDY3MzI2NzMzLDIzLjM2OTk4MDIgMC4zMzEwODkxMDksMjMuMDQ5MTg4MSAwLjIzNDQ1NTQ0NiwyMi43MTY4MzE3IEMwLjE2MzE2ODMxNywyMi40NjkzODYxIDAuMTEyNDc1MjQ4LDIyLjIxNTc2MjQgMC4wODM5NjAzOTYsMjEuOTU5NzYyNCBDMC4wNjAxOTgwMTk4LDIxLjc0NzAwOTkgMC4wNDkxMDg5MTA5LDIxLjUzMjk5MDEgMC4wNTIyNzcyMjc3LDIxLjMxODk3MDMgTDAuMDUyMjc3MjI3NywwLjE0MDY3MzI2NyBMMS4wNjEzODYxNCwwLjE0MDY3MzI2NyBMMS4wNjEzODYxNCwyMS4zMjUzMDY5IEwxLjA2MTM4NjE0LDIxLjQzMDQ5NSBDMS4wNjI5NzAzLDIxLjU2OTEwODkgMS4wNzA4OTEwOSwyMS43MDc3MjI4IDEuMDg2NzMyNjcsMjEuODQ1NTQ0NiBDMS4xMTIwNzkyMSwyMi4wNjczMjY3IDEuMTU2NDM1NjQsMjIuMjg3MDQ5NSAxLjIyMjk3MDMsMjIuNTAwMTE4OCBDMS4zMDIxNzgyMiwyMi43NTEwNDk1IDEuNDA5OTAwOTksMjIuOTkyNzkyMSAxLjU0NzcyMjc3LDIzLjIxNzI2NzMgQzEuNjUyMjc3MjMsMjMuMzg5MzA2OSAxLjc3NDI1NzQzLDIzLjU1MTA0OTUgMS45MTA0OTUwNSwyMy42OTk4MDIgQzIuMDE4MjE3ODIsMjMuODE4NjEzOSAyLjEzNTQ0NTU0LDIzLjkyOTE4ODEgMi4yNjA1OTQwNiwyNC4wMzA1NzQzIEMyLjM2NTE0ODUxLDI0LjExNjExODggMi40NzYwMzk2LDI0LjE5NTMyNjcgMi41OTAwOTkwMSwyNC4yNjgwMzk2IEMyLjY4ODMxNjgzLDI0LjMzMDYxMzkgMi43ODk3MDI5NywyNC4zODg0MzU2IDIuODkyNjczMjcsMjQuNDQxNTA1IEMzLjM4NTM0NjUzLDI0LjY5MzA2OTMgMy45MjcxMjg3MSwyNC44MzcwNjkzIDQuNDc1MjQ3NTIsMjQuODk5MTY4MyBDNC43MDAxOTgwMiwyNC45MjQ2NzMzIDQuOTI2NzMyNjcsMjQuOTM1NzYyNCA1LjE1MTY4MzE3LDI0LjkzNjM5NiBDNS4xNTE2ODMxNywyNS4yNzI3MTI5IDUuMTUwMDk5MDEsMjUuNjA5MDI5NyA1LjE1MDA5OTAxLDI1Ljk0NTUwNSBMNS4xNTAwOTkwMSwyNS45NDU1MDUgWlwiXG4gICAgICAgICAgICAgIGlkPVwiU2hhcGVcIj48L3BhdGg+XG4gICAgICAgICAgPC9nPlxuICAgICAgICAgIDxnIGlkPVwiSVwiIHRyYW5zZm9ybT1cInRyYW5zbGF0ZSg3NS45NTc4NjEsIDAuMDE3NDI2KVwiIGZpbGw9XCIjNzgzMjdBXCI+XG4gICAgICAgICAgICA8cGF0aCBkPVwiTTAuMTQ4OTEwODkxLDI1LjkxNjE5OCBMMC4xNDg5MTA4OTEsOC40OTA0NTU0NSBMMS4xMzkwMDk5LDguNDkwNDU1NDUgTDEuMTM5MDA5OSwyNS45MTYxOTggTDAuMTQ4OTEwODkxLDI1LjkxNjE5OCBMMC4xNDg5MTA4OTEsMjUuOTE2MTk4IFogTTAuMTUzNjYzMzY2LDIuNDcwNjUzNDcgTDAuMTUzNjYzMzY2LDAuMTQwNjczMjY3IEwxLjEzNTg0MTU4LDAuMTQwNjczMjY3IEwxLjEzNTg0MTU4LDIuNDcwNjUzNDcgTDAuMTUzNjYzMzY2LDIuNDcwNjUzNDcgTDAuMTUzNjYzMzY2LDIuNDcwNjUzNDcgWlwiXG4gICAgICAgICAgICAgIGlkPVwiU2hhcGVcIj48L3BhdGg+XG4gICAgICAgICAgPC9nPlxuICAgICAgICAgIDxnIGlkPVwiQTFcIiB0cmFuc2Zvcm09XCJ0cmFuc2xhdGUoNzkuNjAxNDI2LCA4LjQxMzQ2NSlcIiBmaWxsPVwiIzZFNEQ5QlwiPlxuICAgICAgICAgICAgPHBhdGggZD1cIk04Ljc5NTI0NzUyLDE2LjU0MDM1NjQgQzguOTEwODkxMDksMTYuNTM5ODgxMiA5LjAyODExODgxLDE2LjUzNzY2MzQgOS4xNDM3NjIzOCwxNi41MzI1OTQxIEM5LjM4OTMwNjkzLDE2LjUyMTY2MzQgOS42MzMyNjczMywxNi40OTkzMjY3IDkuODc3MjI3NzIsMTYuNDY1MjY3MyBDMTAuNTg1MzQ2NSwxNi4zNjU5NDA2IDExLjI3OTIwNzksMTYuMTY3NjA0IDExLjkzMzQ2NTMsMTUuODc2NTk0MSBDMTIuNjcxNjgzMiwxNS41NDgwMzk2IDEzLjM1NzYyMzgsMTUuMTAyNzMyNyAxMy45NTk2MDQsMTQuNTYyNjkzMSBDMTQuNjI4MTE4OCwxMy45NjE2NjM0IDE1LjE5MjA3OTIsMTMuMjQ0NjczMyAxNS42MTY2MzM3LDEyLjQ1MTgwMiBDMTUuOTU4ODExOSwxMS44MTE4MDIgMTYuMjEwNjkzMSwxMS4xMjM2NDM2IDE2LjM2MTE4ODEsMTAuNDEzMzA2OSBDMTYuNTQzMzY2Myw5LjU0NzU2NDM2IDE2LjU3NjYzMzcsOC42NTAyOTcwMyAxNi40NTk0MDU5LDcuNzczMzA2OTMgQzE2LjM1NDg1MTUsNi45ODU1MDQ5NSAxNi4xMjY3MzI3LDYuMjE1Mjg3MTMgMTUuNzg2MTM4Niw1LjQ5NzE4ODEyIEMxNS4zOTMyNjczLDQuNjY5NDY1MzUgMTQuODUxNDg1MSwzLjkxMzgyMTc4IDE0LjE5NzIyNzcsMy4yNzM4MjE3OCBDMTMuNTA2NTM0NywyLjYwMDU1NDQ2IDEyLjY5MjI3NzIsMi4wNTcwMjk3IDExLjgwNTE0ODUsMS42ODE3NDI1NyBDMTEuMzM3ODIxOCwxLjQ4NDE5ODAyIDEwLjg0OTkwMSwxLjMzMjkxMDg5IDEwLjM1NDA1OTQsMS4yMzEzNjYzNCBDOS44NTY2MzM2NiwxLjEyOTgyMTc4IDkuMzUxMjg3MTMsMS4wNzc1NDQ1NSA4Ljg0NDM1NjQ0LDEuMDc0Mzc2MjQgQzguMzM3NDI1NzQsMS4wNzEyMDc5MiA3LjgyODkxMDg5LDEuMTE2OTkwMSA3LjMyOTkwMDk5LDEuMjEyNTE0ODUgQzYuODMwODkxMDksMS4zMDgxOTgwMiA2LjM0MTM4NjE0LDEuNDUzNDY1MzUgNS44NzI0NzUyNSwxLjY0NTQ2NTM1IEM0Ljk3OTAwOTksMi4wMTAyOTcwMyA0LjE1NjgzMTY4LDIuNTQ0MTU4NDIgMy40NTk4MDE5OCwzLjIwOTUwNDk1IEMyLjc5NjAzOTYsMy44NDEyNjczMyAyLjI0NjMzNjYzLDQuNTkwNDE1ODQgMS44NDM5NjA0LDUuNDEyNzUyNDggQzEuNDk1NDQ1NTQsNi4xMjU0NjUzNSAxLjI1NzgyMTc4LDYuODkxODgxMTkgMS4xNDM3NjIzOCw3LjY3Njk5MDEgQzEuMDE4NjEzODYsOC41MzY3MTI4NyAxLjAzNjAzOTYsOS40MTgxMzg2MSAxLjIwMDc5MjA4LDEwLjI3MTY4MzIgQzEuMzQzMzY2MzQsMTEuMDE2NzEyOSAxLjU5NjgzMTY4LDExLjczOTU2NDQgMS45NTAwOTkwMSwxMi40MTA0NTU0IEMyLjM0MTM4NjE0LDEzLjE1MTIwNzkgMi44NTMwNjkzMSwxMy44MjcxNjgzIDMuNDU5ODAxOTgsMTQuNDA1MDY5MyBDNC4wNzc2MjM3NiwxNC45OTQ1MzQ3IDQuNzkzNjYzMzcsMTUuNDgxMzQ2NSA1LjU2OTkwMDk5LDE1LjgzNzk0MDYgQzYuMjE5NDA1OTQsMTYuMTM2MjM3NiA2LjkxMDA5OTAxLDE2LjM0MzI4NzEgNy42MTY2MzM2NiwxNi40NTExNjgzIEM3Ljg1OTAwOTksMTYuNDg4MjM3NiA4LjEwMjk3MDMsMTYuNTEzNTg0MiA4LjM0NjkzMDY5LDE2LjUyNzUyNDggQzguNDYyNTc0MjYsMTYuNTM0MTc4MiA4LjU3ODIxNzgyLDE2LjUzNzgyMTggOC42OTM4NjEzOSwxNi41Mzk3MjI4IEM4LjcyODcxMjg3LDE2LjU0MDAzOTYgOC43NjAzOTYwNCwxNi41NDAxOTggOC43OTUyNDc1MiwxNi41NDAzNTY0IEw4Ljc5NTI0NzUyLDE2LjU0MDM1NjQgWiBNMTYuODUzODYxNCwxMi4xOTk2MDQgQzE2Ljc2OTkwMSwxMi4zOTg4OTExIDE2LjY3ODAxOTgsMTIuNTk1MDA5OSAxNi41Nzk4MDIsMTIuNzg3NDg1MSBDMTYuMTI1MTQ4NSwxMy42NzY4MzE3IDE1LjUxNTI0NzUsMTQuNDg2MTc4MiAxNC43ODgxMTg4LDE1LjE3MTQ4NTEgQzE0LjA3MjA3OTIsMTUuODQ2MDE5OCAxMy4yNDM1NjQ0LDE2LjM5ODg5MTEgMTIuMzQzNzYyNCwxNi43OTg3MzI3IEMxMS42MDM5NjA0LDE3LjEyNzc2MjQgMTAuODE4MjE3OCwxNy4zNTIzOTYgMTAuMDE2NjMzNywxNy40NjQ3MTI5IEM5Ljc0MjU3NDI2LDE3LjUwMzA0OTUgOS40NjUzNDY1MywxNy41MjgzOTYgOS4xODgxMTg4MSwxNy41NDA3NTI1IEM5LjA1NjYzMzY2LDE3LjU0NjYxMzkgOC45MjUxNDg1MSwxNy41NDg5OTAxIDguNzk1MjQ3NTIsMTcuNTQ5NDY1MyBDOC42NjM3NjIzOCwxNy41NDg5OTAxIDguNTMyMjc3MjMsMTcuNTQ2NjEzOSA4LjQwMDc5MjA4LDE3LjU0MDc1MjUgQzguMTIzNTY0MzYsMTcuNTI4Mzk2IDcuODQ3OTIwNzksMTcuNTAzMDQ5NSA3LjU3MjI3NzIzLDE3LjQ2NDcxMjkgQzYuNzcwNjkzMDcsMTcuMzUyMzk2IDUuOTg0OTUwNSwxNy4xMjc3NjI0IDUuMjQ1MTQ4NTEsMTYuNzk4NzMyNyBDNC4zMzEwODkxMSwxNi4zOTE3NjI0IDMuNDg2NzMyNjcsMTUuODI2MjE3OCAyLjc2Mjc3MjI4LDE1LjEzNTM2NjMgQzIuMDUzMDY5MzEsMTQuNDU3OTgwMiAxLjQ1NzQyNTc0LDEzLjY2MTMwNjkgMS4wMDkxMDg5MSwxMi43ODc0ODUxIEMwLjYzMzY2MzM2NiwxMi4wNTUxMjg3IDAuMzY0MzU2NDM2LDExLjI2OTcwMyAwLjIwOTEwODkxMSwxMC40NjE2MjM4IEMwLjAzMTY4MzE2ODMsOS41MzM2MjM3NiAwLjAwNDc1MjQ3NTI1LDguNTc2MzE2ODMgMC4xMjk5MDA5OSw3LjYzOTc2MjM4IEMwLjI0ODcxMjg3MSw2Ljc0ODY3MzI3IDAuNTA2OTMwNjkzLDUuODc3MDY5MzEgMC44OTE4ODExODgsNS4wNjQ3MTI4NyBDMS4zNDMzNjYzNCw0LjExMzQyNTc0IDEuOTY3NTI0NzUsMy4yNDY0MTU4NCAyLjcyNDc1MjQ4LDIuNTE1NDg1MTUgQzMuNTA4OTEwODksMS43NTg3MzI2NyA0LjQzNDA1OTQxLDEuMTUwMDk5MDEgNS40NCwwLjczMTcyMjc3MiBDNS45ODgxMTg4MSwwLjUwNDIzNzYyNCA2LjU1ODQxNTg0LDAuMzMyOTkwMDk5IDcuMTM5ODAxOTgsMC4yMjE0NjUzNDcgQzcuNjg0NzUyNDgsMC4xMTcwNjkzMDcgOC4yMzkyMDc5MiwwLjA2NTEwODkxMDkgOC43OTUyNDc1MiwwLjA2NTEwODkxMDkgQzkuMzQ5NzAyOTcsMC4wNjUxMDg5MTA5IDkuOTA0MTU4NDIsMC4xMTcwNjkzMDcgMTAuNDQ5MTA4OSwwLjIyMTQ2NTM0NyBDMTEuMDMwNDk1LDAuMzMyOTkwMDk5IDExLjYwMDc5MjEsMC41MDQyMzc2MjQgMTIuMTQ4OTEwOSwwLjczMTcyMjc3MiBDMTMuMTU0ODUxNSwxLjE1MDA5OTAxIDE0LjA4LDEuNzU4NzMyNjcgMTQuODY0MTU4NCwyLjUxNTMyNjczIEMxNS42MDg3MTI5LDMuMjMzOTAwOTkgMTYuMjI0OTUwNSw0LjA4NDQzNTY0IDE2LjY3NDg1MTUsNS4wMTY4NzEyOSBDMTYuNzM4MjE3OCw1LjE0ODAzOTYgMTYuNzk2ODMxNyw1LjI4MDc5MjA4IDE2Ljg1Mzg2MTQsNS40MTQ5NzAzIEwxNi44NTM4NjE0LDAuMDk0NDE1ODQxNiBMMTcuODQzOTYwNCwwLjA5NDQxNTg0MTYgTDE3Ljg0Mzk2MDQsMTcuNTIwMTU4NCBDMTcuODQyMzc2MiwxNy41MzkzMjY3IDE2Ljg1Mzg2MTQsMTcuNTIwMTU4NCAxNi44NTM4NjE0LDE3LjUyMDE1ODQgTDE2Ljg1Mzg2MTQsMTIuMTk5NjA0IEwxNi44NTM4NjE0LDEyLjE5OTYwNCBaXCJcbiAgICAgICAgICAgICAgaWQ9XCJTaGFwZVwiPjwvcGF0aD5cbiAgICAgICAgICA8L2c+XG4gICAgICAgIDwvZz5cbiAgICAgIDwvZz5cbiAgICA8L2c+XG4gIDwvc3ZnPlxuPC90ZW1wbGF0ZT5cbiIsIjx0ZW1wbGF0ZSBiaW5kYWJsZT1cImNvbnRyb2xsZXJcIj5cbiAgPHJlcXVpcmUgZnJvbT1cIi4vY29udHJvbGxlci12aWV3LmNzc1wiPjwvcmVxdWlyZT5cblxuICA8ZGl2IGNsYXNzPVwiY2F0ZWdvcnlcIiBpZi5iaW5kPVwiY29udHJvbGxlci5iaW5kYWJsZXMubGVuZ3RoXCI+XG4gICAgPGg0IGNsYXNzPVwiY2F0ZWdvcnktbmFtZVwiPkJpbmRhYmxlczwvaDQ+XG4gICAgPHVsIGNsYXNzPVwicHJvcGVydGllc1wiPlxuICAgICAgPGxpIHJlcGVhdC5mb3I9XCJiaW5kYWJsZSBvZiBjb250cm9sbGVyLmJpbmRhYmxlc1wiPlxuICAgICAgICA8cHJvcGVydHktdmlld1xuICAgICAgICAgIGNvbnRyb2xsZXIuYmluZD1cImNvbnRyb2xsZXJcIlxuICAgICAgICAgIHByb3BlcnR5LmJpbmQ9XCJiaW5kYWJsZVwiXG4gICAgICAgID48L3Byb3BlcnR5LXZpZXc+XG4gICAgICA8L2xpPlxuICAgIDwvdWw+XG4gIDwvZGl2PlxuXG4gIDxkaXYgY2xhc3M9XCJjYXRlZ29yeVwiIGlmLmJpbmQ9XCJjb250cm9sbGVyLnByb3BlcnRpZXMubGVuZ3RoXCI+XG4gICAgPGg0IGNsYXNzPVwiY2F0ZWdvcnktbmFtZVwiPlByb3BlcnRpZXM8L2g0PlxuICAgIDx1bCBjbGFzcz1cInByb3BlcnRpZXNcIj5cbiAgICAgIDxsaSByZXBlYXQuZm9yPVwicHJvcGVydHkgb2YgY29udHJvbGxlci5wcm9wZXJ0aWVzXCI+XG4gICAgICAgIDxwcm9wZXJ0eS12aWV3XG4gICAgICAgICAgY29udHJvbGxlci5iaW5kPVwiY29udHJvbGxlclwiXG4gICAgICAgICAgcHJvcGVydHkuYmluZD1cInByb3BlcnR5XCJcbiAgICAgICAgPjwvcHJvcGVydHktdmlldz5cbiAgICAgIDwvbGk+XG4gICAgPC91bD5cbiAgPC9kaXY+XG48L3RlbXBsYXRlPlxuIiwiPGltcG9ydCBmcm9tPVwiLi9kZWJ1Zy1ncm91cC5jc3NcIj48L2ltcG9ydD5cbjxzZWN0aW9uPlxuICA8aDIgY2xhc3M9XCJoZWFkZXJcIj4ke2hlYWRpbmd9PC9oMj5cbiAgPGRpdiBjbGFzcz1cImNvbnRlbnRcIj5cbiAgICA8YXUtc2xvdD48L2F1LXNsb3Q+XG4gIDwvZGl2PlxuPC9zZWN0aW9uPlxuIiwiPHJlcXVpcmUgZnJvbT1cIi4vcHJvcGVydHktdmlldy5jc3NcIj48L3JlcXVpcmU+XG5cbjxzcGFuIGNsYXNzPVwicHJvcGVydHktbGluZVwiPlxuICA8c3BhblxuICAgIGNzcz1cIm9wYWNpdHk6ICR7cHJvcGVydHkuY2FuRXhwYW5kID8gMSA6IDB9XCJcbiAgICBjbGFzcz1cImFycm93XCJcbiAgICBjbGljay50cmlnZ2VyPVwiZGVidWdIb3N0LnRvZ2dsZURlYnVnVmFsdWVFeHBhbnNpb24ocHJvcGVydHkpXCJcbiAgPlxuICAgIDxzcGFuIGlmLmJpbmQ9XCJwcm9wZXJ0eS5pc0V4cGFuZGVkXCIgY2xhc3M9XCJkb3duXCI+4pa8PC9zcGFuPlxuICAgIDxzcGFuIGlmLmJpbmQ9XCIhcHJvcGVydHkuaXNFeHBhbmRlZFwiIGNsYXNzPVwicmlnaHRcIj7ilrY8L3NwYW4+XG4gIDwvc3Bhbj5cbiAgPHNwYW4gY2xhc3M9XCJwcm9wZXJ0eS1uYW1lXCI+JHtwcm9wZXJ0eS5uYW1lfTwvc3BhblxuICA+PHNwYW4gY2xhc3M9XCJ0b2tlbi1jb2xvblwiPjo8L3NwYW4+Jm5ic3A7XG5cbiAgPHNwYW4gY2xhc3M9XCJ2YWx1ZS1jb250YWluZXJcIj5cbiAgICA8c3BhblxuICAgICAgaWYuYmluZD1cInByb3BlcnR5LnR5cGUgPT09ICdzdHJpbmcnICYmICFwcm9wZXJ0eS5pc0VkaXRpbmdcIlxuICAgICAgY2xhc3M9XCJwcm9wZXJ0eS12YWx1ZSBzdHJpbmdcIlxuICAgICAgPlwiPC9zcGFuXG4gICAgPjxzcGFuXG4gICAgICBpZi5iaW5kPVwiIXByb3BlcnR5LmlzRWRpdGluZ1wiXG4gICAgICBjbGFzcz1cInByb3BlcnR5LXZhbHVlICR7cHJvcGVydHkudHlwZX1cIlxuICAgICAgY2xpY2sudHJpZ2dlcj1cImJlZ2luRWRpdGluZygpXCJcbiAgICAgID4ke3Byb3BlcnR5LnZhbHVlfTwvc3BhblxuICAgID48c3BhblxuICAgICAgaWYuYmluZD1cInByb3BlcnR5LnR5cGUgPT09ICdzdHJpbmcnICYmICFwcm9wZXJ0eS5pc0VkaXRpbmdcIlxuICAgICAgY2xhc3M9XCJwcm9wZXJ0eS12YWx1ZSBzdHJpbmdcIlxuICAgICAgPlwiPC9zcGFuXG4gICAgPlxuXG4gICAgPCEtLSA8c2VsZWN0XG4gICAgICBpZi5iaW5kPVwicHJvcGVydHkuaXNFZGl0aW5nICYmICBwcm9wZXJ0eS50eXBlID09PSAnYm9vbGVhbidcIlxuICAgICAgY2xhc3M9XCJwcm9wZXJ0eS1lZGl0b3JcIlxuICAgICAgdmFsdWUuYmluZD1cImZhbHNlXCJcbiAgICA+XG4gICAgICA8b3B0aW9uIG1vZGVsLmJpbmQ9XCJ0cnVlXCI+VHJ1ZTwvb3B0aW9uPlxuICAgICAgPG9wdGlvbiBtb2RlbC5iaW5kPVwiZmFsc2VcIj5GYWxzZTwvb3B0aW9uPlxuICAgIDwvc2VsZWN0PiAtLT5cblxuICAgIDxpbnB1dFxuICAgICAgaWYuYmluZD1cInByb3BlcnR5LmlzRWRpdGluZ1wiXG4gICAgICBjbGFzcz1cInByb3BlcnR5LWVkaXRvclwiXG4gICAgICByZWY9XCJlZGl0b3JcIlxuICAgICAgdHlwZT1cInRleHRcIlxuICAgICAgdmFsdWUuYmluZD1cInByb3BlcnR5LnZhbHVlXCJcbiAgICAgIGtleXVwLnRyaWdnZXI9XCJrZXl1cCgkZXZlbnQpXCJcbiAgICAgIGJsdXIudHJpZ2dlcj1cImVuZEVkaXRpbmcoKVwiXG4gICAgLz5cbiAgPC9zcGFuPlxuPC9zcGFuPlxuXG48dWwgaWYuYmluZD1cInByb3BlcnR5LmlzRXhwYW5kZWQgJiYgcHJvcGVydHkuZXhwYW5kZWRWYWx1ZVwiIGNsYXNzPVwicHJvcGVydGllc1wiPlxuICA8ZGl2XG4gICAgaWYuYmluZD1cIiFwcm9wZXJ0eS5leHBhbmRlZFZhbHVlLnByb3BlcnRpZXMubGVuZ3RoXCJcbiAgICBjbGFzcz1cIm5vLXByb3BlcnRpZXNcIlxuICA+XG4gICAgT2JqZWN0IGhhcyBubyBwcm9wZXJ0aWVzLlxuICA8L2Rpdj5cbiAgPGxpIHJlcGVhdC5mb3I9XCJwIG9mIHByb3BlcnR5LmV4cGFuZGVkVmFsdWUucHJvcGVydGllc1wiPlxuICAgIDxwcm9wZXJ0eS12aWV3XG4gICAgICBjb250cm9sbGVyLmJpbmQ9XCJjb250cm9sbGVyXCJcbiAgICAgIHByb3BlcnR5LmJpbmQ9XCJwXCJcbiAgICA+PC9wcm9wZXJ0eS12aWV3PlxuICA8L2xpPlxuPC91bD5cbiIsImltcG9ydCB7IERJIGFzIGUsIFJlZ2lzdHJhdGlvbiBhcyB0IH0gZnJvbSBcIkBhdXJlbGlhL2tlcm5lbFwiO1xuXG5leHBvcnQgeyBDb2xvck9wdGlvbnMsIENvbnNvbGVTaW5rLCBESSwgRXZlbnRBZ2dyZWdhdG9yLCBJQ29udGFpbmVyLCBJRXZlbnRBZ2dyZWdhdG9yLCBJTG9nZ2VyLCBJU2VydmljZUxvY2F0b3IsIEluc3RhbmNlUHJvdmlkZXIsIExvZ0xldmVsLCBMb2dnZXJDb25maWd1cmF0aW9uLCBNZXRhZGF0YSwgUmVnaXN0cmF0aW9uLCBhbGwsIGJvdW5kLCBjYW1lbENhc2UsIGVtcHR5QXJyYXksIGVtcHR5T2JqZWN0LCBpbmplY3QsIGlzQXJyYXlJbmRleCwga2ViYWJDYXNlLCBsYXp5LCBub29wLCBvcHRpb25hbCwgcGFzY2FsQ2FzZSwgc2luZ2xldG9uLCB0b0FycmF5LCB0cmFuc2llbnQgfSBmcm9tIFwiQGF1cmVsaWEva2VybmVsXCI7XG5cbmltcG9ydCB7IEF1cmVsaWEgYXMgbywgSVBsYXRmb3JtIGFzIHIsIFN0YW5kYXJkQ29uZmlndXJhdGlvbiBhcyBhLCBDdXN0b21FbGVtZW50IGFzIGkgfSBmcm9tIFwiQGF1cmVsaWEvcnVudGltZS1odG1sXCI7XG5cbmV4cG9ydCB7IEFwcFRhc2ssIEF1U2xvdHNJbmZvLCBCaW5kYWJsZSwgQmluZGluZ0JlaGF2aW9yLCBCaW5kaW5nTW9kZSwgQ29tcHV0ZWRPYnNlcnZlciwgQ29tcHV0ZWRXYXRjaGVyLCBDb250cm9sbGVyLCBDdXN0b21BdHRyaWJ1dGUsIEN1c3RvbUVsZW1lbnQsIERlZmF1bHREaWFsb2dEb20sIERlZmF1bHREaWFsb2dEb21SZW5kZXJlciwgRGVmYXVsdERpYWxvZ0dsb2JhbFNldHRpbmdzLCBEaWFsb2dDbG9zZVJlc3VsdCwgRGlhbG9nQ29uZmlndXJhdGlvbiwgRGlhbG9nQ29udHJvbGxlciwgRGlhbG9nRGVhY3RpdmF0aW9uU3RhdHVzZXMsIERpYWxvZ0RlZmF1bHRDb25maWd1cmF0aW9uLCBEaWFsb2dPcGVuUmVzdWx0LCBEaWFsb2dTZXJ2aWNlLCBFeHByZXNzaW9uV2F0Y2hlciwgSUFwcFJvb3QsIElBdHRyTWFwcGVyLCBJQXR0cmlidXRlUGF0dGVybiwgSUF1U2xvdHNJbmZvLCBJQXVyZWxpYSwgSURpYWxvZ0NvbnRyb2xsZXIsIElEaWFsb2dEb20sIElEaWFsb2dEb21SZW5kZXJlciwgSURpYWxvZ0dsb2JhbFNldHRpbmdzLCBJRGlhbG9nU2VydmljZSwgSUV2ZW50VGFyZ2V0LCBJTGlmZWN5Y2xlSG9va3MsIElOb2RlLCBJT2JzZXJ2ZXJMb2NhdG9yLCBJUGxhdGZvcm0sIElSZW5kZXJMb2NhdGlvbiwgSVNpZ25hbGVyLCBJVGVtcGxhdGVDb21waWxlciwgSVRlbXBsYXRlQ29tcGlsZXJIb29rcywgSVdjRWxlbWVudFJlZ2lzdHJ5LCBJV29ya1RyYWNrZXIsIExpZmVjeWNsZUZsYWdzLCBMaWZlY3ljbGVIb29rcywgTm9kZU9ic2VydmVyTG9jYXRvciwgU2hvcnRIYW5kQmluZGluZ1N5bnRheCwgU3R5bGVDb25maWd1cmF0aW9uLCBUYXNrUXVldWVQcmlvcml0eSwgVGVtcGxhdGVDb21waWxlckhvb2tzLCBWYWx1ZUNvbnZlcnRlciwgVmlld0ZhY3RvcnksIFdhdGNoLCBXY0N1c3RvbUVsZW1lbnRSZWdpc3RyeSwgYWxpYXMsIGF0dHJpYnV0ZVBhdHRlcm4sIGJpbmRhYmxlLCBiaW5kaW5nQmVoYXZpb3IsIGJpbmRpbmdDb21tYW5kLCBjaGlsZHJlbiwgY29lcmNlciwgY29udGFpbmVybGVzcywgY3JlYXRlRWxlbWVudCwgY3NzTW9kdWxlcywgY3VzdG9tQXR0cmlidXRlLCBjdXN0b21FbGVtZW50LCBsaWZlY3ljbGVIb29rcywgcmVnaXN0ZXJBbGlhc2VzLCByZW5kZXJlciwgc2hhZG93Q1NTLCBzdWJzY3JpYmVyQ29sbGVjdGlvbiwgdGVtcGxhdGVDb21waWxlckhvb2tzLCB0ZW1wbGF0ZUNvbnRyb2xsZXIsIHVzZVNoYWRvd0RPTSwgdmFsdWVDb252ZXJ0ZXIsIHdhdGNoIH0gZnJvbSBcIkBhdXJlbGlhL3J1bnRpbWUtaHRtbFwiO1xuXG5pbXBvcnQgeyBCcm93c2VyUGxhdGZvcm0gYXMgbiB9IGZyb20gXCJAYXVyZWxpYS9wbGF0Zm9ybS1icm93c2VyXCI7XG5cbmV4cG9ydCB7IEh0dHBDbGllbnQsIEh0dHBDbGllbnRDb25maWd1cmF0aW9uLCBJSHR0cENsaWVudCwganNvbiB9IGZyb20gXCJAYXVyZWxpYS9mZXRjaC1jbGllbnRcIjtcblxuZXhwb3J0IHsgSVJvdXRlQ29udGV4dCwgSVJvdXRlciwgSVJvdXRlckV2ZW50cywgUm91dGUsIFJvdXRlQ29uZmlnLCBSb3V0ZU5vZGUsIFJvdXRlciwgUm91dGVyQ29uZmlndXJhdGlvbiwgUm91dGVyT3B0aW9ucywgUm91dGVyUmVnaXN0cmF0aW9uLCByb3V0ZSB9IGZyb20gXCJAYXVyZWxpYS9yb3V0ZXJcIjtcblxuY29uc3QgbCA9IG4uZ2V0T3JDcmVhdGUoZ2xvYmFsVGhpcyk7XG5cbmZ1bmN0aW9uIHUoKSB7XG4gICAgcmV0dXJuIGUuY3JlYXRlQ29udGFpbmVyKCkucmVnaXN0ZXIodC5pbnN0YW5jZShyLCBsKSwgYSk7XG59XG5cbmNsYXNzIEF1cmVsaWEgZXh0ZW5kcyBvIHtcbiAgICBjb25zdHJ1Y3RvcihlID0gdSgpKSB7XG4gICAgICAgIHN1cGVyKGUpO1xuICAgIH1cbiAgICBzdGF0aWMgc3RhcnQoZSkge1xuICAgICAgICByZXR1cm4gKG5ldyBBdXJlbGlhKS5zdGFydChlKTtcbiAgICB9XG4gICAgc3RhdGljIGFwcChlKSB7XG4gICAgICAgIHJldHVybiAobmV3IEF1cmVsaWEpLmFwcChlKTtcbiAgICB9XG4gICAgc3RhdGljIGVuaGFuY2UoZSwgdCkge1xuICAgICAgICByZXR1cm4gKG5ldyBBdXJlbGlhKS5lbmhhbmNlKGUsIHQpO1xuICAgIH1cbiAgICBzdGF0aWMgcmVnaXN0ZXIoLi4uZSkge1xuICAgICAgICByZXR1cm4gKG5ldyBBdXJlbGlhKS5yZWdpc3RlciguLi5lKTtcbiAgICB9XG4gICAgYXBwKGUpIHtcbiAgICAgICAgaWYgKGkuaXNUeXBlKGUpKSB7XG4gICAgICAgICAgICBjb25zdCB0ID0gaS5nZXREZWZpbml0aW9uKGUpO1xuICAgICAgICAgICAgbGV0IG8gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHQubmFtZSk7XG4gICAgICAgICAgICBpZiAobnVsbCA9PT0gbykgbyA9IGRvY3VtZW50LmJvZHk7XG4gICAgICAgICAgICByZXR1cm4gc3VwZXIuYXBwKHtcbiAgICAgICAgICAgICAgICBob3N0OiBvLFxuICAgICAgICAgICAgICAgIGNvbXBvbmVudDogZVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHN1cGVyLmFwcChlKTtcbiAgICB9XG59XG5cbmV4cG9ydCB7IEF1cmVsaWEsIGwgYXMgUExBVEZPUk0sIEF1cmVsaWEgYXMgZGVmYXVsdCB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXguanMubWFwXG4iLCIvLyBJbXBvcnRzXG5pbXBvcnQgX19fQ1NTX0xPQURFUl9BUElfU09VUkNFTUFQX0lNUE9SVF9fXyBmcm9tIFwiLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvZGlzdC9ydW50aW1lL2Nzc1dpdGhNYXBwaW5nVG9TdHJpbmcuanNcIjtcbmltcG9ydCBfX19DU1NfTE9BREVSX0FQSV9JTVBPUlRfX18gZnJvbSBcIi4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2Rpc3QvcnVudGltZS9hcGkuanNcIjtcbnZhciBfX19DU1NfTE9BREVSX0VYUE9SVF9fXyA9IF9fX0NTU19MT0FERVJfQVBJX0lNUE9SVF9fXyhfX19DU1NfTE9BREVSX0FQSV9TT1VSQ0VNQVBfSU1QT1JUX19fKTtcbi8vIE1vZHVsZVxuX19fQ1NTX0xPQURFUl9FWFBPUlRfX18ucHVzaChbbW9kdWxlLmlkLCBcIi5hcHAtaGVhZGVyIHtcXG4gIGJhY2tncm91bmQ6ICNmNGY0ZjQ7XFxuICBwYWRkaW5nOiAwO1xcbiAgcGFkZGluZzogNXB4IDAgMCAwO1xcbiAgdGV4dC1hbGlnbjogY2VudGVyO1xcbn1cXG5cXG4uZGFyayAuYXBwLWhlYWRlciB7XFxuICBiYWNrZ3JvdW5kOiAjMjAyMTI0O1xcbn1cXG5cXG4ubG9nby1iYWRnZSB7XFxuICBwb3NpdGlvbjogcmVsYXRpdmU7XFxuICB0b3A6IC03cHg7XFxuICBmb250LXdlaWdodDogMTAwO1xcbiAgZm9udC1zaXplOiAxNnB4O1xcbiAgY29sb3I6ICNCQjc5QTg7XFxufVxcblxcbi5ub3QtZm91bmQge1xcbiAgZm9udC1zdHlsZTogaXRhbGljO1xcbiAgZm9udC1zaXplOiAxMHB4O1xcbn1cXG5cXG4uZGFyayAubm90LWZvdW5kIHtcXG4gIGNvbG9yOiAjOTg5ODk4O1xcbn1cXG5cXG4uY3VzdG9tLWF0dHJpYnV0ZSB7XFxuICBtYXJnaW4tYm90dG9tOiA0cHg7XFxufVxcblxcbi5jdXN0b20tYXR0cmlidXRlIC5hdHRyaWJ1dGUtbmFtZSB7XFxuICBjb2xvcjogc2FkZGxlYnJvd247XFxufVxcbi5kYXJrIC5jdXN0b20tYXR0cmlidXRlIC5hdHRyaWJ1dGUtbmFtZSB7XFxuICBjb2xvcjogI2VmOTU2NTtcXG59XFxuXFxuLmN1c3RvbS1hdHRyaWJ1dGUgLmJsb2NrLXRva2VuIHtcXG4gIGNvbG9yOiBncmF5O1xcbn1cXG5cXG4uY3VzdG9tLWF0dHJpYnV0ZSAuYXR0cmlidXRlLW5hbWUsIC5jdXN0b20tYXR0cmlidXRlIC5ibG9jay10b2tlbiB7XFxuICBmb250LXNpemU6IDEycHg7XFxuICBkaXNwbGF5OiBpbmxpbmU7XFxuICBmb250LWZhbWlseTogbW9ub3NwYWNlO1xcbn1cXG5cXG4uY3VzdG9tLWF0dHJpYnV0ZSBjb250cm9sbGVyLXZpZXcge1xcbiAgbWFyZ2luLWxlZnQ6IDhweDtcXG4gIGRpc3BsYXk6IGJsb2NrO1xcbn1cXG5cXG5jdXN0b20tZWxlbWVudCB7XFxuICBtYXJnaW4tdG9wOiAycHg7XFxuICBkaXNwbGF5OiBibG9jaztcXG59XFxuXFxuY3VzdG9tLWVsZW1lbnQgLmFycm93IHtcXG4gIGZvbnQtc2l6ZTogMTBweDtcXG4gIGNvbG9yOiBkaW1ncmF5O1xcbiAgY3Vyc29yOiBkZWZhdWx0O1xcbn1cXG5cXG5jdXN0b20tZWxlbWVudCAuYXJyb3cgLnJpZ2h0IHtcXG4gIG1hcmdpbi1yaWdodDogMXB4O1xcbn1cXG5cXG5jdXN0b20tZWxlbWVudCAucHJvcGVydHktbGluZSB7XFxuICB3aGl0ZS1zcGFjZTogbm93cmFwO1xcbn1cXG5cXG5jdXN0b20tZWxlbWVudCAucHJvcGVydHktbmFtZSB7XFxuICBmb250LXNpemU6IDEycHg7XFxuICBjb2xvcjogcHVycGxlO1xcbiAgZm9udC1mYW1pbHk6IG1vbm9zcGFjZTtcXG4gIG1hcmdpbi1sZWZ0OiAxcHg7XFxufVxcblxcbi5kYXJrIGN1c3RvbS1lbGVtZW50IC5wcm9wZXJ0eS1uYW1lIHtcXG4gIGNvbG9yOiAjMzRjN2JiO1xcbn1cXG5jdXN0b20tZWxlbWVudCAudmFsdWUtY29udGFpbmVyIHtcXG4gIHBvc2l0aW9uOiByZWxhdGl2ZTtcXG59XFxuXFxuY3VzdG9tLWVsZW1lbnQgLnByb3BlcnR5LWVkaXRvciB7XFxuICBmb250LWZhbWlseTogbW9ub3NwYWNlO1xcbiAgZm9udC1zaXplOiAxMnB4O1xcbiAgbWFyZ2luOiAwO1xcbiAgaGVpZ2h0OiAxMnB4O1xcbiAgb3V0bGluZTogbm9uZTtcXG4gIGJvcmRlcjogMXB4IHNvbGlkIGRhcmtncmF5O1xcbiAgYm94LXNoYWRvdzogMCAwIDVweCByZ2JhKDAsMCwwLC41KTtcXG4gIHBvc2l0aW9uOiBhYnNvbHV0ZTtcXG4gIHRvcDogNHB4O1xcbiAgbGVmdDogMnB4O1xcbiAgcGFkZGluZzogMCAwIDAgMnB4O1xcbn1cXG5cXG5jdXN0b20tZWxlbWVudCAucHJvcGVydHktdmFsdWUsIGN1c3RvbS1lbGVtZW50IC50b2tlbi1jb2xvbiB7XFxuICBmb250LXNpemU6IDEycHg7XFxuICBjb2xvcjogZGltZ3JheTtcXG4gIGZvbnQtZmFtaWx5OiBtb25vc3BhY2U7XFxufVxcblxcbmN1c3RvbS1lbGVtZW50IC5wcm9wZXJ0eS12YWx1ZS5udWxsLCBjdXN0b20tZWxlbWVudCAucHJvcGVydHktdmFsdWUudW5kZWZpbmVkIHtcXG4gIGNvbG9yOiBkaW1ncmF5O1xcbn1cXG5cXG5jdXN0b20tZWxlbWVudCAucHJvcGVydHktdmFsdWUuYm9vbGVhbiB7XFxuICBjb2xvcjogZGVlcHBpbms7XFxufVxcblxcbmN1c3RvbS1lbGVtZW50IC5wcm9wZXJ0eS12YWx1ZS5zdHJpbmcge1xcbiAgY29sb3I6IHJlZDtcXG4gIHdoaXRlLXNwYWNlOiBub3dyYXA7XFxufVxcbi5kYXJrIGN1c3RvbS1lbGVtZW50IC5wcm9wZXJ0eS12YWx1ZS5zdHJpbmcge1xcbiAgY29sb3I6I2NiY2JjYjtcXG59XFxuXFxuY3VzdG9tLWVsZW1lbnQgLnByb3BlcnR5LXZhbHVlLm51bWJlciB7XFxuICBjb2xvcjogYmx1ZTtcXG59XFxuXFxuLmRhcmsgY3VzdG9tLWVsZW1lbnQgLnByb3BlcnR5LXZhbHVlLm51bWJlciB7XFxuICBjb2xvcjogIzU5YTZjYTtcXG59XFxuXFxuY3VzdG9tLWVsZW1lbnQgLnByb3BlcnR5LXZhbHVlLmFycmF5IHtcXG4gIGNvbG9yOiBibGFjaztcXG59XFxuXFxuLmRhcmsgY3VzdG9tLWVsZW1lbnQgLnByb3BlcnR5LXZhbHVlLmFycmF5IHtcXG4gIGNvbG9yOiAjY2JjYmNiO1xcbn1cXG5cXG5jdXN0b20tZWxlbWVudCAucHJvcGVydHktdmFsdWUub2JqZWN0LCBjdXN0b20tZWxlbWVudCAucHJvcGVydHktdmFsdWUubm9kZSB7XFxuICBjb2xvcjogYmxhY2s7XFxufVxcblxcbi5kYXJrIGN1c3RvbS1lbGVtZW50IC5wcm9wZXJ0eS12YWx1ZS5vYmplY3QsIGN1c3RvbS1lbGVtZW50IC5wcm9wZXJ0eS12YWx1ZS5ub2RlIHtcXG4gIGNvbG9yOiAjY2JjYmNiO1xcbn1cXG5cXG5jdXN0b20tZWxlbWVudCB1bC5wcm9wZXJ0aWVzIHtcXG4gIG1hcmdpbi1sZWZ0OiAxNnB4O1xcbn1cXG5cXG5jdXN0b20tZWxlbWVudCAubm8tcHJvcGVydGllcyB7XFxuICBtYXJnaW4tdG9wOiA0cHg7XFxuICBmb250LXNpemU6IDEwcHg7XFxufVxcblxcbi5kYXJrIGN1c3RvbS1lbGVtZW50IC5uby1wcm9wZXJ0aWVzIHtcXG4gIGNvbG9yOiAjOTg5ODk4O1xcbn1cXG5cIiwgXCJcIix7XCJ2ZXJzaW9uXCI6MyxcInNvdXJjZXNcIjpbXCJ3ZWJwYWNrOi8vLi9zcmMvYXBwLmNzc1wiXSxcIm5hbWVzXCI6W10sXCJtYXBwaW5nc1wiOlwiQUFBQTtFQUNFLG1CQUFtQjtFQUNuQixVQUFVO0VBQ1Ysa0JBQWtCO0VBQ2xCLGtCQUFrQjtBQUNwQjs7QUFFQTtFQUNFLG1CQUFtQjtBQUNyQjs7QUFFQTtFQUNFLGtCQUFrQjtFQUNsQixTQUFTO0VBQ1QsZ0JBQWdCO0VBQ2hCLGVBQWU7RUFDZixjQUFjO0FBQ2hCOztBQUVBO0VBQ0Usa0JBQWtCO0VBQ2xCLGVBQWU7QUFDakI7O0FBRUE7RUFDRSxjQUFjO0FBQ2hCOztBQUVBO0VBQ0Usa0JBQWtCO0FBQ3BCOztBQUVBO0VBQ0Usa0JBQWtCO0FBQ3BCO0FBQ0E7RUFDRSxjQUFjO0FBQ2hCOztBQUVBO0VBQ0UsV0FBVztBQUNiOztBQUVBO0VBQ0UsZUFBZTtFQUNmLGVBQWU7RUFDZixzQkFBc0I7QUFDeEI7O0FBRUE7RUFDRSxnQkFBZ0I7RUFDaEIsY0FBYztBQUNoQjs7QUFFQTtFQUNFLGVBQWU7RUFDZixjQUFjO0FBQ2hCOztBQUVBO0VBQ0UsZUFBZTtFQUNmLGNBQWM7RUFDZCxlQUFlO0FBQ2pCOztBQUVBO0VBQ0UsaUJBQWlCO0FBQ25COztBQUVBO0VBQ0UsbUJBQW1CO0FBQ3JCOztBQUVBO0VBQ0UsZUFBZTtFQUNmLGFBQWE7RUFDYixzQkFBc0I7RUFDdEIsZ0JBQWdCO0FBQ2xCOztBQUVBO0VBQ0UsY0FBYztBQUNoQjtBQUNBO0VBQ0Usa0JBQWtCO0FBQ3BCOztBQUVBO0VBQ0Usc0JBQXNCO0VBQ3RCLGVBQWU7RUFDZixTQUFTO0VBQ1QsWUFBWTtFQUNaLGFBQWE7RUFDYiwwQkFBMEI7RUFDMUIsa0NBQWtDO0VBQ2xDLGtCQUFrQjtFQUNsQixRQUFRO0VBQ1IsU0FBUztFQUNULGtCQUFrQjtBQUNwQjs7QUFFQTtFQUNFLGVBQWU7RUFDZixjQUFjO0VBQ2Qsc0JBQXNCO0FBQ3hCOztBQUVBO0VBQ0UsY0FBYztBQUNoQjs7QUFFQTtFQUNFLGVBQWU7QUFDakI7O0FBRUE7RUFDRSxVQUFVO0VBQ1YsbUJBQW1CO0FBQ3JCO0FBQ0E7RUFDRSxhQUFhO0FBQ2Y7O0FBRUE7RUFDRSxXQUFXO0FBQ2I7O0FBRUE7RUFDRSxjQUFjO0FBQ2hCOztBQUVBO0VBQ0UsWUFBWTtBQUNkOztBQUVBO0VBQ0UsY0FBYztBQUNoQjs7QUFFQTtFQUNFLFlBQVk7QUFDZDs7QUFFQTtFQUNFLGNBQWM7QUFDaEI7O0FBRUE7RUFDRSxpQkFBaUI7QUFDbkI7O0FBRUE7RUFDRSxlQUFlO0VBQ2YsZUFBZTtBQUNqQjs7QUFFQTtFQUNFLGNBQWM7QUFDaEJcIixcInNvdXJjZXNDb250ZW50XCI6W1wiLmFwcC1oZWFkZXIge1xcbiAgYmFja2dyb3VuZDogI2Y0ZjRmNDtcXG4gIHBhZGRpbmc6IDA7XFxuICBwYWRkaW5nOiA1cHggMCAwIDA7XFxuICB0ZXh0LWFsaWduOiBjZW50ZXI7XFxufVxcblxcbi5kYXJrIC5hcHAtaGVhZGVyIHtcXG4gIGJhY2tncm91bmQ6ICMyMDIxMjQ7XFxufVxcblxcbi5sb2dvLWJhZGdlIHtcXG4gIHBvc2l0aW9uOiByZWxhdGl2ZTtcXG4gIHRvcDogLTdweDtcXG4gIGZvbnQtd2VpZ2h0OiAxMDA7XFxuICBmb250LXNpemU6IDE2cHg7XFxuICBjb2xvcjogI0JCNzlBODtcXG59XFxuXFxuLm5vdC1mb3VuZCB7XFxuICBmb250LXN0eWxlOiBpdGFsaWM7XFxuICBmb250LXNpemU6IDEwcHg7XFxufVxcblxcbi5kYXJrIC5ub3QtZm91bmQge1xcbiAgY29sb3I6ICM5ODk4OTg7XFxufVxcblxcbi5jdXN0b20tYXR0cmlidXRlIHtcXG4gIG1hcmdpbi1ib3R0b206IDRweDtcXG59XFxuXFxuLmN1c3RvbS1hdHRyaWJ1dGUgLmF0dHJpYnV0ZS1uYW1lIHtcXG4gIGNvbG9yOiBzYWRkbGVicm93bjtcXG59XFxuLmRhcmsgLmN1c3RvbS1hdHRyaWJ1dGUgLmF0dHJpYnV0ZS1uYW1lIHtcXG4gIGNvbG9yOiAjZWY5NTY1O1xcbn1cXG5cXG4uY3VzdG9tLWF0dHJpYnV0ZSAuYmxvY2stdG9rZW4ge1xcbiAgY29sb3I6IGdyYXk7XFxufVxcblxcbi5jdXN0b20tYXR0cmlidXRlIC5hdHRyaWJ1dGUtbmFtZSwgLmN1c3RvbS1hdHRyaWJ1dGUgLmJsb2NrLXRva2VuIHtcXG4gIGZvbnQtc2l6ZTogMTJweDtcXG4gIGRpc3BsYXk6IGlubGluZTtcXG4gIGZvbnQtZmFtaWx5OiBtb25vc3BhY2U7XFxufVxcblxcbi5jdXN0b20tYXR0cmlidXRlIGNvbnRyb2xsZXItdmlldyB7XFxuICBtYXJnaW4tbGVmdDogOHB4O1xcbiAgZGlzcGxheTogYmxvY2s7XFxufVxcblxcbmN1c3RvbS1lbGVtZW50IHtcXG4gIG1hcmdpbi10b3A6IDJweDtcXG4gIGRpc3BsYXk6IGJsb2NrO1xcbn1cXG5cXG5jdXN0b20tZWxlbWVudCAuYXJyb3cge1xcbiAgZm9udC1zaXplOiAxMHB4O1xcbiAgY29sb3I6IGRpbWdyYXk7XFxuICBjdXJzb3I6IGRlZmF1bHQ7XFxufVxcblxcbmN1c3RvbS1lbGVtZW50IC5hcnJvdyAucmlnaHQge1xcbiAgbWFyZ2luLXJpZ2h0OiAxcHg7XFxufVxcblxcbmN1c3RvbS1lbGVtZW50IC5wcm9wZXJ0eS1saW5lIHtcXG4gIHdoaXRlLXNwYWNlOiBub3dyYXA7XFxufVxcblxcbmN1c3RvbS1lbGVtZW50IC5wcm9wZXJ0eS1uYW1lIHtcXG4gIGZvbnQtc2l6ZTogMTJweDtcXG4gIGNvbG9yOiBwdXJwbGU7XFxuICBmb250LWZhbWlseTogbW9ub3NwYWNlO1xcbiAgbWFyZ2luLWxlZnQ6IDFweDtcXG59XFxuXFxuLmRhcmsgY3VzdG9tLWVsZW1lbnQgLnByb3BlcnR5LW5hbWUge1xcbiAgY29sb3I6ICMzNGM3YmI7XFxufVxcbmN1c3RvbS1lbGVtZW50IC52YWx1ZS1jb250YWluZXIge1xcbiAgcG9zaXRpb246IHJlbGF0aXZlO1xcbn1cXG5cXG5jdXN0b20tZWxlbWVudCAucHJvcGVydHktZWRpdG9yIHtcXG4gIGZvbnQtZmFtaWx5OiBtb25vc3BhY2U7XFxuICBmb250LXNpemU6IDEycHg7XFxuICBtYXJnaW46IDA7XFxuICBoZWlnaHQ6IDEycHg7XFxuICBvdXRsaW5lOiBub25lO1xcbiAgYm9yZGVyOiAxcHggc29saWQgZGFya2dyYXk7XFxuICBib3gtc2hhZG93OiAwIDAgNXB4IHJnYmEoMCwwLDAsLjUpO1xcbiAgcG9zaXRpb246IGFic29sdXRlO1xcbiAgdG9wOiA0cHg7XFxuICBsZWZ0OiAycHg7XFxuICBwYWRkaW5nOiAwIDAgMCAycHg7XFxufVxcblxcbmN1c3RvbS1lbGVtZW50IC5wcm9wZXJ0eS12YWx1ZSwgY3VzdG9tLWVsZW1lbnQgLnRva2VuLWNvbG9uIHtcXG4gIGZvbnQtc2l6ZTogMTJweDtcXG4gIGNvbG9yOiBkaW1ncmF5O1xcbiAgZm9udC1mYW1pbHk6IG1vbm9zcGFjZTtcXG59XFxuXFxuY3VzdG9tLWVsZW1lbnQgLnByb3BlcnR5LXZhbHVlLm51bGwsIGN1c3RvbS1lbGVtZW50IC5wcm9wZXJ0eS12YWx1ZS51bmRlZmluZWQge1xcbiAgY29sb3I6IGRpbWdyYXk7XFxufVxcblxcbmN1c3RvbS1lbGVtZW50IC5wcm9wZXJ0eS12YWx1ZS5ib29sZWFuIHtcXG4gIGNvbG9yOiBkZWVwcGluaztcXG59XFxuXFxuY3VzdG9tLWVsZW1lbnQgLnByb3BlcnR5LXZhbHVlLnN0cmluZyB7XFxuICBjb2xvcjogcmVkO1xcbiAgd2hpdGUtc3BhY2U6IG5vd3JhcDtcXG59XFxuLmRhcmsgY3VzdG9tLWVsZW1lbnQgLnByb3BlcnR5LXZhbHVlLnN0cmluZyB7XFxuICBjb2xvcjojY2JjYmNiO1xcbn1cXG5cXG5jdXN0b20tZWxlbWVudCAucHJvcGVydHktdmFsdWUubnVtYmVyIHtcXG4gIGNvbG9yOiBibHVlO1xcbn1cXG5cXG4uZGFyayBjdXN0b20tZWxlbWVudCAucHJvcGVydHktdmFsdWUubnVtYmVyIHtcXG4gIGNvbG9yOiAjNTlhNmNhO1xcbn1cXG5cXG5jdXN0b20tZWxlbWVudCAucHJvcGVydHktdmFsdWUuYXJyYXkge1xcbiAgY29sb3I6IGJsYWNrO1xcbn1cXG5cXG4uZGFyayBjdXN0b20tZWxlbWVudCAucHJvcGVydHktdmFsdWUuYXJyYXkge1xcbiAgY29sb3I6ICNjYmNiY2I7XFxufVxcblxcbmN1c3RvbS1lbGVtZW50IC5wcm9wZXJ0eS12YWx1ZS5vYmplY3QsIGN1c3RvbS1lbGVtZW50IC5wcm9wZXJ0eS12YWx1ZS5ub2RlIHtcXG4gIGNvbG9yOiBibGFjaztcXG59XFxuXFxuLmRhcmsgY3VzdG9tLWVsZW1lbnQgLnByb3BlcnR5LXZhbHVlLm9iamVjdCwgY3VzdG9tLWVsZW1lbnQgLnByb3BlcnR5LXZhbHVlLm5vZGUge1xcbiAgY29sb3I6ICNjYmNiY2I7XFxufVxcblxcbmN1c3RvbS1lbGVtZW50IHVsLnByb3BlcnRpZXMge1xcbiAgbWFyZ2luLWxlZnQ6IDE2cHg7XFxufVxcblxcbmN1c3RvbS1lbGVtZW50IC5uby1wcm9wZXJ0aWVzIHtcXG4gIG1hcmdpbi10b3A6IDRweDtcXG4gIGZvbnQtc2l6ZTogMTBweDtcXG59XFxuXFxuLmRhcmsgY3VzdG9tLWVsZW1lbnQgLm5vLXByb3BlcnRpZXMge1xcbiAgY29sb3I6ICM5ODk4OTg7XFxufVxcblwiXSxcInNvdXJjZVJvb3RcIjpcIlwifV0pO1xuLy8gRXhwb3J0c1xuZXhwb3J0IGRlZmF1bHQgX19fQ1NTX0xPQURFUl9FWFBPUlRfX187XG4iLCIvLyBJbXBvcnRzXG5pbXBvcnQgX19fQ1NTX0xPQURFUl9BUElfU09VUkNFTUFQX0lNUE9SVF9fXyBmcm9tIFwiLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvZGlzdC9ydW50aW1lL2Nzc1dpdGhNYXBwaW5nVG9TdHJpbmcuanNcIjtcbmltcG9ydCBfX19DU1NfTE9BREVSX0FQSV9JTVBPUlRfX18gZnJvbSBcIi4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2Rpc3QvcnVudGltZS9hcGkuanNcIjtcbnZhciBfX19DU1NfTE9BREVSX0VYUE9SVF9fXyA9IF9fX0NTU19MT0FERVJfQVBJX0lNUE9SVF9fXyhfX19DU1NfTE9BREVSX0FQSV9TT1VSQ0VNQVBfSU1QT1JUX19fKTtcbi8vIE1vZHVsZVxuX19fQ1NTX0xPQURFUl9FWFBPUlRfX18ucHVzaChbbW9kdWxlLmlkLCBcIi8qIGh0dHA6Ly9tZXllcndlYi5jb20vZXJpYy90b29scy9jc3MvcmVzZXQvXFxuICAgdjIuMCB8IDIwMTEwMTI2XFxuICAgTGljZW5zZTogbm9uZSAocHVibGljIGRvbWFpbilcXG4qL1xcblxcbmh0bWwsIGJvZHksIGRpdiwgc3BhbiwgYXBwbGV0LCBvYmplY3QsIGlmcmFtZSxcXG5oMSwgaDIsIGgzLCBoNCwgaDUsIGg2LCBwLCBibG9ja3F1b3RlLCBwcmUsXFxuYSwgYWJiciwgYWNyb255bSwgYWRkcmVzcywgYmlnLCBjaXRlLCBjb2RlLFxcbmRlbCwgZGZuLCBlbSwgaW1nLCBpbnMsIGtiZCwgcSwgcywgc2FtcCxcXG5zbWFsbCwgc3RyaWtlLCBzdHJvbmcsIHN1Yiwgc3VwLCB0dCwgdmFyLFxcbmIsIHUsIGksIGNlbnRlcixcXG5kbCwgZHQsIGRkLCBvbCwgdWwsIGxpLFxcbmZpZWxkc2V0LCBmb3JtLCBsYWJlbCwgbGVnZW5kLFxcbnRhYmxlLCBjYXB0aW9uLCB0Ym9keSwgdGZvb3QsIHRoZWFkLCB0ciwgdGgsIHRkLFxcbmFydGljbGUsIGFzaWRlLCBjYW52YXMsIGRldGFpbHMsIGVtYmVkLFxcbmZpZ3VyZSwgZmlnY2FwdGlvbiwgZm9vdGVyLCBoZWFkZXIsIGhncm91cCxcXG5tZW51LCBuYXYsIG91dHB1dCwgcnVieSwgc2VjdGlvbiwgc3VtbWFyeSxcXG50aW1lLCBtYXJrLCBhdWRpbywgdmlkZW8ge1xcblxcdG1hcmdpbjogMDtcXG5cXHRwYWRkaW5nOiAwO1xcblxcdGJvcmRlcjogMDtcXG5cXHRmb250LXNpemU6IDEwMCU7XFxuXFx0Zm9udDogaW5oZXJpdDtcXG5cXHR2ZXJ0aWNhbC1hbGlnbjogYmFzZWxpbmU7XFxufVxcbi8qIEhUTUw1IGRpc3BsYXktcm9sZSByZXNldCBmb3Igb2xkZXIgYnJvd3NlcnMgKi9cXG5hcnRpY2xlLCBhc2lkZSwgZGV0YWlscywgZmlnY2FwdGlvbiwgZmlndXJlLFxcbmZvb3RlciwgaGVhZGVyLCBoZ3JvdXAsIG1lbnUsIG5hdiwgc2VjdGlvbiB7XFxuXFx0ZGlzcGxheTogYmxvY2s7XFxufVxcbmJvZHkge1xcblxcdGxpbmUtaGVpZ2h0OiAxO1xcbn1cXG5vbCwgdWwge1xcblxcdGxpc3Qtc3R5bGU6IG5vbmU7XFxufVxcbmJsb2NrcXVvdGUsIHEge1xcblxcdHF1b3Rlczogbm9uZTtcXG59XFxuYmxvY2txdW90ZTpiZWZvcmUsIGJsb2NrcXVvdGU6YWZ0ZXIsXFxucTpiZWZvcmUsIHE6YWZ0ZXIge1xcblxcdGNvbnRlbnQ6ICcnO1xcblxcdGNvbnRlbnQ6IG5vbmU7XFxufVxcbnRhYmxlIHtcXG5cXHRib3JkZXItY29sbGFwc2U6IGNvbGxhcHNlO1xcblxcdGJvcmRlci1zcGFjaW5nOiAwO1xcbn1cXG5cXG4vKiEgbm9ybWFsaXplLmNzcyB2NS4wLjAgfCBNSVQgTGljZW5zZSB8IGdpdGh1Yi5jb20vbmVjb2xhcy9ub3JtYWxpemUuY3NzICovXFxuXFxuLyogRG9jdW1lbnRcXG4gICA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSAqL1xcblxcbi8qKlxcbiAqIDEuIENoYW5nZSB0aGUgZGVmYXVsdCBmb250IGZhbWlseSBpbiBhbGwgYnJvd3NlcnMgKG9waW5pb25hdGVkKS5cXG4gKiAyLiBDb3JyZWN0IHRoZSBsaW5lIGhlaWdodCBpbiBhbGwgYnJvd3NlcnMuXFxuICogMy4gUHJldmVudCBhZGp1c3RtZW50cyBvZiBmb250IHNpemUgYWZ0ZXIgb3JpZW50YXRpb24gY2hhbmdlcyBpblxcbiAqICAgIElFIG9uIFdpbmRvd3MgUGhvbmUgYW5kIGluIGlPUy5cXG4gKi9cXG5cXG5odG1sIHtcXG4gIGZvbnQtZmFtaWx5OiBzYW5zLXNlcmlmOyAvKiAxICovXFxuICBsaW5lLWhlaWdodDogMS4xNTsgLyogMiAqL1xcbiAgLW1zLXRleHQtc2l6ZS1hZGp1c3Q6IDEwMCU7IC8qIDMgKi9cXG4gIC13ZWJraXQtdGV4dC1zaXplLWFkanVzdDogMTAwJTsgLyogMyAqL1xcbn1cXG5cXG4vKiBGb3Jtc1xcbiAgID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09ICovXFxuXFxuLyoqXFxuICogMS4gQ2hhbmdlIHRoZSBmb250IHN0eWxlcyBpbiBhbGwgYnJvd3NlcnMgKG9waW5pb25hdGVkKS5cXG4gKiAyLiBSZW1vdmUgdGhlIG1hcmdpbiBpbiBGaXJlZm94IGFuZCBTYWZhcmkuXFxuICovXFxuXFxuYnV0dG9uLFxcbmlucHV0LFxcbm9wdGdyb3VwLFxcbnNlbGVjdCxcXG50ZXh0YXJlYSB7XFxuICBmb250LWZhbWlseTogc2Fucy1zZXJpZjsgLyogMSAqL1xcbiAgZm9udC1zaXplOiAxMDAlOyAvKiAxICovXFxuICBsaW5lLWhlaWdodDogMS4xNTsgLyogMSAqL1xcbiAgbWFyZ2luOiAwOyAvKiAyICovXFxufVxcblxcbi8qKlxcbiAqIFNob3cgdGhlIG92ZXJmbG93IGluIElFLlxcbiAqIDEuIFNob3cgdGhlIG92ZXJmbG93IGluIEVkZ2UuXFxuICovXFxuXFxuYnV0dG9uLFxcbmlucHV0IHsgLyogMSAqL1xcbiAgb3ZlcmZsb3c6IHZpc2libGU7XFxufVxcblxcbi8qKlxcbiAqIFJlbW92ZSB0aGUgaW5oZXJpdGFuY2Ugb2YgdGV4dCB0cmFuc2Zvcm0gaW4gRWRnZSwgRmlyZWZveCwgYW5kIElFLlxcbiAqIDEuIFJlbW92ZSB0aGUgaW5oZXJpdGFuY2Ugb2YgdGV4dCB0cmFuc2Zvcm0gaW4gRmlyZWZveC5cXG4gKi9cXG5cXG5idXR0b24sXFxuc2VsZWN0IHsgLyogMSAqL1xcbiAgdGV4dC10cmFuc2Zvcm06IG5vbmU7XFxufVxcblxcbi8qKlxcbiAqIDEuIFByZXZlbnQgYSBXZWJLaXQgYnVnIHdoZXJlICgyKSBkZXN0cm95cyBuYXRpdmUgYGF1ZGlvYCBhbmQgYHZpZGVvYFxcbiAqICAgIGNvbnRyb2xzIGluIEFuZHJvaWQgNC5cXG4gKiAyLiBDb3JyZWN0IHRoZSBpbmFiaWxpdHkgdG8gc3R5bGUgY2xpY2thYmxlIHR5cGVzIGluIGlPUyBhbmQgU2FmYXJpLlxcbiAqL1xcblxcbmJ1dHRvbixcXG5odG1sIFt0eXBlPVxcXCJidXR0b25cXFwiXSwgLyogMSAqL1xcblt0eXBlPVxcXCJyZXNldFxcXCJdLFxcblt0eXBlPVxcXCJzdWJtaXRcXFwiXSB7XFxuICAtd2Via2l0LWFwcGVhcmFuY2U6IGJ1dHRvbjsgLyogMiAqL1xcbn1cXG5cXG4vKipcXG4gKiBSZW1vdmUgdGhlIGlubmVyIGJvcmRlciBhbmQgcGFkZGluZyBpbiBGaXJlZm94LlxcbiAqL1xcblxcbmJ1dHRvbjo6LW1vei1mb2N1cy1pbm5lcixcXG5bdHlwZT1cXFwiYnV0dG9uXFxcIl06Oi1tb3otZm9jdXMtaW5uZXIsXFxuW3R5cGU9XFxcInJlc2V0XFxcIl06Oi1tb3otZm9jdXMtaW5uZXIsXFxuW3R5cGU9XFxcInN1Ym1pdFxcXCJdOjotbW96LWZvY3VzLWlubmVyIHtcXG4gIGJvcmRlci1zdHlsZTogbm9uZTtcXG4gIHBhZGRpbmc6IDA7XFxufVxcblxcbi8qKlxcbiAqIFJlc3RvcmUgdGhlIGZvY3VzIHN0eWxlcyB1bnNldCBieSB0aGUgcHJldmlvdXMgcnVsZS5cXG4gKi9cXG5cXG5idXR0b246LW1vei1mb2N1c3JpbmcsXFxuW3R5cGU9XFxcImJ1dHRvblxcXCJdOi1tb3otZm9jdXNyaW5nLFxcblt0eXBlPVxcXCJyZXNldFxcXCJdOi1tb3otZm9jdXNyaW5nLFxcblt0eXBlPVxcXCJzdWJtaXRcXFwiXTotbW96LWZvY3VzcmluZyB7XFxuICBvdXRsaW5lOiAxcHggZG90dGVkIEJ1dHRvblRleHQ7XFxufVxcblxcbi8qKlxcbiAqIENoYW5nZSB0aGUgYm9yZGVyLCBtYXJnaW4sIGFuZCBwYWRkaW5nIGluIGFsbCBicm93c2VycyAob3BpbmlvbmF0ZWQpLlxcbiAqL1xcblxcbmZpZWxkc2V0IHtcXG4gIGJvcmRlcjogMXB4IHNvbGlkICNjMGMwYzA7XFxuICBtYXJnaW46IDAgMnB4O1xcbiAgcGFkZGluZzogMC4zNWVtIDAuNjI1ZW0gMC43NWVtO1xcbn1cXG5cXG4vKipcXG4gKiAxLiBDb3JyZWN0IHRoZSB0ZXh0IHdyYXBwaW5nIGluIEVkZ2UgYW5kIElFLlxcbiAqIDIuIENvcnJlY3QgdGhlIGNvbG9yIGluaGVyaXRhbmNlIGZyb20gYGZpZWxkc2V0YCBlbGVtZW50cyBpbiBJRS5cXG4gKiAzLiBSZW1vdmUgdGhlIHBhZGRpbmcgc28gZGV2ZWxvcGVycyBhcmUgbm90IGNhdWdodCBvdXQgd2hlbiB0aGV5IHplcm8gb3V0XFxuICogICAgYGZpZWxkc2V0YCBlbGVtZW50cyBpbiBhbGwgYnJvd3NlcnMuXFxuICovXFxuXFxubGVnZW5kIHtcXG4gIGJveC1zaXppbmc6IGJvcmRlci1ib3g7IC8qIDEgKi9cXG4gIGNvbG9yOiBpbmhlcml0OyAvKiAyICovXFxuICBkaXNwbGF5OiB0YWJsZTsgLyogMSAqL1xcbiAgbWF4LXdpZHRoOiAxMDAlOyAvKiAxICovXFxuICBwYWRkaW5nOiAwOyAvKiAzICovXFxuICB3aGl0ZS1zcGFjZTogbm9ybWFsOyAvKiAxICovXFxufVxcblxcbi8qKlxcbiAqIDEuIEFkZCB0aGUgY29ycmVjdCBkaXNwbGF5IGluIElFIDktLlxcbiAqIDIuIEFkZCB0aGUgY29ycmVjdCB2ZXJ0aWNhbCBhbGlnbm1lbnQgaW4gQ2hyb21lLCBGaXJlZm94LCBhbmQgT3BlcmEuXFxuICovXFxuXFxucHJvZ3Jlc3Mge1xcbiAgZGlzcGxheTogaW5saW5lLWJsb2NrOyAvKiAxICovXFxuICB2ZXJ0aWNhbC1hbGlnbjogYmFzZWxpbmU7IC8qIDIgKi9cXG59XFxuXFxuLyoqXFxuICogUmVtb3ZlIHRoZSBkZWZhdWx0IHZlcnRpY2FsIHNjcm9sbGJhciBpbiBJRS5cXG4gKi9cXG5cXG50ZXh0YXJlYSB7XFxuICBvdmVyZmxvdzogYXV0bztcXG59XFxuXFxuLyoqXFxuICogMS4gQWRkIHRoZSBjb3JyZWN0IGJveCBzaXppbmcgaW4gSUUgMTAtLlxcbiAqIDIuIFJlbW92ZSB0aGUgcGFkZGluZyBpbiBJRSAxMC0uXFxuICovXFxuXFxuW3R5cGU9XFxcImNoZWNrYm94XFxcIl0sXFxuW3R5cGU9XFxcInJhZGlvXFxcIl0ge1xcbiAgYm94LXNpemluZzogYm9yZGVyLWJveDsgLyogMSAqL1xcbiAgcGFkZGluZzogMDsgLyogMiAqL1xcbn1cXG5cXG4vKipcXG4gKiBDb3JyZWN0IHRoZSBjdXJzb3Igc3R5bGUgb2YgaW5jcmVtZW50IGFuZCBkZWNyZW1lbnQgYnV0dG9ucyBpbiBDaHJvbWUuXFxuICovXFxuXFxuW3R5cGU9XFxcIm51bWJlclxcXCJdOjotd2Via2l0LWlubmVyLXNwaW4tYnV0dG9uLFxcblt0eXBlPVxcXCJudW1iZXJcXFwiXTo6LXdlYmtpdC1vdXRlci1zcGluLWJ1dHRvbiB7XFxuICBoZWlnaHQ6IGF1dG87XFxufVxcblxcbi8qKlxcbiAqIDEuIENvcnJlY3QgdGhlIG9kZCBhcHBlYXJhbmNlIGluIENocm9tZSBhbmQgU2FmYXJpLlxcbiAqIDIuIENvcnJlY3QgdGhlIG91dGxpbmUgc3R5bGUgaW4gU2FmYXJpLlxcbiAqL1xcblxcblt0eXBlPVxcXCJzZWFyY2hcXFwiXSB7XFxuICAtd2Via2l0LWFwcGVhcmFuY2U6IHRleHRmaWVsZDsgLyogMSAqL1xcbiAgb3V0bGluZS1vZmZzZXQ6IC0ycHg7IC8qIDIgKi9cXG59XFxuXFxuLyoqXFxuICogUmVtb3ZlIHRoZSBpbm5lciBwYWRkaW5nIGFuZCBjYW5jZWwgYnV0dG9ucyBpbiBDaHJvbWUgYW5kIFNhZmFyaSBvbiBtYWNPUy5cXG4gKi9cXG5cXG5bdHlwZT1cXFwic2VhcmNoXFxcIl06Oi13ZWJraXQtc2VhcmNoLWNhbmNlbC1idXR0b24sXFxuW3R5cGU9XFxcInNlYXJjaFxcXCJdOjotd2Via2l0LXNlYXJjaC1kZWNvcmF0aW9uIHtcXG4gIC13ZWJraXQtYXBwZWFyYW5jZTogbm9uZTtcXG59XFxuXFxuLyoqXFxuICogMS4gQ29ycmVjdCB0aGUgaW5hYmlsaXR5IHRvIHN0eWxlIGNsaWNrYWJsZSB0eXBlcyBpbiBpT1MgYW5kIFNhZmFyaS5cXG4gKiAyLiBDaGFuZ2UgZm9udCBwcm9wZXJ0aWVzIHRvIGBpbmhlcml0YCBpbiBTYWZhcmkuXFxuICovXFxuXFxuOjotd2Via2l0LWZpbGUtdXBsb2FkLWJ1dHRvbiB7XFxuICAtd2Via2l0LWFwcGVhcmFuY2U6IGJ1dHRvbjsgLyogMSAqL1xcbiAgZm9udDogaW5oZXJpdDsgLyogMiAqL1xcbn1cXG5cIiwgXCJcIix7XCJ2ZXJzaW9uXCI6MyxcInNvdXJjZXNcIjpbXCJ3ZWJwYWNrOi8vLi9zcmMvcmVzZXQuY3NzXCJdLFwibmFtZXNcIjpbXSxcIm1hcHBpbmdzXCI6XCJBQUFBOzs7Q0FHQzs7QUFFRDs7Ozs7Ozs7Ozs7OztDQWFDLFNBQVM7Q0FDVCxVQUFVO0NBQ1YsU0FBUztDQUNULGVBQWU7Q0FDZixhQUFhO0NBQ2Isd0JBQXdCO0FBQ3pCO0FBQ0EsZ0RBQWdEO0FBQ2hEOztDQUVDLGNBQWM7QUFDZjtBQUNBO0NBQ0MsY0FBYztBQUNmO0FBQ0E7Q0FDQyxnQkFBZ0I7QUFDakI7QUFDQTtDQUNDLFlBQVk7QUFDYjtBQUNBOztDQUVDLFdBQVc7Q0FDWCxhQUFhO0FBQ2Q7QUFDQTtDQUNDLHlCQUF5QjtDQUN6QixpQkFBaUI7QUFDbEI7O0FBRUEsMkVBQTJFOztBQUUzRTsrRUFDK0U7O0FBRS9FOzs7OztFQUtFOztBQUVGO0VBQ0UsdUJBQXVCLEVBQUUsTUFBTTtFQUMvQixpQkFBaUIsRUFBRSxNQUFNO0VBQ3pCLDBCQUEwQixFQUFFLE1BQU07RUFDbEMsOEJBQThCLEVBQUUsTUFBTTtBQUN4Qzs7QUFFQTsrRUFDK0U7O0FBRS9FOzs7RUFHRTs7QUFFRjs7Ozs7RUFLRSx1QkFBdUIsRUFBRSxNQUFNO0VBQy9CLGVBQWUsRUFBRSxNQUFNO0VBQ3ZCLGlCQUFpQixFQUFFLE1BQU07RUFDekIsU0FBUyxFQUFFLE1BQU07QUFDbkI7O0FBRUE7OztFQUdFOztBQUVGO1FBQ1EsTUFBTTtFQUNaLGlCQUFpQjtBQUNuQjs7QUFFQTs7O0VBR0U7O0FBRUY7U0FDUyxNQUFNO0VBQ2Isb0JBQW9CO0FBQ3RCOztBQUVBOzs7O0VBSUU7O0FBRUY7Ozs7RUFJRSwwQkFBMEIsRUFBRSxNQUFNO0FBQ3BDOztBQUVBOztFQUVFOztBQUVGOzs7O0VBSUUsa0JBQWtCO0VBQ2xCLFVBQVU7QUFDWjs7QUFFQTs7RUFFRTs7QUFFRjs7OztFQUlFLDhCQUE4QjtBQUNoQzs7QUFFQTs7RUFFRTs7QUFFRjtFQUNFLHlCQUF5QjtFQUN6QixhQUFhO0VBQ2IsOEJBQThCO0FBQ2hDOztBQUVBOzs7OztFQUtFOztBQUVGO0VBQ0Usc0JBQXNCLEVBQUUsTUFBTTtFQUM5QixjQUFjLEVBQUUsTUFBTTtFQUN0QixjQUFjLEVBQUUsTUFBTTtFQUN0QixlQUFlLEVBQUUsTUFBTTtFQUN2QixVQUFVLEVBQUUsTUFBTTtFQUNsQixtQkFBbUIsRUFBRSxNQUFNO0FBQzdCOztBQUVBOzs7RUFHRTs7QUFFRjtFQUNFLHFCQUFxQixFQUFFLE1BQU07RUFDN0Isd0JBQXdCLEVBQUUsTUFBTTtBQUNsQzs7QUFFQTs7RUFFRTs7QUFFRjtFQUNFLGNBQWM7QUFDaEI7O0FBRUE7OztFQUdFOztBQUVGOztFQUVFLHNCQUFzQixFQUFFLE1BQU07RUFDOUIsVUFBVSxFQUFFLE1BQU07QUFDcEI7O0FBRUE7O0VBRUU7O0FBRUY7O0VBRUUsWUFBWTtBQUNkOztBQUVBOzs7RUFHRTs7QUFFRjtFQUNFLDZCQUE2QixFQUFFLE1BQU07RUFDckMsb0JBQW9CLEVBQUUsTUFBTTtBQUM5Qjs7QUFFQTs7RUFFRTs7QUFFRjs7RUFFRSx3QkFBd0I7QUFDMUI7O0FBRUE7OztFQUdFOztBQUVGO0VBQ0UsMEJBQTBCLEVBQUUsTUFBTTtFQUNsQyxhQUFhLEVBQUUsTUFBTTtBQUN2QlwiLFwic291cmNlc0NvbnRlbnRcIjpbXCIvKiBodHRwOi8vbWV5ZXJ3ZWIuY29tL2VyaWMvdG9vbHMvY3NzL3Jlc2V0L1xcbiAgIHYyLjAgfCAyMDExMDEyNlxcbiAgIExpY2Vuc2U6IG5vbmUgKHB1YmxpYyBkb21haW4pXFxuKi9cXG5cXG5odG1sLCBib2R5LCBkaXYsIHNwYW4sIGFwcGxldCwgb2JqZWN0LCBpZnJhbWUsXFxuaDEsIGgyLCBoMywgaDQsIGg1LCBoNiwgcCwgYmxvY2txdW90ZSwgcHJlLFxcbmEsIGFiYnIsIGFjcm9ueW0sIGFkZHJlc3MsIGJpZywgY2l0ZSwgY29kZSxcXG5kZWwsIGRmbiwgZW0sIGltZywgaW5zLCBrYmQsIHEsIHMsIHNhbXAsXFxuc21hbGwsIHN0cmlrZSwgc3Ryb25nLCBzdWIsIHN1cCwgdHQsIHZhcixcXG5iLCB1LCBpLCBjZW50ZXIsXFxuZGwsIGR0LCBkZCwgb2wsIHVsLCBsaSxcXG5maWVsZHNldCwgZm9ybSwgbGFiZWwsIGxlZ2VuZCxcXG50YWJsZSwgY2FwdGlvbiwgdGJvZHksIHRmb290LCB0aGVhZCwgdHIsIHRoLCB0ZCxcXG5hcnRpY2xlLCBhc2lkZSwgY2FudmFzLCBkZXRhaWxzLCBlbWJlZCxcXG5maWd1cmUsIGZpZ2NhcHRpb24sIGZvb3RlciwgaGVhZGVyLCBoZ3JvdXAsXFxubWVudSwgbmF2LCBvdXRwdXQsIHJ1YnksIHNlY3Rpb24sIHN1bW1hcnksXFxudGltZSwgbWFyaywgYXVkaW8sIHZpZGVvIHtcXG5cXHRtYXJnaW46IDA7XFxuXFx0cGFkZGluZzogMDtcXG5cXHRib3JkZXI6IDA7XFxuXFx0Zm9udC1zaXplOiAxMDAlO1xcblxcdGZvbnQ6IGluaGVyaXQ7XFxuXFx0dmVydGljYWwtYWxpZ246IGJhc2VsaW5lO1xcbn1cXG4vKiBIVE1MNSBkaXNwbGF5LXJvbGUgcmVzZXQgZm9yIG9sZGVyIGJyb3dzZXJzICovXFxuYXJ0aWNsZSwgYXNpZGUsIGRldGFpbHMsIGZpZ2NhcHRpb24sIGZpZ3VyZSxcXG5mb290ZXIsIGhlYWRlciwgaGdyb3VwLCBtZW51LCBuYXYsIHNlY3Rpb24ge1xcblxcdGRpc3BsYXk6IGJsb2NrO1xcbn1cXG5ib2R5IHtcXG5cXHRsaW5lLWhlaWdodDogMTtcXG59XFxub2wsIHVsIHtcXG5cXHRsaXN0LXN0eWxlOiBub25lO1xcbn1cXG5ibG9ja3F1b3RlLCBxIHtcXG5cXHRxdW90ZXM6IG5vbmU7XFxufVxcbmJsb2NrcXVvdGU6YmVmb3JlLCBibG9ja3F1b3RlOmFmdGVyLFxcbnE6YmVmb3JlLCBxOmFmdGVyIHtcXG5cXHRjb250ZW50OiAnJztcXG5cXHRjb250ZW50OiBub25lO1xcbn1cXG50YWJsZSB7XFxuXFx0Ym9yZGVyLWNvbGxhcHNlOiBjb2xsYXBzZTtcXG5cXHRib3JkZXItc3BhY2luZzogMDtcXG59XFxuXFxuLyohIG5vcm1hbGl6ZS5jc3MgdjUuMC4wIHwgTUlUIExpY2Vuc2UgfCBnaXRodWIuY29tL25lY29sYXMvbm9ybWFsaXplLmNzcyAqL1xcblxcbi8qIERvY3VtZW50XFxuICAgPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0gKi9cXG5cXG4vKipcXG4gKiAxLiBDaGFuZ2UgdGhlIGRlZmF1bHQgZm9udCBmYW1pbHkgaW4gYWxsIGJyb3dzZXJzIChvcGluaW9uYXRlZCkuXFxuICogMi4gQ29ycmVjdCB0aGUgbGluZSBoZWlnaHQgaW4gYWxsIGJyb3dzZXJzLlxcbiAqIDMuIFByZXZlbnQgYWRqdXN0bWVudHMgb2YgZm9udCBzaXplIGFmdGVyIG9yaWVudGF0aW9uIGNoYW5nZXMgaW5cXG4gKiAgICBJRSBvbiBXaW5kb3dzIFBob25lIGFuZCBpbiBpT1MuXFxuICovXFxuXFxuaHRtbCB7XFxuICBmb250LWZhbWlseTogc2Fucy1zZXJpZjsgLyogMSAqL1xcbiAgbGluZS1oZWlnaHQ6IDEuMTU7IC8qIDIgKi9cXG4gIC1tcy10ZXh0LXNpemUtYWRqdXN0OiAxMDAlOyAvKiAzICovXFxuICAtd2Via2l0LXRleHQtc2l6ZS1hZGp1c3Q6IDEwMCU7IC8qIDMgKi9cXG59XFxuXFxuLyogRm9ybXNcXG4gICA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSAqL1xcblxcbi8qKlxcbiAqIDEuIENoYW5nZSB0aGUgZm9udCBzdHlsZXMgaW4gYWxsIGJyb3dzZXJzIChvcGluaW9uYXRlZCkuXFxuICogMi4gUmVtb3ZlIHRoZSBtYXJnaW4gaW4gRmlyZWZveCBhbmQgU2FmYXJpLlxcbiAqL1xcblxcbmJ1dHRvbixcXG5pbnB1dCxcXG5vcHRncm91cCxcXG5zZWxlY3QsXFxudGV4dGFyZWEge1xcbiAgZm9udC1mYW1pbHk6IHNhbnMtc2VyaWY7IC8qIDEgKi9cXG4gIGZvbnQtc2l6ZTogMTAwJTsgLyogMSAqL1xcbiAgbGluZS1oZWlnaHQ6IDEuMTU7IC8qIDEgKi9cXG4gIG1hcmdpbjogMDsgLyogMiAqL1xcbn1cXG5cXG4vKipcXG4gKiBTaG93IHRoZSBvdmVyZmxvdyBpbiBJRS5cXG4gKiAxLiBTaG93IHRoZSBvdmVyZmxvdyBpbiBFZGdlLlxcbiAqL1xcblxcbmJ1dHRvbixcXG5pbnB1dCB7IC8qIDEgKi9cXG4gIG92ZXJmbG93OiB2aXNpYmxlO1xcbn1cXG5cXG4vKipcXG4gKiBSZW1vdmUgdGhlIGluaGVyaXRhbmNlIG9mIHRleHQgdHJhbnNmb3JtIGluIEVkZ2UsIEZpcmVmb3gsIGFuZCBJRS5cXG4gKiAxLiBSZW1vdmUgdGhlIGluaGVyaXRhbmNlIG9mIHRleHQgdHJhbnNmb3JtIGluIEZpcmVmb3guXFxuICovXFxuXFxuYnV0dG9uLFxcbnNlbGVjdCB7IC8qIDEgKi9cXG4gIHRleHQtdHJhbnNmb3JtOiBub25lO1xcbn1cXG5cXG4vKipcXG4gKiAxLiBQcmV2ZW50IGEgV2ViS2l0IGJ1ZyB3aGVyZSAoMikgZGVzdHJveXMgbmF0aXZlIGBhdWRpb2AgYW5kIGB2aWRlb2BcXG4gKiAgICBjb250cm9scyBpbiBBbmRyb2lkIDQuXFxuICogMi4gQ29ycmVjdCB0aGUgaW5hYmlsaXR5IHRvIHN0eWxlIGNsaWNrYWJsZSB0eXBlcyBpbiBpT1MgYW5kIFNhZmFyaS5cXG4gKi9cXG5cXG5idXR0b24sXFxuaHRtbCBbdHlwZT1cXFwiYnV0dG9uXFxcIl0sIC8qIDEgKi9cXG5bdHlwZT1cXFwicmVzZXRcXFwiXSxcXG5bdHlwZT1cXFwic3VibWl0XFxcIl0ge1xcbiAgLXdlYmtpdC1hcHBlYXJhbmNlOiBidXR0b247IC8qIDIgKi9cXG59XFxuXFxuLyoqXFxuICogUmVtb3ZlIHRoZSBpbm5lciBib3JkZXIgYW5kIHBhZGRpbmcgaW4gRmlyZWZveC5cXG4gKi9cXG5cXG5idXR0b246Oi1tb3otZm9jdXMtaW5uZXIsXFxuW3R5cGU9XFxcImJ1dHRvblxcXCJdOjotbW96LWZvY3VzLWlubmVyLFxcblt0eXBlPVxcXCJyZXNldFxcXCJdOjotbW96LWZvY3VzLWlubmVyLFxcblt0eXBlPVxcXCJzdWJtaXRcXFwiXTo6LW1vei1mb2N1cy1pbm5lciB7XFxuICBib3JkZXItc3R5bGU6IG5vbmU7XFxuICBwYWRkaW5nOiAwO1xcbn1cXG5cXG4vKipcXG4gKiBSZXN0b3JlIHRoZSBmb2N1cyBzdHlsZXMgdW5zZXQgYnkgdGhlIHByZXZpb3VzIHJ1bGUuXFxuICovXFxuXFxuYnV0dG9uOi1tb3otZm9jdXNyaW5nLFxcblt0eXBlPVxcXCJidXR0b25cXFwiXTotbW96LWZvY3VzcmluZyxcXG5bdHlwZT1cXFwicmVzZXRcXFwiXTotbW96LWZvY3VzcmluZyxcXG5bdHlwZT1cXFwic3VibWl0XFxcIl06LW1vei1mb2N1c3Jpbmcge1xcbiAgb3V0bGluZTogMXB4IGRvdHRlZCBCdXR0b25UZXh0O1xcbn1cXG5cXG4vKipcXG4gKiBDaGFuZ2UgdGhlIGJvcmRlciwgbWFyZ2luLCBhbmQgcGFkZGluZyBpbiBhbGwgYnJvd3NlcnMgKG9waW5pb25hdGVkKS5cXG4gKi9cXG5cXG5maWVsZHNldCB7XFxuICBib3JkZXI6IDFweCBzb2xpZCAjYzBjMGMwO1xcbiAgbWFyZ2luOiAwIDJweDtcXG4gIHBhZGRpbmc6IDAuMzVlbSAwLjYyNWVtIDAuNzVlbTtcXG59XFxuXFxuLyoqXFxuICogMS4gQ29ycmVjdCB0aGUgdGV4dCB3cmFwcGluZyBpbiBFZGdlIGFuZCBJRS5cXG4gKiAyLiBDb3JyZWN0IHRoZSBjb2xvciBpbmhlcml0YW5jZSBmcm9tIGBmaWVsZHNldGAgZWxlbWVudHMgaW4gSUUuXFxuICogMy4gUmVtb3ZlIHRoZSBwYWRkaW5nIHNvIGRldmVsb3BlcnMgYXJlIG5vdCBjYXVnaHQgb3V0IHdoZW4gdGhleSB6ZXJvIG91dFxcbiAqICAgIGBmaWVsZHNldGAgZWxlbWVudHMgaW4gYWxsIGJyb3dzZXJzLlxcbiAqL1xcblxcbmxlZ2VuZCB7XFxuICBib3gtc2l6aW5nOiBib3JkZXItYm94OyAvKiAxICovXFxuICBjb2xvcjogaW5oZXJpdDsgLyogMiAqL1xcbiAgZGlzcGxheTogdGFibGU7IC8qIDEgKi9cXG4gIG1heC13aWR0aDogMTAwJTsgLyogMSAqL1xcbiAgcGFkZGluZzogMDsgLyogMyAqL1xcbiAgd2hpdGUtc3BhY2U6IG5vcm1hbDsgLyogMSAqL1xcbn1cXG5cXG4vKipcXG4gKiAxLiBBZGQgdGhlIGNvcnJlY3QgZGlzcGxheSBpbiBJRSA5LS5cXG4gKiAyLiBBZGQgdGhlIGNvcnJlY3QgdmVydGljYWwgYWxpZ25tZW50IGluIENocm9tZSwgRmlyZWZveCwgYW5kIE9wZXJhLlxcbiAqL1xcblxcbnByb2dyZXNzIHtcXG4gIGRpc3BsYXk6IGlubGluZS1ibG9jazsgLyogMSAqL1xcbiAgdmVydGljYWwtYWxpZ246IGJhc2VsaW5lOyAvKiAyICovXFxufVxcblxcbi8qKlxcbiAqIFJlbW92ZSB0aGUgZGVmYXVsdCB2ZXJ0aWNhbCBzY3JvbGxiYXIgaW4gSUUuXFxuICovXFxuXFxudGV4dGFyZWEge1xcbiAgb3ZlcmZsb3c6IGF1dG87XFxufVxcblxcbi8qKlxcbiAqIDEuIEFkZCB0aGUgY29ycmVjdCBib3ggc2l6aW5nIGluIElFIDEwLS5cXG4gKiAyLiBSZW1vdmUgdGhlIHBhZGRpbmcgaW4gSUUgMTAtLlxcbiAqL1xcblxcblt0eXBlPVxcXCJjaGVja2JveFxcXCJdLFxcblt0eXBlPVxcXCJyYWRpb1xcXCJdIHtcXG4gIGJveC1zaXppbmc6IGJvcmRlci1ib3g7IC8qIDEgKi9cXG4gIHBhZGRpbmc6IDA7IC8qIDIgKi9cXG59XFxuXFxuLyoqXFxuICogQ29ycmVjdCB0aGUgY3Vyc29yIHN0eWxlIG9mIGluY3JlbWVudCBhbmQgZGVjcmVtZW50IGJ1dHRvbnMgaW4gQ2hyb21lLlxcbiAqL1xcblxcblt0eXBlPVxcXCJudW1iZXJcXFwiXTo6LXdlYmtpdC1pbm5lci1zcGluLWJ1dHRvbixcXG5bdHlwZT1cXFwibnVtYmVyXFxcIl06Oi13ZWJraXQtb3V0ZXItc3Bpbi1idXR0b24ge1xcbiAgaGVpZ2h0OiBhdXRvO1xcbn1cXG5cXG4vKipcXG4gKiAxLiBDb3JyZWN0IHRoZSBvZGQgYXBwZWFyYW5jZSBpbiBDaHJvbWUgYW5kIFNhZmFyaS5cXG4gKiAyLiBDb3JyZWN0IHRoZSBvdXRsaW5lIHN0eWxlIGluIFNhZmFyaS5cXG4gKi9cXG5cXG5bdHlwZT1cXFwic2VhcmNoXFxcIl0ge1xcbiAgLXdlYmtpdC1hcHBlYXJhbmNlOiB0ZXh0ZmllbGQ7IC8qIDEgKi9cXG4gIG91dGxpbmUtb2Zmc2V0OiAtMnB4OyAvKiAyICovXFxufVxcblxcbi8qKlxcbiAqIFJlbW92ZSB0aGUgaW5uZXIgcGFkZGluZyBhbmQgY2FuY2VsIGJ1dHRvbnMgaW4gQ2hyb21lIGFuZCBTYWZhcmkgb24gbWFjT1MuXFxuICovXFxuXFxuW3R5cGU9XFxcInNlYXJjaFxcXCJdOjotd2Via2l0LXNlYXJjaC1jYW5jZWwtYnV0dG9uLFxcblt0eXBlPVxcXCJzZWFyY2hcXFwiXTo6LXdlYmtpdC1zZWFyY2gtZGVjb3JhdGlvbiB7XFxuICAtd2Via2l0LWFwcGVhcmFuY2U6IG5vbmU7XFxufVxcblxcbi8qKlxcbiAqIDEuIENvcnJlY3QgdGhlIGluYWJpbGl0eSB0byBzdHlsZSBjbGlja2FibGUgdHlwZXMgaW4gaU9TIGFuZCBTYWZhcmkuXFxuICogMi4gQ2hhbmdlIGZvbnQgcHJvcGVydGllcyB0byBgaW5oZXJpdGAgaW4gU2FmYXJpLlxcbiAqL1xcblxcbjo6LXdlYmtpdC1maWxlLXVwbG9hZC1idXR0b24ge1xcbiAgLXdlYmtpdC1hcHBlYXJhbmNlOiBidXR0b247IC8qIDEgKi9cXG4gIGZvbnQ6IGluaGVyaXQ7IC8qIDIgKi9cXG59XFxuXCJdLFwic291cmNlUm9vdFwiOlwiXCJ9XSk7XG4vLyBFeHBvcnRzXG5leHBvcnQgZGVmYXVsdCBfX19DU1NfTE9BREVSX0VYUE9SVF9fXztcbiIsIi8vIEltcG9ydHNcbmltcG9ydCBfX19DU1NfTE9BREVSX0FQSV9TT1VSQ0VNQVBfSU1QT1JUX19fIGZyb20gXCIuLi8uLi8uLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9kaXN0L3J1bnRpbWUvY3NzV2l0aE1hcHBpbmdUb1N0cmluZy5qc1wiO1xuaW1wb3J0IF9fX0NTU19MT0FERVJfQVBJX0lNUE9SVF9fXyBmcm9tIFwiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvZGlzdC9ydW50aW1lL2FwaS5qc1wiO1xudmFyIF9fX0NTU19MT0FERVJfRVhQT1JUX19fID0gX19fQ1NTX0xPQURFUl9BUElfSU1QT1JUX19fKF9fX0NTU19MT0FERVJfQVBJX1NPVVJDRU1BUF9JTVBPUlRfX18pO1xuLy8gTW9kdWxlXG5fX19DU1NfTE9BREVSX0VYUE9SVF9fXy5wdXNoKFttb2R1bGUuaWQsIFwiY29udHJvbGxlci12aWV3IC5jYXRlZ29yeS1uYW1lIHtcXG4gIGZvbnQtc2l6ZTogMTBweDtcXG4gIG1hcmdpbi1ib3R0b206IDJweDtcXG4gIG1hcmdpbi10b3A6IDJweDtcXG4gIGNvbG9yOiBibGFjaztcXG59XFxuXFxuLmRhcmsgY29udHJvbGxlci12aWV3IC5jYXRlZ29yeS1uYW1lIHtcXG4gIGZvbnQtc2l6ZTogMTBweDtcXG4gIG1hcmdpbi1ib3R0b206IDJweDtcXG4gIG1hcmdpbi10b3A6IDJweDtcXG4gIGNvbG9yOiB3aGl0ZTtcXG59XFxuXCIsIFwiXCIse1widmVyc2lvblwiOjMsXCJzb3VyY2VzXCI6W1wid2VicGFjazovLy4vc3JjL3Jlc291cmNlcy9lbGVtZW50cy9jb250cm9sbGVyLXZpZXcuY3NzXCJdLFwibmFtZXNcIjpbXSxcIm1hcHBpbmdzXCI6XCJBQUFBO0VBQ0UsZUFBZTtFQUNmLGtCQUFrQjtFQUNsQixlQUFlO0VBQ2YsWUFBWTtBQUNkOztBQUVBO0VBQ0UsZUFBZTtFQUNmLGtCQUFrQjtFQUNsQixlQUFlO0VBQ2YsWUFBWTtBQUNkXCIsXCJzb3VyY2VzQ29udGVudFwiOltcImNvbnRyb2xsZXItdmlldyAuY2F0ZWdvcnktbmFtZSB7XFxuICBmb250LXNpemU6IDEwcHg7XFxuICBtYXJnaW4tYm90dG9tOiAycHg7XFxuICBtYXJnaW4tdG9wOiAycHg7XFxuICBjb2xvcjogYmxhY2s7XFxufVxcblxcbi5kYXJrIGNvbnRyb2xsZXItdmlldyAuY2F0ZWdvcnktbmFtZSB7XFxuICBmb250LXNpemU6IDEwcHg7XFxuICBtYXJnaW4tYm90dG9tOiAycHg7XFxuICBtYXJnaW4tdG9wOiAycHg7XFxuICBjb2xvcjogd2hpdGU7XFxufVxcblwiXSxcInNvdXJjZVJvb3RcIjpcIlwifV0pO1xuLy8gRXhwb3J0c1xuZXhwb3J0IGRlZmF1bHQgX19fQ1NTX0xPQURFUl9FWFBPUlRfX187XG4iLCIvLyBJbXBvcnRzXG5pbXBvcnQgX19fQ1NTX0xPQURFUl9BUElfU09VUkNFTUFQX0lNUE9SVF9fXyBmcm9tIFwiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvZGlzdC9ydW50aW1lL2Nzc1dpdGhNYXBwaW5nVG9TdHJpbmcuanNcIjtcbmltcG9ydCBfX19DU1NfTE9BREVSX0FQSV9JTVBPUlRfX18gZnJvbSBcIi4uLy4uLy4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2Rpc3QvcnVudGltZS9hcGkuanNcIjtcbnZhciBfX19DU1NfTE9BREVSX0VYUE9SVF9fXyA9IF9fX0NTU19MT0FERVJfQVBJX0lNUE9SVF9fXyhfX19DU1NfTE9BREVSX0FQSV9TT1VSQ0VNQVBfSU1QT1JUX19fKTtcbi8vIE1vZHVsZVxuX19fQ1NTX0xPQURFUl9FWFBPUlRfX18ucHVzaChbbW9kdWxlLmlkLCBcImRlYnVnLWdyb3VwIC5oZWFkZXIge1xcbiAgZm9udC13ZWlnaHQ6IG5vcm1hbDtcXG4gIGZvbnQtc2l6ZTogMTJweDtcXG4gIG1hcmdpbjogMDtcXG4gIHBhZGRpbmc6IDRweDtcXG4gIGJhY2tncm91bmQ6ICNmNGY0ZjQ7XFxuICBib3JkZXItYm90dG9tOiAxcHggc29saWQgcmdiYSgwLCAwLCAwLCAwLjI1KTtcXG4gIGJvcmRlci10b3A6IDFweCBzb2xpZCByZ2JhKDAsIDAsIDAsIDAuMjUpO1xcbn1cXG5cXG4uZGFyayBkZWJ1Zy1ncm91cCAuaGVhZGVyIHtcXG4gIGNvbG9yOiAjOTg5ODk4O1xcbiAgYmFja2dyb3VuZDogIzJhMmEyYTtcXG4gIGJvcmRlci1ib3R0b206IDFweCBzb2xpZCAjNWM1YzVjO1xcbiAgYm9yZGVyLXRvcDogMXB4IHNvbGlkICMzZDNkM2Q7XFxufVxcblxcbmRlYnVnLWdyb3VwIC5jb250ZW50IHtcXG4gIG1hcmdpbjogNHB4O1xcbn1cXG5cXG4uZGFyayBkZWJ1Zy1ncm91cCAuY29udGVudCB7XFxuICBiYWNrZ3JvdW5kOiAjMjAyMTI0O1xcbn1cXG5cIiwgXCJcIix7XCJ2ZXJzaW9uXCI6MyxcInNvdXJjZXNcIjpbXCJ3ZWJwYWNrOi8vLi9zcmMvcmVzb3VyY2VzL2VsZW1lbnRzL2RlYnVnLWdyb3VwLmNzc1wiXSxcIm5hbWVzXCI6W10sXCJtYXBwaW5nc1wiOlwiQUFBQTtFQUNFLG1CQUFtQjtFQUNuQixlQUFlO0VBQ2YsU0FBUztFQUNULFlBQVk7RUFDWixtQkFBbUI7RUFDbkIsNENBQTRDO0VBQzVDLHlDQUF5QztBQUMzQzs7QUFFQTtFQUNFLGNBQWM7RUFDZCxtQkFBbUI7RUFDbkIsZ0NBQWdDO0VBQ2hDLDZCQUE2QjtBQUMvQjs7QUFFQTtFQUNFLFdBQVc7QUFDYjs7QUFFQTtFQUNFLG1CQUFtQjtBQUNyQlwiLFwic291cmNlc0NvbnRlbnRcIjpbXCJkZWJ1Zy1ncm91cCAuaGVhZGVyIHtcXG4gIGZvbnQtd2VpZ2h0OiBub3JtYWw7XFxuICBmb250LXNpemU6IDEycHg7XFxuICBtYXJnaW46IDA7XFxuICBwYWRkaW5nOiA0cHg7XFxuICBiYWNrZ3JvdW5kOiAjZjRmNGY0O1xcbiAgYm9yZGVyLWJvdHRvbTogMXB4IHNvbGlkIHJnYmEoMCwgMCwgMCwgMC4yNSk7XFxuICBib3JkZXItdG9wOiAxcHggc29saWQgcmdiYSgwLCAwLCAwLCAwLjI1KTtcXG59XFxuXFxuLmRhcmsgZGVidWctZ3JvdXAgLmhlYWRlciB7XFxuICBjb2xvcjogIzk4OTg5ODtcXG4gIGJhY2tncm91bmQ6ICMyYTJhMmE7XFxuICBib3JkZXItYm90dG9tOiAxcHggc29saWQgIzVjNWM1YztcXG4gIGJvcmRlci10b3A6IDFweCBzb2xpZCAjM2QzZDNkO1xcbn1cXG5cXG5kZWJ1Zy1ncm91cCAuY29udGVudCB7XFxuICBtYXJnaW46IDRweDtcXG59XFxuXFxuLmRhcmsgZGVidWctZ3JvdXAgLmNvbnRlbnQge1xcbiAgYmFja2dyb3VuZDogIzIwMjEyNDtcXG59XFxuXCJdLFwic291cmNlUm9vdFwiOlwiXCJ9XSk7XG4vLyBFeHBvcnRzXG5leHBvcnQgZGVmYXVsdCBfX19DU1NfTE9BREVSX0VYUE9SVF9fXztcbiIsIi8vIEltcG9ydHNcbmltcG9ydCBfX19DU1NfTE9BREVSX0FQSV9TT1VSQ0VNQVBfSU1QT1JUX19fIGZyb20gXCIuLi8uLi8uLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9kaXN0L3J1bnRpbWUvY3NzV2l0aE1hcHBpbmdUb1N0cmluZy5qc1wiO1xuaW1wb3J0IF9fX0NTU19MT0FERVJfQVBJX0lNUE9SVF9fXyBmcm9tIFwiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvZGlzdC9ydW50aW1lL2FwaS5qc1wiO1xudmFyIF9fX0NTU19MT0FERVJfRVhQT1JUX19fID0gX19fQ1NTX0xPQURFUl9BUElfSU1QT1JUX19fKF9fX0NTU19MT0FERVJfQVBJX1NPVVJDRU1BUF9JTVBPUlRfX18pO1xuLy8gTW9kdWxlXG5fX19DU1NfTE9BREVSX0VYUE9SVF9fXy5wdXNoKFttb2R1bGUuaWQsIFwicHJvcGVydHktdmlldyB7XFxuICBwYWRkaW5nLXRvcDogMnB4O1xcbiAgcGFkZGluZy1ib3R0b206IDJweDtcXG4gIGRpc3BsYXk6IGJsb2NrO1xcbn1cXG5cXG5wcm9wZXJ0eS12aWV3IC5hcnJvdyB7XFxuICBmb250LXNpemU6IDEwcHg7XFxuICBjb2xvcjogZGltZ3JheTtcXG4gIGN1cnNvcjogZGVmYXVsdDtcXG59XFxuXFxucHJvcGVydHktdmlldyAuYXJyb3cgLnJpZ2h0IHtcXG4gIG1hcmdpbi1yaWdodDogMXB4O1xcbn1cXG5cXG5wcm9wZXJ0eS12aWV3IC5wcm9wZXJ0eS1saW5lIHtcXG4gIHdoaXRlLXNwYWNlOiBub3dyYXA7XFxufVxcblxcbnByb3BlcnR5LXZpZXcgLnByb3BlcnR5LW5hbWUge1xcbiAgZm9udC1zaXplOiAxMnB4O1xcbiAgY29sb3I6IHB1cnBsZTtcXG4gIGZvbnQtZmFtaWx5OiBtb25vc3BhY2U7XFxuICBtYXJnaW4tbGVmdDogMXB4O1xcbn1cXG5cXG4uZGFyayBwcm9wZXJ0eS12aWV3IC5wcm9wZXJ0eS1uYW1lIHtcXG4gIGNvbG9yOiAjMzRjN2JiO1xcbn1cXG5wcm9wZXJ0eS12aWV3IC52YWx1ZS1jb250YWluZXIge1xcbiAgcG9zaXRpb246IHJlbGF0aXZlO1xcbn1cXG5cXG5wcm9wZXJ0eS12aWV3IC5wcm9wZXJ0eS1lZGl0b3Ige1xcbiAgZm9udC1mYW1pbHk6IG1vbm9zcGFjZTtcXG4gIGZvbnQtc2l6ZTogMTJweDtcXG4gIG1hcmdpbjogMDtcXG4gIGhlaWdodDogMTJweDtcXG4gIG91dGxpbmU6IG5vbmU7XFxuICBib3JkZXI6IDFweCBzb2xpZCBkYXJrZ3JheTtcXG4gIGJveC1zaGFkb3c6IDAgMCA1cHggcmdiYSgwLCAwLCAwLCAwLjUpO1xcbiAgcG9zaXRpb246IGFic29sdXRlO1xcbiAgdG9wOiAwO1xcbiAgbGVmdDogMnB4O1xcbiAgcGFkZGluZzogMCAwIDAgMnB4O1xcbn1cXG5cXG5wcm9wZXJ0eS12aWV3IC5wcm9wZXJ0eS12YWx1ZSxcXG5wcm9wZXJ0eS12aWV3IC50b2tlbi1jb2xvbiB7XFxuICBmb250LXNpemU6IDEycHg7XFxuICBjb2xvcjogZGltZ3JheTtcXG4gIGZvbnQtZmFtaWx5OiBtb25vc3BhY2U7XFxufVxcblxcbnByb3BlcnR5LXZpZXcgLnByb3BlcnR5LXZhbHVlLm51bGwsXFxucHJvcGVydHktdmlldyAucHJvcGVydHktdmFsdWUudW5kZWZpbmVkIHtcXG4gIGNvbG9yOiBkaW1ncmF5O1xcbn1cXG5cXG5wcm9wZXJ0eS12aWV3IC5wcm9wZXJ0eS12YWx1ZS5ib29sZWFuIHtcXG4gIGNvbG9yOiBkZWVwcGluaztcXG59XFxuXFxucHJvcGVydHktdmlldyAucHJvcGVydHktdmFsdWUuc3RyaW5nIHtcXG4gIGNvbG9yOiByZWQ7XFxuICB3aGl0ZS1zcGFjZTogbm93cmFwO1xcbn1cXG4uZGFyayBwcm9wZXJ0eS12aWV3IC5wcm9wZXJ0eS12YWx1ZS5zdHJpbmcge1xcbiAgY29sb3I6ICNjYmNiY2I7XFxufVxcblxcbnByb3BlcnR5LXZpZXcgLnByb3BlcnR5LXZhbHVlLm51bWJlciB7XFxuICBjb2xvcjogYmx1ZTtcXG59XFxuXFxuLmRhcmsgcHJvcGVydHktdmlldyAucHJvcGVydHktdmFsdWUubnVtYmVyIHtcXG4gIGNvbG9yOiAjNTlhNmNhO1xcbn1cXG5cXG5wcm9wZXJ0eS12aWV3IC5wcm9wZXJ0eS12YWx1ZS5hcnJheSB7XFxuICBjb2xvcjogYmxhY2s7XFxufVxcblxcbi5kYXJrIHByb3BlcnR5LXZpZXcgLnByb3BlcnR5LXZhbHVlLmFycmF5IHtcXG4gIGNvbG9yOiAjY2JjYmNiO1xcbn1cXG5cXG5wcm9wZXJ0eS12aWV3IC5wcm9wZXJ0eS12YWx1ZS5vYmplY3QsXFxucHJvcGVydHktdmlldyAucHJvcGVydHktdmFsdWUubm9kZSB7XFxuICBjb2xvcjogYmxhY2s7XFxufVxcblxcbi5kYXJrIHByb3BlcnR5LXZpZXcgLnByb3BlcnR5LXZhbHVlLm9iamVjdCxcXG5wcm9wZXJ0eS12aWV3IC5wcm9wZXJ0eS12YWx1ZS5ub2RlIHtcXG4gIGNvbG9yOiAjY2JjYmNiO1xcbn1cXG5cXG5wcm9wZXJ0eS12aWV3IHVsLnByb3BlcnRpZXMge1xcbiAgbWFyZ2luLWxlZnQ6IDE2cHg7XFxufVxcblxcbnByb3BlcnR5LXZpZXcgLm5vLXByb3BlcnRpZXMge1xcbiAgbWFyZ2luLXRvcDogNHB4O1xcbiAgZm9udC1zaXplOiAxMHB4O1xcbn1cXG5cXG4uZGFyayBwcm9wZXJ0eS12aWV3IC5uby1wcm9wZXJ0aWVzIHtcXG4gIGNvbG9yOiAjOTg5ODk4O1xcbn1cXG5cIiwgXCJcIix7XCJ2ZXJzaW9uXCI6MyxcInNvdXJjZXNcIjpbXCJ3ZWJwYWNrOi8vLi9zcmMvcmVzb3VyY2VzL2VsZW1lbnRzL3Byb3BlcnR5LXZpZXcuY3NzXCJdLFwibmFtZXNcIjpbXSxcIm1hcHBpbmdzXCI6XCJBQUFBO0VBQ0UsZ0JBQWdCO0VBQ2hCLG1CQUFtQjtFQUNuQixjQUFjO0FBQ2hCOztBQUVBO0VBQ0UsZUFBZTtFQUNmLGNBQWM7RUFDZCxlQUFlO0FBQ2pCOztBQUVBO0VBQ0UsaUJBQWlCO0FBQ25COztBQUVBO0VBQ0UsbUJBQW1CO0FBQ3JCOztBQUVBO0VBQ0UsZUFBZTtFQUNmLGFBQWE7RUFDYixzQkFBc0I7RUFDdEIsZ0JBQWdCO0FBQ2xCOztBQUVBO0VBQ0UsY0FBYztBQUNoQjtBQUNBO0VBQ0Usa0JBQWtCO0FBQ3BCOztBQUVBO0VBQ0Usc0JBQXNCO0VBQ3RCLGVBQWU7RUFDZixTQUFTO0VBQ1QsWUFBWTtFQUNaLGFBQWE7RUFDYiwwQkFBMEI7RUFDMUIsc0NBQXNDO0VBQ3RDLGtCQUFrQjtFQUNsQixNQUFNO0VBQ04sU0FBUztFQUNULGtCQUFrQjtBQUNwQjs7QUFFQTs7RUFFRSxlQUFlO0VBQ2YsY0FBYztFQUNkLHNCQUFzQjtBQUN4Qjs7QUFFQTs7RUFFRSxjQUFjO0FBQ2hCOztBQUVBO0VBQ0UsZUFBZTtBQUNqQjs7QUFFQTtFQUNFLFVBQVU7RUFDVixtQkFBbUI7QUFDckI7QUFDQTtFQUNFLGNBQWM7QUFDaEI7O0FBRUE7RUFDRSxXQUFXO0FBQ2I7O0FBRUE7RUFDRSxjQUFjO0FBQ2hCOztBQUVBO0VBQ0UsWUFBWTtBQUNkOztBQUVBO0VBQ0UsY0FBYztBQUNoQjs7QUFFQTs7RUFFRSxZQUFZO0FBQ2Q7O0FBRUE7O0VBRUUsY0FBYztBQUNoQjs7QUFFQTtFQUNFLGlCQUFpQjtBQUNuQjs7QUFFQTtFQUNFLGVBQWU7RUFDZixlQUFlO0FBQ2pCOztBQUVBO0VBQ0UsY0FBYztBQUNoQlwiLFwic291cmNlc0NvbnRlbnRcIjpbXCJwcm9wZXJ0eS12aWV3IHtcXG4gIHBhZGRpbmctdG9wOiAycHg7XFxuICBwYWRkaW5nLWJvdHRvbTogMnB4O1xcbiAgZGlzcGxheTogYmxvY2s7XFxufVxcblxcbnByb3BlcnR5LXZpZXcgLmFycm93IHtcXG4gIGZvbnQtc2l6ZTogMTBweDtcXG4gIGNvbG9yOiBkaW1ncmF5O1xcbiAgY3Vyc29yOiBkZWZhdWx0O1xcbn1cXG5cXG5wcm9wZXJ0eS12aWV3IC5hcnJvdyAucmlnaHQge1xcbiAgbWFyZ2luLXJpZ2h0OiAxcHg7XFxufVxcblxcbnByb3BlcnR5LXZpZXcgLnByb3BlcnR5LWxpbmUge1xcbiAgd2hpdGUtc3BhY2U6IG5vd3JhcDtcXG59XFxuXFxucHJvcGVydHktdmlldyAucHJvcGVydHktbmFtZSB7XFxuICBmb250LXNpemU6IDEycHg7XFxuICBjb2xvcjogcHVycGxlO1xcbiAgZm9udC1mYW1pbHk6IG1vbm9zcGFjZTtcXG4gIG1hcmdpbi1sZWZ0OiAxcHg7XFxufVxcblxcbi5kYXJrIHByb3BlcnR5LXZpZXcgLnByb3BlcnR5LW5hbWUge1xcbiAgY29sb3I6ICMzNGM3YmI7XFxufVxcbnByb3BlcnR5LXZpZXcgLnZhbHVlLWNvbnRhaW5lciB7XFxuICBwb3NpdGlvbjogcmVsYXRpdmU7XFxufVxcblxcbnByb3BlcnR5LXZpZXcgLnByb3BlcnR5LWVkaXRvciB7XFxuICBmb250LWZhbWlseTogbW9ub3NwYWNlO1xcbiAgZm9udC1zaXplOiAxMnB4O1xcbiAgbWFyZ2luOiAwO1xcbiAgaGVpZ2h0OiAxMnB4O1xcbiAgb3V0bGluZTogbm9uZTtcXG4gIGJvcmRlcjogMXB4IHNvbGlkIGRhcmtncmF5O1xcbiAgYm94LXNoYWRvdzogMCAwIDVweCByZ2JhKDAsIDAsIDAsIDAuNSk7XFxuICBwb3NpdGlvbjogYWJzb2x1dGU7XFxuICB0b3A6IDA7XFxuICBsZWZ0OiAycHg7XFxuICBwYWRkaW5nOiAwIDAgMCAycHg7XFxufVxcblxcbnByb3BlcnR5LXZpZXcgLnByb3BlcnR5LXZhbHVlLFxcbnByb3BlcnR5LXZpZXcgLnRva2VuLWNvbG9uIHtcXG4gIGZvbnQtc2l6ZTogMTJweDtcXG4gIGNvbG9yOiBkaW1ncmF5O1xcbiAgZm9udC1mYW1pbHk6IG1vbm9zcGFjZTtcXG59XFxuXFxucHJvcGVydHktdmlldyAucHJvcGVydHktdmFsdWUubnVsbCxcXG5wcm9wZXJ0eS12aWV3IC5wcm9wZXJ0eS12YWx1ZS51bmRlZmluZWQge1xcbiAgY29sb3I6IGRpbWdyYXk7XFxufVxcblxcbnByb3BlcnR5LXZpZXcgLnByb3BlcnR5LXZhbHVlLmJvb2xlYW4ge1xcbiAgY29sb3I6IGRlZXBwaW5rO1xcbn1cXG5cXG5wcm9wZXJ0eS12aWV3IC5wcm9wZXJ0eS12YWx1ZS5zdHJpbmcge1xcbiAgY29sb3I6IHJlZDtcXG4gIHdoaXRlLXNwYWNlOiBub3dyYXA7XFxufVxcbi5kYXJrIHByb3BlcnR5LXZpZXcgLnByb3BlcnR5LXZhbHVlLnN0cmluZyB7XFxuICBjb2xvcjogI2NiY2JjYjtcXG59XFxuXFxucHJvcGVydHktdmlldyAucHJvcGVydHktdmFsdWUubnVtYmVyIHtcXG4gIGNvbG9yOiBibHVlO1xcbn1cXG5cXG4uZGFyayBwcm9wZXJ0eS12aWV3IC5wcm9wZXJ0eS12YWx1ZS5udW1iZXIge1xcbiAgY29sb3I6ICM1OWE2Y2E7XFxufVxcblxcbnByb3BlcnR5LXZpZXcgLnByb3BlcnR5LXZhbHVlLmFycmF5IHtcXG4gIGNvbG9yOiBibGFjaztcXG59XFxuXFxuLmRhcmsgcHJvcGVydHktdmlldyAucHJvcGVydHktdmFsdWUuYXJyYXkge1xcbiAgY29sb3I6ICNjYmNiY2I7XFxufVxcblxcbnByb3BlcnR5LXZpZXcgLnByb3BlcnR5LXZhbHVlLm9iamVjdCxcXG5wcm9wZXJ0eS12aWV3IC5wcm9wZXJ0eS12YWx1ZS5ub2RlIHtcXG4gIGNvbG9yOiBibGFjaztcXG59XFxuXFxuLmRhcmsgcHJvcGVydHktdmlldyAucHJvcGVydHktdmFsdWUub2JqZWN0LFxcbnByb3BlcnR5LXZpZXcgLnByb3BlcnR5LXZhbHVlLm5vZGUge1xcbiAgY29sb3I6ICNjYmNiY2I7XFxufVxcblxcbnByb3BlcnR5LXZpZXcgdWwucHJvcGVydGllcyB7XFxuICBtYXJnaW4tbGVmdDogMTZweDtcXG59XFxuXFxucHJvcGVydHktdmlldyAubm8tcHJvcGVydGllcyB7XFxuICBtYXJnaW4tdG9wOiA0cHg7XFxuICBmb250LXNpemU6IDEwcHg7XFxufVxcblxcbi5kYXJrIHByb3BlcnR5LXZpZXcgLm5vLXByb3BlcnRpZXMge1xcbiAgY29sb3I6ICM5ODk4OTg7XFxufVxcblwiXSxcInNvdXJjZVJvb3RcIjpcIlwifV0pO1xuLy8gRXhwb3J0c1xuZXhwb3J0IGRlZmF1bHQgX19fQ1NTX0xPQURFUl9FWFBPUlRfX187XG4iLCJcInVzZSBzdHJpY3RcIjtcblxuLypcbiAgTUlUIExpY2Vuc2UgaHR0cDovL3d3dy5vcGVuc291cmNlLm9yZy9saWNlbnNlcy9taXQtbGljZW5zZS5waHBcbiAgQXV0aG9yIFRvYmlhcyBLb3BwZXJzIEBzb2tyYVxuKi9cbi8vIGNzcyBiYXNlIGNvZGUsIGluamVjdGVkIGJ5IHRoZSBjc3MtbG9hZGVyXG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgZnVuYy1uYW1lc1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoY3NzV2l0aE1hcHBpbmdUb1N0cmluZykge1xuICB2YXIgbGlzdCA9IFtdOyAvLyByZXR1cm4gdGhlIGxpc3Qgb2YgbW9kdWxlcyBhcyBjc3Mgc3RyaW5nXG5cbiAgbGlzdC50b1N0cmluZyA9IGZ1bmN0aW9uIHRvU3RyaW5nKCkge1xuICAgIHJldHVybiB0aGlzLm1hcChmdW5jdGlvbiAoaXRlbSkge1xuICAgICAgdmFyIGNvbnRlbnQgPSBjc3NXaXRoTWFwcGluZ1RvU3RyaW5nKGl0ZW0pO1xuXG4gICAgICBpZiAoaXRlbVsyXSkge1xuICAgICAgICByZXR1cm4gXCJAbWVkaWEgXCIuY29uY2F0KGl0ZW1bMl0sIFwiIHtcIikuY29uY2F0KGNvbnRlbnQsIFwifVwiKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGNvbnRlbnQ7XG4gICAgfSkuam9pbignJyk7XG4gIH07IC8vIGltcG9ydCBhIGxpc3Qgb2YgbW9kdWxlcyBpbnRvIHRoZSBsaXN0XG4gIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBmdW5jLW5hbWVzXG5cblxuICBsaXN0LmkgPSBmdW5jdGlvbiAobW9kdWxlcywgbWVkaWFRdWVyeSwgZGVkdXBlKSB7XG4gICAgaWYgKHR5cGVvZiBtb2R1bGVzID09PSAnc3RyaW5nJykge1xuICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXBhcmFtLXJlYXNzaWduXG4gICAgICBtb2R1bGVzID0gW1tudWxsLCBtb2R1bGVzLCAnJ11dO1xuICAgIH1cblxuICAgIHZhciBhbHJlYWR5SW1wb3J0ZWRNb2R1bGVzID0ge307XG5cbiAgICBpZiAoZGVkdXBlKSB7XG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIHByZWZlci1kZXN0cnVjdHVyaW5nXG4gICAgICAgIHZhciBpZCA9IHRoaXNbaV1bMF07XG5cbiAgICAgICAgaWYgKGlkICE9IG51bGwpIHtcbiAgICAgICAgICBhbHJlYWR5SW1wb3J0ZWRNb2R1bGVzW2lkXSA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICBmb3IgKHZhciBfaSA9IDA7IF9pIDwgbW9kdWxlcy5sZW5ndGg7IF9pKyspIHtcbiAgICAgIHZhciBpdGVtID0gW10uY29uY2F0KG1vZHVsZXNbX2ldKTtcblxuICAgICAgaWYgKGRlZHVwZSAmJiBhbHJlYWR5SW1wb3J0ZWRNb2R1bGVzW2l0ZW1bMF1dKSB7XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1jb250aW51ZVxuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cblxuICAgICAgaWYgKG1lZGlhUXVlcnkpIHtcbiAgICAgICAgaWYgKCFpdGVtWzJdKSB7XG4gICAgICAgICAgaXRlbVsyXSA9IG1lZGlhUXVlcnk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgaXRlbVsyXSA9IFwiXCIuY29uY2F0KG1lZGlhUXVlcnksIFwiIGFuZCBcIikuY29uY2F0KGl0ZW1bMl0pO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGxpc3QucHVzaChpdGVtKTtcbiAgICB9XG4gIH07XG5cbiAgcmV0dXJuIGxpc3Q7XG59OyIsIlwidXNlIHN0cmljdFwiO1xuXG5mdW5jdGlvbiBfc2xpY2VkVG9BcnJheShhcnIsIGkpIHsgcmV0dXJuIF9hcnJheVdpdGhIb2xlcyhhcnIpIHx8IF9pdGVyYWJsZVRvQXJyYXlMaW1pdChhcnIsIGkpIHx8IF91bnN1cHBvcnRlZEl0ZXJhYmxlVG9BcnJheShhcnIsIGkpIHx8IF9ub25JdGVyYWJsZVJlc3QoKTsgfVxuXG5mdW5jdGlvbiBfbm9uSXRlcmFibGVSZXN0KCkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiSW52YWxpZCBhdHRlbXB0IHRvIGRlc3RydWN0dXJlIG5vbi1pdGVyYWJsZSBpbnN0YW5jZS5cXG5JbiBvcmRlciB0byBiZSBpdGVyYWJsZSwgbm9uLWFycmF5IG9iamVjdHMgbXVzdCBoYXZlIGEgW1N5bWJvbC5pdGVyYXRvcl0oKSBtZXRob2QuXCIpOyB9XG5cbmZ1bmN0aW9uIF91bnN1cHBvcnRlZEl0ZXJhYmxlVG9BcnJheShvLCBtaW5MZW4pIHsgaWYgKCFvKSByZXR1cm47IGlmICh0eXBlb2YgbyA9PT0gXCJzdHJpbmdcIikgcmV0dXJuIF9hcnJheUxpa2VUb0FycmF5KG8sIG1pbkxlbik7IHZhciBuID0gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKG8pLnNsaWNlKDgsIC0xKTsgaWYgKG4gPT09IFwiT2JqZWN0XCIgJiYgby5jb25zdHJ1Y3RvcikgbiA9IG8uY29uc3RydWN0b3IubmFtZTsgaWYgKG4gPT09IFwiTWFwXCIgfHwgbiA9PT0gXCJTZXRcIikgcmV0dXJuIEFycmF5LmZyb20obyk7IGlmIChuID09PSBcIkFyZ3VtZW50c1wiIHx8IC9eKD86VWl8SSludCg/Ojh8MTZ8MzIpKD86Q2xhbXBlZCk/QXJyYXkkLy50ZXN0KG4pKSByZXR1cm4gX2FycmF5TGlrZVRvQXJyYXkobywgbWluTGVuKTsgfVxuXG5mdW5jdGlvbiBfYXJyYXlMaWtlVG9BcnJheShhcnIsIGxlbikgeyBpZiAobGVuID09IG51bGwgfHwgbGVuID4gYXJyLmxlbmd0aCkgbGVuID0gYXJyLmxlbmd0aDsgZm9yICh2YXIgaSA9IDAsIGFycjIgPSBuZXcgQXJyYXkobGVuKTsgaSA8IGxlbjsgaSsrKSB7IGFycjJbaV0gPSBhcnJbaV07IH0gcmV0dXJuIGFycjI7IH1cblxuZnVuY3Rpb24gX2l0ZXJhYmxlVG9BcnJheUxpbWl0KGFyciwgaSkgeyBpZiAodHlwZW9mIFN5bWJvbCA9PT0gXCJ1bmRlZmluZWRcIiB8fCAhKFN5bWJvbC5pdGVyYXRvciBpbiBPYmplY3QoYXJyKSkpIHJldHVybjsgdmFyIF9hcnIgPSBbXTsgdmFyIF9uID0gdHJ1ZTsgdmFyIF9kID0gZmFsc2U7IHZhciBfZSA9IHVuZGVmaW5lZDsgdHJ5IHsgZm9yICh2YXIgX2kgPSBhcnJbU3ltYm9sLml0ZXJhdG9yXSgpLCBfczsgIShfbiA9IChfcyA9IF9pLm5leHQoKSkuZG9uZSk7IF9uID0gdHJ1ZSkgeyBfYXJyLnB1c2goX3MudmFsdWUpOyBpZiAoaSAmJiBfYXJyLmxlbmd0aCA9PT0gaSkgYnJlYWs7IH0gfSBjYXRjaCAoZXJyKSB7IF9kID0gdHJ1ZTsgX2UgPSBlcnI7IH0gZmluYWxseSB7IHRyeSB7IGlmICghX24gJiYgX2lbXCJyZXR1cm5cIl0gIT0gbnVsbCkgX2lbXCJyZXR1cm5cIl0oKTsgfSBmaW5hbGx5IHsgaWYgKF9kKSB0aHJvdyBfZTsgfSB9IHJldHVybiBfYXJyOyB9XG5cbmZ1bmN0aW9uIF9hcnJheVdpdGhIb2xlcyhhcnIpIHsgaWYgKEFycmF5LmlzQXJyYXkoYXJyKSkgcmV0dXJuIGFycjsgfVxuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIGNzc1dpdGhNYXBwaW5nVG9TdHJpbmcoaXRlbSkge1xuICB2YXIgX2l0ZW0gPSBfc2xpY2VkVG9BcnJheShpdGVtLCA0KSxcbiAgICAgIGNvbnRlbnQgPSBfaXRlbVsxXSxcbiAgICAgIGNzc01hcHBpbmcgPSBfaXRlbVszXTtcblxuICBpZiAodHlwZW9mIGJ0b2EgPT09ICdmdW5jdGlvbicpIHtcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tdW5kZWZcbiAgICB2YXIgYmFzZTY0ID0gYnRvYSh1bmVzY2FwZShlbmNvZGVVUklDb21wb25lbnQoSlNPTi5zdHJpbmdpZnkoY3NzTWFwcGluZykpKSk7XG4gICAgdmFyIGRhdGEgPSBcInNvdXJjZU1hcHBpbmdVUkw9ZGF0YTphcHBsaWNhdGlvbi9qc29uO2NoYXJzZXQ9dXRmLTg7YmFzZTY0LFwiLmNvbmNhdChiYXNlNjQpO1xuICAgIHZhciBzb3VyY2VNYXBwaW5nID0gXCIvKiMgXCIuY29uY2F0KGRhdGEsIFwiICovXCIpO1xuICAgIHZhciBzb3VyY2VVUkxzID0gY3NzTWFwcGluZy5zb3VyY2VzLm1hcChmdW5jdGlvbiAoc291cmNlKSB7XG4gICAgICByZXR1cm4gXCIvKiMgc291cmNlVVJMPVwiLmNvbmNhdChjc3NNYXBwaW5nLnNvdXJjZVJvb3QgfHwgJycpLmNvbmNhdChzb3VyY2UsIFwiICovXCIpO1xuICAgIH0pO1xuICAgIHJldHVybiBbY29udGVudF0uY29uY2F0KHNvdXJjZVVSTHMpLmNvbmNhdChbc291cmNlTWFwcGluZ10pLmpvaW4oJ1xcbicpO1xuICB9XG5cbiAgcmV0dXJuIFtjb250ZW50XS5qb2luKCdcXG4nKTtcbn07IiwiaW1wb3J0IGFwaSBmcm9tIFwiIS4uL25vZGVfbW9kdWxlcy9zdHlsZS1sb2FkZXIvZGlzdC9ydW50aW1lL2luamVjdFN0eWxlc0ludG9TdHlsZVRhZy5qc1wiO1xuICAgICAgICAgICAgaW1wb3J0IGNvbnRlbnQgZnJvbSBcIiEhLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvZGlzdC9janMuanMhLi9hcHAuY3NzXCI7XG5cbnZhciBvcHRpb25zID0ge307XG5cbm9wdGlvbnMuaW5zZXJ0ID0gXCJoZWFkXCI7XG5vcHRpb25zLnNpbmdsZXRvbiA9IGZhbHNlO1xuXG52YXIgdXBkYXRlID0gYXBpKGNvbnRlbnQsIG9wdGlvbnMpO1xuXG5cblxuZXhwb3J0IGRlZmF1bHQgY29udGVudC5sb2NhbHMgfHwge307IiwiaW1wb3J0IGFwaSBmcm9tIFwiIS4uL25vZGVfbW9kdWxlcy9zdHlsZS1sb2FkZXIvZGlzdC9ydW50aW1lL2luamVjdFN0eWxlc0ludG9TdHlsZVRhZy5qc1wiO1xuICAgICAgICAgICAgaW1wb3J0IGNvbnRlbnQgZnJvbSBcIiEhLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvZGlzdC9janMuanMhLi9yZXNldC5jc3NcIjtcblxudmFyIG9wdGlvbnMgPSB7fTtcblxub3B0aW9ucy5pbnNlcnQgPSBcImhlYWRcIjtcbm9wdGlvbnMuc2luZ2xldG9uID0gZmFsc2U7XG5cbnZhciB1cGRhdGUgPSBhcGkoY29udGVudCwgb3B0aW9ucyk7XG5cblxuXG5leHBvcnQgZGVmYXVsdCBjb250ZW50LmxvY2FscyB8fCB7fTsiLCJpbXBvcnQgYXBpIGZyb20gXCIhLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3N0eWxlLWxvYWRlci9kaXN0L3J1bnRpbWUvaW5qZWN0U3R5bGVzSW50b1N0eWxlVGFnLmpzXCI7XG4gICAgICAgICAgICBpbXBvcnQgY29udGVudCBmcm9tIFwiISEuLi8uLi8uLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9kaXN0L2Nqcy5qcyEuL2NvbnRyb2xsZXItdmlldy5jc3NcIjtcblxudmFyIG9wdGlvbnMgPSB7fTtcblxub3B0aW9ucy5pbnNlcnQgPSBcImhlYWRcIjtcbm9wdGlvbnMuc2luZ2xldG9uID0gZmFsc2U7XG5cbnZhciB1cGRhdGUgPSBhcGkoY29udGVudCwgb3B0aW9ucyk7XG5cblxuXG5leHBvcnQgZGVmYXVsdCBjb250ZW50LmxvY2FscyB8fCB7fTsiLCJpbXBvcnQgYXBpIGZyb20gXCIhLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3N0eWxlLWxvYWRlci9kaXN0L3J1bnRpbWUvaW5qZWN0U3R5bGVzSW50b1N0eWxlVGFnLmpzXCI7XG4gICAgICAgICAgICBpbXBvcnQgY29udGVudCBmcm9tIFwiISEuLi8uLi8uLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9kaXN0L2Nqcy5qcyEuL2RlYnVnLWdyb3VwLmNzc1wiO1xuXG52YXIgb3B0aW9ucyA9IHt9O1xuXG5vcHRpb25zLmluc2VydCA9IFwiaGVhZFwiO1xub3B0aW9ucy5zaW5nbGV0b24gPSBmYWxzZTtcblxudmFyIHVwZGF0ZSA9IGFwaShjb250ZW50LCBvcHRpb25zKTtcblxuXG5cbmV4cG9ydCBkZWZhdWx0IGNvbnRlbnQubG9jYWxzIHx8IHt9OyIsImltcG9ydCBhcGkgZnJvbSBcIiEuLi8uLi8uLi9ub2RlX21vZHVsZXMvc3R5bGUtbG9hZGVyL2Rpc3QvcnVudGltZS9pbmplY3RTdHlsZXNJbnRvU3R5bGVUYWcuanNcIjtcbiAgICAgICAgICAgIGltcG9ydCBjb250ZW50IGZyb20gXCIhIS4uLy4uLy4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2Rpc3QvY2pzLmpzIS4vcHJvcGVydHktdmlldy5jc3NcIjtcblxudmFyIG9wdGlvbnMgPSB7fTtcblxub3B0aW9ucy5pbnNlcnQgPSBcImhlYWRcIjtcbm9wdGlvbnMuc2luZ2xldG9uID0gZmFsc2U7XG5cbnZhciB1cGRhdGUgPSBhcGkoY29udGVudCwgb3B0aW9ucyk7XG5cblxuXG5leHBvcnQgZGVmYXVsdCBjb250ZW50LmxvY2FscyB8fCB7fTsiLCJcInVzZSBzdHJpY3RcIjtcblxudmFyIGlzT2xkSUUgPSBmdW5jdGlvbiBpc09sZElFKCkge1xuICB2YXIgbWVtbztcbiAgcmV0dXJuIGZ1bmN0aW9uIG1lbW9yaXplKCkge1xuICAgIGlmICh0eXBlb2YgbWVtbyA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIC8vIFRlc3QgZm9yIElFIDw9IDkgYXMgcHJvcG9zZWQgYnkgQnJvd3NlcmhhY2tzXG4gICAgICAvLyBAc2VlIGh0dHA6Ly9icm93c2VyaGFja3MuY29tLyNoYWNrLWU3MWQ4NjkyZjY1MzM0MTczZmVlNzE1YzIyMmNiODA1XG4gICAgICAvLyBUZXN0cyBmb3IgZXhpc3RlbmNlIG9mIHN0YW5kYXJkIGdsb2JhbHMgaXMgdG8gYWxsb3cgc3R5bGUtbG9hZGVyXG4gICAgICAvLyB0byBvcGVyYXRlIGNvcnJlY3RseSBpbnRvIG5vbi1zdGFuZGFyZCBlbnZpcm9ubWVudHNcbiAgICAgIC8vIEBzZWUgaHR0cHM6Ly9naXRodWIuY29tL3dlYnBhY2stY29udHJpYi9zdHlsZS1sb2FkZXIvaXNzdWVzLzE3N1xuICAgICAgbWVtbyA9IEJvb2xlYW4od2luZG93ICYmIGRvY3VtZW50ICYmIGRvY3VtZW50LmFsbCAmJiAhd2luZG93LmF0b2IpO1xuICAgIH1cblxuICAgIHJldHVybiBtZW1vO1xuICB9O1xufSgpO1xuXG52YXIgZ2V0VGFyZ2V0ID0gZnVuY3Rpb24gZ2V0VGFyZ2V0KCkge1xuICB2YXIgbWVtbyA9IHt9O1xuICByZXR1cm4gZnVuY3Rpb24gbWVtb3JpemUodGFyZ2V0KSB7XG4gICAgaWYgKHR5cGVvZiBtZW1vW3RhcmdldF0gPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICB2YXIgc3R5bGVUYXJnZXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHRhcmdldCk7IC8vIFNwZWNpYWwgY2FzZSB0byByZXR1cm4gaGVhZCBvZiBpZnJhbWUgaW5zdGVhZCBvZiBpZnJhbWUgaXRzZWxmXG5cbiAgICAgIGlmICh3aW5kb3cuSFRNTElGcmFtZUVsZW1lbnQgJiYgc3R5bGVUYXJnZXQgaW5zdGFuY2VvZiB3aW5kb3cuSFRNTElGcmFtZUVsZW1lbnQpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAvLyBUaGlzIHdpbGwgdGhyb3cgYW4gZXhjZXB0aW9uIGlmIGFjY2VzcyB0byBpZnJhbWUgaXMgYmxvY2tlZFxuICAgICAgICAgIC8vIGR1ZSB0byBjcm9zcy1vcmlnaW4gcmVzdHJpY3Rpb25zXG4gICAgICAgICAgc3R5bGVUYXJnZXQgPSBzdHlsZVRhcmdldC5jb250ZW50RG9jdW1lbnQuaGVhZDtcbiAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgIC8vIGlzdGFuYnVsIGlnbm9yZSBuZXh0XG4gICAgICAgICAgc3R5bGVUYXJnZXQgPSBudWxsO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIG1lbW9bdGFyZ2V0XSA9IHN0eWxlVGFyZ2V0O1xuICAgIH1cblxuICAgIHJldHVybiBtZW1vW3RhcmdldF07XG4gIH07XG59KCk7XG5cbnZhciBzdHlsZXNJbkRvbSA9IFtdO1xuXG5mdW5jdGlvbiBnZXRJbmRleEJ5SWRlbnRpZmllcihpZGVudGlmaWVyKSB7XG4gIHZhciByZXN1bHQgPSAtMTtcblxuICBmb3IgKHZhciBpID0gMDsgaSA8IHN0eWxlc0luRG9tLmxlbmd0aDsgaSsrKSB7XG4gICAgaWYgKHN0eWxlc0luRG9tW2ldLmlkZW50aWZpZXIgPT09IGlkZW50aWZpZXIpIHtcbiAgICAgIHJlc3VsdCA9IGk7XG4gICAgICBicmVhaztcbiAgICB9XG4gIH1cblxuICByZXR1cm4gcmVzdWx0O1xufVxuXG5mdW5jdGlvbiBtb2R1bGVzVG9Eb20obGlzdCwgb3B0aW9ucykge1xuICB2YXIgaWRDb3VudE1hcCA9IHt9O1xuICB2YXIgaWRlbnRpZmllcnMgPSBbXTtcblxuICBmb3IgKHZhciBpID0gMDsgaSA8IGxpc3QubGVuZ3RoOyBpKyspIHtcbiAgICB2YXIgaXRlbSA9IGxpc3RbaV07XG4gICAgdmFyIGlkID0gb3B0aW9ucy5iYXNlID8gaXRlbVswXSArIG9wdGlvbnMuYmFzZSA6IGl0ZW1bMF07XG4gICAgdmFyIGNvdW50ID0gaWRDb3VudE1hcFtpZF0gfHwgMDtcbiAgICB2YXIgaWRlbnRpZmllciA9IFwiXCIuY29uY2F0KGlkLCBcIiBcIikuY29uY2F0KGNvdW50KTtcbiAgICBpZENvdW50TWFwW2lkXSA9IGNvdW50ICsgMTtcbiAgICB2YXIgaW5kZXggPSBnZXRJbmRleEJ5SWRlbnRpZmllcihpZGVudGlmaWVyKTtcbiAgICB2YXIgb2JqID0ge1xuICAgICAgY3NzOiBpdGVtWzFdLFxuICAgICAgbWVkaWE6IGl0ZW1bMl0sXG4gICAgICBzb3VyY2VNYXA6IGl0ZW1bM11cbiAgICB9O1xuXG4gICAgaWYgKGluZGV4ICE9PSAtMSkge1xuICAgICAgc3R5bGVzSW5Eb21baW5kZXhdLnJlZmVyZW5jZXMrKztcbiAgICAgIHN0eWxlc0luRG9tW2luZGV4XS51cGRhdGVyKG9iaik7XG4gICAgfSBlbHNlIHtcbiAgICAgIHN0eWxlc0luRG9tLnB1c2goe1xuICAgICAgICBpZGVudGlmaWVyOiBpZGVudGlmaWVyLFxuICAgICAgICB1cGRhdGVyOiBhZGRTdHlsZShvYmosIG9wdGlvbnMpLFxuICAgICAgICByZWZlcmVuY2VzOiAxXG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBpZGVudGlmaWVycy5wdXNoKGlkZW50aWZpZXIpO1xuICB9XG5cbiAgcmV0dXJuIGlkZW50aWZpZXJzO1xufVxuXG5mdW5jdGlvbiBpbnNlcnRTdHlsZUVsZW1lbnQob3B0aW9ucykge1xuICB2YXIgc3R5bGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzdHlsZScpO1xuICB2YXIgYXR0cmlidXRlcyA9IG9wdGlvbnMuYXR0cmlidXRlcyB8fCB7fTtcblxuICBpZiAodHlwZW9mIGF0dHJpYnV0ZXMubm9uY2UgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgdmFyIG5vbmNlID0gdHlwZW9mIF9fd2VicGFja19ub25jZV9fICE9PSAndW5kZWZpbmVkJyA/IF9fd2VicGFja19ub25jZV9fIDogbnVsbDtcblxuICAgIGlmIChub25jZSkge1xuICAgICAgYXR0cmlidXRlcy5ub25jZSA9IG5vbmNlO1xuICAgIH1cbiAgfVxuXG4gIE9iamVjdC5rZXlzKGF0dHJpYnV0ZXMpLmZvckVhY2goZnVuY3Rpb24gKGtleSkge1xuICAgIHN0eWxlLnNldEF0dHJpYnV0ZShrZXksIGF0dHJpYnV0ZXNba2V5XSk7XG4gIH0pO1xuXG4gIGlmICh0eXBlb2Ygb3B0aW9ucy5pbnNlcnQgPT09ICdmdW5jdGlvbicpIHtcbiAgICBvcHRpb25zLmluc2VydChzdHlsZSk7XG4gIH0gZWxzZSB7XG4gICAgdmFyIHRhcmdldCA9IGdldFRhcmdldChvcHRpb25zLmluc2VydCB8fCAnaGVhZCcpO1xuXG4gICAgaWYgKCF0YXJnZXQpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIkNvdWxkbid0IGZpbmQgYSBzdHlsZSB0YXJnZXQuIFRoaXMgcHJvYmFibHkgbWVhbnMgdGhhdCB0aGUgdmFsdWUgZm9yIHRoZSAnaW5zZXJ0JyBwYXJhbWV0ZXIgaXMgaW52YWxpZC5cIik7XG4gICAgfVxuXG4gICAgdGFyZ2V0LmFwcGVuZENoaWxkKHN0eWxlKTtcbiAgfVxuXG4gIHJldHVybiBzdHlsZTtcbn1cblxuZnVuY3Rpb24gcmVtb3ZlU3R5bGVFbGVtZW50KHN0eWxlKSB7XG4gIC8vIGlzdGFuYnVsIGlnbm9yZSBpZlxuICBpZiAoc3R5bGUucGFyZW50Tm9kZSA9PT0gbnVsbCkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIHN0eWxlLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoc3R5bGUpO1xufVxuLyogaXN0YW5idWwgaWdub3JlIG5leHQgICovXG5cblxudmFyIHJlcGxhY2VUZXh0ID0gZnVuY3Rpb24gcmVwbGFjZVRleHQoKSB7XG4gIHZhciB0ZXh0U3RvcmUgPSBbXTtcbiAgcmV0dXJuIGZ1bmN0aW9uIHJlcGxhY2UoaW5kZXgsIHJlcGxhY2VtZW50KSB7XG4gICAgdGV4dFN0b3JlW2luZGV4XSA9IHJlcGxhY2VtZW50O1xuICAgIHJldHVybiB0ZXh0U3RvcmUuZmlsdGVyKEJvb2xlYW4pLmpvaW4oJ1xcbicpO1xuICB9O1xufSgpO1xuXG5mdW5jdGlvbiBhcHBseVRvU2luZ2xldG9uVGFnKHN0eWxlLCBpbmRleCwgcmVtb3ZlLCBvYmopIHtcbiAgdmFyIGNzcyA9IHJlbW92ZSA/ICcnIDogb2JqLm1lZGlhID8gXCJAbWVkaWEgXCIuY29uY2F0KG9iai5tZWRpYSwgXCIge1wiKS5jb25jYXQob2JqLmNzcywgXCJ9XCIpIDogb2JqLmNzczsgLy8gRm9yIG9sZCBJRVxuXG4gIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAgKi9cblxuICBpZiAoc3R5bGUuc3R5bGVTaGVldCkge1xuICAgIHN0eWxlLnN0eWxlU2hlZXQuY3NzVGV4dCA9IHJlcGxhY2VUZXh0KGluZGV4LCBjc3MpO1xuICB9IGVsc2Uge1xuICAgIHZhciBjc3NOb2RlID0gZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoY3NzKTtcbiAgICB2YXIgY2hpbGROb2RlcyA9IHN0eWxlLmNoaWxkTm9kZXM7XG5cbiAgICBpZiAoY2hpbGROb2Rlc1tpbmRleF0pIHtcbiAgICAgIHN0eWxlLnJlbW92ZUNoaWxkKGNoaWxkTm9kZXNbaW5kZXhdKTtcbiAgICB9XG5cbiAgICBpZiAoY2hpbGROb2Rlcy5sZW5ndGgpIHtcbiAgICAgIHN0eWxlLmluc2VydEJlZm9yZShjc3NOb2RlLCBjaGlsZE5vZGVzW2luZGV4XSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHN0eWxlLmFwcGVuZENoaWxkKGNzc05vZGUpO1xuICAgIH1cbiAgfVxufVxuXG5mdW5jdGlvbiBhcHBseVRvVGFnKHN0eWxlLCBvcHRpb25zLCBvYmopIHtcbiAgdmFyIGNzcyA9IG9iai5jc3M7XG4gIHZhciBtZWRpYSA9IG9iai5tZWRpYTtcbiAgdmFyIHNvdXJjZU1hcCA9IG9iai5zb3VyY2VNYXA7XG5cbiAgaWYgKG1lZGlhKSB7XG4gICAgc3R5bGUuc2V0QXR0cmlidXRlKCdtZWRpYScsIG1lZGlhKTtcbiAgfSBlbHNlIHtcbiAgICBzdHlsZS5yZW1vdmVBdHRyaWJ1dGUoJ21lZGlhJyk7XG4gIH1cblxuICBpZiAoc291cmNlTWFwICYmIHR5cGVvZiBidG9hICE9PSAndW5kZWZpbmVkJykge1xuICAgIGNzcyArPSBcIlxcbi8qIyBzb3VyY2VNYXBwaW5nVVJMPWRhdGE6YXBwbGljYXRpb24vanNvbjtiYXNlNjQsXCIuY29uY2F0KGJ0b2EodW5lc2NhcGUoZW5jb2RlVVJJQ29tcG9uZW50KEpTT04uc3RyaW5naWZ5KHNvdXJjZU1hcCkpKSksIFwiICovXCIpO1xuICB9IC8vIEZvciBvbGQgSUVcblxuICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgICovXG5cblxuICBpZiAoc3R5bGUuc3R5bGVTaGVldCkge1xuICAgIHN0eWxlLnN0eWxlU2hlZXQuY3NzVGV4dCA9IGNzcztcbiAgfSBlbHNlIHtcbiAgICB3aGlsZSAoc3R5bGUuZmlyc3RDaGlsZCkge1xuICAgICAgc3R5bGUucmVtb3ZlQ2hpbGQoc3R5bGUuZmlyc3RDaGlsZCk7XG4gICAgfVxuXG4gICAgc3R5bGUuYXBwZW5kQ2hpbGQoZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoY3NzKSk7XG4gIH1cbn1cblxudmFyIHNpbmdsZXRvbiA9IG51bGw7XG52YXIgc2luZ2xldG9uQ291bnRlciA9IDA7XG5cbmZ1bmN0aW9uIGFkZFN0eWxlKG9iaiwgb3B0aW9ucykge1xuICB2YXIgc3R5bGU7XG4gIHZhciB1cGRhdGU7XG4gIHZhciByZW1vdmU7XG5cbiAgaWYgKG9wdGlvbnMuc2luZ2xldG9uKSB7XG4gICAgdmFyIHN0eWxlSW5kZXggPSBzaW5nbGV0b25Db3VudGVyKys7XG4gICAgc3R5bGUgPSBzaW5nbGV0b24gfHwgKHNpbmdsZXRvbiA9IGluc2VydFN0eWxlRWxlbWVudChvcHRpb25zKSk7XG4gICAgdXBkYXRlID0gYXBwbHlUb1NpbmdsZXRvblRhZy5iaW5kKG51bGwsIHN0eWxlLCBzdHlsZUluZGV4LCBmYWxzZSk7XG4gICAgcmVtb3ZlID0gYXBwbHlUb1NpbmdsZXRvblRhZy5iaW5kKG51bGwsIHN0eWxlLCBzdHlsZUluZGV4LCB0cnVlKTtcbiAgfSBlbHNlIHtcbiAgICBzdHlsZSA9IGluc2VydFN0eWxlRWxlbWVudChvcHRpb25zKTtcbiAgICB1cGRhdGUgPSBhcHBseVRvVGFnLmJpbmQobnVsbCwgc3R5bGUsIG9wdGlvbnMpO1xuXG4gICAgcmVtb3ZlID0gZnVuY3Rpb24gcmVtb3ZlKCkge1xuICAgICAgcmVtb3ZlU3R5bGVFbGVtZW50KHN0eWxlKTtcbiAgICB9O1xuICB9XG5cbiAgdXBkYXRlKG9iaik7XG4gIHJldHVybiBmdW5jdGlvbiB1cGRhdGVTdHlsZShuZXdPYmopIHtcbiAgICBpZiAobmV3T2JqKSB7XG4gICAgICBpZiAobmV3T2JqLmNzcyA9PT0gb2JqLmNzcyAmJiBuZXdPYmoubWVkaWEgPT09IG9iai5tZWRpYSAmJiBuZXdPYmouc291cmNlTWFwID09PSBvYmouc291cmNlTWFwKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgdXBkYXRlKG9iaiA9IG5ld09iaik7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJlbW92ZSgpO1xuICAgIH1cbiAgfTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAobGlzdCwgb3B0aW9ucykge1xuICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTsgLy8gRm9yY2Ugc2luZ2xlLXRhZyBzb2x1dGlvbiBvbiBJRTYtOSwgd2hpY2ggaGFzIGEgaGFyZCBsaW1pdCBvbiB0aGUgIyBvZiA8c3R5bGU+XG4gIC8vIHRhZ3MgaXQgd2lsbCBhbGxvdyBvbiBhIHBhZ2VcblxuICBpZiAoIW9wdGlvbnMuc2luZ2xldG9uICYmIHR5cGVvZiBvcHRpb25zLnNpbmdsZXRvbiAhPT0gJ2Jvb2xlYW4nKSB7XG4gICAgb3B0aW9ucy5zaW5nbGV0b24gPSBpc09sZElFKCk7XG4gIH1cblxuICBsaXN0ID0gbGlzdCB8fCBbXTtcbiAgdmFyIGxhc3RJZGVudGlmaWVycyA9IG1vZHVsZXNUb0RvbShsaXN0LCBvcHRpb25zKTtcbiAgcmV0dXJuIGZ1bmN0aW9uIHVwZGF0ZShuZXdMaXN0KSB7XG4gICAgbmV3TGlzdCA9IG5ld0xpc3QgfHwgW107XG5cbiAgICBpZiAoT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKG5ld0xpc3QpICE9PSAnW29iamVjdCBBcnJheV0nKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsYXN0SWRlbnRpZmllcnMubGVuZ3RoOyBpKyspIHtcbiAgICAgIHZhciBpZGVudGlmaWVyID0gbGFzdElkZW50aWZpZXJzW2ldO1xuICAgICAgdmFyIGluZGV4ID0gZ2V0SW5kZXhCeUlkZW50aWZpZXIoaWRlbnRpZmllcik7XG4gICAgICBzdHlsZXNJbkRvbVtpbmRleF0ucmVmZXJlbmNlcy0tO1xuICAgIH1cblxuICAgIHZhciBuZXdMYXN0SWRlbnRpZmllcnMgPSBtb2R1bGVzVG9Eb20obmV3TGlzdCwgb3B0aW9ucyk7XG5cbiAgICBmb3IgKHZhciBfaSA9IDA7IF9pIDwgbGFzdElkZW50aWZpZXJzLmxlbmd0aDsgX2krKykge1xuICAgICAgdmFyIF9pZGVudGlmaWVyID0gbGFzdElkZW50aWZpZXJzW19pXTtcblxuICAgICAgdmFyIF9pbmRleCA9IGdldEluZGV4QnlJZGVudGlmaWVyKF9pZGVudGlmaWVyKTtcblxuICAgICAgaWYgKHN0eWxlc0luRG9tW19pbmRleF0ucmVmZXJlbmNlcyA9PT0gMCkge1xuICAgICAgICBzdHlsZXNJbkRvbVtfaW5kZXhdLnVwZGF0ZXIoKTtcblxuICAgICAgICBzdHlsZXNJbkRvbS5zcGxpY2UoX2luZGV4LCAxKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBsYXN0SWRlbnRpZmllcnMgPSBuZXdMYXN0SWRlbnRpZmllcnM7XG4gIH07XG59OyIsInZhciBfX2RlY29yYXRlID0gKHRoaXMgJiYgdGhpcy5fX2RlY29yYXRlKSB8fCBmdW5jdGlvbiAoZGVjb3JhdG9ycywgdGFyZ2V0LCBrZXksIGRlc2MpIHtcbiAgICB2YXIgYyA9IGFyZ3VtZW50cy5sZW5ndGgsIHIgPSBjIDwgMyA/IHRhcmdldCA6IGRlc2MgPT09IG51bGwgPyBkZXNjID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0YXJnZXQsIGtleSkgOiBkZXNjLCBkO1xuICAgIGlmICh0eXBlb2YgUmVmbGVjdCA9PT0gXCJvYmplY3RcIiAmJiB0eXBlb2YgUmVmbGVjdC5kZWNvcmF0ZSA9PT0gXCJmdW5jdGlvblwiKSByID0gUmVmbGVjdC5kZWNvcmF0ZShkZWNvcmF0b3JzLCB0YXJnZXQsIGtleSwgZGVzYyk7XG4gICAgZWxzZSBmb3IgKHZhciBpID0gZGVjb3JhdG9ycy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkgaWYgKGQgPSBkZWNvcmF0b3JzW2ldKSByID0gKGMgPCAzID8gZChyKSA6IGMgPiAzID8gZCh0YXJnZXQsIGtleSwgcikgOiBkKHRhcmdldCwga2V5KSkgfHwgcjtcbiAgICByZXR1cm4gYyA+IDMgJiYgciAmJiBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIHIpLCByO1xufTtcbnZhciBfX21ldGFkYXRhID0gKHRoaXMgJiYgdGhpcy5fX21ldGFkYXRhKSB8fCBmdW5jdGlvbiAoaywgdikge1xuICAgIGlmICh0eXBlb2YgUmVmbGVjdCA9PT0gXCJvYmplY3RcIiAmJiB0eXBlb2YgUmVmbGVjdC5tZXRhZGF0YSA9PT0gXCJmdW5jdGlvblwiKSByZXR1cm4gUmVmbGVjdC5tZXRhZGF0YShrLCB2KTtcbn07XG52YXIgX19wYXJhbSA9ICh0aGlzICYmIHRoaXMuX19wYXJhbSkgfHwgZnVuY3Rpb24gKHBhcmFtSW5kZXgsIGRlY29yYXRvcikge1xuICAgIHJldHVybiBmdW5jdGlvbiAodGFyZ2V0LCBrZXkpIHsgZGVjb3JhdG9yKHRhcmdldCwga2V5LCBwYXJhbUluZGV4KTsgfVxufTtcbmltcG9ydCAqIGFzIF9fYXUyVmlld0RlZiBmcm9tICcuL2FwcC5odG1sJztcbmltcG9ydCB7IGN1c3RvbUVsZW1lbnQsIHZhbHVlQ29udmVydGVyIH0gZnJvbSAnQGF1cmVsaWEvcnVudGltZS1odG1sJztcbmltcG9ydCB7IERlYnVnSG9zdCB9IGZyb20gXCIuL2JhY2tlbmQvZGVidWctaG9zdFwiO1xuaW1wb3J0IHsgaW5qZWN0LCBJUGxhdGZvcm0gfSBmcm9tIFwiYXVyZWxpYVwiO1xubGV0IFN0cmluZ2lmeVZhbHVlQ29udmVydGVyID0gY2xhc3MgU3RyaW5naWZ5VmFsdWVDb252ZXJ0ZXIge1xuICAgIHRvVmlldyh2YWx1ZSkge1xuICAgICAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkodmFsdWUpO1xuICAgIH1cbn07XG5TdHJpbmdpZnlWYWx1ZUNvbnZlcnRlciA9IF9fZGVjb3JhdGUoW1xuICAgIHZhbHVlQ29udmVydGVyKCdzdHJpbmdpZnknKVxuXSwgU3RyaW5naWZ5VmFsdWVDb252ZXJ0ZXIpO1xuZXhwb3J0IHsgU3RyaW5naWZ5VmFsdWVDb252ZXJ0ZXIgfTtcbmxldCBBcHAgPSBjbGFzcyBBcHAge1xuICAgIGNvbnN0cnVjdG9yKGRlYnVnSG9zdCwgcGxhdCkge1xuICAgICAgICB0aGlzLmRlYnVnSG9zdCA9IGRlYnVnSG9zdDtcbiAgICAgICAgdGhpcy5wbGF0ID0gcGxhdDtcbiAgICAgICAgdGhpcy5pc0RhcmtUaGVtZSA9IGZhbHNlO1xuICAgICAgICB0aGlzLkpTT04gPSBKU09OO1xuICAgICAgICB0aGlzLnNlbGVjdGVkRWxlbWVudCA9IHVuZGVmaW5lZDtcbiAgICAgICAgdGhpcy5zZWxlY3RlZEVsZW1lbnRBdHRyaWJ1dGVzID0gdW5kZWZpbmVkO1xuICAgICAgICB0aGlzLmFsbEF1cmVsaWFPYmplY3RzID0gdW5kZWZpbmVkO1xuICAgIH1cbiAgICBhdHRhY2hpbmcoKSB7XG4gICAgICAgIHRoaXMuZGVidWdIb3N0LmF0dGFjaCh0aGlzKTtcbiAgICAgICAgdGhpcy5pc0RhcmtUaGVtZSA9IGNocm9tZT8uZGV2dG9vbHM/LnBhbmVscz8udGhlbWVOYW1lID09PSBcImRhcmtcIjtcbiAgICAgICAgW10uam9pbigpO1xuICAgICAgICBpZiAodGhpcy5pc0RhcmtUaGVtZSkge1xuICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignaHRtbCcpLnN0eWxlLmJhY2tncm91bmQgPSAnIzIwMjEyNCc7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZ2V0IGN1cnJlbnRDb250cm9sbGVyKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zZWxlY3RlZEVsZW1lbnQ7XG4gICAgfVxuICAgIHZhbHVlQ2hhbmdlZChlbGVtZW50KSB7XG4gICAgICAgIHRoaXMucGxhdC5xdWV1ZU1pY3JvdGFzaygoKSA9PiB0aGlzLmRlYnVnSG9zdC51cGRhdGVWYWx1ZXMoZWxlbWVudCkpO1xuICAgIH1cbn07XG5BcHAgPSBfX2RlY29yYXRlKFtcbiAgICBjdXN0b21FbGVtZW50KHsgLi4uX19hdTJWaWV3RGVmLCBkZXBlbmRlbmNpZXM6IFsuLi5fX2F1MlZpZXdEZWYuZGVwZW5kZW5jaWVzLCBTdHJpbmdpZnlWYWx1ZUNvbnZlcnRlcl0gfSksXG4gICAgaW5qZWN0KCksXG4gICAgX19wYXJhbSgxLCBJUGxhdGZvcm0pLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbRGVidWdIb3N0LCBPYmplY3RdKVxuXSwgQXBwKTtcbmV4cG9ydCB7IEFwcCB9O1xuIiwidmFyIF9fZGVjb3JhdGUgPSAodGhpcyAmJiB0aGlzLl9fZGVjb3JhdGUpIHx8IGZ1bmN0aW9uIChkZWNvcmF0b3JzLCB0YXJnZXQsIGtleSwgZGVzYykge1xuICAgIHZhciBjID0gYXJndW1lbnRzLmxlbmd0aCwgciA9IGMgPCAzID8gdGFyZ2V0IDogZGVzYyA9PT0gbnVsbCA/IGRlc2MgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHRhcmdldCwga2V5KSA6IGRlc2MsIGQ7XG4gICAgaWYgKHR5cGVvZiBSZWZsZWN0ID09PSBcIm9iamVjdFwiICYmIHR5cGVvZiBSZWZsZWN0LmRlY29yYXRlID09PSBcImZ1bmN0aW9uXCIpIHIgPSBSZWZsZWN0LmRlY29yYXRlKGRlY29yYXRvcnMsIHRhcmdldCwga2V5LCBkZXNjKTtcbiAgICBlbHNlIGZvciAodmFyIGkgPSBkZWNvcmF0b3JzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSBpZiAoZCA9IGRlY29yYXRvcnNbaV0pIHIgPSAoYyA8IDMgPyBkKHIpIDogYyA+IDMgPyBkKHRhcmdldCwga2V5LCByKSA6IGQodGFyZ2V0LCBrZXkpKSB8fCByO1xuICAgIHJldHVybiBjID4gMyAmJiByICYmIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgciksIHI7XG59O1xuaW1wb3J0IHsgaW5qZWN0IH0gZnJvbSBcImF1cmVsaWFcIjtcbmV4cG9ydCBjbGFzcyBTZWxlY3Rpb25DaGFuZ2VkIHtcbiAgICBjb25zdHJ1Y3RvcihkZWJ1Z0luZm8pIHtcbiAgICAgICAgdGhpcy5kZWJ1Z0luZm8gPSBkZWJ1Z0luZm87XG4gICAgfVxufVxubGV0IERlYnVnSG9zdCA9IGNsYXNzIERlYnVnSG9zdCB7XG4gICAgYXR0YWNoKGNvbnN1bWVyKSB7XG4gICAgICAgIHRoaXMuY29uc3VtZXIgPSBjb25zdW1lcjtcbiAgICAgICAgaWYgKGNocm9tZSAmJiBjaHJvbWUuZGV2dG9vbHMpIHtcbiAgICAgICAgICAgIGNocm9tZS5kZXZ0b29scy5uZXR3b3JrLm9uTmF2aWdhdGVkLmFkZExpc3RlbmVyKCgpID0+IHtcbiAgICAgICAgICAgICAgICBjaHJvbWUuZGV2dG9vbHMuaW5zcGVjdGVkV2luZG93LmV2YWwoYHdpbmRvdy5fX0FVUkVMSUFfREVWVE9PTFNfR0xPQkFMX0hPT0tfXy5nZXRBbGxJbmZvKClgLCAoZGVidWdPYmplY3QpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jb25zdW1lci5hbGxBdXJlbGlhT2JqZWN0cyA9IGRlYnVnT2JqZWN0O1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBjaHJvbWUuZGV2dG9vbHMucGFuZWxzLmVsZW1lbnRzLm9uU2VsZWN0aW9uQ2hhbmdlZC5hZGRMaXN0ZW5lcigoKSA9PiB7XG4gICAgICAgICAgICAgICAgY2hyb21lLmRldnRvb2xzLmluc3BlY3RlZFdpbmRvdy5ldmFsKGB3aW5kb3cuX19BVVJFTElBX0RFVlRPT0xTX0dMT0JBTF9IT09LX18uZ2V0Q3VzdG9tRWxlbWVudEluZm8oJDApYCwgKGRlYnVnT2JqZWN0KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY29uc3VtZXIuc2VsZWN0ZWRFbGVtZW50ID0gZGVidWdPYmplY3Q/LmN1c3RvbUVsZW1lbnRJbmZvO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmNvbnN1bWVyLnNlbGVjdGVkRWxlbWVudEF0dHJpYnV0ZXMgPSBkZWJ1Z09iamVjdD8uY3VzdG9tQXR0cmlidXRlc0luZm87XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGNocm9tZS5kZXZ0b29scy5pbnNwZWN0ZWRXaW5kb3cuZXZhbChgd2luZG93Ll9fQVVSRUxJQV9ERVZUT09MU19HTE9CQUxfSE9PS19fLmdldEFsbEluZm8oKWAsIChkZWJ1Z09iamVjdCkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuY29uc3VtZXIuYWxsQXVyZWxpYU9iamVjdHMgPSBkZWJ1Z09iamVjdDtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxuICAgIHVwZGF0ZVZhbHVlcyh2YWx1ZSwgcHJvcGVydHkpIHtcbiAgICAgICAgY2hyb21lLmRldnRvb2xzLmluc3BlY3RlZFdpbmRvdy5ldmFsKGB3aW5kb3cuX19BVVJFTElBX0RFVlRPT0xTX0dMT0JBTF9IT09LX18udXBkYXRlVmFsdWVzKCR7SlNPTi5zdHJpbmdpZnkodmFsdWUpfSwgJHtKU09OLnN0cmluZ2lmeShwcm9wZXJ0eSl9KWAsIChkZWJ1Z09iamVjdCkgPT4ge1xuICAgICAgICAgICAgLy8gdGhpcy5jb25zdW1lci5zZWxlY3RlZEVsZW1lbnQgPSBkZWJ1Z09iamVjdDtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIHVwZGF0ZURlYnVnVmFsdWUoZGVidWdJbmZvKSB7XG4gICAgICAgIGxldCB2YWx1ZSA9IGRlYnVnSW5mby52YWx1ZTtcbiAgICAgICAgaWYgKGRlYnVnSW5mby50eXBlID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgICAgICB2YWx1ZSA9IFwiJ1wiICsgdmFsdWUgKyBcIidcIjtcbiAgICAgICAgfVxuICAgICAgICBsZXQgY29kZSA9IGBhdXJlbGlhRGVidWdnZXIudXBkYXRlVmFsdWVGb3JJZCgke2RlYnVnSW5mby5kZWJ1Z0lkfSwgJHt2YWx1ZX0pYDtcbiAgICAgICAgY2hyb21lLmRldnRvb2xzLmluc3BlY3RlZFdpbmRvdy5ldmFsKGNvZGUpO1xuICAgIH1cbiAgICB0b2dnbGVEZWJ1Z1ZhbHVlRXhwYW5zaW9uKGRlYnVnSW5mbykge1xuICAgICAgICBpZiAoZGVidWdJbmZvLmNhbkV4cGFuZCkge1xuICAgICAgICAgICAgZGVidWdJbmZvLmlzRXhwYW5kZWQgPSAhZGVidWdJbmZvLmlzRXhwYW5kZWQ7XG4gICAgICAgICAgICBpZiAoZGVidWdJbmZvLmlzRXhwYW5kZWQgJiYgIWRlYnVnSW5mby5leHBhbmRlZFZhbHVlKSB7XG4gICAgICAgICAgICAgICAgbGV0IGNvZGUgPSBgd2luZG93Ll9fQVVSRUxJQV9ERVZUT09MU19HTE9CQUxfSE9PS19fLmdldEV4cGFuZGVkRGVidWdWYWx1ZUZvcklkKCR7ZGVidWdJbmZvLmRlYnVnSWR9KTtgO1xuICAgICAgICAgICAgICAgIGNocm9tZS5kZXZ0b29scy5pbnNwZWN0ZWRXaW5kb3cuZXZhbChjb2RlLCAoZXhwYW5kZWRWYWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBkZWJ1Z0luZm8uZXhwYW5kZWRWYWx1ZSA9IGV4cGFuZGVkVmFsdWU7XG4gICAgICAgICAgICAgICAgICAgIGRlYnVnSW5mby5pc0V4cGFuZGVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbn07XG5EZWJ1Z0hvc3QgPSBfX2RlY29yYXRlKFtcbiAgICBpbmplY3QoKVxuXSwgRGVidWdIb3N0KTtcbmV4cG9ydCB7IERlYnVnSG9zdCB9O1xuIiwiaW1wb3J0IEF1cmVsaWEsIHsgREksIElQbGF0Zm9ybSwgUExBVEZPUk0sIFJlZ2lzdHJhdGlvbiB9IGZyb20gXCJhdXJlbGlhXCI7XG5pbXBvcnQgeyBTdGFuZGFyZENvbmZpZ3VyYXRpb24gfSBmcm9tICdAYXVyZWxpYS9ydW50aW1lLWh0bWwnO1xuaW1wb3J0IHsgQXBwIH0gZnJvbSBcIi4vYXBwXCI7XG5pbXBvcnQgKiBhcyByZXNvdXJjZXMgZnJvbSAnLi9yZXNvdXJjZXMvaW5kZXgnO1xuY29uc3QgYXVyZWxpYSA9IG5ldyBBdXJlbGlhKERJLmNyZWF0ZUNvbnRhaW5lcigpXG4gICAgLnJlZ2lzdGVyKFJlZ2lzdHJhdGlvbi5pbnN0YW5jZShJUGxhdGZvcm0sIFBMQVRGT1JNKSwgU3RhbmRhcmRDb25maWd1cmF0aW9uLCByZXNvdXJjZXMpKS5hcHAoQXBwKTtcbmF1cmVsaWEuc3RhcnQoKTtcbiIsInZhciBfX2RlY29yYXRlID0gKHRoaXMgJiYgdGhpcy5fX2RlY29yYXRlKSB8fCBmdW5jdGlvbiAoZGVjb3JhdG9ycywgdGFyZ2V0LCBrZXksIGRlc2MpIHtcbiAgICB2YXIgYyA9IGFyZ3VtZW50cy5sZW5ndGgsIHIgPSBjIDwgMyA/IHRhcmdldCA6IGRlc2MgPT09IG51bGwgPyBkZXNjID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0YXJnZXQsIGtleSkgOiBkZXNjLCBkO1xuICAgIGlmICh0eXBlb2YgUmVmbGVjdCA9PT0gXCJvYmplY3RcIiAmJiB0eXBlb2YgUmVmbGVjdC5kZWNvcmF0ZSA9PT0gXCJmdW5jdGlvblwiKSByID0gUmVmbGVjdC5kZWNvcmF0ZShkZWNvcmF0b3JzLCB0YXJnZXQsIGtleSwgZGVzYyk7XG4gICAgZWxzZSBmb3IgKHZhciBpID0gZGVjb3JhdG9ycy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkgaWYgKGQgPSBkZWNvcmF0b3JzW2ldKSByID0gKGMgPCAzID8gZChyKSA6IGMgPiAzID8gZCh0YXJnZXQsIGtleSwgcikgOiBkKHRhcmdldCwga2V5KSkgfHwgcjtcbiAgICByZXR1cm4gYyA+IDMgJiYgciAmJiBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIHIpLCByO1xufTtcbnZhciBfX21ldGFkYXRhID0gKHRoaXMgJiYgdGhpcy5fX21ldGFkYXRhKSB8fCBmdW5jdGlvbiAoaywgdikge1xuICAgIGlmICh0eXBlb2YgUmVmbGVjdCA9PT0gXCJvYmplY3RcIiAmJiB0eXBlb2YgUmVmbGVjdC5tZXRhZGF0YSA9PT0gXCJmdW5jdGlvblwiKSByZXR1cm4gUmVmbGVjdC5tZXRhZGF0YShrLCB2KTtcbn07XG5pbXBvcnQgKiBhcyBfX2F1MlZpZXdEZWYgZnJvbSAnLi9kZWJ1Zy1ncm91cC5odG1sJztcbmltcG9ydCB7IGN1c3RvbUVsZW1lbnQgfSBmcm9tICdAYXVyZWxpYS9ydW50aW1lLWh0bWwnO1xuaW1wb3J0IHsgYmluZGFibGUgfSBmcm9tIFwiYXVyZWxpYVwiO1xubGV0IERlYnVnR3JvdXAgPSBjbGFzcyBEZWJ1Z0dyb3VwIHtcbn07XG5fX2RlY29yYXRlKFtcbiAgICBiaW5kYWJsZSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgU3RyaW5nKVxuXSwgRGVidWdHcm91cC5wcm90b3R5cGUsIFwiaGVhZGluZ1wiLCB2b2lkIDApO1xuRGVidWdHcm91cCA9IF9fZGVjb3JhdGUoW1xuICAgIGN1c3RvbUVsZW1lbnQoX19hdTJWaWV3RGVmKVxuXSwgRGVidWdHcm91cCk7XG5leHBvcnQgeyBEZWJ1Z0dyb3VwIH07XG4iLCJ2YXIgX19kZWNvcmF0ZSA9ICh0aGlzICYmIHRoaXMuX19kZWNvcmF0ZSkgfHwgZnVuY3Rpb24gKGRlY29yYXRvcnMsIHRhcmdldCwga2V5LCBkZXNjKSB7XG4gICAgdmFyIGMgPSBhcmd1bWVudHMubGVuZ3RoLCByID0gYyA8IDMgPyB0YXJnZXQgOiBkZXNjID09PSBudWxsID8gZGVzYyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodGFyZ2V0LCBrZXkpIDogZGVzYywgZDtcbiAgICBpZiAodHlwZW9mIFJlZmxlY3QgPT09IFwib2JqZWN0XCIgJiYgdHlwZW9mIFJlZmxlY3QuZGVjb3JhdGUgPT09IFwiZnVuY3Rpb25cIikgciA9IFJlZmxlY3QuZGVjb3JhdGUoZGVjb3JhdG9ycywgdGFyZ2V0LCBrZXksIGRlc2MpO1xuICAgIGVsc2UgZm9yICh2YXIgaSA9IGRlY29yYXRvcnMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIGlmIChkID0gZGVjb3JhdG9yc1tpXSkgciA9IChjIDwgMyA/IGQocikgOiBjID4gMyA/IGQodGFyZ2V0LCBrZXksIHIpIDogZCh0YXJnZXQsIGtleSkpIHx8IHI7XG4gICAgcmV0dXJuIGMgPiAzICYmIHIgJiYgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCByKSwgcjtcbn07XG52YXIgX19tZXRhZGF0YSA9ICh0aGlzICYmIHRoaXMuX19tZXRhZGF0YSkgfHwgZnVuY3Rpb24gKGssIHYpIHtcbiAgICBpZiAodHlwZW9mIFJlZmxlY3QgPT09IFwib2JqZWN0XCIgJiYgdHlwZW9mIFJlZmxlY3QubWV0YWRhdGEgPT09IFwiZnVuY3Rpb25cIikgcmV0dXJuIFJlZmxlY3QubWV0YWRhdGEoaywgdik7XG59O1xudmFyIF9fcGFyYW0gPSAodGhpcyAmJiB0aGlzLl9fcGFyYW0pIHx8IGZ1bmN0aW9uIChwYXJhbUluZGV4LCBkZWNvcmF0b3IpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKHRhcmdldCwga2V5KSB7IGRlY29yYXRvcih0YXJnZXQsIGtleSwgcGFyYW1JbmRleCk7IH1cbn07XG5pbXBvcnQgKiBhcyBfX2F1MlZpZXdEZWYgZnJvbSAnLi9wcm9wZXJ0eS12aWV3Lmh0bWwnO1xuaW1wb3J0IHsgY3VzdG9tRWxlbWVudCB9IGZyb20gJ0BhdXJlbGlhL3J1bnRpbWUtaHRtbCc7XG5pbXBvcnQgeyBpbmplY3QsIGJpbmRhYmxlLCBJUGxhdGZvcm0gfSBmcm9tICdhdXJlbGlhJztcbmltcG9ydCB7IERlYnVnSG9zdCB9IGZyb20gJy4uLy4uL2JhY2tlbmQvZGVidWctaG9zdCc7XG5jb25zdCBlZGl0YWJsZVR5cGVzID0gWydzdHJpbmcnLCAnbnVtYmVyJywgJ2Jvb2xlYW4nLCAnYmlnaW50J107XG5sZXQgUHJvcGVydHlWaWV3ID0gY2xhc3MgUHJvcGVydHlWaWV3IHtcbiAgICBjb25zdHJ1Y3RvcihkZWJ1Z0hvc3QsIHBsYXRmb3JtKSB7XG4gICAgICAgIHRoaXMuZGVidWdIb3N0ID0gZGVidWdIb3N0O1xuICAgICAgICB0aGlzLnBsYXRmb3JtID0gcGxhdGZvcm07XG4gICAgfVxuICAgIGJlZ2luRWRpdGluZygpIHtcbiAgICAgICAgaWYgKGVkaXRhYmxlVHlwZXMuc29tZSh4ID0+IHggPT09IHRoaXMucHJvcGVydHk/LnR5cGUgfHwgdGhpcy5wcm9wZXJ0eS52YWx1ZSA9PSBudWxsKSkge1xuICAgICAgICAgICAgdGhpcy5wcm9wZXJ0eS5pc0VkaXRpbmcgPSB0cnVlO1xuICAgICAgICAgICAgdGhpcy5wbGF0Zm9ybS5xdWV1ZU1pY3JvdGFzaygoKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5lZGl0b3IuZm9jdXMoKTtcbiAgICAgICAgICAgICAgICB0aGlzLmVkaXRvci5zZWxlY3QoKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxuICAgIGtleXVwKGUpIHtcbiAgICAgICAgaWYgKGUuY29kZSA9PT0gJ0VudGVyJykge1xuICAgICAgICAgICAgdGhpcy5lbmRFZGl0aW5nKCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMucHJvcGVydHkudHlwZSA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgIHRoaXMucHJvcGVydHkudHlwZSA9ICdzdHJpbmcnO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMucGxhdGZvcm0ucXVldWVNaWNyb3Rhc2soKCkgPT4gdGhpcy5kZWJ1Z0hvc3QudXBkYXRlVmFsdWVzKHRoaXMuY29udHJvbGxlciwgdGhpcy5wcm9wZXJ0eSkpO1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgZW5kRWRpdGluZygpIHtcbiAgICAgICAgdGhpcy5wcm9wZXJ0eS5pc0VkaXRpbmcgPSBmYWxzZTtcbiAgICB9XG59O1xuX19kZWNvcmF0ZShbXG4gICAgYmluZGFibGUsXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIE9iamVjdClcbl0sIFByb3BlcnR5Vmlldy5wcm90b3R5cGUsIFwicHJvcGVydHlcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIGJpbmRhYmxlLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBPYmplY3QpXG5dLCBQcm9wZXJ0eVZpZXcucHJvdG90eXBlLCBcImNvbnRyb2xsZXJcIiwgdm9pZCAwKTtcblByb3BlcnR5VmlldyA9IF9fZGVjb3JhdGUoW1xuICAgIGN1c3RvbUVsZW1lbnQoX19hdTJWaWV3RGVmKSxcbiAgICBpbmplY3QoKSxcbiAgICBfX3BhcmFtKDEsIElQbGF0Zm9ybSksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjpwYXJhbXR5cGVzXCIsIFtEZWJ1Z0hvc3QsIE9iamVjdF0pXG5dLCBQcm9wZXJ0eVZpZXcpO1xuZXhwb3J0IHsgUHJvcGVydHlWaWV3IH07XG4iLCJleHBvcnQgKiBmcm9tICcuL2VsZW1lbnRzL2RlYnVnLWdyb3VwJztcbmV4cG9ydCAqIGZyb20gJy4vZWxlbWVudHMvcHJvcGVydHktdmlldyc7XG5leHBvcnQgKiBhcyB0IGZyb20gJy4vZWxlbWVudHMvYXVyZWxpYS1sb2dvLmh0bWwnO1xuZXhwb3J0ICogYXMgdDIgZnJvbSAnLi9lbGVtZW50cy9jb250cm9sbGVyLXZpZXcuaHRtbCc7XG4iLCIvLyBUaGUgbW9kdWxlIGNhY2hlXG52YXIgX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fID0ge307XG5cbi8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG5mdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuXHRpZihfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdKSB7XG5cdFx0cmV0dXJuIF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF0uZXhwb3J0cztcblx0fVxuXHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuXHR2YXIgbW9kdWxlID0gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXSA9IHtcblx0XHRpZDogbW9kdWxlSWQsXG5cdFx0Ly8gbm8gbW9kdWxlLmxvYWRlZCBuZWVkZWRcblx0XHRleHBvcnRzOiB7fVxuXHR9O1xuXG5cdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuXHRfX3dlYnBhY2tfbW9kdWxlc19fW21vZHVsZUlkXShtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuXHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuXHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG59XG5cbiIsIi8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzXG5fX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSAobW9kdWxlKSA9PiB7XG5cdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuXHRcdCgpID0+IG1vZHVsZVsnZGVmYXVsdCddIDpcblx0XHQoKSA9PiBtb2R1bGU7XG5cdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsIHsgYTogZ2V0dGVyIH0pO1xuXHRyZXR1cm4gZ2V0dGVyO1xufTsiLCIvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9ucyBmb3IgaGFybW9ueSBleHBvcnRzXG5fX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSAoZXhwb3J0cywgZGVmaW5pdGlvbikgPT4ge1xuXHRmb3IodmFyIGtleSBpbiBkZWZpbml0aW9uKSB7XG5cdFx0aWYoX193ZWJwYWNrX3JlcXVpcmVfXy5vKGRlZmluaXRpb24sIGtleSkgJiYgIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBrZXkpKSB7XG5cdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywga2V5LCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZGVmaW5pdGlvbltrZXldIH0pO1xuXHRcdH1cblx0fVxufTsiLCJfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSAob2JqLCBwcm9wKSA9PiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBwcm9wKSIsIi8vIGRlZmluZSBfX2VzTW9kdWxlIG9uIGV4cG9ydHNcbl9fd2VicGFja19yZXF1aXJlX18uciA9IChleHBvcnRzKSA9PiB7XG5cdGlmKHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnICYmIFN5bWJvbC50b1N0cmluZ1RhZykge1xuXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBTeW1ib2wudG9TdHJpbmdUYWcsIHsgdmFsdWU6ICdNb2R1bGUnIH0pO1xuXHR9XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG59OyIsIi8vIG1vZHVsZSBleHBvcnRzIG11c3QgYmUgcmV0dXJuZWQgZnJvbSBydW50aW1lIHNvIGVudHJ5IGlubGluaW5nIGlzIGRpc2FibGVkXG4vLyBzdGFydHVwXG4vLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbnJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKFwiLi9zcmMvbWFpbi50c1wiKTtcbiJdLCJzb3VyY2VSb290IjoiIn0=